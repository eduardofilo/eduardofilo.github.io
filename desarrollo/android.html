



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Apuntes varios sobre algunas de las cosas que necesito recordar, principalmente sobre Desarrollo y Sistemas.">
      
      
      
        <meta name="author" content="Eduardo Moreno Lamana">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>Android - Apuntes de eduardofilo</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="manifest" href="../manifest.webmanifest">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="amber">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#android" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Apuntes de eduardofilo" class="md-header-nav__button md-logo">
          
            <img src="../images/eduardofilo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Apuntes de eduardofilo
            </span>
            <span class="md-header-nav__topic">
              Android
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/eduardofilo/eduardofilo.mkdocs/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    eduardofilo.mkdocs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../index.html" title="Blog" class="md-tabs__link">
        Blog
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../cursos/phonegap.html" title="Cursos" class="md-tabs__link">
          Cursos
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="android.html" title="Desarrollo" class="md-tabs__link md-tabs__link--active">
          Desarrollo
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../electronica/arduino.html" title="Electrónica" class="md-tabs__link">
          Electrónica
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../proyectos/headsetcomm.html" title="Proyectos" class="md-tabs__link">
          Proyectos
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../sistemas/android_system.html" title="Sistemas" class="md-tabs__link">
          Sistemas
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../varios/bici.html" title="Varios" class="md-tabs__link">
          Varios
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Apuntes de eduardofilo" class="md-nav__button md-logo">
      
        <img src="../images/eduardofilo.png" width="48" height="48">
      
    </a>
    Apuntes de eduardofilo
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/eduardofilo/eduardofilo.mkdocs/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    eduardofilo.mkdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Blog" class="md-nav__link">
      Blog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2019-07-07-crankshaft-build.html" title="2019-04-20 Compilación OpenAuto para solucionar touch screen" class="md-nav__link">
      2019-04-20 Compilación OpenAuto para solucionar touch screen
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2019-04-20-pong_composite_mod.html" title="2019-04-20 Composite mod en consola Pong" class="md-nav__link">
      2019-04-20 Composite mod en consola Pong
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2019-01-29-bloqueo_telsome.html" title="2019-01-29 Bloqueo de llamadas entrantes en Telsome" class="md-nav__link">
      2019-01-29 Bloqueo de llamadas entrantes en Telsome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2019-01-26-conversion_apuntes_mkdocs.html" title="2019-01-26 Conversión del sitio de Apuntes a MkDocs" class="md-nav__link">
      2019-01-26 Conversión del sitio de Apuntes a MkDocs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2018-10-20-Octoprint-en-Anet-A8.html" title="2018-10-20 Octoprint en Anet A8" class="md-nav__link">
      2018-10-20 Octoprint en Anet A8
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2018-10-19-crankshaft.html" title="2018-10-18 Crankshaft - AndroidAuto sobre Raspberry Pi" class="md-nav__link">
      2018-10-18 Crankshaft - AndroidAuto sobre Raspberry Pi
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2018-05-05-otto.html" title="2018-05-05 Otto DIY" class="md-nav__link">
      2018-05-05 Otto DIY
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2017-01-14-raspi2-kodi-16-tvheadend.html" title="2017-01-14 Raspberry Pi 3 + KODI 16 + Tvheadend" class="md-nav__link">
      2017-01-14 Raspberry Pi 3 + KODI 16 + Tvheadend
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-12-06-raspi3-kodi.html" title="2016-12-06 Raspberry Pi 3 + KODI" class="md-nav__link">
      2016-12-06 Raspberry Pi 3 + KODI
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-10-17-raspi-switch.html" title="2016-10-17 Interruputor de encendido para Raspberry Pi" class="md-nav__link">
      2016-10-17 Interruputor de encendido para Raspberry Pi
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-08-17-el-mundo-de-ayer.html" title="2016-08-17 El mundo de ayer - Stefan Zweig" class="md-nav__link">
      2016-08-17 El mundo de ayer - Stefan Zweig
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-08-02-stm32-vl-discovery.html" title="2016-08-02 Entorno desarrollo STM32 VL Discovery sobre Linux" class="md-nav__link">
      2016-08-02 Entorno desarrollo STM32 VL Discovery sobre Linux
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-07-21-PIGRRL-2.html" title="2016-07-21 Configuración PiGRRL-2" class="md-nav__link">
      2016-07-21 Configuración PiGRRL-2
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-07-10-wild.html" title="2016-07-10 Wild - Cheryl Strayed" class="md-nav__link">
      2016-07-10 Wild - Cheryl Strayed
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-07-02-virus-android.html" title="2016-07-02 Alertas por supuestos virus en Android" class="md-nav__link">
      2016-07-02 Alertas por supuestos virus en Android
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-04-10-un-antropologo-en-marte.html" title="2016-04-10 Un antropólogo en Marte - Oliver Sacks" class="md-nav__link">
      2016-04-10 Un antropólogo en Marte - Oliver Sacks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2016-02-25-los-innovadores.html" title="2016-02-25 Los Innovadores - Walter Isaacson" class="md-nav__link">
      2016-02-25 Los Innovadores - Walter Isaacson
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2015-03-14-raspi2-kodi-tvheadend.html" title="2015-03-14 Raspberry Pi 2 + KODI + Tvheadend" class="md-nav__link">
      2015-03-14 Raspberry Pi 2 + KODI + Tvheadend
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2015-01-09-moviles.html" title="2015-01-09 Móviles recomendables" class="md-nav__link">
      2015-01-09 Móviles recomendables
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2015-01-08-jekyll.html" title="2015-01-08 Jekyll+GitHub Pages" class="md-nav__link">
      2015-01-08 Jekyll+GitHub Pages
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2014-12-26-dokuwiki-raspi.html" title="2014-12-26 Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS" class="md-nav__link">
      2014-12-26 Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2014-12-20-micro-placas.html" title="2014-12-20 Micro placas" class="md-nav__link">
      2014-12-20 Micro placas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2014-12-15-presentacion.html" title="2014-12-15 Presentación" class="md-nav__link">
      2014-12-15 Presentación
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-25" type="checkbox" id="nav-25">
    
    <label class="md-nav__link" for="nav-25">
      Cursos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-25">
        Cursos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cursos/phonegap.html" title="Phonegap" class="md-nav__link">
      Phonegap
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-26" type="checkbox" id="nav-26" checked>
    
    <label class="md-nav__link" for="nav-26">
      Desarrollo
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-26">
        Desarrollo
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Android
      </label>
    
    <a href="android.html" title="Android" class="md-nav__link md-nav__link--active">
      Android
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#entorno" title="Entorno" class="md-nav__link">
    Entorno
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilacion-aosp" title="Compilación AOSP" class="md-nav__link">
    Compilación AOSP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentacion-clave" title="Documentación clave" class="md-nav__link">
    Documentación clave
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-varios" title="Tips varios" class="md-nav__link">
    Tips varios
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#librerias" title="Librerías" class="md-nav__link">
    Librerías
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tutoriales" title="Tutoriales" class="md-nav__link">
    Tutoriales
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snippets" title="Snippets" class="md-nav__link">
    Snippets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estructuras-de-datos" title="Estructuras de datos" class="md-nav__link">
    Estructuras de datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sobre-diseno" title="Sobre Diseño" class="md-nav__link">
    Sobre Diseño
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapas" title="Mapas" class="md-nav__link">
    Mapas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depurar" title="Depurar" class="md-nav__link">
    Depurar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logcat-filtrado" title="Logcat filtrado" class="md-nav__link">
    Logcat filtrado
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dumpsys-y-dumpstate" title="Dumpsys y Dumpstate" class="md-nav__link">
    Dumpsys y Dumpstate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buscar-callerid" title="Buscar CallerID" class="md-nav__link">
    Buscar CallerID
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manejo-de-uris-de-contactos" title="Manejo de URI's de contactos" class="md-nav__link">
    Manejo de URI's de contactos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uri-de-la-tabla-raiz-contacts" title="URI de la tabla raíz Contacts" class="md-nav__link">
    URI de la tabla raíz Contacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uri-de-la-subtabla-rawcontacts" title="URI de la subtabla RawContacts" class="md-nav__link">
    URI de la subtabla RawContacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uri-de-la-subtabla-data" title="URI de la subtabla Data" class="md-nav__link">
    URI de la subtabla Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto" title="URI de la subtabla Data sólo con los registros de un RawContact concreto" class="md-nav__link">
    URI de la subtabla Data sólo con los registros de un RawContact concreto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtener-id-a-partir-de-una-uri-de-tipo-item" title="Obtener ID a partir de una URI de tipo item" class="md-nav__link">
    Obtener ID a partir de una URI de tipo item
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla" title="Obtener la URI de tipo item de un elemento concreto a partir de la tabla" class="md-nav__link">
    Obtener la URI de tipo item de un elemento concreto a partir de la tabla
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo" title="Obtener el ID de un recurso en el ContentProvider de audio externo" class="md-nav__link">
    Obtener el ID de un recurso en el ContentProvider de audio externo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone" title="Inserción de un RawContact de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Inserción de un RawContact de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone" title="Extraer el nombre, el número y la foto de los Contacts de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Extraer el nombre, el número y la foto de los Contacts de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#borrado-de-los-contactos-de-un-tipo" title="Borrado de los contactos de un tipo" class="md-nav__link">
    Borrado de los contactos de un tipo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#borrado-de-un-contacto" title="Borrado de un contacto" class="md-nav__link">
    Borrado de un contacto
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#actualizar-el-nombre-de-un-contacto" title="Actualizar el nombre de un contacto" class="md-nav__link">
    Actualizar el nombre de un contacto
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1" title="Inserción de un RawContact de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Inserción de un RawContact de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2" title="Inserción de un RawContact de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Inserción de un RawContact de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localizar-un-launcher-que-no-sea-el-nuestro" title="Localizar un Launcher que no sea el nuestro" class="md-nav__link">
    Localizar un Launcher que no sea el nuestro
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtener-un-authtoken-de-un-account" title="Obtener un authToken de un Account" class="md-nav__link">
    Obtener un authToken de un Account
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="db.html" title="Bases de Datos" class="md-nav__link">
      Bases de Datos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="diseno.html" title="Diseño" class="md-nav__link">
      Diseño
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="dokuwiki.html" title="Dokuwiki" class="md-nav__link">
      Dokuwiki
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="eclipse.html" title="Eclipse" class="md-nav__link">
      Eclipse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="projects.html" title="Gestión de Proyectos" class="md-nav__link">
      Gestión de Proyectos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="git.html" title="Git" class="md-nav__link">
      Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="html.html" title="HTML+CSS" class="md-nav__link">
      HTML+CSS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="java.html" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="javaee.html" title="JavaEE" class="md-nav__link">
      JavaEE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="javascript.html" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="joomla.html" title="Joomla" class="md-nav__link">
      Joomla
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="php.html" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="python.html" title="Python/Django" class="md-nav__link">
      Python/Django
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ror.html" title="Ruby on Rails" class="md-nav__link">
      Ruby on Rails
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="spree.html" title="Spree" class="md-nav__link">
      Spree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="subl.html" title="Sublime Text 2" class="md-nav__link">
      Sublime Text 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="svn.html" title="SVN" class="md-nav__link">
      SVN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="vagrant.html" title="Vagrant" class="md-nav__link">
      Vagrant
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="yii.html" title="Yii" class="md-nav__link">
      Yii
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-27" type="checkbox" id="nav-27">
    
    <label class="md-nav__link" for="nav-27">
      Electrónica
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-27">
        Electrónica
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../electronica/arduino.html" title="Arduino" class="md-nav__link">
      Arduino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../electronica/3d_printing.html" title="3D Printing" class="md-nav__link">
      3D Printing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../electronica/bus_pirate.html" title="Bus Pirate" class="md-nav__link">
      Bus Pirate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../electronica/m328_transistor_tester.html" title="M328 Transistor Tester" class="md-nav__link">
      M328 Transistor Tester
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../electronica/stm32.html" title="STM32" class="md-nav__link">
      STM32
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-28" type="checkbox" id="nav-28">
    
    <label class="md-nav__link" for="nav-28">
      Proyectos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-28">
        Proyectos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../proyectos/headsetcomm.html" title="Headset Commander" class="md-nav__link">
      Headset Commander
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../proyectos/dicom.html" title="Impresión 3D de ecografías" class="md-nav__link">
      Impresión 3D de ecografías
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../proyectos/minecraft.html" title="Minecraft" class="md-nav__link">
      Minecraft
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-29" type="checkbox" id="nav-29">
    
    <label class="md-nav__link" for="nav-29">
      Sistemas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-29">
        Sistemas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/android_system.html" title="Android" class="md-nav__link">
      Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/soft_imprescindible.html" title="Aplicaciones interesantes" class="md-nav__link">
      Aplicaciones interesantes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/appletv.html" title="AppleTV" class="md-nav__link">
      AppleTV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/docker.html" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/email.html" title="e-mail" class="md-nav__link">
      e-mail
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/emulacion.html" title="Emulación" class="md-nav__link">
      Emulación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/impresoras.html" title="Impresoras" class="md-nav__link">
      Impresoras
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/iot.html" title="IOT" class="md-nav__link">
      IOT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/kodi.html" title="Kodi/OpenELEC" class="md-nav__link">
      Kodi/OpenELEC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/macosx.html" title="Mac OS X" class="md-nav__link">
      Mac OS X
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/mandrake.html" title="Mandrake" class="md-nav__link">
      Mandrake
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/mysql.html" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/nas.html" title="NAS" class="md-nav__link">
      NAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/odroid.html" title="ODROID" class="md-nav__link">
      ODROID
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/office.html" title="Office" class="md-nav__link">
      Office
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/raspi.html" title="Raspberry Pi" class="md-nav__link">
      Raspberry Pi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/redes.html" title="Redes" class="md-nav__link">
      Redes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/router_xiaomi.html" title="Router Xiaomi MiWiFi 3G" class="md-nav__link">
      Router Xiaomi MiWiFi 3G
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/ubuntu_phone.html" title="Ubuntu Phone" class="md-nav__link">
      Ubuntu Phone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/ubuntu.html" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/unix.html" title="UNIX" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/trucos_windows.html" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/zx-spectrum.html" title="ZX Spectrum" class="md-nav__link">
      ZX Spectrum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sistemas/zx-uno.html" title="ZX-Uno" class="md-nav__link">
      ZX-Uno
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-30" type="checkbox" id="nav-30">
    
    <label class="md-nav__link" for="nav-30">
      Varios
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-30">
        Varios
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../varios/bici.html" title="Bicicleta" class="md-nav__link">
      Bicicleta
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varios/links.html" title="Enlaces" class="md-nav__link">
      Enlaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varios/hogar.html" title="Hogar" class="md-nav__link">
      Hogar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varios/english.html" title="Inglés" class="md-nav__link">
      Inglés
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varios/corsa_d.html" title="Opel Corsa D" class="md-nav__link">
      Opel Corsa D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varios/viajes.html" title="Viajes" class="md-nav__link">
      Viajes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#entorno" title="Entorno" class="md-nav__link">
    Entorno
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilacion-aosp" title="Compilación AOSP" class="md-nav__link">
    Compilación AOSP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentacion-clave" title="Documentación clave" class="md-nav__link">
    Documentación clave
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-varios" title="Tips varios" class="md-nav__link">
    Tips varios
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#librerias" title="Librerías" class="md-nav__link">
    Librerías
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tutoriales" title="Tutoriales" class="md-nav__link">
    Tutoriales
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snippets" title="Snippets" class="md-nav__link">
    Snippets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estructuras-de-datos" title="Estructuras de datos" class="md-nav__link">
    Estructuras de datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sobre-diseno" title="Sobre Diseño" class="md-nav__link">
    Sobre Diseño
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapas" title="Mapas" class="md-nav__link">
    Mapas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depurar" title="Depurar" class="md-nav__link">
    Depurar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logcat-filtrado" title="Logcat filtrado" class="md-nav__link">
    Logcat filtrado
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dumpsys-y-dumpstate" title="Dumpsys y Dumpstate" class="md-nav__link">
    Dumpsys y Dumpstate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buscar-callerid" title="Buscar CallerID" class="md-nav__link">
    Buscar CallerID
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manejo-de-uris-de-contactos" title="Manejo de URI's de contactos" class="md-nav__link">
    Manejo de URI's de contactos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uri-de-la-tabla-raiz-contacts" title="URI de la tabla raíz Contacts" class="md-nav__link">
    URI de la tabla raíz Contacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uri-de-la-subtabla-rawcontacts" title="URI de la subtabla RawContacts" class="md-nav__link">
    URI de la subtabla RawContacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uri-de-la-subtabla-data" title="URI de la subtabla Data" class="md-nav__link">
    URI de la subtabla Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto" title="URI de la subtabla Data sólo con los registros de un RawContact concreto" class="md-nav__link">
    URI de la subtabla Data sólo con los registros de un RawContact concreto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtener-id-a-partir-de-una-uri-de-tipo-item" title="Obtener ID a partir de una URI de tipo item" class="md-nav__link">
    Obtener ID a partir de una URI de tipo item
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla" title="Obtener la URI de tipo item de un elemento concreto a partir de la tabla" class="md-nav__link">
    Obtener la URI de tipo item de un elemento concreto a partir de la tabla
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo" title="Obtener el ID de un recurso en el ContentProvider de audio externo" class="md-nav__link">
    Obtener el ID de un recurso en el ContentProvider de audio externo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone" title="Inserción de un RawContact de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Inserción de un RawContact de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone" title="Extraer el nombre, el número y la foto de los Contacts de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Extraer el nombre, el número y la foto de los Contacts de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#borrado-de-los-contactos-de-un-tipo" title="Borrado de los contactos de un tipo" class="md-nav__link">
    Borrado de los contactos de un tipo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#borrado-de-un-contacto" title="Borrado de un contacto" class="md-nav__link">
    Borrado de un contacto
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#actualizar-el-nombre-de-un-contacto" title="Actualizar el nombre de un contacto" class="md-nav__link">
    Actualizar el nombre de un contacto
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1" title="Inserción de un RawContact de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Inserción de un RawContact de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2" title="Inserción de un RawContact de tipo "vnd.sec.contact.phone"" class="md-nav__link">
    Inserción de un RawContact de tipo "vnd.sec.contact.phone"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localizar-un-launcher-que-no-sea-el-nuestro" title="Localizar un Launcher que no sea el nuestro" class="md-nav__link">
    Localizar un Launcher que no sea el nuestro
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtener-un-authtoken-de-un-account" title="Obtener un authToken de un Account" class="md-nav__link">
    Obtener un authToken de un Account
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardofilo/eduardofilo.mkdocs/edit/master/docs/desarrollo/android.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="android">Android<a class="headerlink" href="#android" title="Permanent link">&para;</a></h1>
<h2 id="entorno">Entorno<a class="headerlink" href="#entorno" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://www.elandroidelibre.com/2016/09/instalar-adb-en-windows.html">Todos los drivers para instalar ADB en Windows sin morir en el intento</a></li>
</ul>
<h2 id="compilacion-aosp">Compilación AOSP<a class="headerlink" href="#compilacion-aosp" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://xda-university.com/as-a-developer/getting-started-building-android-from-source">Getting Started: Building Android From Source</a></li>
<li><a href="http://xda-university.com/as-a-developer/introduction-how-an-android-rom-is-built">How to Build an Android ROM</a></li>
</ul>
<h2 id="documentacion-clave">Documentación clave<a class="headerlink" href="#documentacion-clave" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://developer.android.com/guide/topics/ui/declaring-layout.html#id">ID's de los View's</a></li>
</ul>
<h2 id="tips-varios">Tips varios<a class="headerlink" href="#tips-varios" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://stackoverflow.com/questions/456211/activity-restart-on-rotation-android">Activity restart on rotation Android</a></li>
<li><a href="http://androcode.es/2011/12/lint-eliminando-la-pelusa-de-nuestras-aplicaciones/">Lint, eliminando la pelusa de nuestras aplicaciones</a></li>
</ul>
<h2 id="librerias">Librerías<a class="headerlink" href="#librerias" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://androcode.es/2011/12/roboguice-la-libreria-que-exprime-nuestro-codigo/">RoboGuice la librería que exprime nuestro código</a></li>
<li><a href="http://ormlite.com/">OrmLite - Lightweight Object Relational Mapping (ORM) Java Package</a></li>
<li><a href="http://www.lungojs.com/">Mobile Framework that uses the actual features of #HTML5, #CSS3 and #JavaScript</a></li>
</ul>
<h2 id="tutoriales">Tutoriales<a class="headerlink" href="#tutoriales" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://www.vogella.de/articles/Android/article.html">Android Development Tutorial (Lars Vogel)</a></li>
<li><a href="http://www.vogella.de/articles/AndroidListView/article.html">Android ListView and ListActivity (Lars Vogel)</a></li>
<li><a href="http://www.metafisicainformatica.com/2011/03/02/pasando-informacion-entre-actividades-activity-en-android/">Pasando información entre Actividades (Activity) en Android</a></li>
<li><a href="http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/">Avoid memory leaks on Android</a></li>
</ul>
<h2 id="snippets">Snippets<a class="headerlink" href="#snippets" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://www.wikidroid.es/index.php?title=P%C3%A1gina_Principal">WikiDroid</a></li>
<li><a href="http://es.wikicode.org/index.php/Categor%C3%ADa:Android">Categoría Android en WikiCode</a></li>
<li><a href="http://androcode.es/">Androcode</a></li>
<li><a href="http://www.androidsnippets.com/">Android Snippets</a></li>
</ul>
<h2 id="estructuras-de-datos">Estructuras de datos<a class="headerlink" href="#estructuras-de-datos" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://androcode.es/2011/10/android-dataframework-creando-la-estructura-de-la-base-de-datos/">Android DataFramework, creando la estructura de la Base de Datos</a></li>
<li><a href="http://androcode.es/2011/10/usando-android-dataframework-en-nuestro-proyecto/">Usando Android DataFramework en nuestro proyecto</a></li>
</ul>
<h2 id="sobre-diseno">Sobre Diseño<a class="headerlink" href="#sobre-diseno" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://developer.android.com/resources/tutorials/views/index.html">Hello, Views</a></li>
<li><a href="http://developer.android.com/guide/topics/ui/layout-objects.html">Common Layout Objects</a></li>
<li><a href="http://www.androidpatterns.com/">Android Interaction Desing Patterns</a> :!:</li>
<li><a href="http://developer.android.com/guide/practices/ui_guidelines/icon_design.html">Icon Design Guidelines</a></li>
<li><a href="http://developer.android.com/guide/practices/ui_guidelines/widget_design.html">Widget Design Guidelines</a></li>
<li><a href="http://speckyboy.com/2010/05/10/android-app-developers-gui-kits-icons-fonts-and-tools/">Android App Developers GUI Kits, Icons, Fonts and Tools</a></li>
<li><a href="http://androiddrawableexplorer.appspot.com/">Android R Drawable Explorer</a></li>
<li><a href="http://www.elandroidelibre.com/2011/12/20-herramientas-utiles-para-desarrolladores-android.html">20 herramientas útiles para Desarrolladores Android</a></li>
<li><a href="http://developer.android.com/design/index.html">Android Design</a></li>
<li><a href="http://www.elandroidelibre.com/2012/06/el-cambio-de-tendencia-en-la-ui-de-android-el-men-lateral.html">El cambio de tendencia en la UI de Android: el Menú Lateral</a></li>
</ul>
<h2 id="mapas">Mapas<a class="headerlink" href="#mapas" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://code.google.com/intl/es-ES/android/add-ons/google-apis/mapkey.html">Obtener APIKey</a></li>
</ul>
<p>Tu clave es:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>0V21y2J7NRVSVKA...5C9Ag
</pre></div>
</td></tr></table>

<p>Esta clave es válida para todas las aplicaciones firmadas con el certificado cuya huella dactilar sea:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">C2</span><span class="o">:</span><span class="n">EC</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span><span class="mi">8</span><span class="n">F</span><span class="o">:...:</span><span class="mi">56</span><span class="o">:</span><span class="mi">39</span>
</pre></div>
</td></tr></table>

<p>Incluimos un diseño xml de ejemplo para que puedas iniciarte por los senderos de la creación de mapas:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">&lt;com.google.android.maps.MapView</span>
   <span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
   <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span>
   <span class="na">android:apiKey=</span><span class="s">&quot;0V21y2J7NRVSVKA...5C9Ag&quot;</span>
   <span class="nt">/&gt;</span>
</pre></div>
</td></tr></table>

<h2 id="depurar">Depurar<a class="headerlink" href="#depurar" title="Permanent link">&para;</a></h2>
<p>Añadir el atributo siguiente al bloque "application":</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">android</span><span class="o">:</span><span class="n">debuggable</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
</pre></div>
</td></tr></table>

<p>Solicitar el permiso siguiente:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;uses-permission android:name=&quot;android.permission.SET_DEBUG_APP&quot; /&gt;
</pre></div>
</td></tr></table>

<h2 id="logcat-filtrado">Logcat filtrado<a class="headerlink" href="#logcat-filtrado" title="Permanent link">&para;</a></h2>
<p>Ejemplo de una expresión de filtrado que suprime (silencia) todos los mensajes de log excepto los que tienen el tag "ActivityManager" con una prioridad Info o superior, y los que tienen el tag "MyApp" con una prioridad Debug o superior:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ adb logcat ActivityManager:I MyApp:D *:S
</pre></div>
</td></tr></table>

<p>Las prioridades de log son:</p>
<ul>
<li>V — Verbose (lowest priority)</li>
<li>D — Debug</li>
<li>I — Info</li>
<li>W — Warning</li>
<li>E — Error</li>
<li>F — Fatal</li>
<li>S — Silent (highest priority, on which nothing is ever printed)</li>
</ul>
<h2 id="dumpsys-y-dumpstate">Dumpsys y Dumpstate<a class="headerlink" href="#dumpsys-y-dumpstate" title="Permanent link">&para;</a></h2>
<p>Hace un volcado de los datos del sistema. Viene bien para encontrar componentes instalados (Aplicaciones, ContentProvider's, etc.):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ adb shell dumpsys
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ adb shell dumpstate
</pre></div>
</td></tr></table>

<h2 id="buscar-callerid">Buscar CallerID<a class="headerlink" href="#buscar-callerid" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.database.Cursor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.provider.ContactsContract</span><span class="o">;</span>

<span class="n">Uri</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">withAppendedPath</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">PhoneLookup</span><span class="o">.</span><span class="na">CONTENT_FILTER_URI</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">&quot;+34976010101&quot;</span><span class="o">));</span>
<span class="n">Cursor</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">query</span><span class="o">(</span><span class="n">uri</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">PhoneLookup</span><span class="o">.</span><span class="na">DISPLAY_NAME</span><span class="o">},</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h2 id="manejo-de-uris-de-contactos">Manejo de URI's de contactos<a class="headerlink" href="#manejo-de-uris-de-contactos" title="Permanent link">&para;</a></h2>
<p>La API de Contacts de Android es muy potente y compleja. Los conceptos básicos se describen <a href="http://developer.android.com/resources/articles/contacts.html">aquí</a>.</p>
<p>Se manejan dos tipos de URI's:</p>
<ul>
<li>URI's de tipo tabla: Apuntan por ejemplo a una tabla completa como puede ser la de RawContacts.</li>
<li>URI's de tipo item: Apuntan a un registro concreto de una tabla, por ejemplo un RawContact.</li>
</ul>
<h3 id="uri-de-la-tabla-raiz-contacts">URI de la tabla raíz Contacts<a class="headerlink" href="#uri-de-la-tabla-raiz-contacts" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.provider.ContactsContract</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">contactsUri</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">Contacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
</pre></div>
</td></tr></table>

<h3 id="uri-de-la-subtabla-rawcontacts">URI de la subtabla RawContacts<a class="headerlink" href="#uri-de-la-subtabla-rawcontacts" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.provider.ContactsContract</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">rawContactsUri</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
</pre></div>
</td></tr></table>

<h3 id="uri-de-la-subtabla-data">URI de la subtabla Data<a class="headerlink" href="#uri-de-la-subtabla-data" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.provider.ContactsContract</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">datasUri</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
</pre></div>
</td></tr></table>

<h3 id="uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto">URI de la subtabla Data sólo con los registros de un RawContact concreto<a class="headerlink" href="#uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.provider.ContactsContract</span><span class="o">;</span>
<span class="c1">// Tenemos en rawContactUri el URI de un RawContact. Será del tipo content://com.android.contacts/raw_contacts/_id</span>
<span class="n">Uri</span> <span class="n">datasUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">withAppendedPath</span><span class="o">(</span><span class="n">rawContactUri</span><span class="o">,</span> <span class="n">RawContacts</span><span class="o">.</span><span class="na">Entity</span><span class="o">.</span><span class="na">CONTENT_DIRECTORY</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h3 id="obtener-id-a-partir-de-una-uri-de-tipo-item">Obtener ID a partir de una URI de tipo item<a class="headerlink" href="#obtener-id-a-partir-de-una-uri-de-tipo-item" title="Permanent link">&para;</a></h3>
<p>Por ejemplo el método para insertar un RawContact devuelve una URI de tipo item (no tabla). Para obtener el ID de dicho elemento podemos usar algunas funciones que hay en la clase ''android.content.ContentUris''.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.content.ContentUris</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">rawContactId</span> <span class="o">=</span> <span class="n">ContentUris</span><span class="o">.</span><span class="na">parseId</span><span class="o">(</span><span class="n">rawContactUri</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h3 id="obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla">Obtener la URI de tipo item de un elemento concreto a partir de la tabla<a class="headerlink" href="#obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla" title="Permanent link">&para;</a></h3>
<p>Por ejemplo tenemos el ID de un elemento y queremos una URI para él.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.provider.ContactsContract</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.ContentUris</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">rawContactUri</span> <span class="o">=</span> <span class="n">ContentUris</span><span class="o">.</span><span class="na">withAppendedId</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">,</span> <span class="n">rawContactId</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p>Resumiendo:</p>
<table>
<thead>
<tr>
<th align="left">Significado</th>
<th align="left">URI (string)</th>
<th align="left">URI (constant)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">URI de toda la tabla RawContacts</td>
<td align="left">content://com.android.contacts/raw_contacts</td>
<td align="left">Uri rawContactsUri = android.provider.ContactsContract.RawContacts.CONTENT_URI</td>
</tr>
<tr>
<td align="left">URI de un registro concreto de RawContacts</td>
<td align="left">content://com.android.contacts/raw_contacts/&lt;_id&gt;</td>
<td align="left">Uri rawContactUri = ContentUris.withAppendedId(android.provider.ContactsContract.RawContacts.CONTENT_URI, rawContactId);</td>
</tr>
<tr>
<td align="left">URI de una subtabla (subdirectorio lo llaman en la documentación) con los Datas asociados a un RawContact concreto</td>
<td align="left">content://com.android.contacts/raw_contacts/&lt;_id&gt;/entity</td>
<td align="left">Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY);</td>
</tr>
</tbody>
</table>
<h2 id="obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo">Obtener el ID de un recurso en el ContentProvider de audio externo<a class="headerlink" href="#obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">outText</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">externalMediaUri</span> <span class="o">=</span> <span class="n">android</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">MediaStore</span><span class="o">.</span><span class="na">Audio</span><span class="o">.</span><span class="na">Media</span><span class="o">.</span><span class="na">EXTERNAL_CONTENT_URI</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">projection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="n">android</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">BaseColumns</span><span class="o">.</span><span class="na">_ID</span><span class="o">};</span>
<span class="n">String</span> <span class="n">where</span> <span class="o">=</span> <span class="n">android</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">MediaStore</span><span class="o">.</span><span class="na">MediaColumns</span><span class="o">.</span><span class="na">TITLE</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;Space Oddity&quot;</span> <span class="o">};</span>
<span class="n">Cursor</span> <span class="n">c</span> <span class="o">=</span> <span class="n">managedQuery</span><span class="o">(</span><span class="n">externalMediaUri</span><span class="o">,</span> <span class="n">projection</span><span class="o">,</span> <span class="n">where</span><span class="o">,</span> <span class="n">whereArgs</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="k">while</span> <span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">moveToNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">c</span><span class="o">.</span><span class="na">getColumnCount</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">outText</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="na">getColumnName</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;= &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h2 id="insercion-de-un-rawcontact-de-tipo-vndseccontactphone">Inserción de un RawContact de tipo "vnd.sec.contact.phone"<a class="headerlink" href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ContentProviderOperation</span><span class="o">&gt;</span> <span class="n">operationList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ContentProviderOperation</span><span class="o">&gt;();</span>
<span class="n">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_NAME</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_TYPE</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValueBackReference</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span>
        <span class="n">ContactsContract</span><span class="o">.</span><span class="na">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">DISPLAY_NAME</span><span class="o">,</span> <span class="s">&quot;Felipito&quot;</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValueBackReference</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">TYPE_MAIN</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">NUMBER</span><span class="o">,</span> <span class="s">&quot;976010101&quot;</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValueBackReference</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Photo</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">ByteArrayOutputStream</span> <span class="n">stream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
<span class="n">bitmap</span><span class="o">.</span><span class="na">compress</span><span class="o">(</span><span class="n">Bitmap</span><span class="o">.</span><span class="na">CompressFormat</span><span class="o">.</span><span class="na">JPEG</span><span class="o">,</span> <span class="mi">75</span><span class="o">,</span> <span class="n">stream</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Photo</span><span class="o">.</span><span class="na">PHOTO</span><span class="o">,</span> <span class="n">stream</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">());</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">IS_SUPER_PRIMARY</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">getContentResolver</span><span class="o">().</span><span class="na">applyBatch</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">AUTHORITY</span><span class="o">,</span> <span class="n">operationList</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">OperationApplicationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h2 id="extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone">Extraer el nombre, el número y la foto de los Contacts de tipo "vnd.sec.contact.phone"<a class="headerlink" href="#extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Uri</span> <span class="n">rawContactsUri</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">projection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">_ID</span> <span class="o">};</span>
<span class="n">String</span> <span class="n">where</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_TYPE</span> <span class="o">+</span> <span class="s">&quot;=? AND &quot;</span>
        <span class="o">+</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_NAME</span> <span class="o">+</span> <span class="s">&quot;=? AND &quot;</span>
        <span class="o">+</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">DELETED</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">,</span> <span class="s">&quot;0&quot;</span> <span class="o">};</span>
<span class="n">String</span> <span class="n">sortOrder</span> <span class="o">=</span> <span class="s">&quot;display_name ASC&quot;</span><span class="o">;</span>
<span class="n">Cursor</span> <span class="n">c</span> <span class="o">=</span> <span class="n">managedQuery</span><span class="o">(</span><span class="n">rawContactsUri</span><span class="o">,</span> <span class="n">projection</span><span class="o">,</span> <span class="n">where</span><span class="o">,</span> <span class="n">whereArgs</span><span class="o">,</span> <span class="n">sortOrder</span><span class="o">);</span>
<span class="n">outText</span> <span class="o">+=</span> <span class="n">rawContactsUri</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
<span class="n">outText</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="na">getCount</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
<span class="k">while</span> <span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">moveToNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">colPos</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getColumnIndex</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">_ID</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">rawContactId</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">colPos</span><span class="o">));</span>
    <span class="n">Uri</span> <span class="n">rawContactUri</span> <span class="o">=</span> <span class="n">ContentUris</span><span class="o">.</span><span class="na">withAppendedId</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">,</span>
            <span class="n">rawContactId</span><span class="o">);</span>
    <span class="n">Uri</span> <span class="n">datasUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">withAppendedPath</span><span class="o">(</span><span class="n">rawContactUri</span><span class="o">,</span> <span class="n">RawContacts</span><span class="o">.</span><span class="na">Entity</span><span class="o">.</span><span class="na">CONTENT_DIRECTORY</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">number</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="n">Bitmap</span> <span class="n">bitmap</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="n">String</span><span class="o">[]</span> <span class="n">projection1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">DISPLAY_NAME</span> <span class="o">};</span>
    <span class="n">String</span> <span class="n">where1</span> <span class="o">=</span> <span class="n">Data</span><span class="o">.</span><span class="na">MIMETYPE</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span> <span class="o">};</span>
    <span class="n">Cursor</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">managedQuery</span><span class="o">(</span><span class="n">datasUri</span><span class="o">,</span> <span class="n">projection1</span><span class="o">,</span> <span class="n">where1</span><span class="o">,</span> <span class="n">whereArgs1</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">moveToNext</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">getColumnIndex</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">DISPLAY_NAME</span><span class="o">));</span>
        <span class="n">c1</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">String</span><span class="o">[]</span> <span class="n">projection2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">NUMBER</span> <span class="o">};</span>
    <span class="n">String</span> <span class="n">where2</span> <span class="o">=</span> <span class="n">Data</span><span class="o">.</span><span class="na">MIMETYPE</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span> <span class="o">};</span>
    <span class="n">Cursor</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">managedQuery</span><span class="o">(</span><span class="n">datasUri</span><span class="o">,</span> <span class="n">projection2</span><span class="o">,</span> <span class="n">where2</span><span class="o">,</span> <span class="n">whereArgs2</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">moveToNext</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">getColumnIndex</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">NUMBER</span><span class="o">));</span>
        <span class="n">c2</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">String</span><span class="o">[]</span> <span class="n">projection3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Photo</span><span class="o">.</span><span class="na">PHOTO</span> <span class="o">};</span>
    <span class="n">String</span> <span class="n">where3</span> <span class="o">=</span> <span class="n">Data</span><span class="o">.</span><span class="na">MIMETYPE</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Photo</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span> <span class="o">};</span>
    <span class="n">Cursor</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">managedQuery</span><span class="o">(</span><span class="n">datasUri</span><span class="o">,</span> <span class="n">projection3</span><span class="o">,</span> <span class="n">where3</span><span class="o">,</span> <span class="n">whereArgs3</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">c3</span><span class="o">.</span><span class="na">moveToNext</span><span class="o">())</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">photo</span> <span class="o">=</span> <span class="n">c3</span><span class="o">.</span><span class="na">getBlob</span><span class="o">(</span><span class="n">c3</span><span class="o">.</span><span class="na">getColumnIndex</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Photo</span><span class="o">.</span><span class="na">PHOTO</span><span class="o">));</span>
        <span class="n">bitmap</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeByteArray</span><span class="o">(</span><span class="n">photo</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">photo</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
        <span class="n">c3</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">outText</span> <span class="o">+=</span> <span class="s">&quot;ID= &quot;</span> <span class="o">+</span> <span class="n">rawContactId</span> <span class="o">+</span> <span class="s">&quot;; Nombre= &quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;; Número= &quot;</span> <span class="o">+</span> <span class="n">number</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bitmap</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">outText</span> <span class="o">+=</span> <span class="s">&quot;; Ancho foto= &quot;</span> <span class="o">+</span> <span class="n">bitmap</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;; Alto foto= &quot;</span> <span class="o">+</span> <span class="n">bitmap</span><span class="o">.</span><span class="na">getHeight</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">outText</span> <span class="o">+=</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
<span class="o">}</span>
<span class="n">c</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></div>
</td></tr></table>

<h2 id="borrado-de-los-contactos-de-un-tipo">Borrado de los contactos de un tipo<a class="headerlink" href="#borrado-de-los-contactos-de-un-tipo" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Uri</span> <span class="n">rawContacts</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
<span class="n">String</span> <span class="n">where</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_TYPE</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;es.eduardofilo.app&quot;</span> <span class="o">};</span>
<span class="n">getContentResolver</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">rawContacts</span><span class="o">,</span> <span class="n">where</span><span class="o">,</span> <span class="n">whereArgs</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h2 id="borrado-de-un-contacto">Borrado de un contacto<a class="headerlink" href="#borrado-de-un-contacto" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Uri</span> <span class="n">rawContacts</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">rawContactUri</span> <span class="o">=</span> <span class="n">ContentUris</span><span class="o">.</span><span class="na">withAppendedId</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span>
<span class="n">getContentResolver</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">rawContactUri</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h2 id="actualizar-el-nombre-de-un-contacto">Actualizar el nombre de un contacto<a class="headerlink" href="#actualizar-el-nombre-de-un-contacto" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kt">long</span> <span class="n">rawContactId</span> <span class="o">=</span> <span class="mi">14</span><span class="o">;</span>
<span class="n">Uri</span> <span class="n">data</span> <span class="o">=</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">;</span>
<span class="n">ContentValues</span> <span class="n">values</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContentValues</span><span class="o">();</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">DISPLAY_NAME</span><span class="o">,</span> <span class="s">&quot;Jorgito&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">where</span> <span class="o">=</span> <span class="n">Data</span><span class="o">.</span><span class="na">MIMETYPE</span> <span class="o">+</span> <span class="s">&quot;=? AND &quot;</span> <span class="o">+</span> <span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span> <span class="o">+</span> <span class="s">&quot;=?&quot;</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">whereArgs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">rawContactId</span><span class="o">)</span> <span class="o">};</span>
<span class="n">getContentResolver</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">values</span><span class="o">,</span> <span class="n">where</span><span class="o">,</span> <span class="n">whereArgs</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h2 id="insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1">Inserción de un RawContact de tipo "vnd.sec.contact.phone"<a class="headerlink" href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">ContentValues</span> <span class="n">values</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContentValues</span><span class="o">();</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_TYPE</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_NAME</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">);</span>
<span class="n">Uri</span> <span class="n">rawContactUri</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">insert</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">,</span> <span class="n">values</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">rawContactId</span> <span class="o">=</span> <span class="n">ContentUris</span><span class="o">.</span><span class="na">parseId</span><span class="o">(</span><span class="n">rawContactUri</span><span class="o">);</span>

<span class="n">values</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="n">rawContactId</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">DISPLAY_NAME</span><span class="o">,</span> <span class="s">&quot;Pepito&quot;</span><span class="o">);</span>
<span class="n">Uri</span> <span class="n">data1Uri</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">insert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">,</span> <span class="n">values</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>

<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="n">rawContactId</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">TYPE_MAIN</span><span class="o">);</span>
<span class="n">values</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">NUMBER</span><span class="o">,</span> <span class="s">&quot;976010101&quot;</span><span class="o">);</span>
<span class="n">Uri</span> <span class="n">data2Uri</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">insert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">,</span> <span class="n">values</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h2 id="insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2">Inserción de un RawContact de tipo "vnd.sec.contact.phone"<a class="headerlink" href="#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2" title="Permanent link">&para;</a></h2>
<p>Igual que antes pero hecho con el sistema de operaciones por lotes de los ContentProvider's.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ContentProviderOperation</span><span class="o">&gt;</span> <span class="n">operationList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ContentProviderOperation</span><span class="o">&gt;();</span>
<span class="n">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_NAME</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">RawContacts</span><span class="o">.</span><span class="na">ACCOUNT_TYPE</span><span class="o">,</span> <span class="s">&quot;vnd.sec.contact.phone&quot;</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValueBackReference</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span>
        <span class="n">ContactsContract</span><span class="o">.</span><span class="na">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">CommonDataKinds</span><span class="o">.</span><span class="na">StructuredName</span><span class="o">.</span><span class="na">DISPLAY_NAME</span><span class="o">,</span> <span class="s">&quot;Debianito&quot;</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="n">builder</span> <span class="o">=</span> <span class="n">ContentProviderOperation</span><span class="o">.</span><span class="na">newInsert</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">CONTENT_URI</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValueBackReference</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">RAW_CONTACT_ID</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">Data</span><span class="o">.</span><span class="na">MIMETYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">CONTENT_ITEM_TYPE</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">TYPE_MAIN</span><span class="o">);</span>
<span class="n">builder</span><span class="o">.</span><span class="na">withValue</span><span class="o">(</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="na">Phone</span><span class="o">.</span><span class="na">NUMBER</span><span class="o">,</span> <span class="s">&quot;976010101&quot;</span><span class="o">);</span>
<span class="n">operationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">getContentResolver</span><span class="o">().</span><span class="na">applyBatch</span><span class="o">(</span><span class="n">ContactsContract</span><span class="o">.</span><span class="na">AUTHORITY</span><span class="o">,</span> <span class="n">operationList</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">OperationApplicationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h2 id="localizar-un-launcher-que-no-sea-el-nuestro">Localizar un Launcher que no sea el nuestro<a class="headerlink" href="#localizar-un-launcher-que-no-sea-el-nuestro" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">PackageManager</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">getPackageManager</span><span class="o">();</span>
<span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_MAIN</span><span class="o">);</span>
<span class="n">intent</span><span class="o">.</span><span class="na">addCategory</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">CATEGORY_HOME</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">ResolveInfo</span><span class="o">&gt;</span> <span class="n">launchers</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="na">queryIntentActivities</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">String</span> <span class="n">packageName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">for</span> <span class="o">(</span><span class="n">ResolveInfo</span> <span class="n">ri</span> <span class="o">:</span> <span class="n">launchers</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">ri</span><span class="o">.</span><span class="na">activityInfo</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;es.eduardofilo.app.mobile.IdentificarTerminal&quot;</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">ri</span><span class="o">.</span><span class="na">activityInfo</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
        <span class="n">packageName</span> <span class="o">=</span> <span class="n">ri</span><span class="o">.</span><span class="na">activityInfo</span><span class="o">.</span><span class="na">packageName</span><span class="o">;</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">Intent</span> <span class="n">myIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">();</span>
<span class="n">myIntent</span><span class="o">.</span><span class="na">setClassName</span><span class="o">(</span><span class="n">packageName</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
<span class="n">startActivity</span><span class="o">(</span><span class="n">myIntent</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<h2 id="obtener-un-authtoken-de-un-account">Obtener un authToken de un Account<a class="headerlink" href="#obtener-un-authtoken-de-un-account" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">mAccountManager</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="n">Account</span><span class="o">[]</span> <span class="n">accounts</span> <span class="o">=</span> <span class="n">mAccountManager</span><span class="o">.</span><span class="na">getAccountsByType</span><span class="o">(</span><span class="n">ACCOUNT_TYPE</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Account</span> <span class="n">account</span> <span class="o">:</span> <span class="n">accounts</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">outText</span> <span class="o">+=</span> <span class="n">account</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
    <span class="n">AccountManagerFuture</span><span class="o">&lt;</span><span class="n">Bundle</span><span class="o">&gt;</span> <span class="n">accountManagerFuture</span> <span class="o">=</span> <span class="n">mAccountManager</span><span class="o">.</span><span class="na">getAuthToken</span><span class="o">(</span><span class="n">account</span><span class="o">,</span>
                    <span class="s">&quot;es.eduardofilo.app&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">Bundle</span> <span class="n">authTokenBundle</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">authTokenBundle</span> <span class="o">=</span> <span class="n">accountManagerFuture</span><span class="o">.</span><span class="na">getResult</span><span class="o">();</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">authTokenBundle</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">AccountManager</span><span class="o">.</span><span class="na">KEY_AUTHTOKEN</span><span class="o">).</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">OperationCanceledException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">AuthenticatorException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(!</span><span class="n">TextUtils</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">token</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">outText</span> <span class="o">+=</span> <span class="n">token</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../cursos/phonegap.html" title="Phonegap" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Phonegap
              </span>
            </div>
          </a>
        
        
          <a href="db.html" title="Bases de Datos" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                Bases de Datos
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/eduardofilo" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/eduardofilo" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/edumoreno/" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="http://eduardofilo.es" class="md-footer-social__link fa fa-tumblr"></a>
    
      <a href="https://www.youtube.com/c/EduardoMorenoLamana" class="md-footer-social__link fa fa-youtube"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.267712eb.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>