{"config":{"indexing":"full","lang":["es"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"Aventuras en VR 2022-04-17 23:00 Introducci\u00f3n al mundo VR con Oculus Quest 2. Raspberry Pi Zero 2 W upgrade 2021-10-30 17:40 Actualizaci\u00f3n de Raspberry Pi Zero al modelo 2 para OctoPrint. RG350/RG280 Imagen 2021-04-03 20:00 Imagen para las consolas RG350 y RG280 con emuladores, ports y frontends. FUZIX en Raspberry Pi Pico 2021-02-28 20:00 Montaje e instalaci\u00f3n de FUZIX (variante UNIX) en Raspberry Pi Pico. Retroconsolas 2021-01-19 21:20 Dudas frecuentes sobre los distintos modelos de retroconsolas. RG350 Instalador RA 2021-01-16 21:20 Instalador RetroArch para RG350/RG280. RG351P Wifi mod 2020-12-13 14:45 Instalaci\u00f3n de m\u00f3dulo Wifi interno en RG351P. RG350 Interfaz xMAME SimpleMenu 2020-09-27 02:30 Interfaz de ajustes para las ROMs de xMAME lanzadas desde SimpleMenu. La canci\u00f3n que merece la pena escuchar 2020-08-31 19:00 This Guy's in Love with You de Herb Alpert. RG350 ScummVM en lanzadores 2020-08-15 17:20 Integraci\u00f3n de ScummVM en lanzadores con selecci\u00f3n de ROMs como SimpleMenu. RG350 Py Backup 2020-08-12 22:20 Aplicaci\u00f3n para gestionar backups en RG350. RG350 Sustituci\u00f3n de pantalla 480p 2020-07-12 14:30 Sustituci\u00f3n de pantalla en RG350 por la del modelo M. RG350 RG350 FBA mod 2020-07-09 17:00 Integraci\u00f3n en frontends y mejora en la gesti\u00f3n del modo vertical en FBA. RG350 Primeros pasos 2020-07-02 23:00 Primeros pasos con la consola RG350. RG350 Raspi Imagen 2020-06-04 04:00 Procedimiento para generar una imagen de tarjeta SD flasheable para RG350, Raspberry Pi y otras. RG350 Compilar aplicaciones 2020-05-31 00:40 Ejemplos de compilaci\u00f3n de algunas aplicaciones para RG350 por medio del toolchain en Docker. RG350 Docker Buildroot 2020-05-25 17:00 Compilaci\u00f3n de Buildroot con toolchain de RG350 en un contenedor Docker. RG350 MAME4All 2020-05-14 11:00 Instalaci\u00f3n y configuraci\u00f3n de MAME4All en RG350. RG350 DOSBox 2020-05-08 00:30 Instalaci\u00f3n y configuraci\u00f3n de DOSBox en RG350. RG350 OpenBOR 2020-05-06 12:30 Instalaci\u00f3n y configuraci\u00f3n de OpenBOR en RG350. RG350 Daphne 2020-05-04 16:15 Instalaci\u00f3n y configuraci\u00f3n de Daphne en RG350. RG350 xMAME 2020-04-15 12:00 Instalaci\u00f3n y configuraci\u00f3n de xMAME en RG350. RG350 ScummVM 2020-04-14 09:50 Instalaci\u00f3n y configuraci\u00f3n de ScummVM en RG350. RG350 PyMenu 2020-03-28 21:20 Instalaci\u00f3n y configuraci\u00f3n de PyMenu en RG350. RG350 Backup 2020-03-19 23:00 C\u00f3mo hacer backup de la RG350 para no perder savestates y configuraciones de emuladores. Panelizar PCB 2020-02-16 19:04 Panelizaci\u00f3n de varias PCBs para hacer un pedido m\u00e1s econ\u00f3mico a JLCPCB. RG350 EmulationStation 2020-02-13 00:00 Instalaci\u00f3n y configuraci\u00f3n de EmulationStation en RG350. RG350 Conexi\u00f3n a internet 2020-02-09 01:48 Conexi\u00f3n a internet en RG350 a trav\u00e9s de cable USB. EdUzebox 2020-02-08 19:55 Creaci\u00f3n de un clon de Uzebox con salida de video por Euroconector. RG350 FBA 2020-01-31 22:28 Instalaci\u00f3n y configuraci\u00f3n de FBA en RG350. RG350 SimpleMenu 2020-01-25 17:25 Instalaci\u00f3n y configuraci\u00f3n de SimpleMenu en RG350. RG350 Scraper 2020-01-11 17:50 Generaci\u00f3n de previews de las roms instaladas en RG350. Creaci\u00f3n de un sitio Django desde cero 2019-08-06 16:30 Procedimiento de creaci\u00f3n de un entorno de desarrollo y producci\u00f3n para un sitio Django. Compilaci\u00f3n OpenAuto para solucionar touch screen 2019-07-07 21:45 Compilaci\u00f3n de OpenAuto tras dejar de funcionar la pantalla t\u00e1ctil por actualizaci\u00f3n de Google Play Services. Composite mod en consola Pong 2019-04-20 16:00 Composite mod en vieja consola Pong basada en chip AY-3-8500. Bloqueo de llamadas entrantes en Telsome 2019-01-29 19:20 Bloqueo de llamadas entrantes en proveedor de VoIP Telsome. Conversi\u00f3n del sitio de Apuntes a MkDocs 2019-01-26 19:00 Migraci\u00f3n del motor de apuntes de Rubi/Jekyll a Python/MkDocs. Octoprint en Anet A8 2018-10-20 21:30 Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint. Crankshaft - AndroidAuto sobre Raspberry Pi 2018-10-18 22:30 Montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D. Otto DIY 2018-05-05 17:25 Montaje de robot Otto. Raspberry Pi 3 + KODI 16 + Tvheadend 2017-01-14 12:00 Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi3 (actualizaci\u00f3n de art\u00edculo anterior). Raspberry Pi 3 + KODI 2016-12-06 15:32 Instalaci\u00f3n de Kodi sobre Raspberry Pi3. Interruputor de encendido para Raspberry Pi 2016-10-17 20:00 Instalaci\u00f3n de un pulsador de reset/encendido en Raspberry Pi. El mundo de ayer - Stefan Zweig 2016-08-17 21:00 Rese\u00f1a del libro 'El mundo de ayer' de Stefan Zweig. Entorno desarrollo STM32 VL Discovery sobre Linux 2016-08-02 08:30 Configuraci\u00f3n de entorno de desarrollo para STM332 VL Discovery con herramientas libres sobre Linux. Configuraci\u00f3n PiGRRL-2 2016-07-21 09:30 Instalaci\u00f3n RetroPie desde cero sobre Adafruit PiGRRL-2. Wild - Cheryl Strayed 2016-07-10 16:30 Rese\u00f1a del libro 'Wild' de Cheryl Strayed. Alertas por supuestos virus en Android 2016-07-02 16:30 T\u00e9cnicas para combatir los mensajes que aparecen en Android alert\u00e1ndonos de supuestos virus en el sistema. Un antrop\u00f3logo en Marte - Oliver Sacks 2016-04-10 16:30 Rese\u00f1a del libro 'Un antrop\u00f3logo en Marte' de Oliver Sacks. Los Innovadores - Walter Isaacson 2016-02-25 22:30 Rese\u00f1a del libro 'Los Innovadores' de Walter Isaacson. Raspberry Pi 2 + KODI + Tvheadend 2015-03-14 15:04 Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi. M\u00f3viles recomendables 2015-01-09 20:08 Listado de m\u00f3viles recomendables. Jekyll+GitHub Pages 2015-01-08 15:08 Creaci\u00f3n de sitio en GitHub Pages con Jekyll. Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS 2014-12-20 12:52 Instalaci\u00f3n de Dokuwiki sobre Raspberry Pi con ficheros alojados en NAS. Micro placas 2014-12-20 12:52 Listado de micro placas tipo Raspberry Pi. Presentaci\u00f3n 2014-12-15 18:25 Presentaci\u00f3n del blog.","title":"Blog"},{"location":"2014-12-15-presentacion.html","text":"Hola. Me llamo Eduardo Moreno y en esta p\u00e1gina pretendo colgar p\u00edldoras de conocimiento sobre los temas que me interesan y ocupan. Los campos a tratar y la frecuencia de publicaci\u00f3n depender\u00e1n del orden y la oportunidad en que sean encontradas, puesto que el sitio pretende ser una especie de cuaderno de apuntes p\u00fablico. Entrar\u00e1n por tanto todos los temas que me interesan, que fundamentalmente son: Ciencia en general con Psicolog\u00eda, Matem\u00e1ticas, Geolog\u00eda en particular. Astron\u00e1utica Programaci\u00f3n o Desarrollo Sistemas inform\u00e1ticos. Linux, Raspberry Pi Cine M\u00fasica F1 Puedes seguirme en las siguientes redes: Twitter GitHub Linkedin Tumblr YouTube","title":"Presentaci\u00f3n"},{"location":"2014-12-20-micro-placas.html","text":"Llevo un tiempo pendiente del relativamente nuevo mundo de las micro placas (o SBC's de Single Board Computer), popularizadas gracias a Arduino y Raspberry Pi. De entre las dos anteriores me quedo con la segunda al ser una persona m\u00e1s de soft que de hard y tener Raspberry Pi m\u00e1s potencial en este sentido. Adem\u00e1s siendo que la diferencia de precio es peque\u00f1a, por qu\u00e9 resistirse a tener un Linux completo corriendo en la placa. Est\u00e1 claro que esto tiene repercusiones en cuanto a estabilidad, seguridad y sobre todo autonom\u00eda energ\u00e9tica, pero como digo, en mi caso es m\u00e1s habitual que esto pese menos que las ventajas que me aporta construir sobre Linux. A continuaci\u00f3n una lista con algunas de las placas de este tipo que se pueden encontrar: Raspberry Pi : Revista Banana Pi y Banana Pro Hummingboard BeagleBoard pdDuino Cubieboard UDOO ODROID : Revista Up y Up core Orange Pi C.H.I.P. LattePanda Asus Tinker Board Asus Tinker Edge R HiKey 960 Rock64 Media Board Computer NanoPi K2 NanoPi NEO4 NanoPi NEO : Compra en Amazon . Khadas VIM , VIM2 , VIM3 , VIM3L La Frite LibreComputer (Le Potato) : Compra en Amazon RockPi Atomic Pi Onion OMEGA2+ : Para IOT. NVIDIA Jetson Nano Un par de listados alternativos: Raspberry Pi : rivales y alternativas Best Raspberry Pi Alternatives 2019 Y un sitio dedicado a recopilarlos: The Single Board Computer Database Hasta ahora los \u00fanicos proyectos que he puesto en marcha han sido de computaci\u00f3n, es decir, sin componente hardware, que es otro de los usos importantes que se les suelen dar. Han servido para delegar un par de funciones que antes ejecutaba directamente sobre mi PC principal. Concretamente: Gestor de descargas. Servidor git para proyectos personales privados que no quiera publicar en GitHub . Media center con Kodi. Consola port\u00e1til . Raspi consume 3.5W como m\u00e1ximo, as\u00ed que con ella se puede uno permitir que estos servicios funcionen las 24 horas del d\u00eda. Ya no s\u00f3lo por las ventajas que tiene de cara a la factura el\u00e9ctrica, sino tambi\u00e9n por evitar \"quemar\" un caro PC en tareas de proceso puntual pero que requieren alta disponibilidad (se ve muy claro en el caso del servidor git ). Tambi\u00e9n vienen muy bien estas placas para adosarlas a los televisores modernos y montar cosas como media centers (por ejemplo con XBMC-Kodi ) y consolas de videojuegos retro por emulaci\u00f3n (con distribuciones como Lakka ), sin ruidos de ventiladores, ocupando muy poco espacio y consumiendo poca energ\u00eda. A partir de mayo de 2015 tengo el plan de utilizar este tipo de placas como procesadores principales de prop\u00f3sito general, es decir sustituyendo a mi actual port\u00e1til. Y es que he financiado el proyecto Pi-Top por el cual recibir\u00e9 las piezas en esa fecha para montar mi propio port\u00e1til. Y para construir/mejorar todos los que quiera desde entonces, ya que el kit incluye los planos/archivos para poder imprimir la carcasa en una impresora 3D, y el resto de componentes son tan accesibles/asequibles como las propias micro placas. La \u00faltima versi\u00f3n de Pi-Top est\u00e1 anunciado que soporte de serie al menos UDOO, BeagleBone, ODROID y Banana Pi, aparte por supuesto de Raspberry Pi. La placa que m\u00e1s me gusta en la actualidad (y que seguramente mueva las entra\u00f1as del Pi-Top inicial) es la ODROID-C1 . 4 cores ARMv7 a 1.5GHz, Mali450, 1GB de RAM DDR3, Gigabit Ethernet, z\u00f3calo eMMC y 4 puertos USB por 37\u20ac .","title":"Micro placas"},{"location":"2014-12-26-dokuwiki-raspi.html","text":"Tengo desde hace a\u00f1os un Dokuwiki corriendo en el NAS, pero el que utilizo tiene un procesador muy poco potente y funcionaba muy lento. Sin embargo me gustaba que estuviera en el NAS por ser el sitio m\u00e1s seguro para tener la importante informaci\u00f3n que en el Dokuwiki mantengo. La forma de tener la informaci\u00f3n asegurada y disponible permanentemente es combinar el almacenamiento en el NAS con la ejecuci\u00f3n de los procesos en una de las Raspberry Pi que tengo en marcha permanentemente. Describo a continuaci\u00f3n c\u00f3mo ha sido el proceso en mi caso. Antes de empezar, un comentario. Voy a utilizar el paquete dokuwiki de la distribuci\u00f3n porque de Dokuwiki salen continuas ediciones y parches. De esta forma la actualizaci\u00f3n se har\u00e1 con un simple apt-get upgrade . Dokuwiki , en su versi\u00f3n empaquetada para Raspbian , puede correr sobre Apache o sobre Lighttpd . Si instalo directamente dokuwiki , el paquete prioriza la dependencia con Apache, pero prefiero utilizar Lighttpd en la Raspberry. As\u00ed pues la instalaci\u00f3n la hago por etapas para forzar la dependencia con Lighttpd . En otro caso hubiera sido tan sencillo como hacer apt-get install dokuwiki . Instalo Lighttpd : 1 sudo apt-get install lighttpd Instalo PHP: 1 sudo apt-get install php5-common php5-cgi php5 Activo el m\u00f3dulo PHP en Lighttpd y recargo la configuraci\u00f3n de este \u00faltimo: 1 2 sudo lighty - enable - mod fastcgi - php sudo service lighttpd force - reload Ahora s\u00ed instalo Dokuwiki : 1 sudo apt-get install dokuwiki Durante la instalaci\u00f3n del paquete aparece un di\u00e1logo de configuraci\u00f3n en el que, aparte de solicitar el password del usuario admin para Dokuwiki , pregunta sobre qu\u00e9 servidores HTTP de los dos soportados, queremos que se haga una configuraci\u00f3n autom\u00e1tica. De nuevo prioriza Apache, es decir, este servidor sale preseleccionado y Lighttpd desactivado. Invierto la situaci\u00f3n. Doy de alta un recurso compartido en el NAS. No muestro el proceso de esto puesto que es muy distinto en cada NAS. Comparto el recurso por medio del protocolo NFS. La instalaci\u00f3n predeterminada de Dokuwiki en Raspbian mantiene los ficheros en el directorio /var/lib/dokuwiki/data , as\u00ed que ser\u00e1 esto lo que habr\u00e1 que mantener en el NAS. Me fijo en los permisos de los ficheros de este directorio, puesto que tendremos que respetarlos para que Dokuwiki pueda trabajar. Veo esto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 edumoreno @ raspi - git / var / lib / dokuwiki / data $ ls - l total 208 drwx ------ 2 www - data root 16384 dic 26 11 : 58 attic drwx ------ 11 www - data root 16384 dic 26 11 : 39 cache - rw - r -- r -- 1 www - data root 7180 dic 26 11 : 39 deleted . files - rw - r -- r -- 1 www - data root 0 dic 26 11 : 38 _dummy drwx ------ 2 www - data root 16384 dic 26 11 : 58 index drwx ------ 2 www - data root 16384 dic 26 11 : 58 locks drwx ------ 3 www - data root 16384 dic 26 11 : 39 media drwxr - xr - x 2 www - data root 16384 dic 26 11 : 39 media_attic drwxr - xr - x 2 www - data root 16384 dic 26 11 : 39 media_meta drwx ------ 2 www - data root 16384 dic 26 11 : 58 meta drwx ------ 4 www - data root 16384 dic 26 11 : 42 pages - rw - r -- r -- 1 www - data root 7917 dic 26 11 : 39 security . png - rw - r -- r -- 1 www - data root 12093 dic 26 11 : 39 security . xcf drwx ------ 2 www - data root 16384 dic 26 11 : 39 tmp Antes de hacer el montaje del directorio remoto del NAS hacia la Raspberry, transfiero al primero todos los ficheros que ha dejado la instalaci\u00f3n en Raspberry. En mi caso, como tengo habilitado el acceso SSH en el NAS, lo hago as\u00ed (desde la Raspberry): 1 scp - r / var / lib / dokuwiki / data /* 192.168 . 1.200 : / c / dokuwiki Ahora configuro en Raspberry el montaje del recurso compartido en el NAS, lo que hago insertando la siguiente l\u00ednea en el fichero /etc/fstab : 1 192.168 . 1.200 : / c / dokuwiki / var / lib / dokuwiki / data nfs rw 0 0 Como veo que los permisos est\u00e1n muy orientados al acceso por usuario, y no por grupo, averiguo el UID del usuario www-data para ajustar ese valor en los ficheros en el NAS. Lo hago ejecutando sobre Raspberry: 1 2 edumoreno@raspi-git ~ $ id www-data uid=33(www-data) gid=33(www-data) grupos=33(www-data) Ahora inicio sesi\u00f3n por SSH en el NAS, me voy al directorio que voy a montar en la Raspberry y ajusto el UID de los ficheros que he copiado en el paso 7: 1 chown -R 33 /c/dokuwiki/* Finalmente vuelvo a Raspberry Pi y monto el nuevo directorio: 1 sudo mount -a A partir de entonces, el directorio /var/lib/dokuwiki/data de la Raspberry se encuentra en realidad en el NAS y por tanto, toda la actividad de Dokuwiki se registrar\u00e1 donde m\u00e1s conviene. Ya puedo acceder a Dokuwiki en: http://192.168.1.204/dokuwiki","title":"Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS"},{"location":"2015-01-08-jekyll.html","text":"Este sitio est\u00e1 creado con la tecnolog\u00eda de GitHub Pages . Trat\u00e1ndose de GitHub, est\u00e1 basado en Ruby, en concreto en el gem Jekyll . Tras estudiarlo un poco me gust\u00f3 mucho por distintos motivos y me anim\u00e9 a poner en marcha el proyecto. Llevo a\u00f1os acumulando informaci\u00f3n en un Dokuwiki , que me sigue encantando, pero me gusta mucho m\u00e1s el formato Markdown que casi se puede considerar un est\u00e1ndar ya. Adem\u00e1s hace tiempo que ten\u00eda la intenci\u00f3n de hacer p\u00fablica la mayor\u00eda de la informaci\u00f3n que en Dokuwiki manten\u00eda. El haber encontrado Jekyll ha desencadenado el proceso de migraci\u00f3n/publicaci\u00f3n de estos apuntes. El sitio se genera simplemente creando un nuevo repositorio dentro de la cuenta GitHub teniendo el nombre un formato determinado, concretamente username.github.io , siendo username nuestro identificador de usuario en GitHub. As\u00ed de sencillo. A partir de entonces todo lo que el repositorio contenga ser\u00e1 servido con base a la URL http://username.github.io Al ser un repositorio git ( gu\u00eda sencilla para git ), los cambios en la p\u00e1gina se hacen mediante commits en el propio repositorio. GitHub Pages soporta adem\u00e1s el mencionado Jekyll , lo que nos permitir\u00e1 dar estructura al sitio, gestionando los men\u00fas, las p\u00e1ginas y los posts del blog. Los documentos escritos en Markdown (existe la opci\u00f3n de trabajar tambi\u00e9n en Textile y HTML) resultan con un estilo homog\u00e9neo y f\u00e1cil de mantener. Con Jekyll tenemos tres de las cosas que m\u00e1s me gustaban de Dokuwiki , como son que se incluye un sistema de remarcado de sintaxis en los listados de c\u00f3digo incrustados en los documentos (cosa que es habitual en la clase de documentaci\u00f3n que manejo), evitamos utilizar una base de datos y finalmente el c\u00f3digo de los documentos no resulta alterado por editores WYSIWYG. Como novedad frente a Dokuwiki , el sitio resultante es est\u00e1tico, es decir, todo se termina compilando en HTML puro, con lo que obtenemos velocidad y seguridad. Las instrucciones oficiales con detalle para montar el sitio en GitHub Pages con soporte Jekyll est\u00e1n aqu\u00ed . El proceso paso a paso en mi caso fue como sigue: Los requerimientos previos son tener instalado Ruby 1.9.3 como m\u00ednimo (yo utilic\u00e9 el que viene empaquetado en Ubuntu, es decir sudo apt-get install ruby ), RubyGems y Bundler (lo instalamos con RubyGems, es decir sudo gem install bundler ). Creamos el repositorio en GitHub. Como hemos dicho el nombre tendr\u00e1 que ser nuestro identificador de usuario m\u00e1s el sufijo .github.io . No s\u00f3lo eso, si estamos haciendo una p\u00e1gina de usuario (tambi\u00e9n existe la posibilidad de crear una p\u00e1gina de proyecto), tendremos que trabajar obligatoriamente con el branch master . A partir de ahora voy a indicar mi nombre de usuario, es decir eduardofilo en lugar de username para hacerlo m\u00e1s realista. Clonamos el repositorio en nuestra m\u00e1quina para trabajar en local y seleccionamos el branch mencionado (aunque en realidad no es necesario porque es el predeterminado): 1 2 3 $ cd ~/git $ git clone https://github.com/eduardofilo/eduardofilo.github.io.git $ git checkout master Instalamos Jekyll. Bueno, en realidad instalamos github-pages que lo lleva incluido como dependencia: 1 $ gem install github-pages Generamos la estructura del sitio con Jekyll. En este paso el directorio donde vamos a generar la estructura deber\u00e1 estar vac\u00edo o se producir\u00e1 un error. Si exist\u00edan ficheros (como el README.md que suele generar GitHub), tendremos que sacar temporalmente esos ficheros del directorio y devolverlos posteriormente: 1 2 $ cd ~/git/eduardofilo.github.io $ jekyll new . Creamos el fichero Gemfile que gestionar\u00e1 las dependencias del proyecto: 1 2 3 # ~/git/eduardofilo.github.io/Gemfile source 'https://rubygems.org' gem 'github-pages' Generamos un fichero .gitignore para que no ser carguen en GitHub un fichero y un par de directorios que se generan din\u00e1micamente a partir del resto: 1 2 3 4 # ~/git/eduardofilo.github.io/.gitignore _site .sass-cache Gemfile.lock Ejecutamos el siguiente comando para que encajen todas las dependencias: 1 2 $ cd ~/git/eduardofilo.github.io $ bundle install Levantamos el servidor web de desarrollo para ir observando los cambios en el sitio mientras generamos o modificamos los ficheros, por defecto estar\u00e1 accesible a trav\u00e9s de la URL: http://localhost:4000 1 2 $ cd ~/git/eduardofilo.github.io $ bundle exec jekyll serve Y ya est\u00e1. A partir de ahora tocar\u00e1 retocar el sitio para dejarlo a nuestro gusto. En mi caso he creado directorios para las distintas secciones de documentaci\u00f3n que manejo (Desarrollo, Sistemas, Proyectos y Varios). Dentro de estos directorios mantengo documentos en Markdown que luego enlazo desde el fichero que se sirve de forma predeterminada ( index.md aunque tambi\u00e9n puede ser el m\u00e1s clasico index.html ). La funci\u00f3n m\u00e1s habitual de Jekyll es la de gestionar una estructura de Blog. Tambi\u00e9n la he aprovechado, manteniendo los ficheros en el subdirectorio _posts . En este caso los ficheros tienen que tener una nomenclatura especial, ya que de su nombre sale la fecha del post y su URL. En ambos tipos de documentos, es importante el sistema de metainformaci\u00f3n llamado FrontMatter. Todos los documentos llevan una peque\u00f1a secci\u00f3n al comienzo delimitada por dos l\u00edneas de tres guiones en formato YML. Es recomendable leer la documentaci\u00f3n sobre su uso ya que tiene m\u00faltiples efectos sobre el funcionamiento de Jekyll. De hecho los documentos que no lleven esta cabecera YML no ser\u00e1n procesados por Jekyll (esto puede servir para dejar de lado algunos ficheros como por ejemplo el README.md en mi caso). Para no tener problemas, conviene ajustarse a las versiones de los componentes que utiliza GitHub, pero al menos en mi caso, sin haberlo hecho (ya de partida uso Ruby 1.9.3 en mi ordenador) no he observado diferencias entre el servidor en desarrollo y lo servido finalmente por GitHub. Si se tienen problemas o se quiere ser m\u00e1s riguroso, estas son las versiones que hay que tener en cuenta: https://pages.github.com/versions/ Como curiosidad decir que el directorio _site que hemos ignorado en git (al incluirlo en .gitignore ) es donde Jekyll genera todo el contenido est\u00e1tico que termina sirviendo (lo que de hecho sirve GitHub). Por \u00faltimo dejar aqu\u00ed la gu\u00eda de GitHub sobre la variante de Markdown concreta que ellos soportan. Directamente no es la que trae Jekyll de serie, aunque en mi sitio he ido haciendo ajustes para que se parezca lo m\u00e1s posible. Para ver y seguir c\u00f3mo se he hecho el proceso en este sitio, el c\u00f3digo de todo se encuentra en: https://github.com/eduardofilo/eduardofilo.jekyll","title":"Jekyll+GitHub Pages"},{"location":"2015-01-09-moviles.html","text":"Es habitual que me hagan la pregunta de \u00bfqu\u00e9 movil comprar?. Responder es muy complicado. Por una parte por la gran oferta actual y por otra por ser un tema tan en boca de todos actualmente. El caso es que hace tiempo que, para responder m\u00e1s r\u00e1pidamente a la pregunta, mantengo una lista de m\u00f3viles que me parecen recomendables y que voy actualizando conforme encuentro alguna opci\u00f3n interesante en los blogs que sigo. He pensado hacer p\u00fablica la lista en forma de post que ir\u00e9 actualizando como hac\u00eda antes en privado. Intentar\u00e9 marcar las recomendaciones con fechas para que se autodescarten las opciones por antig\u00fcedad (de vez en cuando aprovechar\u00e9 estas mismas fechas para hacer limpieza, pero mientras llega esa limpieza la fecha puede servir como indicador de vigencia). La mayor\u00eda de los m\u00f3viles ser\u00e1n Android, en otro caso lo indicar\u00e9. Por \u00faltimo, la lista se detiene en poco m\u00e1s de los 400\u20ac porque considero que cuando alguien est\u00e1 dispuesto a gastar m\u00e1s en un m\u00f3vil normalmente ya sabe lo que quiere. Fecha Terminal Procesador RAM Almac. Pantalla Precio 2017-05-01 Motorola Moto E 4G Qualcomm 410 1,2GHz 1GB 8GB 4,5\u201d 540p 90\u20ac 2017-05-24 Vernee Thor E MediaTek MT6753 1,3GHz 3GB 16GB 5\u201d 720p 91\u20ac 2017-05-01 Umidigi C Note MediaTek MT6737T 1,5GHz 3GB 32GB 5,5\u201d 1080p 118\u20ac 2018-01-30 Xiaomi Redmi 5 Qualcomm 450 1,8GHz 3GB 32GB 5,7\u201d 720p 133\u20ac 2017-05-01 Huawei P8 Lite Kirin 620 1,2GHz 2GB 16GB 5\u201d 720p 153\u20ac 2017-05-01 Motorola Moto G4 Qualcomm 617 1,5GHz 2GB 16GB 5,5\u201d 1080p 166\u20ac 2017-11-17 Meizu M6 Note Qualcomm 625 2,0GHz 3GB 16GB 5,5\u201d 1080p 170\u20ac 2018-01-27 Xiaomi Mi A1 Qualcomm 625 2,0GHz 4GB 64GB 5,5\u201d 1080p 183\u20ac 2017-08-19 Motorola Moto G5 Qualcomm 430 1,4GHz 3GB 16GB 5\u201d 1080p 199\u20ac 2017-05-01 Huawei P9 Lite Kirin 650 2GHz 3GB 16GB 5,2\u201d 1080p 239\u20ac 2017-06-29 BQ Aquaris X Qualcomm 626 2,2GHz 3GB 32GB 5,2\u201d 1080p 279\u20ac 2017-05-01 OnePlus 3T Qualcomm 821 2,35GHz 6GB 64GB 5,5\u201d 1080p 439\u20ac Incluyo algunos enlaces de tiendas o art\u00edculos de donde han podido salir estas recomendaciones: Serie \u201ccazando gangas\u201d de Xatakandroid 2016-11-21 - Los mejores m\u00f3viles por menos de 100 euros (2016) 2016-11-28 - Los mejores m\u00f3viles por menos de 150 euros (2016) 2017-07-31 - Los mejores m\u00f3viles por menos de 200 euros (2017) 2017-06-27 - Los mejores m\u00f3viles por menos de 350 euros (2017) 2016-05-22 - Buscando el mejor m\u00f3vil barato: Alternativas al Moto G4 2016-05-26 - UMI Super, el m\u00f3vil ultrabarato con 4GB RAM ya se puede reservar 2017-06-02 - Nuestro Cazando Gangas no espera a las rebajas de verano: las mejores ofertas en m\u00f3viles Android 2017-06-27 - Este es el mejor m\u00f3vil de gama media que puedes comprar ahora mismo, y no es un Xiaomi 2017-08-13 - El m\u00f3vil Android barato con buena c\u00e1mara que recomendar\u00e9 a partir de ahora","title":"M\u00f3viles recomendables"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html","text":"(\u00daltima actualizaci\u00f3n: 2016-03-25 16:00) Actualizaci\u00f3n: A partir de la versi\u00f3n 3 de Raspberry Pi la placa incluye un adaptador Wifi, por lo que no ser\u00e1 necesario disponerlo. Si adem\u00e1s optamos por no instalar el decodificador TDT tambi\u00e9n podremos prescindir del concentrador USB. En este post se detallan las instrucciones para esta versi\u00f3n m\u00e1s simplificada del sistema, as\u00ed como se complementan con una configuraci\u00f3n m\u00e1s detallada del propio Kodi. Nota: Si est\u00e1s usando la versi\u00f3n 7 de OpenELEC que incluye la versi\u00f3n 16 de Kodi, utiliza este otro post . A continuaci\u00f3n se describe el montaje de un media center ejecut\u00e1ndose sobre Raspberry Pi 2 basado en la distribuci\u00f3n OpenELEC que implementa de forma muy ligera el software media center Kodi (anteriormente llamado XBMC). Se incorpora un decodificador TDT gestionado con el software Tvheadend . En la instalaci\u00f3n se incluye un adaptador Wifi que no ser\u00e1 necesario en caso de tener el router cerca y poder llevar un cable ethernet hasta la Raspberry Pi. De hecho es lo m\u00e1s recomendable ya que ser\u00e1 habitual consumir contenidos pesados por red. Si se puede prescindir del adaptador Wifi, seguramente tampoco ser\u00e1 necesario el concentrador USB que se coloc\u00f3 por precauci\u00f3n al ver como la Raspberry Pi se quejaba de deficiencias en la alimentaci\u00f3n (aparece en pantalla un cuadro de colores arriba a la derecha) al conectar directamente el adaptador Wifi y el TDT. Para el airmouse o teclado/rat\u00f3n inal\u00e1mbrico tambi\u00e9n hay alternativas: Aplicaciones para el m\u00f3vil: Kore o Yatse Mando a distancia del TV: Si nuestro TV soporta el protocolo CEC , puede comandar Kodi a trav\u00e9s del cable HDMI Elementos necesarios \u00b6 Empezamos con la lista de piezas que vamos a necesitar. Hardware \u00b6 Raspberry Pi 2: En Raspipc.es o en Cooking-Hacks.com Tarjeta microSD: En Raspipc.es o en Amazon.es Dongle Wifi Hub USB alimentado: En Raspipc.es o en Pccomponentes.com Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es Software \u00b6 OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT. Instalaci\u00f3n \u00b6 A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques. Instalaci\u00f3n OpenELEC \u00b6 Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-6.0.3.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta: 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync Conexi\u00f3n de piezas \u00b6 Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT y el adaptador Wifi al concentrador USB. Alimentamos el concentrador y enlazamos la entrada del concentrador con una de las entradas USB de la Raspberry. Finalmente alimentamos la Raspberry con un cable USB - microUSB desde el concentrador hacia la Raspberry. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. En la foto s\u00f3lo vemos el adaptador Wifi y el decodificador TDT, directamente conectados a la Raspberry. Esta configuraci\u00f3n se termin\u00f3 descartando porque la Raspberry ten\u00eda problemas de alimentaci\u00f3n, a\u00fan utilizando un alimentador de 2 Amperios. El elemento que m\u00e1s pico de corriente exige es el decodificador TDT. Los problemas se detectan por un cuadrado de colores que aparece en la esquina superior derecha de la pantalla. Normalmente el sistema no es capaz de arrancar en esta situaci\u00f3n (aparecen unos errores en la consola) y lo que es peor se termina corrompiendo el sistema de archivos de la microSD. Con el concentrador USB alimentado se evitan estos problemas. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas. Configuraci\u00f3n Kodi \u00b6 El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Una vez terminado el asistente acudimos a la siguiente ruta de los men\u00fas para activar el adaptador Wifi: 1 Sistema / OpenELEC / Red / Redes inal\u00e1mbricas / Activo Una vez activo conectamos a nuestro punto de acceso siguiendo esta secuencia de men\u00fas: 1 Sistema / OpenELEC / Conexiones / engancho mi AP Instalaci\u00f3n de TVheadend \u00b6 Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 5 6 Sistema / Ajustes / Add - ons / Instalar desde repositorio / OpenELEC Add - ons ( official ) / Repositorio de Add - ons / OpenELEC Add - ons ( unofficial ) / Instalar Sistema / Ajustes / Add - ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add - ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / Add - ons / Mis add - ons / Clientes PVR / Tvheadend HTSP Client / Configurar / OK Sistema / Ajustes / Add - ons / Mis add - ons / Clientes PVR / Tvheadend HTSP Client / Activar Sistema / Ajustes / TV en directo / General / Activado Configuraci\u00f3n de Tvheadend \u00b6 Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 Configuration / General / Language settings / Available / Spanish; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create Configuration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save . Instalaci\u00f3n licencia MPEG-2 \u00b6 Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"Raspberry Pi 2 + KODI + Tvheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#elementos-necesarios","text":"Empezamos con la lista de piezas que vamos a necesitar.","title":"Elementos necesarios"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#hardware","text":"Raspberry Pi 2: En Raspipc.es o en Cooking-Hacks.com Tarjeta microSD: En Raspipc.es o en Amazon.es Dongle Wifi Hub USB alimentado: En Raspipc.es o en Pccomponentes.com Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es","title":"Hardware"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#software","text":"OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT.","title":"Software"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion","text":"A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques.","title":"Instalaci\u00f3n"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-openelec","text":"Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-6.0.3.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta: 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync","title":"Instalaci\u00f3n OpenELEC"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#conexion-de-piezas","text":"Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT y el adaptador Wifi al concentrador USB. Alimentamos el concentrador y enlazamos la entrada del concentrador con una de las entradas USB de la Raspberry. Finalmente alimentamos la Raspberry con un cable USB - microUSB desde el concentrador hacia la Raspberry. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. En la foto s\u00f3lo vemos el adaptador Wifi y el decodificador TDT, directamente conectados a la Raspberry. Esta configuraci\u00f3n se termin\u00f3 descartando porque la Raspberry ten\u00eda problemas de alimentaci\u00f3n, a\u00fan utilizando un alimentador de 2 Amperios. El elemento que m\u00e1s pico de corriente exige es el decodificador TDT. Los problemas se detectan por un cuadrado de colores que aparece en la esquina superior derecha de la pantalla. Normalmente el sistema no es capaz de arrancar en esta situaci\u00f3n (aparecen unos errores en la consola) y lo que es peor se termina corrompiendo el sistema de archivos de la microSD. Con el concentrador USB alimentado se evitan estos problemas. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas.","title":"Conexi\u00f3n de piezas"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#configuracion-kodi","text":"El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Una vez terminado el asistente acudimos a la siguiente ruta de los men\u00fas para activar el adaptador Wifi: 1 Sistema / OpenELEC / Red / Redes inal\u00e1mbricas / Activo Una vez activo conectamos a nuestro punto de acceso siguiendo esta secuencia de men\u00fas: 1 Sistema / OpenELEC / Conexiones / engancho mi AP","title":"Configuraci\u00f3n Kodi"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-de-tvheadend","text":"Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 5 6 Sistema / Ajustes / Add - ons / Instalar desde repositorio / OpenELEC Add - ons ( official ) / Repositorio de Add - ons / OpenELEC Add - ons ( unofficial ) / Instalar Sistema / Ajustes / Add - ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add - ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / Add - ons / Mis add - ons / Clientes PVR / Tvheadend HTSP Client / Configurar / OK Sistema / Ajustes / Add - ons / Mis add - ons / Clientes PVR / Tvheadend HTSP Client / Activar Sistema / Ajustes / TV en directo / General / Activado","title":"Instalaci\u00f3n de TVheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#configuracion-de-tvheadend","text":"Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 Configuration / General / Language settings / Available / Spanish; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create Configuration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save .","title":"Configuraci\u00f3n de Tvheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-licencia-mpeg-2","text":"Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"Instalaci\u00f3n licencia MPEG-2"},{"location":"2016-02-25-los-innovadores.html","text":"Quer\u00eda recomendar el \u00faltimo libro que he le\u00eddo. Los innovadores de Walter Isaacson, el mismo autor que escribi\u00f3 magistralmente las biograf\u00edas de Albert Einstein y Steve Jobs (que tambi\u00e9n recomiendo). Relata la historia de la cascada de descubrimientos e innovaciones que se produjeron desde mediados del siglo XIX y que nos trajeron la era digital (los ordenadores y dispositivos personales e Internet). Me he dado cuenta de que conoc\u00eda aproximadamente un 10% de la historia y que se me escapaba el reconocimiento a personajes esenciales como John Bardeen y Walter Brattain (inventores del transistor), Robert Noyce y Gordon Moore en Intel y en paralelo Jack Kilby y Patrick Haggerty en Texas Instruments (microchips y microprocesadores), Douglas Engelbart y J.C.R. Licklider (como te\u00f3ricos de la interacci\u00f3n hombre-m\u00e1quina; el primero realiz\u00f3 en 1968 \"La madre de todas las demos\" en que ya mostraba un interfaz gr\u00e1fico de usuario con rat\u00f3n y todo) y sobre todo los m\u00e1s pioneros de todos, Charles Babbage y Ada Byron, que especularon con casi todo lo que vino despu\u00e9s 100 a\u00f1os antes que todos los dem\u00e1s. Otra cosa que muestra el libro insistentemente es algo en lo que creo desde hace tiempo, y es que gran parte de las innovaciones surgieron de la tensi\u00f3n creativa que se produce al combinar habilidades humanas contrapuestas. Introvertidos y extrovertidos, pr\u00e1cticos y te\u00f3ricos, personas pragm\u00e1ticas capaces de encontrar salida comercial a los descubrimientos y otras que no se conformaban hasta dominar a fondo la teor\u00eda subyacente. Todas las parejas de nombres mencionadas anteriormente ilustran este fen\u00f3meno, as\u00ed como otras m\u00e1s conocidas que aparecieron posteriormente como Steve Wozniak y Steve Jobs o Larry Page y Sergu\u00e9i Brin. Os dejo con un documento impresionante. La madre de todas las demos:","title":"Los Innovadores - Walter Isaacson"},{"location":"2016-04-10-un-antropologo-en-marte.html","text":"Leer este libro del recientemente fallecido neur\u00f3logo Oliver Sacks hace pensar sobre el concepto de \"realidad\". El libro relata varios casos a los que hizo seguimiento a lo largo de su carrera. Casos como el del pintor que perdi\u00f3 la percepci\u00f3n del color a ra\u00edz de un accidente y que se vio forzado a sustituir su realidad anterior por otra distinta a la que no hubiera renunciado de haber podido tras haberse adaptado, pues le permit\u00eda percibir cosas en el mundo que antes no pod\u00eda. U otro caso que se podr\u00eda considerar opuesto, como fue el de una persona ciega desde la infancia a la que una operaci\u00f3n le devolvi\u00f3 la vista en la cuarentena y que poco a poco termin\u00f3 renunciando al nuevo don ya que sus estructuras neuronales hab\u00edan construido una realidad v\u00e1lida partiendo de lo que ten\u00eda, haciendo que la visi\u00f3n la modificara hasta un grado insoportable. Describe tambi\u00e9n varios casos del desconcertante s\u00edndrome de Tourette . En mis tiempos de instituto conviv\u00ed con un muchacho que seguramente correspond\u00eda con este s\u00edndrome. Como suele ser habitual en estos casos, y m\u00e1s en un ambiente adolescente, era objeto de numerosas burlas. Personalmente nunca llegu\u00e9 a burlarme de \u00e9l, pero s\u00ed me desconcertaba. Ahora creo que ese muchacho era un valiente cuando menos. El libro en general dibuja la casi imposibilidad de comprensi\u00f3n hacia los casos que m\u00e1s se alejan de la normalidad. En igual grado a ambos lados del espacio que separa las distintas realidades que viven unos (sus pacientes) y otro (Sacks). Pero a la vez es un ejercicio de tolerancia y escepticismo hacia lo diferente, siendo muy consiciente del poder que encierran estas personas al vivir otra realidad, en algunos aspectos aumentada y en otros reducida, no mejor ni peor sino m\u00e1s o menos v\u00e1lida para la suerte que les toque vivir. De la misma forma que un perro no elige vivir en un mundo \"tan\" olfativo pero construye su mundo en \u00e9l y nos puede ayudar en ocasiones, personas con sistemas nerviosos diferentes como los autistas, pueden ayudarnos tambi\u00e9n, como Temple Grandin ilustra muy bien.","title":"Un antrop\u00f3logo en Marte - Oliver Sacks"},{"location":"2016-07-02-virus-android.html","text":"En este v\u00eddeo veremos un par de t\u00e9cnicas para combatir los mensajes que aparecen en algunos tel\u00e9fonos Android alert\u00e1ndonos de supuestos virus en el sistema. Dado el dise\u00f1o de Android y la forma en que los distintos fabricantes lo distribuyen y modifican, es muy poco rentable t\u00e9cnicamente escribir virus para este sistema, por tanto lo que hay detr\u00e1s de estos mensajes suele ser otro tipo de problemas. Son simples enga\u00f1os emitidos por aplicaciones que nosotros mismos hemos instalado. El objetivo ser\u00e1 pues localizar dichas aplicaciones y desinstalarlas. En el v\u00eddeo se muestra la forma de localizar qu\u00e9 aplicaci\u00f3n ha emitido una notificaci\u00f3n. Como consejo general se recomienda minimizar o mejor a\u00fan evitar completamente la instalaci\u00f3n de aplicaciones de dudosa procedencia, a\u00fan estando en el propio Google Play. Otra situaci\u00f3n (como la del caso que se ilustra al principio del v\u00eddeo) es que la alerta aparezca mediante una p\u00e1gina web en el navegador. Con el dise\u00f1o minimalista de los navegadores web Android (el que se ve en el v\u00eddeo es Chrome), a veces cuesta reconocer que estamos ante una simple p\u00e1gina web y no delante de una pantalla del sistema. Esto es lo que parece pretender el dise\u00f1o del mensaje que se muestra en el v\u00eddeo al incluir dise\u00f1os y logotipos propios de Google. En este caso lo que tendremos que hacer es borrar los datos del navegador, ya que la p\u00e1gina de la alerta puede haberse \"instalado\" (modificando la p\u00e1gina de inicio por ejemplo) al haber navegado por algunos sitios (normalmente poco recomendables, otra cosa que conviene minimizar o evitar; en caso de hacerlo se recomienda usar el modo inc\u00f3gnito que incorporan ahora la mayor\u00eda de los navegadores). Enlaces: El Androide Libre - C\u00f3mo eliminar ese \"virus\" que ha aparecido en tu m\u00f3vil","title":"Alertas por supuestos virus en Android"},{"location":"2016-07-10-wild.html","text":"Instructivo relato sobre el recorrido que realiz\u00f3 su autora en 1995 de parte del Pacific Crest Trail , una especie de Transpiren\u00e1ica pero de una escala superior (como suele ocurrir cuando hablamos del continente americano) que recorre las crestas de la cadena de cordilleras que existen en el oeste del continente norteamericano en disposici\u00f3n vertical a unos pocos centenares de km de la costa. El PCT tiene m\u00e1s de 4000 km, aunque Cheryl \"s\u00f3lo\" recorri\u00f3 alrededor de 1700 en unos 100 d\u00edas, partiendo desde el desierto de Mojave en California y terminando en El puente de los dioses en la frontera entre los estados de Oreg\u00f3n y Whashington. Durante su periplo, hace balance de su vida y trata de reencontrarse. En ese momento ten\u00eda 26 a\u00f1os y tras una infancia complicada y haber perdido a su madre recientemente, se encuentra metida en una espiral de autodestrucci\u00f3n. Cheryl consigue transmitir con muy buena prosa, tanto su estado mental como los peligros y problemas que tiene que enfrentar en su viaje, la mayor parte de las veces con una soledad autoimpuesta. De manera parecida a la historia de Christopher McCandless (de la que tambi\u00e9n hay pel\u00edcula y libro , aunque en esta ocasi\u00f3n escrito obligatoriamente por un tercero), la aventura de Cheryl es una temeridad analizada posteriormente. Se lanz\u00f3 a la aventura sin experiencia ni preparaci\u00f3n suficientes, como ella misma reconoce, arrastrando una mochila que pesaba aproximadamente la mitad que ella. A pesar de ello no puedo dejar de sentir admiraci\u00f3n por la fuerza de esta mujer. Os dejo con el trailer de la pel\u00edcula que se hizo en 2014 basada en el libro que no le hace justicia, aunque sirve para acceder a algunos de los espectaculares paisajes que Cheryl atraves\u00f3.","title":"Wild - Cheryl Strayed"},{"location":"2016-07-21-PIGRRL-2.html","text":"Hace unos meses mont\u00e9 un PiGRRL-2 . La imagen de tarjeta microSD que Adafruit ofrece para el sistema, viene preconfigurada con todo lo necesario, pero hab\u00eda cosas que no funcionaban a mi gusto (como los emuladores de ZX Spectrum) y quer\u00eda conocer m\u00e1s de cerca todas las posibilidades de RetroPie . Lo que sigue son los pasos que he seguido para montar una microSD con RetroPie para la PiGRRL-2 desde cero. Instalaci\u00f3n de Raspbian \u00b6 Comenzamos haciendo una instalaci\u00f3n limpia del sistema base. He elegido Raspbian Lite puesto que no necesitamos entorno de escritorio ni las aplicaciones que lleva la instalaci\u00f3n normal. Bajamos Rasbian Lite: https://www.raspberrypi.org/downloads/raspbian/ Instalamos: 1 2 unzip -p 2016-05-27-raspbian-jessie-lite.zip | sudo dd of=/dev/mmcblk0 bs=2M sudo sync Pinchamos la tarjeta en la Raspberry Pi y conectamos un cable de red para poder acceder por SSH (user: pi; pwd: raspberry). Actualizamos la distribuci\u00f3n: 1 2 sudo apt-get update sudo apt-get upgrade Hacemos algunos ajustes generales: 1 sudo raspi-config Extendemos la partici\u00f3n a toda la SD (opci\u00f3n: 1 Expand Filesystem ). Ajustar el Timezone (opci\u00f3n 5 Internationalisation Options > I2 Change Timezone ). Realmente no es necesario, pero me gusta ver fechas coherentes cuando manipulo el sistema. Ajustar los locales (opci\u00f3n 5 Internationalisation Options > I1 Change Locale ). Yo por ejemplo elijo en_GB.UTF-8 . Es importante que todas las variables que aparecen al ejecutar el comando locale tengan valor correcto e igual en todas ellas. Tras hacer los ajustes es necesario reiniciar, ya que se gestionan mediante variables de entorno de sesi\u00f3n. Tras hacerlo volver a comprobar con el comando locale . Si alguna de las variables sigue con un valor incorrecto (suele ocurrir en LANG, LANGUAGE y LC_ALL), usar el siguiente comando e ir comprobando con sucesivos reinicios hasta que todas las variables tengan el mismo locale: sudo update-locale LC_ALL = \"en_GB.UTF-8\" Desactivamos el Overscan (opci\u00f3n 9 Advanced Options > A1 Overscan , respondiendo \"No\"). Forzamos el audio a trav\u00e9s del jack 3,5mm (opci\u00f3n 9 Advanced Options > A8 Audio , respondiendo \"1 Force 3.5mm\"). Instalaci\u00f3n de RetroPie-Setup \u00b6 Instalamos unos paquetes necesarios: 1 sudo apt-get install git dialog xmlstarlet Bajamos el c\u00f3digo de RetroPie-Setup: 1 2 cd ~ git clone --depth=1 https://github.com/RetroPie/RetroPie-Setup.git Ejecutamos RetroPie-Setup: 1 2 cd RetroPie-Setup sudo ./retropie_setup.sh Cerramos el cuadro de advertencia que aparece y acudimos a la siguiente ruta: Manage Packages > Quick Install Respondemos \"Yes\". A continuaci\u00f3n se desencadenar\u00e1 una secuencia de descargas, compilaciones y configuraciones autom\u00e1ticas de todas las herramientas que integran RetroPie. En mi caso el proceso en una Raspberry Pi 2 tard\u00f3 unos 13 minutos. Al terminar volvemos a la misma ventana. Pulsamos los botones \"Back\" y \"Exit\". Instalaci\u00f3n de PiTFT \u00b6 Instalaci\u00f3n de fbcp \u00b6 La PiTFT de Adafruit funciona haciendo framebuffer de la memoria de v\u00eddeo de la Raspberry Pi hacia la peque\u00f1a pantalla por SPI (explicado aqu\u00ed ). Para que esto funcione hay que instalar un peque\u00f1o programa. Bajamos, compilamos e instalamos: 1 2 3 4 5 6 7 8 9 cd ~ sudo apt-get install cmake git clone https://github.com/tasanakorn/rpi-fbcp cd rpi-fbcp/ mkdir build cd build/ cmake .. make sudo install fbcp /usr/local/bin/fbcp Configuramos el sistema para que autoarranque el programa que acabamos de instalar. Para ello editar /etc/rc.local y a\u00f1adir lo siguiente justo antes de la \u00faltima l\u00ednea ( exit 0 ): 1 /usr/local/bin/fbcp & Reconfiguramos la consola para que se vea bien en la peque\u00f1a PiTFT (Elegimos las opciones UTF-8 , Guess optimal character set , Terminus y 6x12 (framebuffer only). ): 1 sudo dpkg-reconfigure console-setup Configuraci\u00f3n de PiTFT \u00b6 Adem\u00e1s de instalar fbcp habr\u00e1 que hacer una serie de ajustes en el sistema para que se adapte a la resoluci\u00f3n tan especial y modo de trabajo de esta pantalla. Instalamos un repositorio de Adafruit y un par de paquetes: 1 2 3 cd ~ curl - SLs https : // apt . adafruit . com / add - pin | sudo bash sudo apt - get install raspberrypi - bootloader adafruit - pitft - helper Ejecutamos el aistente para configurar PiTFT: 1 sudo adafruit-pitft-helper -t 28r Responder n a la primera pregunta y y a la segunda. Con esto \u00faltimo asociaremos la tecla vinculada al GPIO23 (la segunda empezando por arriba de las cuatro que tiene la pantalla a la izquierda) a un apagado/encendido de la consola que nos servir\u00e1 para reiniciarla limpiamente si en alg\u00fan momento perdemos el control en alguno de los emuladores. Editar el fichero /boot/config.txt y cambiar los valores de la l\u00ednea que empieza con dtoverlay para dejarla como sigue: 1 dtoverlay=pitft28-resistive,rotate=270,speed=80000000,fps=60 En el mismo fichero /boot/config.txt a\u00f1adir las siguientes l\u00edneas (si ya existen comentarlas): 1 2 3 4 hdmi_force_hotplug=1 hdmi_group=2 hdmi_mode=87 hdmi_cvt=320 240 60 1 0 0 0 Configurar EmulationStation \u00b6 Vamos a hacer que EmulationStation arranque autom\u00e1ticamente con el sistema. A\u00f1adir lo siguiente al final del fichero /etc/profile : 1 [ -n \" ${ SSH_CONNECTION } \" ] || emulationstation Configurar con raspi-config el autologin en consola. Para ello seguir la ruta 3 Boot Options > B1 Desktop / CLI > B2 Console Autologin . Instalaci\u00f3n de Retrogame \u00b6 El pad que incorpora PiGRRL-2 enlaza cada bot\u00f3n con un GPIO determinado. Para que las se\u00f1ales en estos GPIO's se conviertan en pulsaciones de teclas normales hay que instalar y configurar un software que nos proporciona Adafruit, mediante los siguientes pasos: Bajamos el c\u00f3digo: 1 2 3 cd ~ git clone https://github.com/adafruit/Adafruit-Retrogame.git cd Adafruit-Retrogame Editamos el fichero ~/Adafruit-Retrogame/retrogame.c y sustituimos la estructura ioStandard que hay a partir de la l\u00ednea 111 por lo que sigue. Esto har\u00e1 corresponder algunas de las teclas importantes para manejar los emuladores y el propio EmulationStation con el mapeo de pulsadores del gamepad de PiGRRL 2: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ioStandard [] = { // This pin / key table is used when the PiTFT isn ' t found // ( using HDMI or composite instead ), as with our original // retro gaming guide . // Input Output ( from / usr / include / linux / input . h ) { 17 , KEY_RIGHTSHIFT }, // PiTFT 17 { 22 , KEY_RIGHTCTRL }, // PiTFT 22 { 27 , KEY_ESC }, // PiTFT 27 { 4 , KEY_LEFT }, // Left { 16 , KEY_UP }, // Up { 19 , KEY_RIGHT }, // Right { 26 , KEY_DOWN }, // Down { 5 , KEY_SPACE }, // Select { 6 , KEY_ENTER }, // Start { 14 , KEY_LEFTCTRL }, // A Button { 15 , KEY_LEFTALT }, // B Button { 20 , KEY_Z }, // X Button { 18 , KEY_X }, // Y Button { 12 , KEY_A }, // L Shoulder { 13 , KEY_S }, // R Shoulder // For credit / start / etc ., use USB keyboard or add more buttons . { - 1 , - 1 } }; // END OF LIST , DO NOT CHANGE Dentro del mismo fichero ~/Adafruit-Retrogame/retrogame.c acudir a la l\u00ednea 300 (tras el cambio anterior) y sustituir: 1 2 3 // Select io[] table for Cupcade (TFT) or 'normal' project. io = (access(\"/etc/modprobe.d/adafruit.conf\", F_OK) || access(\"/dev/fb1\", F_OK)) ? ioStandard : ioTFT; por: 1 io = ioStandard; Compilamos e instalamos: 1 2 make retrogame sudo mv retrogame /usr/local/bin Crear el fichero /etc/udev/rules.d/10-retrogame.rules con el siguiente contenido: 1 SUBSYSTEM==\"input\", ATTRS{name}==\"retrogame\", ENV{ID_INPUT_KEYBOARD}=\"1\" A\u00f1adir lo siguiente al final de /etc/rc.local : /usr/local/bin/retrogame & A\u00f1adir los siguientes m\u00f3dulos al fichero /etc/modules : 1 2 3 uinput joydev snd-bcm2835 Sustituir el contenido del fichero /opt/retropie/configs/all/emulationstation/es_input.cfg por: <?xml version=\"1.0\"?> <inputList> <inputAction type= \"onfinish\" > <command> /opt/retropie/supplementary/emulationstation/scripts/inputconfiguration.sh </command> </inputAction> <inputConfig type= \"keyboard\" deviceName= \"Keyboard\" deviceGUID= \"-1\" > <input name= \"a\" type= \"key\" id= \"1073742048\" value= \"1\" /> <input name= \"b\" type= \"key\" id= \"1073742050\" value= \"1\" /> <input name= \"down\" type= \"key\" id= \"1073741905\" value= \"1\" /> <input name= \"left\" type= \"key\" id= \"1073741904\" value= \"1\" /> <input name= \"pagedown\" type= \"key\" id= \"120\" value= \"1\" /> <input name= \"pageup\" type= \"key\" id= \"122\" value= \"1\" /> <input name= \"right\" type= \"key\" id= \"1073741903\" value= \"1\" /> <input name= \"select\" type= \"key\" id= \"32\" value= \"1\" /> <input name= \"start\" type= \"key\" id= \"13\" value= \"1\" /> <input name= \"up\" type= \"key\" id= \"1073741906\" value= \"1\" /> </inputConfig> </inputList> FIN \u00b6 S\u00f3lo queda copiar algunas roms a los directorios correspondientes a cada emulador dentro de la ruta /home/pi/RetroPie/roms . Hasta que no lo hagamos no aparecer\u00e1 la entrada correspondiente al emulador en EmulationStation. Si a\u00f1adimos las roms mientras \u00e9ste est\u00e1 en marcha (conect\u00e1ndonos por sFTP por ejemplo) habr\u00e1 que reiniciarlo para que las encuentre. Enlaces: \u00b6 Running OpenGL-based Games & Emulators on Adafruit PiTFT Displays Adafruit PiTFT - 2.8\" Touchscreen Display for Raspberry Pi Adafruit-PiTFT-Helper : A script for configuring Adafruit's PiTFT displays on a Raspberry Pi. Tactile switch as power button Adafruit-Retrogame : Librer\u00eda para mapear GPIO's a teclas. Retro Gaming with Raspberry Pi Retroarch Controls","title":"Configuraci\u00f3n PiGRRL-2"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-raspbian","text":"Comenzamos haciendo una instalaci\u00f3n limpia del sistema base. He elegido Raspbian Lite puesto que no necesitamos entorno de escritorio ni las aplicaciones que lleva la instalaci\u00f3n normal. Bajamos Rasbian Lite: https://www.raspberrypi.org/downloads/raspbian/ Instalamos: 1 2 unzip -p 2016-05-27-raspbian-jessie-lite.zip | sudo dd of=/dev/mmcblk0 bs=2M sudo sync Pinchamos la tarjeta en la Raspberry Pi y conectamos un cable de red para poder acceder por SSH (user: pi; pwd: raspberry). Actualizamos la distribuci\u00f3n: 1 2 sudo apt-get update sudo apt-get upgrade Hacemos algunos ajustes generales: 1 sudo raspi-config Extendemos la partici\u00f3n a toda la SD (opci\u00f3n: 1 Expand Filesystem ). Ajustar el Timezone (opci\u00f3n 5 Internationalisation Options > I2 Change Timezone ). Realmente no es necesario, pero me gusta ver fechas coherentes cuando manipulo el sistema. Ajustar los locales (opci\u00f3n 5 Internationalisation Options > I1 Change Locale ). Yo por ejemplo elijo en_GB.UTF-8 . Es importante que todas las variables que aparecen al ejecutar el comando locale tengan valor correcto e igual en todas ellas. Tras hacer los ajustes es necesario reiniciar, ya que se gestionan mediante variables de entorno de sesi\u00f3n. Tras hacerlo volver a comprobar con el comando locale . Si alguna de las variables sigue con un valor incorrecto (suele ocurrir en LANG, LANGUAGE y LC_ALL), usar el siguiente comando e ir comprobando con sucesivos reinicios hasta que todas las variables tengan el mismo locale: sudo update-locale LC_ALL = \"en_GB.UTF-8\" Desactivamos el Overscan (opci\u00f3n 9 Advanced Options > A1 Overscan , respondiendo \"No\"). Forzamos el audio a trav\u00e9s del jack 3,5mm (opci\u00f3n 9 Advanced Options > A8 Audio , respondiendo \"1 Force 3.5mm\").","title":"Instalaci\u00f3n de Raspbian"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-retropie-setup","text":"Instalamos unos paquetes necesarios: 1 sudo apt-get install git dialog xmlstarlet Bajamos el c\u00f3digo de RetroPie-Setup: 1 2 cd ~ git clone --depth=1 https://github.com/RetroPie/RetroPie-Setup.git Ejecutamos RetroPie-Setup: 1 2 cd RetroPie-Setup sudo ./retropie_setup.sh Cerramos el cuadro de advertencia que aparece y acudimos a la siguiente ruta: Manage Packages > Quick Install Respondemos \"Yes\". A continuaci\u00f3n se desencadenar\u00e1 una secuencia de descargas, compilaciones y configuraciones autom\u00e1ticas de todas las herramientas que integran RetroPie. En mi caso el proceso en una Raspberry Pi 2 tard\u00f3 unos 13 minutos. Al terminar volvemos a la misma ventana. Pulsamos los botones \"Back\" y \"Exit\".","title":"Instalaci\u00f3n de RetroPie-Setup"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-pitft","text":"","title":"Instalaci\u00f3n de PiTFT"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-fbcp","text":"La PiTFT de Adafruit funciona haciendo framebuffer de la memoria de v\u00eddeo de la Raspberry Pi hacia la peque\u00f1a pantalla por SPI (explicado aqu\u00ed ). Para que esto funcione hay que instalar un peque\u00f1o programa. Bajamos, compilamos e instalamos: 1 2 3 4 5 6 7 8 9 cd ~ sudo apt-get install cmake git clone https://github.com/tasanakorn/rpi-fbcp cd rpi-fbcp/ mkdir build cd build/ cmake .. make sudo install fbcp /usr/local/bin/fbcp Configuramos el sistema para que autoarranque el programa que acabamos de instalar. Para ello editar /etc/rc.local y a\u00f1adir lo siguiente justo antes de la \u00faltima l\u00ednea ( exit 0 ): 1 /usr/local/bin/fbcp & Reconfiguramos la consola para que se vea bien en la peque\u00f1a PiTFT (Elegimos las opciones UTF-8 , Guess optimal character set , Terminus y 6x12 (framebuffer only). ): 1 sudo dpkg-reconfigure console-setup","title":"Instalaci\u00f3n de fbcp"},{"location":"2016-07-21-PIGRRL-2.html#configuracion-de-pitft","text":"Adem\u00e1s de instalar fbcp habr\u00e1 que hacer una serie de ajustes en el sistema para que se adapte a la resoluci\u00f3n tan especial y modo de trabajo de esta pantalla. Instalamos un repositorio de Adafruit y un par de paquetes: 1 2 3 cd ~ curl - SLs https : // apt . adafruit . com / add - pin | sudo bash sudo apt - get install raspberrypi - bootloader adafruit - pitft - helper Ejecutamos el aistente para configurar PiTFT: 1 sudo adafruit-pitft-helper -t 28r Responder n a la primera pregunta y y a la segunda. Con esto \u00faltimo asociaremos la tecla vinculada al GPIO23 (la segunda empezando por arriba de las cuatro que tiene la pantalla a la izquierda) a un apagado/encendido de la consola que nos servir\u00e1 para reiniciarla limpiamente si en alg\u00fan momento perdemos el control en alguno de los emuladores. Editar el fichero /boot/config.txt y cambiar los valores de la l\u00ednea que empieza con dtoverlay para dejarla como sigue: 1 dtoverlay=pitft28-resistive,rotate=270,speed=80000000,fps=60 En el mismo fichero /boot/config.txt a\u00f1adir las siguientes l\u00edneas (si ya existen comentarlas): 1 2 3 4 hdmi_force_hotplug=1 hdmi_group=2 hdmi_mode=87 hdmi_cvt=320 240 60 1 0 0 0","title":"Configuraci\u00f3n de PiTFT"},{"location":"2016-07-21-PIGRRL-2.html#configurar-emulationstation","text":"Vamos a hacer que EmulationStation arranque autom\u00e1ticamente con el sistema. A\u00f1adir lo siguiente al final del fichero /etc/profile : 1 [ -n \" ${ SSH_CONNECTION } \" ] || emulationstation Configurar con raspi-config el autologin en consola. Para ello seguir la ruta 3 Boot Options > B1 Desktop / CLI > B2 Console Autologin .","title":"Configurar EmulationStation"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-retrogame","text":"El pad que incorpora PiGRRL-2 enlaza cada bot\u00f3n con un GPIO determinado. Para que las se\u00f1ales en estos GPIO's se conviertan en pulsaciones de teclas normales hay que instalar y configurar un software que nos proporciona Adafruit, mediante los siguientes pasos: Bajamos el c\u00f3digo: 1 2 3 cd ~ git clone https://github.com/adafruit/Adafruit-Retrogame.git cd Adafruit-Retrogame Editamos el fichero ~/Adafruit-Retrogame/retrogame.c y sustituimos la estructura ioStandard que hay a partir de la l\u00ednea 111 por lo que sigue. Esto har\u00e1 corresponder algunas de las teclas importantes para manejar los emuladores y el propio EmulationStation con el mapeo de pulsadores del gamepad de PiGRRL 2: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ioStandard [] = { // This pin / key table is used when the PiTFT isn ' t found // ( using HDMI or composite instead ), as with our original // retro gaming guide . // Input Output ( from / usr / include / linux / input . h ) { 17 , KEY_RIGHTSHIFT }, // PiTFT 17 { 22 , KEY_RIGHTCTRL }, // PiTFT 22 { 27 , KEY_ESC }, // PiTFT 27 { 4 , KEY_LEFT }, // Left { 16 , KEY_UP }, // Up { 19 , KEY_RIGHT }, // Right { 26 , KEY_DOWN }, // Down { 5 , KEY_SPACE }, // Select { 6 , KEY_ENTER }, // Start { 14 , KEY_LEFTCTRL }, // A Button { 15 , KEY_LEFTALT }, // B Button { 20 , KEY_Z }, // X Button { 18 , KEY_X }, // Y Button { 12 , KEY_A }, // L Shoulder { 13 , KEY_S }, // R Shoulder // For credit / start / etc ., use USB keyboard or add more buttons . { - 1 , - 1 } }; // END OF LIST , DO NOT CHANGE Dentro del mismo fichero ~/Adafruit-Retrogame/retrogame.c acudir a la l\u00ednea 300 (tras el cambio anterior) y sustituir: 1 2 3 // Select io[] table for Cupcade (TFT) or 'normal' project. io = (access(\"/etc/modprobe.d/adafruit.conf\", F_OK) || access(\"/dev/fb1\", F_OK)) ? ioStandard : ioTFT; por: 1 io = ioStandard; Compilamos e instalamos: 1 2 make retrogame sudo mv retrogame /usr/local/bin Crear el fichero /etc/udev/rules.d/10-retrogame.rules con el siguiente contenido: 1 SUBSYSTEM==\"input\", ATTRS{name}==\"retrogame\", ENV{ID_INPUT_KEYBOARD}=\"1\" A\u00f1adir lo siguiente al final de /etc/rc.local : /usr/local/bin/retrogame & A\u00f1adir los siguientes m\u00f3dulos al fichero /etc/modules : 1 2 3 uinput joydev snd-bcm2835 Sustituir el contenido del fichero /opt/retropie/configs/all/emulationstation/es_input.cfg por: <?xml version=\"1.0\"?> <inputList> <inputAction type= \"onfinish\" > <command> /opt/retropie/supplementary/emulationstation/scripts/inputconfiguration.sh </command> </inputAction> <inputConfig type= \"keyboard\" deviceName= \"Keyboard\" deviceGUID= \"-1\" > <input name= \"a\" type= \"key\" id= \"1073742048\" value= \"1\" /> <input name= \"b\" type= \"key\" id= \"1073742050\" value= \"1\" /> <input name= \"down\" type= \"key\" id= \"1073741905\" value= \"1\" /> <input name= \"left\" type= \"key\" id= \"1073741904\" value= \"1\" /> <input name= \"pagedown\" type= \"key\" id= \"120\" value= \"1\" /> <input name= \"pageup\" type= \"key\" id= \"122\" value= \"1\" /> <input name= \"right\" type= \"key\" id= \"1073741903\" value= \"1\" /> <input name= \"select\" type= \"key\" id= \"32\" value= \"1\" /> <input name= \"start\" type= \"key\" id= \"13\" value= \"1\" /> <input name= \"up\" type= \"key\" id= \"1073741906\" value= \"1\" /> </inputConfig> </inputList>","title":"Instalaci\u00f3n de Retrogame"},{"location":"2016-07-21-PIGRRL-2.html#fin","text":"S\u00f3lo queda copiar algunas roms a los directorios correspondientes a cada emulador dentro de la ruta /home/pi/RetroPie/roms . Hasta que no lo hagamos no aparecer\u00e1 la entrada correspondiente al emulador en EmulationStation. Si a\u00f1adimos las roms mientras \u00e9ste est\u00e1 en marcha (conect\u00e1ndonos por sFTP por ejemplo) habr\u00e1 que reiniciarlo para que las encuentre.","title":"FIN"},{"location":"2016-07-21-PIGRRL-2.html#enlaces","text":"Running OpenGL-based Games & Emulators on Adafruit PiTFT Displays Adafruit PiTFT - 2.8\" Touchscreen Display for Raspberry Pi Adafruit-PiTFT-Helper : A script for configuring Adafruit's PiTFT displays on a Raspberry Pi. Tactile switch as power button Adafruit-Retrogame : Librer\u00eda para mapear GPIO's a teclas. Retro Gaming with Raspberry Pi Retroarch Controls","title":"Enlaces:"},{"location":"2016-08-02-stm32-vl-discovery.html","text":"ST propone varios entornos de desarrollo para trabajar sobre su placa STM32 VL Discovery , pero en todos los casos sobre Windows. Vamos a ver aqu\u00ed c\u00f3mo montar el toolkit de desarrollo sobre Ubuntu 16.04. Instalaci\u00f3n de \u00faltima versi\u00f3n de GCC ARM Embedded siguiendo estas instrucciones . B\u00e1sicamente consiste en bajar este archivo y descomprimirlo en /usr/local del siguiente modo: 1 2 $ cd /usr/local $ sudo tar xjvf ~/Descargas/gcc-arm-none-eabi-5_4-2016q2-20160622-linux.tar.bz2 Introducir en la variable PATH del sistema la ruta del directorio bin del compilador GCC ARM reci\u00e9n instalado incorporando al final del fichero ~/.profile: 1 PATH=\"/usr/local/gcc-arm-none-eabi-5_4-2016q2/bin:$PATH\" Descargamos la STM32 Firmware Library de aqu\u00ed . Descomprimimos y dejamos en la ruta ~/STM32F10x_StdPeriph_Lib_V3.5.0 . Descargamos plantilla para los proyectos de c\u00f3digo por ejemplo en ~/git/ : 1 2 $ cd ~/git $ git clone git://github.com/geoffreymbrown/STM32-Template.git La compilaci\u00f3n del c\u00f3digo se har\u00eda as\u00ed: 1 2 $ cd ~/git/STM32-Template/Demo $ make Modificamos el fichero ~/git/STM32-Template/Makefile.common ajustando las variables TOOLROOT y LIBROOT de la siguiente forma: 1 2 TOOLROOT=/usr/local/gcc-arm-none-eabi-5_4-2016q2/bin LIBROOT=~/STM32F10x_StdPeriph_Lib_V3.5.0 Instalamos el software que nos permitir\u00e1 hacer uso del interfaz STLink para programar el MCU: 1 2 $ cd ~/git $ git clone git://github.com/texane/stlink.git Instalamos una serie de paquetes necesarios: 1 $ sudo apt-get install pkg-config intltool build-essential cmake libusb-1.0 libgtk-3-dev Tal y como se explica en el README del proyecto descargado en el paso 7, el interfaz STLINKv1 que utiliza la STM32VLDISCOVERY, tiene ciertos problemas que para evitar hay que reconfigurar el m\u00f3dulo usb-storage . Para ello ejecutar lo siguiente al principio de una sesi\u00f3n en la que se quiera trabajar con \u00e9l: 1 $ sudo modprobe -r usb-storage && sudo modprobe usb-storage quirks = 0483 :3744:i Si se quiere hacer permanente el cambio en su lugar, crear el fichero /etc/modprobe.d/usb-storage.conf con el siguiente contenido: 1 2 # stlink/v1 ignore mass storage options usb-storage quirks=0483:3744:i Compilamos: 1 2 3 4 5 6 7 $ cd ~/git/stlink $ ./autogen.sh $ ./configure --with-gtk-gui $ make $ mkdir build && cd build $ cmake -DCMAKE_BUILD_TYPE = Debug .. $ make Conectar la placa por USB al ordenador. Arrancamos gdbserver: 1 2 $ cd ~/git/stlink/build $ sudo ./st-util -1 Conectamos con \u00e9l desde el directorio donde est\u00e9 el binario que queremos depurar o ejecutar: 1 2 3 4 5 $ cd ~/ git / STM32 - Template / Demo $ arm - none - eabi - gdb Demo . elf ( gdb ) target extended - remote localhost : 4242 ( gdb ) load ( gdb ) quit","title":"Entorno desarrollo STM32 VL Discovery sobre Linux"},{"location":"2016-08-17-el-mundo-de-ayer.html","text":"He pasado el \u00faltimo mes viviendo a principios del siglo XX gracias a la descripci\u00f3n que hace Stefan Zweig de la Europa de ese tiempo. A pesar de que siempre he intuido que mi cultura tiene una nacionalidad m\u00e1s amplia que la espa\u00f1ola, yo cre\u00eda que Europa era un invento de Miterrand y Francia en general como forma de domesticar a Alemania tras las dos guerras mundiales. Zweig me ha ense\u00f1ado que la conciencia europea es algo m\u00e1s antiguo y poderoso de lo que sospechaba. A pesar de que en su tiempo fue uno de los escritores m\u00e1s populares del mundo, yo no lo conoc\u00eda. Tras descubrirlo, he investigado y descubierto que fue un excelente testigo de las situaciones que condujeron a nuestro continente a las guerras mundiales. Por cierto que en los dos casos Zweig parece apuntar a intereses de poderes f\u00e1cticos en la sombra que no necesariamente representaban la opini\u00f3n del pueblo, pero que supieron coaccionarlo. La coyuntura anterior a la Primera Guerra Mundial tambi\u00e9n era una de mis carencias en materia de historia que este libro me ha ayudado a paliar m\u00e1s que ninguno otro hasta ahora. El relato es una autobiograf\u00eda que escribi\u00f3 en el exilio. Era jud\u00edo austriaco y naturalmente tuvo que abandonar su pa\u00eds y le convirtieron en ap\u00e1trida (le retiraron la nacionalidad en su pa\u00eds y prohibieron todas sus obras) hasta que en 1942 no pudo soportar la crueldad de su tiempo y poco despu\u00e9s de escribir el libro se suicid\u00f3 a los 60 a\u00f1os junto a su esposa. Zweig fue un intelectual con may\u00fasculas, cuyas obras y esfuerzo humanista seguramente nos influyen hoy en d\u00eda. Su nombre tengo la impresi\u00f3n de que ha quedado un poco olvidado por c\u00f3mo se desenvolvieron los \u00faltimos a\u00f1os de su vida. Por mi parte voy a tratar de acercarme al resto de su obra. Como ejemplo, Wes Anderson reconoci\u00f3 que su pel\u00edcula El Gran Hotel Budapest se inspira en las obras de Stefan Zweig.","title":"El mundo de ayer - Stefan Zweig"},{"location":"2016-10-17-raspi-switch.html","text":"Una de las carencias de Raspberry Pi es la falta de bot\u00f3n de encendido o apagado. Algo que no es grave, s\u00ed resulta inc\u00f3modo por ejemplo cuando se utiliza como media center con Kodi ya que puede no resultar sencillo quitar y poner el cable de encendido a la Raspberry estando \u00e9sta detr\u00e1s del televisor enterrada en cables y aparatos. La opci\u00f3n l\u00f3gica ser\u00eda alimentar la Raspberry a trav\u00e9s de una regleta de conexiones con interruptor, pero cuando no es posible/conveniente, hay alternativas. La comunidad ha desarrollado numerosos accesorios (como \u00e9ste ), pero existe una opci\u00f3n mucho m\u00e1s simplificada y barata que paso a describir. Se trata de conectar un pulsador a los pines de reset que existen en todas las versiones de Raspberry Pi. En la placa se se\u00f1alan con la etiqueta Run y seg\u00fan la versi\u00f3n se encuentran en uno u otro lugar. Por ejemplo en las versiones B+ y 2 est\u00e1 en el borde izquierdo justo debajo de los LEDs de actividad y encendido: En la versi\u00f3n 3 est\u00e1 desplazado a la derecha del GPIO: Pues bien, s\u00f3lo hay que soldar un par de pines a esas dos conexiones: En esos pines lo ideal ser\u00eda enchufar un conector de pin hembra doble como \u00e9ste: Hasta que me haga con \u00e9l he improvisado la conexi\u00f3n con unos terminales de empalme aplastados: En el otro extremo de los cables se puede conectar cualquier tipo de interruptor o mejor un pulsador. Por ejemplo utilic\u00e9 un tactile switch que me sobr\u00f3 del montaje de la PiGRRL 2 : Se puede situar en la caja haciendo un agujero en un lugar que no interfiera con los componentes altos de la Raspberry y pegarlo con cola caliente: Desde fuera el resultado final es el que puede verse en la imagen de cabecera del post. El pulsador en realidad es un Reset. De hecho viene bien tambi\u00e9n en caso de un bloqueo de Kodi. As\u00ed, el apagado de la Raspberry tendremos que hacerlo de forma l\u00f3gica. Para ello se puede utilizar el men\u00fa \"Apagar\" de Kodi (abajo a la izquierda en la pantalla principal). En mi caso incluso se apaga el televisor ya que Kodi debe enviar la orden a trav\u00e9s del HDMI. Con esto la Raspberry queda apagada. S\u00f3lo queda el consumo residual del alimentador microUSB, pero supongo que si es medianamente inteligente ser\u00e1 despreciable. Luego a la hora de encender s\u00f3lo tengo que pulsar el switch. Tambi\u00e9n en mi caso se enciende autom\u00e1ticamente el televisor a los 2 \u00f3 3 segundos de haber pulsado el switch y aparece el interfaz Kodi en pantalla (en una Raspberry Pi 2).","title":"Interruputor de encendido para Raspberry Pi"},{"location":"2016-12-06-raspi3-kodi.html","text":"Lo que sigue es una versi\u00f3n simplificada del montaje de Kodi sobre Raspberry Pi descrito en un post anterior . Dado que la versi\u00f3n 3 de Raspberry Pi incluye un adaptador Wifi, no ser\u00e1 necesario a\u00f1adirlo. Prescindiendo tambi\u00e9n del decodificador TDT, el concentrador USB deja de ser necesario, resultando en conjunto una instalaci\u00f3n m\u00e1s sencilla y econ\u00f3mica. En el post anterior hac\u00eda m\u00e1s hincapi\u00e9 en la configuraci\u00f3n del decodificador TDT. Aqu\u00ed nos centraremos m\u00e1s en el propio Kodi. Elementos necesarios \u00b6 Raspberry Pi 3: En Raspipc.es o en PCComponentes Tarjeta de memoria, recomendable m\u00ednimo 16GB. Aunque servir\u00eda una de 4GB, al ser un media center, podr\u00eda ser necesaria cierto espacio libre para cachear contenidos. Lo que s\u00ed es importante es que la tarjeta sea lo m\u00e1s r\u00e1pida posible. Class 10 como m\u00ednimo. Mando si nuestra tele no soporta el protocolo CEC . Mando o control remoto \u00b6 Normalmente los televisores de hasta 8 a\u00f1os soportan el protocolo CEC que permite comandar dispositivos conectados por HDMI desde el mismo mando. En mi caso (un Sony KDL 40U4000) para que empezara a funcionar tuve que pulsar una tecla del mando llamada \"SYNC MENU\". En otras marcas me consta que se llama de otra forma. Si nuestro televisor no lo soporta, se puede utilizar un rat\u00f3n/teclado inal\u00e1mbricos o adquirir un mando de los muchos que hay previstos para esta funci\u00f3n ( ejemplo ). Por \u00faltimo est\u00e1 la opci\u00f3n de utilizar algunas aplicaciones m\u00f3viles como: Yatse, the Kodi Remote Kore, Official Remote for Kodi Instalaci\u00f3n \u00b6 El proceso para la instalaci\u00f3n de Kodi ser\u00eda: Bajar OpenELEC de aqu\u00ed Instalar con una utilidad de flasheo de tarjetas como por ejemplo Etcher . Desde Linux puede hacerse con el siguiente comando (sustituyendo el /dev por el que corresponda; en el post anterior hay m\u00e1s detalles sobre esto): 1 gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M Pinchar en Raspberry y conectar. El primer arranque es m\u00e1s lento ya que se redimensiona la partici\u00f3n principal de la tarjeta de memoria para aprovechar toda su superficie. En la actualidad (2016-12-06) aparece un mensaje de error al principio indicando que el Add-on \"TheAudioDB\" es incompatible o est\u00e1 roto en el repositorio. De momento responderemos que no a la pregunta de desactivarlo, ya que al lograr conectividad a la red muchos de los add-ons se actualizar\u00e1n, pudiendo solucionarse el problema por si mismo. Aparece un asistente de configuraci\u00f3n. Los pasos m\u00e1s importantes son: Networking: Si vamos a conectar por Wifi habr\u00e1 que seleccionar y configurar el punto de acceso. Sharing and Remote Access: Aunque esto ser\u00e1 m\u00e1s \u00fatil para los que se desenvuelvan bien en Linux, se recomienda activar el servicio SSH. Nos permitir\u00e1 por ejemplo explorar el sistema de archivos de la Raspberry con clientes como Filezilla. Configuraci\u00f3n \u00b6 Una vez finalizado el asistente, el sistema ya es funcional, pero vamos a repasar algunos ajustes: Acudimos a la ruta: System > Settings > Appearance > International y cambiamos lo siguiente: Language : Spanish (a partir de ahora las indicaciones de rutas de men\u00fa cambian consecuentemente del ingl\u00e9s al espa\u00f1ol) Regi\u00f3n : Espa\u00f1a (24 horas) Distribuciones de teclado : Spanish QWERTY (hay que deseleccionar el English QWERTY adem\u00e1s) Pa\u00eds del huso horario : Spain Acudimos a la ruta: Sistema > OpenELEC > Sistema y cambiamos lo siguiente: Teclado > Disposici\u00f3n de teclas : es Or\u00edgenes de datos \u00b6 Si tenemos fuentes de archivos en casa, como pueda ser un NAS o un ordenador en la misma red, hay que crear accesos para dichas fuentes en las distintas secciones que hay para los contenidos (M\u00fasica, V\u00eddeos e Im\u00e1genes). Kodi permite adem\u00e1s sincronizar los metadatos de esos archivos con varias bases de datos en internet, de manera que podremos ver sinopsis, car\u00e1tulas y en general informaci\u00f3n enriquecida asociada a los contenidos. Por ejemplo as\u00ed se har\u00eda para una carpeta compartida que contuviera pel\u00edculas: Entramos en la secci\u00f3n V\u00eddeos > Archivos . Seleccionamos la opci\u00f3n A\u00f1adir v\u00eddeos... . Aparece el cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo en el que pulsamos el bot\u00f3n Buscar . Emerge por la derecha de la pantalla un listado que nos permite explorar el propio sistema de archivos de la Raspberry (opci\u00f3n Directorio de inicio ) y los distintos protocolos de descubrimiento de red que Kodi soporta. El m\u00e1s habitual ser\u00e1 Red Windows (SMB) , aunque si tenemos un NAS o equipo con Linux, puede ser m\u00e1s conveniente el Network File System (NFS) por ejemplo. Seleccionamos lo que corresponda. Dependiendo del protocolo elegido y de la configuraci\u00f3n del mismo que tengamos en el origen de datos, nos aparecer\u00e1 la fuente o tendremos que introducirla a mano. Tambi\u00e9n podr\u00e1 o no requerirnos credenciales de acceso a la fuente. Una vez seleccionada la fuente volveremos al cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo donde daremos nombre a la fuente en la parte inferior y pulsaremos el bot\u00f3n OK . Aparecer\u00e1 otro cuadro de di\u00e1logo con el t\u00edtulo Establecer el contenido . En \u00e9l lo que tenemos que hacer es seleccionar el tipo de contenido arriba a la izquierda por medio de las peque\u00f1as flechas. Las opciones son: Videoclips : Para v\u00eddeos musicales. Series Pel\u00edculas Para cada uno de ellos se selecciona a la derecha un scraper que es una base de datos en internet con metainformaci\u00f3n. Por defecto s\u00f3lo contamos con uno, aunque se pueden activar m\u00e1s por medio de add-ons. Al terminar esta configuraci\u00f3n, veremos una nueva secci\u00f3n dedicada a las pel\u00edculas en el men\u00fa principal de Kodi. Para sacar verdadero provecho de Kodi, hay que conocer e instalar extensiones o add-ons. No es el prop\u00f3sito de esta gu\u00eda y hay sitios enteros dedicados a enumerarlos y a proporcionar instrucciones detalladas de instalaci\u00f3n como los siguientes: https://howtomediacenter.com/es http://mundokodi.com/ http://kodiaddonstv.com/","title":"Raspberry Pi 3 + KODI"},{"location":"2016-12-06-raspi3-kodi.html#elementos-necesarios","text":"Raspberry Pi 3: En Raspipc.es o en PCComponentes Tarjeta de memoria, recomendable m\u00ednimo 16GB. Aunque servir\u00eda una de 4GB, al ser un media center, podr\u00eda ser necesaria cierto espacio libre para cachear contenidos. Lo que s\u00ed es importante es que la tarjeta sea lo m\u00e1s r\u00e1pida posible. Class 10 como m\u00ednimo. Mando si nuestra tele no soporta el protocolo CEC .","title":"Elementos necesarios"},{"location":"2016-12-06-raspi3-kodi.html#mando-o-control-remoto","text":"Normalmente los televisores de hasta 8 a\u00f1os soportan el protocolo CEC que permite comandar dispositivos conectados por HDMI desde el mismo mando. En mi caso (un Sony KDL 40U4000) para que empezara a funcionar tuve que pulsar una tecla del mando llamada \"SYNC MENU\". En otras marcas me consta que se llama de otra forma. Si nuestro televisor no lo soporta, se puede utilizar un rat\u00f3n/teclado inal\u00e1mbricos o adquirir un mando de los muchos que hay previstos para esta funci\u00f3n ( ejemplo ). Por \u00faltimo est\u00e1 la opci\u00f3n de utilizar algunas aplicaciones m\u00f3viles como: Yatse, the Kodi Remote Kore, Official Remote for Kodi","title":"Mando o control remoto"},{"location":"2016-12-06-raspi3-kodi.html#instalacion","text":"El proceso para la instalaci\u00f3n de Kodi ser\u00eda: Bajar OpenELEC de aqu\u00ed Instalar con una utilidad de flasheo de tarjetas como por ejemplo Etcher . Desde Linux puede hacerse con el siguiente comando (sustituyendo el /dev por el que corresponda; en el post anterior hay m\u00e1s detalles sobre esto): 1 gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M Pinchar en Raspberry y conectar. El primer arranque es m\u00e1s lento ya que se redimensiona la partici\u00f3n principal de la tarjeta de memoria para aprovechar toda su superficie. En la actualidad (2016-12-06) aparece un mensaje de error al principio indicando que el Add-on \"TheAudioDB\" es incompatible o est\u00e1 roto en el repositorio. De momento responderemos que no a la pregunta de desactivarlo, ya que al lograr conectividad a la red muchos de los add-ons se actualizar\u00e1n, pudiendo solucionarse el problema por si mismo. Aparece un asistente de configuraci\u00f3n. Los pasos m\u00e1s importantes son: Networking: Si vamos a conectar por Wifi habr\u00e1 que seleccionar y configurar el punto de acceso. Sharing and Remote Access: Aunque esto ser\u00e1 m\u00e1s \u00fatil para los que se desenvuelvan bien en Linux, se recomienda activar el servicio SSH. Nos permitir\u00e1 por ejemplo explorar el sistema de archivos de la Raspberry con clientes como Filezilla.","title":"Instalaci\u00f3n"},{"location":"2016-12-06-raspi3-kodi.html#configuracion","text":"Una vez finalizado el asistente, el sistema ya es funcional, pero vamos a repasar algunos ajustes: Acudimos a la ruta: System > Settings > Appearance > International y cambiamos lo siguiente: Language : Spanish (a partir de ahora las indicaciones de rutas de men\u00fa cambian consecuentemente del ingl\u00e9s al espa\u00f1ol) Regi\u00f3n : Espa\u00f1a (24 horas) Distribuciones de teclado : Spanish QWERTY (hay que deseleccionar el English QWERTY adem\u00e1s) Pa\u00eds del huso horario : Spain Acudimos a la ruta: Sistema > OpenELEC > Sistema y cambiamos lo siguiente: Teclado > Disposici\u00f3n de teclas : es","title":"Configuraci\u00f3n"},{"location":"2016-12-06-raspi3-kodi.html#origenes-de-datos","text":"Si tenemos fuentes de archivos en casa, como pueda ser un NAS o un ordenador en la misma red, hay que crear accesos para dichas fuentes en las distintas secciones que hay para los contenidos (M\u00fasica, V\u00eddeos e Im\u00e1genes). Kodi permite adem\u00e1s sincronizar los metadatos de esos archivos con varias bases de datos en internet, de manera que podremos ver sinopsis, car\u00e1tulas y en general informaci\u00f3n enriquecida asociada a los contenidos. Por ejemplo as\u00ed se har\u00eda para una carpeta compartida que contuviera pel\u00edculas: Entramos en la secci\u00f3n V\u00eddeos > Archivos . Seleccionamos la opci\u00f3n A\u00f1adir v\u00eddeos... . Aparece el cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo en el que pulsamos el bot\u00f3n Buscar . Emerge por la derecha de la pantalla un listado que nos permite explorar el propio sistema de archivos de la Raspberry (opci\u00f3n Directorio de inicio ) y los distintos protocolos de descubrimiento de red que Kodi soporta. El m\u00e1s habitual ser\u00e1 Red Windows (SMB) , aunque si tenemos un NAS o equipo con Linux, puede ser m\u00e1s conveniente el Network File System (NFS) por ejemplo. Seleccionamos lo que corresponda. Dependiendo del protocolo elegido y de la configuraci\u00f3n del mismo que tengamos en el origen de datos, nos aparecer\u00e1 la fuente o tendremos que introducirla a mano. Tambi\u00e9n podr\u00e1 o no requerirnos credenciales de acceso a la fuente. Una vez seleccionada la fuente volveremos al cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo donde daremos nombre a la fuente en la parte inferior y pulsaremos el bot\u00f3n OK . Aparecer\u00e1 otro cuadro de di\u00e1logo con el t\u00edtulo Establecer el contenido . En \u00e9l lo que tenemos que hacer es seleccionar el tipo de contenido arriba a la izquierda por medio de las peque\u00f1as flechas. Las opciones son: Videoclips : Para v\u00eddeos musicales. Series Pel\u00edculas Para cada uno de ellos se selecciona a la derecha un scraper que es una base de datos en internet con metainformaci\u00f3n. Por defecto s\u00f3lo contamos con uno, aunque se pueden activar m\u00e1s por medio de add-ons. Al terminar esta configuraci\u00f3n, veremos una nueva secci\u00f3n dedicada a las pel\u00edculas en el men\u00fa principal de Kodi. Para sacar verdadero provecho de Kodi, hay que conocer e instalar extensiones o add-ons. No es el prop\u00f3sito de esta gu\u00eda y hay sitios enteros dedicados a enumerarlos y a proporcionar instrucciones detalladas de instalaci\u00f3n como los siguientes: https://howtomediacenter.com/es http://mundokodi.com/ http://kodiaddonstv.com/","title":"Or\u00edgenes de datos"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html","text":"Nota: Este post es una especie de actualizaci\u00f3n de este otro que correspond\u00eda a la versi\u00f3n 6.0.3 de OpenELEC (Kodi 15). Si est\u00e1s usando esa versi\u00f3n, utiliza el post anterior en lugar de \u00e9ste. A continuaci\u00f3n se describe el montaje de un media center ejecut\u00e1ndose sobre Raspberry Pi 3 basado en la distribuci\u00f3n OpenELEC que implementa de forma muy ligera el software media center Kodi (anteriormente llamado XBMC). Se incorpora un decodificador TDT gestionado con el software Tvheadend . En caso de tener el router cerca y poder llevar un cable ethernet hasta la Raspberry Pi se recomienda, ya que ser\u00e1 habitual consumir contenidos pesados por red. Para el airmouse o teclado/rat\u00f3n inal\u00e1mbrico hay alternativas: Aplicaciones para el m\u00f3vil: Kore o Yatse Mando a distancia del TV: Si nuestro TV soporta el protocolo CEC , puede comandar Kodi a trav\u00e9s del cable HDMI Elementos necesarios \u00b6 Empezamos con la lista de piezas que vamos a necesitar. Hardware \u00b6 Raspberry Pi 3: En Raspipc.es o en Pccomponentes.com Tarjeta microSD: En Raspipc.es o en Amazon.es Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es Software \u00b6 OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT. Instalaci\u00f3n \u00b6 A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques. Instalaci\u00f3n OpenELEC \u00b6 Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-7.0.1.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta (en el ejemplo son dos, pero en una tarjeta nueva lo normal es que s\u00f3lo sea una): 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-7.0.1.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync Conexi\u00f3n de piezas \u00b6 Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT a uno de los puertos USB de la Raspberry Pi y el cable de antena al propio adaptador. Finalmente alimentamos la Raspberry el t\u00edpico alimentador microUSB. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas. Configuraci\u00f3n Kodi \u00b6 El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Si vamos a conectar por Wifi y no lo hemos hecho durante el asistente inicial, hay que acudir a la siguiente ruta para conectar a nuestro punto de acceso: 1 Sistema / OpenELEC / Conexiones / engancho mi AP Instalaci\u00f3n de TVheadend \u00b6 Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / TV / General / Activado Configuraci\u00f3n de Tvheadend \u00b6 Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 6 7 Configuration / General / Language settings / Available / Spanish ; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type : DVB - T Network / Network Name : TDT / Create Configuration / DVB Inputs / Muxes / Add ( ver lista m\u00e1s adelante ) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / ( seleccionamos TDT ) / Save Configuration / DVB Inputs / Networks / TDT / Force Scan Configuration / DVB Inputs / Muxes ( observar evoluci\u00f3n del escaneo ) Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save . Instalaci\u00f3n licencia MPEG-2 \u00b6 Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"Raspberry Pi 3 + KODI 16 + Tvheadend"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#elementos-necesarios","text":"Empezamos con la lista de piezas que vamos a necesitar.","title":"Elementos necesarios"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#hardware","text":"Raspberry Pi 3: En Raspipc.es o en Pccomponentes.com Tarjeta microSD: En Raspipc.es o en Amazon.es Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es","title":"Hardware"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#software","text":"OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT.","title":"Software"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion","text":"A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques.","title":"Instalaci\u00f3n"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-openelec","text":"Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-7.0.1.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta (en el ejemplo son dos, pero en una tarjeta nueva lo normal es que s\u00f3lo sea una): 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-7.0.1.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync","title":"Instalaci\u00f3n OpenELEC"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#conexion-de-piezas","text":"Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT a uno de los puertos USB de la Raspberry Pi y el cable de antena al propio adaptador. Finalmente alimentamos la Raspberry el t\u00edpico alimentador microUSB. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas.","title":"Conexi\u00f3n de piezas"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#configuracion-kodi","text":"El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Si vamos a conectar por Wifi y no lo hemos hecho durante el asistente inicial, hay que acudir a la siguiente ruta para conectar a nuestro punto de acceso: 1 Sistema / OpenELEC / Conexiones / engancho mi AP","title":"Configuraci\u00f3n Kodi"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-de-tvheadend","text":"Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / TV / General / Activado","title":"Instalaci\u00f3n de TVheadend"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#configuracion-de-tvheadend","text":"Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 6 7 Configuration / General / Language settings / Available / Spanish ; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type : DVB - T Network / Network Name : TDT / Create Configuration / DVB Inputs / Muxes / Add ( ver lista m\u00e1s adelante ) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / ( seleccionamos TDT ) / Save Configuration / DVB Inputs / Networks / TDT / Force Scan Configuration / DVB Inputs / Muxes ( observar evoluci\u00f3n del escaneo ) Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save .","title":"Configuraci\u00f3n de Tvheadend"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-licencia-mpeg-2","text":"Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"Instalaci\u00f3n licencia MPEG-2"},{"location":"2018-05-05-otto.html","text":"En este art\u00edculo se detallan las piezas hardware, software e informaci\u00f3n conveniente para montar y poner en marcha el robot Otto . Enlaces \u00b6 OttoDIY: OttoDIY/DIY - Github OttoDIY/DIY - Instructables OttoDIY/DIY - Thingiverse OttoDIY+: OttoDIY/PLUS - Github OttoDIY/PLUS - Instructables OttoDIY/PLUS - Thingiverse Componentes \u00b6 OttoDIY \u00b6 Cable de pin hembra-hembra Pulsador ON/OFF Portapilas AAx4 Shield Arduino Nano M\u00f3dulo sensor Ultrasonidos HC-SR04 Servo SG90 : 4 unidades Zumbador 5V Arduino Nano 328p OttoDIY+ \u00b6 Pulsaodor t\u00e1ctil TTP223B : 3 unidades M\u00f3dulo Bluetooth HC-05 Matriz LED MAX7219 Montaje \u00b6 Los STLs de las piezas impresas se encuentran en el repositorio GitHub dentro del directorio 3D print . Para el montaje seguir el PDF incluido en la ra\u00edz del repositorio GitHub (en el momento de escribir este art\u00edculo era la versi\u00f3n 07 ). Calibraci\u00f3n \u00b6 Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot: //----------------------------------------------------------------- //-- Easy calibration for Otto DIY //-- CC BY SA (http://ottodiy.com) //-- Javier Isabel, 02/06/2015 //-- VERY IMPORTANT only calibrate ONE TIME per board!to avoid damage EEPROM memory //----------------------------------------------------------------- #include <Otto.h> #include <Servo.h> #include <Oscillator.h> #include <EEPROM.h> //-- First step: Configure the pins where the servos are attached /* --------------- | O O | |---------------| YR 3==> | | <== YL 2 --------------- || || || || RR 5==> ----- ------ <== RL 4 |----- ------| */ #define PIN_YL 2 #define PIN_YR 3 #define PIN_RL 4 #define PIN_RR 5 #define TRIM_YL 3 #define TRIM_YR 9 #define TRIM_RL -3 #define TRIM_RR 6 Otto Otto ; void setup () { Otto . init ( PIN_YL , PIN_YR , PIN_RL , PIN_RR , false ); Otto . setTrims ( TRIM_YL , TRIM_YR , TRIM_RL , TRIM_RR ); //change Trim \"offset values\" gradually until Otto is completely straight (90\u00ba) // Otto.saveTrimsOnEEPROM(); //use only after completely straight(90\u00ba), delete this line after for further programming } void loop () { //test comparing before & after function Otto . home (); } Por medio de ensayo/error identificar los valores de TRIM_RR , TRIM_RL , TRIM_YR y TRIM_YL que hacen que las cuatro articulaciones queden perfectamente cuadradas. Cuando se consiga, descomentar la l\u00ednea que contiene el comando Otto.saveTrimsOnEEPROM(); y ejecutar una vez m\u00e1s para que se almacenen los valores en la EEPROM. A partir de entonces, todos los sketches que utilicen la librer\u00eda Otto y que inicialicen ese objeto por medio de la funci\u00f3n init poniendo true en el quinto argumento, cargar\u00e1n estos valores de la calibraci\u00f3n de la EEPROM y por tanto comenzar\u00e1n con el robot bien encuadrado. En el repositorio hay sketches que no se basan en la librer\u00eda Otto sino que gestionan los servos directamente. En estos casos la gesti\u00f3n del trim tambi\u00e9n se har\u00e1 directamente, ya que desafortunadamente las posiciones de los trim en la EEPROM no coinciden con los que hace la librer\u00eda Otto, para evitar tener que regrabar sus valores en la EEPROM cada vez que pasemos de un tipo a otro de sketch. Por ejemplo en el sketch Otto_smooth_criminal, que no utiliza la librer\u00eda Otto, los trim se leen de la EEPROM en orden inverso. Por tanto, ser\u00e1 mejor desactivar su lectura y escribir los valores de trim directamente en el c\u00f3digo. As\u00ed: #define EEPROM_TRIM false // Activate to take callibration data from internal memory #define TRIM_RR 6 #define TRIM_RL -3 #define TRIM_YR 9 #define TRIM_YL 3 Programaci\u00f3n \u00b6 De entre los varios sketches de ejemplo que vienen en el repositorio, el m\u00e1s pr\u00e1ctico para empezar a hacer una programaci\u00f3n personalizada de Otto es el Otto_BASIC . En los comentarios que hay al principio se describen las funciones b\u00e1sicas de la librer\u00eda Otto: /*SOUNDS****************** * S_connection S_disconnection S_buttonPushed S_mode1 S_mode2 S_mode3 S_surprise S_OhOoh S_OhOoh2 S_cuddly * S_sleeping S_happy S_superHappy S_happy_short S_sad S_confused S_fart1 S_fart2 S_fart3 */ /*MOVEMENTS LIST************** * dir=1---> FORWARD/LEFT * dir=-1---> BACKWARD/RIGTH * T : amount of movement. HIGHER VALUE SLOWER MOVEMENT usually 1000 (from 600 to 1400) * h: height of mov. around 20 jump(steps=1, int T = 2000); walk(steps, T, dir); turn(steps, T, dir); bend (steps, T, dir); //usually steps =1, T=2000 shakeLeg (steps, T, dir); updown(steps, T, HEIGHT); swing(steps, T, HEIGHT); tiptoeSwing(steps, T, HEIGHT); jitter(steps, T, HEIGHT); (small T) ascendingTurn(steps, T, HEIGHT); moonwalker(steps, T, HEIGHT,dir); crusaito(steps, T, HEIGHT,dir); flapping(steps, T, HEIGHT,dir); /*GESTURES LIST*************** OttoHappy OttoSuperHappy OttoSad OttoSleeping OttoFart OttoConfused OttoLove OttoAngry OttoFretful OttoMagic OttoWave OttoVictory OttoFail*/ En setup se hace una inicializaci\u00f3n b\u00e1sica de la librer\u00eda Otto y se emite un sonido por el buzzer. Luego en el loop se ha programado una sencilla funci\u00f3n para que Otto camine hacia delante hasta que localice un obst\u00e1culo a menos de 15cm y d\u00e9 unos pasos hacia atr\u00e1s y gire. //-- Function to avoid obstacles void obstacleMode (){ distance = Otto . getDistance (); if ( distance < 15 ){ Otto . sing ( S_surprise ); Otto . walk ( 2 , 1300 , -1 ); Otto . turn ( 3 , 1000 , -1 ); delay ( 50 ); } else { Otto . walk ( 2 , 1000 , 1 ); } } Es \u00fatil aprovechar la funcionalidad del sensor de distancia para disparar el comportamiento de Otto que queremos programar. En otro caso todo lo que programemos dentro de la funci\u00f3n loop se ejecutar\u00e1 sin parar. As\u00ed por ejemplo, imitando la funci\u00f3n obstacleMode , un ejemplo de loop en el que haremos que cuando pongamos la mano delante, Otto avance un par de pasos, haga el moonwalk hacia la derecha, d\u00e9 un peque\u00f1o salto y se detenga ejecutando el gesto de victoria ser\u00eda: void loop () { distance = Otto . getDistance (); if ( distance < 15 ){ Otto . walk ( 2 , 1000 , 1 ); Otto . home (); Otto . moonwalker ( 3 , 1000 , 25 , -1 ); Otto . home (); Otto . jump ( 1 , 1000 ); Otto . home (); Otto . playGesture ( OttoVictory ); Otto . home (); } else { Otto . home (); } }","title":"Otto DIY"},{"location":"2018-05-05-otto.html#enlaces","text":"OttoDIY: OttoDIY/DIY - Github OttoDIY/DIY - Instructables OttoDIY/DIY - Thingiverse OttoDIY+: OttoDIY/PLUS - Github OttoDIY/PLUS - Instructables OttoDIY/PLUS - Thingiverse","title":"Enlaces"},{"location":"2018-05-05-otto.html#componentes","text":"","title":"Componentes"},{"location":"2018-05-05-otto.html#ottodiy","text":"Cable de pin hembra-hembra Pulsador ON/OFF Portapilas AAx4 Shield Arduino Nano M\u00f3dulo sensor Ultrasonidos HC-SR04 Servo SG90 : 4 unidades Zumbador 5V Arduino Nano 328p","title":"OttoDIY"},{"location":"2018-05-05-otto.html#ottodiy_1","text":"Pulsaodor t\u00e1ctil TTP223B : 3 unidades M\u00f3dulo Bluetooth HC-05 Matriz LED MAX7219","title":"OttoDIY+"},{"location":"2018-05-05-otto.html#montaje","text":"Los STLs de las piezas impresas se encuentran en el repositorio GitHub dentro del directorio 3D print . Para el montaje seguir el PDF incluido en la ra\u00edz del repositorio GitHub (en el momento de escribir este art\u00edculo era la versi\u00f3n 07 ).","title":"Montaje"},{"location":"2018-05-05-otto.html#calibracion","text":"Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot: //----------------------------------------------------------------- //-- Easy calibration for Otto DIY //-- CC BY SA (http://ottodiy.com) //-- Javier Isabel, 02/06/2015 //-- VERY IMPORTANT only calibrate ONE TIME per board!to avoid damage EEPROM memory //----------------------------------------------------------------- #include <Otto.h> #include <Servo.h> #include <Oscillator.h> #include <EEPROM.h> //-- First step: Configure the pins where the servos are attached /* --------------- | O O | |---------------| YR 3==> | | <== YL 2 --------------- || || || || RR 5==> ----- ------ <== RL 4 |----- ------| */ #define PIN_YL 2 #define PIN_YR 3 #define PIN_RL 4 #define PIN_RR 5 #define TRIM_YL 3 #define TRIM_YR 9 #define TRIM_RL -3 #define TRIM_RR 6 Otto Otto ; void setup () { Otto . init ( PIN_YL , PIN_YR , PIN_RL , PIN_RR , false ); Otto . setTrims ( TRIM_YL , TRIM_YR , TRIM_RL , TRIM_RR ); //change Trim \"offset values\" gradually until Otto is completely straight (90\u00ba) // Otto.saveTrimsOnEEPROM(); //use only after completely straight(90\u00ba), delete this line after for further programming } void loop () { //test comparing before & after function Otto . home (); } Por medio de ensayo/error identificar los valores de TRIM_RR , TRIM_RL , TRIM_YR y TRIM_YL que hacen que las cuatro articulaciones queden perfectamente cuadradas. Cuando se consiga, descomentar la l\u00ednea que contiene el comando Otto.saveTrimsOnEEPROM(); y ejecutar una vez m\u00e1s para que se almacenen los valores en la EEPROM. A partir de entonces, todos los sketches que utilicen la librer\u00eda Otto y que inicialicen ese objeto por medio de la funci\u00f3n init poniendo true en el quinto argumento, cargar\u00e1n estos valores de la calibraci\u00f3n de la EEPROM y por tanto comenzar\u00e1n con el robot bien encuadrado. En el repositorio hay sketches que no se basan en la librer\u00eda Otto sino que gestionan los servos directamente. En estos casos la gesti\u00f3n del trim tambi\u00e9n se har\u00e1 directamente, ya que desafortunadamente las posiciones de los trim en la EEPROM no coinciden con los que hace la librer\u00eda Otto, para evitar tener que regrabar sus valores en la EEPROM cada vez que pasemos de un tipo a otro de sketch. Por ejemplo en el sketch Otto_smooth_criminal, que no utiliza la librer\u00eda Otto, los trim se leen de la EEPROM en orden inverso. Por tanto, ser\u00e1 mejor desactivar su lectura y escribir los valores de trim directamente en el c\u00f3digo. As\u00ed: #define EEPROM_TRIM false // Activate to take callibration data from internal memory #define TRIM_RR 6 #define TRIM_RL -3 #define TRIM_YR 9 #define TRIM_YL 3","title":"Calibraci\u00f3n"},{"location":"2018-05-05-otto.html#programacion","text":"De entre los varios sketches de ejemplo que vienen en el repositorio, el m\u00e1s pr\u00e1ctico para empezar a hacer una programaci\u00f3n personalizada de Otto es el Otto_BASIC . En los comentarios que hay al principio se describen las funciones b\u00e1sicas de la librer\u00eda Otto: /*SOUNDS****************** * S_connection S_disconnection S_buttonPushed S_mode1 S_mode2 S_mode3 S_surprise S_OhOoh S_OhOoh2 S_cuddly * S_sleeping S_happy S_superHappy S_happy_short S_sad S_confused S_fart1 S_fart2 S_fart3 */ /*MOVEMENTS LIST************** * dir=1---> FORWARD/LEFT * dir=-1---> BACKWARD/RIGTH * T : amount of movement. HIGHER VALUE SLOWER MOVEMENT usually 1000 (from 600 to 1400) * h: height of mov. around 20 jump(steps=1, int T = 2000); walk(steps, T, dir); turn(steps, T, dir); bend (steps, T, dir); //usually steps =1, T=2000 shakeLeg (steps, T, dir); updown(steps, T, HEIGHT); swing(steps, T, HEIGHT); tiptoeSwing(steps, T, HEIGHT); jitter(steps, T, HEIGHT); (small T) ascendingTurn(steps, T, HEIGHT); moonwalker(steps, T, HEIGHT,dir); crusaito(steps, T, HEIGHT,dir); flapping(steps, T, HEIGHT,dir); /*GESTURES LIST*************** OttoHappy OttoSuperHappy OttoSad OttoSleeping OttoFart OttoConfused OttoLove OttoAngry OttoFretful OttoMagic OttoWave OttoVictory OttoFail*/ En setup se hace una inicializaci\u00f3n b\u00e1sica de la librer\u00eda Otto y se emite un sonido por el buzzer. Luego en el loop se ha programado una sencilla funci\u00f3n para que Otto camine hacia delante hasta que localice un obst\u00e1culo a menos de 15cm y d\u00e9 unos pasos hacia atr\u00e1s y gire. //-- Function to avoid obstacles void obstacleMode (){ distance = Otto . getDistance (); if ( distance < 15 ){ Otto . sing ( S_surprise ); Otto . walk ( 2 , 1300 , -1 ); Otto . turn ( 3 , 1000 , -1 ); delay ( 50 ); } else { Otto . walk ( 2 , 1000 , 1 ); } } Es \u00fatil aprovechar la funcionalidad del sensor de distancia para disparar el comportamiento de Otto que queremos programar. En otro caso todo lo que programemos dentro de la funci\u00f3n loop se ejecutar\u00e1 sin parar. As\u00ed por ejemplo, imitando la funci\u00f3n obstacleMode , un ejemplo de loop en el que haremos que cuando pongamos la mano delante, Otto avance un par de pasos, haga el moonwalk hacia la derecha, d\u00e9 un peque\u00f1o salto y se detenga ejecutando el gesto de victoria ser\u00eda: void loop () { distance = Otto . getDistance (); if ( distance < 15 ){ Otto . walk ( 2 , 1000 , 1 ); Otto . home (); Otto . moonwalker ( 3 , 1000 , 25 , -1 ); Otto . home (); Otto . jump ( 1 , 1000 ); Otto . home (); Otto . playGesture ( OttoVictory ); Otto . home (); } else { Otto . home (); } }","title":"Programaci\u00f3n"},{"location":"2018-10-19-crankshaft.html","text":"Actualizaci\u00f3n 2019-07-07 Tras una actualizaci\u00f3n de los Google Play Services a principios de julio de 2019, la respuesta t\u00e1ctil de la pantalla durante la ejecuci\u00f3n de OpenAuto dej\u00f3 de funcionar. Est\u00e1 reportado como issue #352 en el repositorio de Crankshaft. En este post se ofrece una posibilidad para superar el problema hasta que aparezca una release que integre la soluci\u00f3n. Actualizaci\u00f3n 2019-07-22 Tras unos 9 meses de uso sin problemas, el m\u00f3dulo Car switch de Mausberry Circuits ha dejado de funcionar. Ha coincidido con varios d\u00edas en que he tenido quitada la Raspberry y la pantalla (por el problema con Crankshaft comentado en la actualizaci\u00f3n anterior). Desconozco si habr\u00e1 tenido alguna influencia, pero parece demasiada casualidad. El problema est\u00e1 en el circuito impreso que integra el controlador. El m\u00f3dulo transformador de 12V a 5V funciona bien, por lo que hasta que piense una soluci\u00f3n mejor he retirado el controlador y alimentado la Raspberry directamente con el m\u00f3dulo transformador tomando los 12V de la l\u00ednea de contacto. De esta forma cuando se quita el contacto, la Raspberry se apaga abr\u00faptamente, pero en teor\u00eda el sistema est\u00e1 montado en s\u00f3lo lectura por lo que no deber\u00eda haber problemas. Se describe a continuaci\u00f3n el montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D (2012), en sustituci\u00f3n del radio CD que llevaba de serie, para ser utilizada como terminal compatible de AndroidAuto. La pantalla consiste en la oficial t\u00e1ctil de 7\" de la fundaci\u00f3n Raspberry Pi que tiene aproximadamente las medidas del hueco 2DIN que deja el radio CD del coche. Para su sujecci\u00f3n en el hueco de la radio se crean un par de piezas que se fabrican con una impresora 3D. Componentes \u00b6 Extractor radio Raspberry Pi 3 Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi Micr\u00f3fono USB Circuito de alimentaci\u00f3n Tarjeta microSD LED Resistencia 220\u2126 4x Tornillo M3x10 Cable con conector JST Cables de pin hembra-hembra Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D Preparaci\u00f3n sistema \u00b6 El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed . Transferimos la imagen a la microSD con un programa como Etcher . Retirando el radio CD \u00b6 Esto es lo que vamos a perder: Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar. Circuito de alimentaci\u00f3n \u00b6 La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente. Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo). Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n. Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro ) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas. Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD: GND (cable negro) +12V constantes (cable amarillo) +12V contacto (cable rojo) Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os. En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST ) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo. Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry. El resultado final es \u00e9ste: Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja. Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen. Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup . Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta /etc/switch.sh , d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: /etc/switch.sh & El script es \u00e9ste: #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo). La instalaci\u00f3n del script se hizo desde un ordenador con Linux montando la tarjeta en el sistema. Para hacerlo sobre el propio Crankshaft en ejecuci\u00f3n hay que tener en cuenta que en las \u00faltimas versiones la microSD est\u00e1 montada en modo de s\u00f3lo lectura para evitar corrupciones de la misma durante apagados repentinos. Para montar en modo escritura hay que ejecutar uno de estos dos comandos en funci\u00f3n de la partici\u00f3n que queramos modificar: crankshaft filesystem boot unlock crankshaft filesystem system unlock Montaje de Raspberry Pi sobre pantalla \u00b6 La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto: El pineado es como sigue: Pantalla: 5V <-> PIN#02 :Raspberry Pantalla: GND <-> PIN#06 :Raspberry Pantalla: SCL <-> PIN#05 :Raspberry Pantalla: SDA <-> PIN#03 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch). Cableado \u00b6 Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente: Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente: Toma 12V constantes Toma 12V contacto Toma de masa Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry Conector JST de alimentaci\u00f3n de Raspberry Pi. Micr\u00f3fono USB conectado a Raspberry Pi. Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. (Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. Sujecci\u00f3n pantalla a consola coche \u00b6 Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente: https://www.thingiverse.com/thing:3162930 B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar. Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed: Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte. A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED. La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita. El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona). Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol. La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado. Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.","title":"Crankshaft - AndroidAuto sobre Raspberry Pi"},{"location":"2018-10-19-crankshaft.html#componentes","text":"Extractor radio Raspberry Pi 3 Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi Micr\u00f3fono USB Circuito de alimentaci\u00f3n Tarjeta microSD LED Resistencia 220\u2126 4x Tornillo M3x10 Cable con conector JST Cables de pin hembra-hembra Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D","title":"Componentes"},{"location":"2018-10-19-crankshaft.html#preparacion-sistema","text":"El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed . Transferimos la imagen a la microSD con un programa como Etcher .","title":"Preparaci\u00f3n sistema"},{"location":"2018-10-19-crankshaft.html#retirando-el-radio-cd","text":"Esto es lo que vamos a perder: Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar.","title":"Retirando el radio CD"},{"location":"2018-10-19-crankshaft.html#circuito-de-alimentacion","text":"La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente. Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo). Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n. Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro ) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas. Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD: GND (cable negro) +12V constantes (cable amarillo) +12V contacto (cable rojo) Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os. En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST ) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo. Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry. El resultado final es \u00e9ste: Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja. Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen. Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup . Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta /etc/switch.sh , d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: /etc/switch.sh & El script es \u00e9ste: #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo). La instalaci\u00f3n del script se hizo desde un ordenador con Linux montando la tarjeta en el sistema. Para hacerlo sobre el propio Crankshaft en ejecuci\u00f3n hay que tener en cuenta que en las \u00faltimas versiones la microSD est\u00e1 montada en modo de s\u00f3lo lectura para evitar corrupciones de la misma durante apagados repentinos. Para montar en modo escritura hay que ejecutar uno de estos dos comandos en funci\u00f3n de la partici\u00f3n que queramos modificar: crankshaft filesystem boot unlock crankshaft filesystem system unlock","title":"Circuito de alimentaci\u00f3n"},{"location":"2018-10-19-crankshaft.html#montaje-de-raspberry-pi-sobre-pantalla","text":"La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto: El pineado es como sigue: Pantalla: 5V <-> PIN#02 :Raspberry Pantalla: GND <-> PIN#06 :Raspberry Pantalla: SCL <-> PIN#05 :Raspberry Pantalla: SDA <-> PIN#03 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch).","title":"Montaje de Raspberry Pi sobre pantalla"},{"location":"2018-10-19-crankshaft.html#cableado","text":"Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente: Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente: Toma 12V constantes Toma 12V contacto Toma de masa Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry Conector JST de alimentaci\u00f3n de Raspberry Pi. Micr\u00f3fono USB conectado a Raspberry Pi. Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. (Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas.","title":"Cableado"},{"location":"2018-10-19-crankshaft.html#sujeccion-pantalla-a-consola-coche","text":"Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente: https://www.thingiverse.com/thing:3162930 B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar. Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed: Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte. A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED. La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita. El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona). Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol. La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado. Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.","title":"Sujecci\u00f3n pantalla a consola coche"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html","text":"Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint. Im\u00e1gen de sistema \u00b6 Aunque es posible instalar manualmente Octoprint sobre una instalaci\u00f3n Raspbian est\u00e1ndar, existe una im\u00e1gen para grabar directamente sobre la tarjeta microSD llamada OctoPi . Dado que la Raspberry Pi y por tanto su sistema se va dedicar exclusivamente para esta funci\u00f3n, se prefiere esta alternativa. Modelo de Raspberry Pi elegido \u00b6 A pesar de que la utilizaci\u00f3n de una Raspberry Pi Zero no est\u00e1 recomendada por problemas de rendimiento que pueden terminar afectando a las impresiones, en mi experiencia no he sufrido ning\u00fan percance y la forma y bajo consumo de la Raspberry Pi Zero (que permite alimentarla desde la misma fuente de la impresora) resulta perfecta para esta instalaci\u00f3n. Sospecho que los posibles problemas est\u00e1n relacionados con el uso de la webcam. Eligiendo la c\u00e1mara adecuada (que soporte MJPG de forma nativa) y no abusando del v\u00eddeo en streaming creo que se deja un margen de seguridad adecuado para poder aprovechar las ventajas de la versi\u00f3n Zero W de la Raspberry Pi. Conexi\u00f3n serie entre Anet A8 y Raspberry Pi \u00b6 Octoprint se comunica con la impresora por medio de una conexi\u00f3n serie. Esta conexi\u00f3n puede f\u00e1cilmente establecerse a trav\u00e9s de USB. De hecho el puerto serie del microcontrolador Atmel que gobierna la impresora est\u00e1 puenteado a un adaptador serie/USB que hay sobre la placa (CH340G). Utilizar esta conexi\u00f3n USB resulta muy aparatoso por el tipo de conectores que implica, as\u00ed que se ha preferido liberar el puerto serie del microcontrolador para poder utilizarlo directamente. Estudiando el esquem\u00e1tico de la placa se ve que las siguientes secciones son las implicadas en este asunto (se han marcado en azul las zonas de m\u00e1s inter\u00e9s): Podemos ver c\u00f3mo el puerto serie del microcontrolador (pines AOFI y AIFO ) est\u00e1 puenteado al chip CH340G (U6) por medio de un par de resistencias de 0\u2126 que act\u00faan como puente. Tendremos que retirar de la placa dichas resistencias R52 y R53. Una vez hecho, soldaremos unos pines en la ubicaci\u00f3n J8 de la placa (al menos la m\u00eda ven\u00eda con los agujeros en la PCB sin los pines soldados). En esta foto de alta resoluci\u00f3n de la placa podemos ver bien tanto la ubicaci\u00f3n de los puentes J8 como las resistencias que hay que retirar: S\u00f3lo queda poner un par de jumpers entre los pines siguientes de J8: 3-5 4-6 Con esto conseguimos que el puerto serie del microcontrolador aparezca disponible en el conector J3. Si antes utiliz\u00e1bamos el puerto USB de la PCB para alg\u00fan cometido, hay que entender que al realizar esta modificaci\u00f3n deja de estar disponible, pero tenemos la opci\u00f3n de reactivarlo cambiando los jumpers a la siguiente disposici\u00f3n: 1-3 2-4 Como la orientaci\u00f3n de la PCB en la impresora es distinta a la del esquem\u00e1tico, se muestra ahora con claridad el resultado final, es decir c\u00f3mo deben disponerse los dos jumpers para que el puerto serie aparezca en el conector J3 y el hueco dejado por las resistencias R52 y R53: Como vemos los puentes deben apuntar hacia el r\u00f3tulo BLE. Seguramente se designa as\u00ed porque la sustituci\u00f3n habitual del puerto USB ser\u00eda un adaptador Bluetooth que podr\u00eda adaptarse al conector J3. S\u00f3lo queda localizar en el conector J3 los pines del puerto serie del microcontrolador recien redirijidos y los de alimentaci\u00f3n (5V y GND). En este punto podr\u00edamos conectar la Raspberry Pi con simples cables de pin, pero dada la cercan\u00eda en el GPIO de la Raspberry Pi del puerto serie y de los terminales de alimentaci\u00f3n, me decid\u00ed a preparar una peque\u00f1a placa adaptadora para el conector J3 de la PCB de la impresora. El conector J3 de la impresora seg\u00fan el esquem\u00e1tico tiene el siguiente pineado: De nuevo es necesario orientar el conector correctamente para interpretar el esquem\u00e1tico. Para evitar confusiones se indica a continuaci\u00f3n la numeraci\u00f3n de los pines sobre el conector: La conexi\u00f3n de estos pines con los del GPIO de la Raspberry Pi ser\u00e1 as\u00ed: J3: 1 (J3_TX) <-> PIN#08 (GPIO14 UART0_TXD) :Raspberry J3: 2 (J3_RX) <-> PIN#10 (GPIO15 UART0_RXD) :Raspberry J3: 4 (+5V) <-> PIN#04 (5V) :Raspberry J3: 8 (GND) <-> PIN#06 (Ground) :Raspberry Puede generar confusi\u00f3n ver que las conexiones entre ambos conectores son TX-TX y RX-RX, cuando las conexiones TX y RX deben cruzarse. La confusi\u00f3n viene de que en el conector J3 lo que se indica es a d\u00f3nde se debe conectar y no el terminal del puerto serie del microcontrolador. Si tiramos del hilo en el esquem\u00e1tico vemos que por ejemplo el pin 1 del conector J3 sigue la secuencia: 1 J3_TX - AIFO - RXD0 Por tanto en realidad s\u00ed estamos cruzando las se\u00f1ales. El adaptador realizado es el siguiente: A continuaci\u00f3n se puede ver soldado sobre la Raspberry: Finalmente montado sobre la PCB de la impresora queda as\u00ed: Desactivaci\u00f3n de BT y activaci\u00f3n de puerto serie \u00b6 La Raspberry Pi Zero W (en Raspberry Pi 3 sucede lo mismo) trae un adaptador Bluetooth que tanto en la distribuci\u00f3n Raspbian como en la im\u00e1gen OctoPi utilizada est\u00e1 conectado precisamente a los pines #08 y #10 a los que hemos conectado el puerto serie de la impresora. Antes de continuar necesitamos liberar esta conexi\u00f3n. Para ello debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: Would you like a login shell to be accessible over serial? -> No Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos pasar a trabajar sobre la consola web de Octoprint a la que accederemos abriendo en un navegador la IP de la Raspberry. Configuraci\u00f3n conexi\u00f3n en Octoprint \u00b6 Por defecto Octoprint espera encontrar la impresora en un puerto USB de la Raspberry. Al haber cambiado a un puerto serie convencional, tenemos que ayudarle a encontrarlo. Para ello acudimos a Settings (llave inglesa) de Octoprint y en la secci\u00f3n Serial Connection a\u00f1adimos lo siguiente en el cuadro Additional serial ports : 1 /dev/ttyAMA0 Tras esto podremos volver a la ventana principal y seleccionar dicho puerto en el apartado Connection: Tras pulsar el bot\u00f3n Connect oiremos c\u00f3mo la impresora reacciona (al menos en la m\u00eda el ventilador de capa se revoluciona unos segundos, aunque tambi\u00e9n puede suceder por el firmware que tengo instalado) y ya podremos empezar a utilizar Octoprint. Webcam \u00b6 Un complemento muy bueno para Octoprint es una webcam para poder hacer un mejor seguimiento de las impresiones. Tras haber probado con una webcam convencional conectada por USB (aqu\u00ed se ve una de las ventajas de haberlo dejado libre al conectar la Raspberry a la impresora), me di cuenta de que la c\u00e1mara oficial de Raspberry se puede encontrar barata (4\u20ac) y resulta m\u00e1s adecuada. Adquiriendo dicha c\u00e1mara junto con la versi\u00f3n del cable especial para Raspberry Pi Zero , se puede montar f\u00e1cilmente al chasis de la impresora. En concreto para la Anet A8 se dise\u00f1a esta peque\u00f1a pieza: https://www.thingiverse.com/thing:3142521","title":"Octoprint en Anet A8"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#imagen-de-sistema","text":"Aunque es posible instalar manualmente Octoprint sobre una instalaci\u00f3n Raspbian est\u00e1ndar, existe una im\u00e1gen para grabar directamente sobre la tarjeta microSD llamada OctoPi . Dado que la Raspberry Pi y por tanto su sistema se va dedicar exclusivamente para esta funci\u00f3n, se prefiere esta alternativa.","title":"Im\u00e1gen de sistema"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#modelo-de-raspberry-pi-elegido","text":"A pesar de que la utilizaci\u00f3n de una Raspberry Pi Zero no est\u00e1 recomendada por problemas de rendimiento que pueden terminar afectando a las impresiones, en mi experiencia no he sufrido ning\u00fan percance y la forma y bajo consumo de la Raspberry Pi Zero (que permite alimentarla desde la misma fuente de la impresora) resulta perfecta para esta instalaci\u00f3n. Sospecho que los posibles problemas est\u00e1n relacionados con el uso de la webcam. Eligiendo la c\u00e1mara adecuada (que soporte MJPG de forma nativa) y no abusando del v\u00eddeo en streaming creo que se deja un margen de seguridad adecuado para poder aprovechar las ventajas de la versi\u00f3n Zero W de la Raspberry Pi.","title":"Modelo de Raspberry Pi elegido"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#conexion-serie-entre-anet-a8-y-raspberry-pi","text":"Octoprint se comunica con la impresora por medio de una conexi\u00f3n serie. Esta conexi\u00f3n puede f\u00e1cilmente establecerse a trav\u00e9s de USB. De hecho el puerto serie del microcontrolador Atmel que gobierna la impresora est\u00e1 puenteado a un adaptador serie/USB que hay sobre la placa (CH340G). Utilizar esta conexi\u00f3n USB resulta muy aparatoso por el tipo de conectores que implica, as\u00ed que se ha preferido liberar el puerto serie del microcontrolador para poder utilizarlo directamente. Estudiando el esquem\u00e1tico de la placa se ve que las siguientes secciones son las implicadas en este asunto (se han marcado en azul las zonas de m\u00e1s inter\u00e9s): Podemos ver c\u00f3mo el puerto serie del microcontrolador (pines AOFI y AIFO ) est\u00e1 puenteado al chip CH340G (U6) por medio de un par de resistencias de 0\u2126 que act\u00faan como puente. Tendremos que retirar de la placa dichas resistencias R52 y R53. Una vez hecho, soldaremos unos pines en la ubicaci\u00f3n J8 de la placa (al menos la m\u00eda ven\u00eda con los agujeros en la PCB sin los pines soldados). En esta foto de alta resoluci\u00f3n de la placa podemos ver bien tanto la ubicaci\u00f3n de los puentes J8 como las resistencias que hay que retirar: S\u00f3lo queda poner un par de jumpers entre los pines siguientes de J8: 3-5 4-6 Con esto conseguimos que el puerto serie del microcontrolador aparezca disponible en el conector J3. Si antes utiliz\u00e1bamos el puerto USB de la PCB para alg\u00fan cometido, hay que entender que al realizar esta modificaci\u00f3n deja de estar disponible, pero tenemos la opci\u00f3n de reactivarlo cambiando los jumpers a la siguiente disposici\u00f3n: 1-3 2-4 Como la orientaci\u00f3n de la PCB en la impresora es distinta a la del esquem\u00e1tico, se muestra ahora con claridad el resultado final, es decir c\u00f3mo deben disponerse los dos jumpers para que el puerto serie aparezca en el conector J3 y el hueco dejado por las resistencias R52 y R53: Como vemos los puentes deben apuntar hacia el r\u00f3tulo BLE. Seguramente se designa as\u00ed porque la sustituci\u00f3n habitual del puerto USB ser\u00eda un adaptador Bluetooth que podr\u00eda adaptarse al conector J3. S\u00f3lo queda localizar en el conector J3 los pines del puerto serie del microcontrolador recien redirijidos y los de alimentaci\u00f3n (5V y GND). En este punto podr\u00edamos conectar la Raspberry Pi con simples cables de pin, pero dada la cercan\u00eda en el GPIO de la Raspberry Pi del puerto serie y de los terminales de alimentaci\u00f3n, me decid\u00ed a preparar una peque\u00f1a placa adaptadora para el conector J3 de la PCB de la impresora. El conector J3 de la impresora seg\u00fan el esquem\u00e1tico tiene el siguiente pineado: De nuevo es necesario orientar el conector correctamente para interpretar el esquem\u00e1tico. Para evitar confusiones se indica a continuaci\u00f3n la numeraci\u00f3n de los pines sobre el conector: La conexi\u00f3n de estos pines con los del GPIO de la Raspberry Pi ser\u00e1 as\u00ed: J3: 1 (J3_TX) <-> PIN#08 (GPIO14 UART0_TXD) :Raspberry J3: 2 (J3_RX) <-> PIN#10 (GPIO15 UART0_RXD) :Raspberry J3: 4 (+5V) <-> PIN#04 (5V) :Raspberry J3: 8 (GND) <-> PIN#06 (Ground) :Raspberry Puede generar confusi\u00f3n ver que las conexiones entre ambos conectores son TX-TX y RX-RX, cuando las conexiones TX y RX deben cruzarse. La confusi\u00f3n viene de que en el conector J3 lo que se indica es a d\u00f3nde se debe conectar y no el terminal del puerto serie del microcontrolador. Si tiramos del hilo en el esquem\u00e1tico vemos que por ejemplo el pin 1 del conector J3 sigue la secuencia: 1 J3_TX - AIFO - RXD0 Por tanto en realidad s\u00ed estamos cruzando las se\u00f1ales. El adaptador realizado es el siguiente: A continuaci\u00f3n se puede ver soldado sobre la Raspberry: Finalmente montado sobre la PCB de la impresora queda as\u00ed:","title":"Conexi\u00f3n serie entre Anet A8 y Raspberry Pi"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#desactivacion-de-bt-y-activacion-de-puerto-serie","text":"La Raspberry Pi Zero W (en Raspberry Pi 3 sucede lo mismo) trae un adaptador Bluetooth que tanto en la distribuci\u00f3n Raspbian como en la im\u00e1gen OctoPi utilizada est\u00e1 conectado precisamente a los pines #08 y #10 a los que hemos conectado el puerto serie de la impresora. Antes de continuar necesitamos liberar esta conexi\u00f3n. Para ello debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: Would you like a login shell to be accessible over serial? -> No Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos pasar a trabajar sobre la consola web de Octoprint a la que accederemos abriendo en un navegador la IP de la Raspberry.","title":"Desactivaci\u00f3n de BT y activaci\u00f3n de puerto serie"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#configuracion-conexion-en-octoprint","text":"Por defecto Octoprint espera encontrar la impresora en un puerto USB de la Raspberry. Al haber cambiado a un puerto serie convencional, tenemos que ayudarle a encontrarlo. Para ello acudimos a Settings (llave inglesa) de Octoprint y en la secci\u00f3n Serial Connection a\u00f1adimos lo siguiente en el cuadro Additional serial ports : 1 /dev/ttyAMA0 Tras esto podremos volver a la ventana principal y seleccionar dicho puerto en el apartado Connection: Tras pulsar el bot\u00f3n Connect oiremos c\u00f3mo la impresora reacciona (al menos en la m\u00eda el ventilador de capa se revoluciona unos segundos, aunque tambi\u00e9n puede suceder por el firmware que tengo instalado) y ya podremos empezar a utilizar Octoprint.","title":"Configuraci\u00f3n conexi\u00f3n en Octoprint"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#webcam","text":"Un complemento muy bueno para Octoprint es una webcam para poder hacer un mejor seguimiento de las impresiones. Tras haber probado con una webcam convencional conectada por USB (aqu\u00ed se ve una de las ventajas de haberlo dejado libre al conectar la Raspberry a la impresora), me di cuenta de que la c\u00e1mara oficial de Raspberry se puede encontrar barata (4\u20ac) y resulta m\u00e1s adecuada. Adquiriendo dicha c\u00e1mara junto con la versi\u00f3n del cable especial para Raspberry Pi Zero , se puede montar f\u00e1cilmente al chasis de la impresora. En concreto para la Anet A8 se dise\u00f1a esta peque\u00f1a pieza: https://www.thingiverse.com/thing:3142521","title":"Webcam"},{"location":"2018-11-03-cambio_router_lowi.html","text":"Sustituci\u00f3n de router Lowi por Xiaomi MiWiFi 3G con OpenWRT. Enlaces \u00b6 Cambiar Router Lowi H 500-S por otro Como conseguir admin del router Sercomm H500-s de Vodafone despu\u00e9s de la telecarga Procedimiento \u00b6 Apagar el ONT. Resetear el router manteniendo el bot\u00f3n de reset durante 20 segundos. Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: l033i-h500s Acceder a la pesta\u00f1a Staus & Support y dentro de ella seleccionar la secci\u00f3n Port Mirroring (abajo del todo). Introducir el comando -i ppp1 y pulsar Start . Conectamos el PC a la boca 1 del router, abrimos Wireshark y empezamos a caputurar el interfaz Ethernet ( eth0 normalmente). Encendemos el ONT y esperamos a tener salida a internet. Detenemos la captura y la guardamos. Buscamos un paquete de tipo HTTP/XML 200 OK que contenga la cadena InternetGatewayDevice.X_Management.LoginAccount.1.Password . \u00c9ste ser\u00e1 el nuevo password del usuario admin del router (en lugar del predeterminado l033i-h500s ). Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: El obtenido del par\u00e1metro InternetGatewayDevice.X_Management.LoginAccount.1.Password de la captura. Ir al men\u00fa Configuraci\u00f3n > WAN > WAN FIBER > FTTh-Data_NEBA y pinchar en el l\u00e1piz para editar. En la p\u00e1gina que aparece tenemos los par\u00e1metros de nuestra conexi\u00f3n. El \u00fanico dato que no podemos obtener de aqu\u00ed es el password ya que est\u00e1 encriptado. Hay que obtenerlo de la captura Wireshark, concretamente el par\u00e1metro con el identificador InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password . El resto de par\u00e1metros son: Description: FTTH-Data_NEBA Used For: Data only NAT: S\u00ed Firewall: S\u00ed 802.1P Priority [0-7]: 0 802.1Q VLAN ID [0-4094]: 24 Connection Type: PPPoE Username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. Password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. Service Name: Authentication Method: AUTO Connection Trigger: AlwaysOn LCP Echo request interval (sec): 10 LCP Echo retry times: 5 MTU [68-1500]: 1492 Idle Time (sec): 0 Obtain DNS Servers automatically: S\u00ed En el nuevo router introducimos estos datos. En un OpenWRT ser\u00eda en la secci\u00f3n Network > Interfaces > WAN > Edit . Introducimos los siguientes valores: Protocol: PPPeE PAP/CHAP username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. PAP/CHAP password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. A partir de aqu\u00ed los par\u00e1metros est\u00e1n en Advanced Settings . LCP echo failure threshold: 5 LCP echo interval: 10 Override MTU: 1492 Finalmente acudir a la secci\u00f3n Network > Switch para poner el VLAN ID 24 necesario para la conexi\u00f3n. Concretamente dejar la tabla que all\u00ed vemos de la siguiente forma: VLAN ID CPU (eth0) LAN 1 LAN 2 WAN 1 tagged untagged untagged off 24 tagged off off tagged","title":"Cambio de router con Lowi"},{"location":"2018-11-03-cambio_router_lowi.html#enlaces","text":"Cambiar Router Lowi H 500-S por otro Como conseguir admin del router Sercomm H500-s de Vodafone despu\u00e9s de la telecarga","title":"Enlaces"},{"location":"2018-11-03-cambio_router_lowi.html#procedimiento","text":"Apagar el ONT. Resetear el router manteniendo el bot\u00f3n de reset durante 20 segundos. Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: l033i-h500s Acceder a la pesta\u00f1a Staus & Support y dentro de ella seleccionar la secci\u00f3n Port Mirroring (abajo del todo). Introducir el comando -i ppp1 y pulsar Start . Conectamos el PC a la boca 1 del router, abrimos Wireshark y empezamos a caputurar el interfaz Ethernet ( eth0 normalmente). Encendemos el ONT y esperamos a tener salida a internet. Detenemos la captura y la guardamos. Buscamos un paquete de tipo HTTP/XML 200 OK que contenga la cadena InternetGatewayDevice.X_Management.LoginAccount.1.Password . \u00c9ste ser\u00e1 el nuevo password del usuario admin del router (en lugar del predeterminado l033i-h500s ). Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: El obtenido del par\u00e1metro InternetGatewayDevice.X_Management.LoginAccount.1.Password de la captura. Ir al men\u00fa Configuraci\u00f3n > WAN > WAN FIBER > FTTh-Data_NEBA y pinchar en el l\u00e1piz para editar. En la p\u00e1gina que aparece tenemos los par\u00e1metros de nuestra conexi\u00f3n. El \u00fanico dato que no podemos obtener de aqu\u00ed es el password ya que est\u00e1 encriptado. Hay que obtenerlo de la captura Wireshark, concretamente el par\u00e1metro con el identificador InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password . El resto de par\u00e1metros son: Description: FTTH-Data_NEBA Used For: Data only NAT: S\u00ed Firewall: S\u00ed 802.1P Priority [0-7]: 0 802.1Q VLAN ID [0-4094]: 24 Connection Type: PPPoE Username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. Password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. Service Name: Authentication Method: AUTO Connection Trigger: AlwaysOn LCP Echo request interval (sec): 10 LCP Echo retry times: 5 MTU [68-1500]: 1492 Idle Time (sec): 0 Obtain DNS Servers automatically: S\u00ed En el nuevo router introducimos estos datos. En un OpenWRT ser\u00eda en la secci\u00f3n Network > Interfaces > WAN > Edit . Introducimos los siguientes valores: Protocol: PPPeE PAP/CHAP username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. PAP/CHAP password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. A partir de aqu\u00ed los par\u00e1metros est\u00e1n en Advanced Settings . LCP echo failure threshold: 5 LCP echo interval: 10 Override MTU: 1492 Finalmente acudir a la secci\u00f3n Network > Switch para poner el VLAN ID 24 necesario para la conexi\u00f3n. Concretamente dejar la tabla que all\u00ed vemos de la siguiente forma: VLAN ID CPU (eth0) LAN 1 LAN 2 WAN 1 tagged untagged untagged off 24 tagged off off tagged","title":"Procedimiento"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html","text":"Migraci\u00f3n del motor de apuntes de Rubi/Jekyll a Python/MkDocs. Procedimiento \u00b6 Renombro el antiguo repositorio construido con Jekyll de eduardofilo.github.io a eduardofilo.jekyll para dejar libre el repositorio que contendr\u00e1 el nuevo sitio. Creo directorio: $ mkdir ~/git/eduardofilo.mkdocs $ cd ~/git/eduardofilo.mkdocs Creo entorno Python3 con pipenv: $ pipenv install --three Instalo mkdocs, el tema Material y algunas extensiones : $ pipenv install mkdocs pygments mkdocs-material Instalo versi\u00f3n beta de m\u00f3dulo pyyaml por un aviso de seguridad que da GitHub sobre la versi\u00f3n 3.13 que se instala normalmente. Para ello a\u00f1ado lo siguiente al fichero Pipfile en la secci\u00f3n [packages] . Tras ello ejecuto pipenv install : pyyaml = \">=4.2b1\" Arranco shell en el entorno: $ pipenv shell Creo el proyecto mkdocs desde el directorio anterior: $ cd .. $ mkdocs new eduardofilo.mkdocs $ cd eduardofilo.mkdocs Copio los directorios con los contenidos del sitio Jekyll ( cursos , desarrollo , images , proyectos , sistemas y varios ) al directorio docs . Configuro el fichero mkdocs.yml con el siguiente contenido: # Project information site_name: Apuntes de eduardofilo site_description: Apuntes varios sobre algunas de las cosas que necesito recordar, principalmente sobre Desarrollo y Sistemas. site_author: Eduardo Moreno Lamana # Repository repo_name: 'eduardofilo.mkdocs' repo_url: https://github.com/eduardofilo/eduardofilo.mkdocs # Configuration use_directory_urls: false plugins: - search: lang: ['es'] theme: name: material logo: 'images/eduardofilo.png' language: es feature: tabs: true palette: primary: 'deep orange' accent: 'amber' # Customization extra: social: - type: github-alt link: https://github.com/eduardofilo - type: twitter link: https://twitter.com/eduardofilo - type: linkedin link: https://linkedin.com/in/edumoreno/ - type: tumblr link: https://eduardofilo.es - type: youtube link: https://www.youtube.com/c/EduardoMorenoLamana search: language: 'es' manifest: 'manifest.webmanifest' # Extensions markdown_extensions: - codehilite: linenums: true - toc: permalink: True - admonition Copio todos los ficheros del directorio _posts de Jekyll al directorio docs . Modifico cada uno de los posts que all\u00ed hay de la siguiente manera: Retiro los delimitadores del YAML, es decir los tres guiones que hay al principio y al final del bloque. Retiro las propiedad layout y published y a\u00f1ado una llamada summary . Genero estructura de navegaci\u00f3n en bloque nav: al final de mkdocs.yml Creo fichero CNAME dentro del directorio docs con el nombre del dominio personalizado. Creo repositorio en GitHub con nombre eduardofilo.github.io . Creo copia de trabajo del repsitorio anterior: $ cd ~/git $ git clone git@github.com:eduardofilo/eduardofilo.github.io.git Finalmente publico el sitio ejecutando el siguiente comando desde el directorio de trabajo del repositorio anterior (hay que recordar que para que funcione el comando mkdocs hay que haber iniciado el entorno virtual antes con pipenv shell desde el directorio ~/git/eduardofilo.mkdocs ): $ cd ~/git/eduardofilo.github.io $ mkdocs gh-deploy --config-file ../eduardofilo.mkdocs/mkdocs.yml --remote-branch master Falta crear un RSS con el feed que generaba Jekyll antiguamente. Enlaces documentaci\u00f3n \u00b6 Extensiones de Material for MkDocs Extensiones de MyMdown","title":"Conversi\u00f3n del sitio de Apuntes a MkDocs"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html#procedimiento","text":"Renombro el antiguo repositorio construido con Jekyll de eduardofilo.github.io a eduardofilo.jekyll para dejar libre el repositorio que contendr\u00e1 el nuevo sitio. Creo directorio: $ mkdir ~/git/eduardofilo.mkdocs $ cd ~/git/eduardofilo.mkdocs Creo entorno Python3 con pipenv: $ pipenv install --three Instalo mkdocs, el tema Material y algunas extensiones : $ pipenv install mkdocs pygments mkdocs-material Instalo versi\u00f3n beta de m\u00f3dulo pyyaml por un aviso de seguridad que da GitHub sobre la versi\u00f3n 3.13 que se instala normalmente. Para ello a\u00f1ado lo siguiente al fichero Pipfile en la secci\u00f3n [packages] . Tras ello ejecuto pipenv install : pyyaml = \">=4.2b1\" Arranco shell en el entorno: $ pipenv shell Creo el proyecto mkdocs desde el directorio anterior: $ cd .. $ mkdocs new eduardofilo.mkdocs $ cd eduardofilo.mkdocs Copio los directorios con los contenidos del sitio Jekyll ( cursos , desarrollo , images , proyectos , sistemas y varios ) al directorio docs . Configuro el fichero mkdocs.yml con el siguiente contenido: # Project information site_name: Apuntes de eduardofilo site_description: Apuntes varios sobre algunas de las cosas que necesito recordar, principalmente sobre Desarrollo y Sistemas. site_author: Eduardo Moreno Lamana # Repository repo_name: 'eduardofilo.mkdocs' repo_url: https://github.com/eduardofilo/eduardofilo.mkdocs # Configuration use_directory_urls: false plugins: - search: lang: ['es'] theme: name: material logo: 'images/eduardofilo.png' language: es feature: tabs: true palette: primary: 'deep orange' accent: 'amber' # Customization extra: social: - type: github-alt link: https://github.com/eduardofilo - type: twitter link: https://twitter.com/eduardofilo - type: linkedin link: https://linkedin.com/in/edumoreno/ - type: tumblr link: https://eduardofilo.es - type: youtube link: https://www.youtube.com/c/EduardoMorenoLamana search: language: 'es' manifest: 'manifest.webmanifest' # Extensions markdown_extensions: - codehilite: linenums: true - toc: permalink: True - admonition Copio todos los ficheros del directorio _posts de Jekyll al directorio docs . Modifico cada uno de los posts que all\u00ed hay de la siguiente manera: Retiro los delimitadores del YAML, es decir los tres guiones que hay al principio y al final del bloque. Retiro las propiedad layout y published y a\u00f1ado una llamada summary . Genero estructura de navegaci\u00f3n en bloque nav: al final de mkdocs.yml Creo fichero CNAME dentro del directorio docs con el nombre del dominio personalizado. Creo repositorio en GitHub con nombre eduardofilo.github.io . Creo copia de trabajo del repsitorio anterior: $ cd ~/git $ git clone git@github.com:eduardofilo/eduardofilo.github.io.git Finalmente publico el sitio ejecutando el siguiente comando desde el directorio de trabajo del repositorio anterior (hay que recordar que para que funcione el comando mkdocs hay que haber iniciado el entorno virtual antes con pipenv shell desde el directorio ~/git/eduardofilo.mkdocs ): $ cd ~/git/eduardofilo.github.io $ mkdocs gh-deploy --config-file ../eduardofilo.mkdocs/mkdocs.yml --remote-branch master Falta crear un RSS con el feed que generaba Jekyll antiguamente.","title":"Procedimiento"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html#enlaces-documentacion","text":"Extensiones de Material for MkDocs Extensiones de MyMdown","title":"Enlaces documentaci\u00f3n"},{"location":"2019-01-29-bloqueo_telsome.html","text":"Enlaces \u00b6 C\u00f3mo bloquear llamadas de determinados n\u00fameros Informe detallado de llamadas \u2013 CDR Procedimiento \u00b6 Vamos a describir c\u00f3mo impedir que se produzca la entrada de una llamada desde un n\u00famero determinado en el servicio de VoIP Telsome. T\u00edpicamente nos interesar\u00e1 esto para bloquear las llamadas comerciales SPAM. Necesitamos el n\u00famero que queremos bloquear. Si no lo recordamos o no tenemos registro de llamadas en el terminal, se puede consultar en la informaci\u00f3n detallada de las llamadas recibidas a trav\u00e9s del servicio. Para ello iniciar sesi\u00f3n en la cuenta Telsome con nuestras credenciales. Una vez dentro, navegar siguiendo la siguiente ruta: Configuraci\u00f3n avanzada > Enlaces r\u00e1pidos > Registro de llamadas All\u00ed encontraremos el detalle de todas las llamadas emitidas y recibidas. Una vez localizado el n\u00famero que queremos bloquear, navegaremos siguiendo la ruta: Configuraci\u00f3n avanzada > Extensiones > (clic sobre nuestra extensi\u00f3n) > Telefon\u00eda > Reglas de llamadas entrantes All\u00ed rellenaremos el peque\u00f1o formulario con el r\u00f3tulo Agregar desv\u00edos sustituyendo el n\u00famero del ejemplo (999888777) por el que nos interese: En el formulario, el primer desplegable nos permite elegir el efecto que observar\u00e1 el llamante. En el ejemplo he seleccionado reproductor ocupado , pero tambi\u00e9n servir\u00edan las opciones reproductor congestionado o colgar . Una vez que pulsemos el bot\u00f3n OK se incorporar\u00e1 a la lista inferior y pasar\u00e1 a ser efectiva.","title":"Bloqueo de llamadas entrantes en Telsome"},{"location":"2019-01-29-bloqueo_telsome.html#enlaces","text":"C\u00f3mo bloquear llamadas de determinados n\u00fameros Informe detallado de llamadas \u2013 CDR","title":"Enlaces"},{"location":"2019-01-29-bloqueo_telsome.html#procedimiento","text":"Vamos a describir c\u00f3mo impedir que se produzca la entrada de una llamada desde un n\u00famero determinado en el servicio de VoIP Telsome. T\u00edpicamente nos interesar\u00e1 esto para bloquear las llamadas comerciales SPAM. Necesitamos el n\u00famero que queremos bloquear. Si no lo recordamos o no tenemos registro de llamadas en el terminal, se puede consultar en la informaci\u00f3n detallada de las llamadas recibidas a trav\u00e9s del servicio. Para ello iniciar sesi\u00f3n en la cuenta Telsome con nuestras credenciales. Una vez dentro, navegar siguiendo la siguiente ruta: Configuraci\u00f3n avanzada > Enlaces r\u00e1pidos > Registro de llamadas All\u00ed encontraremos el detalle de todas las llamadas emitidas y recibidas. Una vez localizado el n\u00famero que queremos bloquear, navegaremos siguiendo la ruta: Configuraci\u00f3n avanzada > Extensiones > (clic sobre nuestra extensi\u00f3n) > Telefon\u00eda > Reglas de llamadas entrantes All\u00ed rellenaremos el peque\u00f1o formulario con el r\u00f3tulo Agregar desv\u00edos sustituyendo el n\u00famero del ejemplo (999888777) por el que nos interese: En el formulario, el primer desplegable nos permite elegir el efecto que observar\u00e1 el llamante. En el ejemplo he seleccionado reproductor ocupado , pero tambi\u00e9n servir\u00edan las opciones reproductor congestionado o colgar . Una vez que pulsemos el bot\u00f3n OK se incorporar\u00e1 a la lista inferior y pasar\u00e1 a ser efectiva.","title":"Procedimiento"},{"location":"2019-04-20-pong_composite_mod.html","text":"Uno de los mejores recuerdos de la ni\u00f1ez fue recibir esta peque\u00f1a consola como regalo de mi abuela tra\u00edda de un viaje a Canarias a finales de los 70. Nunca dej\u00f3 de funcionar del todo, pero acumul\u00f3 desperfectos como los l\u00f3gicos problemas en los potenci\u00f3metros que contienen los mandos y sobre todo la incomodidad de tener \u00fanicamente una salida de RF o antena para conectar al televisor. La unidad que tengo, por lo que he podido averiguar, fue un modelo que apareci\u00f3 bajo diversas denominaciones. La m\u00eda presenta la marca REGINA y seg\u00fan la caja es el modelo T-338 . Investigando la modificaci\u00f3n para conseguir una salida de v\u00eddeo compuesto encontr\u00e9 que la consola est\u00e1 basada en el chip AY-3-8500 de General Instruments: Este chip tiene una historia interesante. Fue todo un \u00e9xito en la \u00e9poca y es pr\u00e1cticamente seguro encontrar uno de estos chips, sus clones o alguna de sus evoluciones en cualquier consola de juegos tipo Pong de finales de los 70. El fabricante produjo tantas unidades que, aunque no se fabrica desde entonces, a\u00fan hoy es posible encontrarlo nuevo. He conseguido un par para montar alguna unidad desde cero dado que el esquem\u00e1tico es extremadamente sencillo y aparece en la documentaci\u00f3n del integrado . La se\u00f1al de v\u00eddeo en el patillaje del chip aparece descompuesta en los siguientes 5 pines: 6: Ball output 9: Right player output 10: Left player output 16: Sync output 24: Score and field output Esto es as\u00ed porque exist\u00eda la opci\u00f3n de incorporar un coprocesador de video que permit\u00eda colorear los distintos componentes de la salida (los jugadores, la bola y el resto del campo). El esquem\u00e1tico anterior corresponde a la versi\u00f3n sin este coprocesador y por tanto se limita a sumar las cuatro salidas (sin contar la se\u00f1al de sync) con una puerta l\u00f3gica OR de cuatro entradas ( 4072 ). La placa de mi unidad sin embargo difiere del esquem\u00e1tico oficial. Observo que no existe el integrado 4072 con las puertas OR de cuatro entradas: En su lugar se utilizan los cuatro diodos que marco en la segunda foto. Realmente los diodos son equivalentes a la puerta OR. Una vez localizadas las se\u00f1ales implicadas, era cuesti\u00f3n de encontrar el circuito que las llevara hasta una se\u00f1al de v\u00eddeo compuesto est\u00e1ndar. Hay poco m\u00e1s que hacer que sumarlas y normalizarlas hasta los niveles que se esperan en una se\u00f1al de este tipo. Al haber tantas consolas en el mercado es f\u00e1cil encontrar varias versiones del circuito necesario realizados por otros aficionados. Pongo algunos enlaces a continuaci\u00f3n: Breathing New (Composite) Life Into a Binatone Pong Console Binatone TV Master MK 4 Composite Video Mod AV modding a pong unit...even possible? Hacking Composite Video into a 1977 Pong Console Casi todos los art\u00edculos le\u00eddos hacen referencia al mismo esquema de una p\u00e1gina que ya no existe , pero que afortunadamente todo el mundo ha reproducido en sus sitios, cosa que yo hago aqu\u00ed tambi\u00e9n: As\u00ed pues, para realizar este circuito necesitaremos los siguientes componentes: 1x 9V \u2013 5V Regulador de tensi\u00f3n 7805 2x Resistencia 75\u2126 1x Resistencia 750\u2126 1x Transistor 2N3904 1x Diodo 1N914 1x Condensador electrol\u00edtico 100\u03bcF / 16V 1x Conector RCA Utilizaremos una porci\u00f3n de stripboard para montarlo. Lo que sigue es la simulaci\u00f3n del circuito con Fritzing: Realmente a la hora de soldar se puede compactar m\u00e1s, pero he ahuecado los componentes para que no se solapen en la visualizaci\u00f3n. Podemos comprobar en la vista esquem\u00e1tica de Fritzing que el circuito es correcto: Adjunto el fichero Fritzing por si ayuda con el montaje. \u00c9ste es el resultado en la realidad: Lo siguiente es localizar sobre la placa de mi consola los puntos de entrada al circuito. Estudiando un poco las pistas llego a la conclusi\u00f3n de que en mi caso son los siguientes: El punto 2 es donde se reunen las cuatro se\u00f1ales y se suman con los diodos como coment\u00e1bamos antes. Ya s\u00f3lo queda alojar el peque\u00f1o circuito en el interior de la caja. Encuentro hueco en la parte inferior y sujeto la peque\u00f1a placa con cola caliente: Para la salida retiro los espadines que sujetaban el viejo cable de antena que sal\u00eda por la parte superior, para hacer hueco a un conector RCA que sujeto agrandando el agujero del cable RF: Ya s\u00f3lo queda hacer las conexiones entre todas las piezas y cerrar el conjunto: Adem\u00e1s de los componentes para el circuito de modificaci\u00f3n, adquir\u00ed tambi\u00e9n potenci\u00f3metros de 1M\u2126 para sustituir los que llevan los mandos. El resultado: Al conocer el proyecto un amigo me ha pasado su consola de aquella \u00e9poca para realizar una modificaci\u00f3n equivalente. Abri\u00e9ndola encuentro que efectivamente est\u00e1 basada en el mismo integrado, aunque \u00e9sta parece montada con mejores componentes y s\u00ed incluye el integrado con las puertas OR para el sumado de las salidas de v\u00eddeo del chip:","title":"Composite mod en consola Pong"},{"location":"2019-07-07-crankshaft-build.html","text":"Tras una reciente actualizaci\u00f3n de los Google Play Services de Android, ha dejado de funcionar el touch screen en Crankshaft . Parece ser que el problema tiene que ver con el uso de la librer\u00eda Protocol Buffers , que ha pasado a ser m\u00e1s estricto en esta \u00faltima versi\u00f3n de los Play Services y parece que no se hab\u00eda implementado de forma rigurosa en OpenAuto. Esta es la issue de Crankshaft donde se trata el tema. La soluci\u00f3n pasa por compilar un fork de OpenAuto que uno de los usuarios ha preparado. A continuaci\u00f3n se describe el paso a paso para hacer la compilaci\u00f3n. El punto de partida es una instalaci\u00f3n de la \u00faltima versi\u00f3n de Crankshaft en el momento de escribir esto (la NG Alpha-5 2019-06-08 ). Activamos modo DEV (necesario por lo menos para que el sistema se monte en modo lectura/escritura) montando la SD en el ordenador y cambiando el par\u00e1metro DEV_MODE a 1 ( DEV_MODE=1 ) en el fichero /boot/crankshaft/crankshaft_env.sh . ( fuente ) Montamos la microSD, arrancamos, averiguamos la IP (con Fing por ejemplo) y conectamos por SSH (user: pi; pwd: raspberry). Actualizamos la librer\u00eda de paquetes e instalamos algunos necesarios: $ sudo apt-get update $ sudo apt-get upgrade $ sudo apt-get install -y libboost-all-dev libusb-1.0.0-dev cmake libprotobuf-dev protobuf-c-compiler protobuf-compiler librtaudio-dev Bajamos el branch development del fork de aasdk de abraha2d : $ cd ~ $ git clone -b development https://github.com/abraha2d/aasdk.git (OPCIONAL) En el momento de escribir esta gu\u00eda compil\u00e9 el commit 361380e7d74ddeaf17afd8cd89882001bb62c77e . Si nuevos commits provocan problemas, hacer el siguiente checkout: $ cd aasdk $ git checkout 361380e7d74ddeaf17afd8cd89882001bb62c77e Compilamos aasdk: $ cd ~ $ mkdir aasdk_build $ cd aasdk_build $ cmake -DCMAKE_BUILD_TYPE = Release ../aasdk $ make Instalamos algunos paquetes necesarios para compilar ilclient : $ sudo apt-get install -y libraspberrypi-doc libraspberrypi-dev $ cd /opt/vc/src/hello_pi/libs/ilclient $ make Bajamos el branch crankshaft-ng del fork de openauto de abraha2d : $ cd ~ $ git clone -b crankshaft-ng https://github.com/abraha2d/openauto.git (OPCIONAL) En el momento de escribir esta gu\u00eda compil\u00e9 el commit d56417bfd6b2af9beacb104f8659aea8bff94a72 . Si nuevos commits provocan problemas, hacer el siguiente checkout: $ cd openauto $ git checkout d56417bfd6b2af9beacb104f8659aea8bff94a72 Compilamos openauto: $ cd ~ $ mkdir openauto_build $ cd openauto_build $ sudo apt-get install -y libtag1-dev libblkid-dev $ cmake -DCMAKE_BUILD_TYPE = Release -DRPI3_BUILD = TRUE -DAASDK_INCLUDE_DIRS = \"/home/pi/aasdk/include\" -DAASDK_LIBRARIES = \"/home/pi/aasdk/lib/libaasdk.so\" -DAASDK_PROTO_INCLUDE_DIRS = \"/home/pi/aasdk_build\" -DAASDK_PROTO_LIBRARIES = \"/home/pi/aasdk/lib/libaasdk_proto.so\" ../openauto $ make Sustituimos el binario compilado por el de la distribuci\u00f3n Crankshaft: $ sudo cp /home/pi/openauto/bin/autoapp /usr/local/bin/autoapp Desactivamos el DEV mode del paso 1 y arrancamos normalmente.","title":"Compilaci\u00f3n OpenAuto para solucionar touch screen"},{"location":"2019-08-06-django_site.html","text":"Procedimiento de creaci\u00f3n de un entorno de desarrollo y producci\u00f3n para un sitio Django. Entorno DEV \u00b6 Creo repositorio git y lo sincronizo con el directorio de desarrollo. Creo entorno Python con pipenv. Dos opciones: Con una versi\u00f3n de Python compilada previamente en nuestra m\u00e1quina: $ cd ~/git/remote_james $ pipenv install --python /home/usuario/Python-3.6.5/bin/python3 Con la versi\u00f3n de Python3 instalada en el sistema: $ cd ~/git/remote_james $ pipenv install --three Instalo Django, creo proyecto y aplicaci\u00f3n: $ pipenv shell $ pipenv install django $ django-admin startproject remote_james . $ python manage.py startapp james Incorporo nueva app en fichero settings.py : INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecuto migraciones, creo superusuario y arranco servidor desarrollo: $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0 .0.0.0:8000 Entorno PROD \u00b6 Bajo el repositorio: $ cd ~ $ git clone git@bitbucket.org:eduardofilo/remote_james.git Creo el entorno (de nuevo existe la opci\u00f3n de utilizar la versi\u00f3n de Python3 del sistema como en el punto 2 del entorno de desarrollo): $ cd remote_james $ pipenv install --python /home/servidor/Python-3.6.5/bin/python3 Creo base de datos y usuario admin: $ pipenv shell $ python manage_ovh.py migrate $ python manage_ovh.py createsuperuser Creo sitio en Apache ( /etc/apache2/sites-available/008-remote_james.conf ): <VirtualHost *:80> ServerName remotejames.example.com ServerAdmin webmaster@localhost DocumentRoot /var/www/html ErrorLog ${APACHE_LOG_DIR}/error-remotejames.log CustomLog ${APACHE_LOG_DIR}/access-remotejames.log combined Alias /static /home/servidor/remote_james/static <Directory /home/servidor/remote_james/static> Require all granted </Directory> Alias /media /home/servidor/remote_james/media <Directory /home/servidor/remote_james/media> Require all granted </Directory> <Directory /home/servidor/remote_james/remote_james> <Files wsgi.py> Require all granted </Files> </Directory> WSGIDaemonProcess remote_james python-path=/home/servidor/remote_james python-home=/home/servidor/.virtualenvs/remote_james-Sjv1LfIa WSGIProcessGroup remote_james WSGIScriptAlias / /home/servidor/remote_james/remote_james/wsgi.py </VirtualHost> # vim: syntax=apache ts=4 sw=4 sts=4 sr noet Activo sitio: $ sudo a2ensite 008 -remote_james.conf $ sudo systemctl reload apache2","title":"Creaci\u00f3n de un sitio Django desde cero"},{"location":"2019-08-06-django_site.html#entorno-dev","text":"Creo repositorio git y lo sincronizo con el directorio de desarrollo. Creo entorno Python con pipenv. Dos opciones: Con una versi\u00f3n de Python compilada previamente en nuestra m\u00e1quina: $ cd ~/git/remote_james $ pipenv install --python /home/usuario/Python-3.6.5/bin/python3 Con la versi\u00f3n de Python3 instalada en el sistema: $ cd ~/git/remote_james $ pipenv install --three Instalo Django, creo proyecto y aplicaci\u00f3n: $ pipenv shell $ pipenv install django $ django-admin startproject remote_james . $ python manage.py startapp james Incorporo nueva app en fichero settings.py : INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecuto migraciones, creo superusuario y arranco servidor desarrollo: $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0 .0.0.0:8000","title":"Entorno DEV"},{"location":"2019-08-06-django_site.html#entorno-prod","text":"Bajo el repositorio: $ cd ~ $ git clone git@bitbucket.org:eduardofilo/remote_james.git Creo el entorno (de nuevo existe la opci\u00f3n de utilizar la versi\u00f3n de Python3 del sistema como en el punto 2 del entorno de desarrollo): $ cd remote_james $ pipenv install --python /home/servidor/Python-3.6.5/bin/python3 Creo base de datos y usuario admin: $ pipenv shell $ python manage_ovh.py migrate $ python manage_ovh.py createsuperuser Creo sitio en Apache ( /etc/apache2/sites-available/008-remote_james.conf ): <VirtualHost *:80> ServerName remotejames.example.com ServerAdmin webmaster@localhost DocumentRoot /var/www/html ErrorLog ${APACHE_LOG_DIR}/error-remotejames.log CustomLog ${APACHE_LOG_DIR}/access-remotejames.log combined Alias /static /home/servidor/remote_james/static <Directory /home/servidor/remote_james/static> Require all granted </Directory> Alias /media /home/servidor/remote_james/media <Directory /home/servidor/remote_james/media> Require all granted </Directory> <Directory /home/servidor/remote_james/remote_james> <Files wsgi.py> Require all granted </Files> </Directory> WSGIDaemonProcess remote_james python-path=/home/servidor/remote_james python-home=/home/servidor/.virtualenvs/remote_james-Sjv1LfIa WSGIProcessGroup remote_james WSGIScriptAlias / /home/servidor/remote_james/remote_james/wsgi.py </VirtualHost> # vim: syntax=apache ts=4 sw=4 sts=4 sr noet Activo sitio: $ sudo a2ensite 008 -remote_james.conf $ sudo systemctl reload apache2","title":"Entorno PROD"},{"location":"2020-01-11-rg350_scraper.html","text":"El lanzador de aplicaciones Gmenu2x de OpenDingux en la RG350, soporta previsualizaci\u00f3n de ROMs (creo que tambi\u00e9n Esoteric, pero no estoy seguro), es decir, permite mostrar una imagen para ayudar a la identificaci\u00f3n de los juegos. Normalmente se utiliza un frame del gameplay, el logo, el cartucho, la caja o una combinaci\u00f3n de todo ello. Para que funcione simplemente hay que colocar una carpeta con las im\u00e1genes al mismo nivel donde queden las ROMs para las que queramos que se muestre la previsualizaci\u00f3n. Antes de la versi\u00f3n 1.7.9.4 del firmware RG350-ROGUE-CFW la carpeta se deb\u00eda llamar previews , y a partir de dicha versi\u00f3n (incluida) lleva un punto delante para que se oculte en el explorador de archivos, es decir .previews . A partir de ahora vamos a suponer que estamos trabajando con las \u00faltimas versiones de ROGUE para representar las rutas en lo que queda de art\u00edculo. Para versiones anteriores simplemente retirar el punto de delante en las rutas. El nombre de archivo de las im\u00e1genes tiene que ser el mismo que la ROM sustituyendo la extensi\u00f3n de la ROM por .png ya que las im\u00e1genes ser\u00e1n de este formato. Por ejemplo la miniatura de la ROM /media/sdcard/roms/GB/DKLAND.gb ir\u00eda en /media/sdcard/roms/GB/.previews/DKLAND.png . Desde la versi\u00f3n 1.7.9.4 del firmware RG350-ROGUE-CFW , la previsualizaci\u00f3n puede verse de dos modos. El ajuste del modo se hace abriendo el lanzador GMenu2X que hay en la secci\u00f3n Settings y cambiando el par\u00e1metro Preview type : En el tipo 1 las previsualizaciones se ven de fondo a toda pantalla: Y en el tipo 2 se ven en miniatura en la esquina superior derecha: Como suele ser habitual que haya muchas ROMs cargadas en la m\u00e1quina, existe una forma de automatizar la generaci\u00f3n de estas miniaturas para los juegos por medio un programa que se suele llamar scraper. A continuaci\u00f3n se muestra una lista con varios de ellos: Steven Selph's Scraper : Instrucciones Lars Muldjord's Skyscraper : Instrucciones Skraper Universal XML Scraper Como ejemplo vamos a utilizar uno de los mejores, el Skraper que utiliza la base de datos del sitio ScreenScraper . A continuaci\u00f3n se describe c\u00f3mo ser\u00eda el proceso. Vamos a hacerlo desde Windows ya que en el momento de escribir esto s\u00f3lo existe versi\u00f3n para este sistema, aunque se puede utilizar en Linux con Wine. Descargar ScreenScraperUI de aqu\u00ed Crear cuenta en ScreenScraper . He le\u00eddo que hay problemas si se hace con la p\u00e1gina en espa\u00f1ol as\u00ed que lo he hecho en ingl\u00e9s. El \u00fanico problema que he tenido es que el mail de confirmaci\u00f3n para activar la cuenta ha entrado por la bandeja de SPAM de GMail. Sacar la microSD externa donde habitualmente tendremos las ROMs y montarla en el ordenador. Esto s\u00f3lo servir\u00e1 si la tarjeta tiene formato reconocible por Windows (FAT32 o exFAT). Abrir ScreenScraperUI. Se iniciar\u00e1 con un asistente. Lo primero que nos pedir\u00e1 es la cuenta de ScreenScraper . En el siguiente paso nos pedir\u00e1 el tipo de sistema para el que vamos a scrapear las ROMs. Le diremos \"Emulaci\u00f3n Gen\u00e9rica\". Lo siguiente ser\u00e1 indicar el lugar donde est\u00e1n las ROMs. Al hacerlo he tenido un problema y es que aun marcando la opci\u00f3n \"Inspeccionar sub-carpetas\", el asistente s\u00f3lo ha sido capaz de reconocer 6 sistemas. Luego he podido comprobar que el problema es que cada sistema utiliza una sub-carpeta espec\u00edfica que si no coincide con la que nosotros tenemos, no ser\u00e1 reconocido. Esto se puede solucionar m\u00e1s adelante a\u00f1adiendo los sistemas que falten a mano. Una vez terminado el asistente configuraremos lo siguiente en el apartado MEDIA: Eliminamos la entrada MANUAL que nos descargar\u00eda un PDF con el folleto del juego para cada ROM. Indicamos %ROMROOTFOLDER%\\.previews en el par\u00e1metro Carpeta de Destino . Marcamos las opciones Redimensionar altura a: 240 y Mantener relaci\u00f3n de aspecto de imagen . Finalmente pulsamos el bot\u00f3n con forma de Play que hay abajo a la derecha para comenzar el proceso. Dependiendo de las ROMs y sistemas que vayamos a reconocer el proceso puede tardar bastante. Como hemos comentado antes, el programa a la hora de reconocer los sistemas, utiliza unas rutas de directorios predefinidas. Vamos a ver c\u00f3mo se a\u00f1adir\u00eda manualmente un sistema que no haya sido reconocido autom\u00e1ticamente por este motivo. Por ejemplo la NES. El directorio que utilizo yo para almacenar esas ROMs es FC (por Famicom). En la pantalla principal, pulsar el bot\u00f3n + que hay abajo a la izquierda. Aparece una ventana popup con la lista de todos los sistemas reconocidos por el programa. Buscamos el sistema que queremos a\u00f1adir. En el caso de NES se encuentra en la secci\u00f3n Console . Pulsamos OK. Volveremos a la pantalla principal con el sistema instalado y seleccionado en la lista de la izquierda. Como vemos la ruta que espera la aplicaci\u00f3n para las ROMs de NES es D:\\roms\\Nintendo Entertainment System . Sustituimos la ruta por la correcta ( D:\\roms\\FC ) y pulsamos el bot\u00f3n Play. Ya s\u00f3lo queda devolver la microSD a la consola y disfrutar de las previews. Aqu\u00ed podemos ver todo el proceso en un tutorial en video:","title":"RG350 Scraper"},{"location":"2020-01-25-rg350_simplemenu.html","text":"Actualizaci\u00f3n 2020-04-29 Se modifica el art\u00edculo para que las instrucciones correspondan con la nueva versi\u00f3n 5.5 . Se ilustra a continuaci\u00f3n el proceso de instalaci\u00f3n y configuraci\u00f3n del launcher SimpleMenu para RG350. Instalaci\u00f3n \u00b6 La instalaci\u00f3n consiste \u00fanicamente en copiar el OPK que ofrece su autor a una de las dos rutas que lee Gmenu2x para mostrar el lanzador, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Tras hacerlo aparece el lanzador en la secci\u00f3n applications de GMenu2X: Si lo abrimos en este momento, reconocer\u00e1 las aplicaciones y ports que tengamos instalados, dado que la ruta y extensi\u00f3n de los mismos es previsible: Si nos desplazamos hasta alguno de los sistemas de emulaci\u00f3n seguramente veremos que no reconoce los emuladores y/o ROMs que tengamos instalados. Esto es normal puesto que todav\u00eda no hemos adaptado la configuraci\u00f3n: Configuraci\u00f3n \u00b6 Aviso Las tres \u00faltimas versiones mayores del programa han modificado el formato de los ficheros de configuraci\u00f3n, por lo que si cont\u00e1bamos con una instalaci\u00f3n de las versiones previas (2.x \u00f3 3.x) nos va a tocar adaptarlos, es decir no se pueden utilizar directamente ya que no son compatibles. Lo mejor ser\u00e1 renombrar el directorio /media/data/local/home/.simplemenu para que se vuelva a generar en el siguiente arranque y as\u00ed adem\u00e1s mantener copia de la configuraci\u00f3n anterior para que nos sirva de modelo para crear la nueva. Entre la versi\u00f3n 4.1 y la 4.2 ha habido un cambio importante en la gesti\u00f3n del tema gr\u00e1fico. Entre la versi\u00f3n 4.2 y la 4.5 el cambio importante ha sido en la ubicaci\u00f3n y divisi\u00f3n del fichero sections.ini en varios para agrupar las distintas m\u00e1quinas por tipos. Entre la versi\u00f3n 4.5 y 5.5 no ha habido cambios importantes en la configuraci\u00f3n por lo que podremos mantenerla. De serie SimpleMenu trae una configuraci\u00f3n con varios sistemas precargados, pero como apunta de forma est\u00e1tica a las rutas de los distintos emuladores y ROMs, es casi seguro que nos va a tocar ajustar esta configuraci\u00f3n a los que nosotros tengamos instalados en la consola. A\u00fan as\u00ed interesa que lo ejecutemos al menos una vez para que se genere el directorio .simplemenu dentro del home de la consola para que tengamos la plantilla sobre la que empezar a modificar. Sistemas \u00b6 Los ficheros clave son los que se encuentran en la ruta /media/data/local/home/.simplemenu/section_groups . All\u00ed encontramos los siguientes ficheros: RG350:/media/data/local/home/.simplemenu/section_groups # ls -l -rw-r--r-- 1 root root 235 Jan 28 17:35 apps and games.ini -rw-r--r-- 1 root root 10716 Jan 28 17:35 apps and games.png -rw-r--r-- 1 root root 936 Jan 28 17:35 arcades.ini -rw-r--r-- 1 root root 14746 Jan 28 17:35 arcades.png -rw-r--r-- 1 root root 1889 Jan 28 17:35 consoles.ini -rw-r--r-- 1 root root 19669 Jan 28 17:35 consoles.png -rw-r--r-- 1 root root 1188 Jan 28 17:35 handhelds.ini -rw-r--r-- 1 root root 8626 Jan 28 17:35 handhelds.png -rw-r--r-- 1 root root 949 Jan 28 17:35 home computers.ini -rw-r--r-- 1 root root 17383 Jan 28 17:35 home computers.png Como vemos hay una imagen y un fichero .ini para 5 grupos de sistemas. Esta agrupaci\u00f3n es flexible, es decir, podemos ampliar o reducir el n\u00famero de tipos a nuestro gusto. El fichero de imagen tiene que llamarse exactamente igual que el de configuraci\u00f3n. Ser\u00e1 lo que se vea en la pantalla al seleccionar el tipo correspondiente. A no ser que seamos expertos con el editor vi que podemos ejecutar por SSH, lo mejor ser\u00e1 transferir los ficheros al ordenador de alguna manera (pas\u00e1ndolos a la tarjeta externa con DinguxCmdr si no se conoce otra forma m\u00e1s directa) y editarlos all\u00ed con un editor que soporte los finales de l\u00ednea y la codificaci\u00f3n utilizada habitualmente en sistemas Linux (como Notepad++ ). A partir de aqu\u00ed nos vamos a centrar en el tipo handhelds para seguir la explicaci\u00f3n, pero todo lo que digamos se puede aplicar exactamente igual a cualquiera de los otros tipos. En el fichero handhelds.ini tenemos al principio la lista de sistemas en la propiedad consoleList del apartado [CONSOLES] . En esta propiedad se van a\u00f1adiendo los distintos sistemas que definiremos a continuaci\u00f3n, separados por comas. Podemos seleccionar un subconjunto de los sistemas definidos m\u00e1s abajo, es decir, podemos ocultar algunos simplemente no incluy\u00e9ndolos en consoleList . [CONSOLES] consoleList =GAME BOY,GAME BOY COLOR,GAME BOY ADVANCE,GAME & WATCH,GAME GEAR,NEO GEO POCKET,WONDERSWAN,LYNX Luego por cada sistema tenemos un bloque como el siguiente: [GAME BOY] execs = /media/data/apps/gambatte-multi-r572u4-20200127.opk romDirs = /media/data/roms/GB/ romExts = .gb,.gz,.zip El formato del archivo es el que se utiliza habitualmente para los ficheros de configuraci\u00f3n tipo INI . El significado de los par\u00e1metros es: execs : OPKs de los emuladores del sistema con sus rutas, separados por comas. romDirs : Directorios donde se encuentran las ROMs de este sistema, separados por comas. romExts : Extensiones de los ficheros que se incluir\u00e1n en el listado de ROMs, separadas por comas. Una vez que devolvamos los ficheros de configuraci\u00f3n a su lugar en /media/data/local/home/.simplemenu/section_groups , ya podremos tratar de ejecutarlo para comprobar si ha cargado bien los sistemas y previews de las ROMs. Al menos en mi caso lo que me encuentro en este momento es: Como vemos en la definici\u00f3n de los par\u00e1metros, ahora puede haber varios emuladores y varios directorios de ROMs en cada sistema. En el primer caso podremos elegir el emulador a utilizar pulsando Select cuando est\u00e9 seleccionada la ROM que queremos emular. Por ejemplo, tras a\u00f1adir el emulador GPSP a la configuraci\u00f3n de GBA podemos ver lo siguiente al pulsar Select en el listado de ROMs de GBA y pulsar arriba/abajo en la cruceta: Como punto de partida dejo aqu\u00ed mis ficheros de configuraci\u00f3n que contienen la mayor\u00eda de los emuladores y la estructura de directorios para las ROMs que se utilizan habitualmente. simplemenu.zip Nota A partir de la versi\u00f3n 4.2, SimpleMenu es mucho m\u00e1s robusto respecto a defectos o carencias en la configuraci\u00f3n tanto de los sistemas como del tema, por lo que arrancar\u00e1 siempre. Cuando por ejemplo no exista correspondencia de un sistema en el tema, nos mostrar\u00e1 el nombre del mismo en lugar de un logotipo, lo que nos servir\u00e1 como indicaci\u00f3n de que debemos incorporarlo nosotros. Aviso Si sustituimos los ficheros de configuraci\u00f3n de los sistemas despu\u00e9s de haber abierto SimpleMenu al menos una vez y hecho cambios en su configuraci\u00f3n, es probable que \u00e9ste se niegue a abrirse (volviendo inmediatamente a GMenu2X al intentarlo). En esos casos borrar el fichero /media/data/local/home/.simplemenu/last_state.sav . Configuraci\u00f3n general \u00b6 Dentro de /media/data/local/home/.simplemenu hay otro fichero que nos interesa modificar. Se trata del config.ini . A partir de la versi\u00f3n 5.0 esta configuraci\u00f3n general se puede hacer desde el propio frontend. Accedemos a ella pulsando Start desde el listado de ROMs de un sistema: La mayor\u00eda de estos ajustes tienen su correspondencia en el fichero de configuraci\u00f3n. Vamos a empezar estudiando las opciones directamente sobre el fichero y al final veremos las opciones del men\u00fa de settings que no est\u00e1n en \u00e9l. El contenido del fichero es el siguiente por defecto: [GENERAL] media_folder = media theme = default [FULLSCREEN_MODE] display_footer = 0 display_menu = 1 [SYSTEM] screen_timeout_in_seconds = 30 allow_shutdown = 0 [CPU] underclocked_speed = 408 normal_speed = 702 overclocked_speed = 732 sleep_speed = 200 Los par\u00e1metros dentro del grupo [CPU] son ignorados en RG350 (en principio son para modificar las frecuencias del procesador). El resto de par\u00e1metros s\u00ed los podemos modificar. Su significado es el siguiente: media_folder : Directorio donde se buscan las previsualizaciones de las ROMs. Interesa cambiar este valor del media que viene por defecto a .previews para que sea compatible con la ruta utilizada por Gmenu2x. theme : A partir de la versi\u00f3n 4.2 se pueden incorporar varios temas (en distintos directorios dentro de /media/data/local/home/.simplemenu/themes ) que luego se pueden seleccionar mediante este par\u00e1metro. display_footer : Muestra el nombre de la ROM cuando estamos en modo preview (0=No; 1=S\u00ed). display_menu : Muestra la lista de ROMs de una secci\u00f3n cuando nos desplazamos entre las ROMs en modo preview (0=No; 1=S\u00ed). screen_timeout_in_seconds : N\u00famero de segundos a partir del cual salta el salvapantallas. Cuando \u00e9ste entre, la forma de salir es pulsar cualquier bot\u00f3n. allow_shutdown : Antes de la versi\u00f3n 5.0 esta opci\u00f3n serv\u00eda para configurar el efecto de la combinaci\u00f3n de teclas Start+Select para cerrar la aplicaci\u00f3n o apagar la consola. A partir de esta versi\u00f3n este comportamiento se gestiona de forma diferente como veremos dentro de poco. Por \u00faltimo comentamos las opciones del men\u00fa de settings que muestra el frontend que son independientes del fichero de configuraci\u00f3n. Son las siguientes: Confirmando este men\u00fa cerraremos SimpleMenu y regresaremos al programa desde el que lo hayamos lanzado (GMenu2X habitualmente). Cuando estamos navegando entre los sistemas de un grupo, si esta opci\u00f3n est\u00e1 a YES el logo del sistema se ver\u00e1 durante un segundo antes de aparecer el listado de ROMs de ese sistema. Si est\u00e1 a NO el logo se mantendr\u00e1 visible hasta que pulsemos A para pasar al listado de ROMs. Permite seleccionar entre tres tipos de disposiciones de los listados de ROMs y sus previews. La visualizaci\u00f3n depender\u00e1 del tema activo. Por ejemplo para el tema default las tres disposiciones tienen el siguiente aspecto: Layout SimpleMenu Layout Traditional Layout Drunken Monkey Esta entrada del men\u00fa de settings nos permite configurar SimpleMenu como frontend predeterminado en el sistema. Cuando lo configuramos de este modo, la primera entrada del men\u00fa de settings pasa de QUIT a SHUTDOWN permiti\u00e9ndonos apagar la m\u00e1quina. Manejo \u00b6 Como hemos visto durante la configuraci\u00f3n, a partir de la versi\u00f3n 4.5 se pueden definir varios grupos de m\u00e1quinas. Por defecto existen 5 grupos definidos por tipo de m\u00e1quinas. Entramos en el modo de selecci\u00f3n de un grupo pulsando B . En ese momento vemos por ejemplo: En esta situaci\u00f3n cambiamos de grupo pulsando Arriba y Abajo en la cruceta, y entramos en el grupo pulsando A . Previews \u00b6 SimpleMenu soporta previsualizaci\u00f3n de las ROMs. Para que aparezcan hay que hacer dos cosas: Colocar las im\u00e1genes con el mismo nombre que las ROMs pero con extensi\u00f3n .png en un directorio al mismo nivel que las ROMs cuyo nombre se corresponda con el definido en el par\u00e1metro media_folder del fichero de configuraci\u00f3n config.ini . Inicialmente este nombre es media . Por ejemplo la previsualizaci\u00f3n de la ROM /media/sdcard/roms/GB/DKLAND.gb ir\u00eda en /media/sdcard/roms/GB/media/DKLAND.png . Activar la visualizaci\u00f3n de las miniaturas. Para ello hay que pulsar la tecla Y . Volvi\u00e9ndola a pulsar volvemos al listado normal. Como hemos comentado en el apartado de Configuraci\u00f3n general , podemos modificar el directorio que se utiliza de forma predeterminada ( media ) por el .previews que utiliza Gmenu2x para as\u00ed hacerlos compatibles y no tener que duplicar las previsualizaciones. El resultado: Controles \u00b6 La p\u00e1gina de documentaci\u00f3n de controles es \u00e9sta , pero resulta un poco confusa porque mezcla varias m\u00e1quinas, por lo que se listan a continuaci\u00f3n de forma expl\u00edcita los controles para RG350: Shortcut Modo Funci\u00f3n R1 / L1 Listado de ROMs Cambia de sistema desde la lista de ROMs. Si est\u00e1 activada la previsualizaci\u00f3n de las ROMs, se mostrar\u00e1 el logotipo del sistema durante un segundo Arriba / Abajo Listado de ROMs Selecciona la ROM anterior/siguiente Izquierda / Derercha Listado de ROMs Avanza 10 ROMs anteriores/siguientes B+Izquierda / B+Derecha Listado de ROMs Cambia de sistema mostrando el logotipo de los sistemas B+Arriba / B+Abajo Listado de ROMs Pasa a la letra anterior/siguiente Y Listado de ROMs Activa/desactiva la previsualizaci\u00f3n de las ROMs A Listado de ROMs Lanza la ROM seleccionada B+Select Listado de ROMs Lanza una ROM aleatoria Select Listado de ROMs Permite seleccionar el emulador a utilizar cuando hay varios definidos en el sistema Select+Start Listado de ROMs Apaga la consola o cierra SimpleMenu (dependiendo del par\u00e1metro allow_shutdown en config.ini ) X Listado de ROMs A\u00f1ade la ROM seleccionada a Favoritos L2 Listado de ROMs Entra en la lista de Favoritos X Listado de Favoritos Borra la ROM seleccionada de Favoritos L2 Listado de Favoritos Sale de la lista de Favoritos B Listado de ROMs Sube al nivel de seleci\u00f3n de grupos A Listado de grupos Entra en el grupo seleccionado","title":"RG350 SimpleMenu"},{"location":"2020-01-25-rg350_simplemenu.html#instalacion","text":"La instalaci\u00f3n consiste \u00fanicamente en copiar el OPK que ofrece su autor a una de las dos rutas que lee Gmenu2x para mostrar el lanzador, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Tras hacerlo aparece el lanzador en la secci\u00f3n applications de GMenu2X: Si lo abrimos en este momento, reconocer\u00e1 las aplicaciones y ports que tengamos instalados, dado que la ruta y extensi\u00f3n de los mismos es previsible: Si nos desplazamos hasta alguno de los sistemas de emulaci\u00f3n seguramente veremos que no reconoce los emuladores y/o ROMs que tengamos instalados. Esto es normal puesto que todav\u00eda no hemos adaptado la configuraci\u00f3n:","title":"Instalaci\u00f3n"},{"location":"2020-01-25-rg350_simplemenu.html#configuracion","text":"Aviso Las tres \u00faltimas versiones mayores del programa han modificado el formato de los ficheros de configuraci\u00f3n, por lo que si cont\u00e1bamos con una instalaci\u00f3n de las versiones previas (2.x \u00f3 3.x) nos va a tocar adaptarlos, es decir no se pueden utilizar directamente ya que no son compatibles. Lo mejor ser\u00e1 renombrar el directorio /media/data/local/home/.simplemenu para que se vuelva a generar en el siguiente arranque y as\u00ed adem\u00e1s mantener copia de la configuraci\u00f3n anterior para que nos sirva de modelo para crear la nueva. Entre la versi\u00f3n 4.1 y la 4.2 ha habido un cambio importante en la gesti\u00f3n del tema gr\u00e1fico. Entre la versi\u00f3n 4.2 y la 4.5 el cambio importante ha sido en la ubicaci\u00f3n y divisi\u00f3n del fichero sections.ini en varios para agrupar las distintas m\u00e1quinas por tipos. Entre la versi\u00f3n 4.5 y 5.5 no ha habido cambios importantes en la configuraci\u00f3n por lo que podremos mantenerla. De serie SimpleMenu trae una configuraci\u00f3n con varios sistemas precargados, pero como apunta de forma est\u00e1tica a las rutas de los distintos emuladores y ROMs, es casi seguro que nos va a tocar ajustar esta configuraci\u00f3n a los que nosotros tengamos instalados en la consola. A\u00fan as\u00ed interesa que lo ejecutemos al menos una vez para que se genere el directorio .simplemenu dentro del home de la consola para que tengamos la plantilla sobre la que empezar a modificar.","title":"Configuraci\u00f3n"},{"location":"2020-01-25-rg350_simplemenu.html#sistemas","text":"Los ficheros clave son los que se encuentran en la ruta /media/data/local/home/.simplemenu/section_groups . All\u00ed encontramos los siguientes ficheros: RG350:/media/data/local/home/.simplemenu/section_groups # ls -l -rw-r--r-- 1 root root 235 Jan 28 17:35 apps and games.ini -rw-r--r-- 1 root root 10716 Jan 28 17:35 apps and games.png -rw-r--r-- 1 root root 936 Jan 28 17:35 arcades.ini -rw-r--r-- 1 root root 14746 Jan 28 17:35 arcades.png -rw-r--r-- 1 root root 1889 Jan 28 17:35 consoles.ini -rw-r--r-- 1 root root 19669 Jan 28 17:35 consoles.png -rw-r--r-- 1 root root 1188 Jan 28 17:35 handhelds.ini -rw-r--r-- 1 root root 8626 Jan 28 17:35 handhelds.png -rw-r--r-- 1 root root 949 Jan 28 17:35 home computers.ini -rw-r--r-- 1 root root 17383 Jan 28 17:35 home computers.png Como vemos hay una imagen y un fichero .ini para 5 grupos de sistemas. Esta agrupaci\u00f3n es flexible, es decir, podemos ampliar o reducir el n\u00famero de tipos a nuestro gusto. El fichero de imagen tiene que llamarse exactamente igual que el de configuraci\u00f3n. Ser\u00e1 lo que se vea en la pantalla al seleccionar el tipo correspondiente. A no ser que seamos expertos con el editor vi que podemos ejecutar por SSH, lo mejor ser\u00e1 transferir los ficheros al ordenador de alguna manera (pas\u00e1ndolos a la tarjeta externa con DinguxCmdr si no se conoce otra forma m\u00e1s directa) y editarlos all\u00ed con un editor que soporte los finales de l\u00ednea y la codificaci\u00f3n utilizada habitualmente en sistemas Linux (como Notepad++ ). A partir de aqu\u00ed nos vamos a centrar en el tipo handhelds para seguir la explicaci\u00f3n, pero todo lo que digamos se puede aplicar exactamente igual a cualquiera de los otros tipos. En el fichero handhelds.ini tenemos al principio la lista de sistemas en la propiedad consoleList del apartado [CONSOLES] . En esta propiedad se van a\u00f1adiendo los distintos sistemas que definiremos a continuaci\u00f3n, separados por comas. Podemos seleccionar un subconjunto de los sistemas definidos m\u00e1s abajo, es decir, podemos ocultar algunos simplemente no incluy\u00e9ndolos en consoleList . [CONSOLES] consoleList =GAME BOY,GAME BOY COLOR,GAME BOY ADVANCE,GAME & WATCH,GAME GEAR,NEO GEO POCKET,WONDERSWAN,LYNX Luego por cada sistema tenemos un bloque como el siguiente: [GAME BOY] execs = /media/data/apps/gambatte-multi-r572u4-20200127.opk romDirs = /media/data/roms/GB/ romExts = .gb,.gz,.zip El formato del archivo es el que se utiliza habitualmente para los ficheros de configuraci\u00f3n tipo INI . El significado de los par\u00e1metros es: execs : OPKs de los emuladores del sistema con sus rutas, separados por comas. romDirs : Directorios donde se encuentran las ROMs de este sistema, separados por comas. romExts : Extensiones de los ficheros que se incluir\u00e1n en el listado de ROMs, separadas por comas. Una vez que devolvamos los ficheros de configuraci\u00f3n a su lugar en /media/data/local/home/.simplemenu/section_groups , ya podremos tratar de ejecutarlo para comprobar si ha cargado bien los sistemas y previews de las ROMs. Al menos en mi caso lo que me encuentro en este momento es: Como vemos en la definici\u00f3n de los par\u00e1metros, ahora puede haber varios emuladores y varios directorios de ROMs en cada sistema. En el primer caso podremos elegir el emulador a utilizar pulsando Select cuando est\u00e9 seleccionada la ROM que queremos emular. Por ejemplo, tras a\u00f1adir el emulador GPSP a la configuraci\u00f3n de GBA podemos ver lo siguiente al pulsar Select en el listado de ROMs de GBA y pulsar arriba/abajo en la cruceta: Como punto de partida dejo aqu\u00ed mis ficheros de configuraci\u00f3n que contienen la mayor\u00eda de los emuladores y la estructura de directorios para las ROMs que se utilizan habitualmente. simplemenu.zip Nota A partir de la versi\u00f3n 4.2, SimpleMenu es mucho m\u00e1s robusto respecto a defectos o carencias en la configuraci\u00f3n tanto de los sistemas como del tema, por lo que arrancar\u00e1 siempre. Cuando por ejemplo no exista correspondencia de un sistema en el tema, nos mostrar\u00e1 el nombre del mismo en lugar de un logotipo, lo que nos servir\u00e1 como indicaci\u00f3n de que debemos incorporarlo nosotros. Aviso Si sustituimos los ficheros de configuraci\u00f3n de los sistemas despu\u00e9s de haber abierto SimpleMenu al menos una vez y hecho cambios en su configuraci\u00f3n, es probable que \u00e9ste se niegue a abrirse (volviendo inmediatamente a GMenu2X al intentarlo). En esos casos borrar el fichero /media/data/local/home/.simplemenu/last_state.sav .","title":"Sistemas"},{"location":"2020-01-25-rg350_simplemenu.html#configuracion-general","text":"Dentro de /media/data/local/home/.simplemenu hay otro fichero que nos interesa modificar. Se trata del config.ini . A partir de la versi\u00f3n 5.0 esta configuraci\u00f3n general se puede hacer desde el propio frontend. Accedemos a ella pulsando Start desde el listado de ROMs de un sistema: La mayor\u00eda de estos ajustes tienen su correspondencia en el fichero de configuraci\u00f3n. Vamos a empezar estudiando las opciones directamente sobre el fichero y al final veremos las opciones del men\u00fa de settings que no est\u00e1n en \u00e9l. El contenido del fichero es el siguiente por defecto: [GENERAL] media_folder = media theme = default [FULLSCREEN_MODE] display_footer = 0 display_menu = 1 [SYSTEM] screen_timeout_in_seconds = 30 allow_shutdown = 0 [CPU] underclocked_speed = 408 normal_speed = 702 overclocked_speed = 732 sleep_speed = 200 Los par\u00e1metros dentro del grupo [CPU] son ignorados en RG350 (en principio son para modificar las frecuencias del procesador). El resto de par\u00e1metros s\u00ed los podemos modificar. Su significado es el siguiente: media_folder : Directorio donde se buscan las previsualizaciones de las ROMs. Interesa cambiar este valor del media que viene por defecto a .previews para que sea compatible con la ruta utilizada por Gmenu2x. theme : A partir de la versi\u00f3n 4.2 se pueden incorporar varios temas (en distintos directorios dentro de /media/data/local/home/.simplemenu/themes ) que luego se pueden seleccionar mediante este par\u00e1metro. display_footer : Muestra el nombre de la ROM cuando estamos en modo preview (0=No; 1=S\u00ed). display_menu : Muestra la lista de ROMs de una secci\u00f3n cuando nos desplazamos entre las ROMs en modo preview (0=No; 1=S\u00ed). screen_timeout_in_seconds : N\u00famero de segundos a partir del cual salta el salvapantallas. Cuando \u00e9ste entre, la forma de salir es pulsar cualquier bot\u00f3n. allow_shutdown : Antes de la versi\u00f3n 5.0 esta opci\u00f3n serv\u00eda para configurar el efecto de la combinaci\u00f3n de teclas Start+Select para cerrar la aplicaci\u00f3n o apagar la consola. A partir de esta versi\u00f3n este comportamiento se gestiona de forma diferente como veremos dentro de poco. Por \u00faltimo comentamos las opciones del men\u00fa de settings que muestra el frontend que son independientes del fichero de configuraci\u00f3n. Son las siguientes: Confirmando este men\u00fa cerraremos SimpleMenu y regresaremos al programa desde el que lo hayamos lanzado (GMenu2X habitualmente). Cuando estamos navegando entre los sistemas de un grupo, si esta opci\u00f3n est\u00e1 a YES el logo del sistema se ver\u00e1 durante un segundo antes de aparecer el listado de ROMs de ese sistema. Si est\u00e1 a NO el logo se mantendr\u00e1 visible hasta que pulsemos A para pasar al listado de ROMs. Permite seleccionar entre tres tipos de disposiciones de los listados de ROMs y sus previews. La visualizaci\u00f3n depender\u00e1 del tema activo. Por ejemplo para el tema default las tres disposiciones tienen el siguiente aspecto: Layout SimpleMenu Layout Traditional Layout Drunken Monkey Esta entrada del men\u00fa de settings nos permite configurar SimpleMenu como frontend predeterminado en el sistema. Cuando lo configuramos de este modo, la primera entrada del men\u00fa de settings pasa de QUIT a SHUTDOWN permiti\u00e9ndonos apagar la m\u00e1quina.","title":"Configuraci\u00f3n general"},{"location":"2020-01-25-rg350_simplemenu.html#manejo","text":"Como hemos visto durante la configuraci\u00f3n, a partir de la versi\u00f3n 4.5 se pueden definir varios grupos de m\u00e1quinas. Por defecto existen 5 grupos definidos por tipo de m\u00e1quinas. Entramos en el modo de selecci\u00f3n de un grupo pulsando B . En ese momento vemos por ejemplo: En esta situaci\u00f3n cambiamos de grupo pulsando Arriba y Abajo en la cruceta, y entramos en el grupo pulsando A .","title":"Manejo"},{"location":"2020-01-25-rg350_simplemenu.html#previews","text":"SimpleMenu soporta previsualizaci\u00f3n de las ROMs. Para que aparezcan hay que hacer dos cosas: Colocar las im\u00e1genes con el mismo nombre que las ROMs pero con extensi\u00f3n .png en un directorio al mismo nivel que las ROMs cuyo nombre se corresponda con el definido en el par\u00e1metro media_folder del fichero de configuraci\u00f3n config.ini . Inicialmente este nombre es media . Por ejemplo la previsualizaci\u00f3n de la ROM /media/sdcard/roms/GB/DKLAND.gb ir\u00eda en /media/sdcard/roms/GB/media/DKLAND.png . Activar la visualizaci\u00f3n de las miniaturas. Para ello hay que pulsar la tecla Y . Volvi\u00e9ndola a pulsar volvemos al listado normal. Como hemos comentado en el apartado de Configuraci\u00f3n general , podemos modificar el directorio que se utiliza de forma predeterminada ( media ) por el .previews que utiliza Gmenu2x para as\u00ed hacerlos compatibles y no tener que duplicar las previsualizaciones. El resultado:","title":"Previews"},{"location":"2020-01-25-rg350_simplemenu.html#controles","text":"La p\u00e1gina de documentaci\u00f3n de controles es \u00e9sta , pero resulta un poco confusa porque mezcla varias m\u00e1quinas, por lo que se listan a continuaci\u00f3n de forma expl\u00edcita los controles para RG350: Shortcut Modo Funci\u00f3n R1 / L1 Listado de ROMs Cambia de sistema desde la lista de ROMs. Si est\u00e1 activada la previsualizaci\u00f3n de las ROMs, se mostrar\u00e1 el logotipo del sistema durante un segundo Arriba / Abajo Listado de ROMs Selecciona la ROM anterior/siguiente Izquierda / Derercha Listado de ROMs Avanza 10 ROMs anteriores/siguientes B+Izquierda / B+Derecha Listado de ROMs Cambia de sistema mostrando el logotipo de los sistemas B+Arriba / B+Abajo Listado de ROMs Pasa a la letra anterior/siguiente Y Listado de ROMs Activa/desactiva la previsualizaci\u00f3n de las ROMs A Listado de ROMs Lanza la ROM seleccionada B+Select Listado de ROMs Lanza una ROM aleatoria Select Listado de ROMs Permite seleccionar el emulador a utilizar cuando hay varios definidos en el sistema Select+Start Listado de ROMs Apaga la consola o cierra SimpleMenu (dependiendo del par\u00e1metro allow_shutdown en config.ini ) X Listado de ROMs A\u00f1ade la ROM seleccionada a Favoritos L2 Listado de ROMs Entra en la lista de Favoritos X Listado de Favoritos Borra la ROM seleccionada de Favoritos L2 Listado de Favoritos Sale de la lista de Favoritos B Listado de ROMs Sube al nivel de seleci\u00f3n de grupos A Listado de grupos Entra en el grupo seleccionado","title":"Controles"},{"location":"2020-01-31-rg350_fba.html","text":"Final Burn Alpha o FBA es un emulador de m\u00faltiples m\u00e1quinas arcade, sobre todo Neo-Geo, Konami y Capcom. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350. El repositorio donde se publican versiones especiales para RG350 es \u00e9ste . En concreto las releases se descargan de aqu\u00ed . En la secci\u00f3n de assets de cada release podemos encontrar un OPK creado especialmente para esta consola. Instalaci\u00f3n \u00b6 La instalaci\u00f3n es como la de cualquier emulador en formato OPK: Descargar el OPK para RG350 del \u00faltimo release. En el momento de escribir este art\u00edculo es: fba-RG350-r19-8e351b8b.opk Copiarlo dentro del directorio apps de la microSD externa. Tambi\u00e9n puede copiarse en la tarjeta interna (en la ruta /media/data/apps , pero particularmente prefiero instalar las aplicaciones en la externa). Una vez instalado, reiniciar Gmenu2x pulsando Power+Select para asegurar el que aparezca: Configuraci\u00f3n \u00b6 La primera vez que lo abramos nos mostrar\u00e1 las 5807 ROMs que es capaz de reconocer (al menos en la r19 ), pero seguramente no nos permitir\u00e1 abrirlas y las representar\u00e1 en rojo. Si pulsamos la tecla X (y no la Y como sugiere el propio programa) veremos la ayuda en la que se explica que las ROMs que aparecen en rojo est\u00e1n missing , es decir que no han sido localizadas en la consola. Hay que configurar en los ajustes de FBA la ruta de las ROMs. Para ello seguir estos pasos: Pulsar Start . Aparecen las Main settings . Bajamos hasta seleccionar la entrada ROMs Paths --> : Entrar con A para ver la serie de 20 rutas que nos permite configurar FBA. Como vemos, por defecto tiene algunas rutas habituales ya definidas. Curiosamente la ruta n\u00famero 4 hubiera funcionado en mi m\u00e1quina cuando ten\u00eda la tarjeta externa en formato FAT32, ya que la ruta de mis ROMs de FBA es /media/sdcard/roms/FBA y ese formato no es sensible a may\u00fasculas/min\u00fasculas: Hacer limpieza de las rutas que no nos sirvan seleccion\u00e1ndolas y borr\u00e1ndolas con la tecla X : Seleccionar la primera entrada (por ejemplo) y pulsar A . Aparecer\u00e1 una especie de explorador de ficheros que nos permitir\u00e1 navegar por la estructura de directorios. Subiremos por el \u00e1rbol seleccionando la entrada de los dos puntos .. hasta llegar a la ra\u00edz y luego comenzaremos a descender por la ruta que nos lleve hasta nuestras ROMs, en mi caso /media/sdcard/roms/FBA . Las subidas y bajadas por el \u00e1rbol se hacen con la tecla A . Cuando lleguemos a la ruta deseada pulsar Start : Tras haber indicado al menos una ruta v\u00e1lida volver al men\u00fa Main settings pulsando B . All\u00ed bajar hasta la opci\u00f3n Clear ROMs list cache and rescaning : Esto nos har\u00e1 volver a la lista de ROMs, pero si en la ruta configurada tenemos ROMs v\u00e1lidas empezaremos a ver algunos nombres en amarillo y/o naranja. Son las ROMs que el emulador puede ejecutar: A no ser que tengamos el romset completo de FBA que soporta la versi\u00f3n que hayamos instalado, veremos varias ROMs en rojo que no vamos a poder jugar. Para esconderlas volver al men\u00fa de settings con la tecla Start y entrar en la secci\u00f3n Filter settings --> con la tecla A : En la nueva pantalla cambiar el ajuste Show roms con las teclas izquierda/derecha de la cruceta hasta que aparezca la opci\u00f3n Available only : Al volver a la lista de ROMs (esta vez no hace falta provocar el rescaning) veremos s\u00f3lo las ROMs que podemos ejecutar: En realidad los pasos 7 a 9 se pueden realizar con la combinaci\u00f3n de teclas Y+Arriba/Abajo que veremos luego. Controles \u00b6 A continuaci\u00f3n se describen los controles que aparecen en las pantallas de ayuda. Combinaci\u00f3n teclas Situaci\u00f3n Funci\u00f3n Select Listado de ROMs Pantalla de salida. Pulsar otra vez para confirmar Start Listado de ROMs Pantalla de ajustes principales Y+Izq./Der. Listado de ROMs Cambia el valor del filtro Hardware Y+Arriba/Abajo Listado de ROMs Cambia el valor del filtro Show roms Y+R1/L1 Listado de ROMs Cambia el valor del filtro Genre , es decir la categor\u00eda de ROMs Y+Select Listado de ROMs A\u00f1ade/quita la ROM a la selecci\u00f3n Y+A Listado de ROMs A\u00f1ade a favoritos la ROM Y+Start Listado de ROMs OJO!!! Borra sin confirmar las ROMs seleccionadas Select Ejecutando ROM Insertar moneda Start Ejecutando ROM Start Player 1 Select+Start Ejecutando ROM Start Player 2 L1+R1+Y Ejecutando ROM Muestra/oculta la tasa de frames por segundo (FPS) L1+R1+B Ejecutando ROM Graba estado de juego L1+R1+A Ejecutando ROM Carga estado de juego L1+R1+Select Ejecutando ROM con UniBIOS instalada Men\u00fa de servicio X+A+B Durante arranque de UniBIOS Men\u00fa de servicio X+Y+B Durante arranque de UniBIOS Cambio de modo (arcade/consola), regi\u00f3n y ajustes BIOS L1+R1+Start Ejecutando ROM Men\u00fa FBA SDL La combinaci\u00f3n de teclas L1+R1+Start es importante ya que es la que muestra el men\u00fa de la aplicaci\u00f3n una vez que hemos arrancado una ROM. Ser\u00e1 el que nos permita hacer ajustes en los controles, guardar y recuperar estados de partidas y salir de la ROM para volver a la lista: Previews \u00b6 FBA, como muchos emuladores, soporta im\u00e1genes para ilustrar los juegos que puede ejecutar. En realidad esta funci\u00f3n tiene un efecto mayor que en otros emuladores, ya que al venir precargado con un romset, es decir, con una base de datos de juegos, aunque no tengamos las ROMs correspondientes, podremos explorar y filtrar el cat\u00e1logo para ver esas previsualizaciones. Vamos pues a ver c\u00f3mo instalarlas. La clave est\u00e1 en ponerlas en el directorio /media/data/local/home/.fba/previews . All\u00ed tendr\u00e1 que haber ficheros de imagen en un formato soportado (como .png por ejemplo). El nombre del archivo tendr\u00e1 que coincidir con el de la ROM que represente. Los nombres est\u00e1n predefinidos en el romset. El programa nos los muestra cuando recorremos el listado. Por ejemplo: Para que se previsualice este juego por tanto deber\u00e1 existir el siguiente fichero: /media/data/local/home/.fba/previews/bombjack.png Como estamos hablando de 5807 ROMs en la versi\u00f3n 44 de FBA, naturalmente no podemos preparar las im\u00e1genes una a una. O bien conseguimos un pack de previews (el que busca encuentra) o bien las intentamos preparar nosotros mismos con un Scrapper . Si optamos por esto \u00faltimo, las im\u00e1genes las tenemos que generar con un tama\u00f1o de 192x112 pixeles, es decir sin mantener la relaci\u00f3n de aspecto. Vamos a suponer que ya disponemos de un directorio con todas esas im\u00e1genes preparadas. Vamos a ver c\u00f3mo instalarlo. Partimos del directorio con las imagenes en nuestro ordenador. Renombrarlo como previews . Extraer la tarjeta externa de la consola, montarla en el ordenador y copiar el directorio previews a la raiz de la misma. Extraer del ordenador la tarjeta y volverla a pinchar en la consola, mejor con ella apagada. Tras arrancar abrir la aplicaci\u00f3n DinguxCmdr . Navegar por los directorios hasta colocar a un lado la ruta /media/sdcard y en el otro /media/data/local/home/.fba . En ese momento seleccionar el directorio previews del lado correspondiente a la ruta de la SD, pulsar X , seleccionar Move > y confirmar con A : Como seguramente el directorio ya existir\u00e1, se nos pedira confirmaci\u00f3n para sobreescribirlo. Seleccionar Yes to all y confirmar con A : Si como en mi caso tenemos en el directorio m\u00e1s de 11.000 ficheros, el proceso tardar\u00e1 un rato (alrededor de un minuto): Si todo ha ido bien, tras salir de DinguxCmdr (tecla Y y comando Quit ), al abrir FBA empezaremos a ver esto: ROMs \u00b6 Como hemos comentado, FBA funciona en base a un romset , es decir un listado cerrado de ROMs que es capaz de ejecutar en una versi\u00f3n determinada. Las ROMs son identificadas haciendo c\u00e1lculos con el contenido de los ficheros, de manera que si se detecta alg\u00fan peque\u00f1o cambio, la ROM se descarta, apareciendo en rojo en el listado. Para lograr depurar un romset, es decir, encontrar los ficheros que falten o se detecten como inv\u00e1lidos, conviene utilizar un programa que nos asista en la tarea. Son los llamados ROM Managers, de los que hay varios, como por ejemplo: Romcenter Clrmamepro RomVault Arcade Manager Existe un proyecto en marcha para listar e identificar el grado de compatibilidad de los juegos del romset de FBA y xMAME en la RG350. Puede encontrarse y colaborar a trav\u00e9s de este documento Google Docs . BIOS NeoGeo \u00b6 Como muchos emuladores, algunas de las m\u00e1quinas que emula FBA necesitan las BIOS que exist\u00edan en la placa, por ejemplo NeoGeo. Hay que por tanto conseguir esta BIOS (el que busca encuentra) y copiarla al mismo directorio donde est\u00e1n las ROMs, es decir, siguiendo el ejemplo de todo el art\u00edculo, en mi caso ser\u00eda /media/sdcard/roms/FBA . La BIOS de NeoGeo en realidad consiste en un conjunto de ficheros comprimidos en uno de nombre neogeo.zip . Existe una BIOS modificada para NeoGeo llamada UNIBIOS con la que al abrir un juego de esta m\u00e1quina y pulsar Select+Start aparece un men\u00fa de cheats. Tambi\u00e9n se puede cambiar la regi\u00f3n y los idiomas de los juegos.","title":"RG350 FBA"},{"location":"2020-01-31-rg350_fba.html#instalacion","text":"La instalaci\u00f3n es como la de cualquier emulador en formato OPK: Descargar el OPK para RG350 del \u00faltimo release. En el momento de escribir este art\u00edculo es: fba-RG350-r19-8e351b8b.opk Copiarlo dentro del directorio apps de la microSD externa. Tambi\u00e9n puede copiarse en la tarjeta interna (en la ruta /media/data/apps , pero particularmente prefiero instalar las aplicaciones en la externa). Una vez instalado, reiniciar Gmenu2x pulsando Power+Select para asegurar el que aparezca:","title":"Instalaci\u00f3n"},{"location":"2020-01-31-rg350_fba.html#configuracion","text":"La primera vez que lo abramos nos mostrar\u00e1 las 5807 ROMs que es capaz de reconocer (al menos en la r19 ), pero seguramente no nos permitir\u00e1 abrirlas y las representar\u00e1 en rojo. Si pulsamos la tecla X (y no la Y como sugiere el propio programa) veremos la ayuda en la que se explica que las ROMs que aparecen en rojo est\u00e1n missing , es decir que no han sido localizadas en la consola. Hay que configurar en los ajustes de FBA la ruta de las ROMs. Para ello seguir estos pasos: Pulsar Start . Aparecen las Main settings . Bajamos hasta seleccionar la entrada ROMs Paths --> : Entrar con A para ver la serie de 20 rutas que nos permite configurar FBA. Como vemos, por defecto tiene algunas rutas habituales ya definidas. Curiosamente la ruta n\u00famero 4 hubiera funcionado en mi m\u00e1quina cuando ten\u00eda la tarjeta externa en formato FAT32, ya que la ruta de mis ROMs de FBA es /media/sdcard/roms/FBA y ese formato no es sensible a may\u00fasculas/min\u00fasculas: Hacer limpieza de las rutas que no nos sirvan seleccion\u00e1ndolas y borr\u00e1ndolas con la tecla X : Seleccionar la primera entrada (por ejemplo) y pulsar A . Aparecer\u00e1 una especie de explorador de ficheros que nos permitir\u00e1 navegar por la estructura de directorios. Subiremos por el \u00e1rbol seleccionando la entrada de los dos puntos .. hasta llegar a la ra\u00edz y luego comenzaremos a descender por la ruta que nos lleve hasta nuestras ROMs, en mi caso /media/sdcard/roms/FBA . Las subidas y bajadas por el \u00e1rbol se hacen con la tecla A . Cuando lleguemos a la ruta deseada pulsar Start : Tras haber indicado al menos una ruta v\u00e1lida volver al men\u00fa Main settings pulsando B . All\u00ed bajar hasta la opci\u00f3n Clear ROMs list cache and rescaning : Esto nos har\u00e1 volver a la lista de ROMs, pero si en la ruta configurada tenemos ROMs v\u00e1lidas empezaremos a ver algunos nombres en amarillo y/o naranja. Son las ROMs que el emulador puede ejecutar: A no ser que tengamos el romset completo de FBA que soporta la versi\u00f3n que hayamos instalado, veremos varias ROMs en rojo que no vamos a poder jugar. Para esconderlas volver al men\u00fa de settings con la tecla Start y entrar en la secci\u00f3n Filter settings --> con la tecla A : En la nueva pantalla cambiar el ajuste Show roms con las teclas izquierda/derecha de la cruceta hasta que aparezca la opci\u00f3n Available only : Al volver a la lista de ROMs (esta vez no hace falta provocar el rescaning) veremos s\u00f3lo las ROMs que podemos ejecutar: En realidad los pasos 7 a 9 se pueden realizar con la combinaci\u00f3n de teclas Y+Arriba/Abajo que veremos luego.","title":"Configuraci\u00f3n"},{"location":"2020-01-31-rg350_fba.html#controles","text":"A continuaci\u00f3n se describen los controles que aparecen en las pantallas de ayuda. Combinaci\u00f3n teclas Situaci\u00f3n Funci\u00f3n Select Listado de ROMs Pantalla de salida. Pulsar otra vez para confirmar Start Listado de ROMs Pantalla de ajustes principales Y+Izq./Der. Listado de ROMs Cambia el valor del filtro Hardware Y+Arriba/Abajo Listado de ROMs Cambia el valor del filtro Show roms Y+R1/L1 Listado de ROMs Cambia el valor del filtro Genre , es decir la categor\u00eda de ROMs Y+Select Listado de ROMs A\u00f1ade/quita la ROM a la selecci\u00f3n Y+A Listado de ROMs A\u00f1ade a favoritos la ROM Y+Start Listado de ROMs OJO!!! Borra sin confirmar las ROMs seleccionadas Select Ejecutando ROM Insertar moneda Start Ejecutando ROM Start Player 1 Select+Start Ejecutando ROM Start Player 2 L1+R1+Y Ejecutando ROM Muestra/oculta la tasa de frames por segundo (FPS) L1+R1+B Ejecutando ROM Graba estado de juego L1+R1+A Ejecutando ROM Carga estado de juego L1+R1+Select Ejecutando ROM con UniBIOS instalada Men\u00fa de servicio X+A+B Durante arranque de UniBIOS Men\u00fa de servicio X+Y+B Durante arranque de UniBIOS Cambio de modo (arcade/consola), regi\u00f3n y ajustes BIOS L1+R1+Start Ejecutando ROM Men\u00fa FBA SDL La combinaci\u00f3n de teclas L1+R1+Start es importante ya que es la que muestra el men\u00fa de la aplicaci\u00f3n una vez que hemos arrancado una ROM. Ser\u00e1 el que nos permita hacer ajustes en los controles, guardar y recuperar estados de partidas y salir de la ROM para volver a la lista:","title":"Controles"},{"location":"2020-01-31-rg350_fba.html#previews","text":"FBA, como muchos emuladores, soporta im\u00e1genes para ilustrar los juegos que puede ejecutar. En realidad esta funci\u00f3n tiene un efecto mayor que en otros emuladores, ya que al venir precargado con un romset, es decir, con una base de datos de juegos, aunque no tengamos las ROMs correspondientes, podremos explorar y filtrar el cat\u00e1logo para ver esas previsualizaciones. Vamos pues a ver c\u00f3mo instalarlas. La clave est\u00e1 en ponerlas en el directorio /media/data/local/home/.fba/previews . All\u00ed tendr\u00e1 que haber ficheros de imagen en un formato soportado (como .png por ejemplo). El nombre del archivo tendr\u00e1 que coincidir con el de la ROM que represente. Los nombres est\u00e1n predefinidos en el romset. El programa nos los muestra cuando recorremos el listado. Por ejemplo: Para que se previsualice este juego por tanto deber\u00e1 existir el siguiente fichero: /media/data/local/home/.fba/previews/bombjack.png Como estamos hablando de 5807 ROMs en la versi\u00f3n 44 de FBA, naturalmente no podemos preparar las im\u00e1genes una a una. O bien conseguimos un pack de previews (el que busca encuentra) o bien las intentamos preparar nosotros mismos con un Scrapper . Si optamos por esto \u00faltimo, las im\u00e1genes las tenemos que generar con un tama\u00f1o de 192x112 pixeles, es decir sin mantener la relaci\u00f3n de aspecto. Vamos a suponer que ya disponemos de un directorio con todas esas im\u00e1genes preparadas. Vamos a ver c\u00f3mo instalarlo. Partimos del directorio con las imagenes en nuestro ordenador. Renombrarlo como previews . Extraer la tarjeta externa de la consola, montarla en el ordenador y copiar el directorio previews a la raiz de la misma. Extraer del ordenador la tarjeta y volverla a pinchar en la consola, mejor con ella apagada. Tras arrancar abrir la aplicaci\u00f3n DinguxCmdr . Navegar por los directorios hasta colocar a un lado la ruta /media/sdcard y en el otro /media/data/local/home/.fba . En ese momento seleccionar el directorio previews del lado correspondiente a la ruta de la SD, pulsar X , seleccionar Move > y confirmar con A : Como seguramente el directorio ya existir\u00e1, se nos pedira confirmaci\u00f3n para sobreescribirlo. Seleccionar Yes to all y confirmar con A : Si como en mi caso tenemos en el directorio m\u00e1s de 11.000 ficheros, el proceso tardar\u00e1 un rato (alrededor de un minuto): Si todo ha ido bien, tras salir de DinguxCmdr (tecla Y y comando Quit ), al abrir FBA empezaremos a ver esto:","title":"Previews"},{"location":"2020-01-31-rg350_fba.html#roms","text":"Como hemos comentado, FBA funciona en base a un romset , es decir un listado cerrado de ROMs que es capaz de ejecutar en una versi\u00f3n determinada. Las ROMs son identificadas haciendo c\u00e1lculos con el contenido de los ficheros, de manera que si se detecta alg\u00fan peque\u00f1o cambio, la ROM se descarta, apareciendo en rojo en el listado. Para lograr depurar un romset, es decir, encontrar los ficheros que falten o se detecten como inv\u00e1lidos, conviene utilizar un programa que nos asista en la tarea. Son los llamados ROM Managers, de los que hay varios, como por ejemplo: Romcenter Clrmamepro RomVault Arcade Manager Existe un proyecto en marcha para listar e identificar el grado de compatibilidad de los juegos del romset de FBA y xMAME en la RG350. Puede encontrarse y colaborar a trav\u00e9s de este documento Google Docs .","title":"ROMs"},{"location":"2020-01-31-rg350_fba.html#bios-neogeo","text":"Como muchos emuladores, algunas de las m\u00e1quinas que emula FBA necesitan las BIOS que exist\u00edan en la placa, por ejemplo NeoGeo. Hay que por tanto conseguir esta BIOS (el que busca encuentra) y copiarla al mismo directorio donde est\u00e1n las ROMs, es decir, siguiendo el ejemplo de todo el art\u00edculo, en mi caso ser\u00eda /media/sdcard/roms/FBA . La BIOS de NeoGeo en realidad consiste en un conjunto de ficheros comprimidos en uno de nombre neogeo.zip . Existe una BIOS modificada para NeoGeo llamada UNIBIOS con la que al abrir un juego de esta m\u00e1quina y pulsar Select+Start aparece un men\u00fa de cheats. Tambi\u00e9n se puede cambiar la regi\u00f3n y los idiomas de los juegos.","title":"BIOS NeoGeo"},{"location":"2020-02-08-eduzebox.html","text":"En la pasada edici\u00f3n de RetroZaragoza me llam\u00f3 la atenci\u00f3n una consolita que alguien llev\u00f3 montada sobre una breadboard. Al volver a casa investigu\u00e9 y me decid\u00ed a fabricar una ya que el proyecto era perfecto para poner a prueba el aprendizaje que hab\u00eda hecho con el dise\u00f1ador de circuitos KiCad . El proyecto original tiene como nombre Uzebox y es una consola de videojuegos basado en un microcontrolador de la amplia familia AVR de Atmel, en concreto el ATmega644. El creador es un tal Uze que explica muy bien el origen del proyecto en la secci\u00f3n Description de la p\u00e1gina del mismo. La m\u00e1quina resultante tiene una potencia y estilo muy similar a la de los cl\u00e1sicos microordenadores de 8 bits con los que me inici\u00e9 en la inform\u00e1tica en los 80. Aqu\u00ed puede verse un ejemplo del estilo de los juegos que puede ejecutar: Uzebox es hardware y software libre, con una amplia y activa comunidad alrededor del foro oficial . La documentaci\u00f3n es extensa y de calidad, tanto a nivel de hardware como de software, lo que termin\u00f3 de convencerme de que merec\u00eda la pena. Dise\u00f1o versi\u00f3n propia \u00b6 Existen multitud de clones referenciados en el propio wiki oficial. El mejor documentado naturalmente es el original, pero tiene el inconveniente de que est\u00e1 orientado al mercado americano y por tanto la salida de v\u00eddeo es NTSC. Adem\u00e1s utiliza un chip (el AD725) para mezclar la se\u00f1al RGB que sale del microcontrolador, lo que es un desperdicio porque en Europa los televisores disponen de entrada para esta se\u00f1al y es de mucha mejor calidad que la de v\u00eddeo compuesto o S-video que se expone en la Uzebox original. Tras un an\u00e1lisis de las opciones existentes decid\u00ed dise\u00f1ar mi propia placa, inspir\u00e1ndome en los esquem\u00e1ticos de los proyectos EUzebox y el del espa\u00f1ol Doragasu RgbUzebox . Imprim\u00ed ambos esquem\u00e1ticos junto al de la Uzebox original y cerr\u00e9 un dise\u00f1o propio, \u00e9ste: Aunque este tipo de proyectos suelen realizarse con componentes de tipo THT, por considerarse m\u00e1s accesibles, me apetec\u00eda adentrarme en el mundo SMD, as\u00ed que decid\u00ed utilizar muchos componentes de este tipo. La placa resulta m\u00e1s peque\u00f1a, sobre todo optando por la versi\u00f3n SMD del microcontrolador (utilic\u00e9 el formato TQFP), y francamente, una vez dado el paso tiene m\u00e1s ventajas que inconvenientes (precio de componentes, tama\u00f1o, aspecto final, retrabajo, es decir sustituci\u00f3n o recolocaci\u00f3n de componentes). El aspecto de la placa seg\u00fan un render que hace el propio KiCad es el siguiente (faltan algunos componentes de los que tuve que hacer yo la huella ya que no exist\u00eda en las librer\u00edas): Todos los archivos del proyecto KiCad pueden encontrarse en este repositorio: https://github.com/eduardofilo/eduzebox Si est\u00e1s habituado a este tipo de proyectos, estos son los ficheros que necesitas; ya sabr\u00e1s qu\u00e9 hacer con ellos. En otro caso contin\u00faa leyendo: Gerbers BOM Firmware (Bootloader) Fuse bits: LFuse: 0xFE HFuse: 0xD2 EGuse: 0xFF Carcasa: Inferior , Superior , Bot\u00f3n RESET Construcci\u00f3n \u00b6 En la construcci\u00f3n podemos distinguir las siguientes etapas: Encargar PCBs Encargar componentes Preparar herramientas SMD Montaje final Vamos a detallarlas por separado. Encargar PCBs \u00b6 A partir del proyecto KiCad se generan los ficheros Gerber. Pueden encontrarse en el directorio gerber del repositorio. Tambi\u00e9n se publican comprimidos en ZIP en los assets de cada release . Hoy en d\u00eda existen muchos servicios de prototipado de PCBs que encajan sobradamente en las dimensiones y calidades necesarias para la placa dise\u00f1ada. Algunos ejemplos: JLCPCB : 2\u20ac por 5 PCBs de hasta 10x10cm y 2 capas. Los gastos de env\u00edo rondan los 7\u20ac. NextPCB : $0 por 5 PCBs de hasta 10x10cm y 2 capas a cambio de poner el logo de NextPCB en la placa. Los gastos de env\u00edo son $10.80. Seeed Studio : $4.90 por 5 PCBs de hasta 10x10cm y 2 capas. PCBWay : $5 por 5 PCBs de hasta 10x10cm y 2 capas. Yo hasta ahora s\u00f3lo he utilizado JLCPCB y las placas han llegado siempre sin defectos y tardado en llegar lo acordado. El proceso de encargar las placas (las 5 del pedido m\u00ednimo) consiste \u00fanicamente en subir el fichero gerber.zip a la p\u00e1gina de pedido ya que las opciones predeterminadas que ofrece el fabricante son perfectas. S\u00f3lo queda esperar alrededor de 20 d\u00edas hasta recibir una caja dentro de la cual encontramos esto: Encargar componentes \u00b6 Antes de pensar en comprar los componentes hay que resolver la tarea de organizar la lista de materiales o BOM como se suele llamar (Bill Of Materials). En realidad gran parte de este trabajo se hace durante la fase de dise\u00f1o con KiCad, ya que al crear la PCB a partir del esquem\u00e1tico, es necesario seleccionar la huella o footprint de cada componente. Es en ese momento cuando conviene realizar la investigaci\u00f3n del mercado para averiguar si vamos a tener disponibilidad de todos los componentes en el formato que nos interesa. Puede ocurrir que tengamos ya el componente en casa o que encontremos uno que nos convenga y del que no exista la huella en las librer\u00eda de KiCad. Es por ejemplo lo que me ocurri\u00f3 con los conectores de los mandos de SNES. El conector que se utilizaba en todos los montajes de Uzebox que analic\u00e9 ten\u00eda los pines rectos y yo sin embargo acab\u00e9 comprando unos con los pines acodados. \u00c9ste : En estos casos lo que hay que hacer es dise\u00f1ar nuestra propia huella o footprint (el proceso se detalla en el punto 5 del workflow de KiCad ). En la hoja LibreOffice incluida en los assets de cada release se detalla la lista de materiales junto con los enlaces que utilic\u00e9 para comprarlos. Como puede verse la mayor\u00eda de los componentes los adquir\u00ed en LCSC que es una empresa del mismo grupo que JLCPCB. En Aliexpress sale m\u00e1s barato adquirir componentes sueltos, pero cuando se trata de pedir numerosos componentes distintos, conviene que alguien nos los env\u00ede en un solo paquete como hace LCSC. En el pedido, encargu\u00e9 100 unidades de los componentes m\u00e1s sencillos como resistencias y condensadores y de los m\u00e1s complejos como el ATmega644p, el lector de microSD o el cristal 5 \u00f3 10 unidades. El pedido completo que me permite montar 5 consolas con env\u00edo includo fue de 43,60\u20ac. Si quisiera fabricar 95 m\u00e1s s\u00f3lo habr\u00eda que pedir el ATmega644p, los conectores (SNES y Euroconector), cristal y lector de microSD. Preparar herramientas SMD \u00b6 Como comentaba anteriormente, incorpor\u00e9 al proyecto desde un principio el reto a\u00f1adido de que parte de \u00e9l se realizara con componentes SMD. Esto requer\u00eda adquirir nuevas herramientas y habilidades. La verdad es que aunque para aprender prefiero leer a ver v\u00eddeos de YouTube, en este caso YouTube resulta insuperable. Por ejemplo: Aunque todos los componentes SMD que he utilizado en la placa se pueden llegar a soldar con hilo de esta\u00f1o, soldador de punta fina, algo de paciencia y un par de t\u00e9cnicas ( una y otra ), si emprend\u00eda este camino era para recorrerlo hasta el final. As\u00ed que me hice con los siguientes elementos: Pistola de aire caliente Tubo de pasta para soldar Montaje final \u00b6 Una vez recibidos componentes y herramientas s\u00f3lo queda buscar un momento en que poderse sentar con tiempo por delante y buena iluminaci\u00f3n para disfrutar practicando nuevas habilidades. El primer paso consiste en aplicar un poco de pasta en cada uno de los pads donde va a ir un componente SMD. Como consejo, ayuda el que la placa est\u00e9 un poco caliente para que la pasta fluya y se adhiera mejor a los pads. Para esto la cama caliente de la impresora 3D puede hacer ese papel. Por ejemplo ajustada a unos 50\u00baC para no quemarnos al apoyarnos. Lo vemos m\u00e1s cerca en una porci\u00f3n de la placa. A continuaci\u00f3n y con la hoja BOM delante, vamos extrayendo los componentes de la tira en que suelen venir para colocarlos con unas pinzas finas en su lugar. La pasta, que tiene la consistencia de la pasta de dientes, ayuda a que el componente se quede en su sitio. Tras colocar el \u00faltimo componente, ya s\u00f3lo queda utilizar la pistola de aire caliente. De nuevo (como aprend\u00ed viendo este v\u00eddeo ) conviene que la PCB se precaliente un poco para minimizar estr\u00e9s t\u00e9rmico en componentes y placa. De nuevo la cama caliente de la impresora 3D puede ayudarnos, ajustada esta vez a 100\u00baC. La pistola de aire caliente la ajust\u00e9 a 240\u00baC. Se aplica haciendo peque\u00f1os c\u00edrculos alrededor de los componentes. Las micropart\u00edculas de esta\u00f1o en un momento dado se funden entre s\u00ed, pasando del original gris oscuro mate de la pasta fr\u00eda al caracter\u00edstico brillo del esta\u00f1o. En el momento de convertirse la pasta en esta\u00f1o l\u00edquido, adem\u00e1s, por la tensi\u00f3n superficial de \u00e9ste, el componente se autoalinea por si mismo si no lo estuviera ya. Puede apreciarse por ejemplo en la resistencia R9 que coloqu\u00e9 un poco m\u00e1s elevada que el resto y que como vemos a continuaci\u00f3n se aline\u00f3 con sus hermanas. En los componentes con pines m\u00faltiples y muy pr\u00f3ximos como el microcontrolador y el lector microSD, es muy f\u00e1cil que se produzcan puentes de esta\u00f1o entre varios pines. Para solucionar estos casos la t\u00e9cnica es aplicar flux en pasta y tratar de retirar algo de esta\u00f1o con la punta del soldador peinando los pines hacia el exterior. En los casos m\u00e1s dif\u00edciles aplicar malla desoldadora . S\u00f3lo queda soldar el resto de componentes de tipo THT con el tradicional soldador e hilo de esta\u00f1o. La verdad es que una vez conocida la nueva t\u00e9cnica casi apetece continuar con ella y soldar tambi\u00e9n los componentes de este tipo, pero la pasta es m\u00e1s cara que el hilo, as\u00ed que se reserva para SMD. Se recomienda no soldar todav\u00eda los LEDs o hacerlo aprovechando toda la longitud de sus terminales, ya que si vamos a imprimir la carcasa, tienen que alcanzar la parte superior de la misma. Al finalizar ya tenemos la parte de hardware resuelta. Carcasa \u00b6 En el repositorio del proyecto se incluyen ficheros de una carcasa a medida en el directorio case . Dentro encontraremos el fichero fuente en formato FreeCAD y los STLs de las tres partes de la carcasa. Antes de empezar tenemos que hacer un par de modificaciones en la placa reci\u00e9n montada para que la carcasa pueda cerrar. Son las siguientes: Cortaremos con un alicate de corte el alojamiento derecho del Euroconector (mir\u00e1ndolo de frente) para el tornillo de chasis. Abatiremos ligeramente (unos 30\u00ba) el regulador de tensi\u00f3n hasta que su altura se iguale a la del Euroconector. Si no hemos soldado los LEDs como se recomendaba en el apartado Montaje final , podemos utilizar la carcasa superior como plantilla para soldarlos a la altura correcta. Para ello apoyaremos la carcasa superior sobre una superficie plana que tenga la altura que queramos que sobresalgan los LEDs (por ejemplo unas cuantas hojas de un cuaderno), dejando que los LEDs descuelguen hasta la superficie de trabajo: Lo siguiente ser\u00e1 atornillar la PCB a la carcasa inferior con 4 tornillos de M2.5 de 4 mm de largo: Antes de cerrar la carcasa, tenemos que colocar el bot\u00f3n sobre el pulsador de RESET. Constituir\u00e1 la \"O\" del logo EDUZEBOX que se ver\u00e1 en la parte superior de la carcasa: Finalmente cerraremos la carcasa teniendo cuidado de que el bot\u00f3n que hemos colocado sobre el RESET quede enfocado al hueco que hay para \u00e9l: Flash de juegos \u00b6 S\u00f3lo queda ocuparse de la parte software. Para que el microcontrolador ATmega644 haga algo hay que instalarle (flashearle) un firmware y configurar unos cuantos par\u00e1metros que determinan su modo de funcionamiento. inicialmente viene vac\u00edo y con los par\u00e1metros en sus valores predeterminados. El ATmega644 es muy parecido al ATmega328 que est\u00e1 montado sobre las placas Arduino, pero \u00e9ste tiene un par de ventajas: En Arduino existe adem\u00e1s otro chip que implementa el est\u00e1ndar USB y conecta el microcontrolador al PC. El microcontrolador lleva preflasheado un peque\u00f1o firmware llamado bootloader que atiende a este puerto en busca de unos comandos especiales para flashear desde el PC por USB. Aqu\u00ed ni tenemos USB ni bootloader, por lo que necesitamos un mecanismo de m\u00e1s bajo nivel previsto en todos los microcontrolador de la famila AVR de Atmel. Este mecanismo se denomina ISP y b\u00e1sicamente consiste en un protocolo basado en la variedad SPI de puerto serie. En las placas que incorporan un microcontrolador programable mediante este sistema solemos encontrar un conector t\u00edpico de 2x3 o 2x5 pines. En EdUzebox es el conector J3 que se encuentra justo encima del pulsador de reset. Para poder programar el microcontrolador a trav\u00e9s de este puerto necesitamos un programador ISP. Hay muchas opciones. Podemos por ejemplo utilizar un Arduino UNO con el scketch ArduinoISP que viene entre los ejemplos del Arduino IDE. Sin embargo por alg\u00fan motivo que desconozco (a pesar de que creo que utilic\u00e9 las opciones correctas), no tuve \u00e9xito utilizando esta alternativa. Una opci\u00f3n seguramente m\u00e1s fiable es adquirir un programador ISP. De entre los muchos que hay en el mercado, seguramente uno de los m\u00e1s equilibrados es el USBtiny que adem\u00e1s es hardware libre, por lo que se encuentran clones muy econ\u00f3micos . Sin embargo cuando ya estaba a punto de adquirir uno de esos cl\u00f3nicos, descubr\u00ed que otra opci\u00f3n es utilizar la placa BusPirate de la que tengo una unidad hace tiempo. Realmente BusPirate es una navaja suiza en lo que a uso y depuraci\u00f3n de transmisiones serie se refiere que ya me ha dado muy buen servicio en unas cuantas ocasiones. Adem\u00e1s del programador o adaptador ISP que elijamos, necesitamos un programa que implemente este protocolo. Aqu\u00ed, aparte de las herramientas oficiales, en mi mano ten\u00eda dos opciones: Configurar el entorno de Arduino (Arduino IDE) para que soportara el microcontrolador ATmega644 . Utilizar la herramienta de bajo nivel avrdude (que adem\u00e1s es la que utiliza Arduino IDE por debajo). Me decant\u00e9 por lo segundo, es decir por utilizar avrdude directamente. Necesitaba conocer los par\u00e1metros m\u00e1s recomendables para programar y configurar el ATmega644. Lo segundo es importante, es decir su configuraci\u00f3n. \u00c9sta se logra mediante 3 bytes especiales llamados fusebits que se mantienen en la memoria no vol\u00e1til del microcontrolador, en los que cada bit tiene un significado distinto. Entre algunos de los ajustes est\u00e1 el tipo y la velocidad de reloj que va a utilizar el chip. Este dato es important\u00edsimo, ya que el microcontrolador dispone de un reloj interno que es el que viene configurado de f\u00e1brica y que se activa simplemente al alimentar. Pero si m\u00e1s adelante se configura uno externo y no lo tenemos conectado o sin alimentar, no habr\u00e1 manera de comunicarse con el microcontrolador ya que no arrancar\u00e1 el protocolo ISP (ni ninguna otra cosa). Uzebox utiliza un reloj externo, por lo que en un momento dado lo configuraremos para usarlo y a partir de entonces deber\u00e1 estar conectado antes de hacer nada con el chip. Como decimos, para la primera programaci\u00f3n todo esto no es problema porque de serie el chip viene con una configuraci\u00f3n segura que activa el reloj interno, por lo que podremos comunicar sin problemas. Estudiando este post del foro de Uzebox y este apartado de la wiki llegu\u00e9 a entender que ten\u00eda que flashear dos cosas: Los siguientes fusebits: LFuse: 0xFE HFuse: 0xD2 EGuse: 0xFF El bootloader que permite cargar los juegos desde la SD. En cuanto a los fusebits, para entender que ajustan exactamente ayuda mucho la siguiente calculadora de fusebits . El bootloader podemos encontrarlo en el post enlazado anteriormente . En concreto la \u00faltima versi\u00f3n en el momento de escribir este art\u00edculo era: Bootloader_0_4_5.hex A continuaci\u00f3n se detalla el proceso de flasheo desde Linux (supongo que desde Windows resultar\u00e1 muy similar). Como digo lo he realizado con un BusPirate como programador. Con un programador distinto como USBtiny s\u00f3lo hay que cambiar el par\u00e1metro -c : Para tener disponible en el sistema avrdude podemos instalarlo desde el gestor de paquetes de Linux o bien instalar el Arduino IDE y averiguar la ruta donde queda. En mi caso lo instal\u00e9 desde el gestor de paquetes. sudo apt install avrdude Cableo el BusPirate siguiendo la documentaci\u00f3n del protocolo ISP para este aparato. Pin ISP Se\u00f1al Pin BusPirate 1 MISO Negro:MISO 2 +5V Naranja:+5V 3 SCK Morado:CLK 4 MOSI Gris:MOSI 5 CS Blanco:CS 6 GND Marr\u00f3n:GND Flasheo primero el bootloader (ya que si empiezo por los fusebits temo perder la capacidad para comunicar con el chip): sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v -U flash:w:/home/edumoreno/Bootloader_0_4_5.hex Por \u00faltimo flasheo los fusebits: sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v -V -B 1 -U lfuse:w:0xFE:m -U hfuse:w:0xD2:m -U efuse:w:0xFF:m Aunque no es necesario, si queremos verificar el estado en que ha quedado el microcontrolador o testear la comunicaci\u00f3n, podemos lanzar simplemente: sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v En este momento si conectamos la consola a un televisor deber\u00edamos ver una im\u00e1gen indicando que la consola ha cobrado vida . Juegos \u00b6 Lo primero que haremos ser\u00e1 copiar a la SD juegos. El directorio de los mismos podemos encontrarlo en este enlace del wiki . All\u00ed por cada juego se nos suele proporcionar el c\u00f3digo y el binario en dos formatos: .hex : Para flasheo directo. .uze : Para carga desde SD si se ha flasheado el bootloader. Existe tambi\u00e9n un pack con todos los juegos publicados descargable desde esta p\u00e1gina .","title":"EdUzebox"},{"location":"2020-02-08-eduzebox.html#diseno-version-propia","text":"Existen multitud de clones referenciados en el propio wiki oficial. El mejor documentado naturalmente es el original, pero tiene el inconveniente de que est\u00e1 orientado al mercado americano y por tanto la salida de v\u00eddeo es NTSC. Adem\u00e1s utiliza un chip (el AD725) para mezclar la se\u00f1al RGB que sale del microcontrolador, lo que es un desperdicio porque en Europa los televisores disponen de entrada para esta se\u00f1al y es de mucha mejor calidad que la de v\u00eddeo compuesto o S-video que se expone en la Uzebox original. Tras un an\u00e1lisis de las opciones existentes decid\u00ed dise\u00f1ar mi propia placa, inspir\u00e1ndome en los esquem\u00e1ticos de los proyectos EUzebox y el del espa\u00f1ol Doragasu RgbUzebox . Imprim\u00ed ambos esquem\u00e1ticos junto al de la Uzebox original y cerr\u00e9 un dise\u00f1o propio, \u00e9ste: Aunque este tipo de proyectos suelen realizarse con componentes de tipo THT, por considerarse m\u00e1s accesibles, me apetec\u00eda adentrarme en el mundo SMD, as\u00ed que decid\u00ed utilizar muchos componentes de este tipo. La placa resulta m\u00e1s peque\u00f1a, sobre todo optando por la versi\u00f3n SMD del microcontrolador (utilic\u00e9 el formato TQFP), y francamente, una vez dado el paso tiene m\u00e1s ventajas que inconvenientes (precio de componentes, tama\u00f1o, aspecto final, retrabajo, es decir sustituci\u00f3n o recolocaci\u00f3n de componentes). El aspecto de la placa seg\u00fan un render que hace el propio KiCad es el siguiente (faltan algunos componentes de los que tuve que hacer yo la huella ya que no exist\u00eda en las librer\u00edas): Todos los archivos del proyecto KiCad pueden encontrarse en este repositorio: https://github.com/eduardofilo/eduzebox Si est\u00e1s habituado a este tipo de proyectos, estos son los ficheros que necesitas; ya sabr\u00e1s qu\u00e9 hacer con ellos. En otro caso contin\u00faa leyendo: Gerbers BOM Firmware (Bootloader) Fuse bits: LFuse: 0xFE HFuse: 0xD2 EGuse: 0xFF Carcasa: Inferior , Superior , Bot\u00f3n RESET","title":"Dise\u00f1o versi\u00f3n propia"},{"location":"2020-02-08-eduzebox.html#construccion","text":"En la construcci\u00f3n podemos distinguir las siguientes etapas: Encargar PCBs Encargar componentes Preparar herramientas SMD Montaje final Vamos a detallarlas por separado.","title":"Construcci\u00f3n"},{"location":"2020-02-08-eduzebox.html#encargar-pcbs","text":"A partir del proyecto KiCad se generan los ficheros Gerber. Pueden encontrarse en el directorio gerber del repositorio. Tambi\u00e9n se publican comprimidos en ZIP en los assets de cada release . Hoy en d\u00eda existen muchos servicios de prototipado de PCBs que encajan sobradamente en las dimensiones y calidades necesarias para la placa dise\u00f1ada. Algunos ejemplos: JLCPCB : 2\u20ac por 5 PCBs de hasta 10x10cm y 2 capas. Los gastos de env\u00edo rondan los 7\u20ac. NextPCB : $0 por 5 PCBs de hasta 10x10cm y 2 capas a cambio de poner el logo de NextPCB en la placa. Los gastos de env\u00edo son $10.80. Seeed Studio : $4.90 por 5 PCBs de hasta 10x10cm y 2 capas. PCBWay : $5 por 5 PCBs de hasta 10x10cm y 2 capas. Yo hasta ahora s\u00f3lo he utilizado JLCPCB y las placas han llegado siempre sin defectos y tardado en llegar lo acordado. El proceso de encargar las placas (las 5 del pedido m\u00ednimo) consiste \u00fanicamente en subir el fichero gerber.zip a la p\u00e1gina de pedido ya que las opciones predeterminadas que ofrece el fabricante son perfectas. S\u00f3lo queda esperar alrededor de 20 d\u00edas hasta recibir una caja dentro de la cual encontramos esto:","title":"Encargar PCBs"},{"location":"2020-02-08-eduzebox.html#encargar-componentes","text":"Antes de pensar en comprar los componentes hay que resolver la tarea de organizar la lista de materiales o BOM como se suele llamar (Bill Of Materials). En realidad gran parte de este trabajo se hace durante la fase de dise\u00f1o con KiCad, ya que al crear la PCB a partir del esquem\u00e1tico, es necesario seleccionar la huella o footprint de cada componente. Es en ese momento cuando conviene realizar la investigaci\u00f3n del mercado para averiguar si vamos a tener disponibilidad de todos los componentes en el formato que nos interesa. Puede ocurrir que tengamos ya el componente en casa o que encontremos uno que nos convenga y del que no exista la huella en las librer\u00eda de KiCad. Es por ejemplo lo que me ocurri\u00f3 con los conectores de los mandos de SNES. El conector que se utilizaba en todos los montajes de Uzebox que analic\u00e9 ten\u00eda los pines rectos y yo sin embargo acab\u00e9 comprando unos con los pines acodados. \u00c9ste : En estos casos lo que hay que hacer es dise\u00f1ar nuestra propia huella o footprint (el proceso se detalla en el punto 5 del workflow de KiCad ). En la hoja LibreOffice incluida en los assets de cada release se detalla la lista de materiales junto con los enlaces que utilic\u00e9 para comprarlos. Como puede verse la mayor\u00eda de los componentes los adquir\u00ed en LCSC que es una empresa del mismo grupo que JLCPCB. En Aliexpress sale m\u00e1s barato adquirir componentes sueltos, pero cuando se trata de pedir numerosos componentes distintos, conviene que alguien nos los env\u00ede en un solo paquete como hace LCSC. En el pedido, encargu\u00e9 100 unidades de los componentes m\u00e1s sencillos como resistencias y condensadores y de los m\u00e1s complejos como el ATmega644p, el lector de microSD o el cristal 5 \u00f3 10 unidades. El pedido completo que me permite montar 5 consolas con env\u00edo includo fue de 43,60\u20ac. Si quisiera fabricar 95 m\u00e1s s\u00f3lo habr\u00eda que pedir el ATmega644p, los conectores (SNES y Euroconector), cristal y lector de microSD.","title":"Encargar componentes"},{"location":"2020-02-08-eduzebox.html#preparar-herramientas-smd","text":"Como comentaba anteriormente, incorpor\u00e9 al proyecto desde un principio el reto a\u00f1adido de que parte de \u00e9l se realizara con componentes SMD. Esto requer\u00eda adquirir nuevas herramientas y habilidades. La verdad es que aunque para aprender prefiero leer a ver v\u00eddeos de YouTube, en este caso YouTube resulta insuperable. Por ejemplo: Aunque todos los componentes SMD que he utilizado en la placa se pueden llegar a soldar con hilo de esta\u00f1o, soldador de punta fina, algo de paciencia y un par de t\u00e9cnicas ( una y otra ), si emprend\u00eda este camino era para recorrerlo hasta el final. As\u00ed que me hice con los siguientes elementos: Pistola de aire caliente Tubo de pasta para soldar","title":"Preparar herramientas SMD"},{"location":"2020-02-08-eduzebox.html#montaje-final","text":"Una vez recibidos componentes y herramientas s\u00f3lo queda buscar un momento en que poderse sentar con tiempo por delante y buena iluminaci\u00f3n para disfrutar practicando nuevas habilidades. El primer paso consiste en aplicar un poco de pasta en cada uno de los pads donde va a ir un componente SMD. Como consejo, ayuda el que la placa est\u00e9 un poco caliente para que la pasta fluya y se adhiera mejor a los pads. Para esto la cama caliente de la impresora 3D puede hacer ese papel. Por ejemplo ajustada a unos 50\u00baC para no quemarnos al apoyarnos. Lo vemos m\u00e1s cerca en una porci\u00f3n de la placa. A continuaci\u00f3n y con la hoja BOM delante, vamos extrayendo los componentes de la tira en que suelen venir para colocarlos con unas pinzas finas en su lugar. La pasta, que tiene la consistencia de la pasta de dientes, ayuda a que el componente se quede en su sitio. Tras colocar el \u00faltimo componente, ya s\u00f3lo queda utilizar la pistola de aire caliente. De nuevo (como aprend\u00ed viendo este v\u00eddeo ) conviene que la PCB se precaliente un poco para minimizar estr\u00e9s t\u00e9rmico en componentes y placa. De nuevo la cama caliente de la impresora 3D puede ayudarnos, ajustada esta vez a 100\u00baC. La pistola de aire caliente la ajust\u00e9 a 240\u00baC. Se aplica haciendo peque\u00f1os c\u00edrculos alrededor de los componentes. Las micropart\u00edculas de esta\u00f1o en un momento dado se funden entre s\u00ed, pasando del original gris oscuro mate de la pasta fr\u00eda al caracter\u00edstico brillo del esta\u00f1o. En el momento de convertirse la pasta en esta\u00f1o l\u00edquido, adem\u00e1s, por la tensi\u00f3n superficial de \u00e9ste, el componente se autoalinea por si mismo si no lo estuviera ya. Puede apreciarse por ejemplo en la resistencia R9 que coloqu\u00e9 un poco m\u00e1s elevada que el resto y que como vemos a continuaci\u00f3n se aline\u00f3 con sus hermanas. En los componentes con pines m\u00faltiples y muy pr\u00f3ximos como el microcontrolador y el lector microSD, es muy f\u00e1cil que se produzcan puentes de esta\u00f1o entre varios pines. Para solucionar estos casos la t\u00e9cnica es aplicar flux en pasta y tratar de retirar algo de esta\u00f1o con la punta del soldador peinando los pines hacia el exterior. En los casos m\u00e1s dif\u00edciles aplicar malla desoldadora . S\u00f3lo queda soldar el resto de componentes de tipo THT con el tradicional soldador e hilo de esta\u00f1o. La verdad es que una vez conocida la nueva t\u00e9cnica casi apetece continuar con ella y soldar tambi\u00e9n los componentes de este tipo, pero la pasta es m\u00e1s cara que el hilo, as\u00ed que se reserva para SMD. Se recomienda no soldar todav\u00eda los LEDs o hacerlo aprovechando toda la longitud de sus terminales, ya que si vamos a imprimir la carcasa, tienen que alcanzar la parte superior de la misma. Al finalizar ya tenemos la parte de hardware resuelta.","title":"Montaje final"},{"location":"2020-02-08-eduzebox.html#carcasa","text":"En el repositorio del proyecto se incluyen ficheros de una carcasa a medida en el directorio case . Dentro encontraremos el fichero fuente en formato FreeCAD y los STLs de las tres partes de la carcasa. Antes de empezar tenemos que hacer un par de modificaciones en la placa reci\u00e9n montada para que la carcasa pueda cerrar. Son las siguientes: Cortaremos con un alicate de corte el alojamiento derecho del Euroconector (mir\u00e1ndolo de frente) para el tornillo de chasis. Abatiremos ligeramente (unos 30\u00ba) el regulador de tensi\u00f3n hasta que su altura se iguale a la del Euroconector. Si no hemos soldado los LEDs como se recomendaba en el apartado Montaje final , podemos utilizar la carcasa superior como plantilla para soldarlos a la altura correcta. Para ello apoyaremos la carcasa superior sobre una superficie plana que tenga la altura que queramos que sobresalgan los LEDs (por ejemplo unas cuantas hojas de un cuaderno), dejando que los LEDs descuelguen hasta la superficie de trabajo: Lo siguiente ser\u00e1 atornillar la PCB a la carcasa inferior con 4 tornillos de M2.5 de 4 mm de largo: Antes de cerrar la carcasa, tenemos que colocar el bot\u00f3n sobre el pulsador de RESET. Constituir\u00e1 la \"O\" del logo EDUZEBOX que se ver\u00e1 en la parte superior de la carcasa: Finalmente cerraremos la carcasa teniendo cuidado de que el bot\u00f3n que hemos colocado sobre el RESET quede enfocado al hueco que hay para \u00e9l:","title":"Carcasa"},{"location":"2020-02-08-eduzebox.html#flash-de-juegos","text":"S\u00f3lo queda ocuparse de la parte software. Para que el microcontrolador ATmega644 haga algo hay que instalarle (flashearle) un firmware y configurar unos cuantos par\u00e1metros que determinan su modo de funcionamiento. inicialmente viene vac\u00edo y con los par\u00e1metros en sus valores predeterminados. El ATmega644 es muy parecido al ATmega328 que est\u00e1 montado sobre las placas Arduino, pero \u00e9ste tiene un par de ventajas: En Arduino existe adem\u00e1s otro chip que implementa el est\u00e1ndar USB y conecta el microcontrolador al PC. El microcontrolador lleva preflasheado un peque\u00f1o firmware llamado bootloader que atiende a este puerto en busca de unos comandos especiales para flashear desde el PC por USB. Aqu\u00ed ni tenemos USB ni bootloader, por lo que necesitamos un mecanismo de m\u00e1s bajo nivel previsto en todos los microcontrolador de la famila AVR de Atmel. Este mecanismo se denomina ISP y b\u00e1sicamente consiste en un protocolo basado en la variedad SPI de puerto serie. En las placas que incorporan un microcontrolador programable mediante este sistema solemos encontrar un conector t\u00edpico de 2x3 o 2x5 pines. En EdUzebox es el conector J3 que se encuentra justo encima del pulsador de reset. Para poder programar el microcontrolador a trav\u00e9s de este puerto necesitamos un programador ISP. Hay muchas opciones. Podemos por ejemplo utilizar un Arduino UNO con el scketch ArduinoISP que viene entre los ejemplos del Arduino IDE. Sin embargo por alg\u00fan motivo que desconozco (a pesar de que creo que utilic\u00e9 las opciones correctas), no tuve \u00e9xito utilizando esta alternativa. Una opci\u00f3n seguramente m\u00e1s fiable es adquirir un programador ISP. De entre los muchos que hay en el mercado, seguramente uno de los m\u00e1s equilibrados es el USBtiny que adem\u00e1s es hardware libre, por lo que se encuentran clones muy econ\u00f3micos . Sin embargo cuando ya estaba a punto de adquirir uno de esos cl\u00f3nicos, descubr\u00ed que otra opci\u00f3n es utilizar la placa BusPirate de la que tengo una unidad hace tiempo. Realmente BusPirate es una navaja suiza en lo que a uso y depuraci\u00f3n de transmisiones serie se refiere que ya me ha dado muy buen servicio en unas cuantas ocasiones. Adem\u00e1s del programador o adaptador ISP que elijamos, necesitamos un programa que implemente este protocolo. Aqu\u00ed, aparte de las herramientas oficiales, en mi mano ten\u00eda dos opciones: Configurar el entorno de Arduino (Arduino IDE) para que soportara el microcontrolador ATmega644 . Utilizar la herramienta de bajo nivel avrdude (que adem\u00e1s es la que utiliza Arduino IDE por debajo). Me decant\u00e9 por lo segundo, es decir por utilizar avrdude directamente. Necesitaba conocer los par\u00e1metros m\u00e1s recomendables para programar y configurar el ATmega644. Lo segundo es importante, es decir su configuraci\u00f3n. \u00c9sta se logra mediante 3 bytes especiales llamados fusebits que se mantienen en la memoria no vol\u00e1til del microcontrolador, en los que cada bit tiene un significado distinto. Entre algunos de los ajustes est\u00e1 el tipo y la velocidad de reloj que va a utilizar el chip. Este dato es important\u00edsimo, ya que el microcontrolador dispone de un reloj interno que es el que viene configurado de f\u00e1brica y que se activa simplemente al alimentar. Pero si m\u00e1s adelante se configura uno externo y no lo tenemos conectado o sin alimentar, no habr\u00e1 manera de comunicarse con el microcontrolador ya que no arrancar\u00e1 el protocolo ISP (ni ninguna otra cosa). Uzebox utiliza un reloj externo, por lo que en un momento dado lo configuraremos para usarlo y a partir de entonces deber\u00e1 estar conectado antes de hacer nada con el chip. Como decimos, para la primera programaci\u00f3n todo esto no es problema porque de serie el chip viene con una configuraci\u00f3n segura que activa el reloj interno, por lo que podremos comunicar sin problemas. Estudiando este post del foro de Uzebox y este apartado de la wiki llegu\u00e9 a entender que ten\u00eda que flashear dos cosas: Los siguientes fusebits: LFuse: 0xFE HFuse: 0xD2 EGuse: 0xFF El bootloader que permite cargar los juegos desde la SD. En cuanto a los fusebits, para entender que ajustan exactamente ayuda mucho la siguiente calculadora de fusebits . El bootloader podemos encontrarlo en el post enlazado anteriormente . En concreto la \u00faltima versi\u00f3n en el momento de escribir este art\u00edculo era: Bootloader_0_4_5.hex A continuaci\u00f3n se detalla el proceso de flasheo desde Linux (supongo que desde Windows resultar\u00e1 muy similar). Como digo lo he realizado con un BusPirate como programador. Con un programador distinto como USBtiny s\u00f3lo hay que cambiar el par\u00e1metro -c : Para tener disponible en el sistema avrdude podemos instalarlo desde el gestor de paquetes de Linux o bien instalar el Arduino IDE y averiguar la ruta donde queda. En mi caso lo instal\u00e9 desde el gestor de paquetes. sudo apt install avrdude Cableo el BusPirate siguiendo la documentaci\u00f3n del protocolo ISP para este aparato. Pin ISP Se\u00f1al Pin BusPirate 1 MISO Negro:MISO 2 +5V Naranja:+5V 3 SCK Morado:CLK 4 MOSI Gris:MOSI 5 CS Blanco:CS 6 GND Marr\u00f3n:GND Flasheo primero el bootloader (ya que si empiezo por los fusebits temo perder la capacidad para comunicar con el chip): sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v -U flash:w:/home/edumoreno/Bootloader_0_4_5.hex Por \u00faltimo flasheo los fusebits: sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v -V -B 1 -U lfuse:w:0xFE:m -U hfuse:w:0xD2:m -U efuse:w:0xFF:m Aunque no es necesario, si queremos verificar el estado en que ha quedado el microcontrolador o testear la comunicaci\u00f3n, podemos lanzar simplemente: sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v En este momento si conectamos la consola a un televisor deber\u00edamos ver una im\u00e1gen indicando que la consola ha cobrado vida .","title":"Flash de juegos"},{"location":"2020-02-08-eduzebox.html#juegos","text":"Lo primero que haremos ser\u00e1 copiar a la SD juegos. El directorio de los mismos podemos encontrarlo en este enlace del wiki . All\u00ed por cada juego se nos suele proporcionar el c\u00f3digo y el binario en dos formatos: .hex : Para flasheo directo. .uze : Para carga desde SD si se ha flasheado el bootloader. Existe tambi\u00e9n un pack con todos los juegos publicados descargable desde esta p\u00e1gina .","title":"Juegos"},{"location":"2020-02-09-rg350_network.html","text":"Vamos a ver en este art\u00edculo un par de posibilidades para conectar la consola RG350 a internet. A trav\u00e9s de cable USB \u00b6 Cuando la RG350 se conecta por USB a trav\u00e9s del puerto USB2 al ordenador, se monta como un adaptador de red nuevo en el PC con una configuraci\u00f3n de punto a punto. Es decir, se define una nueva red entre los dos equipos, con s\u00f3lo dos IPs posibles, 10.1.1.1 para el PC y 10.1.1.2 para la RG350. As\u00ed es por ejemplo como se ve el adaptador desde la RG350: usb0 Link encap:Ethernet HWaddr 7E:5B:3B:17:C7:7A inet addr:10.1.1.2 Bcast:0.0.0.0 Mask:255.255.255.252 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:62 errors:0 dropped:12 overruns:0 frame:0 TX packets:37 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:9880 (9.6 KiB) TX bytes:7153 (6.9 KiB) Y as\u00ed la contraparte en mi m\u00e1quina Linux: enp0s29u1u2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 10.1.1.1 netmask 255.255.255.252 broadcast 10.1.1.3 inet6 fe80::fe3:ce72:8963:ca1 prefixlen 64 scopeid 0x20<link> ether 1e:fc:4d:c7:bd:b1 txqueuelen 1000 (Ethernet) RX packets 55 bytes 9539 (9.5 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 95 bytes 14091 (14.0 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 Como vemos por la netmask s\u00f3lo se dejan los dos \u00faltimos bits para definir direcciones, lo que s\u00f3lo permite como IPs posibles las terminadas en 1 y 2 (0 es la direcci\u00f3n de red y 3 la de broadcast). En lo que sigue, voy a ilustrar la situaci\u00f3n con mi infraestructura, en la que mi PC sale a internet a trav\u00e9s del adaptador wlan0 con la IP 192.168.1.40 . Sustituir estos dos datos por los que corresponda. As\u00ed las cosas, la RG350 no tiene salida a internet, ya que tenemos dos redes que no est\u00e1n interconectadas. Para conseguirla tenemos que establecer un puente entre las dos redes y configurar que se haga NAT para poder enviar los paquetes de una red a trav\u00e9s de la otra. Es decir, en realidad tenemos que convertir el PC que hay entre la RG y la salida a internet en un router. A continuaci\u00f3n se describen los pasos para hacerlo. Desgraciadamente s\u00f3lo he podido dise\u00f1ar el procedimiento para un equipo con Linux, que es lo que yo uso. Los usuarios de Windows parece que pueden conseguir el mismo efecto por medio de la utilidad NAT32 tal y como se explica en este video . Activar el IP forward en el sistema: sudo sh -c \"echo 1 > /proc/sys/net/ipv4/ip_forward\" Configurar una regla en IPables para hacer NAT de la red entre la RG y el PC (sustituir wlan0 por el adaptador de red que d\u00e9 salida a internet en el PC, en mi caso el adaptador Wifi, y la IP 192.168.1.40 por la que tenga dicho adaptador en el PC): sudo iptables -t nat -A POSTROUTING -s 10.1.1.0/2 -o wlan0 -j SNAT --to 192.168.1.40 A partir de este momento ya tendremos salida a internet, pero no se resolver\u00e1n los nombres de dominio ya que en la RG no hay definido ning\u00fan DNS. Para hacerlo crear el fichero /usr/local/etc/resolv.conf y definir dentro de \u00e9l nuestros DNS preferidos, por ejemplo los de OpenDNS : nameserver 208.67.222.222 nameserver 208.67.220.220 Los pasos 1 y 2 no son permanentes en el sistema, por lo que cuando reiniciemos se perder\u00e1n. Si queremos que se mantengan entre reinicios habr\u00e1 que escribirlos en un script que se ejecute durante el arranque (por ejemplo a\u00f1adi\u00e9ndolos en /etc/rc.local ). Ya podremos hacer cosas como \u00e9sta: RG350:/media/data/local/home # wget apuntes.eduardofilo.es --2020-02-09 02:31:03-- http://apuntes.eduardofilo.es/ Resolving apuntes.eduardofilo.es... 185.199.108.153, 185.199.109.153, 185.199.110.153, ... Connecting to apuntes.eduardofilo.es|185.199.108.153|:80... connected. HTTP request sent, awaiting response... 200 OK Length: 45544 (44K) [text/html] Saving to: 'index.html' 100%[============================================================================================================>] 45,544 130KB/s in 0.3s 2020-02-09 02:31:05 (130 KB/s) - 'index.html' saved [45544/45544] A trav\u00e9s de adaptador Wifi \u00b6 Tambi\u00e9n podemos conectar la consola a internet directamente y de forma inal\u00e1mbrica insertando un adaptador Wifi en el puerto USB1. Hay que tener en cuenta que no sirve cualquiera, ya que el sistema operativo s\u00f3lo da soporte a los adaptadores basados en los siguientes chips: Realtek RTL8188EU 150Mb/s (BASE y ROGUE) Realtek RTL8188FU 150Mb/s (s\u00f3lo ROGUE) Realtek RTL8192CU 300Mb/s (BASE y ROGUE) Por ejemplo \u00e9ste para el que necesitaremos adem\u00e1s un adaptador para USB tipo C . En el siguiente video puede verse c\u00f3mo conectar y configurar el adaptador: OPKManager \u00b6 Una vez que contemos con salida a internet en nuestra RG350, una de las cosas que podemos hacer es utilizar aplicaciones como OPKManager , que podemos ver en acci\u00f3n en el siguiente v\u00eddeo: Como explican en el v\u00eddeo, los controles X e Y est\u00e1n intercambiados respecto a lo que se ve en la leyenda inferior de la pantalla de la aplicaci\u00f3n: X : Delete Y : Copy/install","title":"RG350 Conexi\u00f3n a internet"},{"location":"2020-02-09-rg350_network.html#a-traves-de-cable-usb","text":"Cuando la RG350 se conecta por USB a trav\u00e9s del puerto USB2 al ordenador, se monta como un adaptador de red nuevo en el PC con una configuraci\u00f3n de punto a punto. Es decir, se define una nueva red entre los dos equipos, con s\u00f3lo dos IPs posibles, 10.1.1.1 para el PC y 10.1.1.2 para la RG350. As\u00ed es por ejemplo como se ve el adaptador desde la RG350: usb0 Link encap:Ethernet HWaddr 7E:5B:3B:17:C7:7A inet addr:10.1.1.2 Bcast:0.0.0.0 Mask:255.255.255.252 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:62 errors:0 dropped:12 overruns:0 frame:0 TX packets:37 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:9880 (9.6 KiB) TX bytes:7153 (6.9 KiB) Y as\u00ed la contraparte en mi m\u00e1quina Linux: enp0s29u1u2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 10.1.1.1 netmask 255.255.255.252 broadcast 10.1.1.3 inet6 fe80::fe3:ce72:8963:ca1 prefixlen 64 scopeid 0x20<link> ether 1e:fc:4d:c7:bd:b1 txqueuelen 1000 (Ethernet) RX packets 55 bytes 9539 (9.5 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 95 bytes 14091 (14.0 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 Como vemos por la netmask s\u00f3lo se dejan los dos \u00faltimos bits para definir direcciones, lo que s\u00f3lo permite como IPs posibles las terminadas en 1 y 2 (0 es la direcci\u00f3n de red y 3 la de broadcast). En lo que sigue, voy a ilustrar la situaci\u00f3n con mi infraestructura, en la que mi PC sale a internet a trav\u00e9s del adaptador wlan0 con la IP 192.168.1.40 . Sustituir estos dos datos por los que corresponda. As\u00ed las cosas, la RG350 no tiene salida a internet, ya que tenemos dos redes que no est\u00e1n interconectadas. Para conseguirla tenemos que establecer un puente entre las dos redes y configurar que se haga NAT para poder enviar los paquetes de una red a trav\u00e9s de la otra. Es decir, en realidad tenemos que convertir el PC que hay entre la RG y la salida a internet en un router. A continuaci\u00f3n se describen los pasos para hacerlo. Desgraciadamente s\u00f3lo he podido dise\u00f1ar el procedimiento para un equipo con Linux, que es lo que yo uso. Los usuarios de Windows parece que pueden conseguir el mismo efecto por medio de la utilidad NAT32 tal y como se explica en este video . Activar el IP forward en el sistema: sudo sh -c \"echo 1 > /proc/sys/net/ipv4/ip_forward\" Configurar una regla en IPables para hacer NAT de la red entre la RG y el PC (sustituir wlan0 por el adaptador de red que d\u00e9 salida a internet en el PC, en mi caso el adaptador Wifi, y la IP 192.168.1.40 por la que tenga dicho adaptador en el PC): sudo iptables -t nat -A POSTROUTING -s 10.1.1.0/2 -o wlan0 -j SNAT --to 192.168.1.40 A partir de este momento ya tendremos salida a internet, pero no se resolver\u00e1n los nombres de dominio ya que en la RG no hay definido ning\u00fan DNS. Para hacerlo crear el fichero /usr/local/etc/resolv.conf y definir dentro de \u00e9l nuestros DNS preferidos, por ejemplo los de OpenDNS : nameserver 208.67.222.222 nameserver 208.67.220.220 Los pasos 1 y 2 no son permanentes en el sistema, por lo que cuando reiniciemos se perder\u00e1n. Si queremos que se mantengan entre reinicios habr\u00e1 que escribirlos en un script que se ejecute durante el arranque (por ejemplo a\u00f1adi\u00e9ndolos en /etc/rc.local ). Ya podremos hacer cosas como \u00e9sta: RG350:/media/data/local/home # wget apuntes.eduardofilo.es --2020-02-09 02:31:03-- http://apuntes.eduardofilo.es/ Resolving apuntes.eduardofilo.es... 185.199.108.153, 185.199.109.153, 185.199.110.153, ... Connecting to apuntes.eduardofilo.es|185.199.108.153|:80... connected. HTTP request sent, awaiting response... 200 OK Length: 45544 (44K) [text/html] Saving to: 'index.html' 100%[============================================================================================================>] 45,544 130KB/s in 0.3s 2020-02-09 02:31:05 (130 KB/s) - 'index.html' saved [45544/45544]","title":"A trav\u00e9s de cable USB"},{"location":"2020-02-09-rg350_network.html#a-traves-de-adaptador-wifi","text":"Tambi\u00e9n podemos conectar la consola a internet directamente y de forma inal\u00e1mbrica insertando un adaptador Wifi en el puerto USB1. Hay que tener en cuenta que no sirve cualquiera, ya que el sistema operativo s\u00f3lo da soporte a los adaptadores basados en los siguientes chips: Realtek RTL8188EU 150Mb/s (BASE y ROGUE) Realtek RTL8188FU 150Mb/s (s\u00f3lo ROGUE) Realtek RTL8192CU 300Mb/s (BASE y ROGUE) Por ejemplo \u00e9ste para el que necesitaremos adem\u00e1s un adaptador para USB tipo C . En el siguiente video puede verse c\u00f3mo conectar y configurar el adaptador:","title":"A trav\u00e9s de adaptador Wifi"},{"location":"2020-02-09-rg350_network.html#opkmanager","text":"Una vez que contemos con salida a internet en nuestra RG350, una de las cosas que podemos hacer es utilizar aplicaciones como OPKManager , que podemos ver en acci\u00f3n en el siguiente v\u00eddeo: Como explican en el v\u00eddeo, los controles X e Y est\u00e1n intercambiados respecto a lo que se ve en la leyenda inferior de la pantalla de la aplicaci\u00f3n: X : Delete Y : Copy/install","title":"OPKManager"},{"location":"2020-02-13-rg350_emulationstation.html","text":"Advertencia Comentar antes de empezar, que EmulationStation es pesado de configurar y el resultado final con frecuencia resulta lento (sobre todo si se tiene un gran n\u00famero de emuladores y ROMs en la consola). Tambi\u00e9n es propenso a errores extra\u00f1os . Se encuentran problemas con ROMs concretas y sobre todo con los ficheros gamelist.xml que aparecen con el scraping por exigencias en el formato del mismo que no est\u00e1n claras. A menudo la \u00fanica forma de solucionarlos es por ensayo/error introduciendo las ROMs o los gamelist.xml por lotes para aislar los problemas. Algunos emuladores como la \u00faltima versi\u00f3n de FBA no son capaces de lanzar las ROMs directamente . En este art\u00edculo vamos a ver c\u00f3mo instalar y configurar el frontend EmulationStation en la RG350. Instalaci\u00f3n \u00b6 Empezamos por la instalaci\u00f3n. Desgraciadamente adem\u00e1s de copiar un OPK como habitualmente, hay que mover unos cuantos ficheros a una ruta de la tarjeta interna. A continuaci\u00f3n los detalles paso a paso (las operaciones de copiado de ficheros se muestran con DinguxCmdr por ser accesible para todo el mundo, pero naturalmente se pueden hacer por FTP o SCP): Bajar este fichero y descomprimirlo. Dentro veremos un par de directorios y un README. Nos fijamos en el directorio Internal SD Card (el resto no los utilizaremos para nada). Abrir el directorio Internal SD Card y renombrar el directorio data que all\u00ed veremos a .emulationstation (si lo hacemos en Linux, el directorio desaparecer\u00e1 a no ser que tengamos activa la opci\u00f3n de mostrar archivos ocultos). Abrir el directorio que acabamos de renombrar en el paso anterior. Dentro veremos dos directorios y algunos ficheros. Borrar el directorio gamelists (ya que contiene listados de ROMs que ten\u00eda el autor del repositorio en su consola, lo que har\u00e1 m\u00e1s lenta la carga de EmulationStation). Subir un par de niveles de directorios hasta volver a tener a la vista el directorio Internal SD Card . Copiar este directorio a la tarjeta externa de la consola (mont\u00e1ndola en el PC con un adaptador o lector de tarjetas o por FTP, SCP, ...). Desmontar la SD del PC para devolverla a la ranura externa de la consola. Abrir DinguxCmdr . Moverse por la estructura de ficheros hasta localizar a la izquierda la ruta /media/sdcard/Internal SD Card y a la derecha /media/sdcard/apps . La ruta de la derecha es donde vamos a instalar el OPK. En este caso hemos indicado la ruta donde est\u00e1n los OPKs en la tarjeta externa. Alternativamente se puede utilizar la ruta donde est\u00e1n los OPKs en la interna que es /media/data/apps , si se prefiere instalar en esta tarjeta: Seleccionar el fichero emulationstation.opk en el panel izquierdo y pulsar X . En el men\u00fa que aparece seleccionar Copy > y confirmar con A : Cambiar en el panel derecho la ruta a /media/data/local/home : Seleccionar en el panel izquierdo el directorio .emulationstation y pulsar X . En el men\u00fa que aparece seleccionar Copy > y confirmar con A : Finalmente salir de DinguxCmdr pulsando Y y seleccionando Quit : Con esto finaliza la instalaci\u00f3n de la aplicaci\u00f3n. Configuraci\u00f3n \u00b6 Para que EmulationStation reconozca los distintos sistemas de emulaci\u00f3n, deben estar correctamente registrados en uno de los ficheros de configuraci\u00f3n que hemos copiado durante la instalaci\u00f3n, concretamente el que queda en la ruta /usr/local/home/.emulationstation/es_systems.cfg . Desafortunadamente no hay ning\u00fan medio para hacer esta configuraci\u00f3n autom\u00e1ticamente. Nos va a tocar hacerlo manualmente. Estamos en una situaci\u00f3n muy similar a la de SimpleMenu . De hecho el apartado de Configuraci\u00f3n de ese art\u00edculo, conceptualmente nos sirve aqu\u00ed. S\u00f3lo cambia el formato concreto de la configuraci\u00f3n que necesita EmulationStation. Se recomienda por tanto hacer como en el caso de SimpleMenu , es decir, transferir el fichero de configuraci\u00f3n /usr/local/home/.emulationstation/es_systems.cfg al ordenador para editarlo all\u00ed con un editor que soporte directamente el formato de texto de Linux. Por ejemplo Notepad++ . En realidad podemos aprovechar la copia que todav\u00eda tendremos en la tarjeta externa que hay dentro de la carpeta .emulationstation que renombramos durante la instalaci\u00f3n. El fichero es_systems.cfg , aunque no lo indique la extensi\u00f3n, internamente tiene formato XML. Se trata por tanto de una serie de bloques anidados que comienzan y terminan con etiquetas encerradas entre los s\u00edmbolos < y > . El bloque ra\u00edz se define con la etiqueta <systemList> y dentro de \u00e9l hay un bloque <system> para cada emulador. Dentro de este bloque ya directamente se encuentran los distintos par\u00e1metros del emulador. Como vemos la filosof\u00eda es muy similar a la del fichero de configuraci\u00f3n de SimpleMenu, s\u00f3lo que en \u00e9ste \u00faltimo el formato del archivo no era XML, sino el que se utiliza habitualmente para los ficheros de configuraci\u00f3n tipo INI . De hecho si ya tenemos SimpleMenu instalado y configurado, podemos utilizar su fichero de configuraci\u00f3n como plantilla para transplantar todos los par\u00e1metros (que son pr\u00e1cticamente los mismos) a es_systems.cfg . Un bloque <system> de un sistema como Game Boy podr\u00eda ser el siguiente: <system> <name> gb </name> <fullname> Gameboy </fullname> <path> /media/sdcard/roms/Gameboy </path> <extension> .gb </extension> <command> opkrun \"/media/sdcard/apps/gambatte.opk\" %ROM% </command> <platform> gb </platform> </system> Es recomendable poner entre comillas la ruta del OPK para as\u00ed no tener que escapar caracteres especiales como los espacios y los par\u00e9ntesis. Vamos a detallar el significado de cada par\u00e1metro (la documentaci\u00f3n original puede encontrarse aqu\u00ed ): name : Nombre corto del sistema. Usado en algunas estructuras de directorios y mensajes de error. fullname : Nombre descriptivo. Es el que aparece en el frontend. Esta etiqueta es opcional. Si no est\u00e1 se usar\u00e1 name en su lugar. path : Ruta de las ROMs. extension : Extensiones de las ROMs que se listar\u00e1n dentro del sistema. Las distintas extensiones se separan por comas o espacios. command : Comando con el que se lanzar\u00e1 el emulador cuando seleccionemos una ROM. Lo normal ser\u00e1 que contenga algunos par\u00e1metros que ser\u00e1n sustituidos, como por ejemplo %ROM% que se convertir\u00e1 en la ruta de la ROM seleccionada. platform : Plataforma utilizada cuando se hace scraping. Esta etiqueta es opcional. La lista completa de los c\u00f3digos de plataforma se encuentra en la p\u00e1gina de documentaci\u00f3n de EmulationStation . Se pueden poner varias plataformas separadas por comas, por ejemplo genesis,megadrive . Una vez que devolvamos el fichero de configuraci\u00f3n es_systems.cfg a su lugar en /usr/local/home/.emulationstation , el resultado al abrir EmulationStation ser\u00e1 \u00e9ste: Como se ve en las fotos, al menos en mi sistema algunos de los textos se ven ligeramente distorsionados. Esto se puede solucionar o mejorar cambiando el tema. La instalaci\u00f3n que hemos hecho lleva 4 temas preinstalados. Desafortunadamente, el que viene por defecto y que produce esos peque\u00f1os defectos gr\u00e1ficos es el que me parecer\u00eda m\u00e1s recomendable si no fuera por este problema. Como punto de partida dejo aqu\u00ed mi fichero de configuraci\u00f3n que contiene la mayor\u00eda de los emuladores y la estructura de directorios para las ROMs que se utilizan habitualmente. es_systems.cfg Arranque \u00b6 EmulationStation aparecer\u00e1 como aplicaci\u00f3n en la secci\u00f3n Emulators de GMenu2X (no como SimpleMenu cuyo lanzador tenemos que a\u00f1adir a mano). Si queremos que EmulationStation se autoarranque en el inicio de la consola tenemos que proceder como sigue: Bajar el fichero frontend_start . Copiarlo a la ra\u00edz de la microSD externa. Montar la microSD externa en la RG350 y arrancar. La ruta del fichero que acabamos de copiar, se encuentra en /media/sdcard/frontend_start . Abrir DinguxCmdr y copiar el fichero frontend_start a la ruta /media/data/local/sbin : Hacer ejecutable el fichero instalado. Desafortunadamente DinguxCmdr no nos ayuda en este caso. Tendremos que ejecutar el siguiente comando desde consola, ya sea por SSH o utilizando una aplicaci\u00f3n de terminal como ST-SDL : # chmod +x /media/data/local/sbin/frontend_start Tal y como est\u00e1 dise\u00f1ado el script de arranque que acabamos de copiar, si salimos de EmulationStation (tecla Start y luego eligiendo Quit y Quit EmulationStation ), se abrir\u00e1 GMenu2X. Para el \u00faltimo paso merece la pena intentar conectar por SSH ya que las \u00faltimas versiones de Windows 10 ya incorporan el cliente de forma predeterminada. Para ello, estando la RG350 conectada por USB2 al ordenador, abrir una terminal o consola (buscando en el men\u00fa inicio o en Cortana cmd ) y teclear lo siguiente: ssh root@10.1.1.2 Si nos aparece lo siguiente es que hemos conseguido abrir una terminal dentro del sistema de la RG350. Desde all\u00ed podremos ejecutar directamente el comando del punto 5 de la lista anterior. edumoreno@pceduardo:~$ ssh root@10.1.1.2 _________________________ < Welcome to ROGUE resistance ! > ------------------------- |\\ <=--===\\> ------- ==0=[]=>> <=--===/> ------- |/ RG350:/media/data/local/home # chmod +x /media/data/local/sbin/frontend_start Boxart \u00b6 Una de las funcionalidades m\u00e1s interesantes de EmulationStation es su capacidad para adornar la presentaci\u00f3n del listado de ROMs con previsualizaciones de los juegos y con metainformaci\u00f3n (fecha de publicaci\u00f3n, compa\u00f1\u00eda desarrolladora, n\u00famero de jugadores, etc.). Esta funcionalidad se basa en un fichero de texto llamado gamelist.xml en formato XML (parecido al que hemos visto antes para la configuraci\u00f3n de los sistemas). El fichero puede estar en varios sitios, pero la ubicaci\u00f3n m\u00e1s conveniente es el propio directorio de las ROMs. Deber\u00e1 haber un fichero gamelist.xml por sistema, es decir por directorio de ROMs. Como siempre que hablamos de este tema, interesa utilizar una herramienta que automatice el proceso, ya que normalmente tendremos muchas ROMs por cada sistema y aparte de largo y tedioso, escribir manualmente ficheros XML supone casi con toda seguridad introducir errores en su estructura. As\u00ed pues ser\u00e1 conveniente utilizar un Scraper como los siguientes: Steven Selph's Scraper : Instrucciones Lars Muldjord's Skyscraper : Instrucciones Skraper Universal XML Scraper Vamos a detallar el uso de los dos \u00faltimos para generar los ficheros gamelist.xml y las im\u00e1genes de previsualizaci\u00f3n de los sistemas que tengamos instalados en la consola. Skraper ofrece m\u00e1s posibilidades de configuraci\u00f3n y mejor experiencia que Universal XML Scraper. Incluyo el segundo por ofrecer m\u00e1s posibilidades (por ejemplo Skraper no se ofrece compilado en versi\u00f3n 32 bit). Skraper \u00b6 Seguiremos los 8 pasos vistos en el post anterior RG350 Scraper , a\u00f1adiendo las siguientes opciones al paso 7: Apartado Lista de juegos Tipo de Lista de Juego : EmulationStation gamelist.xml Ruta absoluta de lista de juegos : %ROMROOTFOLDER%\\gamelist.xml Apartado Media : Enlace a la lista de juegos : Enlace desde el nodo '<image>' De esta forma, adem\u00e1s de las im\u00e1genes en los subdirectorios .previews dentro de los directorios de ROMs de los sistemas (compatible por tanto en este caso con las previsualizaciones de GMenu2X), aparecer\u00e1 tambi\u00e9n el fichero gamelist.xml que contiene la metainformaci\u00f3n de los juegos y el enlace a las im\u00e1genes. A partir de que se incorpore el fichero gamelist.xml en los distintos sistemas empezaremos a ver el men\u00fa de ROMs correspondiente con la metainformaci\u00f3n y las im\u00e1genes: Universal XML Scraper \u00b6 Extraer la tarjeta externa de la RG350 y montarla con un adaptador o lector en el PC. Descargar Universal XML Scraper V2 y ejecutar. Al abrirlo lo primero que se nos pregunta es por el idioma. Elegir English (US) porque en todas las pruebas que hice en Espa\u00f1ol EmulationStation se cerraba cuando seleccionaba un juego en cuya descripci\u00f3n hab\u00eda acentos: Despu\u00e9s se inicia una especia de asistente. En \u00e9l seleccionar Recalbox como Sistema Operativo: En la segunda pantalla del asistente seleccionar el tipo de previsualizaci\u00f3n que m\u00e1s nos guste y si es un mix el tipo de mix: Lo siguiente es localizar la ruta de las ROMs. Seleccionaremos Localy (imagen de PC) y acto seguido localizamos el diretorio roms de la tarjeta montada en el punto 1: Nos pregunta si estamos registrados en ScreenScraper. Si en el pasado seguimos el post anterior RG350 Scraper , ya tendremos la cuenta creada. Si no, nos permite continuar sin cuenta: Por \u00faltimo aparece una \u00faltima pantalla de confirmaci\u00f3n para inciar el scraping: Al comenzar se nos preguntar\u00e1 por el directorio de ROMs del que queremos hacer el scraping y el sistema al que pertenece: Sobre la ventana principal veremos el progreso del scraping: Tras un tiempo durante el cual se generar\u00e1n y bajar\u00e1n las previsualizaciones, cerraremos el programa. En ese momento veremos que junto a las ROMs del sistema seleccionado se habr\u00e1n creado dos cosas: Un directorio llamado downloaded_images que contendr\u00e1 las im\u00e1genes. Un fichero llamado gamelist.xml con la metainformaci\u00f3n y las rutas de las im\u00e1genes asociadas a cada ROM. Podr\u00edamos pensar que renombrando el directorio downloaded_images por .previews conseguiremos que las previsualizaciones sean compatibles con GMenu2X, pero no es as\u00ed porque los nombres de las im\u00e1genes incluyen el sufijo -image antes de la extensi\u00f3n. Ya podemos extraer la microSD del PC y devolverla a la RG350. Ya deber\u00edamos poder ver las previsualizaciones y la metainformaci\u00f3n de los juegos scrapeados: Temas \u00b6 Por \u00faltimo vamos a hacer un muestrario de los temas que trae precargados la versi\u00f3n de EmulationStation que acabamos de instalar. El tema se cambia dentro de la secci\u00f3n UI Settings del Main Menu que aparece al pulsar Start : Es la \u00faltima opci\u00f3n de esa pantalla: Los temas disponibles son estos cuatro, aunque los dos \u00faltimos parecen ser el mismo: Vamos a ver ejemplos de cada uno: PixelPerfect \u00b6 Pixel \u00b6 Simple y SimpleGCW \u00b6 Personalizaci\u00f3n de los Temas \u00b6 Los temas se encuentran instalados en la ruta /media/data/local/home/.emulationstation/themes . Dentro de ella encontramos un directorio por cada tema disponible: RG350:/media/data/local/home/.emulationstation/themes # ls -l drwx------ 69 root root 4096 Feb 10 21:38 _PixelPerfect (Default) drwx------ 64 root root 4096 Feb 10 21:38 pixel drwx------ 62 root root 4096 Feb 10 21:38 simple drwx------ 64 root root 4096 Feb 10 21:38 simplegcw El nombre del directorio ser\u00e1 el que luego aparezca en el listado de temas en los ajustes de ES: Dentro de cada uno de los temas encontramos los siguientes elementos: Fichero simple.xml : Configuraci\u00f3n general del tema. El nombre del fichero puede ser cualquiera pero hay que tener en cuenta que se hace referencia a \u00e9l dentro de la configuraci\u00f3n particular de cada sistema que luego veremos, por lo que si ya hemos empezado a adaptar los mismos no podremos cambiar su nombre a no ser que lo reemplacemos en todos ellos. Directorio art con recursos generales del tema como tipos de letra e im\u00e1genes. En realidad este directorio es m\u00e1s conveniente que necesario, es decir, los recursos que contienen est\u00e1n enlazados dentro del fichero simple.xml , por lo que podr\u00edan estar en otro lugar. Directorios de cada sistema: Por cada sistema que queramos mostrar en ES tendremos un directorio con su nombre. Los nombres de los sistemas pueden ser cualquiera que hayamos utilizado en el par\u00e1metro name del fichero es_systems.cfg , aunque se recomienda utilizar los que aparecen en el apartado Recommended Theme Names que hay en esta p\u00e1gina : En el siguiente listado podemos ver todos estos elementos (se ocultan la mayor\u00eda de los sistemas para que no quede muy voluminoso): RG350:/media/data/local/home/.emulationstation/themes/simple # ls -l drwx------ 3 root root 4096 Feb 10 21:38 3do drwx------ 3 root root 4096 Feb 10 21:38 amiga drwx------ 3 root root 4096 Feb 10 21:38 amstradcpc drwx------ 3 root root 4096 Feb 10 21:38 apple2 drwx------ 2 root root 4096 Feb 10 21:38 art drwx------ 3 root root 4096 Feb 10 21:38 atari2600 drwx------ 3 root root 4096 Feb 10 21:38 atari5200 ... drwx------ 3 root root 4096 Feb 10 21:38 segacd drwx------ 3 root root 4096 Feb 10 21:38 sfc -rw-r--r-- 1 root root 2785 Feb 10 21:38 simple.xml drwx------ 3 root root 4096 Feb 10 21:38 snes drwx------ 3 root root 4096 Feb 10 21:38 vectrex ... drwx------ 3 root root 4096 Feb 10 21:38 zxspectrum Si por ejemplo queremos a\u00f1adir un sistema nuevo, tan s\u00f3lo tendremos que crear un nuevo directorio con un fichero theme.xml y resto de ficheros a los que luego se haga referencia en \u00e9l. Por ejemplo este es el contenido del directorio correspondiente a Game Boy en el tema Simple : RG350:/media/data/local/home/.emulationstation/themes/simple/gb # find . . ./art ./art/gb_art.png ./art/gb.svg ./art/gb_art_blur.jpg ./theme.xml Como vemos junto al fichero XML hay un directorio art que contiene tres im\u00e1genes. Al igual que con los recursos generales del tema, este directorio se utiliza por organizaci\u00f3n, no por necesidad. Los recursos que contienen est\u00e1n enlazados dentro de theme.xml , por lo que podr\u00edan estar en otro lugar. El fichero theme.xml puede contener mucha informaci\u00f3n. Lo mejor es clonar todo el directorio de otro sistema y adaptar las im\u00e1genes y las referencias a \u00e9stas dentro de theme.xml .","title":"RG350 EmulationStation"},{"location":"2020-02-13-rg350_emulationstation.html#instalacion","text":"Empezamos por la instalaci\u00f3n. Desgraciadamente adem\u00e1s de copiar un OPK como habitualmente, hay que mover unos cuantos ficheros a una ruta de la tarjeta interna. A continuaci\u00f3n los detalles paso a paso (las operaciones de copiado de ficheros se muestran con DinguxCmdr por ser accesible para todo el mundo, pero naturalmente se pueden hacer por FTP o SCP): Bajar este fichero y descomprimirlo. Dentro veremos un par de directorios y un README. Nos fijamos en el directorio Internal SD Card (el resto no los utilizaremos para nada). Abrir el directorio Internal SD Card y renombrar el directorio data que all\u00ed veremos a .emulationstation (si lo hacemos en Linux, el directorio desaparecer\u00e1 a no ser que tengamos activa la opci\u00f3n de mostrar archivos ocultos). Abrir el directorio que acabamos de renombrar en el paso anterior. Dentro veremos dos directorios y algunos ficheros. Borrar el directorio gamelists (ya que contiene listados de ROMs que ten\u00eda el autor del repositorio en su consola, lo que har\u00e1 m\u00e1s lenta la carga de EmulationStation). Subir un par de niveles de directorios hasta volver a tener a la vista el directorio Internal SD Card . Copiar este directorio a la tarjeta externa de la consola (mont\u00e1ndola en el PC con un adaptador o lector de tarjetas o por FTP, SCP, ...). Desmontar la SD del PC para devolverla a la ranura externa de la consola. Abrir DinguxCmdr . Moverse por la estructura de ficheros hasta localizar a la izquierda la ruta /media/sdcard/Internal SD Card y a la derecha /media/sdcard/apps . La ruta de la derecha es donde vamos a instalar el OPK. En este caso hemos indicado la ruta donde est\u00e1n los OPKs en la tarjeta externa. Alternativamente se puede utilizar la ruta donde est\u00e1n los OPKs en la interna que es /media/data/apps , si se prefiere instalar en esta tarjeta: Seleccionar el fichero emulationstation.opk en el panel izquierdo y pulsar X . En el men\u00fa que aparece seleccionar Copy > y confirmar con A : Cambiar en el panel derecho la ruta a /media/data/local/home : Seleccionar en el panel izquierdo el directorio .emulationstation y pulsar X . En el men\u00fa que aparece seleccionar Copy > y confirmar con A : Finalmente salir de DinguxCmdr pulsando Y y seleccionando Quit : Con esto finaliza la instalaci\u00f3n de la aplicaci\u00f3n.","title":"Instalaci\u00f3n"},{"location":"2020-02-13-rg350_emulationstation.html#configuracion","text":"Para que EmulationStation reconozca los distintos sistemas de emulaci\u00f3n, deben estar correctamente registrados en uno de los ficheros de configuraci\u00f3n que hemos copiado durante la instalaci\u00f3n, concretamente el que queda en la ruta /usr/local/home/.emulationstation/es_systems.cfg . Desafortunadamente no hay ning\u00fan medio para hacer esta configuraci\u00f3n autom\u00e1ticamente. Nos va a tocar hacerlo manualmente. Estamos en una situaci\u00f3n muy similar a la de SimpleMenu . De hecho el apartado de Configuraci\u00f3n de ese art\u00edculo, conceptualmente nos sirve aqu\u00ed. S\u00f3lo cambia el formato concreto de la configuraci\u00f3n que necesita EmulationStation. Se recomienda por tanto hacer como en el caso de SimpleMenu , es decir, transferir el fichero de configuraci\u00f3n /usr/local/home/.emulationstation/es_systems.cfg al ordenador para editarlo all\u00ed con un editor que soporte directamente el formato de texto de Linux. Por ejemplo Notepad++ . En realidad podemos aprovechar la copia que todav\u00eda tendremos en la tarjeta externa que hay dentro de la carpeta .emulationstation que renombramos durante la instalaci\u00f3n. El fichero es_systems.cfg , aunque no lo indique la extensi\u00f3n, internamente tiene formato XML. Se trata por tanto de una serie de bloques anidados que comienzan y terminan con etiquetas encerradas entre los s\u00edmbolos < y > . El bloque ra\u00edz se define con la etiqueta <systemList> y dentro de \u00e9l hay un bloque <system> para cada emulador. Dentro de este bloque ya directamente se encuentran los distintos par\u00e1metros del emulador. Como vemos la filosof\u00eda es muy similar a la del fichero de configuraci\u00f3n de SimpleMenu, s\u00f3lo que en \u00e9ste \u00faltimo el formato del archivo no era XML, sino el que se utiliza habitualmente para los ficheros de configuraci\u00f3n tipo INI . De hecho si ya tenemos SimpleMenu instalado y configurado, podemos utilizar su fichero de configuraci\u00f3n como plantilla para transplantar todos los par\u00e1metros (que son pr\u00e1cticamente los mismos) a es_systems.cfg . Un bloque <system> de un sistema como Game Boy podr\u00eda ser el siguiente: <system> <name> gb </name> <fullname> Gameboy </fullname> <path> /media/sdcard/roms/Gameboy </path> <extension> .gb </extension> <command> opkrun \"/media/sdcard/apps/gambatte.opk\" %ROM% </command> <platform> gb </platform> </system> Es recomendable poner entre comillas la ruta del OPK para as\u00ed no tener que escapar caracteres especiales como los espacios y los par\u00e9ntesis. Vamos a detallar el significado de cada par\u00e1metro (la documentaci\u00f3n original puede encontrarse aqu\u00ed ): name : Nombre corto del sistema. Usado en algunas estructuras de directorios y mensajes de error. fullname : Nombre descriptivo. Es el que aparece en el frontend. Esta etiqueta es opcional. Si no est\u00e1 se usar\u00e1 name en su lugar. path : Ruta de las ROMs. extension : Extensiones de las ROMs que se listar\u00e1n dentro del sistema. Las distintas extensiones se separan por comas o espacios. command : Comando con el que se lanzar\u00e1 el emulador cuando seleccionemos una ROM. Lo normal ser\u00e1 que contenga algunos par\u00e1metros que ser\u00e1n sustituidos, como por ejemplo %ROM% que se convertir\u00e1 en la ruta de la ROM seleccionada. platform : Plataforma utilizada cuando se hace scraping. Esta etiqueta es opcional. La lista completa de los c\u00f3digos de plataforma se encuentra en la p\u00e1gina de documentaci\u00f3n de EmulationStation . Se pueden poner varias plataformas separadas por comas, por ejemplo genesis,megadrive . Una vez que devolvamos el fichero de configuraci\u00f3n es_systems.cfg a su lugar en /usr/local/home/.emulationstation , el resultado al abrir EmulationStation ser\u00e1 \u00e9ste: Como se ve en las fotos, al menos en mi sistema algunos de los textos se ven ligeramente distorsionados. Esto se puede solucionar o mejorar cambiando el tema. La instalaci\u00f3n que hemos hecho lleva 4 temas preinstalados. Desafortunadamente, el que viene por defecto y que produce esos peque\u00f1os defectos gr\u00e1ficos es el que me parecer\u00eda m\u00e1s recomendable si no fuera por este problema. Como punto de partida dejo aqu\u00ed mi fichero de configuraci\u00f3n que contiene la mayor\u00eda de los emuladores y la estructura de directorios para las ROMs que se utilizan habitualmente. es_systems.cfg","title":"Configuraci\u00f3n"},{"location":"2020-02-13-rg350_emulationstation.html#arranque","text":"EmulationStation aparecer\u00e1 como aplicaci\u00f3n en la secci\u00f3n Emulators de GMenu2X (no como SimpleMenu cuyo lanzador tenemos que a\u00f1adir a mano). Si queremos que EmulationStation se autoarranque en el inicio de la consola tenemos que proceder como sigue: Bajar el fichero frontend_start . Copiarlo a la ra\u00edz de la microSD externa. Montar la microSD externa en la RG350 y arrancar. La ruta del fichero que acabamos de copiar, se encuentra en /media/sdcard/frontend_start . Abrir DinguxCmdr y copiar el fichero frontend_start a la ruta /media/data/local/sbin : Hacer ejecutable el fichero instalado. Desafortunadamente DinguxCmdr no nos ayuda en este caso. Tendremos que ejecutar el siguiente comando desde consola, ya sea por SSH o utilizando una aplicaci\u00f3n de terminal como ST-SDL : # chmod +x /media/data/local/sbin/frontend_start Tal y como est\u00e1 dise\u00f1ado el script de arranque que acabamos de copiar, si salimos de EmulationStation (tecla Start y luego eligiendo Quit y Quit EmulationStation ), se abrir\u00e1 GMenu2X. Para el \u00faltimo paso merece la pena intentar conectar por SSH ya que las \u00faltimas versiones de Windows 10 ya incorporan el cliente de forma predeterminada. Para ello, estando la RG350 conectada por USB2 al ordenador, abrir una terminal o consola (buscando en el men\u00fa inicio o en Cortana cmd ) y teclear lo siguiente: ssh root@10.1.1.2 Si nos aparece lo siguiente es que hemos conseguido abrir una terminal dentro del sistema de la RG350. Desde all\u00ed podremos ejecutar directamente el comando del punto 5 de la lista anterior. edumoreno@pceduardo:~$ ssh root@10.1.1.2 _________________________ < Welcome to ROGUE resistance ! > ------------------------- |\\ <=--===\\> ------- ==0=[]=>> <=--===/> ------- |/ RG350:/media/data/local/home # chmod +x /media/data/local/sbin/frontend_start","title":"Arranque"},{"location":"2020-02-13-rg350_emulationstation.html#boxart","text":"Una de las funcionalidades m\u00e1s interesantes de EmulationStation es su capacidad para adornar la presentaci\u00f3n del listado de ROMs con previsualizaciones de los juegos y con metainformaci\u00f3n (fecha de publicaci\u00f3n, compa\u00f1\u00eda desarrolladora, n\u00famero de jugadores, etc.). Esta funcionalidad se basa en un fichero de texto llamado gamelist.xml en formato XML (parecido al que hemos visto antes para la configuraci\u00f3n de los sistemas). El fichero puede estar en varios sitios, pero la ubicaci\u00f3n m\u00e1s conveniente es el propio directorio de las ROMs. Deber\u00e1 haber un fichero gamelist.xml por sistema, es decir por directorio de ROMs. Como siempre que hablamos de este tema, interesa utilizar una herramienta que automatice el proceso, ya que normalmente tendremos muchas ROMs por cada sistema y aparte de largo y tedioso, escribir manualmente ficheros XML supone casi con toda seguridad introducir errores en su estructura. As\u00ed pues ser\u00e1 conveniente utilizar un Scraper como los siguientes: Steven Selph's Scraper : Instrucciones Lars Muldjord's Skyscraper : Instrucciones Skraper Universal XML Scraper Vamos a detallar el uso de los dos \u00faltimos para generar los ficheros gamelist.xml y las im\u00e1genes de previsualizaci\u00f3n de los sistemas que tengamos instalados en la consola. Skraper ofrece m\u00e1s posibilidades de configuraci\u00f3n y mejor experiencia que Universal XML Scraper. Incluyo el segundo por ofrecer m\u00e1s posibilidades (por ejemplo Skraper no se ofrece compilado en versi\u00f3n 32 bit).","title":"Boxart"},{"location":"2020-02-13-rg350_emulationstation.html#skraper","text":"Seguiremos los 8 pasos vistos en el post anterior RG350 Scraper , a\u00f1adiendo las siguientes opciones al paso 7: Apartado Lista de juegos Tipo de Lista de Juego : EmulationStation gamelist.xml Ruta absoluta de lista de juegos : %ROMROOTFOLDER%\\gamelist.xml Apartado Media : Enlace a la lista de juegos : Enlace desde el nodo '<image>' De esta forma, adem\u00e1s de las im\u00e1genes en los subdirectorios .previews dentro de los directorios de ROMs de los sistemas (compatible por tanto en este caso con las previsualizaciones de GMenu2X), aparecer\u00e1 tambi\u00e9n el fichero gamelist.xml que contiene la metainformaci\u00f3n de los juegos y el enlace a las im\u00e1genes. A partir de que se incorpore el fichero gamelist.xml en los distintos sistemas empezaremos a ver el men\u00fa de ROMs correspondiente con la metainformaci\u00f3n y las im\u00e1genes:","title":"Skraper"},{"location":"2020-02-13-rg350_emulationstation.html#universal-xml-scraper","text":"Extraer la tarjeta externa de la RG350 y montarla con un adaptador o lector en el PC. Descargar Universal XML Scraper V2 y ejecutar. Al abrirlo lo primero que se nos pregunta es por el idioma. Elegir English (US) porque en todas las pruebas que hice en Espa\u00f1ol EmulationStation se cerraba cuando seleccionaba un juego en cuya descripci\u00f3n hab\u00eda acentos: Despu\u00e9s se inicia una especia de asistente. En \u00e9l seleccionar Recalbox como Sistema Operativo: En la segunda pantalla del asistente seleccionar el tipo de previsualizaci\u00f3n que m\u00e1s nos guste y si es un mix el tipo de mix: Lo siguiente es localizar la ruta de las ROMs. Seleccionaremos Localy (imagen de PC) y acto seguido localizamos el diretorio roms de la tarjeta montada en el punto 1: Nos pregunta si estamos registrados en ScreenScraper. Si en el pasado seguimos el post anterior RG350 Scraper , ya tendremos la cuenta creada. Si no, nos permite continuar sin cuenta: Por \u00faltimo aparece una \u00faltima pantalla de confirmaci\u00f3n para inciar el scraping: Al comenzar se nos preguntar\u00e1 por el directorio de ROMs del que queremos hacer el scraping y el sistema al que pertenece: Sobre la ventana principal veremos el progreso del scraping: Tras un tiempo durante el cual se generar\u00e1n y bajar\u00e1n las previsualizaciones, cerraremos el programa. En ese momento veremos que junto a las ROMs del sistema seleccionado se habr\u00e1n creado dos cosas: Un directorio llamado downloaded_images que contendr\u00e1 las im\u00e1genes. Un fichero llamado gamelist.xml con la metainformaci\u00f3n y las rutas de las im\u00e1genes asociadas a cada ROM. Podr\u00edamos pensar que renombrando el directorio downloaded_images por .previews conseguiremos que las previsualizaciones sean compatibles con GMenu2X, pero no es as\u00ed porque los nombres de las im\u00e1genes incluyen el sufijo -image antes de la extensi\u00f3n. Ya podemos extraer la microSD del PC y devolverla a la RG350. Ya deber\u00edamos poder ver las previsualizaciones y la metainformaci\u00f3n de los juegos scrapeados:","title":"Universal XML Scraper"},{"location":"2020-02-13-rg350_emulationstation.html#temas","text":"Por \u00faltimo vamos a hacer un muestrario de los temas que trae precargados la versi\u00f3n de EmulationStation que acabamos de instalar. El tema se cambia dentro de la secci\u00f3n UI Settings del Main Menu que aparece al pulsar Start : Es la \u00faltima opci\u00f3n de esa pantalla: Los temas disponibles son estos cuatro, aunque los dos \u00faltimos parecen ser el mismo: Vamos a ver ejemplos de cada uno:","title":"Temas"},{"location":"2020-02-13-rg350_emulationstation.html#pixelperfect","text":"","title":"PixelPerfect"},{"location":"2020-02-13-rg350_emulationstation.html#pixel","text":"","title":"Pixel"},{"location":"2020-02-13-rg350_emulationstation.html#simple-y-simplegcw","text":"","title":"Simple y SimpleGCW"},{"location":"2020-02-13-rg350_emulationstation.html#personalizacion-de-los-temas","text":"Los temas se encuentran instalados en la ruta /media/data/local/home/.emulationstation/themes . Dentro de ella encontramos un directorio por cada tema disponible: RG350:/media/data/local/home/.emulationstation/themes # ls -l drwx------ 69 root root 4096 Feb 10 21:38 _PixelPerfect (Default) drwx------ 64 root root 4096 Feb 10 21:38 pixel drwx------ 62 root root 4096 Feb 10 21:38 simple drwx------ 64 root root 4096 Feb 10 21:38 simplegcw El nombre del directorio ser\u00e1 el que luego aparezca en el listado de temas en los ajustes de ES: Dentro de cada uno de los temas encontramos los siguientes elementos: Fichero simple.xml : Configuraci\u00f3n general del tema. El nombre del fichero puede ser cualquiera pero hay que tener en cuenta que se hace referencia a \u00e9l dentro de la configuraci\u00f3n particular de cada sistema que luego veremos, por lo que si ya hemos empezado a adaptar los mismos no podremos cambiar su nombre a no ser que lo reemplacemos en todos ellos. Directorio art con recursos generales del tema como tipos de letra e im\u00e1genes. En realidad este directorio es m\u00e1s conveniente que necesario, es decir, los recursos que contienen est\u00e1n enlazados dentro del fichero simple.xml , por lo que podr\u00edan estar en otro lugar. Directorios de cada sistema: Por cada sistema que queramos mostrar en ES tendremos un directorio con su nombre. Los nombres de los sistemas pueden ser cualquiera que hayamos utilizado en el par\u00e1metro name del fichero es_systems.cfg , aunque se recomienda utilizar los que aparecen en el apartado Recommended Theme Names que hay en esta p\u00e1gina : En el siguiente listado podemos ver todos estos elementos (se ocultan la mayor\u00eda de los sistemas para que no quede muy voluminoso): RG350:/media/data/local/home/.emulationstation/themes/simple # ls -l drwx------ 3 root root 4096 Feb 10 21:38 3do drwx------ 3 root root 4096 Feb 10 21:38 amiga drwx------ 3 root root 4096 Feb 10 21:38 amstradcpc drwx------ 3 root root 4096 Feb 10 21:38 apple2 drwx------ 2 root root 4096 Feb 10 21:38 art drwx------ 3 root root 4096 Feb 10 21:38 atari2600 drwx------ 3 root root 4096 Feb 10 21:38 atari5200 ... drwx------ 3 root root 4096 Feb 10 21:38 segacd drwx------ 3 root root 4096 Feb 10 21:38 sfc -rw-r--r-- 1 root root 2785 Feb 10 21:38 simple.xml drwx------ 3 root root 4096 Feb 10 21:38 snes drwx------ 3 root root 4096 Feb 10 21:38 vectrex ... drwx------ 3 root root 4096 Feb 10 21:38 zxspectrum Si por ejemplo queremos a\u00f1adir un sistema nuevo, tan s\u00f3lo tendremos que crear un nuevo directorio con un fichero theme.xml y resto de ficheros a los que luego se haga referencia en \u00e9l. Por ejemplo este es el contenido del directorio correspondiente a Game Boy en el tema Simple : RG350:/media/data/local/home/.emulationstation/themes/simple/gb # find . . ./art ./art/gb_art.png ./art/gb.svg ./art/gb_art_blur.jpg ./theme.xml Como vemos junto al fichero XML hay un directorio art que contiene tres im\u00e1genes. Al igual que con los recursos generales del tema, este directorio se utiliza por organizaci\u00f3n, no por necesidad. Los recursos que contienen est\u00e1n enlazados dentro de theme.xml , por lo que podr\u00edan estar en otro lugar. El fichero theme.xml puede contener mucha informaci\u00f3n. Lo mejor es clonar todo el directorio de otro sistema y adaptar las im\u00e1genes y las referencias a \u00e9stas dentro de theme.xml .","title":"Personalizaci\u00f3n de los Temas"},{"location":"2020-02-16-panelizar_pcb.html","text":"\u00daltimamente uso mucho el servicio de fabricaci\u00f3n de PCBs de JLCPCB . En la modalidad de prototipado, fabricar 5 placas de hasta 10x10cm cuesta 2\u20ac (m\u00e1s unos 7\u20ac de env\u00edo, pero suelo hacer pedidos m\u00faltiples, aunque en ese caso a partir de la segunda placa el coste es de 4\u20ac). Como los proyectos para los que tengo capacidad no pueden ser muy grandes, normalmente las placas que dise\u00f1o quedan bastante por debajo de esas dimensiones. En esos casos, para aprovechar mejor el pedido se puede panelizar la PCB, es decir meter varias unidades de la misma en el fichero Gerber. Tambi\u00e9n se puede panelizar desde el mismo sitio, pero en ese caso ya no aplica la oferta de 2\u20ac. Preparar los Gerbers \u00b6 Los Gerber deben utilizar las extensiones de tipo Protel. En las \u00faltimas versiones de KiCad se utiliza por defecto la misma extensi\u00f3n en todos los ficheros ( .GBR ) y el tipo de fichero/capa se codifica en el nombre. En estos casos para obtener las extensiones Protel podemos hacer dos cosas: Convertir las extensiones manualmente. Por ejemplo en este enlace podemos encontrar la correspondencia (ojo porque la correspondencia de la extensi\u00f3n .GTO es con la capa F.SILKS y no con la F.MASK como indica la tabla). Marcar la opci\u00f3n Use Protel filename extensions en el cuadro de di\u00e1logo de trazado de los Gerber. Tambi\u00e9n la opci\u00f3n PTH and NPTH in single file del cuadro de di\u00e1logo de generaci\u00f3n de los drill files. Panelizaci\u00f3n \u00b6 Una vez que tengamos los ficheros Gerber con las extensiones Protel comprimidos en un ZIP, utilizaremos una utilidad gratuita para disponer varias copias de la PCB dentro del panel de 10x10cm que JLCPCB nos permite. Vamos a ver c\u00f3mo hacerlo paso a paso. Bajar la \u00faltima release de las GerberTools desde aqu\u00ed . Descomprimir el ZIP y abrir el ejecutable GerberPanelizer.exe que hay dentro del directorio Panelizer . Seleccionar New del men\u00fa File . Por defecto nos aparecer\u00e1 un panel de 10x10cm que es lo que necesitamos. Si por alg\u00fan motivo no ocurriera as\u00ed o nos interesaran otras dimensiones, podemos cambiarlas en el men\u00fa Panel Properties . Arrastrar el archivo ZIP que contiene los Gerber al panel. Aparecer\u00e1 la silueta de la PCB en pantalla. Puede ocurrir que s\u00f3lo veamos un aspa con forma de signo + . Suele ocurrir porque al dise\u00f1ar la PCB en KiCad normalmente se sit\u00faa en el centro del \u00e1rea de dibujo, y el punto en el que arrastramos el ZIP se asimila a la esquina superior izquierda de dicha \u00e1rea de dibujo. Para alcanzar a ver la silueta de la PCB y poderla arrastrar hasta el interior del panel, utilizar el men\u00fa View > Scale 1:1 . Tambi\u00e9n podemos probar a dar valores negativos a los par\u00e1metros X e Y que vemos en el panel derecho de la aplicaci\u00f3n: Una vez recolocada la PCB dentro del panel, a\u00f1adiremos nuevas instancias de la misma haciendo click sobre la instancia inicial en el listado de la derecha. Como alternativa podemos hacer click con el bot\u00f3n derecho del rat\u00f3n sobre el panel y seleccionar la entrada Add Instance del men\u00fa contextual: A\u00f1adiremos todas las instancias de la placa que quepan en el panel. En ocasiones nos puede interesar girar una de las instancias. Para ello utilizaremos los controles que hay en el panel situado bajo el listado de instancias. Al girar puede ocurrir que la instancia desaparezca de la visualizaci\u00f3n por el problema descrito en el punto 4. De nuevo jugar con las opciones de zoom o dar valor manualmente a los campos X e Y : Llega el momento de a\u00f1adir las pesta\u00f1as que unir\u00e1n las distintas instancias para constituir un panel. Para ello haremos click sobre el punto donde deseemos colocar una pesta\u00f1a de uni\u00f3n y seleccionaremos Add Breaktab del men\u00fa contextual. Advertir que para que la pesta\u00f1a sea operativa, las instancias de la PCB deben estar separadas una distancia m\u00ednima. El programa nos advertir\u00e1 sobre ello marcando la pesta\u00f1a en rojo si sucede este problema: A\u00f1adiremos por lo menos 2 pesta\u00f1as por lado adyacente: S\u00f3lo queda exportar el panel resultante mediante el comando de men\u00fa File > Export Merged Gerbers . Tras terminar el progreso que se muestra sobre una peque\u00f1a ventana, obtendremos dos vistas de ambas caras del panel y los Gerbers resultantes en el directorio que hayamos seleccionado donde guardar el resultado de la exportaci\u00f3n. Aqu\u00ed podemos ver el proceso en video: Advertencia Debo mencionar que he observado que la utilidad Panelizer introduce un problema en el panel resultante. Por alg\u00fan motivo pierde el detalle de los agujeros alargados y los convierte en dos agujeros hechos al comienzo y al final. Prestar atenci\u00f3n por tanto a si nuestras huellas incluyen agujeros de este tipo. Aclaraci\u00f3n A la vista de este art\u00edculo podr\u00eda pensarse que podemos aprovechar el sistema de panelizaci\u00f3n para encargar varias PCBs en un mismo pedido sin m\u00e1s que a\u00f1adir instancias de distintas PCBs al panel. En teor\u00eda hay que declarar cu\u00e1ntas PCBs distintas hay en un panel panelizado por el usuario en el par\u00e1metro Different Design a la hora de hacer el pedido. Desconozco si JLCPCB detectar\u00e1 y no admitir\u00e1 este tipo de pedidos, aunque sospecho que as\u00ed es.","title":"Panelizar PCB"},{"location":"2020-02-16-panelizar_pcb.html#preparar-los-gerbers","text":"Los Gerber deben utilizar las extensiones de tipo Protel. En las \u00faltimas versiones de KiCad se utiliza por defecto la misma extensi\u00f3n en todos los ficheros ( .GBR ) y el tipo de fichero/capa se codifica en el nombre. En estos casos para obtener las extensiones Protel podemos hacer dos cosas: Convertir las extensiones manualmente. Por ejemplo en este enlace podemos encontrar la correspondencia (ojo porque la correspondencia de la extensi\u00f3n .GTO es con la capa F.SILKS y no con la F.MASK como indica la tabla). Marcar la opci\u00f3n Use Protel filename extensions en el cuadro de di\u00e1logo de trazado de los Gerber. Tambi\u00e9n la opci\u00f3n PTH and NPTH in single file del cuadro de di\u00e1logo de generaci\u00f3n de los drill files.","title":"Preparar los Gerbers"},{"location":"2020-02-16-panelizar_pcb.html#panelizacion","text":"Una vez que tengamos los ficheros Gerber con las extensiones Protel comprimidos en un ZIP, utilizaremos una utilidad gratuita para disponer varias copias de la PCB dentro del panel de 10x10cm que JLCPCB nos permite. Vamos a ver c\u00f3mo hacerlo paso a paso. Bajar la \u00faltima release de las GerberTools desde aqu\u00ed . Descomprimir el ZIP y abrir el ejecutable GerberPanelizer.exe que hay dentro del directorio Panelizer . Seleccionar New del men\u00fa File . Por defecto nos aparecer\u00e1 un panel de 10x10cm que es lo que necesitamos. Si por alg\u00fan motivo no ocurriera as\u00ed o nos interesaran otras dimensiones, podemos cambiarlas en el men\u00fa Panel Properties . Arrastrar el archivo ZIP que contiene los Gerber al panel. Aparecer\u00e1 la silueta de la PCB en pantalla. Puede ocurrir que s\u00f3lo veamos un aspa con forma de signo + . Suele ocurrir porque al dise\u00f1ar la PCB en KiCad normalmente se sit\u00faa en el centro del \u00e1rea de dibujo, y el punto en el que arrastramos el ZIP se asimila a la esquina superior izquierda de dicha \u00e1rea de dibujo. Para alcanzar a ver la silueta de la PCB y poderla arrastrar hasta el interior del panel, utilizar el men\u00fa View > Scale 1:1 . Tambi\u00e9n podemos probar a dar valores negativos a los par\u00e1metros X e Y que vemos en el panel derecho de la aplicaci\u00f3n: Una vez recolocada la PCB dentro del panel, a\u00f1adiremos nuevas instancias de la misma haciendo click sobre la instancia inicial en el listado de la derecha. Como alternativa podemos hacer click con el bot\u00f3n derecho del rat\u00f3n sobre el panel y seleccionar la entrada Add Instance del men\u00fa contextual: A\u00f1adiremos todas las instancias de la placa que quepan en el panel. En ocasiones nos puede interesar girar una de las instancias. Para ello utilizaremos los controles que hay en el panel situado bajo el listado de instancias. Al girar puede ocurrir que la instancia desaparezca de la visualizaci\u00f3n por el problema descrito en el punto 4. De nuevo jugar con las opciones de zoom o dar valor manualmente a los campos X e Y : Llega el momento de a\u00f1adir las pesta\u00f1as que unir\u00e1n las distintas instancias para constituir un panel. Para ello haremos click sobre el punto donde deseemos colocar una pesta\u00f1a de uni\u00f3n y seleccionaremos Add Breaktab del men\u00fa contextual. Advertir que para que la pesta\u00f1a sea operativa, las instancias de la PCB deben estar separadas una distancia m\u00ednima. El programa nos advertir\u00e1 sobre ello marcando la pesta\u00f1a en rojo si sucede este problema: A\u00f1adiremos por lo menos 2 pesta\u00f1as por lado adyacente: S\u00f3lo queda exportar el panel resultante mediante el comando de men\u00fa File > Export Merged Gerbers . Tras terminar el progreso que se muestra sobre una peque\u00f1a ventana, obtendremos dos vistas de ambas caras del panel y los Gerbers resultantes en el directorio que hayamos seleccionado donde guardar el resultado de la exportaci\u00f3n. Aqu\u00ed podemos ver el proceso en video: Advertencia Debo mencionar que he observado que la utilidad Panelizer introduce un problema en el panel resultante. Por alg\u00fan motivo pierde el detalle de los agujeros alargados y los convierte en dos agujeros hechos al comienzo y al final. Prestar atenci\u00f3n por tanto a si nuestras huellas incluyen agujeros de este tipo. Aclaraci\u00f3n A la vista de este art\u00edculo podr\u00eda pensarse que podemos aprovechar el sistema de panelizaci\u00f3n para encargar varias PCBs en un mismo pedido sin m\u00e1s que a\u00f1adir instancias de distintas PCBs al panel. En teor\u00eda hay que declarar cu\u00e1ntas PCBs distintas hay en un panel panelizado por el usuario en el par\u00e1metro Different Design a la hora de hacer el pedido. Desconozco si JLCPCB detectar\u00e1 y no admitir\u00e1 este tipo de pedidos, aunque sospecho que as\u00ed es.","title":"Panelizaci\u00f3n"},{"location":"2020-03-19-rg350_backup.html","text":"Aplicaci\u00f3n de gesti\u00f3n de backup Existe la aplicaci\u00f3n Py Backup que facilita enormemente la gesti\u00f3n de los backups en RG350. Ver este art\u00edculo para m\u00e1s detalles. Vamos a hablar de algo de lo que nunca se habla lo suficiente, de backups. Algunas de las acciones que hacemos con la RG350 tienen su contrapartida en forma de ficheros que suelen quedar almacenados en el directorio Home del sistema que se encuentra en la tarjeta interna, concretamente en /media/data/local/home . Nota tambi\u00e9n sirven /media/home y /usr/local/home ya que son enlaces simb\u00f3licos, una especie de alias o accesos directos, pero la ruta f\u00edsica es la que se ha indicado antes. En el directorio Home se almacenan cosas como: Settings de los emuladores. BIOS de algunos emuladores como PCSX4All. Previews de algunos emuladores como FBA. Y seguramente lo m\u00e1s importante, los savestates o los ficheros que aparecen al utilizar el sistema de almacenamiento de la consola emulada como los memorycards de PlayStation. Si en alg\u00fan momento perdemos el contenido de la tarjeta interna (ya sea por descuido o por fallo de la misma), perderemos todo lo anterior. Por tanto es conveniente resguardar al menos los ficheros m\u00e1s valiosos como los savestates para evitar disgustos futuros. Una manera es copiar manualmente los ficheros que m\u00e1s nos importen. Podemos hacerlo copi\u00e1ndolos a la tarjeta externa con DinguxCmdr o conectando con la consola por cable y abriendo una sesi\u00f3n SSH o FTP. Aqu\u00ed vamos a ver una alternativa m\u00e1s f\u00e1cil y que respaldar\u00e1 el contenido completo del directorio Home. Comando de backup \u00b6 Vamos a empezar conociendo el comando que vamos a utilizar. OpenDingux como sabemos es un sistema Linux. En estos sistemas hay una utilidad y formato de archivo muy popular pensado para realizar backups llamado tar . Proviene de cuando los backups se hac\u00edan en cintas y de ah\u00ed el nombre (Tape ARchive). Est\u00e1 instalado pr\u00e1cticamente en todos los sitemas Linux existentes, por lo que est\u00e1 muy disponible. La forma habitual de utilizarlo es por l\u00ednea de comando, pero que nadie se asuste. Vamos a empezar vi\u00e9ndolo de esta forma pero m\u00e1s adelante veremos c\u00f3mo ejecutar este comando desde una aplicaci\u00f3n gr\u00e1fica disponible en ROGUE. Un comando adecuado para \"entarar\" el directorio Home ser\u00eda el siguiente (\"entarar\" es como se dice en la jerga a la acci\u00f3n de respaldar algo con tar ): tar -cf /media/sdcard/home_backup.tar -C /media/data/local home Ejecutando esto nos aparecer\u00eda en la ra\u00edz de la tarjeta externa un fichero de nombre home_backup.tar con el contenido del directorio /media/data/local/home . En una consola reci\u00e9n comprada o instalada el comando anterior se ejecuta muy r\u00e1pidamente y el fichero resultante ser\u00e1 peque\u00f1o. Si hemos colocado ficheros muy grandes o numerosos en el Home, cosa que es necesario para algunos emuladores, el fichero resultante puede llegar a ser muy grande y el proceso tardar mucho tiempo. En este caso tendremos que recordar o averiguar qu\u00e9 ficheros merece la pena excluir del backup como veremos a continuaci\u00f3n. Excluyendo ficheros del backup \u00b6 Una vez que sepamos qu\u00e9 directorios o ficheros del Home se pueden excluir del backup las incorporaremos al comando tar . Como ejemplo vamos a utilizar el directorio de previews de FBA que este emulador obliga a que se encuentre en el Home, concretamente en /media/data/local/home/.fba/previews . El comando de backup quedar\u00e1 como sigue: tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude = home/.fba/previews home Como vemos lo que tenemos que hacer es a\u00f1adir el par\u00e1metro --exclude con el valor de la ruta a excluir a partir de home . Es decir no hay que poner delante /media/data/local ya que la opci\u00f3n -C que est\u00e1 poco antes en el comando establece ese directorio como la ra\u00edz. Por cada directorio o archivo que queramos excluir a\u00f1adiremos un par\u00e1metro --exclude como el anterior. Por ejemplo vamos a ver c\u00f3mo se excluir\u00eda la BIOS de PlayStation adem\u00e1s de las previews de FBA que hemos indicado antes. No es el mejor ejemplo, porque ganamos poco excluy\u00e9ndola, ya que s\u00f3lo ocupa unos 500KB, pero ciertamente ese fichero se puede encontrar f\u00e1cilmente si lo perdemos: tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude = home/.fba/previews --exclude = home/.pcsx4all/bios/SCPH1001.BIN home Una vez que tengamos identificado lo que merece la pena excluir de nuestro backup para aligerarlo, vamos a ver c\u00f3mo lanzarlo m\u00e1s c\u00f3modamente. Ejecuci\u00f3n desde Scriptrunner \u00b6 Desde hace unas versiones, ROGUE incluye una utilidad muy pr\u00e1ctica de Rafa Vico llamada Scriptrunner que permite ejecutar scripts de comandos desde un listado. De serie trae un script para hacer backup del Home con el comando indicado en un principio (sin los excludes). Los scripts que vienen de serie no se pueden modificar, pero se pueden a\u00f1adir nuevos sin m\u00e1s que incorporarlos al directorio /media/data/local/home/.scriptrunner . Por ejemplo, vamos a ver c\u00f3mo incorporar\u00edamos un nuevo script de backup con el exclude del directorio de im\u00e1genes de previews de FBA que hemos comentado antes. Empezamos creando un fichero de texto con el siguiente contenido y de nombre home_backup_partial.sh (por ejemplo): #!/bin/sh # title=Backup partial home folder # desc=Backup home folder to SD card, save all your settings except FBA previews # author=eduardofilo echo \"Backup home folder.\" tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude=home/.fba/previews home echo \"\" echo \"Backup done.\" Lo que pongamos en las lineaas 2 y 3 ser\u00e1n el t\u00edtulo y la descripci\u00f3n del script que luego se mostrar\u00e1 en el listado de Scriptrunner, por lo que podemos adaptarlo a nuestra conveniencia. Advertencia Si creamos el fichero desde Windows es recomendable que sea con un editor potente como Notepad++ y guardarlo con retornos de carro UNIX y codificaci\u00f3n UTF8. Lo siguiente ser\u00e1 transferirlo al directorio /media/data/local/home/.scriptrunner por alg\u00fan medio como copi\u00e1ndolo desde la tarjeta externa con DinguxCmdr o por cable por FTP o SCP. Una vez copiado lo veremos en el listado que muestra Scriptrunner al abrirlo: Desde all\u00ed podremos ejecutarlo seleccion\u00e1ndolo como se ve en el pantallazo anterior y pulsando A , lo que habr\u00e1 que confirmar de nuevo con A : Veremos el progreso mediante un icono giratorio que aparece arriba a la derecha: Hasta que el backup finalmente se complete: Podemos comprobar con DinguxCmdr que se ha creado el fichero de backup: Restauraci\u00f3n \u00b6 La forma m\u00e1s c\u00f3moda de restaurar el backup en caso de ser necesario es utilizar el script Restore home folder precargado en Scriptrunner. Esta vez no es necesario modificarlo, funcionar\u00e1 tal cual. El \u00fanico inconveniente es que restaurar\u00e1 el backup completo, y puede ser que nos interese recuperar un s\u00f3lo fichero (un savestate de un emulador concreto por ejemplo). En ese caso se recomienda pinchar en el PC la tarjeta externa para tener acceso al fichero home_backup.tar y abrirlo con un gestor de compresi\u00f3n multiformato como WinRAR. Localizar el fichero que nos interesa y transferirlo a la consola por los medios habituales (DinguxCmdr, FTP o SCP).","title":"RG350 Backup"},{"location":"2020-03-19-rg350_backup.html#comando-de-backup","text":"Vamos a empezar conociendo el comando que vamos a utilizar. OpenDingux como sabemos es un sistema Linux. En estos sistemas hay una utilidad y formato de archivo muy popular pensado para realizar backups llamado tar . Proviene de cuando los backups se hac\u00edan en cintas y de ah\u00ed el nombre (Tape ARchive). Est\u00e1 instalado pr\u00e1cticamente en todos los sitemas Linux existentes, por lo que est\u00e1 muy disponible. La forma habitual de utilizarlo es por l\u00ednea de comando, pero que nadie se asuste. Vamos a empezar vi\u00e9ndolo de esta forma pero m\u00e1s adelante veremos c\u00f3mo ejecutar este comando desde una aplicaci\u00f3n gr\u00e1fica disponible en ROGUE. Un comando adecuado para \"entarar\" el directorio Home ser\u00eda el siguiente (\"entarar\" es como se dice en la jerga a la acci\u00f3n de respaldar algo con tar ): tar -cf /media/sdcard/home_backup.tar -C /media/data/local home Ejecutando esto nos aparecer\u00eda en la ra\u00edz de la tarjeta externa un fichero de nombre home_backup.tar con el contenido del directorio /media/data/local/home . En una consola reci\u00e9n comprada o instalada el comando anterior se ejecuta muy r\u00e1pidamente y el fichero resultante ser\u00e1 peque\u00f1o. Si hemos colocado ficheros muy grandes o numerosos en el Home, cosa que es necesario para algunos emuladores, el fichero resultante puede llegar a ser muy grande y el proceso tardar mucho tiempo. En este caso tendremos que recordar o averiguar qu\u00e9 ficheros merece la pena excluir del backup como veremos a continuaci\u00f3n.","title":"Comando de backup"},{"location":"2020-03-19-rg350_backup.html#excluyendo-ficheros-del-backup","text":"Una vez que sepamos qu\u00e9 directorios o ficheros del Home se pueden excluir del backup las incorporaremos al comando tar . Como ejemplo vamos a utilizar el directorio de previews de FBA que este emulador obliga a que se encuentre en el Home, concretamente en /media/data/local/home/.fba/previews . El comando de backup quedar\u00e1 como sigue: tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude = home/.fba/previews home Como vemos lo que tenemos que hacer es a\u00f1adir el par\u00e1metro --exclude con el valor de la ruta a excluir a partir de home . Es decir no hay que poner delante /media/data/local ya que la opci\u00f3n -C que est\u00e1 poco antes en el comando establece ese directorio como la ra\u00edz. Por cada directorio o archivo que queramos excluir a\u00f1adiremos un par\u00e1metro --exclude como el anterior. Por ejemplo vamos a ver c\u00f3mo se excluir\u00eda la BIOS de PlayStation adem\u00e1s de las previews de FBA que hemos indicado antes. No es el mejor ejemplo, porque ganamos poco excluy\u00e9ndola, ya que s\u00f3lo ocupa unos 500KB, pero ciertamente ese fichero se puede encontrar f\u00e1cilmente si lo perdemos: tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude = home/.fba/previews --exclude = home/.pcsx4all/bios/SCPH1001.BIN home Una vez que tengamos identificado lo que merece la pena excluir de nuestro backup para aligerarlo, vamos a ver c\u00f3mo lanzarlo m\u00e1s c\u00f3modamente.","title":"Excluyendo ficheros del backup"},{"location":"2020-03-19-rg350_backup.html#ejecucion-desde-scriptrunner","text":"Desde hace unas versiones, ROGUE incluye una utilidad muy pr\u00e1ctica de Rafa Vico llamada Scriptrunner que permite ejecutar scripts de comandos desde un listado. De serie trae un script para hacer backup del Home con el comando indicado en un principio (sin los excludes). Los scripts que vienen de serie no se pueden modificar, pero se pueden a\u00f1adir nuevos sin m\u00e1s que incorporarlos al directorio /media/data/local/home/.scriptrunner . Por ejemplo, vamos a ver c\u00f3mo incorporar\u00edamos un nuevo script de backup con el exclude del directorio de im\u00e1genes de previews de FBA que hemos comentado antes. Empezamos creando un fichero de texto con el siguiente contenido y de nombre home_backup_partial.sh (por ejemplo): #!/bin/sh # title=Backup partial home folder # desc=Backup home folder to SD card, save all your settings except FBA previews # author=eduardofilo echo \"Backup home folder.\" tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude=home/.fba/previews home echo \"\" echo \"Backup done.\" Lo que pongamos en las lineaas 2 y 3 ser\u00e1n el t\u00edtulo y la descripci\u00f3n del script que luego se mostrar\u00e1 en el listado de Scriptrunner, por lo que podemos adaptarlo a nuestra conveniencia. Advertencia Si creamos el fichero desde Windows es recomendable que sea con un editor potente como Notepad++ y guardarlo con retornos de carro UNIX y codificaci\u00f3n UTF8. Lo siguiente ser\u00e1 transferirlo al directorio /media/data/local/home/.scriptrunner por alg\u00fan medio como copi\u00e1ndolo desde la tarjeta externa con DinguxCmdr o por cable por FTP o SCP. Una vez copiado lo veremos en el listado que muestra Scriptrunner al abrirlo: Desde all\u00ed podremos ejecutarlo seleccion\u00e1ndolo como se ve en el pantallazo anterior y pulsando A , lo que habr\u00e1 que confirmar de nuevo con A : Veremos el progreso mediante un icono giratorio que aparece arriba a la derecha: Hasta que el backup finalmente se complete: Podemos comprobar con DinguxCmdr que se ha creado el fichero de backup:","title":"Ejecuci\u00f3n desde Scriptrunner"},{"location":"2020-03-19-rg350_backup.html#restauracion","text":"La forma m\u00e1s c\u00f3moda de restaurar el backup en caso de ser necesario es utilizar el script Restore home folder precargado en Scriptrunner. Esta vez no es necesario modificarlo, funcionar\u00e1 tal cual. El \u00fanico inconveniente es que restaurar\u00e1 el backup completo, y puede ser que nos interese recuperar un s\u00f3lo fichero (un savestate de un emulador concreto por ejemplo). En ese caso se recomienda pinchar en el PC la tarjeta externa para tener acceso al fichero home_backup.tar y abrirlo con un gestor de compresi\u00f3n multiformato como WinRAR. Localizar el fichero que nos interesa y transferirlo a la consola por los medios habituales (DinguxCmdr, FTP o SCP).","title":"Restauraci\u00f3n"},{"location":"2020-03-28-rg350_pymenu.html","text":"Se ilustra a continuaci\u00f3n el proceso de instalaci\u00f3n y configuraci\u00f3n del launcher PyMenu para RG350. Aviso PyMenu al contrario que SimpleMenu y EmulationStation , trata de autoconfigurarse localizando los emuladores, ports y aplicaciones que hay en la consola y contrast\u00e1ndolos con un fichero de configuraci\u00f3n que contiene la mayor\u00eda de los sistemas. Desafortunadamente no es perfecto y no lo logra en todos los casos, haciendo que los que fallan sean m\u00e1s dif\u00edciles de configurar. En este art\u00edculo se desvelan algunas de las t\u00e9cnicas que usa el programa para que sepamos c\u00f3mo terminar de adaptar la configuraci\u00f3n. Instalaci\u00f3n \u00b6 La instalaci\u00f3n es sencilla ya que el programador ofrece un OPK para ello en las releases del repositorio . En concreto el OPK adecuado para instalar en RG350 es \u00e9ste: https://github.com/JackD83/PyMenu/releases/download/2.0.0-PRE/PyMenu-Installer-2.0.0.opk Como con todos los OPKs s\u00f3lo tenemos que copiarlo a uno de estos dos directorios: /media/data/apps /media/sdcard/apps Preferiblemente en el segundo que corresponde al directorio apps de la tarjeta externa, ya que el OPK lo podremos borrar una vez hecha la instalaci\u00f3n. En GMenu2X nos aparecer\u00e1 este lanzador: Lo abriremos y veremos una pantalla de terminal en la que es posible que aparezcan algunos errores. Al principio cre\u00eda que se trataba del proceso de b\u00fasqueda de OPKs para la autoconfiguraci\u00f3n, pero analizando el script de instalaci\u00f3n veo que s\u00f3lo las \u00faltimas 4 l\u00edneas corresponden a la verdadera instalaci\u00f3n: Las l\u00edneas anteriores pertenecen a GMenu2X y en mi caso indicaban que ten\u00eda ficheros residuales en /media/data/local/home/.gmenu2x/sections . Son lanzadores de aplicaciones que en su d\u00eda instal\u00e9 y borr\u00e9. Haciendo limpieza de los ficheros correspondientes consigo un log de instalaci\u00f3n m\u00e1s limpio: En cualquier caso estos errores no son importantes. El instalador copia todo el c\u00f3digo y recursos de PyMenu en el directorio /media/data/pymenu . Tambi\u00e9n copia un lanzador en /media/data/local/home/.gmenu2x/sections/applications , motivo por el que nos aparecer\u00e1 lo siguiente: Configuraci\u00f3n \u00b6 Una vez instalado, si ejecutamos PyMenu a trav\u00e9s de su lanzador seguramente arrancar\u00e1, no como SimpleMenu o EmulationStation que hasta que no tienen una configuraci\u00f3n perfecta suelen cerrarse. Otra ventaja de PyMenu es que puede configurarse desde el propio interfaz gr\u00e1fico del programa. Para ello basta situarse sobre el sistema a configurar y pulsar Select para seleccionar la entrada edit entry : All\u00ed veremos los par\u00e1metros que contiene el fichero de configuraci\u00f3n para ese sistema. El fichero de configuraci\u00f3n es /media/data/pymenu/config/config.json . Como vemos es un fichero JSON (mucho m\u00e1s amigable que los XML de SimpleMenu y EmulationStation). Al principio encontramos unos par\u00e1metros generales: \"batteryHigh\": 3900000, \"batteryLow\": 3300000, \"firstStart\": false, \"lcd_backlight\": 70, \"linkPath\": \"/media/data/local/home/.gmenu2x/sections\", Los dos primeros controlan el comportamiento del indicador de bater\u00eda. Seg\u00fan comunicaci\u00f3n de su autor, los par\u00e1metros se ajustan autom\u00e1ticamente cargando completamente la bater\u00eda y dej\u00e1ndo que se descargue del todo. A continuaci\u00f3n aparece la configuraci\u00f3n de los sistemas. Por ejemplo \u00e9ste ser\u00eda el bloque correspondiente a la Game Boy: { \"description\": \"Gameboy\", \"hideFolders\": false, \"limitSelection\": null, \"name\": \"GB\", \"overclock\": \"360\", \"previews\": \"/media/data/roms/GB/.previews\", \"selectionPath\": \"/media/data/roms/GB\", \"system\": \"gambatte\", \"type\": \"emulator\", \"useFileFilter\": false, \"useGamelist\": false, \"useSelection\": true }, Como vemos se corresponde con lo que ve\u00edamos en el pantallazo anterior. Ser\u00e1 por tanto equivalente modificar la configuraci\u00f3n desde el programa o desde el fichero. Si PyMenu no encuentra un OPK compatible con la configuraci\u00f3n del emulador correspondiente ocultar\u00e1 el sistema en el interfaz gr\u00e1fico, pero podemos forzar su aparici\u00f3n activando la opci\u00f3n Show All en General Settings : A pesar de poder configurar los sistemas desde el propio frontend, prefiero hacerlo manipulando el fichero de configuraci\u00f3n directamente, ya que permite ajustar todos los sistemas de una vez. Para editar este fichero, como siempre, podemos hacerlo conectando con la consola por SSH para manipularlo con vi o copiarlo con DinguxCmdr, FTP o SCP para editarlo desde el ordenador. A continuaci\u00f3n menciono algunos de los problemas que tuve haciendo la configuraci\u00f3n. Problema con la Identificador de sistema en ROGUE \u00b6 En principio para indicar el emulador (o emuladores, ya que como veremos luego soporta varios en cada sistema) a utilizar en un sistema determinado basta indicar el nombre completo de dicho emulador (incluyendo espacios). Esto en BASE se aplicar\u00e1 directamente. En ROGUE se pueden editar los nombres de los emuladores, por lo que podemos perder de vista el nombre original que es el que necesitamos, ya que PyMenu extraer\u00e1 este nombre del interior del OPK que no es alterado al modificar el nombre en el GMenu2X de ROGUE. Vamos a profundizar pues un poco en la manera en que son identificados los emuladores para ayudar a entender c\u00f3mo debemos configurar PyMenu en ROGUE. El par\u00e1metro donde debemos indicar el nombre original del emulador es system . Vamos a verlo por ejemplo con el caso de la Game Boy. Como vemos en la configuraci\u00f3n anterior est\u00e1 definido en system el valor gambatte . Pues bien, para que el sistema Game Boy aparezca en PyMenu ser\u00e1 comparado con dos cosas: El par\u00e1metro Name de los ficheros .desktop que contienen los OPKs. El par\u00e1metro title de los ficheros que hay en las distintas secciones que hay en /media/data/local/home/.gmenu2x/sections , a lo que PyMenu llama links . No estoy seguro, pero creo que en el caso de emuladores en los que hay que seleccionar una ROM para lanzarlo (la mayor\u00eda), s\u00f3lo sirve el primero de los dos tipos. Para aplicaciones sueltas o Ports pueden servir cualquiera de los dos. Ahora la cosa se complica un poco. Por una parte el fichero .desktop (casi siempre se llama default.gcw0.desktop ) se encuentra enterrado en el OPK que es una especie de ZIP (en realidad una especie de imagen de sistema de ficheros). Vamos a ver por ejemplo c\u00f3mo acceder\u00edamos a \u00e9l siguiendo con el ejemplo de Game Boy. En mi m\u00e1quina el OPK de este emulador es gambatte-multi-r572u4-20200127.opk . Lo descargamos al PC y ejecutamos lo siguiente (s\u00f3lo s\u00e9 hacerlo con Linux): $ unsquashfs gambatte-multi-r572u4-20200127.opk Nos aparecer\u00e1 un directorio de nombre squashfs-root con el contenido del OPK. Dentro de \u00e9l encontramos un fichero llamado default.gcw0.desktop con el siguiente contenido: [Desktop Entry] Name=Gambatte Comment=GB/GBC emulator Exec=gambatte.opendingux %f Terminal=false Type=Application StartupNotify=true Icon=gambatte Categories=emulators; X-OD-Manual=manual.txt MimeType=application/x-gameboy-rom;application/x-gbc-rom;application/x-gzip;application/zip;application/gzip; Pues bien, el valor de Name ser\u00e1 lo que tengamos que poner en el par\u00e1metro system de Game Boy en /media/data/pymenu/config/config.json . Las may\u00fasculas/min\u00fasculas no son importantes ya que PyMenu convierte todo a min\u00fasculas antes de hacer comparaciones. Como digo, en mi caso hab\u00eda modificado los nombres de los emuladores en GMenu2X. Por ejemplo el nombre original Gambatte lo hab\u00eda cambiado a Game Boy . As\u00ed, antes de entender que lo que se cog\u00eda era el Name dentro del .desktop probaba con Game Boy o con el nombre completo del OPK ( gambatte-multi-r572u4-20200127.opk ) sin \u00e9xito. Luego est\u00e1 el segundo elemento que se compara con system , es decir el par\u00e1metro title de los ficheros de las distintas secciones que hay en /media/data/local/home/.gmenu2x/sections , a lo que PyMenu llama links . Curiosamente este par\u00e1metro s\u00ed que se adapta cuando en GMenu2X cambiamos el nombre del emulador, pero como se ha comentado antes, parece que este elemento no sirve para lanzar emuladores a los que tenemos que pasarles como par\u00e1metro la ROM a ejecutar. Por ejemplo, en mi caso el link de Gambatte es /usr/local/home/.gmenu2x/sections/emulators/gambatte-multi-r572u4-20200127_gambatte.opendinguxf y su contenido: title=Game Boy description=GB/GBC emulator manual=manual.txt icon=/media/data/apps/gambatte-multi-r572u4-20200127.opk#gambatte.png selectorfilter=gb,gbc,gz,zip,gz clock=360 selectordir=/media/data/local/home/roms/GB/ Como vemos el title no se corresponde con el Name del .desktop dentro del OPK por el motivo mencionado de que modifiqu\u00e9 los nombres de los emuladores en GMenu2X. Es mejor no hacerlo para no tener que abrir la lata del OPK en busca del .desktop , pero para mi ya era tarde. En resumen, si queremos que un emulador sea reconocido en PyMenu, tenemos que averiguar el nombre original del emulador y colocarlo en el par\u00e1metro system del sistema correspondiente en el fichero de configuraci\u00f3n de PyMenu. Problema con determinados emuladores \u00b6 Con el emulador de Intellivision hubo un problema particular. Por alg\u00fan motivo el .desktop que contiene el OPK no era interpretado correctamente y al intentar entrar en la lista de ROMs PyMenu se reiniciaba. Tras depurar a\u00f1adiendo trazas al c\u00f3digo Python encontr\u00e9 que el problema estaba en el fichero default.gcw0.desktop . El original conten\u00eda esto: #!/usr/bin/env xdg-open [Desktop Entry] Name=JzIntellivision Type=Application Exec=jzintv %F Icon=dingux-int Comment=Intellivision emulator #Comment=Intellivision emulator Terminal=false Categories=emulators; Mimetype=application/octet-stream; X-OD-Manual=readmegcw.txt La soluci\u00f3n consiste en desempaquetar el OPK (con unsquashfs ) y cambiar la F final del par\u00e1metro Exec del fichero default.gcw0.desktop poni\u00e9ndola en min\u00fasculas. Luego hay que volver a empaquetar en squashfs el OPK ( mksquashfs ). Soporte de varios emuladores \u00b6 Una cosa buena que tiene PyMenu es que admite varios valores en este par\u00e1metro separados por comas. As\u00ed se pueden escribir varias posibilidades para dar m\u00e1s oportunidades a PyMenu para encontrar los emuladores. Cuando lo hacemos nos permite seleccionar el emulador que queremos utilizar para lanzar el juego. Por ejemplo si tenemos instalado ReGBA y GPSP, al pulsar Start en la pantalla de selecci\u00f3n de ROMs, nos aparecer\u00e1 un desplegable en el que podremos seleccionar el emulador a utilizar: Como punto de partida dejo aqu\u00ed mi fichero de configuraci\u00f3n que contiene la mayor\u00eda de los emuladores que se utilizan habitualmente. config.json Arranque \u00b6 Para conseguir que PyMenu arranque como lanzador predeterminado, al igual que con SimpleMenu y EmulationStation tenemos que incorporar un script de nombre frontend_start en el directorio /media/data/local/sbin . El contenido del script ser\u00e1 el siguiente: #!/bin/sh export HOME=`cat /etc/passwd |head -1 |cut -d':' -f 6` # Restore the framebuffer to a working state /usr/sbin/unlockvt > /dev/null # Reset the console /usr/bin/reset # Disactivate the console on framebuffer echo 0 > /sys/devices/virtual/vtconsole/vtcon1/bind # Disable downscaling for future apps if [ -f /sys/devices/platform/jz-lcd.0/allow_downscaling ] ; then echo 0 > /sys/devices/platform/jz-lcd.0/allow_downscaling fi # Restore the regular key map if [ -f /sys/devices/platform/linkdev/alt_key_map ] ; then echo 0 > /sys/devices/platform/linkdev/alt_key_map fi # Stop the gravity sensor if it's loaded /usr/sbin/gsensor --stop # Source /etc/profile to set the environment variables . /etc/profile exec /media/data/pymenu/pymenu.dge Una vez instalado el script, debemos asignarle el permiso UNIX de ejecuci\u00f3n. Para ello ejecutaremos a trav\u00e9s de SSH o con la aplicaci\u00f3n ST-SDL el siguiente comando: # chmod +x /media/data/local/sbin/frontend_start Para que el script anterior funcione, debemos modificar adem\u00e1s el fichero /media/data/pymenu/pymenu.dge . En concreto modificar la l\u00ednea 37 para incorporar la ruta completa del fichero pymenu.sh : ... echo \"starting PyMenu\" sh /media/data/pymenu/pymenu.sh #> /dev/ttyS1 2> /dev/ttyS1 ... Temas \u00b6 PyMenu tiene un sistema de temas como EmulationStation . Se basa en unos ficheros JSON que hay en la ruta /media/data/pymenu/theme/themes . Internamente estos ficheros hacen referencia a recursos de imagen que pueden estar en cualquier lugar, aunque suelen estar bajo el directorio /media/data/pymenu/images . Por ejemplo lo siguiente es la definici\u00f3n del sistema GameBoy en el tema Pixel: \"GAMEBOY\": { \"background\": \"images/pixel/backgrounds/gbc.png\", \"folderIcon\": \"images/pixel/icons/gbc.png\", \"icon\": \"images/pixel/systems/gbc.png\" }, El tema se selecciona desde el icono de rueda dentada que hay abajo a la izquierda en la pantalla principal. Al pulsar sobre ella aparecen los General Settings , siendo el tema uno de ellos. Una vez seleccionado, como siempre en PyMenu, hay que confirmar los cambios pulsando Start : Vamos a ver ejemplos de cada uno: tft \u00b6 pixel \u00b6 default \u00b6 Funcionalidades \u00b6 PyMenu tiene un par de funcionalidades de las que carece EmulationStation (al menos en la versi\u00f3n compilada para RG350 que circula por ah\u00ed) y es que guarda un hist\u00f3rico de los juegos lanzados as\u00ed como una lista de favoritos. Para a\u00f1adir un juego a favoritos tenemos que pulsar Select cuando estemos seleccionando el juego. Aparecer\u00e1 un desplegable con la opci\u00f3n Add to favourites : Tambi\u00e9n es operativo el men\u00fa para reiniciar y apagar la consola. Se obtiene pulsando en el t\u00edpico s\u00edmbolo de Power que hay abajo a la derecha en la pantalla principal: La opci\u00f3n Exit to Gmenu2x la he incorporado yo modificando el c\u00f3digo, es decir, no aparecer\u00e1 si se instala el c\u00f3digo original siguiendo este art\u00edculo.","title":"RG350 PyMenu"},{"location":"2020-03-28-rg350_pymenu.html#instalacion","text":"La instalaci\u00f3n es sencilla ya que el programador ofrece un OPK para ello en las releases del repositorio . En concreto el OPK adecuado para instalar en RG350 es \u00e9ste: https://github.com/JackD83/PyMenu/releases/download/2.0.0-PRE/PyMenu-Installer-2.0.0.opk Como con todos los OPKs s\u00f3lo tenemos que copiarlo a uno de estos dos directorios: /media/data/apps /media/sdcard/apps Preferiblemente en el segundo que corresponde al directorio apps de la tarjeta externa, ya que el OPK lo podremos borrar una vez hecha la instalaci\u00f3n. En GMenu2X nos aparecer\u00e1 este lanzador: Lo abriremos y veremos una pantalla de terminal en la que es posible que aparezcan algunos errores. Al principio cre\u00eda que se trataba del proceso de b\u00fasqueda de OPKs para la autoconfiguraci\u00f3n, pero analizando el script de instalaci\u00f3n veo que s\u00f3lo las \u00faltimas 4 l\u00edneas corresponden a la verdadera instalaci\u00f3n: Las l\u00edneas anteriores pertenecen a GMenu2X y en mi caso indicaban que ten\u00eda ficheros residuales en /media/data/local/home/.gmenu2x/sections . Son lanzadores de aplicaciones que en su d\u00eda instal\u00e9 y borr\u00e9. Haciendo limpieza de los ficheros correspondientes consigo un log de instalaci\u00f3n m\u00e1s limpio: En cualquier caso estos errores no son importantes. El instalador copia todo el c\u00f3digo y recursos de PyMenu en el directorio /media/data/pymenu . Tambi\u00e9n copia un lanzador en /media/data/local/home/.gmenu2x/sections/applications , motivo por el que nos aparecer\u00e1 lo siguiente:","title":"Instalaci\u00f3n"},{"location":"2020-03-28-rg350_pymenu.html#configuracion","text":"Una vez instalado, si ejecutamos PyMenu a trav\u00e9s de su lanzador seguramente arrancar\u00e1, no como SimpleMenu o EmulationStation que hasta que no tienen una configuraci\u00f3n perfecta suelen cerrarse. Otra ventaja de PyMenu es que puede configurarse desde el propio interfaz gr\u00e1fico del programa. Para ello basta situarse sobre el sistema a configurar y pulsar Select para seleccionar la entrada edit entry : All\u00ed veremos los par\u00e1metros que contiene el fichero de configuraci\u00f3n para ese sistema. El fichero de configuraci\u00f3n es /media/data/pymenu/config/config.json . Como vemos es un fichero JSON (mucho m\u00e1s amigable que los XML de SimpleMenu y EmulationStation). Al principio encontramos unos par\u00e1metros generales: \"batteryHigh\": 3900000, \"batteryLow\": 3300000, \"firstStart\": false, \"lcd_backlight\": 70, \"linkPath\": \"/media/data/local/home/.gmenu2x/sections\", Los dos primeros controlan el comportamiento del indicador de bater\u00eda. Seg\u00fan comunicaci\u00f3n de su autor, los par\u00e1metros se ajustan autom\u00e1ticamente cargando completamente la bater\u00eda y dej\u00e1ndo que se descargue del todo. A continuaci\u00f3n aparece la configuraci\u00f3n de los sistemas. Por ejemplo \u00e9ste ser\u00eda el bloque correspondiente a la Game Boy: { \"description\": \"Gameboy\", \"hideFolders\": false, \"limitSelection\": null, \"name\": \"GB\", \"overclock\": \"360\", \"previews\": \"/media/data/roms/GB/.previews\", \"selectionPath\": \"/media/data/roms/GB\", \"system\": \"gambatte\", \"type\": \"emulator\", \"useFileFilter\": false, \"useGamelist\": false, \"useSelection\": true }, Como vemos se corresponde con lo que ve\u00edamos en el pantallazo anterior. Ser\u00e1 por tanto equivalente modificar la configuraci\u00f3n desde el programa o desde el fichero. Si PyMenu no encuentra un OPK compatible con la configuraci\u00f3n del emulador correspondiente ocultar\u00e1 el sistema en el interfaz gr\u00e1fico, pero podemos forzar su aparici\u00f3n activando la opci\u00f3n Show All en General Settings : A pesar de poder configurar los sistemas desde el propio frontend, prefiero hacerlo manipulando el fichero de configuraci\u00f3n directamente, ya que permite ajustar todos los sistemas de una vez. Para editar este fichero, como siempre, podemos hacerlo conectando con la consola por SSH para manipularlo con vi o copiarlo con DinguxCmdr, FTP o SCP para editarlo desde el ordenador. A continuaci\u00f3n menciono algunos de los problemas que tuve haciendo la configuraci\u00f3n.","title":"Configuraci\u00f3n"},{"location":"2020-03-28-rg350_pymenu.html#problema-con-la-identificador-de-sistema-en-rogue","text":"En principio para indicar el emulador (o emuladores, ya que como veremos luego soporta varios en cada sistema) a utilizar en un sistema determinado basta indicar el nombre completo de dicho emulador (incluyendo espacios). Esto en BASE se aplicar\u00e1 directamente. En ROGUE se pueden editar los nombres de los emuladores, por lo que podemos perder de vista el nombre original que es el que necesitamos, ya que PyMenu extraer\u00e1 este nombre del interior del OPK que no es alterado al modificar el nombre en el GMenu2X de ROGUE. Vamos a profundizar pues un poco en la manera en que son identificados los emuladores para ayudar a entender c\u00f3mo debemos configurar PyMenu en ROGUE. El par\u00e1metro donde debemos indicar el nombre original del emulador es system . Vamos a verlo por ejemplo con el caso de la Game Boy. Como vemos en la configuraci\u00f3n anterior est\u00e1 definido en system el valor gambatte . Pues bien, para que el sistema Game Boy aparezca en PyMenu ser\u00e1 comparado con dos cosas: El par\u00e1metro Name de los ficheros .desktop que contienen los OPKs. El par\u00e1metro title de los ficheros que hay en las distintas secciones que hay en /media/data/local/home/.gmenu2x/sections , a lo que PyMenu llama links . No estoy seguro, pero creo que en el caso de emuladores en los que hay que seleccionar una ROM para lanzarlo (la mayor\u00eda), s\u00f3lo sirve el primero de los dos tipos. Para aplicaciones sueltas o Ports pueden servir cualquiera de los dos. Ahora la cosa se complica un poco. Por una parte el fichero .desktop (casi siempre se llama default.gcw0.desktop ) se encuentra enterrado en el OPK que es una especie de ZIP (en realidad una especie de imagen de sistema de ficheros). Vamos a ver por ejemplo c\u00f3mo acceder\u00edamos a \u00e9l siguiendo con el ejemplo de Game Boy. En mi m\u00e1quina el OPK de este emulador es gambatte-multi-r572u4-20200127.opk . Lo descargamos al PC y ejecutamos lo siguiente (s\u00f3lo s\u00e9 hacerlo con Linux): $ unsquashfs gambatte-multi-r572u4-20200127.opk Nos aparecer\u00e1 un directorio de nombre squashfs-root con el contenido del OPK. Dentro de \u00e9l encontramos un fichero llamado default.gcw0.desktop con el siguiente contenido: [Desktop Entry] Name=Gambatte Comment=GB/GBC emulator Exec=gambatte.opendingux %f Terminal=false Type=Application StartupNotify=true Icon=gambatte Categories=emulators; X-OD-Manual=manual.txt MimeType=application/x-gameboy-rom;application/x-gbc-rom;application/x-gzip;application/zip;application/gzip; Pues bien, el valor de Name ser\u00e1 lo que tengamos que poner en el par\u00e1metro system de Game Boy en /media/data/pymenu/config/config.json . Las may\u00fasculas/min\u00fasculas no son importantes ya que PyMenu convierte todo a min\u00fasculas antes de hacer comparaciones. Como digo, en mi caso hab\u00eda modificado los nombres de los emuladores en GMenu2X. Por ejemplo el nombre original Gambatte lo hab\u00eda cambiado a Game Boy . As\u00ed, antes de entender que lo que se cog\u00eda era el Name dentro del .desktop probaba con Game Boy o con el nombre completo del OPK ( gambatte-multi-r572u4-20200127.opk ) sin \u00e9xito. Luego est\u00e1 el segundo elemento que se compara con system , es decir el par\u00e1metro title de los ficheros de las distintas secciones que hay en /media/data/local/home/.gmenu2x/sections , a lo que PyMenu llama links . Curiosamente este par\u00e1metro s\u00ed que se adapta cuando en GMenu2X cambiamos el nombre del emulador, pero como se ha comentado antes, parece que este elemento no sirve para lanzar emuladores a los que tenemos que pasarles como par\u00e1metro la ROM a ejecutar. Por ejemplo, en mi caso el link de Gambatte es /usr/local/home/.gmenu2x/sections/emulators/gambatte-multi-r572u4-20200127_gambatte.opendinguxf y su contenido: title=Game Boy description=GB/GBC emulator manual=manual.txt icon=/media/data/apps/gambatte-multi-r572u4-20200127.opk#gambatte.png selectorfilter=gb,gbc,gz,zip,gz clock=360 selectordir=/media/data/local/home/roms/GB/ Como vemos el title no se corresponde con el Name del .desktop dentro del OPK por el motivo mencionado de que modifiqu\u00e9 los nombres de los emuladores en GMenu2X. Es mejor no hacerlo para no tener que abrir la lata del OPK en busca del .desktop , pero para mi ya era tarde. En resumen, si queremos que un emulador sea reconocido en PyMenu, tenemos que averiguar el nombre original del emulador y colocarlo en el par\u00e1metro system del sistema correspondiente en el fichero de configuraci\u00f3n de PyMenu.","title":"Problema con la Identificador de sistema en ROGUE"},{"location":"2020-03-28-rg350_pymenu.html#problema-con-determinados-emuladores","text":"Con el emulador de Intellivision hubo un problema particular. Por alg\u00fan motivo el .desktop que contiene el OPK no era interpretado correctamente y al intentar entrar en la lista de ROMs PyMenu se reiniciaba. Tras depurar a\u00f1adiendo trazas al c\u00f3digo Python encontr\u00e9 que el problema estaba en el fichero default.gcw0.desktop . El original conten\u00eda esto: #!/usr/bin/env xdg-open [Desktop Entry] Name=JzIntellivision Type=Application Exec=jzintv %F Icon=dingux-int Comment=Intellivision emulator #Comment=Intellivision emulator Terminal=false Categories=emulators; Mimetype=application/octet-stream; X-OD-Manual=readmegcw.txt La soluci\u00f3n consiste en desempaquetar el OPK (con unsquashfs ) y cambiar la F final del par\u00e1metro Exec del fichero default.gcw0.desktop poni\u00e9ndola en min\u00fasculas. Luego hay que volver a empaquetar en squashfs el OPK ( mksquashfs ).","title":"Problema con determinados emuladores"},{"location":"2020-03-28-rg350_pymenu.html#soporte-de-varios-emuladores","text":"Una cosa buena que tiene PyMenu es que admite varios valores en este par\u00e1metro separados por comas. As\u00ed se pueden escribir varias posibilidades para dar m\u00e1s oportunidades a PyMenu para encontrar los emuladores. Cuando lo hacemos nos permite seleccionar el emulador que queremos utilizar para lanzar el juego. Por ejemplo si tenemos instalado ReGBA y GPSP, al pulsar Start en la pantalla de selecci\u00f3n de ROMs, nos aparecer\u00e1 un desplegable en el que podremos seleccionar el emulador a utilizar: Como punto de partida dejo aqu\u00ed mi fichero de configuraci\u00f3n que contiene la mayor\u00eda de los emuladores que se utilizan habitualmente. config.json","title":"Soporte de varios emuladores"},{"location":"2020-03-28-rg350_pymenu.html#arranque","text":"Para conseguir que PyMenu arranque como lanzador predeterminado, al igual que con SimpleMenu y EmulationStation tenemos que incorporar un script de nombre frontend_start en el directorio /media/data/local/sbin . El contenido del script ser\u00e1 el siguiente: #!/bin/sh export HOME=`cat /etc/passwd |head -1 |cut -d':' -f 6` # Restore the framebuffer to a working state /usr/sbin/unlockvt > /dev/null # Reset the console /usr/bin/reset # Disactivate the console on framebuffer echo 0 > /sys/devices/virtual/vtconsole/vtcon1/bind # Disable downscaling for future apps if [ -f /sys/devices/platform/jz-lcd.0/allow_downscaling ] ; then echo 0 > /sys/devices/platform/jz-lcd.0/allow_downscaling fi # Restore the regular key map if [ -f /sys/devices/platform/linkdev/alt_key_map ] ; then echo 0 > /sys/devices/platform/linkdev/alt_key_map fi # Stop the gravity sensor if it's loaded /usr/sbin/gsensor --stop # Source /etc/profile to set the environment variables . /etc/profile exec /media/data/pymenu/pymenu.dge Una vez instalado el script, debemos asignarle el permiso UNIX de ejecuci\u00f3n. Para ello ejecutaremos a trav\u00e9s de SSH o con la aplicaci\u00f3n ST-SDL el siguiente comando: # chmod +x /media/data/local/sbin/frontend_start Para que el script anterior funcione, debemos modificar adem\u00e1s el fichero /media/data/pymenu/pymenu.dge . En concreto modificar la l\u00ednea 37 para incorporar la ruta completa del fichero pymenu.sh : ... echo \"starting PyMenu\" sh /media/data/pymenu/pymenu.sh #> /dev/ttyS1 2> /dev/ttyS1 ...","title":"Arranque"},{"location":"2020-03-28-rg350_pymenu.html#temas","text":"PyMenu tiene un sistema de temas como EmulationStation . Se basa en unos ficheros JSON que hay en la ruta /media/data/pymenu/theme/themes . Internamente estos ficheros hacen referencia a recursos de imagen que pueden estar en cualquier lugar, aunque suelen estar bajo el directorio /media/data/pymenu/images . Por ejemplo lo siguiente es la definici\u00f3n del sistema GameBoy en el tema Pixel: \"GAMEBOY\": { \"background\": \"images/pixel/backgrounds/gbc.png\", \"folderIcon\": \"images/pixel/icons/gbc.png\", \"icon\": \"images/pixel/systems/gbc.png\" }, El tema se selecciona desde el icono de rueda dentada que hay abajo a la izquierda en la pantalla principal. Al pulsar sobre ella aparecen los General Settings , siendo el tema uno de ellos. Una vez seleccionado, como siempre en PyMenu, hay que confirmar los cambios pulsando Start : Vamos a ver ejemplos de cada uno:","title":"Temas"},{"location":"2020-03-28-rg350_pymenu.html#tft","text":"","title":"tft"},{"location":"2020-03-28-rg350_pymenu.html#pixel","text":"","title":"pixel"},{"location":"2020-03-28-rg350_pymenu.html#default","text":"","title":"default"},{"location":"2020-03-28-rg350_pymenu.html#funcionalidades","text":"PyMenu tiene un par de funcionalidades de las que carece EmulationStation (al menos en la versi\u00f3n compilada para RG350 que circula por ah\u00ed) y es que guarda un hist\u00f3rico de los juegos lanzados as\u00ed como una lista de favoritos. Para a\u00f1adir un juego a favoritos tenemos que pulsar Select cuando estemos seleccionando el juego. Aparecer\u00e1 un desplegable con la opci\u00f3n Add to favourites : Tambi\u00e9n es operativo el men\u00fa para reiniciar y apagar la consola. Se obtiene pulsando en el t\u00edpico s\u00edmbolo de Power que hay abajo a la derecha en la pantalla principal: La opci\u00f3n Exit to Gmenu2x la he incorporado yo modificando el c\u00f3digo, es decir, no aparecer\u00e1 si se instala el c\u00f3digo original siguiendo este art\u00edculo.","title":"Funcionalidades"},{"location":"2020-04-14-rg350_scummvm.html","text":"ScummVM es un programa que permite ejecutar aventuras gr\u00e1ficas cl\u00e1sicas. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350. Integraci\u00f3n de ScummVM en lanzadores La versi\u00f3n de ScummVM instalada en este art\u00edculo utiliza un interfaz propio para lanzar los juegos y no permite su integraci\u00f3n en lanzadores gr\u00e1ficos tipo SimpleMenu. En este art\u00edculo posterior se describe la manera de lograrlo. El repositorio de la versi\u00f3n adaptada a la RG350 es \u00e9ste . Seg\u00fan su autor se trata de un repositorio auxiliar destinado a integrar los cambios en el repositorio del proyecto principal , pero hasta que eso suceda se puede bajar del mismo una versi\u00f3n que funciona bastante bien. Instalaci\u00f3n de emulador \u00b6 La instalaci\u00f3n es como la de cualquier emulador en formato OPK: Descargar el OPK para RG350 del \u00faltimo release. En el momento de escribir este art\u00edculo es: scummvm-rg350-01132020.opk Copiarlo dentro del directorio apps de la microSD externa. Tambi\u00e9n puede copiarse en la tarjeta interna (en la ruta /media/data/apps , pero particularmente prefiero instalar las aplicaciones en la externa). Una vez instalado, reiniciar Gmenu2x pulsando Power+Select para asegurar el que aparezca: Instalaci\u00f3n de juegos \u00b6 Los juegos que permite ejecutar ScummVM estaban basados en motores o engines desarrollados por sus comercializadores. As\u00ed pues los ficheros que vienen con estos juegos son el ejecutable del motor y los ficheros de datos del juego concreto. ScummVM sustituye \u00fanicamente al ejecutable del motor. Seremos nosotros los que suministraremos los ficheros de datos del juego que tengamos. Por ejemplo, en el juego Loom encontramos que los ficheros de datos son: $ ls -l total 42436 -rw-r--r-- 1 edumoreno edumoreno 8307 ene 23 2005 000.LFL -rw-r--r-- 1 edumoreno edumoreno 2613 ene 23 2005 901.LFL -rw-r--r-- 1 edumoreno edumoreno 4193 ene 23 2005 902.LFL -rw-r--r-- 1 edumoreno edumoreno 2019 ene 23 2005 903.LFL -rw-r--r-- 1 edumoreno edumoreno 4388 ene 23 2005 904.LFL -rw-r--r-- 1 edumoreno edumoreno 4059462 ene 23 2005 DISK01.LEC -r--r--r-- 1 edumoreno edumoreno 39347931 dic 31 1999 Track1.mp3 Vamos a ver paso a paso c\u00f3mo instalar estos ficheros en la consola: Copiar estos ficheros en cualquier lugar de la consola, por ejemplo en el directorio /media/sdcard/roms/SCUMMVM/Loom que corresponde con el directorio roms/SCUMMVM/Loom en la ra\u00edz de la tarjeta externa. Abrir ScummVM. Tras unos segundos con la pantalla en negro aparecer\u00e1 el interfaz de ScummVM. El manejo del puntero se hace con el stick izquierdo o la cruceta y el click del rat\u00f3n con la tecla A : Pulsar el bot\u00f3n Add Game... . Aparece un explorador de ficheros apuntando a la ruta /media : Recorrer el sistema de ficheros hasta localizar la ruta donde tengamos los ficheros (en el siguiente pantallazo est\u00e1n en una ruta de la tarjeta interna): Pulsar el bot\u00f3n Choose . Aparece la ficha de configuraci\u00f3n del juego con 4 pesta\u00f1as donde podemos elegir algunos par\u00e1metros. De momento los dejaremos tal y como aparecen: Al pulsar OK regresamos a la pantalla principal en la que ya aparecer\u00e1 el juego cargado. Ya s\u00f3lo queda hacer doble click sobre el nombre del juego para que \u00e9ste arranque: En el siguiente video puede verse el proceso de instalaci\u00f3n del emulador y de los juegos: Controles \u00b6 A continuaci\u00f3n se muestran los controles de ScummVM: Control en RG350 Control en ScummVM o Efecto Stick izquierdo/Cruceta Movimiento del rat\u00f3n A Click izquierdo del rat\u00f3n B Click derecho del rat\u00f3n X ESPACIO - Pausa o salta el di\u00e1logo actual, dependiendo del juego Y PUNTO - Salta el di\u00e1logo actual, dependiendo del juego Start F5 - Men\u00fa de ScummVM Select Esc - Salta escena, dependiendo del juego L1 Shift - No se conocen juegos que lo utilicen R1 Muestra/oculta el teclado virtual","title":"RG350 ScummVM"},{"location":"2020-04-14-rg350_scummvm.html#instalacion-de-emulador","text":"La instalaci\u00f3n es como la de cualquier emulador en formato OPK: Descargar el OPK para RG350 del \u00faltimo release. En el momento de escribir este art\u00edculo es: scummvm-rg350-01132020.opk Copiarlo dentro del directorio apps de la microSD externa. Tambi\u00e9n puede copiarse en la tarjeta interna (en la ruta /media/data/apps , pero particularmente prefiero instalar las aplicaciones en la externa). Una vez instalado, reiniciar Gmenu2x pulsando Power+Select para asegurar el que aparezca:","title":"Instalaci\u00f3n de emulador"},{"location":"2020-04-14-rg350_scummvm.html#instalacion-de-juegos","text":"Los juegos que permite ejecutar ScummVM estaban basados en motores o engines desarrollados por sus comercializadores. As\u00ed pues los ficheros que vienen con estos juegos son el ejecutable del motor y los ficheros de datos del juego concreto. ScummVM sustituye \u00fanicamente al ejecutable del motor. Seremos nosotros los que suministraremos los ficheros de datos del juego que tengamos. Por ejemplo, en el juego Loom encontramos que los ficheros de datos son: $ ls -l total 42436 -rw-r--r-- 1 edumoreno edumoreno 8307 ene 23 2005 000.LFL -rw-r--r-- 1 edumoreno edumoreno 2613 ene 23 2005 901.LFL -rw-r--r-- 1 edumoreno edumoreno 4193 ene 23 2005 902.LFL -rw-r--r-- 1 edumoreno edumoreno 2019 ene 23 2005 903.LFL -rw-r--r-- 1 edumoreno edumoreno 4388 ene 23 2005 904.LFL -rw-r--r-- 1 edumoreno edumoreno 4059462 ene 23 2005 DISK01.LEC -r--r--r-- 1 edumoreno edumoreno 39347931 dic 31 1999 Track1.mp3 Vamos a ver paso a paso c\u00f3mo instalar estos ficheros en la consola: Copiar estos ficheros en cualquier lugar de la consola, por ejemplo en el directorio /media/sdcard/roms/SCUMMVM/Loom que corresponde con el directorio roms/SCUMMVM/Loom en la ra\u00edz de la tarjeta externa. Abrir ScummVM. Tras unos segundos con la pantalla en negro aparecer\u00e1 el interfaz de ScummVM. El manejo del puntero se hace con el stick izquierdo o la cruceta y el click del rat\u00f3n con la tecla A : Pulsar el bot\u00f3n Add Game... . Aparece un explorador de ficheros apuntando a la ruta /media : Recorrer el sistema de ficheros hasta localizar la ruta donde tengamos los ficheros (en el siguiente pantallazo est\u00e1n en una ruta de la tarjeta interna): Pulsar el bot\u00f3n Choose . Aparece la ficha de configuraci\u00f3n del juego con 4 pesta\u00f1as donde podemos elegir algunos par\u00e1metros. De momento los dejaremos tal y como aparecen: Al pulsar OK regresamos a la pantalla principal en la que ya aparecer\u00e1 el juego cargado. Ya s\u00f3lo queda hacer doble click sobre el nombre del juego para que \u00e9ste arranque: En el siguiente video puede verse el proceso de instalaci\u00f3n del emulador y de los juegos:","title":"Instalaci\u00f3n de juegos"},{"location":"2020-04-14-rg350_scummvm.html#controles","text":"A continuaci\u00f3n se muestran los controles de ScummVM: Control en RG350 Control en ScummVM o Efecto Stick izquierdo/Cruceta Movimiento del rat\u00f3n A Click izquierdo del rat\u00f3n B Click derecho del rat\u00f3n X ESPACIO - Pausa o salta el di\u00e1logo actual, dependiendo del juego Y PUNTO - Salta el di\u00e1logo actual, dependiendo del juego Start F5 - Men\u00fa de ScummVM Select Esc - Salta escena, dependiendo del juego L1 Shift - No se conocen juegos que lo utilicen R1 Muestra/oculta el teclado virtual","title":"Controles"},{"location":"2020-04-15-rg350_xmame.html","text":"xMAME es un port para UNIX del conocido multiemulador de m\u00e1quinas arcade MAME. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350. Instalaci\u00f3n \u00b6 El OPK que utilizaremos para instalarlo es s\u00f3lo eso, un instalador. Una vez que la instalaci\u00f3n haya terminado podremos borrarlo. El proceso es el siguiente: Bajar \u00e9ste OPK Copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Localizar el lanzador del instalador en GMenu2X: Abrir el instalador. Se nos preguntar\u00e1 si queremos instalar xMAME en la tarjeta interna o la externa. La selecci\u00f3n de uno u otro destino se hace pulsando izquierda o derecha: Confirmamos la instalaci\u00f3n con Start o cancelamos con Select . Al pulsar Start veremos una pantalla de texto durante un minuto aproximadamente (el error que se ve al principio en realidad no es del instalador sino un res\u00edduo del log de GMenu2X). Al finalizar la instalaci\u00f3n aparece brevemente un mensaje que nos indica que podemos borrar el instalador: Al regresar a GMenu2X ya deber\u00edamos ver el nuevo icono lanzador: Configuraci\u00f3n \u00b6 Si tratamos de abrir xMAME recien instalado, se cerrar\u00e1 mostrando brevemente un mensaje de error: Como vemos se queja de que no encuentra ROMs. xMAME tiene un comportamiento particular. Para empezar, en su versi\u00f3n 1.3, incluye tres versiones distintas de romsets : 0.37b16, tambi\u00e9n conocido como 0.52 0.69 0.84 Cada uno de estos romsets apuntan a un directorio diferente: 0.52 => /media/data/local/share/xmame/xmame52/roms 0.69 => /media/data/local/share/xmame/xmame69/roms 0.84 => /media/data/local/share/xmame/xmame84/roms Nota Las rutas anteriores corresponden a cuando la instalaci\u00f3n ha sido hecha sobre la tarjeta interna. En caso de hacerlo sobre la externa la ruta base es /media/sdcard/apps/xmame Es aqu\u00ed donde debemos colocar al menos una ROM para que el programa se mantenga abierto y nos muestre su frontend: Gesti\u00f3n unificada de ROMs Existe una forma de evitar tener que triplicar las ROMs entre los tres directorios y es sustituirlos por tres enlaces simb\u00f3licos hacia una \u00fanica ruta. Esto lo podemos lograr ejecutando los siguientes comandos por consola (por SSH por ejemplo). La ruta utilizada deber\u00e1 existir previamente ( /media/data/roms/ARCADE/ en el ejemplo): # rm -rf /media/data/local/share/xmame/xmame52/roms # rm -rf /media/data/local/share/xmame/xmame69/roms # rm -rf /media/data/local/share/xmame/xmame84/roms # ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame52/roms # ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame69/roms # ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame84/roms Previews \u00b6 Como la mayor\u00eda de emuladores, xMAME soporta un sistema de previsualizaci\u00f3n de las ROMs para ayudar a identificar los juegos en el listado. Las im\u00e1genes tienen que colocarse en el directorio /media/data/local/share/xmame/resource/snap y llamarse igual que las ROMs excepto por la extensi\u00f3n .png . Por ejemplo para previsualizar la ROM /media/data/local/share/xmame/xmame52/roms/bombjack.zip tendr\u00e1 que existir el fichero /media/data/local/share/xmame/resource/snap/bombjack.png . Si es as\u00ed, en el listado de ROMs veremos lo siguiente: En realidad puede haber m\u00e1s de una imagen por ROM. Se puede poner una secuencia de im\u00e1genes que aparecer\u00e1n en sucesi\u00f3n en el frontend (cada 3 \u00f3 4 segundos aproximadamente). Los nombres de las im\u00e1genes deben ser como cuando la imagen es \u00fanica, es decir con el mismo nombre de la ROM, m\u00e1s un n\u00famero correlativo de dos cifras empezando por 00 . Por ejemplo, para el caso de la ROM comentada antes, una serie de 5 im\u00e1genes se conseguir\u00eda con los ficheros: bombjack.png , bombjack00.png , bombjack01.png , bombjack02.png y bombjack03.png . No es casualidad que el directorio donde se almacenan los snapshots o pantallazos del juego (se hacen con la combinaci\u00f3n de teclas Start + Abajo ), terminen en el mismo directorio de las previews, y que los nombres de estos pantallazos vayan incorporando esta numeraci\u00f3n sucesivamente. De esta forma, cada pantallazo que hagamos se incorporar\u00e1 a la secuencia de previews. Previews compatibles con GMenu2X Como siempre nos interesa hacer compatible este sistema de previews con el propio de GMenu2X para as\u00ed evitar tener las im\u00e1genes duplicadas en dos rutas distintas. Vamos a partir de la situaci\u00f3n en la que hemos unificado la ruta de las ROMs del truco anterior, es decir que los tres directorios correspondientes a los tres romsets apuntan a /media/data/roms/ARCADE/ . En este caso el directorio de previews deber\u00eda ser: /media/data/roms/ARCADE/.previews/ . Para convertir este directorio en el que utiliza xMAME, de nuevo haremos un parche en el sistema de ficheros con un enlace simb\u00f3lico: # rm -rf /media/data/local/share/xmame/resource/snap # ln -s /media/data/roms/ARCADE/.previews/ /media/data/local/share/xmame/resource/snap Como recopilar todas las previews de las ROMs es una tarea inabarcable manualmente, podemos como siempre utilizar un scraper , o bajar un lote preparado ya por alguien como \u00e9ste . Integraci\u00f3n en frontends \u00b6 Para que un emulador sea integrado correctamente en un frontend como EmulationStation , PyMenu o SimpleMenu necesitamos que el emulador pueda ser ejecutado por linea de comando y que acepte como argumentos la ruta de la ROM a emular. En el caso de xMAME hay tres ejecutables que se pueden invocar de esta forma, uno por cada versi\u00f3n de romset. Los ejecutables son los siguientes: /media/data/local/share/xmame/xmame52/xmame.SDL.52 /media/data/local/share/xmame/xmame69/xmame.SDL.69 /media/data/local/share/xmame/xmame84/xmame.SDL.84 En frontends que s\u00f3lo admitan un ejecutable como EmulationStation no tendremos m\u00e1s remedio que elegir uno de los tres (lo m\u00e1s l\u00f3gico es escoger el romset 84). En frontends como PyMenu o SimpleMenu podemos indicar los tres ejecutables para seleccionarlos luego antes de lanzar la ROM. Por ejemplo en SimpleMenu tendr\u00edamos: [MAME] execs = /media/data/local/share/xmame/xmame52/xmame.SDL.52,/media/data/local/share/xmame/xmame69/xmame.SDL.69,/media/data/local/share/xmame/xmame84/xmame.SDL.84 romDirs = /media/data/roms/ARCADE/,/media/sdcard/roms/ARCADE/ romExts = .zip aliasFile = /media/home/.simplemenu/alias.txt onlyFileNamesNoPathOrExtension = yes Controles \u00b6 A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de xMAME: Control Situaci\u00f3n Funci\u00f3n Arriba / Abajo En frontend Seleccionar ROM una a una Izquierda / Derecha En frontend Seleccionar ROM p\u00e1gina a p\u00e1gina Select En frontend Salir Start En frontend Refresca lista de ROMs L1 En frontend Cambia el filtro de ROMs entre Available Game , Available Clones , Favourites y All Games R1 En frontend Cambia entre las versiones de xMAME: 0.52 , 0.69 y 0.84 A En frontend Arranca un juego y selecci\u00f3n de opciones Y En frontend A\u00f1ade/quita de favoritos Select + R1 En juego Insertar moneda Select + L1 En juego Comenzar 1P Select + L1 + R1 En juego Salir L1 + R1 En juego Pausa Start + R1 En juego Mostrar FPS Start + L1 En juego Men\u00fa de configuraci\u00f3n Start + Abajo En juego Hacer captura de pantalla (se almacena en /media/data/local/share/xmame/xmameVV/snap ) Start + Izquierda En juego Guardar state. Luego seleccionar casilla de guardado (por letras, hay 29) y pulsar A Start + Derecha En juego Recuperar state. Luego seleccionar casilla donde se guard\u00f3 y pulsar A","title":"RG350 xMAME"},{"location":"2020-04-15-rg350_xmame.html#instalacion","text":"El OPK que utilizaremos para instalarlo es s\u00f3lo eso, un instalador. Una vez que la instalaci\u00f3n haya terminado podremos borrarlo. El proceso es el siguiente: Bajar \u00e9ste OPK Copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Localizar el lanzador del instalador en GMenu2X: Abrir el instalador. Se nos preguntar\u00e1 si queremos instalar xMAME en la tarjeta interna o la externa. La selecci\u00f3n de uno u otro destino se hace pulsando izquierda o derecha: Confirmamos la instalaci\u00f3n con Start o cancelamos con Select . Al pulsar Start veremos una pantalla de texto durante un minuto aproximadamente (el error que se ve al principio en realidad no es del instalador sino un res\u00edduo del log de GMenu2X). Al finalizar la instalaci\u00f3n aparece brevemente un mensaje que nos indica que podemos borrar el instalador: Al regresar a GMenu2X ya deber\u00edamos ver el nuevo icono lanzador:","title":"Instalaci\u00f3n"},{"location":"2020-04-15-rg350_xmame.html#configuracion","text":"Si tratamos de abrir xMAME recien instalado, se cerrar\u00e1 mostrando brevemente un mensaje de error: Como vemos se queja de que no encuentra ROMs. xMAME tiene un comportamiento particular. Para empezar, en su versi\u00f3n 1.3, incluye tres versiones distintas de romsets : 0.37b16, tambi\u00e9n conocido como 0.52 0.69 0.84 Cada uno de estos romsets apuntan a un directorio diferente: 0.52 => /media/data/local/share/xmame/xmame52/roms 0.69 => /media/data/local/share/xmame/xmame69/roms 0.84 => /media/data/local/share/xmame/xmame84/roms Nota Las rutas anteriores corresponden a cuando la instalaci\u00f3n ha sido hecha sobre la tarjeta interna. En caso de hacerlo sobre la externa la ruta base es /media/sdcard/apps/xmame Es aqu\u00ed donde debemos colocar al menos una ROM para que el programa se mantenga abierto y nos muestre su frontend: Gesti\u00f3n unificada de ROMs Existe una forma de evitar tener que triplicar las ROMs entre los tres directorios y es sustituirlos por tres enlaces simb\u00f3licos hacia una \u00fanica ruta. Esto lo podemos lograr ejecutando los siguientes comandos por consola (por SSH por ejemplo). La ruta utilizada deber\u00e1 existir previamente ( /media/data/roms/ARCADE/ en el ejemplo): # rm -rf /media/data/local/share/xmame/xmame52/roms # rm -rf /media/data/local/share/xmame/xmame69/roms # rm -rf /media/data/local/share/xmame/xmame84/roms # ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame52/roms # ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame69/roms # ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame84/roms","title":"Configuraci\u00f3n"},{"location":"2020-04-15-rg350_xmame.html#previews","text":"Como la mayor\u00eda de emuladores, xMAME soporta un sistema de previsualizaci\u00f3n de las ROMs para ayudar a identificar los juegos en el listado. Las im\u00e1genes tienen que colocarse en el directorio /media/data/local/share/xmame/resource/snap y llamarse igual que las ROMs excepto por la extensi\u00f3n .png . Por ejemplo para previsualizar la ROM /media/data/local/share/xmame/xmame52/roms/bombjack.zip tendr\u00e1 que existir el fichero /media/data/local/share/xmame/resource/snap/bombjack.png . Si es as\u00ed, en el listado de ROMs veremos lo siguiente: En realidad puede haber m\u00e1s de una imagen por ROM. Se puede poner una secuencia de im\u00e1genes que aparecer\u00e1n en sucesi\u00f3n en el frontend (cada 3 \u00f3 4 segundos aproximadamente). Los nombres de las im\u00e1genes deben ser como cuando la imagen es \u00fanica, es decir con el mismo nombre de la ROM, m\u00e1s un n\u00famero correlativo de dos cifras empezando por 00 . Por ejemplo, para el caso de la ROM comentada antes, una serie de 5 im\u00e1genes se conseguir\u00eda con los ficheros: bombjack.png , bombjack00.png , bombjack01.png , bombjack02.png y bombjack03.png . No es casualidad que el directorio donde se almacenan los snapshots o pantallazos del juego (se hacen con la combinaci\u00f3n de teclas Start + Abajo ), terminen en el mismo directorio de las previews, y que los nombres de estos pantallazos vayan incorporando esta numeraci\u00f3n sucesivamente. De esta forma, cada pantallazo que hagamos se incorporar\u00e1 a la secuencia de previews. Previews compatibles con GMenu2X Como siempre nos interesa hacer compatible este sistema de previews con el propio de GMenu2X para as\u00ed evitar tener las im\u00e1genes duplicadas en dos rutas distintas. Vamos a partir de la situaci\u00f3n en la que hemos unificado la ruta de las ROMs del truco anterior, es decir que los tres directorios correspondientes a los tres romsets apuntan a /media/data/roms/ARCADE/ . En este caso el directorio de previews deber\u00eda ser: /media/data/roms/ARCADE/.previews/ . Para convertir este directorio en el que utiliza xMAME, de nuevo haremos un parche en el sistema de ficheros con un enlace simb\u00f3lico: # rm -rf /media/data/local/share/xmame/resource/snap # ln -s /media/data/roms/ARCADE/.previews/ /media/data/local/share/xmame/resource/snap Como recopilar todas las previews de las ROMs es una tarea inabarcable manualmente, podemos como siempre utilizar un scraper , o bajar un lote preparado ya por alguien como \u00e9ste .","title":"Previews"},{"location":"2020-04-15-rg350_xmame.html#integracion-en-frontends","text":"Para que un emulador sea integrado correctamente en un frontend como EmulationStation , PyMenu o SimpleMenu necesitamos que el emulador pueda ser ejecutado por linea de comando y que acepte como argumentos la ruta de la ROM a emular. En el caso de xMAME hay tres ejecutables que se pueden invocar de esta forma, uno por cada versi\u00f3n de romset. Los ejecutables son los siguientes: /media/data/local/share/xmame/xmame52/xmame.SDL.52 /media/data/local/share/xmame/xmame69/xmame.SDL.69 /media/data/local/share/xmame/xmame84/xmame.SDL.84 En frontends que s\u00f3lo admitan un ejecutable como EmulationStation no tendremos m\u00e1s remedio que elegir uno de los tres (lo m\u00e1s l\u00f3gico es escoger el romset 84). En frontends como PyMenu o SimpleMenu podemos indicar los tres ejecutables para seleccionarlos luego antes de lanzar la ROM. Por ejemplo en SimpleMenu tendr\u00edamos: [MAME] execs = /media/data/local/share/xmame/xmame52/xmame.SDL.52,/media/data/local/share/xmame/xmame69/xmame.SDL.69,/media/data/local/share/xmame/xmame84/xmame.SDL.84 romDirs = /media/data/roms/ARCADE/,/media/sdcard/roms/ARCADE/ romExts = .zip aliasFile = /media/home/.simplemenu/alias.txt onlyFileNamesNoPathOrExtension = yes","title":"Integraci\u00f3n en frontends"},{"location":"2020-04-15-rg350_xmame.html#controles","text":"A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de xMAME: Control Situaci\u00f3n Funci\u00f3n Arriba / Abajo En frontend Seleccionar ROM una a una Izquierda / Derecha En frontend Seleccionar ROM p\u00e1gina a p\u00e1gina Select En frontend Salir Start En frontend Refresca lista de ROMs L1 En frontend Cambia el filtro de ROMs entre Available Game , Available Clones , Favourites y All Games R1 En frontend Cambia entre las versiones de xMAME: 0.52 , 0.69 y 0.84 A En frontend Arranca un juego y selecci\u00f3n de opciones Y En frontend A\u00f1ade/quita de favoritos Select + R1 En juego Insertar moneda Select + L1 En juego Comenzar 1P Select + L1 + R1 En juego Salir L1 + R1 En juego Pausa Start + R1 En juego Mostrar FPS Start + L1 En juego Men\u00fa de configuraci\u00f3n Start + Abajo En juego Hacer captura de pantalla (se almacena en /media/data/local/share/xmame/xmameVV/snap ) Start + Izquierda En juego Guardar state. Luego seleccionar casilla de guardado (por letras, hay 29) y pulsar A Start + Derecha En juego Recuperar state. Luego seleccionar casilla donde se guard\u00f3 y pulsar A","title":"Controles"},{"location":"2020-05-04-rg350_daphne.html","text":"Daphne es un emulador de m\u00faltiples m\u00e1quinas arcade basadas en LaserDisc. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350. Instalaci\u00f3n \u00b6 El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Juegos \u00b6 Los juegos de Daphne se parecen mucho a las ROMs de xMAME o FBA , es decir consisten en una serie de ficheros con el volcado de los chips ROM de memoria que ten\u00eda la m\u00e1quina del juego. A estos ficheros que normalmente se re\u00fanen en un archivo ZIP, hay que acompa\u00f1arlos en el caso de Daphne con los medios (audio y video) que iban grabados en un LaserDisc. Para que Daphne funcione, deberemos disponer los ficheros de medios y las ROMs en ZIP del juego en un mismo directorio. Dentro del directorio, cada juego constar\u00e1 de los siguientes 4 tipos de ficheros: juego.zip : Las ROMs del juego. juego.txt : Fichero de texto que contiene una referencia interna al de video. juego.ogg : Fichero con el audio del juego. juego.m2v : Fichero con el video del juego. Es muy probable que junto a los 4 ficheros anteriores, encontremos otro de tipo juego.dat . Este fichero lo generar\u00e1 el propio Daphne de acuerdo a las caracter\u00edsticas de la pantalla de la consola por lo que aunque nos venga en el lote no lo copiaremos junto al resto. Por ejemplo el juego Interestellar contiene los siguientes ficheros: RG350:/media/data/roms/DAPHNE/Interestellar # ls -l -rwxr-xr-x 1 root root 142239907 May 4 15:49 interstellar.m2v -rwxr-xr-x 1 root root 25741275 May 4 15:49 interstellar.ogg -rwxr-xr-x 1 root root 25 May 4 15:49 interstellar.txt -rwxr-xr-x 1 root root 40150 May 4 15:49 interstellar.zip Hay que adaptar el fichero de video ( .m2v ) a la resoluci\u00f3n de la consola (en el caso de la RG350 320x240). En este tutorial encontramos instrucciones detalladas para hacerlo mediante la utilidad ffmpeg . La primera vez que ejecutemos el juego, Daphne generar\u00e1 el fichero .dat en el directorio del juego. Nos pedir\u00e1 que pulsemos Y para iniciar el proceso, pero la indicaci\u00f3n es incorrecta. Es X o Start lo que debemos pulsar. El proceso tardar\u00e1 unos pocos segundos. Tras terminar este proceso el juego arrancar\u00e1. Por \u00faltimo incluyo a continuaci\u00f3n una valoraci\u00f3n personal de algunos juegos que he podido probar: Nombre ROM Tipo Dificultad Valoraci\u00f3n Astron Belt astron Vuelo 6 8 Bad Lands badlands Dragon's Lair 9 7 Bega's Battle bega Shoot 'em up 6 6 Cliff Hanger cliff Dragon's Lair 9 7 Cobra Command cobra Vuelo 7 7 Dragon's Lair lair Dragon's Lair 9 7 Esh's Aurunmilla esh Dragon's Lair 8 7 Galaxy Ranger galaxyr Vuelo 6 7 GP World gpworld Coches 7 5 Interestellar interestellar Vuelo 6 8 M.A.C.H. 3 mach3 Vuelo 9 5 Road Blaster roadblaster Coches 6 7 Space Ace ace Dragon's Lair 9 7 Super Don Quijote sdq Dragon's Lair 8 7 Thayer's Quest tq ? (no empieza la partida) ? ? Us vs Them uvt Vuelo 10 (creo que funciona mal) 5 Previews \u00b6 Como hemos comentado, Daphne se comporta como un emulador convencional, por lo que las previews se gestionan de la manera habitual, que como siempre depender\u00e1 del frontend que estemos utilizando. Por ejemplo en el caso de GMenu2X, tendremos que poner la imagen .png en un directorio de nombre .previews a la altura donde se encuentre el .zip con las ROMs. El nombre de la imagen ser\u00e1 el mismo que el del .zip . Por ejemplo en el caso anterior del juego Interestellar , la imagen ir\u00eda de esta forma: RG350:/media/data/roms/DAPHNE/Interestellar # ls -laR .: drwxr-xr-x 3 root root 4096 May 4 15:57 . drwxr-xr-x 3 root root 4096 May 4 15:48 .. drwxr-xr-x 2 root root 4096 May 4 15:57 .previews -rwxr-xr-x 1 root root 142239907 May 4 15:49 interstellar.m2v -rwxr-xr-x 1 root root 25741275 May 4 15:49 interstellar.ogg -rwxr-xr-x 1 root root 25 May 4 15:49 interstellar.txt -rwxr-xr-x 1 root root 40150 May 4 15:49 interstellar.zip ./.previews: drwxr-xr-x 2 root root 4096 May 4 15:57 . drwxr-xr-x 3 root root 4096 May 4 15:57 .. -rw-r--r-- 1 root root 86709 May 4 15:56 interstellar.png Integraci\u00f3n en frontends \u00b6 La integraci\u00f3n con frontends tambi\u00e9n es de la manera convencional. Por ejemplo \u00e9sta podr\u00eda ser la definici\u00f3n de una secci\u00f3n para DAPHNE en SimpleMenu: [DAPHNE] execs = /media/data/apps/Daphne_2015-05-07.opk romDirs = /media/data/roms/DAPHNE/,/media/sdcard/roms/DAPHNE/ romExts = .zip aliasFile = /media/home/.simplemenu/alias.txt Controles \u00b6 A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de Daphne: Control Funci\u00f3n Cruceta/Stick izquierdo Direcci\u00f3n. Un consejo: Utiliza mejor el stick B Bot\u00f3n 1 A Bot\u00f3n 2 Y Bot\u00f3n 3 X Intercambia controles verticales (para simuladores de vuelo) R1 Pausa L1 Insertar moneda (jugador 1) Start Comenzar juego (tras haber insertado moneda) Select Salir del emulador","title":"RG350 Daphne"},{"location":"2020-05-04-rg350_daphne.html#instalacion","text":"El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps","title":"Instalaci\u00f3n"},{"location":"2020-05-04-rg350_daphne.html#juegos","text":"Los juegos de Daphne se parecen mucho a las ROMs de xMAME o FBA , es decir consisten en una serie de ficheros con el volcado de los chips ROM de memoria que ten\u00eda la m\u00e1quina del juego. A estos ficheros que normalmente se re\u00fanen en un archivo ZIP, hay que acompa\u00f1arlos en el caso de Daphne con los medios (audio y video) que iban grabados en un LaserDisc. Para que Daphne funcione, deberemos disponer los ficheros de medios y las ROMs en ZIP del juego en un mismo directorio. Dentro del directorio, cada juego constar\u00e1 de los siguientes 4 tipos de ficheros: juego.zip : Las ROMs del juego. juego.txt : Fichero de texto que contiene una referencia interna al de video. juego.ogg : Fichero con el audio del juego. juego.m2v : Fichero con el video del juego. Es muy probable que junto a los 4 ficheros anteriores, encontremos otro de tipo juego.dat . Este fichero lo generar\u00e1 el propio Daphne de acuerdo a las caracter\u00edsticas de la pantalla de la consola por lo que aunque nos venga en el lote no lo copiaremos junto al resto. Por ejemplo el juego Interestellar contiene los siguientes ficheros: RG350:/media/data/roms/DAPHNE/Interestellar # ls -l -rwxr-xr-x 1 root root 142239907 May 4 15:49 interstellar.m2v -rwxr-xr-x 1 root root 25741275 May 4 15:49 interstellar.ogg -rwxr-xr-x 1 root root 25 May 4 15:49 interstellar.txt -rwxr-xr-x 1 root root 40150 May 4 15:49 interstellar.zip Hay que adaptar el fichero de video ( .m2v ) a la resoluci\u00f3n de la consola (en el caso de la RG350 320x240). En este tutorial encontramos instrucciones detalladas para hacerlo mediante la utilidad ffmpeg . La primera vez que ejecutemos el juego, Daphne generar\u00e1 el fichero .dat en el directorio del juego. Nos pedir\u00e1 que pulsemos Y para iniciar el proceso, pero la indicaci\u00f3n es incorrecta. Es X o Start lo que debemos pulsar. El proceso tardar\u00e1 unos pocos segundos. Tras terminar este proceso el juego arrancar\u00e1. Por \u00faltimo incluyo a continuaci\u00f3n una valoraci\u00f3n personal de algunos juegos que he podido probar: Nombre ROM Tipo Dificultad Valoraci\u00f3n Astron Belt astron Vuelo 6 8 Bad Lands badlands Dragon's Lair 9 7 Bega's Battle bega Shoot 'em up 6 6 Cliff Hanger cliff Dragon's Lair 9 7 Cobra Command cobra Vuelo 7 7 Dragon's Lair lair Dragon's Lair 9 7 Esh's Aurunmilla esh Dragon's Lair 8 7 Galaxy Ranger galaxyr Vuelo 6 7 GP World gpworld Coches 7 5 Interestellar interestellar Vuelo 6 8 M.A.C.H. 3 mach3 Vuelo 9 5 Road Blaster roadblaster Coches 6 7 Space Ace ace Dragon's Lair 9 7 Super Don Quijote sdq Dragon's Lair 8 7 Thayer's Quest tq ? (no empieza la partida) ? ? Us vs Them uvt Vuelo 10 (creo que funciona mal) 5","title":"Juegos"},{"location":"2020-05-04-rg350_daphne.html#previews","text":"Como hemos comentado, Daphne se comporta como un emulador convencional, por lo que las previews se gestionan de la manera habitual, que como siempre depender\u00e1 del frontend que estemos utilizando. Por ejemplo en el caso de GMenu2X, tendremos que poner la imagen .png en un directorio de nombre .previews a la altura donde se encuentre el .zip con las ROMs. El nombre de la imagen ser\u00e1 el mismo que el del .zip . Por ejemplo en el caso anterior del juego Interestellar , la imagen ir\u00eda de esta forma: RG350:/media/data/roms/DAPHNE/Interestellar # ls -laR .: drwxr-xr-x 3 root root 4096 May 4 15:57 . drwxr-xr-x 3 root root 4096 May 4 15:48 .. drwxr-xr-x 2 root root 4096 May 4 15:57 .previews -rwxr-xr-x 1 root root 142239907 May 4 15:49 interstellar.m2v -rwxr-xr-x 1 root root 25741275 May 4 15:49 interstellar.ogg -rwxr-xr-x 1 root root 25 May 4 15:49 interstellar.txt -rwxr-xr-x 1 root root 40150 May 4 15:49 interstellar.zip ./.previews: drwxr-xr-x 2 root root 4096 May 4 15:57 . drwxr-xr-x 3 root root 4096 May 4 15:57 .. -rw-r--r-- 1 root root 86709 May 4 15:56 interstellar.png","title":"Previews"},{"location":"2020-05-04-rg350_daphne.html#integracion-en-frontends","text":"La integraci\u00f3n con frontends tambi\u00e9n es de la manera convencional. Por ejemplo \u00e9sta podr\u00eda ser la definici\u00f3n de una secci\u00f3n para DAPHNE en SimpleMenu: [DAPHNE] execs = /media/data/apps/Daphne_2015-05-07.opk romDirs = /media/data/roms/DAPHNE/,/media/sdcard/roms/DAPHNE/ romExts = .zip aliasFile = /media/home/.simplemenu/alias.txt","title":"Integraci\u00f3n en frontends"},{"location":"2020-05-04-rg350_daphne.html#controles","text":"A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de Daphne: Control Funci\u00f3n Cruceta/Stick izquierdo Direcci\u00f3n. Un consejo: Utiliza mejor el stick B Bot\u00f3n 1 A Bot\u00f3n 2 Y Bot\u00f3n 3 X Intercambia controles verticales (para simuladores de vuelo) R1 Pausa L1 Insertar moneda (jugador 1) Start Comenzar juego (tras haber insertado moneda) Select Salir del emulador","title":"Controles"},{"location":"2020-05-06-rg350_openbor.html","text":"OpenBOR es un motor para juegos de scroll horizontal basados en sprites publicado con una licencia libre de royalties. Surgi\u00f3 a partir de que unos aficionados hicieran un homenaje al juego de SEGA Streets of Rage al que llamaron Beats of Rage . A partir de \u00e9l desarrollaron el motor de juegos llamado Open Beats of Rage u OpenBOR. Instalaci\u00f3n \u00b6 El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Juegos \u00b6 Los juegos de OpenBOR se encuentran como unos ficheros de extensi\u00f3n .pak . La gesti\u00f3n de los juegos se tiene que hacer desde el propio interfaz o frontend de OpenBOR (de manera parecida a como ocurre con xMAME o FBA). Al igual que ocurre en xMAME las rutas donde deben estar estos ficheros son fijas. Concretamente: Interna: /usr/local/share/OpenBOR/Paks/ Externa: /media/sdcard/OpenBOR/Paks Rutas de ROMs alternativas Como siempre, jugando con enlaces simb\u00f3licos podemos hacer que estos directorios apunten a donde nosotros queramos. Por ejemplo, para pasar a utilizar las rutas m\u00e1s habituales en /media/data/roms y /media/sdcard/roms , podr\u00edamos ejecutar lo siguiente: # rm -rf /usr/local/share/OpenBOR/Paks # rm -rf /media/sdcard/OpenBOR/Paks # ln -s /media/data/roms/OPENBOR/ /usr/local/share/OpenBOR/Paks # ln -s /media/sdcard/roms/OPENBOR/ /media/sdcard/OpenBOR/Paks Integraci\u00f3n en frontends \u00b6 Como hemos comentado antes, OpenBOR tiene su propio frontend y no parece que haya una forma de lanzar una ROM concreta por l\u00ednea de comando (o al menos yo no la he encontrado), por lo que no tenemos m\u00e1s remedio que abrir el propio OpenBOR, y luego a trav\u00e9s de su interfaz, lanzar los juegos. Afortunadamente, de forma predeterminada, el OPK de OpenBOR se instala en la secci\u00f3n games de GMenu2X, por lo que frontends como SimpleMenu muestran el lanzador en la secci\u00f3n de ese mismo nombre. Controles \u00b6 En el frontend de OpenBOR se nos informa en la barra inferior sobre los controles, pero hay que tener en cuenta que X e Y est\u00e1n intercambiados (no as\u00ed A y B ).","title":"RG350 OpenBOR"},{"location":"2020-05-06-rg350_openbor.html#instalacion","text":"El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps","title":"Instalaci\u00f3n"},{"location":"2020-05-06-rg350_openbor.html#juegos","text":"Los juegos de OpenBOR se encuentran como unos ficheros de extensi\u00f3n .pak . La gesti\u00f3n de los juegos se tiene que hacer desde el propio interfaz o frontend de OpenBOR (de manera parecida a como ocurre con xMAME o FBA). Al igual que ocurre en xMAME las rutas donde deben estar estos ficheros son fijas. Concretamente: Interna: /usr/local/share/OpenBOR/Paks/ Externa: /media/sdcard/OpenBOR/Paks Rutas de ROMs alternativas Como siempre, jugando con enlaces simb\u00f3licos podemos hacer que estos directorios apunten a donde nosotros queramos. Por ejemplo, para pasar a utilizar las rutas m\u00e1s habituales en /media/data/roms y /media/sdcard/roms , podr\u00edamos ejecutar lo siguiente: # rm -rf /usr/local/share/OpenBOR/Paks # rm -rf /media/sdcard/OpenBOR/Paks # ln -s /media/data/roms/OPENBOR/ /usr/local/share/OpenBOR/Paks # ln -s /media/sdcard/roms/OPENBOR/ /media/sdcard/OpenBOR/Paks","title":"Juegos"},{"location":"2020-05-06-rg350_openbor.html#integracion-en-frontends","text":"Como hemos comentado antes, OpenBOR tiene su propio frontend y no parece que haya una forma de lanzar una ROM concreta por l\u00ednea de comando (o al menos yo no la he encontrado), por lo que no tenemos m\u00e1s remedio que abrir el propio OpenBOR, y luego a trav\u00e9s de su interfaz, lanzar los juegos. Afortunadamente, de forma predeterminada, el OPK de OpenBOR se instala en la secci\u00f3n games de GMenu2X, por lo que frontends como SimpleMenu muestran el lanzador en la secci\u00f3n de ese mismo nombre.","title":"Integraci\u00f3n en frontends"},{"location":"2020-05-06-rg350_openbor.html#controles","text":"En el frontend de OpenBOR se nos informa en la barra inferior sobre los controles, pero hay que tener en cuenta que X e Y est\u00e1n intercambiados (no as\u00ed A y B ).","title":"Controles"},{"location":"2020-05-08-rg350_dosbox.html","text":"DOSBox recrea un entorno MS-DOS virtual para permitir ejecutar los viejos juegos aparecidos en los 80-90 para esta plataforma. Soporta sonido, controles de entrada y gr\u00e1ficos. Instalaci\u00f3n \u00b6 El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Una vez instalado se puede ejecutar el entorno sin ning\u00fan juego para as\u00ed alcanzar algunas utilidades que ayudan a la configuraci\u00f3n del mismo. Para conseguir llegar al prompt, hay que editar el lanzador de GMenu2X, dejar en blanco el par\u00e1metro Selector Directory (ojo porque cada vez que se arranca toma el valor /media , por lo que hay que limpiarlo cada vez) y poner OFF en el par\u00e1metro Selector Browser : Cuando lo lancemos aparecer\u00e1 la t\u00edpica pantalla de DOS. La pantalla tiene una resoluci\u00f3n de 640x400 por lo que en la pantalla de la RG350 se ver\u00e1 muy mal por el reescalado a 320x240 (para esto puede venir bien la reciente publicaci\u00f3n de un update que permite activar la salida de video HDMI que soporta esta resoluci\u00f3n): Como se puede leer ah\u00ed, tecleando INTRO mediante el teclado virtual (que aparece pulsando L1 ) se nos muestran varias pantallas con informaci\u00f3n: Configuraci\u00f3n \u00b6 El concepto m\u00e1s importante de entender en DOSBox es el del fichero de configuraci\u00f3n o dosbox.conf . Cuando arrancamos por primera vez DOSBox, se genera un fichero de configuraci\u00f3n gen\u00e9rico en el directorio /media/data/local/home/.dosbox . En concreto en la versi\u00f3n compilada para la RG350 este fichero tiene de nombre dosbox-SVN.conf . Dentro de \u00e9l est\u00e1n todos los ajustes que aplicar\u00e1n a los programas o juegos que ejecutemos en DOSBox. En particular hay un ajuste de la configuraci\u00f3n que se volver\u00e1 fundamental en la mayor\u00eda de los juegos y es el del mapeado del teclado. En la documentaci\u00f3n de este fichero vemos que los controles tienen su propio fichero de configuraci\u00f3n al que se apunta desde el dosbox.conf mediante el par\u00e1metro mapperfile . Un fichero mapper t\u00edpico contiene la relaci\u00f3n entre los c\u00f3digos de las teclas de un teclado de PC y las de los controles de la consola. En cada l\u00ednea del fichero se indica un c\u00f3digo de teclado de PC y a continuaci\u00f3n entre comillas el c\u00f3digo del pulsador de la RG350 con la palabra key delante separada del c\u00f3digo por un espacio (m\u00e1s adelante se muestran ejemplos). Los c\u00f3digos de teclado de PC m\u00e1s importantes son: key_a hasta key_z para las letras key_0 hasta key_9 para los n\u00fameros key_kp_0 hasta key_kp_9 para el teclado num\u00e9rico key_kp_enter para enter en teclado num\u00e9rico key_f1 hasta key_f12 para las teclas de funci\u00f3n key_up , key_down , key_left , key_right para las teclas de cursor key_lalt , key_lctrl , key_lshift , key_alt , key_ctrl , key_shift para las teclas modificadoras key_enter , key_esc , key_space , key_tab Se adjunta aqu\u00ed un fichero todos los c\u00f3digos de teclado y joystick de PC que soporta DOSBox. Los c\u00f3digos de los controles de la RG350 son los siguientes: Control C\u00f3digo Tecla de PC en mapper predeterminado A 306 key_lctrl B 308 key_lalt X 32 key_space Y 304 key_lshift L1 9 key_tab L2 280 key_pageup R1 8 key_bspace R2 281 key_pagedown UP 273 key_up DOWN 274 key_down LEFT 276 key_left RIGHT 275 key_right START 13 key_enter SELECT 27 key_esc POWER 278 key_home Por ejemplo para mapear la tecla A de un PC al control A de la RG350 habr\u00eda que incluir la siguiente l\u00ednea en el fichero de mapper: key_a \"key 306\" Como ejemplo vamos a elaborar el mapper para el juego Prince of Persia . Un listado b\u00e1sico de los controles de este juego ser\u00eda: Tecla Efecto Cursores Movimiento LShift Paso lento/Coger/Luchar Enter Empezar Espacio Muestra tiempo que queda Escape Pausa Ctrl-R Termina el juego y vuelve a la secuencia de t\u00edtulo Ctrl-A Reinicia el juego al comienzo del nivel actual Ctrl-S Apaga/enciende el sonido Ctrl-Q Cierra el juego y retorna a MS-DOS As\u00ed pues vamos a establecer las siguientes relaciones entre las teclas de un PC y los controles de la RG350 (la tecla L1 la evitaremos puesto que siempre saca el teclado virtual): Tecla PC Control RG350 Cursor arriba UP Cursor abajo DOWN Cursor derecha RIGHT Cursor izquierda LEFT LShift A Enter START Espacio B Escape SELECT LCtrl L2 R X A Y S R2 Q R1 Lo que traducido a un fichero de mapper se convierte en: key_up \"key 273\" key_down \"key 274\" key_right \"key 275\" key_left \"key 276\" key_lshift \"key 306\" key_enter \"key 13\" key_space \"key 308\" key_esc \"key 27\" key_lctrl \"key 280\" key_r \"key 32\" key_a \"key 304\" key_s \"key 281\" key_q \"key 8\" Creamos el fichero con el contenido anterior y lo dejamos en /media/data/local/home/.dosbox/mapper.txt . Finalmente editamos el fichero /media/data/local/home/.dosbox/dosbox-SVN.conf para que el par\u00e1metro mapperfile apunte al nuevo fichero. A partir de entonces podremos utilizar el juego con los nuevos controles. La tabla inicial de controles con los equivalentes en RG350 queda ahora: Tecla PC Efecto Control RG350 Cursores Movimiento Cruceta LShift Paso lento/Coger/Luchar A Enter Empezar START Espacio Muestra tiempo que queda B Escape Pausa SELECT Ctrl-R Termina el juego y vuelve a la secuencia de t\u00edtulo L2 + X Ctrl-A Reinicia el juego al comienzo del nivel actual L2 + Y Ctrl-S Apaga/enciende el sonido L2 + R2 Ctrl-Q Cierra el juego y retorna a MS-DOS L2 + R1 Por \u00faltimo se incluyen a continuaci\u00f3n una serie de enlaces de documentaci\u00f3n que pueden servir de ayuda: Documentaci\u00f3n Tutorial dosbox.conf Manual de DOSBox: Revive juegos antiguos | Emezeta.COM Juegos \u00b6 Los juegos para DOSBox consisten simplemente en los ficheros originales del juego sin modificar, normalmente dentro de un directorio. DOSBox soporta el montaje de im\u00e1genes de CD-ROM para los juegos que ven\u00edan en este formato, pero de momento no nos vamos a complicar con eso (estudiar los enlaces indicados un poco m\u00e1s arriba). Una vez que tengamos los ficheros del juego en un directorio s\u00f3lo tendremos que abrir el OPK desde GMenu2X y explorar hasta localizar el directorio. Por defecto se nos filtrar\u00e1n los ficheros con extensiones .exe , .com y .bat que eran los t\u00edpicos ficheros ejecutables en MS-DOS. Seleccionando el ejecutable adecuado el juego arrancar\u00e1. Por ejemplo en una instalaci\u00f3n del juego Prince of Persia aparecen los siguientes ficheros como ejecutables: El que tendremos que seleccionar es el de nombre prince . Integraci\u00f3n en frontends \u00b6 DOSBox se integra bien con frontends puesto que permite seleccionar el ejecutable a lanzar mediante el explorador. Se recomienda filtrar \u00fanicamente la extensi\u00f3n .bat y generar un fichero de este tipo si no existe ya entre los ficheros del juego. De esta forma s\u00f3lo aparecer\u00e1 una entrada para arrancar el juego (y no 4 como hemos visto en el ejemplo anterior). Personalizaci\u00f3n de controles para juegos \u00b6 Del extenso apartado Configuraci\u00f3n se desprende que la principal dificultad de instalar juegos MS-DOS en DOSBox es la del mapeo de controles. Adem\u00e1s, a pesar de que el proyecto oficial permite cargar autom\u00e1ticamente un dosbox.conf desde el directorio del juego , la versi\u00f3n para la RG350 que se encuentra habitualmente, no parece soportar esta capacidad. Sin embargo no es complicado adaptarla para que lo consiga. Simplemente incluyendo dentro del OPK el siguiente script de nombre set_conf.sh que ser\u00e1 el que se ejecute desde el fichero default.gcw0.desktop : #!/bin/sh DIRBASE=`dirname \"${1}\"` if [ -f \"$DIRBASE/dosbox.conf\" ] then ./dosbox \"$1\" -exit -conf \"$DIRBASE/dosbox.conf\" else ./dosbox \"$1\" -exit fi En default.gcw0.desktop sustituiremos la l\u00ednea correspondiente al par\u00e1metro Exec por lo siguiente: Exec=set_conf.sh %f El OPK resultante con estos cambios, que se puede utilizar en lugar del que se distribuye habitualmente, se puede descargar desde aqu\u00ed: Dosbox_conf_mod.opk Con este OPK simplemente tendremos que colocar el dosbox.conf que queremos que aplique en el mismo directorio del juego. El mapper al que se apunte desde este fichero (par\u00e1metro mapperfile , recordemos) tambi\u00e9n se deber\u00e1 encontrar en el directorio del juego. Configuraci\u00f3n de scalers \u00b6 Un par\u00e1metro interesante del dosbox.conf es el scaler que se encuentra dentro de la secci\u00f3n [render] . Permite seleccionar de entre una serie de filtros para producir efectos en la pantalla (como los t\u00edpicos scanlines de los televisores CRT). Por ejemplo en el dosbox.conf predeterminado se ve esto: [render] # frameskip: How many frames DOSBox skips before drawing one. # aspect: Do aspect correction, if your output method doesn't support scaling this can slow things down!. # scaler: Scaler used to enlarge/enhance low resolution modes. If 'forced' is appended, # then the scaler will be used even if the result might not be desired. # Possible values: none, normal2x, normal3x, advmame2x, advmame3x, advinterp2x, advinterp3x, hq2x, hq3x, 2xsai, super2xsai, supereagle, tv2x, tv3x, rgb2x, rgb3x, scan2x, scan3x. frameskip=0 aspect=false scaler=none Cambiando ese par\u00e1metro se pueden conseguir los distintos efectos, aunque al probarlos se ve que no resultan de mucha utilidad en la RG350. Supongo que depender\u00e1 mucho de la resoluci\u00f3n original del juego. Es decir, si el juego se dibuja a 320x240, la mayor\u00eda de esos scalers no tienen mucho sentido. A continuaci\u00f3n se muestra el efecto de cada uno de los scalers sobre la pantalla de presentaci\u00f3n del Prince of Persia que sin scaler aplicado se ve as\u00ed: normal2x advmame2x advinterp2x hq2x 2xsai super2xsai supereagle scaler_tv2x rgb2x scan2x Los siguientes scalers parecen no funcionar (supongo que porque ser\u00e1 necesario que la resoluci\u00f3n de pantalla sea el triple al menos de la del juego): normal3x advmame3x advinterp3x hq3x tv3x rgb3x scan3x","title":"RG350 DOSBox"},{"location":"2020-05-08-rg350_dosbox.html#instalacion","text":"El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Una vez instalado se puede ejecutar el entorno sin ning\u00fan juego para as\u00ed alcanzar algunas utilidades que ayudan a la configuraci\u00f3n del mismo. Para conseguir llegar al prompt, hay que editar el lanzador de GMenu2X, dejar en blanco el par\u00e1metro Selector Directory (ojo porque cada vez que se arranca toma el valor /media , por lo que hay que limpiarlo cada vez) y poner OFF en el par\u00e1metro Selector Browser : Cuando lo lancemos aparecer\u00e1 la t\u00edpica pantalla de DOS. La pantalla tiene una resoluci\u00f3n de 640x400 por lo que en la pantalla de la RG350 se ver\u00e1 muy mal por el reescalado a 320x240 (para esto puede venir bien la reciente publicaci\u00f3n de un update que permite activar la salida de video HDMI que soporta esta resoluci\u00f3n): Como se puede leer ah\u00ed, tecleando INTRO mediante el teclado virtual (que aparece pulsando L1 ) se nos muestran varias pantallas con informaci\u00f3n:","title":"Instalaci\u00f3n"},{"location":"2020-05-08-rg350_dosbox.html#configuracion","text":"El concepto m\u00e1s importante de entender en DOSBox es el del fichero de configuraci\u00f3n o dosbox.conf . Cuando arrancamos por primera vez DOSBox, se genera un fichero de configuraci\u00f3n gen\u00e9rico en el directorio /media/data/local/home/.dosbox . En concreto en la versi\u00f3n compilada para la RG350 este fichero tiene de nombre dosbox-SVN.conf . Dentro de \u00e9l est\u00e1n todos los ajustes que aplicar\u00e1n a los programas o juegos que ejecutemos en DOSBox. En particular hay un ajuste de la configuraci\u00f3n que se volver\u00e1 fundamental en la mayor\u00eda de los juegos y es el del mapeado del teclado. En la documentaci\u00f3n de este fichero vemos que los controles tienen su propio fichero de configuraci\u00f3n al que se apunta desde el dosbox.conf mediante el par\u00e1metro mapperfile . Un fichero mapper t\u00edpico contiene la relaci\u00f3n entre los c\u00f3digos de las teclas de un teclado de PC y las de los controles de la consola. En cada l\u00ednea del fichero se indica un c\u00f3digo de teclado de PC y a continuaci\u00f3n entre comillas el c\u00f3digo del pulsador de la RG350 con la palabra key delante separada del c\u00f3digo por un espacio (m\u00e1s adelante se muestran ejemplos). Los c\u00f3digos de teclado de PC m\u00e1s importantes son: key_a hasta key_z para las letras key_0 hasta key_9 para los n\u00fameros key_kp_0 hasta key_kp_9 para el teclado num\u00e9rico key_kp_enter para enter en teclado num\u00e9rico key_f1 hasta key_f12 para las teclas de funci\u00f3n key_up , key_down , key_left , key_right para las teclas de cursor key_lalt , key_lctrl , key_lshift , key_alt , key_ctrl , key_shift para las teclas modificadoras key_enter , key_esc , key_space , key_tab Se adjunta aqu\u00ed un fichero todos los c\u00f3digos de teclado y joystick de PC que soporta DOSBox. Los c\u00f3digos de los controles de la RG350 son los siguientes: Control C\u00f3digo Tecla de PC en mapper predeterminado A 306 key_lctrl B 308 key_lalt X 32 key_space Y 304 key_lshift L1 9 key_tab L2 280 key_pageup R1 8 key_bspace R2 281 key_pagedown UP 273 key_up DOWN 274 key_down LEFT 276 key_left RIGHT 275 key_right START 13 key_enter SELECT 27 key_esc POWER 278 key_home Por ejemplo para mapear la tecla A de un PC al control A de la RG350 habr\u00eda que incluir la siguiente l\u00ednea en el fichero de mapper: key_a \"key 306\" Como ejemplo vamos a elaborar el mapper para el juego Prince of Persia . Un listado b\u00e1sico de los controles de este juego ser\u00eda: Tecla Efecto Cursores Movimiento LShift Paso lento/Coger/Luchar Enter Empezar Espacio Muestra tiempo que queda Escape Pausa Ctrl-R Termina el juego y vuelve a la secuencia de t\u00edtulo Ctrl-A Reinicia el juego al comienzo del nivel actual Ctrl-S Apaga/enciende el sonido Ctrl-Q Cierra el juego y retorna a MS-DOS As\u00ed pues vamos a establecer las siguientes relaciones entre las teclas de un PC y los controles de la RG350 (la tecla L1 la evitaremos puesto que siempre saca el teclado virtual): Tecla PC Control RG350 Cursor arriba UP Cursor abajo DOWN Cursor derecha RIGHT Cursor izquierda LEFT LShift A Enter START Espacio B Escape SELECT LCtrl L2 R X A Y S R2 Q R1 Lo que traducido a un fichero de mapper se convierte en: key_up \"key 273\" key_down \"key 274\" key_right \"key 275\" key_left \"key 276\" key_lshift \"key 306\" key_enter \"key 13\" key_space \"key 308\" key_esc \"key 27\" key_lctrl \"key 280\" key_r \"key 32\" key_a \"key 304\" key_s \"key 281\" key_q \"key 8\" Creamos el fichero con el contenido anterior y lo dejamos en /media/data/local/home/.dosbox/mapper.txt . Finalmente editamos el fichero /media/data/local/home/.dosbox/dosbox-SVN.conf para que el par\u00e1metro mapperfile apunte al nuevo fichero. A partir de entonces podremos utilizar el juego con los nuevos controles. La tabla inicial de controles con los equivalentes en RG350 queda ahora: Tecla PC Efecto Control RG350 Cursores Movimiento Cruceta LShift Paso lento/Coger/Luchar A Enter Empezar START Espacio Muestra tiempo que queda B Escape Pausa SELECT Ctrl-R Termina el juego y vuelve a la secuencia de t\u00edtulo L2 + X Ctrl-A Reinicia el juego al comienzo del nivel actual L2 + Y Ctrl-S Apaga/enciende el sonido L2 + R2 Ctrl-Q Cierra el juego y retorna a MS-DOS L2 + R1 Por \u00faltimo se incluyen a continuaci\u00f3n una serie de enlaces de documentaci\u00f3n que pueden servir de ayuda: Documentaci\u00f3n Tutorial dosbox.conf Manual de DOSBox: Revive juegos antiguos | Emezeta.COM","title":"Configuraci\u00f3n"},{"location":"2020-05-08-rg350_dosbox.html#juegos","text":"Los juegos para DOSBox consisten simplemente en los ficheros originales del juego sin modificar, normalmente dentro de un directorio. DOSBox soporta el montaje de im\u00e1genes de CD-ROM para los juegos que ven\u00edan en este formato, pero de momento no nos vamos a complicar con eso (estudiar los enlaces indicados un poco m\u00e1s arriba). Una vez que tengamos los ficheros del juego en un directorio s\u00f3lo tendremos que abrir el OPK desde GMenu2X y explorar hasta localizar el directorio. Por defecto se nos filtrar\u00e1n los ficheros con extensiones .exe , .com y .bat que eran los t\u00edpicos ficheros ejecutables en MS-DOS. Seleccionando el ejecutable adecuado el juego arrancar\u00e1. Por ejemplo en una instalaci\u00f3n del juego Prince of Persia aparecen los siguientes ficheros como ejecutables: El que tendremos que seleccionar es el de nombre prince .","title":"Juegos"},{"location":"2020-05-08-rg350_dosbox.html#integracion-en-frontends","text":"DOSBox se integra bien con frontends puesto que permite seleccionar el ejecutable a lanzar mediante el explorador. Se recomienda filtrar \u00fanicamente la extensi\u00f3n .bat y generar un fichero de este tipo si no existe ya entre los ficheros del juego. De esta forma s\u00f3lo aparecer\u00e1 una entrada para arrancar el juego (y no 4 como hemos visto en el ejemplo anterior).","title":"Integraci\u00f3n en frontends"},{"location":"2020-05-08-rg350_dosbox.html#personalizacion-de-controles-para-juegos","text":"Del extenso apartado Configuraci\u00f3n se desprende que la principal dificultad de instalar juegos MS-DOS en DOSBox es la del mapeo de controles. Adem\u00e1s, a pesar de que el proyecto oficial permite cargar autom\u00e1ticamente un dosbox.conf desde el directorio del juego , la versi\u00f3n para la RG350 que se encuentra habitualmente, no parece soportar esta capacidad. Sin embargo no es complicado adaptarla para que lo consiga. Simplemente incluyendo dentro del OPK el siguiente script de nombre set_conf.sh que ser\u00e1 el que se ejecute desde el fichero default.gcw0.desktop : #!/bin/sh DIRBASE=`dirname \"${1}\"` if [ -f \"$DIRBASE/dosbox.conf\" ] then ./dosbox \"$1\" -exit -conf \"$DIRBASE/dosbox.conf\" else ./dosbox \"$1\" -exit fi En default.gcw0.desktop sustituiremos la l\u00ednea correspondiente al par\u00e1metro Exec por lo siguiente: Exec=set_conf.sh %f El OPK resultante con estos cambios, que se puede utilizar en lugar del que se distribuye habitualmente, se puede descargar desde aqu\u00ed: Dosbox_conf_mod.opk Con este OPK simplemente tendremos que colocar el dosbox.conf que queremos que aplique en el mismo directorio del juego. El mapper al que se apunte desde este fichero (par\u00e1metro mapperfile , recordemos) tambi\u00e9n se deber\u00e1 encontrar en el directorio del juego.","title":"Personalizaci\u00f3n de controles para juegos"},{"location":"2020-05-08-rg350_dosbox.html#configuracion-de-scalers","text":"Un par\u00e1metro interesante del dosbox.conf es el scaler que se encuentra dentro de la secci\u00f3n [render] . Permite seleccionar de entre una serie de filtros para producir efectos en la pantalla (como los t\u00edpicos scanlines de los televisores CRT). Por ejemplo en el dosbox.conf predeterminado se ve esto: [render] # frameskip: How many frames DOSBox skips before drawing one. # aspect: Do aspect correction, if your output method doesn't support scaling this can slow things down!. # scaler: Scaler used to enlarge/enhance low resolution modes. If 'forced' is appended, # then the scaler will be used even if the result might not be desired. # Possible values: none, normal2x, normal3x, advmame2x, advmame3x, advinterp2x, advinterp3x, hq2x, hq3x, 2xsai, super2xsai, supereagle, tv2x, tv3x, rgb2x, rgb3x, scan2x, scan3x. frameskip=0 aspect=false scaler=none Cambiando ese par\u00e1metro se pueden conseguir los distintos efectos, aunque al probarlos se ve que no resultan de mucha utilidad en la RG350. Supongo que depender\u00e1 mucho de la resoluci\u00f3n original del juego. Es decir, si el juego se dibuja a 320x240, la mayor\u00eda de esos scalers no tienen mucho sentido. A continuaci\u00f3n se muestra el efecto de cada uno de los scalers sobre la pantalla de presentaci\u00f3n del Prince of Persia que sin scaler aplicado se ve as\u00ed: normal2x advmame2x advinterp2x hq2x 2xsai super2xsai supereagle scaler_tv2x rgb2x scan2x Los siguientes scalers parecen no funcionar (supongo que porque ser\u00e1 necesario que la resoluci\u00f3n de pantalla sea el triple al menos de la del juego): normal3x advmame3x advinterp3x hq3x tv3x rgb3x scan3x","title":"Configuraci\u00f3n de scalers"},{"location":"2020-05-14-rg350_mame4all.html","text":"MAME4All es otro port del conocido multiemulador de m\u00e1quinas arcade, alternativo a xMAME . En principio implementa un romset m\u00e1s antiguo que los tres que implementa xMAME, pero aun as\u00ed nos puede convenir instalarlo ya que algunos juegos se ejecutan mejor en MAME4All que en xMAME. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350. Instalaci\u00f3n \u00b6 El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Encontramos dos variantes de este OPK: La del repositorio original cuyo OPK compilado lo podemos encontrar aqu\u00ed por ejemplo. Mod que permite usar el explorer para seleccionar las ROMs, presentada en este foro , desarrollada sobre este repositorio y cuyo OPK podemos encontrar aqu\u00ed . Nosotros vamos a utilizar la segunda variante que presenta dos lanzadores en GMenu2X, uno para lanzar el interfaz propio de MAME4All ( mame4all ux ) y otro para lanzar directamente ROMs desde el explorador. Esto \u00faltimo ser\u00e1 lo que nos permita integrar MAME4All con otros frontends como EmulationStation, SimpleMenu o PyMenu. Por tanto s\u00f3lo tenemos que bajar el OPK elegido de la lista anterior y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps Configuraci\u00f3n \u00b6 La primera vez que tratemos de abrir el lanzador que nos lleva al interfaz propio de MAME4All ( mame4all ux en el caso de que hayamos instalado el OPK con doble lanzador), aparecer\u00e1 un mensaje de error y se nos pedir\u00e1 que localicemos el directorio donde se encuentran las ROMs: Navegaremos por el \u00e1rbol de directorios hasta localizar nuestras ROMs: Finalmente al seleccionar el directorio pulsando Start aparecer\u00e1 el listado de las ROMs que se han reconocido correctamente: Nota Que aparezcan las ROMs en el listado s\u00f3lo significa que se han encontrado con el nombre correcto. El contenido de las mismas no se comprueba hasta que intentamos abrirlas. As\u00ed es posible que algunas ROMs aparezcan pero luego no sean ejecutables. MAME4All nos mostrar\u00e1 un informe del problema que ha encontrado para ejecutar las ROMs. MAME4All se basa en el romset 0.37b5, tambi\u00e9n conocido como 0.41, cuya definici\u00f3n podemos encontrar aqu\u00ed . Integraci\u00f3n en frontends \u00b6 Si hemos elegido la variante del OPK con el mod que permite seleccionar las ROMs mediante el explorer, MAME4All se podr\u00e1 integrar con otros frontends como la mayor\u00eda de los emuladores. Por ejemplo esta es la definici\u00f3n como sistema en SimpleMenu : [MAME4ALL] execs = /media/data/apps/mame4all-params-5-skipwarnings.opk romDirs = /media/data/roms/ARCADE/,/media/sdcard/roms/ARCADE/ romExts = .zip aliasFile = /media/home/.simplemenu/alias.txt Y esta en PyMenu : { \"description\": \"MAME4All Arcade EMU\", \"hideFolders\": true, \"limitSelection\": true, \"name\": \"MAME4All\", \"overclock\": \"1080\", \"previews\": \"/media/data/roms/ARCADE/.previews\", \"selectionPath\": \"/media/data/roms/ARCADE\", \"system\": \"mame4all\", \"type\": \"emulator\", \"useFileFilter\": true, \"useGamelist\": false, \"useSelection\": true }, Controles \u00b6 A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de MAME4All: Control Situaci\u00f3n Funci\u00f3n Arriba / Abajo En frontend Seleccionar ROM una a una Izquierda / Derecha En frontend Seleccionar ROM p\u00e1gina a p\u00e1gina A En frontend Abrir ROM seleccionada L1 + R1 En frontend Salir Select En frontend Regenerar cach\u00e9 (para detectar nuevas ROMs a\u00f1adidas) Arriba / Abajo En configuraci\u00f3n de ROM Seleccionar opci\u00f3n a cambiar Izquierda / Derecha En configuraci\u00f3n de ROM Cambiar opci\u00f3n A En configuraci\u00f3n de ROM Guardar opciones configuradas y abrir ROM B En configuraci\u00f3n de ROM Volver a la lista de ROMs A , B , X , Y , L , R En juego Botones MAME 1,2,3,4,5,6 Select En juego Insertar moneda Start En juego Comenzar 1P Start + Select En juego Menu MAME Start + L1 + R1 o Power (seg\u00fan versi\u00f3n) En juego Salir del juego L1 + R1 En juego Pausa Select + R1 En juego Mostrar FPS Start + L1 En juego Mostrar Profiler L1 + B En juego Hacer captura de pantalla (se almacena en /media/data/local/home/.mame4all/snap )","title":"RG350 MAME4All"},{"location":"2020-05-14-rg350_mame4all.html#instalacion","text":"El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Encontramos dos variantes de este OPK: La del repositorio original cuyo OPK compilado lo podemos encontrar aqu\u00ed por ejemplo. Mod que permite usar el explorer para seleccionar las ROMs, presentada en este foro , desarrollada sobre este repositorio y cuyo OPK podemos encontrar aqu\u00ed . Nosotros vamos a utilizar la segunda variante que presenta dos lanzadores en GMenu2X, uno para lanzar el interfaz propio de MAME4All ( mame4all ux ) y otro para lanzar directamente ROMs desde el explorador. Esto \u00faltimo ser\u00e1 lo que nos permita integrar MAME4All con otros frontends como EmulationStation, SimpleMenu o PyMenu. Por tanto s\u00f3lo tenemos que bajar el OPK elegido de la lista anterior y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps","title":"Instalaci\u00f3n"},{"location":"2020-05-14-rg350_mame4all.html#configuracion","text":"La primera vez que tratemos de abrir el lanzador que nos lleva al interfaz propio de MAME4All ( mame4all ux en el caso de que hayamos instalado el OPK con doble lanzador), aparecer\u00e1 un mensaje de error y se nos pedir\u00e1 que localicemos el directorio donde se encuentran las ROMs: Navegaremos por el \u00e1rbol de directorios hasta localizar nuestras ROMs: Finalmente al seleccionar el directorio pulsando Start aparecer\u00e1 el listado de las ROMs que se han reconocido correctamente: Nota Que aparezcan las ROMs en el listado s\u00f3lo significa que se han encontrado con el nombre correcto. El contenido de las mismas no se comprueba hasta que intentamos abrirlas. As\u00ed es posible que algunas ROMs aparezcan pero luego no sean ejecutables. MAME4All nos mostrar\u00e1 un informe del problema que ha encontrado para ejecutar las ROMs. MAME4All se basa en el romset 0.37b5, tambi\u00e9n conocido como 0.41, cuya definici\u00f3n podemos encontrar aqu\u00ed .","title":"Configuraci\u00f3n"},{"location":"2020-05-14-rg350_mame4all.html#integracion-en-frontends","text":"Si hemos elegido la variante del OPK con el mod que permite seleccionar las ROMs mediante el explorer, MAME4All se podr\u00e1 integrar con otros frontends como la mayor\u00eda de los emuladores. Por ejemplo esta es la definici\u00f3n como sistema en SimpleMenu : [MAME4ALL] execs = /media/data/apps/mame4all-params-5-skipwarnings.opk romDirs = /media/data/roms/ARCADE/,/media/sdcard/roms/ARCADE/ romExts = .zip aliasFile = /media/home/.simplemenu/alias.txt Y esta en PyMenu : { \"description\": \"MAME4All Arcade EMU\", \"hideFolders\": true, \"limitSelection\": true, \"name\": \"MAME4All\", \"overclock\": \"1080\", \"previews\": \"/media/data/roms/ARCADE/.previews\", \"selectionPath\": \"/media/data/roms/ARCADE\", \"system\": \"mame4all\", \"type\": \"emulator\", \"useFileFilter\": true, \"useGamelist\": false, \"useSelection\": true },","title":"Integraci\u00f3n en frontends"},{"location":"2020-05-14-rg350_mame4all.html#controles","text":"A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de MAME4All: Control Situaci\u00f3n Funci\u00f3n Arriba / Abajo En frontend Seleccionar ROM una a una Izquierda / Derecha En frontend Seleccionar ROM p\u00e1gina a p\u00e1gina A En frontend Abrir ROM seleccionada L1 + R1 En frontend Salir Select En frontend Regenerar cach\u00e9 (para detectar nuevas ROMs a\u00f1adidas) Arriba / Abajo En configuraci\u00f3n de ROM Seleccionar opci\u00f3n a cambiar Izquierda / Derecha En configuraci\u00f3n de ROM Cambiar opci\u00f3n A En configuraci\u00f3n de ROM Guardar opciones configuradas y abrir ROM B En configuraci\u00f3n de ROM Volver a la lista de ROMs A , B , X , Y , L , R En juego Botones MAME 1,2,3,4,5,6 Select En juego Insertar moneda Start En juego Comenzar 1P Start + Select En juego Menu MAME Start + L1 + R1 o Power (seg\u00fan versi\u00f3n) En juego Salir del juego L1 + R1 En juego Pausa Select + R1 En juego Mostrar FPS Start + L1 En juego Mostrar Profiler L1 + B En juego Hacer captura de pantalla (se almacena en /media/data/local/home/.mame4all/snap )","title":"Controles"},{"location":"2020-05-25-rg350_docker_buildroot.html","text":"La distribuci\u00f3n del sistema operativo OpenDingux de la RG350 est\u00e1 basado en Buildroot . Para compilarlo se recomienda utilizar una instalaci\u00f3n Debian Stretch o Buster (seg\u00fan la versi\u00f3n de Buildroot en que est\u00e9 basado). Si no es el sistema que tenemos en nuestra m\u00e1quina (bien por usar Windows o Mac o por tener otra distribuci\u00f3n Linux), y no queremos o podemos instalar una pesada m\u00e1quina virtual para disponer del entorno adecuado, existe la posibilidad de encapsularlo en un contenedor Docker. El procedimiento que se muestra a continuaci\u00f3n est\u00e1 hecho sobre un Linux Ubuntu 20.04, pero no deber\u00eda ser complicado de adaptar para poder realizarse sobre Windows o Mac. Elecci\u00f3n de distribuci\u00f3n Buildroot \u00b6 Existen varias distribuciones Buildroot para RG350. A continuaci\u00f3n se listan algunas: Distribuci\u00f3n Versi\u00f3n Buildroot Entorno de compilaci\u00f3n Observaciones GCW0 \u00c9ste realmente no es para la RG350 sino para la GCWZero, pero se incluye por ser el origen del resto OpenDingux Tampoco tiene una configuraci\u00f3n espec\u00edfica para la RG350 Tonyjih 2014.08 Debian Stretch; Docker eduardofilo/rg350_buildroot Buildroot en el que se basan muchos Ninoh-FOX Debian Stretch ROGUE CFW gokr soarquin CentOS 7; Docker soarqin/rg350_toolchain od-contrib 2020.05 Debian Buster; Docker eduardofilo/rg350_buster_buildroot Basado en un Buildroot moderno glebm Vamos a empezar bajando una de estas distribuciones Buildroot de RG350 a un directorio de nuestra m\u00e1quina (la que actuar\u00e1 de host para Docker). Es habitual utilizar un directorio git en el home del usuario donde descargar los repositorios y nosotros seguiremos esta costumbre. M\u00e1s adelante, al arrancar el contenedor, indicaremos ese directorio como volumen para conectar el sistema de archivos de nuestra m\u00e1quina (host) con el contenedor. As\u00ed conseguimos que nuestra m\u00e1quina (host) s\u00f3lo sirva de almac\u00e9n de las fuentes y los binarios resultantes, utilizando Docker para encapsular las dependencias que tiene la versi\u00f3n de Buildroot que vamos a utilizar que son muy numerosas y con frecuencia no coinciden con lo que nuestro sistema tiene instalado. Por ejemplo vamos a utilizar la distribuci\u00f3n de Tonyjih . Bajamos pues el repositorio en nuestra m\u00e1quina. Con los siguientes comandos quedar\u00e1 en ~/git/RG350_buildroot : $ cd ~/git $ git clone https://github.com/tonyjih/RG350_buildroot.git Procedimiento para crear el contenedor \u00b6 Ve\u00edamos en la tabla anterior que podemos compilar la distribuci\u00f3n que hemos elegido para ilustrar el art\u00edculo (la de Tonyjih ) con la imagen Docker eduardofilo/rg350_buildroot . A continuaci\u00f3n vamos a ver los pasos para descargar y ejecutar esta imagen. Los primeros pasos son una receta r\u00e1pida para instalar Docker en nuestro sistema si no cont\u00e1ramos ya con \u00e9l, pero es mejor seguir una de las muchas gu\u00edas que se pueden encontrar (por ejemplo para Ubuntu ). Instalar Docker en m\u00e1quina host: $ sudo apt install docker.io $ sudo groupadd docker $ sudo usermod -aG docker $USER $ sudo systemctl enable docker $ sudo systemctl start docker Arrancar contenedor pasando el directorio ~/git como volumen: $ docker run -it -v ~/git:/root/git --name RG350_buildroot eduardofilo/rg350_buildroot Si en lugar de utilizar la versi\u00f3n compilada de la imagen subida al Docker Hub queremos construirla en local (por si quisi\u00e9ramos hacer alguna modificaci\u00f3n en el Dockerfile), intercalar\u00edamos los siguientes comandos entre los pasos 1 y 2 anteriores: $ cd ~/git $ git clone https://github.com/eduardofilo/RG350_buildroot_docker.git $ cd ~/git/RG350_buildroot_docker $ docker build -t eduardofilo/rg350_buildroot . Tras ejecutar el paso 2 deber\u00eda quedar un prompt ejecut\u00e1ndose desde el entorno Debian dentro del contenedor. Como hemos conectado el directorio /root/git del contenedor con el directorio ~/git de nuestra m\u00e1quina, cualquier cosa que queramos modificar o recoger al final de la compilaci\u00f3n, la podremos localizar desde un explorador de archivos de nuestra m\u00e1quina. Si en alg\u00fan momento perdi\u00e9ramos de vista la terminal ejecut\u00e1ndose en el entorno del contenedor, podremos recuperarla ejecutando: $ docker exec -it RG350_buildroot /bin/bash Si el comando anterior devuelve un error indicando que el contenedor est\u00e1 parado, podemos arrancarlo antes ejecutando la orden: $ docker start RG350_buildroot Operaci\u00f3n general de Buildroot \u00b6 Una vez que tenemos en marcha y el contenedor y nos hemos conectado con \u00e9l, ya podemos empezar a trabajar con Buildroot. Esta distribuci\u00f3n tiene su propia estructura y formas de operaci\u00f3n. Vamos a empezar describiendo por encima el entorno y algunas operaciones habituales o interesantes. Buildroot se puede describir de forma resumida como un toolchain de compilaci\u00f3n cruzada unido a un gran n\u00famero de paquetes (siendo uno de ellos el kernel Linux) que en conjunto pueden constituir un sistema Linux completo, habitualmente para un sistema embebido. La lista de paquetes que contiene Buildroot podemos encontrarla en el directorio package . Luego, existen una serie de configuraciones predefinidas para placas conocidas. Las podemos encontrar en el directorio configs . Una de las primeras cosas que haremos m\u00e1s adelante es cargar la configuraci\u00f3n para RG350 (fichero rg350_defconfig ). Esta configuraci\u00f3n se basa en la estructura oficial de Buildroot que es gen\u00e9rica para sistemas embebidos Linux. Si en nuestro sistema deseamos alguna caracter\u00edstica especial o parche sobre los paquetes est\u00e1ndar que Buildroot ofrece, tenemos otro mecanismo, los ficheros que encontraremos en el directorio board/<fabricante>/<placa> . En el caso de RG350 el nombre del fabricante elegido es opendingux y el nombre de la placa gcw0 . As\u00ed pues en el directorio board/opendingux/gcw0 podemos encontrar por ejemplo los scripts para generar una imagen v\u00e1lida para la consola. Nota A partir de este punto veremos que las l\u00edneas de terminal est\u00e1n precedidas por # y no por $ como antes porque se refieren al terminal dentro del contenedor Docker, que se ejecuta con el usuario root del mismo. Antes de empezar cargamos la configuraci\u00f3n para RG350 de las m\u00faltiples que trae Buildroot de serie : # cd ~/git/RG350_buildroot # make rg350_defconfig BR2_EXTERNAL=board/opendingux Si ahora queremos repasar o cambiar algo de esta configuraci\u00f3n lo haremos por medio de una herramienta similar a la que se utiliza para configurar un kernel Linux antes de compilarlo. Para ello utilizaremos uno de los dos comandos make siguientes (s\u00f3lo uno): # cd ~/git/RG350_buildroot # make menuconfig # make nconfig Antes de empezar a compilar cosas vamos a definir la siguiente variable de entorno que permitir\u00e1 la compilaci\u00f3n en paralelo: # export BR2_JLEVEL=0 A continuaci\u00f3n describimos algunas operaciones que podemos realizar: Comando Efecto make clean Borra todos los ficheros generados en la compilaci\u00f3n make toolchain Genera el toolchain de compilaci\u00f3n cruzada. El resultado queda en el directorio ~/git/RG350_buildroot/output/host/usr/bin ; tarda 1h50m en un Intel i3-4005U y genera unos 3GBs de archivos make <paquete> Compila el paquete (de la lista de paquetes de la distribuci\u00f3n ) make <paquete>-rebuild Fuerza la recompilaci\u00f3n del paquete make <paquete>-reconfigure Fuerza la reconfiguraci\u00f3n del paquete make <paquete>-graph-depends Genera un gr\u00e1fico del \u00e1rbol de dependencias del paquete make all Compila la distribuci\u00f3n completa Operaci\u00f3n particular de la distribuci\u00f3n Buildroot para RG350 \u00b6 Una vez que tenemos preparado el entorno podremos realizar las tareas y compilaciones previstas en el mismo. Por ejemplo en el entorno preparado por Tonyjih vemos que podemos realizar las siguientes operaciones: Si se quiere que la imagen incluya emuladores y aplicaciones, ejecutar antes lo siguiente (s\u00f3lo es necesario hacerlo una vez): # cd ~/git/RG350_buildroot # board/opendingux/gcw0/download_local_pack.sh Compilaci\u00f3n de imagen para flashear en SD (el fichero con la imagen resultante queda en ~/git/RG350_buildroot/output/images/od-imager/images/sd_image.bin ; tarda 6h en un Intel i3-4005U y genera unos 9GBs de archivos): # cd ~/git/RG350_buildroot # board/opendingux/gcw0/make_initial_image.sh Generaci\u00f3n de un OPK update para ejecutarse directamente sobre el sistema anterior (el fichero con el OPK resultante queda en ~/git/RG350_buildroot/output/images/rg350-update-<fecha>.opk ): # cd ~/git/RG350_buildroot # board/opendingux/gcw0/make_upgrade.sh Hay un problema con el script make_initial_image.sh y es que internamente ejecuta make rg350_defconfig BR2_EXTERNAL=board/opendingux lo que hace que si hemos hecho make menuconfig se pierdan los cambios realizados ya que se vuelve a cargar el rg350_defconfig que hay en config . Tenemos varias opciones para evitar este problema: Editar manualmente el fichero rg350_defconfig . Retirar la llamada a make rg350_defconfig BR2_EXTERNAL=board/opendingux dentro del script make_initial_image.sh . Ejecutar make BR2_DEFCONFIG=configs/rg350_defconfig savedefconfig tras el make menuconfig para regenerar el fichero configs/rg350_defconfig con la nueva configuraci\u00f3n. Compilaci\u00f3n de distribuci\u00f3n od-contrib \u00b6 Existe una distribuci\u00f3n Buildroot bastante moderna (basada en la versi\u00f3n 2020.05), que por tanto ofrece una versi\u00f3n mucho m\u00e1s actual de los paquetes que constituyen la distribuci\u00f3n (no as\u00ed el Kernel Linux que se mantiene en la versi\u00f3n 3.12). El procedimiento de compilaci\u00f3n es muy similar al de la distribuci\u00f3n de Tonyjih ilustrada antes. Vamos a mostrar el paso a paso sin dar explicaciones (sirven las mismas que antes) para compilar esta versi\u00f3n: En m\u00e1quina host: $ cd ~/git $ git clone https://github.com/od-contrib/buildroot-rg350-old-kernel.git $ docker run -it -v ~/git:/root/git --name RG350_buster_buildroot eduardofilo/rg350_buster_buildroot En contenedor: # cd ~/git/buildroot-rg350-old-kernel # make rg350_defconfig BR2_EXTERNAL=board/opendingux # make menuconfig # export BR2_JLEVEL=0 # make toolchain # board/opendingux/gcw0/make_initial_image.sh rg350 El script make_initial_image.sh tiene el mismo problema que coment\u00e1bamos al final del apartado anterior con la distribuci\u00f3n Tonyjih. Adem\u00e1s falla por tener un patr\u00f3n de target doble: # cd ~/git/buildroot-rg350-old-kernel # make rg350_defconfig BR2_EXTERNAL=board/opendingux:opks Makefile:184: *** multiple target patterns. Stop. La soluci\u00f3n consiste en retirar el :opks del final de la llamada anterior que hay en la linea 18 del script make_initial_image.sh . Tras solucionar esos problemas y ejecutar todo lo anterior, encontraremos la imagen completa compilada en ~/git/buildroot-rg350-old-kernel/output/images/od-imager/images/sd_image.bin . Nota A la hora de compilar esta distribuci\u00f3n Buildroot, no estaba disponible el paquete libpng14 . La URL principal de descarga produc\u00eda timeout en la conexi\u00f3n y las secundarias no exist\u00edan. La soluci\u00f3n fue bajar el paquete por nuestra cuenta, colocarlo en el directorio ~/git/buildroot-rg350-old-kernel/dl/libpng14 y volver a compilar. El paquete se puede encontrar por ejemplo aqu\u00ed . Comandos para gestionar contenedores \u00b6 Por \u00faltimo se comentan a continuaci\u00f3n a modo de cheatsheet unos pocos comandos \u00fatiles para gestionar el contenedor que acabamos de crear: Comando Efecto docker container ls -a Listar contenedores. Para averiguar hash por ejemplo. docker container start <hash> Arrancar contenedor. docker exec -it <hash> /bin/bash Obtener prompt bash en contenedor. docker container stop <hash> Detener contenedor. docker container rm <hash> Borrar contenedor.","title":"RG350 Docker Buildroot"},{"location":"2020-05-25-rg350_docker_buildroot.html#eleccion-de-distribucion-buildroot","text":"Existen varias distribuciones Buildroot para RG350. A continuaci\u00f3n se listan algunas: Distribuci\u00f3n Versi\u00f3n Buildroot Entorno de compilaci\u00f3n Observaciones GCW0 \u00c9ste realmente no es para la RG350 sino para la GCWZero, pero se incluye por ser el origen del resto OpenDingux Tampoco tiene una configuraci\u00f3n espec\u00edfica para la RG350 Tonyjih 2014.08 Debian Stretch; Docker eduardofilo/rg350_buildroot Buildroot en el que se basan muchos Ninoh-FOX Debian Stretch ROGUE CFW gokr soarquin CentOS 7; Docker soarqin/rg350_toolchain od-contrib 2020.05 Debian Buster; Docker eduardofilo/rg350_buster_buildroot Basado en un Buildroot moderno glebm Vamos a empezar bajando una de estas distribuciones Buildroot de RG350 a un directorio de nuestra m\u00e1quina (la que actuar\u00e1 de host para Docker). Es habitual utilizar un directorio git en el home del usuario donde descargar los repositorios y nosotros seguiremos esta costumbre. M\u00e1s adelante, al arrancar el contenedor, indicaremos ese directorio como volumen para conectar el sistema de archivos de nuestra m\u00e1quina (host) con el contenedor. As\u00ed conseguimos que nuestra m\u00e1quina (host) s\u00f3lo sirva de almac\u00e9n de las fuentes y los binarios resultantes, utilizando Docker para encapsular las dependencias que tiene la versi\u00f3n de Buildroot que vamos a utilizar que son muy numerosas y con frecuencia no coinciden con lo que nuestro sistema tiene instalado. Por ejemplo vamos a utilizar la distribuci\u00f3n de Tonyjih . Bajamos pues el repositorio en nuestra m\u00e1quina. Con los siguientes comandos quedar\u00e1 en ~/git/RG350_buildroot : $ cd ~/git $ git clone https://github.com/tonyjih/RG350_buildroot.git","title":"Elecci\u00f3n de distribuci\u00f3n Buildroot"},{"location":"2020-05-25-rg350_docker_buildroot.html#procedimiento-para-crear-el-contenedor","text":"Ve\u00edamos en la tabla anterior que podemos compilar la distribuci\u00f3n que hemos elegido para ilustrar el art\u00edculo (la de Tonyjih ) con la imagen Docker eduardofilo/rg350_buildroot . A continuaci\u00f3n vamos a ver los pasos para descargar y ejecutar esta imagen. Los primeros pasos son una receta r\u00e1pida para instalar Docker en nuestro sistema si no cont\u00e1ramos ya con \u00e9l, pero es mejor seguir una de las muchas gu\u00edas que se pueden encontrar (por ejemplo para Ubuntu ). Instalar Docker en m\u00e1quina host: $ sudo apt install docker.io $ sudo groupadd docker $ sudo usermod -aG docker $USER $ sudo systemctl enable docker $ sudo systemctl start docker Arrancar contenedor pasando el directorio ~/git como volumen: $ docker run -it -v ~/git:/root/git --name RG350_buildroot eduardofilo/rg350_buildroot Si en lugar de utilizar la versi\u00f3n compilada de la imagen subida al Docker Hub queremos construirla en local (por si quisi\u00e9ramos hacer alguna modificaci\u00f3n en el Dockerfile), intercalar\u00edamos los siguientes comandos entre los pasos 1 y 2 anteriores: $ cd ~/git $ git clone https://github.com/eduardofilo/RG350_buildroot_docker.git $ cd ~/git/RG350_buildroot_docker $ docker build -t eduardofilo/rg350_buildroot . Tras ejecutar el paso 2 deber\u00eda quedar un prompt ejecut\u00e1ndose desde el entorno Debian dentro del contenedor. Como hemos conectado el directorio /root/git del contenedor con el directorio ~/git de nuestra m\u00e1quina, cualquier cosa que queramos modificar o recoger al final de la compilaci\u00f3n, la podremos localizar desde un explorador de archivos de nuestra m\u00e1quina. Si en alg\u00fan momento perdi\u00e9ramos de vista la terminal ejecut\u00e1ndose en el entorno del contenedor, podremos recuperarla ejecutando: $ docker exec -it RG350_buildroot /bin/bash Si el comando anterior devuelve un error indicando que el contenedor est\u00e1 parado, podemos arrancarlo antes ejecutando la orden: $ docker start RG350_buildroot","title":"Procedimiento para crear el contenedor"},{"location":"2020-05-25-rg350_docker_buildroot.html#operacion-general-de-buildroot","text":"Una vez que tenemos en marcha y el contenedor y nos hemos conectado con \u00e9l, ya podemos empezar a trabajar con Buildroot. Esta distribuci\u00f3n tiene su propia estructura y formas de operaci\u00f3n. Vamos a empezar describiendo por encima el entorno y algunas operaciones habituales o interesantes. Buildroot se puede describir de forma resumida como un toolchain de compilaci\u00f3n cruzada unido a un gran n\u00famero de paquetes (siendo uno de ellos el kernel Linux) que en conjunto pueden constituir un sistema Linux completo, habitualmente para un sistema embebido. La lista de paquetes que contiene Buildroot podemos encontrarla en el directorio package . Luego, existen una serie de configuraciones predefinidas para placas conocidas. Las podemos encontrar en el directorio configs . Una de las primeras cosas que haremos m\u00e1s adelante es cargar la configuraci\u00f3n para RG350 (fichero rg350_defconfig ). Esta configuraci\u00f3n se basa en la estructura oficial de Buildroot que es gen\u00e9rica para sistemas embebidos Linux. Si en nuestro sistema deseamos alguna caracter\u00edstica especial o parche sobre los paquetes est\u00e1ndar que Buildroot ofrece, tenemos otro mecanismo, los ficheros que encontraremos en el directorio board/<fabricante>/<placa> . En el caso de RG350 el nombre del fabricante elegido es opendingux y el nombre de la placa gcw0 . As\u00ed pues en el directorio board/opendingux/gcw0 podemos encontrar por ejemplo los scripts para generar una imagen v\u00e1lida para la consola. Nota A partir de este punto veremos que las l\u00edneas de terminal est\u00e1n precedidas por # y no por $ como antes porque se refieren al terminal dentro del contenedor Docker, que se ejecuta con el usuario root del mismo. Antes de empezar cargamos la configuraci\u00f3n para RG350 de las m\u00faltiples que trae Buildroot de serie : # cd ~/git/RG350_buildroot # make rg350_defconfig BR2_EXTERNAL=board/opendingux Si ahora queremos repasar o cambiar algo de esta configuraci\u00f3n lo haremos por medio de una herramienta similar a la que se utiliza para configurar un kernel Linux antes de compilarlo. Para ello utilizaremos uno de los dos comandos make siguientes (s\u00f3lo uno): # cd ~/git/RG350_buildroot # make menuconfig # make nconfig Antes de empezar a compilar cosas vamos a definir la siguiente variable de entorno que permitir\u00e1 la compilaci\u00f3n en paralelo: # export BR2_JLEVEL=0 A continuaci\u00f3n describimos algunas operaciones que podemos realizar: Comando Efecto make clean Borra todos los ficheros generados en la compilaci\u00f3n make toolchain Genera el toolchain de compilaci\u00f3n cruzada. El resultado queda en el directorio ~/git/RG350_buildroot/output/host/usr/bin ; tarda 1h50m en un Intel i3-4005U y genera unos 3GBs de archivos make <paquete> Compila el paquete (de la lista de paquetes de la distribuci\u00f3n ) make <paquete>-rebuild Fuerza la recompilaci\u00f3n del paquete make <paquete>-reconfigure Fuerza la reconfiguraci\u00f3n del paquete make <paquete>-graph-depends Genera un gr\u00e1fico del \u00e1rbol de dependencias del paquete make all Compila la distribuci\u00f3n completa","title":"Operaci\u00f3n general de Buildroot"},{"location":"2020-05-25-rg350_docker_buildroot.html#operacion-particular-de-la-distribucion-buildroot-para-rg350","text":"Una vez que tenemos preparado el entorno podremos realizar las tareas y compilaciones previstas en el mismo. Por ejemplo en el entorno preparado por Tonyjih vemos que podemos realizar las siguientes operaciones: Si se quiere que la imagen incluya emuladores y aplicaciones, ejecutar antes lo siguiente (s\u00f3lo es necesario hacerlo una vez): # cd ~/git/RG350_buildroot # board/opendingux/gcw0/download_local_pack.sh Compilaci\u00f3n de imagen para flashear en SD (el fichero con la imagen resultante queda en ~/git/RG350_buildroot/output/images/od-imager/images/sd_image.bin ; tarda 6h en un Intel i3-4005U y genera unos 9GBs de archivos): # cd ~/git/RG350_buildroot # board/opendingux/gcw0/make_initial_image.sh Generaci\u00f3n de un OPK update para ejecutarse directamente sobre el sistema anterior (el fichero con el OPK resultante queda en ~/git/RG350_buildroot/output/images/rg350-update-<fecha>.opk ): # cd ~/git/RG350_buildroot # board/opendingux/gcw0/make_upgrade.sh Hay un problema con el script make_initial_image.sh y es que internamente ejecuta make rg350_defconfig BR2_EXTERNAL=board/opendingux lo que hace que si hemos hecho make menuconfig se pierdan los cambios realizados ya que se vuelve a cargar el rg350_defconfig que hay en config . Tenemos varias opciones para evitar este problema: Editar manualmente el fichero rg350_defconfig . Retirar la llamada a make rg350_defconfig BR2_EXTERNAL=board/opendingux dentro del script make_initial_image.sh . Ejecutar make BR2_DEFCONFIG=configs/rg350_defconfig savedefconfig tras el make menuconfig para regenerar el fichero configs/rg350_defconfig con la nueva configuraci\u00f3n.","title":"Operaci\u00f3n particular de la distribuci\u00f3n Buildroot para RG350"},{"location":"2020-05-25-rg350_docker_buildroot.html#compilacion-de-distribucion-od-contrib","text":"Existe una distribuci\u00f3n Buildroot bastante moderna (basada en la versi\u00f3n 2020.05), que por tanto ofrece una versi\u00f3n mucho m\u00e1s actual de los paquetes que constituyen la distribuci\u00f3n (no as\u00ed el Kernel Linux que se mantiene en la versi\u00f3n 3.12). El procedimiento de compilaci\u00f3n es muy similar al de la distribuci\u00f3n de Tonyjih ilustrada antes. Vamos a mostrar el paso a paso sin dar explicaciones (sirven las mismas que antes) para compilar esta versi\u00f3n: En m\u00e1quina host: $ cd ~/git $ git clone https://github.com/od-contrib/buildroot-rg350-old-kernel.git $ docker run -it -v ~/git:/root/git --name RG350_buster_buildroot eduardofilo/rg350_buster_buildroot En contenedor: # cd ~/git/buildroot-rg350-old-kernel # make rg350_defconfig BR2_EXTERNAL=board/opendingux # make menuconfig # export BR2_JLEVEL=0 # make toolchain # board/opendingux/gcw0/make_initial_image.sh rg350 El script make_initial_image.sh tiene el mismo problema que coment\u00e1bamos al final del apartado anterior con la distribuci\u00f3n Tonyjih. Adem\u00e1s falla por tener un patr\u00f3n de target doble: # cd ~/git/buildroot-rg350-old-kernel # make rg350_defconfig BR2_EXTERNAL=board/opendingux:opks Makefile:184: *** multiple target patterns. Stop. La soluci\u00f3n consiste en retirar el :opks del final de la llamada anterior que hay en la linea 18 del script make_initial_image.sh . Tras solucionar esos problemas y ejecutar todo lo anterior, encontraremos la imagen completa compilada en ~/git/buildroot-rg350-old-kernel/output/images/od-imager/images/sd_image.bin . Nota A la hora de compilar esta distribuci\u00f3n Buildroot, no estaba disponible el paquete libpng14 . La URL principal de descarga produc\u00eda timeout en la conexi\u00f3n y las secundarias no exist\u00edan. La soluci\u00f3n fue bajar el paquete por nuestra cuenta, colocarlo en el directorio ~/git/buildroot-rg350-old-kernel/dl/libpng14 y volver a compilar. El paquete se puede encontrar por ejemplo aqu\u00ed .","title":"Compilaci\u00f3n de distribuci\u00f3n od-contrib"},{"location":"2020-05-25-rg350_docker_buildroot.html#comandos-para-gestionar-contenedores","text":"Por \u00faltimo se comentan a continuaci\u00f3n a modo de cheatsheet unos pocos comandos \u00fatiles para gestionar el contenedor que acabamos de crear: Comando Efecto docker container ls -a Listar contenedores. Para averiguar hash por ejemplo. docker container start <hash> Arrancar contenedor. docker exec -it <hash> /bin/bash Obtener prompt bash en contenedor. docker container stop <hash> Detener contenedor. docker container rm <hash> Borrar contenedor.","title":"Comandos para gestionar contenedores"},{"location":"2020-05-31-rg350_compile.html","text":"En el post anterior vimos c\u00f3mo construir un entorno para hacer compilaci\u00f3n cruzada para el procesador y el sistema operativo de la RG350. En este post separado vamos a ver c\u00f3mo utilizar el entorno anterior para compilar algunos programas. Aclarar que este entorno es necesario para compilar c\u00f3digo en C y C++ que es el habitual en sistemas embebidos Linux. Puede haber programas pensados para la RG350 que est\u00e9n programados en otros lenguajes. Por ejemplo el frontend PyMenu est\u00e1 programado en Python. En ese caso no necesitamos un compilador; en todo caso algunas herramientas como el empaquetador de OPK para montar el instalador de PyMenu, pero no el compilador. Por supuesto el toolchain ser\u00e1 imprescindible para construir una imagen completa para la consola. En el post anterior ya se relataron los pasos para realizar esta operaci\u00f3n. En este art\u00edculo vamos a centrarnos en la compilaci\u00f3n de aplicaciones, ya que tiene su propia complejidad. Uno de los problemas del ambiente C es que existen multitud de gestores de compilaci\u00f3n que adem\u00e1s se pueden utilizar de m\u00faltiples formas, por lo que ser\u00e1 habitual que cada aplicaci\u00f3n se compile de una forma particular. Aqu\u00ed vamos a ver algunos ejemplos habituales. En el post anterior se comenta que el toolchain, una vez compilado queda en el directorio ~/git/RG350_buildroot/output/host/usr/bin . Si listamos el contenido de ese directorio veremos muchos binarios y otros tantos enlaces simb\u00f3licos para que algunos de los binarios tengan nombres habituales. Uno de los m\u00e1s importantes es el binario toolchain-wrapper que adopta m\u00faltiples nombres a trav\u00e9s de los enlaces simb\u00f3licos: $ ls -l |fgrep toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-gcw0-linux-uclibc-c++ -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-gcw0-linux-uclibc-cc -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-gcw0-linux-uclibc-cpp -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-gcw0-linux-uclibc-g++ -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-gcw0-linux-uclibc-gcc -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-gcw0-linux-uclibc-gcc-5.4.0 -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-linux-c++ -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-linux-cc -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-linux-cpp -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-linux-g++ -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-linux-gcc -> toolchain-wrapper lrwxrwxrwx 1 root root 17 may 29 00:19 mipsel-linux-gcc-5.4.0 -> toolchain-wrapper -rwxr-xr-x 1 root root 14808 may 29 00:19 toolchain-wrapper Como vemos, encontramos ah\u00ed todos los nombres habituales del compilador de C y C++ para Linux sobre arquitectura MIPS. Veamos pues algunos ejemplos de compilaci\u00f3n de distintos programas. invoker \u00b6 Se trata de un peque\u00f1o programa utilizado por el frontend SimpleMenu para ejecutar los emuladores. El c\u00f3digo de invoker se encuentra en este repositorio . Analizando los ficheros vemos que el proyecto tiene ya hecho un sencillo Makefile. Al ser un programa muy peque\u00f1o y simple resulta muy educativo. Tampoco tiene dependencias con ninguno de los paquetes de Buildroot por lo que no ser\u00e1 necesario compilar antes ninguno de ellos, tan s\u00f3lo el toolchain. Vamos a ver c\u00f3mo compilarlo con nuestro recien construido toolchain paso a paso: Bajamos el c\u00f3digo dentro del directorio git de la m\u00e1quina host que es el que tenemos conectado con el contenedor: $ cd ~/git $ git clone https://github.com/fgl82/invoker.git Editamos el fichero /git/invoker/invoker/Makefile . Cambiamos el par\u00e1metro PLATFORM en las primeras lineas para que sea RG-350 y corregimos la ruta del compilador de nuestro toolchain en la linea 16: ... else ifeq ($(PLATFORM), RG-350) CC = /root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-gcc ... Conectamos con el contenedor: $ docker start RG350_buildroot $ docker exec -it RG350_buildroot /bin/bash Compilamos: # cd ~/git/invoker/invoker # make Veremos los mensajes del compilador y al terminar encontraremos dos nuevos binarios: root@18c6ecd1a610:~/git/invoker/invoker# ls -ltr total 36 -rw-rw-r-- 1 1000 1000 4844 May 30 20 :21 invoker.c -rw-rw-r-- 1 1000 1000 1685 May 30 20 :27 Makefile -rw-r--r-- 1 root root 14368 May 30 20 :28 invoker.o -rwxr-xr-x 1 root root 5484 May 30 20 :28 invoker.dge Tetris Clone for the RG350 \u00b6 Continuamos con un port de un juego. El c\u00f3digo podemos encontrarlo aqu\u00ed . Analizando los ficheros vemos que el proyecto es de tipo CMake . Vamos a ver c\u00f3mo se podr\u00eda compilar: Bajamos el c\u00f3digo: $ cd ~/git $ git clone https://github.com/eduardofilo/tetris_rg350.git Editamos fichero ~/git/tetris_rg350/CMakeLists.txt para ajustar las rutas del toolchain de esta forma: SET(CMAKE_C_COMPILER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-gcc\") SET(CMAKE_CXX_COMPILER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-g++\") SET(CMAKE_RANLIB \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-ranlib\") SET(CMAKE_LINKER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-ld\") SET(CMAKE_FIND_ROOT_PATH /root/git/RG350_buildroot/output/host/usr/mipsel-gcw0-linux-uclibc/sysroot) La forma en la que est\u00e1n construidos los ficheros CMakeLists.txt exige que la versi\u00f3n de cmake a utilizar sea igual o superior a la 3.13, pero nosotros tenemos 3.7. Por tanto es necesario hacer modificaciones en los CMakeLists.txt . Comentamos la \u00faltima l\u00ednea del fichero ~/git/tetris_rg350/CMakeLists.txt : #install(TARGETS tetris RUNTIME DESTINATION ${BIN_DIR} ) Y descomentamos la \u00faltima linea del ~/git/tetris_rg350/src/CMakeLists.txt : install(TARGETS tetris RUNTIME DESTINATION ${BIN_DIR} ) Conectamos con el contenedor que contiene el toolchain: $ docker start RG350_buildroot $ docker exec -it RG350_buildroot /bin/bash El programa tiene 4 paquetes como dependencias, as\u00ed que los tenemos que compilar previamente. Si es la primera vez tardar\u00e1 bastante: # cd ~/git/RG350_buildroot # export BR2_JLEVEL=0 # make sdl2 sdl2_image sdl2_mixer sdl2_ttf Finalmente compilamos el programa (el binario resultante de la compilaci\u00f3n queda en ~/git/tetris_rg350/build/tetris ): # cd ~/git/tetris_rg350 # mkdir build # cd ~/git/tetris_rg350/build # cmake .. # make S\u00f3lo queda empaquetar el binario y sus recursos (gr\u00e1ficos, sonidos, fichero .desktop para el lanzador, etc.). Existe un peque\u00f1o script que lo hace por nosotros, as\u00ed que lo utilizamos: # cd ~/git/tetris_rg350/build # ./make_opk.sh Si todo ha ido bien el OPK resultante se encontrar\u00e1 en ~/git/tetris_rg350/build/tetris.opk . Comentar que por ejemplo el OPK compilado de esta forma no es operativo en ROGUE (seguramente por las diferencias en las versiones de las librer\u00edas SDL). Sin embargo en la imagen de sistema compilada con este mismo Buildroot funciona correctamente. DinguxCmdr \u00b6 En esta ocasi\u00f3n vamos a compilar una aplicaci\u00f3n de uso frecuente, el DinguxCommander o DinguxCmdr. Las fuentes las podemos encontrar en este repositorio . Analizando su contenido vemos que ofrece un script para automatizar la compilaci\u00f3n, aunque internamente se trata de un proyecto de tipo CMake . El procedimiento para compilarlo es: Bajamos el c\u00f3digo: $ cd ~/git $ git clone https://github.com/od-contrib/commander.git Conectamos con el contenedor que contiene el toolchain: $ docker start RG350_buildroot $ docker exec -it RG350_buildroot /bin/bash Definimos la variable de entorno que servir\u00e1 para localizar el toolchain de nuestro Buildroot: # export BUILDROOT=/root/git/RG350_buildroot Ejecutamos el script indicando la plataforma de destino: # cd ~/git/commander # ./build.sh rg350 Tras terminar encontraremos el OPK en ~/git/commander/build-rg350/commander-rg350.opk . Al igual que ocurre con Tetris Clone for the RG350 el OPK no es operativo en ROGUE. Sin embargo en la imagen de sistema compilada con este mismo Buildroot funciona correctamente.","title":"RG350 Compilar aplicaciones"},{"location":"2020-05-31-rg350_compile.html#invoker","text":"Se trata de un peque\u00f1o programa utilizado por el frontend SimpleMenu para ejecutar los emuladores. El c\u00f3digo de invoker se encuentra en este repositorio . Analizando los ficheros vemos que el proyecto tiene ya hecho un sencillo Makefile. Al ser un programa muy peque\u00f1o y simple resulta muy educativo. Tampoco tiene dependencias con ninguno de los paquetes de Buildroot por lo que no ser\u00e1 necesario compilar antes ninguno de ellos, tan s\u00f3lo el toolchain. Vamos a ver c\u00f3mo compilarlo con nuestro recien construido toolchain paso a paso: Bajamos el c\u00f3digo dentro del directorio git de la m\u00e1quina host que es el que tenemos conectado con el contenedor: $ cd ~/git $ git clone https://github.com/fgl82/invoker.git Editamos el fichero /git/invoker/invoker/Makefile . Cambiamos el par\u00e1metro PLATFORM en las primeras lineas para que sea RG-350 y corregimos la ruta del compilador de nuestro toolchain en la linea 16: ... else ifeq ($(PLATFORM), RG-350) CC = /root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-gcc ... Conectamos con el contenedor: $ docker start RG350_buildroot $ docker exec -it RG350_buildroot /bin/bash Compilamos: # cd ~/git/invoker/invoker # make Veremos los mensajes del compilador y al terminar encontraremos dos nuevos binarios: root@18c6ecd1a610:~/git/invoker/invoker# ls -ltr total 36 -rw-rw-r-- 1 1000 1000 4844 May 30 20 :21 invoker.c -rw-rw-r-- 1 1000 1000 1685 May 30 20 :27 Makefile -rw-r--r-- 1 root root 14368 May 30 20 :28 invoker.o -rwxr-xr-x 1 root root 5484 May 30 20 :28 invoker.dge","title":"invoker"},{"location":"2020-05-31-rg350_compile.html#tetris-clone-for-the-rg350","text":"Continuamos con un port de un juego. El c\u00f3digo podemos encontrarlo aqu\u00ed . Analizando los ficheros vemos que el proyecto es de tipo CMake . Vamos a ver c\u00f3mo se podr\u00eda compilar: Bajamos el c\u00f3digo: $ cd ~/git $ git clone https://github.com/eduardofilo/tetris_rg350.git Editamos fichero ~/git/tetris_rg350/CMakeLists.txt para ajustar las rutas del toolchain de esta forma: SET(CMAKE_C_COMPILER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-gcc\") SET(CMAKE_CXX_COMPILER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-g++\") SET(CMAKE_RANLIB \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-ranlib\") SET(CMAKE_LINKER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-ld\") SET(CMAKE_FIND_ROOT_PATH /root/git/RG350_buildroot/output/host/usr/mipsel-gcw0-linux-uclibc/sysroot) La forma en la que est\u00e1n construidos los ficheros CMakeLists.txt exige que la versi\u00f3n de cmake a utilizar sea igual o superior a la 3.13, pero nosotros tenemos 3.7. Por tanto es necesario hacer modificaciones en los CMakeLists.txt . Comentamos la \u00faltima l\u00ednea del fichero ~/git/tetris_rg350/CMakeLists.txt : #install(TARGETS tetris RUNTIME DESTINATION ${BIN_DIR} ) Y descomentamos la \u00faltima linea del ~/git/tetris_rg350/src/CMakeLists.txt : install(TARGETS tetris RUNTIME DESTINATION ${BIN_DIR} ) Conectamos con el contenedor que contiene el toolchain: $ docker start RG350_buildroot $ docker exec -it RG350_buildroot /bin/bash El programa tiene 4 paquetes como dependencias, as\u00ed que los tenemos que compilar previamente. Si es la primera vez tardar\u00e1 bastante: # cd ~/git/RG350_buildroot # export BR2_JLEVEL=0 # make sdl2 sdl2_image sdl2_mixer sdl2_ttf Finalmente compilamos el programa (el binario resultante de la compilaci\u00f3n queda en ~/git/tetris_rg350/build/tetris ): # cd ~/git/tetris_rg350 # mkdir build # cd ~/git/tetris_rg350/build # cmake .. # make S\u00f3lo queda empaquetar el binario y sus recursos (gr\u00e1ficos, sonidos, fichero .desktop para el lanzador, etc.). Existe un peque\u00f1o script que lo hace por nosotros, as\u00ed que lo utilizamos: # cd ~/git/tetris_rg350/build # ./make_opk.sh Si todo ha ido bien el OPK resultante se encontrar\u00e1 en ~/git/tetris_rg350/build/tetris.opk . Comentar que por ejemplo el OPK compilado de esta forma no es operativo en ROGUE (seguramente por las diferencias en las versiones de las librer\u00edas SDL). Sin embargo en la imagen de sistema compilada con este mismo Buildroot funciona correctamente.","title":"Tetris Clone for the RG350"},{"location":"2020-05-31-rg350_compile.html#dinguxcmdr","text":"En esta ocasi\u00f3n vamos a compilar una aplicaci\u00f3n de uso frecuente, el DinguxCommander o DinguxCmdr. Las fuentes las podemos encontrar en este repositorio . Analizando su contenido vemos que ofrece un script para automatizar la compilaci\u00f3n, aunque internamente se trata de un proyecto de tipo CMake . El procedimiento para compilarlo es: Bajamos el c\u00f3digo: $ cd ~/git $ git clone https://github.com/od-contrib/commander.git Conectamos con el contenedor que contiene el toolchain: $ docker start RG350_buildroot $ docker exec -it RG350_buildroot /bin/bash Definimos la variable de entorno que servir\u00e1 para localizar el toolchain de nuestro Buildroot: # export BUILDROOT=/root/git/RG350_buildroot Ejecutamos el script indicando la plataforma de destino: # cd ~/git/commander # ./build.sh rg350 Tras terminar encontraremos el OPK en ~/git/commander/build-rg350/commander-rg350.opk . Al igual que ocurre con Tetris Clone for the RG350 el OPK no es operativo en ROGUE. Sin embargo en la imagen de sistema compilada con este mismo Buildroot funciona correctamente.","title":"DinguxCmdr"},{"location":"2020-06-04-rg350_raspi_image.html","text":"Muchas de las placas Linux Embedded , como RG350 o Raspberry Pi, contienen el sistema operativo en una microSD con una distribuci\u00f3n de particiones y archivos determinada. Una vez que tenemos un sistema configurado a nuestro gusto nos puede interesar hacer una imagen de la misma por si se corrompe o estropea la tarjeta que estamos utilizando o por si queremos distribuir el sistema a otras personas. En este art\u00edculo se comenta el procedimiento para obtener un dump o imagen de una tarjeta SD, consistente en producir un fichero con el contenido y estructura de una tarjeta dada, es decir el proceso opuesto al flasheo. Teor\u00eda \u00b6 En teor\u00eda para hacer la imagen tan s\u00f3lo necesitar\u00edamos una herramienta para hacer el dump. En la pr\u00e1ctica hay varios temas que merece la pena considerar antes de utilizar una de estas utilidades. Vamos a comentarlas a continuaci\u00f3n. Si no te interesan estos aspectos puedes saltar directamente al apartado Pr\u00e1ctica . Tama\u00f1o de la tarjeta \u00b6 Es obvio que si hacemos una imagen de una tarjeta de 32GB, luego no tendremos problemas flasheando por ejemplo en tarjetas de 64GB y ser\u00e1 imposible flashearla en tarjetas de 16GB. Lo que no resulta tan obvio es que esa imagen de 32GB es posible que no entre en muchas otras tarjetas de 32GB. \u00bfPor qu\u00e9? Pues porque no hay dos tarjetas iguales. Por alg\u00fan motivo que desconozco, los fabricantes producen tarjetas con peque\u00f1as diferencias sobre la capacidad nominal. Podemos consultar los detalles de la capacidad de una tarjeta por medio del comando fdisk --list (en Linux; luego veremos un programa equivalente en Windows). La primera linea de toda la informaci\u00f3n que devuelve este comando nos da los detalles sobre la capacidad de la tarjeta. Por ejemplo este es el resultado de ejecutar este comando en tres tarjetas de 16GB de distintos fabricantes: Fabricante Detalles Capacidad en MB Energizer 14,47 GiB, 15523119104 bytes, 30318592 sectores 14804 Toshiba 14,5 GiB, 15552479232 bytes, 30375936 sectores 14832 Samsung PRO 14,93 GiB, 16003891200 bytes, 31257600 sectores 15262,5 A la vista de esto se entiende que si hacemos una imagen de la tarjeta Toshiba por ejemplo, se podr\u00e1 flashear sin modificar en la Samsung PRO pero no en la Energizer. El truco para crear una imagen de por ejemplo 16GB (nominalmente) que luego vaya a poderse flashear sin problemas en todas las tarjetas de 16GB del mercado consiste en encoger la \u00faltima partici\u00f3n de la tarjeta de manera que dejemos un espacio de seguridad sin utilizar al final. Por ejemplo en el caso de la Toshiba que ya hemos determinado que es bastante peque\u00f1a, vamos a dejar 200MB. En caso de trabajar con la Samsung ser\u00eda mejor elevar esa cifra hasta los 500MB. Dump parcial \u00b6 M\u00e1s tarde a la hora de realizar el dump o generaci\u00f3n del archivo de imagen, tendremos que indicar al programa de turno que lea s\u00f3lo el espacio ocupado por las particiones. De esta manera el fichero de imagen no cubrir\u00e1 esos MB de margen que hemos dejado en el paso anterior, y a la hora de escribir en tarjetas especialmente peque\u00f1as no obtendremos el t\u00edpico error de que se ha alcanzado el l\u00edmite del dispositivo. En realidad lo verdaderamente importante es haber dejado el espacio sin utilizar al final de la tarjeta. Si luego hacemos el dump de toda la tarjeta, aunque obtengamos el error mencionado anteriormente al hacer el flasheo, \u00e9ste se podr\u00e1 considerar correcto, ya que se dar\u00e1 fuera del espacio utilizado por las particiones. Es algo parecido a dejar un margen grande en los documentos de texto que escribimos. As\u00ed si luego imprimimos estos documento en hojas ligeramente m\u00e1s peque\u00f1as (por haber recortado los bordes por ejemplo) el contenido del documento se presentar\u00e1 \u00edntegro aunque la impresora pueda detectar que la hoja es m\u00e1s peque\u00f1a de lo esperado e incluso pueda mostrar un error por ello. Siguiendo con el ejemplo de la tarjeta de 16GB anterior, vamos a ver c\u00f3mo hacer las cuentas de la cantidad de tarjeta que tenemos que leer durante el dump para que s\u00f3lo cubra el espacio ocupado por las particiones, dejando fuera el espacio final sin utilizar que hemos reservado. En Linux consultamos la informaci\u00f3n de la tarjeta y las particiones que contiene mediante fdisk : $ sudo fdisk -l /dev/mmcblk0 Disco /dev/mmcblk0: 14,5 GiB, 15552479232 bytes, 30375936 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes Tama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x8e7b7353 Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo /dev/mmcblk0p1 32 819199 819168 400M b W95 FAT32 /dev/mmcblk0p2 819200 29966335 29147136 13,9G 83 Linux Los datos que nos interesan son el sector de comienzo y el n\u00famero de sectores de la \u00faltima partici\u00f3n, en este caso 819200 y 29147136 respectivamente. En Windows obtendremos esta misma informaci\u00f3n con DiskGenius seleccionando la \u00faltima partici\u00f3n de la tarjeta: En este caso los datos que nos interesan son los valores Total Sectors y Starting Sector . Como vemos coinciden con los valores 29147136 y 819200 que hab\u00edamos localizado en Linux. Una vez que tenemos estos valores, el n\u00famero de sectores a copiar en el dump ser\u00e1 la suma de los mismos, es decir 819200 + 29147136 = 29966336 sectores. En la informaci\u00f3n que ofrec\u00eda el comando fdisk de Linux, vemos claramente que cada sector ocupa 512 bytes. DiskGenius tambi\u00e9n ofrece ese dato en el valor Sector Size . Por tanto el dump tiene que hacerse de 29966336 * 512 = 15342764032 bytes = 14983168 KB = 14632 MB. As\u00ed pues, el dump que haremos en este caso ser\u00e1 de 29966336 sectores o lo que es lo mismo de 14632 MB . Informaci\u00f3n residual en espacio libre \u00b6 Muchos ya sabr\u00e9is que cuando se elimina un fichero en un sistema de archivo, normalmente s\u00f3lo se da de baja de las tablas de directorios, pero el contenido del mismo se mantiene en su lugar. Esto se hace por eficacia de los sistemas de archivo (dedicarse a escribir ceros en donde antes hab\u00eda un fichero que acabamos de borrar lleva tiempo y consumo de ciclos de escritura en dispositivos flash). Tambi\u00e9n permite recuperar informaci\u00f3n borrada por error. Pero cuando estamos pensando en hacer una imagen, toda esa informaci\u00f3n que en teor\u00eda ya no deber\u00eda estar ah\u00ed es un problema. Primero porque har\u00e1 que la imagen se comprima peor y segundo porque estaremos incluyendo datos que a lo mejor no nos interesa publicar (por eso los hemos borrado seguramente). As\u00ed pues ser\u00e1 muy conveniente borrar efectivamente todo el espacio de las particiones que dejemos libre. Pr\u00e1ctica \u00b6 Una vez explicadas algunas de las cosas que vamos a hacer a partir de ahora, vamos a mostrar el proceso paso a paso en Linux y Windows. Linux \u00b6 Reducimos con gparted el tama\u00f1o de la \u00faltima partici\u00f3n para dejar espacio libre al final de la tarjeta. Seg\u00fan los datos mostrados en la teor\u00eda dejar\u00edamos 200MB libres en la tarjeta Toshiba del ejemplo. Montamos la tarjeta en nuestro sistema y averiguamos los directorios donde se anclan las particiones (en sistemas como los de la RG350 y Raspberry Pi ser\u00e1n dos casi siempre), por ejemplo en mi m\u00e1quina (filtro la salida del comando df por mmcblk0 porque es el nombre de dispositivo que adopta siempre el lector de tarjetas de mi port\u00e1til, pero puede cambiar en otras m\u00e1quinas; retirar el grep si se desconoce): $ df -h | grep mmcblk0 /dev/mmcblk0p1 400M 179M 221M 45% /media/edumoreno/2738-756D /dev/mmcblk0p2 14G 13G 1,3G 91% /media/edumoreno/6684e595-e23b-4e2f-8eb9-65f1286798cd Escribimos ceros en el espacio no utilizado de la tarjeta. Nos situamos en un directorio cualquiera de esas dos particiones (por ejemplo el ra\u00edz) y ejecutamos los siguientes comandos (hay que hacerlo para cada partici\u00f3n): $ cd /media/edumoreno/2738-756D $ sudo dd if=/dev/zero of=zero.txt && sudo sync $ sudo rm zero.txt && sudo sync $ cd /media/edumoreno/6684e595-e23b-4e2f-8eb9-65f1286798cd $ sudo dd if=/dev/zero of=zero.txt && sudo sync $ sudo rm zero.txt && sudo sync Desmontamos las particiones para que no se puedan modificar durante el dump: $ sudo umount /dev/mmcblk0p* Finalmente realizamos el dump. Vamos a hacer el dump en bloques de 2MB y dado que seg\u00fan las cuentas hechas en la teor\u00eda s\u00f3lo queremos copiar 14632 MB, el dump ser\u00e1 de 14632 / 2 = 7316 bloques: $ sudo dd if=/dev/mmcblk0 of=imagen.img bs=2M count=7316 status=progress El comando anterior puede tardar bastante. Al finalizar encontraremos el fichero imagen.img con nuestro dump de la tarjeta con el tama\u00f1o prometido: $ ls -l --block-size=M total 14632M -rwxrwxrwx 1 edumoreno edumoreno 14632M jun 4 00:44 imagen.img Suele ser conveniente comprimir el dump (ya que como sabemos contendr\u00e1 mucho espacio vac\u00edo que se comprimir\u00e1 bien). Adem\u00e1s la mayor\u00eda de las aplicaciones de flasheo aceptan imagenes comprimidas directamente. Los comandos para rellenar con ceros del punto 3, en el caso de hacerse sobre particiones Linux (ext4, ext3, ext2), hay un comando espec\u00edfico para esa tarea. Se trata del zerofree . As\u00ed se aplicar\u00eda sobre la segunda partici\u00f3n del ejemplo que es de tipo Linux. En este caso hay que utilizarlo con la partici\u00f3n desmontada. El valor que va detr\u00e1s de la opci\u00f3n -f es el que se utilizar\u00e1 para rellenar el espacio no asignado. En el ejemplo siguiente utilizamos el valor 0xFF (255) ya que las unidades de tipo flash suelen utilizar el estado alto (1) como natural: $ sudo umount /dev/mmcblk0p2 $ sudo zerofree -v -f 0xFF /dev/mmcblk0p2 Windows \u00b6 En el caso de Windows todos los pasos los podemos realizar con la excelente utilidad DiskGenius si contamos con la versi\u00f3n de pago. Si s\u00f3lo tenemos la versi\u00f3n Free, el paso final lo realizaremos con Win32DiskImager . Reducimos con DiskGenius el tama\u00f1o de la \u00faltima partici\u00f3n para dejar espacio libre al final de la tarjeta. Seg\u00fan los datos mostrados en la teor\u00eda dejar\u00edamos 200MB libres en la tarjeta Toshiba del ejemplo. Escribimos ceros en el espacio no utilizado de la tarjeta. Para ello en DiskGenius seleccionamos el men\u00fa Tools > Erase Free Space . Aparece una ventana mostr\u00e1ndonos todas las particiones de los discos detectados en el sistema. Seleccionamos en primer lugar la primera partici\u00f3n: Al pulsar OK aparece otra ventana que nos permite seleccionar el valor que se escribir\u00e1 en el espacio no utilizado. Dejamos el valor 00 que nos ofrece y pulsamos OK : Se nos informa del progreso hasta que el proceso termina y podemos cerrar pulsando Complete : Repetimos el proceso para borrar el espacio no utilizado de la segunda partici\u00f3n. Esta vez tardar\u00e1 m\u00e1s tiempo: Para hacer el dump final abandonamos DiskGenius porque la funci\u00f3n que necesitamos para ello ( Tools > Copy Sectors ) s\u00f3lo est\u00e1 disponible en la versi\u00f3n de pago. Pasamos a utilizar Win32DiskImager. Abrimos la utilidad y la configuramos indicando en Image File el destino y nombre del fichero de imagen, en Device seleccionamos la letra de la unidad donde se monta la partici\u00f3n FAT de la tarjeta y finalmente marcamos la opci\u00f3n Read Only Allocated Partitions para que el dump no incluya el espacio libre que hemos dejado al final en el paso 1. Finalmente pulsamos Read y esperamos a que el proceso termine: Compresi\u00f3n y troceo de la imagen \u00b6 Como vemos la imagen de una tarjeta SD va a ser casi siempre un fichero enorme. Si queremos compartirla lo habitual ser\u00e1 comprimirla y trocearla con un compresor. Vamos a ver c\u00f3mo hacerlo en Linux y Windows. Linux \u00b6 Como siempre echamos mano de la linea de comando. Vamos a mostrar c\u00f3mo hacerlo en un par de formatos: 7z: $ 7z -v1400m a imagen.img.7z imagen.img Rar: $ rar a -m5 -v1400000k imagen.img.rar imagen.img Windows \u00b6 7z: Naturalmente para que esto funcione debemos tener instalado 7-Zip . Pulsamos con el bot\u00f3n derecho del rat\u00f3n sobre el fichero de imagen y seleccionamos 7-Zip > A\u00f1adir al archivo... en el menu contextual. Aparece una ventana en la que lo \u00fanico que tenemos que cambiar es introducir el n\u00famero de MBs que queremos tengan los trozos. Por ejemplo 1400MB se indica en 7-Zip con 1400M: WinRAR: Igualmente necesitaremos tener instalado WinRAR . Pulsamos con el bot\u00f3n derecho del rat\u00f3n sobre el fichero de imagen y seleccionamos A\u00f1adir al archivo... en el menu contextual que tiene al lado el icono de WinRAR. Aparece una ventana en la que lo \u00fanico que tenemos que cambiar es introducir el n\u00famero de MBs que queremos tengan los trozos. Por ejemplo 1400MB:","title":"RG350 Raspi Imagen"},{"location":"2020-06-04-rg350_raspi_image.html#teoria","text":"En teor\u00eda para hacer la imagen tan s\u00f3lo necesitar\u00edamos una herramienta para hacer el dump. En la pr\u00e1ctica hay varios temas que merece la pena considerar antes de utilizar una de estas utilidades. Vamos a comentarlas a continuaci\u00f3n. Si no te interesan estos aspectos puedes saltar directamente al apartado Pr\u00e1ctica .","title":"Teor\u00eda"},{"location":"2020-06-04-rg350_raspi_image.html#tamano-de-la-tarjeta","text":"Es obvio que si hacemos una imagen de una tarjeta de 32GB, luego no tendremos problemas flasheando por ejemplo en tarjetas de 64GB y ser\u00e1 imposible flashearla en tarjetas de 16GB. Lo que no resulta tan obvio es que esa imagen de 32GB es posible que no entre en muchas otras tarjetas de 32GB. \u00bfPor qu\u00e9? Pues porque no hay dos tarjetas iguales. Por alg\u00fan motivo que desconozco, los fabricantes producen tarjetas con peque\u00f1as diferencias sobre la capacidad nominal. Podemos consultar los detalles de la capacidad de una tarjeta por medio del comando fdisk --list (en Linux; luego veremos un programa equivalente en Windows). La primera linea de toda la informaci\u00f3n que devuelve este comando nos da los detalles sobre la capacidad de la tarjeta. Por ejemplo este es el resultado de ejecutar este comando en tres tarjetas de 16GB de distintos fabricantes: Fabricante Detalles Capacidad en MB Energizer 14,47 GiB, 15523119104 bytes, 30318592 sectores 14804 Toshiba 14,5 GiB, 15552479232 bytes, 30375936 sectores 14832 Samsung PRO 14,93 GiB, 16003891200 bytes, 31257600 sectores 15262,5 A la vista de esto se entiende que si hacemos una imagen de la tarjeta Toshiba por ejemplo, se podr\u00e1 flashear sin modificar en la Samsung PRO pero no en la Energizer. El truco para crear una imagen de por ejemplo 16GB (nominalmente) que luego vaya a poderse flashear sin problemas en todas las tarjetas de 16GB del mercado consiste en encoger la \u00faltima partici\u00f3n de la tarjeta de manera que dejemos un espacio de seguridad sin utilizar al final. Por ejemplo en el caso de la Toshiba que ya hemos determinado que es bastante peque\u00f1a, vamos a dejar 200MB. En caso de trabajar con la Samsung ser\u00eda mejor elevar esa cifra hasta los 500MB.","title":"Tama\u00f1o de la tarjeta"},{"location":"2020-06-04-rg350_raspi_image.html#dump-parcial","text":"M\u00e1s tarde a la hora de realizar el dump o generaci\u00f3n del archivo de imagen, tendremos que indicar al programa de turno que lea s\u00f3lo el espacio ocupado por las particiones. De esta manera el fichero de imagen no cubrir\u00e1 esos MB de margen que hemos dejado en el paso anterior, y a la hora de escribir en tarjetas especialmente peque\u00f1as no obtendremos el t\u00edpico error de que se ha alcanzado el l\u00edmite del dispositivo. En realidad lo verdaderamente importante es haber dejado el espacio sin utilizar al final de la tarjeta. Si luego hacemos el dump de toda la tarjeta, aunque obtengamos el error mencionado anteriormente al hacer el flasheo, \u00e9ste se podr\u00e1 considerar correcto, ya que se dar\u00e1 fuera del espacio utilizado por las particiones. Es algo parecido a dejar un margen grande en los documentos de texto que escribimos. As\u00ed si luego imprimimos estos documento en hojas ligeramente m\u00e1s peque\u00f1as (por haber recortado los bordes por ejemplo) el contenido del documento se presentar\u00e1 \u00edntegro aunque la impresora pueda detectar que la hoja es m\u00e1s peque\u00f1a de lo esperado e incluso pueda mostrar un error por ello. Siguiendo con el ejemplo de la tarjeta de 16GB anterior, vamos a ver c\u00f3mo hacer las cuentas de la cantidad de tarjeta que tenemos que leer durante el dump para que s\u00f3lo cubra el espacio ocupado por las particiones, dejando fuera el espacio final sin utilizar que hemos reservado. En Linux consultamos la informaci\u00f3n de la tarjeta y las particiones que contiene mediante fdisk : $ sudo fdisk -l /dev/mmcblk0 Disco /dev/mmcblk0: 14,5 GiB, 15552479232 bytes, 30375936 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes Tama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x8e7b7353 Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo /dev/mmcblk0p1 32 819199 819168 400M b W95 FAT32 /dev/mmcblk0p2 819200 29966335 29147136 13,9G 83 Linux Los datos que nos interesan son el sector de comienzo y el n\u00famero de sectores de la \u00faltima partici\u00f3n, en este caso 819200 y 29147136 respectivamente. En Windows obtendremos esta misma informaci\u00f3n con DiskGenius seleccionando la \u00faltima partici\u00f3n de la tarjeta: En este caso los datos que nos interesan son los valores Total Sectors y Starting Sector . Como vemos coinciden con los valores 29147136 y 819200 que hab\u00edamos localizado en Linux. Una vez que tenemos estos valores, el n\u00famero de sectores a copiar en el dump ser\u00e1 la suma de los mismos, es decir 819200 + 29147136 = 29966336 sectores. En la informaci\u00f3n que ofrec\u00eda el comando fdisk de Linux, vemos claramente que cada sector ocupa 512 bytes. DiskGenius tambi\u00e9n ofrece ese dato en el valor Sector Size . Por tanto el dump tiene que hacerse de 29966336 * 512 = 15342764032 bytes = 14983168 KB = 14632 MB. As\u00ed pues, el dump que haremos en este caso ser\u00e1 de 29966336 sectores o lo que es lo mismo de 14632 MB .","title":"Dump parcial"},{"location":"2020-06-04-rg350_raspi_image.html#informacion-residual-en-espacio-libre","text":"Muchos ya sabr\u00e9is que cuando se elimina un fichero en un sistema de archivo, normalmente s\u00f3lo se da de baja de las tablas de directorios, pero el contenido del mismo se mantiene en su lugar. Esto se hace por eficacia de los sistemas de archivo (dedicarse a escribir ceros en donde antes hab\u00eda un fichero que acabamos de borrar lleva tiempo y consumo de ciclos de escritura en dispositivos flash). Tambi\u00e9n permite recuperar informaci\u00f3n borrada por error. Pero cuando estamos pensando en hacer una imagen, toda esa informaci\u00f3n que en teor\u00eda ya no deber\u00eda estar ah\u00ed es un problema. Primero porque har\u00e1 que la imagen se comprima peor y segundo porque estaremos incluyendo datos que a lo mejor no nos interesa publicar (por eso los hemos borrado seguramente). As\u00ed pues ser\u00e1 muy conveniente borrar efectivamente todo el espacio de las particiones que dejemos libre.","title":"Informaci\u00f3n residual en espacio libre"},{"location":"2020-06-04-rg350_raspi_image.html#practica","text":"Una vez explicadas algunas de las cosas que vamos a hacer a partir de ahora, vamos a mostrar el proceso paso a paso en Linux y Windows.","title":"Pr\u00e1ctica"},{"location":"2020-06-04-rg350_raspi_image.html#linux","text":"Reducimos con gparted el tama\u00f1o de la \u00faltima partici\u00f3n para dejar espacio libre al final de la tarjeta. Seg\u00fan los datos mostrados en la teor\u00eda dejar\u00edamos 200MB libres en la tarjeta Toshiba del ejemplo. Montamos la tarjeta en nuestro sistema y averiguamos los directorios donde se anclan las particiones (en sistemas como los de la RG350 y Raspberry Pi ser\u00e1n dos casi siempre), por ejemplo en mi m\u00e1quina (filtro la salida del comando df por mmcblk0 porque es el nombre de dispositivo que adopta siempre el lector de tarjetas de mi port\u00e1til, pero puede cambiar en otras m\u00e1quinas; retirar el grep si se desconoce): $ df -h | grep mmcblk0 /dev/mmcblk0p1 400M 179M 221M 45% /media/edumoreno/2738-756D /dev/mmcblk0p2 14G 13G 1,3G 91% /media/edumoreno/6684e595-e23b-4e2f-8eb9-65f1286798cd Escribimos ceros en el espacio no utilizado de la tarjeta. Nos situamos en un directorio cualquiera de esas dos particiones (por ejemplo el ra\u00edz) y ejecutamos los siguientes comandos (hay que hacerlo para cada partici\u00f3n): $ cd /media/edumoreno/2738-756D $ sudo dd if=/dev/zero of=zero.txt && sudo sync $ sudo rm zero.txt && sudo sync $ cd /media/edumoreno/6684e595-e23b-4e2f-8eb9-65f1286798cd $ sudo dd if=/dev/zero of=zero.txt && sudo sync $ sudo rm zero.txt && sudo sync Desmontamos las particiones para que no se puedan modificar durante el dump: $ sudo umount /dev/mmcblk0p* Finalmente realizamos el dump. Vamos a hacer el dump en bloques de 2MB y dado que seg\u00fan las cuentas hechas en la teor\u00eda s\u00f3lo queremos copiar 14632 MB, el dump ser\u00e1 de 14632 / 2 = 7316 bloques: $ sudo dd if=/dev/mmcblk0 of=imagen.img bs=2M count=7316 status=progress El comando anterior puede tardar bastante. Al finalizar encontraremos el fichero imagen.img con nuestro dump de la tarjeta con el tama\u00f1o prometido: $ ls -l --block-size=M total 14632M -rwxrwxrwx 1 edumoreno edumoreno 14632M jun 4 00:44 imagen.img Suele ser conveniente comprimir el dump (ya que como sabemos contendr\u00e1 mucho espacio vac\u00edo que se comprimir\u00e1 bien). Adem\u00e1s la mayor\u00eda de las aplicaciones de flasheo aceptan imagenes comprimidas directamente. Los comandos para rellenar con ceros del punto 3, en el caso de hacerse sobre particiones Linux (ext4, ext3, ext2), hay un comando espec\u00edfico para esa tarea. Se trata del zerofree . As\u00ed se aplicar\u00eda sobre la segunda partici\u00f3n del ejemplo que es de tipo Linux. En este caso hay que utilizarlo con la partici\u00f3n desmontada. El valor que va detr\u00e1s de la opci\u00f3n -f es el que se utilizar\u00e1 para rellenar el espacio no asignado. En el ejemplo siguiente utilizamos el valor 0xFF (255) ya que las unidades de tipo flash suelen utilizar el estado alto (1) como natural: $ sudo umount /dev/mmcblk0p2 $ sudo zerofree -v -f 0xFF /dev/mmcblk0p2","title":"Linux"},{"location":"2020-06-04-rg350_raspi_image.html#windows","text":"En el caso de Windows todos los pasos los podemos realizar con la excelente utilidad DiskGenius si contamos con la versi\u00f3n de pago. Si s\u00f3lo tenemos la versi\u00f3n Free, el paso final lo realizaremos con Win32DiskImager . Reducimos con DiskGenius el tama\u00f1o de la \u00faltima partici\u00f3n para dejar espacio libre al final de la tarjeta. Seg\u00fan los datos mostrados en la teor\u00eda dejar\u00edamos 200MB libres en la tarjeta Toshiba del ejemplo. Escribimos ceros en el espacio no utilizado de la tarjeta. Para ello en DiskGenius seleccionamos el men\u00fa Tools > Erase Free Space . Aparece una ventana mostr\u00e1ndonos todas las particiones de los discos detectados en el sistema. Seleccionamos en primer lugar la primera partici\u00f3n: Al pulsar OK aparece otra ventana que nos permite seleccionar el valor que se escribir\u00e1 en el espacio no utilizado. Dejamos el valor 00 que nos ofrece y pulsamos OK : Se nos informa del progreso hasta que el proceso termina y podemos cerrar pulsando Complete : Repetimos el proceso para borrar el espacio no utilizado de la segunda partici\u00f3n. Esta vez tardar\u00e1 m\u00e1s tiempo: Para hacer el dump final abandonamos DiskGenius porque la funci\u00f3n que necesitamos para ello ( Tools > Copy Sectors ) s\u00f3lo est\u00e1 disponible en la versi\u00f3n de pago. Pasamos a utilizar Win32DiskImager. Abrimos la utilidad y la configuramos indicando en Image File el destino y nombre del fichero de imagen, en Device seleccionamos la letra de la unidad donde se monta la partici\u00f3n FAT de la tarjeta y finalmente marcamos la opci\u00f3n Read Only Allocated Partitions para que el dump no incluya el espacio libre que hemos dejado al final en el paso 1. Finalmente pulsamos Read y esperamos a que el proceso termine:","title":"Windows"},{"location":"2020-06-04-rg350_raspi_image.html#compresion-y-troceo-de-la-imagen","text":"Como vemos la imagen de una tarjeta SD va a ser casi siempre un fichero enorme. Si queremos compartirla lo habitual ser\u00e1 comprimirla y trocearla con un compresor. Vamos a ver c\u00f3mo hacerlo en Linux y Windows.","title":"Compresi\u00f3n y troceo de la imagen"},{"location":"2020-06-04-rg350_raspi_image.html#linux_1","text":"Como siempre echamos mano de la linea de comando. Vamos a mostrar c\u00f3mo hacerlo en un par de formatos: 7z: $ 7z -v1400m a imagen.img.7z imagen.img Rar: $ rar a -m5 -v1400000k imagen.img.rar imagen.img","title":"Linux"},{"location":"2020-06-04-rg350_raspi_image.html#windows_1","text":"7z: Naturalmente para que esto funcione debemos tener instalado 7-Zip . Pulsamos con el bot\u00f3n derecho del rat\u00f3n sobre el fichero de imagen y seleccionamos 7-Zip > A\u00f1adir al archivo... en el menu contextual. Aparece una ventana en la que lo \u00fanico que tenemos que cambiar es introducir el n\u00famero de MBs que queremos tengan los trozos. Por ejemplo 1400MB se indica en 7-Zip con 1400M: WinRAR: Igualmente necesitaremos tener instalado WinRAR . Pulsamos con el bot\u00f3n derecho del rat\u00f3n sobre el fichero de imagen y seleccionamos A\u00f1adir al archivo... en el menu contextual que tiene al lado el icono de WinRAR. Aparece una ventana en la que lo \u00fanico que tenemos que cambiar es introducir el n\u00famero de MBs que queremos tengan los trozos. Por ejemplo 1400MB:","title":"Windows"},{"location":"2020-06-25-rg350_screen_mirroring.html","text":"Compilaci\u00f3n de https://github.com/eduardofilo/stream350client \u00b6 Instalar Docker en m\u00e1quina host: $ sudo apt install docker.io $ sudo groupadd docker $ sudo usermod -aG docker $USER $ sudo systemctl enable docker $ sudo systemctl start docker Bajar el c\u00f3digo del cliente: $ cd ~/git $ git clone git@github.com:eduardofilo/stream350client.git Arrancar contenedor pasando el directorio ~/git como volumen: $ docker run -it -v ~/git:/root/git --name buster_bash debian:buster-slim Ya en la terminal dentro del contenedor (se nota porque ahora el prompt es de superuser), hacemos algunos ajustes en el sistema e instalamos paquetes: # export TZ=Europe/Madrid # ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone # apt-get update && apt-get -y -o Dpkg::Options::=\"--force-confold\" upgrade # apt-get install -y nuget mono-devel mono-xbuild # nuget update -self Nos situamos en el directorio donde est\u00e1 el c\u00f3digo y compilamos: # cd ~/git/stream350client # nuget restore # xbuild stream350client.sln","title":"RG350 Mirror de pantalla"},{"location":"2020-06-25-rg350_screen_mirroring.html#compilacion-de-httpsgithubcomeduardofilostream350client","text":"Instalar Docker en m\u00e1quina host: $ sudo apt install docker.io $ sudo groupadd docker $ sudo usermod -aG docker $USER $ sudo systemctl enable docker $ sudo systemctl start docker Bajar el c\u00f3digo del cliente: $ cd ~/git $ git clone git@github.com:eduardofilo/stream350client.git Arrancar contenedor pasando el directorio ~/git como volumen: $ docker run -it -v ~/git:/root/git --name buster_bash debian:buster-slim Ya en la terminal dentro del contenedor (se nota porque ahora el prompt es de superuser), hacemos algunos ajustes en el sistema e instalamos paquetes: # export TZ=Europe/Madrid # ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone # apt-get update && apt-get -y -o Dpkg::Options::=\"--force-confold\" upgrade # apt-get install -y nuget mono-devel mono-xbuild # nuget update -self Nos situamos en el directorio donde est\u00e1 el c\u00f3digo y compilamos: # cd ~/git/stream350client # nuget restore # xbuild stream350client.sln","title":"Compilaci\u00f3n de https://github.com/eduardofilo/stream350client"},{"location":"2020-06-27-rg350_rom_checking.html","text":"ROM Soccer Superstars - soccerss.zip \u00b6 Ese juego necesita una peque\u00f1a BIOS de Konami. En el DAT pone esto: <game name=\"soccerss\" romof=\"konamigx\"> <description>Soccer Superstars (ver JAA)</description> <year>1994</year> <manufacturer>Konami</manufacturer> <rom name=\"300a01.34k\" merge=\"300a01.34k\" size=\"131072\" crc=\"d5fa95f5\" sha1=\"c483aa98ff8ef40cdac359c19ad23fea5ecc1906\"/> <rom name=\"427a04.28r\" size=\"524288\" crc=\"c7d3e1a2\" sha1=\"5e1e4f4c97def36902ad853248014a7af62e0c5e\"/> <rom name=\"427a05.30r\" size=\"524288\" crc=\"5372f0a5\" sha1=\"36e8d0a73918cbd018c1865d1a05445daba8997c\"/> <rom name=\"427a06.9m\" size=\"131072\" crc=\"979df65d\" sha1=\"7499e9a27aa562692bd3a296789696492a6254bc\"/> <rom name=\"427a07.6m\" size=\"131072\" crc=\"8dbaf4c7\" sha1=\"cb69bf94090a4871b35e7ba1f58e3225077b82cd\"/> <rom name=\"427a08.140\" size=\"2097152\" crc=\"221250af\" sha1=\"fd24e7f0e3024df5aa08506523953c5e35d2267b\"/> <rom name=\"427a09.137\" size=\"2097152\" crc=\"56bdd480\" sha1=\"01d164aedc77f71f6310cfd739c00b33289a2e7e\"/> <rom name=\"427a10.25r\" size=\"2097152\" crc=\"6b3ccb41\" sha1=\"b246ef350a430e60f0afd1b80ff48139c325e926\"/> <rom name=\"427a11.23r\" size=\"2097152\" crc=\"c1ca74c1\" sha1=\"b7286df8e59f8f1939ebf17aaf9345a857b0b100\"/> <rom name=\"427a12.21r\" size=\"2097152\" crc=\"97d6fd38\" sha1=\"8d2895850cafdea95db08c84e7eeea90a1921515\"/> <rom name=\"427a13.18r\" size=\"2097152\" crc=\"815a9b87\" sha1=\"7d9d5932fff7dd7aa4cbccf0c8d3784dc8042e70\"/> <rom name=\"427a14.143\" size=\"524288\" crc=\"7575a0ed\" sha1=\"92fda2747ac090f93e60cff8478af6721b949dc2\"/> <rom name=\"427a15.11r\" size=\"1048576\" crc=\"33ce2b8e\" sha1=\"b0936386cdc7c41f33b1d7b4f5ce25fe618d1286\"/> <rom name=\"427a16.9r\" size=\"2097152\" crc=\"39547265\" sha1=\"c0efd68c0c1ea59141045150842f36d43e1f01d8\"/> <rom name=\"427a17.24c\" size=\"524288\" crc=\"fb6eb01f\" sha1=\"28cdb30ff70ee5fc7624e18fe048dd85dfa49ace\"/> <rom name=\"427a18.145\" size=\"1048576\" crc=\"bb6e6ec6\" sha1=\"aa1365a4318866d9e7e74461a6e6c113f83b6771\"/> <rom name=\"427jaa02.28m\" size=\"524288\" crc=\"210f9ba7\" sha1=\"766fc821d1c7aaf9e306c6e2379d85e7aa50738c\"/> <rom name=\"427jaa03.30m\" size=\"524288\" crc=\"f76add04\" sha1=\"755dff41ce3b0488ed8f9f5feebfe95a22b70d16\"/> </game> Si abrimos el .zip vemos que contiene todas las ROMs menos la primera. El romof=\"konamigx\" del principio indica que la ROM necesita la BIOS konamigx . La definici\u00f3n de este fichero en el mismo DAT del romset es: <game name=\"konamigx\" isbios=\"yes\"> <description>System GX</description> <year>1994</year> <manufacturer>Konami</manufacturer> <rom name=\"300a01.34k\" size=\"131072\" crc=\"d5fa95f5\" sha1=\"c483aa98ff8ef40cdac359c19ad23fea5ecc1906\"/> </game> Ah\u00ed vemos claramente que se trata de una BIOS ( isbios=\"yes\" ). Para que funcione el juego pues hay que localizar el fichero konamigx.zip que contenga la ROM 300a01.34k . ROM The Simpsons (2 Players World, set 2) - simps2pa.zip \u00b6 Este juego es un clon de The Simpsons (4 Players World, set 1) tal y como vemos en el dat: <game name=\"simps2pa\" cloneof=\"simpsons\" romof=\"simpsons\"> <description>The Simpsons (2 Players alt)</description> <year>1991</year> <manufacturer>Konami</manufacturer> <rom name=\"simp1.17c\" size=\"131072\" crc=\"07ceeaea\" sha1=\"c18255ae1d578c2d53de80d6323cdf41cbe47b57\"/> <rom name=\"simp2.16c\" merge=\"g02.16c\" size=\"131072\" crc=\"580ce1d6\" sha1=\"5b07fb8e8041e1663980aa35d853fdc13b22dac5\"/> <rom name=\"simp3.15c\" size=\"131072\" crc=\"96636225\" sha1=\"5de95606e5c9337f18bc42f4df791cacafa20399\"/> <rom name=\"simp4.13c\" size=\"131072\" crc=\"54e6df66\" sha1=\"1b83ae56cf1deb51b04880fa421f06568c938a99\"/> <rom name=\"simp5.6g\" size=\"131072\" crc=\"76c1850c\" sha1=\"9047c6b26c4e33c74eb7400a807d3d9f206f7bbe\"/> <rom name=\"simp_12n.rom\" merge=\"simp_12n.rom\" size=\"1048576\" crc=\"577dbd53\" sha1=\"e603e03e3dcba766074561faa92afafa5761953d\"/> <rom name=\"simp_16h.rom\" merge=\"simp_16h.rom\" size=\"524288\" crc=\"cf2bbcab\" sha1=\"47afea47f9bc8cb5eb1c7b7fbafe954b3e749aeb\"/> <rom name=\"simp_16l.rom\" merge=\"simp_16l.rom\" size=\"1048576\" crc=\"55fab05d\" sha1=\"54db8559d71ed257de9a29c8808654eaea0df9e2\"/> <rom name=\"simp_18h.rom\" merge=\"simp_18h.rom\" size=\"524288\" crc=\"ba1ec910\" sha1=\"0805ccb641271dea43185dc0365732260db1763d\"/> <rom name=\"simp_1d.rom\" merge=\"simp_1d.rom\" size=\"262144\" crc=\"78778013\" sha1=\"edbd6d83b0d1a20df39bb160b92395586fa3c32d\"/> <rom name=\"simp_1f.rom\" merge=\"simp_1f.rom\" size=\"1048576\" crc=\"1397a73b\" sha1=\"369422c84cca5472967af54b8351e29fcd69f621\"/> <rom name=\"simp_3n.rom\" merge=\"simp_3n.rom\" size=\"1048576\" crc=\"7de500ad\" sha1=\"61b76b8f402e3bde1509679aaaa28ef08cafb0ab\"/> <rom name=\"simp_8n.rom\" merge=\"simp_8n.rom\" size=\"1048576\" crc=\"aa085093\" sha1=\"925239d79bf607021d371263352618876f59c1f8\"/> </game> Necesita por tanto que el juego base est\u00e9 instalado: <game name=\"simpsons\"> <description>The Simpsons (4 Players)</description> <year>1991</year> <manufacturer>Konami</manufacturer> <rom name=\"e03.6g\" size=\"131072\" crc=\"866b7a35\" sha1=\"98905764eb4c7d968ccc17618a1f24ee12e33c0e\"/> <rom name=\"g01.17c\" size=\"131072\" crc=\"9f843def\" sha1=\"858432b59101b0577c5cec6ac0c7c20ab0780c9a\"/> <rom name=\"g02.16c\" size=\"131072\" crc=\"580ce1d6\" sha1=\"5b07fb8e8041e1663980aa35d853fdc13b22dac5\"/> <rom name=\"j12.15c\" size=\"131072\" crc=\"479e12f2\" sha1=\"15a6cb12e68b4773a29ab463640a43f8e814de59\"/> <rom name=\"j13.13c\" size=\"131072\" crc=\"aade2abd\" sha1=\"10f178d5ed399b4866266e075d91ca3db26798f8\"/> <rom name=\"simp_12n.rom\" size=\"1048576\" crc=\"577dbd53\" sha1=\"e603e03e3dcba766074561faa92afafa5761953d\"/> <rom name=\"simp_16h.rom\" size=\"524288\" crc=\"cf2bbcab\" sha1=\"47afea47f9bc8cb5eb1c7b7fbafe954b3e749aeb\"/> <rom name=\"simp_16l.rom\" size=\"1048576\" crc=\"55fab05d\" sha1=\"54db8559d71ed257de9a29c8808654eaea0df9e2\"/> <rom name=\"simp_18h.rom\" size=\"524288\" crc=\"ba1ec910\" sha1=\"0805ccb641271dea43185dc0365732260db1763d\"/> <rom name=\"simp_1d.rom\" size=\"262144\" crc=\"78778013\" sha1=\"edbd6d83b0d1a20df39bb160b92395586fa3c32d\"/> <rom name=\"simp_1f.rom\" size=\"1048576\" crc=\"1397a73b\" sha1=\"369422c84cca5472967af54b8351e29fcd69f621\"/> <rom name=\"simp_3n.rom\" size=\"1048576\" crc=\"7de500ad\" sha1=\"61b76b8f402e3bde1509679aaaa28ef08cafb0ab\"/> <rom name=\"simp_8n.rom\" size=\"1048576\" crc=\"aa085093\" sha1=\"925239d79bf607021d371263352618876f59c1f8\"/> </game> Empaquetar al final las ROMs con: zip -0 rom.zip *","title":"Correcci\u00f3n de ROMs MAME"},{"location":"2020-06-27-rg350_rom_checking.html#rom-soccer-superstars-soccersszip","text":"Ese juego necesita una peque\u00f1a BIOS de Konami. En el DAT pone esto: <game name=\"soccerss\" romof=\"konamigx\"> <description>Soccer Superstars (ver JAA)</description> <year>1994</year> <manufacturer>Konami</manufacturer> <rom name=\"300a01.34k\" merge=\"300a01.34k\" size=\"131072\" crc=\"d5fa95f5\" sha1=\"c483aa98ff8ef40cdac359c19ad23fea5ecc1906\"/> <rom name=\"427a04.28r\" size=\"524288\" crc=\"c7d3e1a2\" sha1=\"5e1e4f4c97def36902ad853248014a7af62e0c5e\"/> <rom name=\"427a05.30r\" size=\"524288\" crc=\"5372f0a5\" sha1=\"36e8d0a73918cbd018c1865d1a05445daba8997c\"/> <rom name=\"427a06.9m\" size=\"131072\" crc=\"979df65d\" sha1=\"7499e9a27aa562692bd3a296789696492a6254bc\"/> <rom name=\"427a07.6m\" size=\"131072\" crc=\"8dbaf4c7\" sha1=\"cb69bf94090a4871b35e7ba1f58e3225077b82cd\"/> <rom name=\"427a08.140\" size=\"2097152\" crc=\"221250af\" sha1=\"fd24e7f0e3024df5aa08506523953c5e35d2267b\"/> <rom name=\"427a09.137\" size=\"2097152\" crc=\"56bdd480\" sha1=\"01d164aedc77f71f6310cfd739c00b33289a2e7e\"/> <rom name=\"427a10.25r\" size=\"2097152\" crc=\"6b3ccb41\" sha1=\"b246ef350a430e60f0afd1b80ff48139c325e926\"/> <rom name=\"427a11.23r\" size=\"2097152\" crc=\"c1ca74c1\" sha1=\"b7286df8e59f8f1939ebf17aaf9345a857b0b100\"/> <rom name=\"427a12.21r\" size=\"2097152\" crc=\"97d6fd38\" sha1=\"8d2895850cafdea95db08c84e7eeea90a1921515\"/> <rom name=\"427a13.18r\" size=\"2097152\" crc=\"815a9b87\" sha1=\"7d9d5932fff7dd7aa4cbccf0c8d3784dc8042e70\"/> <rom name=\"427a14.143\" size=\"524288\" crc=\"7575a0ed\" sha1=\"92fda2747ac090f93e60cff8478af6721b949dc2\"/> <rom name=\"427a15.11r\" size=\"1048576\" crc=\"33ce2b8e\" sha1=\"b0936386cdc7c41f33b1d7b4f5ce25fe618d1286\"/> <rom name=\"427a16.9r\" size=\"2097152\" crc=\"39547265\" sha1=\"c0efd68c0c1ea59141045150842f36d43e1f01d8\"/> <rom name=\"427a17.24c\" size=\"524288\" crc=\"fb6eb01f\" sha1=\"28cdb30ff70ee5fc7624e18fe048dd85dfa49ace\"/> <rom name=\"427a18.145\" size=\"1048576\" crc=\"bb6e6ec6\" sha1=\"aa1365a4318866d9e7e74461a6e6c113f83b6771\"/> <rom name=\"427jaa02.28m\" size=\"524288\" crc=\"210f9ba7\" sha1=\"766fc821d1c7aaf9e306c6e2379d85e7aa50738c\"/> <rom name=\"427jaa03.30m\" size=\"524288\" crc=\"f76add04\" sha1=\"755dff41ce3b0488ed8f9f5feebfe95a22b70d16\"/> </game> Si abrimos el .zip vemos que contiene todas las ROMs menos la primera. El romof=\"konamigx\" del principio indica que la ROM necesita la BIOS konamigx . La definici\u00f3n de este fichero en el mismo DAT del romset es: <game name=\"konamigx\" isbios=\"yes\"> <description>System GX</description> <year>1994</year> <manufacturer>Konami</manufacturer> <rom name=\"300a01.34k\" size=\"131072\" crc=\"d5fa95f5\" sha1=\"c483aa98ff8ef40cdac359c19ad23fea5ecc1906\"/> </game> Ah\u00ed vemos claramente que se trata de una BIOS ( isbios=\"yes\" ). Para que funcione el juego pues hay que localizar el fichero konamigx.zip que contenga la ROM 300a01.34k .","title":"ROM Soccer Superstars - soccerss.zip"},{"location":"2020-06-27-rg350_rom_checking.html#rom-the-simpsons-2-players-world-set-2-simps2pazip","text":"Este juego es un clon de The Simpsons (4 Players World, set 1) tal y como vemos en el dat: <game name=\"simps2pa\" cloneof=\"simpsons\" romof=\"simpsons\"> <description>The Simpsons (2 Players alt)</description> <year>1991</year> <manufacturer>Konami</manufacturer> <rom name=\"simp1.17c\" size=\"131072\" crc=\"07ceeaea\" sha1=\"c18255ae1d578c2d53de80d6323cdf41cbe47b57\"/> <rom name=\"simp2.16c\" merge=\"g02.16c\" size=\"131072\" crc=\"580ce1d6\" sha1=\"5b07fb8e8041e1663980aa35d853fdc13b22dac5\"/> <rom name=\"simp3.15c\" size=\"131072\" crc=\"96636225\" sha1=\"5de95606e5c9337f18bc42f4df791cacafa20399\"/> <rom name=\"simp4.13c\" size=\"131072\" crc=\"54e6df66\" sha1=\"1b83ae56cf1deb51b04880fa421f06568c938a99\"/> <rom name=\"simp5.6g\" size=\"131072\" crc=\"76c1850c\" sha1=\"9047c6b26c4e33c74eb7400a807d3d9f206f7bbe\"/> <rom name=\"simp_12n.rom\" merge=\"simp_12n.rom\" size=\"1048576\" crc=\"577dbd53\" sha1=\"e603e03e3dcba766074561faa92afafa5761953d\"/> <rom name=\"simp_16h.rom\" merge=\"simp_16h.rom\" size=\"524288\" crc=\"cf2bbcab\" sha1=\"47afea47f9bc8cb5eb1c7b7fbafe954b3e749aeb\"/> <rom name=\"simp_16l.rom\" merge=\"simp_16l.rom\" size=\"1048576\" crc=\"55fab05d\" sha1=\"54db8559d71ed257de9a29c8808654eaea0df9e2\"/> <rom name=\"simp_18h.rom\" merge=\"simp_18h.rom\" size=\"524288\" crc=\"ba1ec910\" sha1=\"0805ccb641271dea43185dc0365732260db1763d\"/> <rom name=\"simp_1d.rom\" merge=\"simp_1d.rom\" size=\"262144\" crc=\"78778013\" sha1=\"edbd6d83b0d1a20df39bb160b92395586fa3c32d\"/> <rom name=\"simp_1f.rom\" merge=\"simp_1f.rom\" size=\"1048576\" crc=\"1397a73b\" sha1=\"369422c84cca5472967af54b8351e29fcd69f621\"/> <rom name=\"simp_3n.rom\" merge=\"simp_3n.rom\" size=\"1048576\" crc=\"7de500ad\" sha1=\"61b76b8f402e3bde1509679aaaa28ef08cafb0ab\"/> <rom name=\"simp_8n.rom\" merge=\"simp_8n.rom\" size=\"1048576\" crc=\"aa085093\" sha1=\"925239d79bf607021d371263352618876f59c1f8\"/> </game> Necesita por tanto que el juego base est\u00e9 instalado: <game name=\"simpsons\"> <description>The Simpsons (4 Players)</description> <year>1991</year> <manufacturer>Konami</manufacturer> <rom name=\"e03.6g\" size=\"131072\" crc=\"866b7a35\" sha1=\"98905764eb4c7d968ccc17618a1f24ee12e33c0e\"/> <rom name=\"g01.17c\" size=\"131072\" crc=\"9f843def\" sha1=\"858432b59101b0577c5cec6ac0c7c20ab0780c9a\"/> <rom name=\"g02.16c\" size=\"131072\" crc=\"580ce1d6\" sha1=\"5b07fb8e8041e1663980aa35d853fdc13b22dac5\"/> <rom name=\"j12.15c\" size=\"131072\" crc=\"479e12f2\" sha1=\"15a6cb12e68b4773a29ab463640a43f8e814de59\"/> <rom name=\"j13.13c\" size=\"131072\" crc=\"aade2abd\" sha1=\"10f178d5ed399b4866266e075d91ca3db26798f8\"/> <rom name=\"simp_12n.rom\" size=\"1048576\" crc=\"577dbd53\" sha1=\"e603e03e3dcba766074561faa92afafa5761953d\"/> <rom name=\"simp_16h.rom\" size=\"524288\" crc=\"cf2bbcab\" sha1=\"47afea47f9bc8cb5eb1c7b7fbafe954b3e749aeb\"/> <rom name=\"simp_16l.rom\" size=\"1048576\" crc=\"55fab05d\" sha1=\"54db8559d71ed257de9a29c8808654eaea0df9e2\"/> <rom name=\"simp_18h.rom\" size=\"524288\" crc=\"ba1ec910\" sha1=\"0805ccb641271dea43185dc0365732260db1763d\"/> <rom name=\"simp_1d.rom\" size=\"262144\" crc=\"78778013\" sha1=\"edbd6d83b0d1a20df39bb160b92395586fa3c32d\"/> <rom name=\"simp_1f.rom\" size=\"1048576\" crc=\"1397a73b\" sha1=\"369422c84cca5472967af54b8351e29fcd69f621\"/> <rom name=\"simp_3n.rom\" size=\"1048576\" crc=\"7de500ad\" sha1=\"61b76b8f402e3bde1509679aaaa28ef08cafb0ab\"/> <rom name=\"simp_8n.rom\" size=\"1048576\" crc=\"aa085093\" sha1=\"925239d79bf607021d371263352618876f59c1f8\"/> </game> Empaquetar al final las ROMs con: zip -0 rom.zip *","title":"ROM The Simpsons (2 Players World, set 2) - simps2pa.zip"},{"location":"2020-07-02-rg350_primeros_pasos.html","text":"En este art\u00edculo vamos a tratar las dudas iniciales que se suelen tener cuando se comienza con esta consola. En este documento ya se encuentran descritos unos cuantos conceptos y respondidas algunas preguntas frecuentes , pero aqu\u00ed vamos a centrarnos en las dudas iniciales, es decir las que suelen surgir nada m\u00e1s sacar la consola de la caja. Instalaci\u00f3n/actualizaci\u00f3n de emuladores/OPKs \u00b6 De f\u00e1brica la consola suele venir con muchos emuladores instalados, aunque no suelen ser las versiones m\u00e1s actualizadas. As\u00ed pues, una de las primeras inquietudes suele ser la de actualizar los emuladores preinstalados o a\u00f1adir otros nuevos. Lo primero ser\u00eda entender el formato de los mismos. En el documento general sobre RG350 ya se comenta algo sobre ello. Aunque no es obligatorio, la mayor\u00eda de los emuladores los vamos a encontrar en formato OPK. Es la forma m\u00e1s sencilla y conveniente para distribuir aplicaciones de cualquier tipo en el sistema operativo de la consola (OpenDingux). Los OPKs son ficheros \u00fanicos que internamente contienen todos los ficheros que necesita el emulador (ejecutables, configuraciones, im\u00e1genes, sonidos, etc.). As\u00ed pues si queremos actualizar por ejemplo el emulador de Game Boy, simplemente tenemos que localizar el fichero OPK y copiarlo a la consola (m\u00e1s adelante diremos d\u00f3nde). \u00bfD\u00f3nde encontramos los ficheros OPK? \u00b6 Desafortunadamente, el concepto tan habitual en otros sistemas de tienda de aplicaciones, en OpenDingux no existe. Bueno, el primer intento serio de montar algo equivalente es el trabajo de Rafa Vico integrado en las \u00faltimas versiones de ROGUE , pero vamos a suponer que a\u00fan no tenemos acceso a ello (ya que requiere haber instalado este sistema y disponer de un adaptador Wifi funcional). As\u00ed pues nos va a tocar localizar por nuestra cuenta los OPK. Normalmente, siendo una consola/sistema de concepci\u00f3n \"open\", el c\u00f3digo de los emuladores suele estar publicado en repositorios de c\u00f3digo como GitHub. Por ejemplo en el caso del emulador de Game Boy, uno de los m\u00e1s populares es Gambatte, cuyo repositorio de c\u00f3digo se encuentra aqu\u00ed . Si acudimos a la secci\u00f3n releases del repositorio, encontraremos algunas compilaciones del c\u00f3digo hechas por su autor para varias m\u00e1quinas. En concreto la adecuada para RG350 ser\u00eda \u00e9sta: https://github.com/bardeci/gambatte-dms/releases/download/20200601/gambatte-dms-multi-r572u4-20200601.opk As\u00ed pues el primer paso para actualizar el emulador Gambatte ser\u00eda bajar el fichero anterior. \u00bfD\u00f3nde/c\u00f3mo instalo el fichero OPK del emulador que he bajado? \u00b6 En estos momentos tendremos un fichero de nombre gambatte-dms-multi-r572u4-20200601.opk en la carpeta Descargas de nuestro ordenador. Tenemos que copiarlo a una de las dos tarjetas microSD que puede utilizar la consola. Aunque nada impide copiarlo a casi cualquier lugar, existen un par de directorios especiales para contener OPKs que nos conviene utilizar. Son los siguientes: Tarjeta interna: /media/data/apps Tarjeta externa: /media/<nombre_sd>/apps en BASE (el sistema que trae la consola de f\u00e1brica) o /media/sdcard/apps en ROGUE. Por simplicidad, a partir de ahora vamos a utilizar la nomenclatura de ROGUE, es decir la ruta /media/sdcard . En caso de utilizar BASE sustituir por /media/<nombre_sd> , siendo <nombre_sd> el nombre o label que hayamos dado a nuestra SD. Lo que tienen de especial estos dos directorios es que son los que rastrea el launcher de la consola (el programa que utilizamos para explorar/ejecutar los emuladores y aplicaciones instaladas) para mostrarnos su contenido. De estas dos opciones, la m\u00e1s sencilla es la segunda, es decir copiar el OPK a la tarjeta externa. \u00bfPor qu\u00e9? Por dos motivos: La tarjeta se puede extraer f\u00e1cilmente (al menos en el modelo normal de RG350, es la \u00fanica de las dos tarjetas que podemos extraer sin abrir la tapa trasera de la consola). El formato de la tarjeta externa puede ser de tipo FAT, es decir legible por cualquier sistema operativo (Windows, Linux, Mac). Antes de continuar hay que comentar aunque s\u00f3lo sea brevemente, que la tarjeta externa se \"monta\" en el Linux de la consola en la ruta /media/sdcard . As\u00ed, cuando pinchemos la tarjeta en el ordenador veremos en la ra\u00edz directamente lo que en la consola ver\u00edamos en esa ruta. Lo mostramos con varios ejemplos (suponemos que la tarjeta se pincha en un Windows y que \u00e9sta adopta la letra de unidad D: ): Ruta en OpenDingux Ruta en PC /media/sdcard/apps D:\\apps /media/sdcard/apps/gambatte-dms-multi-r572u4-20200601.opk D:\\apps\\gambatte-dms-multi-r572u4-20200601.opk /media/sdcard/roms D:\\roms /media/sdcard/roms/GB/donkey_kong.gb D:\\roms\\GB\\donkey_kong.gb /media/sdcard/leeme.txt D:\\leeme.txt Lo mismo visto de forma gr\u00e1fica (a la izquierda lo que vemos en el PC y a la derecha en la RG con la aplicaci\u00f3n DinguxCmdr): Para terminar con el ejemplo de la instalaci\u00f3n de la \u00faltima versi\u00f3n de Gambatte, este ser\u00eda el lugar donde copiar\u00edamos el fichero sobre la tarjeta externa montada en el PC: Si ahora expulsamos la SD del PC y la insertamos en la RG350, deber\u00eda aparecer un nuevo icono en el lanzador: Como vemos, ahora aparecen dos iconos para el emulador Gambatte, el que hab\u00eda instalado originalmente en la tarjeta interna y el que acabamos de incorporar a la externa. El emulador original debe encontrarse en la ruta indicada al principio de la tarjeta interna dedicada a la instalaci\u00f3n de OPKs, es decir /media/data/apps . Si queremos deshacernos de \u00e9l lo haremos utilizando DinguxCmdr, localizando dicha ruta y borrando el fichero desde el men\u00fa que aparece al pulsar la tecla X : \u00bfHay alg\u00fan sitio dedicado a recopilar repositorios de emuladores? \u00b6 Como coment\u00e1bamos al principio, el repositorio de emuladores y aplicaciones m\u00e1s evolucionado actualmente es la App Store incluida en las \u00faltimas versiones del Custom Firmware ROGUE . Aunque no tengamos acceso a ella, podemos explorar manualmente la base de datos que utiliza por debajo esta aplicaci\u00f3n acudiendo al siguiente repositorio: https://github.com/RafaVico/RG350_APPREPOSITORY Otra opci\u00f3n ser\u00eda recorrer el README de estos dos repositorios que se suelen actualizar frecuentemente con las rutas de los repositorios y OPKs de los emuladores y aplicaciones m\u00e1s importantes para OpenDingux: https://github.com/retrogamehandheld/OpenDingux/ https://github.com/SeongGino/RetroGame350-AppRepo/ Un \u00faltimo lugar donde localizar OPKs es el siguiente sitio: https://rs97.bitgala.xyz/RG-350/localpack/ La \u00faltima opci\u00f3n ser\u00eda simplemente buscar en Google o en webs tem\u00e1ticas sobre el sistema o la consola como: https://boards.dingoonity.org/retro-game-350rg-350/ Instalaci\u00f3n de ROMs \u00b6 La instalaci\u00f3n de ROMs es similar a la de emuladores pero con menos restricciones. Podemos copiarlas a cualquier directorio con permisos de escritura de la tarjeta interna y/o externa. Los dos puntos del sistema de archivos de la consola donde se montan las dos tarjetas con permisos de escritura son los siguientes: Tarjeta interna: /media/data Tarjeta externa: /media/sdcard Por tanto las ROMs las podremos copiar a cualquier lugar al nivel de los dos directorios anteriores o cualquiera de sus subdirectorios. Al igual que con los emuladores, resulta m\u00e1s c\u00f3modo copiarlos a la tarjeta externa. En este caso, aunque no es obligatorio (como s\u00ed lo era con los emuladores u OPKs en general que deb\u00edan ir en un subdirectorio apps ) se recomienda por organizaci\u00f3n crear un directorio llamado roms en la ra\u00edz de la tarjeta externa (cuando la montamos en el PC) y colocar dentro de \u00e9l las ROMs de los distintos sistemas con un directorio propio para cada uno de ellos. Por ejemplo: Una vez que hayamos insertado la microSD en la ranura externa de la consola, encontraremos el directorio roms y su contenido montado en la ruta /media/sdcard/roms del sistema OpenDingux. Al abrir un emulador, la mayor\u00eda de ellos nos mostrar\u00e1 un explorador de ficheros para recorrer el \u00e1rbol de directorios del sistema. Como vemos en el siguiente video tendremos que seguir la ruta indicada anteriormente. La entrada con dos puntos ( .. ) permite subir en el \u00e1rbol de directorios hacia arriba: Una vez abierta una ROM, la pr\u00f3xima vez que lancemos el emulador recordar\u00e1 la ruta de las ROMs de ese sistema. Para terminar, un buen tutorial en video: \u00bfMerece la pena actualizar el firmware y/o instalar ROGUE? \u00b6 Esta es una de las primeras cuestiones que se suelen plantear los nuevos usuarios de la consola. Lo primero que hay que tener en cuenta es que a pesar de que la consola tiene una arquitectura bastante abierta, el kernel o n\u00facleo del sistema operativo Linux, dif\u00edcilmente se puede mejorar sin especificaciones detalladas del SoC o chip principal de la m\u00e1quina, el procesador MIPS Ingenic JZ4770. Por tanto lo ideal ser\u00eda que el firmware evolucionara con apoyo oficial del fabricante de dicho chip. Sin este apoyo, las mejoras que podremos encontrar en firmwares alternativos ser\u00e1n cosas como las siguientes: Cambios o adici\u00f3n de aplicaciones auxiliares (lanzadores de aplicaciones, exploradores de archivos, conectividad, etc.). Cambios de versi\u00f3n o adiciones de m\u00f3dulos Buildroot (sistema para componer el puzle de piezas del firmware). Mejoras est\u00e9ticas. El kernel es lo que da soporte al hardware espec\u00edfico de cada m\u00e1quina, por lo que la dificultad para \"meterle mano\" que coment\u00e1bamos antes limitar\u00e1 el avance en este aspecto. Cosas como: Soporte HDMI y salida AV. Soporte de aceleraci\u00f3n gr\u00e1fica por hardware. Actualmente existen dos ramas de desarrollo del firmware: BASE: La oficial. ROGUE: De Ninoh-FOX . BASE pr\u00e1cticamente no ha avanzado desde que sali\u00f3 la consola. Casi se podr\u00eda decir que ha retrocedido, ya que alcanz\u00f3 la versi\u00f3n 1.7 de dicho firmware pero poco despu\u00e9s fueron eliminadas las versiones 1.6 y 1.7 tras ser encontrados varios problemas. Actualmente la versi\u00f3n m\u00e1s actual es la 1.5.1 con fecha 2019-10-27. Puede encontrarse aqu\u00ed: Imagen + Update Existe tambi\u00e9n una versi\u00f3n de BASE con soporte para el HDMI, pero no tengo claro si es oficial o si es suficientemente estable (a pesar de lo que diga la p\u00e1gina de descarga). Puede encontrarse aqu\u00ed . En cuanto a ROGUE, todas las versiones publicadas junto al detalle de las mejoras introducidas pueden encontrarse en GitHub aqu\u00ed . Una lista de las mejoras m\u00e1s destacadas podr\u00eda ser la siguiente: Ligero overclock del procesador a 1080MHz (la velocidad normal es 1000MHz). Posibilidad de seleccionar la velocidad del procesador para cada emulador entre 360MHz y 1080MHz. Dos modos de visualizaci\u00f3n de previews de las ROMs (pantalla completa o en esquina superior derecha). Se eliminan errores en el sistema de archivo de las dos particiones de la tarjeta interna. Aplicaciones adicionales: Clock: Redise\u00f1o. RG350Test: Aplicaci\u00f3n de test de controles muy mejorada respecto a la oficial. ScriptRunner: Aplicaci\u00f3n para ejecutar scripts de distinta utilidad como formatear tarjetas o hacer backups. ROGUE Connect: Mejoras en la aplicaci\u00f3n oficial GCW-Connect para administrar la conexi\u00f3n a internet con un pincho Wifi. ROGUE Update Manager: Aplicaci\u00f3n para gestionar las actualizaciones de ROGUE por Wifi. ROGUE App Store: Aplicaci\u00f3n para gestionar la descarga y actualizaci\u00f3n de emuladores y juegos (ports). Pixel Fixer: Para tratar de recuperar pixeles vagos de la pantalla. Actualizaci\u00f3n de librer\u00edas SDL2 (mejora la compatibilidad de algunos juegos). Soporte de m\u00e1s formatos para la tarjeta externa (ext2 y exFAT). Como vemos las mejoras de ROGUE son numerosas, pero si nos fijamos son casi todas algo accesorias, es decir no producen mejoras en la experiencia de juego (salvo el overclock) sino en la gesti\u00f3n que podemos hacer con la consola prepar\u00e1ndola para ejecutar nuevos juegos o emuladores. Comento esto para valorar adecuadamente la conveniencia de actualizar y evaluar los riesgos de proceder con el cambio. La consola no se puede brickear , dado que no tiene almacenamiento flash en la propia placa. Todo est\u00e1 en la microSD interna, por lo que todos los problemas se solucionan flasheando correctamente esta tarjeta con un sistema v\u00e1lido (sea el que sea). A pesar de ello, el proceso puede resultar complicado o confuso si no se ha flasheado antes una tarjeta SD. Adem\u00e1s, al menos en el modelo normal de la consola, hay que desatornillar la tapa trasera para acceder a la microSD interna. Mi consejo ser\u00eda mantener el firmware BASE durante las primeras semanas al menos, para no tener impedimentos claros para optar a la garant\u00eda en caso de que aparezcan problemas. Aunque el modelo M no es necesario abrirlo, si queremos flashear la tarjeta de la ranura INT, vamos a tener que romper igualmente el precinto de garant\u00eda. Si se tienen dudas sobre el proceso de flasheo, aprovechar ese tiempo para ir conoci\u00e9ndolo consultando foros o leyendo lo que sigue a continuaci\u00f3n. Actualizaci\u00f3n del firmware \u00b6 Como hemos comentado antes, a fecha de publicaci\u00f3n de este art\u00edculo, la \u00fanica opci\u00f3n para actualizar el firmware de RG350 es ROGUE. Este custom firmware ofrece tres formas para ser instalado. Dos de ellas no requieren extraer la tarjeta interna (y por tanto en el modelo normal ni siquiera ser\u00e1 necesario abrir la consola). Se detallan en este documento , pero vamos a repetirlo aqu\u00ed para no perder el hilo de este art\u00edculo: Tipo Descarga Descripci\u00f3n Update RG350 RG350M Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque dependiendo de la versi\u00f3n del sistema de partida puede no quedar del todo fino. Se recomienda utilizar esta opci\u00f3n s\u00f3lo para actualizar entre versiones de ROGUE, es decir si se parte de BASE, hay que utilizar una de las dos siguientes (preferentemente la \u00faltima). Flasher RG350 Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien. En este video se ilustra todo el procedimiento. sd_image.bin RG350 RG350M Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opci\u00f3n 2 y la \u00fanica que sirve si se parte de un sistema que no arranca. La imagen ocupa m\u00e1s porque es un volcado de todo lo que contiene la SD (incluidos los espacios vac\u00edos de la tarjeta). El proceso incorpora la complejidad adicional de tener que utilizar algunas utilidades poco habituales, y en el modelo normal de la consola, adem\u00e1s el tener que abrirla para extraer la microSD interna. En este video (en ingl\u00e9s) se ilustra todo el procedimiento. La primera parte de este otro v\u00eddeo tambi\u00e9n muestra el proceso, esta vez en espa\u00f1ol. As\u00ed pues, para la primera actualizaci\u00f3n (y posteriores) se puede utilizar cualquier m\u00e9todo. Dependiendo de la situaci\u00f3n es m\u00e1s recomendable uno que otro. En general empezar por la opci\u00f3n 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el m\u00e9todo 3. De la experiencia de muchos usuarios pasando de BASE a ROGUE se puede deducir que si no se utiliza el tercer m\u00e9todo es muy f\u00e1cil acabar teniendo problemas. Parece que tiene que ver con que la tarjeta Toshiba que trae la consola de f\u00e1brica no es de buena calidad. La recomendaci\u00f3n mayoritaria es apartar esa tarjeta dej\u00e1ndola con el firmware BASE (para reponerla adem\u00e1s en caso de que aparezcan problemas, para as\u00ed tener con qu\u00e9 comparar) y utilizar el m\u00e9todo 3 (flasheo convencional) sobre una tarjeta microSD nueva de calidad. Si al final nos decidimos a dar el paso, en este documento se ofrecen detalles sobre el proceso de flasheo. De nuevo los repetimos aqu\u00ed para mantenernos centrados en este post: En el modelo normal, abrir la consola. El tornillo inferior izquierdo tiene encima un sello que no se puede despegar entero; se desintegra. S\u00f3lo hay que tener cuidado con no partir el cable de la bater\u00eda por darle un tir\u00f3n. Es perfectamente normal que se descuelguen los gatillos L y R. No pasa nada, nos ocuparemos de ello justo antes de cerrar. Sacar la SD rompiendo un nuevo sello que no se puede despegar de una pieza. Sale a cachos. Si no se ha flasheado anteriormente la tarjeta interna por otros medios, se recomienda apartarla, es decir guardarla como est\u00e1 y flashear otra tarjeta. Las recomendaciones para la tarjeta son que tenga 16GB class 10. Ser\u00eda suficiente con una tarjeta de 4GB, ya que el sistema ocupa menos de 1GB, pero tarjetas de esa capacidad ya no se suelen encontrar y de hacerlo, lo m\u00e1s probable es que sea una tarjeta vieja y lenta. Bajar la im\u00e1gen que queremos flashear. Existen dos ramas (para el caso de ROGUE consultar la tabla pocos p\u00e1rrafos m\u00e1s arriba): BASE: https://rs97.bitgala.xyz/RG-350/Latest%20Firmware/ ROGUE: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases Instalar uno de estos programas: WinDisk 32 Imager Balena Etcher Montar la tarjeta elegida para flashear en el PC con un adaptador o lector. Utilizando el programa del punto 4 flashear la imagen (hay quien recomienda formatear antes pero considero que confunde el proceso m\u00e1s que otra cosa). En este documento de la fundaci\u00f3n Raspberry Pi se detallan los pasos para flashear una imagen de sistema para esta placa. El proceso es id\u00e9ntico en RG350 (cambiando la imagen naturalmente). Expulsar la SD del ordenador. Pinchar en la RG y cerrarla cuidando de que encajen bien los gatillos L/R. Desde Linux el paso 6 de la lista anterior se puede hacer con este comando desde consola (adaptando el nombre del dispositivo si en nuestro sistema es distinto): $ sudo dd if = sd_image.bin of = /dev/mmcblk0 bs = 2M Utilizaci\u00f3n de la tarjeta externa \u00b6 Otro aspecto que suele generar dudas es el manejo de la tarjeta externa. En primer lugar comentar las capacidades y formatos recomendados. As\u00ed como no nos tenemos que preocupar por el formato ni la estructura de directorios de la tarjeta interna, ya que estas dos cosas se construyen adecuadamente durante el proceso de flasheo, en la tarjeta externa somos nosotros los responsables tanto de formato como de contenido. En cuanto a formato, hay que recordar que reci\u00e9n comprada, toda tarjeta suele venir formateada con formatos FAT. Tarjetas peque\u00f1as suelen venir en FAT32 y las m\u00e1s grandes en el formato exFAT m\u00e1s moderno. Esto es importante porque BASE s\u00f3lo soporta FAT32, por lo que si tenemos este firmware y hemos comprado una tarjeta grande, tendremos que forzar su formato a FAT32. En Windows es posible formatear la tarjeta pulsando con el bot\u00f3n derecho del rat\u00f3n sobre la unidad y seleccionando Formatear... . Seg\u00fan la versi\u00f3n de Windows, es posible que no nos aparezca FAT32 entre las opciones de formato disponibles. En ese caso deberemos recurrir a utilidades de terceros como SD Memory Card Formatter . En cuanto al tama\u00f1o de la tarjeta, hay usuarios que han conseguido utilizar tarjetas de hasta 256GB, aunque lo recomendado oficialmente es 128GB como m\u00e1ximo. Finalmente vamos a hablar de la estructura de directorios o carpetas. S\u00f3lo hay un directorio sensible , es decir que tenga que estar en un determinado lugar y con un nombre concreto y es apps . Debe estar situado en la ra\u00edz de la tarjeta (cuando est\u00e1 montada en el ordenador). En este directorio es donde tendremos que copiar los OPKs de las aplicaciones (emuladores, ports, utilidades, actualizaciones de firmware, etc.) que queramos instalar en la consola a trav\u00e9s de la tarjeta interna. Volver sobre el apartado \u00bfD\u00f3nde/c\u00f3mo instalo el fichero OPK del emulador que he bajado? de este mismo documento para obtener m\u00e1s detalles. El uso principal de la tarjeta externa va a ser almacenar las ROMs de los distintos emuladores instalados en la consola. Las ROMs (excepto en unos pocos emuladores que exigen un directorio concreto que adem\u00e1s en ocasiones se encuentra en la tarjeta interna), pueden estar almacenadas en cualquier directorio (lo que incluye la tarjeta interna). Esto es as\u00ed porque la mayor\u00eda de los emuladores, muestran un explorador de ficheros (semejante al cuadro de di\u00e1logo Abrir de casi cualquier aplicaci\u00f3n de ordenador) que nos permitir\u00e1 localizar las ROMs est\u00e9n donde est\u00e9n. A pesar de ello suele ser habitual organizar las ROMs por sistema dentro de un directorio roms en la ra\u00edz de la tarjeta externa. Los sistemas se suelen identificar con acr\u00f3nimos como \u00e9stos: A2600 : Atari 2600 FBA : Final Burn Alpha FC : NES (por Famicom) GB : Gameboy GBA : Gameboy Advance GBC : Gameboy Color GG : SEGA GameGear MD : SEGA Megadrive NEOGEO : Neo Geo NGP : NeoGeo Pocket PCE : PC Engine / TurboGrafx-16 PS : Sony PlayStation SFC : SuperNES (por Super Famicom) SMS : SEGA MasterSystem WSC : WonderSwan","title":"RG350 Primeros pasos"},{"location":"2020-07-02-rg350_primeros_pasos.html#instalacionactualizacion-de-emuladoresopks","text":"De f\u00e1brica la consola suele venir con muchos emuladores instalados, aunque no suelen ser las versiones m\u00e1s actualizadas. As\u00ed pues, una de las primeras inquietudes suele ser la de actualizar los emuladores preinstalados o a\u00f1adir otros nuevos. Lo primero ser\u00eda entender el formato de los mismos. En el documento general sobre RG350 ya se comenta algo sobre ello. Aunque no es obligatorio, la mayor\u00eda de los emuladores los vamos a encontrar en formato OPK. Es la forma m\u00e1s sencilla y conveniente para distribuir aplicaciones de cualquier tipo en el sistema operativo de la consola (OpenDingux). Los OPKs son ficheros \u00fanicos que internamente contienen todos los ficheros que necesita el emulador (ejecutables, configuraciones, im\u00e1genes, sonidos, etc.). As\u00ed pues si queremos actualizar por ejemplo el emulador de Game Boy, simplemente tenemos que localizar el fichero OPK y copiarlo a la consola (m\u00e1s adelante diremos d\u00f3nde).","title":"Instalaci\u00f3n/actualizaci\u00f3n de emuladores/OPKs"},{"location":"2020-07-02-rg350_primeros_pasos.html#donde-encontramos-los-ficheros-opk","text":"Desafortunadamente, el concepto tan habitual en otros sistemas de tienda de aplicaciones, en OpenDingux no existe. Bueno, el primer intento serio de montar algo equivalente es el trabajo de Rafa Vico integrado en las \u00faltimas versiones de ROGUE , pero vamos a suponer que a\u00fan no tenemos acceso a ello (ya que requiere haber instalado este sistema y disponer de un adaptador Wifi funcional). As\u00ed pues nos va a tocar localizar por nuestra cuenta los OPK. Normalmente, siendo una consola/sistema de concepci\u00f3n \"open\", el c\u00f3digo de los emuladores suele estar publicado en repositorios de c\u00f3digo como GitHub. Por ejemplo en el caso del emulador de Game Boy, uno de los m\u00e1s populares es Gambatte, cuyo repositorio de c\u00f3digo se encuentra aqu\u00ed . Si acudimos a la secci\u00f3n releases del repositorio, encontraremos algunas compilaciones del c\u00f3digo hechas por su autor para varias m\u00e1quinas. En concreto la adecuada para RG350 ser\u00eda \u00e9sta: https://github.com/bardeci/gambatte-dms/releases/download/20200601/gambatte-dms-multi-r572u4-20200601.opk As\u00ed pues el primer paso para actualizar el emulador Gambatte ser\u00eda bajar el fichero anterior.","title":"\u00bfD\u00f3nde encontramos los ficheros OPK?"},{"location":"2020-07-02-rg350_primeros_pasos.html#dondecomo-instalo-el-fichero-opk-del-emulador-que-he-bajado","text":"En estos momentos tendremos un fichero de nombre gambatte-dms-multi-r572u4-20200601.opk en la carpeta Descargas de nuestro ordenador. Tenemos que copiarlo a una de las dos tarjetas microSD que puede utilizar la consola. Aunque nada impide copiarlo a casi cualquier lugar, existen un par de directorios especiales para contener OPKs que nos conviene utilizar. Son los siguientes: Tarjeta interna: /media/data/apps Tarjeta externa: /media/<nombre_sd>/apps en BASE (el sistema que trae la consola de f\u00e1brica) o /media/sdcard/apps en ROGUE. Por simplicidad, a partir de ahora vamos a utilizar la nomenclatura de ROGUE, es decir la ruta /media/sdcard . En caso de utilizar BASE sustituir por /media/<nombre_sd> , siendo <nombre_sd> el nombre o label que hayamos dado a nuestra SD. Lo que tienen de especial estos dos directorios es que son los que rastrea el launcher de la consola (el programa que utilizamos para explorar/ejecutar los emuladores y aplicaciones instaladas) para mostrarnos su contenido. De estas dos opciones, la m\u00e1s sencilla es la segunda, es decir copiar el OPK a la tarjeta externa. \u00bfPor qu\u00e9? Por dos motivos: La tarjeta se puede extraer f\u00e1cilmente (al menos en el modelo normal de RG350, es la \u00fanica de las dos tarjetas que podemos extraer sin abrir la tapa trasera de la consola). El formato de la tarjeta externa puede ser de tipo FAT, es decir legible por cualquier sistema operativo (Windows, Linux, Mac). Antes de continuar hay que comentar aunque s\u00f3lo sea brevemente, que la tarjeta externa se \"monta\" en el Linux de la consola en la ruta /media/sdcard . As\u00ed, cuando pinchemos la tarjeta en el ordenador veremos en la ra\u00edz directamente lo que en la consola ver\u00edamos en esa ruta. Lo mostramos con varios ejemplos (suponemos que la tarjeta se pincha en un Windows y que \u00e9sta adopta la letra de unidad D: ): Ruta en OpenDingux Ruta en PC /media/sdcard/apps D:\\apps /media/sdcard/apps/gambatte-dms-multi-r572u4-20200601.opk D:\\apps\\gambatte-dms-multi-r572u4-20200601.opk /media/sdcard/roms D:\\roms /media/sdcard/roms/GB/donkey_kong.gb D:\\roms\\GB\\donkey_kong.gb /media/sdcard/leeme.txt D:\\leeme.txt Lo mismo visto de forma gr\u00e1fica (a la izquierda lo que vemos en el PC y a la derecha en la RG con la aplicaci\u00f3n DinguxCmdr): Para terminar con el ejemplo de la instalaci\u00f3n de la \u00faltima versi\u00f3n de Gambatte, este ser\u00eda el lugar donde copiar\u00edamos el fichero sobre la tarjeta externa montada en el PC: Si ahora expulsamos la SD del PC y la insertamos en la RG350, deber\u00eda aparecer un nuevo icono en el lanzador: Como vemos, ahora aparecen dos iconos para el emulador Gambatte, el que hab\u00eda instalado originalmente en la tarjeta interna y el que acabamos de incorporar a la externa. El emulador original debe encontrarse en la ruta indicada al principio de la tarjeta interna dedicada a la instalaci\u00f3n de OPKs, es decir /media/data/apps . Si queremos deshacernos de \u00e9l lo haremos utilizando DinguxCmdr, localizando dicha ruta y borrando el fichero desde el men\u00fa que aparece al pulsar la tecla X :","title":"\u00bfD\u00f3nde/c\u00f3mo instalo el fichero OPK del emulador que he bajado?"},{"location":"2020-07-02-rg350_primeros_pasos.html#hay-algun-sitio-dedicado-a-recopilar-repositorios-de-emuladores","text":"Como coment\u00e1bamos al principio, el repositorio de emuladores y aplicaciones m\u00e1s evolucionado actualmente es la App Store incluida en las \u00faltimas versiones del Custom Firmware ROGUE . Aunque no tengamos acceso a ella, podemos explorar manualmente la base de datos que utiliza por debajo esta aplicaci\u00f3n acudiendo al siguiente repositorio: https://github.com/RafaVico/RG350_APPREPOSITORY Otra opci\u00f3n ser\u00eda recorrer el README de estos dos repositorios que se suelen actualizar frecuentemente con las rutas de los repositorios y OPKs de los emuladores y aplicaciones m\u00e1s importantes para OpenDingux: https://github.com/retrogamehandheld/OpenDingux/ https://github.com/SeongGino/RetroGame350-AppRepo/ Un \u00faltimo lugar donde localizar OPKs es el siguiente sitio: https://rs97.bitgala.xyz/RG-350/localpack/ La \u00faltima opci\u00f3n ser\u00eda simplemente buscar en Google o en webs tem\u00e1ticas sobre el sistema o la consola como: https://boards.dingoonity.org/retro-game-350rg-350/","title":"\u00bfHay alg\u00fan sitio dedicado a recopilar repositorios de emuladores?"},{"location":"2020-07-02-rg350_primeros_pasos.html#instalacion-de-roms","text":"La instalaci\u00f3n de ROMs es similar a la de emuladores pero con menos restricciones. Podemos copiarlas a cualquier directorio con permisos de escritura de la tarjeta interna y/o externa. Los dos puntos del sistema de archivos de la consola donde se montan las dos tarjetas con permisos de escritura son los siguientes: Tarjeta interna: /media/data Tarjeta externa: /media/sdcard Por tanto las ROMs las podremos copiar a cualquier lugar al nivel de los dos directorios anteriores o cualquiera de sus subdirectorios. Al igual que con los emuladores, resulta m\u00e1s c\u00f3modo copiarlos a la tarjeta externa. En este caso, aunque no es obligatorio (como s\u00ed lo era con los emuladores u OPKs en general que deb\u00edan ir en un subdirectorio apps ) se recomienda por organizaci\u00f3n crear un directorio llamado roms en la ra\u00edz de la tarjeta externa (cuando la montamos en el PC) y colocar dentro de \u00e9l las ROMs de los distintos sistemas con un directorio propio para cada uno de ellos. Por ejemplo: Una vez que hayamos insertado la microSD en la ranura externa de la consola, encontraremos el directorio roms y su contenido montado en la ruta /media/sdcard/roms del sistema OpenDingux. Al abrir un emulador, la mayor\u00eda de ellos nos mostrar\u00e1 un explorador de ficheros para recorrer el \u00e1rbol de directorios del sistema. Como vemos en el siguiente video tendremos que seguir la ruta indicada anteriormente. La entrada con dos puntos ( .. ) permite subir en el \u00e1rbol de directorios hacia arriba: Una vez abierta una ROM, la pr\u00f3xima vez que lancemos el emulador recordar\u00e1 la ruta de las ROMs de ese sistema. Para terminar, un buen tutorial en video:","title":"Instalaci\u00f3n de ROMs"},{"location":"2020-07-02-rg350_primeros_pasos.html#merece-la-pena-actualizar-el-firmware-yo-instalar-rogue","text":"Esta es una de las primeras cuestiones que se suelen plantear los nuevos usuarios de la consola. Lo primero que hay que tener en cuenta es que a pesar de que la consola tiene una arquitectura bastante abierta, el kernel o n\u00facleo del sistema operativo Linux, dif\u00edcilmente se puede mejorar sin especificaciones detalladas del SoC o chip principal de la m\u00e1quina, el procesador MIPS Ingenic JZ4770. Por tanto lo ideal ser\u00eda que el firmware evolucionara con apoyo oficial del fabricante de dicho chip. Sin este apoyo, las mejoras que podremos encontrar en firmwares alternativos ser\u00e1n cosas como las siguientes: Cambios o adici\u00f3n de aplicaciones auxiliares (lanzadores de aplicaciones, exploradores de archivos, conectividad, etc.). Cambios de versi\u00f3n o adiciones de m\u00f3dulos Buildroot (sistema para componer el puzle de piezas del firmware). Mejoras est\u00e9ticas. El kernel es lo que da soporte al hardware espec\u00edfico de cada m\u00e1quina, por lo que la dificultad para \"meterle mano\" que coment\u00e1bamos antes limitar\u00e1 el avance en este aspecto. Cosas como: Soporte HDMI y salida AV. Soporte de aceleraci\u00f3n gr\u00e1fica por hardware. Actualmente existen dos ramas de desarrollo del firmware: BASE: La oficial. ROGUE: De Ninoh-FOX . BASE pr\u00e1cticamente no ha avanzado desde que sali\u00f3 la consola. Casi se podr\u00eda decir que ha retrocedido, ya que alcanz\u00f3 la versi\u00f3n 1.7 de dicho firmware pero poco despu\u00e9s fueron eliminadas las versiones 1.6 y 1.7 tras ser encontrados varios problemas. Actualmente la versi\u00f3n m\u00e1s actual es la 1.5.1 con fecha 2019-10-27. Puede encontrarse aqu\u00ed: Imagen + Update Existe tambi\u00e9n una versi\u00f3n de BASE con soporte para el HDMI, pero no tengo claro si es oficial o si es suficientemente estable (a pesar de lo que diga la p\u00e1gina de descarga). Puede encontrarse aqu\u00ed . En cuanto a ROGUE, todas las versiones publicadas junto al detalle de las mejoras introducidas pueden encontrarse en GitHub aqu\u00ed . Una lista de las mejoras m\u00e1s destacadas podr\u00eda ser la siguiente: Ligero overclock del procesador a 1080MHz (la velocidad normal es 1000MHz). Posibilidad de seleccionar la velocidad del procesador para cada emulador entre 360MHz y 1080MHz. Dos modos de visualizaci\u00f3n de previews de las ROMs (pantalla completa o en esquina superior derecha). Se eliminan errores en el sistema de archivo de las dos particiones de la tarjeta interna. Aplicaciones adicionales: Clock: Redise\u00f1o. RG350Test: Aplicaci\u00f3n de test de controles muy mejorada respecto a la oficial. ScriptRunner: Aplicaci\u00f3n para ejecutar scripts de distinta utilidad como formatear tarjetas o hacer backups. ROGUE Connect: Mejoras en la aplicaci\u00f3n oficial GCW-Connect para administrar la conexi\u00f3n a internet con un pincho Wifi. ROGUE Update Manager: Aplicaci\u00f3n para gestionar las actualizaciones de ROGUE por Wifi. ROGUE App Store: Aplicaci\u00f3n para gestionar la descarga y actualizaci\u00f3n de emuladores y juegos (ports). Pixel Fixer: Para tratar de recuperar pixeles vagos de la pantalla. Actualizaci\u00f3n de librer\u00edas SDL2 (mejora la compatibilidad de algunos juegos). Soporte de m\u00e1s formatos para la tarjeta externa (ext2 y exFAT). Como vemos las mejoras de ROGUE son numerosas, pero si nos fijamos son casi todas algo accesorias, es decir no producen mejoras en la experiencia de juego (salvo el overclock) sino en la gesti\u00f3n que podemos hacer con la consola prepar\u00e1ndola para ejecutar nuevos juegos o emuladores. Comento esto para valorar adecuadamente la conveniencia de actualizar y evaluar los riesgos de proceder con el cambio. La consola no se puede brickear , dado que no tiene almacenamiento flash en la propia placa. Todo est\u00e1 en la microSD interna, por lo que todos los problemas se solucionan flasheando correctamente esta tarjeta con un sistema v\u00e1lido (sea el que sea). A pesar de ello, el proceso puede resultar complicado o confuso si no se ha flasheado antes una tarjeta SD. Adem\u00e1s, al menos en el modelo normal de la consola, hay que desatornillar la tapa trasera para acceder a la microSD interna. Mi consejo ser\u00eda mantener el firmware BASE durante las primeras semanas al menos, para no tener impedimentos claros para optar a la garant\u00eda en caso de que aparezcan problemas. Aunque el modelo M no es necesario abrirlo, si queremos flashear la tarjeta de la ranura INT, vamos a tener que romper igualmente el precinto de garant\u00eda. Si se tienen dudas sobre el proceso de flasheo, aprovechar ese tiempo para ir conoci\u00e9ndolo consultando foros o leyendo lo que sigue a continuaci\u00f3n.","title":"\u00bfMerece la pena actualizar el firmware y/o instalar ROGUE?"},{"location":"2020-07-02-rg350_primeros_pasos.html#actualizacion-del-firmware","text":"Como hemos comentado antes, a fecha de publicaci\u00f3n de este art\u00edculo, la \u00fanica opci\u00f3n para actualizar el firmware de RG350 es ROGUE. Este custom firmware ofrece tres formas para ser instalado. Dos de ellas no requieren extraer la tarjeta interna (y por tanto en el modelo normal ni siquiera ser\u00e1 necesario abrir la consola). Se detallan en este documento , pero vamos a repetirlo aqu\u00ed para no perder el hilo de este art\u00edculo: Tipo Descarga Descripci\u00f3n Update RG350 RG350M Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque dependiendo de la versi\u00f3n del sistema de partida puede no quedar del todo fino. Se recomienda utilizar esta opci\u00f3n s\u00f3lo para actualizar entre versiones de ROGUE, es decir si se parte de BASE, hay que utilizar una de las dos siguientes (preferentemente la \u00faltima). Flasher RG350 Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien. En este video se ilustra todo el procedimiento. sd_image.bin RG350 RG350M Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opci\u00f3n 2 y la \u00fanica que sirve si se parte de un sistema que no arranca. La imagen ocupa m\u00e1s porque es un volcado de todo lo que contiene la SD (incluidos los espacios vac\u00edos de la tarjeta). El proceso incorpora la complejidad adicional de tener que utilizar algunas utilidades poco habituales, y en el modelo normal de la consola, adem\u00e1s el tener que abrirla para extraer la microSD interna. En este video (en ingl\u00e9s) se ilustra todo el procedimiento. La primera parte de este otro v\u00eddeo tambi\u00e9n muestra el proceso, esta vez en espa\u00f1ol. As\u00ed pues, para la primera actualizaci\u00f3n (y posteriores) se puede utilizar cualquier m\u00e9todo. Dependiendo de la situaci\u00f3n es m\u00e1s recomendable uno que otro. En general empezar por la opci\u00f3n 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el m\u00e9todo 3. De la experiencia de muchos usuarios pasando de BASE a ROGUE se puede deducir que si no se utiliza el tercer m\u00e9todo es muy f\u00e1cil acabar teniendo problemas. Parece que tiene que ver con que la tarjeta Toshiba que trae la consola de f\u00e1brica no es de buena calidad. La recomendaci\u00f3n mayoritaria es apartar esa tarjeta dej\u00e1ndola con el firmware BASE (para reponerla adem\u00e1s en caso de que aparezcan problemas, para as\u00ed tener con qu\u00e9 comparar) y utilizar el m\u00e9todo 3 (flasheo convencional) sobre una tarjeta microSD nueva de calidad. Si al final nos decidimos a dar el paso, en este documento se ofrecen detalles sobre el proceso de flasheo. De nuevo los repetimos aqu\u00ed para mantenernos centrados en este post: En el modelo normal, abrir la consola. El tornillo inferior izquierdo tiene encima un sello que no se puede despegar entero; se desintegra. S\u00f3lo hay que tener cuidado con no partir el cable de la bater\u00eda por darle un tir\u00f3n. Es perfectamente normal que se descuelguen los gatillos L y R. No pasa nada, nos ocuparemos de ello justo antes de cerrar. Sacar la SD rompiendo un nuevo sello que no se puede despegar de una pieza. Sale a cachos. Si no se ha flasheado anteriormente la tarjeta interna por otros medios, se recomienda apartarla, es decir guardarla como est\u00e1 y flashear otra tarjeta. Las recomendaciones para la tarjeta son que tenga 16GB class 10. Ser\u00eda suficiente con una tarjeta de 4GB, ya que el sistema ocupa menos de 1GB, pero tarjetas de esa capacidad ya no se suelen encontrar y de hacerlo, lo m\u00e1s probable es que sea una tarjeta vieja y lenta. Bajar la im\u00e1gen que queremos flashear. Existen dos ramas (para el caso de ROGUE consultar la tabla pocos p\u00e1rrafos m\u00e1s arriba): BASE: https://rs97.bitgala.xyz/RG-350/Latest%20Firmware/ ROGUE: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases Instalar uno de estos programas: WinDisk 32 Imager Balena Etcher Montar la tarjeta elegida para flashear en el PC con un adaptador o lector. Utilizando el programa del punto 4 flashear la imagen (hay quien recomienda formatear antes pero considero que confunde el proceso m\u00e1s que otra cosa). En este documento de la fundaci\u00f3n Raspberry Pi se detallan los pasos para flashear una imagen de sistema para esta placa. El proceso es id\u00e9ntico en RG350 (cambiando la imagen naturalmente). Expulsar la SD del ordenador. Pinchar en la RG y cerrarla cuidando de que encajen bien los gatillos L/R. Desde Linux el paso 6 de la lista anterior se puede hacer con este comando desde consola (adaptando el nombre del dispositivo si en nuestro sistema es distinto): $ sudo dd if = sd_image.bin of = /dev/mmcblk0 bs = 2M","title":"Actualizaci\u00f3n del firmware"},{"location":"2020-07-02-rg350_primeros_pasos.html#utilizacion-de-la-tarjeta-externa","text":"Otro aspecto que suele generar dudas es el manejo de la tarjeta externa. En primer lugar comentar las capacidades y formatos recomendados. As\u00ed como no nos tenemos que preocupar por el formato ni la estructura de directorios de la tarjeta interna, ya que estas dos cosas se construyen adecuadamente durante el proceso de flasheo, en la tarjeta externa somos nosotros los responsables tanto de formato como de contenido. En cuanto a formato, hay que recordar que reci\u00e9n comprada, toda tarjeta suele venir formateada con formatos FAT. Tarjetas peque\u00f1as suelen venir en FAT32 y las m\u00e1s grandes en el formato exFAT m\u00e1s moderno. Esto es importante porque BASE s\u00f3lo soporta FAT32, por lo que si tenemos este firmware y hemos comprado una tarjeta grande, tendremos que forzar su formato a FAT32. En Windows es posible formatear la tarjeta pulsando con el bot\u00f3n derecho del rat\u00f3n sobre la unidad y seleccionando Formatear... . Seg\u00fan la versi\u00f3n de Windows, es posible que no nos aparezca FAT32 entre las opciones de formato disponibles. En ese caso deberemos recurrir a utilidades de terceros como SD Memory Card Formatter . En cuanto al tama\u00f1o de la tarjeta, hay usuarios que han conseguido utilizar tarjetas de hasta 256GB, aunque lo recomendado oficialmente es 128GB como m\u00e1ximo. Finalmente vamos a hablar de la estructura de directorios o carpetas. S\u00f3lo hay un directorio sensible , es decir que tenga que estar en un determinado lugar y con un nombre concreto y es apps . Debe estar situado en la ra\u00edz de la tarjeta (cuando est\u00e1 montada en el ordenador). En este directorio es donde tendremos que copiar los OPKs de las aplicaciones (emuladores, ports, utilidades, actualizaciones de firmware, etc.) que queramos instalar en la consola a trav\u00e9s de la tarjeta interna. Volver sobre el apartado \u00bfD\u00f3nde/c\u00f3mo instalo el fichero OPK del emulador que he bajado? de este mismo documento para obtener m\u00e1s detalles. El uso principal de la tarjeta externa va a ser almacenar las ROMs de los distintos emuladores instalados en la consola. Las ROMs (excepto en unos pocos emuladores que exigen un directorio concreto que adem\u00e1s en ocasiones se encuentra en la tarjeta interna), pueden estar almacenadas en cualquier directorio (lo que incluye la tarjeta interna). Esto es as\u00ed porque la mayor\u00eda de los emuladores, muestran un explorador de ficheros (semejante al cuadro de di\u00e1logo Abrir de casi cualquier aplicaci\u00f3n de ordenador) que nos permitir\u00e1 localizar las ROMs est\u00e9n donde est\u00e9n. A pesar de ello suele ser habitual organizar las ROMs por sistema dentro de un directorio roms en la ra\u00edz de la tarjeta externa. Los sistemas se suelen identificar con acr\u00f3nimos como \u00e9stos: A2600 : Atari 2600 FBA : Final Burn Alpha FC : NES (por Famicom) GB : Gameboy GBA : Gameboy Advance GBC : Gameboy Color GG : SEGA GameGear MD : SEGA Megadrive NEOGEO : Neo Geo NGP : NeoGeo Pocket PCE : PC Engine / TurboGrafx-16 PS : Sony PlayStation SFC : SuperNES (por Super Famicom) SMS : SEGA MasterSystem WSC : WonderSwan","title":"Utilizaci\u00f3n de la tarjeta externa"},{"location":"2020-07-09-rg350_fba_vertical_mod.html","text":"Versi\u00f3n de FBA mejorada La modificaci\u00f3n realizada en FBA que se describe en este art\u00edculo ya no merece la pena desde que apareci\u00f3 la versi\u00f3n que puede encontrarse aqu\u00ed y del que se habla en este foro . El art\u00edculo se mantiene ya que ilustra el proceso de modificaci\u00f3n de un OPK por medio de un script wrapper que puede resolver muchas necesidades. Descripci\u00f3n del problema \u00b6 FBA permite rotar la pantalla para poder jugar m\u00e1s c\u00f3modamente los juegos verticales (modo TATE). De hecho detecta autom\u00e1ticamente este tipo de juegos y los muestra rotados por defecto. El problema es que lo hace hacia la parte izquierda de la consola y al menos en la RG350/M resultar\u00eda m\u00e1s c\u00f3modo que lo hiciera hacia la derecha donde est\u00e1n los botones en lugar de la cruceta. Por ejemplo al arrancar 1941 aparece as\u00ed: En la versi\u00f3n r19 de FBA est\u00e1n duplicados todos los settings para poder ajustar los juegos verticales de forma independiente: En concreto en Default Vertical Run Game settings podemos encontrar el par\u00e1metro para rotar la pantalla. All\u00ed nos interesa poner el valor -180 en el par\u00e1metro Rotate vertical game : Tras hacerlo, si lanzamos el juego desde el interfaz propio de FBA conseguimos la orientaci\u00f3n deseada: Hasta aqu\u00ed bien. El problema viene cuando integramos FBA en frontends como SimpleMenu o PyMenu. En esos casos el emulador se lanzar\u00e1 por linea de comando pasando como argumento la ruta de la ROM. Cuando se lanzan as\u00ed los juegos, FBA no aplica los ajustes que hemos podido hacer en su interfaz propio. As\u00ed siempre se van a ver girados hacia la izquierda. Como en otros art\u00edculos, a partir de aqu\u00ed voy a mostrar detalles t\u00e9cnicos del problema que hay debajo de lo anterior y c\u00f3mo se ha hecho la modificaci\u00f3n del emulador. Si no te interesan y s\u00f3lo quieres aprovechar la modificaci\u00f3n del emulador puedes saltar hasta el apartado Utilizaci\u00f3n del mod de FBA . Descripci\u00f3n t\u00e9cnica del problema \u00b6 En el Readme que hay dentro del OPK puede leerse lo siguiente: FBA SDL could be used as a standalone application when invoked with rom zip with full path as a parameter: ./fbasdl.dge ./roms/dino.zip Full path and extension are obligatory. Commandline interface --------------------- FBA SDL can also be invoked with command line options. The options are as follows; ./fbasdl.dge <game> [<parameters>] <game> - The game's romname with full path and extension. --no-sound - Just be silent --sound-sdl - Use SDL for sound (mutex syncro) --sound-sdl-old - Use SDL for sound --sound-ao - Use libao for sound --samplerate=<Hz> - Valid values are: 11025, 16000, 22050, 32000 and 44100 --sense=<value> - Analog sensitivity: 0..100 --showfps - Show frames per second while play --vsync - Syncronize video refresh on 60Hz --68kcore=<value> - Choose Motorola 68000 emulation core. 0 - C68k, 1 - Musashi M68k, 2 - A68k Example: ./fbasdl.dge ./roms/dino.zip --sound-sdl --samplerate=44100 --68kcore=0 As\u00ed pues como vemos, el ejecutable que hay dentro del OPK ( fbasdl.dge ) est\u00e1 preparado para aceptar par\u00e1metros. Aqu\u00ed podemos detectar dos problemas: El emulador s\u00f3lo tiene un lanzador (fichero .desktop en el interior del OPK) que es el que sirve para abrir el interfaz propio de FBA. Necesitar\u00edamos el t\u00edpico lanzador que tienen la mayor\u00eda de los emuladores que muestra un explorador de ficheros para seleccionar la ROM que luego se pasa como argumento al ejecutable. Entre las opciones que vemos en el Readme no parece estar contemplada la que sirve para rotar la pantalla. Vamos a ocuparnos de estos problemas uno a uno. 1. Nuevo lanzador con explorer \u00b6 Lo primero que hacemos es bajar el OPK. Vamos a partir de \u00e9ste . A continuaci\u00f3n lo desenlatamos para ver su interior. En Windows creo que se puede utilizar WinRAR o 7Zip (no lo tengo claro). En Linux lo haremos por linea de comando: $ unsquashfs fba-RG350-r19-8e351b8b.opk Parallel unsquashfs: Using 4 processors 9 inodes (241 blocks) to write [=====================================================================================================================================|] 241/241 100% created 8 files created 2 directories created 0 symlinks created 0 devices created 0 fifos Si miramos lo que hay en el interior del OPK vemos que efectivamente s\u00f3lo contiene un lanzador: $ ls -l total 29972 -rw-rw-r-- 1 edumoreno edumoreno 193 ene 4 2020 default.gcw0.desktop -rw-rw-r-- 2 edumoreno edumoreno 795 ene 4 2020 fba_icon.png -rwxrwxr-x 1 edumoreno edumoreno 30666200 ene 22 03:50 fbasdl.dge -rw-rw-r-- 1 edumoreno edumoreno 8819 ene 22 03:46 readme.txt drwxrwxr-x 2 edumoreno edumoreno 4096 ene 4 2020 skin Visualizando el fichero default.gcw0.desktop (es un fichero de texto) el lanzador lo \u00fanico que hace es ejecutar FBA sin argumentos, es decir el binario fbasdl.dge : [Desktop Entry] Name=FBA-RG350 Comment=Arcade machine emulator Exec=fbasdl.dge Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true Lo primero que haremos es renombrar el fichero para reservar el nombre default.gcw0.desktop para el lanzador que crearemos a continuaci\u00f3n. Tambi\u00e9n cambiaremos el par\u00e1metro Name por FBA UX para indicar que este lanzador es el que lanza el interfaz (UX = User eXperience) propio de FBA. As\u00ed pues terminaremos con un fichero de nombre fba_ux.gcw0.desktop y el siguiente contenido: [Desktop Entry] Name=FBA UX Comment=Arcade machine emulator Exec=fbasdl.dge Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true Ahora creamos un segundo .desktop para ejecutar FBA como un emulador m\u00e1s convencional con selecci\u00f3n previa de ROM. Crearemos un fichero de nombre default.gcw0.desktop y el siguiente contenido: [Desktop Entry] Name=FBA Explorer Comment=Arcade machine emulator Exec=fbasdl.dge %f Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true En \u00e9l vemos que el comando a ejecutar tiene previsto el argumento %f donde se insertar\u00e1 el fichero de la ROM seleccionada con el explorador de ficheros. Una vez hechos estos cambios volvemos a enlatar el OPK. En Linux lo haremos con el siguiente comando: $ mksquashfs squashfs-root/ fba-RG350-r19-mod.opk -all-root -noappend -no-exports -no-xattrs Si sustituimos el OPK original instalado en la consola por el que acabamos de re-ensamblar con el comando anterior, veremos que ahora nos aparecen dos lanzadores en GMenu2X: El que tiene la etiqueta FBA UX se comportar\u00e1 como el original y el nuevo FBA Explorer mostrar\u00e1 un explorador de ficheros como la mayor\u00eda de los emuladores: Con esto tendr\u00edamos resuelto el primer problema dado que ahora launchers como SimpleMenu, PyMenu o EmulationStation podr\u00e1n integrar este OPK modificado de FBA para ejecutar los juegos. 2. Localizar opci\u00f3n para rotar pantalla \u00b6 El segundo problema pod\u00eda no haber tenido soluci\u00f3n pero hubo suerte. Como ve\u00edamos, seg\u00fan el Readme no parec\u00eda haber un par\u00e1metro que permitiera controlar la rotaci\u00f3n de la pantalla por linea de comando. A pesar de ello echando un vistazo al c\u00f3digo fuente de FBA encontramos la siguiente estructura en el fichero src/sdl-dingux/main.cpp : static struct option long_opts [] = { { \"sound-sdl-old\" , 0 , & options . sound , 3 }, { \"sound-sdl\" , 0 , & options . sound , 2 }, { \"sound-ao\" , 0 , & options . sound , 1 }, { \"no-sound\" , 0 , & options . sound , 0 }, { \"samplerate\" , required_argument , 0 , 'r' }, { \"frameskip\" , required_argument , 0 , 'c' }, { \"vsync\" , 0 , & options . vsync , 1 }, { \"scaling\" , required_argument , 0 , 'a' }, { \"rotate\" , required_argument , 0 , 'o' }, { \"hwscaling\" , required_argument , 0 , 'h' }, { \"sense\" , required_argument , 0 , 'd' }, { \"showfps\" , 0 , & options . showfps , 1 }, { \"no-showfps\" , 0 , & options . showfps , 0 }, { \"create-lists\" , 0 , & options . create_lists , 1 }, { \"68kcore\" , required_argument , 0 , 's' }, { \"z80core\" , required_argument , 0 , 'z' }, }; Esto parece indicar que hay m\u00e1s opciones sin documentar en el Readme. As\u00ed pues sin revisar m\u00e1s a fondo el c\u00f3digo, haciendo una prueba incorporando la opci\u00f3n rotate al .desktop de tipo Explorer se comprueba que es efectiva. Concretamente lo que hay que a\u00f1adir al comando de ejecuci\u00f3n es: Exec=fbasdl.dge %f --rotate=2 El valor 2 se obtiene de observar el valor que toma el par\u00e1metro FBA_ROTATE en los ficheros que aparecen en /media/data/local/home/.fba/configs y que son los que aplican cuando ejecutamos los juegos desde el interfaz propio de FBA ( FBA UX ). Ya sabemos c\u00f3mo podemos indicar por linea de comando c\u00f3mo rotar la pantalla. Ahora tenemos un \u00faltimo problema y es que este par\u00e1metro s\u00f3lo nos interesa para los juegos en vertical. Si ponemos este argumento en los juegos horizontales, veremos la pantalla de esta forma: Una opci\u00f3n ser\u00eda crear un tercer .desktop con la opci\u00f3n (dejando el que hemos creado antes sin la opci\u00f3n) y utilizar ese lanzador para los juegos verticales pero esto nos obligar\u00eda a separar en secciones distintas los juegos verticales de los horizontales en los frontends como SimpleMenu. La soluci\u00f3n por la que se ha optado aqu\u00ed es intercalar un peque\u00f1o script que analice si el juego es vertical o no y en funci\u00f3n de eso aplique la opci\u00f3n --rotate=2 o no. La forma de averiguar si el juego es vertical ser\u00e1 declar\u00e1ndolo en un peque\u00f1o fichero de texto en el directorio de las ROMs. Lo primero que haremos ser\u00e1 modificar el default.gcw0.desktop para que en lugar de ejecutar el binario del emulador directamente se ejecute un peque\u00f1o script: [Desktop Entry] Name=FBA Explorer Comment=Arcade machine emulator Exec=v_detector.sh %f Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true Finalmente incorporaremos dentro del OPK el script que discrimina los juegos verticales como hemos comentado. Su nombre ser\u00e1 v_detector.sh y su contenido el siguiente: #!/bin/sh V_GAMES_FILE=$(dirname \"$1\")/vertical_games.txt if [ -f \"$V_GAMES_FILE\" ] then V_GAME_NAME=$(basename \"$1\") if grep -q $V_GAME_NAME $V_GAMES_FILE then ./fbasdl.dge $1 --rotate=2 else ./fbasdl.dge $1 fi else ./fbasdl.dge $1 fi No hay que olvidarse de dar permiso de ejecuci\u00f3n ( +x ) al script anterior. $ chmod +x v_detector.sh Con todos estos cambios, volvemos a empaquetar el OPK como hemos visto antes: $ mksquashfs squashfs-root/ fba-RG350-r19-mod.opk -all-root -noappend -no-exports -no-xattrs Lo instalamos en la consola y a partir de ahora s\u00f3lo tendremos que incluir el nombre del fichero de la ROM (extensi\u00f3n .zip incluida) en un fichero de nombre vertical_games.txt en el mismo directorio donde se encuentren las ROMs. Por ejemplo algunos de los juegos candidatos a encontrarse en este listado son: 1941.zip 19xx.zip dimahoo.zip mercs.zip varth.zip Utilizaci\u00f3n del mod de FBA \u00b6 Vamos a dar instrucciones para utilizar el emulador FBA modificado a lo largo de este art\u00edculo. Una versi\u00f3n empaquetada con todas las modificaciones ya hechas puede descargarse de aqu\u00ed . Una vez instalado en la consola, veremos que ahora aparecen dos lanzadores (al menos en GMenu2X): El lanzador FBA UX se comporta como el habitual, es decir muestra el interfaz propio de FBA donde podemos hacer el ajuste de la rotaci\u00f3n de la pantalla (y muchos otros) antes de lanzar los juegos. El nuevo FBA Explorer ser\u00e1 el que nos permitir\u00e1 seleccionar la ROM por medio del explorador de archivos de GMenu2X, de la misma forma que hacen la mayor\u00eda de los emuladores: Si queremos que el juego rote la pantalla -180\u00ba para que se puedan utilizar los controles de la parte derecha de la pantalla, s\u00f3lo tendremos que crear un fichero de texto de nombre vertical_games.txt en el mismo directorio donde se encuentren las ROMs, e incorporar a \u00e9l los nombres de las ROMs que queramos girar, uno por l\u00ednea y con la extensi\u00f3n .zip incluida. Por ejemplo: Si todo va bien, al ejecutar uno de estos juegos desde FBA Explorer o desde SimpleMenu veremos lo siguiente y podremos utilizar los controles de la parte derecha de la consola:","title":"RG350 FBA mod"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#descripcion-del-problema","text":"FBA permite rotar la pantalla para poder jugar m\u00e1s c\u00f3modamente los juegos verticales (modo TATE). De hecho detecta autom\u00e1ticamente este tipo de juegos y los muestra rotados por defecto. El problema es que lo hace hacia la parte izquierda de la consola y al menos en la RG350/M resultar\u00eda m\u00e1s c\u00f3modo que lo hiciera hacia la derecha donde est\u00e1n los botones en lugar de la cruceta. Por ejemplo al arrancar 1941 aparece as\u00ed: En la versi\u00f3n r19 de FBA est\u00e1n duplicados todos los settings para poder ajustar los juegos verticales de forma independiente: En concreto en Default Vertical Run Game settings podemos encontrar el par\u00e1metro para rotar la pantalla. All\u00ed nos interesa poner el valor -180 en el par\u00e1metro Rotate vertical game : Tras hacerlo, si lanzamos el juego desde el interfaz propio de FBA conseguimos la orientaci\u00f3n deseada: Hasta aqu\u00ed bien. El problema viene cuando integramos FBA en frontends como SimpleMenu o PyMenu. En esos casos el emulador se lanzar\u00e1 por linea de comando pasando como argumento la ruta de la ROM. Cuando se lanzan as\u00ed los juegos, FBA no aplica los ajustes que hemos podido hacer en su interfaz propio. As\u00ed siempre se van a ver girados hacia la izquierda. Como en otros art\u00edculos, a partir de aqu\u00ed voy a mostrar detalles t\u00e9cnicos del problema que hay debajo de lo anterior y c\u00f3mo se ha hecho la modificaci\u00f3n del emulador. Si no te interesan y s\u00f3lo quieres aprovechar la modificaci\u00f3n del emulador puedes saltar hasta el apartado Utilizaci\u00f3n del mod de FBA .","title":"Descripci\u00f3n del problema"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#descripcion-tecnica-del-problema","text":"En el Readme que hay dentro del OPK puede leerse lo siguiente: FBA SDL could be used as a standalone application when invoked with rom zip with full path as a parameter: ./fbasdl.dge ./roms/dino.zip Full path and extension are obligatory. Commandline interface --------------------- FBA SDL can also be invoked with command line options. The options are as follows; ./fbasdl.dge <game> [<parameters>] <game> - The game's romname with full path and extension. --no-sound - Just be silent --sound-sdl - Use SDL for sound (mutex syncro) --sound-sdl-old - Use SDL for sound --sound-ao - Use libao for sound --samplerate=<Hz> - Valid values are: 11025, 16000, 22050, 32000 and 44100 --sense=<value> - Analog sensitivity: 0..100 --showfps - Show frames per second while play --vsync - Syncronize video refresh on 60Hz --68kcore=<value> - Choose Motorola 68000 emulation core. 0 - C68k, 1 - Musashi M68k, 2 - A68k Example: ./fbasdl.dge ./roms/dino.zip --sound-sdl --samplerate=44100 --68kcore=0 As\u00ed pues como vemos, el ejecutable que hay dentro del OPK ( fbasdl.dge ) est\u00e1 preparado para aceptar par\u00e1metros. Aqu\u00ed podemos detectar dos problemas: El emulador s\u00f3lo tiene un lanzador (fichero .desktop en el interior del OPK) que es el que sirve para abrir el interfaz propio de FBA. Necesitar\u00edamos el t\u00edpico lanzador que tienen la mayor\u00eda de los emuladores que muestra un explorador de ficheros para seleccionar la ROM que luego se pasa como argumento al ejecutable. Entre las opciones que vemos en el Readme no parece estar contemplada la que sirve para rotar la pantalla. Vamos a ocuparnos de estos problemas uno a uno.","title":"Descripci\u00f3n t\u00e9cnica del problema"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#1-nuevo-lanzador-con-explorer","text":"Lo primero que hacemos es bajar el OPK. Vamos a partir de \u00e9ste . A continuaci\u00f3n lo desenlatamos para ver su interior. En Windows creo que se puede utilizar WinRAR o 7Zip (no lo tengo claro). En Linux lo haremos por linea de comando: $ unsquashfs fba-RG350-r19-8e351b8b.opk Parallel unsquashfs: Using 4 processors 9 inodes (241 blocks) to write [=====================================================================================================================================|] 241/241 100% created 8 files created 2 directories created 0 symlinks created 0 devices created 0 fifos Si miramos lo que hay en el interior del OPK vemos que efectivamente s\u00f3lo contiene un lanzador: $ ls -l total 29972 -rw-rw-r-- 1 edumoreno edumoreno 193 ene 4 2020 default.gcw0.desktop -rw-rw-r-- 2 edumoreno edumoreno 795 ene 4 2020 fba_icon.png -rwxrwxr-x 1 edumoreno edumoreno 30666200 ene 22 03:50 fbasdl.dge -rw-rw-r-- 1 edumoreno edumoreno 8819 ene 22 03:46 readme.txt drwxrwxr-x 2 edumoreno edumoreno 4096 ene 4 2020 skin Visualizando el fichero default.gcw0.desktop (es un fichero de texto) el lanzador lo \u00fanico que hace es ejecutar FBA sin argumentos, es decir el binario fbasdl.dge : [Desktop Entry] Name=FBA-RG350 Comment=Arcade machine emulator Exec=fbasdl.dge Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true Lo primero que haremos es renombrar el fichero para reservar el nombre default.gcw0.desktop para el lanzador que crearemos a continuaci\u00f3n. Tambi\u00e9n cambiaremos el par\u00e1metro Name por FBA UX para indicar que este lanzador es el que lanza el interfaz (UX = User eXperience) propio de FBA. As\u00ed pues terminaremos con un fichero de nombre fba_ux.gcw0.desktop y el siguiente contenido: [Desktop Entry] Name=FBA UX Comment=Arcade machine emulator Exec=fbasdl.dge Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true Ahora creamos un segundo .desktop para ejecutar FBA como un emulador m\u00e1s convencional con selecci\u00f3n previa de ROM. Crearemos un fichero de nombre default.gcw0.desktop y el siguiente contenido: [Desktop Entry] Name=FBA Explorer Comment=Arcade machine emulator Exec=fbasdl.dge %f Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true En \u00e9l vemos que el comando a ejecutar tiene previsto el argumento %f donde se insertar\u00e1 el fichero de la ROM seleccionada con el explorador de ficheros. Una vez hechos estos cambios volvemos a enlatar el OPK. En Linux lo haremos con el siguiente comando: $ mksquashfs squashfs-root/ fba-RG350-r19-mod.opk -all-root -noappend -no-exports -no-xattrs Si sustituimos el OPK original instalado en la consola por el que acabamos de re-ensamblar con el comando anterior, veremos que ahora nos aparecen dos lanzadores en GMenu2X: El que tiene la etiqueta FBA UX se comportar\u00e1 como el original y el nuevo FBA Explorer mostrar\u00e1 un explorador de ficheros como la mayor\u00eda de los emuladores: Con esto tendr\u00edamos resuelto el primer problema dado que ahora launchers como SimpleMenu, PyMenu o EmulationStation podr\u00e1n integrar este OPK modificado de FBA para ejecutar los juegos.","title":"1. Nuevo lanzador con explorer"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#2-localizar-opcion-para-rotar-pantalla","text":"El segundo problema pod\u00eda no haber tenido soluci\u00f3n pero hubo suerte. Como ve\u00edamos, seg\u00fan el Readme no parec\u00eda haber un par\u00e1metro que permitiera controlar la rotaci\u00f3n de la pantalla por linea de comando. A pesar de ello echando un vistazo al c\u00f3digo fuente de FBA encontramos la siguiente estructura en el fichero src/sdl-dingux/main.cpp : static struct option long_opts [] = { { \"sound-sdl-old\" , 0 , & options . sound , 3 }, { \"sound-sdl\" , 0 , & options . sound , 2 }, { \"sound-ao\" , 0 , & options . sound , 1 }, { \"no-sound\" , 0 , & options . sound , 0 }, { \"samplerate\" , required_argument , 0 , 'r' }, { \"frameskip\" , required_argument , 0 , 'c' }, { \"vsync\" , 0 , & options . vsync , 1 }, { \"scaling\" , required_argument , 0 , 'a' }, { \"rotate\" , required_argument , 0 , 'o' }, { \"hwscaling\" , required_argument , 0 , 'h' }, { \"sense\" , required_argument , 0 , 'd' }, { \"showfps\" , 0 , & options . showfps , 1 }, { \"no-showfps\" , 0 , & options . showfps , 0 }, { \"create-lists\" , 0 , & options . create_lists , 1 }, { \"68kcore\" , required_argument , 0 , 's' }, { \"z80core\" , required_argument , 0 , 'z' }, }; Esto parece indicar que hay m\u00e1s opciones sin documentar en el Readme. As\u00ed pues sin revisar m\u00e1s a fondo el c\u00f3digo, haciendo una prueba incorporando la opci\u00f3n rotate al .desktop de tipo Explorer se comprueba que es efectiva. Concretamente lo que hay que a\u00f1adir al comando de ejecuci\u00f3n es: Exec=fbasdl.dge %f --rotate=2 El valor 2 se obtiene de observar el valor que toma el par\u00e1metro FBA_ROTATE en los ficheros que aparecen en /media/data/local/home/.fba/configs y que son los que aplican cuando ejecutamos los juegos desde el interfaz propio de FBA ( FBA UX ). Ya sabemos c\u00f3mo podemos indicar por linea de comando c\u00f3mo rotar la pantalla. Ahora tenemos un \u00faltimo problema y es que este par\u00e1metro s\u00f3lo nos interesa para los juegos en vertical. Si ponemos este argumento en los juegos horizontales, veremos la pantalla de esta forma: Una opci\u00f3n ser\u00eda crear un tercer .desktop con la opci\u00f3n (dejando el que hemos creado antes sin la opci\u00f3n) y utilizar ese lanzador para los juegos verticales pero esto nos obligar\u00eda a separar en secciones distintas los juegos verticales de los horizontales en los frontends como SimpleMenu. La soluci\u00f3n por la que se ha optado aqu\u00ed es intercalar un peque\u00f1o script que analice si el juego es vertical o no y en funci\u00f3n de eso aplique la opci\u00f3n --rotate=2 o no. La forma de averiguar si el juego es vertical ser\u00e1 declar\u00e1ndolo en un peque\u00f1o fichero de texto en el directorio de las ROMs. Lo primero que haremos ser\u00e1 modificar el default.gcw0.desktop para que en lugar de ejecutar el binario del emulador directamente se ejecute un peque\u00f1o script: [Desktop Entry] Name=FBA Explorer Comment=Arcade machine emulator Exec=v_detector.sh %f Terminal=false Type=Application StartupNotify=true Icon=fba_icon Categories=emulators; X-OD-NeedsDownscaling=true Finalmente incorporaremos dentro del OPK el script que discrimina los juegos verticales como hemos comentado. Su nombre ser\u00e1 v_detector.sh y su contenido el siguiente: #!/bin/sh V_GAMES_FILE=$(dirname \"$1\")/vertical_games.txt if [ -f \"$V_GAMES_FILE\" ] then V_GAME_NAME=$(basename \"$1\") if grep -q $V_GAME_NAME $V_GAMES_FILE then ./fbasdl.dge $1 --rotate=2 else ./fbasdl.dge $1 fi else ./fbasdl.dge $1 fi No hay que olvidarse de dar permiso de ejecuci\u00f3n ( +x ) al script anterior. $ chmod +x v_detector.sh Con todos estos cambios, volvemos a empaquetar el OPK como hemos visto antes: $ mksquashfs squashfs-root/ fba-RG350-r19-mod.opk -all-root -noappend -no-exports -no-xattrs Lo instalamos en la consola y a partir de ahora s\u00f3lo tendremos que incluir el nombre del fichero de la ROM (extensi\u00f3n .zip incluida) en un fichero de nombre vertical_games.txt en el mismo directorio donde se encuentren las ROMs. Por ejemplo algunos de los juegos candidatos a encontrarse en este listado son: 1941.zip 19xx.zip dimahoo.zip mercs.zip varth.zip","title":"2. Localizar opci\u00f3n para rotar pantalla"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#utilizacion-del-mod-de-fba","text":"Vamos a dar instrucciones para utilizar el emulador FBA modificado a lo largo de este art\u00edculo. Una versi\u00f3n empaquetada con todas las modificaciones ya hechas puede descargarse de aqu\u00ed . Una vez instalado en la consola, veremos que ahora aparecen dos lanzadores (al menos en GMenu2X): El lanzador FBA UX se comporta como el habitual, es decir muestra el interfaz propio de FBA donde podemos hacer el ajuste de la rotaci\u00f3n de la pantalla (y muchos otros) antes de lanzar los juegos. El nuevo FBA Explorer ser\u00e1 el que nos permitir\u00e1 seleccionar la ROM por medio del explorador de archivos de GMenu2X, de la misma forma que hacen la mayor\u00eda de los emuladores: Si queremos que el juego rote la pantalla -180\u00ba para que se puedan utilizar los controles de la parte derecha de la pantalla, s\u00f3lo tendremos que crear un fichero de texto de nombre vertical_games.txt en el mismo directorio donde se encuentren las ROMs, e incorporar a \u00e9l los nombres de las ROMs que queramos girar, uno por l\u00ednea y con la extensi\u00f3n .zip incluida. Por ejemplo: Si todo va bien, al ejecutar uno de estos juegos desde FBA Explorer o desde SimpleMenu veremos lo siguiente y podremos utilizar los controles de la parte derecha de la consola:","title":"Utilizaci\u00f3n del mod de FBA"},{"location":"2020-07-12-rg350_screen_mod.html","text":"Recientemente ha aparecido un modelo de RG350 llamado RG350M con unas pocas actualizaciones, de las cuales la m\u00e1s importante es la pantalla. Si en el modelo original la pantalla tiene una resoluci\u00f3n de 320x240, en el nuevo modelo es de 640x480. Es decir multiplica por 4 el n\u00famero de p\u00edxeles de la original. Al final del art\u00edculo comentar\u00e9 lo que opino sobre si merece la pena la nueva pantalla. Como el resto del hardware es id\u00e9ntico, el controlador de pantalla est\u00e1 en el propio procesador (que no cambia como digo) y el conector de la pantalla tambi\u00e9n es el mismo (54 pines), la pantalla de alta resoluci\u00f3n es compatible y se puede instalar en el modelo antiguo. Vamos a ver c\u00f3mo realizar la modificaci\u00f3n. Actualizaci\u00f3n 2020-10-10 El repuesto oficial de Anbernic de la pantalla de la RG350M no es la misma pantalla que la instalada inicialmente en este art\u00edculo. Al final del mismo se ampl\u00eda con la experiencia con esta otra pantalla. Adelanto aqu\u00ed que merece la pena el incremento de precio, por lo que actualmente no considerar\u00eda comprar la que se presenta inicialmente. Compra de la pantalla \u00b6 La pantalla tiene como nombre en c\u00f3digo JT035IPS02-V0 y se encuentra f\u00e1cilmente en Aliexpress por entre 20 y 30\u20ac. Un enlace de compra ser\u00eda por ejemplo \u00e9ste . En la p\u00e1gina de repuestos oficiales de Anbernic dentro de Aliexpress tambi\u00e9n se puede encontrar por 26\u20ac y supongo que puede ser la opci\u00f3n m\u00e1s recomendable. Recibiremos algo como lo que se ve al comienzo de este art\u00edculo. Instalaci\u00f3n hardware \u00b6 Vamos a ver el proceso de sustituci\u00f3n. Necesitaremos los siguientes elementos: Para trabajar con la consola y dado que mantengo los sticks altos originales, utilizo la almohadilla que ven\u00eda en la caja de la consola, de esta forma podremos tenerla apoyada en la mesa de forma estable por la cara frontal: Empezamos retirando los 4 tornillos y una vez levantada la tapa trasera apartamos tambi\u00e9n los 4 gatillos que nos estorbar\u00e1n durante el proceso. Soltamos el conector de la bater\u00eda para poder apartar completamente la tapa trasera con la bater\u00eda pegada: Tenemos que extraer completamente la placa base, para lo que s\u00f3lo es necesario retirar los 6 tornillos que la mantienen unida a la carcasa y las cintas de datos de los sticks anal\u00f3gicos. Empezamos levantando la pesta\u00f1a del conector del cable de cinta de los sticks: Una vez desconectados los dos sticks anal\u00f3gicos, desatornillamos los 6 tornillos que vemos marcados con una flecha roja a continuaci\u00f3n: A partir de ese momento podremos levantar la placa base. Lo haremos basculando sobre la parte inferior, es decir, levantando la parte de arriba, ya que el cable de datos de la pantalla tiene la articulaci\u00f3n en la parte inferior: Ahora tenemos que desconectar la pantalla. Empezamos levantando la pesta\u00f1a que aprisiona el cable de cinta en el conector. Aunque en la foto se ven unas pinzas, es mejor utilizar la u\u00f1a o un elemento plano, ya que la pesta\u00f1a est\u00e1 sujeta con bastante fuerza y unas pinzas finas seguramente la partir\u00edan: En este momento ya podremos abatir totalmente la placa base para alcanzar la pantalla de forma completa. Hay que tener cuidado con los cables de los altavoces. Est\u00e1n lo suficientemente holgados como para que podamos abatir la placa sin problemas, pero los vigilaremos durante el proceso para evitar tirones en las soldaduras que saltar\u00edan f\u00e1cilmente al ser tan peque\u00f1as: Llegamos a uno de los momentos m\u00e1s complicados del montaje y es que la pantalla que vamos a retirar est\u00e1 pegada. En mi caso hice palanca con cuidado con las pinzas de punta fina, empezando por la parte superior izquierda y poco a poco sali\u00f3. Lo que ocurri\u00f3 en realidad es que la pantalla se solt\u00f3 del marco met\u00e1lico que tiene. No es una mala situaci\u00f3n en realidad. De hecho podemos aprovechar que el marco es id\u00e9ntico en ambos modelos de pantalla, para quit\u00e1rselo a la nueva y encajarla en el marco que ha quedado pegado en la consola. No lo hice as\u00ed porque hasta no tener el marco en la mano no tuve claro que eran iguales. As\u00ed pues retir\u00e9 el marco que hab\u00eda quedado pegado. Es muy f\u00e1cil que se doble al hacerlo ya que se trata de una chapa met\u00e1lica muy fina. Seguramente sea buena idea aplicar algo de aire caliente antes de empezar a hacer palanca. Sin pasarse ya que la carcasa de la consola es de pl\u00e1stico. En caso de que hayamos retirado el marco antiguo necesitaremos cinta de doble cara como la que lo manten\u00eda pegado a la carcasa (si no la tenemos, \u00e9ste ser\u00e1 otro motivo para reutilizar el marco antiguo, ya que como decimos son compatibles entre ambas pantallas): Apliqu\u00e9 cuatro tiras de cinta de doble cara en los cuatro lados de la pantalla (en la foto falta la inferior que apliqu\u00e9 directamente sobre la pantalla). Puede que sea mejor idea aplicar s\u00f3lo un par de tiras arriba y abajo por ejemplo para facilitar desmontajes en el futuro: En este momento colocamos la nueva pantalla en su lugar (dejando la articulaci\u00f3n de la cinta en la parte inferior): Ahora introducimos el extremo del cable de cinta de la pantalla por la ranura de la placa base e insertamos y sujetamos (bajando la pesta\u00f1a) el cable al conector. Al ser la cinta de datos algo r\u00edgida y estar la ranura en la PCB por la que asoma tan cerca del conector, puede resultar algo complicado. Es cuesti\u00f3n de armarse de paciencia y aprovechar que todav\u00eda no hemos atornillado la placa base para tener algo de juego pasando m\u00e1s cable de cinta de lo normal a trav\u00e9s de la ranura: Antes de terminar de encajar la placa base en su lugar, nos fijamos en los botones de la parte inferior (Power, Volumen y Reset). Es muy probable que se hayan descolgado de su lugar, por lo que los recolocaremos: Ya s\u00f3lo queda rearmar la consola procediendo como al principio pero en sentido inverso, es decir, empezamos por encajar la placa base y recolocar los 6 tornillos: Ahora recolocamos los cables de cinta de los sticks fij\u00e1ndolos bajando la pesta\u00f1a que cierra el contacto. Tambi\u00e9n reponemos los botones de los gatillos que hab\u00edamos apartado al principio: Ahora tocar\u00eda reconectar la bater\u00eda y atornillar la tapa trasera, pero no lo vamos a hacer todav\u00eda ya que la consola arrancar\u00eda y dado que no hemos tocado el sistema la pantalla no se ver\u00eda. As\u00ed pues pasamos al apartado de instalaci\u00f3n del software antes de terminar. Instalaci\u00f3n software \u00b6 El firmware original de la RG350 no da soporte directo a la pantalla de alta resoluci\u00f3n, por lo que necesitamos ciertas piezas del firmware de la RG350M para que funcione. En concreto necesitamos el kernel Linux que hay en la partici\u00f3n /boot , es decir la primera partici\u00f3n de la tarjeta interna (la \u00fanica que es de tipo FAT y que por tanto nos facilita el intercambio de ficheros). Como uso ROGUE, voy a tomar el fichero del kernel directamente de los releases que ofrece Ninoh. Concretamente el fichero del kernel es el siguiente (correspondiente a la versi\u00f3n 1.7.10 de ROGUE que era la disponible en el momento de escribir este art\u00edculo): https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/vmlinuz.bin Aunque en teor\u00eda ser\u00e1 suficiente con sustituir el kernel Linux, prefiero sustituir tambi\u00e9n los m\u00f3dulos y el rootfs (sistema de archivos ra\u00edz del sistema) por si hay tambi\u00e9n cambios en ellos respecto del firmware del modelo normal de la RG350: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/modules.squashfs https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/rootfs.squashfs En caso de preferir el firmware BASE, no he localizado estos ficheros por separado, por lo que nos tocar\u00e1 flashear la tarjeta interna completamente con este fichero: https://rs97.bitgala.xyz/RG350M/Stock%20Firmware/sd_image.7z Una vez hechos estos cambios, ya podemos conectar la bater\u00eda y cerrar la tapa trasera. Al conectar la bater\u00eda la consola arrancar\u00e1 y deberemos ver el logo de ROGUE en alta resoluci\u00f3n: Tutorial en video \u00b6 Todo el proceso anterior coincide m\u00e1s o menos con el siguiente v\u00eddeo que puede venir bien para \"rellenar los huecos\" de la explicaci\u00f3n anterior. En el video se sustituye la pantalla de una RG350 por otra de la misma resoluci\u00f3n, pero el proceso para cambiar por una de resoluci\u00f3n mayor es id\u00e9ntico: \u00bfMerece la pena el cambio? \u00b6 Por \u00faltimo, har\u00e9 unos comentarios sobre las ventajas y desventajas que tiene el cambio de pantalla y si merece la pena. Como sabemos hay muchos sistemas retro en los que encaja bastante bien la resoluci\u00f3n de la pantalla de 320x240 de la RG350 original. Esto ocurre en la mayor\u00eda de las consolas de 8 y 16 bit. En cuanto a los sistemas que no coincide, podemos encontrarnos casos que queden por debajo (Game Boy por ejemplo) y por encima (PlayStation fundamentalmente). En ambos casos tener una pantalla de mayor resoluci\u00f3n es una ventaja. En el caso de sistemas con m\u00e1s resoluci\u00f3n resulta muy evidente, pero tambi\u00e9n en sistemas de baja resoluci\u00f3n ya que al hacer el escalado \"hacia arriba\" tendremos m\u00e1s p\u00edxeles para jugar, para aplicar distintos efectos de suavizado o para simular el acusado efecto dot matrix que sol\u00edan tener pantallas como las de la Game Boy. De todas formas, a grandes rasgos se puede decir que la pantalla de 480p merece fundamentalmente la pena si vamos a jugar a ciertos juegos de alta resoluci\u00f3n en PlayStation, DOSBox y Arcade. En cuanto a los contras, al haber m\u00e1s resoluci\u00f3n, el proceso de scaling en emuladores o juegos que funcionan a baja resoluci\u00f3n, en ocasiones produce efectos de suavizado o emborronado que no gustan a muchos usuarios. En general casi siempre existe manera de solucionar estos problemas tocando los ajustes de scaling del emulador (de hecho a veces se pueden conseguir mejoras o efectos muy interesantes como luego veremos). Por \u00faltimo hay que mencionar un problema que parecen tener la mayor\u00eda de los usuarios de esta pantalla (y del modelo M de la consola) y es que parece no restaurar correctamente cuando se sale de la suspensi\u00f3n de pantalla. En ocasiones tras reactivar la pantalla, aparecen cercos de luz y parpadeos por los bordes. Otro aspecto a considerar, que siempre me parece importante para valorar estas retroconsolas, es el de la escena de desarrollo o scene . S\u00f3lo el tiempo lo dir\u00e1, pero parece l\u00f3gico pensar que gradualmente se ir\u00e1 ampliando la scene del modelo M y reduciendo la de la normal. Aunque tambi\u00e9n podr\u00eda ocurrir lo contrario si no \"cuajan\" las ventas del modelo M frente al normal y teniendo en cuenta adem\u00e1s la cantidad de consolas basadas en la misma arquitectura que contin\u00faan con la pantalla de baja resoluci\u00f3n (RG280, PocketGo 2 V2, RG350P; sin olvidar la que empez\u00f3 todo GCW0). Otro contra es la p\u00e9rdida de rendimiento que se tiene en el modelo M por la sobrecarga que supone en un bus de datos de la m\u00e1quina al tener que transferir m\u00e1s informaci\u00f3n. Esta p\u00e9rdida de rendimiento se estima en alrededor de un 5%. En este hilo de Dingoonity se aportan detalles del problema. Para terminar vamos a mostrar algunos pantallazos de juegos tal y como se ver\u00edan en la pantalla de 240p frente a la de 480p. Las dos im\u00e1genes se han escalado a 640x480 para que se puedan comparar f\u00e1cilmente. A\u00fan as\u00ed debo decir que los pantallazos no hacen justicia. La pantalla de alta resoluci\u00f3n se ve mucho mejor de lo que parece con estos juegos de alta resoluci\u00f3n: Logos arranque PlayStation : Resoluci\u00f3n original 640x448 Crash Bandicoot (PS) : Resoluci\u00f3n original 512x224 Tekken 3 (PS) : Resoluci\u00f3n original 368x448 SimCity (DOS) : Resoluci\u00f3n original 640x352 Game Boy Por \u00faltimo mostrar algunos ejemplos en el caso de Game Boy que mencion\u00e1bamos antes. La \u00faltima release del emulador Gambatte ofrece una versi\u00f3n especial para la RG350M (descargable aqu\u00ed ) que ofrece m\u00e1s opciones de escalado para aprovechar mejor la resoluci\u00f3n de la pantalla: Por ejemplo la opci\u00f3n Dot Matrix produce el efecto de separaci\u00f3n entre p\u00edxeles que suele haber en las pantallas de baja resoluci\u00f3n. Puede parecer absurdo ya que la pantalla de la RG350 original precisamente tiene esta caracter\u00edstica. El problema como dec\u00edamos antes es que al no coincidir la resoluci\u00f3n de la Game Boy (160x144) y ser tan distinta, o bien jugamos con pixeles 1 a 1 y bordes de pantalla o el escalado a toda pantalla producir\u00e1 distorsiones y precisamente se intercalar\u00e1 el efecto dot matrix de la propia pantalla donde no corresponda. Por ejemplo as\u00ed se ve un juego de Game Boy con la opci\u00f3n Dot Matrix 3x en la pantalla de 480p de la RG350M: Actualizaci\u00f3n 2020-10-10 A partir de este punto se incorpora contenido nuevo al art\u00edculo original tras la experiencia con la pantalla oficial. Pantalla oficial \u00b6 A pesar de las mejoras de la pantalla instalada anteriormente, desde un principio present\u00f3 una serie de problemas que se pueden considerar menores. Seg\u00fan las experiencias de otras personas que hicieron la misma modificaci\u00f3n, los problemas suelen ser distintos en cada caso. En el m\u00edo los problemas eran estos: P\u00e9rdida de sincronismo vertical (imagen parecida al aspecto de la vieja codificaci\u00f3n de Canal+) en ciertas situaciones (durante un segundo al reiniciar y sobre todo en pantallas de texto, tipo terminal, en algunas ocasiones, no siempre). Peque\u00f1a linea muy fina vertical en GMenu2X (que achaqu\u00e9 a una distorsi\u00f3n de scaling, ahora s\u00e9 que no deb\u00eda ocurrir). En ciertas im\u00e1genes de alta resoluci\u00f3n como en algunos juegos de PlayStation o en SimpleMenu, se produc\u00eda un efecto shadow en los bordes de las areas de color lisas. Los problemas suenan m\u00e1s graves por escrito que observ\u00e1ndolos en la realidad, y de hecho no fue el motivo de cambiar la pantalla, puesto que supon\u00eda que ocurrir\u00edan problemas parecidos hasta en la consola con la pantalla instalada de serie, es decir la RG350M. Sin embargo con la idea de mejorar a\u00fan m\u00e1s la experiencia de la consola decid\u00ed cambiar a la pantalla original de la RG350M que est\u00e1 pegada directamente al cristal exterior, con lo que se elimina el espacio que hay en la RG350 normal. Fue al probar esta pantalla cuando vi que los problemas enumerados antes, no se ten\u00edan por qu\u00e9 producir. La nueva pantalla no ten\u00eda ninguno de ellos, adem\u00e1s de como dec\u00eda evitar el espacio que hay en la RG normal entre pantalla y cristal. Al recibir la nueva pantalla pude comprobar que realmente se trata de una pantalla diferente, lo que explica su comportamiento diferente. En la siguiente foto puede verse c\u00f3mo la faja de datos es claramente diferente: As\u00ed pues, no recomiendo ya la compra de la pantalla JT035IPS02-V0 de Wisecoco que se encuentra por todas partes en Aliexpress y s\u00ed el repuesto oficial de Anbernic de la pantalla que trae la RG350M que puede encontrarse a trav\u00e9s de los siguientes enlaces: eBay Aliexpress Hay que aclarar que la pantalla oficial requiere modificar la carcasa de la consola para poder instalarla, por lo que esta opci\u00f3n s\u00f3lo es recomendable para los que no tengan problemas en trabajar la carcasa con cuchilla y lima. Instalaci\u00f3n pantalla oficial \u00b6 El proceso de instalaci\u00f3n de la pantalla oficial es similar al descrito antes para la pantalla Wisecoco, con la diferencia del recorte en el marco que hay que realizar. Por este motivo es recomendable desmontar completamente la carcasa superior de la consola, y no parcialmente como se hizo antes. Esto es as\u00ed para evitar todo lo posible los obst\u00e1culos a la hora de trabajar la carcasa. Retiramos pues todos los componentes y separamos las distintas piezas de la carcasa hasta llegar a esto (realmente todav\u00eda se puede retirar tambi\u00e9n el marco blanco, de lo que fui consciente tras hacer la foto): En este punto llega el primer momento complicado que consiste en despegar la pantalla antigua y el cristal exterior sin romperlos. Empec\u00e9 despegando el cristal exterior (ya que tiene menos valor en caso de romperse). Apliqu\u00e9 aire caliente a 150\u00baC durante un rato y el cristal se separ\u00f3 f\u00e1cilmente torsionando ligeramente la consola entre las manos. La pantalla fue f\u00e1cil de despegar empujando por delante una vez que ya no estaba el cristal protector. Llega el momento de coger la cuchilla para rebajar el marco. La cuesti\u00f3n es \u00bfcu\u00e1nto hay que recortar?, pero la respuesta es sencilla. Si miramos al trasluz la carcasa vemos que tras el marco fino que tenemos que recortar est\u00e1 el alojamiento de la pantalla anterior que tiene m\u00e1s o menos las mismas dimensiones que la nueva pantalla: As\u00ed pues el marco interior de la pantalla marca el l\u00edmite de corte. En realidad la pantalla nueva es ligeramente m\u00e1s peque\u00f1a (entre 6 y 8 d\u00e9cimas en cada eje), pero tiene una especie de peque\u00f1os dientes (un par en cada lado) que hacen que, medida en esos dientes, alcance las dimensiones de la pantalla vieja. As\u00ed si dejamos 3 \u00f3 4 d\u00e9cimas de la l\u00e1mina que estamos recortando, la pantalla se sujetar\u00e1 con los dientes adem\u00e1s de con el adhesivo que pondremos al final. Si no dejamos nada, es decir si recortamos completamente el marco, la pantalla se fijar\u00e1 en su sitio s\u00f3lo con el adhesivo y los dientes servir\u00e1n \u00fanicamente para ubicarla correctamente. En cualquier caso el montaje quedar\u00e1 bien, por lo que no es especialmente cr\u00edtico si recortamos el marco completamente o si tenemos habilidad suficiente para dejar esas pocas d\u00e9cimas de mil\u00edmetro en cada lado. El resultado del recorte. Puede observarse en la vista desde la parte interior c\u00f3mo trat\u00e9 de dejar esas pocas d\u00e9cimas de material en el marco: Lo siguiente ser\u00e1 colocar cuatro tiras de adhesivo de dos caras: Ya podemos colocar la pantalla en su sitio y volver a montar la consola restituyendo todos los componentes que se desmontaron al principio: Aunque es dif\u00edcil de apreciar en fotos, la nueva pantalla se ve claramente mejor. Adem\u00e1s de solucionar los tres problemas que mencionaba al principio , al estar directamente tras el cristal produce una imagen mucho m\u00e1s n\u00edtida. La primera foto corresponde a la pantalla antigua y la segunda a la nueva: Por \u00faltimo mencionar este video donde podemos ver todo el proceso en vivo:","title":"RG350 Sustituci\u00f3n de pantalla 480p"},{"location":"2020-07-12-rg350_screen_mod.html#compra-de-la-pantalla","text":"La pantalla tiene como nombre en c\u00f3digo JT035IPS02-V0 y se encuentra f\u00e1cilmente en Aliexpress por entre 20 y 30\u20ac. Un enlace de compra ser\u00eda por ejemplo \u00e9ste . En la p\u00e1gina de repuestos oficiales de Anbernic dentro de Aliexpress tambi\u00e9n se puede encontrar por 26\u20ac y supongo que puede ser la opci\u00f3n m\u00e1s recomendable. Recibiremos algo como lo que se ve al comienzo de este art\u00edculo.","title":"Compra de la pantalla"},{"location":"2020-07-12-rg350_screen_mod.html#instalacion-hardware","text":"Vamos a ver el proceso de sustituci\u00f3n. Necesitaremos los siguientes elementos: Para trabajar con la consola y dado que mantengo los sticks altos originales, utilizo la almohadilla que ven\u00eda en la caja de la consola, de esta forma podremos tenerla apoyada en la mesa de forma estable por la cara frontal: Empezamos retirando los 4 tornillos y una vez levantada la tapa trasera apartamos tambi\u00e9n los 4 gatillos que nos estorbar\u00e1n durante el proceso. Soltamos el conector de la bater\u00eda para poder apartar completamente la tapa trasera con la bater\u00eda pegada: Tenemos que extraer completamente la placa base, para lo que s\u00f3lo es necesario retirar los 6 tornillos que la mantienen unida a la carcasa y las cintas de datos de los sticks anal\u00f3gicos. Empezamos levantando la pesta\u00f1a del conector del cable de cinta de los sticks: Una vez desconectados los dos sticks anal\u00f3gicos, desatornillamos los 6 tornillos que vemos marcados con una flecha roja a continuaci\u00f3n: A partir de ese momento podremos levantar la placa base. Lo haremos basculando sobre la parte inferior, es decir, levantando la parte de arriba, ya que el cable de datos de la pantalla tiene la articulaci\u00f3n en la parte inferior: Ahora tenemos que desconectar la pantalla. Empezamos levantando la pesta\u00f1a que aprisiona el cable de cinta en el conector. Aunque en la foto se ven unas pinzas, es mejor utilizar la u\u00f1a o un elemento plano, ya que la pesta\u00f1a est\u00e1 sujeta con bastante fuerza y unas pinzas finas seguramente la partir\u00edan: En este momento ya podremos abatir totalmente la placa base para alcanzar la pantalla de forma completa. Hay que tener cuidado con los cables de los altavoces. Est\u00e1n lo suficientemente holgados como para que podamos abatir la placa sin problemas, pero los vigilaremos durante el proceso para evitar tirones en las soldaduras que saltar\u00edan f\u00e1cilmente al ser tan peque\u00f1as: Llegamos a uno de los momentos m\u00e1s complicados del montaje y es que la pantalla que vamos a retirar est\u00e1 pegada. En mi caso hice palanca con cuidado con las pinzas de punta fina, empezando por la parte superior izquierda y poco a poco sali\u00f3. Lo que ocurri\u00f3 en realidad es que la pantalla se solt\u00f3 del marco met\u00e1lico que tiene. No es una mala situaci\u00f3n en realidad. De hecho podemos aprovechar que el marco es id\u00e9ntico en ambos modelos de pantalla, para quit\u00e1rselo a la nueva y encajarla en el marco que ha quedado pegado en la consola. No lo hice as\u00ed porque hasta no tener el marco en la mano no tuve claro que eran iguales. As\u00ed pues retir\u00e9 el marco que hab\u00eda quedado pegado. Es muy f\u00e1cil que se doble al hacerlo ya que se trata de una chapa met\u00e1lica muy fina. Seguramente sea buena idea aplicar algo de aire caliente antes de empezar a hacer palanca. Sin pasarse ya que la carcasa de la consola es de pl\u00e1stico. En caso de que hayamos retirado el marco antiguo necesitaremos cinta de doble cara como la que lo manten\u00eda pegado a la carcasa (si no la tenemos, \u00e9ste ser\u00e1 otro motivo para reutilizar el marco antiguo, ya que como decimos son compatibles entre ambas pantallas): Apliqu\u00e9 cuatro tiras de cinta de doble cara en los cuatro lados de la pantalla (en la foto falta la inferior que apliqu\u00e9 directamente sobre la pantalla). Puede que sea mejor idea aplicar s\u00f3lo un par de tiras arriba y abajo por ejemplo para facilitar desmontajes en el futuro: En este momento colocamos la nueva pantalla en su lugar (dejando la articulaci\u00f3n de la cinta en la parte inferior): Ahora introducimos el extremo del cable de cinta de la pantalla por la ranura de la placa base e insertamos y sujetamos (bajando la pesta\u00f1a) el cable al conector. Al ser la cinta de datos algo r\u00edgida y estar la ranura en la PCB por la que asoma tan cerca del conector, puede resultar algo complicado. Es cuesti\u00f3n de armarse de paciencia y aprovechar que todav\u00eda no hemos atornillado la placa base para tener algo de juego pasando m\u00e1s cable de cinta de lo normal a trav\u00e9s de la ranura: Antes de terminar de encajar la placa base en su lugar, nos fijamos en los botones de la parte inferior (Power, Volumen y Reset). Es muy probable que se hayan descolgado de su lugar, por lo que los recolocaremos: Ya s\u00f3lo queda rearmar la consola procediendo como al principio pero en sentido inverso, es decir, empezamos por encajar la placa base y recolocar los 6 tornillos: Ahora recolocamos los cables de cinta de los sticks fij\u00e1ndolos bajando la pesta\u00f1a que cierra el contacto. Tambi\u00e9n reponemos los botones de los gatillos que hab\u00edamos apartado al principio: Ahora tocar\u00eda reconectar la bater\u00eda y atornillar la tapa trasera, pero no lo vamos a hacer todav\u00eda ya que la consola arrancar\u00eda y dado que no hemos tocado el sistema la pantalla no se ver\u00eda. As\u00ed pues pasamos al apartado de instalaci\u00f3n del software antes de terminar.","title":"Instalaci\u00f3n hardware"},{"location":"2020-07-12-rg350_screen_mod.html#instalacion-software","text":"El firmware original de la RG350 no da soporte directo a la pantalla de alta resoluci\u00f3n, por lo que necesitamos ciertas piezas del firmware de la RG350M para que funcione. En concreto necesitamos el kernel Linux que hay en la partici\u00f3n /boot , es decir la primera partici\u00f3n de la tarjeta interna (la \u00fanica que es de tipo FAT y que por tanto nos facilita el intercambio de ficheros). Como uso ROGUE, voy a tomar el fichero del kernel directamente de los releases que ofrece Ninoh. Concretamente el fichero del kernel es el siguiente (correspondiente a la versi\u00f3n 1.7.10 de ROGUE que era la disponible en el momento de escribir este art\u00edculo): https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/vmlinuz.bin Aunque en teor\u00eda ser\u00e1 suficiente con sustituir el kernel Linux, prefiero sustituir tambi\u00e9n los m\u00f3dulos y el rootfs (sistema de archivos ra\u00edz del sistema) por si hay tambi\u00e9n cambios en ellos respecto del firmware del modelo normal de la RG350: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/modules.squashfs https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/rootfs.squashfs En caso de preferir el firmware BASE, no he localizado estos ficheros por separado, por lo que nos tocar\u00e1 flashear la tarjeta interna completamente con este fichero: https://rs97.bitgala.xyz/RG350M/Stock%20Firmware/sd_image.7z Una vez hechos estos cambios, ya podemos conectar la bater\u00eda y cerrar la tapa trasera. Al conectar la bater\u00eda la consola arrancar\u00e1 y deberemos ver el logo de ROGUE en alta resoluci\u00f3n:","title":"Instalaci\u00f3n software"},{"location":"2020-07-12-rg350_screen_mod.html#tutorial-en-video","text":"Todo el proceso anterior coincide m\u00e1s o menos con el siguiente v\u00eddeo que puede venir bien para \"rellenar los huecos\" de la explicaci\u00f3n anterior. En el video se sustituye la pantalla de una RG350 por otra de la misma resoluci\u00f3n, pero el proceso para cambiar por una de resoluci\u00f3n mayor es id\u00e9ntico:","title":"Tutorial en video"},{"location":"2020-07-12-rg350_screen_mod.html#merece-la-pena-el-cambio","text":"Por \u00faltimo, har\u00e9 unos comentarios sobre las ventajas y desventajas que tiene el cambio de pantalla y si merece la pena. Como sabemos hay muchos sistemas retro en los que encaja bastante bien la resoluci\u00f3n de la pantalla de 320x240 de la RG350 original. Esto ocurre en la mayor\u00eda de las consolas de 8 y 16 bit. En cuanto a los sistemas que no coincide, podemos encontrarnos casos que queden por debajo (Game Boy por ejemplo) y por encima (PlayStation fundamentalmente). En ambos casos tener una pantalla de mayor resoluci\u00f3n es una ventaja. En el caso de sistemas con m\u00e1s resoluci\u00f3n resulta muy evidente, pero tambi\u00e9n en sistemas de baja resoluci\u00f3n ya que al hacer el escalado \"hacia arriba\" tendremos m\u00e1s p\u00edxeles para jugar, para aplicar distintos efectos de suavizado o para simular el acusado efecto dot matrix que sol\u00edan tener pantallas como las de la Game Boy. De todas formas, a grandes rasgos se puede decir que la pantalla de 480p merece fundamentalmente la pena si vamos a jugar a ciertos juegos de alta resoluci\u00f3n en PlayStation, DOSBox y Arcade. En cuanto a los contras, al haber m\u00e1s resoluci\u00f3n, el proceso de scaling en emuladores o juegos que funcionan a baja resoluci\u00f3n, en ocasiones produce efectos de suavizado o emborronado que no gustan a muchos usuarios. En general casi siempre existe manera de solucionar estos problemas tocando los ajustes de scaling del emulador (de hecho a veces se pueden conseguir mejoras o efectos muy interesantes como luego veremos). Por \u00faltimo hay que mencionar un problema que parecen tener la mayor\u00eda de los usuarios de esta pantalla (y del modelo M de la consola) y es que parece no restaurar correctamente cuando se sale de la suspensi\u00f3n de pantalla. En ocasiones tras reactivar la pantalla, aparecen cercos de luz y parpadeos por los bordes. Otro aspecto a considerar, que siempre me parece importante para valorar estas retroconsolas, es el de la escena de desarrollo o scene . S\u00f3lo el tiempo lo dir\u00e1, pero parece l\u00f3gico pensar que gradualmente se ir\u00e1 ampliando la scene del modelo M y reduciendo la de la normal. Aunque tambi\u00e9n podr\u00eda ocurrir lo contrario si no \"cuajan\" las ventas del modelo M frente al normal y teniendo en cuenta adem\u00e1s la cantidad de consolas basadas en la misma arquitectura que contin\u00faan con la pantalla de baja resoluci\u00f3n (RG280, PocketGo 2 V2, RG350P; sin olvidar la que empez\u00f3 todo GCW0). Otro contra es la p\u00e9rdida de rendimiento que se tiene en el modelo M por la sobrecarga que supone en un bus de datos de la m\u00e1quina al tener que transferir m\u00e1s informaci\u00f3n. Esta p\u00e9rdida de rendimiento se estima en alrededor de un 5%. En este hilo de Dingoonity se aportan detalles del problema. Para terminar vamos a mostrar algunos pantallazos de juegos tal y como se ver\u00edan en la pantalla de 240p frente a la de 480p. Las dos im\u00e1genes se han escalado a 640x480 para que se puedan comparar f\u00e1cilmente. A\u00fan as\u00ed debo decir que los pantallazos no hacen justicia. La pantalla de alta resoluci\u00f3n se ve mucho mejor de lo que parece con estos juegos de alta resoluci\u00f3n: Logos arranque PlayStation : Resoluci\u00f3n original 640x448 Crash Bandicoot (PS) : Resoluci\u00f3n original 512x224 Tekken 3 (PS) : Resoluci\u00f3n original 368x448 SimCity (DOS) : Resoluci\u00f3n original 640x352 Game Boy Por \u00faltimo mostrar algunos ejemplos en el caso de Game Boy que mencion\u00e1bamos antes. La \u00faltima release del emulador Gambatte ofrece una versi\u00f3n especial para la RG350M (descargable aqu\u00ed ) que ofrece m\u00e1s opciones de escalado para aprovechar mejor la resoluci\u00f3n de la pantalla: Por ejemplo la opci\u00f3n Dot Matrix produce el efecto de separaci\u00f3n entre p\u00edxeles que suele haber en las pantallas de baja resoluci\u00f3n. Puede parecer absurdo ya que la pantalla de la RG350 original precisamente tiene esta caracter\u00edstica. El problema como dec\u00edamos antes es que al no coincidir la resoluci\u00f3n de la Game Boy (160x144) y ser tan distinta, o bien jugamos con pixeles 1 a 1 y bordes de pantalla o el escalado a toda pantalla producir\u00e1 distorsiones y precisamente se intercalar\u00e1 el efecto dot matrix de la propia pantalla donde no corresponda. Por ejemplo as\u00ed se ve un juego de Game Boy con la opci\u00f3n Dot Matrix 3x en la pantalla de 480p de la RG350M: Actualizaci\u00f3n 2020-10-10 A partir de este punto se incorpora contenido nuevo al art\u00edculo original tras la experiencia con la pantalla oficial.","title":"\u00bfMerece la pena el cambio?"},{"location":"2020-07-12-rg350_screen_mod.html#pantalla-oficial","text":"A pesar de las mejoras de la pantalla instalada anteriormente, desde un principio present\u00f3 una serie de problemas que se pueden considerar menores. Seg\u00fan las experiencias de otras personas que hicieron la misma modificaci\u00f3n, los problemas suelen ser distintos en cada caso. En el m\u00edo los problemas eran estos: P\u00e9rdida de sincronismo vertical (imagen parecida al aspecto de la vieja codificaci\u00f3n de Canal+) en ciertas situaciones (durante un segundo al reiniciar y sobre todo en pantallas de texto, tipo terminal, en algunas ocasiones, no siempre). Peque\u00f1a linea muy fina vertical en GMenu2X (que achaqu\u00e9 a una distorsi\u00f3n de scaling, ahora s\u00e9 que no deb\u00eda ocurrir). En ciertas im\u00e1genes de alta resoluci\u00f3n como en algunos juegos de PlayStation o en SimpleMenu, se produc\u00eda un efecto shadow en los bordes de las areas de color lisas. Los problemas suenan m\u00e1s graves por escrito que observ\u00e1ndolos en la realidad, y de hecho no fue el motivo de cambiar la pantalla, puesto que supon\u00eda que ocurrir\u00edan problemas parecidos hasta en la consola con la pantalla instalada de serie, es decir la RG350M. Sin embargo con la idea de mejorar a\u00fan m\u00e1s la experiencia de la consola decid\u00ed cambiar a la pantalla original de la RG350M que est\u00e1 pegada directamente al cristal exterior, con lo que se elimina el espacio que hay en la RG350 normal. Fue al probar esta pantalla cuando vi que los problemas enumerados antes, no se ten\u00edan por qu\u00e9 producir. La nueva pantalla no ten\u00eda ninguno de ellos, adem\u00e1s de como dec\u00eda evitar el espacio que hay en la RG normal entre pantalla y cristal. Al recibir la nueva pantalla pude comprobar que realmente se trata de una pantalla diferente, lo que explica su comportamiento diferente. En la siguiente foto puede verse c\u00f3mo la faja de datos es claramente diferente: As\u00ed pues, no recomiendo ya la compra de la pantalla JT035IPS02-V0 de Wisecoco que se encuentra por todas partes en Aliexpress y s\u00ed el repuesto oficial de Anbernic de la pantalla que trae la RG350M que puede encontrarse a trav\u00e9s de los siguientes enlaces: eBay Aliexpress Hay que aclarar que la pantalla oficial requiere modificar la carcasa de la consola para poder instalarla, por lo que esta opci\u00f3n s\u00f3lo es recomendable para los que no tengan problemas en trabajar la carcasa con cuchilla y lima.","title":"Pantalla oficial"},{"location":"2020-07-12-rg350_screen_mod.html#instalacion-pantalla-oficial","text":"El proceso de instalaci\u00f3n de la pantalla oficial es similar al descrito antes para la pantalla Wisecoco, con la diferencia del recorte en el marco que hay que realizar. Por este motivo es recomendable desmontar completamente la carcasa superior de la consola, y no parcialmente como se hizo antes. Esto es as\u00ed para evitar todo lo posible los obst\u00e1culos a la hora de trabajar la carcasa. Retiramos pues todos los componentes y separamos las distintas piezas de la carcasa hasta llegar a esto (realmente todav\u00eda se puede retirar tambi\u00e9n el marco blanco, de lo que fui consciente tras hacer la foto): En este punto llega el primer momento complicado que consiste en despegar la pantalla antigua y el cristal exterior sin romperlos. Empec\u00e9 despegando el cristal exterior (ya que tiene menos valor en caso de romperse). Apliqu\u00e9 aire caliente a 150\u00baC durante un rato y el cristal se separ\u00f3 f\u00e1cilmente torsionando ligeramente la consola entre las manos. La pantalla fue f\u00e1cil de despegar empujando por delante una vez que ya no estaba el cristal protector. Llega el momento de coger la cuchilla para rebajar el marco. La cuesti\u00f3n es \u00bfcu\u00e1nto hay que recortar?, pero la respuesta es sencilla. Si miramos al trasluz la carcasa vemos que tras el marco fino que tenemos que recortar est\u00e1 el alojamiento de la pantalla anterior que tiene m\u00e1s o menos las mismas dimensiones que la nueva pantalla: As\u00ed pues el marco interior de la pantalla marca el l\u00edmite de corte. En realidad la pantalla nueva es ligeramente m\u00e1s peque\u00f1a (entre 6 y 8 d\u00e9cimas en cada eje), pero tiene una especie de peque\u00f1os dientes (un par en cada lado) que hacen que, medida en esos dientes, alcance las dimensiones de la pantalla vieja. As\u00ed si dejamos 3 \u00f3 4 d\u00e9cimas de la l\u00e1mina que estamos recortando, la pantalla se sujetar\u00e1 con los dientes adem\u00e1s de con el adhesivo que pondremos al final. Si no dejamos nada, es decir si recortamos completamente el marco, la pantalla se fijar\u00e1 en su sitio s\u00f3lo con el adhesivo y los dientes servir\u00e1n \u00fanicamente para ubicarla correctamente. En cualquier caso el montaje quedar\u00e1 bien, por lo que no es especialmente cr\u00edtico si recortamos el marco completamente o si tenemos habilidad suficiente para dejar esas pocas d\u00e9cimas de mil\u00edmetro en cada lado. El resultado del recorte. Puede observarse en la vista desde la parte interior c\u00f3mo trat\u00e9 de dejar esas pocas d\u00e9cimas de material en el marco: Lo siguiente ser\u00e1 colocar cuatro tiras de adhesivo de dos caras: Ya podemos colocar la pantalla en su sitio y volver a montar la consola restituyendo todos los componentes que se desmontaron al principio: Aunque es dif\u00edcil de apreciar en fotos, la nueva pantalla se ve claramente mejor. Adem\u00e1s de solucionar los tres problemas que mencionaba al principio , al estar directamente tras el cristal produce una imagen mucho m\u00e1s n\u00edtida. La primera foto corresponde a la pantalla antigua y la segunda a la nueva: Por \u00faltimo mencionar este video donde podemos ver todo el proceso en vivo:","title":"Instalaci\u00f3n pantalla oficial"},{"location":"2020-08-12-rg350_py_backup.html","text":"Py Backup es un programa que nos va a facilitar la gesti\u00f3n de los backups en la RG350. Est\u00e1 pensado principalmente para respaldar los directorios donde se almacenan los savestates (las partidas) de los emuladores, pero modificando su configuraci\u00f3n podemos utilizarlo para hacer backup de cualquier fichero o directorio de la consola. Instalaci\u00f3n \u00b6 La aplicaci\u00f3n tiene forma de OPK, por lo que se instalar\u00e1 como habitualmente copiando el fichero a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps El OPK lo podemos bajar de la secci\u00f3n releases del repositorio de c\u00f3digo de la aplicaci\u00f3n, en concreto la \u00faltima versi\u00f3n se encuentra aqu\u00ed . Una vez instalada, podremos encontrar la aplicaci\u00f3n en la secci\u00f3n Applications de los distintos lanzadores: Configuraci\u00f3n \u00b6 La configuraci\u00f3n de Py Backup se hace por medio del fichero que se crea en la siguiente ruta la primera vez que se ejecuta: /media/data/local/home/.py_backup/config.ini Por defecto viene con las rutas de los directorios de savestate de varios emuladores populares: [DEFAULT] destination_directory = /media/sdcard/backups systems = Stella (A2600),True,/media/data/local/home/.stella/state FBA,True,/media/data/local/home/.fba/saves FCEUX (NES),True,/media/data/local/home/.fceux/fcs Gambatte (GB/GBC),True,/media/data/local/home/.gambatte/saves ReGBA (GBA),True,/media/data/local/home/.gpsp SMS Plus (GG/SMS),True,/media/data/local/home/.smsplus/state Genesis Plus (GG/SMS/MD),True,/media/data/local/home/.genplus/saves PicoDrive (MD),True,/media/data/local/home/.picodrive/mds Handy (Lynx),True,/media/data/local/home/.handy NGPCEmu (NGP),True,/media/data/local/home/.ngpcemu/sstates Temper (PCE),True,/media/data/local/home/.temper/save_states PCSX4All (PS),True,/media/data/local/home/.pcsx4all/sstates,/media/data/local/home/.pcsx4all/memcards PocketSNES (SNES),True,/media/data/local/home/.pocketsnes SwanEmu (WS),True,/media/data/local/home/.swanemu/sstates xMAME (Arcade),True,/media/data/local/share/xmame/xmame52/sta,/media/data/local/share/xmame/xmame69/sta,/media/data/local/share/xmame/xmame84/sta ScummVM,True,/media/data/local/home/.local/share/scummvm/saves OpenBOR,True,/media/data/local/home/.OpenBOR/Saves Ports,True,/media/data/local/home/.nxengine,/media/data/local/home/.local/share/VVVVVV/saves,/media/data/local/home/.methane,/media/data/local/home/.sorrv5/savegame Como vemos dentro del fichero de tipo INI encontramos dos par\u00e1metros: destination_directory : Contiene la ruta sobre la que queremos que se dejen los backups. systems : Contiene los varios (uno por linea) ficheros de backup que podemos crear y gestionar por separado. Normalmente cada uno de estos ficheros estar\u00e1 asociado a un emulador o sistema. Los ficheros de backup indicados en el par\u00e1metro systems se configuran por una serie de elementos separados por comas en el siguiente orden: Nombre del fichero de backup. Una vez ejecutado el backup encontraremos un fichero con este nombre y extensi\u00f3n tgz en el directorio indicado en destination_directory . True o False para indicar si queremos activar o desactivar el fichero de backup. Esto puede modificarse f\u00e1cilmente desde el propio interfaz del programa como luego veremos. Listado de ficheros o directorios (separados por comas) que se incluir\u00e1n en el fichero de backup. Es importante que las lineas que contienen las definiciones de los ficheros de backup est\u00e9n indentados con 4 espacios o un tabulador. Por ejemplo vamos a analizar la configuraci\u00f3n del fichero de backup siguiente: PCSX4All (PS),True,/media/data/local/home/.pcsx4all/sstates,/media/data/local/home/.pcsx4all/memcards Al ejecutar el backup, aparecer\u00e1 un fichero de nombre PCSX4All (PS).tgz en el directorio /media/sdcard/backups y con el contenido de los dos siguientes directorios: /media/data/local/home/.pcsx4all/sstates /media/data/local/home/.pcsx4all/memcards Utilizaci\u00f3n \u00b6 Cuando abramos la aplicaci\u00f3n por primera vez encontraremos los ficheros de backup definidos en la configuraci\u00f3n predeterminada. Dependiendo de si tenemos instalados en nuestra consola los emuladores relacionados con estos ficheros, \u00e9stos aparecer\u00e1n coloreados de una u otra forma que luego explicaremos. En caso de tener todos los emuladores instalados, seguramente veremos algo como lo siguiente: En todo momento la aplicaci\u00f3n indica los controles disponibles para su manejo. Seg\u00fan lo visto en la pantalla anterior, en este caso lo que podr\u00edamos hacer es navegar por los distintos ficheros con Arriba/Abajo, marcar o desmarcar ( toggle ) con la tecla A y finalmente ejecutar el backup con la tecla B . Como dec\u00edamos antes, el color con que se representa cada fichero tiene un significado. Por ejemplo en el siguiente fragmento vemos los tres colores posibles: El significado de cada color aplicado a estos tres ficheros se interpreta de la siguiente forma: Blanco: Se puede hacer backup y restaurar. Rojo: Se puede hacer backup pero no restaurar. T\u00edpicamente porque todav\u00eda no se ha hecho el primer backup. Gris: No se puede hacer backup ni restaurar. T\u00edpicamente porque no existen los ficheros o directorios configurados para este backup, seguramente porque no tenemos instalado el sistema correspondiente en nuestra m\u00e1quina. La marca que aparece a la izquierda de cada fichero de backup sirve para especificar si queremos que dicho fichero forme parte de las operaciones de backup o restauraci\u00f3n que ejecutaremos a partir de entonces. Cuando existan ficheros de backup ya realizados (color blanco) y alguno de \u00e9stos se encuentre marcado (marca a la izqierda), veremos que aparece un nuevo control que nos permite realizar la restauraci\u00f3n, la tecla X ( restore ). La restauraci\u00f3n s\u00f3lo se realizar\u00e1 de los ficheros de los que exista backup. Por ejemplo en la siguiente configuracion, si ejecutamos una restauraci\u00f3n de los backups, s\u00f3lo se restaurar\u00e1 el primer fichero ( Stella (A2600) que aparece en blanco) y no el del segundo ( FBA que aparece en rojo) a pesar de que ambos est\u00e1n marcados para ser ejecutados: La ejecuci\u00f3n del backup s\u00ed se realizar\u00e1 sobre los dos ficheros, y de hecho al finalizar, el segundo pasar\u00e1 a tomar color blanco al permitir ya la restauraci\u00f3n: Podemos comprobar la generaci\u00f3n de ambos backups (en realidad la repetici\u00f3n del primero y la creaci\u00f3n del segundo) si exploramos los ficheros que existen en el directorio donde se dejan los backups (si no se modifica la configuraci\u00f3n ser\u00e1 /media/sdcard/backups ): Al ejecutar las operaciones de backup y restauraci\u00f3n se nos pedir\u00e1 confirmaci\u00f3n por medio de un peque\u00f1o popup: Por \u00faltimo, una vez confirmada la operaci\u00f3n podremos ver el progreso del backup o la restauraci\u00f3n, indic\u00e1ndose los ficheros de backup realizados o restaurados. Al realizar el primer backup observaremos adem\u00e1s c\u00f3mo cambia la coloraci\u00f3n de rojo a blanco, indicando la aparici\u00f3n de los ficheros de backup que permiten la restauraci\u00f3n a partir de entonces (al principio del video se desactiva el backup de PCSX4All por tardar demasiado para el prop\u00f3sito del v\u00eddeo): La aplicaci\u00f3n puede ser cerrada en cualquier momento pulsando la tecla START .","title":"RG350 Py Backup"},{"location":"2020-08-12-rg350_py_backup.html#instalacion","text":"La aplicaci\u00f3n tiene forma de OPK, por lo que se instalar\u00e1 como habitualmente copiando el fichero a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir: Tarjeta interna: /media/data/apps Tarjeta externa: /media/sdcard/apps El OPK lo podemos bajar de la secci\u00f3n releases del repositorio de c\u00f3digo de la aplicaci\u00f3n, en concreto la \u00faltima versi\u00f3n se encuentra aqu\u00ed . Una vez instalada, podremos encontrar la aplicaci\u00f3n en la secci\u00f3n Applications de los distintos lanzadores:","title":"Instalaci\u00f3n"},{"location":"2020-08-12-rg350_py_backup.html#configuracion","text":"La configuraci\u00f3n de Py Backup se hace por medio del fichero que se crea en la siguiente ruta la primera vez que se ejecuta: /media/data/local/home/.py_backup/config.ini Por defecto viene con las rutas de los directorios de savestate de varios emuladores populares: [DEFAULT] destination_directory = /media/sdcard/backups systems = Stella (A2600),True,/media/data/local/home/.stella/state FBA,True,/media/data/local/home/.fba/saves FCEUX (NES),True,/media/data/local/home/.fceux/fcs Gambatte (GB/GBC),True,/media/data/local/home/.gambatte/saves ReGBA (GBA),True,/media/data/local/home/.gpsp SMS Plus (GG/SMS),True,/media/data/local/home/.smsplus/state Genesis Plus (GG/SMS/MD),True,/media/data/local/home/.genplus/saves PicoDrive (MD),True,/media/data/local/home/.picodrive/mds Handy (Lynx),True,/media/data/local/home/.handy NGPCEmu (NGP),True,/media/data/local/home/.ngpcemu/sstates Temper (PCE),True,/media/data/local/home/.temper/save_states PCSX4All (PS),True,/media/data/local/home/.pcsx4all/sstates,/media/data/local/home/.pcsx4all/memcards PocketSNES (SNES),True,/media/data/local/home/.pocketsnes SwanEmu (WS),True,/media/data/local/home/.swanemu/sstates xMAME (Arcade),True,/media/data/local/share/xmame/xmame52/sta,/media/data/local/share/xmame/xmame69/sta,/media/data/local/share/xmame/xmame84/sta ScummVM,True,/media/data/local/home/.local/share/scummvm/saves OpenBOR,True,/media/data/local/home/.OpenBOR/Saves Ports,True,/media/data/local/home/.nxengine,/media/data/local/home/.local/share/VVVVVV/saves,/media/data/local/home/.methane,/media/data/local/home/.sorrv5/savegame Como vemos dentro del fichero de tipo INI encontramos dos par\u00e1metros: destination_directory : Contiene la ruta sobre la que queremos que se dejen los backups. systems : Contiene los varios (uno por linea) ficheros de backup que podemos crear y gestionar por separado. Normalmente cada uno de estos ficheros estar\u00e1 asociado a un emulador o sistema. Los ficheros de backup indicados en el par\u00e1metro systems se configuran por una serie de elementos separados por comas en el siguiente orden: Nombre del fichero de backup. Una vez ejecutado el backup encontraremos un fichero con este nombre y extensi\u00f3n tgz en el directorio indicado en destination_directory . True o False para indicar si queremos activar o desactivar el fichero de backup. Esto puede modificarse f\u00e1cilmente desde el propio interfaz del programa como luego veremos. Listado de ficheros o directorios (separados por comas) que se incluir\u00e1n en el fichero de backup. Es importante que las lineas que contienen las definiciones de los ficheros de backup est\u00e9n indentados con 4 espacios o un tabulador. Por ejemplo vamos a analizar la configuraci\u00f3n del fichero de backup siguiente: PCSX4All (PS),True,/media/data/local/home/.pcsx4all/sstates,/media/data/local/home/.pcsx4all/memcards Al ejecutar el backup, aparecer\u00e1 un fichero de nombre PCSX4All (PS).tgz en el directorio /media/sdcard/backups y con el contenido de los dos siguientes directorios: /media/data/local/home/.pcsx4all/sstates /media/data/local/home/.pcsx4all/memcards","title":"Configuraci\u00f3n"},{"location":"2020-08-12-rg350_py_backup.html#utilizacion","text":"Cuando abramos la aplicaci\u00f3n por primera vez encontraremos los ficheros de backup definidos en la configuraci\u00f3n predeterminada. Dependiendo de si tenemos instalados en nuestra consola los emuladores relacionados con estos ficheros, \u00e9stos aparecer\u00e1n coloreados de una u otra forma que luego explicaremos. En caso de tener todos los emuladores instalados, seguramente veremos algo como lo siguiente: En todo momento la aplicaci\u00f3n indica los controles disponibles para su manejo. Seg\u00fan lo visto en la pantalla anterior, en este caso lo que podr\u00edamos hacer es navegar por los distintos ficheros con Arriba/Abajo, marcar o desmarcar ( toggle ) con la tecla A y finalmente ejecutar el backup con la tecla B . Como dec\u00edamos antes, el color con que se representa cada fichero tiene un significado. Por ejemplo en el siguiente fragmento vemos los tres colores posibles: El significado de cada color aplicado a estos tres ficheros se interpreta de la siguiente forma: Blanco: Se puede hacer backup y restaurar. Rojo: Se puede hacer backup pero no restaurar. T\u00edpicamente porque todav\u00eda no se ha hecho el primer backup. Gris: No se puede hacer backup ni restaurar. T\u00edpicamente porque no existen los ficheros o directorios configurados para este backup, seguramente porque no tenemos instalado el sistema correspondiente en nuestra m\u00e1quina. La marca que aparece a la izquierda de cada fichero de backup sirve para especificar si queremos que dicho fichero forme parte de las operaciones de backup o restauraci\u00f3n que ejecutaremos a partir de entonces. Cuando existan ficheros de backup ya realizados (color blanco) y alguno de \u00e9stos se encuentre marcado (marca a la izqierda), veremos que aparece un nuevo control que nos permite realizar la restauraci\u00f3n, la tecla X ( restore ). La restauraci\u00f3n s\u00f3lo se realizar\u00e1 de los ficheros de los que exista backup. Por ejemplo en la siguiente configuracion, si ejecutamos una restauraci\u00f3n de los backups, s\u00f3lo se restaurar\u00e1 el primer fichero ( Stella (A2600) que aparece en blanco) y no el del segundo ( FBA que aparece en rojo) a pesar de que ambos est\u00e1n marcados para ser ejecutados: La ejecuci\u00f3n del backup s\u00ed se realizar\u00e1 sobre los dos ficheros, y de hecho al finalizar, el segundo pasar\u00e1 a tomar color blanco al permitir ya la restauraci\u00f3n: Podemos comprobar la generaci\u00f3n de ambos backups (en realidad la repetici\u00f3n del primero y la creaci\u00f3n del segundo) si exploramos los ficheros que existen en el directorio donde se dejan los backups (si no se modifica la configuraci\u00f3n ser\u00e1 /media/sdcard/backups ): Al ejecutar las operaciones de backup y restauraci\u00f3n se nos pedir\u00e1 confirmaci\u00f3n por medio de un peque\u00f1o popup: Por \u00faltimo, una vez confirmada la operaci\u00f3n podremos ver el progreso del backup o la restauraci\u00f3n, indic\u00e1ndose los ficheros de backup realizados o restaurados. Al realizar el primer backup observaremos adem\u00e1s c\u00f3mo cambia la coloraci\u00f3n de rojo a blanco, indicando la aparici\u00f3n de los ficheros de backup que permiten la restauraci\u00f3n a partir de entonces (al principio del video se desactiva el backup de PCSX4All por tardar demasiado para el prop\u00f3sito del v\u00eddeo): La aplicaci\u00f3n puede ser cerrada en cualquier momento pulsando la tecla START .","title":"Utilizaci\u00f3n"},{"location":"2020-08-15-rg350_scummvm_launchers.html","text":"Nota Este art\u00edculo ha sido posible gracias a la investigaci\u00f3n realizada sobre el tema por Jos\u00e9 Vicente Alberca y a los detalles y ficheros preparados que me ha entregado. Gracias. ScummVM es uno de esos sistemas de emulaci\u00f3n que en RG350, al igual que otros como OpenBOR, utiliza un interfaz propio para seleccionar y arrancar los juegos, lo que dificulta su integraci\u00f3n en lanzadores como SimpleMenu, EmulationStation o PyMenu. A pesar de ello, en las \u00faltimas versiones existe un mecanismo previsto para poder realizar la integraci\u00f3n con los selectores de ROMs de los lanzadores. Vamos a ver c\u00f3mo. Partimos de una instalaci\u00f3n como la vista en este art\u00edculo anterior. Instalaci\u00f3n de OPK con soporte de argumentos \u00b6 Necesitamos una versi\u00f3n del emulador que admita o mejor dicho que lea argumentos o par\u00e1metros que se le pasen al ejecutable y que por medio de los mismos se le pueda indicar el juego a abrir. Esta es justo la mejora realizada en la versi\u00f3n de ScummVM que encontramos en este repositorio: https://github.com/goldmojo/scummvm-rg350/releases/tag/2.2gitRC2-params Bajamos pues el OPK (desde este enlace ) y sustituimos el emulador de ScummVM que ten\u00edamos instalado antes. Como siempre, para instalar un nuevo OPK , lo que tenemos que hacer es copiarlo a uno de estos dos directorios: En tarjeta interna: /media/data/apps En tarjeta externa: /media/sdcard/apps Creaci\u00f3n de targets \u00b6 ScummVM reconoce los juegos por unos IDs basados en una contracci\u00f3n del nombre de los juegos de forma parecida a como hace por ejemplo FBA. La lista de IDs puede consultarse en esta p\u00e1gina . El OPK instalado en el apartado anterior, externamente se comporta como la mayor\u00eda de los emuladores, es decir admite que le pasemos un fichero como argumento. Internamente (mediante un peque\u00f1o wrapper), disecciona la ruta completa del fichero anterior y entrega al ejecutable interno lo siguiente: Ruta del directorio con los ficheros del juego. Nombre del fichero sin extensi\u00f3n a modo de target. Vamos a verlo con un ejemplo. Cogemos como muestra el juego Day Of The Tentacle . Seg\u00fan la p\u00e1gina que lista los IDs , a este juego le corresponde el ID tentacle . En mi m\u00e1quina por ejemplo los ficheros del juego se encuentran en /media/data/roms/SCUMMVM/Day Of The Tentacle . En concreto esto es lo que all\u00ed hay: RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # ls -l drwxr-xr-x 2 root root 4096 Feb 5 1970 MANIAC -rw-r--r-- 1 root root 268965339 Feb 5 1970 MONSTER.SOU -rw-r--r-- 1 root root 7932 Feb 5 1970 TENTACLE.000 -rw-r--r-- 1 root root 11378198 Feb 5 1970 TENTACLE.001 Creamos pues el fichero que se convertir\u00e1 en el target. Del fichero s\u00f3lo nos interesa el nombre. Puede estar vac\u00edo. Como hemos dicho el nombre del fichero tiene que ser tentacle y la extensi\u00f3n cualquiera, aunque parece que existe una convenci\u00f3n para utilizar svm . As\u00ed pues creamos el fichero con un simple touch (esa es la forma r\u00e1pida de hacerlo por SSH, pero como siempre se puede hacer por otros medios como FTP, SCP o DinguxCmdr): RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # touch tentacle.svm RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # ls -l drwxr-xr-x 2 root root 4096 Feb 5 1970 MANIAC -rw-r--r-- 1 root root 268965339 Feb 5 1970 MONSTER.SOU -rw-r--r-- 1 root root 7932 Feb 5 1970 TENTACLE.000 -rw-r--r-- 1 root root 11378198 Feb 5 1970 TENTACLE.001 -rw-r--r-- 1 root root 0 Aug 15 22:47 tentacle.svm S\u00f3lo queda configurar el launcher que utilicemos para que filtre la extensi\u00f3n que hayamos elegido ( svm en el ejemplo anterior) para que no nos permita seleccionar el resto de ficheros del juego que podr\u00edan no tener el nombre correspondiente al target. A partir de ese momento, si vamos al directorio del juego, s\u00f3lo nos deber\u00eda aparecer el fichero correspondiente al target. Abri\u00e9ndolo arrancar\u00e1 el juego directamente sin mediar el interfaz cl\u00e1sico de ScummVM: Integraci\u00f3n en SimpleMenu \u00b6 Vamos a ver c\u00f3mo realizar\u00edamos la integraci\u00f3n en SimpleMenu. Empezamos editando el fichero de configuraci\u00f3n que contiene los sistemas instalados. En mi caso por ejemplo es un \u00fanico fichero en la ruta: /media/data/local/home/.simplemenu/section_groups/sections.ini All\u00ed creamos un bloque como el siguiente: [SCUMMVM] execs = /media/data/apps/scummvm-2.2-git-rg350-01132020-params.opk romDirs = /media/data/roms/SCUMMVM/ romExts = .svm aliasFile = /media/home/.simplemenu/alias.txt No hay que olvidar a\u00f1adir el nuevo sistema al par\u00e1metro consoleList dentro del bloque [CONSOLES] que hay al principio del fichero. Naturalmente habr\u00e1 que adaptar en cada caso las rutas de OPK y ROMs. Como vemos, hemos incluido en la configuraci\u00f3n el fichero alias.txt para que los targets sean convertidos a los nombres largos de los juegos. Para que esto funcione hay que incorporar el listado de targets al fichero. Jos\u00e9 Javier ha extra\u00eddo todos los nombres posibles de la web de ScummVM por lo que s\u00f3lo tenemos que sustituir este fichero en el directorio de home de SimpleMenu, es decir: /media/data/local/home/.simplemenu Por \u00faltimo hay que comprobar que el theme que estemos utilizando contenga la definici\u00f3n del sistema SCUMMVM . Afortunadamente el theme oficial GBZ35Remix ya lo incorpora. En caso de utilizar uno que no lo contenga habr\u00e1 que incorporar una entrada en el fichero de definici\u00f3n del theme ( theme.ini ) y los recursos necesarios. Ya s\u00f3lo queda abrir SimpleMenu y comprobar el resultado:","title":"RG350 ScummVM en lanzadores"},{"location":"2020-08-15-rg350_scummvm_launchers.html#instalacion-de-opk-con-soporte-de-argumentos","text":"Necesitamos una versi\u00f3n del emulador que admita o mejor dicho que lea argumentos o par\u00e1metros que se le pasen al ejecutable y que por medio de los mismos se le pueda indicar el juego a abrir. Esta es justo la mejora realizada en la versi\u00f3n de ScummVM que encontramos en este repositorio: https://github.com/goldmojo/scummvm-rg350/releases/tag/2.2gitRC2-params Bajamos pues el OPK (desde este enlace ) y sustituimos el emulador de ScummVM que ten\u00edamos instalado antes. Como siempre, para instalar un nuevo OPK , lo que tenemos que hacer es copiarlo a uno de estos dos directorios: En tarjeta interna: /media/data/apps En tarjeta externa: /media/sdcard/apps","title":"Instalaci\u00f3n de OPK con soporte de argumentos"},{"location":"2020-08-15-rg350_scummvm_launchers.html#creacion-de-targets","text":"ScummVM reconoce los juegos por unos IDs basados en una contracci\u00f3n del nombre de los juegos de forma parecida a como hace por ejemplo FBA. La lista de IDs puede consultarse en esta p\u00e1gina . El OPK instalado en el apartado anterior, externamente se comporta como la mayor\u00eda de los emuladores, es decir admite que le pasemos un fichero como argumento. Internamente (mediante un peque\u00f1o wrapper), disecciona la ruta completa del fichero anterior y entrega al ejecutable interno lo siguiente: Ruta del directorio con los ficheros del juego. Nombre del fichero sin extensi\u00f3n a modo de target. Vamos a verlo con un ejemplo. Cogemos como muestra el juego Day Of The Tentacle . Seg\u00fan la p\u00e1gina que lista los IDs , a este juego le corresponde el ID tentacle . En mi m\u00e1quina por ejemplo los ficheros del juego se encuentran en /media/data/roms/SCUMMVM/Day Of The Tentacle . En concreto esto es lo que all\u00ed hay: RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # ls -l drwxr-xr-x 2 root root 4096 Feb 5 1970 MANIAC -rw-r--r-- 1 root root 268965339 Feb 5 1970 MONSTER.SOU -rw-r--r-- 1 root root 7932 Feb 5 1970 TENTACLE.000 -rw-r--r-- 1 root root 11378198 Feb 5 1970 TENTACLE.001 Creamos pues el fichero que se convertir\u00e1 en el target. Del fichero s\u00f3lo nos interesa el nombre. Puede estar vac\u00edo. Como hemos dicho el nombre del fichero tiene que ser tentacle y la extensi\u00f3n cualquiera, aunque parece que existe una convenci\u00f3n para utilizar svm . As\u00ed pues creamos el fichero con un simple touch (esa es la forma r\u00e1pida de hacerlo por SSH, pero como siempre se puede hacer por otros medios como FTP, SCP o DinguxCmdr): RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # touch tentacle.svm RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # ls -l drwxr-xr-x 2 root root 4096 Feb 5 1970 MANIAC -rw-r--r-- 1 root root 268965339 Feb 5 1970 MONSTER.SOU -rw-r--r-- 1 root root 7932 Feb 5 1970 TENTACLE.000 -rw-r--r-- 1 root root 11378198 Feb 5 1970 TENTACLE.001 -rw-r--r-- 1 root root 0 Aug 15 22:47 tentacle.svm S\u00f3lo queda configurar el launcher que utilicemos para que filtre la extensi\u00f3n que hayamos elegido ( svm en el ejemplo anterior) para que no nos permita seleccionar el resto de ficheros del juego que podr\u00edan no tener el nombre correspondiente al target. A partir de ese momento, si vamos al directorio del juego, s\u00f3lo nos deber\u00eda aparecer el fichero correspondiente al target. Abri\u00e9ndolo arrancar\u00e1 el juego directamente sin mediar el interfaz cl\u00e1sico de ScummVM:","title":"Creaci\u00f3n de targets"},{"location":"2020-08-15-rg350_scummvm_launchers.html#integracion-en-simplemenu","text":"Vamos a ver c\u00f3mo realizar\u00edamos la integraci\u00f3n en SimpleMenu. Empezamos editando el fichero de configuraci\u00f3n que contiene los sistemas instalados. En mi caso por ejemplo es un \u00fanico fichero en la ruta: /media/data/local/home/.simplemenu/section_groups/sections.ini All\u00ed creamos un bloque como el siguiente: [SCUMMVM] execs = /media/data/apps/scummvm-2.2-git-rg350-01132020-params.opk romDirs = /media/data/roms/SCUMMVM/ romExts = .svm aliasFile = /media/home/.simplemenu/alias.txt No hay que olvidar a\u00f1adir el nuevo sistema al par\u00e1metro consoleList dentro del bloque [CONSOLES] que hay al principio del fichero. Naturalmente habr\u00e1 que adaptar en cada caso las rutas de OPK y ROMs. Como vemos, hemos incluido en la configuraci\u00f3n el fichero alias.txt para que los targets sean convertidos a los nombres largos de los juegos. Para que esto funcione hay que incorporar el listado de targets al fichero. Jos\u00e9 Javier ha extra\u00eddo todos los nombres posibles de la web de ScummVM por lo que s\u00f3lo tenemos que sustituir este fichero en el directorio de home de SimpleMenu, es decir: /media/data/local/home/.simplemenu Por \u00faltimo hay que comprobar que el theme que estemos utilizando contenga la definici\u00f3n del sistema SCUMMVM . Afortunadamente el theme oficial GBZ35Remix ya lo incorpora. En caso de utilizar uno que no lo contenga habr\u00e1 que incorporar una entrada en el fichero de definici\u00f3n del theme ( theme.ini ) y los recursos necesarios. Ya s\u00f3lo queda abrir SimpleMenu y comprobar el resultado:","title":"Integraci\u00f3n en SimpleMenu"},{"location":"2020-08-31-cancion_herb_alpert.html","text":"Mientras terminan las \u00faltimas horas de mi particular versi\u00f3n del encierro al que en mayor o menor grado hemos estado todos sometidos los \u00faltimos meses, voy a contar aqu\u00ed una de esas peque\u00f1as historias ocurridas durante el mismo. Soy consciente de que se aparta mucho de la linea habitual de posts que se encuentran en este sitio. Nota El t\u00edtulo del post \"La canci\u00f3n que merece la pena escuchar\" hace referencia a una secci\u00f3n que hab\u00eda al principio en Todopoderosos , uno de mis podcasts favoritos. Tijuana Brass \u00b6 La historia tiene sus ra\u00edces hace m\u00e1s de 40 a\u00f1os. Por aquella \u00e9poca casi todos los fines de semana mis padres nos llevaban a su pueblo natal, Tarazona. El viaje siempre iba acompa\u00f1ado de m\u00fasica porque era uno de los mejores remedios para evitar el mareo al que \u00e9ramos propensos una de mis dos hermanas y yo mismo. Una de las pocas cassettes que ten\u00edamos era de los Tijuana Brass. Mis hermanas y yo nos sab\u00edamos de memoria aquella cassette hasta el punto de replicar sus piezas en play back interpretando cada uno un instrumento (la marimba, las trompetas y trombones fundamentalmente). Todav\u00eda recuerdo bastante bien la mayor\u00eda de esos temas. As\u00ed sonaban: No s\u00e9 si por ser parte de mi ni\u00f1ez o por no haber vuelto casi a encontrar aquella m\u00fasica fuera del escenario de aquellos viajes, siempre la consider\u00e9 como m\u00fasica menor. Desconoc\u00eda lo equivocado que estaba. Buscando un amigo para el fin del mundo \u00b6 El segundo punto de la conjunci\u00f3n de detalles que me condujo a la canci\u00f3n, es una de las muchas (much\u00edsimas) pel\u00edculas que he visto durante estos meses vividos casi exclusivamente en casa, Buscando un amigo para el fin del mundo . Realmente la hab\u00eda visto hace algo m\u00e1s de un a\u00f1o, y me gust\u00f3 bastante, porque me suele atraer el estilo de cine que tiene, original, de ritmo pausado y sobre todo con buena m\u00fasica. Es de esas pel\u00edculas que guard\u00e9 para ver en determinados momentos en que \"sienta bien\". Pero en ese momento desconoc\u00eda su conexi\u00f3n con los Tijuana. Tuvo su gracia ver esta pel\u00edcula en los momentos m\u00e1s duros del confinamiento (tarde para vosotros). Es quiz\u00e1 la pel\u00edcula m\u00e1s apocal\u00edptica que conozco. Ni siquiera da pie al concepto de post-apocalipsis, no digo m\u00e1s. Realmente hasta el propio t\u00edtulo deja clara la premisa, pero en cualquier caso s\u00f3lo es la excusa para poner en marcha la historia, no el fin (bueno s\u00ed, \ud83d\ude44). Pero que nadie se asuste, no es un drama sino m\u00e1s bien una pel\u00edcula rom\u00e1ntica. Muy rom\u00e1ntica. Como dec\u00eda antes la pel\u00edcula tiene muy buena m\u00fasica y ya desde un primer visionado me llamaron mucho la atenci\u00f3n tres piezas, siendo la que es motivo de este post la reservada para quiz\u00e1 el momento cumbre de la pel\u00edcula. Pero volver\u00e9 a ella, para desvelarla finalmente, tras el siguiente apartado. Movie Ticket Radio \u00b6 El \u00faltimo detalle que logr\u00f3 fijar mi atenci\u00f3n (y mucho) en el tema que os quer\u00eda presentar es esta radio online: http://www.movieticketradio.com/ La descubr\u00ed hacia finales del a\u00f1o pasado y no he dejado de escucharla desde entonces, sobre todo cuando trabajo. Ha empeorado un poco hace unos tres meses cuando decidieron fusionar en uno los dos canales que ten\u00edan hasta entonces. Antes estaban los canales Classic y Pop, siendo el primero el que me ten\u00eda enganchado y que me ha hecho descubrir una gran cantidad de temas y de pel\u00edculas. Estoy particularmente agradecido a este sitio por haberme hecho conocer las siguientes pel\u00edculas (sobre todo la primera que se ha convertido en mi musical favorito): The Music Man Camelot White Christmas Animal Crackers The King and I Guys and Dolls Yankee Doodle Dandy South Pacific Por si os interesa el canal, escucharlo a trav\u00e9s del navegador es inc\u00f3modo y da problemas. Est\u00e1 integrado en varias plataformas y apps para m\u00f3vil como TuneIn o Simple Radio . En mi caso con el ordenador prefiero reproducirlo con VLC conectando este reproductor a esta URL: http://listen.djcmedia.com/movieticketclassichigh Varios de los temas de Buscando un amigo para el fin del mundo aparecen recurrentemente en el canal, lo que intensific\u00f3 mi atracci\u00f3n por el tema que nos ocupa, e hizo que investigara sobre su autor. Herb Alpert \u00b6 Llegado este momento es cuando me doy cuenta de que el autor de la canci\u00f3n es el mismo que fund\u00f3 el grupo Tijuana Brass de mi infancia y que lejos de ser un m\u00fasico menor, ha sido uno de los m\u00e1s influyentes de su generaci\u00f3n. Otra de las sorpresas ha sido comprobar que el bueno de Herb todav\u00eda vive, que ha estado en activo todo este tiempo y que ha dado continuas muestras de evoluci\u00f3n y adaptaci\u00f3n a los tiempos. Aqu\u00ed podemos verlo tocando su inconfundible trompeta, en un video subido a su canal de YouTube hace tan s\u00f3lo 3 d\u00edas enviando un mensaje optimista: Algunos de sus logros musicales son: Es la \"A\" del importante sello discogr\u00e1fico A&M Records . 5 n\u00fameros uno y 28 \u00e1lbumes en las listas de Billboard. 8 premios Grammy. 14 discos de platino y 15 discos de oro. M\u00e1s de 72 millones de discos vendidos en el mundo. Una vez que le hab\u00eda \"puesto cara\" a Herb, en posteriores visionados de la pel\u00edcula me doy cuenta de que seguramente a su director o guionista, le gusta mucho este m\u00fasico, ya que aparte de la canci\u00f3n por la que escribo el post, la protagonista de Buscando un amigo para el fin del mundo aparece abrazada a un disco de Herb durante toda una importante escena (en realidad es a una colecci\u00f3n de discos al frente de la cual aparece el de Herb): La canci\u00f3n \u00b6 Llegamos ya por fin a la canci\u00f3n. Con semejantes expectativas ya casi s\u00f3lo puede defraudar. Cada vez que suenan en Movie Ticket Radio los acordes de teclado electr\u00f3nico del principio se me ponen los pelos de punta. En la entrada de Wikipedia sobre Herb Alpert puede leerse lo siguiente sobre la canci\u00f3n: El \u00fanico sencillo de Alpert que fue n\u00famero uno durante este periodo (y el primer #1 corte de su sello A&M) fue: \"Este Tipo Enamorado de Ti (This Guy's in Love with You)\", creada recientemente por Burt Bacharach y Hal David en m\u00fasica y letra, todav\u00eda no ten\u00eda int\u00e9rprete y se la dieron a Alpert que se lo dedic\u00f3 a su primera esposa en un especial de Televisi\u00f3n CBS en 1968 titulado Beat of the Brass ofreciendo un raro vocal. La secuencia se grab\u00f3 en la playa en Malibu. No se pensaba que la canci\u00f3n se volviese a emitir, pero despu\u00e9s del especial, los miles de llamadas telef\u00f3nicas a CBS preguntando por Herb convencieron al due\u00f1o del sello de Alpert para lanzarlo como single dos d\u00edas despu\u00e9s de que el show se emitiese. Las habilidades vocales de Alpert eran limitadas, pero esta canci\u00f3n era muy mel\u00f3dica y estaba hecha por un hacedor de \u00e9xitos como Bacharach. Herb la cant\u00f3 con gran sentimiento y el \u00e9xito fue de inmediato, como un acto de magia y ello jug\u00f3 a su favor. El sencillo apareci\u00f3 en mayo de 1968, lleg\u00f3 a la cima de las listas en cuatro semanas y estuvo en lo m\u00e1s alto entre los mejores hits del a\u00f1o; inicialmente menospreciado por los cr\u00edticos y los mel\u00f3manos como un tema para amas de casa, la expresiva grabaci\u00f3n de Alpert en \"This Guy's in Love with You\" se considera ahora como una de las baladas emblem\u00e1ticas del pop y todo un cl\u00e1sico. Existe un video digamos oficial de la \u00e9poca del tema, que seguramente corresponde con lo emitido durante el especial de CBS mencionado en Wikipedia, pero ha envejecido muy mal, no como la canci\u00f3n. Por eso pongo el siguiente en el que s\u00f3lo suena el tema. Sin m\u00e1s:","title":"La canci\u00f3n que merece la pena escuchar"},{"location":"2020-08-31-cancion_herb_alpert.html#tijuana-brass","text":"La historia tiene sus ra\u00edces hace m\u00e1s de 40 a\u00f1os. Por aquella \u00e9poca casi todos los fines de semana mis padres nos llevaban a su pueblo natal, Tarazona. El viaje siempre iba acompa\u00f1ado de m\u00fasica porque era uno de los mejores remedios para evitar el mareo al que \u00e9ramos propensos una de mis dos hermanas y yo mismo. Una de las pocas cassettes que ten\u00edamos era de los Tijuana Brass. Mis hermanas y yo nos sab\u00edamos de memoria aquella cassette hasta el punto de replicar sus piezas en play back interpretando cada uno un instrumento (la marimba, las trompetas y trombones fundamentalmente). Todav\u00eda recuerdo bastante bien la mayor\u00eda de esos temas. As\u00ed sonaban: No s\u00e9 si por ser parte de mi ni\u00f1ez o por no haber vuelto casi a encontrar aquella m\u00fasica fuera del escenario de aquellos viajes, siempre la consider\u00e9 como m\u00fasica menor. Desconoc\u00eda lo equivocado que estaba.","title":"Tijuana Brass"},{"location":"2020-08-31-cancion_herb_alpert.html#buscando-un-amigo-para-el-fin-del-mundo","text":"El segundo punto de la conjunci\u00f3n de detalles que me condujo a la canci\u00f3n, es una de las muchas (much\u00edsimas) pel\u00edculas que he visto durante estos meses vividos casi exclusivamente en casa, Buscando un amigo para el fin del mundo . Realmente la hab\u00eda visto hace algo m\u00e1s de un a\u00f1o, y me gust\u00f3 bastante, porque me suele atraer el estilo de cine que tiene, original, de ritmo pausado y sobre todo con buena m\u00fasica. Es de esas pel\u00edculas que guard\u00e9 para ver en determinados momentos en que \"sienta bien\". Pero en ese momento desconoc\u00eda su conexi\u00f3n con los Tijuana. Tuvo su gracia ver esta pel\u00edcula en los momentos m\u00e1s duros del confinamiento (tarde para vosotros). Es quiz\u00e1 la pel\u00edcula m\u00e1s apocal\u00edptica que conozco. Ni siquiera da pie al concepto de post-apocalipsis, no digo m\u00e1s. Realmente hasta el propio t\u00edtulo deja clara la premisa, pero en cualquier caso s\u00f3lo es la excusa para poner en marcha la historia, no el fin (bueno s\u00ed, \ud83d\ude44). Pero que nadie se asuste, no es un drama sino m\u00e1s bien una pel\u00edcula rom\u00e1ntica. Muy rom\u00e1ntica. Como dec\u00eda antes la pel\u00edcula tiene muy buena m\u00fasica y ya desde un primer visionado me llamaron mucho la atenci\u00f3n tres piezas, siendo la que es motivo de este post la reservada para quiz\u00e1 el momento cumbre de la pel\u00edcula. Pero volver\u00e9 a ella, para desvelarla finalmente, tras el siguiente apartado.","title":"Buscando un amigo para el fin del mundo"},{"location":"2020-08-31-cancion_herb_alpert.html#movie-ticket-radio","text":"El \u00faltimo detalle que logr\u00f3 fijar mi atenci\u00f3n (y mucho) en el tema que os quer\u00eda presentar es esta radio online: http://www.movieticketradio.com/ La descubr\u00ed hacia finales del a\u00f1o pasado y no he dejado de escucharla desde entonces, sobre todo cuando trabajo. Ha empeorado un poco hace unos tres meses cuando decidieron fusionar en uno los dos canales que ten\u00edan hasta entonces. Antes estaban los canales Classic y Pop, siendo el primero el que me ten\u00eda enganchado y que me ha hecho descubrir una gran cantidad de temas y de pel\u00edculas. Estoy particularmente agradecido a este sitio por haberme hecho conocer las siguientes pel\u00edculas (sobre todo la primera que se ha convertido en mi musical favorito): The Music Man Camelot White Christmas Animal Crackers The King and I Guys and Dolls Yankee Doodle Dandy South Pacific Por si os interesa el canal, escucharlo a trav\u00e9s del navegador es inc\u00f3modo y da problemas. Est\u00e1 integrado en varias plataformas y apps para m\u00f3vil como TuneIn o Simple Radio . En mi caso con el ordenador prefiero reproducirlo con VLC conectando este reproductor a esta URL: http://listen.djcmedia.com/movieticketclassichigh Varios de los temas de Buscando un amigo para el fin del mundo aparecen recurrentemente en el canal, lo que intensific\u00f3 mi atracci\u00f3n por el tema que nos ocupa, e hizo que investigara sobre su autor.","title":"Movie Ticket Radio"},{"location":"2020-08-31-cancion_herb_alpert.html#herb-alpert","text":"Llegado este momento es cuando me doy cuenta de que el autor de la canci\u00f3n es el mismo que fund\u00f3 el grupo Tijuana Brass de mi infancia y que lejos de ser un m\u00fasico menor, ha sido uno de los m\u00e1s influyentes de su generaci\u00f3n. Otra de las sorpresas ha sido comprobar que el bueno de Herb todav\u00eda vive, que ha estado en activo todo este tiempo y que ha dado continuas muestras de evoluci\u00f3n y adaptaci\u00f3n a los tiempos. Aqu\u00ed podemos verlo tocando su inconfundible trompeta, en un video subido a su canal de YouTube hace tan s\u00f3lo 3 d\u00edas enviando un mensaje optimista: Algunos de sus logros musicales son: Es la \"A\" del importante sello discogr\u00e1fico A&M Records . 5 n\u00fameros uno y 28 \u00e1lbumes en las listas de Billboard. 8 premios Grammy. 14 discos de platino y 15 discos de oro. M\u00e1s de 72 millones de discos vendidos en el mundo. Una vez que le hab\u00eda \"puesto cara\" a Herb, en posteriores visionados de la pel\u00edcula me doy cuenta de que seguramente a su director o guionista, le gusta mucho este m\u00fasico, ya que aparte de la canci\u00f3n por la que escribo el post, la protagonista de Buscando un amigo para el fin del mundo aparece abrazada a un disco de Herb durante toda una importante escena (en realidad es a una colecci\u00f3n de discos al frente de la cual aparece el de Herb):","title":"Herb Alpert"},{"location":"2020-08-31-cancion_herb_alpert.html#la-cancion","text":"Llegamos ya por fin a la canci\u00f3n. Con semejantes expectativas ya casi s\u00f3lo puede defraudar. Cada vez que suenan en Movie Ticket Radio los acordes de teclado electr\u00f3nico del principio se me ponen los pelos de punta. En la entrada de Wikipedia sobre Herb Alpert puede leerse lo siguiente sobre la canci\u00f3n: El \u00fanico sencillo de Alpert que fue n\u00famero uno durante este periodo (y el primer #1 corte de su sello A&M) fue: \"Este Tipo Enamorado de Ti (This Guy's in Love with You)\", creada recientemente por Burt Bacharach y Hal David en m\u00fasica y letra, todav\u00eda no ten\u00eda int\u00e9rprete y se la dieron a Alpert que se lo dedic\u00f3 a su primera esposa en un especial de Televisi\u00f3n CBS en 1968 titulado Beat of the Brass ofreciendo un raro vocal. La secuencia se grab\u00f3 en la playa en Malibu. No se pensaba que la canci\u00f3n se volviese a emitir, pero despu\u00e9s del especial, los miles de llamadas telef\u00f3nicas a CBS preguntando por Herb convencieron al due\u00f1o del sello de Alpert para lanzarlo como single dos d\u00edas despu\u00e9s de que el show se emitiese. Las habilidades vocales de Alpert eran limitadas, pero esta canci\u00f3n era muy mel\u00f3dica y estaba hecha por un hacedor de \u00e9xitos como Bacharach. Herb la cant\u00f3 con gran sentimiento y el \u00e9xito fue de inmediato, como un acto de magia y ello jug\u00f3 a su favor. El sencillo apareci\u00f3 en mayo de 1968, lleg\u00f3 a la cima de las listas en cuatro semanas y estuvo en lo m\u00e1s alto entre los mejores hits del a\u00f1o; inicialmente menospreciado por los cr\u00edticos y los mel\u00f3manos como un tema para amas de casa, la expresiva grabaci\u00f3n de Alpert en \"This Guy's in Love with You\" se considera ahora como una de las baladas emblem\u00e1ticas del pop y todo un cl\u00e1sico. Existe un video digamos oficial de la \u00e9poca del tema, que seguramente corresponde con lo emitido durante el especial de CBS mencionado en Wikipedia, pero ha envejecido muy mal, no como la canci\u00f3n. Por eso pongo el siguiente en el que s\u00f3lo suena el tema. Sin m\u00e1s:","title":"La canci\u00f3n"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html","text":"xMAME tiene un frontend propio que intercala una pantalla de ajustes entre la selecci\u00f3n de la ROM y la ejecuci\u00f3n final de la misma. \u00c9sta: Cuando se integra xMAME en SimpleMenu se pierde esta pantalla de ajustes y la ROM es ejecutada con las opciones predeterminadas. Para mejorar esta situaci\u00f3n se ha desarrollado una especie de clon de la pantalla de ajustes de xMAME que se puede integrar entre SimpleMenu y los binarios de xMAME que ejecutan al final la ROM. Vamos a ver aqu\u00ed c\u00f3mo instalar y utilizar este interfaz. Al final se describen tambi\u00e9n los aspectos t\u00e9cnicos de la soluci\u00f3n para los que est\u00e9n interesados. Funciona en los dos modelos de pantalla de la RG350, es decir que sirve tanto para el modelo original como los nuevos RG350P y RG350M. Instalaci\u00f3n \u00b6 La instalaci\u00f3n se hace por medio de un OPK que sit\u00faa los ficheros necesarios dentro de la ruta donde se encuentra xMAME (en concreto en el subdirectorio /media/data/local/share/xmame/sm_bridge ). Tambi\u00e9n hace las modificaciones autom\u00e1ticamente en los ficheros de configuraci\u00f3n de SimpleMenu. Naturalmente, antes tendremos que tener instalados xMAME y SimpleMenu . El OPK con el instalador se puede descargar desde el siguiente enlace: https://github.com/eduardofilo/RG350_xmame_sm_bridge/releases/download/1.2/xmame_sm_bridge_installer_1.2.opk Una vez instalado en la RG350 (como cualquier otro OPK; ver instrucciones aqu\u00ed en caso de dudas), lo deberemos encontrar en nuestro lanzador en la secci\u00f3n de aplicaciones. Por ejemplo: Una vez instalado lo abriremos y encontraremos un sencillo aviso para confirmar la instalaci\u00f3n seleccionando el bot\u00f3n <Yes> y pulsando Start : Con esto el peque\u00f1o interfaz de ajustes habr\u00e1 quedado instalado. Utilizaci\u00f3n \u00b6 A partir de entonces, al ejecutar una ROM con el sistema xMAME integrado en SimpleMenu, nos aparecer\u00e1 un peque\u00f1o interfaz muy parecido al que muestra el interfaz propio de xMAME justo despu\u00e9s de seleccionar la ROM. Se han replicado los controles de la pantalla de ajustes de xMAME que, al igual que en ella, se indican en la leyenda inferior. B\u00e1sicamente son estos: Arriba/Abajo : Para seleccionar el ajuste que se quiere modificar. Izquierda/Derecha : Para cambiar el valor del ajuste seleccionado. A : Confirmar el arranque del juego. B : Cancelar el arranque del juego, es decir volver a SimpleMenu. Los ajustes, una vez hechos, en el momento de arrancar el juego (no as\u00ed si volvemos atr\u00e1s con B ), se guardan en el mismo fichero que utiliza xMAME. Por tanto los ajustes que hagamos persistir\u00e1n entre distintas sesiones. Adem\u00e1s ser\u00e1n compatibles con los ajustes que hayamos hecho en xMAME. Como se ha mencionado, se muestran los mismos ajustes que en xMAME y el manejo de la pantalla es id\u00e9ntico, pero hay dos excepciones: En el ajuste Video Rotation hay un valor posible adicional. En xMAME los valores posibles eran: Auto , Landscape y Portrait . En este nuevo interfaz el valor Portrait se ha desdoblado en dos: Portrait (L) y Portrait (R) . Esto es as\u00ed porque internamente xMAME soporta dos opciones de pantalla horizontal (girada hacia la izquierda y hacia la derecha). Por alg\u00fan motivo en el interfaz original de xMAME s\u00f3lo se ofrece uno de los dos. Aqu\u00ed pues se muestran los dos. Hay un problema sin embargo y es que el fichero de configuraci\u00f3n donde se almacenan los ajustes para cada juego no soporta este modo adicional Portrait (R) , por lo que si se utiliza, al volver a intentar lanzar el juego nos encontraremos el valor m\u00e1s cercano al seleccionado Portrait (L) . El ajuste Save state no funciona ni siquiera en xMAME (se cierra el emulador al cambiar el valor predeterminado None ), por lo que en esta reimplementaci\u00f3n de la pantalla de ajustes se ha optado por desactivarlo. Por ese motivo aparece en gris. Aspectos t\u00e9cnicos \u00b6 Se mencionan aqu\u00ed los detalles de funcionamiento interno del interfaz de ajustes para quien tenga inter\u00e9s. Si s\u00f3lo te interesa instalarlo y utilizarlo, puedes dejar de leer aqu\u00ed. An\u00e1lisis previo \u00b6 Este interfaz de ajustes para xMAME ha sido posible por la peculiar arquitectura que tiene este emulador. No es como los emuladores habituales en que todo est\u00e1 implementado en un \u00fanico binario o ejecutable (normalmente empaquetado en un OPK, aunque esa no es la clave de la diferencia). xMAME, haciendo honor a su nombre, sigue un poco m\u00e1s la filosof\u00eda UNIX en la que las distintas partes del sistema se encuentran en distintos binarios que se invocan unos a otros lanzando procesos con los par\u00e1metros necesarios. En concreto, xMAME tiene los siguientes binarios principales: /media/data/local/share/xmame/xmame.dge /media/data/local/share/xmame/xmame52/xmame.SDL.52 /media/data/local/share/xmame/xmame69/xmame.SDL.69 /media/data/local/share/xmame/xmame84/xmame.SDL.84 El primero es el interfaz normal (el de la pantalla de fondo verde) que es el que muestra la lista de ROMs de los distintos romsets y la pantalla de ajustes una vez que seleccionamos una ROM: Tras la segunda pantalla se ejecuta el proceso correspondiente al romset elegido al principio, que se corresponde con uno de los tres procesos restantes de la lista anterior. Por ejemplo, tal y como se ha ajustado el juego que se selecciona en los dos pantallazos anteriores, el proceso que se ejecuta finalmente es: xmame.SDL.84 bombjack -ipu_scaler 2 -nodirty -triplebuf -rol As\u00ed pues tenemos todo el poder en nuestras manos para ejecutar una ROM con los ajustes que deseemos siempre que se conozca la correspondencia entre los distintos ajustes con los argumentos a pasar al proceso a la hora de ejecutarlo. Esto fue lo primero que fue necesario hacer. El resultado est\u00e1 codificado en la estructura de datos que se ve a partir de la linea 36 de este fichero fuente: https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/settings.py Como ejemplo vamos a ver c\u00f3mo se interpreta la parte correspondiente al ajuste Video Rotation : { \"file_pos\" : 0 , \"desc\" : \"Video Rotation\" , \"enabled\" : True , \"values\" : [ 0 , 1 , 2 , 3 ], \"descs\" : [ \"Auto\" , \"Landscape\" , \"Portrait (L)\" , \"Portrait (R)\" ], \"args\" : [ \"-autoror\" , \"\" , \"-rol\" , \"-ror\" ], \"value\" : 0 }, Los valores de las claves values , descs y args se corresponden entre s\u00ed seg\u00fan el orden en que aparecen. Es decir: Descripci\u00f3n Auto Landscape Portrait (L) Portrait (R) Valor 0 1 2 3 Argumento -autoror -rol -ror Valor (o values en la codificaci\u00f3n JSON) es el dato que luego se almacena en el peque\u00f1o fichero de configuraci\u00f3n que deja xMAME en los siguientes directorios en funci\u00f3n del romset: /media/data/local/share/xmame/xmame52/frontend /media/data/local/share/xmame/xmame69/frontend /media/data/local/share/xmame/xmame84/frontend Por ejemplo el fichero que aparece cuando configuramos el juego del ejemplo del romset 84 como se ve\u00eda en los pantallazos anteriores es /media/data/local/share/xmame/xmame84/frontend/bombjack.cfg y tiene el siguiente contenido: 2,0,0,0,0,0,0,0,0,0,0,0,0,1,0 El par\u00e1metro file_pos del JSON nos indica en qu\u00e9 posici\u00f3n se almacena el ajuste. Por ejemplo el ajuste Video Rotation que estamos utilizando de ejemplo est\u00e1 en la posici\u00f3n 0 (el primero). Como vemos en el fichero tiene el valor 2 que seg\u00fan la tabla anterior corresponde a Portrait (L) . Finalmente el argumento ser\u00e1 el que se a\u00f1ada a la hora de ejecutar el emulador con la ROM. En el caso del ejemplo ser\u00e1 el argumento -rol que ve\u00edamos en el proceso que se ejecuta al final y que repetimos de nuevo: xmame.SDL.84 bombjack -ipu_scaler 2 -nodirty -triplebuf -rol La forma de averiguar todos los valores posibles fue ajust\u00e1ndolos uno a uno cambiando uno cada vez y analizando el proceso ejecutado al final con el comando ps de Linux. Programaci\u00f3n \u00b6 Una vez reunida toda la informaci\u00f3n lleg\u00f3 el momento de programar. La idea era reproducir de la forma m\u00e1s fiel posible el interfaz de ajustes de la ROM que tiene xMAME. Para la programaci\u00f3n se ha elegido el entorno Python m\u00e1s la librer\u00eda pygame que ofrece primitivas para dibujar en pantalla y controlar eventos (b\u00e1sicamente es una envoltura Python a la librer\u00eda SDL). Ambos se encuentran preinstalados en OpenDingux. El c\u00f3digo puede encontrarse en este repositorio: https://github.com/eduardofilo/RG350_xmame_sm_bridge El programa realizado en Python/pygame tan solo muestra las opciones y permite cambiarlas. Al seleccionar la ROM en SimpleMenu (que le llega como argumento) hace dos cosas: Persiste los ajustes en el fichero de configuraci\u00f3n de xMAME correspondiente (subdirectorio frontend del directorio de cada romset). Genera un fichero /tmp/run que contiene el proceso a ejecutar, es decir el binario del emulador del romset elegido junto a los argumentos correspondientes a los ajustes hechos. Todo esto est\u00e1 envuelto con tres peque\u00f1os shell scripts, uno por cada romset, que son los que se configuran en SimpleMenu en el fichero donde tengamos definido el sistema xMAME. Los tres scripts son los siguientes: https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.52 https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.69 https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.84 Todos los ficheros necesarios deben instalarse en la ruta siguiente en el sistema de la consola: /media/data/local/share/xmame/sm_bridge As\u00ed pues la configuraci\u00f3n de SimpleMenu para integrar este sistema deber\u00eda invocar los scripts anteriores instalados en esta ruta, por ejemplo: [MAME] execs = /media/data/local/share/xmame/sm_bridge/romset.84,/media/data/local/share/xmame/sm_bridge/romset.69,/media/data/local/share/xmame/sm_bridge/romset.52 romDirs = /media/data/roms/ARCADE/ romExts = .zip,.ZIP aliasFile = /media/home/.simplemenu/alias.txt El instalador comentado al principio de este art\u00edculo se encarga tanto de copiar los ficheros necesarios a la ruta indicada antes, como de ajustar los ficheros de definici\u00f3n de sistemas de SimpleMenu para que se llame a los scripts que lanzan el interfaz de ajustes.","title":"RG350 Interfaz xMAME SimpleMenu"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#instalacion","text":"La instalaci\u00f3n se hace por medio de un OPK que sit\u00faa los ficheros necesarios dentro de la ruta donde se encuentra xMAME (en concreto en el subdirectorio /media/data/local/share/xmame/sm_bridge ). Tambi\u00e9n hace las modificaciones autom\u00e1ticamente en los ficheros de configuraci\u00f3n de SimpleMenu. Naturalmente, antes tendremos que tener instalados xMAME y SimpleMenu . El OPK con el instalador se puede descargar desde el siguiente enlace: https://github.com/eduardofilo/RG350_xmame_sm_bridge/releases/download/1.2/xmame_sm_bridge_installer_1.2.opk Una vez instalado en la RG350 (como cualquier otro OPK; ver instrucciones aqu\u00ed en caso de dudas), lo deberemos encontrar en nuestro lanzador en la secci\u00f3n de aplicaciones. Por ejemplo: Una vez instalado lo abriremos y encontraremos un sencillo aviso para confirmar la instalaci\u00f3n seleccionando el bot\u00f3n <Yes> y pulsando Start : Con esto el peque\u00f1o interfaz de ajustes habr\u00e1 quedado instalado.","title":"Instalaci\u00f3n"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#utilizacion","text":"A partir de entonces, al ejecutar una ROM con el sistema xMAME integrado en SimpleMenu, nos aparecer\u00e1 un peque\u00f1o interfaz muy parecido al que muestra el interfaz propio de xMAME justo despu\u00e9s de seleccionar la ROM. Se han replicado los controles de la pantalla de ajustes de xMAME que, al igual que en ella, se indican en la leyenda inferior. B\u00e1sicamente son estos: Arriba/Abajo : Para seleccionar el ajuste que se quiere modificar. Izquierda/Derecha : Para cambiar el valor del ajuste seleccionado. A : Confirmar el arranque del juego. B : Cancelar el arranque del juego, es decir volver a SimpleMenu. Los ajustes, una vez hechos, en el momento de arrancar el juego (no as\u00ed si volvemos atr\u00e1s con B ), se guardan en el mismo fichero que utiliza xMAME. Por tanto los ajustes que hagamos persistir\u00e1n entre distintas sesiones. Adem\u00e1s ser\u00e1n compatibles con los ajustes que hayamos hecho en xMAME. Como se ha mencionado, se muestran los mismos ajustes que en xMAME y el manejo de la pantalla es id\u00e9ntico, pero hay dos excepciones: En el ajuste Video Rotation hay un valor posible adicional. En xMAME los valores posibles eran: Auto , Landscape y Portrait . En este nuevo interfaz el valor Portrait se ha desdoblado en dos: Portrait (L) y Portrait (R) . Esto es as\u00ed porque internamente xMAME soporta dos opciones de pantalla horizontal (girada hacia la izquierda y hacia la derecha). Por alg\u00fan motivo en el interfaz original de xMAME s\u00f3lo se ofrece uno de los dos. Aqu\u00ed pues se muestran los dos. Hay un problema sin embargo y es que el fichero de configuraci\u00f3n donde se almacenan los ajustes para cada juego no soporta este modo adicional Portrait (R) , por lo que si se utiliza, al volver a intentar lanzar el juego nos encontraremos el valor m\u00e1s cercano al seleccionado Portrait (L) . El ajuste Save state no funciona ni siquiera en xMAME (se cierra el emulador al cambiar el valor predeterminado None ), por lo que en esta reimplementaci\u00f3n de la pantalla de ajustes se ha optado por desactivarlo. Por ese motivo aparece en gris.","title":"Utilizaci\u00f3n"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#aspectos-tecnicos","text":"Se mencionan aqu\u00ed los detalles de funcionamiento interno del interfaz de ajustes para quien tenga inter\u00e9s. Si s\u00f3lo te interesa instalarlo y utilizarlo, puedes dejar de leer aqu\u00ed.","title":"Aspectos t\u00e9cnicos"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#analisis-previo","text":"Este interfaz de ajustes para xMAME ha sido posible por la peculiar arquitectura que tiene este emulador. No es como los emuladores habituales en que todo est\u00e1 implementado en un \u00fanico binario o ejecutable (normalmente empaquetado en un OPK, aunque esa no es la clave de la diferencia). xMAME, haciendo honor a su nombre, sigue un poco m\u00e1s la filosof\u00eda UNIX en la que las distintas partes del sistema se encuentran en distintos binarios que se invocan unos a otros lanzando procesos con los par\u00e1metros necesarios. En concreto, xMAME tiene los siguientes binarios principales: /media/data/local/share/xmame/xmame.dge /media/data/local/share/xmame/xmame52/xmame.SDL.52 /media/data/local/share/xmame/xmame69/xmame.SDL.69 /media/data/local/share/xmame/xmame84/xmame.SDL.84 El primero es el interfaz normal (el de la pantalla de fondo verde) que es el que muestra la lista de ROMs de los distintos romsets y la pantalla de ajustes una vez que seleccionamos una ROM: Tras la segunda pantalla se ejecuta el proceso correspondiente al romset elegido al principio, que se corresponde con uno de los tres procesos restantes de la lista anterior. Por ejemplo, tal y como se ha ajustado el juego que se selecciona en los dos pantallazos anteriores, el proceso que se ejecuta finalmente es: xmame.SDL.84 bombjack -ipu_scaler 2 -nodirty -triplebuf -rol As\u00ed pues tenemos todo el poder en nuestras manos para ejecutar una ROM con los ajustes que deseemos siempre que se conozca la correspondencia entre los distintos ajustes con los argumentos a pasar al proceso a la hora de ejecutarlo. Esto fue lo primero que fue necesario hacer. El resultado est\u00e1 codificado en la estructura de datos que se ve a partir de la linea 36 de este fichero fuente: https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/settings.py Como ejemplo vamos a ver c\u00f3mo se interpreta la parte correspondiente al ajuste Video Rotation : { \"file_pos\" : 0 , \"desc\" : \"Video Rotation\" , \"enabled\" : True , \"values\" : [ 0 , 1 , 2 , 3 ], \"descs\" : [ \"Auto\" , \"Landscape\" , \"Portrait (L)\" , \"Portrait (R)\" ], \"args\" : [ \"-autoror\" , \"\" , \"-rol\" , \"-ror\" ], \"value\" : 0 }, Los valores de las claves values , descs y args se corresponden entre s\u00ed seg\u00fan el orden en que aparecen. Es decir: Descripci\u00f3n Auto Landscape Portrait (L) Portrait (R) Valor 0 1 2 3 Argumento -autoror -rol -ror Valor (o values en la codificaci\u00f3n JSON) es el dato que luego se almacena en el peque\u00f1o fichero de configuraci\u00f3n que deja xMAME en los siguientes directorios en funci\u00f3n del romset: /media/data/local/share/xmame/xmame52/frontend /media/data/local/share/xmame/xmame69/frontend /media/data/local/share/xmame/xmame84/frontend Por ejemplo el fichero que aparece cuando configuramos el juego del ejemplo del romset 84 como se ve\u00eda en los pantallazos anteriores es /media/data/local/share/xmame/xmame84/frontend/bombjack.cfg y tiene el siguiente contenido: 2,0,0,0,0,0,0,0,0,0,0,0,0,1,0 El par\u00e1metro file_pos del JSON nos indica en qu\u00e9 posici\u00f3n se almacena el ajuste. Por ejemplo el ajuste Video Rotation que estamos utilizando de ejemplo est\u00e1 en la posici\u00f3n 0 (el primero). Como vemos en el fichero tiene el valor 2 que seg\u00fan la tabla anterior corresponde a Portrait (L) . Finalmente el argumento ser\u00e1 el que se a\u00f1ada a la hora de ejecutar el emulador con la ROM. En el caso del ejemplo ser\u00e1 el argumento -rol que ve\u00edamos en el proceso que se ejecuta al final y que repetimos de nuevo: xmame.SDL.84 bombjack -ipu_scaler 2 -nodirty -triplebuf -rol La forma de averiguar todos los valores posibles fue ajust\u00e1ndolos uno a uno cambiando uno cada vez y analizando el proceso ejecutado al final con el comando ps de Linux.","title":"An\u00e1lisis previo"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#programacion","text":"Una vez reunida toda la informaci\u00f3n lleg\u00f3 el momento de programar. La idea era reproducir de la forma m\u00e1s fiel posible el interfaz de ajustes de la ROM que tiene xMAME. Para la programaci\u00f3n se ha elegido el entorno Python m\u00e1s la librer\u00eda pygame que ofrece primitivas para dibujar en pantalla y controlar eventos (b\u00e1sicamente es una envoltura Python a la librer\u00eda SDL). Ambos se encuentran preinstalados en OpenDingux. El c\u00f3digo puede encontrarse en este repositorio: https://github.com/eduardofilo/RG350_xmame_sm_bridge El programa realizado en Python/pygame tan solo muestra las opciones y permite cambiarlas. Al seleccionar la ROM en SimpleMenu (que le llega como argumento) hace dos cosas: Persiste los ajustes en el fichero de configuraci\u00f3n de xMAME correspondiente (subdirectorio frontend del directorio de cada romset). Genera un fichero /tmp/run que contiene el proceso a ejecutar, es decir el binario del emulador del romset elegido junto a los argumentos correspondientes a los ajustes hechos. Todo esto est\u00e1 envuelto con tres peque\u00f1os shell scripts, uno por cada romset, que son los que se configuran en SimpleMenu en el fichero donde tengamos definido el sistema xMAME. Los tres scripts son los siguientes: https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.52 https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.69 https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.84 Todos los ficheros necesarios deben instalarse en la ruta siguiente en el sistema de la consola: /media/data/local/share/xmame/sm_bridge As\u00ed pues la configuraci\u00f3n de SimpleMenu para integrar este sistema deber\u00eda invocar los scripts anteriores instalados en esta ruta, por ejemplo: [MAME] execs = /media/data/local/share/xmame/sm_bridge/romset.84,/media/data/local/share/xmame/sm_bridge/romset.69,/media/data/local/share/xmame/sm_bridge/romset.52 romDirs = /media/data/roms/ARCADE/ romExts = .zip,.ZIP aliasFile = /media/home/.simplemenu/alias.txt El instalador comentado al principio de este art\u00edculo se encarga tanto de copiar los ficheros necesarios a la ruta indicada antes, como de ajustar los ficheros de definici\u00f3n de sistemas de SimpleMenu para que se llame a los scripts que lanzan el interfaz de ajustes.","title":"Programaci\u00f3n"},{"location":"2020-12-13-rg351_wifi_mod.html","text":"Las primeras unidades vendidas de la consola RG351P tra\u00edan instalado en el interior un m\u00f3dulo Wifi. Concretamente \u00e9ste : En una revisi\u00f3n posterior fue retirado por las interferencias en forma de ruido que provocaba en los altavoces. La PCB de la consola no fue modificada, por lo que sigue vendi\u00e9ndose con el espacio y las conexiones necesarias para montarlo: El m\u00f3dulo original ya no se encuentra a la venta, pero de todas formas pens\u00e9 en instalar mejor uno con antena integrada por su mayor sencillez de instalaci\u00f3n y para evitar colocar m\u00e1s cables en el interior de la consola que pudieran absorber o provocar m\u00e1s interferencias. Buscando por el c\u00f3digo del chipset MT7601UN se encuentran numerosos modelos compatibles (conviene utilizar el mismo chipset para asegurar la compatibilidad de los firmwares de la consola). El elegido en mi caso fue el siguiente: Que se puede encontrar en el siguiente enlace: https://es.aliexpress.com/item/32967895240.html La raz\u00f3n principal para hacer esta modificaci\u00f3n es que necesito con mucha frecuencia tener acceso por red a la consola para utilizar la terminal por SSH. El dongle externo que suelen regalar los vendedores de esta consola, sobresale demasiado y tarde o temprano hubiera podido estropear el puerto al hacer palanca el conjunto dongle+adaptador, adem\u00e1s de tenerlo que poner y quitar continuamente. Por \u00faltimo, dado que esta consola soporta Linux y Android, tengo la idea de hacer una imagen para ella que consista en un sistema completo de escritorio que poder utilizar por SSH/VNC a modo de ordenador port\u00e1til que podr\u00eda llevar siempre encima. En esos casos la conectividad es imprescindible. A continuaci\u00f3n se describe el proceso de instalaci\u00f3n. En todo momento cuando hable de la orientaci\u00f3n de la consola me referir\u00e9 a la vista desde la parte inferior cuando est\u00e1 abierta, es decir \u00e9sta: Lo primero fue encontrar una buena ubicaci\u00f3n. Por el temor a las interferencias pretend\u00eda alejar todo lo posible la antena de los cables de los altavoces y del circuito de audio que sospecho se encuentra en el lado donde est\u00e1 el potenci\u00f3metro de volumen (mismo lado donde se montaba el m\u00f3dulo original). Teniendo en cuenta lo anterior y la situaci\u00f3n de la bater\u00eda as\u00ed como lo despejado de componentes de la PCB de la consola en esa parte, me pareci\u00f3 que el mejor sitio era colocar el m\u00f3dulo en el lado derecho en posici\u00f3n vertical con la antena apuntando hacia arriba y hacia afuera de la consola (hacia la tapa): Para alzar un poco el m\u00f3dulo y aislarlo de los componentes de la PCB utilic\u00e9 tres alturas de cinta de doble cara gruesa (de esa que tiene una tira de espuma de alrededor de 1mm entre las caras adhesivas): En la primera de las tres tiras que utilic\u00e9 hice un corte diagonal para salvar la mayor altura del componente (un transistor creo) que hab\u00eda en esa zona: En realidad esto no es necesario ya que la anchura del m\u00f3dulo queda justo a ras de ese componente, pero era m\u00e1s dif\u00edcil recortar la cinta de doble cara a lo largo que hacer ese corte diagonal. La longitud de las tiras de doble cara ser\u00e1n las adecuadas para dejar la zona de las conexiones al aire. Aqu\u00ed puede verse la disposici\u00f3n final de las tres tiras de cinta y la situaci\u00f3n del m\u00f3dulo: Lo siguiente era fabricar un cable para conectar el m\u00f3dulo. Digo fabricar porque ten\u00eda claro que no quer\u00eda utilizar los t\u00edpicos cables de parcheo de circuitos por el temor a las interferencias. Localic\u00e9 un viejo cable miniUSB-USB de calidad de los muchos que es habitual tener de cuando era un cable que se utilizaba m\u00e1s. Cort\u00e9 una porci\u00f3n de longitud adecuada para pasarlo por la parte inferior de la consola. Como tiene un grosor considerable por estar apantallado (unos 4mm de di\u00e1metro exterior), hab\u00eda que evitar el plano de la bater\u00eda y por esa zona exist\u00eda un canal de espacio vac\u00edo. Tras retirar la pantalla hubo que proteger la salida de los cables con un par de trozos de termoretr\u00e1ctil para aislar los extremos de los hilos de la pantalla que era muy dif\u00edcil recortar completamente: Los cables negro y rojo eran muy gruesos (por ser un cable de calidad) por lo que no pasaban por los peque\u00f1os agujeros de conexi\u00f3n del m\u00f3dulo. As\u00ed pues los de datos (blanco y verde) los sold\u00e9 atravesando y los de alimentaci\u00f3n (negro y rojo) superficialmente: Una vez soldado el cableado al m\u00f3dulo s\u00f3lo quedaba pegarlo sobre el coj\u00edn de tres tiras de cinta de doble cara: Lo \u00faltimo fue encajar el cable y soldar sobre los pads del hueco previsto en la PCB de la consola para el m\u00f3dulo original. Aqu\u00ed hay que estar atento a la correspondencia con los pads del m\u00f3dulo: El codo inferior derecho se puede encajar muy bien aprovechando las aristas de la PCB del stick que hay en ese lado y el conector del altavoz: El m\u00f3dulo ya est\u00e1 instalado. Una comprobaci\u00f3n final antes de cerrar la tapa muestra que funciona:","title":"RG351P Wifi mod"},{"location":"2021-01-16-rg350_ra_installer.html","text":"A finales de diciembre empezaron a aparecer distribuciones oficiales de RetroArch para RG350 y RG280. De momento en versi\u00f3n beta en forma de nightly builds que pueden obtenerse de este sitio para stock/ROGUE o este otro para ODBeta . Los zips que distribuyen contienen un \u00fanico OPK, un binario (opcional) y un directorio (con toda la configuraci\u00f3n y los cores) destinado a copiarse al home de la consola: Una vez que todo est\u00e1 instalado en su sitio, la \u00fanica manera de ejecutar las ROMs con los cores que incluye la distribuci\u00f3n es por medio del \u00fanico OPK que lanza RetroArch a modo frontend (el interfaz UX que suele decirse en otros emuladores): Para lograr una integraci\u00f3n m\u00e1s completa de RetroArch, que respete la experiencia normal de los frontends habituales en RG350/RG280 (GMenu2X, SimpleMenu, PyMenu, EmulationStation, etc.) se pueden crear unos OPKs tipo wrapper que permitan seleccionar las ROMs y lanzar el core de RetroArch correspondiente, ya que el binario opcional admite los mismos argumentos que RetroArch en otras plataformas. Wrappers OPK \u00b6 Para lograrlo, primero hubo que averiguar la forma de parametrizar el core y la ROM. Cargar un core y una ROM desde el propio RetroArch no sirve porque no exterioriza estos datos en forma de argumentos sobre el ejecutable. Lo que se hizo fue suponer que servir\u00eda el mismo formato de argumentos que utiliza el binario retroarch_rg350 (dentro del directorio bin ; en la distribuci\u00f3n correspondiente a ODBeta, el binario es retroarch_rg350_odbeta ) en otros sistemas como EmuELEC en RG351P. All\u00ed el frontend habitual EmulationStation s\u00ed que parametriza el core y la ROM a ejecutar por medio de argumentos en la llamada. Por ejemplo ejecutando Tetris de Game Boy con el core gambatte en EmuELEC sobre RG3551P se encuentra que el proceso se invoca de esta forma: /usr/bin/retroarch -v -L /tmp/cores/gambatte_libretro.so --config /storage/.config/retroarch/retroarch.cfg /storage/roms/gb/Tetris (World) (Rev A).7z Por tanto la idea es por un lado instalar el binario opcional retroarch_rg350 en una ruta accesible (se elige /media/data/local/bin ) y luego construir distintos OPKs que invoque un script al que se le pase como argumento la ROM a ejecutar. Dentro del script podemos montar la llamada completa a retroarch_rg30 . Por ejemplo para el sistema Game Boy el script podr\u00eda ser el siguiente: #!/bin/sh /media/data/local/bin/retroarch_rg350 -v -L /media/data/local/home/.retroarch/cores/gambatte_libretro.so --config /media/data/local/home/.retroarch/retroarch.cfg \" $1 \" Introducimos el script anterior junto con un icono adecuado al sistema que va a lanzar y un .desktop que invoque el script pasando como argumento la ROM que vamos a lanzar, por ejemplo: [Desktop Entry] Name=Nintendo GB (RA) Comment=Nintendo GB in RetroArch Exec=exec.sh %f Terminal=false Type=Application StartupNotify=true Icon=icon Categories=retroarch; X-OD-NeedsDownscaling=true Los cores que ofrece la \u00faltima versi\u00f3n de RetroArch publicada en el momento de actualizar este art\u00edculo (2021-07-04) son los siguientes: Core Sistema Extensiones soportadas Observaciones dosbox_pure_libretro.so DOSBox zip, dosz, exe, com, bat, iso, cue, ins, img, ima, vhd, m3u, m3u8 fbalpha2012_cps1_libretro.so CPS1 zip fbalpha2012_cps2_libretro.so CPS2 zip fbalpha2012_neogeo_libretro.so Neo Geo zip fceumm_libretro.so Nintendo NES fds, nes, unif, unf Disk System necesita BIOS: disksys.rom (md5: ca30b50f880eb660a320674ed365ef7a ) gambatte_libretro.so GB/GBC gb, gbc, dmg BIOS opcional: gb_bios.bin (md5: 32fbbd84168d3482956eb3c5051637f5 ), gbc_bios.bin (md5: dbfce9db9deaa2567f6a84fde55f9680 ) genesis_plus_gx_libretro.so MD, MS, GG, SEGA CD mdx, md, smd, gen, bin, cue, iso, sms, bms, gg, sg, 68k, chd, m3u SEGA CD necesita BIOS: bios_CD_E.bin , bios_CD_U.bin , bios_CD_J.bin genesis_plus_gx_wide_libretro.so MD, MS, GG, SEGA CD mdx, md, smd, gen, bin, cue, iso, sms, bms, gg, sg, 68k, chd, m3u SEGA CD necesita BIOS: bios_CD_E.bin , bios_CD_U.bin , bios_CD_J.bin gpsp_libretro.so GBA gba, bin BIOS opcional: gba_bios.bin (md5: a860e8c0b6d573d191e4ec7db1b1e4f6 ) handy_libretro.so LYNX lnx, o Necesita BIOS: lynxboot.img (md5: fcd403db69f54290b51035d82f835e7b ) mame2003_libretro.so MAME2003 zip mame2003_plus_libretro.so MAME2003 zip mednafen_pce_fast_libretro.so PCE, PCE CD pce, cue, ccd, chd, toc, m3u PCE CD necesita BIOS: syscard3.pce (md5: 38179df8f4ac870017db21ebcbf53114 ) mednafen_wswan_libretro.so WS ws, wsc, pc2 mgba_libretro.so GBA gb, gbc, gba BIOS opcional: gba_bios.bin (md5: a860e8c0b6d573d191e4ec7db1b1e4f6 ) mrboom_libretro.so MrBoom o2em_libretro.so Magnavox Odyssey2, Phillips Videopac+ bin Necesita BIOS: o2rom.bin (md5: 562d5ebf9e030a40d6fabfc2f33139fd ) picodrive_libretro.so MD, MS, SEGA CD, SEGA 32X bin, gen, smd, md, 32x, chd, cue, iso, sms, 68k, m3u SEGA CD necesita BIOS: bios_CD_U.bin (md5: 2efd74e3232ff260e371b99f84024f7f ), bios_CD_E.bin (md5: e66fa1dc5820d254611fdcdba0662372 ), bios_CD_J.bin (md5: 278a9397d192149e84e820ac621a8edd ) pokemini_libretro.so POKEMINI min Necesita BIOS: bios.min (md5: 1e4fb124a3a886865acb574f388c803d ) potator_libretro.so Watara Supervision bin, sv prboom_libretro.so DOOM wad, iwad, pwad Necesita ficheros de juego prosystem_libretro.so Atari 7800 a78, bin BIOS opcional: 7800 BIOS (U).rom (md5: 0763f1ffb006ddbe32e52d497ee848ae ) quicknes_libretro.so NES nes race_libretro.so NGP ngp, ngc, ngpc, npc scummvm_libretro.so ScummVM snes9x2005_libretro.so SNES smc, fig, sfc, gd3, gd7, dx2, bsx, swc snes9x2005_plus_libretro.so SNES smc, fig, sfc, gd3, gd7, dx2, bsx, swc stella2014_libretro.so Atari 2600 a26, bin tic80_libretro.so TIC-80 tic tyrquake_libretro.so QUAKE pak Necesita ficheros de juego vice_x64_libretro.so C64 d64, d71, d80, d81, d82, g64, g41, x64, t64, tap, prg, p00, crt, bin, zip, gz, d6z, d7z, d8z, g6z, g4z, x6z, cmd, m3u, vfl, vsf, nib, nbz, d2m, d4m Adicionalmente, se ha incluido la compilaci\u00f3n de cores no oficiales hecha por Poligraf ( ADVERTENCIA : esta compilaci\u00f3n es un experimento de su autor; algunos cores como hatari o puae no han sido testeados; el feedback es bienvenido). Esto implica que se han a\u00f1adido los siguientes cores a la lista anterior: Core Sistema Extensiones soportadas Observaciones 2048_libretro.so 2048 81_libretro.so Sinclair ZX81 p, tzx, t81 atari800_libretro.so Atari 5200 xfd,atr,cdm,cas,bin,a52,zip,atx,car,com,xex Necesita BIOS para emular Atari5200: 5200.rom (md5: 281f20ea4320404ec820fb7ec0693b38 ) bk_libretro.so Elektronika - BK-0010/BK-0011 bin Needs BIOS (model BK-0010 ): bk/BASIC10.ROM (md5: 3fa774326d75410a065659aea80252f0 ), bk/FOCAL10.ROM (md5: 5737f972e8638831ab71e9139abae052 ), bk/MONIT10.ROM (md5: 95f8c41c6abf7640e35a6a03cecebd01 ). Unsupported video mode en stock/ROGUE. bluemsx_libretro.so MSX, MSX2 rom,ri,mx1,mx2,col,dsk,cas,sg,sc,m3u Necesita BIOS en directorio .retroarch/system/Machines cannonball_libretro.so SEGA Outrun game, 88 Necesita ficheros de juego y un fichero dummy con la extensi\u00f3n .game cap32_libretro.so Amstrad CPC dsk, sna, zip, tap, cdt, voc, cpr, m3u crocods_libretro.so Amstrad CPC dsk,sna,kcr dinothawr_libretro.so Dinothawr game Necesita ficheros de juego fmsx_libretro.so MSX, MSX2 rom,mx1,mx2,dsk,cas Necesita BIOS: MSX.ROM (md5: 364a1a579fe5cb8dba54519bcfcdac0d ), MSX2.ROM (md5: ec3a01c91f24fbddcbcab0ad301bc9ef ), MSX2EXT.ROM (md5: 2183c2aff17cf4297bdb496de78c2e8a ), MSX2P.ROM (md5: 847cc025ffae665487940ff2639540e5 ), MSX2PEXT.ROM (md5: 7c8243c71d8f143b2531f01afa6a05dc ). Unsupported video mode en RG280/ODBeta. freechaf_libretro.so Fairchild ChannelF bin, chf Necesita BIOS: sl31253.bin (md5: ac9804d4c0e9d07e33472e3726ed15c3 ), sl31254.bin (md5: da98f4bb3242ab80d76629021bb27585 ), sl90025.bin (md5: 95d339631d867c8f1d15a5f2ec26069d ) frodo_libretro.so Commodore 64 d64,t64,x64,p00,lnx,zip fuse_libretro.so Sinclair ZX Spectrum tzx, tap, z80, rzx, scl, trd, dsk gme_libretro.so Game Music Emu ay, gbs, gym, hes, kss, nsf, nsfe, sap, spc, vgm, vgz, zip gw_libretro.so Nintendo Game&Watch mgw Unsupported video mode en algunos juegos sobre stock/ROGUE, pero pulsando algunas teclas a veces funcionan hatari_libretro.so Atari ST st, msa, zip, stx, dim, ipf, m3u Necesita BIOS: tos.img (md5: c1c57ce48e8ee4135885cee9e63a68a2 ). Configuraci\u00f3n complicada a causa del unsupported video mode. Conseguido cierto \u00e9xito con ODBeta, pero no con stock/ROGUE. lowresnx_libretro.so LowRes NX nx mednafen_vb_libretro.so Nintendo Virtual Boy vb, vboy, bin Rendimiento pobre mu_libretro.so Palm prc,pqa,img Necesita BIOS: palmos41-en-m515.rom (md5: 83cb1d1c76e568b916dc2e7c0bf669f6 ). Necesita un stick para manejar el stylus, por lo que no funciona sobre RG280V. nekop2_libretro.so NEC PC-98 d98,zip,98d,fdi,fdd,2hd,tfd,d88,88d,hdm,xdf,dup,cmd,hdi,thd,nhd,hdd No he conseguido hacerlo funcionar. Puede que necesite algunas BIOS . nxengine_libretro.so Cave Story exe Necesita ficheros de juego pcsx_rearmed_libretro.so PlayStation bin,cue,img,mdf,pbp,toc,cbn,m3u,ccd,chd Rendimiento pobre pocketcdg_libretro.so PocketCDG cdg puae_libretro.so Commodore Amiga adf, adz, dms, fdi, ipf, hdf, hdz, lha, slave, info, cue, ccd, nrg, mds, iso, chd, uae, m3u, zip, 7z Necesita BIOS: kick34005.A500 (md5: 82a21c1890cae844b3df741f2762d48d ) quasi88_libretro.so NEC PC-88 d88,u88,m3u Necesita BIOS: quasi88/n88.rom , quasi88/n88_0.rom reminiscence_libretro.so Flashback map, aba, seq, lev Necesita ficheros de juego. No he conseguido hacerlo funcionar. stonesoup_libretro.so Dungeon Crawl Stone Soup crawlrc Necesita ficheros de juego and an empty file game.crawlrc (instructions here ). Unsupported video mode sobre RG280/stock/ROGUE, reinicios sobre ODBeta. theodore_libretro.so Thomson - MO/TO fd, sap, k7, m7, m5, rom Configuraci\u00f3n complicada debido a unsupported video mode. Conseguido cierto \u00e9xito con el modelo MO5 sobre ODBeta, pero no sobre stock/ROGUE. uzem_libretro.so Uzebox uze Rendimiento pobre vecx_libretro.so Vectrex bin,vec x1_libretro.so Sharp X1 dx1,zip,2d,2hd,tfd,d88,88d,hdm,xdf,dup,tap,cmd Necesita BIOS: xmil/IPLROM.X1 (md5: eeeea1cd29c6e0e8b094790ae969bfa7 ), xmil/IPLROM.X1T (md5: 851e4a5936f17d13f8c39a980cf00d77 ) Por lo tanto habr\u00e1 que hacer al menos un OPK para cada uno de ellos. Decimos al menos porque se puede plantear la opci\u00f3n de hacer un OPK por cada combinaci\u00f3n \"core/sistema a emular\". Instalador \u00b6 Como son varias las piezas necesarias para que funcione el conjunto, se ha creado un instalador para instalar de una sola vez todo lo necesario. En concreto el instalador integra: 37+31 (oficial+no oficial) OPKs para lanzar de manera independiente desde distintos frontends (GMenu2X, SimpleMenu, PyMenu, EmulationStation, etc) los distintos cores seleccionando previamente la ROM. Binario retroarch_rg350 (o retroarch_rg350_odbeta para ODBeta) en localizaci\u00f3n com\u00fan ( /media/data/local/bin ) para no tener que repetirlo dentro de los OPKs anteriores. Configuraciones de todos los cores diferenciados por pantalla, es decir se instalan unas configuraciones adecuadas para 320x240 o para 640x480 en funci\u00f3n de la pantalla detectada. Las configuraciones se han adoptado de las recomendaciones de Retro Game Corps en esta gu\u00eda . Filtros de GMenu2X por extensi\u00f3n para cada sistema. Secci\u00f3n nueva con el icono de RetroArch en todos los skins instalados en GMenu2X donde aparecen todos los lanzadores de los OPKs. Cuando se lanza, pregunta por dos opciones que est\u00e1n desactivadas por defecto: Install config: Para instalar las configuraciones comentadas en el tercer punto de la lista anterior. Se recomienda instalar las configuraciones la primera vez y no instalarlas en reinstalaciones posteriores para evitar la p\u00e9rdida de los ajustes personales hechos sobre la configuraci\u00f3n b\u00e1sica. Install unofficial cores: Para instalar los 31 nuevos pero no oficiales cores compilados por Poligraf . El OPK con el instalador puede obtenerse en las releases de este repositorio . Hotkeys \u00b6 En el fichero de configuraci\u00f3n de RetroArch que instala el instalador, se han definido los siguientes controles: Funci\u00f3n Shortcut Pausa Select + A Reset Select + B Men\u00fa RetroArch Select + X Avance r\u00e1pido Select + Y Guardar savestate Select + R1 Cargar savestate Select + L1 Cambiar disco Select + R2 Abrir bandeja CD Select + L2 Cerrar juego Select + Start Cambiar slot savestate Select + \u2190\u2192 Cambiar volumen Select + \u2191\u2193 Canal Telegram \u00b6 Se ha creado este canal de Telegram para comunicar m\u00e1s f\u00e1cilmente las actualizaciones de este instalador: https://t.me/RG350_ra_installer","title":"RG350 Instalador RA"},{"location":"2021-01-16-rg350_ra_installer.html#wrappers-opk","text":"Para lograrlo, primero hubo que averiguar la forma de parametrizar el core y la ROM. Cargar un core y una ROM desde el propio RetroArch no sirve porque no exterioriza estos datos en forma de argumentos sobre el ejecutable. Lo que se hizo fue suponer que servir\u00eda el mismo formato de argumentos que utiliza el binario retroarch_rg350 (dentro del directorio bin ; en la distribuci\u00f3n correspondiente a ODBeta, el binario es retroarch_rg350_odbeta ) en otros sistemas como EmuELEC en RG351P. All\u00ed el frontend habitual EmulationStation s\u00ed que parametriza el core y la ROM a ejecutar por medio de argumentos en la llamada. Por ejemplo ejecutando Tetris de Game Boy con el core gambatte en EmuELEC sobre RG3551P se encuentra que el proceso se invoca de esta forma: /usr/bin/retroarch -v -L /tmp/cores/gambatte_libretro.so --config /storage/.config/retroarch/retroarch.cfg /storage/roms/gb/Tetris (World) (Rev A).7z Por tanto la idea es por un lado instalar el binario opcional retroarch_rg350 en una ruta accesible (se elige /media/data/local/bin ) y luego construir distintos OPKs que invoque un script al que se le pase como argumento la ROM a ejecutar. Dentro del script podemos montar la llamada completa a retroarch_rg30 . Por ejemplo para el sistema Game Boy el script podr\u00eda ser el siguiente: #!/bin/sh /media/data/local/bin/retroarch_rg350 -v -L /media/data/local/home/.retroarch/cores/gambatte_libretro.so --config /media/data/local/home/.retroarch/retroarch.cfg \" $1 \" Introducimos el script anterior junto con un icono adecuado al sistema que va a lanzar y un .desktop que invoque el script pasando como argumento la ROM que vamos a lanzar, por ejemplo: [Desktop Entry] Name=Nintendo GB (RA) Comment=Nintendo GB in RetroArch Exec=exec.sh %f Terminal=false Type=Application StartupNotify=true Icon=icon Categories=retroarch; X-OD-NeedsDownscaling=true Los cores que ofrece la \u00faltima versi\u00f3n de RetroArch publicada en el momento de actualizar este art\u00edculo (2021-07-04) son los siguientes: Core Sistema Extensiones soportadas Observaciones dosbox_pure_libretro.so DOSBox zip, dosz, exe, com, bat, iso, cue, ins, img, ima, vhd, m3u, m3u8 fbalpha2012_cps1_libretro.so CPS1 zip fbalpha2012_cps2_libretro.so CPS2 zip fbalpha2012_neogeo_libretro.so Neo Geo zip fceumm_libretro.so Nintendo NES fds, nes, unif, unf Disk System necesita BIOS: disksys.rom (md5: ca30b50f880eb660a320674ed365ef7a ) gambatte_libretro.so GB/GBC gb, gbc, dmg BIOS opcional: gb_bios.bin (md5: 32fbbd84168d3482956eb3c5051637f5 ), gbc_bios.bin (md5: dbfce9db9deaa2567f6a84fde55f9680 ) genesis_plus_gx_libretro.so MD, MS, GG, SEGA CD mdx, md, smd, gen, bin, cue, iso, sms, bms, gg, sg, 68k, chd, m3u SEGA CD necesita BIOS: bios_CD_E.bin , bios_CD_U.bin , bios_CD_J.bin genesis_plus_gx_wide_libretro.so MD, MS, GG, SEGA CD mdx, md, smd, gen, bin, cue, iso, sms, bms, gg, sg, 68k, chd, m3u SEGA CD necesita BIOS: bios_CD_E.bin , bios_CD_U.bin , bios_CD_J.bin gpsp_libretro.so GBA gba, bin BIOS opcional: gba_bios.bin (md5: a860e8c0b6d573d191e4ec7db1b1e4f6 ) handy_libretro.so LYNX lnx, o Necesita BIOS: lynxboot.img (md5: fcd403db69f54290b51035d82f835e7b ) mame2003_libretro.so MAME2003 zip mame2003_plus_libretro.so MAME2003 zip mednafen_pce_fast_libretro.so PCE, PCE CD pce, cue, ccd, chd, toc, m3u PCE CD necesita BIOS: syscard3.pce (md5: 38179df8f4ac870017db21ebcbf53114 ) mednafen_wswan_libretro.so WS ws, wsc, pc2 mgba_libretro.so GBA gb, gbc, gba BIOS opcional: gba_bios.bin (md5: a860e8c0b6d573d191e4ec7db1b1e4f6 ) mrboom_libretro.so MrBoom o2em_libretro.so Magnavox Odyssey2, Phillips Videopac+ bin Necesita BIOS: o2rom.bin (md5: 562d5ebf9e030a40d6fabfc2f33139fd ) picodrive_libretro.so MD, MS, SEGA CD, SEGA 32X bin, gen, smd, md, 32x, chd, cue, iso, sms, 68k, m3u SEGA CD necesita BIOS: bios_CD_U.bin (md5: 2efd74e3232ff260e371b99f84024f7f ), bios_CD_E.bin (md5: e66fa1dc5820d254611fdcdba0662372 ), bios_CD_J.bin (md5: 278a9397d192149e84e820ac621a8edd ) pokemini_libretro.so POKEMINI min Necesita BIOS: bios.min (md5: 1e4fb124a3a886865acb574f388c803d ) potator_libretro.so Watara Supervision bin, sv prboom_libretro.so DOOM wad, iwad, pwad Necesita ficheros de juego prosystem_libretro.so Atari 7800 a78, bin BIOS opcional: 7800 BIOS (U).rom (md5: 0763f1ffb006ddbe32e52d497ee848ae ) quicknes_libretro.so NES nes race_libretro.so NGP ngp, ngc, ngpc, npc scummvm_libretro.so ScummVM snes9x2005_libretro.so SNES smc, fig, sfc, gd3, gd7, dx2, bsx, swc snes9x2005_plus_libretro.so SNES smc, fig, sfc, gd3, gd7, dx2, bsx, swc stella2014_libretro.so Atari 2600 a26, bin tic80_libretro.so TIC-80 tic tyrquake_libretro.so QUAKE pak Necesita ficheros de juego vice_x64_libretro.so C64 d64, d71, d80, d81, d82, g64, g41, x64, t64, tap, prg, p00, crt, bin, zip, gz, d6z, d7z, d8z, g6z, g4z, x6z, cmd, m3u, vfl, vsf, nib, nbz, d2m, d4m Adicionalmente, se ha incluido la compilaci\u00f3n de cores no oficiales hecha por Poligraf ( ADVERTENCIA : esta compilaci\u00f3n es un experimento de su autor; algunos cores como hatari o puae no han sido testeados; el feedback es bienvenido). Esto implica que se han a\u00f1adido los siguientes cores a la lista anterior: Core Sistema Extensiones soportadas Observaciones 2048_libretro.so 2048 81_libretro.so Sinclair ZX81 p, tzx, t81 atari800_libretro.so Atari 5200 xfd,atr,cdm,cas,bin,a52,zip,atx,car,com,xex Necesita BIOS para emular Atari5200: 5200.rom (md5: 281f20ea4320404ec820fb7ec0693b38 ) bk_libretro.so Elektronika - BK-0010/BK-0011 bin Needs BIOS (model BK-0010 ): bk/BASIC10.ROM (md5: 3fa774326d75410a065659aea80252f0 ), bk/FOCAL10.ROM (md5: 5737f972e8638831ab71e9139abae052 ), bk/MONIT10.ROM (md5: 95f8c41c6abf7640e35a6a03cecebd01 ). Unsupported video mode en stock/ROGUE. bluemsx_libretro.so MSX, MSX2 rom,ri,mx1,mx2,col,dsk,cas,sg,sc,m3u Necesita BIOS en directorio .retroarch/system/Machines cannonball_libretro.so SEGA Outrun game, 88 Necesita ficheros de juego y un fichero dummy con la extensi\u00f3n .game cap32_libretro.so Amstrad CPC dsk, sna, zip, tap, cdt, voc, cpr, m3u crocods_libretro.so Amstrad CPC dsk,sna,kcr dinothawr_libretro.so Dinothawr game Necesita ficheros de juego fmsx_libretro.so MSX, MSX2 rom,mx1,mx2,dsk,cas Necesita BIOS: MSX.ROM (md5: 364a1a579fe5cb8dba54519bcfcdac0d ), MSX2.ROM (md5: ec3a01c91f24fbddcbcab0ad301bc9ef ), MSX2EXT.ROM (md5: 2183c2aff17cf4297bdb496de78c2e8a ), MSX2P.ROM (md5: 847cc025ffae665487940ff2639540e5 ), MSX2PEXT.ROM (md5: 7c8243c71d8f143b2531f01afa6a05dc ). Unsupported video mode en RG280/ODBeta. freechaf_libretro.so Fairchild ChannelF bin, chf Necesita BIOS: sl31253.bin (md5: ac9804d4c0e9d07e33472e3726ed15c3 ), sl31254.bin (md5: da98f4bb3242ab80d76629021bb27585 ), sl90025.bin (md5: 95d339631d867c8f1d15a5f2ec26069d ) frodo_libretro.so Commodore 64 d64,t64,x64,p00,lnx,zip fuse_libretro.so Sinclair ZX Spectrum tzx, tap, z80, rzx, scl, trd, dsk gme_libretro.so Game Music Emu ay, gbs, gym, hes, kss, nsf, nsfe, sap, spc, vgm, vgz, zip gw_libretro.so Nintendo Game&Watch mgw Unsupported video mode en algunos juegos sobre stock/ROGUE, pero pulsando algunas teclas a veces funcionan hatari_libretro.so Atari ST st, msa, zip, stx, dim, ipf, m3u Necesita BIOS: tos.img (md5: c1c57ce48e8ee4135885cee9e63a68a2 ). Configuraci\u00f3n complicada a causa del unsupported video mode. Conseguido cierto \u00e9xito con ODBeta, pero no con stock/ROGUE. lowresnx_libretro.so LowRes NX nx mednafen_vb_libretro.so Nintendo Virtual Boy vb, vboy, bin Rendimiento pobre mu_libretro.so Palm prc,pqa,img Necesita BIOS: palmos41-en-m515.rom (md5: 83cb1d1c76e568b916dc2e7c0bf669f6 ). Necesita un stick para manejar el stylus, por lo que no funciona sobre RG280V. nekop2_libretro.so NEC PC-98 d98,zip,98d,fdi,fdd,2hd,tfd,d88,88d,hdm,xdf,dup,cmd,hdi,thd,nhd,hdd No he conseguido hacerlo funcionar. Puede que necesite algunas BIOS . nxengine_libretro.so Cave Story exe Necesita ficheros de juego pcsx_rearmed_libretro.so PlayStation bin,cue,img,mdf,pbp,toc,cbn,m3u,ccd,chd Rendimiento pobre pocketcdg_libretro.so PocketCDG cdg puae_libretro.so Commodore Amiga adf, adz, dms, fdi, ipf, hdf, hdz, lha, slave, info, cue, ccd, nrg, mds, iso, chd, uae, m3u, zip, 7z Necesita BIOS: kick34005.A500 (md5: 82a21c1890cae844b3df741f2762d48d ) quasi88_libretro.so NEC PC-88 d88,u88,m3u Necesita BIOS: quasi88/n88.rom , quasi88/n88_0.rom reminiscence_libretro.so Flashback map, aba, seq, lev Necesita ficheros de juego. No he conseguido hacerlo funcionar. stonesoup_libretro.so Dungeon Crawl Stone Soup crawlrc Necesita ficheros de juego and an empty file game.crawlrc (instructions here ). Unsupported video mode sobre RG280/stock/ROGUE, reinicios sobre ODBeta. theodore_libretro.so Thomson - MO/TO fd, sap, k7, m7, m5, rom Configuraci\u00f3n complicada debido a unsupported video mode. Conseguido cierto \u00e9xito con el modelo MO5 sobre ODBeta, pero no sobre stock/ROGUE. uzem_libretro.so Uzebox uze Rendimiento pobre vecx_libretro.so Vectrex bin,vec x1_libretro.so Sharp X1 dx1,zip,2d,2hd,tfd,d88,88d,hdm,xdf,dup,tap,cmd Necesita BIOS: xmil/IPLROM.X1 (md5: eeeea1cd29c6e0e8b094790ae969bfa7 ), xmil/IPLROM.X1T (md5: 851e4a5936f17d13f8c39a980cf00d77 ) Por lo tanto habr\u00e1 que hacer al menos un OPK para cada uno de ellos. Decimos al menos porque se puede plantear la opci\u00f3n de hacer un OPK por cada combinaci\u00f3n \"core/sistema a emular\".","title":"Wrappers OPK"},{"location":"2021-01-16-rg350_ra_installer.html#instalador","text":"Como son varias las piezas necesarias para que funcione el conjunto, se ha creado un instalador para instalar de una sola vez todo lo necesario. En concreto el instalador integra: 37+31 (oficial+no oficial) OPKs para lanzar de manera independiente desde distintos frontends (GMenu2X, SimpleMenu, PyMenu, EmulationStation, etc) los distintos cores seleccionando previamente la ROM. Binario retroarch_rg350 (o retroarch_rg350_odbeta para ODBeta) en localizaci\u00f3n com\u00fan ( /media/data/local/bin ) para no tener que repetirlo dentro de los OPKs anteriores. Configuraciones de todos los cores diferenciados por pantalla, es decir se instalan unas configuraciones adecuadas para 320x240 o para 640x480 en funci\u00f3n de la pantalla detectada. Las configuraciones se han adoptado de las recomendaciones de Retro Game Corps en esta gu\u00eda . Filtros de GMenu2X por extensi\u00f3n para cada sistema. Secci\u00f3n nueva con el icono de RetroArch en todos los skins instalados en GMenu2X donde aparecen todos los lanzadores de los OPKs. Cuando se lanza, pregunta por dos opciones que est\u00e1n desactivadas por defecto: Install config: Para instalar las configuraciones comentadas en el tercer punto de la lista anterior. Se recomienda instalar las configuraciones la primera vez y no instalarlas en reinstalaciones posteriores para evitar la p\u00e9rdida de los ajustes personales hechos sobre la configuraci\u00f3n b\u00e1sica. Install unofficial cores: Para instalar los 31 nuevos pero no oficiales cores compilados por Poligraf . El OPK con el instalador puede obtenerse en las releases de este repositorio .","title":"Instalador"},{"location":"2021-01-16-rg350_ra_installer.html#hotkeys","text":"En el fichero de configuraci\u00f3n de RetroArch que instala el instalador, se han definido los siguientes controles: Funci\u00f3n Shortcut Pausa Select + A Reset Select + B Men\u00fa RetroArch Select + X Avance r\u00e1pido Select + Y Guardar savestate Select + R1 Cargar savestate Select + L1 Cambiar disco Select + R2 Abrir bandeja CD Select + L2 Cerrar juego Select + Start Cambiar slot savestate Select + \u2190\u2192 Cambiar volumen Select + \u2191\u2193","title":"Hotkeys"},{"location":"2021-01-16-rg350_ra_installer.html#canal-telegram","text":"Se ha creado este canal de Telegram para comunicar m\u00e1s f\u00e1cilmente las actualizaciones de este instalador: https://t.me/RG350_ra_installer","title":"Canal Telegram"},{"location":"2021-01-19-retroconsolas.html","text":"En este art\u00edculo vamos a responder a las preguntas frecuentes que suelen surgir al comparar estas dos consolas de emulaci\u00f3n de videojuegos retro. \u00bfQu\u00e9 modelos merecen la pena? \u00b6 Este tipo de consolas se han popularizado en los \u00faltimos a\u00f1os y unos cuantos fabricantes en China han producido numerosos modelos en un espectro de precio y prestaciones muy grande ( aqu\u00ed puede consultarse un listado enorme). En este art\u00edculo vamos a centrarnos en los modelos RG350 (y sus variantes P y M) y RG351 (tambi\u00e9n en variantes P y M) ya que son seguramente los modelos m\u00e1s populares. Cuando hablemos de RG350 sin letra final, nos referiremos a los tres modelos (original, P y M). De la misma forma, cuando hablemos de RG351, nos referiremos a los dos modelos (P y M). \u00bfQu\u00e9 caracter\u00edsticas tienen las consolas RG350 y RG351? \u00b6 RG350 \u00b6 Procesador: Ingenic JZ4770 MIPS Velocidad: 1GHz Cores: 1 Ranuras tarjeta de memoria: 2 Memoria: 512MB Pantalla 3,5\" relaci\u00f3n aspecto: 4:3 Modelo original y P: 320x240 px Modelo M: 640x480 px RG351 \u00b6 Procesador: RockChip RK3326 ARM Velocidad: 1,3-1,5GHz Cores: 4 Ranuras tarjeta de memoria: 1 Memoria: 1024MB Pantalla 3,5\" relaci\u00f3n aspecto: 3:2 Modelo P: 480x320 px Modelo M: 480x320 px En cuesti\u00f3n de rendimiento la RG351 es superior a la RG350, pero a pesar de lo que parezcan sugerir los n\u00fameros, la primera no llega a duplicar el rendimiento de la primera. Medido en base a los sistemas que son capaces de emular, podr\u00edamos decir que RG350 se queda en PlayStation 1 y RG351 se atreve con algunos juegos (no todos) de Nintendo 64, Dreamcast, Sony PSP y Nintendo DS. El siguiente gr\u00e1fico es una modificaci\u00f3n de un original de Retro Game Corps (se puede ver aqu\u00ed ) donde se han dejado \u00fanicamente los sistemas que mueven las dos consolas que nos interesan aqu\u00ed: Por \u00faltimo se recomienda ver los siguientes videos donde se comparan varias consolas: \u00bfQu\u00e9 modelos llevan Wifi? \u00b6 RG350: No llevan, pero funcionan algunos modelos de pinchos USB como \u00e9ste . RG351P: No lleva, pero funcionan algunos modelos de pinchos USB como este . Los vendedores suelen incluirlo con la consola. RG351M: Lleva un m\u00f3dulo integrado en el interior. \u00bfPara qu\u00e9 sirve que la consola lleve Wifi? \u00b6 RG350: Poca utilidad. Hay unos pocos emuladores que soportan juego en red, pero son realmente pocos. Facilita algo la actualizaci\u00f3n de emuladores y el sistema con ciertas utilidades, pero realmente son cosas que se pueden hacer por otros medios. RG351: El sistema RetroArch y el frontend EmulationStation que se utiliza pr\u00e1cticamente en todos los sistemas/firmwares aparecidos para esta m\u00e1quina, s\u00ed sacan partido de la conexi\u00f3n a la red para descargar car\u00e1tulas y videos de los juegos, los propios juegos y actualizar los emuladores o el sistema entero. \u00bfLas consolas llevan ROMs? \u00b6 Depende del vendedor. En teor\u00eda es ilegar vender productos con ROMs que tienen derechos de autor (la inmensa mayor\u00eda). A pesar de ello, aunque los vendedores no declaran incluir las ROMs en las fichas de producto, suelen venir con ellas. Aqu\u00ed hay diferencia entre los dos tipos de consola: RG350: Al tener dos ranuras, la denominada INT (porque en el modelo original era interna) se dedica al sistema. Aqu\u00ed no suelen incluir ROMs, s\u00ed los emuladores. En caso de ofrecer la consola con ROMs los vendedores las ponen en la ranura EXT. Por tanto cuando el vendedor nos ofrece la posibilidad de comprar la consola con una segunda tarjeta, en realidad lo que nos est\u00e1 ofreciendo son las ROMs. RG351: Al tener una \u00fanica ranura, donde tiene que ponerse todo (sistema, emuladores y ROMs), lo habitual es que esta consola venga siempre con ROMs. \u00bfC\u00f3mo se a\u00f1aden ROMs? \u00b6 RG350: Al tener dos ranuras para tarjeta microSD, lo m\u00e1s pr\u00e1ctico es a\u00f1adirlas en la ranura marcada como EXT. Esta tarjeta puede estar en formato FAT32, es decir el formato en el que vienen formateadas normalmente las tarjetas reci\u00e9n compradas. Las ROMs en esa tarjeta pueden colocarse en cualquier lugar ya que m\u00e1s tarde cuando abramos un emulador, normalmente nos mostrar\u00e1 un explorador de archivos para localizar las ROMs donde las tengamos. Si se ha seguido el consejo de instalarlas en la tarjeta EXT, se encontrar\u00e1n a partir de la ruta /media/sdcard que es donde se monta esa tarjeta en el arbol de directorios del sistema. ROGUE adem\u00e1s del FAT32 soporta el formato exFAT, un formato m\u00e1s moderno que suele utilizarse en las tarjetas de gran capacidad. M\u00e1s detalles aqu\u00ed . RG351: Aunque en esta consola s\u00f3lo tenemos una tarjeta, lo normal es que est\u00e9 particionada de manera que las ROMs se alojen en una partici\u00f3n de tipo FAT32 o exFAT, por lo que normalmente si pinchamos la tarjeta en el PC con un lector de tarjetas, podremos copiar las ROMs a esa partici\u00f3n sin m\u00e1s que arrastrar. Hay alternativas como conectar la consola a la red (con un adaptador Wifi en el caso del modelo P o directamente con el modelo M ya que lleva el adaptador integrado) y activar alg\u00fan sistema para compartir los archivos de la consola (depender\u00e1 del sistema y versi\u00f3n que tengamos instalado). En general lo m\u00e1s c\u00f3modo y r\u00e1pido es pinchar la tarjeta en el PC. \u00bfMerece la pena comprar la consola con tarjeta microSD con juegos? (RG350) \u00b6 Las tarjetas microSD que llevan estas consolas tienen una calidad muy justita. En la RG350 suele venir una tarjeta Toshiba en la ranura INT. Es muy frecuente que esa tarjeta d\u00e9 problemas al flashear (grabar) un firmware alternativo. En esta consola la tarjeta EXT tampoco es de calidad, por lo que si se adquiere con la idea de conseguir una colecci\u00f3n de ROMs (ver duda anterior), lo m\u00e1s probable es que haya que transferirlas a otra. Incluso no es infrecuente que no puedan copiarse todas las ROMs por problemas de formato en la tarjeta recibida. Adem\u00e1s las colecciones de juegos que suelen venir en estas tarjetas son recopilaciones mal ordenadas y en localizaciones de otros paises. En general se recomienda ahorrar el extra de coste de comprar la consola con tarjeta para ROMs. Mejor buscarlas por uno mismo. \u00bfTengo que actualizar el sistema de la consola nada m\u00e1s recibirla? \u00b6 Necesario no es. Forma parte del entretenimiento para muchos de nosotros, pero la consola llegar\u00e1 con un sistema completamente funcional. Es cierto que existen normalmente varios firmwares alternativos (se suelen llamar Custom Firmwares o CFW), sobre todo en el caso de las RG351. Es otra de las aficiones que se pueden desarrollar sobre estas consolas al tener una arquitectura muy abierta. Suelen crearse comunidades de desarrollo y sus usuarios nos beneficiamos de ello. Es cierto que instalar un firmware alternativo en estas m\u00e1quinas tiene un riesgo m\u00ednimo, dado que todo lo \"estropeable\" se encuentra en las tarjetas microSD, por lo que en caso de problemas siempre se van a solucionar cambiando la tarjeta. Digamos que no son consolas f\u00e1ciles de \"brickear\" (ver Diccionario de t\u00e9rminos ). A pesar de ello, si est\u00e1s leyendo estas preguntas/respuestas mi consejo es que, para evitar frustraciones, utilices la consola tal y como se recibe de f\u00e1brica al menos durante un tiempo mientras vas adquiriendo conocimientos. Los juegos que funcionen, que van a ser miles (seguramente todos los que traiga la consola si viene con ellos) lo van a hacer de la misma forma en el firmware original. Si a\u00fan as\u00ed te animas a instalar un CFW, tras o\u00edr las ventajas que tiene tal o cual distribuci\u00f3n, como dec\u00edamos antes, todo est\u00e1 en la tarjeta (la INT en la RG350 y la \u00fanica que tiene la RG351), por lo que siempre podemos reservar la tarjeta original tal cual est\u00e1 e instalar el CFW sobre una tarjeta nueva. De esa forma, a modo de cartucho, cuando queramos cambiar de un sistema a otro s\u00f3lo tendremos que cambiar la microSD. \u00bfQu\u00e9 sistemas o firmwares existen para estas consolas? \u00b6 RG350: Sistema base o stock. Se puede encontrar aqu\u00ed . Es el \u00fanico en el que funciona el HDMI aunque con problemas. ROGUE: El sistema que recomendamos aqu\u00ed. Se puede encontrar aqu\u00ed . OpenDingux Beta: Promete ser el futuro de la consola, pero todav\u00eda no est\u00e1 claro si llegar\u00e1 a buen puerto. Tiene sus virtudes y sus, m\u00e1s que defectos, problemas de juventud. Puede encontrarse aqu\u00ed . RG351: 351ELEC: Derivaci\u00f3n (fork) de EmuELEC que no tiene soporte oficial a la RG351. Es quiz\u00e1 el sistema m\u00e1s fiel a la filosof\u00eda OGA (la m\u00e1quina a la que la RG351 clona). Puede encontrarse aqu\u00ed . ArkOS: Es un Ubuntu con RetroArch y EmulationStation instalados para que arranque por defecto. Como virtudes principales est\u00e1n el que la distribuci\u00f3n se actualiza por si sola cada vez que se publican parches del sistema como es habitual en Ubuntu. Puede encontrarse aqui . Batocera: La popular distribuci\u00f3n de emuladores para SBCs y ordenadores. Puede encontrarse aqu\u00ed . Actualmente parece la menos recomendable. \u00bfQu\u00e9 sistema es m\u00e1s recomendable para RG351, 351ELEC o ArkOS? (RG351) \u00b6 Ambos son muy parecidos en rendimiento y funcionalidad. 351ELEC se parece m\u00e1s a EmuELEC que es de donde deriva y por tanto tiende a integrar m\u00e1s ajustes del sistema de emulaci\u00f3n que tiene debajo (RetroArch) en el interfaz principal (EmulationStation). ArkOS sigue una filosof\u00eda m\u00e1s pr\u00f3xima a la instalaci\u00f3n de RetroArch que se har\u00eda en un ordenador, de hecho es un Ubuntu recortado. Esto \u00faltimo tiene ventajas en cuanto a que se actualiza el sistema m\u00e1s f\u00e1cil y frecuentemente (aprovechando el sistema de repositorios habitual en las distribuciones Linux). A cambio es un sistema menos robusto que 351ELEC que se encuentra en una partici\u00f3n de solo lectura, por lo que ArkOS ser\u00e1 m\u00e1s dif\u00edcil que se corrompa (en cuelgues o en apagados abruptos). A continuaci\u00f3n una comparativa en video: \u00bfQu\u00e9 diferencias hay entre las versiones P y M de la RG351? (RG351) \u00b6 RG351P: Carcasa de pl\u00e1stico y sin Wifi interno, aunque el vendedor suele incluir en la caja uno con un adaptador USB-USB type C. RG350M: Carcasa de metal y m\u00f3dulo Wifi integrado en la placa. Algunos usuarios comentan que la carcasa met\u00e1lica transmite mejores sensaciones en la pulsaci\u00f3n de los controles en general. En el resto de caracter\u00edsticas son exactamente iguales, incluyendo la pantalla. El siguiente video contiene la comparativa que hizo Retro Game Corps sobre los dos modelos: \u00bfQu\u00e9 diferencias hay entre las versiones original, P y M de la RG350? (RG350) \u00b6 RG350: Carcasa de pl\u00e1stico. Pantalla de 320x240 no laminada, es decir el cristal que hay sobre la pantalla no se encuentra directamente pegado, sino ligeramente separado. Stick izquierdo en la parte superior y cruceta en la inferior. Ranura de tarjeta INT en el interior lo que obliga a abrir la tapa trasera en caso de querer acceder a ella. RG350P: Carcasa de pl\u00e1stico. Pantalla de 320x240 laminada, lo que produce una imagen m\u00e1s viva y mejora el \u00e1ngulo de visi\u00f3n al evitarse los reflejos y sombras del cristal sobre la pantalla. Ranura INT accesible desde el exterior. RG350M: Carcasa de metal. Pantalla de 640x480 laminada. Ranura INT accesible desde el exterior. Algunos usuarios comentan que la carcasa met\u00e1lica transmite mejores sensaciones en la pulsaci\u00f3n de los controles en general. En el siguiente video podemos ver una comparativa directa entre el modelo original y el modelo M. Como hemos enumerado antes, entre estos dos modelos hay m\u00e1s diferencias que si se comparara la RG350P con la RG350M, pero a\u00fan as\u00ed resulta interesante, por las sensaciones que ofrece el chasis de metal: \u00bfPor qu\u00e9 la RG350 lleva dos tarjetas microSD? (RG350) \u00b6 Motivos hist\u00f3ricos. La RG350 es un clon de la GZW Zero , una consola surgida de un crowdfunding que tuvo bastante \u00e9xito. Esta consola ten\u00eda esta configuraci\u00f3n doble de tarjetas con la idea de destinar una al sistema operativo y aplicaciones, y la otra a los medios (ROMs, videos y audios). La tarjeta de sistema tiene un formato Linux, por lo que no se puede leer desde los sistemas Windows o Mac. La externa soporta el formato FAT32 por lo que resulta muy sencillo y pr\u00e1ctico extraer la tarjeta de la consola, montarla con un lector de tarjetas en el PC y copiar a ella los archivos. \u00bfQu\u00e9 tama\u00f1o es recomendable que tenga la tarjeta del sistema? \u00b6 RG350: Como se ha comentado en la pregunta anterior , la tarjeta INT est\u00e1 dedicada al sistema. El sistema Linux que lleva la consola es muy minimalista y cabe perfectamente en una tarjeta de 4GB. A\u00fan as\u00ed, se suelen utilizar tarjetas de 16GB porque es el m\u00ednimo que se encuentra en los comercios. M\u00e1s detalles aqu\u00ed . RG351: Al s\u00f3lo disponer de una ranura para tarjetas y no tener la consola almacenamiento interno, la tarjeta tendr\u00e1 que contenerlo todo: Sistema operativo, aplicaciones, emuladores y ROMs. Por tanto el tama\u00f1o adecuado depender\u00e1 principalmente de las ROMs que queramos instalar, sobre todo si vamos a poner sistemas basados en CD, cuyas ROMs (o mejor dicho ISOs puesto que son volcados de discos) ocupan bastante. El tama\u00f1o m\u00e1ximo de tarjeta soportado te\u00f3ricamente es 256GB. \u00bfHay que cambiar la tarjeta o tarjetas que trae de f\u00e1brica la consola? \u00b6 En general las tarjetas que incluye el fabricante (o la que incluyen los vendedores en la ranura EXT en la RG350) no son de la mejor calidad. Pero sustituir la tarjeta del sistema no es trivial, es decir no sirve con copiar el contenido de una tarjeta en otra (ver otra pregunta m\u00e1s adelante). Si se va a continuar con el sistema que tra\u00eda de f\u00e1brica (por lo menos durante un tiempo al principio como se recomendaba en una pregunta anterior ), entonces no es necesario cambiar la tarjeta. Si se opta por instalar un firmware alternativo o CFW, entonces la mejor opci\u00f3n es apartar la tarjeta original e instalar el nuevo sistema en una nueva, a poder ser de una marca de garant\u00eda. Adem\u00e1s de evitar los problemas que dan las tarjetas originales, sobre todo al grabar (flashear) im\u00e1genes nuevas, siempre podremos recurrir a la tarjeta original para comparar comportamientos en caso de que tengamos dudas de si alguna capacidad de la consola tiene problemas. O para reclamar la garant\u00eda llegado el caso. \u00bfC\u00f3mo elegir una tarjeta microSD para la consola? \u00b6 Se recomienda seguir las recomendaciones habituales para cualquier otro producto. Las tarjetas baratas, o que resultan ser fakes en comercios como Aliexpress, pueden arruinar la experiencia de juego al producir lentitud en los accesos por parte del sistema operativo. Aunque no existe garant\u00eda absoluta de que una tarjeta de buena marca vaya a funcionar sin problemas, lo m\u00e1s probable es que no los haya. En cuanto a la velocidad, las RG350 y RG351 no son los equipos m\u00e1s r\u00e1pidos del mercado, por lo que una tarjeta de class 10 ser\u00e1 suficiente. Sin embargo dado que en ocasiones se utilizan tarjetas de alta capacidad por el gran volumen que puede tener una buena colecci\u00f3n de ROMs, s\u00ed que puede merecer adquirir una tarjeta r\u00e1pida para poder cargar las ROMs desde el ordenador r\u00e1pidamente. La capacidad m\u00e1xima te\u00f3rica admitida en las ranuras de estas consolas es de 256GB. El siguiente gr\u00e1fico explica c\u00f3mo se interpretan algunos de los c\u00f3digos que suelen llevar estas tarjetas: \u00bfPuedo copiar el contenido de una tarjeta a otra? \u00b6 RG350: La interna no. La externa s\u00ed. La interna tiene dos particiones y una de ellas es de formato Linux. La externa suele estar en formato FAT32 por lo que se puede acceder a su contenido y transferir todo lo que en ella hay a otra tarjeta en el mismo formato FAT32. Como en esta consola las ROMs suele ser lo que nos interesa conservar cuando vamos a cambiar el sistema, podemos cambiar la tarjeta interna sin que las ROMs se vean afectadas. RG351: No. La tarjeta contiene varias particiones y para que el sistema arranque hay que respetar la situaci\u00f3n y el contenido de algunas de ellas. Hay que utilizar programas para hacer volcados (dumps) de la tarjeta completa a una imagen (ver Diccionario de t\u00e9rminos ). El que esta consola s\u00f3lo tenga una ranura para tarjetas tiene el inconveniente de que si queremos grabar (flashear) otro firmware alternativo en la tarjeta, vamos a perder las ROMs, por lo que habr\u00e1 que copiarlas a otro sitio antes. \u00bfLa consola lleva salida HDMI? \u00b6 RG350: S\u00ed lleva, pero el firmware oficial no le ha dado soporte hasta mediados del a\u00f1o pasado. Los firmwares alternativos (con ROGUE a la cabeza) todav\u00eda no han podido importar esta funci\u00f3n al no haber sido hechas p\u00fablicas las especificaciones por el fabricante. De todas formas el funcionamiento de muchos emuladores a trav\u00e9s de HDMI (sobre todo los Arcade y PlayStation) tienen problemas de latencia y distorsiones gr\u00e1ficas. RG351: No lleva. \u00bfSirven los adaptadores USB-HDMI? \u00b6 RG350: Seguramente no ya que no me consta que los firmwares de esta consola los soporten. RG351: Aqu\u00ed habr\u00eda m\u00e1s posibilidades ya que existen distribuciones como ArkOS que en realidad son un Ubuntu enmascarado. De todas formas dudo mucho que la velocidad del bus USB de la consola soporte la tasa de transferencia necesaria para que funcione adecuadamente. Opini\u00f3n personal \u00b6 T\u00e9cnicamente hablando: RG350P: Mejor resoluci\u00f3n y aspecto de pantalla para sistemas 8 y 16 bit. Mejor precio. RG350M: Mejor resoluci\u00f3n y aspecto de pantalla para sistemas 8 y 16 bit. Carcasa de metal que da mayor precisi\u00f3n en el manejo. Mayor resoluci\u00f3n que permite efectos gr\u00e1ficos que la 350P no puede mostrar. RG351P/M: M\u00e1s potencia de procesador (aproximadamente un 50%) que permite subir el list\u00f3n hasta rozar Dreamcast, N64, PSP y Nintendo DS. Frontend m\u00e1s moderno que ofrece una experiencia de manejo explorando sistemas y ROMs muy superior. A cambio la resoluci\u00f3n y aspecto de pantalla no resulta la m\u00e1s adecuada para ver los juegos en modo pixel perfect. Hay que aplicar filtros de interpolaci\u00f3n. Valoraci\u00f3n m\u00e1s personal: Si no llevas mucho tiempo en esto la RG351 te va a resultar m\u00e1s satisfactoria. Si eres un aficionado hardcore del retro, las 350 resultan m\u00e1quinas m\u00e1s atractivas por historia, comunidad y la precisi\u00f3n gr\u00e1fica que permiten. Diccionario de t\u00e9rminos \u00b6 EmuELEC: Es un sistema operativo Linux basado en CoreELEC que se compone fundamentalmente de un interfaz de usuario o frontend (EmulationStation) y de un sistema que integra m\u00faltiples emuladores (RetroArch). Core o N\u00facleo: Concepto normalmente vinculado a RetroArch. Los cores son las librer\u00edas de RetroArch que implementan la emulaci\u00f3n de un sistema concreto. Cuando se abre un juego o ROM en RetroArch, hay que cargar el core con el que lo queremos ejecutar. ROMs: Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el c\u00f3digo y los datos (sonidos por ejemplo) del juego en la m\u00e1quina original. En viejas recreativas y en m\u00e1quinas de cartucho, este soporte sol\u00edan ser chips de memoria no vol\u00e1til. En las m\u00e1quinas m\u00e1s modernas normalmente son CDs, DVDs, Bluray's. Ver m\u00e1s detalles aqu\u00ed . BIOS: Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de \u00e9stas est\u00e1n siempre presentes en la m\u00e1quina. Es decir, as\u00ed como las ROMs son c\u00f3digo particular de cada juego, que digamos entra y sale de la m\u00e1quina (cuando cambias el CD o cartucho), la BIOS tambi\u00e9n es c\u00f3digo pero permanente de la m\u00e1quina. Ver m\u00e1s detalles aqu\u00ed . Ports: Un port es una aplicaci\u00f3n que ejecuta un juego concreto, normalmente un cl\u00e1sico, del que se dispone del c\u00f3digo y que alguien ha compilado para el sistema de nuestra m\u00e1quina. Tambi\u00e9n entran dentro de esta categor\u00eda los remakes hechos por aficionados o homebrew. Ver m\u00e1s detalles aqu\u00ed . ROMSET: Romset = set de ROMs, es decir un conjunto cerrado y definido de ROMs. Ver m\u00e1s detalles aqu\u00ed . Imagen: Es un volcado de un dispositivo de almacenamiento (en estas consolas ser\u00e1 una microSD) donde se encuentra el sistema completo y funcional (normalmente con sistema operativo, emuladores, frontend y ROMs). Se hace con la idea de replicar la instalaci\u00f3n de una m\u00e1quina en otras muchas. Normalmente estos ficheros ocupan casi tanto como la capacidad de la microSD de que proceden. Escrapear: Obtener metadatos (sinopsis, fecha de publicaci\u00f3n, g\u00e9nero, etc. de un juego), car\u00e1tulas o videos de los juegos para facilitar su identificaci\u00f3n en el frontend o interfaz de manejo de la consola. Brickear: Convertir la consola en un ladrillo. Es decir que no haya forma de que arranque. En las consolas de la gama RG350 es completamente imposible dado que no hay ninguna memoria flash en la placa. Con la RG351 existe algo m\u00e1s de posibilidad ya que hay un par de chips en la placa que tienen su propia memoria, pero las probabilidades son muy remotas. A efectos pr\u00e1cticos se pueden considerar las dos no brickeables.","title":"Retroconsolas"},{"location":"2021-01-19-retroconsolas.html#que-modelos-merecen-la-pena","text":"Este tipo de consolas se han popularizado en los \u00faltimos a\u00f1os y unos cuantos fabricantes en China han producido numerosos modelos en un espectro de precio y prestaciones muy grande ( aqu\u00ed puede consultarse un listado enorme). En este art\u00edculo vamos a centrarnos en los modelos RG350 (y sus variantes P y M) y RG351 (tambi\u00e9n en variantes P y M) ya que son seguramente los modelos m\u00e1s populares. Cuando hablemos de RG350 sin letra final, nos referiremos a los tres modelos (original, P y M). De la misma forma, cuando hablemos de RG351, nos referiremos a los dos modelos (P y M).","title":"\u00bfQu\u00e9 modelos merecen la pena?"},{"location":"2021-01-19-retroconsolas.html#que-caracteristicas-tienen-las-consolas-rg350-y-rg351","text":"","title":"\u00bfQu\u00e9 caracter\u00edsticas tienen las consolas RG350 y RG351?"},{"location":"2021-01-19-retroconsolas.html#rg350","text":"Procesador: Ingenic JZ4770 MIPS Velocidad: 1GHz Cores: 1 Ranuras tarjeta de memoria: 2 Memoria: 512MB Pantalla 3,5\" relaci\u00f3n aspecto: 4:3 Modelo original y P: 320x240 px Modelo M: 640x480 px","title":"RG350"},{"location":"2021-01-19-retroconsolas.html#rg351","text":"Procesador: RockChip RK3326 ARM Velocidad: 1,3-1,5GHz Cores: 4 Ranuras tarjeta de memoria: 1 Memoria: 1024MB Pantalla 3,5\" relaci\u00f3n aspecto: 3:2 Modelo P: 480x320 px Modelo M: 480x320 px En cuesti\u00f3n de rendimiento la RG351 es superior a la RG350, pero a pesar de lo que parezcan sugerir los n\u00fameros, la primera no llega a duplicar el rendimiento de la primera. Medido en base a los sistemas que son capaces de emular, podr\u00edamos decir que RG350 se queda en PlayStation 1 y RG351 se atreve con algunos juegos (no todos) de Nintendo 64, Dreamcast, Sony PSP y Nintendo DS. El siguiente gr\u00e1fico es una modificaci\u00f3n de un original de Retro Game Corps (se puede ver aqu\u00ed ) donde se han dejado \u00fanicamente los sistemas que mueven las dos consolas que nos interesan aqu\u00ed: Por \u00faltimo se recomienda ver los siguientes videos donde se comparan varias consolas:","title":"RG351"},{"location":"2021-01-19-retroconsolas.html#que-modelos-llevan-wifi","text":"RG350: No llevan, pero funcionan algunos modelos de pinchos USB como \u00e9ste . RG351P: No lleva, pero funcionan algunos modelos de pinchos USB como este . Los vendedores suelen incluirlo con la consola. RG351M: Lleva un m\u00f3dulo integrado en el interior.","title":"\u00bfQu\u00e9 modelos llevan Wifi?"},{"location":"2021-01-19-retroconsolas.html#para-que-sirve-que-la-consola-lleve-wifi","text":"RG350: Poca utilidad. Hay unos pocos emuladores que soportan juego en red, pero son realmente pocos. Facilita algo la actualizaci\u00f3n de emuladores y el sistema con ciertas utilidades, pero realmente son cosas que se pueden hacer por otros medios. RG351: El sistema RetroArch y el frontend EmulationStation que se utiliza pr\u00e1cticamente en todos los sistemas/firmwares aparecidos para esta m\u00e1quina, s\u00ed sacan partido de la conexi\u00f3n a la red para descargar car\u00e1tulas y videos de los juegos, los propios juegos y actualizar los emuladores o el sistema entero.","title":"\u00bfPara qu\u00e9 sirve que la consola lleve Wifi?"},{"location":"2021-01-19-retroconsolas.html#las-consolas-llevan-roms","text":"Depende del vendedor. En teor\u00eda es ilegar vender productos con ROMs que tienen derechos de autor (la inmensa mayor\u00eda). A pesar de ello, aunque los vendedores no declaran incluir las ROMs en las fichas de producto, suelen venir con ellas. Aqu\u00ed hay diferencia entre los dos tipos de consola: RG350: Al tener dos ranuras, la denominada INT (porque en el modelo original era interna) se dedica al sistema. Aqu\u00ed no suelen incluir ROMs, s\u00ed los emuladores. En caso de ofrecer la consola con ROMs los vendedores las ponen en la ranura EXT. Por tanto cuando el vendedor nos ofrece la posibilidad de comprar la consola con una segunda tarjeta, en realidad lo que nos est\u00e1 ofreciendo son las ROMs. RG351: Al tener una \u00fanica ranura, donde tiene que ponerse todo (sistema, emuladores y ROMs), lo habitual es que esta consola venga siempre con ROMs.","title":"\u00bfLas consolas llevan ROMs?"},{"location":"2021-01-19-retroconsolas.html#como-se-anaden-roms","text":"RG350: Al tener dos ranuras para tarjeta microSD, lo m\u00e1s pr\u00e1ctico es a\u00f1adirlas en la ranura marcada como EXT. Esta tarjeta puede estar en formato FAT32, es decir el formato en el que vienen formateadas normalmente las tarjetas reci\u00e9n compradas. Las ROMs en esa tarjeta pueden colocarse en cualquier lugar ya que m\u00e1s tarde cuando abramos un emulador, normalmente nos mostrar\u00e1 un explorador de archivos para localizar las ROMs donde las tengamos. Si se ha seguido el consejo de instalarlas en la tarjeta EXT, se encontrar\u00e1n a partir de la ruta /media/sdcard que es donde se monta esa tarjeta en el arbol de directorios del sistema. ROGUE adem\u00e1s del FAT32 soporta el formato exFAT, un formato m\u00e1s moderno que suele utilizarse en las tarjetas de gran capacidad. M\u00e1s detalles aqu\u00ed . RG351: Aunque en esta consola s\u00f3lo tenemos una tarjeta, lo normal es que est\u00e9 particionada de manera que las ROMs se alojen en una partici\u00f3n de tipo FAT32 o exFAT, por lo que normalmente si pinchamos la tarjeta en el PC con un lector de tarjetas, podremos copiar las ROMs a esa partici\u00f3n sin m\u00e1s que arrastrar. Hay alternativas como conectar la consola a la red (con un adaptador Wifi en el caso del modelo P o directamente con el modelo M ya que lleva el adaptador integrado) y activar alg\u00fan sistema para compartir los archivos de la consola (depender\u00e1 del sistema y versi\u00f3n que tengamos instalado). En general lo m\u00e1s c\u00f3modo y r\u00e1pido es pinchar la tarjeta en el PC.","title":"\u00bfC\u00f3mo se a\u00f1aden ROMs?"},{"location":"2021-01-19-retroconsolas.html#merece-la-pena-comprar-la-consola-con-tarjeta-microsd-con-juegos-rg350","text":"Las tarjetas microSD que llevan estas consolas tienen una calidad muy justita. En la RG350 suele venir una tarjeta Toshiba en la ranura INT. Es muy frecuente que esa tarjeta d\u00e9 problemas al flashear (grabar) un firmware alternativo. En esta consola la tarjeta EXT tampoco es de calidad, por lo que si se adquiere con la idea de conseguir una colecci\u00f3n de ROMs (ver duda anterior), lo m\u00e1s probable es que haya que transferirlas a otra. Incluso no es infrecuente que no puedan copiarse todas las ROMs por problemas de formato en la tarjeta recibida. Adem\u00e1s las colecciones de juegos que suelen venir en estas tarjetas son recopilaciones mal ordenadas y en localizaciones de otros paises. En general se recomienda ahorrar el extra de coste de comprar la consola con tarjeta para ROMs. Mejor buscarlas por uno mismo.","title":"\u00bfMerece la pena comprar la consola con tarjeta microSD con juegos? (RG350)"},{"location":"2021-01-19-retroconsolas.html#tengo-que-actualizar-el-sistema-de-la-consola-nada-mas-recibirla","text":"Necesario no es. Forma parte del entretenimiento para muchos de nosotros, pero la consola llegar\u00e1 con un sistema completamente funcional. Es cierto que existen normalmente varios firmwares alternativos (se suelen llamar Custom Firmwares o CFW), sobre todo en el caso de las RG351. Es otra de las aficiones que se pueden desarrollar sobre estas consolas al tener una arquitectura muy abierta. Suelen crearse comunidades de desarrollo y sus usuarios nos beneficiamos de ello. Es cierto que instalar un firmware alternativo en estas m\u00e1quinas tiene un riesgo m\u00ednimo, dado que todo lo \"estropeable\" se encuentra en las tarjetas microSD, por lo que en caso de problemas siempre se van a solucionar cambiando la tarjeta. Digamos que no son consolas f\u00e1ciles de \"brickear\" (ver Diccionario de t\u00e9rminos ). A pesar de ello, si est\u00e1s leyendo estas preguntas/respuestas mi consejo es que, para evitar frustraciones, utilices la consola tal y como se recibe de f\u00e1brica al menos durante un tiempo mientras vas adquiriendo conocimientos. Los juegos que funcionen, que van a ser miles (seguramente todos los que traiga la consola si viene con ellos) lo van a hacer de la misma forma en el firmware original. Si a\u00fan as\u00ed te animas a instalar un CFW, tras o\u00edr las ventajas que tiene tal o cual distribuci\u00f3n, como dec\u00edamos antes, todo est\u00e1 en la tarjeta (la INT en la RG350 y la \u00fanica que tiene la RG351), por lo que siempre podemos reservar la tarjeta original tal cual est\u00e1 e instalar el CFW sobre una tarjeta nueva. De esa forma, a modo de cartucho, cuando queramos cambiar de un sistema a otro s\u00f3lo tendremos que cambiar la microSD.","title":"\u00bfTengo que actualizar el sistema de la consola nada m\u00e1s recibirla?"},{"location":"2021-01-19-retroconsolas.html#que-sistemas-o-firmwares-existen-para-estas-consolas","text":"RG350: Sistema base o stock. Se puede encontrar aqu\u00ed . Es el \u00fanico en el que funciona el HDMI aunque con problemas. ROGUE: El sistema que recomendamos aqu\u00ed. Se puede encontrar aqu\u00ed . OpenDingux Beta: Promete ser el futuro de la consola, pero todav\u00eda no est\u00e1 claro si llegar\u00e1 a buen puerto. Tiene sus virtudes y sus, m\u00e1s que defectos, problemas de juventud. Puede encontrarse aqu\u00ed . RG351: 351ELEC: Derivaci\u00f3n (fork) de EmuELEC que no tiene soporte oficial a la RG351. Es quiz\u00e1 el sistema m\u00e1s fiel a la filosof\u00eda OGA (la m\u00e1quina a la que la RG351 clona). Puede encontrarse aqu\u00ed . ArkOS: Es un Ubuntu con RetroArch y EmulationStation instalados para que arranque por defecto. Como virtudes principales est\u00e1n el que la distribuci\u00f3n se actualiza por si sola cada vez que se publican parches del sistema como es habitual en Ubuntu. Puede encontrarse aqui . Batocera: La popular distribuci\u00f3n de emuladores para SBCs y ordenadores. Puede encontrarse aqu\u00ed . Actualmente parece la menos recomendable.","title":"\u00bfQu\u00e9 sistemas o firmwares existen para estas consolas?"},{"location":"2021-01-19-retroconsolas.html#que-sistema-es-mas-recomendable-para-rg351-351elec-o-arkos-rg351","text":"Ambos son muy parecidos en rendimiento y funcionalidad. 351ELEC se parece m\u00e1s a EmuELEC que es de donde deriva y por tanto tiende a integrar m\u00e1s ajustes del sistema de emulaci\u00f3n que tiene debajo (RetroArch) en el interfaz principal (EmulationStation). ArkOS sigue una filosof\u00eda m\u00e1s pr\u00f3xima a la instalaci\u00f3n de RetroArch que se har\u00eda en un ordenador, de hecho es un Ubuntu recortado. Esto \u00faltimo tiene ventajas en cuanto a que se actualiza el sistema m\u00e1s f\u00e1cil y frecuentemente (aprovechando el sistema de repositorios habitual en las distribuciones Linux). A cambio es un sistema menos robusto que 351ELEC que se encuentra en una partici\u00f3n de solo lectura, por lo que ArkOS ser\u00e1 m\u00e1s dif\u00edcil que se corrompa (en cuelgues o en apagados abruptos). A continuaci\u00f3n una comparativa en video:","title":"\u00bfQu\u00e9 sistema es m\u00e1s recomendable para RG351, 351ELEC o ArkOS? (RG351)"},{"location":"2021-01-19-retroconsolas.html#que-diferencias-hay-entre-las-versiones-p-y-m-de-la-rg351-rg351","text":"RG351P: Carcasa de pl\u00e1stico y sin Wifi interno, aunque el vendedor suele incluir en la caja uno con un adaptador USB-USB type C. RG350M: Carcasa de metal y m\u00f3dulo Wifi integrado en la placa. Algunos usuarios comentan que la carcasa met\u00e1lica transmite mejores sensaciones en la pulsaci\u00f3n de los controles en general. En el resto de caracter\u00edsticas son exactamente iguales, incluyendo la pantalla. El siguiente video contiene la comparativa que hizo Retro Game Corps sobre los dos modelos:","title":"\u00bfQu\u00e9 diferencias hay entre las versiones P y M de la RG351? (RG351)"},{"location":"2021-01-19-retroconsolas.html#que-diferencias-hay-entre-las-versiones-original-p-y-m-de-la-rg350-rg350","text":"RG350: Carcasa de pl\u00e1stico. Pantalla de 320x240 no laminada, es decir el cristal que hay sobre la pantalla no se encuentra directamente pegado, sino ligeramente separado. Stick izquierdo en la parte superior y cruceta en la inferior. Ranura de tarjeta INT en el interior lo que obliga a abrir la tapa trasera en caso de querer acceder a ella. RG350P: Carcasa de pl\u00e1stico. Pantalla de 320x240 laminada, lo que produce una imagen m\u00e1s viva y mejora el \u00e1ngulo de visi\u00f3n al evitarse los reflejos y sombras del cristal sobre la pantalla. Ranura INT accesible desde el exterior. RG350M: Carcasa de metal. Pantalla de 640x480 laminada. Ranura INT accesible desde el exterior. Algunos usuarios comentan que la carcasa met\u00e1lica transmite mejores sensaciones en la pulsaci\u00f3n de los controles en general. En el siguiente video podemos ver una comparativa directa entre el modelo original y el modelo M. Como hemos enumerado antes, entre estos dos modelos hay m\u00e1s diferencias que si se comparara la RG350P con la RG350M, pero a\u00fan as\u00ed resulta interesante, por las sensaciones que ofrece el chasis de metal:","title":"\u00bfQu\u00e9 diferencias hay entre las versiones original, P y M de la RG350? (RG350)"},{"location":"2021-01-19-retroconsolas.html#por-que-la-rg350-lleva-dos-tarjetas-microsd-rg350","text":"Motivos hist\u00f3ricos. La RG350 es un clon de la GZW Zero , una consola surgida de un crowdfunding que tuvo bastante \u00e9xito. Esta consola ten\u00eda esta configuraci\u00f3n doble de tarjetas con la idea de destinar una al sistema operativo y aplicaciones, y la otra a los medios (ROMs, videos y audios). La tarjeta de sistema tiene un formato Linux, por lo que no se puede leer desde los sistemas Windows o Mac. La externa soporta el formato FAT32 por lo que resulta muy sencillo y pr\u00e1ctico extraer la tarjeta de la consola, montarla con un lector de tarjetas en el PC y copiar a ella los archivos.","title":"\u00bfPor qu\u00e9 la RG350 lleva dos tarjetas microSD? (RG350)"},{"location":"2021-01-19-retroconsolas.html#que-tamano-es-recomendable-que-tenga-la-tarjeta-del-sistema","text":"RG350: Como se ha comentado en la pregunta anterior , la tarjeta INT est\u00e1 dedicada al sistema. El sistema Linux que lleva la consola es muy minimalista y cabe perfectamente en una tarjeta de 4GB. A\u00fan as\u00ed, se suelen utilizar tarjetas de 16GB porque es el m\u00ednimo que se encuentra en los comercios. M\u00e1s detalles aqu\u00ed . RG351: Al s\u00f3lo disponer de una ranura para tarjetas y no tener la consola almacenamiento interno, la tarjeta tendr\u00e1 que contenerlo todo: Sistema operativo, aplicaciones, emuladores y ROMs. Por tanto el tama\u00f1o adecuado depender\u00e1 principalmente de las ROMs que queramos instalar, sobre todo si vamos a poner sistemas basados en CD, cuyas ROMs (o mejor dicho ISOs puesto que son volcados de discos) ocupan bastante. El tama\u00f1o m\u00e1ximo de tarjeta soportado te\u00f3ricamente es 256GB.","title":"\u00bfQu\u00e9 tama\u00f1o es recomendable que tenga la tarjeta del sistema?"},{"location":"2021-01-19-retroconsolas.html#hay-que-cambiar-la-tarjeta-o-tarjetas-que-trae-de-fabrica-la-consola","text":"En general las tarjetas que incluye el fabricante (o la que incluyen los vendedores en la ranura EXT en la RG350) no son de la mejor calidad. Pero sustituir la tarjeta del sistema no es trivial, es decir no sirve con copiar el contenido de una tarjeta en otra (ver otra pregunta m\u00e1s adelante). Si se va a continuar con el sistema que tra\u00eda de f\u00e1brica (por lo menos durante un tiempo al principio como se recomendaba en una pregunta anterior ), entonces no es necesario cambiar la tarjeta. Si se opta por instalar un firmware alternativo o CFW, entonces la mejor opci\u00f3n es apartar la tarjeta original e instalar el nuevo sistema en una nueva, a poder ser de una marca de garant\u00eda. Adem\u00e1s de evitar los problemas que dan las tarjetas originales, sobre todo al grabar (flashear) im\u00e1genes nuevas, siempre podremos recurrir a la tarjeta original para comparar comportamientos en caso de que tengamos dudas de si alguna capacidad de la consola tiene problemas. O para reclamar la garant\u00eda llegado el caso.","title":"\u00bfHay que cambiar la tarjeta o tarjetas que trae de f\u00e1brica la consola?"},{"location":"2021-01-19-retroconsolas.html#como-elegir-una-tarjeta-microsd-para-la-consola","text":"Se recomienda seguir las recomendaciones habituales para cualquier otro producto. Las tarjetas baratas, o que resultan ser fakes en comercios como Aliexpress, pueden arruinar la experiencia de juego al producir lentitud en los accesos por parte del sistema operativo. Aunque no existe garant\u00eda absoluta de que una tarjeta de buena marca vaya a funcionar sin problemas, lo m\u00e1s probable es que no los haya. En cuanto a la velocidad, las RG350 y RG351 no son los equipos m\u00e1s r\u00e1pidos del mercado, por lo que una tarjeta de class 10 ser\u00e1 suficiente. Sin embargo dado que en ocasiones se utilizan tarjetas de alta capacidad por el gran volumen que puede tener una buena colecci\u00f3n de ROMs, s\u00ed que puede merecer adquirir una tarjeta r\u00e1pida para poder cargar las ROMs desde el ordenador r\u00e1pidamente. La capacidad m\u00e1xima te\u00f3rica admitida en las ranuras de estas consolas es de 256GB. El siguiente gr\u00e1fico explica c\u00f3mo se interpretan algunos de los c\u00f3digos que suelen llevar estas tarjetas:","title":"\u00bfC\u00f3mo elegir una tarjeta microSD para la consola?"},{"location":"2021-01-19-retroconsolas.html#puedo-copiar-el-contenido-de-una-tarjeta-a-otra","text":"RG350: La interna no. La externa s\u00ed. La interna tiene dos particiones y una de ellas es de formato Linux. La externa suele estar en formato FAT32 por lo que se puede acceder a su contenido y transferir todo lo que en ella hay a otra tarjeta en el mismo formato FAT32. Como en esta consola las ROMs suele ser lo que nos interesa conservar cuando vamos a cambiar el sistema, podemos cambiar la tarjeta interna sin que las ROMs se vean afectadas. RG351: No. La tarjeta contiene varias particiones y para que el sistema arranque hay que respetar la situaci\u00f3n y el contenido de algunas de ellas. Hay que utilizar programas para hacer volcados (dumps) de la tarjeta completa a una imagen (ver Diccionario de t\u00e9rminos ). El que esta consola s\u00f3lo tenga una ranura para tarjetas tiene el inconveniente de que si queremos grabar (flashear) otro firmware alternativo en la tarjeta, vamos a perder las ROMs, por lo que habr\u00e1 que copiarlas a otro sitio antes.","title":"\u00bfPuedo copiar el contenido de una tarjeta a otra?"},{"location":"2021-01-19-retroconsolas.html#la-consola-lleva-salida-hdmi","text":"RG350: S\u00ed lleva, pero el firmware oficial no le ha dado soporte hasta mediados del a\u00f1o pasado. Los firmwares alternativos (con ROGUE a la cabeza) todav\u00eda no han podido importar esta funci\u00f3n al no haber sido hechas p\u00fablicas las especificaciones por el fabricante. De todas formas el funcionamiento de muchos emuladores a trav\u00e9s de HDMI (sobre todo los Arcade y PlayStation) tienen problemas de latencia y distorsiones gr\u00e1ficas. RG351: No lleva.","title":"\u00bfLa consola lleva salida HDMI?"},{"location":"2021-01-19-retroconsolas.html#sirven-los-adaptadores-usb-hdmi","text":"RG350: Seguramente no ya que no me consta que los firmwares de esta consola los soporten. RG351: Aqu\u00ed habr\u00eda m\u00e1s posibilidades ya que existen distribuciones como ArkOS que en realidad son un Ubuntu enmascarado. De todas formas dudo mucho que la velocidad del bus USB de la consola soporte la tasa de transferencia necesaria para que funcione adecuadamente.","title":"\u00bfSirven los adaptadores USB-HDMI?"},{"location":"2021-01-19-retroconsolas.html#opinion-personal","text":"T\u00e9cnicamente hablando: RG350P: Mejor resoluci\u00f3n y aspecto de pantalla para sistemas 8 y 16 bit. Mejor precio. RG350M: Mejor resoluci\u00f3n y aspecto de pantalla para sistemas 8 y 16 bit. Carcasa de metal que da mayor precisi\u00f3n en el manejo. Mayor resoluci\u00f3n que permite efectos gr\u00e1ficos que la 350P no puede mostrar. RG351P/M: M\u00e1s potencia de procesador (aproximadamente un 50%) que permite subir el list\u00f3n hasta rozar Dreamcast, N64, PSP y Nintendo DS. Frontend m\u00e1s moderno que ofrece una experiencia de manejo explorando sistemas y ROMs muy superior. A cambio la resoluci\u00f3n y aspecto de pantalla no resulta la m\u00e1s adecuada para ver los juegos en modo pixel perfect. Hay que aplicar filtros de interpolaci\u00f3n. Valoraci\u00f3n m\u00e1s personal: Si no llevas mucho tiempo en esto la RG351 te va a resultar m\u00e1s satisfactoria. Si eres un aficionado hardcore del retro, las 350 resultan m\u00e1quinas m\u00e1s atractivas por historia, comunidad y la precisi\u00f3n gr\u00e1fica que permiten.","title":"Opini\u00f3n personal"},{"location":"2021-01-19-retroconsolas.html#diccionario-de-terminos","text":"EmuELEC: Es un sistema operativo Linux basado en CoreELEC que se compone fundamentalmente de un interfaz de usuario o frontend (EmulationStation) y de un sistema que integra m\u00faltiples emuladores (RetroArch). Core o N\u00facleo: Concepto normalmente vinculado a RetroArch. Los cores son las librer\u00edas de RetroArch que implementan la emulaci\u00f3n de un sistema concreto. Cuando se abre un juego o ROM en RetroArch, hay que cargar el core con el que lo queremos ejecutar. ROMs: Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el c\u00f3digo y los datos (sonidos por ejemplo) del juego en la m\u00e1quina original. En viejas recreativas y en m\u00e1quinas de cartucho, este soporte sol\u00edan ser chips de memoria no vol\u00e1til. En las m\u00e1quinas m\u00e1s modernas normalmente son CDs, DVDs, Bluray's. Ver m\u00e1s detalles aqu\u00ed . BIOS: Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de \u00e9stas est\u00e1n siempre presentes en la m\u00e1quina. Es decir, as\u00ed como las ROMs son c\u00f3digo particular de cada juego, que digamos entra y sale de la m\u00e1quina (cuando cambias el CD o cartucho), la BIOS tambi\u00e9n es c\u00f3digo pero permanente de la m\u00e1quina. Ver m\u00e1s detalles aqu\u00ed . Ports: Un port es una aplicaci\u00f3n que ejecuta un juego concreto, normalmente un cl\u00e1sico, del que se dispone del c\u00f3digo y que alguien ha compilado para el sistema de nuestra m\u00e1quina. Tambi\u00e9n entran dentro de esta categor\u00eda los remakes hechos por aficionados o homebrew. Ver m\u00e1s detalles aqu\u00ed . ROMSET: Romset = set de ROMs, es decir un conjunto cerrado y definido de ROMs. Ver m\u00e1s detalles aqu\u00ed . Imagen: Es un volcado de un dispositivo de almacenamiento (en estas consolas ser\u00e1 una microSD) donde se encuentra el sistema completo y funcional (normalmente con sistema operativo, emuladores, frontend y ROMs). Se hace con la idea de replicar la instalaci\u00f3n de una m\u00e1quina en otras muchas. Normalmente estos ficheros ocupan casi tanto como la capacidad de la microSD de que proceden. Escrapear: Obtener metadatos (sinopsis, fecha de publicaci\u00f3n, g\u00e9nero, etc. de un juego), car\u00e1tulas o videos de los juegos para facilitar su identificaci\u00f3n en el frontend o interfaz de manejo de la consola. Brickear: Convertir la consola en un ladrillo. Es decir que no haya forma de que arranque. En las consolas de la gama RG350 es completamente imposible dado que no hay ninguna memoria flash en la placa. Con la RG351 existe algo m\u00e1s de posibilidad ya que hay un par de chips en la placa que tienen su propia memoria, pero las probabilidades son muy remotas. A efectos pr\u00e1cticos se pueden considerar las dos no brickeables.","title":"Diccionario de t\u00e9rminos"},{"location":"2021-02-21_vuepress.html","text":"Enlaces \u00b6 Instalaci\u00f3n node.js Repositorio theme vuepress-theme-blog-vuetify Gu\u00eda Vuepress Documentaci\u00f3n Vuepress Gu\u00eda vuepress-theme-blog Documentaci\u00f3n vuepress-theme-blog Gu\u00eda VuePress plugin-blog Documentaci\u00f3n VuePress plugin-blog How to create a portfolio and blog using VuePress and Markdown vuepress-plugin-blog Default Theme Config Instalaci\u00f3n \u00b6 curl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash - sudo apt-get install -y nodejs cd ~/git mkdir eduardofilo.vuepress cd eduardofilo.vuepress npm init npm install -D vuepress npm install -D vuepress-theme-blog-vuetify mkdir docs Modifico el fichero package.json dej\u00e1ndolo como sigue: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ``` { \"name\": \"eduardofilo.vuepress\", \"version\": \"1.0.0\", \"description\": \"Sitio de apuntes sobre VuePress\", \"main\": \"index.js\", \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\", \"dev\": \"vuepress dev docs\", \"build\": \"vuepress build docs\" }, \"repository\": { \"type\": \"git\", \"url\": \"git+https://github.com/eduardofilo/eduardofilo.vuepress.git\" }, \"author\": \"eduardofilo\", \"license\": \"ISC\", \"bugs\": { \"url\": \"https://github.com/eduardofilo/eduardofilo.vuepress/issues\" }, \"homepage\": \"https://github.com/eduardofilo/eduardofilo.vuepress#readme\", \"devDependencies\": { \"vuepress\": \"^1.8.2\", \"vuepress-theme-blog-vuetify\": \"^1.6.2\" } } ``` Creo el fichero de configuraci\u00f3n de VuePress en ~/git/eduardofilo.vuepress/docs/.vuepress/config.js : module.exports = { theme: 'blog-vuetify', } Sirvo el sitio de desarrollo: 1 2 3 ``` npm run dev ``` npm install -D @vuepress/theme-blog // .vuepress/config.js module.exports = { theme: '@vuepress/blog', themeConfig: { // Please read documentation to see the available options. } }","title":"VuePress"},{"location":"2021-02-21_vuepress.html#enlaces","text":"Instalaci\u00f3n node.js Repositorio theme vuepress-theme-blog-vuetify Gu\u00eda Vuepress Documentaci\u00f3n Vuepress Gu\u00eda vuepress-theme-blog Documentaci\u00f3n vuepress-theme-blog Gu\u00eda VuePress plugin-blog Documentaci\u00f3n VuePress plugin-blog How to create a portfolio and blog using VuePress and Markdown vuepress-plugin-blog Default Theme Config","title":"Enlaces"},{"location":"2021-02-21_vuepress.html#instalacion","text":"curl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash - sudo apt-get install -y nodejs cd ~/git mkdir eduardofilo.vuepress cd eduardofilo.vuepress npm init npm install -D vuepress npm install -D vuepress-theme-blog-vuetify mkdir docs Modifico el fichero package.json dej\u00e1ndolo como sigue: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ``` { \"name\": \"eduardofilo.vuepress\", \"version\": \"1.0.0\", \"description\": \"Sitio de apuntes sobre VuePress\", \"main\": \"index.js\", \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\", \"dev\": \"vuepress dev docs\", \"build\": \"vuepress build docs\" }, \"repository\": { \"type\": \"git\", \"url\": \"git+https://github.com/eduardofilo/eduardofilo.vuepress.git\" }, \"author\": \"eduardofilo\", \"license\": \"ISC\", \"bugs\": { \"url\": \"https://github.com/eduardofilo/eduardofilo.vuepress/issues\" }, \"homepage\": \"https://github.com/eduardofilo/eduardofilo.vuepress#readme\", \"devDependencies\": { \"vuepress\": \"^1.8.2\", \"vuepress-theme-blog-vuetify\": \"^1.6.2\" } } ``` Creo el fichero de configuraci\u00f3n de VuePress en ~/git/eduardofilo.vuepress/docs/.vuepress/config.js : module.exports = { theme: 'blog-vuetify', } Sirvo el sitio de desarrollo: 1 2 3 ``` npm run dev ``` npm install -D @vuepress/theme-blog // .vuepress/config.js module.exports = { theme: '@vuepress/blog', themeConfig: { // Please read documentation to see the available options. } }","title":"Instalaci\u00f3n"},{"location":"2021-02-28_pico_fuzix.html","text":"En el sitio de la Fundaci\u00f3n Raspberry Pi apareci\u00f3 hace poco este art\u00edculo explicando c\u00f3mo instalar la variante UNIX llamada FUZIX en el microcontrolador de reciente aparici\u00f3n Raspberry Pi Pico. Al parecer FUZIX es un proyecto surgido en torno al microprocesador de 8 bit Z-80 al que tengo un cari\u00f1o especial ya que es el \u00fanico procesador del que he llegado a conocer su c\u00f3digo m\u00e1quina. Decidido a realizar el montaje para probarlo, encontr\u00e9 que se puede simplificar bastante en tres puntos: El dump que proporcionan para la microSD es de la segunda partici\u00f3n, cuando podr\u00edan haber proporcionado una imagen de la tarjeta completa que ahorrar\u00eda los pasos de la sesi\u00f3n con fdisk para crear sus particiones y el posterior dd para cargar el dump de la segunda. El m\u00f3dulo que utilizan para conectar la microSD no es en realidad necesario ya que al funcionar Raspberry Pi Pico a 3,3V no hace falta ninguna adaptaci\u00f3n de las se\u00f1ales, es decir se puede cablear directamente la microSD a Raspberry Pi Pico. Como adaptador para el puerto serie, en lugar de utilizar una Raspberry Pi, utilizo un Arduino Nano con el t\u00edpico truco de puentear el pin de RESET a GND. En este caso s\u00ed que habr\u00e1 que adaptar la linea RX ya que Arduino trabaja a 5V. Esto se puede hacer mejor con un buen m\u00f3dulo UART-USB capaz de trabajar a 3,3V, pero no contaba con \u00e9l en el momento de escribir este art\u00edculo. Sin m\u00e1s veamos los pasos simplificados para ejecutar FUZIX en Raspberry Pi Pico. Lector microSD \u00b6 Como comentaba antes, la conexi\u00f3n de una tarjeta microSD se puede hacer realizando el patillaje directo y correcto entre los terminales de la microSD y los pines 16 a 20 de Raspberry Pi Pico. En esos pines se encuentra uno de los puertos SPI que tiene el microcontrolador. Las tarjetas SD y microSD pueden funcionar en dos modos, el nativo SD y como puerto SPI. Utilizaremos pues \u00e9ste \u00faltimo. Tan s\u00f3lo necesitamos conocer el patillaje a utilizar en este modo. Haciendo una b\u00fasqueda r\u00e1pida en cualquier buscador, en la modalidad de im\u00e1genes, por ejemplo por la cadena \"spi microsd pinout\", encontramos la respuesta: En la tabla anterior se ve adem\u00e1s la correspondencia entre los pines de las tarjetas en formato SD y microSD. Vamos a aprovechar esta correspondencia para construir un lector de tarjetas microSD utilizando uno de los t\u00edpicos adaptadores que suelen venir con las tarjetas microSD. Soldaremos directamente 7 cables entre los terminales 1 y 7 que m\u00e1s tarde conectaremos a Raspberry Pi Pico. La correspondencia entre los terminales del adaptador SD y Raspberry Pi Pico es como sigue: Pin adaptador SD SPI Raspberry Pi Pico 1 CS Pin 17 (GP13) 2 MOSI Pin 20 (GP15) 3 GND Pin 18 (GND) 4 3,3V Pin 36 (3V3 OUT) 5 SCK Pin 19 (GP14) 6 GND Pin 18 (GND) 7 MISO Pin 16 (GP12) 8 - - 9 - - Haciendo un cableado sobre una tira de pin de 1x6 (unificamos los dos terminales GND de la SD) reordenando los cables para que los pines de Raspberry Pi Pico queden en secuencia (pin 16 a 20) y dejando el pin de 3,3V a continuaci\u00f3n del pin 20, podremos conectar el adaptador directamente. El adaptador resultante es el siguiente: Se puede incluso hacer m\u00e1s f\u00e1cil y flexible el conexionado aprovechando que la separaci\u00f3n de los terminales de la SD es de una d\u00e9cima de pulgada, como en las t\u00edpicas tiras de pin y las breadboard, por lo que puede soldarse directamente una tira de pin. La idea y la foto siguiente est\u00e1n sacadas de este sitio : El adaptador construido se puede conectar directamente a Raspberry Pi Pico. Observad que el pin que recibe la alimentaci\u00f3n de 3,3V (cable rojo) queda fuera de la planta de Raspberry Pi Pico de manera que por medio de un par de puentes blancos se lleva hasta el pin 36 que es de donde obtenemos los 3,3V de alimentaci\u00f3n. Imagen de la microSD \u00b6 En las instrucciones del art\u00edculo original se incluye un proceso que por medio del comando fdisk utilizado desde una Raspberry Pi (desde cualquier Linux en realidad), permite construir dos particiones en la microSD (una para la swap y otra para el sistema de archivos). Se nos ofrece un dump de la segunda partici\u00f3n que se carga con el comando dd . Todo esto se podr\u00eda haber evitado generando el dump de las dos particiones juntas. Es lo que puede encontrarse en el siguiente fichero que podremos flashear directamente sobre una microSD con programas como Balena Etcher . card.img.gz En Linux podemos flashear directamente con el siguiente comando, sustituyendo el dispositivo ( /dev/mmcblk0 en el ejemplo) por el que corresponda: gunzip card.img.gz -c | sudo dd of=/dev/mmcblk0 bs=1M status=progress conv=fsync Firmware para Raspberry Pi Pico \u00b6 Aunque puede encontrarse en el art\u00edculo original lo incluyo aqu\u00ed de nuevo para que todo el proceso pueda seguirse sin salir de aqu\u00ed: fuzix.uf2 La forma de cargar el firmware en Raspberry Pi Pico es conectar por USB al ordenador mientras se mantiene pulsada la tecla BOOTSEL . En ese momento se montar\u00e1 una unidad de almacenamiento externa en el ordenador donde copiaremos el fichero anterior. Conexi\u00f3n serie \u00b6 Ya tenemos todo instalado y preparado. Tan s\u00f3lo necesitamos una manera de conectar con el sistema. El \u00fanico medio para conectar con \u00e9l es por medio del puerto serie que hay en los pines 1 y 2 (GP0 y GP1 respectivamente) de Raspberry Pi Pico. Desconzco si hay alg\u00fan motivo que haya impedido utilizar el puerto USB de Pico para este prop\u00f3sito. Desde luego hubiera sido mucho m\u00e1s c\u00f3modo. Para conectar el puerto serie de Pico al ordenador, lo mejor es utilizar un m\u00f3dulo adaptador USB como \u00e9ste . Al no tener uno a mano utilic\u00e9 el t\u00edpico truco de usar un Arduino en modo RESET permanente . Si utilizamos esta t\u00e9cnica nos tocar\u00e1 montar un divisor de tensi\u00f3n con un par de resistencias para adaptar el nivel de tensi\u00f3n para que la linea RX de Pico no reciba directamente los 5V con que trabaja Arduino. En la linea TX no ser\u00e1 necesario, ya que los 3,3V de Pico son suficientes para que Arduino interprete ese nivel de tensi\u00f3n como un 1 digital en 5V. El siguiente esquema completo muestra el divisor de tensi\u00f3n as\u00ed como la forma de alimentar Raspberry Pi Pico desde los 5V de salida que ofrece Arduino en uno de sus pins. Llevaremos esos 5V hasta el pin VSYS de Pico que admite entre 1,8V y 5,5V. Las resistencias del divisor de tensi\u00f3n pueden ser pr\u00e1cticamente de cualquier valor con tal de que la que est\u00e1 en serie en la linea RX tenga aproximadamente la mitad de valor que la que deriva a GND. Ya s\u00f3lo queda conectar por USB el Arduino al ordenador y conectar con nuestro cliente serie favorito a 115200 baudios. Por ejemplo en Linux puede hacerse con el siguiente comando: screen /dev/ttyUSB0 115200 8N1 Si todo va bien, en pantalla veremos lo siguiente. El sistema, antes de pedirnos el usuario ( root ) y password (vac\u00edo) nos pedir\u00e1 el d\u00eda y hora para poner la fecha al sistema: FUZIX version 0.4pre1 Copyright (c) 1988-2002 by H.F.Bower, D.Braun, S.Nitschke, H.Peraza Copyright (c) 1997-2001 by Arcady Schekochikhin, Adriano C. R. da Cunha Copyright (c) 2013-2015 Will Sowerbutts <will@sowerbutts.com> Copyright (c) 2014-2020 Alan Cox <alan@etchedpixels.co.uk> Devboot 64kB total RAM, 64kB available to processes (15 processes max) Enabling interrupts ... ok. SD drive 0: hda: hda1 hda2 Mounting root fs (root_dev=2, ro): OK Starting /init init version 0.9.0ac#1 Cannot open file Current date is Wed 2021-02-17 Enter new date: 2021-02-28 Current time is 22:21:10 Enter new time: 19:54 ^ ^ n n Fuzix 0.3.1 >@< Welcome to Fuzix m m login: root Welcome to FUZIX. #","title":"FUZIX en Raspberry Pi Pico"},{"location":"2021-02-28_pico_fuzix.html#lector-microsd","text":"Como comentaba antes, la conexi\u00f3n de una tarjeta microSD se puede hacer realizando el patillaje directo y correcto entre los terminales de la microSD y los pines 16 a 20 de Raspberry Pi Pico. En esos pines se encuentra uno de los puertos SPI que tiene el microcontrolador. Las tarjetas SD y microSD pueden funcionar en dos modos, el nativo SD y como puerto SPI. Utilizaremos pues \u00e9ste \u00faltimo. Tan s\u00f3lo necesitamos conocer el patillaje a utilizar en este modo. Haciendo una b\u00fasqueda r\u00e1pida en cualquier buscador, en la modalidad de im\u00e1genes, por ejemplo por la cadena \"spi microsd pinout\", encontramos la respuesta: En la tabla anterior se ve adem\u00e1s la correspondencia entre los pines de las tarjetas en formato SD y microSD. Vamos a aprovechar esta correspondencia para construir un lector de tarjetas microSD utilizando uno de los t\u00edpicos adaptadores que suelen venir con las tarjetas microSD. Soldaremos directamente 7 cables entre los terminales 1 y 7 que m\u00e1s tarde conectaremos a Raspberry Pi Pico. La correspondencia entre los terminales del adaptador SD y Raspberry Pi Pico es como sigue: Pin adaptador SD SPI Raspberry Pi Pico 1 CS Pin 17 (GP13) 2 MOSI Pin 20 (GP15) 3 GND Pin 18 (GND) 4 3,3V Pin 36 (3V3 OUT) 5 SCK Pin 19 (GP14) 6 GND Pin 18 (GND) 7 MISO Pin 16 (GP12) 8 - - 9 - - Haciendo un cableado sobre una tira de pin de 1x6 (unificamos los dos terminales GND de la SD) reordenando los cables para que los pines de Raspberry Pi Pico queden en secuencia (pin 16 a 20) y dejando el pin de 3,3V a continuaci\u00f3n del pin 20, podremos conectar el adaptador directamente. El adaptador resultante es el siguiente: Se puede incluso hacer m\u00e1s f\u00e1cil y flexible el conexionado aprovechando que la separaci\u00f3n de los terminales de la SD es de una d\u00e9cima de pulgada, como en las t\u00edpicas tiras de pin y las breadboard, por lo que puede soldarse directamente una tira de pin. La idea y la foto siguiente est\u00e1n sacadas de este sitio : El adaptador construido se puede conectar directamente a Raspberry Pi Pico. Observad que el pin que recibe la alimentaci\u00f3n de 3,3V (cable rojo) queda fuera de la planta de Raspberry Pi Pico de manera que por medio de un par de puentes blancos se lleva hasta el pin 36 que es de donde obtenemos los 3,3V de alimentaci\u00f3n.","title":"Lector microSD"},{"location":"2021-02-28_pico_fuzix.html#imagen-de-la-microsd","text":"En las instrucciones del art\u00edculo original se incluye un proceso que por medio del comando fdisk utilizado desde una Raspberry Pi (desde cualquier Linux en realidad), permite construir dos particiones en la microSD (una para la swap y otra para el sistema de archivos). Se nos ofrece un dump de la segunda partici\u00f3n que se carga con el comando dd . Todo esto se podr\u00eda haber evitado generando el dump de las dos particiones juntas. Es lo que puede encontrarse en el siguiente fichero que podremos flashear directamente sobre una microSD con programas como Balena Etcher . card.img.gz En Linux podemos flashear directamente con el siguiente comando, sustituyendo el dispositivo ( /dev/mmcblk0 en el ejemplo) por el que corresponda: gunzip card.img.gz -c | sudo dd of=/dev/mmcblk0 bs=1M status=progress conv=fsync","title":"Imagen de la microSD"},{"location":"2021-02-28_pico_fuzix.html#firmware-para-raspberry-pi-pico","text":"Aunque puede encontrarse en el art\u00edculo original lo incluyo aqu\u00ed de nuevo para que todo el proceso pueda seguirse sin salir de aqu\u00ed: fuzix.uf2 La forma de cargar el firmware en Raspberry Pi Pico es conectar por USB al ordenador mientras se mantiene pulsada la tecla BOOTSEL . En ese momento se montar\u00e1 una unidad de almacenamiento externa en el ordenador donde copiaremos el fichero anterior.","title":"Firmware para Raspberry Pi Pico"},{"location":"2021-02-28_pico_fuzix.html#conexion-serie","text":"Ya tenemos todo instalado y preparado. Tan s\u00f3lo necesitamos una manera de conectar con el sistema. El \u00fanico medio para conectar con \u00e9l es por medio del puerto serie que hay en los pines 1 y 2 (GP0 y GP1 respectivamente) de Raspberry Pi Pico. Desconzco si hay alg\u00fan motivo que haya impedido utilizar el puerto USB de Pico para este prop\u00f3sito. Desde luego hubiera sido mucho m\u00e1s c\u00f3modo. Para conectar el puerto serie de Pico al ordenador, lo mejor es utilizar un m\u00f3dulo adaptador USB como \u00e9ste . Al no tener uno a mano utilic\u00e9 el t\u00edpico truco de usar un Arduino en modo RESET permanente . Si utilizamos esta t\u00e9cnica nos tocar\u00e1 montar un divisor de tensi\u00f3n con un par de resistencias para adaptar el nivel de tensi\u00f3n para que la linea RX de Pico no reciba directamente los 5V con que trabaja Arduino. En la linea TX no ser\u00e1 necesario, ya que los 3,3V de Pico son suficientes para que Arduino interprete ese nivel de tensi\u00f3n como un 1 digital en 5V. El siguiente esquema completo muestra el divisor de tensi\u00f3n as\u00ed como la forma de alimentar Raspberry Pi Pico desde los 5V de salida que ofrece Arduino en uno de sus pins. Llevaremos esos 5V hasta el pin VSYS de Pico que admite entre 1,8V y 5,5V. Las resistencias del divisor de tensi\u00f3n pueden ser pr\u00e1cticamente de cualquier valor con tal de que la que est\u00e1 en serie en la linea RX tenga aproximadamente la mitad de valor que la que deriva a GND. Ya s\u00f3lo queda conectar por USB el Arduino al ordenador y conectar con nuestro cliente serie favorito a 115200 baudios. Por ejemplo en Linux puede hacerse con el siguiente comando: screen /dev/ttyUSB0 115200 8N1 Si todo va bien, en pantalla veremos lo siguiente. El sistema, antes de pedirnos el usuario ( root ) y password (vac\u00edo) nos pedir\u00e1 el d\u00eda y hora para poner la fecha al sistema: FUZIX version 0.4pre1 Copyright (c) 1988-2002 by H.F.Bower, D.Braun, S.Nitschke, H.Peraza Copyright (c) 1997-2001 by Arcady Schekochikhin, Adriano C. R. da Cunha Copyright (c) 2013-2015 Will Sowerbutts <will@sowerbutts.com> Copyright (c) 2014-2020 Alan Cox <alan@etchedpixels.co.uk> Devboot 64kB total RAM, 64kB available to processes (15 processes max) Enabling interrupts ... ok. SD drive 0: hda: hda1 hda2 Mounting root fs (root_dev=2, ro): OK Starting /init init version 0.9.0ac#1 Cannot open file Current date is Wed 2021-02-17 Enter new date: 2021-02-28 Current time is 22:21:10 Enter new time: 19:54 ^ ^ n n Fuzix 0.3.1 >@< Welcome to Fuzix m m login: root Welcome to FUZIX. #","title":"Conexi\u00f3n serie"},{"location":"2021-04-03_RG350_imagen.html","text":"Actualizaci\u00f3n 2021-04-25 Se actualiza el art\u00edculo para reflejar los cambios introducidos en la v10.1 de la imagen presentada en esta fecha. Para convertir la v10.0 original en la nueva v10.1, existe un parche que realiza las mejoras y cambios. El parche puede descargarse desde este enlace . Presentaci\u00f3n \u00b6 Se comentan aqu\u00ed los detalles de una imagen de tarjeta interna preparada para las consolas de emulaci\u00f3n Anbernic RG350, RG350P, RG350M, RG280V y RG280M. La imagen es un volcado de una microSD de 4GB con sistema ROGUE (agradecimiento especial a Ninoh-FOX por su soporte), ports, emuladores y cores RetroArch y los frontends GMenu2X, SimpleMenu (agradecimiento especial a FGL82 por su soporte) y PyMenu. Se puede flashear sobre una tarjeta de ese tama\u00f1o o superior. Durante el primer arranque se expandir\u00e1 el tama\u00f1o de la partici\u00f3n principal hasta ocupar todo el espacio disponible en la tarjeta. Descarga de la imagen desde los siguientes enlaces: Panda (RG350 y RG350P) Mapache (RG350M) Vis\u00f3n (RG280V) Musara\u00f1a (RG280M) Alternativamente todas las im\u00e1genes y parches tambi\u00e9n pueden encontrarse en el canal Telegram Code Animal images . Utilizar el canal tiene la ventaja adicional de que se reciben notificaciones cuando aparecen parches o nuevas versiones de las im\u00e1genes. Los emuladores y los cores RetroArch tienen lanzadores personalizados con iconos que representan las m\u00e1quinas que emulan para mejor identificaci\u00f3n. Los nombres de los emuladores y cores tambi\u00e9n se han modificado con esta misma idea. Los ports o juegos instalados son los siguientes (algunos como Cannonball , OpenBOR , OpenJazz y Solarus necesitan ROMs en la tarjeta externa): Por \u00faltimo, en este documento pueden encontrarse detalles de los emuladores instalados y las configuraciones de RetroArch para los cores disponibles en la imagen. Backup de partidas antes de flashear \u00b6 Si se ha estado utilizando la consola con otro sistema, seguramente nos interese guardar los savestates de las partidas que hayamos jugado. As\u00ed pues, antes de flashear esta imagen, conviene hacer backup de los mismos. Para facilitar esta tarea se ha creado la aplicaci\u00f3n Py Backup que se describe en este art\u00edculo y que viene preconfigurada con todos los directorios de savestates de los emuladores instalados en la imagen. B\u00e1sicamente el procedimiento para hacer el backup es el siguiente. Empezamos trabajando sobre la imagen que exista en la consola antes de flashear la que se ofrece aqu\u00ed: Instalar el OPK . Localizar la aplicaci\u00f3n instalada en el paso anterior. Se encontrar\u00e1 en la secci\u00f3n applications de los distintos launchers. Una vez encontrada abrirla. Pulsar B para empezar el backup y confirmar con A (al llegar a PCSX4All suele engancharse un buen rato porque los savestates de este emulador son pesados). Se pueden desactivar previamente los backups de los sistemas que no nos interesen, pero es m\u00e1s seguro dejar todos activos para evitar disgustos. Hasta aqu\u00ed para generar el backup. \u00c9ste se deja en el directorio backups de la tarjeta externa, dentro del cual aparecer\u00e1n una serie de ficheros con extensi\u00f3n .tgz . Una vez flasheada la imagen tendremos que hacer la restauraci\u00f3n. Para ello proceder de la siguiente forma: Abrir la aplicaci\u00f3n Py Backup que ya est\u00e1 preinstalada en la imagen. Pulsar X para empezar la restauraci\u00f3n del backup y confirmar con A . Advertencia : La correspondencia de las partidas o savestates depende de los nombres de las ROMs. Si guardamos una partida cuando por ejemplo la ROM se llamaba \"001. Catrap.gb\" si luego tratamos de recuperarla desde una ROM llamada \"Catrap.gb\" no nos va a funcionar. En ese caso tocar\u00e1 revisar el directorio de savestate correspondiente (en el caso de GB es /media/data/local/home/.gambatte/saves ) y renombrar el fichero para que corresponda con el nuevo nombre de la ROM. Por \u00faltimo, un peque\u00f1o tutorial en video: Flasheo de la imagen \u00b6 La imagen est\u00e1 contenida en un \u00fanico fichero en formato img.gz . Esto significa que es un volcado directo de la tarjeta ( img ) comprimido ( gz ). El fichero tiene alrededor de 1GB de tama\u00f1o. Para flashear se recomienda utilizar el programa Balena Etcher que es capaz de utilizar este formato directamente adem\u00e1s de ser compatible con los tres sistemas principales (Windows, MacOS y Linux). La imagen se puede flashear en tarjetas de 4GB en adelante. En Linux resulta m\u00e1s r\u00e1pido y directo flashear con los siguientes comandos (sustituyendo el dispositivo /dev/mmcblk0 del ejemplo por el que corresponda en nuestro caso): $ sudo umount /dev/mmcblk0* $ gunzip panda_v10.1.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync No se recomienda flashear sobre la misma tarjeta Toshiba que trae la consola de f\u00e1brica. Se han observado problemas de rendimiento y errores con ella. Mejor buscar una tarjeta de marca de garant\u00eda y que sea r\u00e1pida. En este v\u00eddeo puede verse el proceso de apertura de la consola y extracci\u00f3n de la tarjeta interna en la RG350 original (en RG350P/M y RG280V/M no es necesario), as\u00ed como el flasheo de una imagen con Balena Etcher en Windows. En el v\u00eddeo la imagen que se utiliza es la de ROGUE limpio (fichero sd_image.bin ), pero el proceso para la imagen que se comenta aqu\u00ed (fichero panda_v10.1.img.gz , mapache_v10.1.img.gz , vison_v10.1.img.gz o musarana_v10.1.img.gz dependiendo de la versi\u00f3n de la consola) ser\u00eda el mismo sin m\u00e1s que seleccionar el fichero correspondiente en Balena Etcher. El formateo de la tarjeta que se hace en el v\u00eddeo en realidad no es necesario. El video s\u00f3lo es necesario seguirlo hasta el minuto 11:20, ya que a partir de ese punto lo que se hace es a\u00f1adir emuladores y juegos a la consola, cosas que en la imagen ya est\u00e1n incluidas. Selecci\u00f3n de frontend predeterminado \u00b6 Durante el primer arranque de la imagen, se ejecutan los procesos de ROGUE para consolidar el sistema. Esto supone varios reinicios. En alg\u00fan momento aparece un selector con cuatro opciones para elegir el launcher o frontend predeterminado: S\u00f3lo hay que seleccionar el launcher preferido con la cruceta (arriba/abajo) y confirmar con Start . En ese momento la consola se reiniciar\u00e1 de nuevo y apareceremos en el launcher elegido. Si en cualquier momento se quiere cambiar de launcher se puede volver a lanzar el selector por medio de la aplicaci\u00f3n Launcher selector : A\u00f1adir ROMs \u00b6 La imagen no incorpora ROMs ni BIOS, por lo que deberemos incorporarlas nosotros. Todos los emuladores y frontends est\u00e1n preconfigurados para encontrar las ROMs en rutas concretas pertenecientes a la tarjeta externa. Estos son los directorios que hay que respetar para instalar ROMs (se muestra la ruta relativa a la tarjeta externa; como sabemos roms/NEOGEO por ejemplo, se corresponde con /media/sdcard/roms/NEOGEO en el sistema de la consola): Ruta Sistema Extensiones admitidas roms/32X SEGA 32X .32x,.zip roms/A2600 Atari 2600 .bin,.a26 roms/A5200 Atari 5200 .a52 roms/A7800 Atari 7800 .a78 roms/AMIGA Commodore Amiga .adf,.sna,.zip roms/AMSTRAD Amstrad CPC .dsk,.hfe roms/ARCADE xMAME .zip roms/ATARIST Atari ST .st,.zip roms/C64 Commodore 64 .crt,.d64,.t64,.bin roms/COLECO ColecoVision .rom,.col roms/CPS CPS .zip roms/DAPHNE Daphne .zip roms/DOOM Doom .wad roms/DOSBOX DosBOX .bat,.exe,.com roms/FBA Final Burn Alpha .zip roms/FC Nintendo NES .nes,.zip roms/GB Nintendo GB .gb,.gz,.zip roms/GBA Nintendo GBA .gba,.zip roms/GBC Nintendo GBC .gbc,.zip roms/GG SEGA GG .gg,.zip roms/GW Nintendo G&W .ws,.wsc roms/INTELLI Intellivision .int roms/JAZZ OpenJazz (port) roms/LYNX Atari Lynx .lnx,.zip roms/MAME2003 MAME2003 .zip roms/MAME4ALL MAME4All .zip roms/MD SEGA MD .bin,.smd,.md,.zip roms/MSX MSX .rom,.zip roms/NEOGEO Neo Geo .zip roms/NGP Neo Geo Pocket .ngp,.ngc roms/OUTRUN Cannonball (port) roms/PCE PC Engine .pce,.tg16,.cue roms/PCECD PC Engine CD .pce,.tg16,.cue roms/PICO8 PICO-8 .png roms/POKEMINI Pokemon Mini .zip roms/PS PlayStation .mdf,.cue, .bin,.img,.ccd,.sub,.zip,.pbp,.chd roms/QUAKE Quake .pak roms/SCUMMVM ScummVM .svm roms/SEGACD SEGA CD .cue roms/SFC Nintendo SNES .smc,.sfc,.zip roms/SMS SEGA MS .sms,.zip roms/SOLARUS Solarus (port) .zip roms/SUPERVISION Watara Supervision .sv roms/TIC80 TIC-80 .tic roms/VB Nintendo VB .vb roms/VIDEOPAC Phillips Videopac .bin roms/WSC WonderSwan .ws,.wsc roms/ZX ZX Spectrum .z80,.scl,.trd,.tzx,.csw,.tap OpenBOR/Paks OpenBOR (port) .pak Advertencia : Ojo al caso de OpenBOR que se comporta de forma irregular al exigir una ruta fija en la tarjeta externa. En el caso de los sistemas para los que exista core RetroArch, tambi\u00e9n servir\u00e1n las extensiones zip y 7z , ya que se soportan a nivel de framework. Tambi\u00e9n se soporta la extensi\u00f3n chd en los cores RetroArch de sistemas basados en CD, es decir SEGACD y PCECD . A\u00f1adir BIOS \u00b6 Todos los emuladores instalados en la imagen (RetroArch incluido) tienen redirigidas las rutas donde deben estar las BIOS al directorio bios en la tarjeta externa. De forma similar al caso de las ROMs, el directorio bios en la ra\u00edz de la tarjeta externa, se corresponder\u00e1 con la ruta /media/sdcard/bios en el sistema de la consola. No todos los emuladores necesitan BIOS. Es el caso de las m\u00e1quinas que no la ten\u00edan o cuya funci\u00f3n se ha podido emular. A continuaci\u00f3n se indica el fichero de BIOS que habr\u00e1 que localizar as\u00ed como el lugar donde lo deberemos colocar. Para ayudar a identificar los ficheros correctos, se indica su tama\u00f1o en bytes y un hash MD5. Se marcan tambi\u00e9n los casos en que la BIOS es imprescindible para que funcione el emulador. En caso de indicarse que NO , el emulador funcionar\u00e1, pero se recomienda instalarla de cara a conseguir la mayor compatibilidad de los juegos. Para comprobar los hashes MD5 se recomienda la utilidad multiplataforma Quickhash . Los tama\u00f1os y hashes indicados son de BIOS que se han comprobado funcionales, pero no necesariamente las \u00fanicas posibles. Es decir, en algunas m\u00e1quinas existen varias versiones de BIOS posibles, normalmente por haber existido varios modelos de las m\u00e1quinas (siendo el caso de la PlayStation uno de los m\u00e1s t\u00edpicos), o por haber desarrollado alguien BIOS con capacidades mejoradas (aqu\u00ed el caso t\u00edpico es el de Neo Geo y su UNIBIOS). Sistema Ruta Tama\u00f1o Hash MD5 \u00bfNecesaria? Atari 5200 bios/5200.rom 2048 281f20ea4320404ec820fb7ec0693b38 S\u00ed Atari ST bios/rom 196608 036c5ae4f885cbf62c9bed651c6c58a8 S\u00ed SEGACD bios/bios_CD_E.bin 131072 e66fa1dc5820d254611fdcdba0662372 S\u00ed SEGACD bios/bios_CD_J.bin 131072 278a9397d192149e84e820ac621a8edd S\u00ed SEGACD bios/bios_CD_U.bin 131072 854b9150240a198070150e4566ae1290 S\u00ed Intellivision bios/exec.bin 8192 62e761035cb657903761800f4437b8af S\u00ed Intellivision bios/grom.bin 2048 0cd5946c6473e42e8e4c2137785e427f S\u00ed PC Engine CD bios/syscard3.pce 262144 390815d3d1a184a9e73adc91ba55f2bb S\u00ed Commodore Amiga bios/kick.rom 262144 82a21c1890cae844b3df741f2762d48d S\u00ed Nintendo Famicom Disk System bios/disksys.rom 8192 ca30b50f880eb660a320674ed365ef7a S\u00ed Atari Lynx bios/lynxboot.img 512 fcd403db69f54290b51035d82f835e7b S\u00ed Phillips Videopac bios/o2rom.bin 1024 562d5ebf9e030a40d6fabfc2f33139fd S\u00ed SNK Neo Geo bios/neogeo.zip 1950023 36241192dae2823eaf3bf464dde6dbc6 S\u00ed en FBA, No en RetroArch Nintendo GBA bios/gba_bios.bin 16384 a860e8c0b6d573d191e4ec7db1b1e4f6 No, aunque recomendable PlayStation bios/SCPH1001.BIN 524288 924e392ed05558ffdb115408c263dccf No, aunque muy recomendable","title":"RG350/RG280 Imagen"},{"location":"2021-04-03_RG350_imagen.html#presentacion","text":"Se comentan aqu\u00ed los detalles de una imagen de tarjeta interna preparada para las consolas de emulaci\u00f3n Anbernic RG350, RG350P, RG350M, RG280V y RG280M. La imagen es un volcado de una microSD de 4GB con sistema ROGUE (agradecimiento especial a Ninoh-FOX por su soporte), ports, emuladores y cores RetroArch y los frontends GMenu2X, SimpleMenu (agradecimiento especial a FGL82 por su soporte) y PyMenu. Se puede flashear sobre una tarjeta de ese tama\u00f1o o superior. Durante el primer arranque se expandir\u00e1 el tama\u00f1o de la partici\u00f3n principal hasta ocupar todo el espacio disponible en la tarjeta. Descarga de la imagen desde los siguientes enlaces: Panda (RG350 y RG350P) Mapache (RG350M) Vis\u00f3n (RG280V) Musara\u00f1a (RG280M) Alternativamente todas las im\u00e1genes y parches tambi\u00e9n pueden encontrarse en el canal Telegram Code Animal images . Utilizar el canal tiene la ventaja adicional de que se reciben notificaciones cuando aparecen parches o nuevas versiones de las im\u00e1genes. Los emuladores y los cores RetroArch tienen lanzadores personalizados con iconos que representan las m\u00e1quinas que emulan para mejor identificaci\u00f3n. Los nombres de los emuladores y cores tambi\u00e9n se han modificado con esta misma idea. Los ports o juegos instalados son los siguientes (algunos como Cannonball , OpenBOR , OpenJazz y Solarus necesitan ROMs en la tarjeta externa): Por \u00faltimo, en este documento pueden encontrarse detalles de los emuladores instalados y las configuraciones de RetroArch para los cores disponibles en la imagen.","title":"Presentaci\u00f3n"},{"location":"2021-04-03_RG350_imagen.html#backup-de-partidas-antes-de-flashear","text":"Si se ha estado utilizando la consola con otro sistema, seguramente nos interese guardar los savestates de las partidas que hayamos jugado. As\u00ed pues, antes de flashear esta imagen, conviene hacer backup de los mismos. Para facilitar esta tarea se ha creado la aplicaci\u00f3n Py Backup que se describe en este art\u00edculo y que viene preconfigurada con todos los directorios de savestates de los emuladores instalados en la imagen. B\u00e1sicamente el procedimiento para hacer el backup es el siguiente. Empezamos trabajando sobre la imagen que exista en la consola antes de flashear la que se ofrece aqu\u00ed: Instalar el OPK . Localizar la aplicaci\u00f3n instalada en el paso anterior. Se encontrar\u00e1 en la secci\u00f3n applications de los distintos launchers. Una vez encontrada abrirla. Pulsar B para empezar el backup y confirmar con A (al llegar a PCSX4All suele engancharse un buen rato porque los savestates de este emulador son pesados). Se pueden desactivar previamente los backups de los sistemas que no nos interesen, pero es m\u00e1s seguro dejar todos activos para evitar disgustos. Hasta aqu\u00ed para generar el backup. \u00c9ste se deja en el directorio backups de la tarjeta externa, dentro del cual aparecer\u00e1n una serie de ficheros con extensi\u00f3n .tgz . Una vez flasheada la imagen tendremos que hacer la restauraci\u00f3n. Para ello proceder de la siguiente forma: Abrir la aplicaci\u00f3n Py Backup que ya est\u00e1 preinstalada en la imagen. Pulsar X para empezar la restauraci\u00f3n del backup y confirmar con A . Advertencia : La correspondencia de las partidas o savestates depende de los nombres de las ROMs. Si guardamos una partida cuando por ejemplo la ROM se llamaba \"001. Catrap.gb\" si luego tratamos de recuperarla desde una ROM llamada \"Catrap.gb\" no nos va a funcionar. En ese caso tocar\u00e1 revisar el directorio de savestate correspondiente (en el caso de GB es /media/data/local/home/.gambatte/saves ) y renombrar el fichero para que corresponda con el nuevo nombre de la ROM. Por \u00faltimo, un peque\u00f1o tutorial en video:","title":"Backup de partidas antes de flashear"},{"location":"2021-04-03_RG350_imagen.html#flasheo-de-la-imagen","text":"La imagen est\u00e1 contenida en un \u00fanico fichero en formato img.gz . Esto significa que es un volcado directo de la tarjeta ( img ) comprimido ( gz ). El fichero tiene alrededor de 1GB de tama\u00f1o. Para flashear se recomienda utilizar el programa Balena Etcher que es capaz de utilizar este formato directamente adem\u00e1s de ser compatible con los tres sistemas principales (Windows, MacOS y Linux). La imagen se puede flashear en tarjetas de 4GB en adelante. En Linux resulta m\u00e1s r\u00e1pido y directo flashear con los siguientes comandos (sustituyendo el dispositivo /dev/mmcblk0 del ejemplo por el que corresponda en nuestro caso): $ sudo umount /dev/mmcblk0* $ gunzip panda_v10.1.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync No se recomienda flashear sobre la misma tarjeta Toshiba que trae la consola de f\u00e1brica. Se han observado problemas de rendimiento y errores con ella. Mejor buscar una tarjeta de marca de garant\u00eda y que sea r\u00e1pida. En este v\u00eddeo puede verse el proceso de apertura de la consola y extracci\u00f3n de la tarjeta interna en la RG350 original (en RG350P/M y RG280V/M no es necesario), as\u00ed como el flasheo de una imagen con Balena Etcher en Windows. En el v\u00eddeo la imagen que se utiliza es la de ROGUE limpio (fichero sd_image.bin ), pero el proceso para la imagen que se comenta aqu\u00ed (fichero panda_v10.1.img.gz , mapache_v10.1.img.gz , vison_v10.1.img.gz o musarana_v10.1.img.gz dependiendo de la versi\u00f3n de la consola) ser\u00eda el mismo sin m\u00e1s que seleccionar el fichero correspondiente en Balena Etcher. El formateo de la tarjeta que se hace en el v\u00eddeo en realidad no es necesario. El video s\u00f3lo es necesario seguirlo hasta el minuto 11:20, ya que a partir de ese punto lo que se hace es a\u00f1adir emuladores y juegos a la consola, cosas que en la imagen ya est\u00e1n incluidas.","title":"Flasheo de la imagen"},{"location":"2021-04-03_RG350_imagen.html#seleccion-de-frontend-predeterminado","text":"Durante el primer arranque de la imagen, se ejecutan los procesos de ROGUE para consolidar el sistema. Esto supone varios reinicios. En alg\u00fan momento aparece un selector con cuatro opciones para elegir el launcher o frontend predeterminado: S\u00f3lo hay que seleccionar el launcher preferido con la cruceta (arriba/abajo) y confirmar con Start . En ese momento la consola se reiniciar\u00e1 de nuevo y apareceremos en el launcher elegido. Si en cualquier momento se quiere cambiar de launcher se puede volver a lanzar el selector por medio de la aplicaci\u00f3n Launcher selector :","title":"Selecci\u00f3n de frontend predeterminado"},{"location":"2021-04-03_RG350_imagen.html#anadir-roms","text":"La imagen no incorpora ROMs ni BIOS, por lo que deberemos incorporarlas nosotros. Todos los emuladores y frontends est\u00e1n preconfigurados para encontrar las ROMs en rutas concretas pertenecientes a la tarjeta externa. Estos son los directorios que hay que respetar para instalar ROMs (se muestra la ruta relativa a la tarjeta externa; como sabemos roms/NEOGEO por ejemplo, se corresponde con /media/sdcard/roms/NEOGEO en el sistema de la consola): Ruta Sistema Extensiones admitidas roms/32X SEGA 32X .32x,.zip roms/A2600 Atari 2600 .bin,.a26 roms/A5200 Atari 5200 .a52 roms/A7800 Atari 7800 .a78 roms/AMIGA Commodore Amiga .adf,.sna,.zip roms/AMSTRAD Amstrad CPC .dsk,.hfe roms/ARCADE xMAME .zip roms/ATARIST Atari ST .st,.zip roms/C64 Commodore 64 .crt,.d64,.t64,.bin roms/COLECO ColecoVision .rom,.col roms/CPS CPS .zip roms/DAPHNE Daphne .zip roms/DOOM Doom .wad roms/DOSBOX DosBOX .bat,.exe,.com roms/FBA Final Burn Alpha .zip roms/FC Nintendo NES .nes,.zip roms/GB Nintendo GB .gb,.gz,.zip roms/GBA Nintendo GBA .gba,.zip roms/GBC Nintendo GBC .gbc,.zip roms/GG SEGA GG .gg,.zip roms/GW Nintendo G&W .ws,.wsc roms/INTELLI Intellivision .int roms/JAZZ OpenJazz (port) roms/LYNX Atari Lynx .lnx,.zip roms/MAME2003 MAME2003 .zip roms/MAME4ALL MAME4All .zip roms/MD SEGA MD .bin,.smd,.md,.zip roms/MSX MSX .rom,.zip roms/NEOGEO Neo Geo .zip roms/NGP Neo Geo Pocket .ngp,.ngc roms/OUTRUN Cannonball (port) roms/PCE PC Engine .pce,.tg16,.cue roms/PCECD PC Engine CD .pce,.tg16,.cue roms/PICO8 PICO-8 .png roms/POKEMINI Pokemon Mini .zip roms/PS PlayStation .mdf,.cue, .bin,.img,.ccd,.sub,.zip,.pbp,.chd roms/QUAKE Quake .pak roms/SCUMMVM ScummVM .svm roms/SEGACD SEGA CD .cue roms/SFC Nintendo SNES .smc,.sfc,.zip roms/SMS SEGA MS .sms,.zip roms/SOLARUS Solarus (port) .zip roms/SUPERVISION Watara Supervision .sv roms/TIC80 TIC-80 .tic roms/VB Nintendo VB .vb roms/VIDEOPAC Phillips Videopac .bin roms/WSC WonderSwan .ws,.wsc roms/ZX ZX Spectrum .z80,.scl,.trd,.tzx,.csw,.tap OpenBOR/Paks OpenBOR (port) .pak Advertencia : Ojo al caso de OpenBOR que se comporta de forma irregular al exigir una ruta fija en la tarjeta externa. En el caso de los sistemas para los que exista core RetroArch, tambi\u00e9n servir\u00e1n las extensiones zip y 7z , ya que se soportan a nivel de framework. Tambi\u00e9n se soporta la extensi\u00f3n chd en los cores RetroArch de sistemas basados en CD, es decir SEGACD y PCECD .","title":"A\u00f1adir ROMs"},{"location":"2021-04-03_RG350_imagen.html#anadir-bios","text":"Todos los emuladores instalados en la imagen (RetroArch incluido) tienen redirigidas las rutas donde deben estar las BIOS al directorio bios en la tarjeta externa. De forma similar al caso de las ROMs, el directorio bios en la ra\u00edz de la tarjeta externa, se corresponder\u00e1 con la ruta /media/sdcard/bios en el sistema de la consola. No todos los emuladores necesitan BIOS. Es el caso de las m\u00e1quinas que no la ten\u00edan o cuya funci\u00f3n se ha podido emular. A continuaci\u00f3n se indica el fichero de BIOS que habr\u00e1 que localizar as\u00ed como el lugar donde lo deberemos colocar. Para ayudar a identificar los ficheros correctos, se indica su tama\u00f1o en bytes y un hash MD5. Se marcan tambi\u00e9n los casos en que la BIOS es imprescindible para que funcione el emulador. En caso de indicarse que NO , el emulador funcionar\u00e1, pero se recomienda instalarla de cara a conseguir la mayor compatibilidad de los juegos. Para comprobar los hashes MD5 se recomienda la utilidad multiplataforma Quickhash . Los tama\u00f1os y hashes indicados son de BIOS que se han comprobado funcionales, pero no necesariamente las \u00fanicas posibles. Es decir, en algunas m\u00e1quinas existen varias versiones de BIOS posibles, normalmente por haber existido varios modelos de las m\u00e1quinas (siendo el caso de la PlayStation uno de los m\u00e1s t\u00edpicos), o por haber desarrollado alguien BIOS con capacidades mejoradas (aqu\u00ed el caso t\u00edpico es el de Neo Geo y su UNIBIOS). Sistema Ruta Tama\u00f1o Hash MD5 \u00bfNecesaria? Atari 5200 bios/5200.rom 2048 281f20ea4320404ec820fb7ec0693b38 S\u00ed Atari ST bios/rom 196608 036c5ae4f885cbf62c9bed651c6c58a8 S\u00ed SEGACD bios/bios_CD_E.bin 131072 e66fa1dc5820d254611fdcdba0662372 S\u00ed SEGACD bios/bios_CD_J.bin 131072 278a9397d192149e84e820ac621a8edd S\u00ed SEGACD bios/bios_CD_U.bin 131072 854b9150240a198070150e4566ae1290 S\u00ed Intellivision bios/exec.bin 8192 62e761035cb657903761800f4437b8af S\u00ed Intellivision bios/grom.bin 2048 0cd5946c6473e42e8e4c2137785e427f S\u00ed PC Engine CD bios/syscard3.pce 262144 390815d3d1a184a9e73adc91ba55f2bb S\u00ed Commodore Amiga bios/kick.rom 262144 82a21c1890cae844b3df741f2762d48d S\u00ed Nintendo Famicom Disk System bios/disksys.rom 8192 ca30b50f880eb660a320674ed365ef7a S\u00ed Atari Lynx bios/lynxboot.img 512 fcd403db69f54290b51035d82f835e7b S\u00ed Phillips Videopac bios/o2rom.bin 1024 562d5ebf9e030a40d6fabfc2f33139fd S\u00ed SNK Neo Geo bios/neogeo.zip 1950023 36241192dae2823eaf3bf464dde6dbc6 S\u00ed en FBA, No en RetroArch Nintendo GBA bios/gba_bios.bin 16384 a860e8c0b6d573d191e4ec7db1b1e4f6 No, aunque recomendable PlayStation bios/SCPH1001.BIN 524288 924e392ed05558ffdb115408c263dccf No, aunque muy recomendable","title":"A\u00f1adir BIOS"},{"location":"2021-10-30_raspi_zero_2_upgrade.html","text":"Justo hace tres a\u00f1os realic\u00e9 una instalaci\u00f3n de una Raspberry Pi Zero en una impresora 3D Anet A8 para gestionar las impresiones con el software OctoPrint. El uso de este modelo de Raspberry Pi no est\u00e1 recomendado, ya que la potencia de la misma es un poco ajustada. Yo mismo hab\u00eda notado que algunas impresiones complejas (sobre todo cuando hay muchas curvas), se ralentizaban ligeramente. No tanto como para que dejara de merecer la pena la instalaci\u00f3n, pero ciertamente la situaci\u00f3n no era conveniente. Tras el anuncio del nuevo modelo Raspberry Pi Zero 2 W en seguida pens\u00e9 que ser\u00eda perfecto para esta funci\u00f3n, as\u00ed que he procedido a la actualizaci\u00f3n. Aqu\u00ed describo los detalles del cambio. Flasheo OctoPrint \u00b6 Antes de flashear En esta instalaci\u00f3n vamos a rescatar la configuraci\u00f3n de la instalaci\u00f3n anterior , por lo que si queremos flashear sobre la misma tarjeta, habr\u00e1 que adelantar los pasos que se comentan en el apartado Configuraci\u00f3n OctoPrint Al igual que en la instalaci\u00f3n original, se utiliza la distribuci\u00f3n oficial que adem\u00e1s se puede instalar desde la utilidad Raspberry Pi Imager (se encuentra dentro de la secci\u00f3n Other specific purpose OS ). Configuraci\u00f3n de red \u00b6 Una vez flasheado OctoPrint, lo primero que interesa es conseguir conectividad a trav\u00e9s de Wifi para poder continuar haciendo ajustes por SSH. El servicio SSH est\u00e1 activado por defecto en la imagen de OctoPrint. Para conseguir que la nueva instalaci\u00f3n de OctoPrint se conecte a mi router con una IP fija, hacemos lo siguiente: Montar la tarjeta recien flasheada en el PC. Editar el fichero octopi-wpa-supplicant.txt que hay en la partici\u00f3n boot. Descomentar el bloque que tiene la leyenda ## WPA/WPA2 secured , sustituyendo los valores de mi SSID y password. Sustituir UK por ES en el par\u00e1metro country que hay casi al final. Editar el fichero etc/dhcpcd.conf que hay en la partici\u00f3n rootfs. Al final del mismo a\u00f1adir las siguientes l\u00edneas (sustituyendo IP , GATEWAY y DNS por lo que corresponda): interface wlan0 static ip_address=IP/24 static routers=GATEWAY static domain_name_servers=DNS Tras hacer estos cambios, insertar la tarjeta en la Pi Zero 2 y aliment\u00e1ndola (y esperando a que se reinicie un par de veces, ya que en el primer arranque se expande la partici\u00f3n rootfs para ocupar toda la tarjeta), se consigue acceder por SSH con el usuario pi y el habitual password raspberry . Lo primero que conviene hacer como el propio sistema se encarga de recomendar, es cambiar el password del usuario pi con el comando passwd . Configuraci\u00f3n de puerto serie \u00b6 Tal y como se coment\u00f3 en el art\u00edculo de la instalaci\u00f3n original , el puerto serie f\u00edsico que hay en el GPIO de Raspberry Pi est\u00e1 en uso por el adaptador Bluetooth integrado. Hay que desactivar este adaptador y la consola serie que se asocia al mismo que nos da la posibilidad de iniciar sesi\u00f3n por el puerto serie. Para ello hacemos lo siguiente: Volver a montar la microSD en el PC. Editar el fichero config.txt que hay en la partici\u00f3n boot. A\u00f1adir al final las lineas siguientes: dtoverlay=pi3-miniuart-bt enable_uart=1 Volver a poner la microSD en la Raspberry y arrancar el sistema. Tras iniciar sesi\u00f3n por SSH ejecutar la utilidad raspi-config con sudo . Acudir a la secci\u00f3n Interfacing options > Serial y responder de la siguiente forma a las dos preguntas que se har\u00e1n: Would you like a login shell to be accessible over serial? -> No Would you like the serial port hardware to be enabled? -> Yes Reiniciar. Conexi\u00f3n f\u00edsica \u00b6 Vamos a aprovechar el viejo adaptador artesanal que se realiz\u00f3 para la instalaci\u00f3n original . Tras desoldarlo, esta vez instalamos una tira de pins hembra en el adaptador y una macho en la Raspi Zero 2, para poder extraerla de la impresora y utilizarla para otros proyectos cuando la impresora est\u00e9 parada. Configuraci\u00f3n OctoPrint \u00b6 En este caso vamos a aprovechar la configuraci\u00f3n anterior de OctoPrint generando un backup y carg\u00e1ndolo en la nueva instalaci\u00f3n. Para ello: Arrancar la vieja instalaci\u00f3n. Acudir a la siguiente ruta en el interfaz web: Settings (llave inglesa) > OCTOPRINT > Backup & Restore . All\u00ed pulsar el bot\u00f3n Create backup now . Tras esperar un buen rato aparecer\u00e1 una entrada en el listado de backups realizados: Pulsar el icono de descarga para obtener el fichero zip. Apagar la vieja instalaci\u00f3n y arrancar la nueva. Al abrir el interfaz web encontraremos un asistente, siendo el primer paso precisamente el que permite cargar el backup. Finalizaci\u00f3n \u00b6 Tras este paso ya habr\u00edamos terminado. S\u00f3lo quedar\u00eda instalar la Raspi Zero 2 en el lugar que ocupaba la vieja, tal y como se ve\u00eda en la imagen de cabecera.","title":"Raspberry Pi Zero 2 W upgrade"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#flasheo-octoprint","text":"Antes de flashear En esta instalaci\u00f3n vamos a rescatar la configuraci\u00f3n de la instalaci\u00f3n anterior , por lo que si queremos flashear sobre la misma tarjeta, habr\u00e1 que adelantar los pasos que se comentan en el apartado Configuraci\u00f3n OctoPrint Al igual que en la instalaci\u00f3n original, se utiliza la distribuci\u00f3n oficial que adem\u00e1s se puede instalar desde la utilidad Raspberry Pi Imager (se encuentra dentro de la secci\u00f3n Other specific purpose OS ).","title":"Flasheo OctoPrint"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#configuracion-de-red","text":"Una vez flasheado OctoPrint, lo primero que interesa es conseguir conectividad a trav\u00e9s de Wifi para poder continuar haciendo ajustes por SSH. El servicio SSH est\u00e1 activado por defecto en la imagen de OctoPrint. Para conseguir que la nueva instalaci\u00f3n de OctoPrint se conecte a mi router con una IP fija, hacemos lo siguiente: Montar la tarjeta recien flasheada en el PC. Editar el fichero octopi-wpa-supplicant.txt que hay en la partici\u00f3n boot. Descomentar el bloque que tiene la leyenda ## WPA/WPA2 secured , sustituyendo los valores de mi SSID y password. Sustituir UK por ES en el par\u00e1metro country que hay casi al final. Editar el fichero etc/dhcpcd.conf que hay en la partici\u00f3n rootfs. Al final del mismo a\u00f1adir las siguientes l\u00edneas (sustituyendo IP , GATEWAY y DNS por lo que corresponda): interface wlan0 static ip_address=IP/24 static routers=GATEWAY static domain_name_servers=DNS Tras hacer estos cambios, insertar la tarjeta en la Pi Zero 2 y aliment\u00e1ndola (y esperando a que se reinicie un par de veces, ya que en el primer arranque se expande la partici\u00f3n rootfs para ocupar toda la tarjeta), se consigue acceder por SSH con el usuario pi y el habitual password raspberry . Lo primero que conviene hacer como el propio sistema se encarga de recomendar, es cambiar el password del usuario pi con el comando passwd .","title":"Configuraci\u00f3n de red"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#configuracion-de-puerto-serie","text":"Tal y como se coment\u00f3 en el art\u00edculo de la instalaci\u00f3n original , el puerto serie f\u00edsico que hay en el GPIO de Raspberry Pi est\u00e1 en uso por el adaptador Bluetooth integrado. Hay que desactivar este adaptador y la consola serie que se asocia al mismo que nos da la posibilidad de iniciar sesi\u00f3n por el puerto serie. Para ello hacemos lo siguiente: Volver a montar la microSD en el PC. Editar el fichero config.txt que hay en la partici\u00f3n boot. A\u00f1adir al final las lineas siguientes: dtoverlay=pi3-miniuart-bt enable_uart=1 Volver a poner la microSD en la Raspberry y arrancar el sistema. Tras iniciar sesi\u00f3n por SSH ejecutar la utilidad raspi-config con sudo . Acudir a la secci\u00f3n Interfacing options > Serial y responder de la siguiente forma a las dos preguntas que se har\u00e1n: Would you like a login shell to be accessible over serial? -> No Would you like the serial port hardware to be enabled? -> Yes Reiniciar.","title":"Configuraci\u00f3n de puerto serie"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#conexion-fisica","text":"Vamos a aprovechar el viejo adaptador artesanal que se realiz\u00f3 para la instalaci\u00f3n original . Tras desoldarlo, esta vez instalamos una tira de pins hembra en el adaptador y una macho en la Raspi Zero 2, para poder extraerla de la impresora y utilizarla para otros proyectos cuando la impresora est\u00e9 parada.","title":"Conexi\u00f3n f\u00edsica"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#configuracion-octoprint","text":"En este caso vamos a aprovechar la configuraci\u00f3n anterior de OctoPrint generando un backup y carg\u00e1ndolo en la nueva instalaci\u00f3n. Para ello: Arrancar la vieja instalaci\u00f3n. Acudir a la siguiente ruta en el interfaz web: Settings (llave inglesa) > OCTOPRINT > Backup & Restore . All\u00ed pulsar el bot\u00f3n Create backup now . Tras esperar un buen rato aparecer\u00e1 una entrada en el listado de backups realizados: Pulsar el icono de descarga para obtener el fichero zip. Apagar la vieja instalaci\u00f3n y arrancar la nueva. Al abrir el interfaz web encontraremos un asistente, siendo el primer paso precisamente el que permite cargar el backup.","title":"Configuraci\u00f3n OctoPrint"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#finalizacion","text":"Tras este paso ya habr\u00edamos terminado. S\u00f3lo quedar\u00eda instalar la Raspi Zero 2 en el lugar que ocupaba la vieja, tal y como se ve\u00eda en la imagen de cabecera.","title":"Finalizaci\u00f3n"},{"location":"2022-04-17_vr.html","text":"El 17 de febrero de 2022 utilic\u00e9 por primera vez unas Oculus Quest 2 . Menciono la fecha porque siento que puede ser un punto de inflexi\u00f3n en mi vida. Supongo que suena exagerado, pero ese d\u00eda me convenc\u00ed de repente de todos los pron\u00f3sticos hechos en tantas pel\u00edculas y libros de ciencia ficci\u00f3n. Bien utilizada, la realidad virtual puede ser una herramienta potent\u00edsima para expandir o permitir la entrada a terrenos de dif\u00edcil acceso para muchas personas. Pero el prop\u00f3sito de este post no era hablar de filosof\u00eda, sino reflejar algunos de los aprendizajes que he hecho desde ese d\u00eda por si alguien se decide a recorrer la senda hacia este nuevo \"nuevo mundo\". Hay actualmente en el mercado muchas otras gafas de realidad virtual, pero aqu\u00ed me voy a restringir a lo que conozco, las Oculus/Meta Quest 2 (a partir de ahora utilizar\u00e9 s\u00f3lo el nombre Oculus por ser el m\u00e1s representativo de la historia de estas gafas). Estas \u00faltimas son las que m\u00e1s cuota de mercado tienen actualmente seguidas por las PlayStation VR. El resto de gafas del mercado pertenecen al mismo tipo que las segundas, es decir vinculadas a otro dispositivo como una PS4 o un PC. La propuesta de Oculus difiere en cuanto a que las gafas son independientes o autosuficientes. Tienen menos potencia bruta que el resto, pero a cambio tienen otras ventajas. Ser\u00edan un poco equivalentes al concepto de la Nintendo Switch, que sin poderse comparar en potencia a las consolas de \u00faltima generaci\u00f3n del resto de fabricantes, sacan provecho a sus limitaciones por la v\u00eda de la portabilidad y el menor precio. Menciono todo esto m\u00e1s que nada porque los conceptos, mercado y dispositivos auxiliares que mencionar\u00e9 a continuaci\u00f3n, en su mayor\u00eda no van a poder ser trasladables a otras plataformas. Considero las Oculus Quest 2 lo que los ingleses llaman un MVP (Minimum Viable Product). Es decir, se nota que en su dise\u00f1o se han resuelto la mayor\u00eda de los compromisos con el criterio de tener algo funcional y v\u00e1lido pero al menor coste posible. El producto final es funcional desde un principio, pero tiene margen de mejora y se deja al usuario el trabajo de (si lo estima oportuno) abordar esas mejoras sustituyendo algunas de las piezas o adquiriendo accesorios. Varios de los apartados siguientes cubren algunos de esos aspectos que se pueden mejorar. Obtener aplicaciones \u00b6 En general los juegos/experiencias/aplicaciones (a partir de ahora los llamaremos \"contenidos\") se obtienen de la Oculus Store . Hay que decir que los precios en general son considerablemente m\u00e1s altos que en plataformas VR del ambiente PC. Oculus Quest 2 se puede considerar una consola de videojuegos, y los precios de los contenidos suelen estar acorde a lo que se encuentra en ese terreno. El sistema de las gafas en realidad es Android y podr\u00eda pensarse que los precios estar\u00edan en la l\u00ednea de lo que se ve en la tienda de Google. Supongo que el list\u00f3n de precios superior est\u00e1 relacionado con el mayor coste de producci\u00f3n que tienen los contenidos VR respecto a los habituales en Android. Pero como comentaba antes, el mismo juego en SteamVR para PC/gafas no independientes, puede costar el 20% de lo que cuesta en la tienda de Oculus. La buena noticia es que para empezar hay una buena cantidad de contenidos gratuitos como luego veremos. La Oculus Store tiene criterios muy extrictos para permitir la entrada de contenidos. Por ese motivo, al principio de la comercializaci\u00f3n de las gafas, surgi\u00f3 un mercado paralelo no controlador por la marca llamado Sidequest . Dentro de esta \"tienda alternativa\" adem\u00e1s de haber contenidos que como dec\u00eda antes no podr\u00edan entrar en la tienda oficial por los filtros que \u00e9sta tiene, hay mucho material indie muchas veces gratuito. Tambi\u00e9n demos de aplicaciones finales en las que se puede probar parte del contenido antes de adquirirlo. La pega es que hay que realizar algunas manualidades para conseguir instalar los contenidos que s\u00f3lo est\u00e1n en Sidequest. No es complicado; hay que activar el modo desarrollador en las gafas, abrir una cuenta de desarrollador (gratuita) y conectar las gafas a un PC por USB. Como Oculus se dio cuenta de que Sidequest estaba desviando la atenci\u00f3n de su Oculus Store oficial, finalmente abri\u00f3 un programa para aceptar todos esos contenidos que no pod\u00edan entrar en la tienda y que terminaban en Sidequest. Se llama App Lab y est\u00e1 parcialmente integrado en la tienda oficial. Los contenidos de App Lab no aparecen en las b\u00fasquedas de la tienda oficial, pero los enlaces desde App Lab permiten instalar con la tienda oficial sin tener que hacer manualidades como en Sidequest. S\u00f3lo recibiremos un aviso al instalar en el que se nos recuerda que lo que vamos a instalar puede tener fallos o no estar terminado del todo. Una cuarta v\u00eda para acceder a contenidos es utilizar el navegador web integrado en el sistema y acceder a los cada vez m\u00e1s numerosos contenidos compatibles con los est\u00e1ndares WebXR y OpenXR . Hay incluso sitios especializados en estos contenidos, como por ejemplo ConstructArcade . Esta tecnolog\u00eda es muy accesible. Si se tiene inter\u00e9s recomiendo echar un vistazo a los ejemplos de c\u00f3digo que pueden encontrarse aqu\u00ed . Me cost\u00f3 5 minutos improvisar esta escena VR con el logo de niubit. Devoluci\u00f3n aplicaciones \u00b6 Existe una pol\u00edtica de devoluci\u00f3n de aplicaciones en la tienda oficial que mitiga en parte el v\u00e9rtigo que producen los altos precios para adquirir algo que no se ha podido ver antes (y en el mundo VR esto es algo habitual, ya que un v\u00eddeo de YouTube o un art\u00edculo de un blog no puede transmitir la inmersi\u00f3n). Las condiciones para solicitar la devoluci\u00f3n son: Hacerlo antes de 14 d\u00edas desde la compra. No haber utilizado la aplicaci\u00f3n por m\u00e1s de 2 horas. Ofertas y cupones \u00b6 Como comentaba antes, los precios de los contenidos en la tienda oficial son en general elevados. Los juegos punteros suelen rondar los 19/29\u20ac. Algunos se acercan a los 40\u20ac. No s\u00e9 si por este motivo Oculus ha implantado varios mecanismos para hacer m\u00e1s accesibles/apetecibles los contenidos. Los mecanismos son los siguientes: Descuentos temporales Cupones temporales Regalo de cr\u00e9dito por recomendaci\u00f3n Veamos cada uno de los sistemas por separado. Descuentos temporales \u00b6 Se trata simplemente de ofertas que duran unos d\u00edas. Son muy frecuentes, por lo que he desarrollado el h\u00e1bito de esperar a que el contenido que me interese se ponga en oferta. Por ejemplo, en los s\u00f3lo dos meses de tiempo que llevo atento a la tienda, uno de los juegos que me gustan ha estado dos veces de oferta como puede verse en el siguiente pantallazo que acabo de hacer: En la ficha de detalle del contenido se indica claramente la duraci\u00f3n de la oferta con una cuenta atr\u00e1s que incluye segundos, por lo que tendremos un control muy preciso sobre la duraci\u00f3n de la misma. Cupones temporales \u00b6 Son cupones de descuento personales que llegan a trav\u00e9s de notificaciones en la aplicaci\u00f3n Oculus que se instala en el tel\u00e9fono. En los dos meses que llevo he recibidos dos cupones de este tipo, uno con un 25% de descuento y otro con un 30%. El cup\u00f3n suele durar una semana y se puede aplicar s\u00f3lo a una compra. Los cupones de este tipo se pueden acumular con los descuentos temporales anteriores por lo que combinando ambos descuentos se puede adquirir un contenido pr\u00e1cticamente por la mitad de precio. Comentar sobre los cupones temporales que si se aplican sobre un contenido que luego devolvemos, se nos devuelve el importe de la aplicaci\u00f3n sin aplicar el cup\u00f3n, es decir que nos devuelven m\u00e1s cr\u00e9dito del que nos cobraron al hacer la compra con el cup\u00f3n aplicado. No s\u00e9 si se trata de un fallo de la plataforma o algo deliberado, pero esto anima a utilizar los cupones temporales antes de que caduquen. As\u00ed, si tenemos un cup\u00f3n del 30% pr\u00f3ximo a caducar, merece la pena arriesgarnos a comprar una aplicaci\u00f3n con \u00e9l para probarla y luego devolverla. Obtendremos el descuento que lograba el cup\u00f3n como sobrecr\u00e9dito para adquirir otros contenidos en el futuro. Es decir en cierto modo conseguiremos romper la fecha de caducidad del cup\u00f3n. Regalo de cr\u00e9dito por recomendaci\u00f3n \u00b6 Finalmente, existe un programa de recomendaci\u00f3n por el cual si un amigo activa la cuenta que luego utiliza en unas gafas nuevas por medio de un enlace que nosotros le enviamos, el amigo recibe inmediatamente 30\u20ac de cr\u00e9dito para la Oculus Store (para hardware y software) y nosotros tambi\u00e9n recibimos 30\u20ac, aunque pasado un mes. Si alguien piensa adquirir las gafas y no tiene a nadie que le env\u00ede el enlace de recomendaci\u00f3n, que me lo pida :-) Mareo \u00b6 Cuando se habla de realidad virtual, uno de las primeras cuestiones que surgen es la del mareo. Precisamente fue el principal motivo por el que no me lanc\u00e9 directamente a por las Quest cuando las conoc\u00ed. Como casi siempre los temores se disiparon al escuchar a alguien de confianza y con experiencia en el tema hablando de ello. Resumo a continuaci\u00f3n las ideas que tengo sobre esta cuesti\u00f3n ahora mismo. Para empezar, y de forma muy superficial, comentar\u00e9 que el mareo se produce fundamentalmente por la discrepancia en la percepci\u00f3n de movimiento entre los distintos sentidos, sobre todo el del equilibrio (el o\u00eddo interno que mide las aceleraciones y giros que sufre el cuerpo) y el de la vista. Aqu\u00ed hay que volver a hablar de la diferencia entre las gafas dependientes (del PC o la PlayStation) y las independientes como Quest. En las primeras, si nos enfrentamos a una experiencia que requiere desplazarnos, como puede ser visitar la recreaci\u00f3n de un castillo, por ejemplo, no tendremos m\u00e1s remedio que indicar los desplazamientos con los mandos. En Quest, siempre que nos movamos dentro del espacio de seguridad que tengamos definido para jugar, podremos desplazarnos con nuestros pies, es decir caminando normalmente. Lo primero puede llegar a marear, lo segundo rotundamente no. Naturalmente con Quest en algunas experiencias tambi\u00e9n necesitaremos alg\u00fan tipo de mecanismo de movimiento con los mandos, ya que el espacio de seguridad es limitado. As\u00ed que vamos a hablar algo m\u00e1s sobre en qu\u00e9 consisten estos desplazamientos con los mandos. El desplazamiento con los mandos puede ser de varios tipos, vamos a describirlos por separado: Suave : Ser\u00eda el equivalente al que se utiliza en los videojuegos cl\u00e1sicos (no VR), es decir el que indicamos con la cruceta o el stick. \u00c9ste es con diferencia el sistema de movimiento que m\u00e1s marea, sobre todo en movimientos r\u00e1pidos y laterales. Si son movimientos lentos y sobre todo hacia delante, no suele haber demasiado problema. Este tipo de movimiento es casi imprescindible en los populares juegos tipo FPS, por lo que no se recomienda empezar por este tipo de juegos. La mayor\u00eda de las personas hablan de que con el tiempo se desarrollan unas \"piernas virtuales\" o \"piernas VR\" y el mareo deja de aparecer al utilizar este sistema de movimiento. Como casi todos los problemas que queramos superar, requiere que nos enfrentemos a \u00e9l, es decir que lo pasemos mal durante una temporada mientras desarrollamos esas \"piernas virtuales\". Se supone que durante esta fase de aprendizaje ayuda el simular el movimiento en la realidad dando peque\u00f1os pasos (sin avanzar) mientras ejecutamos con el mando el gesto de avanzar. Tambi\u00e9n se recomienda hacer movimientos m\u00e1s lentos al principio, lo que normalmente se puede controlar ya que el desplazamiento se suele realizar con los sticks anal\u00f3gicos. Yo todav\u00eda estoy en ello, sobre todo porque los FPS son los juegos que menos me llaman. Desplazamiento con gestos : En este caso tambi\u00e9n vamos a conseguir desplazarnos suavemente y sin realizar un desplazamiento en la realidad, pero en lugar de utilizar el mando para indicar el sentido en que queremos movernos, lo haremos con alg\u00fan gesto con las manos. Por alg\u00fan motivo nuestro cerebro no tiene tantos problemas para gestionar la discrepancia en los sentidos al hacerlo de esta forma. Dos ejemplos: Gorilla Tag : Este juego es un poco el paradigma de lo que hablamos. Para avanzar en este juego de persecuci\u00f3n entre \u00e1rboles la \u00fanica forma es impulsarnos hacia delante golpeando el suelo con nuestras manos, como si salt\u00e1ramos con ellas. Mission: ISS: Quest : Fue una de las primeras experiencias VR que disfrut\u00e9. Es una recreaci\u00f3n de la ISS. En el tutorial te ense\u00f1an a moverte por el interior de la estaci\u00f3n flotando como hacen los astronautas, impuls\u00e1ndonos con uno de los sticks, es decir con un movimiento \"suave\". El resultado fue un mareo inmediato. Luego descubr\u00ed (seguramente lo menciona el propio tutorial, ya no recuerdo) que tambi\u00e9n me pod\u00eda impulsar con las manos desde alg\u00fan agarre. O simplemente golpeando una pared como en Gorilla Tag. De esa manera el mareo no surgi\u00f3. Teletransporte : En este caso se\u00f1alamos con el mando el punto al que nos queremos desplazar y aparecemos all\u00ed instant\u00e1neamente. Esta forma de desplazamiento no marea nada en absoluto, pero dependiendo del tipo de juego puede arruinar la experiencia, ya que si los desplazamientos tienen que ser muy r\u00e1pidos, tendremos la sensaci\u00f3n de que estamos viendo una de esas pel\u00edculas actuales de superh\u00e9roes en las que el director no es capaz de mantener el plano 2 segundos. Es perfecta sin embargo para juegos reposados como Walkabout Mini Golf . Hablando de este juego, comentar que en \u00e9l se combinan las dos t\u00e9cnicas que menos marean (desplazamiento con nuestros pies dentro del espacio de seguridad y teletransporte), pero hay que decir que ambos sistemas encajan a la perfecci\u00f3n a la din\u00e1mica del mini golf. Otro aspecto que puede desembocar en mareo es el de la baja tasa de refresco, que puede llegar a producir mareo, ya no al desplazarnos dentro del entorno virtual, sino simplemente al girar la cabeza. En el fondo se trata de otra versi\u00f3n del mismo problema, es decir, si la tasa de refresco es muy baja (pongamos 30Hz), al hacer un giro r\u00e1pido de la cabeza vamos a ver una secuencia de 2 \u00f3 3 frames que se repartir\u00e1n a lo largo del giro, habiendo por tanto mucha discrepancia entre lo que vemos y lo que nuestro cerebro esperar\u00eda percibir. Este problema se puede decir que a d\u00eda de hoy ya no existe, es decir era algo que afectaba a las gafas de generaciones anteriores. Quest 2 trabaja por ejemplo a 90Hz en general y se puede incluso overclockear a 120Hz a costa de menor duraci\u00f3n de la bater\u00eda. Con esas tasas de refresco este problema se puede considerar resuelto. Aplicaciones recomendables \u00b6 Lo siguiente es una lista de los contenidos m\u00e1s interesantes que he encontrado para las Oculus Quest 2 hasta ahora. Anne Frank House VR : [gratis] Reproducci\u00f3n y visita guiada (en varios idiomas incluido el espa\u00f1ol) de la casa donde Anne estuvo escondida con 7 personas m\u00e1s durante dos a\u00f1os. \u00c1ltamente recomendable. Apollo 11 : [9,99\u20ac] Recreaci\u00f3n de varias maniobras clave del viaje del Apollo 11. S\u00f3lo para espaciotrastornados. Al resto seguramente no le compense pagar los 10\u20ac. Bait! : [gratis] Juego de pesca bastante simp\u00e1tico. Es sencillo y relajante y tambi\u00e9n resulta una experiencia muy accesible cuando se empieza. Beat Saber - Demo : [gratis] Beat Saber es una de las aplicaciones m\u00e1s populares de la plataforma. Pero como coment\u00e1bamos en el apartado correspondiente, eso suele significar unos 30\u20ac. Termin\u00e9 comprando la aplicaci\u00f3n completa utilizando uno de los peri\u00f3dicos cupones . Al principio estuve a punto de devolverla porque a pesar de que la aplicaci\u00f3n me parece casi perfecta, la selecci\u00f3n de temas dista bastante de mis gustos personales. La mayor\u00eda parecen temas motivadores de estos que ponen en los gimnasios o en algunas tiendas de ropa. Al final encontr\u00e9 unos pocos temas pasables y la calidad y el inter\u00e9s que tengo en experiencias deportivas hizo que la mantuviera. Bigscreen Beta : [gratis] Una especie de sala de cine privada o p\u00fablica (hay varias opciones) en la que ver acompa\u00f1ado de otras personas contenidos de v\u00eddeo ya sea propuestos por la propia plataforma, alojados en la red o que tengan en posesi\u00f3n todos los que est\u00e1n en la sala. No lo he probado, pero en teor\u00eda si un mismo fichero lo tuvi\u00e9ramos un amigo y yo, podr\u00edamos verlo juntos. Bogo : [gratis] Una especie de Tamagotchi, es decir una mascota que tienes que cuidar/jugar/alimentar. Reconozco que s\u00f3lo lo he abierto un par de veces, pero viene bien aunque s\u00f3lo sea para ense\u00f1ar la VR a las visitas. Crisis VRigade : [4,99\u20ac] Uno de mis juegos favoritos de todos los tiempos es Time Crisis de PlayStation. Los aficionados a los juegos de pistola saben que es un g\u00e9nero que se perdi\u00f3 cuando la tecnolog\u00eda de los televisores pas\u00f3 del CRT a las pantallas planas LCD/Plasma. Por lo visto, salvando las distancias de la precisi\u00f3n que permit\u00eda la combinaci\u00f3n pistola/CRT, este g\u00e9nero ha reaparecido en el ambiente VR. As\u00ed que cuando localic\u00e9 este juego gracias a la recomendaci\u00f3n de un amigo, me lanc\u00e9 a por \u00e9l. Realmente el t\u00edtulo del juego parece hacer referencia a Time Crisis. Crisis VRigade es un juego que tiene algunos a\u00f1os y viene de otras plataformas, por lo que los gr\u00e1ficos no son muy punteros. Existe una segunda parte con gr\u00e1ficos m\u00e1s propios de las Quest 2 pero cuesta 19,99\u20ac y adem\u00e1s no est\u00e1 en espa\u00f1ol. Hasta que no termine el primero no considero adquirir el segundo. A\u00fan no lo tengo muy jugado (maldito Walkabout), pero lo poco que prob\u00e9 me gust\u00f3 mucho. Realmente lo m\u00e1s cercano a Time Crisis que recuerdo. ConstructArcade : [gratis - web] Recopilaci\u00f3n de minijuegos realizados sobre WebXR. DeoVR Quest : [gratis] Se trata de un media player. \u00datil para reproducir contenidos de v\u00eddeo que hayamos copiado a las gafas o que tengamos accesible por red en nuestro ordenador o NAS (realmente esto \u00faltimo no lo he probado a\u00fan). Echo VR : [gratis] Uno de los juegos m\u00e1s populares. De nuevo no he pasado del tutorial inicial pero realmente no me cuesta imaginar que ser\u00e1 interesante. Es una especie de balonmano multijugador en ingravidez. Habr\u00e1 que explorarlo. Eleven Table Tennis : [19,99\u20ac] La primera aplicaci\u00f3n que compr\u00e9 y una de mis favoritas. El juego tiene unos men\u00fas muy mejorables, pero una vez que arrancas las partidas es simplemente de 10. Juego habitualmente con un amigo y los dos opinamos que es dif\u00edcilmente mejorable en ese aspecto. Dadas las caracter\u00edsticas del Ping Pong, en cuanto al espacio necesario para jugarlo y los esfuerzos que requiere (peso de paleta y pelota) encaja a la perfecci\u00f3n en la simulaci\u00f3n VR. Con el tenis de tama\u00f1o real por ejemplo habr\u00eda que llegar a algunos compromisos. Eso s\u00ed, por la velocidad del juego, para jugar con un oponente humano hay que vigilar la latencia de la conexi\u00f3n. Elixir : [gratis] Otro imprescindible, aunque en este caso de corto recorrido, es decir, se termina en seguida y sabe a poco, pero es perfecto. No quisiera spoilear la experiencia, simplemente hay que disfrutarlo. Uno de los pocos con el audio en espa\u00f1ol y de calidad. Goliath: Playing with Reality : [gratis] Esta experiencia es inclasificable. Es en general una historia, aunque extra\u00f1a, muy extra\u00f1a. En algunos pasajes hay bastante interacci\u00f3n, aunque en general hay que dejarse llevar. Muy interesante. Gorilla Tag : [gratis] Un juego inclasificable. Es muy indie y los gr\u00e1ficos parecen no estar a la altura, pero de nuevo creo que es un juego multiplataforma y desde luego no parece venir de un gran estudio. Pero desde luego es interesante. Es jugar al \"tu la llevas\" con m\u00e1s gente a la que escuchas hablar desde lejos (se montan unos jaleos majos; en ingl\u00e9s naturalmente). Cuesta un poco pillar la forma en la que hay que desplazarse, que es golpeando con las manos en el suelo para salir impulsados en sentido contrario. Para subir a los \u00e1rboles hay que sujetar el tronco entre las manos e impulsarnos hacia arriba. Gravity Sketch : [gratis] M\u00e1s que un juego o una experiencia es una aplicaci\u00f3n en el sentido tradicional. De dise\u00f1o 3D en concreto. Es por ejemplo la aplicaci\u00f3n que utilizan los dise\u00f1adores de los circuitos de Walkabout Mini Golf como puede verse en este v\u00eddeo . Half + Half : [gratis] Un juego social sencillamente encantador. Dentro del mundo de Half + Half adoptamos la apariencia de un monigote de l\u00edneas redondeadas y voz distorsionada. Todo parece pensado para que no sea posible el abuso entre los jugadores. Todo se dulcifica de manera que se pueden compartir las experiencias de juego con otros jugadores an\u00f3nimos de forma agradable y sin conflictos. INVASION! : [gratis] Historia 3D con un ligero toque de interacci\u00f3n. De nuevo ideal para visitas. Liminal : [gratis] Tampoco lo tengo muy explorado, pero es una serie de experiencias relajantes cercanas a la meditaci\u00f3n. Mission: ISS: Quest : [gratis] Imprescindible para espaciotrastornados. Es una reproducci\u00f3n 3D de la Estaci\u00f3n Espacial Internacional en la que te puedes mover libremente resolviendo algunos retos sencillos que te van proponiendo. Comentar que fue la primera vez que experiment\u00e9 el famoso mareo VR, pero hay un truco y es desplazarse utilizando las manos en lugar del stick anal\u00f3gico que controla el desplazamiento suave, empujando las paredes como hacen los astronautas en la realidad. MoonRider : [gratis - web] Clon de Beat Saber realizado sobre WebXR, por tanto hay que abrirlo con el navegador web de las gafas. Los contenidos est\u00e1n creados por la comunidad en base a canciones obtenidas de servidores p\u00fablicos como YouTube (esto lo supongo yo), por lo que podemos encontrar cientos de canciones populares f\u00e1cilmente. Nocturne : [gratis] Una especie de Gitar Hero de m\u00fasica cl\u00e1sica. Cuesta hacerse con el manejo, pero si te gusta la m\u00fasica cl\u00e1sica dale una oportunidad porque pueden salir sonidos interesantes. Oculus First Contact : [gratis] Cuando arrancan las gafas por primera vez se nos abre una aplicaci\u00f3n llamada Primeros pasos (en realidad no estoy seguro de si se abre autom\u00e1ticamente o se nos sugiere; no recuerdo). \u00c9sta otra es una aplicaci\u00f3n muy parecida que llevaban las Oculus Quest originales. Es distinta a la Primeros pasos, pero tambi\u00e9n merece mucho la pena, sobre todo para ense\u00f1ar la VR a las visitas. Pavlov Shack beta : [gratis] Todav\u00eda no he jugado a este juego. Pertenece al g\u00e9nero del FPS (First Person Shooter) que no es de mis favoritos. Reconozco que lo he instalado por si en el futuro lo aceptan en la Oculus Store oficial y deja de ser gratuito, para tenerlo ya adquirido. Seg\u00fan todo el mundo, uno de los buenos FPS que hay para las Quest 2. Supongo que marear\u00e1, eso s\u00ed. Rec Room : [gratis] Juego social al que no le he dado muchas oportunidades todav\u00eda (no he terminado el tutorial de introducci\u00f3n). A pesar de que no tiene los gr\u00e1ficos m\u00e1s avanzados (seguramente por ser una experiencia multiplataforma), todo el mundo comenta que junto a VRChat es otro de los Metaversos m\u00e1s establecidos. Dentro podemos encontramos juegos de grupo como por ejemplo tipo Laser Tag, parques acu\u00e1ticos, parkour, roc\u00f3dromos, etc. Incluso podemos dise\u00f1ar nuestros propios juegos. Space Explorers : [gratis] De nuevo imprescindible para espaciotrastornados. En este caso son v\u00eddeos 360\u00ba grabados en la ISS. La imagen es real por tanto en este caso, no sint\u00e9tica como en Mission: ISS: Quest , pero a cambio nosotros no podemos elegir el punto de vista sino que somos meros pasajeros. SUPERHOT VR - Demo : [gratis] Otro de esos juegos que hay que probar al menos y que podemos hacer gracias a la demo. Tea For God : [gratis] Este juego est\u00e1 en mi podium personal. El juego es de tipo infiltraci\u00f3n. Su principal virtud est\u00e1 en la forma en que aprovecha el espacio de juego real de que disponemos. Genera una red de laberintos imposibles (porque se cruzan los pasillos aunque nosotros no seamos conscientes) de manera que tienes la sensaci\u00f3n de estar explorando un espacio mucho mayor del que tenemos para jugar. Pongo a continuaci\u00f3n un v\u00eddeo que le grab\u00e9 a un amigo, aunque como siempre es imposible transmitir la sensaci\u00f3n de inmersi\u00f3n que produce que es total. The Key : [gratis] La primera historia/pel\u00edcula VR que disfrut\u00e9 en las gafas. Y una de las mejores de todas las que he visto. Claro exponente del nuevo cine que est\u00e1 llegando gracias a esta tecnolog\u00eda. VR Animation Player : [gratis] Otra que no tengo muy explorada. Es un visor de contenidos de animaci\u00f3n. Animaci\u00f3n VR se entiende, es decir consumir estos contenidos desde dentro de las propias animaciones. VRChat : [gratis] Una de las aplicaciones imprescindibles de la plataforma que todav\u00eda no he explorado pero que me atrevo a recomendar. En algunos sitios se lee que es uno de los 2 \u00f3 3 Metaversos consolidades que existen en la actualidad. VRtuos : [gratis] Piano virtual en el que se puede mapear un teclado real para sentir las teclas reales cuando las pulsamos en VR. De esta forma se pueden aprender piezas jugando de forma parecida a Guitar Hero. Walkabout Mini Golf : [14,99\u20ac] En mi opini\u00f3n el primer imprescindible de todo lo que llevo visto. Se trata de circuitos de mini golf en ambientes encantadores. De momento existen 8 circuitos abiertos y 3 DLCs. Cada uno de los circuitos tiene un modo m\u00e1s dif\u00edcil que se desbloquea al encontrar bolas ocultas en cada uno de los hoyos del recorrido normal. Luego en el recorrido dif\u00edcil hay un juego de acertijos para encontrar tesoros ocultos que nos permiten obtener un objeto de regalo que no voy a desvelar. Tanto estos minijuegos escondidos como el propio juego principal, es decir el mini golf, nunca cansan. De hecho este juego es el culpable de que la exploraci\u00f3n del mundo VR que empec\u00e9 ese 17 de febrero se volviera much\u00edsimo m\u00e1s lenta desde que lo adquir\u00ed a las dos semanas. Suelo terminar todos los d\u00edas haciendo al menos 9 hoyos para relajarme antes de dormir. Lo dicho, imprescindible. We Live Here : [gratis] Representante de lo que puede considerarse una nueva forma de cine gracias al VR. Nos cuenta una historia con cierto nivel de interacci\u00f3n. Este tipo de contenidos no suelen tener mucho recorrido, es decir no duran mucho ni deber\u00eda apetecernos consumirlo m\u00e1s de un par de veces, pero de nuevo es algo que hay que ver y ense\u00f1ar a las visitas. Within : [gratis] Es una lista curada de contenidos VR alojados en plataformas como YouTube. YouTube VR : [gratis] Una de esas aplicaciones imprescindibles en cualquier plataforma. Que voy a decir de YouTube. S\u00f3lo mencionar que naturalmente los muchos contenidos en 180/360\u00ba y en 3D se disfrutan particularmente bien con unas gafas VR. Straps \u00b6 El strap o sistema de sujecci\u00f3n a la cara es uno de los elementos que se pueden mejorar bastante como coment\u00e1bamos en un principio. Soy de los que considera que el que lleva es perfectamente funcional (como todo lo que viene con las gafas), pero como desde un principio percib\u00ed que las gafas hab\u00edan llegado para quedarse, decid\u00ed que merec\u00eda la pena explorar todas las posibilidades para mejorar/facilitar la experiencia. La propia Oculus vende o mejor dicho vend\u00eda (ya que fueron retiradas de la venta por romperse f\u00e1cilmente) un strap llamado Elite Strap con un ajuste r\u00edgido por ruleta en lugar de el\u00e1stico. Pero en el m\u00e1s de un a\u00f1o que llevan en el mercado las Oculus Quest 2, m\u00faltiples fabricantes han presentado sus propuestas. Tras estudiar el mercado voy a se\u00f1alar las que me parecen m\u00e1s destacables. Antes de empezar, comentar que se puede considerar que existen las dos tipolog\u00edas de straps siguientes: Tipo Halo : Me refiero al concepto PlayStation VR que sujeta las gafas a la cabeza en modo casco, es decir apoyado o presionando frente y nuca. Las gafas cuelgan del halo de forma que en teor\u00eda ser\u00eda incluso posible no apoyarlas en la cara. Hay quien incluso retira el interfaz facial, es decir la pieza con forma anat\u00f3mica que normalmente apoya en la cara e ilumina el recinto de juego con luces IR para que no se produzcan entradas de luz en las gafas. Tipo Elite Strap : Es el que imita el funcionamiento de este strap o del strap original de tiras el\u00e1sticas, es decir el que aprisiona las gafas contra nuestra cara. En este caso el interfaz facial naturalmente se vuelve imprescindible, y de hecho si apostamos por este formato puede merecernos la pena encontrar un interfaz facial m\u00e1s c\u00f3modo o m\u00e1s adaptado a nuestra cara. El de segundo tipo puede parecer menos conveniente que el de tipo halo, pero al menos en mi caso ha resultado preferible. Jugando al golf con un strap de tipo halo, se me descolocaban las gafas al bajar la cabeza para golpear la bola. Tambi\u00e9n parece claro que para juegos muy vigorosos como los deportivos, el tipo halo puede ser menos conveniente porque podemos experimentar balanceo de las gafas, perdiendo con facilidad el \"punto dulce\" del enfoque. De todas formas tras estudiar bastante el tema, parece que no hay consenso. Es decir, es una cuesti\u00f3n de gustos y de formas de cabeza para las que parece que un tipo de strap encaja mejor que el otro en cada caso. En cuanto a los de tipo Halo podr\u00eda se\u00f1alar: BOBOVR M2 : Es quiz\u00e1 el m\u00e1s representativo. GOMRVR : Especie de clon que cuesta la tercera parte y que puedo recomendar porque lo llegu\u00e9 a adquirir y puedo confirmar que est\u00e1 muy bien construido, aunque como comentaba antes, no ha resultado ser la mejor opci\u00f3n para mi. En cuanto a los de tipo Elite Strap est\u00e1n: KIWI : Esta es la opci\u00f3n por la que apuesto yo. AUBIKA : Existe en versi\u00f3n con bater\u00eda integrada. Bater\u00eda \u00b6 La bater\u00eda de las Oculus Quest 2 es de unos 3600mAh. Con un uso normal la bater\u00eda dura alrededor de 3 horas, pero soy muy sensible al trato que conviene dar a las bater\u00edas de Litio, por lo que intento moverme siempre entre el 40% y el 80% de capacidad, por lo que el periodo de utilizaci\u00f3n si no quiero salir de ese rango es de hora y media. Por este motivo, uno de los primeros accesorios a adquirir es un PowerBank. En mi caso adquir\u00ed \u00e9ste que me pareci\u00f3 tener un buen balance entre capacidad y peso, si lo quer\u00eda llevar adosado al caso como era mi caso. El lugar adecuado para sujetar el PowerBank es en la parte trasera de las gafas y de esa forma act\u00faa como contrapeso. Para hacerlo se suele recurrir a bridas o abrazaderas de velcro, aunque en mi caso espero aprovechar los muchos dise\u00f1os que han hecho otros usuarios para imprimir en 3D, como por ejemplo \u00e9ste que est\u00e1 hecho a la medida del PowerBank que adquir\u00ed. El PowerBank que utilizo tiene la ventaja de que m\u00e1s o menos suministra la intensidad de corriente que consumen las gafas con un uso normal, por lo que si lo conecto desde un principio, con la bater\u00eda interna de las gafas al 80% como me gusta que est\u00e9, \u00e9ste nivel se mantiene durante toda la sesi\u00f3n variando como mucho un 5% hacia arriba o hacia abajo dependiendo de la situaci\u00f3n. De esta manera la bater\u00eda interna pr\u00e1cticamente no consume ciclos de carga. Lentes en Aliexpress \u00b6 Necesitar gafas graduadas para corregir defectos de la vista supone un problema para utilizar gafas VR. Aunque las Oculus Quest 2 traen en la caja un accesorio que aleja el interfaz facial de las propias gafas, dejando en teor\u00eda espacio para usar el visor con nuestras gafas graduadas, al menos en mi caso no ha servido. Supongo que de nuevo depender\u00e1 de la forma de la cabeza/cara de cada uno. Tambi\u00e9n supongo, aunque no he experimentado con ello, que si se quieren usar las Oculus Quest 2 con gafas, los straps de tipo halo pueden funcionar mejor, al en teor\u00eda permitir incluso retirar el interfaz facial. La soluci\u00f3n definitiva es de nuevo adquirir un accesorio separado. En este caso unas lentes que se colocan sobre las que trae integradas el visor. En mi caso recurr\u00ed al servicio que recomendaban en los lugares que consult\u00e9: WidmoVR . Las lentes que me enviaron tienen una calidad excelente, pero el precio tambien era excelente (por lo alto). M\u00e1s adelante supe gracias a un amigo que hay vendedores en Aliexpress que ofrecen el mismo servicio por la tercera parte del precio. \u00c9l ha obtenido sus lentes de esta tienda y la calidad es la misma. Despedida \u00b6 Con esto concluye el art\u00edculo de gu\u00eda a la VR. Nos vemos en el metaverso...","title":"Aventuras en VR"},{"location":"2022-04-17_vr.html#obtener-aplicaciones","text":"En general los juegos/experiencias/aplicaciones (a partir de ahora los llamaremos \"contenidos\") se obtienen de la Oculus Store . Hay que decir que los precios en general son considerablemente m\u00e1s altos que en plataformas VR del ambiente PC. Oculus Quest 2 se puede considerar una consola de videojuegos, y los precios de los contenidos suelen estar acorde a lo que se encuentra en ese terreno. El sistema de las gafas en realidad es Android y podr\u00eda pensarse que los precios estar\u00edan en la l\u00ednea de lo que se ve en la tienda de Google. Supongo que el list\u00f3n de precios superior est\u00e1 relacionado con el mayor coste de producci\u00f3n que tienen los contenidos VR respecto a los habituales en Android. Pero como comentaba antes, el mismo juego en SteamVR para PC/gafas no independientes, puede costar el 20% de lo que cuesta en la tienda de Oculus. La buena noticia es que para empezar hay una buena cantidad de contenidos gratuitos como luego veremos. La Oculus Store tiene criterios muy extrictos para permitir la entrada de contenidos. Por ese motivo, al principio de la comercializaci\u00f3n de las gafas, surgi\u00f3 un mercado paralelo no controlador por la marca llamado Sidequest . Dentro de esta \"tienda alternativa\" adem\u00e1s de haber contenidos que como dec\u00eda antes no podr\u00edan entrar en la tienda oficial por los filtros que \u00e9sta tiene, hay mucho material indie muchas veces gratuito. Tambi\u00e9n demos de aplicaciones finales en las que se puede probar parte del contenido antes de adquirirlo. La pega es que hay que realizar algunas manualidades para conseguir instalar los contenidos que s\u00f3lo est\u00e1n en Sidequest. No es complicado; hay que activar el modo desarrollador en las gafas, abrir una cuenta de desarrollador (gratuita) y conectar las gafas a un PC por USB. Como Oculus se dio cuenta de que Sidequest estaba desviando la atenci\u00f3n de su Oculus Store oficial, finalmente abri\u00f3 un programa para aceptar todos esos contenidos que no pod\u00edan entrar en la tienda y que terminaban en Sidequest. Se llama App Lab y est\u00e1 parcialmente integrado en la tienda oficial. Los contenidos de App Lab no aparecen en las b\u00fasquedas de la tienda oficial, pero los enlaces desde App Lab permiten instalar con la tienda oficial sin tener que hacer manualidades como en Sidequest. S\u00f3lo recibiremos un aviso al instalar en el que se nos recuerda que lo que vamos a instalar puede tener fallos o no estar terminado del todo. Una cuarta v\u00eda para acceder a contenidos es utilizar el navegador web integrado en el sistema y acceder a los cada vez m\u00e1s numerosos contenidos compatibles con los est\u00e1ndares WebXR y OpenXR . Hay incluso sitios especializados en estos contenidos, como por ejemplo ConstructArcade . Esta tecnolog\u00eda es muy accesible. Si se tiene inter\u00e9s recomiendo echar un vistazo a los ejemplos de c\u00f3digo que pueden encontrarse aqu\u00ed . Me cost\u00f3 5 minutos improvisar esta escena VR con el logo de niubit.","title":"Obtener aplicaciones"},{"location":"2022-04-17_vr.html#devolucion-aplicaciones","text":"Existe una pol\u00edtica de devoluci\u00f3n de aplicaciones en la tienda oficial que mitiga en parte el v\u00e9rtigo que producen los altos precios para adquirir algo que no se ha podido ver antes (y en el mundo VR esto es algo habitual, ya que un v\u00eddeo de YouTube o un art\u00edculo de un blog no puede transmitir la inmersi\u00f3n). Las condiciones para solicitar la devoluci\u00f3n son: Hacerlo antes de 14 d\u00edas desde la compra. No haber utilizado la aplicaci\u00f3n por m\u00e1s de 2 horas.","title":"Devoluci\u00f3n aplicaciones"},{"location":"2022-04-17_vr.html#ofertas-y-cupones","text":"Como comentaba antes, los precios de los contenidos en la tienda oficial son en general elevados. Los juegos punteros suelen rondar los 19/29\u20ac. Algunos se acercan a los 40\u20ac. No s\u00e9 si por este motivo Oculus ha implantado varios mecanismos para hacer m\u00e1s accesibles/apetecibles los contenidos. Los mecanismos son los siguientes: Descuentos temporales Cupones temporales Regalo de cr\u00e9dito por recomendaci\u00f3n Veamos cada uno de los sistemas por separado.","title":"Ofertas y cupones"},{"location":"2022-04-17_vr.html#descuentos-temporales","text":"Se trata simplemente de ofertas que duran unos d\u00edas. Son muy frecuentes, por lo que he desarrollado el h\u00e1bito de esperar a que el contenido que me interese se ponga en oferta. Por ejemplo, en los s\u00f3lo dos meses de tiempo que llevo atento a la tienda, uno de los juegos que me gustan ha estado dos veces de oferta como puede verse en el siguiente pantallazo que acabo de hacer: En la ficha de detalle del contenido se indica claramente la duraci\u00f3n de la oferta con una cuenta atr\u00e1s que incluye segundos, por lo que tendremos un control muy preciso sobre la duraci\u00f3n de la misma.","title":"Descuentos temporales"},{"location":"2022-04-17_vr.html#cupones-temporales","text":"Son cupones de descuento personales que llegan a trav\u00e9s de notificaciones en la aplicaci\u00f3n Oculus que se instala en el tel\u00e9fono. En los dos meses que llevo he recibidos dos cupones de este tipo, uno con un 25% de descuento y otro con un 30%. El cup\u00f3n suele durar una semana y se puede aplicar s\u00f3lo a una compra. Los cupones de este tipo se pueden acumular con los descuentos temporales anteriores por lo que combinando ambos descuentos se puede adquirir un contenido pr\u00e1cticamente por la mitad de precio. Comentar sobre los cupones temporales que si se aplican sobre un contenido que luego devolvemos, se nos devuelve el importe de la aplicaci\u00f3n sin aplicar el cup\u00f3n, es decir que nos devuelven m\u00e1s cr\u00e9dito del que nos cobraron al hacer la compra con el cup\u00f3n aplicado. No s\u00e9 si se trata de un fallo de la plataforma o algo deliberado, pero esto anima a utilizar los cupones temporales antes de que caduquen. As\u00ed, si tenemos un cup\u00f3n del 30% pr\u00f3ximo a caducar, merece la pena arriesgarnos a comprar una aplicaci\u00f3n con \u00e9l para probarla y luego devolverla. Obtendremos el descuento que lograba el cup\u00f3n como sobrecr\u00e9dito para adquirir otros contenidos en el futuro. Es decir en cierto modo conseguiremos romper la fecha de caducidad del cup\u00f3n.","title":"Cupones temporales"},{"location":"2022-04-17_vr.html#regalo-de-credito-por-recomendacion","text":"Finalmente, existe un programa de recomendaci\u00f3n por el cual si un amigo activa la cuenta que luego utiliza en unas gafas nuevas por medio de un enlace que nosotros le enviamos, el amigo recibe inmediatamente 30\u20ac de cr\u00e9dito para la Oculus Store (para hardware y software) y nosotros tambi\u00e9n recibimos 30\u20ac, aunque pasado un mes. Si alguien piensa adquirir las gafas y no tiene a nadie que le env\u00ede el enlace de recomendaci\u00f3n, que me lo pida :-)","title":"Regalo de cr\u00e9dito por recomendaci\u00f3n"},{"location":"2022-04-17_vr.html#mareo","text":"Cuando se habla de realidad virtual, uno de las primeras cuestiones que surgen es la del mareo. Precisamente fue el principal motivo por el que no me lanc\u00e9 directamente a por las Quest cuando las conoc\u00ed. Como casi siempre los temores se disiparon al escuchar a alguien de confianza y con experiencia en el tema hablando de ello. Resumo a continuaci\u00f3n las ideas que tengo sobre esta cuesti\u00f3n ahora mismo. Para empezar, y de forma muy superficial, comentar\u00e9 que el mareo se produce fundamentalmente por la discrepancia en la percepci\u00f3n de movimiento entre los distintos sentidos, sobre todo el del equilibrio (el o\u00eddo interno que mide las aceleraciones y giros que sufre el cuerpo) y el de la vista. Aqu\u00ed hay que volver a hablar de la diferencia entre las gafas dependientes (del PC o la PlayStation) y las independientes como Quest. En las primeras, si nos enfrentamos a una experiencia que requiere desplazarnos, como puede ser visitar la recreaci\u00f3n de un castillo, por ejemplo, no tendremos m\u00e1s remedio que indicar los desplazamientos con los mandos. En Quest, siempre que nos movamos dentro del espacio de seguridad que tengamos definido para jugar, podremos desplazarnos con nuestros pies, es decir caminando normalmente. Lo primero puede llegar a marear, lo segundo rotundamente no. Naturalmente con Quest en algunas experiencias tambi\u00e9n necesitaremos alg\u00fan tipo de mecanismo de movimiento con los mandos, ya que el espacio de seguridad es limitado. As\u00ed que vamos a hablar algo m\u00e1s sobre en qu\u00e9 consisten estos desplazamientos con los mandos. El desplazamiento con los mandos puede ser de varios tipos, vamos a describirlos por separado: Suave : Ser\u00eda el equivalente al que se utiliza en los videojuegos cl\u00e1sicos (no VR), es decir el que indicamos con la cruceta o el stick. \u00c9ste es con diferencia el sistema de movimiento que m\u00e1s marea, sobre todo en movimientos r\u00e1pidos y laterales. Si son movimientos lentos y sobre todo hacia delante, no suele haber demasiado problema. Este tipo de movimiento es casi imprescindible en los populares juegos tipo FPS, por lo que no se recomienda empezar por este tipo de juegos. La mayor\u00eda de las personas hablan de que con el tiempo se desarrollan unas \"piernas virtuales\" o \"piernas VR\" y el mareo deja de aparecer al utilizar este sistema de movimiento. Como casi todos los problemas que queramos superar, requiere que nos enfrentemos a \u00e9l, es decir que lo pasemos mal durante una temporada mientras desarrollamos esas \"piernas virtuales\". Se supone que durante esta fase de aprendizaje ayuda el simular el movimiento en la realidad dando peque\u00f1os pasos (sin avanzar) mientras ejecutamos con el mando el gesto de avanzar. Tambi\u00e9n se recomienda hacer movimientos m\u00e1s lentos al principio, lo que normalmente se puede controlar ya que el desplazamiento se suele realizar con los sticks anal\u00f3gicos. Yo todav\u00eda estoy en ello, sobre todo porque los FPS son los juegos que menos me llaman. Desplazamiento con gestos : En este caso tambi\u00e9n vamos a conseguir desplazarnos suavemente y sin realizar un desplazamiento en la realidad, pero en lugar de utilizar el mando para indicar el sentido en que queremos movernos, lo haremos con alg\u00fan gesto con las manos. Por alg\u00fan motivo nuestro cerebro no tiene tantos problemas para gestionar la discrepancia en los sentidos al hacerlo de esta forma. Dos ejemplos: Gorilla Tag : Este juego es un poco el paradigma de lo que hablamos. Para avanzar en este juego de persecuci\u00f3n entre \u00e1rboles la \u00fanica forma es impulsarnos hacia delante golpeando el suelo con nuestras manos, como si salt\u00e1ramos con ellas. Mission: ISS: Quest : Fue una de las primeras experiencias VR que disfrut\u00e9. Es una recreaci\u00f3n de la ISS. En el tutorial te ense\u00f1an a moverte por el interior de la estaci\u00f3n flotando como hacen los astronautas, impuls\u00e1ndonos con uno de los sticks, es decir con un movimiento \"suave\". El resultado fue un mareo inmediato. Luego descubr\u00ed (seguramente lo menciona el propio tutorial, ya no recuerdo) que tambi\u00e9n me pod\u00eda impulsar con las manos desde alg\u00fan agarre. O simplemente golpeando una pared como en Gorilla Tag. De esa manera el mareo no surgi\u00f3. Teletransporte : En este caso se\u00f1alamos con el mando el punto al que nos queremos desplazar y aparecemos all\u00ed instant\u00e1neamente. Esta forma de desplazamiento no marea nada en absoluto, pero dependiendo del tipo de juego puede arruinar la experiencia, ya que si los desplazamientos tienen que ser muy r\u00e1pidos, tendremos la sensaci\u00f3n de que estamos viendo una de esas pel\u00edculas actuales de superh\u00e9roes en las que el director no es capaz de mantener el plano 2 segundos. Es perfecta sin embargo para juegos reposados como Walkabout Mini Golf . Hablando de este juego, comentar que en \u00e9l se combinan las dos t\u00e9cnicas que menos marean (desplazamiento con nuestros pies dentro del espacio de seguridad y teletransporte), pero hay que decir que ambos sistemas encajan a la perfecci\u00f3n a la din\u00e1mica del mini golf. Otro aspecto que puede desembocar en mareo es el de la baja tasa de refresco, que puede llegar a producir mareo, ya no al desplazarnos dentro del entorno virtual, sino simplemente al girar la cabeza. En el fondo se trata de otra versi\u00f3n del mismo problema, es decir, si la tasa de refresco es muy baja (pongamos 30Hz), al hacer un giro r\u00e1pido de la cabeza vamos a ver una secuencia de 2 \u00f3 3 frames que se repartir\u00e1n a lo largo del giro, habiendo por tanto mucha discrepancia entre lo que vemos y lo que nuestro cerebro esperar\u00eda percibir. Este problema se puede decir que a d\u00eda de hoy ya no existe, es decir era algo que afectaba a las gafas de generaciones anteriores. Quest 2 trabaja por ejemplo a 90Hz en general y se puede incluso overclockear a 120Hz a costa de menor duraci\u00f3n de la bater\u00eda. Con esas tasas de refresco este problema se puede considerar resuelto.","title":"Mareo"},{"location":"2022-04-17_vr.html#aplicaciones-recomendables","text":"Lo siguiente es una lista de los contenidos m\u00e1s interesantes que he encontrado para las Oculus Quest 2 hasta ahora. Anne Frank House VR : [gratis] Reproducci\u00f3n y visita guiada (en varios idiomas incluido el espa\u00f1ol) de la casa donde Anne estuvo escondida con 7 personas m\u00e1s durante dos a\u00f1os. \u00c1ltamente recomendable. Apollo 11 : [9,99\u20ac] Recreaci\u00f3n de varias maniobras clave del viaje del Apollo 11. S\u00f3lo para espaciotrastornados. Al resto seguramente no le compense pagar los 10\u20ac. Bait! : [gratis] Juego de pesca bastante simp\u00e1tico. Es sencillo y relajante y tambi\u00e9n resulta una experiencia muy accesible cuando se empieza. Beat Saber - Demo : [gratis] Beat Saber es una de las aplicaciones m\u00e1s populares de la plataforma. Pero como coment\u00e1bamos en el apartado correspondiente, eso suele significar unos 30\u20ac. Termin\u00e9 comprando la aplicaci\u00f3n completa utilizando uno de los peri\u00f3dicos cupones . Al principio estuve a punto de devolverla porque a pesar de que la aplicaci\u00f3n me parece casi perfecta, la selecci\u00f3n de temas dista bastante de mis gustos personales. La mayor\u00eda parecen temas motivadores de estos que ponen en los gimnasios o en algunas tiendas de ropa. Al final encontr\u00e9 unos pocos temas pasables y la calidad y el inter\u00e9s que tengo en experiencias deportivas hizo que la mantuviera. Bigscreen Beta : [gratis] Una especie de sala de cine privada o p\u00fablica (hay varias opciones) en la que ver acompa\u00f1ado de otras personas contenidos de v\u00eddeo ya sea propuestos por la propia plataforma, alojados en la red o que tengan en posesi\u00f3n todos los que est\u00e1n en la sala. No lo he probado, pero en teor\u00eda si un mismo fichero lo tuvi\u00e9ramos un amigo y yo, podr\u00edamos verlo juntos. Bogo : [gratis] Una especie de Tamagotchi, es decir una mascota que tienes que cuidar/jugar/alimentar. Reconozco que s\u00f3lo lo he abierto un par de veces, pero viene bien aunque s\u00f3lo sea para ense\u00f1ar la VR a las visitas. Crisis VRigade : [4,99\u20ac] Uno de mis juegos favoritos de todos los tiempos es Time Crisis de PlayStation. Los aficionados a los juegos de pistola saben que es un g\u00e9nero que se perdi\u00f3 cuando la tecnolog\u00eda de los televisores pas\u00f3 del CRT a las pantallas planas LCD/Plasma. Por lo visto, salvando las distancias de la precisi\u00f3n que permit\u00eda la combinaci\u00f3n pistola/CRT, este g\u00e9nero ha reaparecido en el ambiente VR. As\u00ed que cuando localic\u00e9 este juego gracias a la recomendaci\u00f3n de un amigo, me lanc\u00e9 a por \u00e9l. Realmente el t\u00edtulo del juego parece hacer referencia a Time Crisis. Crisis VRigade es un juego que tiene algunos a\u00f1os y viene de otras plataformas, por lo que los gr\u00e1ficos no son muy punteros. Existe una segunda parte con gr\u00e1ficos m\u00e1s propios de las Quest 2 pero cuesta 19,99\u20ac y adem\u00e1s no est\u00e1 en espa\u00f1ol. Hasta que no termine el primero no considero adquirir el segundo. A\u00fan no lo tengo muy jugado (maldito Walkabout), pero lo poco que prob\u00e9 me gust\u00f3 mucho. Realmente lo m\u00e1s cercano a Time Crisis que recuerdo. ConstructArcade : [gratis - web] Recopilaci\u00f3n de minijuegos realizados sobre WebXR. DeoVR Quest : [gratis] Se trata de un media player. \u00datil para reproducir contenidos de v\u00eddeo que hayamos copiado a las gafas o que tengamos accesible por red en nuestro ordenador o NAS (realmente esto \u00faltimo no lo he probado a\u00fan). Echo VR : [gratis] Uno de los juegos m\u00e1s populares. De nuevo no he pasado del tutorial inicial pero realmente no me cuesta imaginar que ser\u00e1 interesante. Es una especie de balonmano multijugador en ingravidez. Habr\u00e1 que explorarlo. Eleven Table Tennis : [19,99\u20ac] La primera aplicaci\u00f3n que compr\u00e9 y una de mis favoritas. El juego tiene unos men\u00fas muy mejorables, pero una vez que arrancas las partidas es simplemente de 10. Juego habitualmente con un amigo y los dos opinamos que es dif\u00edcilmente mejorable en ese aspecto. Dadas las caracter\u00edsticas del Ping Pong, en cuanto al espacio necesario para jugarlo y los esfuerzos que requiere (peso de paleta y pelota) encaja a la perfecci\u00f3n en la simulaci\u00f3n VR. Con el tenis de tama\u00f1o real por ejemplo habr\u00eda que llegar a algunos compromisos. Eso s\u00ed, por la velocidad del juego, para jugar con un oponente humano hay que vigilar la latencia de la conexi\u00f3n. Elixir : [gratis] Otro imprescindible, aunque en este caso de corto recorrido, es decir, se termina en seguida y sabe a poco, pero es perfecto. No quisiera spoilear la experiencia, simplemente hay que disfrutarlo. Uno de los pocos con el audio en espa\u00f1ol y de calidad. Goliath: Playing with Reality : [gratis] Esta experiencia es inclasificable. Es en general una historia, aunque extra\u00f1a, muy extra\u00f1a. En algunos pasajes hay bastante interacci\u00f3n, aunque en general hay que dejarse llevar. Muy interesante. Gorilla Tag : [gratis] Un juego inclasificable. Es muy indie y los gr\u00e1ficos parecen no estar a la altura, pero de nuevo creo que es un juego multiplataforma y desde luego no parece venir de un gran estudio. Pero desde luego es interesante. Es jugar al \"tu la llevas\" con m\u00e1s gente a la que escuchas hablar desde lejos (se montan unos jaleos majos; en ingl\u00e9s naturalmente). Cuesta un poco pillar la forma en la que hay que desplazarse, que es golpeando con las manos en el suelo para salir impulsados en sentido contrario. Para subir a los \u00e1rboles hay que sujetar el tronco entre las manos e impulsarnos hacia arriba. Gravity Sketch : [gratis] M\u00e1s que un juego o una experiencia es una aplicaci\u00f3n en el sentido tradicional. De dise\u00f1o 3D en concreto. Es por ejemplo la aplicaci\u00f3n que utilizan los dise\u00f1adores de los circuitos de Walkabout Mini Golf como puede verse en este v\u00eddeo . Half + Half : [gratis] Un juego social sencillamente encantador. Dentro del mundo de Half + Half adoptamos la apariencia de un monigote de l\u00edneas redondeadas y voz distorsionada. Todo parece pensado para que no sea posible el abuso entre los jugadores. Todo se dulcifica de manera que se pueden compartir las experiencias de juego con otros jugadores an\u00f3nimos de forma agradable y sin conflictos. INVASION! : [gratis] Historia 3D con un ligero toque de interacci\u00f3n. De nuevo ideal para visitas. Liminal : [gratis] Tampoco lo tengo muy explorado, pero es una serie de experiencias relajantes cercanas a la meditaci\u00f3n. Mission: ISS: Quest : [gratis] Imprescindible para espaciotrastornados. Es una reproducci\u00f3n 3D de la Estaci\u00f3n Espacial Internacional en la que te puedes mover libremente resolviendo algunos retos sencillos que te van proponiendo. Comentar que fue la primera vez que experiment\u00e9 el famoso mareo VR, pero hay un truco y es desplazarse utilizando las manos en lugar del stick anal\u00f3gico que controla el desplazamiento suave, empujando las paredes como hacen los astronautas en la realidad. MoonRider : [gratis - web] Clon de Beat Saber realizado sobre WebXR, por tanto hay que abrirlo con el navegador web de las gafas. Los contenidos est\u00e1n creados por la comunidad en base a canciones obtenidas de servidores p\u00fablicos como YouTube (esto lo supongo yo), por lo que podemos encontrar cientos de canciones populares f\u00e1cilmente. Nocturne : [gratis] Una especie de Gitar Hero de m\u00fasica cl\u00e1sica. Cuesta hacerse con el manejo, pero si te gusta la m\u00fasica cl\u00e1sica dale una oportunidad porque pueden salir sonidos interesantes. Oculus First Contact : [gratis] Cuando arrancan las gafas por primera vez se nos abre una aplicaci\u00f3n llamada Primeros pasos (en realidad no estoy seguro de si se abre autom\u00e1ticamente o se nos sugiere; no recuerdo). \u00c9sta otra es una aplicaci\u00f3n muy parecida que llevaban las Oculus Quest originales. Es distinta a la Primeros pasos, pero tambi\u00e9n merece mucho la pena, sobre todo para ense\u00f1ar la VR a las visitas. Pavlov Shack beta : [gratis] Todav\u00eda no he jugado a este juego. Pertenece al g\u00e9nero del FPS (First Person Shooter) que no es de mis favoritos. Reconozco que lo he instalado por si en el futuro lo aceptan en la Oculus Store oficial y deja de ser gratuito, para tenerlo ya adquirido. Seg\u00fan todo el mundo, uno de los buenos FPS que hay para las Quest 2. Supongo que marear\u00e1, eso s\u00ed. Rec Room : [gratis] Juego social al que no le he dado muchas oportunidades todav\u00eda (no he terminado el tutorial de introducci\u00f3n). A pesar de que no tiene los gr\u00e1ficos m\u00e1s avanzados (seguramente por ser una experiencia multiplataforma), todo el mundo comenta que junto a VRChat es otro de los Metaversos m\u00e1s establecidos. Dentro podemos encontramos juegos de grupo como por ejemplo tipo Laser Tag, parques acu\u00e1ticos, parkour, roc\u00f3dromos, etc. Incluso podemos dise\u00f1ar nuestros propios juegos. Space Explorers : [gratis] De nuevo imprescindible para espaciotrastornados. En este caso son v\u00eddeos 360\u00ba grabados en la ISS. La imagen es real por tanto en este caso, no sint\u00e9tica como en Mission: ISS: Quest , pero a cambio nosotros no podemos elegir el punto de vista sino que somos meros pasajeros. SUPERHOT VR - Demo : [gratis] Otro de esos juegos que hay que probar al menos y que podemos hacer gracias a la demo. Tea For God : [gratis] Este juego est\u00e1 en mi podium personal. El juego es de tipo infiltraci\u00f3n. Su principal virtud est\u00e1 en la forma en que aprovecha el espacio de juego real de que disponemos. Genera una red de laberintos imposibles (porque se cruzan los pasillos aunque nosotros no seamos conscientes) de manera que tienes la sensaci\u00f3n de estar explorando un espacio mucho mayor del que tenemos para jugar. Pongo a continuaci\u00f3n un v\u00eddeo que le grab\u00e9 a un amigo, aunque como siempre es imposible transmitir la sensaci\u00f3n de inmersi\u00f3n que produce que es total. The Key : [gratis] La primera historia/pel\u00edcula VR que disfrut\u00e9 en las gafas. Y una de las mejores de todas las que he visto. Claro exponente del nuevo cine que est\u00e1 llegando gracias a esta tecnolog\u00eda. VR Animation Player : [gratis] Otra que no tengo muy explorada. Es un visor de contenidos de animaci\u00f3n. Animaci\u00f3n VR se entiende, es decir consumir estos contenidos desde dentro de las propias animaciones. VRChat : [gratis] Una de las aplicaciones imprescindibles de la plataforma que todav\u00eda no he explorado pero que me atrevo a recomendar. En algunos sitios se lee que es uno de los 2 \u00f3 3 Metaversos consolidades que existen en la actualidad. VRtuos : [gratis] Piano virtual en el que se puede mapear un teclado real para sentir las teclas reales cuando las pulsamos en VR. De esta forma se pueden aprender piezas jugando de forma parecida a Guitar Hero. Walkabout Mini Golf : [14,99\u20ac] En mi opini\u00f3n el primer imprescindible de todo lo que llevo visto. Se trata de circuitos de mini golf en ambientes encantadores. De momento existen 8 circuitos abiertos y 3 DLCs. Cada uno de los circuitos tiene un modo m\u00e1s dif\u00edcil que se desbloquea al encontrar bolas ocultas en cada uno de los hoyos del recorrido normal. Luego en el recorrido dif\u00edcil hay un juego de acertijos para encontrar tesoros ocultos que nos permiten obtener un objeto de regalo que no voy a desvelar. Tanto estos minijuegos escondidos como el propio juego principal, es decir el mini golf, nunca cansan. De hecho este juego es el culpable de que la exploraci\u00f3n del mundo VR que empec\u00e9 ese 17 de febrero se volviera much\u00edsimo m\u00e1s lenta desde que lo adquir\u00ed a las dos semanas. Suelo terminar todos los d\u00edas haciendo al menos 9 hoyos para relajarme antes de dormir. Lo dicho, imprescindible. We Live Here : [gratis] Representante de lo que puede considerarse una nueva forma de cine gracias al VR. Nos cuenta una historia con cierto nivel de interacci\u00f3n. Este tipo de contenidos no suelen tener mucho recorrido, es decir no duran mucho ni deber\u00eda apetecernos consumirlo m\u00e1s de un par de veces, pero de nuevo es algo que hay que ver y ense\u00f1ar a las visitas. Within : [gratis] Es una lista curada de contenidos VR alojados en plataformas como YouTube. YouTube VR : [gratis] Una de esas aplicaciones imprescindibles en cualquier plataforma. Que voy a decir de YouTube. S\u00f3lo mencionar que naturalmente los muchos contenidos en 180/360\u00ba y en 3D se disfrutan particularmente bien con unas gafas VR.","title":"Aplicaciones recomendables"},{"location":"2022-04-17_vr.html#straps","text":"El strap o sistema de sujecci\u00f3n a la cara es uno de los elementos que se pueden mejorar bastante como coment\u00e1bamos en un principio. Soy de los que considera que el que lleva es perfectamente funcional (como todo lo que viene con las gafas), pero como desde un principio percib\u00ed que las gafas hab\u00edan llegado para quedarse, decid\u00ed que merec\u00eda la pena explorar todas las posibilidades para mejorar/facilitar la experiencia. La propia Oculus vende o mejor dicho vend\u00eda (ya que fueron retiradas de la venta por romperse f\u00e1cilmente) un strap llamado Elite Strap con un ajuste r\u00edgido por ruleta en lugar de el\u00e1stico. Pero en el m\u00e1s de un a\u00f1o que llevan en el mercado las Oculus Quest 2, m\u00faltiples fabricantes han presentado sus propuestas. Tras estudiar el mercado voy a se\u00f1alar las que me parecen m\u00e1s destacables. Antes de empezar, comentar que se puede considerar que existen las dos tipolog\u00edas de straps siguientes: Tipo Halo : Me refiero al concepto PlayStation VR que sujeta las gafas a la cabeza en modo casco, es decir apoyado o presionando frente y nuca. Las gafas cuelgan del halo de forma que en teor\u00eda ser\u00eda incluso posible no apoyarlas en la cara. Hay quien incluso retira el interfaz facial, es decir la pieza con forma anat\u00f3mica que normalmente apoya en la cara e ilumina el recinto de juego con luces IR para que no se produzcan entradas de luz en las gafas. Tipo Elite Strap : Es el que imita el funcionamiento de este strap o del strap original de tiras el\u00e1sticas, es decir el que aprisiona las gafas contra nuestra cara. En este caso el interfaz facial naturalmente se vuelve imprescindible, y de hecho si apostamos por este formato puede merecernos la pena encontrar un interfaz facial m\u00e1s c\u00f3modo o m\u00e1s adaptado a nuestra cara. El de segundo tipo puede parecer menos conveniente que el de tipo halo, pero al menos en mi caso ha resultado preferible. Jugando al golf con un strap de tipo halo, se me descolocaban las gafas al bajar la cabeza para golpear la bola. Tambi\u00e9n parece claro que para juegos muy vigorosos como los deportivos, el tipo halo puede ser menos conveniente porque podemos experimentar balanceo de las gafas, perdiendo con facilidad el \"punto dulce\" del enfoque. De todas formas tras estudiar bastante el tema, parece que no hay consenso. Es decir, es una cuesti\u00f3n de gustos y de formas de cabeza para las que parece que un tipo de strap encaja mejor que el otro en cada caso. En cuanto a los de tipo Halo podr\u00eda se\u00f1alar: BOBOVR M2 : Es quiz\u00e1 el m\u00e1s representativo. GOMRVR : Especie de clon que cuesta la tercera parte y que puedo recomendar porque lo llegu\u00e9 a adquirir y puedo confirmar que est\u00e1 muy bien construido, aunque como comentaba antes, no ha resultado ser la mejor opci\u00f3n para mi. En cuanto a los de tipo Elite Strap est\u00e1n: KIWI : Esta es la opci\u00f3n por la que apuesto yo. AUBIKA : Existe en versi\u00f3n con bater\u00eda integrada.","title":"Straps"},{"location":"2022-04-17_vr.html#bateria","text":"La bater\u00eda de las Oculus Quest 2 es de unos 3600mAh. Con un uso normal la bater\u00eda dura alrededor de 3 horas, pero soy muy sensible al trato que conviene dar a las bater\u00edas de Litio, por lo que intento moverme siempre entre el 40% y el 80% de capacidad, por lo que el periodo de utilizaci\u00f3n si no quiero salir de ese rango es de hora y media. Por este motivo, uno de los primeros accesorios a adquirir es un PowerBank. En mi caso adquir\u00ed \u00e9ste que me pareci\u00f3 tener un buen balance entre capacidad y peso, si lo quer\u00eda llevar adosado al caso como era mi caso. El lugar adecuado para sujetar el PowerBank es en la parte trasera de las gafas y de esa forma act\u00faa como contrapeso. Para hacerlo se suele recurrir a bridas o abrazaderas de velcro, aunque en mi caso espero aprovechar los muchos dise\u00f1os que han hecho otros usuarios para imprimir en 3D, como por ejemplo \u00e9ste que est\u00e1 hecho a la medida del PowerBank que adquir\u00ed. El PowerBank que utilizo tiene la ventaja de que m\u00e1s o menos suministra la intensidad de corriente que consumen las gafas con un uso normal, por lo que si lo conecto desde un principio, con la bater\u00eda interna de las gafas al 80% como me gusta que est\u00e9, \u00e9ste nivel se mantiene durante toda la sesi\u00f3n variando como mucho un 5% hacia arriba o hacia abajo dependiendo de la situaci\u00f3n. De esta manera la bater\u00eda interna pr\u00e1cticamente no consume ciclos de carga.","title":"Bater\u00eda"},{"location":"2022-04-17_vr.html#lentes-en-aliexpress","text":"Necesitar gafas graduadas para corregir defectos de la vista supone un problema para utilizar gafas VR. Aunque las Oculus Quest 2 traen en la caja un accesorio que aleja el interfaz facial de las propias gafas, dejando en teor\u00eda espacio para usar el visor con nuestras gafas graduadas, al menos en mi caso no ha servido. Supongo que de nuevo depender\u00e1 de la forma de la cabeza/cara de cada uno. Tambi\u00e9n supongo, aunque no he experimentado con ello, que si se quieren usar las Oculus Quest 2 con gafas, los straps de tipo halo pueden funcionar mejor, al en teor\u00eda permitir incluso retirar el interfaz facial. La soluci\u00f3n definitiva es de nuevo adquirir un accesorio separado. En este caso unas lentes que se colocan sobre las que trae integradas el visor. En mi caso recurr\u00ed al servicio que recomendaban en los lugares que consult\u00e9: WidmoVR . Las lentes que me enviaron tienen una calidad excelente, pero el precio tambien era excelente (por lo alto). M\u00e1s adelante supe gracias a un amigo que hay vendedores en Aliexpress que ofrecen el mismo servicio por la tercera parte del precio. \u00c9l ha obtenido sus lentes de esta tienda y la calidad es la misma.","title":"Lentes en Aliexpress"},{"location":"2022-04-17_vr.html#despedida","text":"Con esto concluye el art\u00edculo de gu\u00eda a la VR. Nos vemos en el metaverso...","title":"Despedida"},{"location":"2014/12/20/micro-placas.html","text":"","title":"Micro placas"},{"location":"2014/12/26/dokuwiki-raspi.html","text":"","title":"Dokuwiki raspi"},{"location":"2015/01/08/jekyll.html","text":"","title":"Jekyll"},{"location":"2015/01/09/moviles.html","text":"","title":"Moviles"},{"location":"2015/03/14/raspi2-kodi-tvheadend.html","text":"","title":"Raspi2 kodi tvheadend"},{"location":"2016/02/25/los-innovadores.html","text":"","title":"Los innovadores"},{"location":"2016/04/10/un-antropologo-en-marte.html","text":"","title":"Un antropologo en marte"},{"location":"2016/07/02/virus-android.html","text":"","title":"Virus android"},{"location":"2016/07/10/wild.html","text":"","title":"Wild"},{"location":"2016/07/21/PIGRRL-2.html","text":"","title":"PIGRRL 2"},{"location":"2016/08/02/stm32-vl-discovery.html","text":"","title":"Stm32 vl discovery"},{"location":"2016/08/17/el-mundo-de-ayer.html","text":"","title":"El mundo de ayer"},{"location":"2016/10/17/raspi-switch.html","text":"","title":"Raspi switch"},{"location":"2016/12/06/raspi3-kodi.html","text":"","title":"Raspi3 kodi"},{"location":"2017/01/14/raspi2-kodi-16-tvheadend.html","text":"","title":"Raspi2 kodi 16 tvheadend"},{"location":"2018/05/05/otto.html","text":"","title":"Otto"},{"location":"2018/10/19/crankshaft.html","text":"","title":"Crankshaft"},{"location":"2018/10/20/Octoprint-en-Anet-A8.html","text":"","title":"Octoprint en Anet A8"},{"location":"cursos/phonegap.html","text":"","title":"Phonegap"},{"location":"desarrollo/android.html","text":"Android \u00b6 Entorno \u00b6 Todos los drivers para instalar ADB en Windows sin morir en el intento Compilaci\u00f3n AOSP \u00b6 Getting Started: Building Android From Source How to Build an Android ROM Documentaci\u00f3n clave \u00b6 ID's de los View's Tips varios \u00b6 Activity restart on rotation Android Lint, eliminando la pelusa de nuestras aplicaciones Librer\u00edas \u00b6 RoboGuice la librer\u00eda que exprime nuestro c\u00f3digo OrmLite - Lightweight Object Relational Mapping (ORM) Java Package Mobile Framework that uses the actual features of #HTML5, #CSS3 and #JavaScript Tutoriales \u00b6 Android Development Tutorial (Lars Vogel) Android ListView and ListActivity (Lars Vogel) Pasando informaci\u00f3n entre Actividades (Activity) en Android Avoid memory leaks on Android Snippets \u00b6 WikiDroid Categor\u00eda Android en WikiCode Androcode Android Snippets Estructuras de datos \u00b6 Android DataFramework, creando la estructura de la Base de Datos Usando Android DataFramework en nuestro proyecto Sobre Dise\u00f1o \u00b6 Hello, Views Common Layout Objects Android Interaction Desing Patterns :!: Icon Design Guidelines Widget Design Guidelines Android App Developers GUI Kits, Icons, Fonts and Tools Android R Drawable Explorer 20 herramientas \u00fatiles para Desarrolladores Android Android Design El cambio de tendencia en la UI de Android: el Men\u00fa Lateral Mapas \u00b6 Obtener APIKey Tu clave es: 1 0V21y2J7NRVSVKA...5C9Ag Esta clave es v\u00e1lida para todas las aplicaciones firmadas con el certificado cuya huella dactilar sea: 1 C2 : EC : 22 : 8 F :...: 56 : 39 Incluimos un dise\u00f1o xml de ejemplo para que puedas iniciarte por los senderos de la creaci\u00f3n de mapas: <com.google.android.maps.MapView android:layout_width= \"fill_parent\" android:layout_height= \"fill_parent\" android:apiKey= \"0V21y2J7NRVSVKA...5C9Ag\" /> Depurar \u00b6 A\u00f1adir el atributo siguiente al bloque \"application\": 1 android : debuggable = \"true\" Solicitar el permiso siguiente: 1 <uses-permission android:name=\"android.permission.SET_DEBUG_APP\" /> Logcat filtrado \u00b6 Ejemplo de una expresi\u00f3n de filtrado que suprime (silencia) todos los mensajes de log excepto los que tienen el tag \"ActivityManager\" con una prioridad Info o superior, y los que tienen el tag \"MyApp\" con una prioridad Debug o superior: $ adb logcat ActivityManager:I MyApp:D *:S Las prioridades de log son: V \u2014 Verbose (lowest priority) D \u2014 Debug I \u2014 Info W \u2014 Warning E \u2014 Error F \u2014 Fatal S \u2014 Silent (highest priority, on which nothing is ever printed) Dumpsys y Dumpstate \u00b6 Hace un volcado de los datos del sistema. Viene bien para encontrar componentes instalados (Aplicaciones, ContentProvider's, etc.): $ adb shell dumpsys $ adb shell dumpstate Buscar CallerID \u00b6 import android.database.Cursor ; import android.net.Uri ; import android.provider.ContactsContract ; Uri uri = Uri . withAppendedPath ( ContactsContract . PhoneLookup . CONTENT_FILTER_URI , Uri . encode ( \"+34976010101\" )); Cursor c = getContentResolver (). query ( uri , new String [] { ContactsContract . PhoneLookup . DISPLAY_NAME }, null , null , null ); Manejo de URI's de contactos \u00b6 La API de Contacts de Android es muy potente y compleja. Los conceptos b\u00e1sicos se describen aqu\u00ed . Se manejan dos tipos de URI's: URI's de tipo tabla: Apuntan por ejemplo a una tabla completa como puede ser la de RawContacts. URI's de tipo item: Apuntan a un registro concreto de una tabla, por ejemplo un RawContact. URI de la tabla ra\u00edz Contacts \u00b6 import android.net.Uri ; import android.provider.ContactsContract ; Uri contactsUri = ContactsContract . Contacts . CONTENT_URI ; URI de la subtabla RawContacts \u00b6 import android.net.Uri ; import android.provider.ContactsContract ; Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ; URI de la subtabla Data \u00b6 import android.net.Uri ; import android.provider.ContactsContract ; Uri datasUri = ContactsContract . Data . CONTENT_URI ; URI de la subtabla Data s\u00f3lo con los registros de un RawContact concreto \u00b6 import android.net.Uri ; import android.provider.ContactsContract ; // Tenemos en rawContactUri el URI de un RawContact. Ser\u00e1 del tipo content://com.android.contacts/raw_contacts/_id Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY ); Obtener ID a partir de una URI de tipo item \u00b6 Por ejemplo el m\u00e9todo para insertar un RawContact devuelve una URI de tipo item (no tabla). Para obtener el ID de dicho elemento podemos usar algunas funciones que hay en la clase ''android.content.ContentUris''. import android.content.ContentUris ; long rawContactId = ContentUris . parseId ( rawContactUri ); Obtener la URI de tipo item de un elemento concreto a partir de la tabla \u00b6 Por ejemplo tenemos el ID de un elemento y queremos una URI para \u00e9l. import android.net.Uri ; import android.provider.ContactsContract ; import android.content.ContentUris ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Resumiendo: Significado URI (string) URI (constant) URI de toda la tabla RawContacts content://com.android.contacts/raw_contacts Uri rawContactsUri = android.provider.ContactsContract.RawContacts.CONTENT_URI URI de un registro concreto de RawContacts content://com.android.contacts/raw_contacts/<_id> Uri rawContactUri = ContentUris.withAppendedId(android.provider.ContactsContract.RawContacts.CONTENT_URI, rawContactId); URI de una subtabla (subdirectorio lo llaman en la documentaci\u00f3n) con los Datas asociados a un RawContact concreto content://com.android.contacts/raw_contacts/<_id>/entity Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY); Obtener el ID de un recurso en el ContentProvider de audio externo \u00b6 String outText = \"\" ; Uri externalMediaUri = android . provider . MediaStore . Audio . Media . EXTERNAL_CONTENT_URI ; String [] projection = new String [] { android . provider . BaseColumns . _ID }; String where = android . provider . MediaStore . MediaColumns . TITLE + \"=?\" ; String [] whereArgs = new String [] { \"Space Oddity\" }; Cursor c = managedQuery ( externalMediaUri , projection , where , whereArgs , null ); while ( c . moveToNext ()) { for ( int i = 0 ; i < c . getColumnCount (); i ++ ) { outText += c . getColumnName ( i ) + \"= \" + c . getString ( i ) + \"\\n\" ; } } Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\" \u00b6 ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation > (); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Felipito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Photo . CONTENT_ITEM_TYPE ); ByteArrayOutputStream stream = new ByteArrayOutputStream (); bitmap . compress ( Bitmap . CompressFormat . JPEG , 75 , stream ); builder . withValue ( CommonDataKinds . Photo . PHOTO , stream . toByteArray ()); builder . withValue ( RawContacts . Data . IS_SUPER_PRIMARY , 1 ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); } Extraer el nombre, el n\u00famero y la foto de los Contacts de tipo \"vnd.sec.contact.phone\" \u00b6 Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ; String [] projection = new String [] { ContactsContract . RawContacts . _ID }; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=? AND \" + ContactsContract . RawContacts . ACCOUNT_NAME + \"=? AND \" + ContactsContract . RawContacts . DELETED + \"=?\" ; String [] whereArgs = new String [] { \"vnd.sec.contact.phone\" , \"vnd.sec.contact.phone\" , \"0\" }; String sortOrder = \"display_name ASC\" ; Cursor c = managedQuery ( rawContactsUri , projection , where , whereArgs , sortOrder ); outText += rawContactsUri . toString () + \"\\n\" ; outText += c . getCount () + \"\\n\" ; while ( c . moveToNext ()) { int colPos = c . getColumnIndex ( ContactsContract . RawContacts . _ID ); long rawContactId = Long . parseLong ( c . getString ( colPos )); Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY ); String name = \"\" ; String number = \"\" ; Bitmap bitmap = null ; String [] projection1 = new String [] { CommonDataKinds . StructuredName . DISPLAY_NAME }; String where1 = Data . MIMETYPE + \"=?\" ; String [] whereArgs1 = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE }; Cursor c1 = managedQuery ( datasUri , projection1 , where1 , whereArgs1 , null ); if ( c1 . moveToNext ()) { name = c1 . getString ( c1 . getColumnIndex ( CommonDataKinds . StructuredName . DISPLAY_NAME )); c1 . close (); } String [] projection2 = new String [] { CommonDataKinds . Phone . NUMBER }; String where2 = Data . MIMETYPE + \"=?\" ; String [] whereArgs2 = new String [] { CommonDataKinds . Phone . CONTENT_ITEM_TYPE }; Cursor c2 = managedQuery ( datasUri , projection2 , where2 , whereArgs2 , null ); if ( c2 . moveToNext ()) { number = c2 . getString ( c2 . getColumnIndex ( CommonDataKinds . Phone . NUMBER )); c2 . close (); } String [] projection3 = new String [] { CommonDataKinds . Photo . PHOTO }; String where3 = Data . MIMETYPE + \"=?\" ; String [] whereArgs3 = new String [] { CommonDataKinds . Photo . CONTENT_ITEM_TYPE }; Cursor c3 = managedQuery ( datasUri , projection3 , where3 , whereArgs3 , null ); if ( c3 . moveToNext ()) { byte [] photo = c3 . getBlob ( c3 . getColumnIndex ( CommonDataKinds . Photo . PHOTO )); bitmap = BitmapFactory . decodeByteArray ( photo , 0 , photo . length ); c3 . close (); } outText += \"ID= \" + rawContactId + \"; Nombre= \" + name + \"; N\u00famero= \" + number ; if ( bitmap != null ) { outText += \"; Ancho foto= \" + bitmap . getWidth () + \"; Alto foto= \" + bitmap . getHeight (); } outText += \"\\n\" ; } c . close (); Borrado de los contactos de un tipo \u00b6 Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=?\" ; String [] whereArgs = new String [] { \"es.eduardofilo.app\" }; getContentResolver (). delete ( rawContacts , where , whereArgs ); Borrado de un contacto \u00b6 Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , 13 ); getContentResolver (). delete ( rawContactUri , null , null ); Actualizar el nombre de un contacto \u00b6 long rawContactId = 14 ; Uri data = ContactsContract . Data . CONTENT_URI ; ContentValues values = new ContentValues (); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Jorgito\" ); String where = Data . MIMETYPE + \"=? AND \" + ContactsContract . Data . RAW_CONTACT_ID + \"=?\" ; String [] whereArgs = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE , Long . toString ( rawContactId ) }; getContentResolver (). update ( data , values , where , whereArgs ); Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\" \u00b6 ContentValues values = new ContentValues (); values . put ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); values . put ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); Uri rawContactUri = getContentResolver (). insert ( RawContacts . CONTENT_URI , values ); long rawContactId = ContentUris . parseId ( rawContactUri ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Pepito\" ); Uri data1Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); values . put ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); Uri data2Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values ); Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\" \u00b6 Igual que antes pero hecho con el sistema de operaciones por lotes de los ContentProvider's. ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation > (); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Debianito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); } Localizar un Launcher que no sea el nuestro \u00b6 PackageManager pm = getPackageManager (); Intent intent = new Intent ( Intent . ACTION_MAIN ); intent . addCategory ( Intent . CATEGORY_HOME ); List < ResolveInfo > launchers = pm . queryIntentActivities ( intent , 0 ); String packageName = null ; String name = null ; for ( ResolveInfo ri : launchers ) { if ( ! ri . activityInfo . name . equals ( \"es.eduardofilo.app.mobile.IdentificarTerminal\" )) { name = ri . activityInfo . name ; packageName = ri . activityInfo . packageName ; break ; } } Intent myIntent = new Intent (); myIntent . setClassName ( packageName , name ); startActivity ( myIntent ); Obtener un authToken de un Account \u00b6 mAccountManager = AccountManager . get ( this ); Account [] accounts = mAccountManager . getAccountsByType ( ACCOUNT_TYPE ); for ( Account account : accounts ) { outText += account . toString () + \"\\n\" ; AccountManagerFuture < Bundle > accountManagerFuture = mAccountManager . getAuthToken ( account , \"es.eduardofilo.app\" , true , null , null ); Bundle authTokenBundle ; String token = null ; try { authTokenBundle = accountManagerFuture . getResult (); token = authTokenBundle . get ( AccountManager . KEY_AUTHTOKEN ). toString (); } catch ( OperationCanceledException e ) { e . printStackTrace (); } catch ( AuthenticatorException e ) { e . printStackTrace (); } catch ( IOException e ) { e . printStackTrace (); } if ( ! TextUtils . isEmpty ( token )) { outText += token + \"\\n\" ; } }","title":"Android"},{"location":"desarrollo/android.html#android","text":"","title":"Android"},{"location":"desarrollo/android.html#entorno","text":"Todos los drivers para instalar ADB en Windows sin morir en el intento","title":"Entorno"},{"location":"desarrollo/android.html#compilacion-aosp","text":"Getting Started: Building Android From Source How to Build an Android ROM","title":"Compilaci\u00f3n AOSP"},{"location":"desarrollo/android.html#documentacion-clave","text":"ID's de los View's","title":"Documentaci\u00f3n clave"},{"location":"desarrollo/android.html#tips-varios","text":"Activity restart on rotation Android Lint, eliminando la pelusa de nuestras aplicaciones","title":"Tips varios"},{"location":"desarrollo/android.html#librerias","text":"RoboGuice la librer\u00eda que exprime nuestro c\u00f3digo OrmLite - Lightweight Object Relational Mapping (ORM) Java Package Mobile Framework that uses the actual features of #HTML5, #CSS3 and #JavaScript","title":"Librer\u00edas"},{"location":"desarrollo/android.html#tutoriales","text":"Android Development Tutorial (Lars Vogel) Android ListView and ListActivity (Lars Vogel) Pasando informaci\u00f3n entre Actividades (Activity) en Android Avoid memory leaks on Android","title":"Tutoriales"},{"location":"desarrollo/android.html#snippets","text":"WikiDroid Categor\u00eda Android en WikiCode Androcode Android Snippets","title":"Snippets"},{"location":"desarrollo/android.html#estructuras-de-datos","text":"Android DataFramework, creando la estructura de la Base de Datos Usando Android DataFramework en nuestro proyecto","title":"Estructuras de datos"},{"location":"desarrollo/android.html#sobre-diseno","text":"Hello, Views Common Layout Objects Android Interaction Desing Patterns :!: Icon Design Guidelines Widget Design Guidelines Android App Developers GUI Kits, Icons, Fonts and Tools Android R Drawable Explorer 20 herramientas \u00fatiles para Desarrolladores Android Android Design El cambio de tendencia en la UI de Android: el Men\u00fa Lateral","title":"Sobre Dise\u00f1o"},{"location":"desarrollo/android.html#mapas","text":"Obtener APIKey Tu clave es: 1 0V21y2J7NRVSVKA...5C9Ag Esta clave es v\u00e1lida para todas las aplicaciones firmadas con el certificado cuya huella dactilar sea: 1 C2 : EC : 22 : 8 F :...: 56 : 39 Incluimos un dise\u00f1o xml de ejemplo para que puedas iniciarte por los senderos de la creaci\u00f3n de mapas: <com.google.android.maps.MapView android:layout_width= \"fill_parent\" android:layout_height= \"fill_parent\" android:apiKey= \"0V21y2J7NRVSVKA...5C9Ag\" />","title":"Mapas"},{"location":"desarrollo/android.html#depurar","text":"A\u00f1adir el atributo siguiente al bloque \"application\": 1 android : debuggable = \"true\" Solicitar el permiso siguiente: 1 <uses-permission android:name=\"android.permission.SET_DEBUG_APP\" />","title":"Depurar"},{"location":"desarrollo/android.html#logcat-filtrado","text":"Ejemplo de una expresi\u00f3n de filtrado que suprime (silencia) todos los mensajes de log excepto los que tienen el tag \"ActivityManager\" con una prioridad Info o superior, y los que tienen el tag \"MyApp\" con una prioridad Debug o superior: $ adb logcat ActivityManager:I MyApp:D *:S Las prioridades de log son: V \u2014 Verbose (lowest priority) D \u2014 Debug I \u2014 Info W \u2014 Warning E \u2014 Error F \u2014 Fatal S \u2014 Silent (highest priority, on which nothing is ever printed)","title":"Logcat filtrado"},{"location":"desarrollo/android.html#dumpsys-y-dumpstate","text":"Hace un volcado de los datos del sistema. Viene bien para encontrar componentes instalados (Aplicaciones, ContentProvider's, etc.): $ adb shell dumpsys $ adb shell dumpstate","title":"Dumpsys y Dumpstate"},{"location":"desarrollo/android.html#buscar-callerid","text":"import android.database.Cursor ; import android.net.Uri ; import android.provider.ContactsContract ; Uri uri = Uri . withAppendedPath ( ContactsContract . PhoneLookup . CONTENT_FILTER_URI , Uri . encode ( \"+34976010101\" )); Cursor c = getContentResolver (). query ( uri , new String [] { ContactsContract . PhoneLookup . DISPLAY_NAME }, null , null , null );","title":"Buscar CallerID"},{"location":"desarrollo/android.html#manejo-de-uris-de-contactos","text":"La API de Contacts de Android es muy potente y compleja. Los conceptos b\u00e1sicos se describen aqu\u00ed . Se manejan dos tipos de URI's: URI's de tipo tabla: Apuntan por ejemplo a una tabla completa como puede ser la de RawContacts. URI's de tipo item: Apuntan a un registro concreto de una tabla, por ejemplo un RawContact.","title":"Manejo de URI's de contactos"},{"location":"desarrollo/android.html#uri-de-la-tabla-raiz-contacts","text":"import android.net.Uri ; import android.provider.ContactsContract ; Uri contactsUri = ContactsContract . Contacts . CONTENT_URI ;","title":"URI de la tabla ra\u00edz Contacts"},{"location":"desarrollo/android.html#uri-de-la-subtabla-rawcontacts","text":"import android.net.Uri ; import android.provider.ContactsContract ; Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ;","title":"URI de la subtabla RawContacts"},{"location":"desarrollo/android.html#uri-de-la-subtabla-data","text":"import android.net.Uri ; import android.provider.ContactsContract ; Uri datasUri = ContactsContract . Data . CONTENT_URI ;","title":"URI de la subtabla Data"},{"location":"desarrollo/android.html#uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto","text":"import android.net.Uri ; import android.provider.ContactsContract ; // Tenemos en rawContactUri el URI de un RawContact. Ser\u00e1 del tipo content://com.android.contacts/raw_contacts/_id Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY );","title":"URI de la subtabla Data s\u00f3lo con los registros de un RawContact concreto"},{"location":"desarrollo/android.html#obtener-id-a-partir-de-una-uri-de-tipo-item","text":"Por ejemplo el m\u00e9todo para insertar un RawContact devuelve una URI de tipo item (no tabla). Para obtener el ID de dicho elemento podemos usar algunas funciones que hay en la clase ''android.content.ContentUris''. import android.content.ContentUris ; long rawContactId = ContentUris . parseId ( rawContactUri );","title":"Obtener ID a partir de una URI de tipo item"},{"location":"desarrollo/android.html#obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla","text":"Por ejemplo tenemos el ID de un elemento y queremos una URI para \u00e9l. import android.net.Uri ; import android.provider.ContactsContract ; import android.content.ContentUris ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Resumiendo: Significado URI (string) URI (constant) URI de toda la tabla RawContacts content://com.android.contacts/raw_contacts Uri rawContactsUri = android.provider.ContactsContract.RawContacts.CONTENT_URI URI de un registro concreto de RawContacts content://com.android.contacts/raw_contacts/<_id> Uri rawContactUri = ContentUris.withAppendedId(android.provider.ContactsContract.RawContacts.CONTENT_URI, rawContactId); URI de una subtabla (subdirectorio lo llaman en la documentaci\u00f3n) con los Datas asociados a un RawContact concreto content://com.android.contacts/raw_contacts/<_id>/entity Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY);","title":"Obtener la URI de tipo item de un elemento concreto a partir de la tabla"},{"location":"desarrollo/android.html#obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo","text":"String outText = \"\" ; Uri externalMediaUri = android . provider . MediaStore . Audio . Media . EXTERNAL_CONTENT_URI ; String [] projection = new String [] { android . provider . BaseColumns . _ID }; String where = android . provider . MediaStore . MediaColumns . TITLE + \"=?\" ; String [] whereArgs = new String [] { \"Space Oddity\" }; Cursor c = managedQuery ( externalMediaUri , projection , where , whereArgs , null ); while ( c . moveToNext ()) { for ( int i = 0 ; i < c . getColumnCount (); i ++ ) { outText += c . getColumnName ( i ) + \"= \" + c . getString ( i ) + \"\\n\" ; } }","title":"Obtener el ID de un recurso en el ContentProvider de audio externo"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone","text":"ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation > (); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Felipito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Photo . CONTENT_ITEM_TYPE ); ByteArrayOutputStream stream = new ByteArrayOutputStream (); bitmap . compress ( Bitmap . CompressFormat . JPEG , 75 , stream ); builder . withValue ( CommonDataKinds . Photo . PHOTO , stream . toByteArray ()); builder . withValue ( RawContacts . Data . IS_SUPER_PRIMARY , 1 ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); }","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone","text":"Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ; String [] projection = new String [] { ContactsContract . RawContacts . _ID }; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=? AND \" + ContactsContract . RawContacts . ACCOUNT_NAME + \"=? AND \" + ContactsContract . RawContacts . DELETED + \"=?\" ; String [] whereArgs = new String [] { \"vnd.sec.contact.phone\" , \"vnd.sec.contact.phone\" , \"0\" }; String sortOrder = \"display_name ASC\" ; Cursor c = managedQuery ( rawContactsUri , projection , where , whereArgs , sortOrder ); outText += rawContactsUri . toString () + \"\\n\" ; outText += c . getCount () + \"\\n\" ; while ( c . moveToNext ()) { int colPos = c . getColumnIndex ( ContactsContract . RawContacts . _ID ); long rawContactId = Long . parseLong ( c . getString ( colPos )); Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY ); String name = \"\" ; String number = \"\" ; Bitmap bitmap = null ; String [] projection1 = new String [] { CommonDataKinds . StructuredName . DISPLAY_NAME }; String where1 = Data . MIMETYPE + \"=?\" ; String [] whereArgs1 = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE }; Cursor c1 = managedQuery ( datasUri , projection1 , where1 , whereArgs1 , null ); if ( c1 . moveToNext ()) { name = c1 . getString ( c1 . getColumnIndex ( CommonDataKinds . StructuredName . DISPLAY_NAME )); c1 . close (); } String [] projection2 = new String [] { CommonDataKinds . Phone . NUMBER }; String where2 = Data . MIMETYPE + \"=?\" ; String [] whereArgs2 = new String [] { CommonDataKinds . Phone . CONTENT_ITEM_TYPE }; Cursor c2 = managedQuery ( datasUri , projection2 , where2 , whereArgs2 , null ); if ( c2 . moveToNext ()) { number = c2 . getString ( c2 . getColumnIndex ( CommonDataKinds . Phone . NUMBER )); c2 . close (); } String [] projection3 = new String [] { CommonDataKinds . Photo . PHOTO }; String where3 = Data . MIMETYPE + \"=?\" ; String [] whereArgs3 = new String [] { CommonDataKinds . Photo . CONTENT_ITEM_TYPE }; Cursor c3 = managedQuery ( datasUri , projection3 , where3 , whereArgs3 , null ); if ( c3 . moveToNext ()) { byte [] photo = c3 . getBlob ( c3 . getColumnIndex ( CommonDataKinds . Photo . PHOTO )); bitmap = BitmapFactory . decodeByteArray ( photo , 0 , photo . length ); c3 . close (); } outText += \"ID= \" + rawContactId + \"; Nombre= \" + name + \"; N\u00famero= \" + number ; if ( bitmap != null ) { outText += \"; Ancho foto= \" + bitmap . getWidth () + \"; Alto foto= \" + bitmap . getHeight (); } outText += \"\\n\" ; } c . close ();","title":"Extraer el nombre, el n\u00famero y la foto de los Contacts de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#borrado-de-los-contactos-de-un-tipo","text":"Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=?\" ; String [] whereArgs = new String [] { \"es.eduardofilo.app\" }; getContentResolver (). delete ( rawContacts , where , whereArgs );","title":"Borrado de los contactos de un tipo"},{"location":"desarrollo/android.html#borrado-de-un-contacto","text":"Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , 13 ); getContentResolver (). delete ( rawContactUri , null , null );","title":"Borrado de un contacto"},{"location":"desarrollo/android.html#actualizar-el-nombre-de-un-contacto","text":"long rawContactId = 14 ; Uri data = ContactsContract . Data . CONTENT_URI ; ContentValues values = new ContentValues (); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Jorgito\" ); String where = Data . MIMETYPE + \"=? AND \" + ContactsContract . Data . RAW_CONTACT_ID + \"=?\" ; String [] whereArgs = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE , Long . toString ( rawContactId ) }; getContentResolver (). update ( data , values , where , whereArgs );","title":"Actualizar el nombre de un contacto"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1","text":"ContentValues values = new ContentValues (); values . put ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); values . put ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); Uri rawContactUri = getContentResolver (). insert ( RawContacts . CONTENT_URI , values ); long rawContactId = ContentUris . parseId ( rawContactUri ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Pepito\" ); Uri data1Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); values . put ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); Uri data2Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values );","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2","text":"Igual que antes pero hecho con el sistema de operaciones por lotes de los ContentProvider's. ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation > (); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Debianito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); }","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#localizar-un-launcher-que-no-sea-el-nuestro","text":"PackageManager pm = getPackageManager (); Intent intent = new Intent ( Intent . ACTION_MAIN ); intent . addCategory ( Intent . CATEGORY_HOME ); List < ResolveInfo > launchers = pm . queryIntentActivities ( intent , 0 ); String packageName = null ; String name = null ; for ( ResolveInfo ri : launchers ) { if ( ! ri . activityInfo . name . equals ( \"es.eduardofilo.app.mobile.IdentificarTerminal\" )) { name = ri . activityInfo . name ; packageName = ri . activityInfo . packageName ; break ; } } Intent myIntent = new Intent (); myIntent . setClassName ( packageName , name ); startActivity ( myIntent );","title":"Localizar un Launcher que no sea el nuestro"},{"location":"desarrollo/android.html#obtener-un-authtoken-de-un-account","text":"mAccountManager = AccountManager . get ( this ); Account [] accounts = mAccountManager . getAccountsByType ( ACCOUNT_TYPE ); for ( Account account : accounts ) { outText += account . toString () + \"\\n\" ; AccountManagerFuture < Bundle > accountManagerFuture = mAccountManager . getAuthToken ( account , \"es.eduardofilo.app\" , true , null , null ); Bundle authTokenBundle ; String token = null ; try { authTokenBundle = accountManagerFuture . getResult (); token = authTokenBundle . get ( AccountManager . KEY_AUTHTOKEN ). toString (); } catch ( OperationCanceledException e ) { e . printStackTrace (); } catch ( AuthenticatorException e ) { e . printStackTrace (); } catch ( IOException e ) { e . printStackTrace (); } if ( ! TextUtils . isEmpty ( token )) { outText += token + \"\\n\" ; } }","title":"Obtener un authToken de un Account"},{"location":"desarrollo/db.html","text":"Bases de Datos \u00b6 Enlaces \u00b6 What's the difference between identifying and non-identifying relationships? Join Cheat sheet \u00b6","title":"Bases de Datos"},{"location":"desarrollo/db.html#bases-de-datos","text":"","title":"Bases de Datos"},{"location":"desarrollo/db.html#enlaces","text":"What's the difference between identifying and non-identifying relationships?","title":"Enlaces"},{"location":"desarrollo/db.html#join-cheat-sheet","text":"","title":"Join Cheat sheet"},{"location":"desarrollo/diseno.html","text":"Dise\u00f1o \u00b6 Colecciones iconos \u00b6 Crystal Clear FamFamFam Free icons search engine - iconlet Icon Finder :exclamation: ICONS etc Colecci\u00f3n fondos \u00b6 Backgrounds ETC Buscador im\u00e1genes \u00b6 freepik Colecci\u00f3n de im\u00e1genes \u00b6 stock.xchng Colores \u00b6 Colour Scheme Calculator : Calculadora de colores complementarios a uno dado.","title":"Dise\u00f1o"},{"location":"desarrollo/diseno.html#diseno","text":"","title":"Dise\u00f1o"},{"location":"desarrollo/diseno.html#colecciones-iconos","text":"Crystal Clear FamFamFam Free icons search engine - iconlet Icon Finder :exclamation: ICONS etc","title":"Colecciones iconos"},{"location":"desarrollo/diseno.html#coleccion-fondos","text":"Backgrounds ETC","title":"Colecci\u00f3n fondos"},{"location":"desarrollo/diseno.html#buscador-imagenes","text":"freepik","title":"Buscador im\u00e1genes"},{"location":"desarrollo/diseno.html#coleccion-de-imagenes","text":"stock.xchng","title":"Colecci\u00f3n de im\u00e1genes"},{"location":"desarrollo/diseno.html#colores","text":"Colour Scheme Calculator : Calculadora de colores complementarios a uno dado.","title":"Colores"},{"location":"desarrollo/dokuwiki.html","text":"Dokuwiki \u00b6 Thumbnail's autom\u00e1ticos de im\u00e1genes \u00b6 Para ello basta con instalar en el servidor PHP que ejecute DokuWiki el m\u00f3dulo GD para PHP. En Ubuntu el paquete se llama php5-gd . Template Monobook \u00b6 Hay un template que proporciona el mismo interfaz que el de MediaWiki (Wikipedia) a DokuWiki. Se trata de Monobook . Instalaci\u00f3n \u00b6 Adem\u00e1s de instalar la plantilla y configurarla, es necesario instalar el plugin Display Wiki Page . Cambios recientes \u00b6 Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"Cambios recientes\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : $monobook['defaulttoolbox']['recent']['href'] = DOKU_BASE.\"doku.php?do=recent\"; $monobook['defaulttoolbox']['recent']['text'] = $lang['monobook_recent']; $monobook['defaulttoolbox']['recent']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : $lang['monobook_recent'] = \"Cambios recientes\"; \u00cdndice \u00b6 Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"\u00cdndice\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : $monobook['defaulttoolbox']['index']['href'] = DOKU_BASE.\"doku.php?do=index\"; $monobook['defaulttoolbox']['index']['text'] = $lang['monobook_index']; $monobook['defaulttoolbox']['index']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : $lang['monobook_index'] = \"\u00cdndice\"; Logo \u00b6 El logo que aparece arriba a la izquierda es el fichero logo.png que se encuentra en el directorio $DOKU_BASE/lib/tpl/monobook/user . El icono que aparece en la barra de direcci\u00f3n del navegador es el fichero favicon.ico del mismo directorio. Backup autom\u00e1tico \u00b6 Programar diariamente el script siguiente: #!/bin/bash # Backup de IMSWiki. # Creamos un identificador con la fecha para diferenciar los backups fecha = ` date +%m%d ` # Si el fichero ya existe no repetimos el backup if [ -f $HOME .backupWiki/backupWiki $fecha .tgz ] ; then echo \"El backup ya existe\" exit fi # Hacemos el backup sobre el servidor ssh aire@192.168.11.3 tar -czvf /tmp/backupWiki $fecha .tgz /var/www/data/ # Lo copiamos a nuestra m\u00e1quina scp aire@192.168.11.3:/tmp/backupWiki $fecha .tgz $HOME /.backupWiki # Borramos el bote recien creado y que ya ha sido transmitido a nuestra m\u00e1quina ssh aire@192.168.11.3 rm /tmp/backupWiki $fecha .tgz # Purgamos los backups de hace m\u00e1s de un mes en nuestra m\u00e1quina find $HOME /.backupWiki -name 'backupWiki*.tgz' -mtime +30 -type f | xargs rm -rf El script anterior tal y como est\u00e1 dise\u00f1ado deposita el backup sobre el directorio $HOME/.backupWiki por lo que deber\u00e1 existir dicho directorio. La programaci\u00f3n se puede hacer de muchas maneras (por ejemplo en Gnome a\u00f1adiendo una entrada al panel de control Sesiones, solapa \"Programas de inicio\").","title":"Dokuwiki"},{"location":"desarrollo/dokuwiki.html#dokuwiki","text":"","title":"Dokuwiki"},{"location":"desarrollo/dokuwiki.html#thumbnails-automaticos-de-imagenes","text":"Para ello basta con instalar en el servidor PHP que ejecute DokuWiki el m\u00f3dulo GD para PHP. En Ubuntu el paquete se llama php5-gd .","title":"Thumbnail's autom\u00e1ticos de im\u00e1genes"},{"location":"desarrollo/dokuwiki.html#template-monobook","text":"Hay un template que proporciona el mismo interfaz que el de MediaWiki (Wikipedia) a DokuWiki. Se trata de Monobook .","title":"Template Monobook"},{"location":"desarrollo/dokuwiki.html#instalacion","text":"Adem\u00e1s de instalar la plantilla y configurarla, es necesario instalar el plugin Display Wiki Page .","title":"Instalaci\u00f3n"},{"location":"desarrollo/dokuwiki.html#cambios-recientes","text":"Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"Cambios recientes\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : $monobook['defaulttoolbox']['recent']['href'] = DOKU_BASE.\"doku.php?do=recent\"; $monobook['defaulttoolbox']['recent']['text'] = $lang['monobook_recent']; $monobook['defaulttoolbox']['recent']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : $lang['monobook_recent'] = \"Cambios recientes\";","title":"Cambios recientes"},{"location":"desarrollo/dokuwiki.html#indice","text":"Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"\u00cdndice\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : $monobook['defaulttoolbox']['index']['href'] = DOKU_BASE.\"doku.php?do=index\"; $monobook['defaulttoolbox']['index']['text'] = $lang['monobook_index']; $monobook['defaulttoolbox']['index']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : $lang['monobook_index'] = \"\u00cdndice\";","title":"\u00cdndice"},{"location":"desarrollo/dokuwiki.html#logo","text":"El logo que aparece arriba a la izquierda es el fichero logo.png que se encuentra en el directorio $DOKU_BASE/lib/tpl/monobook/user . El icono que aparece en la barra de direcci\u00f3n del navegador es el fichero favicon.ico del mismo directorio.","title":"Logo"},{"location":"desarrollo/dokuwiki.html#backup-automatico","text":"Programar diariamente el script siguiente: #!/bin/bash # Backup de IMSWiki. # Creamos un identificador con la fecha para diferenciar los backups fecha = ` date +%m%d ` # Si el fichero ya existe no repetimos el backup if [ -f $HOME .backupWiki/backupWiki $fecha .tgz ] ; then echo \"El backup ya existe\" exit fi # Hacemos el backup sobre el servidor ssh aire@192.168.11.3 tar -czvf /tmp/backupWiki $fecha .tgz /var/www/data/ # Lo copiamos a nuestra m\u00e1quina scp aire@192.168.11.3:/tmp/backupWiki $fecha .tgz $HOME /.backupWiki # Borramos el bote recien creado y que ya ha sido transmitido a nuestra m\u00e1quina ssh aire@192.168.11.3 rm /tmp/backupWiki $fecha .tgz # Purgamos los backups de hace m\u00e1s de un mes en nuestra m\u00e1quina find $HOME /.backupWiki -name 'backupWiki*.tgz' -mtime +30 -type f | xargs rm -rf El script anterior tal y como est\u00e1 dise\u00f1ado deposita el backup sobre el directorio $HOME/.backupWiki por lo que deber\u00e1 existir dicho directorio. La programaci\u00f3n se puede hacer de muchas maneras (por ejemplo en Gnome a\u00f1adiendo una entrada al panel de control Sesiones, solapa \"Programas de inicio\").","title":"Backup autom\u00e1tico"},{"location":"desarrollo/eclipse.html","text":"Eclipse \u00b6 Cambio de tipo de letra del editor \u00b6 Acceder al siguiente elemento de las preferencias: \"General / Appearence / Colors and Fonts\". Desplegar el lenguaje que se est\u00e9 utilizando en el proyecto (Java por ejemplo). Seleccionar el elemento \"Java Editor Text Font\" y pulsar el bot\u00f3n \"Change\". Atributos de ficheros XML uno por linea \u00b6 Fuente Acceder al siguiente elemento de las preferencias: \"XML / XML FIles / Editor\". Seleccionar el elemento \"Split multiple attributes each on a new line\". Columnas admitidas por el indentador autom\u00e1tico \u00b6 Por defecto Eclipse admite 80 columnas de texto cuando se aplica el formateador autom\u00e1tico (Comando/Ctrl + Shift + F). Para cambiar este valor hay que acudir a la siguiente ruta en Preferencias: 1 Java / Code Style / Formatter Aqu\u00ed hay que crear un profile nuevo que podamos editar (dado que los predeterminados son de s\u00f3lo lectura). Una vez creado (nos podemos basar en el predeterminado de nombre \"Eclipse [built-in]\") iremos a: 1 Edit... / Line Wrapping / General settings / Maximun line width Y le daremos el valor deseado (120 en mi caso). Para reforzar la situaci\u00f3n de ese l\u00edmite, podemos cambiar el siguiente ajuste en preferencias y darle el mismo valor (120 en mi caso): 1 General / Editors / Text Editors / Print margin column ( previamente hay que activar \"Show print margin\" )","title":"Eclipse"},{"location":"desarrollo/eclipse.html#eclipse","text":"","title":"Eclipse"},{"location":"desarrollo/eclipse.html#cambio-de-tipo-de-letra-del-editor","text":"Acceder al siguiente elemento de las preferencias: \"General / Appearence / Colors and Fonts\". Desplegar el lenguaje que se est\u00e9 utilizando en el proyecto (Java por ejemplo). Seleccionar el elemento \"Java Editor Text Font\" y pulsar el bot\u00f3n \"Change\".","title":"Cambio de tipo de letra del editor"},{"location":"desarrollo/eclipse.html#atributos-de-ficheros-xml-uno-por-linea","text":"Fuente Acceder al siguiente elemento de las preferencias: \"XML / XML FIles / Editor\". Seleccionar el elemento \"Split multiple attributes each on a new line\".","title":"Atributos de ficheros XML uno por linea"},{"location":"desarrollo/eclipse.html#columnas-admitidas-por-el-indentador-automatico","text":"Por defecto Eclipse admite 80 columnas de texto cuando se aplica el formateador autom\u00e1tico (Comando/Ctrl + Shift + F). Para cambiar este valor hay que acudir a la siguiente ruta en Preferencias: 1 Java / Code Style / Formatter Aqu\u00ed hay que crear un profile nuevo que podamos editar (dado que los predeterminados son de s\u00f3lo lectura). Una vez creado (nos podemos basar en el predeterminado de nombre \"Eclipse [built-in]\") iremos a: 1 Edit... / Line Wrapping / General settings / Maximun line width Y le daremos el valor deseado (120 en mi caso). Para reforzar la situaci\u00f3n de ese l\u00edmite, podemos cambiar el siguiente ajuste en preferencias y darle el mismo valor (120 en mi caso): 1 General / Editors / Text Editors / Print margin column ( previamente hay que activar \"Show print margin\" )","title":"Columnas admitidas por el indentador autom\u00e1tico"},{"location":"desarrollo/git.html","text":"Git \u00b6 Enlaces \u00b6 Libro Pro Git en espa\u00f1ol Cheat Sheat git - la gu\u00eda sencilla :exclamation: Git Tutorials & Training by Atlassian :exclamation: Detached HEAD en Git Github git tutorial La Par\u00e1bola de Git @ CAPSiDE HQ Lleva Git al pr\u00f3ximo nivel con Git Flow git-flow cheatsheet Github Release Stats Comandos b\u00e1sicos \u00b6 Config: $ git config --global user.name \"Eduardo Moreno\" $ git config --global user.email user@dominio.com $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global core.editor \"subl -w\" Alternativamente se pueden hacer todos los cambios simult\u00e1neamente editando el fichero ~/.gitconfig . Una configuraci\u00f3n podr\u00eda ser: [user] name = Eduardo Moreno email = user@dominio.com [alias] co = checkout ci = commit st = status [core] editor = subl -w Creaci\u00f3n repositorio (local; crea el subdirectorio .git ): $ cd first_app $ git init Add ( fuente ): # stages All $ git add -A # stages new and modified, without deleted $ git add . # stages modified and deleted, without new $ git add -u Commit: $ git commit Commit general de cambios: $ git commit -a Status: $ git status Restituir ficheros borrados: $ git checkout -f Log: $ git log Log indicando los ficheros modificados: $ git log --name-status $ git log --stat Ficheros modificados en un branch: $ git diff --name-status master..sip-economy $ git diff --stat master..sip-economy Log indicando los commits que afectan a un fichero ( fuente ): $ git log --follow filename Localizar el commit inicial de la rama branch_name surgida de master ( fuente ): $ git log master..branch_name --oneline | tail -1 Rename: $ git mv fichero.txt fichero.log Preparar un servidor: $ cd first_app/.. $ git clone --bare first_app first_app.git $ scp -r first_app.git usuario@dominio.com:git Conectar la copia de trabajo con un servidor: $ cd first_app $ git remote add origin usuario@dominio.com:git/first_app.git ( origin es el nombre de la conexi\u00f3n; puede ser cualquier cosa, aunque si se pone otra cosa habr\u00e1 que especificar el nombre al hacer push , ya que origin es el nombre de destino predeterminado) Mostrar la lista de conexiones de la copia de trabajo con servidores: $ git remote -v Desconectar la copia de trabajo con un servidor: $ git remote rm origin ( origin es el nombre de la conexi\u00f3n; puede ser cualquier otro) Checkout (remoto): $ git clone usuario@dominio.com:git/first_app.git Sincronizar con el servidor remoto: $ git push [ origin master ] Info (parecido a svn info): $ cat .git/config Crear un tag $ git tag -a tag_id -m \"Creaci\u00f3n de tag tag_id.\" $ git push --follow-tags Eliminaci\u00f3n de un tag $ git tag -d tag_id $ git push origin :refs/tags/tag_id Eliminaci\u00f3n de \u00faltimo commit ( fuente ) $ git reset --hard HEAD~1 Si el commit ya ha subido al repositorio hacer adem\u00e1s: $ git push origin HEAD --force Para olvidar cambios (incluso commits) hechos en local ( fuente ): $ git reset --hard origin/master Diff's \u00b6 Distintos tipos de diff's: working vs staging: git diff staging vs snapshot: git diff --staged working vs snapshot: git diff HEAD snapshot vs snapshot: git diff <from_SHA1> <to_SHA1> Ficheros modificados entre dos commits: $ git diff --name-only SHA1 SHA2 $ #o $ git diff --stat SHA1 SHA2 Diferencias en un fichero entre dos commits: $ git diff SHA1 SHA2 FICHERO Muestra la versi\u00f3n de un fichero en un determinado commit: $ git show SHA:FILE Branches \u00b6 Creaci\u00f3n: $ git checkout -b alta-usuarios Listado de branches: $ git branch Listado de branches locales y remotos: $ git branch -a Seleccionar un branch: $ git checkout alta-usuarios Sincronizar con el servidor remoto: $ git push origin alta-usuarios Seleccionar trunk: $ git checkout master Merge: $ git checkout master $ git merge alta-usuarios $ git branch -d alta-usuarios Abandonar y borrar un branch local: $ git checkout master $ git branch -D alta-usuarios Borrar un branch remoto. Si despu\u00e9s de hacer lo anterior hacemos un git pull la rama local volver\u00e1 a crearse, ya que segu\u00eda estando en el servidor. Esto podemos arreglarlo de la siguiente manera: $ git push origin :alta-usuarios #suponiendo que la rama en el servidor se llama igual que nuestra ex-rama local o $ git push origin --delete alta-usuarios Seleccionar un branch remoto ( fuente ): $ git checkout -b fix#3413 origin/fix#3413 Stash \u00b6 Borrado de la lista: $ git stash clear Guardar y recuperar con nombre ( fuente ): # Guardar git stash save nombre # Listar git stash list stash@ { 0 } : On branch: nombre # Aplicar git stash apply stash@ { 0 } # Borrar git stash drop stash@ { 0 } Ver los cambios que contiene un stash ( fuente ): # Para ver el contenido del stash m\u00e1s reciente git stash show -p # Para ver el contenido de un stash en concreto git stash show -p stash@ { 1 } Ignorar cambios de un fichero incluido en el repositorio \u00b6 ( Fuente ) No se trata de la t\u00edpica entrada en .gitignore dado que los ficheros all\u00ed listados se supone que ni siquiera forman parte del repositorio. Se trata de tener una versi\u00f3n del fichero en el repositorio pero luego no queremos actualizarlo. Para ello ejecutar: git update-index --assume-unchanged <file> Para averiguar los ficheros que estamos ignorando de esta forma: git ls-files -v | grep '^h' Y si en alg\u00fan momento queremos recuperar la detecci\u00f3n de cambios en el fichero: git update-index --no-assume-unchanged <file> Salir de estado \"HEAD detached at\" \u00b6 En este estado b\u00e1sicamente es que HEAD deja de apuntar al final de una rama (secuencia de commits) para apuntar a un commit concreto directamente. La forma de salir es o volver a hacer checkout de cualquier branch si no se quieren conservar los cambios hechos tras recuperar ese commit, o bien crear un branch temporal para commitear esos cambios y ya luego si se desea incorporarlos a la rama de la que nos hab\u00edamos descolgado. A continuaci\u00f3n se describen las dos opciones: Si no nos importa perder los cambios git checkout <branch> Si hay cambios tras hacer el checkout del commit: git checkout -b temp git checkout <branch> git merge temp En la fuente de estas ideas se describe un procedimiento m\u00e1s elaborado para reapuntar el <branch> ( master en el ejemplo que ponen) a este nuevo branch temporal. Cambiar el message del \u00faltimo commit \u00b6 ( Fuente ) Esto sirve si a\u00fan no hemos propagado el commit hacia otros repositorios remotos: git commit --amend gitbook \u00b6 La utilidad de l\u00ednea de comando para compilar los libros a epub por ejemplo se instala con npm : sudo npm install gitbook-cli -g sudo npm install svgexport -g Una vez disponible, entraremos en el directorio del repositorio que contenga un gitbook y generaremos un epub: $ cd git/ $ git clone https://github.com/DjangoGirls/tutorial.git $ cd tutorial/es/ $ gitbook epub ./ ./tutorial.epub Borrar \u00faltimo commit \u00b6 Para borrar el \u00faltimo commit cuando a\u00fan no lo hemos publicado (push) hacer lo siguiente ( fuente ): $ git reset --hard HEAD~1 Con esto conseguimos que el puntero del branch apunte al commit anterior al HEAD actual. Es importante que el commit que vayamos a borrar s\u00f3lo est\u00e9 en nuestro repositorio. Si ya ha sido propagado a otros repositorios, ser\u00e1 mejor deshacer los cambios mediante otro commit. Sustituir autor de todos los commits \u00b6 Fuente Crear un clon bare del repositorio A partir de origen remoto (suponemos que tenemos todas las copias de trabajo en ~/git ): $ cd ~/git $ git clone --bare https://github.com/user/repo.git A partir de origen local: $ cd ~/git $ git clone --bare repo repo.git Nos situamos en el directorio con el repositorio bare que se acaba de crear: $ cd repo.git Copiar y pegar en la terminal el siguiente script sustituyendo las siguientes variables por lo que corresponda: OLD_EMAIL CORRECT_NAME CORRECT_EMAIL #!/bin/sh git filter-branch --env-filter ' OLD_EMAIL=\"your-old-email@example.com\" CORRECT_NAME=\"Your Correct Name\" CORRECT_EMAIL=\"your-correct-email@example.com\" if [ \"$GIT_COMMITTER_EMAIL\" = \"$OLD_EMAIL\" ] then export GIT_COMMITTER_NAME=\"$CORRECT_NAME\" export GIT_COMMITTER_EMAIL=\"$CORRECT_EMAIL\" fi if [ \"$GIT_AUTHOR_EMAIL\" = \"$OLD_EMAIL\" ] then export GIT_AUTHOR_NAME=\"$CORRECT_NAME\" export GIT_AUTHOR_EMAIL=\"$CORRECT_EMAIL\" fi ' --tag-name-filter cat -- --branches --tags Pulsar Enter para ejecutar el script. Revisar el log de Git. Sincronizar los cambios al origin: $ git push --force --tags origin 'refs/heads/*' Borrar el clon temporal: $ cd .. $ rm -rf repo.git Subm\u00f3dulos \u00b6 Documentaci\u00f3n: Enlace 1 , Enlace 2 . A\u00f1adir subm\u00f3dulo (el directorio PATH que se pone al final no debe existir): $ git submodule add SUBMODULE_URL PATH Clonar un repositorio con subm\u00f3dulos: $ git clone --recursive REPO_URL # si los subm\u00f3dulos tienen a su vez subm\u00f3dulos $ git clone --recurse-submodules URL # si no hay subm\u00f3dulos recursivos Actualizar repositorio y subm\u00f3dulos: $ git pull --recurse-submodules Borrar commits en repositorio remoto \u00b6 Es importante recordar que si los cambios ya han sido compartidos, es decir otras personas los han sincronizado, se va a romper el hist\u00f3rico para estas personas. Pero si el repositorio es personal, se puede hacer lo siguiente: Situarnos en el commit que nos interese: Para borrar s\u00f3lo el \u00faltimo: git reset HEAD^ --hard Para borrar varios: git reset <hash_commit> --hard Forzar los cambios en el repositorio remoto: git push origin -f","title":"Git"},{"location":"desarrollo/git.html#git","text":"","title":"Git"},{"location":"desarrollo/git.html#enlaces","text":"Libro Pro Git en espa\u00f1ol Cheat Sheat git - la gu\u00eda sencilla :exclamation: Git Tutorials & Training by Atlassian :exclamation: Detached HEAD en Git Github git tutorial La Par\u00e1bola de Git @ CAPSiDE HQ Lleva Git al pr\u00f3ximo nivel con Git Flow git-flow cheatsheet Github Release Stats","title":"Enlaces"},{"location":"desarrollo/git.html#comandos-basicos","text":"Config: $ git config --global user.name \"Eduardo Moreno\" $ git config --global user.email user@dominio.com $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global core.editor \"subl -w\" Alternativamente se pueden hacer todos los cambios simult\u00e1neamente editando el fichero ~/.gitconfig . Una configuraci\u00f3n podr\u00eda ser: [user] name = Eduardo Moreno email = user@dominio.com [alias] co = checkout ci = commit st = status [core] editor = subl -w Creaci\u00f3n repositorio (local; crea el subdirectorio .git ): $ cd first_app $ git init Add ( fuente ): # stages All $ git add -A # stages new and modified, without deleted $ git add . # stages modified and deleted, without new $ git add -u Commit: $ git commit Commit general de cambios: $ git commit -a Status: $ git status Restituir ficheros borrados: $ git checkout -f Log: $ git log Log indicando los ficheros modificados: $ git log --name-status $ git log --stat Ficheros modificados en un branch: $ git diff --name-status master..sip-economy $ git diff --stat master..sip-economy Log indicando los commits que afectan a un fichero ( fuente ): $ git log --follow filename Localizar el commit inicial de la rama branch_name surgida de master ( fuente ): $ git log master..branch_name --oneline | tail -1 Rename: $ git mv fichero.txt fichero.log Preparar un servidor: $ cd first_app/.. $ git clone --bare first_app first_app.git $ scp -r first_app.git usuario@dominio.com:git Conectar la copia de trabajo con un servidor: $ cd first_app $ git remote add origin usuario@dominio.com:git/first_app.git ( origin es el nombre de la conexi\u00f3n; puede ser cualquier cosa, aunque si se pone otra cosa habr\u00e1 que especificar el nombre al hacer push , ya que origin es el nombre de destino predeterminado) Mostrar la lista de conexiones de la copia de trabajo con servidores: $ git remote -v Desconectar la copia de trabajo con un servidor: $ git remote rm origin ( origin es el nombre de la conexi\u00f3n; puede ser cualquier otro) Checkout (remoto): $ git clone usuario@dominio.com:git/first_app.git Sincronizar con el servidor remoto: $ git push [ origin master ] Info (parecido a svn info): $ cat .git/config Crear un tag $ git tag -a tag_id -m \"Creaci\u00f3n de tag tag_id.\" $ git push --follow-tags Eliminaci\u00f3n de un tag $ git tag -d tag_id $ git push origin :refs/tags/tag_id Eliminaci\u00f3n de \u00faltimo commit ( fuente ) $ git reset --hard HEAD~1 Si el commit ya ha subido al repositorio hacer adem\u00e1s: $ git push origin HEAD --force Para olvidar cambios (incluso commits) hechos en local ( fuente ): $ git reset --hard origin/master","title":"Comandos b\u00e1sicos"},{"location":"desarrollo/git.html#diffs","text":"Distintos tipos de diff's: working vs staging: git diff staging vs snapshot: git diff --staged working vs snapshot: git diff HEAD snapshot vs snapshot: git diff <from_SHA1> <to_SHA1> Ficheros modificados entre dos commits: $ git diff --name-only SHA1 SHA2 $ #o $ git diff --stat SHA1 SHA2 Diferencias en un fichero entre dos commits: $ git diff SHA1 SHA2 FICHERO Muestra la versi\u00f3n de un fichero en un determinado commit: $ git show SHA:FILE","title":"Diff's"},{"location":"desarrollo/git.html#branches","text":"Creaci\u00f3n: $ git checkout -b alta-usuarios Listado de branches: $ git branch Listado de branches locales y remotos: $ git branch -a Seleccionar un branch: $ git checkout alta-usuarios Sincronizar con el servidor remoto: $ git push origin alta-usuarios Seleccionar trunk: $ git checkout master Merge: $ git checkout master $ git merge alta-usuarios $ git branch -d alta-usuarios Abandonar y borrar un branch local: $ git checkout master $ git branch -D alta-usuarios Borrar un branch remoto. Si despu\u00e9s de hacer lo anterior hacemos un git pull la rama local volver\u00e1 a crearse, ya que segu\u00eda estando en el servidor. Esto podemos arreglarlo de la siguiente manera: $ git push origin :alta-usuarios #suponiendo que la rama en el servidor se llama igual que nuestra ex-rama local o $ git push origin --delete alta-usuarios Seleccionar un branch remoto ( fuente ): $ git checkout -b fix#3413 origin/fix#3413","title":"Branches"},{"location":"desarrollo/git.html#stash","text":"Borrado de la lista: $ git stash clear Guardar y recuperar con nombre ( fuente ): # Guardar git stash save nombre # Listar git stash list stash@ { 0 } : On branch: nombre # Aplicar git stash apply stash@ { 0 } # Borrar git stash drop stash@ { 0 } Ver los cambios que contiene un stash ( fuente ): # Para ver el contenido del stash m\u00e1s reciente git stash show -p # Para ver el contenido de un stash en concreto git stash show -p stash@ { 1 }","title":"Stash"},{"location":"desarrollo/git.html#ignorar-cambios-de-un-fichero-incluido-en-el-repositorio","text":"( Fuente ) No se trata de la t\u00edpica entrada en .gitignore dado que los ficheros all\u00ed listados se supone que ni siquiera forman parte del repositorio. Se trata de tener una versi\u00f3n del fichero en el repositorio pero luego no queremos actualizarlo. Para ello ejecutar: git update-index --assume-unchanged <file> Para averiguar los ficheros que estamos ignorando de esta forma: git ls-files -v | grep '^h' Y si en alg\u00fan momento queremos recuperar la detecci\u00f3n de cambios en el fichero: git update-index --no-assume-unchanged <file>","title":"Ignorar cambios de un fichero incluido en el repositorio"},{"location":"desarrollo/git.html#salir-de-estado-head-detached-at","text":"En este estado b\u00e1sicamente es que HEAD deja de apuntar al final de una rama (secuencia de commits) para apuntar a un commit concreto directamente. La forma de salir es o volver a hacer checkout de cualquier branch si no se quieren conservar los cambios hechos tras recuperar ese commit, o bien crear un branch temporal para commitear esos cambios y ya luego si se desea incorporarlos a la rama de la que nos hab\u00edamos descolgado. A continuaci\u00f3n se describen las dos opciones: Si no nos importa perder los cambios git checkout <branch> Si hay cambios tras hacer el checkout del commit: git checkout -b temp git checkout <branch> git merge temp En la fuente de estas ideas se describe un procedimiento m\u00e1s elaborado para reapuntar el <branch> ( master en el ejemplo que ponen) a este nuevo branch temporal.","title":"Salir de estado \"HEAD detached at\""},{"location":"desarrollo/git.html#cambiar-el-message-del-ultimo-commit","text":"( Fuente ) Esto sirve si a\u00fan no hemos propagado el commit hacia otros repositorios remotos: git commit --amend","title":"Cambiar el message del \u00faltimo commit"},{"location":"desarrollo/git.html#gitbook","text":"La utilidad de l\u00ednea de comando para compilar los libros a epub por ejemplo se instala con npm : sudo npm install gitbook-cli -g sudo npm install svgexport -g Una vez disponible, entraremos en el directorio del repositorio que contenga un gitbook y generaremos un epub: $ cd git/ $ git clone https://github.com/DjangoGirls/tutorial.git $ cd tutorial/es/ $ gitbook epub ./ ./tutorial.epub","title":"gitbook"},{"location":"desarrollo/git.html#borrar-ultimo-commit","text":"Para borrar el \u00faltimo commit cuando a\u00fan no lo hemos publicado (push) hacer lo siguiente ( fuente ): $ git reset --hard HEAD~1 Con esto conseguimos que el puntero del branch apunte al commit anterior al HEAD actual. Es importante que el commit que vayamos a borrar s\u00f3lo est\u00e9 en nuestro repositorio. Si ya ha sido propagado a otros repositorios, ser\u00e1 mejor deshacer los cambios mediante otro commit.","title":"Borrar \u00faltimo commit"},{"location":"desarrollo/git.html#sustituir-autor-de-todos-los-commits","text":"Fuente Crear un clon bare del repositorio A partir de origen remoto (suponemos que tenemos todas las copias de trabajo en ~/git ): $ cd ~/git $ git clone --bare https://github.com/user/repo.git A partir de origen local: $ cd ~/git $ git clone --bare repo repo.git Nos situamos en el directorio con el repositorio bare que se acaba de crear: $ cd repo.git Copiar y pegar en la terminal el siguiente script sustituyendo las siguientes variables por lo que corresponda: OLD_EMAIL CORRECT_NAME CORRECT_EMAIL #!/bin/sh git filter-branch --env-filter ' OLD_EMAIL=\"your-old-email@example.com\" CORRECT_NAME=\"Your Correct Name\" CORRECT_EMAIL=\"your-correct-email@example.com\" if [ \"$GIT_COMMITTER_EMAIL\" = \"$OLD_EMAIL\" ] then export GIT_COMMITTER_NAME=\"$CORRECT_NAME\" export GIT_COMMITTER_EMAIL=\"$CORRECT_EMAIL\" fi if [ \"$GIT_AUTHOR_EMAIL\" = \"$OLD_EMAIL\" ] then export GIT_AUTHOR_NAME=\"$CORRECT_NAME\" export GIT_AUTHOR_EMAIL=\"$CORRECT_EMAIL\" fi ' --tag-name-filter cat -- --branches --tags Pulsar Enter para ejecutar el script. Revisar el log de Git. Sincronizar los cambios al origin: $ git push --force --tags origin 'refs/heads/*' Borrar el clon temporal: $ cd .. $ rm -rf repo.git","title":"Sustituir autor de todos los commits"},{"location":"desarrollo/git.html#submodulos","text":"Documentaci\u00f3n: Enlace 1 , Enlace 2 . A\u00f1adir subm\u00f3dulo (el directorio PATH que se pone al final no debe existir): $ git submodule add SUBMODULE_URL PATH Clonar un repositorio con subm\u00f3dulos: $ git clone --recursive REPO_URL # si los subm\u00f3dulos tienen a su vez subm\u00f3dulos $ git clone --recurse-submodules URL # si no hay subm\u00f3dulos recursivos Actualizar repositorio y subm\u00f3dulos: $ git pull --recurse-submodules","title":"Subm\u00f3dulos"},{"location":"desarrollo/git.html#borrar-commits-en-repositorio-remoto","text":"Es importante recordar que si los cambios ya han sido compartidos, es decir otras personas los han sincronizado, se va a romper el hist\u00f3rico para estas personas. Pero si el repositorio es personal, se puede hacer lo siguiente: Situarnos en el commit que nos interese: Para borrar s\u00f3lo el \u00faltimo: git reset HEAD^ --hard Para borrar varios: git reset <hash_commit> --hard Forzar los cambios en el repositorio remoto: git push origin -f","title":"Borrar commits en repositorio remoto"},{"location":"desarrollo/html.html","text":"HTML+CSS \u00b6 Enlaces \u00b6 Varios \u00b6 Google Video Player Web App C\u00f3mo reescribir correctamente una URL desde el servidor Herramientas que no te pueden faltar como desarrollador web : 5 herramientas para testear la calidad del c\u00f3digo desde el punto de vista de SEO, velocidad, etc. jsFiddle : Para testear c\u00f3digo HTML+JS+CSS. NetRenderer : Renderiza una p\u00e1gina con distintas versiones del motor de Internet Explorer. An\u00e1lisis de UserAgent All About Floats : Explica el concepto de Clearfix. TheCodePlayer : Video style walkthroughs showing cool stuff being created from scratch :exclamation: What's My Chain Cert? : Comprobaci\u00f3n de cadena de certificados en sitios HTTPS. Carrd : Simple, free, fully responsive one-page sites for pretty much anything. Componentes \u00b6 Menucool Horizontal menu Wifeo Creative Code SEO \u00b6 Gu\u00eda de consejos de posicionamiento en Google Formatos de imagen: Gu\u00eda de optimizaci\u00f3n Fonts \u00b6 Web Safe Fonts Preview FontJazz - Embed fonts on web pages How to Embed Font in HTML Webpage \u2013 Custom Web Fonts Font Squirrel Google WebFonts Font Awesome : The iconic font designed for use with Twitter Bootstrap. Post que explica c\u00f3mo se usa. Heroicons : Beautiful hand-crafted SVG icons, by the makers of Tailwind CSS. Frameworks \u00b6 Bootstrap by Twitter Scaffolding Componentes LESS Centurion IVORY Rendimiento \u00b6 Using Page Speed for Google Chrome HTML5 \u00b6 Seis sencillas \"buenas pr\u00e1cticas\" cuando usemos HTML5 HTML5 Cheat Sheet Con IndexedDB puedes almacenar offline una base de datos en un navegador CSS \u00b6 Most Practical CSS Cheat Sheet Yet Recopilaci\u00f3n de siete tutoriales sorprendentes de CSS3 CSS-Tricks CSS contents and browser compatibility Responsive Design \u00b6 Recommendations for building smartphone-optimized websites Skeleton Descripci\u00f3n de RD en Xitrus Screenqueries : Simular el funcionamiento de una p\u00e1gina en las pantallas de los dispositivos m\u00f3viles o en cualquier tama\u00f1o de pantalla. :exclamation: Media Queries : Recopilaci\u00f3n de responsive designs.","title":"HTML+CSS"},{"location":"desarrollo/html.html#htmlcss","text":"","title":"HTML+CSS"},{"location":"desarrollo/html.html#enlaces","text":"","title":"Enlaces"},{"location":"desarrollo/html.html#varios","text":"Google Video Player Web App C\u00f3mo reescribir correctamente una URL desde el servidor Herramientas que no te pueden faltar como desarrollador web : 5 herramientas para testear la calidad del c\u00f3digo desde el punto de vista de SEO, velocidad, etc. jsFiddle : Para testear c\u00f3digo HTML+JS+CSS. NetRenderer : Renderiza una p\u00e1gina con distintas versiones del motor de Internet Explorer. An\u00e1lisis de UserAgent All About Floats : Explica el concepto de Clearfix. TheCodePlayer : Video style walkthroughs showing cool stuff being created from scratch :exclamation: What's My Chain Cert? : Comprobaci\u00f3n de cadena de certificados en sitios HTTPS. Carrd : Simple, free, fully responsive one-page sites for pretty much anything.","title":"Varios"},{"location":"desarrollo/html.html#componentes","text":"Menucool Horizontal menu Wifeo Creative Code","title":"Componentes"},{"location":"desarrollo/html.html#seo","text":"Gu\u00eda de consejos de posicionamiento en Google Formatos de imagen: Gu\u00eda de optimizaci\u00f3n","title":"SEO"},{"location":"desarrollo/html.html#fonts","text":"Web Safe Fonts Preview FontJazz - Embed fonts on web pages How to Embed Font in HTML Webpage \u2013 Custom Web Fonts Font Squirrel Google WebFonts Font Awesome : The iconic font designed for use with Twitter Bootstrap. Post que explica c\u00f3mo se usa. Heroicons : Beautiful hand-crafted SVG icons, by the makers of Tailwind CSS.","title":"Fonts"},{"location":"desarrollo/html.html#frameworks","text":"Bootstrap by Twitter Scaffolding Componentes LESS Centurion IVORY","title":"Frameworks"},{"location":"desarrollo/html.html#rendimiento","text":"Using Page Speed for Google Chrome","title":"Rendimiento"},{"location":"desarrollo/html.html#html5","text":"Seis sencillas \"buenas pr\u00e1cticas\" cuando usemos HTML5 HTML5 Cheat Sheet Con IndexedDB puedes almacenar offline una base de datos en un navegador","title":"HTML5"},{"location":"desarrollo/html.html#css","text":"Most Practical CSS Cheat Sheet Yet Recopilaci\u00f3n de siete tutoriales sorprendentes de CSS3 CSS-Tricks CSS contents and browser compatibility","title":"CSS"},{"location":"desarrollo/html.html#responsive-design","text":"Recommendations for building smartphone-optimized websites Skeleton Descripci\u00f3n de RD en Xitrus Screenqueries : Simular el funcionamiento de una p\u00e1gina en las pantallas de los dispositivos m\u00f3viles o en cualquier tama\u00f1o de pantalla. :exclamation: Media Queries : Recopilaci\u00f3n de responsive designs.","title":"Responsive Design"},{"location":"desarrollo/ia.html","text":"IA \u00b6 Enlaces \u00b6 Cursos \u00b6 fast.ai IA para todos - Coursera Cursos de Machine Learning Andrew Ng - Coursera Stanford video lectures of course CS224n: Natural Language Processing with Deep Learning - YouTube Lecture Collection | Convolutional Neural Networks for Visual Recognition - YouTube Machine Learning (aprendizaje autom\u00e1tico) con Python: una introducci\u00f3n pr\u00e1ctica : Rese\u00f1a en Genbeta TensorFlow \u00b6 TensorFlow For Poets Variational Autoencoders (VAE) \u00b6 Tutorial on Variational Autoencoders Variational autoencoders Building Variational Auto-Encoders in TensorFlow Building Autoencoders in Keras Variational Autoencoder: Intuition and Implementation World Models . En PDF","title":"IA"},{"location":"desarrollo/ia.html#ia","text":"","title":"IA"},{"location":"desarrollo/ia.html#enlaces","text":"","title":"Enlaces"},{"location":"desarrollo/ia.html#cursos","text":"fast.ai IA para todos - Coursera Cursos de Machine Learning Andrew Ng - Coursera Stanford video lectures of course CS224n: Natural Language Processing with Deep Learning - YouTube Lecture Collection | Convolutional Neural Networks for Visual Recognition - YouTube Machine Learning (aprendizaje autom\u00e1tico) con Python: una introducci\u00f3n pr\u00e1ctica : Rese\u00f1a en Genbeta","title":"Cursos"},{"location":"desarrollo/ia.html#tensorflow","text":"TensorFlow For Poets","title":"TensorFlow"},{"location":"desarrollo/ia.html#variational-autoencoders-vae","text":"Tutorial on Variational Autoencoders Variational autoencoders Building Variational Auto-Encoders in TensorFlow Building Autoencoders in Keras Variational Autoencoder: Intuition and Implementation World Models . En PDF","title":"Variational Autoencoders (VAE)"},{"location":"desarrollo/java.html","text":"Java \u00b6 Enlaces \u00b6 Java Decompiler Project Lombok Reempaquetar un jar \u00b6 Para re-enlatar un jar que hemos explotado para retocar su contendido, hay que ejecutar el siguiente comando desde el directorio ra\u00edz donde descomprimimos el jar original: $ jar cvf nombre.jar * Contar lineas \u00b6 Para contar las lineas de un proyecto, lanzar desde la ra\u00edz del proyecto ( el directorio src/java de un proyecto NetBeans, por ejemplo): $ find . -name \"*.java\" | xargs wc -l Imprimir callstack \u00b6 Para averiguar la pila de llamadas de funciones que nos permiten llegar a la ejecuci\u00f3n del punto que estamos revisando. Viene muy bien cuando la ejecuci\u00f3n implica llamadas JNI ya que esa parte del c\u00f3digo suele quedar oculta en una librer\u00eda nativa (.so o .dll). for ( StackTraceElement ste : Thread . currentThread (). getStackTrace ()) { Log . w ( TAG , ste ); } Iterar un Map \u00b6 Para el caso de un Map<String, String> : Iterator it = mapa . entrySet (). iterator (); while ( it . hasNext ()) { Map . Entry e = ( Map . Entry ) it . next (); String name = ( String ) e . getKey (); String value = ( String ) e . getValue (); //... } log4j \u00b6 ( Fuente ) El proyecto FHoSS utiliza la librer\u00eda log4j como casi todos los proyectos Java actuales. Log4j es una librer\u00eda open source desarrollada en Java por la Apache Software Foundation que permite a los desarrolladores de software elegir la salida y el nivel de granularidad de los mensajes o \u201clogs\u201d a tiempo de ejecuci\u00f3n y no a tiempo de compilaci\u00f3n como es com\u00fanmente realizado. La configuraci\u00f3n de salida y granularidad de los mensajes es realizada a tiempo de ejecuci\u00f3n mediante el uso de archivos de configuraci\u00f3n externos. Log4J ha sido implementado en otros lenguajes como: C , C++ , C# , Perl , Python , Ruby y Eiffel . Conceptos \u00b6 Niveles de prioridad de los mensajes \u00b6 Por defecto Log4J tiene 6 niveles de prioridad para los mensajes (debug, info, warn, error, fatal, trace). Adem\u00e1s existen otros dos niveles extras (all y off): DEBUG: se utiliza para escribir mensajes de depuraci\u00f3n, este log no debe estar activado cuando la aplicaci\u00f3n se encuentre en producci\u00f3n. INFO: se utiliza para mensajes similares al modo \"verbose\" en otras aplicaciones. WARN: se utiliza para mensajes de alerta sobre eventos que se desea mantener constancia, pero que no afectan el correcto funcionamiento del programa. ERROR: se utiliza en mensajes de error de la aplicaci\u00f3n que se desea guardar, estos eventos afectan al programa pero lo dejan seguir funcionando, como por ejemplo que alg\u00fan par\u00e1metro de configuraci\u00f3n no es correcto y se carga el par\u00e1metro por defecto. FATAL: se utiliza para mensajes cr\u00edticos del sistema, generalmente luego de guardar el mensaje el programa abortar\u00e1. TRACE: se utiliza para mostrar mensajes con un mayor nivel de detalle que debug. ALL: este es el nivel m\u00e1s bajo posible, habilita todos los logs. OFF: este es el nivel m\u00e1s alto posible, deshabilita todos los logs. Appenders \u00b6 En Log4J los mensajes son enviados a una (o varias) salida de destino, lo que se denomina un appender . Existen varios appenders disponibles y configurados, aunque tambi\u00e9n podemos crear y configurar nuestros propios appenders. T\u00edpicamente la salida de los mensajes es redirigida a un fichero de texto .log ( FileAppender , RollingFileAppender ), a un servidor remoto donde almacenar registros ( SocketAppender ), a una direcci\u00f3n de correo electr\u00f3nico ( SMTPAppender ), e incluso en una base de datos ( JDBCAppender ). Casi nunca es utilizado en un entorno de producci\u00f3n la salida a la consola ( ConsoleAppender ) ya que perder\u00eda gran parte de la utilidad de Log4J. Layouts \u00b6 Es el responsable de dar un formato de presentaci\u00f3n a los mensajes. Permite presentar el mensaje con el formato necesario para almacenarlo simplemente en un archivo de texto .log ( SimpleLayout y PatternLayout ), en una tabla HTML ( HTMLLayout ), o en un archivo XML ( XMLLayout ). Adem\u00e1s podemos a\u00f1adir informaci\u00f3n extra al mensaje, como la fecha en que se gener\u00f3, la clase que lo gener\u00f3, el nivel que posee... Configuraci\u00f3n \u00b6 La API es totalmente configurable, ya que se realiza mediante un archivo en formato XML o en formato Java Properties (clave=valor), generalmente llamado log4j.properties . En el siguiente ejemplo implementamos un fichero properties de configuraci\u00f3n, y configuramos dos registros. CONSOLE imprimir\u00e1 los mensajes en la consola por l\u00edneas (%m%n). LOGFILE a\u00f1adir\u00e1 (append) los mensajes a un fichero (aplicacion.log), reservando los primeros 4 caracteres para los milisegundos en que se gener\u00f3 el mensaje (%-4r), entre corchetes qui\u00e9n gener\u00f3 el mensaje ( [%t]), cinco espacios para la prioridad del mensaje (%-5p), la categor\u00eda del mensaje (%c) y finalmente el propio mensaje junto con un retorno de carro (%m%n). ################################################################ ### Configuraci\u00f3n para LOCAL ### ### Nivel de trazas m\u00e1ximo ### ### Salida por consola y fichero ### ################################################################ #log4j.rootCategory=DEBUG, LOGFILE, CONSOLE #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout #log4j.appender.CONSOLE.layout.ConversionPattern=%-5p %c %x - %m%n ################################################################ ### Configuraci\u00f3n para DESARROLLO, PREPRODUCCION, PRODUCCION ### ### S\u00f3lo nos interesa el nivel de ERROR ### ### No hay salida de consola ### ################################################################ log4j.rootCategory=ERROR, LOGFILE log4j.appender.LOGFILE=org.apache.log4j.DailyRollingFileAppender log4j.appender.LOGFILE.file=${catalina.base}/logs/aplicacion.log log4j.appender.LOGFILE.append=true log4j.appender.LOGFILE.DatePattern='.'yyyy-MM-dd log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout log4j.appender.LOGFILE.layout.ConversionPattern=%-4r [%t] %-5p %c - %m%n Para el caso de utilizar PatternLayout, la definici\u00f3n de las piezas de informaci\u00f3n que se pueden incorporar al patr\u00f3n se encuentra en esta p\u00e1gina . Si se desea \u00fanicamente log de las clases pertenecientes a un paquete (es una forma de evitar los logs del servidor de aplicaci\u00f3n en una aplicaci\u00f3n J2EE), se indica de a\u00f1adiendo esta l\u00ednea: log4j . logger . < paquete >=< nivel_de_trazas > por ejemplo: log4j . logger . es . eduardofilo . ccm = DEBUG","title":"Java"},{"location":"desarrollo/java.html#java","text":"","title":"Java"},{"location":"desarrollo/java.html#enlaces","text":"Java Decompiler Project Lombok","title":"Enlaces"},{"location":"desarrollo/java.html#reempaquetar-un-jar","text":"Para re-enlatar un jar que hemos explotado para retocar su contendido, hay que ejecutar el siguiente comando desde el directorio ra\u00edz donde descomprimimos el jar original: $ jar cvf nombre.jar *","title":"Reempaquetar un jar"},{"location":"desarrollo/java.html#contar-lineas","text":"Para contar las lineas de un proyecto, lanzar desde la ra\u00edz del proyecto ( el directorio src/java de un proyecto NetBeans, por ejemplo): $ find . -name \"*.java\" | xargs wc -l","title":"Contar lineas"},{"location":"desarrollo/java.html#imprimir-callstack","text":"Para averiguar la pila de llamadas de funciones que nos permiten llegar a la ejecuci\u00f3n del punto que estamos revisando. Viene muy bien cuando la ejecuci\u00f3n implica llamadas JNI ya que esa parte del c\u00f3digo suele quedar oculta en una librer\u00eda nativa (.so o .dll). for ( StackTraceElement ste : Thread . currentThread (). getStackTrace ()) { Log . w ( TAG , ste ); }","title":"Imprimir callstack"},{"location":"desarrollo/java.html#iterar-un-map","text":"Para el caso de un Map<String, String> : Iterator it = mapa . entrySet (). iterator (); while ( it . hasNext ()) { Map . Entry e = ( Map . Entry ) it . next (); String name = ( String ) e . getKey (); String value = ( String ) e . getValue (); //... }","title":"Iterar un Map"},{"location":"desarrollo/java.html#log4j","text":"( Fuente ) El proyecto FHoSS utiliza la librer\u00eda log4j como casi todos los proyectos Java actuales. Log4j es una librer\u00eda open source desarrollada en Java por la Apache Software Foundation que permite a los desarrolladores de software elegir la salida y el nivel de granularidad de los mensajes o \u201clogs\u201d a tiempo de ejecuci\u00f3n y no a tiempo de compilaci\u00f3n como es com\u00fanmente realizado. La configuraci\u00f3n de salida y granularidad de los mensajes es realizada a tiempo de ejecuci\u00f3n mediante el uso de archivos de configuraci\u00f3n externos. Log4J ha sido implementado en otros lenguajes como: C , C++ , C# , Perl , Python , Ruby y Eiffel .","title":"log4j"},{"location":"desarrollo/java.html#conceptos","text":"","title":"Conceptos"},{"location":"desarrollo/java.html#niveles-de-prioridad-de-los-mensajes","text":"Por defecto Log4J tiene 6 niveles de prioridad para los mensajes (debug, info, warn, error, fatal, trace). Adem\u00e1s existen otros dos niveles extras (all y off): DEBUG: se utiliza para escribir mensajes de depuraci\u00f3n, este log no debe estar activado cuando la aplicaci\u00f3n se encuentre en producci\u00f3n. INFO: se utiliza para mensajes similares al modo \"verbose\" en otras aplicaciones. WARN: se utiliza para mensajes de alerta sobre eventos que se desea mantener constancia, pero que no afectan el correcto funcionamiento del programa. ERROR: se utiliza en mensajes de error de la aplicaci\u00f3n que se desea guardar, estos eventos afectan al programa pero lo dejan seguir funcionando, como por ejemplo que alg\u00fan par\u00e1metro de configuraci\u00f3n no es correcto y se carga el par\u00e1metro por defecto. FATAL: se utiliza para mensajes cr\u00edticos del sistema, generalmente luego de guardar el mensaje el programa abortar\u00e1. TRACE: se utiliza para mostrar mensajes con un mayor nivel de detalle que debug. ALL: este es el nivel m\u00e1s bajo posible, habilita todos los logs. OFF: este es el nivel m\u00e1s alto posible, deshabilita todos los logs.","title":"Niveles de prioridad de los mensajes"},{"location":"desarrollo/java.html#appenders","text":"En Log4J los mensajes son enviados a una (o varias) salida de destino, lo que se denomina un appender . Existen varios appenders disponibles y configurados, aunque tambi\u00e9n podemos crear y configurar nuestros propios appenders. T\u00edpicamente la salida de los mensajes es redirigida a un fichero de texto .log ( FileAppender , RollingFileAppender ), a un servidor remoto donde almacenar registros ( SocketAppender ), a una direcci\u00f3n de correo electr\u00f3nico ( SMTPAppender ), e incluso en una base de datos ( JDBCAppender ). Casi nunca es utilizado en un entorno de producci\u00f3n la salida a la consola ( ConsoleAppender ) ya que perder\u00eda gran parte de la utilidad de Log4J.","title":"Appenders"},{"location":"desarrollo/java.html#layouts","text":"Es el responsable de dar un formato de presentaci\u00f3n a los mensajes. Permite presentar el mensaje con el formato necesario para almacenarlo simplemente en un archivo de texto .log ( SimpleLayout y PatternLayout ), en una tabla HTML ( HTMLLayout ), o en un archivo XML ( XMLLayout ). Adem\u00e1s podemos a\u00f1adir informaci\u00f3n extra al mensaje, como la fecha en que se gener\u00f3, la clase que lo gener\u00f3, el nivel que posee...","title":"Layouts"},{"location":"desarrollo/java.html#configuracion","text":"La API es totalmente configurable, ya que se realiza mediante un archivo en formato XML o en formato Java Properties (clave=valor), generalmente llamado log4j.properties . En el siguiente ejemplo implementamos un fichero properties de configuraci\u00f3n, y configuramos dos registros. CONSOLE imprimir\u00e1 los mensajes en la consola por l\u00edneas (%m%n). LOGFILE a\u00f1adir\u00e1 (append) los mensajes a un fichero (aplicacion.log), reservando los primeros 4 caracteres para los milisegundos en que se gener\u00f3 el mensaje (%-4r), entre corchetes qui\u00e9n gener\u00f3 el mensaje ( [%t]), cinco espacios para la prioridad del mensaje (%-5p), la categor\u00eda del mensaje (%c) y finalmente el propio mensaje junto con un retorno de carro (%m%n). ################################################################ ### Configuraci\u00f3n para LOCAL ### ### Nivel de trazas m\u00e1ximo ### ### Salida por consola y fichero ### ################################################################ #log4j.rootCategory=DEBUG, LOGFILE, CONSOLE #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout #log4j.appender.CONSOLE.layout.ConversionPattern=%-5p %c %x - %m%n ################################################################ ### Configuraci\u00f3n para DESARROLLO, PREPRODUCCION, PRODUCCION ### ### S\u00f3lo nos interesa el nivel de ERROR ### ### No hay salida de consola ### ################################################################ log4j.rootCategory=ERROR, LOGFILE log4j.appender.LOGFILE=org.apache.log4j.DailyRollingFileAppender log4j.appender.LOGFILE.file=${catalina.base}/logs/aplicacion.log log4j.appender.LOGFILE.append=true log4j.appender.LOGFILE.DatePattern='.'yyyy-MM-dd log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout log4j.appender.LOGFILE.layout.ConversionPattern=%-4r [%t] %-5p %c - %m%n Para el caso de utilizar PatternLayout, la definici\u00f3n de las piezas de informaci\u00f3n que se pueden incorporar al patr\u00f3n se encuentra en esta p\u00e1gina . Si se desea \u00fanicamente log de las clases pertenecientes a un paquete (es una forma de evitar los logs del servidor de aplicaci\u00f3n en una aplicaci\u00f3n J2EE), se indica de a\u00f1adiendo esta l\u00ednea: log4j . logger . < paquete >=< nivel_de_trazas > por ejemplo: log4j . logger . es . eduardofilo . ccm = DEBUG","title":"Configuraci\u00f3n"},{"location":"desarrollo/javaee.html","text":"JavaEE \u00b6 DisplayTag & Struts2 \u00b6 Subtabla en base a lista anidada \u00b6 <display:table name= \"platformList\" id= \"platform\" pagesize= \"0\" requestURI= \"\" class= \"displaytag\" > <display:column property= \"name\" title= \"Platform\" /> <s:set name= \"formats\" value= \"#attr.platform.formats\" /> <display:column title= \"Formats\" > <display:table name= \"formats\" id= \"format\" class= \"simple sublist\" > <s:set name= \"screenRes\" value= \"#attr.format.screenWidth + 'x' + #attr.format.screenHeight\" /> <s:set name= \"wpRes\" value= \"#attr.format.wallpaperWidth + 'x' + #attr.format.wallpaperHeight\" /> <display:column title= \"Screen Resolution\" ><s:property value= \"screenRes\" /></display:column> <display:column title= \"Wallpaper Resolution\" ><s:property value= \"wpRes\" /></display:column> <display:column title= \"File\" ><s:file name= \"pic\" label= \"Pic\" theme= \"simple\" /></display:column> </display:table> </display:column> </display:table> SessionID en Action \u00b6 public class MyActionClass extends ActionSupport implements ServletRequestAware { //... // Objeto HttpServletRequest asociado a la request. Inyectado por el interceptor servletConfig private HttpServletRequest servletRequest ; /** * Implementaci\u00f3n de interfaz ServletRequestAware * @param servletRequest Objeto HttpServletRequest asociado a la request */ @Override public void setServletRequest ( HttpServletRequest servletRequest ) { this . servletRequest = servletRequest ; } public HttpServletRequest getServletRequest () { return this . servletRequest ; } //... @Override public String execute () throws Exception { //... // Obtenemos el ID de la sesi\u00f3n String sessionID = this . servletRequest . getSession (). getId (); //... } } Mapa de Session \u00b6 public class MyActionClass extends ActionSupport implements SessionAware { //... // Mapa de par\u00e1metros de la sesi\u00f3n. Inyectado por el interceptor servletConfig private Map < String , Object > session ; /** * Implementaci\u00f3n de interfaz SessionAware * @param session El mapa de session Servlet */ @Override public void setSession ( Map < String , Object > session ) { this . session = session ; } public Map < String , Object > getSession () { return this . session ; } //... @Override public String execute () throws Exception { //... // Ponemos y cogemos datos de la sessi\u00f3n getSession (). put ( \"objeto\" , objeto ); objeto = getSession (). get ( \"objeto\" ); //... } } JSP \u00b6 Prepoblado de combo desde el propio JSP \u00b6 <s:select label= \"Priority\" name= \"wallpaper_priority\" list= \"#{-2:'Very Low',-1:'Low',0:'Normal',1:'High',2:'Very High'}\" /> Inyectar cabecera HTTP en JSP \u00b6 <% response . setHeader ( \"P3P\" , \"CP=\\\"HONK\\\"\" ); %>","title":"JavaEE"},{"location":"desarrollo/javaee.html#javaee","text":"","title":"JavaEE"},{"location":"desarrollo/javaee.html#displaytag-struts2","text":"","title":"DisplayTag &amp; Struts2"},{"location":"desarrollo/javaee.html#subtabla-en-base-a-lista-anidada","text":"<display:table name= \"platformList\" id= \"platform\" pagesize= \"0\" requestURI= \"\" class= \"displaytag\" > <display:column property= \"name\" title= \"Platform\" /> <s:set name= \"formats\" value= \"#attr.platform.formats\" /> <display:column title= \"Formats\" > <display:table name= \"formats\" id= \"format\" class= \"simple sublist\" > <s:set name= \"screenRes\" value= \"#attr.format.screenWidth + 'x' + #attr.format.screenHeight\" /> <s:set name= \"wpRes\" value= \"#attr.format.wallpaperWidth + 'x' + #attr.format.wallpaperHeight\" /> <display:column title= \"Screen Resolution\" ><s:property value= \"screenRes\" /></display:column> <display:column title= \"Wallpaper Resolution\" ><s:property value= \"wpRes\" /></display:column> <display:column title= \"File\" ><s:file name= \"pic\" label= \"Pic\" theme= \"simple\" /></display:column> </display:table> </display:column> </display:table>","title":"Subtabla en base a lista anidada"},{"location":"desarrollo/javaee.html#sessionid-en-action","text":"public class MyActionClass extends ActionSupport implements ServletRequestAware { //... // Objeto HttpServletRequest asociado a la request. Inyectado por el interceptor servletConfig private HttpServletRequest servletRequest ; /** * Implementaci\u00f3n de interfaz ServletRequestAware * @param servletRequest Objeto HttpServletRequest asociado a la request */ @Override public void setServletRequest ( HttpServletRequest servletRequest ) { this . servletRequest = servletRequest ; } public HttpServletRequest getServletRequest () { return this . servletRequest ; } //... @Override public String execute () throws Exception { //... // Obtenemos el ID de la sesi\u00f3n String sessionID = this . servletRequest . getSession (). getId (); //... } }","title":"SessionID en Action"},{"location":"desarrollo/javaee.html#mapa-de-session","text":"public class MyActionClass extends ActionSupport implements SessionAware { //... // Mapa de par\u00e1metros de la sesi\u00f3n. Inyectado por el interceptor servletConfig private Map < String , Object > session ; /** * Implementaci\u00f3n de interfaz SessionAware * @param session El mapa de session Servlet */ @Override public void setSession ( Map < String , Object > session ) { this . session = session ; } public Map < String , Object > getSession () { return this . session ; } //... @Override public String execute () throws Exception { //... // Ponemos y cogemos datos de la sessi\u00f3n getSession (). put ( \"objeto\" , objeto ); objeto = getSession (). get ( \"objeto\" ); //... } }","title":"Mapa de Session"},{"location":"desarrollo/javaee.html#jsp","text":"","title":"JSP"},{"location":"desarrollo/javaee.html#prepoblado-de-combo-desde-el-propio-jsp","text":"<s:select label= \"Priority\" name= \"wallpaper_priority\" list= \"#{-2:'Very Low',-1:'Low',0:'Normal',1:'High',2:'Very High'}\" />","title":"Prepoblado de combo desde el propio JSP"},{"location":"desarrollo/javaee.html#inyectar-cabecera-http-en-jsp","text":"<% response . setHeader ( \"P3P\" , \"CP=\\\"HONK\\\"\" ); %>","title":"Inyectar cabecera HTTP en JSP"},{"location":"desarrollo/javascript.html","text":"JavaScript \u00b6 JSON \u00b6 La siguiente sentencia serializa en forma de JSON cualquier objeto. Es muy \u00fatil para analizar un objeto: alert ( JSON . stringify ( object )); Es m\u00e1s limpio escribir en la consola del navegador. Aqu\u00ed por ejemplo se muestra el objeto data de una instancia Vue.js: console . log ( JSON . stringify ( vm . _data )); \u00c9ste paquete es un buen explorador de estructuras JSON. NPM \u00b6 Uso b\u00e1sico del gestor de paquetes de Node.js . Para gestionar las dependencias de paquetes en un proyecto hay que generar un fichero de seguimiento llamado package.json . Se genera con el comando (si a\u00f1adimos la opci\u00f3n -y dar\u00e1 todos los valores predeterminados autom\u00e1ticamente, incluso recoger\u00e1 los datos del repositorio git si \u00e9ste ya est\u00e1 inicializado): 1 npm init Para descargar un paquete (por ejemplo lodash ) e incorporarlo al fichero package.json ejecutar: 1 npm install lodash --save Encontraremos que el paquete se ha descargado en un subdirectorio llamado node_modules e incorporado a la secci\u00f3n dependencies de packages.json (si no hubi\u00e9ramos puesto la opci\u00f3n --save s\u00f3lo se habr\u00eda descargado). Si la dependencia la queremos s\u00f3lo para el entorno de desarrollo (t\u00edpico por ejemplo en los paquetes de testing), en lugar de --save pondremos --save-dev . Algunos comandos \u00fatiles de npm son: npm install : Descarga todos los paquetes indicados en package.json . npm install -g grunt-cli : Descarga e instala el paquete indicado en global. Es lo habitual en herramientas de tipo CLI como Grunt . npm ls : Muestra los paquetes instalados. npm outdated : Muestra cu\u00e1les de los paquetes instalados est\u00e1n desactualizados, es decir, existen nuevas versiones. npm update : Descarga las ultimas versiones de los paquetes instalados. npm show [package]@* version : Muestra las versiones disponibles (en el repositorio npm) del paquete indicado. Por ejemplo: npm show lodash@* version . npm uninstall lodash : Desinstala el paquete (lo elimina de node_modules ). Si adem\u00e1s queremos que desaparezca de package.json hay que a\u00f1adir la opci\u00f3n --save","title":"JavaScript"},{"location":"desarrollo/javascript.html#javascript","text":"","title":"JavaScript"},{"location":"desarrollo/javascript.html#json","text":"La siguiente sentencia serializa en forma de JSON cualquier objeto. Es muy \u00fatil para analizar un objeto: alert ( JSON . stringify ( object )); Es m\u00e1s limpio escribir en la consola del navegador. Aqu\u00ed por ejemplo se muestra el objeto data de una instancia Vue.js: console . log ( JSON . stringify ( vm . _data )); \u00c9ste paquete es un buen explorador de estructuras JSON.","title":"JSON"},{"location":"desarrollo/javascript.html#npm","text":"Uso b\u00e1sico del gestor de paquetes de Node.js . Para gestionar las dependencias de paquetes en un proyecto hay que generar un fichero de seguimiento llamado package.json . Se genera con el comando (si a\u00f1adimos la opci\u00f3n -y dar\u00e1 todos los valores predeterminados autom\u00e1ticamente, incluso recoger\u00e1 los datos del repositorio git si \u00e9ste ya est\u00e1 inicializado): 1 npm init Para descargar un paquete (por ejemplo lodash ) e incorporarlo al fichero package.json ejecutar: 1 npm install lodash --save Encontraremos que el paquete se ha descargado en un subdirectorio llamado node_modules e incorporado a la secci\u00f3n dependencies de packages.json (si no hubi\u00e9ramos puesto la opci\u00f3n --save s\u00f3lo se habr\u00eda descargado). Si la dependencia la queremos s\u00f3lo para el entorno de desarrollo (t\u00edpico por ejemplo en los paquetes de testing), en lugar de --save pondremos --save-dev . Algunos comandos \u00fatiles de npm son: npm install : Descarga todos los paquetes indicados en package.json . npm install -g grunt-cli : Descarga e instala el paquete indicado en global. Es lo habitual en herramientas de tipo CLI como Grunt . npm ls : Muestra los paquetes instalados. npm outdated : Muestra cu\u00e1les de los paquetes instalados est\u00e1n desactualizados, es decir, existen nuevas versiones. npm update : Descarga las ultimas versiones de los paquetes instalados. npm show [package]@* version : Muestra las versiones disponibles (en el repositorio npm) del paquete indicado. Por ejemplo: npm show lodash@* version . npm uninstall lodash : Desinstala el paquete (lo elimina de node_modules ). Si adem\u00e1s queremos que desaparezca de package.json hay que a\u00f1adir la opci\u00f3n --save","title":"NPM"},{"location":"desarrollo/joomla.html","text":"Joomla \u00b6 Enlaces \u00b6 Env\u00edo de mail desde FacileForms (Joomla) Codificaci\u00f3n de la p\u00e1gina \u00b6 La codificaci\u00f3n de caracteres que se usa para enviar la p\u00e1gina al navegador se ajusta en el fichero globals.php a\u00f1adiendo la siguiente linea: header( 'Content-Type: text/html; charset=UTF-8'); La codificaci\u00f3n que se informa en la secci\u00f3n header del c\u00f3digo fuente html de la p\u00e1gina se ajusta en el fichero language/spanish.php en la linea que dice: DEFINE('_ISO','charset=utf-8'); Ver comentario de Mitsurugi en este foro . allow_url_fopen desactivado \u00b6 Para el problema del eWeather del tipo ( fuente ): Warning: file_get_contents(): URL file-access is disabled in the server configuration in /(lo que sea)/includes/domit/xml_domit_parser.php on line 1645 El problema es seguramente del servidor, ya que el archivo php.ini tiene el par\u00e1metro allow_url_fopen deshabilitado. La soluci\u00f3n es utilizar la librer\u00eda cURL para evitar el uso de la funci\u00f3n file_get_contents(). Localizar el archivo que est\u00e1 en la carpeta donde est\u00e9 alojado el Joomla en la siguiente ruta: /includes/domit/xml_domit_parser.php Editarlo e ir a la linea 1645 En esa linea pone: return file_get_contents($filename); Eliminamos la l\u00ednea y ponemos esto en su lugar: $ch = curl_init(); $timeout = 5; curl_setopt ($ch, CURLOPT_URL, $filename); curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout); return curl_exec($ch); curl_close($ch); Guardamos el archivo y lo subimos al servidor sustituyendo al antiguo.","title":"Joomla"},{"location":"desarrollo/joomla.html#joomla","text":"","title":"Joomla"},{"location":"desarrollo/joomla.html#enlaces","text":"Env\u00edo de mail desde FacileForms (Joomla)","title":"Enlaces"},{"location":"desarrollo/joomla.html#codificacion-de-la-pagina","text":"La codificaci\u00f3n de caracteres que se usa para enviar la p\u00e1gina al navegador se ajusta en el fichero globals.php a\u00f1adiendo la siguiente linea: header( 'Content-Type: text/html; charset=UTF-8'); La codificaci\u00f3n que se informa en la secci\u00f3n header del c\u00f3digo fuente html de la p\u00e1gina se ajusta en el fichero language/spanish.php en la linea que dice: DEFINE('_ISO','charset=utf-8'); Ver comentario de Mitsurugi en este foro .","title":"Codificaci\u00f3n de la p\u00e1gina"},{"location":"desarrollo/joomla.html#allow_url_fopen-desactivado","text":"Para el problema del eWeather del tipo ( fuente ): Warning: file_get_contents(): URL file-access is disabled in the server configuration in /(lo que sea)/includes/domit/xml_domit_parser.php on line 1645 El problema es seguramente del servidor, ya que el archivo php.ini tiene el par\u00e1metro allow_url_fopen deshabilitado. La soluci\u00f3n es utilizar la librer\u00eda cURL para evitar el uso de la funci\u00f3n file_get_contents(). Localizar el archivo que est\u00e1 en la carpeta donde est\u00e9 alojado el Joomla en la siguiente ruta: /includes/domit/xml_domit_parser.php Editarlo e ir a la linea 1645 En esa linea pone: return file_get_contents($filename); Eliminamos la l\u00ednea y ponemos esto en su lugar: $ch = curl_init(); $timeout = 5; curl_setopt ($ch, CURLOPT_URL, $filename); curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout); return curl_exec($ch); curl_close($ch); Guardamos el archivo y lo subimos al servidor sustituyendo al antiguo.","title":"allow_url_fopen desactivado"},{"location":"desarrollo/phonegap.html","text":"Apuntes Curso Phonegap \u00b6 Profesor: @ciberado D\u00edas 1 a 5: 18/11/2014 -> 24/11/2014 \u00b6 Enlaces \u00b6 Presentaci\u00f3n sobre Phonegap Freelance Corner : Listas de distribuci\u00f3n de proyectos para freelancers. Socrative : Gestor de aula (tests de profesor a alumnos). Brackets : Editor de c\u00f3digo. 10 trucos para mejorar la terminal de Windows JSLint :Chequeador sintaxis JS. Cursos MongoDB Microjs : Microjs: Fantastic Micro-Frameworks and Micro-Libraries for Fun and Profit! Leaflet : An Open-Source JavaScript Library for Mobile-Friendly Interactive Maps. V\u00eddeos de Douglas Crockford (evangelizador JavaScript). Emmet : Plugin para Brackets. Macros para crear documentos f\u00e1cilmente. Beautify : Plugin para Brackets para formatear la indentaci\u00f3n autom\u00e1ticamente. Mockable : Para construir mocks de web services. Proveedores de WebServices: Digital Ocean AWS : Una m\u00e1quina micro (estilo Raspberry Pi) gratis durante un a\u00f1o. AWS Lambda Google AppEngine : Gratis hasta un umbral. Especial sobre AppEngine de We.Developers. DonDominio.com : Proveedor de dominios recomendado por alumno curso. json.org : Definici\u00f3n/documentaci\u00f3n de JSON. Firefox REST Easy addon : Cliente de servicios REST para testeos. jQuery : Librer\u00eda Javascript. Angular : Framework Javascript. CanIUse : Indica las tecnolog\u00edas soportadas por los distintos navegadores. W3C TRs : Listado de est\u00e1ndares y borradores del W3C. Mozilla Developer Network : Alternativa al W3C para consultar la documentaci\u00f3n de HTML. DevDocs : Filtrado de la documentaci\u00f3n MDN. Jade y HAML : Alternativas a HTML. JSFiddle : Prototipos HTML/CSS/JS. Transit : Plugin jQuery para animaciones. Adobe Color CC : Ruedas crom\u00e1ticas. Express : Fast, unopinionated, minimalist web framework for Node.js Heroku : Cloud Application Platform con soporte a Node.js Instalaci\u00f3n entorno \u00b6 M\u00f3dulos necesarios: JDK (instalado en C:\\jdk1.8 ) Poner en el PATH: C:\\jdk1.8\\bin Ant (instalado en C:\\ant ) Poner en el PATH: C:\\ant\\bin Android SDK (instalado en C:\\android-sdk ) Definir variable de entorno ANDROID_HOME con: C:\\android-sdk Node ( en Ubuntu ) Phonegap: npm install -g phonegap Genymotion : Emulador Android (muy r\u00e1pido). Vagrant (opcional): Empaquetador de entornos de desarrollo Creaci\u00f3n de proyecto Phonegap \u00b6 $ phonegap create 00HolaMundo --name HolaMundo --id es.eduardofilo.hm Compilaci\u00f3n y ejecuci\u00f3n de proyecto Phonegap \u00b6 $ cd 00HolaMundo $ phonegap build android $ phonegap run android En realidad la tarea run hace build . Inspeccionar dispositivos externos en Chrome \u00b6 1 about : inspect REST WebServices \u00b6 Servidor mock ( mockable ): demo0034470.mockable.io url : http://demo0034470.mockable.io/votaciones/38/yes type : POST dataType : json Respuesta: { \"votosTotal\" : 6000 , \"votosPositivos\" : 3500 , \"votosNegativos\" : 2500 , \"fecha\" : \"2013-04-17T12:32:12\" } jQuery \u00b6 Hay una convenci\u00f3n por la cual cuando invocamos jQuery ($) para localizar un elemento del DOM, la variable donde se carga se pone con el prefijo $. Por ejemplo: var $paragrafos = $ ( 'p' ); Ejemplo1 \u00b6 var $paragraphs = $ ( 'p' ); for ( var i = 0 ; i < $paragraphs . length ; i ++ ) { console . log ( i , $paragraphs [ i ]); } $paragraphs . css ( 'color' , 'red' ); $paragraphs . css ( 'background-color' , 'green' ); $paragraphs . css ({ 'color' : 'blue' , 'background-color' : 'yellow' }); console . log ( $paragraphs . css ( 'color' )); $firstp = $ ( 'p:first' ); //$firstp = $('p').first(); //$firstp = $('p').eq(0); $firstp . addClass ( 'importante' ); Ejemplo2 \u00b6 var $firstp = $ ( 'p:first' ); var texto = $firstp . text (); $firstp . text ( texto . toUpperCase ()); //var $strong = $('<strong>'); //$strong.text('contenido'); //$firstp.prepend($strong); $ ( '<strong>' ) . text ( 'contenido' ) . prependTo ( $firstp ); Ejemplo3 \u00b6 var colores = [ 'Rojo' , 'Verde' , 'Azul' ]; var $ol = $ ( 'ol' ); $ol . empty (); for ( var i = 0 ; i < colores . length ; i ++ ) { $ol . append ( $ ( '<li>' ). text ( colores [ i ])); //$('<li>').text(colores[i]).appendTo($ol); } Ejemplo4 \u00b6 $ ( 'p' ). on ( 'click' , function ( evt ) { evt . preventDefault (); $ ( this ). css ( 'background-color' , 'green' ); }); Ejemplo5 \u00b6 $ ( 'p' ). on ( 'click' , function ( evt ) { $ ( this ). fadeOut ( function () { $ ( this ). text ( $ ( this ). text (). toUpperCase ()); $ ( this ). fadeIn (); }); }); D\u00eda 6: Martes 25/11/2014 \u00b6 Enlaces \u00b6 Git SourceTree : GUI de Git. La par\u00e1bola de git : V\u00eddeo interesante. gitflow : Patr\u00f3n de uso de git. Yeoman : Plantillas/Scaffolding. Webapp : Plantilla de Yeoman para webapps. Grunt : Gestor de tareas. Gulp : Gestor de tareas. Equivalente a Grunt. Est\u00e1 de moda ahora. Bower : Gestor de librer\u00edas (como npm pero a nivel de librer\u00edas JS, tipo leaflet o bootstrap). Depende de git. Montaje de entorno y workflow \u00b6 Bajamos el instalador de git y lo instalamos. Durante la instalaci\u00f3n, en una p\u00e1gina del asistente, marcamos la tercera opci\u00f3n que lleva una leyenda en rojo. Inicializamos el proyecto local: mkdir 06YesNoGit cd 06YesNoGit git init Entramos con nuestra cuenta (o creamos una) en GitHub y creamos un repositorio con el mismo nombre que el local ( 06YesNoGit ). Creamos un \"remote\" desde el git local hacia GitHub: git remote add origin https://github.com/eduardofilo/06YesNoGit.git Sincronizamos: git pull origin master Modificamos un fichero en local (.gitignore), lo commiteamos en local y sincronizamos con GitHub: git add .gitignore git commit -m \"Primer commit\" git push origin master Inicializamos gitflow en SourceTree (pulsando el bot\u00f3n de la toolbar). Instalamos Bower (la opci\u00f3n g lo instala en global, es decir accesible desde todos los proyectos): npm install -g bower Grunt no se suele instalar de forma global porque cambia mucho de versi\u00f3n. Vamos a instalar algo que ejecuta el grunt local del proyecto: npm install -g grunt-cli Instalamos Yeoman: npm install -g yo Si falla la descarga de alg\u00fan paquete, es mejor no reejecutar yeoman. Se habr\u00e1 generado un fichero package.json que contiene los paquetes npm que necesitamos. Ejecutando lo siguiente se bajar\u00e1 lo que falte: npm install Si npm install nos da warnings se puede solucionar inicializando npm (que genera el fichero package.json ): npm init Instalamos la plantilla webapp de Yeoman: npm install -g generator-webapp En este punto tenemos todas las herramientas instaladas. \u201cStart New Feature\u201d en gitflow@SourceTree. Le damos el nombre \u201cInicializarConYeoman\u201d. Generamos un proyecto con la plantilla webapp de Yeoman: yo Instalamos \u201cwebapp\u201d Incluimos las librer\u00edas Bootstrap y Modernizr Hacemos overwrite de .gitignore Lanzamos los tests para probar Grunt: grunt test Compilamos con Grunt: grunt build Aparece el directorio dist con la versi\u00f3n final (lista para desplegar) de nuestro proyecto. Arrancamos un servidor web para probar el proyecto: grunt serve D\u00eda 7: Mi\u00e9rcoles 26/11/2014 \u00b6 Enlaces \u00b6 Phonegap developer app : Sincroniza la app desplegada por Phonegap en el tel\u00e9fono o en Genymotion para pasar los cambios directamente sin necesidad de volver a desplegar. Genymotion with Google Play Services : Instalaci\u00f3n de Google Play Services en Genymotion. Bower \u00b6 La diferencia con npm es que \u00e9ste instala cosas en m\u00e1quina; Bower a\u00f1ade librer\u00edas al proyecto. Lo vamos a manejar con los siguientes comandos por terminal: bower search leaflet : Busca las librer\u00edas que contienen \u201cleaflet\u201d. bower install --save leaflet : Instala la librer\u00eda leaflet. La opci\u00f3n --save hace que se apunte en un fichero de referencia de librer\u00edas ( bower.json ) para luego no tener que subir las librer\u00edas al control de versiones (evitar\u00edamos subir el directorio bower_components , que es donde se almacenan las librer\u00edas instaladas y sus dependencias). Es parecido al package.json de npm. grunt wiredep : Conecta las dependencias. Por ejemplo vincula los ficheros CSS de las librer\u00edas en la posici\u00f3n del comentario <!-- bower:css --> del fichero index.html . Los CSS de las librer\u00edas que hab\u00eda instaladas previamente (bootstrap y modernizr) se hab\u00edan conectado cuando instalamos la plantilla webapp con yeoman. Esta tarea est\u00e1 incluida en la tarea build . bower uninstall --save leaflet : Desinstala la librer\u00eda leaflet. Grunt \u00b6 El fichero de configuraci\u00f3n tiene forma de script Javascript. Es el fichero Gruntfile.js . git \u00b6 Vamos a hacer el merge de la feature que creamos ayer en la rama develop: SourceTree / Commit / Marcamos \u201cUnstage all\u201d para pasar a stage todos los ficheros modificados / Incluimos el comentario del commit en la caja de abajo. SourceTree / Gitflow / Finish Feature (marcamos Delete branch) SourceTree / Push (marcamos las dos ramas: develop y master) Phonegap app developer \u00b6 Se instala en el emulador o dispositivo la aplicaci\u00f3n. Se abre la aplicaci\u00f3n \u201cPhoneGap\u201d en el dispositivo o emulador. Se configura poniendo la URL que aparece al arrancar el servidor phonegap en la m\u00e1quina de desarrollo: phonegap serve D\u00eda 8: Jueves 27/11/2014 \u00b6 Enlaces \u00b6 Fundation : Framework CSS basado en em. Bootstrap est\u00e1 basado en px. QuirksMode : Peter Paul Koch. Buscar sus conferencias sobre display. Media Queries : Cat\u00e1logo de sitios responsive. Swwweet : Estudio de Barcelona con buena filosof\u00eda web. CSS Zen garden : Juego para modificar con CSS un HTML fijado desde hace a\u00f1os. Pedro Arilla : Especialista en tipograf\u00eda de Zaragoza. Fontsinuse : Galer\u00eda de sitios con tipograf\u00eda interesante. Unos tipos duros : Teor\u00eda y pr\u00e1ctica de la tipograf\u00eda. Font Awesome : 479 iconos vectorizados. Recomendado por Merche. CSS \u00b6 Siguiendo la lecci\u00f3n sobre CSS del curso de HTML5 de Javier . Unidades de medida \u00b6 em es una de las m\u00e1s interesantes. Procede del mundo de la tipograf\u00eda y es la anchura de la M may\u00fascula en un tama\u00f1o que se considera legible con facilidad por un usuario normal. Las em se basan en el tama\u00f1o de letra del elemento y son relativas entre elementos que se contienen, es decir, si un elemento tiene 2em pero est\u00e1 afectado por un contenedor en el que se aplica 2em , el tama\u00f1o resultante ser\u00e1 equivalente a 6em . Para evitar la acumulaci\u00f3n est\u00e1 la unidad rem (=root em). Preferencias \u00b6 Hay un orden de prioridad entre los selectores de CSS. Algunos detalles: Prioridades generales de menos a m\u00e1s: Reglas definidas por el navegador (useragent stylesheet rules) -> Reglas que seleccionan elementos -> Reglas que seleccionan atributos ( id o class ). id prioriza sobre class . !important se salta las prioridades, es decir se aplica siempre. Position \u00b6 top y left no aplican si position es static . El position: absolute toma el origen de coordenadas del primer contenedor que no es static . Display \u00b6 El display de un div por defecto (useragent stylesheet rules) es block . El de span es inline . Se puede modificar tanto un caso como el otro. Por ejemplo si ponemos display: inline a un div , pasa a comportarse como un span . El display: inline hace que se ignore el width . Con display: inline-block s\u00ed que se tiene en cuenta el width . Hay un truco para conservar la indentaci\u00f3n en el c\u00f3digo HTML mientras se evita que se introduzca un car\u00e1cter espacio que ocupa sitio y descoloca la maquetaci\u00f3n y es introducir un comentario entre l\u00edneas de esta forma: < section > \u2026 </ section > <!-- --> < section > \u2026 </ section > Float \u00b6 La propiedad clear s\u00f3lo funciona si el display no es inline . Se usa mucho el apa\u00f1o del clearfix para solucionar la p\u00e9rdida de dimensi\u00f3n vertical de un contenedor cuando todo su contenido m\u00e1s alto flota. El selector :after selecciona despu\u00e9s del contenido al que se aplica el estilo, no el contenido del siguiente elemento en el DOM. El clearfix favorito de Javier es: . clearfix : after { content : \".\" ; visibility : hidden ; display : block ; height : 0 ; clear : both ; } viewport \u00b6 Diferencia entre layout-viewport y display-viewport. La relaci\u00f3n entre ambos es el nivel de zoom. El layout-viewport predeterminado es 960px. Se defini\u00f3 pixel-ratio cuando apareci\u00f3 iPhone 4, inicialmente con un valor de 2 (pantalla retina de 640px de ancho por los 320px del iPhone original). Terminales con pantallas QuadHD tienen un pixel-ratio de alrededor de 4. Tiene el inconveniente de que hace que las im\u00e1genes se redimensionen, lo que en terminales con mucha densidad de pixel produce desenfoque. La soluci\u00f3n es enviar la imagen adecuada a cada dispositivo. De momento se hace con condiciones en CSS. mediaqueries \u00b6 Permite hacer condiciones en CSS. @media es un if. En las mediaqueries los em son siempre rem es decir son absolutos, no relativos. M\u00e1s que hablar de resoluciones debemos pensar en tama\u00f1os. Se suelen considerar cuatro tama\u00f1os: M\u00f3vil: 360 px CSS Tablet: 768 px CSS Desktop: 1200 px CSS TV Tipograf\u00eda \u00b6 La tipograf\u00eda cada vez tiene m\u00e1s importancia. Para pantalla, Javier no recomienda Helvetica. Existen muchos tipos buenos, muy legibles y gratuitos, como: Mozilla Fira Ubuntu Google OpenSans Javier recomienda no descartar las fuentes de pago. La inversi\u00f3n puede tener un impacto muy importante en el proyecto. Algunas foundries: Typekit : Foundry de Adobe. Google Fonts : Foundry de Google. Nos describe el uso de Google Fonts usando el sitio para definir un paquete con dos fuentes. Frameworks \u00b6 Algunos framewoks: Bootstrap : es el m\u00e1s importante ahora mismo. El favorito de Javier, sobre todo por su ecosistema. Bootsnipp : Componentes para bootstrap. Foundation Skeleton Ionic : Perfecto para pantallas peque\u00f1as. Ratchet : Tambi\u00e9n para m\u00f3viles. Sencha Touch : Para m\u00f3viles. No recomendado por Javier. jQuery Mobile : No recomendado por Javier. D\u00eda 9: Viernes 28/11/2014 \u00b6 Enlaces \u00b6 UI Bootstrap : Bootstrap adaptado a Angular. Bootsnipp : Galer\u00eda de elementos para Bootstrap. Couchbase Mobile : Plugin Phonegap para tener una base de datos noSQL local con opci\u00f3n de sincronizar con el servidor. Bootstrap \u00b6 En Customize se puede compilar una versi\u00f3n personalizada (s\u00f3lo con los componentes que vayamos a utilizar, lo que adem\u00e1s hace m\u00e1s peque\u00f1a la librer\u00eda). Dentro de este Customize se pueden cambiar por ejemplo los Media queries breakpoints que son los que hacen que el dise\u00f1o cambie entre los distintos tama\u00f1os de pantalla. Es recomendable instalarlo con Bower si se va a integrar en Phonegap (para tenerlo en local y minimizar la latencia que supondr\u00eda el descargarlo). El men\u00fa superior del sitio de Bootstrap est\u00e1 bien estructurado en cuanto a la dificultad de menor a mayor de izquierda a derecha. Conviene leer por lo menos la secci\u00f3n Getting Started . Bootstrap utiliza CDN para minimizar la latencia. Si vamos a utilizar Angular, en lugar de poner bootstrap normal hay que integrar UI Bootstrap que no utiliza jQuery. Es importante meter en la cabecera lo siguiente (aparece en Basic Template ): < meta charset = \"utf-8\" > < meta http-equiv = \"X-UA-Compatible\" content = \"IE=edge\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1\" > Importante leer todo el documento sobre CSS , sobre todo lo relativo al Grid System y a los Forms . Los componentes que no encontremos en Bootstrap buscarlos en Bootsnipp . Si utilizamos la parte de JS de Bootstrap hay que integrar jQuery. Buenas pr\u00e1cticas con Bootstrap \u00b6 Interesa poner siempre un label en los campos de formulario por accesibilidad, pero en pantallas peque\u00f1as se suele usar un placeholder, lo que es redundante. Para evitarlo se oculta a\u00f1adiendo la clase sr-only (sr de Screen Reader), lo que mantiene el label en el c\u00f3digo pero no lo muestra. JavaScript \u00b6 Almacenamiento de un conjunto de variables en localStorage: var l1 = [ \"Alice\" , \"Bob\" , \"Charly\" ]; var l2 = [ 1 , 2 , 3 ] var listas = { listaPrincipal : l1 , listaSecundaria : l2 }; var listasComoCadena = JSON . stringify ( listas ); localStorage . setItem ( 'listas' , listasComoCadena ); Deberes para el fin de semana \u00b6 Landing page con tres zonas y call for action superior (= jumbotron). Qu\u00e9 hacemos Por qu\u00e9 somos buenos Pasta Repasar Closures de JS . D\u00eda 10: Lunes 1/12/2014 \u00b6 Enlaces \u00b6 famo.us : Free, open source JavaScript framework that helps you create smooth, complex UIs for any screen. EggHead : Screencasts. Proyecto \u00b6 Vamos a montar el proyecto poni\u00e9ndolo todo junto desde cero: Creamos el proyecto dentro del directorio \\curso: cd \\c urso phonegap create 10Votaciones --name Votaciones --id es.eduardofilo.yesno Nos metemos en el directorio y lanzamos Yeoman para instalar la plantilla web: cd 10Votaciones yo Durante la configuraci\u00f3n de Yeoman indicamos que incluya Bootstrap. Configuramos en Gruntile.js (l\u00ednea 21 del fichero que la carpeta de la aplicaci\u00f3n es www en lugar de app que es la que viene por defecto. Movemos carpeta 10Votaciones\\www\\res a 10Votaciones\\res , es decir un nivel hacia arriba. Esta carpeta contiene los recursos que utilizar\u00e1 Phonegap (por ejemplo el icono de escritorio que ajustar\u00e1 en las distintas plataformas). No tiene mucho sentido que est\u00e9 dentro de www ya que Phonegap duplicar\u00e1 hacia el directorio dist los recursos correspondientes a la plataforma con la que estemos trabajando. Si est\u00e1 en www es porque cuando utilizamos el servidor de compilaci\u00f3n de Adobe para montar las aplicaciones nativas, s\u00f3lo pasamos el directorio www y el que contenga res es una forma de enviar todo de una vez. Configuramos en config.xml el movimiento del directorio res que acabamos de hacer. Para ello sustituimos las rutas de los recursos, es decir www/res por res . Borramos el contenido de www y lo sustituimos por el de app . Borramos la carpeta app que ha quedado vac\u00eda. Movemos la carpeta bower_components al interior de www . Cambiamos la configuraci\u00f3n de Bower en el fichero .bowerrc poniendo www/bower_components donde s\u00f3lo pon\u00eda bower_components . Finalmente lanzamos la tarea que inyectar\u00e1 las dependencias entre los ficheros de c\u00f3digo: grunt wiredep Con esto ya tendr\u00edamos la base. Vamos a utilizar el patr\u00f3n MVC. Pondremos tanto el modelo como el controlador en el mismo fichero main.js , aunque ser\u00eda m\u00e1s correcto separarlo. Vamos a hacer una Single Page Application. Cada p\u00e1gina \u201cvirtual\u201d de la app lo vamos a codificar mediante un div de clase pagina . Ese div tendr\u00e1 un atributo personalizado \u201cdata-title\u201d que contendr\u00e1 el t\u00edtulo de la p\u00e1gina. El controlador s\u00f3lo va a hacer: Reacciona a la pantalla Modifica la pantalla Todo lo que no tenga que ver con esto ir\u00e1 al modelo/servicio. D\u00eda 11: Martes 2/12/2014 \u00b6 Enlaces \u00b6 history.js Proyecto \u00b6 Vamos a programar el env\u00edo del voto al servidor (mockable) en un POST. El voto va en la URL por lo que aunque utilicemos https no ocultamos la informaci\u00f3n. Ser\u00eda m\u00e1s correcto enviar el voto en el cuerpo del POST, por ejemplo: var url = this . URL_POST_NUEVO_VOTO . replace ( '{value}' , tipoDeVoto ); var promesa = $ . post ( url , { value : \u2018 yes \u2019 }); En segundo lugar programamos la gesti\u00f3n de la navegaci\u00f3n, es decir c\u00f3mo cambia la aplicaci\u00f3n de pantalla, ya sea hacia delante o hacia atr\u00e1s (incluyendo por ejemplo el evento \u201cBack\u201d del dispositivo que equivale al bot\u00f3n \u201cAtr\u00e1s\u201d del navegador). Javier nos comenta el truco de a\u00f1adir anchors (#) a la URL. Con esto se consigue que no se recargue el documento y que s\u00ed afecte al historial. Como nuestra app es SPA nos viene muy bien este truco. En Phonegap, la tecla \u201cAtr\u00e1s\u201d de los dispositivos equivale al Back del WebView. La gesti\u00f3n del historial la vamos a hacer con history.js . Buscamos/instalamos history.js con Bower ( --save actualiza el fichero bower.json con lo que hacemos que la inclusi\u00f3n de este componente sea persistente, es decir, si luego borramos los componentes, para no subirlos al control de versiones por ejemplo, lo podremos recuperar f\u00e1cilmente): bower search history bower install --save history.js Inyectamos dependencias ( grunt wiredep no funciona => hay que mirar en la documentaci\u00f3n). Elegimos la librer\u00eda que nos conviene consultando la documentaci\u00f3n. En index.html incluimos la referencia en el bloque scripts/main.js del build.js final: < script src = \"bower_components/history.js/scripts/bundled/html4+html5/native.history.js\" ></ script > Con history.js manejamos el historial del navegador/webview por medio del objeto History . El objeto history ser\u00eda la parte nativa del navegador. En muchas ocasiones se comportan igual. Los par\u00e1metros de la funci\u00f3n pushState tanto de history como de History son: history . pushState ({ id : idDestino }, $ ( '#' + idDestion ). attr ( 'data-title' ), idDestion ); Objeto arbitrario en el que podemos almacenar datos Descripci\u00f3n o T\u00edtulo de esa entrada en el historial Direcci\u00f3n/URL D\u00eda 12: Mi\u00e9rcoles 3/12/2014 \u00b6 Enlaces \u00b6 Using Location Hash To Enable BACK/FORWARD Navigation Web Fundamentals : C\u00f3mo adaptar experiencias web a dispositivos de distintos tama\u00f1os. seen.js : Render 3D scenes into SVG or HTML5 Canvas. jQuery-Color : Animaciones con colores. Removing the 300ms tap delay in Chrome 32 : Se hace con la librer\u00eda fastclick . QuoJS : Librer\u00eda de gestures. HammerJS : Librer\u00eda de gestures. TouchSwipe-Jquery-Plugin : Librer\u00eda de swipes. iScroll : Librer\u00eda para gestionar listas y los eventos f\u00edsicos de arrastre. CancelBubble : Cuenta de Twitter que comenta muchas librer\u00edas buenas. r/javascript : Subreddit de Javascript en el que comentan tambi\u00e9n librer\u00edas. Q : Librer\u00eda js para la gesti\u00f3n de promesas. Proyecto \u00b6 document recibe todos los eventos. Implementamos un cartel \u201cCargando\u2026\u201d que aparece/desaparece cuando hay peticiones AJAX mientras se espera la respuesta del servidor. Se gestiona mediante los eventos ajaxStart y ajaxStop . Instalamos jQuery-Color para hacer un efecto de transici\u00f3n al jumbotron: Buscamos/instalamos: bower search jquery-color bower install --save jquery-color Inyectamos la librer\u00eda a mano al final del index.html ya que Bower no puede: < script src = \"bower_components/jquery-color/jquery.color.js\" ></ script > Hasta ahora hab\u00eda algo mal en el proyecto. No esper\u00e1bamos a que cargara el DOM ni jQuery. Para conseguirlo envolvemos la funci\u00f3n de inicializaci\u00f3n de la siguiente forma: $ ( document ). ready ( function () { controlador . inicializar (); }); Vemos una forma de desactivar el highlight en el tap que hace el sistema operativo en WindowsPhone. Se consigue a\u00f1adiendo la siguiente etiqueta meta en el head del HTML: < meta name = \"msapplication-tap-highlight\" content = \"no\" /> Vamos a programar un gesto para volver a la pantalla de votaciones desde resultados. Instalamos TouchSwipe-Jquery-Plugin : Buscamos/instalamos: bower search touchswipe bower install --save jquery-touchswipe Sustituimos el servicio votar para que guarde en local. Hay que generar promesa. Se puede hacer con la librer\u00eda Q o con jQuery . Lo hacemos as\u00ed: var servicioPreguntas = { //... votar : function ( tipoDeVoto ) { localStorage . setItem ( 'voto' , tipoDeVoto ); var deferred = $ . Deferred (); var promesa = deferred . promise (); deferred . resolve ({ total : 0 , positives : 0 , negatives : 0 }); return promesa ; } }; D\u00eda 13: Jueves 4/12/2014 \u00b6 Enlaces \u00b6 Documentaci\u00f3n Phonegap Command Line Documentaci\u00f3n Phonegap Plugins API Repositorio de Cordova Plugins La estafa de la linterna molona que ilumina m\u00e1s en Android InfoTelefonoPlugin : Plugin de Javier para obtener datos de identificaci\u00f3n del tel\u00e9fono. Proyecto Plugins \u00b6 Vamos a hacer una peque\u00f1a aplicaci\u00f3n para consultar la geolocalizaci\u00f3n: Creamos el proyecto: cd \\c urso ` phonegap create 13GeoDemo --name GeoDemo --id es.eduardofilo.geodemo A\u00f1adimos el plugin de geolocalizaci\u00f3n: cd 13GeoDemo phonegap plugin add org.apache.cordova.geolocation Buscar el c\u00f3digo nativo para Android en git . Javier no recomienda getCurrentPosition porque da timeout r\u00e1pidamente si est\u00e1s en HighAccuracy. Mejor con watchPosition. Vamos a ver c\u00f3mo se crear\u00eda un plugin. Para ello instalamos un plugin hecho por Javier y estudiamos detenidamente su sencillo c\u00f3digo: Creamos el proyecto: cd \\c urso phonegap create 13 .1DatosTelefono --name DatosTelefono --id es.eduardofilo.datostfn A\u00f1adimos el plugin de Javier : cd 13 .1DatosTelefono phonegap plugin add https://github.com/ciberado/domina-phonegap-infotelefonoplugin.git D\u00eda 14: Viernes 5/12/2014 \u00b6 Enlaces \u00b6 Cordova Device Motion Plugin MakeAppIcon Web2Splash Pastebin de Javier Adobe PhoneGap Build c9 : IDE web. Proyecto Plugins \u00b6 Continuamos con el proyecto de ayer: Comprobamos la instalaci\u00f3n: phonegap plugin list Proyecto Aceler\u00f3metro \u00b6 Vamos a hacer un peque\u00f1o proyecto que controlar\u00e1 un peque\u00f1o cuadrado por pantalla con los aceler\u00f3metros del tel\u00e9fono. En el proyecto haremos uso del plugin oficial de Phonegap que se encarga de acceder al dispositivo. Creamos el proyecto: phonegap create 14DemoAcelerometro --name DemoAcelerometro --id es.eduardofilo.demoaccel Instalamos plugin: phonegap plugin add org.apache.cordova.device-motion Por defecto watchAcceleration llama al callback cada 10 segundos: var watchID = navigator . accelerometer . watchAcceleration ( accelerometerSuccess , accelerometerError , accelerometerOptions ); accelerometerOptions : An object with the following optional keys: period : requested period of calls to accelerometerSuccess with acceleration data in Milliseconds.(Number) (Default: 10000) Para conseguir que la aplicaci\u00f3n sea m\u00e1s \"responsiva\", se puede cambiar el periodo de consulta pasando un objeto con un par\u00e1metro de clave frecuency en su interior (aunque la documentaci\u00f3n menciona period , es frecuency ). Hubiera funcionado cada segundo por ejemplo llamando al watchAcceleration as\u00ed: var options = { frequency : 1000 }; var watchID = navigator . accelerometer . watchAcceleration ( onSuccess , onError , options ); Subir a Google Play \u00b6 Para generar un certificado con que firmar las aplicaciones: $ keytool -genkey -alias demoiconos -keyalg RSA -validity 20000 -keystore demoiconos.keystore Compilar en Adobe PhoneGap Build \u00b6 Para delegar la construcci\u00f3n del proyecto en el servicio de compilaci\u00f3n de Adobe en la nube : $ phonegap remote build android Se puede firmar la aplicaci\u00f3n desde Adobe subiendo el fichero keystore que hemos creado antes. Inicializaci\u00f3n del controlador \u00b6 Si usamos jQuery: $ ( document ). ready ( function () { document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); }); }); Si no usamos jQuery: document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); }); Pendiente de preguntar \u00b6 JSONP vs CORS Workspaces en Chrome.","title":"Phonegap"},{"location":"desarrollo/phonegap.html#apuntes-curso-phonegap","text":"Profesor: @ciberado","title":"Apuntes Curso Phonegap"},{"location":"desarrollo/phonegap.html#dias-1-a-5-18112014-24112014","text":"","title":"D\u00edas 1 a 5: 18/11/2014 -&gt; 24/11/2014"},{"location":"desarrollo/phonegap.html#enlaces","text":"Presentaci\u00f3n sobre Phonegap Freelance Corner : Listas de distribuci\u00f3n de proyectos para freelancers. Socrative : Gestor de aula (tests de profesor a alumnos). Brackets : Editor de c\u00f3digo. 10 trucos para mejorar la terminal de Windows JSLint :Chequeador sintaxis JS. Cursos MongoDB Microjs : Microjs: Fantastic Micro-Frameworks and Micro-Libraries for Fun and Profit! Leaflet : An Open-Source JavaScript Library for Mobile-Friendly Interactive Maps. V\u00eddeos de Douglas Crockford (evangelizador JavaScript). Emmet : Plugin para Brackets. Macros para crear documentos f\u00e1cilmente. Beautify : Plugin para Brackets para formatear la indentaci\u00f3n autom\u00e1ticamente. Mockable : Para construir mocks de web services. Proveedores de WebServices: Digital Ocean AWS : Una m\u00e1quina micro (estilo Raspberry Pi) gratis durante un a\u00f1o. AWS Lambda Google AppEngine : Gratis hasta un umbral. Especial sobre AppEngine de We.Developers. DonDominio.com : Proveedor de dominios recomendado por alumno curso. json.org : Definici\u00f3n/documentaci\u00f3n de JSON. Firefox REST Easy addon : Cliente de servicios REST para testeos. jQuery : Librer\u00eda Javascript. Angular : Framework Javascript. CanIUse : Indica las tecnolog\u00edas soportadas por los distintos navegadores. W3C TRs : Listado de est\u00e1ndares y borradores del W3C. Mozilla Developer Network : Alternativa al W3C para consultar la documentaci\u00f3n de HTML. DevDocs : Filtrado de la documentaci\u00f3n MDN. Jade y HAML : Alternativas a HTML. JSFiddle : Prototipos HTML/CSS/JS. Transit : Plugin jQuery para animaciones. Adobe Color CC : Ruedas crom\u00e1ticas. Express : Fast, unopinionated, minimalist web framework for Node.js Heroku : Cloud Application Platform con soporte a Node.js","title":"Enlaces"},{"location":"desarrollo/phonegap.html#instalacion-entorno","text":"M\u00f3dulos necesarios: JDK (instalado en C:\\jdk1.8 ) Poner en el PATH: C:\\jdk1.8\\bin Ant (instalado en C:\\ant ) Poner en el PATH: C:\\ant\\bin Android SDK (instalado en C:\\android-sdk ) Definir variable de entorno ANDROID_HOME con: C:\\android-sdk Node ( en Ubuntu ) Phonegap: npm install -g phonegap Genymotion : Emulador Android (muy r\u00e1pido). Vagrant (opcional): Empaquetador de entornos de desarrollo","title":"Instalaci\u00f3n entorno"},{"location":"desarrollo/phonegap.html#creacion-de-proyecto-phonegap","text":"$ phonegap create 00HolaMundo --name HolaMundo --id es.eduardofilo.hm","title":"Creaci\u00f3n de proyecto Phonegap"},{"location":"desarrollo/phonegap.html#compilacion-y-ejecucion-de-proyecto-phonegap","text":"$ cd 00HolaMundo $ phonegap build android $ phonegap run android En realidad la tarea run hace build .","title":"Compilaci\u00f3n y ejecuci\u00f3n de proyecto Phonegap"},{"location":"desarrollo/phonegap.html#inspeccionar-dispositivos-externos-en-chrome","text":"1 about : inspect","title":"Inspeccionar dispositivos externos en Chrome"},{"location":"desarrollo/phonegap.html#rest-webservices","text":"Servidor mock ( mockable ): demo0034470.mockable.io url : http://demo0034470.mockable.io/votaciones/38/yes type : POST dataType : json Respuesta: { \"votosTotal\" : 6000 , \"votosPositivos\" : 3500 , \"votosNegativos\" : 2500 , \"fecha\" : \"2013-04-17T12:32:12\" }","title":"REST WebServices"},{"location":"desarrollo/phonegap.html#jquery","text":"Hay una convenci\u00f3n por la cual cuando invocamos jQuery ($) para localizar un elemento del DOM, la variable donde se carga se pone con el prefijo $. Por ejemplo: var $paragrafos = $ ( 'p' );","title":"jQuery"},{"location":"desarrollo/phonegap.html#ejemplo1","text":"var $paragraphs = $ ( 'p' ); for ( var i = 0 ; i < $paragraphs . length ; i ++ ) { console . log ( i , $paragraphs [ i ]); } $paragraphs . css ( 'color' , 'red' ); $paragraphs . css ( 'background-color' , 'green' ); $paragraphs . css ({ 'color' : 'blue' , 'background-color' : 'yellow' }); console . log ( $paragraphs . css ( 'color' )); $firstp = $ ( 'p:first' ); //$firstp = $('p').first(); //$firstp = $('p').eq(0); $firstp . addClass ( 'importante' );","title":"Ejemplo1"},{"location":"desarrollo/phonegap.html#ejemplo2","text":"var $firstp = $ ( 'p:first' ); var texto = $firstp . text (); $firstp . text ( texto . toUpperCase ()); //var $strong = $('<strong>'); //$strong.text('contenido'); //$firstp.prepend($strong); $ ( '<strong>' ) . text ( 'contenido' ) . prependTo ( $firstp );","title":"Ejemplo2"},{"location":"desarrollo/phonegap.html#ejemplo3","text":"var colores = [ 'Rojo' , 'Verde' , 'Azul' ]; var $ol = $ ( 'ol' ); $ol . empty (); for ( var i = 0 ; i < colores . length ; i ++ ) { $ol . append ( $ ( '<li>' ). text ( colores [ i ])); //$('<li>').text(colores[i]).appendTo($ol); }","title":"Ejemplo3"},{"location":"desarrollo/phonegap.html#ejemplo4","text":"$ ( 'p' ). on ( 'click' , function ( evt ) { evt . preventDefault (); $ ( this ). css ( 'background-color' , 'green' ); });","title":"Ejemplo4"},{"location":"desarrollo/phonegap.html#ejemplo5","text":"$ ( 'p' ). on ( 'click' , function ( evt ) { $ ( this ). fadeOut ( function () { $ ( this ). text ( $ ( this ). text (). toUpperCase ()); $ ( this ). fadeIn (); }); });","title":"Ejemplo5"},{"location":"desarrollo/phonegap.html#dia-6-martes-25112014","text":"","title":"D\u00eda 6: Martes 25/11/2014"},{"location":"desarrollo/phonegap.html#enlaces_1","text":"Git SourceTree : GUI de Git. La par\u00e1bola de git : V\u00eddeo interesante. gitflow : Patr\u00f3n de uso de git. Yeoman : Plantillas/Scaffolding. Webapp : Plantilla de Yeoman para webapps. Grunt : Gestor de tareas. Gulp : Gestor de tareas. Equivalente a Grunt. Est\u00e1 de moda ahora. Bower : Gestor de librer\u00edas (como npm pero a nivel de librer\u00edas JS, tipo leaflet o bootstrap). Depende de git.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#montaje-de-entorno-y-workflow","text":"Bajamos el instalador de git y lo instalamos. Durante la instalaci\u00f3n, en una p\u00e1gina del asistente, marcamos la tercera opci\u00f3n que lleva una leyenda en rojo. Inicializamos el proyecto local: mkdir 06YesNoGit cd 06YesNoGit git init Entramos con nuestra cuenta (o creamos una) en GitHub y creamos un repositorio con el mismo nombre que el local ( 06YesNoGit ). Creamos un \"remote\" desde el git local hacia GitHub: git remote add origin https://github.com/eduardofilo/06YesNoGit.git Sincronizamos: git pull origin master Modificamos un fichero en local (.gitignore), lo commiteamos en local y sincronizamos con GitHub: git add .gitignore git commit -m \"Primer commit\" git push origin master Inicializamos gitflow en SourceTree (pulsando el bot\u00f3n de la toolbar). Instalamos Bower (la opci\u00f3n g lo instala en global, es decir accesible desde todos los proyectos): npm install -g bower Grunt no se suele instalar de forma global porque cambia mucho de versi\u00f3n. Vamos a instalar algo que ejecuta el grunt local del proyecto: npm install -g grunt-cli Instalamos Yeoman: npm install -g yo Si falla la descarga de alg\u00fan paquete, es mejor no reejecutar yeoman. Se habr\u00e1 generado un fichero package.json que contiene los paquetes npm que necesitamos. Ejecutando lo siguiente se bajar\u00e1 lo que falte: npm install Si npm install nos da warnings se puede solucionar inicializando npm (que genera el fichero package.json ): npm init Instalamos la plantilla webapp de Yeoman: npm install -g generator-webapp En este punto tenemos todas las herramientas instaladas. \u201cStart New Feature\u201d en gitflow@SourceTree. Le damos el nombre \u201cInicializarConYeoman\u201d. Generamos un proyecto con la plantilla webapp de Yeoman: yo Instalamos \u201cwebapp\u201d Incluimos las librer\u00edas Bootstrap y Modernizr Hacemos overwrite de .gitignore Lanzamos los tests para probar Grunt: grunt test Compilamos con Grunt: grunt build Aparece el directorio dist con la versi\u00f3n final (lista para desplegar) de nuestro proyecto. Arrancamos un servidor web para probar el proyecto: grunt serve","title":"Montaje de entorno y workflow"},{"location":"desarrollo/phonegap.html#dia-7-miercoles-26112014","text":"","title":"D\u00eda 7: Mi\u00e9rcoles 26/11/2014"},{"location":"desarrollo/phonegap.html#enlaces_2","text":"Phonegap developer app : Sincroniza la app desplegada por Phonegap en el tel\u00e9fono o en Genymotion para pasar los cambios directamente sin necesidad de volver a desplegar. Genymotion with Google Play Services : Instalaci\u00f3n de Google Play Services en Genymotion.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#bower","text":"La diferencia con npm es que \u00e9ste instala cosas en m\u00e1quina; Bower a\u00f1ade librer\u00edas al proyecto. Lo vamos a manejar con los siguientes comandos por terminal: bower search leaflet : Busca las librer\u00edas que contienen \u201cleaflet\u201d. bower install --save leaflet : Instala la librer\u00eda leaflet. La opci\u00f3n --save hace que se apunte en un fichero de referencia de librer\u00edas ( bower.json ) para luego no tener que subir las librer\u00edas al control de versiones (evitar\u00edamos subir el directorio bower_components , que es donde se almacenan las librer\u00edas instaladas y sus dependencias). Es parecido al package.json de npm. grunt wiredep : Conecta las dependencias. Por ejemplo vincula los ficheros CSS de las librer\u00edas en la posici\u00f3n del comentario <!-- bower:css --> del fichero index.html . Los CSS de las librer\u00edas que hab\u00eda instaladas previamente (bootstrap y modernizr) se hab\u00edan conectado cuando instalamos la plantilla webapp con yeoman. Esta tarea est\u00e1 incluida en la tarea build . bower uninstall --save leaflet : Desinstala la librer\u00eda leaflet.","title":"Bower"},{"location":"desarrollo/phonegap.html#grunt","text":"El fichero de configuraci\u00f3n tiene forma de script Javascript. Es el fichero Gruntfile.js .","title":"Grunt"},{"location":"desarrollo/phonegap.html#git","text":"Vamos a hacer el merge de la feature que creamos ayer en la rama develop: SourceTree / Commit / Marcamos \u201cUnstage all\u201d para pasar a stage todos los ficheros modificados / Incluimos el comentario del commit en la caja de abajo. SourceTree / Gitflow / Finish Feature (marcamos Delete branch) SourceTree / Push (marcamos las dos ramas: develop y master)","title":"git"},{"location":"desarrollo/phonegap.html#phonegap-app-developer","text":"Se instala en el emulador o dispositivo la aplicaci\u00f3n. Se abre la aplicaci\u00f3n \u201cPhoneGap\u201d en el dispositivo o emulador. Se configura poniendo la URL que aparece al arrancar el servidor phonegap en la m\u00e1quina de desarrollo: phonegap serve","title":"Phonegap app developer"},{"location":"desarrollo/phonegap.html#dia-8-jueves-27112014","text":"","title":"D\u00eda 8: Jueves 27/11/2014"},{"location":"desarrollo/phonegap.html#enlaces_3","text":"Fundation : Framework CSS basado en em. Bootstrap est\u00e1 basado en px. QuirksMode : Peter Paul Koch. Buscar sus conferencias sobre display. Media Queries : Cat\u00e1logo de sitios responsive. Swwweet : Estudio de Barcelona con buena filosof\u00eda web. CSS Zen garden : Juego para modificar con CSS un HTML fijado desde hace a\u00f1os. Pedro Arilla : Especialista en tipograf\u00eda de Zaragoza. Fontsinuse : Galer\u00eda de sitios con tipograf\u00eda interesante. Unos tipos duros : Teor\u00eda y pr\u00e1ctica de la tipograf\u00eda. Font Awesome : 479 iconos vectorizados. Recomendado por Merche.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#css","text":"Siguiendo la lecci\u00f3n sobre CSS del curso de HTML5 de Javier .","title":"CSS"},{"location":"desarrollo/phonegap.html#unidades-de-medida","text":"em es una de las m\u00e1s interesantes. Procede del mundo de la tipograf\u00eda y es la anchura de la M may\u00fascula en un tama\u00f1o que se considera legible con facilidad por un usuario normal. Las em se basan en el tama\u00f1o de letra del elemento y son relativas entre elementos que se contienen, es decir, si un elemento tiene 2em pero est\u00e1 afectado por un contenedor en el que se aplica 2em , el tama\u00f1o resultante ser\u00e1 equivalente a 6em . Para evitar la acumulaci\u00f3n est\u00e1 la unidad rem (=root em).","title":"Unidades de medida"},{"location":"desarrollo/phonegap.html#preferencias","text":"Hay un orden de prioridad entre los selectores de CSS. Algunos detalles: Prioridades generales de menos a m\u00e1s: Reglas definidas por el navegador (useragent stylesheet rules) -> Reglas que seleccionan elementos -> Reglas que seleccionan atributos ( id o class ). id prioriza sobre class . !important se salta las prioridades, es decir se aplica siempre.","title":"Preferencias"},{"location":"desarrollo/phonegap.html#position","text":"top y left no aplican si position es static . El position: absolute toma el origen de coordenadas del primer contenedor que no es static .","title":"Position"},{"location":"desarrollo/phonegap.html#display","text":"El display de un div por defecto (useragent stylesheet rules) es block . El de span es inline . Se puede modificar tanto un caso como el otro. Por ejemplo si ponemos display: inline a un div , pasa a comportarse como un span . El display: inline hace que se ignore el width . Con display: inline-block s\u00ed que se tiene en cuenta el width . Hay un truco para conservar la indentaci\u00f3n en el c\u00f3digo HTML mientras se evita que se introduzca un car\u00e1cter espacio que ocupa sitio y descoloca la maquetaci\u00f3n y es introducir un comentario entre l\u00edneas de esta forma: < section > \u2026 </ section > <!-- --> < section > \u2026 </ section >","title":"Display"},{"location":"desarrollo/phonegap.html#float","text":"La propiedad clear s\u00f3lo funciona si el display no es inline . Se usa mucho el apa\u00f1o del clearfix para solucionar la p\u00e9rdida de dimensi\u00f3n vertical de un contenedor cuando todo su contenido m\u00e1s alto flota. El selector :after selecciona despu\u00e9s del contenido al que se aplica el estilo, no el contenido del siguiente elemento en el DOM. El clearfix favorito de Javier es: . clearfix : after { content : \".\" ; visibility : hidden ; display : block ; height : 0 ; clear : both ; }","title":"Float"},{"location":"desarrollo/phonegap.html#viewport","text":"Diferencia entre layout-viewport y display-viewport. La relaci\u00f3n entre ambos es el nivel de zoom. El layout-viewport predeterminado es 960px. Se defini\u00f3 pixel-ratio cuando apareci\u00f3 iPhone 4, inicialmente con un valor de 2 (pantalla retina de 640px de ancho por los 320px del iPhone original). Terminales con pantallas QuadHD tienen un pixel-ratio de alrededor de 4. Tiene el inconveniente de que hace que las im\u00e1genes se redimensionen, lo que en terminales con mucha densidad de pixel produce desenfoque. La soluci\u00f3n es enviar la imagen adecuada a cada dispositivo. De momento se hace con condiciones en CSS.","title":"viewport"},{"location":"desarrollo/phonegap.html#mediaqueries","text":"Permite hacer condiciones en CSS. @media es un if. En las mediaqueries los em son siempre rem es decir son absolutos, no relativos. M\u00e1s que hablar de resoluciones debemos pensar en tama\u00f1os. Se suelen considerar cuatro tama\u00f1os: M\u00f3vil: 360 px CSS Tablet: 768 px CSS Desktop: 1200 px CSS TV","title":"mediaqueries"},{"location":"desarrollo/phonegap.html#tipografia","text":"La tipograf\u00eda cada vez tiene m\u00e1s importancia. Para pantalla, Javier no recomienda Helvetica. Existen muchos tipos buenos, muy legibles y gratuitos, como: Mozilla Fira Ubuntu Google OpenSans Javier recomienda no descartar las fuentes de pago. La inversi\u00f3n puede tener un impacto muy importante en el proyecto. Algunas foundries: Typekit : Foundry de Adobe. Google Fonts : Foundry de Google. Nos describe el uso de Google Fonts usando el sitio para definir un paquete con dos fuentes.","title":"Tipograf\u00eda"},{"location":"desarrollo/phonegap.html#frameworks","text":"Algunos framewoks: Bootstrap : es el m\u00e1s importante ahora mismo. El favorito de Javier, sobre todo por su ecosistema. Bootsnipp : Componentes para bootstrap. Foundation Skeleton Ionic : Perfecto para pantallas peque\u00f1as. Ratchet : Tambi\u00e9n para m\u00f3viles. Sencha Touch : Para m\u00f3viles. No recomendado por Javier. jQuery Mobile : No recomendado por Javier.","title":"Frameworks"},{"location":"desarrollo/phonegap.html#dia-9-viernes-28112014","text":"","title":"D\u00eda 9: Viernes 28/11/2014"},{"location":"desarrollo/phonegap.html#enlaces_4","text":"UI Bootstrap : Bootstrap adaptado a Angular. Bootsnipp : Galer\u00eda de elementos para Bootstrap. Couchbase Mobile : Plugin Phonegap para tener una base de datos noSQL local con opci\u00f3n de sincronizar con el servidor.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#bootstrap","text":"En Customize se puede compilar una versi\u00f3n personalizada (s\u00f3lo con los componentes que vayamos a utilizar, lo que adem\u00e1s hace m\u00e1s peque\u00f1a la librer\u00eda). Dentro de este Customize se pueden cambiar por ejemplo los Media queries breakpoints que son los que hacen que el dise\u00f1o cambie entre los distintos tama\u00f1os de pantalla. Es recomendable instalarlo con Bower si se va a integrar en Phonegap (para tenerlo en local y minimizar la latencia que supondr\u00eda el descargarlo). El men\u00fa superior del sitio de Bootstrap est\u00e1 bien estructurado en cuanto a la dificultad de menor a mayor de izquierda a derecha. Conviene leer por lo menos la secci\u00f3n Getting Started . Bootstrap utiliza CDN para minimizar la latencia. Si vamos a utilizar Angular, en lugar de poner bootstrap normal hay que integrar UI Bootstrap que no utiliza jQuery. Es importante meter en la cabecera lo siguiente (aparece en Basic Template ): < meta charset = \"utf-8\" > < meta http-equiv = \"X-UA-Compatible\" content = \"IE=edge\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1\" > Importante leer todo el documento sobre CSS , sobre todo lo relativo al Grid System y a los Forms . Los componentes que no encontremos en Bootstrap buscarlos en Bootsnipp . Si utilizamos la parte de JS de Bootstrap hay que integrar jQuery.","title":"Bootstrap"},{"location":"desarrollo/phonegap.html#buenas-practicas-con-bootstrap","text":"Interesa poner siempre un label en los campos de formulario por accesibilidad, pero en pantallas peque\u00f1as se suele usar un placeholder, lo que es redundante. Para evitarlo se oculta a\u00f1adiendo la clase sr-only (sr de Screen Reader), lo que mantiene el label en el c\u00f3digo pero no lo muestra.","title":"Buenas pr\u00e1cticas con Bootstrap"},{"location":"desarrollo/phonegap.html#javascript","text":"Almacenamiento de un conjunto de variables en localStorage: var l1 = [ \"Alice\" , \"Bob\" , \"Charly\" ]; var l2 = [ 1 , 2 , 3 ] var listas = { listaPrincipal : l1 , listaSecundaria : l2 }; var listasComoCadena = JSON . stringify ( listas ); localStorage . setItem ( 'listas' , listasComoCadena );","title":"JavaScript"},{"location":"desarrollo/phonegap.html#deberes-para-el-fin-de-semana","text":"Landing page con tres zonas y call for action superior (= jumbotron). Qu\u00e9 hacemos Por qu\u00e9 somos buenos Pasta Repasar Closures de JS .","title":"Deberes para el fin de semana"},{"location":"desarrollo/phonegap.html#dia-10-lunes-1122014","text":"","title":"D\u00eda 10: Lunes 1/12/2014"},{"location":"desarrollo/phonegap.html#enlaces_5","text":"famo.us : Free, open source JavaScript framework that helps you create smooth, complex UIs for any screen. EggHead : Screencasts.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#proyecto","text":"Vamos a montar el proyecto poni\u00e9ndolo todo junto desde cero: Creamos el proyecto dentro del directorio \\curso: cd \\c urso phonegap create 10Votaciones --name Votaciones --id es.eduardofilo.yesno Nos metemos en el directorio y lanzamos Yeoman para instalar la plantilla web: cd 10Votaciones yo Durante la configuraci\u00f3n de Yeoman indicamos que incluya Bootstrap. Configuramos en Gruntile.js (l\u00ednea 21 del fichero que la carpeta de la aplicaci\u00f3n es www en lugar de app que es la que viene por defecto. Movemos carpeta 10Votaciones\\www\\res a 10Votaciones\\res , es decir un nivel hacia arriba. Esta carpeta contiene los recursos que utilizar\u00e1 Phonegap (por ejemplo el icono de escritorio que ajustar\u00e1 en las distintas plataformas). No tiene mucho sentido que est\u00e9 dentro de www ya que Phonegap duplicar\u00e1 hacia el directorio dist los recursos correspondientes a la plataforma con la que estemos trabajando. Si est\u00e1 en www es porque cuando utilizamos el servidor de compilaci\u00f3n de Adobe para montar las aplicaciones nativas, s\u00f3lo pasamos el directorio www y el que contenga res es una forma de enviar todo de una vez. Configuramos en config.xml el movimiento del directorio res que acabamos de hacer. Para ello sustituimos las rutas de los recursos, es decir www/res por res . Borramos el contenido de www y lo sustituimos por el de app . Borramos la carpeta app que ha quedado vac\u00eda. Movemos la carpeta bower_components al interior de www . Cambiamos la configuraci\u00f3n de Bower en el fichero .bowerrc poniendo www/bower_components donde s\u00f3lo pon\u00eda bower_components . Finalmente lanzamos la tarea que inyectar\u00e1 las dependencias entre los ficheros de c\u00f3digo: grunt wiredep Con esto ya tendr\u00edamos la base. Vamos a utilizar el patr\u00f3n MVC. Pondremos tanto el modelo como el controlador en el mismo fichero main.js , aunque ser\u00eda m\u00e1s correcto separarlo. Vamos a hacer una Single Page Application. Cada p\u00e1gina \u201cvirtual\u201d de la app lo vamos a codificar mediante un div de clase pagina . Ese div tendr\u00e1 un atributo personalizado \u201cdata-title\u201d que contendr\u00e1 el t\u00edtulo de la p\u00e1gina. El controlador s\u00f3lo va a hacer: Reacciona a la pantalla Modifica la pantalla Todo lo que no tenga que ver con esto ir\u00e1 al modelo/servicio.","title":"Proyecto"},{"location":"desarrollo/phonegap.html#dia-11-martes-2122014","text":"","title":"D\u00eda 11: Martes 2/12/2014"},{"location":"desarrollo/phonegap.html#enlaces_6","text":"history.js","title":"Enlaces"},{"location":"desarrollo/phonegap.html#proyecto_1","text":"Vamos a programar el env\u00edo del voto al servidor (mockable) en un POST. El voto va en la URL por lo que aunque utilicemos https no ocultamos la informaci\u00f3n. Ser\u00eda m\u00e1s correcto enviar el voto en el cuerpo del POST, por ejemplo: var url = this . URL_POST_NUEVO_VOTO . replace ( '{value}' , tipoDeVoto ); var promesa = $ . post ( url , { value : \u2018 yes \u2019 }); En segundo lugar programamos la gesti\u00f3n de la navegaci\u00f3n, es decir c\u00f3mo cambia la aplicaci\u00f3n de pantalla, ya sea hacia delante o hacia atr\u00e1s (incluyendo por ejemplo el evento \u201cBack\u201d del dispositivo que equivale al bot\u00f3n \u201cAtr\u00e1s\u201d del navegador). Javier nos comenta el truco de a\u00f1adir anchors (#) a la URL. Con esto se consigue que no se recargue el documento y que s\u00ed afecte al historial. Como nuestra app es SPA nos viene muy bien este truco. En Phonegap, la tecla \u201cAtr\u00e1s\u201d de los dispositivos equivale al Back del WebView. La gesti\u00f3n del historial la vamos a hacer con history.js . Buscamos/instalamos history.js con Bower ( --save actualiza el fichero bower.json con lo que hacemos que la inclusi\u00f3n de este componente sea persistente, es decir, si luego borramos los componentes, para no subirlos al control de versiones por ejemplo, lo podremos recuperar f\u00e1cilmente): bower search history bower install --save history.js Inyectamos dependencias ( grunt wiredep no funciona => hay que mirar en la documentaci\u00f3n). Elegimos la librer\u00eda que nos conviene consultando la documentaci\u00f3n. En index.html incluimos la referencia en el bloque scripts/main.js del build.js final: < script src = \"bower_components/history.js/scripts/bundled/html4+html5/native.history.js\" ></ script > Con history.js manejamos el historial del navegador/webview por medio del objeto History . El objeto history ser\u00eda la parte nativa del navegador. En muchas ocasiones se comportan igual. Los par\u00e1metros de la funci\u00f3n pushState tanto de history como de History son: history . pushState ({ id : idDestino }, $ ( '#' + idDestion ). attr ( 'data-title' ), idDestion ); Objeto arbitrario en el que podemos almacenar datos Descripci\u00f3n o T\u00edtulo de esa entrada en el historial Direcci\u00f3n/URL","title":"Proyecto"},{"location":"desarrollo/phonegap.html#dia-12-miercoles-3122014","text":"","title":"D\u00eda 12: Mi\u00e9rcoles 3/12/2014"},{"location":"desarrollo/phonegap.html#enlaces_7","text":"Using Location Hash To Enable BACK/FORWARD Navigation Web Fundamentals : C\u00f3mo adaptar experiencias web a dispositivos de distintos tama\u00f1os. seen.js : Render 3D scenes into SVG or HTML5 Canvas. jQuery-Color : Animaciones con colores. Removing the 300ms tap delay in Chrome 32 : Se hace con la librer\u00eda fastclick . QuoJS : Librer\u00eda de gestures. HammerJS : Librer\u00eda de gestures. TouchSwipe-Jquery-Plugin : Librer\u00eda de swipes. iScroll : Librer\u00eda para gestionar listas y los eventos f\u00edsicos de arrastre. CancelBubble : Cuenta de Twitter que comenta muchas librer\u00edas buenas. r/javascript : Subreddit de Javascript en el que comentan tambi\u00e9n librer\u00edas. Q : Librer\u00eda js para la gesti\u00f3n de promesas.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#proyecto_2","text":"document recibe todos los eventos. Implementamos un cartel \u201cCargando\u2026\u201d que aparece/desaparece cuando hay peticiones AJAX mientras se espera la respuesta del servidor. Se gestiona mediante los eventos ajaxStart y ajaxStop . Instalamos jQuery-Color para hacer un efecto de transici\u00f3n al jumbotron: Buscamos/instalamos: bower search jquery-color bower install --save jquery-color Inyectamos la librer\u00eda a mano al final del index.html ya que Bower no puede: < script src = \"bower_components/jquery-color/jquery.color.js\" ></ script > Hasta ahora hab\u00eda algo mal en el proyecto. No esper\u00e1bamos a que cargara el DOM ni jQuery. Para conseguirlo envolvemos la funci\u00f3n de inicializaci\u00f3n de la siguiente forma: $ ( document ). ready ( function () { controlador . inicializar (); }); Vemos una forma de desactivar el highlight en el tap que hace el sistema operativo en WindowsPhone. Se consigue a\u00f1adiendo la siguiente etiqueta meta en el head del HTML: < meta name = \"msapplication-tap-highlight\" content = \"no\" /> Vamos a programar un gesto para volver a la pantalla de votaciones desde resultados. Instalamos TouchSwipe-Jquery-Plugin : Buscamos/instalamos: bower search touchswipe bower install --save jquery-touchswipe Sustituimos el servicio votar para que guarde en local. Hay que generar promesa. Se puede hacer con la librer\u00eda Q o con jQuery . Lo hacemos as\u00ed: var servicioPreguntas = { //... votar : function ( tipoDeVoto ) { localStorage . setItem ( 'voto' , tipoDeVoto ); var deferred = $ . Deferred (); var promesa = deferred . promise (); deferred . resolve ({ total : 0 , positives : 0 , negatives : 0 }); return promesa ; } };","title":"Proyecto"},{"location":"desarrollo/phonegap.html#dia-13-jueves-4122014","text":"","title":"D\u00eda 13: Jueves 4/12/2014"},{"location":"desarrollo/phonegap.html#enlaces_8","text":"Documentaci\u00f3n Phonegap Command Line Documentaci\u00f3n Phonegap Plugins API Repositorio de Cordova Plugins La estafa de la linterna molona que ilumina m\u00e1s en Android InfoTelefonoPlugin : Plugin de Javier para obtener datos de identificaci\u00f3n del tel\u00e9fono.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#proyecto-plugins","text":"Vamos a hacer una peque\u00f1a aplicaci\u00f3n para consultar la geolocalizaci\u00f3n: Creamos el proyecto: cd \\c urso ` phonegap create 13GeoDemo --name GeoDemo --id es.eduardofilo.geodemo A\u00f1adimos el plugin de geolocalizaci\u00f3n: cd 13GeoDemo phonegap plugin add org.apache.cordova.geolocation Buscar el c\u00f3digo nativo para Android en git . Javier no recomienda getCurrentPosition porque da timeout r\u00e1pidamente si est\u00e1s en HighAccuracy. Mejor con watchPosition. Vamos a ver c\u00f3mo se crear\u00eda un plugin. Para ello instalamos un plugin hecho por Javier y estudiamos detenidamente su sencillo c\u00f3digo: Creamos el proyecto: cd \\c urso phonegap create 13 .1DatosTelefono --name DatosTelefono --id es.eduardofilo.datostfn A\u00f1adimos el plugin de Javier : cd 13 .1DatosTelefono phonegap plugin add https://github.com/ciberado/domina-phonegap-infotelefonoplugin.git","title":"Proyecto Plugins"},{"location":"desarrollo/phonegap.html#dia-14-viernes-5122014","text":"","title":"D\u00eda 14: Viernes 5/12/2014"},{"location":"desarrollo/phonegap.html#enlaces_9","text":"Cordova Device Motion Plugin MakeAppIcon Web2Splash Pastebin de Javier Adobe PhoneGap Build c9 : IDE web.","title":"Enlaces"},{"location":"desarrollo/phonegap.html#proyecto-plugins_1","text":"Continuamos con el proyecto de ayer: Comprobamos la instalaci\u00f3n: phonegap plugin list","title":"Proyecto Plugins"},{"location":"desarrollo/phonegap.html#proyecto-acelerometro","text":"Vamos a hacer un peque\u00f1o proyecto que controlar\u00e1 un peque\u00f1o cuadrado por pantalla con los aceler\u00f3metros del tel\u00e9fono. En el proyecto haremos uso del plugin oficial de Phonegap que se encarga de acceder al dispositivo. Creamos el proyecto: phonegap create 14DemoAcelerometro --name DemoAcelerometro --id es.eduardofilo.demoaccel Instalamos plugin: phonegap plugin add org.apache.cordova.device-motion Por defecto watchAcceleration llama al callback cada 10 segundos: var watchID = navigator . accelerometer . watchAcceleration ( accelerometerSuccess , accelerometerError , accelerometerOptions ); accelerometerOptions : An object with the following optional keys: period : requested period of calls to accelerometerSuccess with acceleration data in Milliseconds.(Number) (Default: 10000) Para conseguir que la aplicaci\u00f3n sea m\u00e1s \"responsiva\", se puede cambiar el periodo de consulta pasando un objeto con un par\u00e1metro de clave frecuency en su interior (aunque la documentaci\u00f3n menciona period , es frecuency ). Hubiera funcionado cada segundo por ejemplo llamando al watchAcceleration as\u00ed: var options = { frequency : 1000 }; var watchID = navigator . accelerometer . watchAcceleration ( onSuccess , onError , options );","title":"Proyecto Aceler\u00f3metro"},{"location":"desarrollo/phonegap.html#subir-a-google-play","text":"Para generar un certificado con que firmar las aplicaciones: $ keytool -genkey -alias demoiconos -keyalg RSA -validity 20000 -keystore demoiconos.keystore","title":"Subir a Google Play"},{"location":"desarrollo/phonegap.html#compilar-en-adobe-phonegap-build","text":"Para delegar la construcci\u00f3n del proyecto en el servicio de compilaci\u00f3n de Adobe en la nube : $ phonegap remote build android Se puede firmar la aplicaci\u00f3n desde Adobe subiendo el fichero keystore que hemos creado antes.","title":"Compilar en Adobe PhoneGap Build"},{"location":"desarrollo/phonegap.html#inicializacion-del-controlador","text":"Si usamos jQuery: $ ( document ). ready ( function () { document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); }); }); Si no usamos jQuery: document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); });","title":"Inicializaci\u00f3n del controlador"},{"location":"desarrollo/phonegap.html#pendiente-de-preguntar","text":"JSONP vs CORS Workspaces en Chrome.","title":"Pendiente de preguntar"},{"location":"desarrollo/php.html","text":"PHP \u00b6 Configuraci\u00f3n \u00b6 Se pueden cambiar los ajustes de PHP para el sitio por medio del fichero de configuraci\u00f3n de Apache. Ver p\u00e1gina 244 del libro \"Desarrollo Web con PHP 6 y MySQL 5.1\". Cadenas \u00b6 Se pueden definir de tres formas: Con comillas simples \u00b6 <?php $cadena = 'Esto es una cadena.' ; Para incluir el caracter comilla simple hay que escaparlo: <?php $cadena = 'Esto es una comilla: \\'.' ; Con comillas dobles \u00b6 Permiten incluir variables: <?php $i = 12 ; $cadena = \"Un a\u00f1o tiene $i meses.\" ; Tambi\u00e9n permite escapar una serie de caracteres como: \\\": Comilla doble \\n: Retorno de carro \\t: Tabulador \\$: S\u00edmbolo de dolar En bloque \u00b6 Ejemplo: <?php $i = 12 ; $cadena = <<< CADENA Esto es una cadena definida en bloque. Podemos utilizar variables como en las cadenas de comillas dobles. Esto es un ejemplo: $i. CADENA ; Volcado de variables \u00b6 var_dump($var); : Para variables normales print_r($array); : Para arrays CVarDumper::dump($param, 10, true); : S\u00f3lo en Yii Comparadores \u00b6 Debido a la flexibilidad de PHP con los tipos de datos, los comparadores normales ( == por ejemplo) pueden producir resultados err\u00f3neos si no forzamos que adem\u00e1s del valor se compare el tipo. Por ejemplo la funci\u00f3n strpos() devuelve 0 si se encuentra la subcadena al principio y FALSE si no lo encuentra, pero en PHP, ambos tienen el mismo significado. El operador == compara si la expresi\u00f3n de la izquierda y la derecha tienen el mismo valor, mientras que === compara adem\u00e1s que sean del mismo tipo. As\u00ed se distingue 0 (entero) de FALSE (l\u00f3gico). Aqu\u00ed se encuentra la documentaci\u00f3n completa de los operadores de comparaci\u00f3n.","title":"PHP"},{"location":"desarrollo/php.html#php","text":"","title":"PHP"},{"location":"desarrollo/php.html#configuracion","text":"Se pueden cambiar los ajustes de PHP para el sitio por medio del fichero de configuraci\u00f3n de Apache. Ver p\u00e1gina 244 del libro \"Desarrollo Web con PHP 6 y MySQL 5.1\".","title":"Configuraci\u00f3n"},{"location":"desarrollo/php.html#cadenas","text":"Se pueden definir de tres formas:","title":"Cadenas"},{"location":"desarrollo/php.html#con-comillas-simples","text":"<?php $cadena = 'Esto es una cadena.' ; Para incluir el caracter comilla simple hay que escaparlo: <?php $cadena = 'Esto es una comilla: \\'.' ;","title":"Con comillas simples"},{"location":"desarrollo/php.html#con-comillas-dobles","text":"Permiten incluir variables: <?php $i = 12 ; $cadena = \"Un a\u00f1o tiene $i meses.\" ; Tambi\u00e9n permite escapar una serie de caracteres como: \\\": Comilla doble \\n: Retorno de carro \\t: Tabulador \\$: S\u00edmbolo de dolar","title":"Con comillas dobles"},{"location":"desarrollo/php.html#en-bloque","text":"Ejemplo: <?php $i = 12 ; $cadena = <<< CADENA Esto es una cadena definida en bloque. Podemos utilizar variables como en las cadenas de comillas dobles. Esto es un ejemplo: $i. CADENA ;","title":"En bloque"},{"location":"desarrollo/php.html#volcado-de-variables","text":"var_dump($var); : Para variables normales print_r($array); : Para arrays CVarDumper::dump($param, 10, true); : S\u00f3lo en Yii","title":"Volcado de variables"},{"location":"desarrollo/php.html#comparadores","text":"Debido a la flexibilidad de PHP con los tipos de datos, los comparadores normales ( == por ejemplo) pueden producir resultados err\u00f3neos si no forzamos que adem\u00e1s del valor se compare el tipo. Por ejemplo la funci\u00f3n strpos() devuelve 0 si se encuentra la subcadena al principio y FALSE si no lo encuentra, pero en PHP, ambos tienen el mismo significado. El operador == compara si la expresi\u00f3n de la izquierda y la derecha tienen el mismo valor, mientras que === compara adem\u00e1s que sean del mismo tipo. As\u00ed se distingue 0 (entero) de FALSE (l\u00f3gico). Aqu\u00ed se encuentra la documentaci\u00f3n completa de los operadores de comparaci\u00f3n.","title":"Comparadores"},{"location":"desarrollo/projects.html","text":"Gesti\u00f3n de Proyectos \u00b6 Enlaces \u00b6 Redmine : Recomendado por Carlos Fenollosa. Swagger : Documentaci\u00f3n de APIs REST y sandbox para probarlas. Comentario en GenbetaDev . Web Developer Checklist : Listas de control para desarrollos web. Comentario en GenbetaDev .","title":"Gesti\u00f3n de Proyectos"},{"location":"desarrollo/projects.html#gestion-de-proyectos","text":"","title":"Gesti\u00f3n de Proyectos"},{"location":"desarrollo/projects.html#enlaces","text":"Redmine : Recomendado por Carlos Fenollosa. Swagger : Documentaci\u00f3n de APIs REST y sandbox para probarlas. Comentario en GenbetaDev . Web Developer Checklist : Listas de control para desarrollos web. Comentario en GenbetaDev .","title":"Enlaces"},{"location":"desarrollo/python.html","text":"Python/Django \u00b6 Enlaces \u00b6 Cheatsheet \u00b6 Classy Class-Based Views : Detailed descriptions, with full methods and attributes, for each of Django's class-based generic views. Classy Django Forms Aprendizaje \u00b6 The Hitchhiker's Guide to Python How to Reset Migrations Django Admin Cookbook Django data migration when changing a field to ManyToMany : Cuando queremos cambiar de un modelo ForeignKey a ManyToMany. Alter model to add \u201cthrough\u201d relationship to order a ManytoMany field : Cuando queremos cambiar la tabla intermedia autom\u00e1tica a una gestionada con un modelo propio. Django Inline formsets example Django Migrations and How to Manage Conflicts M\u00f3dulos interesantes \u00b6 django-tinymce django-autocomplete-light awesome Django : A curated list of awesome Django apps, projects and resources. bincopy : Mangling of various file formats that conveys binary information (Motorola S-Record, Intel HEX, TI-TXT and binary files). Entorno Django \u00b6 Ver antes este post . Para tener un entorno aislado (sin depender con los paquetes y versiones del sistema), instalar primero pip de Python3. Se puede hacer instalando el paquete python3-pip de Ubuntu, pero dado que interesa actualizar a la \u00faltima versi\u00f3n, es mejor instalarlo de forma independiente bajando el script get-pip.py de aqu\u00ed ejecut\u00e1ndolo as\u00ed: $ sudo python3 get-pip.py Despu\u00e9s ejecutar en terminal: $ sudo pip3 install virtualenv $ virtualenv --python=`which python3` djangodev $ source djangodev/bin/activate (djangodev) $ pip install Django Cada vez que se quiera adaptar el entorno de la sesi\u00f3n del terminal a este entorno aislado, hay que ejecutar el pen\u00faltimo comando anterior ( source ). Entorno Django en Synology NAS \u00b6 Instalo m\u00f3dulo Python3 desde el Centro de Paquetes. Instalo pip en Python3: 1 2 3 4 $ wget -nd https://bootstrap.pypa.io/get-pip.py $ python get-pip.py $ cd /usr/local/bin $ sudo ln -s /volume1/@appstore/py3k/usr/local/bin/pip3 Instalo virtualenv: 1 2 $ sudo pip3 install virtualenv $ python3 /volume1/@appstore/py3k/usr/local/lib/python3.5/site-packages/virtualenv.py --python = ` which python3 ` djangodev Arranco el entorno virtual e instalo Django: 1 2 $ source djangodev/bin/activate ( djangodev ) $ pip install Django Creaci\u00f3n de proyecto Django \u00b6 Desde el directorio donde queremos que se cree ejecutamos: (djangodev) $ django-admin startproject project01 Creaci\u00f3n de aplicaci\u00f3n Django \u00b6 Desde el directorio del proyecto (donde se encuentre el fichero manage.py ) ejecutamos: (djangodev) $ python manage.py startapp app01 Para incorporar los modelos de la nueva aplicaci\u00f3n al mantenimiento autom\u00e1tico que proporciona el m\u00f3dulo admin de Django, hay que incorporar al fichero project01/settings.py lo siguiente en la secci\u00f3n INSTALLED_APPS : INSTALLED_APPS = [ 'app01.apps.App01Config', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Luego ejecutamos el siguiente comando para generar las migraciones a partir de los modelos definidos en la app: (djangodev) $ python manage.py makemigrations app01 Finalmente ejecutamos las migraciones propiamente dichas: (djangodev) $ python manage.py migrate Para poder utilizar el m\u00f3dulo admin de Django, hay que crear al menos un usuario: (djangodev) $ python manage.py createsuperuser Pipenv \u00b6 Actualizaci\u00f3n: A partir de haber tenido problemas de dependencias entre paquetes y de leer este art\u00edculo , abandono la utilizai\u00f3n de Pipenv en favor de virtualenvwrapper+pip. Enlaces \u00b6 How to manage your Python projects with Pipenv Instalaci\u00f3n \u00b6 $ sudo -H pip install pipenv Creaci\u00f3n de entorno para Python3 \u00b6 $ pipenv install --three $ pipenv shell Creaci\u00f3n de entorno en directorio de proyecto \u00b6 $ PIPENV_VENV_IN_PROJECT = 1 pipenv install --three Creaci\u00f3n de entorno con versi\u00f3n espec\u00edfica de Python y de paquetes \u00b6 Instalar algunos paquetes necesarios: 1 2 $ sudo apt-get install build-essential checkinstall $ sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev Bajamos la versi\u00f3n source de aqu\u00ed . Descomprimimos: 1 $ tar -xzvf Python-3.6.5.tgz Renombramos el directorio de las fuentes para no confundirlo con el de los binarios: 1 $ mv Python-3.6.5 Python-3.6.5_src Creamos el directorio para los binarios: 1 $ mkdir Python-3.6.5 Entramos en el directorio de las fuentes y compilamos: 1 2 3 4 5 $ cd /home/usuario/Python-3.6.5_src $ ./configure --disable-ipv6 --prefix = /home/usuario/Python-3.6.5 $ make $ make test $ make install Creamos el entorno: 1 2 3 4 5 $ cd directorio_proyecto $ pipenv install --python /home/usuario/Python-3.6.5/bin/python3 $ pipenv install Django == 1 .11.12 $ pipenv install _resto_de_paquetes_ $ pipenv shell Ejemplo de creaci\u00f3n de entorno Django desde cero con pipenv \u00b6 Actualizaci\u00f3n: A partir de haber tenido problemas de dependencias entre paquetes y de leer este art\u00edculo , abandono la utilizai\u00f3n de Pipenv en favor de virtualenvwrapper+pip. Creamos repositorio git (por ejemplo remote_james ) y lo sincronizamos (por ejemplo con /home/edumoreno/git/remote_james ). Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina): $ cd ~/git/remote_james $ pipenv install --python /home/edumoreno/Python-3.6.5/bin/python3 $ pipenv shell $ pipenv install django $ django-admin startproject remote_james . $ python manage.py startapp james Incorporamos nueva app en fichero settings.py : INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecutamos: $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0.0.0.0:8000 Virtualenvwrapper+pip \u00b6 Enlaces \u00b6 Los problemas de pipenv Virtualenv and pip Basics Notes on using pip and virtualenv with Django Instalaci\u00f3n \u00b6 Ejecutar: 1 2 $ sudo pip install virtualenv $ sudo pip install virtualenvwrapper A\u00f1adir a ~/.bashrc : 1 2 3 4 5 6 # Virtualenvwrapper export WORKON_HOME =$ HOME /. virtualenvs export PROJECT_HOME =$ HOME / git export VIRTUALENVWRAPPER_PYTHON =/ usr / bin / python3 export VIRTUALENVWRAPPER_VIRTUALENV_ARGS = '--no-site-packages' source / usr / local / bin / virtualenvwrapper . sh Reiniciar sesi\u00f3n o cargar de nuevo el ~/.bashrc con: 1 $ source ~/.bashrc Utilizaci\u00f3n \u00b6 Antes de activar un entorno: workon y lsvirtualenv : Muestran lista de entornos creados. mkvirtualenv nombre : Crea y activa entorno virtual de nombre nombre mkvirtualenv --python=/usr/bin/python nombre : Crea y activa el entorno virtual nombre basado en el int\u00e9rprete de Python pasado como argumento. workon nombre : Activa el entorno virtual nombre . mktmpenv : Crea y activa un entorno virtual temporal (se borra cuando se desactiva). rmvirtualenv nombre : Borra entorno virtual nombre . cpvirtualenv nombre nombre2 : Copia el entorno virtual nombre a nombre2 . allvirtualenv command with arguments : Ejecuta un comando en todos los entornos virtuales. Por ejemplo: allvirtualenv pip install -U pip setvirtualenvproject virtualenv_path project_path : Asocia un entorno virtual con un proyecto. Despu\u00e9s de activar un entorno: deactivate : Desactiva el entorno virtual activo. cdvirtualenv : Cambia al directorio del entorno virtual activo. cdsitepackages : Cambia al directorio site-packages del entorno virtual activo. lssitepackages : Lista el directorio site-packages del entorno virtual activo. cdproject : Cambia al directorio del proyecto del entorno virtual activo. wipeenv : Elimina todos los paquetes de terceros instalados en el entorno virtual actual. Operativa \u00b6 Dentro del entorno virtual gestionar los paquetes con pip y resolver las dependencias como buenamente se pueda. Una vez que el entorno virtual sea operativo, obtener el fichero de dependencias con el siguiente comando: $ pip freeze > requirements.txt Incluir el fichero requirements.txt en el control de versiones. A la hora de desplegar en producci\u00f3n una revisi\u00f3n que incluya cambios en los paquetes requeridos, ejecutar el siguiente comando una vez que se haya instalado la versi\u00f3n actualizada de requirements.txt : $ pip install -r requirements.txt Ejemplo de creaci\u00f3n de entorno Django desde cero con virtualenvwrapper+pip \u00b6 Creamos repositorio git (por ejemplo remote_james ) y lo sincronizamos (por ejemplo con /home/edumoreno/git/remote_james ). Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina): $ cd ~/git/remote_james $ mkvirtualenv remote_james --python=/home/edumoreno/Python-3.6.5/bin/python3 $ workon remote_james $ setvirtualenvproject $VIRTUAL_ENV . $ pip install django $ django-admin startproject remote_james . $ python manage.py startapp james $ pip freeze > requirements.txt Incorporamos nueva app en fichero settings.py : INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecutamos: $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0.0.0.0:8000 A\u00f1adir campo a modelo intermedio ManyToMany \u00b6 Partimos por ejemplo de: # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , blank = True ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Primero averiguamos el nombre de la tabla intermedia que se cre\u00f3 autom\u00e1ticamente cuando se a\u00f1adi\u00f3 el campo unidades al modelo Taller . En este caso era: lms_taller_unidades . Hacemos backup: $ mysqldump --opt -h localhost --user = usuario --password = contrase\u00f1a database lms_taller_unidades > backup_lms_taller_unidades.sql Borramos o mejor comentamos el campo unidades de Taller y generamos migraciones y las aplicamos, lo que borrar\u00e1 la tabla. Creamos el objeto intermedio: # TallerUnidades class TallerUnidades ( models . Model ): taller = models . ForeignKey ( 'Taller' , on_delete = models . CASCADE ) unidad = models . ForeignKey ( 'Unidad' , on_delete = models . CASCADE ) position = models . PositiveSmallIntegerField ( null = True ) class Meta : db_table = 'lms_taller_unidades' ordering = [ \"position\" ] verbose_name = \"unidad\" verbose_name_plural = \"unidades\" unique_together = (( \"taller\" , \"unidad\" ),) Reestablecemos la relaci\u00f3n ManyToMany a trav\u00e9s del objeto intermedio: # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , through = 'TallerUnidades' ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Creamos migraciones y las aplicamos. Cargamos el backup de la tabla: $ mysql -h localhost --user = usuario --password = contrase\u00f1a database < backup_lms_taller_unidades.sql Si hemos utilizado el campo ManyToMany en el objeto Admin del modelo principal veremos errores como los siguientes: ERRORS: <class 'lms.admin.TallerAdmin'>: (admin.E013) The value of 'fields' cannot include the ManyToManyField 'unidades', because that field manually specifies a relationship model. No habr\u00e1 m\u00e1s remedio que dejar de mostrar el campo directamente con los widgets ManyToMany y pasar a utilizar Inlines. Personalizaci\u00f3n del modelo User \u00b6 Es recomendable cuando se empieza un proyecto, sustituir la gesti\u00f3n del modelo User por uno propio, ya que si se quiere hacer m\u00e1s adelante con la aplicaci\u00f3n ya en marcha, es muy complicada la migraci\u00f3n entre tablas. Un par de buenos art\u00edculos sobre el tema son: Extending User Model Using a Custom Model Extending AbstractUser How to Implement Multiple User Types with Django Creamos el modelo as\u00ed: from django.contrib.auth.models import AbstractUser class User ( AbstractUser ): pass Y lo activamos definiendo la siguiente propiedad en el fichero settings.py : 1 AUTH_USER_MODEL = 'app01.User' Si no queremos perder los formularios especiales de la aplicaci\u00f3n admin para el modelo original, adem\u00e1s hay que personalizar la clase UserAdmin de la siguiente forma: from django.contrib.auth.admin import UserAdmin class MyUserAdmin ( UserAdmin ): model = User admin . site . register ( User , MyUserAdmin ) Gesti\u00f3n de migraciones \u00b6 Una vez generadas las migraciones, si queremos obtener el c\u00f3digo SQL a que equivalen hay que ejecutar el comando (en el ejemploo solicitamos el c\u00f3digo correspondiente a la migraci\u00f3n 0008 ): (djangodev) $ python manage.py sqlmigrate app01 0008 Para situarnos en un punto concreto de la serie de migraciones (deshaciendo por tanto las posteriores cuyos ficheros se podr\u00e1n borrar): (djangodev) $ python manage.py migrate app01 0010 Para mostrar los nombres de todas las migraciones (si no ponemos el nombre al final se muestran las de todo el sitio): (djangodev) $ python manage.py showmigrations app01 Para deshacer todas las migraciones: (djangodev) $ python manage.py migrate app01 zero Para crear una migraci\u00f3n vac\u00eda que podremos utilizar para hacer transferencias de datos (ver ejemplo aqu\u00ed ): (djangodev) $ python manage.py makemigrations app01 --empty Para saber c\u00f3mo gestionar las migraciones en diferentes ramas del desarrollo y evitar/solucionar conflictos, leer este art\u00edculo . Formateo de cadenas \u00b6 Con tuplas (no se puede cambiar el orden de los par\u00e1metros): \" %s parte de %s la cadena\" % ( var1 , var2 ) Con diccionario (se puede cambiar el orden de los par\u00e1metros): \" %(par1)s parte de %(par2)s la cadena\" % { 'par1' : var1 , 'par2' : var2 } Directorio instalaci\u00f3n Django \u00b6 Para averiguar d\u00f3nde est\u00e1n los ficheros de Django, ejecutar el siguiente comando: (djangodev) $ python -c \"import django; print(django.__path__)\" Tutorial Django \u00b6 Escribiendo una view: Escribiendo directamente la HTTP Response Renderizando una plantilla Gesti\u00f3n de URL's Formulario manual Formulario con vistas gen\u00e9ricas Creando modelos Manipulaci\u00f3n del modelo de datos por CLI Tests Ficheros est\u00e1ticos : Inserci\u00f3n de CSS en las vistas. Modificaci\u00f3n representaci\u00f3n detalle modelos : fields, fieldsets Objetos relacionados en detalle modelos : Inlines Modificaci\u00f3n representaci\u00f3n lista modelos : list_display, list_filter, search_fields Sustituci\u00f3n de templates en el sitio admin Empaquetado de aplicaciones Env\u00edo de mails Tutorial Django de Mozilla Developer Network \u00b6 Using models - Searching for records Utilizando las listas gen\u00e9ricas y vistas de detalle Personalizaci\u00f3n del subsistema de autenticaci\u00f3n : P\u00e1ginas de login, logout, cambio de password, etc. Propiedad calculada en modelo : Sin correspondencia en base de datos. Formularios: Usando Form y view funci\u00f3n Usando ModelForm y CRUD Views Referencia Django \u00b6 Directorio Admin actions : Creaci\u00f3n de actions, p\u00e1ginas intermedias al ejecutar actions, gesti\u00f3n de actions. Autenticaci\u00f3n Model field Temas interesantes \u00b6 filter, list comprehension y generators . Para filtrar por ejemplo una lista de objetos se pueden utilizar estos tres elementos. Hay que tener en cuenta que filter devuelve un iterator. Si por eejemplo s\u00f3lo queremos el n\u00famero de elementos habr\u00e1 que generar una lista o set con \u00e9l. How to Extend Django User Model . Este art\u00edculo es un ejemplo del caso 4. Uso de Class Views \u00b6 B\u00e1sicas \u00b6 Documentadas aqu\u00ed . TemplateView \u00b6 La m\u00e1s sencilla. S\u00f3lo necesita definir la propiedad template_name apuntando a la plantilla. Para a\u00f1adir datos al contexto (esto funciona en todas las view classes) se puede definir la funci\u00f3n get_context_data (ver ejemplo e apartado Passing variables to the template aqu\u00ed ) RedirectView \u00b6 Se puede usar tal cual para definir redirecciones en los ficheros url.py . Por ejemplo: urlpatterns = [ url ( r '^$' , RedirectView . as_view ( url = reverse_lazy ( 'admin:index' ))), ... ] Pero tambi\u00e9n se puede heredar de ella para por ejemplo hacer una vista \"proxy\" para actualizar un contador de visitas a otra vista, como el ejemplo que hay aqu\u00ed . Gen\u00e9ricas para visualizaci\u00f3n de modelos \u00b6 Son las dise\u00f1adas para generar listados y vistas de detalle de un modelo. Son m\u00e1s adecuadas para visualizaci\u00f3n, como la que se har\u00eda por ejemplo en un blog. Documentadas aqu\u00ed . En las dos clases de este tipo, s\u00f3lo se necesita definir la propiedad model . DetailView \u00b6 La plantilla se define por convenci\u00f3n a\u00f1adiendo _detail.html al nombre del modelo. Dentro de la plantilla, el objeto que se quiere representar aparece en la variable de contexto object . ListView \u00b6 La plantilla se define por convenci\u00f3n a\u00f1adiendo _list.html al nombre del modelo. Dentro de la plantilla, la colecci\u00f3n de objetos que se quiere representar aparece en la variable de contexto object_list . Gen\u00e9ricas para edici\u00f3n de modelos \u00b6 Permiten personalizar las vistas t\u00edpicas del mantenimiento de un modelo (creaci\u00f3n, actualizaci\u00f3n y borrado). Documentadas aqu\u00ed . En cualquiera de las cuatro siguientes clases, en la plantilla incluiremos los tags HTML para el formulario (no se generan autom\u00e1ticamente porque la p\u00e1gina podr\u00eda contener varios formularios o por si no estamos generando HTML). Se suele hacer algo as\u00ed: <form action=\"\" method=\"post\">{{ \"{% csrf_token \" }}%} {{ \"{{ form \" }}}} <input type=\"submit\" value=\"Save\" /> </form> El tag para el formulario tiene tres variantes: {{ \"{{ form.as_p \" }}}} : Cada campo del formulario se genera como un <p> . {{ \"{{ form.as_table \" }}}} : Cada campo del formulario se genera como una fila de una tabla. {{ \"{{ form.as_ul \" }}}} : Cada campo del formulario se genera como una lista sin numerar. Para m\u00e1ximo control siempre podemos generar cada campo del formulario por separado o incluso escribir el formulario completo a mano (ver documentaci\u00f3n Working with forms ). FormView \u00b6 Gestiona la vista con un formulario gen\u00e9rico. Si se produce error en la validaci\u00f3n, vuelve a cargar la misma URL con los campos rellenos e informaci\u00f3n sobre los errores; Si se supera la validaci\u00f3n se redirije a otra URL. En el contexto de la plantilla tendremos el formulario bajo la variable form . Necesita definir las propiedades siguientes: form_class : Clase formulario. success_url : URL a la que se redirije en caso de superar la validaci\u00f3n. template_name : Plantilla. Tambi\u00e9n es interesante definir el m\u00e9todo siguiente: form_valid : Se ejecutar\u00e1 cuando el formulario se valide correctamente. Obtendremos los datos del formulario del diccionario self.form.cleaned_data . Ver ejemplos aqu\u00ed y en apartado Now for a FormView de aqu\u00ed . CreateView \u00b6 Para la creaci\u00f3n de un modelo. UpdateView \u00b6 Para la actualizaci\u00f3n de un modelo. DeleteView \u00b6 Para el borrado de un modelo. Empaquetadas \u00b6 FilterView \u00b6 Es una especie de ListView con filtros. Ver documentaci\u00f3n aqu\u00ed . Idioms \u00b6 Retorno seguro del primer elemento de una lista: return (get_list()[:1] or [None])[0] Valor predeterminado en caso de que variable sea None: return variable or 0 Acceso seguro al atributo de un objeto: getattr(object, name[, default]) La funci\u00f3n getattr nos permite indicar un valor predeterminado si un objeto no tiene el atributo que buscamos. Funciona tambi\u00e9n si el objeto es None, lo que nos permite acceder de forma segura a un objeto cuando no sabemos si existe. Suma de una propiedad de una lista de objetos: suma = sum(logro.puntos for logro in logros_totales) Suma de una propiedad de una lista de objetos: suma = sum(list(map(lambda x: x.puntos, logros_totales))) Operador ternario: valor_cuando_true if condici\u00f3n else valor_cuando_false List comprehensions : new_list = [expression(i) for i in old_list if filter(i)] Set comprehension 2D: new_set = {(x, y) for x in range(0, 2) for y in range(0, 3)} Filtro de los elementos de una lista que contienen un fragmento de cadena, por ejemplo las constantes de pygame que empiezan por K_ : filter(lambda x:'K_' in x, dir(pygame)) Switch/case: Se suele utilizar un diccionario como se explica aqu\u00ed . Intercambiar variables: var_1, var_2 = var_2, var_1 Ejecuci\u00f3n de c\u00f3digo en m\u00f3dulo \u00b6 Tal y como se explica muy bien aqu\u00ed , el c\u00f3digo a ejecutar en un m\u00f3dulo actuando como programa principal, conviene que lo vinculemos a la comprobaci\u00f3n de si la propiedad __name__ tiene el valor __main__ , por ejemplo: def hacer_algo (): print ( \"algo\" ) if __name__ == \"__main__\" : hacer_algo () en lugar de: def hacer_algo (): print ( \"algo\" ) hacer_algo () De esta forma podremos importar este m\u00f3dulo en otros programas sin que se ejecute c\u00f3digo incontroladamente. Template filters \u00b6 {{ variable|default_if_none:\"\" }} : Muestra el texto pasado como argumento si variable vale None . {{ variable|default:\"\" }} : Muestra el texto pasado como argumento si variable es evaluada como False (cadena vac\u00eda, lista vac\u00eda, etc.). {{ variable_date|date:\"Y-m-d\" }} : Formatea una variable de tipo date . Lista de opciones de formato aqu\u00ed . {{ variable_list_string|join:\", \" }} : Concatena una lista de strings. {{ variable_string|urlencode }} : Codifica una string para que sea segura en una URL. {{ variable_string|unicode_decode }} : Decodifica un string en unicode. {{ variable_string|safe }} : Genera los caracteres para poder interpretar el string como HTML en lugar de escaparlos como se har\u00eda normalmente. {{ variable_list|length }} : N\u00famero de elementos de la lista. {{ variable_int|add:1 }} : A\u00f1ade 1 a la variable entera. Snippets Python \u00b6 Servidor HTTP en el directorio actual con Python2: python -m SimpleHTTPServer Servidor HTTP en el directorio actual con Python3: python3 -m http.server Conseguir una URL p\u00fablica para el servidor HTTP anterior con ngrok Convertir un set en un list ordenado: una_lista = sorted(un_set, key=lambda x: x.position) Agregar elementos a un diccionario de listas creando las claves si no existen ( fuente ): dic.setdefault(key,[]).append(value) Formateo de fechas : Predeterminado: la funci\u00f3n de conversi\u00f3n a cadena devuelve la fecha en formato ISO: str(datetime.datetime(2008, 11, 22, 19, 53, 42)) devuelve 2008-11-22 19:53:42 Funci\u00f3n de impresi\u00f3n con formato: para el resto de formatos utilizar strftime() . Consultar aqu\u00ed los c\u00f3digos de formato. Snippets Django \u00b6 Colecci\u00f3n completa de objetos de un modelo: Unidad.objects.all() Colecci\u00f3n completa de objetos de un modelo ordenada: Unidad.objects.all().order_by('nombre') Colecci\u00f3n filtrada de objetos de un modelo: Actividad.objects.filter(fecha__year=2017) Filtro OR (es necesario hacer from django.db.models import Q ): GrupoUnidades.objects.filter(Q(pausada=True) | Q(fecha_fin__isnull=False)) Instancia concreta de un objeto: Unidad.objects.get(pk=3) Uni\u00f3n de recordsets y distinct: grupos = Grupo . objects . none () for curso in obj . curso_set . all (): grupos = grupos | curso . grupo_set . all () grupos = grupos . distinct () Filtro en ListView \u00b6 # urls.py from django.conf.urls import url from . import views app_name = 'lms' urlpatterns = [ url ( r '^asistencia/(?P<pk>\\d+)/grupo/(?P<admin>\\w+)/$' , views . AsistenciaGrupoView . as_view (), name = 'asistencia_grupo' ) ] # views.py class AsistenciaGrupoView ( generic . ListView ): template_name = 'lms/asistencia_grupo.html' def get_queryset ( self ): semanas = int ( self . request . GET . get ( 'semanas' , '12' )) return Jornada . objects . filter ( grupo__id = self . kwargs [ 'pk' ], fecha__gte = datetime . today () - timedelta ( weeks = semanas )) . order_by ( 'fecha' ) def get_context_data ( self , ** kwargs ): context = super ( AsistenciaGrupoView , self ) . get_context_data ( ** kwargs ) # Lista de semanas que mostraremos en el combo para filtrar context [ 'lista_semanas' ] = [( 4 , 1 ), ( 8 , 2 )] # Par\u00e1metro de filtrado del querystring (12 semanas como valor predeterminado) context [ 'semanas' ] = int ( self . request . GET . get ( 'semanas' , '12' )) # Valor del PK del grupo recogido de la URL context [ 'pk' ] = self . kwargs [ 'pk' ] return context # template < form method = \"get\" action = \"{{ \" { % url 'lms:asistencia_grupo' pk \" }}%}\" > < label for = \"semanas_id\" > Meses </ label > < select class = \"form-control\" name = \"semanas\" id = \"semanas_id\" onchange = 'if(this.value != 0) { this.form.submit(); }' > {{ \"{ % f or v, d in lista_semanas \" }} % } < option value = \"{{ \" {{ v \" }}}}\" {{ \"{ % i f semanas == v \" }} % } selected = 'selected' {{ \"{ % e ndif \" }} % } > {{ \"{{ d \" }}}} </ option > {{ \"{ % e ndfor \" }} % } </ select > </ form > Instrospecci\u00f3n \u00b6 Lista de atributos \u00b6 Podemos obtenerlos de dos maneras: objeto.__dict__ vars(objeto) Lista de atributos y m\u00e9todos \u00b6 dir(objeto) Logging \u00b6 Log a fichero \u00b6 Configurar un logger en el fichero de settings correspondiente a\u00f1adiendo esto: LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'handlers': { 'file': { 'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': 'debug.log', }, }, 'loggers': { 'log': { 'handlers': ['file'], 'level': 'DEBUG', 'propagate': True, }, }, } En el m\u00f3dulo donde queramos obtener log, a\u00f1adir al principio lo siguiente: import logging logger = logging . getLogger ( 'log' ) Y dentro de la funci\u00f3n donde queramos emitir algo al log: logger . debug ( 'lo que sea' ) Log a consola \u00b6 Si s\u00f3lo queremos imprimir en consola una traza r\u00e1pida, es m\u00e1s f\u00e1cil escribiendo simplemente: print ( 'lo que sea' , file = sys . stderr ) Traza de queries a consola \u00b6 Configurar el siguiente logger en el fichero de settings correspondiente: LOGGING = { 'version': 1, 'filters': { 'require_debug_true': { '()': 'django.utils.log.RequireDebugTrue', } }, 'handlers': { 'console': { 'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', } }, 'loggers': { 'django.db.backends': { 'level': 'DEBUG', 'handlers': ['console'], } } } pip \u00b6 Instalaci\u00f3n versi\u00f3n espec\u00edfica de un paquete \u00b6 $ pip install Django == 1 .11.6 Usando Webpack para construir el frontend \u00b6 Enlaces: \u00b6 Django + webpack + Vue.js - setting up a new project that's easy to develop and deploy (part 1) Using Webpack transparently with Django + hot reloading React components as a bonus webpack-bundle-tracker django-webpack-loader django-vue-webpack : A boilerplate of using Django as backend framework, Vue js and webpack as the frontend setup. Building Modern Applications with Django, Vue.js and Auth0: Part 2 Procedimiento \u00b6 Instalamos Vue-CLI en la m\u00e1quina de desarrollo: sudo npm install -g @vue/cli sudo npm install -g @vue/cli-init Generamos el scaffolding para vue y webpack ejecutando lo siguiente desde el directorio que queremos que contenga el proyecto (en el ejemplo lo llamaremos vue_test ): vue init webpack vue_test Durante la generaci\u00f3n del proyecto se nos hacen las siguientes preguntas: Vue build: Elegimos Runtime + Compiler Install vue-router?: Elegimos Y Use ESLint to lint your code?: n Set up unit tests: n Setup e2e tests with Nightwatch?: n Should we run npm install for you after the project has been created?: Yes, use NPM Generamos el scaffolding para Django: cd vue_test/ django-admin startproject vue_test . Instalamos el plugin de webpack webpack-bundle-tracker y el m\u00f3dulo Django django-webpack-loader (con pipenv): npm install --save-dev webpack-bundle-tracker pipenv install django-webpack-loader A\u00f1adimos webpack_loader a las aplicaciones Django: # ./vue_test/settings.py INSTALLED_APPS = [ 'webpack_loader', #... ] Configurar webpack para que use BundleTracker : // build/webpack.base.conf.js let BundleTracker = require('webpack-bundle-tracker') module.exports = { // ... plugins: [ new BundleTracker({filename: './webpack-stats.json'}), ], } Definir las rutas est\u00e1ticas: Configuraci\u00f3n webpack: // ./config/index.js module.exports = { build: { assetsRoot: path.resolve(__dirname, '../dist/'), assetsSubDirectory: '', assetsPublicPath: '/static/', // ... }, dev: { assetsPublicPath: 'http://localhost:8080/', // ... } } Configuraci\u00f3n Django: # ./vue_test/settings.py STATICFILES_DIRS = ( os.path.join(BASE_DIR, 'dist'), os.path.join(BASE_DIR, 'static'), ) STATIC_ROOT = os.path.join(BASE_DIR, 'public') STATIC_URL = '/static/' WEBPACK_LOADER = { 'DEFAULT': { 'BUNDLE_DIR_NAME': '', 'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats.json'), } } Configuraci\u00f3n webpack para que resuelva los ficheros est\u00e1ticos desde /static : // build/webpack.base.conf.js module.exports = { resolve: { alias: { // ... '__STATIC__': resolve('static'), }, } Configuraci\u00f3n del Hot Reload: // build/webpack.dev.conf.js devServer: { headers: { \"Access-Control-Allow-Origin\":\"\\*\" }, // ... } Los contenidos est\u00e1ticos se servir\u00e1n desde uno y otro entorno de la siguiente forma: <!-- in a Django template --> < img src = \"{{ \" {% static ' logo . png ' \" }}%}\" > <!-- in a Vue component --> < img src = \"~__STATIC__/logo.png\" > Finalmente, para servir los contenidos cliente en desarrollo hay que ejecutar: cd vue-test npm run dev Y para servir los contenidos del backend: cd vue-test pipenv shell python manage.py runserver Cuando hagamos npm run build todo lo gestionado por webpack se compilar\u00e1 dentro del directorio dist . La documentaci\u00f3n de webpack se encuentra aqu\u00ed . Instalaci\u00f3n de JupyterHub \u00b6 Enlaces \u00b6 jupyterhub-deploy-docker Docker for Data Science: Running a Dockerized Jupyter Server 28 Jupyter Notebook tips, tricks, and shortcuts Jupyter Notebook for Beginners: A Tutorial nbgrader Niveles de instalaci\u00f3n \u00b6 Peque\u00f1a - Paquetes sistema Media - Docker Grande - Kubernetes Instalaci\u00f3n The Littlest JupyterHub \u00b6 Instalaci\u00f3n de dependencias y JupyterHub: $ sudo apt-get install python3 git curl $ curl https://raw.githubusercontent.com/jupyterhub/the-littlest-jupyterhub/master/bootstrap/bootstrap.py | sudo -E python3 - --admin niubit Configuraci\u00f3n de puerto de Traefik en: /opt/tljh/state/traefik.toml Reinicio de traefik : $ sudo systemctl restart traefik.service Si queremos detener el servicio hay que desactivar los dos siguientes: $ sudo systemctl disable jupyterhub.service $ sudo systemctl disable traefik.service Configuraci\u00f3n de fichero de log \u00b6 A\u00f1adimos lo siguiente al final del fichero /opt/tljh/hub/lib/python3.6/site-packages/tljh/jupyterhub_config.py : c.JupyterHub.extra_log_file = '/var/log/jupyterhub.log' Reiniciamos el servicio: $ sudo systemctl restart jupyterhub.service A\u00f1adiendo m\u00f3dulos Python al sistema \u00b6 Abrir una terminal en Jupyter con un usuario admin. Ejecutar: $ sudo -E pip install <paquete> Visualizaci\u00f3n de Jupyter Notebooks \u00b6 En este art\u00edculo mencionan las siguientes opciones: Share your notebook file with gists or on github, both of which render the notebooks. See this example . If you upload your notebook to a github repository, you can use the handy mybinder service to allow someone half an hour of interactive Jupyter access to your repository. Store your notebook e.g. in dropbox and put the link to nbviewer . nbviewer will render the notebook from whichever source you host it. Impresi\u00f3n con formato \u00b6 Si queremos que la salida por consola tenga formato, hay que utilizar la codificaci\u00f3n de tipo Set Graphics Mode que se lista en esta p\u00e1gina con el c\u00f3digo \\033 como secuencia de Esc. Por ejemplo si queremos destacar en negrita la primera palabra de la siguiente frase lo haremos as\u00ed: print ( \" \\033 [1m;ERROR \\033 [0m Algo ha salido mal.\" ) Queries complejas \u00b6 Los par\u00e1metros que aplicamos al m\u00e9todo filter se aplican con un and entre ellos a la query resultante. Para hacer queries m\u00e1s complejas (con and y or con prioridades establecidas con par\u00e9ntesis) hay que utilizar los objetos Q . Localizaci\u00f3n de site-packages \u00b6 Ruta general: python -c 'import site; print(site.getsitepackages())' Ruta de usuario: python -m site --user-site","title":"Python/Django"},{"location":"desarrollo/python.html#pythondjango","text":"","title":"Python/Django"},{"location":"desarrollo/python.html#enlaces","text":"","title":"Enlaces"},{"location":"desarrollo/python.html#cheatsheet","text":"Classy Class-Based Views : Detailed descriptions, with full methods and attributes, for each of Django's class-based generic views. Classy Django Forms","title":"Cheatsheet"},{"location":"desarrollo/python.html#aprendizaje","text":"The Hitchhiker's Guide to Python How to Reset Migrations Django Admin Cookbook Django data migration when changing a field to ManyToMany : Cuando queremos cambiar de un modelo ForeignKey a ManyToMany. Alter model to add \u201cthrough\u201d relationship to order a ManytoMany field : Cuando queremos cambiar la tabla intermedia autom\u00e1tica a una gestionada con un modelo propio. Django Inline formsets example Django Migrations and How to Manage Conflicts","title":"Aprendizaje"},{"location":"desarrollo/python.html#modulos-interesantes","text":"django-tinymce django-autocomplete-light awesome Django : A curated list of awesome Django apps, projects and resources. bincopy : Mangling of various file formats that conveys binary information (Motorola S-Record, Intel HEX, TI-TXT and binary files).","title":"M\u00f3dulos interesantes"},{"location":"desarrollo/python.html#entorno-django","text":"Ver antes este post . Para tener un entorno aislado (sin depender con los paquetes y versiones del sistema), instalar primero pip de Python3. Se puede hacer instalando el paquete python3-pip de Ubuntu, pero dado que interesa actualizar a la \u00faltima versi\u00f3n, es mejor instalarlo de forma independiente bajando el script get-pip.py de aqu\u00ed ejecut\u00e1ndolo as\u00ed: $ sudo python3 get-pip.py Despu\u00e9s ejecutar en terminal: $ sudo pip3 install virtualenv $ virtualenv --python=`which python3` djangodev $ source djangodev/bin/activate (djangodev) $ pip install Django Cada vez que se quiera adaptar el entorno de la sesi\u00f3n del terminal a este entorno aislado, hay que ejecutar el pen\u00faltimo comando anterior ( source ).","title":"Entorno Django"},{"location":"desarrollo/python.html#entorno-django-en-synology-nas","text":"Instalo m\u00f3dulo Python3 desde el Centro de Paquetes. Instalo pip en Python3: 1 2 3 4 $ wget -nd https://bootstrap.pypa.io/get-pip.py $ python get-pip.py $ cd /usr/local/bin $ sudo ln -s /volume1/@appstore/py3k/usr/local/bin/pip3 Instalo virtualenv: 1 2 $ sudo pip3 install virtualenv $ python3 /volume1/@appstore/py3k/usr/local/lib/python3.5/site-packages/virtualenv.py --python = ` which python3 ` djangodev Arranco el entorno virtual e instalo Django: 1 2 $ source djangodev/bin/activate ( djangodev ) $ pip install Django","title":"Entorno Django en Synology NAS"},{"location":"desarrollo/python.html#creacion-de-proyecto-django","text":"Desde el directorio donde queremos que se cree ejecutamos: (djangodev) $ django-admin startproject project01","title":"Creaci\u00f3n de proyecto Django"},{"location":"desarrollo/python.html#creacion-de-aplicacion-django","text":"Desde el directorio del proyecto (donde se encuentre el fichero manage.py ) ejecutamos: (djangodev) $ python manage.py startapp app01 Para incorporar los modelos de la nueva aplicaci\u00f3n al mantenimiento autom\u00e1tico que proporciona el m\u00f3dulo admin de Django, hay que incorporar al fichero project01/settings.py lo siguiente en la secci\u00f3n INSTALLED_APPS : INSTALLED_APPS = [ 'app01.apps.App01Config', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Luego ejecutamos el siguiente comando para generar las migraciones a partir de los modelos definidos en la app: (djangodev) $ python manage.py makemigrations app01 Finalmente ejecutamos las migraciones propiamente dichas: (djangodev) $ python manage.py migrate Para poder utilizar el m\u00f3dulo admin de Django, hay que crear al menos un usuario: (djangodev) $ python manage.py createsuperuser","title":"Creaci\u00f3n de aplicaci\u00f3n Django"},{"location":"desarrollo/python.html#pipenv","text":"Actualizaci\u00f3n: A partir de haber tenido problemas de dependencias entre paquetes y de leer este art\u00edculo , abandono la utilizai\u00f3n de Pipenv en favor de virtualenvwrapper+pip.","title":"Pipenv"},{"location":"desarrollo/python.html#enlaces_1","text":"How to manage your Python projects with Pipenv","title":"Enlaces"},{"location":"desarrollo/python.html#instalacion","text":"$ sudo -H pip install pipenv","title":"Instalaci\u00f3n"},{"location":"desarrollo/python.html#creacion-de-entorno-para-python3","text":"$ pipenv install --three $ pipenv shell","title":"Creaci\u00f3n de entorno para Python3"},{"location":"desarrollo/python.html#creacion-de-entorno-en-directorio-de-proyecto","text":"$ PIPENV_VENV_IN_PROJECT = 1 pipenv install --three","title":"Creaci\u00f3n de entorno en directorio de proyecto"},{"location":"desarrollo/python.html#creacion-de-entorno-con-version-especifica-de-python-y-de-paquetes","text":"Instalar algunos paquetes necesarios: 1 2 $ sudo apt-get install build-essential checkinstall $ sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev Bajamos la versi\u00f3n source de aqu\u00ed . Descomprimimos: 1 $ tar -xzvf Python-3.6.5.tgz Renombramos el directorio de las fuentes para no confundirlo con el de los binarios: 1 $ mv Python-3.6.5 Python-3.6.5_src Creamos el directorio para los binarios: 1 $ mkdir Python-3.6.5 Entramos en el directorio de las fuentes y compilamos: 1 2 3 4 5 $ cd /home/usuario/Python-3.6.5_src $ ./configure --disable-ipv6 --prefix = /home/usuario/Python-3.6.5 $ make $ make test $ make install Creamos el entorno: 1 2 3 4 5 $ cd directorio_proyecto $ pipenv install --python /home/usuario/Python-3.6.5/bin/python3 $ pipenv install Django == 1 .11.12 $ pipenv install _resto_de_paquetes_ $ pipenv shell","title":"Creaci\u00f3n de entorno con versi\u00f3n espec\u00edfica de Python y de paquetes"},{"location":"desarrollo/python.html#ejemplo-de-creacion-de-entorno-django-desde-cero-con-pipenv","text":"Actualizaci\u00f3n: A partir de haber tenido problemas de dependencias entre paquetes y de leer este art\u00edculo , abandono la utilizai\u00f3n de Pipenv en favor de virtualenvwrapper+pip. Creamos repositorio git (por ejemplo remote_james ) y lo sincronizamos (por ejemplo con /home/edumoreno/git/remote_james ). Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina): $ cd ~/git/remote_james $ pipenv install --python /home/edumoreno/Python-3.6.5/bin/python3 $ pipenv shell $ pipenv install django $ django-admin startproject remote_james . $ python manage.py startapp james Incorporamos nueva app en fichero settings.py : INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecutamos: $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0.0.0.0:8000","title":"Ejemplo de creaci\u00f3n de entorno Django desde cero con pipenv"},{"location":"desarrollo/python.html#virtualenvwrapperpip","text":"","title":"Virtualenvwrapper+pip"},{"location":"desarrollo/python.html#enlaces_2","text":"Los problemas de pipenv Virtualenv and pip Basics Notes on using pip and virtualenv with Django","title":"Enlaces"},{"location":"desarrollo/python.html#instalacion_1","text":"Ejecutar: 1 2 $ sudo pip install virtualenv $ sudo pip install virtualenvwrapper A\u00f1adir a ~/.bashrc : 1 2 3 4 5 6 # Virtualenvwrapper export WORKON_HOME =$ HOME /. virtualenvs export PROJECT_HOME =$ HOME / git export VIRTUALENVWRAPPER_PYTHON =/ usr / bin / python3 export VIRTUALENVWRAPPER_VIRTUALENV_ARGS = '--no-site-packages' source / usr / local / bin / virtualenvwrapper . sh Reiniciar sesi\u00f3n o cargar de nuevo el ~/.bashrc con: 1 $ source ~/.bashrc","title":"Instalaci\u00f3n"},{"location":"desarrollo/python.html#utilizacion","text":"Antes de activar un entorno: workon y lsvirtualenv : Muestran lista de entornos creados. mkvirtualenv nombre : Crea y activa entorno virtual de nombre nombre mkvirtualenv --python=/usr/bin/python nombre : Crea y activa el entorno virtual nombre basado en el int\u00e9rprete de Python pasado como argumento. workon nombre : Activa el entorno virtual nombre . mktmpenv : Crea y activa un entorno virtual temporal (se borra cuando se desactiva). rmvirtualenv nombre : Borra entorno virtual nombre . cpvirtualenv nombre nombre2 : Copia el entorno virtual nombre a nombre2 . allvirtualenv command with arguments : Ejecuta un comando en todos los entornos virtuales. Por ejemplo: allvirtualenv pip install -U pip setvirtualenvproject virtualenv_path project_path : Asocia un entorno virtual con un proyecto. Despu\u00e9s de activar un entorno: deactivate : Desactiva el entorno virtual activo. cdvirtualenv : Cambia al directorio del entorno virtual activo. cdsitepackages : Cambia al directorio site-packages del entorno virtual activo. lssitepackages : Lista el directorio site-packages del entorno virtual activo. cdproject : Cambia al directorio del proyecto del entorno virtual activo. wipeenv : Elimina todos los paquetes de terceros instalados en el entorno virtual actual.","title":"Utilizaci\u00f3n"},{"location":"desarrollo/python.html#operativa","text":"Dentro del entorno virtual gestionar los paquetes con pip y resolver las dependencias como buenamente se pueda. Una vez que el entorno virtual sea operativo, obtener el fichero de dependencias con el siguiente comando: $ pip freeze > requirements.txt Incluir el fichero requirements.txt en el control de versiones. A la hora de desplegar en producci\u00f3n una revisi\u00f3n que incluya cambios en los paquetes requeridos, ejecutar el siguiente comando una vez que se haya instalado la versi\u00f3n actualizada de requirements.txt : $ pip install -r requirements.txt","title":"Operativa"},{"location":"desarrollo/python.html#ejemplo-de-creacion-de-entorno-django-desde-cero-con-virtualenvwrapperpip","text":"Creamos repositorio git (por ejemplo remote_james ) y lo sincronizamos (por ejemplo con /home/edumoreno/git/remote_james ). Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina): $ cd ~/git/remote_james $ mkvirtualenv remote_james --python=/home/edumoreno/Python-3.6.5/bin/python3 $ workon remote_james $ setvirtualenvproject $VIRTUAL_ENV . $ pip install django $ django-admin startproject remote_james . $ python manage.py startapp james $ pip freeze > requirements.txt Incorporamos nueva app en fichero settings.py : INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecutamos: $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0.0.0.0:8000","title":"Ejemplo de creaci\u00f3n de entorno Django desde cero con virtualenvwrapper+pip"},{"location":"desarrollo/python.html#anadir-campo-a-modelo-intermedio-manytomany","text":"Partimos por ejemplo de: # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , blank = True ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Primero averiguamos el nombre de la tabla intermedia que se cre\u00f3 autom\u00e1ticamente cuando se a\u00f1adi\u00f3 el campo unidades al modelo Taller . En este caso era: lms_taller_unidades . Hacemos backup: $ mysqldump --opt -h localhost --user = usuario --password = contrase\u00f1a database lms_taller_unidades > backup_lms_taller_unidades.sql Borramos o mejor comentamos el campo unidades de Taller y generamos migraciones y las aplicamos, lo que borrar\u00e1 la tabla. Creamos el objeto intermedio: # TallerUnidades class TallerUnidades ( models . Model ): taller = models . ForeignKey ( 'Taller' , on_delete = models . CASCADE ) unidad = models . ForeignKey ( 'Unidad' , on_delete = models . CASCADE ) position = models . PositiveSmallIntegerField ( null = True ) class Meta : db_table = 'lms_taller_unidades' ordering = [ \"position\" ] verbose_name = \"unidad\" verbose_name_plural = \"unidades\" unique_together = (( \"taller\" , \"unidad\" ),) Reestablecemos la relaci\u00f3n ManyToMany a trav\u00e9s del objeto intermedio: # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , through = 'TallerUnidades' ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Creamos migraciones y las aplicamos. Cargamos el backup de la tabla: $ mysql -h localhost --user = usuario --password = contrase\u00f1a database < backup_lms_taller_unidades.sql Si hemos utilizado el campo ManyToMany en el objeto Admin del modelo principal veremos errores como los siguientes: ERRORS: <class 'lms.admin.TallerAdmin'>: (admin.E013) The value of 'fields' cannot include the ManyToManyField 'unidades', because that field manually specifies a relationship model. No habr\u00e1 m\u00e1s remedio que dejar de mostrar el campo directamente con los widgets ManyToMany y pasar a utilizar Inlines.","title":"A\u00f1adir campo a modelo intermedio ManyToMany"},{"location":"desarrollo/python.html#personalizacion-del-modelo-user","text":"Es recomendable cuando se empieza un proyecto, sustituir la gesti\u00f3n del modelo User por uno propio, ya que si se quiere hacer m\u00e1s adelante con la aplicaci\u00f3n ya en marcha, es muy complicada la migraci\u00f3n entre tablas. Un par de buenos art\u00edculos sobre el tema son: Extending User Model Using a Custom Model Extending AbstractUser How to Implement Multiple User Types with Django Creamos el modelo as\u00ed: from django.contrib.auth.models import AbstractUser class User ( AbstractUser ): pass Y lo activamos definiendo la siguiente propiedad en el fichero settings.py : 1 AUTH_USER_MODEL = 'app01.User' Si no queremos perder los formularios especiales de la aplicaci\u00f3n admin para el modelo original, adem\u00e1s hay que personalizar la clase UserAdmin de la siguiente forma: from django.contrib.auth.admin import UserAdmin class MyUserAdmin ( UserAdmin ): model = User admin . site . register ( User , MyUserAdmin )","title":"Personalizaci\u00f3n del modelo User"},{"location":"desarrollo/python.html#gestion-de-migraciones","text":"Una vez generadas las migraciones, si queremos obtener el c\u00f3digo SQL a que equivalen hay que ejecutar el comando (en el ejemploo solicitamos el c\u00f3digo correspondiente a la migraci\u00f3n 0008 ): (djangodev) $ python manage.py sqlmigrate app01 0008 Para situarnos en un punto concreto de la serie de migraciones (deshaciendo por tanto las posteriores cuyos ficheros se podr\u00e1n borrar): (djangodev) $ python manage.py migrate app01 0010 Para mostrar los nombres de todas las migraciones (si no ponemos el nombre al final se muestran las de todo el sitio): (djangodev) $ python manage.py showmigrations app01 Para deshacer todas las migraciones: (djangodev) $ python manage.py migrate app01 zero Para crear una migraci\u00f3n vac\u00eda que podremos utilizar para hacer transferencias de datos (ver ejemplo aqu\u00ed ): (djangodev) $ python manage.py makemigrations app01 --empty Para saber c\u00f3mo gestionar las migraciones en diferentes ramas del desarrollo y evitar/solucionar conflictos, leer este art\u00edculo .","title":"Gesti\u00f3n de migraciones"},{"location":"desarrollo/python.html#formateo-de-cadenas","text":"Con tuplas (no se puede cambiar el orden de los par\u00e1metros): \" %s parte de %s la cadena\" % ( var1 , var2 ) Con diccionario (se puede cambiar el orden de los par\u00e1metros): \" %(par1)s parte de %(par2)s la cadena\" % { 'par1' : var1 , 'par2' : var2 }","title":"Formateo de cadenas"},{"location":"desarrollo/python.html#directorio-instalacion-django","text":"Para averiguar d\u00f3nde est\u00e1n los ficheros de Django, ejecutar el siguiente comando: (djangodev) $ python -c \"import django; print(django.__path__)\"","title":"Directorio instalaci\u00f3n Django"},{"location":"desarrollo/python.html#tutorial-django","text":"Escribiendo una view: Escribiendo directamente la HTTP Response Renderizando una plantilla Gesti\u00f3n de URL's Formulario manual Formulario con vistas gen\u00e9ricas Creando modelos Manipulaci\u00f3n del modelo de datos por CLI Tests Ficheros est\u00e1ticos : Inserci\u00f3n de CSS en las vistas. Modificaci\u00f3n representaci\u00f3n detalle modelos : fields, fieldsets Objetos relacionados en detalle modelos : Inlines Modificaci\u00f3n representaci\u00f3n lista modelos : list_display, list_filter, search_fields Sustituci\u00f3n de templates en el sitio admin Empaquetado de aplicaciones Env\u00edo de mails","title":"Tutorial Django"},{"location":"desarrollo/python.html#tutorial-django-de-mozilla-developer-network","text":"Using models - Searching for records Utilizando las listas gen\u00e9ricas y vistas de detalle Personalizaci\u00f3n del subsistema de autenticaci\u00f3n : P\u00e1ginas de login, logout, cambio de password, etc. Propiedad calculada en modelo : Sin correspondencia en base de datos. Formularios: Usando Form y view funci\u00f3n Usando ModelForm y CRUD Views","title":"Tutorial Django de Mozilla Developer Network"},{"location":"desarrollo/python.html#referencia-django","text":"Directorio Admin actions : Creaci\u00f3n de actions, p\u00e1ginas intermedias al ejecutar actions, gesti\u00f3n de actions. Autenticaci\u00f3n Model field","title":"Referencia Django"},{"location":"desarrollo/python.html#temas-interesantes","text":"filter, list comprehension y generators . Para filtrar por ejemplo una lista de objetos se pueden utilizar estos tres elementos. Hay que tener en cuenta que filter devuelve un iterator. Si por eejemplo s\u00f3lo queremos el n\u00famero de elementos habr\u00e1 que generar una lista o set con \u00e9l. How to Extend Django User Model . Este art\u00edculo es un ejemplo del caso 4.","title":"Temas interesantes"},{"location":"desarrollo/python.html#uso-de-class-views","text":"","title":"Uso de Class Views"},{"location":"desarrollo/python.html#basicas","text":"Documentadas aqu\u00ed .","title":"B\u00e1sicas"},{"location":"desarrollo/python.html#templateview","text":"La m\u00e1s sencilla. S\u00f3lo necesita definir la propiedad template_name apuntando a la plantilla. Para a\u00f1adir datos al contexto (esto funciona en todas las view classes) se puede definir la funci\u00f3n get_context_data (ver ejemplo e apartado Passing variables to the template aqu\u00ed )","title":"TemplateView"},{"location":"desarrollo/python.html#redirectview","text":"Se puede usar tal cual para definir redirecciones en los ficheros url.py . Por ejemplo: urlpatterns = [ url ( r '^$' , RedirectView . as_view ( url = reverse_lazy ( 'admin:index' ))), ... ] Pero tambi\u00e9n se puede heredar de ella para por ejemplo hacer una vista \"proxy\" para actualizar un contador de visitas a otra vista, como el ejemplo que hay aqu\u00ed .","title":"RedirectView"},{"location":"desarrollo/python.html#genericas-para-visualizacion-de-modelos","text":"Son las dise\u00f1adas para generar listados y vistas de detalle de un modelo. Son m\u00e1s adecuadas para visualizaci\u00f3n, como la que se har\u00eda por ejemplo en un blog. Documentadas aqu\u00ed . En las dos clases de este tipo, s\u00f3lo se necesita definir la propiedad model .","title":"Gen\u00e9ricas para visualizaci\u00f3n de modelos"},{"location":"desarrollo/python.html#detailview","text":"La plantilla se define por convenci\u00f3n a\u00f1adiendo _detail.html al nombre del modelo. Dentro de la plantilla, el objeto que se quiere representar aparece en la variable de contexto object .","title":"DetailView"},{"location":"desarrollo/python.html#listview","text":"La plantilla se define por convenci\u00f3n a\u00f1adiendo _list.html al nombre del modelo. Dentro de la plantilla, la colecci\u00f3n de objetos que se quiere representar aparece en la variable de contexto object_list .","title":"ListView"},{"location":"desarrollo/python.html#genericas-para-edicion-de-modelos","text":"Permiten personalizar las vistas t\u00edpicas del mantenimiento de un modelo (creaci\u00f3n, actualizaci\u00f3n y borrado). Documentadas aqu\u00ed . En cualquiera de las cuatro siguientes clases, en la plantilla incluiremos los tags HTML para el formulario (no se generan autom\u00e1ticamente porque la p\u00e1gina podr\u00eda contener varios formularios o por si no estamos generando HTML). Se suele hacer algo as\u00ed: <form action=\"\" method=\"post\">{{ \"{% csrf_token \" }}%} {{ \"{{ form \" }}}} <input type=\"submit\" value=\"Save\" /> </form> El tag para el formulario tiene tres variantes: {{ \"{{ form.as_p \" }}}} : Cada campo del formulario se genera como un <p> . {{ \"{{ form.as_table \" }}}} : Cada campo del formulario se genera como una fila de una tabla. {{ \"{{ form.as_ul \" }}}} : Cada campo del formulario se genera como una lista sin numerar. Para m\u00e1ximo control siempre podemos generar cada campo del formulario por separado o incluso escribir el formulario completo a mano (ver documentaci\u00f3n Working with forms ).","title":"Gen\u00e9ricas para edici\u00f3n de modelos"},{"location":"desarrollo/python.html#formview","text":"Gestiona la vista con un formulario gen\u00e9rico. Si se produce error en la validaci\u00f3n, vuelve a cargar la misma URL con los campos rellenos e informaci\u00f3n sobre los errores; Si se supera la validaci\u00f3n se redirije a otra URL. En el contexto de la plantilla tendremos el formulario bajo la variable form . Necesita definir las propiedades siguientes: form_class : Clase formulario. success_url : URL a la que se redirije en caso de superar la validaci\u00f3n. template_name : Plantilla. Tambi\u00e9n es interesante definir el m\u00e9todo siguiente: form_valid : Se ejecutar\u00e1 cuando el formulario se valide correctamente. Obtendremos los datos del formulario del diccionario self.form.cleaned_data . Ver ejemplos aqu\u00ed y en apartado Now for a FormView de aqu\u00ed .","title":"FormView"},{"location":"desarrollo/python.html#createview","text":"Para la creaci\u00f3n de un modelo.","title":"CreateView"},{"location":"desarrollo/python.html#updateview","text":"Para la actualizaci\u00f3n de un modelo.","title":"UpdateView"},{"location":"desarrollo/python.html#deleteview","text":"Para el borrado de un modelo.","title":"DeleteView"},{"location":"desarrollo/python.html#empaquetadas","text":"","title":"Empaquetadas"},{"location":"desarrollo/python.html#filterview","text":"Es una especie de ListView con filtros. Ver documentaci\u00f3n aqu\u00ed .","title":"FilterView"},{"location":"desarrollo/python.html#idioms","text":"Retorno seguro del primer elemento de una lista: return (get_list()[:1] or [None])[0] Valor predeterminado en caso de que variable sea None: return variable or 0 Acceso seguro al atributo de un objeto: getattr(object, name[, default]) La funci\u00f3n getattr nos permite indicar un valor predeterminado si un objeto no tiene el atributo que buscamos. Funciona tambi\u00e9n si el objeto es None, lo que nos permite acceder de forma segura a un objeto cuando no sabemos si existe. Suma de una propiedad de una lista de objetos: suma = sum(logro.puntos for logro in logros_totales) Suma de una propiedad de una lista de objetos: suma = sum(list(map(lambda x: x.puntos, logros_totales))) Operador ternario: valor_cuando_true if condici\u00f3n else valor_cuando_false List comprehensions : new_list = [expression(i) for i in old_list if filter(i)] Set comprehension 2D: new_set = {(x, y) for x in range(0, 2) for y in range(0, 3)} Filtro de los elementos de una lista que contienen un fragmento de cadena, por ejemplo las constantes de pygame que empiezan por K_ : filter(lambda x:'K_' in x, dir(pygame)) Switch/case: Se suele utilizar un diccionario como se explica aqu\u00ed . Intercambiar variables: var_1, var_2 = var_2, var_1","title":"Idioms"},{"location":"desarrollo/python.html#ejecucion-de-codigo-en-modulo","text":"Tal y como se explica muy bien aqu\u00ed , el c\u00f3digo a ejecutar en un m\u00f3dulo actuando como programa principal, conviene que lo vinculemos a la comprobaci\u00f3n de si la propiedad __name__ tiene el valor __main__ , por ejemplo: def hacer_algo (): print ( \"algo\" ) if __name__ == \"__main__\" : hacer_algo () en lugar de: def hacer_algo (): print ( \"algo\" ) hacer_algo () De esta forma podremos importar este m\u00f3dulo en otros programas sin que se ejecute c\u00f3digo incontroladamente.","title":"Ejecuci\u00f3n de c\u00f3digo en m\u00f3dulo"},{"location":"desarrollo/python.html#template-filters","text":"{{ variable|default_if_none:\"\" }} : Muestra el texto pasado como argumento si variable vale None . {{ variable|default:\"\" }} : Muestra el texto pasado como argumento si variable es evaluada como False (cadena vac\u00eda, lista vac\u00eda, etc.). {{ variable_date|date:\"Y-m-d\" }} : Formatea una variable de tipo date . Lista de opciones de formato aqu\u00ed . {{ variable_list_string|join:\", \" }} : Concatena una lista de strings. {{ variable_string|urlencode }} : Codifica una string para que sea segura en una URL. {{ variable_string|unicode_decode }} : Decodifica un string en unicode. {{ variable_string|safe }} : Genera los caracteres para poder interpretar el string como HTML en lugar de escaparlos como se har\u00eda normalmente. {{ variable_list|length }} : N\u00famero de elementos de la lista. {{ variable_int|add:1 }} : A\u00f1ade 1 a la variable entera.","title":"Template filters"},{"location":"desarrollo/python.html#snippets-python","text":"Servidor HTTP en el directorio actual con Python2: python -m SimpleHTTPServer Servidor HTTP en el directorio actual con Python3: python3 -m http.server Conseguir una URL p\u00fablica para el servidor HTTP anterior con ngrok Convertir un set en un list ordenado: una_lista = sorted(un_set, key=lambda x: x.position) Agregar elementos a un diccionario de listas creando las claves si no existen ( fuente ): dic.setdefault(key,[]).append(value) Formateo de fechas : Predeterminado: la funci\u00f3n de conversi\u00f3n a cadena devuelve la fecha en formato ISO: str(datetime.datetime(2008, 11, 22, 19, 53, 42)) devuelve 2008-11-22 19:53:42 Funci\u00f3n de impresi\u00f3n con formato: para el resto de formatos utilizar strftime() . Consultar aqu\u00ed los c\u00f3digos de formato.","title":"Snippets Python"},{"location":"desarrollo/python.html#snippets-django","text":"Colecci\u00f3n completa de objetos de un modelo: Unidad.objects.all() Colecci\u00f3n completa de objetos de un modelo ordenada: Unidad.objects.all().order_by('nombre') Colecci\u00f3n filtrada de objetos de un modelo: Actividad.objects.filter(fecha__year=2017) Filtro OR (es necesario hacer from django.db.models import Q ): GrupoUnidades.objects.filter(Q(pausada=True) | Q(fecha_fin__isnull=False)) Instancia concreta de un objeto: Unidad.objects.get(pk=3) Uni\u00f3n de recordsets y distinct: grupos = Grupo . objects . none () for curso in obj . curso_set . all (): grupos = grupos | curso . grupo_set . all () grupos = grupos . distinct ()","title":"Snippets Django"},{"location":"desarrollo/python.html#filtro-en-listview","text":"# urls.py from django.conf.urls import url from . import views app_name = 'lms' urlpatterns = [ url ( r '^asistencia/(?P<pk>\\d+)/grupo/(?P<admin>\\w+)/$' , views . AsistenciaGrupoView . as_view (), name = 'asistencia_grupo' ) ] # views.py class AsistenciaGrupoView ( generic . ListView ): template_name = 'lms/asistencia_grupo.html' def get_queryset ( self ): semanas = int ( self . request . GET . get ( 'semanas' , '12' )) return Jornada . objects . filter ( grupo__id = self . kwargs [ 'pk' ], fecha__gte = datetime . today () - timedelta ( weeks = semanas )) . order_by ( 'fecha' ) def get_context_data ( self , ** kwargs ): context = super ( AsistenciaGrupoView , self ) . get_context_data ( ** kwargs ) # Lista de semanas que mostraremos en el combo para filtrar context [ 'lista_semanas' ] = [( 4 , 1 ), ( 8 , 2 )] # Par\u00e1metro de filtrado del querystring (12 semanas como valor predeterminado) context [ 'semanas' ] = int ( self . request . GET . get ( 'semanas' , '12' )) # Valor del PK del grupo recogido de la URL context [ 'pk' ] = self . kwargs [ 'pk' ] return context # template < form method = \"get\" action = \"{{ \" { % url 'lms:asistencia_grupo' pk \" }}%}\" > < label for = \"semanas_id\" > Meses </ label > < select class = \"form-control\" name = \"semanas\" id = \"semanas_id\" onchange = 'if(this.value != 0) { this.form.submit(); }' > {{ \"{ % f or v, d in lista_semanas \" }} % } < option value = \"{{ \" {{ v \" }}}}\" {{ \"{ % i f semanas == v \" }} % } selected = 'selected' {{ \"{ % e ndif \" }} % } > {{ \"{{ d \" }}}} </ option > {{ \"{ % e ndfor \" }} % } </ select > </ form >","title":"Filtro en ListView"},{"location":"desarrollo/python.html#instrospeccion","text":"","title":"Instrospecci\u00f3n"},{"location":"desarrollo/python.html#lista-de-atributos","text":"Podemos obtenerlos de dos maneras: objeto.__dict__ vars(objeto)","title":"Lista de atributos"},{"location":"desarrollo/python.html#lista-de-atributos-y-metodos","text":"dir(objeto)","title":"Lista de atributos y m\u00e9todos"},{"location":"desarrollo/python.html#logging","text":"","title":"Logging"},{"location":"desarrollo/python.html#log-a-fichero","text":"Configurar un logger en el fichero de settings correspondiente a\u00f1adiendo esto: LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'handlers': { 'file': { 'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': 'debug.log', }, }, 'loggers': { 'log': { 'handlers': ['file'], 'level': 'DEBUG', 'propagate': True, }, }, } En el m\u00f3dulo donde queramos obtener log, a\u00f1adir al principio lo siguiente: import logging logger = logging . getLogger ( 'log' ) Y dentro de la funci\u00f3n donde queramos emitir algo al log: logger . debug ( 'lo que sea' )","title":"Log a fichero"},{"location":"desarrollo/python.html#log-a-consola","text":"Si s\u00f3lo queremos imprimir en consola una traza r\u00e1pida, es m\u00e1s f\u00e1cil escribiendo simplemente: print ( 'lo que sea' , file = sys . stderr )","title":"Log a consola"},{"location":"desarrollo/python.html#traza-de-queries-a-consola","text":"Configurar el siguiente logger en el fichero de settings correspondiente: LOGGING = { 'version': 1, 'filters': { 'require_debug_true': { '()': 'django.utils.log.RequireDebugTrue', } }, 'handlers': { 'console': { 'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', } }, 'loggers': { 'django.db.backends': { 'level': 'DEBUG', 'handlers': ['console'], } } }","title":"Traza de queries a consola"},{"location":"desarrollo/python.html#pip","text":"","title":"pip"},{"location":"desarrollo/python.html#instalacion-version-especifica-de-un-paquete","text":"$ pip install Django == 1 .11.6","title":"Instalaci\u00f3n versi\u00f3n espec\u00edfica de un paquete"},{"location":"desarrollo/python.html#usando-webpack-para-construir-el-frontend","text":"","title":"Usando Webpack para construir el frontend"},{"location":"desarrollo/python.html#enlaces_3","text":"Django + webpack + Vue.js - setting up a new project that's easy to develop and deploy (part 1) Using Webpack transparently with Django + hot reloading React components as a bonus webpack-bundle-tracker django-webpack-loader django-vue-webpack : A boilerplate of using Django as backend framework, Vue js and webpack as the frontend setup. Building Modern Applications with Django, Vue.js and Auth0: Part 2","title":"Enlaces:"},{"location":"desarrollo/python.html#procedimiento","text":"Instalamos Vue-CLI en la m\u00e1quina de desarrollo: sudo npm install -g @vue/cli sudo npm install -g @vue/cli-init Generamos el scaffolding para vue y webpack ejecutando lo siguiente desde el directorio que queremos que contenga el proyecto (en el ejemplo lo llamaremos vue_test ): vue init webpack vue_test Durante la generaci\u00f3n del proyecto se nos hacen las siguientes preguntas: Vue build: Elegimos Runtime + Compiler Install vue-router?: Elegimos Y Use ESLint to lint your code?: n Set up unit tests: n Setup e2e tests with Nightwatch?: n Should we run npm install for you after the project has been created?: Yes, use NPM Generamos el scaffolding para Django: cd vue_test/ django-admin startproject vue_test . Instalamos el plugin de webpack webpack-bundle-tracker y el m\u00f3dulo Django django-webpack-loader (con pipenv): npm install --save-dev webpack-bundle-tracker pipenv install django-webpack-loader A\u00f1adimos webpack_loader a las aplicaciones Django: # ./vue_test/settings.py INSTALLED_APPS = [ 'webpack_loader', #... ] Configurar webpack para que use BundleTracker : // build/webpack.base.conf.js let BundleTracker = require('webpack-bundle-tracker') module.exports = { // ... plugins: [ new BundleTracker({filename: './webpack-stats.json'}), ], } Definir las rutas est\u00e1ticas: Configuraci\u00f3n webpack: // ./config/index.js module.exports = { build: { assetsRoot: path.resolve(__dirname, '../dist/'), assetsSubDirectory: '', assetsPublicPath: '/static/', // ... }, dev: { assetsPublicPath: 'http://localhost:8080/', // ... } } Configuraci\u00f3n Django: # ./vue_test/settings.py STATICFILES_DIRS = ( os.path.join(BASE_DIR, 'dist'), os.path.join(BASE_DIR, 'static'), ) STATIC_ROOT = os.path.join(BASE_DIR, 'public') STATIC_URL = '/static/' WEBPACK_LOADER = { 'DEFAULT': { 'BUNDLE_DIR_NAME': '', 'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats.json'), } } Configuraci\u00f3n webpack para que resuelva los ficheros est\u00e1ticos desde /static : // build/webpack.base.conf.js module.exports = { resolve: { alias: { // ... '__STATIC__': resolve('static'), }, } Configuraci\u00f3n del Hot Reload: // build/webpack.dev.conf.js devServer: { headers: { \"Access-Control-Allow-Origin\":\"\\*\" }, // ... } Los contenidos est\u00e1ticos se servir\u00e1n desde uno y otro entorno de la siguiente forma: <!-- in a Django template --> < img src = \"{{ \" {% static ' logo . png ' \" }}%}\" > <!-- in a Vue component --> < img src = \"~__STATIC__/logo.png\" > Finalmente, para servir los contenidos cliente en desarrollo hay que ejecutar: cd vue-test npm run dev Y para servir los contenidos del backend: cd vue-test pipenv shell python manage.py runserver Cuando hagamos npm run build todo lo gestionado por webpack se compilar\u00e1 dentro del directorio dist . La documentaci\u00f3n de webpack se encuentra aqu\u00ed .","title":"Procedimiento"},{"location":"desarrollo/python.html#instalacion-de-jupyterhub","text":"","title":"Instalaci\u00f3n de JupyterHub"},{"location":"desarrollo/python.html#enlaces_4","text":"jupyterhub-deploy-docker Docker for Data Science: Running a Dockerized Jupyter Server 28 Jupyter Notebook tips, tricks, and shortcuts Jupyter Notebook for Beginners: A Tutorial nbgrader","title":"Enlaces"},{"location":"desarrollo/python.html#niveles-de-instalacion","text":"Peque\u00f1a - Paquetes sistema Media - Docker Grande - Kubernetes","title":"Niveles de instalaci\u00f3n"},{"location":"desarrollo/python.html#instalacion-the-littlest-jupyterhub","text":"Instalaci\u00f3n de dependencias y JupyterHub: $ sudo apt-get install python3 git curl $ curl https://raw.githubusercontent.com/jupyterhub/the-littlest-jupyterhub/master/bootstrap/bootstrap.py | sudo -E python3 - --admin niubit Configuraci\u00f3n de puerto de Traefik en: /opt/tljh/state/traefik.toml Reinicio de traefik : $ sudo systemctl restart traefik.service Si queremos detener el servicio hay que desactivar los dos siguientes: $ sudo systemctl disable jupyterhub.service $ sudo systemctl disable traefik.service","title":"Instalaci\u00f3n The Littlest JupyterHub"},{"location":"desarrollo/python.html#configuracion-de-fichero-de-log","text":"A\u00f1adimos lo siguiente al final del fichero /opt/tljh/hub/lib/python3.6/site-packages/tljh/jupyterhub_config.py : c.JupyterHub.extra_log_file = '/var/log/jupyterhub.log' Reiniciamos el servicio: $ sudo systemctl restart jupyterhub.service","title":"Configuraci\u00f3n de fichero de log"},{"location":"desarrollo/python.html#anadiendo-modulos-python-al-sistema","text":"Abrir una terminal en Jupyter con un usuario admin. Ejecutar: $ sudo -E pip install <paquete>","title":"A\u00f1adiendo m\u00f3dulos Python al sistema"},{"location":"desarrollo/python.html#visualizacion-de-jupyter-notebooks","text":"En este art\u00edculo mencionan las siguientes opciones: Share your notebook file with gists or on github, both of which render the notebooks. See this example . If you upload your notebook to a github repository, you can use the handy mybinder service to allow someone half an hour of interactive Jupyter access to your repository. Store your notebook e.g. in dropbox and put the link to nbviewer . nbviewer will render the notebook from whichever source you host it.","title":"Visualizaci\u00f3n de Jupyter Notebooks"},{"location":"desarrollo/python.html#impresion-con-formato","text":"Si queremos que la salida por consola tenga formato, hay que utilizar la codificaci\u00f3n de tipo Set Graphics Mode que se lista en esta p\u00e1gina con el c\u00f3digo \\033 como secuencia de Esc. Por ejemplo si queremos destacar en negrita la primera palabra de la siguiente frase lo haremos as\u00ed: print ( \" \\033 [1m;ERROR \\033 [0m Algo ha salido mal.\" )","title":"Impresi\u00f3n con formato"},{"location":"desarrollo/python.html#queries-complejas","text":"Los par\u00e1metros que aplicamos al m\u00e9todo filter se aplican con un and entre ellos a la query resultante. Para hacer queries m\u00e1s complejas (con and y or con prioridades establecidas con par\u00e9ntesis) hay que utilizar los objetos Q .","title":"Queries complejas"},{"location":"desarrollo/python.html#localizacion-de-site-packages","text":"Ruta general: python -c 'import site; print(site.getsitepackages())' Ruta de usuario: python -m site --user-site","title":"Localizaci\u00f3n de site-packages"},{"location":"desarrollo/ror.html","text":"Ruby on Rails \u00b6 Enlaces \u00b6 Ruby on Rails Tutorial Programming Ruby: The Pragmatic Programmer's Guide Why's (Poignant) Guide to Ruby Ruby User's Guide Try Ruby Aptana Studio (IDE) Ruby on Rails Screencasts :exclamation: Ruby on Rails Guides :exclamation: Ruby Tutorial Rails 3 para Windows y Linux Ubuntu (libro en espa\u00f1ol) Rails Examples and Tutorials Ruby QuickRef Rails Tutorial Sublime Text setup Metaprogramming in Ruby: It\u2019s All About the Self Comprobaci\u00f3n de entorno de ejecuci\u00f3n en c\u00f3digo :exclamation: Performance Tunning \u00b6 Performance Tuning for Phusion Passenger (an Introduction) :exclamation: Phusion Corporate Blog - Tuning Phusion Passenger\u2019s concurrency settings Production Rails Tuning with Passenger: PassengerMaxProcesses Passenger tuning for rails application Phusion Passenger users guide, Apache version - Resource control and optimization options El l\u00edo del respond_with \u00b6 Bringing Merb's provides/display into Rails 3 Embracing REST with mind, body and soul What's New in Edge Rails: Cleaner RESTful Controllers w/ respond_with Respond With An Explanation M\u00f3dulos interesantes \u00b6 Devise: Engine de autenticaci\u00f3n/autorizaci\u00f3n Forem: Engine para implementar un foro carmen-rails : Seed con datos de los pa\u00edses y las regiones del mundo. RailsCasts #328 Twitter Bootstrap Basics Twitter Bootstrap Gem FasterCSV : Carga y generaci\u00f3n de ficheros CSV hacia y desde tablas. Ejemplo de uso . Entity-Relationship Diagrams for Ruby on Rails : Obtiene el esquema de relaci\u00f3n entre entidades de una aplicaci\u00f3n en base al an\u00e1lisis de sus modelos. Instalaci\u00f3n en Ubuntu \u00b6 Algunas gu\u00edas \u00b6 How to install Ruby on Rails in Ubuntu 12.04 LTS Buena gu\u00eda de railsapps sobre instalaci\u00f3n de Ruby/Rails Otra gu\u00eda de railsapps sobre actualizaci\u00f3n Procedimiento Ubuntu <=13.04 \u00b6 Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: sudo gem install bundler Instalaci\u00f3n de Rails: sudo gem install rails Instalar passenger (el propio instalador da instrucciones sobre los paquetes necesarios): sudo gem install passenger Instalar el m\u00f3dulo en Apache: sudo passenger-install-apache2-module Tal y como indica la salida del comando anterior, hay que habilitar el m\u00f3dulo reci\u00e9n instalado por medio de la configuraci\u00f3n de Apache. Se puede hacer a\u00f1adiendo los dos siguientes ficheros: #/etc/apache2/mods-available/passenger.load LoadModule passenger_module /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so #/etc/apache2/mods-available/passenger.conf PassengerRoot /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19 PassengerRuby /usr/bin/ruby1.9.1 (las rutas contenidas en los ficheros anteriores depender\u00e1n de la instalaci\u00f3n; la salida del comando que instala el m\u00f3dulo nos indica los valores correctos). Finalmente hay que habilitar el m\u00f3dulo: $ sudo a2enmod passenger Y reiniciamos Apache: $ sudo service apache2 restart Procedimiento Ubuntu >=13.10 \u00b6 Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: sudo gem install bundler Instalaci\u00f3n de Rails: sudo gem install rails Instalar passenger siguiendo esta gu\u00eda . Recomienda instalarlo con los paquetes de la distribuci\u00f3n. A continuaci\u00f3n se indica un resumen de los pasos. Instalar la clave PGP del repositorio que vamos a a\u00f1adir: sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 561F9B9CAC40B2F7 Instalar el siguiente paquete: apt-transport-https Crear el fichero /etc/apt/sources.list.d/passenger.list con el siguiente contenido: deb https://oss-binaries.phusionpassenger.com/apt/passenger saucy main Actualizar el repositorio e instalar el siguiente paquete: libapache2-mod-passenger Buenas pr\u00e1cticas \u00b6 Skinny Controller, Fat Model Nesting resources : Resources should never be nested more than 1 level deep. Tips \u00b6 Visibilidad de Helpers \u00b6 Los m\u00e9todos definidos en los m\u00f3dulos Helper ( app/helpers/<controller>_helper.rb ) son visibles en las vistas por defecto. Para que est\u00e9n disponibles en los controllers hay que hacer un include . Si lo hacemos en el controller base ( ApplicationController ) estar\u00e1 disponibles en todos los controllers dado que \u00e9stos heredan de ApplicationController . Mejora en rendimiento en Desarrollo \u00b6 Rails 3.1 introdujo el concepto del asset pipeline . Desafortunadamente esto causa problemas de rendimiento en el entorno de desarrollo. Para mejorarlo se puede utilizar la tarea de precompilador siguiente: $ bundle exec rake assets:precompile:nondigest Esto provoca que los cambios en los ficheros asset no sean incluidos autom\u00e1ticamente cuando recargamos la p\u00e1gina. Para forzar su refresco hay que volver a ejecutar el comando anterior. Borrado de assets \u00b6 Rails proporciona la siguiente tarea de precompilador que borrar\u00e1 el directorio public/assets , cosa que puede resultar \u00fatil antes de un commit. $ bundle exec rake assets:clean Esta orden puede solucionar el problema con el font-awesome , que en ocasiones se dibuja mal. Tambi\u00e9n puede merecer la pena incluir el directorio public/assets en el fichero .gitignore . Actualizaci\u00f3n de paquetes \u00b6 Comandos interesantes relacionados con las versiones de los paquetes y su gesti\u00f3n: bundle outdated : Informe de paquetes desactualizados. bundle outdated <paquete> : Informa sobre el nivel de actualizaci\u00f3n de un paquete. bundle update : Actualiza todos los paquetes. bundle update <paquete> : Actualiza el paquete. Muestra el mapa de rutas \u00b6 $ bundle exec rake routes Muestra todas las tareas \u00b6 $ bundle exec rake -T Instalaci\u00f3n de gem \u00b6 Tras la instalaci\u00f3n de un gem generalmente hay que instalar y ejecutar las migraciones de base de datos con los siguientes comandos: $ rake railties:install:migrations $ rake db:migrate Para instalar una versi\u00f3n espec\u00edfica de una gem hay que a\u00f1adir el argumento --version , como por ejemplo: $ gem install --version '3.0.13' passenger Activar modo debug \u00b6 Instalar primero la gem debugger : $ sudo gem install debugger A\u00f1adir al Gemfile lo siguiente (probablemente s\u00f3lo sea necesario en el entorno de desarrollo): 1 2 3 group : development do gem 'debugger' end Insertar en el c\u00f3digo una llamada a debugger en el punto del c\u00f3digo donde queramos que se detenga la ejecuci\u00f3n. Finalmente para arrancar el servidor en modo debug: $ bundle exec rails s --debugger Lo anterior sirve para depurar sobre Webrick. Para hacerlo bajo Passenger seguir las instrucciones de este post (con la ayuda de este otro ). De forma resumida consiste en ejecutar: $ cd <app_root> $ sudo gem install ruby-debug19 Generar un task con: $ bundle exec rails g task myapplication restart A\u00f1adir lo siguiente al final del fichero config/environments/development.rb : if File . exists? ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) require 'ruby-debug' Debugger . wait_connection = true Debugger . start_remote File . delete ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) end Ejecutar: $ bundle exec rake myapplication:restart DEBUG = true Y una vez que hagamos una request para que se reinicie la aplicaci\u00f3n ejecutar: $ rdebug -c Generaci\u00f3n de un modelo \u00b6 El siguiente comando crear\u00e1 un modelo para una entidad adem\u00e1s de la migration correspondiente en la base de datos: $ bundle exec rails g model spree/product_layout name:string view:string description:text Path Helpers \u00b6 Dada la siguiente definici\u00f3n de resources anidados: resources :magazines do resources :ads end Alternativamente al uso de los path helpers habituales, cuando se pasa como argumento un objeto se puede dejar a Rails que decida autom\u00e1ticamente el path helper necesario, es decir las siguientes l\u00edneas ser\u00e1n equivalentes: < %= link_to \"Ad details\", magazine_ad_path(@magazine, @ad) %> <%= link_to \"Ad details\" , url_for ( [ @magazine , @ad ] ) %> En helpers como link_to podemos indicar simplemente los objetos: <%= link_to \"Ad details\" , [ @magazine , @ad ] %> O si queremos enlazar directamente a la magazine en lugar de un array pasaremos directamente el objeto padre: <%= link_to \"Magazine details\" , @magazine %> Tareas en base de datos \u00b6 db:create : creates the database for the current env db:create:all : creates the databases for all envs db:drop : drops the database for the current env db:drop:all : drops the databases for all envs db:migrate : runs migrations for the current env that have not run yet db:migrate:up : runs one specific migration db:migrate:down : rolls back one specific migration db:migrate:status : shows current migration status db:migrate:rollback : rolls back the last migration db:migrate:redo : runs ( db:migrate:down db:migrate:up ) or ( db:migrate:rollback db:migrate ) depending on the specified migration db:migrate:reset : runs db:drop db:create db:migrate db:forward : advances the current schema version to the next one db:seed : (only) runs the db/seed.rb file db:schema:load : loads the schema into the current env's database db:schema:dump : dumps the current env's schema (and seems to create the db aswell) db:setup : runs db:schema:load db:seed db:reset : runs db:drop db:setup Gesti\u00f3n del plural/singular \u00b6 Cuando un modelo/recurso tenga un plural irregular, se puede gestionar manualmente por medio de un Inflector . Consultar esta gu\u00eda . Relaci\u00f3n entre modelos \u00b6 Estos ser\u00edan los pasos para establecer una relaci\u00f3n 1:n entre dos modelos preexistentes. Se basa en este apartado de las Rails Guides. Partimos de los modelos Spree::Product de la gem spree_core y el modelo Spree::ProductLayout propio de nuestra aplicaci\u00f3n. La relaci\u00f3n ser\u00e1 un belongs_to de Product a ProductLayout, es decir un n:1. Empezamos a\u00f1adiendo la relaci\u00f3n al modelo Product. Como es una entidad de una gem lo haremos con un fichero decorator: #app/models/spree/product_decorator.rb Spree :: Product . class_eval do belongs_to :product_layout end A continuaci\u00f3n generamos un migration para a\u00f1adir el campo que establece la relaci\u00f3n en la tabla que mantiene el modelo Product: $ bundle exec rails g migration AddProductLayoutRelationToProducts Ahora lo editamos para incorporar el campo: #db/migrate/20130228153926_add_product_layout_relation_to_products.rb class AddProductLayoutRelationToProducts < ActiveRecord :: Migration def change change_table :spree_products do | t | t . references :product_layout end end end Finalmente ejecutamos el migrate: $ bundle exec rake db:migrate Inspeccionar la definici\u00f3n de un m\u00e9todo \u00b6 Si queremos averiguar en qu\u00e9 m\u00f3dulo se encuentra definido un m\u00e9todo ejecutamos en consola IRB lo siguiente: puts Objeto . new . method ( :metodo ) . source_location o puts Objeto . instance_method ( :metodo ) . source_location Sustituyendo \"Objeto\" y \"metodo\" por lo que corresponda. Fuente . Si se trata de un helper partimos de helper , por ejemplo: helper . method ( :tab ) . source_location Listar gems instalados \u00b6 $ gem list --local Si queremos s\u00f3lo las versiones de una gem, de rails por ejemplo: $ gem list --local rails Generar el API de rails \u00b6 Para tener en local la versi\u00f3n actualizada del API de rails: $ rails new dummy_app $ cd dummy_app $ bundle exec rake doc:rails Luego mover el subdirectorio doc/api/index.html a donde nos interese y borrar la dummy_app. RubyGems Documentation \u00b6 Para visualizar la documentaci\u00f3n de todas las gems instaladas en el sistema ejecutar: $ gem server Y abrir la direcci\u00f3n: http://localhost:8808 Problema con el encoding de algunas fuentes en UTF-8 \u00b6 Al incorporar el gem spree_sermepa se produjo el problema descrito aqu\u00ed . Hay varias formas de solucionarlo. Una es a\u00f1adir: if RUBY_VERSION =~ /1.9/ Encoding . default_external = Encoding :: UTF_8 Encoding . default_internal = Encoding :: UTF_8 end en la parte superior del Gemfile. Si se utiliza Passenger para servir la aplicaci\u00f3n, otra opci\u00f3n es sustituir la siguiente variable del fichero /etc/apache2/envvars : 1 export LANG = C por: 1 export LANG = es_ES . UTF - 8 Downgrade de Rubygems \u00b6 Tras actualizar a la versi\u00f3n 2.0.3 de Rubygems empec\u00e9 a tener problemas a la hora de hacer bundle install . Aunque me ped\u00eda el password de root luego se produc\u00edan errores de permisos en los directorios donde se almacenan las gems. La soluci\u00f3n fue volver a una versi\u00f3n anterior de Rubygems. En concreto la misma que hab\u00eda en ese momento en el servidor de DinaHosting, es decir la 1.8.23. Se hizo con el siguiente comando: $ sudo gem update --system 1 .8.23 Soluci\u00f3n a error \"Could not find rake-10.0.4 in any of the sources\" con Passenger \u00b6 En el alojamiento de DinaHosting, al ejecutar por primera vez una aplicaci\u00f3n Ruby ejecutada con Passport, se produce el error siguiente: 1 Could not find rake-10.0.4 in any of the sources Instalando las gemas en el home del usuario se soluciona el error: $ bundle install --deployment Esto instala las gem's en el directorio vendor/bundle . Especificar entorno \u00b6 Para especificar el entorno en una tarea rake a\u00f1adir al final de la orden RAILS_ENV=<entorno> . Por ejemplo para desarrollo: $ bundle exec rake routes RAILS_ENV = development Con el script rails , depende. Si se quiere arrancar la consola a\u00f1adir al final el entorno sin m\u00e1s. Por ejemplo para desarrollo: $ bundle exec rails c development Si se quiere arrancar el servidor Webrick a\u00f1adir el entorno por medio de la opci\u00f3n -e . Por ejemplo para desarrollo: $ bundle exec rails s -e development Desinstalaci\u00f3n de todas las gems \u00b6 Con el siguiente comando: $ gem list | cut -d \" \" -f1 | xargs gem uninstall -aIx Posteriormente habr\u00e1 que volver a instalar Bundler y el resto de gems. Para ello: $ sudo gem install bundler $ cd <proyecto> $ bundle install Plurales/Singulares de resources \u00b6 Recurso de tipo colecci\u00f3n dentro de un namespace: Elemento Plural/Singular Ejemplo Tabla en base de datos Plural spree_posts Clase del modelo Singular Spree::Post Fichero del modelo Singular spree/post.rb Clase del controlador Plural Spree::PostsController Fichero del controlador Plural spree/posts_controller.rb rails generator Singular rails g resource spree/post title:string body:text Ruta en config/routes.rb Plural resources :posts Directorio en views Plural spree/posts Ejecutar una versi\u00f3n concreta de rails \u00b6 Si tenemos instaladas varias versiones del gem de rails, para forzar que se utilice el script rails de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: $ rails _3.2.13_ -v De forma que si por ejemplo queremos generar un nuevo proyecto con la versi\u00f3n 3.2.13 haremos: $ rails _3.2.13_ new nueva_app Ejecutar una versi\u00f3n concreta de spree \u00b6 Si tenemos instaladas varias versiones del gem de spree, para forzar que se utilice el script spree de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: $ spree _1.3.3_ -v De forma que si por ejemplo queremos hacer la instalaci\u00f3n dentro de una aplicaci\u00f3n rails nueva con la versi\u00f3n 1.3.3 de Spree haremos: $ spree _1.3.3_ install Diagramas ERD \u00b6 A continuaci\u00f3n se indica el comando para obtener una serie de diagramas ERD interesantes. La documentaci\u00f3n de todos los par\u00e1metros de ERD est\u00e1 aqu\u00ed . Modelado de producto en Spree: $ bundle exec rake erd attributes = foreign_keys only = \"Spree::Product,Spree::OptionType,Spree::OptionValue,Spree::Variant,Spree::ProductOptionType\" title = 'Productos'","title":"Ruby on Rails"},{"location":"desarrollo/ror.html#ruby-on-rails","text":"","title":"Ruby on Rails"},{"location":"desarrollo/ror.html#enlaces","text":"Ruby on Rails Tutorial Programming Ruby: The Pragmatic Programmer's Guide Why's (Poignant) Guide to Ruby Ruby User's Guide Try Ruby Aptana Studio (IDE) Ruby on Rails Screencasts :exclamation: Ruby on Rails Guides :exclamation: Ruby Tutorial Rails 3 para Windows y Linux Ubuntu (libro en espa\u00f1ol) Rails Examples and Tutorials Ruby QuickRef Rails Tutorial Sublime Text setup Metaprogramming in Ruby: It\u2019s All About the Self Comprobaci\u00f3n de entorno de ejecuci\u00f3n en c\u00f3digo :exclamation:","title":"Enlaces"},{"location":"desarrollo/ror.html#performance-tunning","text":"Performance Tuning for Phusion Passenger (an Introduction) :exclamation: Phusion Corporate Blog - Tuning Phusion Passenger\u2019s concurrency settings Production Rails Tuning with Passenger: PassengerMaxProcesses Passenger tuning for rails application Phusion Passenger users guide, Apache version - Resource control and optimization options","title":"Performance Tunning"},{"location":"desarrollo/ror.html#el-lio-del-respond_with","text":"Bringing Merb's provides/display into Rails 3 Embracing REST with mind, body and soul What's New in Edge Rails: Cleaner RESTful Controllers w/ respond_with Respond With An Explanation","title":"El l\u00edo del respond_with"},{"location":"desarrollo/ror.html#modulos-interesantes","text":"Devise: Engine de autenticaci\u00f3n/autorizaci\u00f3n Forem: Engine para implementar un foro carmen-rails : Seed con datos de los pa\u00edses y las regiones del mundo. RailsCasts #328 Twitter Bootstrap Basics Twitter Bootstrap Gem FasterCSV : Carga y generaci\u00f3n de ficheros CSV hacia y desde tablas. Ejemplo de uso . Entity-Relationship Diagrams for Ruby on Rails : Obtiene el esquema de relaci\u00f3n entre entidades de una aplicaci\u00f3n en base al an\u00e1lisis de sus modelos.","title":"M\u00f3dulos interesantes"},{"location":"desarrollo/ror.html#instalacion-en-ubuntu","text":"","title":"Instalaci\u00f3n en Ubuntu"},{"location":"desarrollo/ror.html#algunas-guias","text":"How to install Ruby on Rails in Ubuntu 12.04 LTS Buena gu\u00eda de railsapps sobre instalaci\u00f3n de Ruby/Rails Otra gu\u00eda de railsapps sobre actualizaci\u00f3n","title":"Algunas gu\u00edas"},{"location":"desarrollo/ror.html#procedimiento-ubuntu-1304","text":"Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: sudo gem install bundler Instalaci\u00f3n de Rails: sudo gem install rails Instalar passenger (el propio instalador da instrucciones sobre los paquetes necesarios): sudo gem install passenger Instalar el m\u00f3dulo en Apache: sudo passenger-install-apache2-module Tal y como indica la salida del comando anterior, hay que habilitar el m\u00f3dulo reci\u00e9n instalado por medio de la configuraci\u00f3n de Apache. Se puede hacer a\u00f1adiendo los dos siguientes ficheros: #/etc/apache2/mods-available/passenger.load LoadModule passenger_module /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so #/etc/apache2/mods-available/passenger.conf PassengerRoot /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19 PassengerRuby /usr/bin/ruby1.9.1 (las rutas contenidas en los ficheros anteriores depender\u00e1n de la instalaci\u00f3n; la salida del comando que instala el m\u00f3dulo nos indica los valores correctos). Finalmente hay que habilitar el m\u00f3dulo: $ sudo a2enmod passenger Y reiniciamos Apache: $ sudo service apache2 restart","title":"Procedimiento Ubuntu &lt;=13.04"},{"location":"desarrollo/ror.html#procedimiento-ubuntu-1310","text":"Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: sudo gem install bundler Instalaci\u00f3n de Rails: sudo gem install rails Instalar passenger siguiendo esta gu\u00eda . Recomienda instalarlo con los paquetes de la distribuci\u00f3n. A continuaci\u00f3n se indica un resumen de los pasos. Instalar la clave PGP del repositorio que vamos a a\u00f1adir: sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 561F9B9CAC40B2F7 Instalar el siguiente paquete: apt-transport-https Crear el fichero /etc/apt/sources.list.d/passenger.list con el siguiente contenido: deb https://oss-binaries.phusionpassenger.com/apt/passenger saucy main Actualizar el repositorio e instalar el siguiente paquete: libapache2-mod-passenger","title":"Procedimiento Ubuntu &gt;=13.10"},{"location":"desarrollo/ror.html#buenas-practicas","text":"Skinny Controller, Fat Model Nesting resources : Resources should never be nested more than 1 level deep.","title":"Buenas pr\u00e1cticas"},{"location":"desarrollo/ror.html#tips","text":"","title":"Tips"},{"location":"desarrollo/ror.html#visibilidad-de-helpers","text":"Los m\u00e9todos definidos en los m\u00f3dulos Helper ( app/helpers/<controller>_helper.rb ) son visibles en las vistas por defecto. Para que est\u00e9n disponibles en los controllers hay que hacer un include . Si lo hacemos en el controller base ( ApplicationController ) estar\u00e1 disponibles en todos los controllers dado que \u00e9stos heredan de ApplicationController .","title":"Visibilidad de Helpers"},{"location":"desarrollo/ror.html#mejora-en-rendimiento-en-desarrollo","text":"Rails 3.1 introdujo el concepto del asset pipeline . Desafortunadamente esto causa problemas de rendimiento en el entorno de desarrollo. Para mejorarlo se puede utilizar la tarea de precompilador siguiente: $ bundle exec rake assets:precompile:nondigest Esto provoca que los cambios en los ficheros asset no sean incluidos autom\u00e1ticamente cuando recargamos la p\u00e1gina. Para forzar su refresco hay que volver a ejecutar el comando anterior.","title":"Mejora en rendimiento en Desarrollo"},{"location":"desarrollo/ror.html#borrado-de-assets","text":"Rails proporciona la siguiente tarea de precompilador que borrar\u00e1 el directorio public/assets , cosa que puede resultar \u00fatil antes de un commit. $ bundle exec rake assets:clean Esta orden puede solucionar el problema con el font-awesome , que en ocasiones se dibuja mal. Tambi\u00e9n puede merecer la pena incluir el directorio public/assets en el fichero .gitignore .","title":"Borrado de assets"},{"location":"desarrollo/ror.html#actualizacion-de-paquetes","text":"Comandos interesantes relacionados con las versiones de los paquetes y su gesti\u00f3n: bundle outdated : Informe de paquetes desactualizados. bundle outdated <paquete> : Informa sobre el nivel de actualizaci\u00f3n de un paquete. bundle update : Actualiza todos los paquetes. bundle update <paquete> : Actualiza el paquete.","title":"Actualizaci\u00f3n de paquetes"},{"location":"desarrollo/ror.html#muestra-el-mapa-de-rutas","text":"$ bundle exec rake routes","title":"Muestra el mapa de rutas"},{"location":"desarrollo/ror.html#muestra-todas-las-tareas","text":"$ bundle exec rake -T","title":"Muestra todas las tareas"},{"location":"desarrollo/ror.html#instalacion-de-gem","text":"Tras la instalaci\u00f3n de un gem generalmente hay que instalar y ejecutar las migraciones de base de datos con los siguientes comandos: $ rake railties:install:migrations $ rake db:migrate Para instalar una versi\u00f3n espec\u00edfica de una gem hay que a\u00f1adir el argumento --version , como por ejemplo: $ gem install --version '3.0.13' passenger","title":"Instalaci\u00f3n de gem"},{"location":"desarrollo/ror.html#activar-modo-debug","text":"Instalar primero la gem debugger : $ sudo gem install debugger A\u00f1adir al Gemfile lo siguiente (probablemente s\u00f3lo sea necesario en el entorno de desarrollo): 1 2 3 group : development do gem 'debugger' end Insertar en el c\u00f3digo una llamada a debugger en el punto del c\u00f3digo donde queramos que se detenga la ejecuci\u00f3n. Finalmente para arrancar el servidor en modo debug: $ bundle exec rails s --debugger Lo anterior sirve para depurar sobre Webrick. Para hacerlo bajo Passenger seguir las instrucciones de este post (con la ayuda de este otro ). De forma resumida consiste en ejecutar: $ cd <app_root> $ sudo gem install ruby-debug19 Generar un task con: $ bundle exec rails g task myapplication restart A\u00f1adir lo siguiente al final del fichero config/environments/development.rb : if File . exists? ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) require 'ruby-debug' Debugger . wait_connection = true Debugger . start_remote File . delete ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) end Ejecutar: $ bundle exec rake myapplication:restart DEBUG = true Y una vez que hagamos una request para que se reinicie la aplicaci\u00f3n ejecutar: $ rdebug -c","title":"Activar modo debug"},{"location":"desarrollo/ror.html#generacion-de-un-modelo","text":"El siguiente comando crear\u00e1 un modelo para una entidad adem\u00e1s de la migration correspondiente en la base de datos: $ bundle exec rails g model spree/product_layout name:string view:string description:text","title":"Generaci\u00f3n de un modelo"},{"location":"desarrollo/ror.html#path-helpers","text":"Dada la siguiente definici\u00f3n de resources anidados: resources :magazines do resources :ads end Alternativamente al uso de los path helpers habituales, cuando se pasa como argumento un objeto se puede dejar a Rails que decida autom\u00e1ticamente el path helper necesario, es decir las siguientes l\u00edneas ser\u00e1n equivalentes: < %= link_to \"Ad details\", magazine_ad_path(@magazine, @ad) %> <%= link_to \"Ad details\" , url_for ( [ @magazine , @ad ] ) %> En helpers como link_to podemos indicar simplemente los objetos: <%= link_to \"Ad details\" , [ @magazine , @ad ] %> O si queremos enlazar directamente a la magazine en lugar de un array pasaremos directamente el objeto padre: <%= link_to \"Magazine details\" , @magazine %>","title":"Path Helpers"},{"location":"desarrollo/ror.html#tareas-en-base-de-datos","text":"db:create : creates the database for the current env db:create:all : creates the databases for all envs db:drop : drops the database for the current env db:drop:all : drops the databases for all envs db:migrate : runs migrations for the current env that have not run yet db:migrate:up : runs one specific migration db:migrate:down : rolls back one specific migration db:migrate:status : shows current migration status db:migrate:rollback : rolls back the last migration db:migrate:redo : runs ( db:migrate:down db:migrate:up ) or ( db:migrate:rollback db:migrate ) depending on the specified migration db:migrate:reset : runs db:drop db:create db:migrate db:forward : advances the current schema version to the next one db:seed : (only) runs the db/seed.rb file db:schema:load : loads the schema into the current env's database db:schema:dump : dumps the current env's schema (and seems to create the db aswell) db:setup : runs db:schema:load db:seed db:reset : runs db:drop db:setup","title":"Tareas en base de datos"},{"location":"desarrollo/ror.html#gestion-del-pluralsingular","text":"Cuando un modelo/recurso tenga un plural irregular, se puede gestionar manualmente por medio de un Inflector . Consultar esta gu\u00eda .","title":"Gesti\u00f3n del plural/singular"},{"location":"desarrollo/ror.html#relacion-entre-modelos","text":"Estos ser\u00edan los pasos para establecer una relaci\u00f3n 1:n entre dos modelos preexistentes. Se basa en este apartado de las Rails Guides. Partimos de los modelos Spree::Product de la gem spree_core y el modelo Spree::ProductLayout propio de nuestra aplicaci\u00f3n. La relaci\u00f3n ser\u00e1 un belongs_to de Product a ProductLayout, es decir un n:1. Empezamos a\u00f1adiendo la relaci\u00f3n al modelo Product. Como es una entidad de una gem lo haremos con un fichero decorator: #app/models/spree/product_decorator.rb Spree :: Product . class_eval do belongs_to :product_layout end A continuaci\u00f3n generamos un migration para a\u00f1adir el campo que establece la relaci\u00f3n en la tabla que mantiene el modelo Product: $ bundle exec rails g migration AddProductLayoutRelationToProducts Ahora lo editamos para incorporar el campo: #db/migrate/20130228153926_add_product_layout_relation_to_products.rb class AddProductLayoutRelationToProducts < ActiveRecord :: Migration def change change_table :spree_products do | t | t . references :product_layout end end end Finalmente ejecutamos el migrate: $ bundle exec rake db:migrate","title":"Relaci\u00f3n entre modelos"},{"location":"desarrollo/ror.html#inspeccionar-la-definicion-de-un-metodo","text":"Si queremos averiguar en qu\u00e9 m\u00f3dulo se encuentra definido un m\u00e9todo ejecutamos en consola IRB lo siguiente: puts Objeto . new . method ( :metodo ) . source_location o puts Objeto . instance_method ( :metodo ) . source_location Sustituyendo \"Objeto\" y \"metodo\" por lo que corresponda. Fuente . Si se trata de un helper partimos de helper , por ejemplo: helper . method ( :tab ) . source_location","title":"Inspeccionar la definici\u00f3n de un m\u00e9todo"},{"location":"desarrollo/ror.html#listar-gems-instalados","text":"$ gem list --local Si queremos s\u00f3lo las versiones de una gem, de rails por ejemplo: $ gem list --local rails","title":"Listar gems instalados"},{"location":"desarrollo/ror.html#generar-el-api-de-rails","text":"Para tener en local la versi\u00f3n actualizada del API de rails: $ rails new dummy_app $ cd dummy_app $ bundle exec rake doc:rails Luego mover el subdirectorio doc/api/index.html a donde nos interese y borrar la dummy_app.","title":"Generar el API de rails"},{"location":"desarrollo/ror.html#rubygems-documentation","text":"Para visualizar la documentaci\u00f3n de todas las gems instaladas en el sistema ejecutar: $ gem server Y abrir la direcci\u00f3n: http://localhost:8808","title":"RubyGems Documentation"},{"location":"desarrollo/ror.html#problema-con-el-encoding-de-algunas-fuentes-en-utf-8","text":"Al incorporar el gem spree_sermepa se produjo el problema descrito aqu\u00ed . Hay varias formas de solucionarlo. Una es a\u00f1adir: if RUBY_VERSION =~ /1.9/ Encoding . default_external = Encoding :: UTF_8 Encoding . default_internal = Encoding :: UTF_8 end en la parte superior del Gemfile. Si se utiliza Passenger para servir la aplicaci\u00f3n, otra opci\u00f3n es sustituir la siguiente variable del fichero /etc/apache2/envvars : 1 export LANG = C por: 1 export LANG = es_ES . UTF - 8","title":"Problema con el encoding de algunas fuentes en UTF-8"},{"location":"desarrollo/ror.html#downgrade-de-rubygems","text":"Tras actualizar a la versi\u00f3n 2.0.3 de Rubygems empec\u00e9 a tener problemas a la hora de hacer bundle install . Aunque me ped\u00eda el password de root luego se produc\u00edan errores de permisos en los directorios donde se almacenan las gems. La soluci\u00f3n fue volver a una versi\u00f3n anterior de Rubygems. En concreto la misma que hab\u00eda en ese momento en el servidor de DinaHosting, es decir la 1.8.23. Se hizo con el siguiente comando: $ sudo gem update --system 1 .8.23","title":"Downgrade de Rubygems"},{"location":"desarrollo/ror.html#solucion-a-error-could-not-find-rake-1004-in-any-of-the-sources-con-passenger","text":"En el alojamiento de DinaHosting, al ejecutar por primera vez una aplicaci\u00f3n Ruby ejecutada con Passport, se produce el error siguiente: 1 Could not find rake-10.0.4 in any of the sources Instalando las gemas en el home del usuario se soluciona el error: $ bundle install --deployment Esto instala las gem's en el directorio vendor/bundle .","title":"Soluci\u00f3n a error \"Could not find rake-10.0.4 in any of the sources\" con Passenger"},{"location":"desarrollo/ror.html#especificar-entorno","text":"Para especificar el entorno en una tarea rake a\u00f1adir al final de la orden RAILS_ENV=<entorno> . Por ejemplo para desarrollo: $ bundle exec rake routes RAILS_ENV = development Con el script rails , depende. Si se quiere arrancar la consola a\u00f1adir al final el entorno sin m\u00e1s. Por ejemplo para desarrollo: $ bundle exec rails c development Si se quiere arrancar el servidor Webrick a\u00f1adir el entorno por medio de la opci\u00f3n -e . Por ejemplo para desarrollo: $ bundle exec rails s -e development","title":"Especificar entorno"},{"location":"desarrollo/ror.html#desinstalacion-de-todas-las-gems","text":"Con el siguiente comando: $ gem list | cut -d \" \" -f1 | xargs gem uninstall -aIx Posteriormente habr\u00e1 que volver a instalar Bundler y el resto de gems. Para ello: $ sudo gem install bundler $ cd <proyecto> $ bundle install","title":"Desinstalaci\u00f3n de todas las gems"},{"location":"desarrollo/ror.html#pluralessingulares-de-resources","text":"Recurso de tipo colecci\u00f3n dentro de un namespace: Elemento Plural/Singular Ejemplo Tabla en base de datos Plural spree_posts Clase del modelo Singular Spree::Post Fichero del modelo Singular spree/post.rb Clase del controlador Plural Spree::PostsController Fichero del controlador Plural spree/posts_controller.rb rails generator Singular rails g resource spree/post title:string body:text Ruta en config/routes.rb Plural resources :posts Directorio en views Plural spree/posts","title":"Plurales/Singulares de resources"},{"location":"desarrollo/ror.html#ejecutar-una-version-concreta-de-rails","text":"Si tenemos instaladas varias versiones del gem de rails, para forzar que se utilice el script rails de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: $ rails _3.2.13_ -v De forma que si por ejemplo queremos generar un nuevo proyecto con la versi\u00f3n 3.2.13 haremos: $ rails _3.2.13_ new nueva_app","title":"Ejecutar una versi\u00f3n concreta de rails"},{"location":"desarrollo/ror.html#ejecutar-una-version-concreta-de-spree","text":"Si tenemos instaladas varias versiones del gem de spree, para forzar que se utilice el script spree de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: $ spree _1.3.3_ -v De forma que si por ejemplo queremos hacer la instalaci\u00f3n dentro de una aplicaci\u00f3n rails nueva con la versi\u00f3n 1.3.3 de Spree haremos: $ spree _1.3.3_ install","title":"Ejecutar una versi\u00f3n concreta de spree"},{"location":"desarrollo/ror.html#diagramas-erd","text":"A continuaci\u00f3n se indica el comando para obtener una serie de diagramas ERD interesantes. La documentaci\u00f3n de todos los par\u00e1metros de ERD est\u00e1 aqu\u00ed . Modelado de producto en Spree: $ bundle exec rake erd attributes = foreign_keys only = \"Spree::Product,Spree::OptionType,Spree::OptionValue,Spree::Variant,Spree::ProductOptionType\" title = 'Productos'","title":"Diagramas ERD"},{"location":"desarrollo/spree.html","text":"Spree \u00b6 Enlaces \u00b6 Getting Started with Spree Spree 1.1 Deployment on Heroku How To: Add A Custom Model to Your Spree App The Spree API Documentation :exclamation: How to Optimize Your Spree Store for Search Engines Crear extensi\u00f3n Spree Tracking E-commerce With Google Analytics :exclamation: Hilos interesantes Google Group \u00b6 Add custom admin controller and use custom code inside controller Do something when state order change to completed Changing /products path and linking to individual products Upgrading Extensions to Spree 2 Rich text in product description : Instalaci\u00f3n de CKEditor para que se use en todos los texarea de la administraci\u00f3n de Spree. Remove /t/ from uri Extensiones interesantes \u00b6 Static Content : Content management of static pages for Spree. Para p\u00e1ginas como About, T\u00e9rminos legales, etc. (en Github ) :exclamation: Related Products : This extension provides a generic way for you to define different types of relationships between your products, by defining a RelationType for each type of relationship you\u2019d like to maintain. (en Github ) :exclamation: Spree Variant Options : Spree Variant Options replaces the radio-button variant selection with groups of option types and values. (en Github ) :exclamation: SpreeEditor : This extension provides an inline rich-text editor for Spree. Spree Simple Blog : Adds a simple blog to Spree which works much like Toto . Spree Reviews : Straightforward review/rating facility. Spree Wishlist : The Spree Wishlist extension enables multiple wishlists per user, as well as managing those as public (sharable) and private. It also includes the ability to notify a friend via email of a recommended product. :exclamation: Spree Email to Friend : The Spree Email to Friend extension enables you to send the product reference to your friend via email. :exclamation: Google Checkout : Users can place order through Google Checkout. Spree Sitemaps : This extension creates sitemaps in .html, .txt, and .xml (google sitemap) formats. Spree_Videos : Display YouTube video(s) on your product page. (en Github ) SpreeProductZoom : A Spree extension that adds lightbox zoom functionality for product images powered by fancyBox . (en Github ) Sitemap Generator : Spree sitemap generator is a sitemap generator based on the sitemap_generator gem. It adheres to the Sitemap 0.9 protocol specification. (en Github ) Spree Google Merchant : This extension provides a product feed for Google Merchant rather than a file that you have to upload. (en Github ) spree-magiczoomplus : Adds MagicZoomPlus to Spree store. (en Github ) Spree Social Bookmarks : This extension allows you to add social bookmarking to your products so your customers can share pages. (en Github ) Spree Volume Pricing : This extension uses predefined ranges of quantities to determine the price for a particular product variant. (en Github ) Active Shipping : Spree calculator that interfaces with USPS, UPS and FedEx via the popular active_shipping plugin. (en Github ) Payment Methods With Range : This extensions allow declaring payment methods only available for a certain order amount. (en Github ) Print Invoice : Generaci\u00f3n de facturas en PDF en el backend. (en Github ) Product Assembly : Create a product which is composed of other products. SpreeBootstrap : This project aims to replace the spree_frontend's use of the skeleton css framework in favor of Twitter Bootstrap. SpreeContactUs : A Rails 3+ Engine providing a basic contact form as a Spree Extension. Instalaci\u00f3n en Ubuntu \u00b6 A los paquetes necesarios para la instalaci\u00f3n de Rails hay que a\u00f1adir: libxml2-dev libxslt1-dev git Tips \u00b6 Override de preferencias \u00b6 Crear el fichero config/initializers/spree_config.rb y hacer un set de las propiedades. Por ejemplo: #encoding: utf-8 Spree :: Config . set ( logo : \"store/myapp_logo.png\" ) Spree :: Config . set ( site_name : 'MyApp' ) Spree :: Config . set ( currency : 'EUR' ) Spree :: Config . set ( currency_symbol_position : 'after' ) Spree :: Config . set ( default_meta_description : 'MyApp' ) Spree :: Config . set ( default_meta_keywords : 'mis palabras clave' ) Todas las preferencias posibles est\u00e1n definidas en el fichero core/app/models/spree/app_configuration.rb . Las preferencias ajustadas de esta forma acaban en la base de datos en la tabla spree_preferences . Si se quita alguna de las lineas anteriores, hay que eliminar el registro correspondiente para que deje de hacer efecto. En ocasiones no es suficiente con esto, ya que tambi\u00e9n puede influir el hecho de que algunas queries son cacheadas. En ese caso hay que borrar el directorio tmp/cache . Actualizaci\u00f3n de versi\u00f3n \u00b6 Cuando aparezca una nueva versi\u00f3n de Spree y se quiera actualizar hay que proceder como sigue: $ bundle update spree $ bundle exec rake railties:install:migrations $ bundle exec rake db:migrate Tareas \"rake\" \u00b6 bundle exec rake assets:precompile:nondigest : Mejora el rendimiento en el entorno de desarrollo a costa de no refrescar en tiempo real los cambios en los assets. bundle exec rake assets:clean : Borra el directorio public/assets . bundle exec rake assets:precompile : Reconstruye el directorio public/assets . bundle exec rake spree_auth:admin:create : Crea un usuario administrador. bundle exec rake spree_sample:load : Cargar los datos de ejemplo. Exige ejecutar previamente bundle exec rake db:seed Instalaci\u00f3n de versi\u00f3n 2.0 \u00b6 El instalador de las \u00faltimas versiones no es del todo redondo (al menos en el momento de escribir esto) y da algunos errores. Para superarlos hay que proceder como sigue. Ejecutar en consola lo siguiente: $ rails new spapp Modificamos la linea de la gem jquery-rails poniendo: 1 gem 'jquery-rails', '~> 2.2.1' Ejecutamos: $ cd spapp $ spree install Decimos \"yes\" a todas las preguntas. Cuando termine volvemos a modificar Gemfile sustituyendo las versiones de las gems de Spree que ha a\u00f1adido el script por las siguientes: 1 2 3 gem 'spree', :github => 'spree/spree', :branch => '2-0-stable' gem 'spree_gateway', :github => 'spree/spree_gateway', :branch => '2-0-stable' gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '2-0-stable' Finalmente de nuevo ejecutamos: $ bundle install Configuraci\u00f3n para enviar correos \u00b6 Hay dos formas: Configurando directamente el ActionMailer por c\u00f3digo Usando el override que permite configurar el ActionMailer en el backend Para el primer tipo empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : config . override_actionmailer_config = false config . mails_from = \"origen@mail.com\" Luego a\u00f1adimos lo siguiente en el fichero de configuraci\u00f3n del entorno, por ejemplo en development ser\u00eda config/environments/development.rb : config . action_mailer . delivery_method = :smtp config . action_mailer . smtp_settings = { address : 'smtp.gmail.com' , port : 587 , domain : 'gmail.com' , user_name : 'user_id' , # No es necesario poner @gmail.com password : 'password' , authentication : 'plain' , enable_starttls_auto : true } En teor\u00eda con esto ser\u00eda suficiente, pero en las primeras pruebas hechas, s\u00f3lo funcion\u00f3 con la versi\u00f3n 2.5.3 de la gem mail , por lo que hubo que especificarla en el Gemfile: gem 'mail' , '2.5.3' La \u00faltima versi\u00f3n de mail es la 2.5.4 que ser\u00e1 la que normalmente est\u00e9 instalada. Para hacer el downgrade hay que ejecutar desde el directorio de nuestro proyecto: $ bundle update mail En posteriores versiones de las gemas ya funcionaba con la versi\u00f3n 2.5.4 de mail por lo que dej\u00f3 de ser necesario hacer este apa\u00f1o. Para el segundo tipo de configuraci\u00f3n empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : config . override_actionmailer_config = true config . mails_from = \"origen@mail.com\" Como siempre que se tocan las preferencias, hay que vigilar si ya existe versi\u00f3n de la misma en la tabla spree_preferences y si est\u00e1 la consulta a esta tabla cacheada, por lo que habr\u00e1 que borrar el directorio tmp/cache . Luego deberemos acudir en el backend a la siguiente ruta: \"Configuraciones / Preferencias m\u00e9todos de email\". Hay que tener en cuenta que este grupo de opciones s\u00f3lo aparece si la opci\u00f3n override_actionmailer_config tiene el valor true. A continuaci\u00f3n se muestran pantallazos de un par de configuraciones que se ha probado que funcionan: Configuraci\u00f3n seg\u00fan entorno \u00b6 Si queremos ajustar algunas preferencias en el initializer config/initializers/spree.rb de manera que su valor dependa del environment, podemos hacer lo siguiente: Spree . config do | config | if Rails . env . production? config . mail_port = 1025 # other configs .. else config . mail_port = 25 # other configs .. end end Resetear base de datos \u00b6 Si queremos comenzar de nuevo en lo que respecta a la base de datos, se puede hacer f\u00e1cilmente con el siguiente comando: $ bundle exec rake db:reset A nivel de ficheros habr\u00e1 que hacer la limpieza a mano. En el Spree b\u00e1sico, como m\u00ednimo habr\u00eda que borrar el directorio rails_root/public/spree/products .","title":"Spree"},{"location":"desarrollo/spree.html#spree","text":"","title":"Spree"},{"location":"desarrollo/spree.html#enlaces","text":"Getting Started with Spree Spree 1.1 Deployment on Heroku How To: Add A Custom Model to Your Spree App The Spree API Documentation :exclamation: How to Optimize Your Spree Store for Search Engines Crear extensi\u00f3n Spree Tracking E-commerce With Google Analytics :exclamation:","title":"Enlaces"},{"location":"desarrollo/spree.html#hilos-interesantes-google-group","text":"Add custom admin controller and use custom code inside controller Do something when state order change to completed Changing /products path and linking to individual products Upgrading Extensions to Spree 2 Rich text in product description : Instalaci\u00f3n de CKEditor para que se use en todos los texarea de la administraci\u00f3n de Spree. Remove /t/ from uri","title":"Hilos interesantes Google Group"},{"location":"desarrollo/spree.html#extensiones-interesantes","text":"Static Content : Content management of static pages for Spree. Para p\u00e1ginas como About, T\u00e9rminos legales, etc. (en Github ) :exclamation: Related Products : This extension provides a generic way for you to define different types of relationships between your products, by defining a RelationType for each type of relationship you\u2019d like to maintain. (en Github ) :exclamation: Spree Variant Options : Spree Variant Options replaces the radio-button variant selection with groups of option types and values. (en Github ) :exclamation: SpreeEditor : This extension provides an inline rich-text editor for Spree. Spree Simple Blog : Adds a simple blog to Spree which works much like Toto . Spree Reviews : Straightforward review/rating facility. Spree Wishlist : The Spree Wishlist extension enables multiple wishlists per user, as well as managing those as public (sharable) and private. It also includes the ability to notify a friend via email of a recommended product. :exclamation: Spree Email to Friend : The Spree Email to Friend extension enables you to send the product reference to your friend via email. :exclamation: Google Checkout : Users can place order through Google Checkout. Spree Sitemaps : This extension creates sitemaps in .html, .txt, and .xml (google sitemap) formats. Spree_Videos : Display YouTube video(s) on your product page. (en Github ) SpreeProductZoom : A Spree extension that adds lightbox zoom functionality for product images powered by fancyBox . (en Github ) Sitemap Generator : Spree sitemap generator is a sitemap generator based on the sitemap_generator gem. It adheres to the Sitemap 0.9 protocol specification. (en Github ) Spree Google Merchant : This extension provides a product feed for Google Merchant rather than a file that you have to upload. (en Github ) spree-magiczoomplus : Adds MagicZoomPlus to Spree store. (en Github ) Spree Social Bookmarks : This extension allows you to add social bookmarking to your products so your customers can share pages. (en Github ) Spree Volume Pricing : This extension uses predefined ranges of quantities to determine the price for a particular product variant. (en Github ) Active Shipping : Spree calculator that interfaces with USPS, UPS and FedEx via the popular active_shipping plugin. (en Github ) Payment Methods With Range : This extensions allow declaring payment methods only available for a certain order amount. (en Github ) Print Invoice : Generaci\u00f3n de facturas en PDF en el backend. (en Github ) Product Assembly : Create a product which is composed of other products. SpreeBootstrap : This project aims to replace the spree_frontend's use of the skeleton css framework in favor of Twitter Bootstrap. SpreeContactUs : A Rails 3+ Engine providing a basic contact form as a Spree Extension.","title":"Extensiones interesantes"},{"location":"desarrollo/spree.html#instalacion-en-ubuntu","text":"A los paquetes necesarios para la instalaci\u00f3n de Rails hay que a\u00f1adir: libxml2-dev libxslt1-dev git","title":"Instalaci\u00f3n en Ubuntu"},{"location":"desarrollo/spree.html#tips","text":"","title":"Tips"},{"location":"desarrollo/spree.html#override-de-preferencias","text":"Crear el fichero config/initializers/spree_config.rb y hacer un set de las propiedades. Por ejemplo: #encoding: utf-8 Spree :: Config . set ( logo : \"store/myapp_logo.png\" ) Spree :: Config . set ( site_name : 'MyApp' ) Spree :: Config . set ( currency : 'EUR' ) Spree :: Config . set ( currency_symbol_position : 'after' ) Spree :: Config . set ( default_meta_description : 'MyApp' ) Spree :: Config . set ( default_meta_keywords : 'mis palabras clave' ) Todas las preferencias posibles est\u00e1n definidas en el fichero core/app/models/spree/app_configuration.rb . Las preferencias ajustadas de esta forma acaban en la base de datos en la tabla spree_preferences . Si se quita alguna de las lineas anteriores, hay que eliminar el registro correspondiente para que deje de hacer efecto. En ocasiones no es suficiente con esto, ya que tambi\u00e9n puede influir el hecho de que algunas queries son cacheadas. En ese caso hay que borrar el directorio tmp/cache .","title":"Override de preferencias"},{"location":"desarrollo/spree.html#actualizacion-de-version","text":"Cuando aparezca una nueva versi\u00f3n de Spree y se quiera actualizar hay que proceder como sigue: $ bundle update spree $ bundle exec rake railties:install:migrations $ bundle exec rake db:migrate","title":"Actualizaci\u00f3n de versi\u00f3n"},{"location":"desarrollo/spree.html#tareas-rake","text":"bundle exec rake assets:precompile:nondigest : Mejora el rendimiento en el entorno de desarrollo a costa de no refrescar en tiempo real los cambios en los assets. bundle exec rake assets:clean : Borra el directorio public/assets . bundle exec rake assets:precompile : Reconstruye el directorio public/assets . bundle exec rake spree_auth:admin:create : Crea un usuario administrador. bundle exec rake spree_sample:load : Cargar los datos de ejemplo. Exige ejecutar previamente bundle exec rake db:seed","title":"Tareas \"rake\""},{"location":"desarrollo/spree.html#instalacion-de-version-20","text":"El instalador de las \u00faltimas versiones no es del todo redondo (al menos en el momento de escribir esto) y da algunos errores. Para superarlos hay que proceder como sigue. Ejecutar en consola lo siguiente: $ rails new spapp Modificamos la linea de la gem jquery-rails poniendo: 1 gem 'jquery-rails', '~> 2.2.1' Ejecutamos: $ cd spapp $ spree install Decimos \"yes\" a todas las preguntas. Cuando termine volvemos a modificar Gemfile sustituyendo las versiones de las gems de Spree que ha a\u00f1adido el script por las siguientes: 1 2 3 gem 'spree', :github => 'spree/spree', :branch => '2-0-stable' gem 'spree_gateway', :github => 'spree/spree_gateway', :branch => '2-0-stable' gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '2-0-stable' Finalmente de nuevo ejecutamos: $ bundle install","title":"Instalaci\u00f3n de versi\u00f3n 2.0"},{"location":"desarrollo/spree.html#configuracion-para-enviar-correos","text":"Hay dos formas: Configurando directamente el ActionMailer por c\u00f3digo Usando el override que permite configurar el ActionMailer en el backend Para el primer tipo empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : config . override_actionmailer_config = false config . mails_from = \"origen@mail.com\" Luego a\u00f1adimos lo siguiente en el fichero de configuraci\u00f3n del entorno, por ejemplo en development ser\u00eda config/environments/development.rb : config . action_mailer . delivery_method = :smtp config . action_mailer . smtp_settings = { address : 'smtp.gmail.com' , port : 587 , domain : 'gmail.com' , user_name : 'user_id' , # No es necesario poner @gmail.com password : 'password' , authentication : 'plain' , enable_starttls_auto : true } En teor\u00eda con esto ser\u00eda suficiente, pero en las primeras pruebas hechas, s\u00f3lo funcion\u00f3 con la versi\u00f3n 2.5.3 de la gem mail , por lo que hubo que especificarla en el Gemfile: gem 'mail' , '2.5.3' La \u00faltima versi\u00f3n de mail es la 2.5.4 que ser\u00e1 la que normalmente est\u00e9 instalada. Para hacer el downgrade hay que ejecutar desde el directorio de nuestro proyecto: $ bundle update mail En posteriores versiones de las gemas ya funcionaba con la versi\u00f3n 2.5.4 de mail por lo que dej\u00f3 de ser necesario hacer este apa\u00f1o. Para el segundo tipo de configuraci\u00f3n empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : config . override_actionmailer_config = true config . mails_from = \"origen@mail.com\" Como siempre que se tocan las preferencias, hay que vigilar si ya existe versi\u00f3n de la misma en la tabla spree_preferences y si est\u00e1 la consulta a esta tabla cacheada, por lo que habr\u00e1 que borrar el directorio tmp/cache . Luego deberemos acudir en el backend a la siguiente ruta: \"Configuraciones / Preferencias m\u00e9todos de email\". Hay que tener en cuenta que este grupo de opciones s\u00f3lo aparece si la opci\u00f3n override_actionmailer_config tiene el valor true. A continuaci\u00f3n se muestran pantallazos de un par de configuraciones que se ha probado que funcionan:","title":"Configuraci\u00f3n para enviar correos"},{"location":"desarrollo/spree.html#configuracion-segun-entorno","text":"Si queremos ajustar algunas preferencias en el initializer config/initializers/spree.rb de manera que su valor dependa del environment, podemos hacer lo siguiente: Spree . config do | config | if Rails . env . production? config . mail_port = 1025 # other configs .. else config . mail_port = 25 # other configs .. end end","title":"Configuraci\u00f3n seg\u00fan entorno"},{"location":"desarrollo/spree.html#resetear-base-de-datos","text":"Si queremos comenzar de nuevo en lo que respecta a la base de datos, se puede hacer f\u00e1cilmente con el siguiente comando: $ bundle exec rake db:reset A nivel de ficheros habr\u00e1 que hacer la limpieza a mano. En el Spree b\u00e1sico, como m\u00ednimo habr\u00eda que borrar el directorio rails_root/public/spree/products .","title":"Resetear base de datos"},{"location":"desarrollo/subl.html","text":"Sublime Text 2 \u00b6 Ajustes \u00b6 Indentado con 2 espacios \u00b6 A\u00f1adir las siguientes dos l\u00edneas al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 6 { ... \"tab_size\": 2, \"translate_tabs_to_spaces\": true ... } Ocultar el MiniMap \u00b6 A\u00f1adir la siguiente l\u00ednea al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 { ... \"show_minimap\": false ... } Extensiones \u00b6 EncodingHelper","title":"Sublime Text 2"},{"location":"desarrollo/subl.html#sublime-text-2","text":"","title":"Sublime Text 2"},{"location":"desarrollo/subl.html#ajustes","text":"","title":"Ajustes"},{"location":"desarrollo/subl.html#indentado-con-2-espacios","text":"A\u00f1adir las siguientes dos l\u00edneas al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 6 { ... \"tab_size\": 2, \"translate_tabs_to_spaces\": true ... }","title":"Indentado con 2 espacios"},{"location":"desarrollo/subl.html#ocultar-el-minimap","text":"A\u00f1adir la siguiente l\u00ednea al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 { ... \"show_minimap\": false ... }","title":"Ocultar el MiniMap"},{"location":"desarrollo/subl.html#extensiones","text":"EncodingHelper","title":"Extensiones"},{"location":"desarrollo/svn.html","text":"SVN \u00b6 Diferencia entre dos revisiones distintas (N y M) del mismo fichero (con ruta Path ) \u00b6 $ svn diff -r N:M Path Limpiar meta-informaci\u00f3n SVN en una copia de trabajo \u00b6 $ rm -rf ` find . -type d -name .svn ` En algunos sistemas lo anterior no funciona bien si los directorios tienen espacios en el nombre. Usar en este caso: $ find . -type d -name .svn -exec rm -rf '{}' \\; Informaci\u00f3n sobre la copia de trabajo \u00b6 $ svn info Redireccionar una copia de trabajo tras movimiento de repositorio \u00b6 $ svn switch --relocate FROM TO [ Path copia trabajo ] Por ejemplo: edumoreno@walqa347:~/NetBeansProjects/MobileDesktopDemo$ svn switch --relocate svn+ssh://eduardo.moreno@172.22.1.63/var/lib/subversion/ims/MobileDesktopDemo svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/MobileDesktopDemo . Creaci\u00f3n de un proyecto nuevo en un repositorio \u00b6 Vamos a mostrarlo con el ejemplo del proyecto CCM dentro de la ruta svn.servidor.com/var/lib/subversion/ims , siendo la ruta de la copia de trabajo /home/edumoreno/NetBeansProjects/CCM . $ svn mkdir svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Creaci\u00f3n directorio.\" Antes de hacer el import ser\u00eda interesante eliminar o mover los directorios o ficheros que no se desea que se sincronicen con el repositorio. Por ejemplo, en el caso de un proyecto NetBeans, \u00e9stos son: CCM/build CCM/dist CCM/nbproject/private Una vez eliminados o movidos hacemos el import: $ cd /home/edumoreno/NetBeansProjects/CCM $ svn import . svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Import inicial.\" Ahora habr\u00eda que hacer un checkout de lo que se ha subido para obtener la meta-informaci\u00f3n del repositorio: $ cd /home/edumoreno/NetBeansProjects $ rm -rf CCM $ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/ Finalmente hay que hacer ajustes para que se ignoren los siguientes directorios del nuevo repositorio: build dist nbproject/private Esto en teor\u00eda se puede hacer con los siguientes comandos, pero aun no se ha probado: $ cd /home/edumoreno/NetBeansProjects/CCM $ svn propset svn:ignore 'build dist' . $ svn propset svn:ignore 'private' nbproject/ $ svn commit -m \"Ignoramos una serie de directorios del proyecto.\" (Nota: El retorno de carro que hay al final del primer comando svn propset es intencionado) Si por alg\u00fan motivo los directorios hubieran entrado por descuido en el repositorio, habr\u00eda que borrarlos tanto en el servidor como en local, ya que aunque se haya establecido la propiedad svn:ignore, se seguir\u00edan sincronizando: $ svn delete build $ svn delete dist $ svn delete nbproject/private $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/build $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/dist $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/nbproject/private $ svn commit -m \"Eliminamos una serie de directorios del proyecto.\" Creaci\u00f3n de un branch \u00b6 Para crear el branch simplemente hay que hacer una copia del trunk sin salir del repositorio. Para ello utilizar el siguiente comando: $ svn copy -m \"Creaci\u00f3n de branch b1_svg.\" svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/trunk/ svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Luego si se desea trabajar en el branch reci\u00e9n creado habr\u00e1 que bajar una copia de trabajo con el comando siguiente: edumoreno@walqa347:~$ cd ~/NetBeansProjects/ edumoreno@walqa347:~/NetBeansProjects$ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ CCM_b1_svg Merge con el trunk \u00b6 Cuando llegue el momento de hacer el merge, habr\u00e1 que proceder de la siguiente forma. Como punto de partida necesitaremos una copia de trabajo del trunk: Averiguamos la revisi\u00f3n en que construimos el branch. Esto se puede conseguir haciendo un log con la opci\u00f3n --stop-on-copy (que detiene la salida del comando en cuanto se detecta que la rama fue copiada o renombrada). As\u00ed, la entrada m\u00e1s antigua muestra lo que buscamos: $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | tail Averiguamos la \u00faltima revisi\u00f3n que contiene cambios en el branch: $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | head Nos situamos en el directorio de la copia de trabajo correspondiente al trunk y hacemos update : edumoreno@walqa347:~$ cd ~/NetBeansProjects/CCM edumoreno@walqa347:~/NetBeansProjects/CCM$ svn update Antes de hacer el merge se puede simular, es decir, lanzarlo sin que aplique los cambios y que s\u00f3lo muestre lo que va a hacer, incorporando la opci\u00f3n --dry-run . El comando ser\u00eda: $ svn merge --dry-run -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Una vez que estemos seguros hacemos el merge indicando la release inicial del branch como origen del intervalo de releases: $ svn merge -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Resolvemos manualmente los conflictos que inevitablemente existir\u00e1n. Hacemos el commit en el trunk de los cambios del branch reci\u00e9n incorporados: $ svn commit -m \"Merge de los cambios r549:634 del branch 'b1_svg' sobre el trunk.\" An\u00e1lisis de diferencias ante un conflicto \u00b6 Para listar los ficheros que tienen conflictos: $ svn status | grep \"^C\" Para listar los ficheros diferenciales de un conflicto: $ ls -l <fichero_base>* La interpretaci\u00f3n de los sufijos que se a\u00f1aden a los ficheros es (siendo MMMM la release de creaci\u00f3n del branch y NNNN la del momento del merge): <fichero_base> : Fichero de merge <fichero_base>.copia-de-trabajo : \u00daltima versi\u00f3n de la copia destino del merge (normalmente el trunk) <fichero_base>.derecha-fusion.rNNNN : \u00daltima versi\u00f3n de la copia origen del merge (normalmente el branch) <fichero_base>.izquierda-fusion.rMMMM : Versi\u00f3n com\u00fan a ambas ramas, es decir, el punto del tiempo en que empezaron a diferenciarse Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama destino (normalmente el trunk): $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.copia-de-trabajo Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama origen (normalmente el branch): $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.derecha-fusion.rNNNN Borrado de la rama \u00b6 Si una vez hecho el merge no se va a continuar trabajando en el branch, se puede considerar su borrado. Esto se hace con la simple orden siguiente: $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/","title":"SVN"},{"location":"desarrollo/svn.html#svn","text":"","title":"SVN"},{"location":"desarrollo/svn.html#diferencia-entre-dos-revisiones-distintas-n-y-m-del-mismo-fichero-con-ruta-path","text":"$ svn diff -r N:M Path","title":"Diferencia entre dos revisiones distintas (N y M) del mismo fichero (con ruta Path)"},{"location":"desarrollo/svn.html#limpiar-meta-informacion-svn-en-una-copia-de-trabajo","text":"$ rm -rf ` find . -type d -name .svn ` En algunos sistemas lo anterior no funciona bien si los directorios tienen espacios en el nombre. Usar en este caso: $ find . -type d -name .svn -exec rm -rf '{}' \\;","title":"Limpiar meta-informaci\u00f3n SVN en una copia de trabajo"},{"location":"desarrollo/svn.html#informacion-sobre-la-copia-de-trabajo","text":"$ svn info","title":"Informaci\u00f3n sobre la copia de trabajo"},{"location":"desarrollo/svn.html#redireccionar-una-copia-de-trabajo-tras-movimiento-de-repositorio","text":"$ svn switch --relocate FROM TO [ Path copia trabajo ] Por ejemplo: edumoreno@walqa347:~/NetBeansProjects/MobileDesktopDemo$ svn switch --relocate svn+ssh://eduardo.moreno@172.22.1.63/var/lib/subversion/ims/MobileDesktopDemo svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/MobileDesktopDemo .","title":"Redireccionar una copia de trabajo tras movimiento de repositorio"},{"location":"desarrollo/svn.html#creacion-de-un-proyecto-nuevo-en-un-repositorio","text":"Vamos a mostrarlo con el ejemplo del proyecto CCM dentro de la ruta svn.servidor.com/var/lib/subversion/ims , siendo la ruta de la copia de trabajo /home/edumoreno/NetBeansProjects/CCM . $ svn mkdir svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Creaci\u00f3n directorio.\" Antes de hacer el import ser\u00eda interesante eliminar o mover los directorios o ficheros que no se desea que se sincronicen con el repositorio. Por ejemplo, en el caso de un proyecto NetBeans, \u00e9stos son: CCM/build CCM/dist CCM/nbproject/private Una vez eliminados o movidos hacemos el import: $ cd /home/edumoreno/NetBeansProjects/CCM $ svn import . svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Import inicial.\" Ahora habr\u00eda que hacer un checkout de lo que se ha subido para obtener la meta-informaci\u00f3n del repositorio: $ cd /home/edumoreno/NetBeansProjects $ rm -rf CCM $ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/ Finalmente hay que hacer ajustes para que se ignoren los siguientes directorios del nuevo repositorio: build dist nbproject/private Esto en teor\u00eda se puede hacer con los siguientes comandos, pero aun no se ha probado: $ cd /home/edumoreno/NetBeansProjects/CCM $ svn propset svn:ignore 'build dist' . $ svn propset svn:ignore 'private' nbproject/ $ svn commit -m \"Ignoramos una serie de directorios del proyecto.\" (Nota: El retorno de carro que hay al final del primer comando svn propset es intencionado) Si por alg\u00fan motivo los directorios hubieran entrado por descuido en el repositorio, habr\u00eda que borrarlos tanto en el servidor como en local, ya que aunque se haya establecido la propiedad svn:ignore, se seguir\u00edan sincronizando: $ svn delete build $ svn delete dist $ svn delete nbproject/private $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/build $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/dist $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/nbproject/private $ svn commit -m \"Eliminamos una serie de directorios del proyecto.\"","title":"Creaci\u00f3n de un proyecto nuevo en un repositorio"},{"location":"desarrollo/svn.html#creacion-de-un-branch","text":"Para crear el branch simplemente hay que hacer una copia del trunk sin salir del repositorio. Para ello utilizar el siguiente comando: $ svn copy -m \"Creaci\u00f3n de branch b1_svg.\" svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/trunk/ svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Luego si se desea trabajar en el branch reci\u00e9n creado habr\u00e1 que bajar una copia de trabajo con el comando siguiente: edumoreno@walqa347:~$ cd ~/NetBeansProjects/ edumoreno@walqa347:~/NetBeansProjects$ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ CCM_b1_svg","title":"Creaci\u00f3n de un branch"},{"location":"desarrollo/svn.html#merge-con-el-trunk","text":"Cuando llegue el momento de hacer el merge, habr\u00e1 que proceder de la siguiente forma. Como punto de partida necesitaremos una copia de trabajo del trunk: Averiguamos la revisi\u00f3n en que construimos el branch. Esto se puede conseguir haciendo un log con la opci\u00f3n --stop-on-copy (que detiene la salida del comando en cuanto se detecta que la rama fue copiada o renombrada). As\u00ed, la entrada m\u00e1s antigua muestra lo que buscamos: $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | tail Averiguamos la \u00faltima revisi\u00f3n que contiene cambios en el branch: $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | head Nos situamos en el directorio de la copia de trabajo correspondiente al trunk y hacemos update : edumoreno@walqa347:~$ cd ~/NetBeansProjects/CCM edumoreno@walqa347:~/NetBeansProjects/CCM$ svn update Antes de hacer el merge se puede simular, es decir, lanzarlo sin que aplique los cambios y que s\u00f3lo muestre lo que va a hacer, incorporando la opci\u00f3n --dry-run . El comando ser\u00eda: $ svn merge --dry-run -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Una vez que estemos seguros hacemos el merge indicando la release inicial del branch como origen del intervalo de releases: $ svn merge -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Resolvemos manualmente los conflictos que inevitablemente existir\u00e1n. Hacemos el commit en el trunk de los cambios del branch reci\u00e9n incorporados: $ svn commit -m \"Merge de los cambios r549:634 del branch 'b1_svg' sobre el trunk.\"","title":"Merge con el trunk"},{"location":"desarrollo/svn.html#analisis-de-diferencias-ante-un-conflicto","text":"Para listar los ficheros que tienen conflictos: $ svn status | grep \"^C\" Para listar los ficheros diferenciales de un conflicto: $ ls -l <fichero_base>* La interpretaci\u00f3n de los sufijos que se a\u00f1aden a los ficheros es (siendo MMMM la release de creaci\u00f3n del branch y NNNN la del momento del merge): <fichero_base> : Fichero de merge <fichero_base>.copia-de-trabajo : \u00daltima versi\u00f3n de la copia destino del merge (normalmente el trunk) <fichero_base>.derecha-fusion.rNNNN : \u00daltima versi\u00f3n de la copia origen del merge (normalmente el branch) <fichero_base>.izquierda-fusion.rMMMM : Versi\u00f3n com\u00fan a ambas ramas, es decir, el punto del tiempo en que empezaron a diferenciarse Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama destino (normalmente el trunk): $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.copia-de-trabajo Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama origen (normalmente el branch): $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.derecha-fusion.rNNNN","title":"An\u00e1lisis de diferencias ante un conflicto"},{"location":"desarrollo/svn.html#borrado-de-la-rama","text":"Si una vez hecho el merge no se va a continuar trabajando en el branch, se puede considerar su borrado. Esto se hace con la simple orden siguiente: $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/","title":"Borrado de la rama"},{"location":"desarrollo/vagrant.html","text":"Vagrant \u00b6 Instalaci\u00f3n \u00b6 Instalar VirtualBox de la distribuci\u00f3n ( virtualbox en Ubuntu) y bajar el instalable de Vagrant de su sitio web . Creaci\u00f3n de entorno \u00b6 Desde el directorio ra\u00edz de nuestro proyecto de desarrollo, ejecutar: $ vagrant init Esto crea el fichero Vagrantfile que mantendr\u00e1 la configuraci\u00f3n de nuestro entorno. Este fichero conviene incluirlo en el control de versiones. Modificamos el fichero Vagrantfile para que use la m\u00e1quina que nos interesa. En el ejemplo vamos a usar ubuntu/xenial64 (consultar aqu\u00ed el cat\u00e1logo completo de m\u00e1quinas). Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" end Cuando se levante por primera el entorno configurado en el Vagrantfile se bajar\u00e1 la m\u00e1quina. Si queremos adelantar este proceso podemos bajar la m\u00e1quina con el siguiente comando: $ vagrant box add ubuntu/xenial64 Ahora ya podemos levantar el entorno y conectar con \u00e9l: $ vagrant up $ vagrant ssh El comando vagrant ssh automatiza una conexi\u00f3n ssh cuyos par\u00e1metros manuales se pueden obtener ejecutando el comando vagrant ssh-config . Por ejemplo, una conexi\u00f3n manual podr\u00eda lograrse a partir de los siguientes resultados as\u00ed: $ vagrant ssh-config Host default HostName 127.0.0.1 User ubuntu Port 2222 UserKnownHostsFile /dev/null StrictHostKeyChecking no PasswordAuthentication no IdentityFile /home/edumoreno/git/django_test/.vagrant/machines/default/virtualbox/private_key IdentitiesOnly yes LogLevel FATAL $ ssh -i /home/edumoreno/git/django_test/.vagrant/machines/default/virtualbox/private_key -p 2222 ubuntu@127.0.0.1 Tal y como se indica en el log del arranque de la m\u00e1quina (durante el vagrant up ), el directorio del proyecto de la m\u00e1quina host se monta sobre /vagrant de la m\u00e1quina guest: ==> default: Mounting shared folders... default: /vagrant => /home/edumoreno/git/niubit_lms Provisi\u00f3n de componentes \u00b6 Por ejemplo vamos a configurar la instalaci\u00f3n de un entorno Python3/Django. La m\u00e1quina que hemos instalado ( ubuntu/xenial64 ) viene con Python3 preinstalado. Vamos a instalar Django de forma controlada con Vagrant para que pueda reproducir esa instalaci\u00f3n de forma autom\u00e1tica si creamos este entorno en otro lugar. Para ello escribimos un script que luego integramos en el Vagrantfile de la siguiente forma: Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision \"shell\", inline: <<-SHELL #!/usr/bin/env bash apt-get update apt-get install -y python3-pip pip3 install Django SHELL end Si no hab\u00edamos arrancado la m\u00e1quina todav\u00eda, el script se ejecutar\u00e1 en el primer arranque. Si ya lo hab\u00edamos hecho habr\u00e1 que decirle a Vagrant que ejecute la configuraci\u00f3n de provisioning: $ vagrant reload --provision En caso de tener que ejecutar muchos scripts o ser muy grandes, tal vez sea mejor escribirlos en archivos separados que luego se pueden referenciar en el Vagrantfile de esta forma (tal y como est\u00e1 en el ejemplo, el script script.sh deber\u00e1 estar en la misma ruta que el Vagrantfile ): Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision :shell, path: \"script.sh\" end Redirecci\u00f3n de puertos \u00b6 Aparte del acceso SSH que se consigue f\u00e1cilmente a trav\u00e9s del comando vagrant ssh como hemos visto, ser\u00e1 habitual que necesitemos otro tipo de accesos por red hacia la m\u00e1quina virtual. Por ejemplo en el caso de que estemos desarrollando una aplicaci\u00f3n web necesitaremos redireccionar el puerto que sirva la m\u00e1quina virtual. Por ejemplo, si queremos redireccionar el puerto 8000 de la m\u00e1quina virtual hacia la host, deberemos a\u00f1adir la siguiente l\u00ednea al bloque de configuraciones del Vagrantfile : config.vm.network :forwarded_port, guest: 8000, host: 8000 Tras ello hay que ejecutar vagrant reload o vagrant up dependiendo de si la m\u00e1quina virtual est\u00e1 arrancada o parada. En Vagrant hay muchas m\u00e1s posibilidades para configurar la red adem\u00e1s del nat que acabamos de hacer. Todas estas posibilidades se describen aqu\u00ed . Para Python/Django En caso de querer acceder al miniservidor que se ejecuta con python manage.py runserver , adem\u00e1s de la redirecci\u00f3n del puerto (precisamente se usa el 8000 de forma predeterminada), tal y como se explica aqu\u00ed , hay que lanzar el miniservidor especificando que se escucha cualquier interfaz de la m\u00e1quina (por defecto se escucha s\u00f3lo el interfaz de loopback) ejecutando as\u00ed: python manage.py runserver 0.0.0.0:8000","title":"Vagrant"},{"location":"desarrollo/vagrant.html#vagrant","text":"","title":"Vagrant"},{"location":"desarrollo/vagrant.html#instalacion","text":"Instalar VirtualBox de la distribuci\u00f3n ( virtualbox en Ubuntu) y bajar el instalable de Vagrant de su sitio web .","title":"Instalaci\u00f3n"},{"location":"desarrollo/vagrant.html#creacion-de-entorno","text":"Desde el directorio ra\u00edz de nuestro proyecto de desarrollo, ejecutar: $ vagrant init Esto crea el fichero Vagrantfile que mantendr\u00e1 la configuraci\u00f3n de nuestro entorno. Este fichero conviene incluirlo en el control de versiones. Modificamos el fichero Vagrantfile para que use la m\u00e1quina que nos interesa. En el ejemplo vamos a usar ubuntu/xenial64 (consultar aqu\u00ed el cat\u00e1logo completo de m\u00e1quinas). Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" end Cuando se levante por primera el entorno configurado en el Vagrantfile se bajar\u00e1 la m\u00e1quina. Si queremos adelantar este proceso podemos bajar la m\u00e1quina con el siguiente comando: $ vagrant box add ubuntu/xenial64 Ahora ya podemos levantar el entorno y conectar con \u00e9l: $ vagrant up $ vagrant ssh El comando vagrant ssh automatiza una conexi\u00f3n ssh cuyos par\u00e1metros manuales se pueden obtener ejecutando el comando vagrant ssh-config . Por ejemplo, una conexi\u00f3n manual podr\u00eda lograrse a partir de los siguientes resultados as\u00ed: $ vagrant ssh-config Host default HostName 127.0.0.1 User ubuntu Port 2222 UserKnownHostsFile /dev/null StrictHostKeyChecking no PasswordAuthentication no IdentityFile /home/edumoreno/git/django_test/.vagrant/machines/default/virtualbox/private_key IdentitiesOnly yes LogLevel FATAL $ ssh -i /home/edumoreno/git/django_test/.vagrant/machines/default/virtualbox/private_key -p 2222 ubuntu@127.0.0.1 Tal y como se indica en el log del arranque de la m\u00e1quina (durante el vagrant up ), el directorio del proyecto de la m\u00e1quina host se monta sobre /vagrant de la m\u00e1quina guest: ==> default: Mounting shared folders... default: /vagrant => /home/edumoreno/git/niubit_lms","title":"Creaci\u00f3n de entorno"},{"location":"desarrollo/vagrant.html#provision-de-componentes","text":"Por ejemplo vamos a configurar la instalaci\u00f3n de un entorno Python3/Django. La m\u00e1quina que hemos instalado ( ubuntu/xenial64 ) viene con Python3 preinstalado. Vamos a instalar Django de forma controlada con Vagrant para que pueda reproducir esa instalaci\u00f3n de forma autom\u00e1tica si creamos este entorno en otro lugar. Para ello escribimos un script que luego integramos en el Vagrantfile de la siguiente forma: Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision \"shell\", inline: <<-SHELL #!/usr/bin/env bash apt-get update apt-get install -y python3-pip pip3 install Django SHELL end Si no hab\u00edamos arrancado la m\u00e1quina todav\u00eda, el script se ejecutar\u00e1 en el primer arranque. Si ya lo hab\u00edamos hecho habr\u00e1 que decirle a Vagrant que ejecute la configuraci\u00f3n de provisioning: $ vagrant reload --provision En caso de tener que ejecutar muchos scripts o ser muy grandes, tal vez sea mejor escribirlos en archivos separados que luego se pueden referenciar en el Vagrantfile de esta forma (tal y como est\u00e1 en el ejemplo, el script script.sh deber\u00e1 estar en la misma ruta que el Vagrantfile ): Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision :shell, path: \"script.sh\" end","title":"Provisi\u00f3n de componentes"},{"location":"desarrollo/vagrant.html#redireccion-de-puertos","text":"Aparte del acceso SSH que se consigue f\u00e1cilmente a trav\u00e9s del comando vagrant ssh como hemos visto, ser\u00e1 habitual que necesitemos otro tipo de accesos por red hacia la m\u00e1quina virtual. Por ejemplo en el caso de que estemos desarrollando una aplicaci\u00f3n web necesitaremos redireccionar el puerto que sirva la m\u00e1quina virtual. Por ejemplo, si queremos redireccionar el puerto 8000 de la m\u00e1quina virtual hacia la host, deberemos a\u00f1adir la siguiente l\u00ednea al bloque de configuraciones del Vagrantfile : config.vm.network :forwarded_port, guest: 8000, host: 8000 Tras ello hay que ejecutar vagrant reload o vagrant up dependiendo de si la m\u00e1quina virtual est\u00e1 arrancada o parada. En Vagrant hay muchas m\u00e1s posibilidades para configurar la red adem\u00e1s del nat que acabamos de hacer. Todas estas posibilidades se describen aqu\u00ed . Para Python/Django En caso de querer acceder al miniservidor que se ejecuta con python manage.py runserver , adem\u00e1s de la redirecci\u00f3n del puerto (precisamente se usa el 8000 de forma predeterminada), tal y como se explica aqu\u00ed , hay que lanzar el miniservidor especificando que se escucha cualquier interfaz de la m\u00e1quina (por defecto se escucha s\u00f3lo el interfaz de loopback) ejecutando as\u00ed: python manage.py runserver 0.0.0.0:8000","title":"Redirecci\u00f3n de puertos"},{"location":"desarrollo/vr.html","text":"VR \u00b6 Enlaces \u00b6 Documentaci\u00f3n, APIs: three.js The Immersive Web Working Group/Community Group OpenXR Tutoriales: Getting Started With WebXR Web Apps \u00b6 Moonrider : Similar a Beat Saber.","title":"VR"},{"location":"desarrollo/vr.html#vr","text":"","title":"VR"},{"location":"desarrollo/vr.html#enlaces","text":"Documentaci\u00f3n, APIs: three.js The Immersive Web Working Group/Community Group OpenXR Tutoriales: Getting Started With WebXR","title":"Enlaces"},{"location":"desarrollo/vr.html#web-apps","text":"Moonrider : Similar a Beat Saber.","title":"Web Apps"},{"location":"desarrollo/yii.html","text":"Yii Framework \u00b6 Enlaces \u00b6 A probar cuando tenga un error :exclamation: Creating a dependent dropdown Search() & Filter of a relations field through CGridView Handling Related Models in Yii Forms Learning Yii Framework Series Yii for beginners How to Change datetime format displayed on the View Tabla Master Detail en Yii GridView de Yii Framework Dynamic parent and child CGridCiew on single view. Using $.ajax to update child gridview via controller (with MANY_MANY relation), after row in parent gridview was clicked Search CGridView, related tables, dates and datepicker Yii Framework en Espa\u00f1ol - Foro Multimodelform dropdown con Ajax Ejecutar acci\u00f3n en multimodelform con dropdown Usando Ajax en Yii, Facil Class Level Methods vs Static Methods Accessing data in a join table with the related models (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Selecting join table with mant to many? (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Special $variables in CGridView and CListView Custom Page Size for CGridView Using CButtonColumn to customize buttons in CGridView Understanding Virtual Attributes and get/set methods :exclamation: Using standard filters in CGridView custom fields Searching and sorting by related model in CGridView :exclamation: Reference: Model rules validation :exclamation: Displaying, sorting and filtering HasMany & ManyMany relations in CGridView :exclamation: Tutorial Yii Framework 1. INSTALANDO YII Y PRIMERA APLICACI\u00d3N 2. CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS 3. LENGUAJE Y VISTA POR DEFECTO 4. MODIFICANDO EL MEN\u00da 5. AUTENTICACI\u00d3N DE USUARIOS 6. CLAVES FOR\u00c1NEAS EN VISTAS 7. VALIDANDO LOS FORMULARIOS 8. ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID 9. FECHAS CON CJUIDATEPICKER 10. B\u00daSQUEDAS POR FECHAS CON SYDATECOLUMN 11. EXPORTAR DEL CGRIDVIEW A PDF 12. REPORTES A PARTIR DE UNA B\u00daSQUEDA EN EL GRID 13. COMBOS DEPENDIENTES 14. CAMPO CON AUTOCOMPLETAR 15. NO MOSTRAR INDEX.PHP EN LAS URL 16. GUARDAR AUTOM\u00c1TICAMENTE USUARIO Y FECHA DE CREACI\u00d3N Y MODIFICACI\u00d3N 17. HACER FORMULARIO PARA MULTIPLES MODELOS 18. CAMPOS ENMASCARADOS EN FORMULARIO Extensiones \u00b6 bootstrap : Bootstrap brings together Yii and Bootstrap, Twitter's HTML, CSS and JavaScript toolkit. eupdatedialog : EUpdateDialog is an extension for Yii framework that allows to run controller actions using jQuery UI dialog. multimodelform : This extension allows to work with multiple records and different models in a edit form. enexmo : ENexmo Library allows Yii programmers to use the Restful API offered by Mobile Messaging provider Nexmo . ejuitimepicker : This extension is a wrapper for Timepicker addon which adds a timepicker to jQuery UI Datepicker. datetimepicker : Datetime picker input widget, based on Jui-timepicker-addon. Envio email con Emailer A module to build dependents dropdown save-relations-ar-behavior : Save HasMany and ManyMany relational active records along with the main model. Know How \u00b6 Instalaci\u00f3n \u00b6 Apache \u00b6 Para ocultar el script de inicio ( index.php ) de la URL se puede configurar un fichero .htaccess como sigue: RewriteEngine on # if a directory or a file exists, use it directly RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d # otherwise forward it to index.php RewriteRule . index.php Fundamentos \u00b6 Development mode \u00b6 En el fichero index.php el modo DEBUG se ajusta en la linea siguiente: <?php defined ( 'YII_DEBUG' ) or define ( 'YII_DEBUG' , true ); Ponerlo a false en Producci\u00f3n ( fuente ). El componente log admite como una de las rutas de log la clase CWebLogRoute que muestra un log detallado de la ejecuci\u00f3n de la p\u00e1gina en la parte inferior de la misma. Para activarlo incluir la clase en el array de routes del componente log , por ejemplo: <?php 'log' => array ( 'class' => 'CLogRouter' , 'routes' => array ( array ( 'class' => 'CFileLogRoute' , 'levels' => 'error, warning' , ), array ( 'class' => 'CWebLogRoute' , ), ), ), Cuando el desarrollo est\u00e9 avanzado o al menos en una fase en la que no se esperen muchos cambios en el esquema de base de datos, se puede mejorar la velocidad del componente db dando un valor mayor que 0 a la propiedad CDbConnection::schemaCachingDuration ( fuente ). Desactivar el m\u00f3dulo gii en el fichero de configuraci\u00f3n cuando la aplicaci\u00f3n est\u00e9 en Producci\u00f3n. Poner a false el par\u00e1metro enableParamLogging del componente db en el fichero de configuraci\u00f3n de la aplicaci\u00f3n. Application \u00b6 Si no se especifica, el controlador predeterminado de una aplicaci\u00f3n se llama \"site\" (SiteController), pero se puede especificar as\u00ed en el fichero de configuraci\u00f3n de la aplicaci\u00f3n ( fuente ): <?php array ( 'defaultController' => 'site' , ) Los componentes de aplicaci\u00f3n se activan por defecto si son definidos en el fichero de configuraci\u00f3n de la aplicaci\u00f3n, pero pueden ser desactivados asignando false al atributo enabled ( fuente ). Los componentes de aplicaci\u00f3n se suelen incorporar de un paquete incluido con la instalaci\u00f3n de Yii. La lista completa de componentes de aplicaci\u00f3n de Yii puede consultarse aqu\u00ed . La aplicaci\u00f3n genera un log en <AppRoot>/protected/runtime/application.log . Controller \u00b6 Si no se especifica la acci\u00f3n a ejecutar de un controller, se ejecuta la acci\u00f3n predeterminada que es index . Puede cambiarse ajustando la variable de instancia p\u00fablica CController:defaultAction ( fuente ). La ruta de los controllers es relativa al directorio <AppRoot>/protected/controllers ( fuente ). Si la aplicaci\u00f3n est\u00e1 organizada en m\u00f3dulos, la ruta completa de las acciones ser\u00e1 del estilo moduleID/controllerID/actionID ( fuente ). La instanciaci\u00f3n de controllers sigue esta secuencia ( fuente ): Si se ha especificado CWebApplication::catchAllRequest (se usa normalmente para poner la aplicaci\u00f3n en modo mantenimiento). Si el ID del controller se encuentra en el mapa definido en CWebApplication::controllerMap . Finalmente se utiliza la convenci\u00f3n comentada anteriormente que enlaza el ID del controller con las clases del directorio <AppRoot>/protected/controllers . Las acciones se pueden escribir como clases aut\u00f3nomas en lugar de como m\u00e9todos de un controller ( fuente ). Los filtros se pueden definir como m\u00e9todos de los controllers en cuyo caso deben empezar por filter o como clases independientes descendientes de CFilter ( fuente ). Los filtros se pueden mapear en la funci\u00f3n filters() de los controllers. Se pueden definir listas negras y listas blancas de acciones sobre las que se aplicar\u00e1 la lista de filtros ( fuente ). View \u00b6 La ruta de las vistas es relativa al directorio <AppRoot>/protected/views ( fuente ). Dentro de las vistas se puede acceder al controller mediante $this . Adicionalmente se pueden pasar variables concretas desde el controller al invocar la vista de la siguiente manera: <?php $this -> render ( 'edit' , array ( 'var1' => $value1 , 'var2' => $value2 , )); Por defecto se aplica a las vistas el layout definido en <AppRoot>/protected/views/layouts/main.php . Esto puede cambiarse a nivel de aplicaci\u00f3n en CWebApplication::layout o a nivel de controller en CController::layout . Si se quiere renderizar una vista sin aplicar layout, en lugar del m\u00e9todo CController::render() hay que invocar CController:renderPartial() ( fuente ). Component \u00b6 Los componentes se utilizan para encapsular funcionalidad. Soportan propiedades, eventos y behaviors. Estos \u00faltimos se utilizan para implementar herencia m\u00faltiple ( fuente ). Module \u00b6 Un m\u00f3dulo es una unidad de c\u00f3digo autocontenida que engloba modelos, vistas, controllers y componentes. Es en cierto modo una aplicaci\u00f3n, s\u00f3lo que no puede ser desplegada por separado. Los m\u00f3dulos se pueden anidar en varios niveles. De la misma forma que una aplicaci\u00f3n puede contener m\u00f3dulos, \u00e9stos pueden contener a su vez otros m\u00f3dulos. Se configuran de la misma forma con el fichero de configuraci\u00f3n de la aplicaci\u00f3n, indicando la propiedad modules en el m\u00f3dulo contenedor. Path Alias e importaci\u00f3n de clases \u00b6 De forma predeterminada est\u00e1n definidos los siguientes path alias: system: <YiiRoot>/framework zii: <YiiRoot>/framework/zii application: <AppRoot>/protected webroot: <AppRoot> ext: <AppRoot>/protected/extensions Para importar clases mejor utilizar Yii:import('path_alias_de_la_clase') que el include , require o require_once de PHP ( fuente ). Se pueden importar todas las clases de un directorio en bloque con una orden del estilo Yii:import('path_alias_del_directorio.*') . Las clases del propio framework est\u00e1n pre-importadas, por lo que no es necesario hacerlo. Convenciones \u00b6 Del framework \u00b6 Si no se especifica en la URL el ID del action se ejecutar\u00e1 el action predeterminada. Si no se cambia (con CController::defaultAction ) se ejecutar\u00e1 el action index . Si no se especifica en la URL el ID del controller se ejecutar\u00e1 el controller predeterminado. Si no se cambia (con CWebApplication::defaultController ) se ejecutar\u00e1 el controller site . Nomenclatura para c\u00f3digo \u00b6 Utilizar notaci\u00f3n camelCase. Comenzar las clases con una letra may\u00fascula. La letra C se usa en las clases del framework => Se recomienda utilizar otra ( T por ejemplo). Comenzar las variables privadas de clase con underscore. Terminar las clases controller con Controller . Dentro de una clase controller, los m\u00e9todos de action comenzarlos con action . Terminar las clases de action con Action . Nomenclatura para bases de datos \u00b6 Nombres de tablas y campos en min\u00fasculas. Palabras separadas con underscore (por ejemplo: direccion_cliente). Nombres de tablas en singular. Nombres de tablas con prefijo propio de la aplicaci\u00f3n (por ejemplo: gestoo_clientes). Formularios \u00b6 Creando el Modelo \u00b6 Validaci\u00f3n \u00b6 Las reglas de validaci\u00f3n se definen en la funci\u00f3n rules() del Model componiendo un array en el que cada elemento se define como sigue: <?php array ( 'ListaAtributos' , 'Validador' , 'on' => 'ListaEscenarios' , ... opciones adicionales ) donde ListaAtributos es una lista separada por comas de nombres de atributos del Model; Validador especifica el tipo de validaci\u00f3n; el par\u00e1metro on es opcional y especifica la lista de escenarios en las que se aplica la regla; las opciones adicionales son pares clave-valor para inicializar propiedades de los validadores usados. Hay tres tipos de validadores: Validador puede ser el nombre de un m\u00e9todo de la clase Modelo. El m\u00e9todo tiene que tener la siguiente forma: <?php /** * @param string $attribute the name of the attribute to be validated * @param array $params options specified in the validation rule */ public function ValidatorName ( $attribute , $params ) { ... } Validador puede ser el nombre de una clase de validaci\u00f3n. En este caso cuando la regla es aplicada, una instancia de la clase de validaci\u00f3n se crea y se inicializa con las opciones adicionales. La clase de validaci\u00f3n debe extender de CValidator . Validador puede ser una de las clases de validaci\u00f3n predefinidas en Yii ( lista ). Asignaci\u00f3n de atributos \u00b6 Las asignaciones de atributos entre formulario y modelo se pueden hacer en bloque por medio de la funci\u00f3n de PHP $_POST[<clase_modelo>] . S\u00f3lo se asignan los atributos considerados seguros, es decir los que tienen asociada una regla de validaci\u00f3n. Hay que tener en cuenta que las reglas de validaci\u00f3n se pueden asociar a escenarios por lo que se asignar\u00e1n unos atributos u otros seg\u00fan el escenario declarado al instanciar el modelo. Por ejemplo: <?php // en escenario login $model = new User ( 'login' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; // en escenario register $model = new User ( 'register' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; Es importante recordar que las reglas de validaci\u00f3n se usan para chequear los datos introducidos por los usuarios y no los datos generados por c\u00f3digo (timestamps o primary keys). Por lo tanto no hay que definir reglas de validaci\u00f3n en los atributos que no esperamos que sean introducidos por el usuario . Por ejemplo, si marcamos como seguro el atributo id de un modelo (por medio del validador safe por ejemplo), aunque inicialmente no incluyamos el campo en el formulario, un atacante podr\u00eda enviarlo y la asignaci\u00f3n en bloque sobre el modelo lo incluir\u00eda y podr\u00eda permitir cambiar el ID del registro en base de datos. Provocando la validaci\u00f3n \u00b6 Una vez que el modelo recibe los atributos (normalmente procedentes del usuario por medio de un formulario) la validaci\u00f3n se puede desencadenar invocando el m\u00e9todo CModel::validate() . Retornar\u00e1 true o false en funci\u00f3n del resultado. En los modelos tipo CActiveRecord de forma predeterminada se desencadena tambi\u00e9n al invocar el m\u00e9todo save() . Antes de invocar la validaci\u00f3n se puede indicar el escenario (ajustando la propiedad scenario del modelo) para elegir el conjunto de reglas de validaci\u00f3n que se desean. Una vez que la validaci\u00f3n se ha hecho, los posibles errores se almacenan en el propio modelo. Se pueden obtener con las funciones CModel::getErrors() (devuelve todos los errores) y CModel::getError() (devuelve s\u00f3lo el primero). Recogiendo varios modelos a la vez \u00b6 Para recoger varios modelos o registros de un tipo simult\u00e1neamente (o entrada tabular) necesitamos crear o rellenar un array de instancias del modelo, dependiendo de si queremos insertar o modificar registros. Luego recogeremos los datos de entrada del usuario de la variable $_POST y los asignaremos a cada modelo. Cuando recog\u00edamos un solo modelo hac\u00edamos $_POST[<clase_modelo>] , ahora haremos $_POST[<clase_modelo>][$i] . El action de modificaci\u00f3n tendr\u00e1 el siguiente aspecto: <?php public function actionBatchUpdate () { // retrieve items to be updated in a batch mode // assuming each item is of model class 'Item' $items = $this -> getItemsToUpdate (); if ( isset ( $_POST [ 'Item' ])) { $valid = true ; foreach ( $items as $i => $item ) { if ( isset ( $_POST [ 'Item' ][ $i ])) $item -> attributes = $_POST [ 'Item' ][ $i ]; $valid = $item -> validate () && $valid ; } if ( $valid ) // all items are valid // ...do something here } // displays the view to collect tabular input $this -> render ( 'batchUpdate' , array ( 'items' => $items )); } y la vista incluir\u00e1 algo como: <div class=\"form\"> <?php echo CHtml :: beginForm (); ?> <table> <tr><th>Name</th><th>Price</th><th>Count</th><th>Description</th></tr> <?php foreach ( $items as $i => $item ) : ?> <tr> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]name\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]price\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]count\" ); ?> </td> <td> <?php echo CHtml :: activeTextArea ( $item , \"[ $i ]description\" ); ?> </td> </tr> <?php endforeach ; ?> </table> <?php echo CHtml :: submitButton ( 'Save' ); ?> <?php echo CHtml :: endForm (); ?> </div><!-- form --> Form Builder \u00b6 Yii incluye un sistema de generaci\u00f3n de formularios din\u00e1mico. Se basa en el objeto CForm . El uso se basa en crear el objeto, pasarle un array de configuraci\u00f3n (se suele mantener en un fichero aparte) y renderizarlo desde una vista. Si se definen formularios anidados (como se ve en la documentaci\u00f3n ), el formulario renderizado contendr\u00e1 \u00fanicamente una etiqueta form HTML dentro de la cual los campos se identificar\u00e1n con nombres tipo Model[atributo] , donde Model se corresponder\u00e1 con uno de los modelos asociados a uno de los sub-forms. Cuando se utiliza el Form Builder la asignaci\u00f3n de atributos del formulario al modelo se puede gestionar desde el propio objeto CForm. Para ello existe el m\u00e9todo loadData() . Esta carga se hace autom\u00e1ticamente cuando es necesario, como por ejemplo si invocamos el m\u00e9todo validate() de CForm que valida los modelos asociados. Documentaci\u00f3n completa aqu\u00ed . Base de Datos \u00b6 Objetos DAO \u00b6 El modelo de acceso a bases de datos de Yii se basa en los siguientes objetos: CDbConnection: Representa una conexi\u00f3n a una base de datos. Normalmente se configura como componente de la aplicaci\u00f3n. Es interesante aprovechar la funcionalidad de prefijo de tablas por medio de la propiedad CDbConnection::tablePrefix . Si se utiliza, luego en las consultas hay que indicar las tablas sin el prefijo (que queda configurado en esta propiedad) y entre dobles llaves (por ejemplo: {{usuario}}). CDbCommand: Representa una sentencia SQL para ejecutar contra una base de datos. Se puede crear mediante el m\u00e9todo createCommand() del objeto CDbConnection. Se ejecuta con los m\u00e9todos query() para selects y execute() para el resto. query() devuelve un CDbDataReader . Existen cuatro variantes de query() que devuelven datos directamente: queryAll(): Devuelve un array con todos los registros del resultado de la consulta. queryRow(): Devuelve el primer registro del resultado de la consulta. queryColumn(): Devuelve un array con el valor de la primera columna del resultado de la consulta. queryScalar(): Devuelve el primer campo del primer registro del resultado de la consulta. \u00datil para una consulta tipo count. CDbDataReader: Representa un conjunto de registros que se lee s\u00f3lo hacia adelante resultado de una consulta. Normalmente el objeto se recorre ejecutando sucesivamente el m\u00e9todo read() hasta que devuelve false . A continuaci\u00f3n se muestran tres formas de extraer los datos de CDbDataReader: <?php $dataReader = $command -> query (); // calling read() repeatedly until it returns false while (( $row = $dataReader -> read ()) !== false ) { ... } // using foreach to traverse through every row of data foreach ( $dataReader as $row ) { ... } // retrieving all rows at once in a single array $rows = $dataReader -> readAll (); CDbTransaction: Representa una transacci\u00f3n en la base de datos. A continuaci\u00f3n se muestra una estructura t\u00edpica transaccional con este objeto: <?php $transaction = $connection -> beginTransaction (); try { $connection -> createCommand ( $sql1 ) -> execute (); $connection -> createCommand ( $sql2 ) -> execute (); //.... other SQL executions $transaction -> commit (); } catch ( Exception $e ) { // an exception is raised if a query fails $transaction -> rollBack (); } Binding de par\u00e1metros \u00b6 Para evitar ataques de inyecci\u00f3n de SQL y para mejorar el rendimiento de consultas que se repiten habitualmente, se recomienda parametrizar las consultas con los m\u00e9todos CDbCommand::bindParam() y CDbCommand::bindValue() . Ejemplo: <?php // una query con dos placeholders \":username\" and \":email\" $sql = \"INSERT INTO tbl_user (username, email) VALUES(:username,:email)\" ; $command = $connection -> createCommand ( $sql ); $command -> bindParam ( \":username\" , $username , PDO :: PARAM_STR ); // reemplaza el placeholder \":username\" con el valor de la variable $username $command -> bindParam ( \":email\" , $email , PDO :: PARAM_STR ); // reemplaza el placeholder \":email\" con el valor de la variable $email $command -> execute (); // inserta otra fila con un nuevo conjunto de valores $command -> bindParam ( \":username\" , $username2 , PDO :: PARAM_STR ); $command -> bindParam ( \":email\" , $email2 , PDO :: PARAM_STR ); $command -> execute (); Binding de variables \u00b6 Se pueden asociar variables PHP a columnas de una query de manera que tomen valor autom\u00e1ticamente cada vez que leamos el siguiente registro. Por ejemplo: <?php $sql = \"SELECT username, email FROM tbl_user\" ; $dataReader = $connection -> createCommand ( $sql ) -> query (); $dataReader -> bindColumn ( 1 , $username ); // asocia la primera columna (username) con la variable $username $dataReader -> bindColumn ( 2 , $email ); // asocia la segunda columna (email) con la variable $email while ( $dataReader -> read () !== false ) { // $username y $email contienen los valores correspondientes a la fila en curso } Query Builder \u00b6 Existe un conjunto de herramientas para construir sentencias SQL de una manera orientada a objeto. Como ventajas, permite construir sentencias de forma program\u00e1tica, evita problemas de sintaxis o ambig\u00fcedades, previene ataques de inyecci\u00f3n de SQL al usar binding de par\u00e1metros y ofrece abstracci\u00f3n de base de datos lo que facilitar\u00eda una migraci\u00f3n m\u00e1s adelante. Consultar la documentaci\u00f3n completa aqu\u00ed . Active Record \u00b6 Active Record (AR) es una popular t\u00e9cnica de mapeo Objeto-Relacional (ORM) que permite manipular una tabla de manera orientada a objeto. De forma din\u00e1mica se genera una entidad modelo a partir de una tabla con pr\u00e1cticamente nada de c\u00f3digo. Se recomienda que todos los nombres de los campos de las tablas est\u00e9n en min\u00fasculas para no tener problemas con el cambio de gestor de base de datos, ya que algunos son sensibles a may\u00fasculas y otros no. Creando registros \u00b6 Simplemente creando un objeto AR, asignando valores a sus propiedades y llamando al m\u00e9todo CActiveRecord::save() . Para asignar expresiones SQL a algunos de los campos o propiedades de los objetos AR, hay que utilizar el objero CDbExpression , por ejemplo: <?php $post = new Post ; $post -> create_time = new CDbExpression ( 'NOW()' ); // $post->create_time='NOW()'; no funcionar\u00eda porque 'NOW()' ser\u00eda tratado como cadena $post -> save (); Recuperando registros \u00b6 Para recuperar un solo registro tenemos los m\u00e9todos: <?php $post = Post :: model () -> find ( $condition , $params ); // encuentra la primera fila que satisface la condici\u00f3n especificada $post = Post :: model () -> findByPk ( $postID , $condition , $params ); // encuentra la fila con el primary key especificado $post = Post :: model () -> findByAttributes ( $attributes , $condition , $params ); // encuentra la fila con los valores de los atributos especificados $post = Post :: model () -> findBySql ( $sql , $params ); // encuentra la primera fila usando la SQL especificada Si no se encuentra ning\u00fan registro, el resultado ser\u00e1 null . Para recuperar varios registros tenemos los m\u00e9todos: <?php $posts = Post :: model () -> findAll ( $condition , $params ); // encuentra todas las filas que satisfacen la condici\u00f3n especificada $posts = Post :: model () -> findAllByPk ( $postIDs , $condition , $params ); // encuentra todas las filas con el primary key especificado $posts = Post :: model () -> findAllByAttributes ( $attributes , $condition , $params ); // encuentra todas las filas con los valores de los atributos especificados $posts = Post :: model () -> findAllBySql ( $sql , $params ); // encuentra todas las filas usando la SQL especificada Adicionalmente existen los siguientes m\u00e9todos: <?php $n = Post :: model () -> count ( $condition , $params ); // obtiene el n\u00famero de filas que satisfacen la condici\u00f3n especificada $n = Post :: model () -> countBySql ( $sql , $params ); // obtiene el n\u00famero de filas que se obtendr\u00edan con las SQL especificada $exists = Post :: model () -> exists ( $condition , $params ); // comprueba si existe al menos una fila que satisface la condici\u00f3n especificada En todos los casos, en lugar de la pareja de strings $condition y $params , podemos entregar un objeto de tipo CDbCriteria m\u00e1s cosas adem\u00e1s de una cl\u00e1usula WHERE. Alternativamente a pasar un CDbCriteria podemos pasar un array con las propiedades de permitan construir este objeto din\u00e1micamente. Actualizando registros \u00b6 Modificando un AR reci\u00e9n obtenido y guardando se producir\u00e1 una actualizaci\u00f3n en base de datos: <?php $post = Post :: model () -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); // guarda el cambio en la base de datos Cuando se guarda (m\u00e9todo save() ) se invoca autom\u00e1ticamente la validaci\u00f3n (a no ser que se pase el argumento false). Si el registro es nuevo se har\u00e1 un insert en lugar de un update. Se puede interrogar al modelo si estamos en uno u otro caso por medio del m\u00e9todo CActiveRecord::isNewRecord() . Se puede actualizar un AR que no se haya cargado previamente con los siguientes m\u00e9todos: <?php Post :: model () -> updateAll ( $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n especificada Post :: model () -> updateByPk ( $pk , $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n y la primary key especificadas Post :: model () -> updateCounters ( $counters , $condition , $params ); // actualiza las columnas tipo counter en las filas que satisfacen la condici\u00f3n especificada Borrando registros \u00b6 Para borrar un solo registro utilizar el m\u00e9todo delete() sobre una instancia AR obtenida previamente: <?php $post = Post :: model () -> findByPk ( 10 ); // localizamos el registro $post -> delete (); // lo borramos. El objeto $post seguir\u00e1 existiendo, pero el registro en base de datos no Tambi\u00e9n se pueden borrar registros sin cargarlos previamente con los siguientes m\u00e9todos: <?php Post :: model () -> deleteAll ( $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada Post :: model () -> deleteByPk ( $pk , $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada y a la primary key Comparando registros \u00b6 Usar el m\u00e9todo CActiveRecord::equals() . Adaptaci\u00f3n de datos \u00b6 CActiveRecord proporciona los siguientes m\u00e9todos para adaptar los datos que se intercambian entre modelo y base de datos en uno y otro sentido: beforeValidate y afterValidate: invocados antes y despu\u00e9s de que se efect\u00fae la validaci\u00f3n. beforeSave y afterSave: invocados antes y despu\u00e9s de que se guarde una instancia AR. beforeDelete y afterDelete: invocados antes y despu\u00e9s de que se borre una instancia AR. afterConstruct: invocado en cada instancia AR creada con el operador new . beforeFind: invocado antes de que un m\u00e9todo de b\u00fasqueda de AR se use para efectuar una consulta (por ejemplo find(), findAll()). afterFind: invocado despu\u00e9s de que cada instancia AR es creada como resultado de una b\u00fasqueda. Usando transacciones \u00b6 Cada instancia AR contiene una propiedad llamada dbConnection que soporta transacciones de la siguiente forma: <?php $model = Post :: model (); $transaction = $model -> dbConnection -> beginTransaction (); try { // find y save son dos pasos entre los que puede interferir otra petici\u00f3n // encerraremos el intervalo entre ambas \u00f3rdenes en una transacci\u00f3n para asegurar consistencia e integridad $post = $model -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); $transaction -> commit (); } catch ( Exception $e ) { $transaction -> rollBack (); } Named scopes \u00b6 Un named scope representa un criterio de b\u00fasqueda al que le asignamos un nombre y que puede ser combinado con otros named scopes para refinar una b\u00fasqueda de AR's. Se declaran en el m\u00e9todo CActiveRecord::scopes() como pares nombre-criterio de filtrado. Por ejemplo: <?php class Post extends CActiveRecord { //...... public function scopes () { return array ( 'published' => array ( 'condition' => 'status=1' , ), 'recently' => array ( 'order' => 'create_time DESC' , 'limit' => 5 , ), ); } } La declaraci\u00f3n de cada named scope se corresponde con un array que sirve para inicializar un objeto CDbCriteria. Una vez definidos se pueden combinar en las sentencias de b\u00fasqueda como por ejemplo: <?php $posts = Post :: model () -> published () -> recently () -> findAll (); Deben usarse siempre sobre m\u00e9todos class-level, es decir partiendo de ModelName::model()-> , no directamente de ModelName:: . Si se quieren parametrizar hay que definirlos como m\u00e9todos class-level aut\u00f3nomos en lugar de configurarlos en el array de CActiveRecord::scopes . Por ejemplo para parametrizar el named scope recently definido previamente se har\u00eda: <?php public function recently ( $limit = 5 ) { $this -> getDbCriteria () -> mergeWith ( array ( 'order' => 'create_time DESC' , 'limit' => $limit , )); return $this ; } Luego podr\u00edamos llamar: <?php $posts = Post :: model () -> published () -> recently ( 3 ) -> findAll (); Se puede definir un named scope predeterminado. De esta forma ser\u00e1 aplicado autom\u00e1ticamente en todas las consultas. Para ello se define en el m\u00e9todo CActiveRecord::defaultScope sin darle nombre como s\u00ed hab\u00eda que hacer en CActiveRecord::scopes . Por ejemplo: <?php public function defaultScope () { return array ( 'condition' => \"language='\" . Yii :: app () -> language . \"'\" , ); } ActiveRecord relacional \u00b6 Declaraci\u00f3n de relaciones \u00b6 Para ilustrar los ejemplos de esta secci\u00f3n se utilizar\u00e1 el siguiente modelo de datos: Las relaciones entre dos clases AR tienen que ver con la relaci\u00f3n entre las tablas en base de datos. En base de datos tendremos las relaciones: one-to-many: entre tbl_user y tbl_post por ejemplo. ono-to-one: entre tbl_user y tbl_profile por ejemplo. many-to-many: entre tbl_category y tbl_post por ejemplo. En el lado AR hay cuatro tipos posibles: BELONGS_TO: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces B belongs_to A. En el ejemplo A=tbl_user y B=tbl_post. HAS_MANY: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces A has_many B. En el ejemplo A=tbl_user y B=tbl_post. HAS_ONE: Si la relaci\u00f3n entre las tablas A y B es ono-to-one. Es un caso especial de HAS_MANY en el que A tiene al menos un B. En el ejemplo A=tbl_user y B=tbl_profile. MANY_MANY: Si la relaci\u00f3n entre las tablas A y B es many-to-many. Se necesita una tabla intermedia que descomponga la relaci\u00f3n en dos relaciones 1:n con la tabla intermedia (C). En el ejemplo A=tbl_post, B=tbl_category y C=tbl_post_category. Estas relaciones se declaran en el m\u00e9todo CActiveRecord::relations() definiendo un array en el que cada elemento representa una relaci\u00f3n de la siguiente forma: <?php 'VarName' => array ( 'RelationType' , 'ClassName' , 'ForeignKey' , ... opciones adicionales ) donde VarName es el nombre de la relaci\u00f3n, RelationType indica el tipo de relaci\u00f3n (se pueden aprovechar las siguientes constantes: self::BELONGS_TO , self::HAS_ONE , self::HAS_MANY y self::MANY_MANY ), ClassName es el nombre de la clase AR con que se est\u00e1 estableciendo la relaci\u00f3n y ForeignKey indica la foreign key implicada en la relaci\u00f3n. Las opciones adicionales se explicar\u00e1n en la secci\u00f3n Opciones de consultas relacionales . A continuaci\u00f3n se definen las relaciones en los modelos User y Post: <?php class Post extends CActiveRecord { //...... public function relations () { return array ( 'author' => array ( self :: BELONGS_TO , 'User' , 'author_id' ), 'categories' => array ( self :: MANY_MANY , 'Category' , 'tbl_post_category(post_id, category_id)' ), ); } } class User extends CActiveRecord { //...... public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } } Consultas relacionales \u00b6 Por defecto se aplica el sistema lazy loading en los campos de un modelo que se refieren a una relaci\u00f3n. Para forzar un eager loading hay que preceder los m\u00e9todos de b\u00fasqueda con el m\u00e9todo with() . Por ejemplo: <?php $posts = Post :: model () -> with ( 'author' ) -> findAll (); Se pueden especificar varios nombres de relaciones separados por comas en el m\u00e9todo with() o pasarle un CDbCriteria::with al m\u00e9todo de b\u00fasqueda. Por ejemplo: <?php $criteria = new CDbCriteria ; $criteria -> with = array ( 'author.profile' , 'author.posts' , 'categories' , ); $posts = Post :: model () -> findAll ( $criteria ); Consultas relacionales sin obtener los modelos relacionados \u00b6 En ocasiones nos interesa hacer una consulta usando una relaci\u00f3n pero no queremos los datos de los propios modelos relacionados. Por ejemplo si quisi\u00e9ramos los usuarios que tienen post's en estado published=1, pero no los post's en s\u00ed, podr\u00edamos hacer lo siguiente: <?php $users = User :: model () -> with ( array ( 'posts' => array ( 'select' => false , 'joinType' => 'INNER JOIN' , 'condition' => 'posts.published=1' , ), )) -> findAll (); Opciones de consultas relacionales \u00b6 Las opciones adicionales que se pueden indicar cuando se definen las relaciones que se mencionaban en el apartado Declaraci\u00f3n de relaciones son las siguientes (consultar su funcionamiento en la documentaci\u00f3n oficial ): select condition params on order with joinType alias together join group having index scopes Adicionalmente las siguientes opciones est\u00e1n disponibles para ciertas relaciones durante el lazy loading (consultar su funcionamiento en la documentaci\u00f3n oficial ): limit offset through Ejemplo de uso: <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'order' => 'posts.create_time DESC' , 'with' => 'categories' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } } Desambiguaci\u00f3n de columnas \u00b6 En una consulta relacional con AR, el alias para la tabla primaria es t , mientras que el alias de la tabla relacionada se corresponde con el nombre de la relaci\u00f3n. Por ejemplo: <?php $posts = Post :: model () -> with ( 'comments' ) -> findAll ( array ( 'order' => 't.create_time, comments.create_time' )); Opciones din\u00e1micas en consultas relacionales \u00b6 Se pueden sobreescribir las opciones que se definen en las relaciones indicando otras mediante el m\u00e9todo with() o con la opci\u00f3n adicional with . Rendimiento de consultas relacionales \u00b6 Existe una opci\u00f3n que permite elegir entre dos m\u00e9todos para realizar consultas eager loading . Se trata de la opci\u00f3n together que determina si se realizar\u00e1 una \u00fanica consulta con el join de las tablas relacionadas (m\u00e1s rendimiento) o una consulta por cada tabla (menos informaci\u00f3n redundante). Consultar documentaci\u00f3n completa . Consulta estad\u00edstica \u00b6 Existe un tipo de relaci\u00f3n especializado en obtener datos estad\u00edsticos entre tablas. S\u00f3lo se puede aplicar sobre tablas relacionadas con HAS_MANY y MANY_MANY y el tipo de relaci\u00f3n se designa con self::STAT . Por ejemplo: <?php class Post extends CActiveRecord { public function relations () { return array ( 'commentCount' => array ( self :: STAT , 'Comment' , 'post_id' ), 'categoryCount' => array ( self :: STAT , 'Category' , 'post_category(post_id, category_id)' ), ); } } Por defecto la consulta estad\u00edstica consistir\u00e1 en un COUNT , pero podemos realizar ajustes con las siguientes opciones adicionales al definir la relaci\u00f3n: select : la expresi\u00f3n estad\u00edstica. Por defecto es COUNT(*) , lo que realiza un conteo de los objetos hijos. defaultValue : el valor que se asignar\u00e1 a los registros que no reciban un resultado de la consulta estad\u00edstica. Por ejemplo, si un post no tiene comentarios, commentCount recibir\u00e1 este valor. Por defecto vale 0. condition : la cl\u00e1usula WHERE. Su valor por defecto es vac\u00edo. params : los par\u00e1metros a asociar a la sentencia SQL generada. Debe ser un array de parejas clave-valor. order : la cl\u00e1usula ORDER. Su valor por defecto es vac\u00edo. group : la cl\u00e1usula GROUP BY. Su valor por defecto es vac\u00edo. having : la cl\u00e1usula HAVING. Su valor por defecto es vac\u00edo. Consulta relacional con named scopes \u00b6 Se pueden combinar las consultas relacionales con los named scopes aplicando estos \u00faltimos tanto sobre la tabla principal como sobre las relacionadas. En el primer caso se har\u00eda combinando named scopes y consulta relacional en cadena de la siguiente forma: <?php $posts = Post :: model () -> published () -> recently () -> with ( 'comments' ) -> findAll (); Aplicar named scopes a los modelos relacionados se hace indicandolos detr\u00e1s de la relaci\u00f3n separ\u00e1ndolos con \":\". Por ejemplo: <?php $posts = Post :: model () -> with ( 'comments:recently:approved' ) -> findAll (); Los named scopes pueden forzarse en la propia declaraci\u00f3n de la relaci\u00f3n del siguiente modo: <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'with' => 'comments:approved' ), ); } } Si los named scopes del objeto relacionados admiten par\u00e1metros, pueden pasarse en la consulta relacional de la siguiente forma: <?php $users = User :: model () -> findAll ( array ( 'with' => array ( 'posts' => array ( 'scopes' => array ( 'rated' => 5 , ), ), ), )); Consulta relacional con through \u00b6 Se definen as\u00ed: <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'key1' => 'key2' ), 'through' => 'posts' ) donde en array('key1'=>'key2'): key1 es una clave definida en la relaci\u00f3n especificada en through ( posts en este caso) key2 es una clave definida en el modelo al que esta relaci\u00f3n apunta ( Comment en este caso) through puede utilizarse en relaciones HAS_ONE y HAS_MANY . Para ilustrar el caso HAS_MANY se utilizar\u00e1 el siguiente modelo de datos: Por ejemplo, para obtener los usuarios de un grupo en concreto: <?php class Group extends CActiveRecord { //... public function relations () { return array ( 'roles' => array ( self :: HAS_MANY , 'Role' , 'group_id' ), 'users' => array ( self :: HAS_MANY , 'User' , array ( 'user_id' => 'id' ), 'through' => 'roles' ), ); } } Un caso m\u00e1s complicado ser\u00eda obtener todos los comentarios de todos los usuarios de un grupo en concreto. Se lograr\u00eda a\u00f1adiendo a las relaciones anteriores la siguiente: <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'id' => 'user_id' ), 'through' => 'users' ), Una variante del HAS_MANY through es cuando el modelo origen y destino es el mismo. Por ejemplo, dado el siguiente modelo de datos: Podr\u00edamos definir las siguientes relaciones: <?php class User extends CActiveRecord { //... public function relations () { return array ( 'mentorships' => array ( self :: HAS_MANY , 'Mentorship' , 'teacher_id' , 'joinType' => 'INNER JOIN' ), 'students' => array ( self :: HAS_MANY , 'User' , array ( 'student_id' => 'id' ), 'through' => 'mentorships' , 'joinType' => 'INNER JOIN' ), ); } } De manera que podr\u00edamos obtener los alumnos que son ense\u00f1ados por un profesor (alumnos y profesor son ambos usuarios): <?php $teacher = User :: model () -> findByPk ( 1 ); $students = $teacher -> students ; Para ilustrar el caso de HAS_ONE through nos basaremos en: Por ejemplo, obtener la direcci\u00f3n de un usuario cuando \u00e9sta est\u00e1 relacionada con el usuario por medio de un profile: <?php class User extends CActiveRecord { //... public function relations () { return array ( 'profile' => array ( self :: HAS_ONE , 'Profile' , 'user_id' ), 'address' => array ( self :: HAS_ONE , 'Address' , array ( 'id' => 'profile_id' ), 'through' => 'profile' ), ); } } Tabla de relaci\u00f3n MANY_MANY con datos adicionales \u00b6 Para el caso en que la tabla intermedia que desarrolla una relaci\u00f3n MANY_MANY entre otras dos tablas contenga campos con informaci\u00f3n adicional a los dos foreign keys que apuntan a las dos tablas, seguir este art\u00edculo del wiki y \u00e9ste del foro (ignorar las respuestas m\u00e1s viejas que son de cuando no exist\u00eda el mecanismo through ). Cosas interesantes \u00b6 Application Singleton \u00b6 Yii:app() Sirve como almac\u00e9n central de ajustes de configuraci\u00f3n a nivel de aplicaci\u00f3n ( fuente ). A\u00f1adir jQuery \u00b6 A\u00f1adir jQuery a una p\u00e1gina. C\u00f3digo visto en un action, pero tambi\u00e9n se podr\u00eda insertar directamente en la vista en que vaya a ser necesario: <?php // Adding jQuery to the view page. Yii :: app () -> getClientScript () -> registerCoreScript ( 'jquery' ); Filtrado referido en BootGridView o CGridView \u00b6 Imaginemos el modelo empleado asociado en n:1 al modelo departamento. En el listado de empleados queremos mostrar el departamento al que pertenece y poder filtrar por el nombre del mismo (no por el ID de departamento como ocurrir\u00eda si indic\u00e1ramos el campo departamento_id que pertenece a empleado). Ver ejemplo en el filtrado del campo xproduct.product en admin.php del modelo Product en R135 del repositorio svn+ssh://edumoreno@192.168.2.250/var/lib/subversion/gestoo/trunk .","title":"Yii"},{"location":"desarrollo/yii.html#yii-framework","text":"","title":"Yii Framework"},{"location":"desarrollo/yii.html#enlaces","text":"A probar cuando tenga un error :exclamation: Creating a dependent dropdown Search() & Filter of a relations field through CGridView Handling Related Models in Yii Forms Learning Yii Framework Series Yii for beginners How to Change datetime format displayed on the View Tabla Master Detail en Yii GridView de Yii Framework Dynamic parent and child CGridCiew on single view. Using $.ajax to update child gridview via controller (with MANY_MANY relation), after row in parent gridview was clicked Search CGridView, related tables, dates and datepicker Yii Framework en Espa\u00f1ol - Foro Multimodelform dropdown con Ajax Ejecutar acci\u00f3n en multimodelform con dropdown Usando Ajax en Yii, Facil Class Level Methods vs Static Methods Accessing data in a join table with the related models (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Selecting join table with mant to many? (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Special $variables in CGridView and CListView Custom Page Size for CGridView Using CButtonColumn to customize buttons in CGridView Understanding Virtual Attributes and get/set methods :exclamation: Using standard filters in CGridView custom fields Searching and sorting by related model in CGridView :exclamation: Reference: Model rules validation :exclamation: Displaying, sorting and filtering HasMany & ManyMany relations in CGridView :exclamation: Tutorial Yii Framework 1. INSTALANDO YII Y PRIMERA APLICACI\u00d3N 2. CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS 3. LENGUAJE Y VISTA POR DEFECTO 4. MODIFICANDO EL MEN\u00da 5. AUTENTICACI\u00d3N DE USUARIOS 6. CLAVES FOR\u00c1NEAS EN VISTAS 7. VALIDANDO LOS FORMULARIOS 8. ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID 9. FECHAS CON CJUIDATEPICKER 10. B\u00daSQUEDAS POR FECHAS CON SYDATECOLUMN 11. EXPORTAR DEL CGRIDVIEW A PDF 12. REPORTES A PARTIR DE UNA B\u00daSQUEDA EN EL GRID 13. COMBOS DEPENDIENTES 14. CAMPO CON AUTOCOMPLETAR 15. NO MOSTRAR INDEX.PHP EN LAS URL 16. GUARDAR AUTOM\u00c1TICAMENTE USUARIO Y FECHA DE CREACI\u00d3N Y MODIFICACI\u00d3N 17. HACER FORMULARIO PARA MULTIPLES MODELOS 18. CAMPOS ENMASCARADOS EN FORMULARIO","title":"Enlaces"},{"location":"desarrollo/yii.html#extensiones","text":"bootstrap : Bootstrap brings together Yii and Bootstrap, Twitter's HTML, CSS and JavaScript toolkit. eupdatedialog : EUpdateDialog is an extension for Yii framework that allows to run controller actions using jQuery UI dialog. multimodelform : This extension allows to work with multiple records and different models in a edit form. enexmo : ENexmo Library allows Yii programmers to use the Restful API offered by Mobile Messaging provider Nexmo . ejuitimepicker : This extension is a wrapper for Timepicker addon which adds a timepicker to jQuery UI Datepicker. datetimepicker : Datetime picker input widget, based on Jui-timepicker-addon. Envio email con Emailer A module to build dependents dropdown save-relations-ar-behavior : Save HasMany and ManyMany relational active records along with the main model.","title":"Extensiones"},{"location":"desarrollo/yii.html#know-how","text":"","title":"Know How"},{"location":"desarrollo/yii.html#instalacion","text":"","title":"Instalaci\u00f3n"},{"location":"desarrollo/yii.html#apache","text":"Para ocultar el script de inicio ( index.php ) de la URL se puede configurar un fichero .htaccess como sigue: RewriteEngine on # if a directory or a file exists, use it directly RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d # otherwise forward it to index.php RewriteRule . index.php","title":"Apache"},{"location":"desarrollo/yii.html#fundamentos","text":"","title":"Fundamentos"},{"location":"desarrollo/yii.html#development-mode","text":"En el fichero index.php el modo DEBUG se ajusta en la linea siguiente: <?php defined ( 'YII_DEBUG' ) or define ( 'YII_DEBUG' , true ); Ponerlo a false en Producci\u00f3n ( fuente ). El componente log admite como una de las rutas de log la clase CWebLogRoute que muestra un log detallado de la ejecuci\u00f3n de la p\u00e1gina en la parte inferior de la misma. Para activarlo incluir la clase en el array de routes del componente log , por ejemplo: <?php 'log' => array ( 'class' => 'CLogRouter' , 'routes' => array ( array ( 'class' => 'CFileLogRoute' , 'levels' => 'error, warning' , ), array ( 'class' => 'CWebLogRoute' , ), ), ), Cuando el desarrollo est\u00e9 avanzado o al menos en una fase en la que no se esperen muchos cambios en el esquema de base de datos, se puede mejorar la velocidad del componente db dando un valor mayor que 0 a la propiedad CDbConnection::schemaCachingDuration ( fuente ). Desactivar el m\u00f3dulo gii en el fichero de configuraci\u00f3n cuando la aplicaci\u00f3n est\u00e9 en Producci\u00f3n. Poner a false el par\u00e1metro enableParamLogging del componente db en el fichero de configuraci\u00f3n de la aplicaci\u00f3n.","title":"Development mode"},{"location":"desarrollo/yii.html#application","text":"Si no se especifica, el controlador predeterminado de una aplicaci\u00f3n se llama \"site\" (SiteController), pero se puede especificar as\u00ed en el fichero de configuraci\u00f3n de la aplicaci\u00f3n ( fuente ): <?php array ( 'defaultController' => 'site' , ) Los componentes de aplicaci\u00f3n se activan por defecto si son definidos en el fichero de configuraci\u00f3n de la aplicaci\u00f3n, pero pueden ser desactivados asignando false al atributo enabled ( fuente ). Los componentes de aplicaci\u00f3n se suelen incorporar de un paquete incluido con la instalaci\u00f3n de Yii. La lista completa de componentes de aplicaci\u00f3n de Yii puede consultarse aqu\u00ed . La aplicaci\u00f3n genera un log en <AppRoot>/protected/runtime/application.log .","title":"Application"},{"location":"desarrollo/yii.html#controller","text":"Si no se especifica la acci\u00f3n a ejecutar de un controller, se ejecuta la acci\u00f3n predeterminada que es index . Puede cambiarse ajustando la variable de instancia p\u00fablica CController:defaultAction ( fuente ). La ruta de los controllers es relativa al directorio <AppRoot>/protected/controllers ( fuente ). Si la aplicaci\u00f3n est\u00e1 organizada en m\u00f3dulos, la ruta completa de las acciones ser\u00e1 del estilo moduleID/controllerID/actionID ( fuente ). La instanciaci\u00f3n de controllers sigue esta secuencia ( fuente ): Si se ha especificado CWebApplication::catchAllRequest (se usa normalmente para poner la aplicaci\u00f3n en modo mantenimiento). Si el ID del controller se encuentra en el mapa definido en CWebApplication::controllerMap . Finalmente se utiliza la convenci\u00f3n comentada anteriormente que enlaza el ID del controller con las clases del directorio <AppRoot>/protected/controllers . Las acciones se pueden escribir como clases aut\u00f3nomas en lugar de como m\u00e9todos de un controller ( fuente ). Los filtros se pueden definir como m\u00e9todos de los controllers en cuyo caso deben empezar por filter o como clases independientes descendientes de CFilter ( fuente ). Los filtros se pueden mapear en la funci\u00f3n filters() de los controllers. Se pueden definir listas negras y listas blancas de acciones sobre las que se aplicar\u00e1 la lista de filtros ( fuente ).","title":"Controller"},{"location":"desarrollo/yii.html#view","text":"La ruta de las vistas es relativa al directorio <AppRoot>/protected/views ( fuente ). Dentro de las vistas se puede acceder al controller mediante $this . Adicionalmente se pueden pasar variables concretas desde el controller al invocar la vista de la siguiente manera: <?php $this -> render ( 'edit' , array ( 'var1' => $value1 , 'var2' => $value2 , )); Por defecto se aplica a las vistas el layout definido en <AppRoot>/protected/views/layouts/main.php . Esto puede cambiarse a nivel de aplicaci\u00f3n en CWebApplication::layout o a nivel de controller en CController::layout . Si se quiere renderizar una vista sin aplicar layout, en lugar del m\u00e9todo CController::render() hay que invocar CController:renderPartial() ( fuente ).","title":"View"},{"location":"desarrollo/yii.html#component","text":"Los componentes se utilizan para encapsular funcionalidad. Soportan propiedades, eventos y behaviors. Estos \u00faltimos se utilizan para implementar herencia m\u00faltiple ( fuente ).","title":"Component"},{"location":"desarrollo/yii.html#module","text":"Un m\u00f3dulo es una unidad de c\u00f3digo autocontenida que engloba modelos, vistas, controllers y componentes. Es en cierto modo una aplicaci\u00f3n, s\u00f3lo que no puede ser desplegada por separado. Los m\u00f3dulos se pueden anidar en varios niveles. De la misma forma que una aplicaci\u00f3n puede contener m\u00f3dulos, \u00e9stos pueden contener a su vez otros m\u00f3dulos. Se configuran de la misma forma con el fichero de configuraci\u00f3n de la aplicaci\u00f3n, indicando la propiedad modules en el m\u00f3dulo contenedor.","title":"Module"},{"location":"desarrollo/yii.html#path-alias-e-importacion-de-clases","text":"De forma predeterminada est\u00e1n definidos los siguientes path alias: system: <YiiRoot>/framework zii: <YiiRoot>/framework/zii application: <AppRoot>/protected webroot: <AppRoot> ext: <AppRoot>/protected/extensions Para importar clases mejor utilizar Yii:import('path_alias_de_la_clase') que el include , require o require_once de PHP ( fuente ). Se pueden importar todas las clases de un directorio en bloque con una orden del estilo Yii:import('path_alias_del_directorio.*') . Las clases del propio framework est\u00e1n pre-importadas, por lo que no es necesario hacerlo.","title":"Path Alias e importaci\u00f3n de clases"},{"location":"desarrollo/yii.html#convenciones","text":"","title":"Convenciones"},{"location":"desarrollo/yii.html#del-framework","text":"Si no se especifica en la URL el ID del action se ejecutar\u00e1 el action predeterminada. Si no se cambia (con CController::defaultAction ) se ejecutar\u00e1 el action index . Si no se especifica en la URL el ID del controller se ejecutar\u00e1 el controller predeterminado. Si no se cambia (con CWebApplication::defaultController ) se ejecutar\u00e1 el controller site .","title":"Del framework"},{"location":"desarrollo/yii.html#nomenclatura-para-codigo","text":"Utilizar notaci\u00f3n camelCase. Comenzar las clases con una letra may\u00fascula. La letra C se usa en las clases del framework => Se recomienda utilizar otra ( T por ejemplo). Comenzar las variables privadas de clase con underscore. Terminar las clases controller con Controller . Dentro de una clase controller, los m\u00e9todos de action comenzarlos con action . Terminar las clases de action con Action .","title":"Nomenclatura para c\u00f3digo"},{"location":"desarrollo/yii.html#nomenclatura-para-bases-de-datos","text":"Nombres de tablas y campos en min\u00fasculas. Palabras separadas con underscore (por ejemplo: direccion_cliente). Nombres de tablas en singular. Nombres de tablas con prefijo propio de la aplicaci\u00f3n (por ejemplo: gestoo_clientes).","title":"Nomenclatura para bases de datos"},{"location":"desarrollo/yii.html#formularios","text":"","title":"Formularios"},{"location":"desarrollo/yii.html#creando-el-modelo","text":"","title":"Creando el Modelo"},{"location":"desarrollo/yii.html#validacion","text":"Las reglas de validaci\u00f3n se definen en la funci\u00f3n rules() del Model componiendo un array en el que cada elemento se define como sigue: <?php array ( 'ListaAtributos' , 'Validador' , 'on' => 'ListaEscenarios' , ... opciones adicionales ) donde ListaAtributos es una lista separada por comas de nombres de atributos del Model; Validador especifica el tipo de validaci\u00f3n; el par\u00e1metro on es opcional y especifica la lista de escenarios en las que se aplica la regla; las opciones adicionales son pares clave-valor para inicializar propiedades de los validadores usados. Hay tres tipos de validadores: Validador puede ser el nombre de un m\u00e9todo de la clase Modelo. El m\u00e9todo tiene que tener la siguiente forma: <?php /** * @param string $attribute the name of the attribute to be validated * @param array $params options specified in the validation rule */ public function ValidatorName ( $attribute , $params ) { ... } Validador puede ser el nombre de una clase de validaci\u00f3n. En este caso cuando la regla es aplicada, una instancia de la clase de validaci\u00f3n se crea y se inicializa con las opciones adicionales. La clase de validaci\u00f3n debe extender de CValidator . Validador puede ser una de las clases de validaci\u00f3n predefinidas en Yii ( lista ).","title":"Validaci\u00f3n"},{"location":"desarrollo/yii.html#asignacion-de-atributos","text":"Las asignaciones de atributos entre formulario y modelo se pueden hacer en bloque por medio de la funci\u00f3n de PHP $_POST[<clase_modelo>] . S\u00f3lo se asignan los atributos considerados seguros, es decir los que tienen asociada una regla de validaci\u00f3n. Hay que tener en cuenta que las reglas de validaci\u00f3n se pueden asociar a escenarios por lo que se asignar\u00e1n unos atributos u otros seg\u00fan el escenario declarado al instanciar el modelo. Por ejemplo: <?php // en escenario login $model = new User ( 'login' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; // en escenario register $model = new User ( 'register' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; Es importante recordar que las reglas de validaci\u00f3n se usan para chequear los datos introducidos por los usuarios y no los datos generados por c\u00f3digo (timestamps o primary keys). Por lo tanto no hay que definir reglas de validaci\u00f3n en los atributos que no esperamos que sean introducidos por el usuario . Por ejemplo, si marcamos como seguro el atributo id de un modelo (por medio del validador safe por ejemplo), aunque inicialmente no incluyamos el campo en el formulario, un atacante podr\u00eda enviarlo y la asignaci\u00f3n en bloque sobre el modelo lo incluir\u00eda y podr\u00eda permitir cambiar el ID del registro en base de datos.","title":"Asignaci\u00f3n de atributos"},{"location":"desarrollo/yii.html#provocando-la-validacion","text":"Una vez que el modelo recibe los atributos (normalmente procedentes del usuario por medio de un formulario) la validaci\u00f3n se puede desencadenar invocando el m\u00e9todo CModel::validate() . Retornar\u00e1 true o false en funci\u00f3n del resultado. En los modelos tipo CActiveRecord de forma predeterminada se desencadena tambi\u00e9n al invocar el m\u00e9todo save() . Antes de invocar la validaci\u00f3n se puede indicar el escenario (ajustando la propiedad scenario del modelo) para elegir el conjunto de reglas de validaci\u00f3n que se desean. Una vez que la validaci\u00f3n se ha hecho, los posibles errores se almacenan en el propio modelo. Se pueden obtener con las funciones CModel::getErrors() (devuelve todos los errores) y CModel::getError() (devuelve s\u00f3lo el primero).","title":"Provocando la validaci\u00f3n"},{"location":"desarrollo/yii.html#recogiendo-varios-modelos-a-la-vez","text":"Para recoger varios modelos o registros de un tipo simult\u00e1neamente (o entrada tabular) necesitamos crear o rellenar un array de instancias del modelo, dependiendo de si queremos insertar o modificar registros. Luego recogeremos los datos de entrada del usuario de la variable $_POST y los asignaremos a cada modelo. Cuando recog\u00edamos un solo modelo hac\u00edamos $_POST[<clase_modelo>] , ahora haremos $_POST[<clase_modelo>][$i] . El action de modificaci\u00f3n tendr\u00e1 el siguiente aspecto: <?php public function actionBatchUpdate () { // retrieve items to be updated in a batch mode // assuming each item is of model class 'Item' $items = $this -> getItemsToUpdate (); if ( isset ( $_POST [ 'Item' ])) { $valid = true ; foreach ( $items as $i => $item ) { if ( isset ( $_POST [ 'Item' ][ $i ])) $item -> attributes = $_POST [ 'Item' ][ $i ]; $valid = $item -> validate () && $valid ; } if ( $valid ) // all items are valid // ...do something here } // displays the view to collect tabular input $this -> render ( 'batchUpdate' , array ( 'items' => $items )); } y la vista incluir\u00e1 algo como: <div class=\"form\"> <?php echo CHtml :: beginForm (); ?> <table> <tr><th>Name</th><th>Price</th><th>Count</th><th>Description</th></tr> <?php foreach ( $items as $i => $item ) : ?> <tr> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]name\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]price\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]count\" ); ?> </td> <td> <?php echo CHtml :: activeTextArea ( $item , \"[ $i ]description\" ); ?> </td> </tr> <?php endforeach ; ?> </table> <?php echo CHtml :: submitButton ( 'Save' ); ?> <?php echo CHtml :: endForm (); ?> </div><!-- form -->","title":"Recogiendo varios modelos a la vez"},{"location":"desarrollo/yii.html#form-builder","text":"Yii incluye un sistema de generaci\u00f3n de formularios din\u00e1mico. Se basa en el objeto CForm . El uso se basa en crear el objeto, pasarle un array de configuraci\u00f3n (se suele mantener en un fichero aparte) y renderizarlo desde una vista. Si se definen formularios anidados (como se ve en la documentaci\u00f3n ), el formulario renderizado contendr\u00e1 \u00fanicamente una etiqueta form HTML dentro de la cual los campos se identificar\u00e1n con nombres tipo Model[atributo] , donde Model se corresponder\u00e1 con uno de los modelos asociados a uno de los sub-forms. Cuando se utiliza el Form Builder la asignaci\u00f3n de atributos del formulario al modelo se puede gestionar desde el propio objeto CForm. Para ello existe el m\u00e9todo loadData() . Esta carga se hace autom\u00e1ticamente cuando es necesario, como por ejemplo si invocamos el m\u00e9todo validate() de CForm que valida los modelos asociados. Documentaci\u00f3n completa aqu\u00ed .","title":"Form Builder"},{"location":"desarrollo/yii.html#base-de-datos","text":"","title":"Base de Datos"},{"location":"desarrollo/yii.html#objetos-dao","text":"El modelo de acceso a bases de datos de Yii se basa en los siguientes objetos: CDbConnection: Representa una conexi\u00f3n a una base de datos. Normalmente se configura como componente de la aplicaci\u00f3n. Es interesante aprovechar la funcionalidad de prefijo de tablas por medio de la propiedad CDbConnection::tablePrefix . Si se utiliza, luego en las consultas hay que indicar las tablas sin el prefijo (que queda configurado en esta propiedad) y entre dobles llaves (por ejemplo: {{usuario}}). CDbCommand: Representa una sentencia SQL para ejecutar contra una base de datos. Se puede crear mediante el m\u00e9todo createCommand() del objeto CDbConnection. Se ejecuta con los m\u00e9todos query() para selects y execute() para el resto. query() devuelve un CDbDataReader . Existen cuatro variantes de query() que devuelven datos directamente: queryAll(): Devuelve un array con todos los registros del resultado de la consulta. queryRow(): Devuelve el primer registro del resultado de la consulta. queryColumn(): Devuelve un array con el valor de la primera columna del resultado de la consulta. queryScalar(): Devuelve el primer campo del primer registro del resultado de la consulta. \u00datil para una consulta tipo count. CDbDataReader: Representa un conjunto de registros que se lee s\u00f3lo hacia adelante resultado de una consulta. Normalmente el objeto se recorre ejecutando sucesivamente el m\u00e9todo read() hasta que devuelve false . A continuaci\u00f3n se muestran tres formas de extraer los datos de CDbDataReader: <?php $dataReader = $command -> query (); // calling read() repeatedly until it returns false while (( $row = $dataReader -> read ()) !== false ) { ... } // using foreach to traverse through every row of data foreach ( $dataReader as $row ) { ... } // retrieving all rows at once in a single array $rows = $dataReader -> readAll (); CDbTransaction: Representa una transacci\u00f3n en la base de datos. A continuaci\u00f3n se muestra una estructura t\u00edpica transaccional con este objeto: <?php $transaction = $connection -> beginTransaction (); try { $connection -> createCommand ( $sql1 ) -> execute (); $connection -> createCommand ( $sql2 ) -> execute (); //.... other SQL executions $transaction -> commit (); } catch ( Exception $e ) { // an exception is raised if a query fails $transaction -> rollBack (); }","title":"Objetos DAO"},{"location":"desarrollo/yii.html#binding-de-parametros","text":"Para evitar ataques de inyecci\u00f3n de SQL y para mejorar el rendimiento de consultas que se repiten habitualmente, se recomienda parametrizar las consultas con los m\u00e9todos CDbCommand::bindParam() y CDbCommand::bindValue() . Ejemplo: <?php // una query con dos placeholders \":username\" and \":email\" $sql = \"INSERT INTO tbl_user (username, email) VALUES(:username,:email)\" ; $command = $connection -> createCommand ( $sql ); $command -> bindParam ( \":username\" , $username , PDO :: PARAM_STR ); // reemplaza el placeholder \":username\" con el valor de la variable $username $command -> bindParam ( \":email\" , $email , PDO :: PARAM_STR ); // reemplaza el placeholder \":email\" con el valor de la variable $email $command -> execute (); // inserta otra fila con un nuevo conjunto de valores $command -> bindParam ( \":username\" , $username2 , PDO :: PARAM_STR ); $command -> bindParam ( \":email\" , $email2 , PDO :: PARAM_STR ); $command -> execute ();","title":"Binding de par\u00e1metros"},{"location":"desarrollo/yii.html#binding-de-variables","text":"Se pueden asociar variables PHP a columnas de una query de manera que tomen valor autom\u00e1ticamente cada vez que leamos el siguiente registro. Por ejemplo: <?php $sql = \"SELECT username, email FROM tbl_user\" ; $dataReader = $connection -> createCommand ( $sql ) -> query (); $dataReader -> bindColumn ( 1 , $username ); // asocia la primera columna (username) con la variable $username $dataReader -> bindColumn ( 2 , $email ); // asocia la segunda columna (email) con la variable $email while ( $dataReader -> read () !== false ) { // $username y $email contienen los valores correspondientes a la fila en curso }","title":"Binding de variables"},{"location":"desarrollo/yii.html#query-builder","text":"Existe un conjunto de herramientas para construir sentencias SQL de una manera orientada a objeto. Como ventajas, permite construir sentencias de forma program\u00e1tica, evita problemas de sintaxis o ambig\u00fcedades, previene ataques de inyecci\u00f3n de SQL al usar binding de par\u00e1metros y ofrece abstracci\u00f3n de base de datos lo que facilitar\u00eda una migraci\u00f3n m\u00e1s adelante. Consultar la documentaci\u00f3n completa aqu\u00ed .","title":"Query Builder"},{"location":"desarrollo/yii.html#active-record","text":"Active Record (AR) es una popular t\u00e9cnica de mapeo Objeto-Relacional (ORM) que permite manipular una tabla de manera orientada a objeto. De forma din\u00e1mica se genera una entidad modelo a partir de una tabla con pr\u00e1cticamente nada de c\u00f3digo. Se recomienda que todos los nombres de los campos de las tablas est\u00e9n en min\u00fasculas para no tener problemas con el cambio de gestor de base de datos, ya que algunos son sensibles a may\u00fasculas y otros no.","title":"Active Record"},{"location":"desarrollo/yii.html#creando-registros","text":"Simplemente creando un objeto AR, asignando valores a sus propiedades y llamando al m\u00e9todo CActiveRecord::save() . Para asignar expresiones SQL a algunos de los campos o propiedades de los objetos AR, hay que utilizar el objero CDbExpression , por ejemplo: <?php $post = new Post ; $post -> create_time = new CDbExpression ( 'NOW()' ); // $post->create_time='NOW()'; no funcionar\u00eda porque 'NOW()' ser\u00eda tratado como cadena $post -> save ();","title":"Creando registros"},{"location":"desarrollo/yii.html#recuperando-registros","text":"Para recuperar un solo registro tenemos los m\u00e9todos: <?php $post = Post :: model () -> find ( $condition , $params ); // encuentra la primera fila que satisface la condici\u00f3n especificada $post = Post :: model () -> findByPk ( $postID , $condition , $params ); // encuentra la fila con el primary key especificado $post = Post :: model () -> findByAttributes ( $attributes , $condition , $params ); // encuentra la fila con los valores de los atributos especificados $post = Post :: model () -> findBySql ( $sql , $params ); // encuentra la primera fila usando la SQL especificada Si no se encuentra ning\u00fan registro, el resultado ser\u00e1 null . Para recuperar varios registros tenemos los m\u00e9todos: <?php $posts = Post :: model () -> findAll ( $condition , $params ); // encuentra todas las filas que satisfacen la condici\u00f3n especificada $posts = Post :: model () -> findAllByPk ( $postIDs , $condition , $params ); // encuentra todas las filas con el primary key especificado $posts = Post :: model () -> findAllByAttributes ( $attributes , $condition , $params ); // encuentra todas las filas con los valores de los atributos especificados $posts = Post :: model () -> findAllBySql ( $sql , $params ); // encuentra todas las filas usando la SQL especificada Adicionalmente existen los siguientes m\u00e9todos: <?php $n = Post :: model () -> count ( $condition , $params ); // obtiene el n\u00famero de filas que satisfacen la condici\u00f3n especificada $n = Post :: model () -> countBySql ( $sql , $params ); // obtiene el n\u00famero de filas que se obtendr\u00edan con las SQL especificada $exists = Post :: model () -> exists ( $condition , $params ); // comprueba si existe al menos una fila que satisface la condici\u00f3n especificada En todos los casos, en lugar de la pareja de strings $condition y $params , podemos entregar un objeto de tipo CDbCriteria m\u00e1s cosas adem\u00e1s de una cl\u00e1usula WHERE. Alternativamente a pasar un CDbCriteria podemos pasar un array con las propiedades de permitan construir este objeto din\u00e1micamente.","title":"Recuperando registros"},{"location":"desarrollo/yii.html#actualizando-registros","text":"Modificando un AR reci\u00e9n obtenido y guardando se producir\u00e1 una actualizaci\u00f3n en base de datos: <?php $post = Post :: model () -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); // guarda el cambio en la base de datos Cuando se guarda (m\u00e9todo save() ) se invoca autom\u00e1ticamente la validaci\u00f3n (a no ser que se pase el argumento false). Si el registro es nuevo se har\u00e1 un insert en lugar de un update. Se puede interrogar al modelo si estamos en uno u otro caso por medio del m\u00e9todo CActiveRecord::isNewRecord() . Se puede actualizar un AR que no se haya cargado previamente con los siguientes m\u00e9todos: <?php Post :: model () -> updateAll ( $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n especificada Post :: model () -> updateByPk ( $pk , $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n y la primary key especificadas Post :: model () -> updateCounters ( $counters , $condition , $params ); // actualiza las columnas tipo counter en las filas que satisfacen la condici\u00f3n especificada","title":"Actualizando registros"},{"location":"desarrollo/yii.html#borrando-registros","text":"Para borrar un solo registro utilizar el m\u00e9todo delete() sobre una instancia AR obtenida previamente: <?php $post = Post :: model () -> findByPk ( 10 ); // localizamos el registro $post -> delete (); // lo borramos. El objeto $post seguir\u00e1 existiendo, pero el registro en base de datos no Tambi\u00e9n se pueden borrar registros sin cargarlos previamente con los siguientes m\u00e9todos: <?php Post :: model () -> deleteAll ( $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada Post :: model () -> deleteByPk ( $pk , $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada y a la primary key","title":"Borrando registros"},{"location":"desarrollo/yii.html#comparando-registros","text":"Usar el m\u00e9todo CActiveRecord::equals() .","title":"Comparando registros"},{"location":"desarrollo/yii.html#adaptacion-de-datos","text":"CActiveRecord proporciona los siguientes m\u00e9todos para adaptar los datos que se intercambian entre modelo y base de datos en uno y otro sentido: beforeValidate y afterValidate: invocados antes y despu\u00e9s de que se efect\u00fae la validaci\u00f3n. beforeSave y afterSave: invocados antes y despu\u00e9s de que se guarde una instancia AR. beforeDelete y afterDelete: invocados antes y despu\u00e9s de que se borre una instancia AR. afterConstruct: invocado en cada instancia AR creada con el operador new . beforeFind: invocado antes de que un m\u00e9todo de b\u00fasqueda de AR se use para efectuar una consulta (por ejemplo find(), findAll()). afterFind: invocado despu\u00e9s de que cada instancia AR es creada como resultado de una b\u00fasqueda.","title":"Adaptaci\u00f3n de datos"},{"location":"desarrollo/yii.html#usando-transacciones","text":"Cada instancia AR contiene una propiedad llamada dbConnection que soporta transacciones de la siguiente forma: <?php $model = Post :: model (); $transaction = $model -> dbConnection -> beginTransaction (); try { // find y save son dos pasos entre los que puede interferir otra petici\u00f3n // encerraremos el intervalo entre ambas \u00f3rdenes en una transacci\u00f3n para asegurar consistencia e integridad $post = $model -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); $transaction -> commit (); } catch ( Exception $e ) { $transaction -> rollBack (); }","title":"Usando transacciones"},{"location":"desarrollo/yii.html#named-scopes","text":"Un named scope representa un criterio de b\u00fasqueda al que le asignamos un nombre y que puede ser combinado con otros named scopes para refinar una b\u00fasqueda de AR's. Se declaran en el m\u00e9todo CActiveRecord::scopes() como pares nombre-criterio de filtrado. Por ejemplo: <?php class Post extends CActiveRecord { //...... public function scopes () { return array ( 'published' => array ( 'condition' => 'status=1' , ), 'recently' => array ( 'order' => 'create_time DESC' , 'limit' => 5 , ), ); } } La declaraci\u00f3n de cada named scope se corresponde con un array que sirve para inicializar un objeto CDbCriteria. Una vez definidos se pueden combinar en las sentencias de b\u00fasqueda como por ejemplo: <?php $posts = Post :: model () -> published () -> recently () -> findAll (); Deben usarse siempre sobre m\u00e9todos class-level, es decir partiendo de ModelName::model()-> , no directamente de ModelName:: . Si se quieren parametrizar hay que definirlos como m\u00e9todos class-level aut\u00f3nomos en lugar de configurarlos en el array de CActiveRecord::scopes . Por ejemplo para parametrizar el named scope recently definido previamente se har\u00eda: <?php public function recently ( $limit = 5 ) { $this -> getDbCriteria () -> mergeWith ( array ( 'order' => 'create_time DESC' , 'limit' => $limit , )); return $this ; } Luego podr\u00edamos llamar: <?php $posts = Post :: model () -> published () -> recently ( 3 ) -> findAll (); Se puede definir un named scope predeterminado. De esta forma ser\u00e1 aplicado autom\u00e1ticamente en todas las consultas. Para ello se define en el m\u00e9todo CActiveRecord::defaultScope sin darle nombre como s\u00ed hab\u00eda que hacer en CActiveRecord::scopes . Por ejemplo: <?php public function defaultScope () { return array ( 'condition' => \"language='\" . Yii :: app () -> language . \"'\" , ); }","title":"Named scopes"},{"location":"desarrollo/yii.html#activerecord-relacional","text":"","title":"ActiveRecord relacional"},{"location":"desarrollo/yii.html#declaracion-de-relaciones","text":"Para ilustrar los ejemplos de esta secci\u00f3n se utilizar\u00e1 el siguiente modelo de datos: Las relaciones entre dos clases AR tienen que ver con la relaci\u00f3n entre las tablas en base de datos. En base de datos tendremos las relaciones: one-to-many: entre tbl_user y tbl_post por ejemplo. ono-to-one: entre tbl_user y tbl_profile por ejemplo. many-to-many: entre tbl_category y tbl_post por ejemplo. En el lado AR hay cuatro tipos posibles: BELONGS_TO: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces B belongs_to A. En el ejemplo A=tbl_user y B=tbl_post. HAS_MANY: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces A has_many B. En el ejemplo A=tbl_user y B=tbl_post. HAS_ONE: Si la relaci\u00f3n entre las tablas A y B es ono-to-one. Es un caso especial de HAS_MANY en el que A tiene al menos un B. En el ejemplo A=tbl_user y B=tbl_profile. MANY_MANY: Si la relaci\u00f3n entre las tablas A y B es many-to-many. Se necesita una tabla intermedia que descomponga la relaci\u00f3n en dos relaciones 1:n con la tabla intermedia (C). En el ejemplo A=tbl_post, B=tbl_category y C=tbl_post_category. Estas relaciones se declaran en el m\u00e9todo CActiveRecord::relations() definiendo un array en el que cada elemento representa una relaci\u00f3n de la siguiente forma: <?php 'VarName' => array ( 'RelationType' , 'ClassName' , 'ForeignKey' , ... opciones adicionales ) donde VarName es el nombre de la relaci\u00f3n, RelationType indica el tipo de relaci\u00f3n (se pueden aprovechar las siguientes constantes: self::BELONGS_TO , self::HAS_ONE , self::HAS_MANY y self::MANY_MANY ), ClassName es el nombre de la clase AR con que se est\u00e1 estableciendo la relaci\u00f3n y ForeignKey indica la foreign key implicada en la relaci\u00f3n. Las opciones adicionales se explicar\u00e1n en la secci\u00f3n Opciones de consultas relacionales . A continuaci\u00f3n se definen las relaciones en los modelos User y Post: <?php class Post extends CActiveRecord { //...... public function relations () { return array ( 'author' => array ( self :: BELONGS_TO , 'User' , 'author_id' ), 'categories' => array ( self :: MANY_MANY , 'Category' , 'tbl_post_category(post_id, category_id)' ), ); } } class User extends CActiveRecord { //...... public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } }","title":"Declaraci\u00f3n de relaciones"},{"location":"desarrollo/yii.html#consultas-relacionales","text":"Por defecto se aplica el sistema lazy loading en los campos de un modelo que se refieren a una relaci\u00f3n. Para forzar un eager loading hay que preceder los m\u00e9todos de b\u00fasqueda con el m\u00e9todo with() . Por ejemplo: <?php $posts = Post :: model () -> with ( 'author' ) -> findAll (); Se pueden especificar varios nombres de relaciones separados por comas en el m\u00e9todo with() o pasarle un CDbCriteria::with al m\u00e9todo de b\u00fasqueda. Por ejemplo: <?php $criteria = new CDbCriteria ; $criteria -> with = array ( 'author.profile' , 'author.posts' , 'categories' , ); $posts = Post :: model () -> findAll ( $criteria );","title":"Consultas relacionales"},{"location":"desarrollo/yii.html#consultas-relacionales-sin-obtener-los-modelos-relacionados","text":"En ocasiones nos interesa hacer una consulta usando una relaci\u00f3n pero no queremos los datos de los propios modelos relacionados. Por ejemplo si quisi\u00e9ramos los usuarios que tienen post's en estado published=1, pero no los post's en s\u00ed, podr\u00edamos hacer lo siguiente: <?php $users = User :: model () -> with ( array ( 'posts' => array ( 'select' => false , 'joinType' => 'INNER JOIN' , 'condition' => 'posts.published=1' , ), )) -> findAll ();","title":"Consultas relacionales sin obtener los modelos relacionados"},{"location":"desarrollo/yii.html#opciones-de-consultas-relacionales","text":"Las opciones adicionales que se pueden indicar cuando se definen las relaciones que se mencionaban en el apartado Declaraci\u00f3n de relaciones son las siguientes (consultar su funcionamiento en la documentaci\u00f3n oficial ): select condition params on order with joinType alias together join group having index scopes Adicionalmente las siguientes opciones est\u00e1n disponibles para ciertas relaciones durante el lazy loading (consultar su funcionamiento en la documentaci\u00f3n oficial ): limit offset through Ejemplo de uso: <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'order' => 'posts.create_time DESC' , 'with' => 'categories' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } }","title":"Opciones de consultas relacionales"},{"location":"desarrollo/yii.html#desambiguacion-de-columnas","text":"En una consulta relacional con AR, el alias para la tabla primaria es t , mientras que el alias de la tabla relacionada se corresponde con el nombre de la relaci\u00f3n. Por ejemplo: <?php $posts = Post :: model () -> with ( 'comments' ) -> findAll ( array ( 'order' => 't.create_time, comments.create_time' ));","title":"Desambiguaci\u00f3n de columnas"},{"location":"desarrollo/yii.html#opciones-dinamicas-en-consultas-relacionales","text":"Se pueden sobreescribir las opciones que se definen en las relaciones indicando otras mediante el m\u00e9todo with() o con la opci\u00f3n adicional with .","title":"Opciones din\u00e1micas en consultas relacionales"},{"location":"desarrollo/yii.html#rendimiento-de-consultas-relacionales","text":"Existe una opci\u00f3n que permite elegir entre dos m\u00e9todos para realizar consultas eager loading . Se trata de la opci\u00f3n together que determina si se realizar\u00e1 una \u00fanica consulta con el join de las tablas relacionadas (m\u00e1s rendimiento) o una consulta por cada tabla (menos informaci\u00f3n redundante). Consultar documentaci\u00f3n completa .","title":"Rendimiento de consultas relacionales"},{"location":"desarrollo/yii.html#consulta-estadistica","text":"Existe un tipo de relaci\u00f3n especializado en obtener datos estad\u00edsticos entre tablas. S\u00f3lo se puede aplicar sobre tablas relacionadas con HAS_MANY y MANY_MANY y el tipo de relaci\u00f3n se designa con self::STAT . Por ejemplo: <?php class Post extends CActiveRecord { public function relations () { return array ( 'commentCount' => array ( self :: STAT , 'Comment' , 'post_id' ), 'categoryCount' => array ( self :: STAT , 'Category' , 'post_category(post_id, category_id)' ), ); } } Por defecto la consulta estad\u00edstica consistir\u00e1 en un COUNT , pero podemos realizar ajustes con las siguientes opciones adicionales al definir la relaci\u00f3n: select : la expresi\u00f3n estad\u00edstica. Por defecto es COUNT(*) , lo que realiza un conteo de los objetos hijos. defaultValue : el valor que se asignar\u00e1 a los registros que no reciban un resultado de la consulta estad\u00edstica. Por ejemplo, si un post no tiene comentarios, commentCount recibir\u00e1 este valor. Por defecto vale 0. condition : la cl\u00e1usula WHERE. Su valor por defecto es vac\u00edo. params : los par\u00e1metros a asociar a la sentencia SQL generada. Debe ser un array de parejas clave-valor. order : la cl\u00e1usula ORDER. Su valor por defecto es vac\u00edo. group : la cl\u00e1usula GROUP BY. Su valor por defecto es vac\u00edo. having : la cl\u00e1usula HAVING. Su valor por defecto es vac\u00edo.","title":"Consulta estad\u00edstica"},{"location":"desarrollo/yii.html#consulta-relacional-con-named-scopes","text":"Se pueden combinar las consultas relacionales con los named scopes aplicando estos \u00faltimos tanto sobre la tabla principal como sobre las relacionadas. En el primer caso se har\u00eda combinando named scopes y consulta relacional en cadena de la siguiente forma: <?php $posts = Post :: model () -> published () -> recently () -> with ( 'comments' ) -> findAll (); Aplicar named scopes a los modelos relacionados se hace indicandolos detr\u00e1s de la relaci\u00f3n separ\u00e1ndolos con \":\". Por ejemplo: <?php $posts = Post :: model () -> with ( 'comments:recently:approved' ) -> findAll (); Los named scopes pueden forzarse en la propia declaraci\u00f3n de la relaci\u00f3n del siguiente modo: <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'with' => 'comments:approved' ), ); } } Si los named scopes del objeto relacionados admiten par\u00e1metros, pueden pasarse en la consulta relacional de la siguiente forma: <?php $users = User :: model () -> findAll ( array ( 'with' => array ( 'posts' => array ( 'scopes' => array ( 'rated' => 5 , ), ), ), ));","title":"Consulta relacional con named scopes"},{"location":"desarrollo/yii.html#consulta-relacional-con-through","text":"Se definen as\u00ed: <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'key1' => 'key2' ), 'through' => 'posts' ) donde en array('key1'=>'key2'): key1 es una clave definida en la relaci\u00f3n especificada en through ( posts en este caso) key2 es una clave definida en el modelo al que esta relaci\u00f3n apunta ( Comment en este caso) through puede utilizarse en relaciones HAS_ONE y HAS_MANY . Para ilustrar el caso HAS_MANY se utilizar\u00e1 el siguiente modelo de datos: Por ejemplo, para obtener los usuarios de un grupo en concreto: <?php class Group extends CActiveRecord { //... public function relations () { return array ( 'roles' => array ( self :: HAS_MANY , 'Role' , 'group_id' ), 'users' => array ( self :: HAS_MANY , 'User' , array ( 'user_id' => 'id' ), 'through' => 'roles' ), ); } } Un caso m\u00e1s complicado ser\u00eda obtener todos los comentarios de todos los usuarios de un grupo en concreto. Se lograr\u00eda a\u00f1adiendo a las relaciones anteriores la siguiente: <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'id' => 'user_id' ), 'through' => 'users' ), Una variante del HAS_MANY through es cuando el modelo origen y destino es el mismo. Por ejemplo, dado el siguiente modelo de datos: Podr\u00edamos definir las siguientes relaciones: <?php class User extends CActiveRecord { //... public function relations () { return array ( 'mentorships' => array ( self :: HAS_MANY , 'Mentorship' , 'teacher_id' , 'joinType' => 'INNER JOIN' ), 'students' => array ( self :: HAS_MANY , 'User' , array ( 'student_id' => 'id' ), 'through' => 'mentorships' , 'joinType' => 'INNER JOIN' ), ); } } De manera que podr\u00edamos obtener los alumnos que son ense\u00f1ados por un profesor (alumnos y profesor son ambos usuarios): <?php $teacher = User :: model () -> findByPk ( 1 ); $students = $teacher -> students ; Para ilustrar el caso de HAS_ONE through nos basaremos en: Por ejemplo, obtener la direcci\u00f3n de un usuario cuando \u00e9sta est\u00e1 relacionada con el usuario por medio de un profile: <?php class User extends CActiveRecord { //... public function relations () { return array ( 'profile' => array ( self :: HAS_ONE , 'Profile' , 'user_id' ), 'address' => array ( self :: HAS_ONE , 'Address' , array ( 'id' => 'profile_id' ), 'through' => 'profile' ), ); } }","title":"Consulta relacional con through"},{"location":"desarrollo/yii.html#tabla-de-relacion-many_many-con-datos-adicionales","text":"Para el caso en que la tabla intermedia que desarrolla una relaci\u00f3n MANY_MANY entre otras dos tablas contenga campos con informaci\u00f3n adicional a los dos foreign keys que apuntan a las dos tablas, seguir este art\u00edculo del wiki y \u00e9ste del foro (ignorar las respuestas m\u00e1s viejas que son de cuando no exist\u00eda el mecanismo through ).","title":"Tabla de relaci\u00f3n MANY_MANY con datos adicionales"},{"location":"desarrollo/yii.html#cosas-interesantes","text":"","title":"Cosas interesantes"},{"location":"desarrollo/yii.html#application-singleton","text":"Yii:app() Sirve como almac\u00e9n central de ajustes de configuraci\u00f3n a nivel de aplicaci\u00f3n ( fuente ).","title":"Application Singleton"},{"location":"desarrollo/yii.html#anadir-jquery","text":"A\u00f1adir jQuery a una p\u00e1gina. C\u00f3digo visto en un action, pero tambi\u00e9n se podr\u00eda insertar directamente en la vista en que vaya a ser necesario: <?php // Adding jQuery to the view page. Yii :: app () -> getClientScript () -> registerCoreScript ( 'jquery' );","title":"A\u00f1adir jQuery"},{"location":"desarrollo/yii.html#filtrado-referido-en-bootgridview-o-cgridview","text":"Imaginemos el modelo empleado asociado en n:1 al modelo departamento. En el listado de empleados queremos mostrar el departamento al que pertenece y poder filtrar por el nombre del mismo (no por el ID de departamento como ocurrir\u00eda si indic\u00e1ramos el campo departamento_id que pertenece a empleado). Ver ejemplo en el filtrado del campo xproduct.product en admin.php del modelo Product en R135 del repositorio svn+ssh://edumoreno@192.168.2.250/var/lib/subversion/gestoo/trunk .","title":"Filtrado referido en BootGridView o CGridView"},{"location":"electronica/arduino.html","text":"","title":"Arduino"},{"location":"electronica/bus_pirate.html","text":"","title":"Bus pirate"},{"location":"electronica/componentes.html","text":"","title":"Componentes"},{"location":"electronica/kicad.html","text":"","title":"Kicad"},{"location":"electronica/m328_transistor_tester.html","text":"","title":"M328 transistor tester"},{"location":"electronica/modulos.html","text":"","title":"Modulos"},{"location":"electronica/stm32.html","text":"","title":"Stm32"},{"location":"ingenieria/3d_printing.html","text":"3D Printing \u00b6 Nombres alternativos de Anet A8 \u00b6 Infitary M505 Alunar M505 Omni m505 Enlaces \u00b6 G-code/es : Instrucciones G-code. Lista de v\u00eddeos en canal Dron3D 8A sobre \"Anet A8\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Conceptos y ayuda\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Software\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Tipos de Material\" Anet A8 3DPrint.wiki Trello de \"Comunidad 3D [ES]\" Instalaci\u00f3n de 2 MosFET: Post y STLs Como calibrar el control de temperatura PID de la impresora 3D Calibraci\u00f3n de pasos del motor del extrusor . Instrucciones para realizarlo en Anet A8 aqu\u00ed . Calibraci\u00f3n del Extrusion Multiplier \u2013 Anchura de impresi\u00f3n C\u00f3mo montar Hot End sin romperlo C\u00f3mo modificar home en XY (ajustar extrusor offset). Y el m\u00e1ximo recorrido Actualizar el firmware a partir de un fichero HEX Montura para extrusor E3D Anet A8 - POST DEFINITIVO - Recopilatorio de temas ShapeWays : Servicio de impresi\u00f3n. Piezas interesantes: Filament clip USB to Dupont adapter for power supply 5V Filamento \u00b6 FlexiSMART SmartMaterials3D : ABS con aditivos para evitar warping y cracking. Sakata3D PLA Ingeo 3D870 : Similares caracter\u00edsticas al ABS sin sus inconvenientes ( An\u00e1lisis ). Hardware / Componentes / Repuestos \u00b6 Repuestos Anet A8 Placa base Rodamiento lineal Rodamiento lineal sin bolas Rodamiento lineal largo Enchufe de corriente de entrada Alargador lector microSD Conectores r\u00e1pidos JST M\u00f3dulo MOSFET M\u00f3dulo MOSFET Sensor de posici\u00f3n inductivo Sensor de posici\u00f3n capacitivo (mejor si se pone cristal a la cama) Cinta de carrocero especial impresoras: Amazon , Banggood Nozzles en medidas 0.2, 0.3 y 0.4 mm . Tambi\u00e9n sueltos: 0.2mm , 0.3 y 0.4 . N\u00facleo calentador extrusor Bloque de aluminio soporte del extrusor, el n\u00facleo calentador y el termistor Termistor Tubo conductor filamento al extrusor con tefl\u00f3n Engranaje impulsor filamento Ventilador de capa Ventilador de extrusor Correa ejes X e Y Cristal para cama caliente Motor paso a paso Mejoras Anet A8 \u00b6 Mejoras sobre montaje original Soporte para las herramientas Conectores en ventiladores Alargador lector microSD MOSFET exterior Soldar conector cama caliente Refuerzos eje X: v1 y v2 . Interruptor y ventilador de fuente Ventilador de placa base Soporte para bobina de filamento: Barras 1 o Barras 2 y Eje . Final de carrera Z ajustable Mejoras en tornillos nivelado de cama Base para doble MOSFET : Gu\u00eda de montaje . Acceso r\u00e1pido a engranaje motor extrusor Tensor eje X Tensor eje Y: v1 o v2 Piezas de la propia impresora \u00b6 X Motor mount Octoprint \u00b6 Control your Anet A8 3D Printer using Octoprint on Raspberry Pi Zero W, direct UART connection Control remoto para tu impresora 3D con Raspberry Pi: Parte 1 y Parte 2 . Setup on a Raspberry Pi running Raspbian Par\u00e1metros impresi\u00f3n Anet A8 \u00b6 General \u00b6 X (Width): 220mm Y (Depth): 220mm Z (Height): 240mm Build plate shape: Rectangular Heated bed: Checked Bed center is 0,0,0: Unchecked Material diameter: 1.75mm Nozzle size: 0.4mm Cura 3.4 \u00b6 Los ficheros de preferencias de las distintas versiones se encuentran en la ruta (Linux) ~/.config/cura y los de settings en ~/.local/share/cura . ( Fuente ) Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Quality > Initial Layer Line Width : 100 %. Permite aumentar ligeramente la anchura de las l\u00edneas de la primera capa para aumentar la adherencia a la cama. B\u00e1sicamente inyecta un poco m\u00e1s de material. Shell > Wall Thickness : 1.2 mm [0.8-2.0] Grosor de la piel. Debe ser m\u00faltiplo de Layer Height . Shell > Top/Bottom Thickness : 1.2 mm [0.8-2.0] Grosor de la piel superior e inferior. Cuando la densidad de relleno es menor que 20%, se puede producir ca\u00edda de la capa superior. En ese caso se recomienda un m\u00ednimo de 1.2mm. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Material > Diameter : 1.75 mm. Di\u00e1metro de la entrada del extrusor. Material > Flow : 100 %. Sirve para aportar m\u00e1s o menos material si observamos que en las impresiones aparecen bultos o huecos entre las l\u00edneas o capas. Material > Enable Retraction : Marcado. Retrae el hilo cuando el cabezal se tiene que desplazar sin imprimir. Material > Retraction Distance : 4.5mm. Cantidad de material recogido durante la retracci\u00f3n. Material > Retraction Speed : 40 mm/s. Velocidad de la retracci\u00f3n. Material > Retraction Minimum Travel : 1.5 mm. Distancia m\u00ednima de desplazamiento del extrusor a partir de la que se aplica retracci\u00f3n. Speed > Print Speed : 30 mm/s [10-120] Velocidad de impresi\u00f3n. A menor velocidad m\u00e1s precisi\u00f3n de impresi\u00f3n. No se recomienda pasar de 40-60. Speed > Infill Speed : 40 [10-120] Velocidad de impresi\u00f3n del relleno. Speed > Outer Wall Speed : 20 [10-120] Velocidad de impresi\u00f3n de las caras externas. Speed > Inner Wall Speed : 30 [10-120] Velocidad de impresi\u00f3n de las caras internas. Suele ser un valor intermedio entre Infill Speed y Outer Wall Speed . Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Travel > Z Hop When Retracted : Desmarcado. Levanta un poco el extrusor cuando se inicia un desplazamiento para evitar colisiones con las partes ya impresas. Tras probarlo compruebo que en la Anet A8 deja muchos hilos. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Cooling > Regular Fan Speed : 30 %. La velocidad del ventilador antes de alcanzar el tiempo m\u00ednimo de impresi\u00f3n de la capa, momento en que se acelera hasta alcanzar la velocidad m\u00e1xima. Cooling > Maximum Fan Speed : 70 %. Velocidad m\u00e1xima del ventilador cuando se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa. Cooling > Initial Fan Speed : 0 %. Velocidad del ventilador al comienzo de la impresi\u00f3n. Cooling > Regular Fan Speed at Height : 0.5 mm. Altura de capa a partir de la cual el ventilador empezar\u00e1 a girar a la velocidad Regular . Este retraso en el encendido del ventilador sirve para mejorar la adhesi\u00f3n de la pieza a la cama. Cooling > Minimum Layer Time : 10 seg. Tiempo m\u00ednimo de impresi\u00f3n de una capa. Si no se alcanza antes de empezar una nueva la impresora esperar\u00e1. Cooling > Lift Head : Desmarcado. Aparta la cabeza cuando no se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa para evitar que el extrusor gotee sobre la misma. Es mejor bajar la velocidad de impresi\u00f3n en este tipo de piezas peque\u00f1as en las que no se alcance el tiempo m\u00ednimo de impresi\u00f3n de capa. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion Type : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Special Modes : All at Once. Usar siempre esta opci\u00f3n. Experimental > Tree Support : Hace soportes ramificados. M\u00e1s habituales \u00b6 Los par\u00e1metros que casi siempre merece la pena revisar entre distintas impresiones son: Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Experimental > Tree Support : Hace soportes ramificados. Flasheo de firmware en Anet A8 \u00b6 Copiar el directorio anet de este proyecto al directorio hardware de la instalaci\u00f3n de Arduino IDE. Descargar la \u00faltima versi\u00f3n de Marlin de su repositorio . Descargar la \u00faltima versi\u00f3n de los ficheros de configuraci\u00f3n de las distintas impresoras de su repositorio . Sustituir los ficheros de configuraci\u00f3n adaptados a la Anet A8 que hay en la ruta config/examples/Anet/A8 del repositorio de configuraciones por los que hay en Marlin (junto al .ino ) del repositorio de Marlin. Seleccionar la placa Anet V1.0 y el puerto que corresponda. Compilar y flashear. En el primer arranque es posible que aparezca en pantalla el error Err: EEPROM version . En ese caso: Conectar el cable USB (si se ha desconectado el puente entre el puerto serie del microcontrolador y el adaptador USB descrito [aqu\u00ed], seleccionar el puerto con los jumpers). Abrir conexi\u00f3n serie ejecutando lo siguiente en terminal: $ sudo screen /dev/ttyUSB0 115200 8N1 Escribir los siguientes comandos en la consola. Hacerlo uno a uno y con un caracter retorno al final de cada uno. Lo mejor es escribirlos en un editor de texto, copiar cada linea (incluyendo el retorno) y pegarla en la consola. De esta forma se consigue que el comando sea le\u00eddo como un todo y no que se vayan interpretando sus caracteres sueltos conforme vamos escribiendo: M502 M500 M501","title":"3D Printing"},{"location":"ingenieria/3d_printing.html#3d-printing","text":"","title":"3D Printing"},{"location":"ingenieria/3d_printing.html#nombres-alternativos-de-anet-a8","text":"Infitary M505 Alunar M505 Omni m505","title":"Nombres alternativos de Anet A8"},{"location":"ingenieria/3d_printing.html#enlaces","text":"G-code/es : Instrucciones G-code. Lista de v\u00eddeos en canal Dron3D 8A sobre \"Anet A8\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Conceptos y ayuda\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Software\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Tipos de Material\" Anet A8 3DPrint.wiki Trello de \"Comunidad 3D [ES]\" Instalaci\u00f3n de 2 MosFET: Post y STLs Como calibrar el control de temperatura PID de la impresora 3D Calibraci\u00f3n de pasos del motor del extrusor . Instrucciones para realizarlo en Anet A8 aqu\u00ed . Calibraci\u00f3n del Extrusion Multiplier \u2013 Anchura de impresi\u00f3n C\u00f3mo montar Hot End sin romperlo C\u00f3mo modificar home en XY (ajustar extrusor offset). Y el m\u00e1ximo recorrido Actualizar el firmware a partir de un fichero HEX Montura para extrusor E3D Anet A8 - POST DEFINITIVO - Recopilatorio de temas ShapeWays : Servicio de impresi\u00f3n. Piezas interesantes: Filament clip USB to Dupont adapter for power supply 5V","title":"Enlaces"},{"location":"ingenieria/3d_printing.html#filamento","text":"FlexiSMART SmartMaterials3D : ABS con aditivos para evitar warping y cracking. Sakata3D PLA Ingeo 3D870 : Similares caracter\u00edsticas al ABS sin sus inconvenientes ( An\u00e1lisis ).","title":"Filamento"},{"location":"ingenieria/3d_printing.html#hardware-componentes-repuestos","text":"Repuestos Anet A8 Placa base Rodamiento lineal Rodamiento lineal sin bolas Rodamiento lineal largo Enchufe de corriente de entrada Alargador lector microSD Conectores r\u00e1pidos JST M\u00f3dulo MOSFET M\u00f3dulo MOSFET Sensor de posici\u00f3n inductivo Sensor de posici\u00f3n capacitivo (mejor si se pone cristal a la cama) Cinta de carrocero especial impresoras: Amazon , Banggood Nozzles en medidas 0.2, 0.3 y 0.4 mm . Tambi\u00e9n sueltos: 0.2mm , 0.3 y 0.4 . N\u00facleo calentador extrusor Bloque de aluminio soporte del extrusor, el n\u00facleo calentador y el termistor Termistor Tubo conductor filamento al extrusor con tefl\u00f3n Engranaje impulsor filamento Ventilador de capa Ventilador de extrusor Correa ejes X e Y Cristal para cama caliente Motor paso a paso","title":"Hardware / Componentes / Repuestos"},{"location":"ingenieria/3d_printing.html#mejoras-anet-a8","text":"Mejoras sobre montaje original Soporte para las herramientas Conectores en ventiladores Alargador lector microSD MOSFET exterior Soldar conector cama caliente Refuerzos eje X: v1 y v2 . Interruptor y ventilador de fuente Ventilador de placa base Soporte para bobina de filamento: Barras 1 o Barras 2 y Eje . Final de carrera Z ajustable Mejoras en tornillos nivelado de cama Base para doble MOSFET : Gu\u00eda de montaje . Acceso r\u00e1pido a engranaje motor extrusor Tensor eje X Tensor eje Y: v1 o v2","title":"Mejoras Anet A8"},{"location":"ingenieria/3d_printing.html#piezas-de-la-propia-impresora","text":"X Motor mount","title":"Piezas de la propia impresora"},{"location":"ingenieria/3d_printing.html#octoprint","text":"Control your Anet A8 3D Printer using Octoprint on Raspberry Pi Zero W, direct UART connection Control remoto para tu impresora 3D con Raspberry Pi: Parte 1 y Parte 2 . Setup on a Raspberry Pi running Raspbian","title":"Octoprint"},{"location":"ingenieria/3d_printing.html#parametros-impresion-anet-a8","text":"","title":"Par\u00e1metros impresi\u00f3n Anet A8"},{"location":"ingenieria/3d_printing.html#general","text":"X (Width): 220mm Y (Depth): 220mm Z (Height): 240mm Build plate shape: Rectangular Heated bed: Checked Bed center is 0,0,0: Unchecked Material diameter: 1.75mm Nozzle size: 0.4mm","title":"General"},{"location":"ingenieria/3d_printing.html#cura-34","text":"Los ficheros de preferencias de las distintas versiones se encuentran en la ruta (Linux) ~/.config/cura y los de settings en ~/.local/share/cura . ( Fuente ) Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Quality > Initial Layer Line Width : 100 %. Permite aumentar ligeramente la anchura de las l\u00edneas de la primera capa para aumentar la adherencia a la cama. B\u00e1sicamente inyecta un poco m\u00e1s de material. Shell > Wall Thickness : 1.2 mm [0.8-2.0] Grosor de la piel. Debe ser m\u00faltiplo de Layer Height . Shell > Top/Bottom Thickness : 1.2 mm [0.8-2.0] Grosor de la piel superior e inferior. Cuando la densidad de relleno es menor que 20%, se puede producir ca\u00edda de la capa superior. En ese caso se recomienda un m\u00ednimo de 1.2mm. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Material > Diameter : 1.75 mm. Di\u00e1metro de la entrada del extrusor. Material > Flow : 100 %. Sirve para aportar m\u00e1s o menos material si observamos que en las impresiones aparecen bultos o huecos entre las l\u00edneas o capas. Material > Enable Retraction : Marcado. Retrae el hilo cuando el cabezal se tiene que desplazar sin imprimir. Material > Retraction Distance : 4.5mm. Cantidad de material recogido durante la retracci\u00f3n. Material > Retraction Speed : 40 mm/s. Velocidad de la retracci\u00f3n. Material > Retraction Minimum Travel : 1.5 mm. Distancia m\u00ednima de desplazamiento del extrusor a partir de la que se aplica retracci\u00f3n. Speed > Print Speed : 30 mm/s [10-120] Velocidad de impresi\u00f3n. A menor velocidad m\u00e1s precisi\u00f3n de impresi\u00f3n. No se recomienda pasar de 40-60. Speed > Infill Speed : 40 [10-120] Velocidad de impresi\u00f3n del relleno. Speed > Outer Wall Speed : 20 [10-120] Velocidad de impresi\u00f3n de las caras externas. Speed > Inner Wall Speed : 30 [10-120] Velocidad de impresi\u00f3n de las caras internas. Suele ser un valor intermedio entre Infill Speed y Outer Wall Speed . Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Travel > Z Hop When Retracted : Desmarcado. Levanta un poco el extrusor cuando se inicia un desplazamiento para evitar colisiones con las partes ya impresas. Tras probarlo compruebo que en la Anet A8 deja muchos hilos. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Cooling > Regular Fan Speed : 30 %. La velocidad del ventilador antes de alcanzar el tiempo m\u00ednimo de impresi\u00f3n de la capa, momento en que se acelera hasta alcanzar la velocidad m\u00e1xima. Cooling > Maximum Fan Speed : 70 %. Velocidad m\u00e1xima del ventilador cuando se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa. Cooling > Initial Fan Speed : 0 %. Velocidad del ventilador al comienzo de la impresi\u00f3n. Cooling > Regular Fan Speed at Height : 0.5 mm. Altura de capa a partir de la cual el ventilador empezar\u00e1 a girar a la velocidad Regular . Este retraso en el encendido del ventilador sirve para mejorar la adhesi\u00f3n de la pieza a la cama. Cooling > Minimum Layer Time : 10 seg. Tiempo m\u00ednimo de impresi\u00f3n de una capa. Si no se alcanza antes de empezar una nueva la impresora esperar\u00e1. Cooling > Lift Head : Desmarcado. Aparta la cabeza cuando no se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa para evitar que el extrusor gotee sobre la misma. Es mejor bajar la velocidad de impresi\u00f3n en este tipo de piezas peque\u00f1as en las que no se alcance el tiempo m\u00ednimo de impresi\u00f3n de capa. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion Type : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Special Modes : All at Once. Usar siempre esta opci\u00f3n. Experimental > Tree Support : Hace soportes ramificados.","title":"Cura 3.4"},{"location":"ingenieria/3d_printing.html#mas-habituales","text":"Los par\u00e1metros que casi siempre merece la pena revisar entre distintas impresiones son: Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Experimental > Tree Support : Hace soportes ramificados.","title":"M\u00e1s habituales"},{"location":"ingenieria/3d_printing.html#flasheo-de-firmware-en-anet-a8","text":"Copiar el directorio anet de este proyecto al directorio hardware de la instalaci\u00f3n de Arduino IDE. Descargar la \u00faltima versi\u00f3n de Marlin de su repositorio . Descargar la \u00faltima versi\u00f3n de los ficheros de configuraci\u00f3n de las distintas impresoras de su repositorio . Sustituir los ficheros de configuraci\u00f3n adaptados a la Anet A8 que hay en la ruta config/examples/Anet/A8 del repositorio de configuraciones por los que hay en Marlin (junto al .ino ) del repositorio de Marlin. Seleccionar la placa Anet V1.0 y el puerto que corresponda. Compilar y flashear. En el primer arranque es posible que aparezca en pantalla el error Err: EEPROM version . En ese caso: Conectar el cable USB (si se ha desconectado el puente entre el puerto serie del microcontrolador y el adaptador USB descrito [aqu\u00ed], seleccionar el puerto con los jumpers). Abrir conexi\u00f3n serie ejecutando lo siguiente en terminal: $ sudo screen /dev/ttyUSB0 115200 8N1 Escribir los siguientes comandos en la consola. Hacerlo uno a uno y con un caracter retorno al final de cada uno. Lo mejor es escribirlos en un editor de texto, copiar cada linea (incluyendo el retorno) y pegarla en la consola. De esta forma se consigue que el comando sea le\u00eddo como un todo y no que se vayan interpretando sus caracteres sueltos conforme vamos escribiendo: M502 M500 M501","title":"Flasheo de firmware en Anet A8"},{"location":"ingenieria/arduino.html","text":"Arduino \u00b6 Enlaces \u00b6 Parallax Propeller Adaptador serie \u00b6 Se puede utilizar muy f\u00e1cilmente un Arduino como adaptador USB-UART sin m\u00e1s que puentear el pin de reset (RST) a GND. En ese caso conectar los pines RX, TX (sin cruzar) y GND hacia el dispositivo que queramos conectar. En caso de que el dispositivo con el que conectemos trabaje a 3.3V (como Raspberry Pi por ejemplo), es necesario montar un divisor de tensi\u00f3n en la l\u00ednea RX tal y como se ve en este art\u00edculo (en el art\u00edculo las l\u00edneas RX/TX s\u00ed que est\u00e1n cruzadas porque se conecta el puerto UART al microcontrolador Atmel, no al adaptador USB): Programaci\u00f3n de ATtiny85 \u00b6 El MC ATtiny85 no lleva el bootloader de Arduino que escucha por el puerto serie adaptado a USB ya que ni tiene puerto serie hardware ni suele estar acompa\u00f1ado por el adaptador USB. La \u00fanica forma de programarlo es por ISP o mediante un programador de MC adecuado de los que existen varios. Vamos a ver un par de ellos. Antes de empezar necesitamos cargar en el Arduino IDE las definiciones de placa para soportar ATtiny85 (y algunos de sus hermanos peque\u00f1os). Para ello proceder como sigue ( fuente ): Abrimos el Arduino IDE y nos vamos a la ventana de Preferencias ( Archivo > Preferencias ). En la ventana que aparece introducimos la siguiente URL en el campo Gestor de URLs Adicionales de Tarjetas : https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json Pulsamos OK . Abrimos el Gestor de tarjetas ( Herramientas > Placa > Gestor de tarjetas... ). Localizamos el m\u00f3dulo attiny by David A. Mellis y lo instalamos. Programaci\u00f3n con Arduino \u00b6 Podemos utilizar como programador un Arduino (basado en ATmega328p como el UNO) con el sketch \"Arduino ISP\" cargado. Los pasos para programar de esta forma son los siguientes: Cargamos en el Arduino el sketch \"Arduino ISP\" que hay en ejemplos. Colocamos un condensador de 10\u03bcF entre el pin RESET del Arduino y GND. Cableamos entre el ATtiny85 y el Arduino de la siguiente manera: Configuramos el Arduino IDE con los siguientes par\u00e1metros: Placa : ATtiny25/45/85 Procesador : ATtiny85 Clock : Internal 8 MHz Programador : Arduino as ISP Programaci\u00f3n con BusPirate \u00b6 En este caso vamos a utilizar un BusPirate 3.6 como programador y un m\u00f3dulo Digispark para cablear m\u00e1s f\u00e1cilmente la conexi\u00f3n ISP: Insertar en m\u00f3dulo Digispark . A la tira de pines de 2x4 del m\u00f3dulo le habremos recortado los pines que corresponden a los pines P3 y P4 del ATtiny85, ya que de esta forma la tira de pines se convierte en un conector ISP de 6 pines est\u00e1ndar. Conectar el cable ISP entre BusPirate y m\u00f3dulo Digispark cableando como sigue (aunque el ATtiny85 funciona a 5V, parece que soporta sin problemas ser programado a 3.3V): Pin ISP Se\u00f1al Pin BusPirate 1 MISO Negro:MISO 2 +3.3V Rojo:+3.3V 3 SCK Morado:CLK 4 MOSI Gris:MOSI 5 CS Blanco:CS 6 GND Marr\u00f3n:GND Configuramos el Arduino IDE con los siguientes par\u00e1metros: Placa : ATtiny25/45/85 Procesador : ATtiny85 Clock : Internal 8 MHz Programador : BusPirate as ISP Alternativamente podemos programar con el comando avrdude con el argumento -c buspirate . Por ejemplo para obtener el estado de los Fuse bits: $ avrdude -c buspirate -P /dev/ttyUSB0 -p attiny85 -v A partir de aqu\u00ed hay varias cosas que podemos hacer. Programaci\u00f3n con MiniPRO TL866xx desde Linux \u00b6 Teniendo el programa minipro instalado, montar el ATtiny85 en el socket ZIP y conectar el cable USB. Interesa antes de empezar, asegurarnos de que el MC es identificado correctamente, lo que nos servir\u00e1 adem\u00e1s para comprobar que las conexiones son correctas, para lo que ejecutamos: edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 --read_id Found TL866II+ 04.2.125 (0x27d) Chip ID OK: 0x1E930B Una vez que vemos que la comunicaci\u00f3n se establece sin problemas, grabamos el MC con el siguiente comando: edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 -w PROGRAMA.hex -c code Found TL866II+ 04.2.125 (0x27d) Chip ID OK: 0x1E930B Found Intel hex file. Erasing... 0.01Sec OK Writing Code... 1.10Sec OK Reading Code... 0.49Sec OK Verification OK Para los fuse bits, escribiremos un fichero de texto con el siguiente contenido (los valores de los fusebits que se muestran a continuaci\u00f3n son los predeterminados, pero habr\u00e1 que sustituirlos por los que nos interesen; esta calculadora es muy \u00fatil): fuses_lo = 0x62 fuses_hi = 0xdf fuses_ext = 0xff lock_byte = 0xff Una vez creado el fichero, cargaremos sus valores en el MC con el siguiente comando: edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 -w PROGRAMA.fuses.conf -c config Found TL866II+ 04.2.125 (0x27d) Chip ID OK: 0x1E930B Writing fuses... 0.02Sec OK Cambiar el reloj \u00b6 El ajuste del reloj que va a utilizar el MC es muy importante. Necesitamos conocerla para que el MC responda cuando queramos comunicarnos con \u00e9l para cargarle un programa. Si en alg\u00fan momento lo configuramos para que utilice reloj externo, tendremos que conectar uno entre los pines PB3 y PB4 siguiendo el datasheet. El ajuste del reloj se hace cambiando los fuse bits de 3 bytes especiales del MC. Esto desde el Arduino IDE se hace con el comando \"Quemar Bootloader\" que no hace otra cosa que cambiar estos fuse bits. En caso de cometer alg\u00fan error configurando los fuse bits y tener problemas para comunicar con el MC, se puede usar un programador de alto voltaje para forzar el cambio de los fusebits. Cargar un sketch \u00b6 Simplemente utilizaremos el bot\u00f3n para subir el sketch que tengamos abierto en el Arduino IDE.","title":"Arduino"},{"location":"ingenieria/arduino.html#arduino","text":"","title":"Arduino"},{"location":"ingenieria/arduino.html#enlaces","text":"Parallax Propeller","title":"Enlaces"},{"location":"ingenieria/arduino.html#adaptador-serie","text":"Se puede utilizar muy f\u00e1cilmente un Arduino como adaptador USB-UART sin m\u00e1s que puentear el pin de reset (RST) a GND. En ese caso conectar los pines RX, TX (sin cruzar) y GND hacia el dispositivo que queramos conectar. En caso de que el dispositivo con el que conectemos trabaje a 3.3V (como Raspberry Pi por ejemplo), es necesario montar un divisor de tensi\u00f3n en la l\u00ednea RX tal y como se ve en este art\u00edculo (en el art\u00edculo las l\u00edneas RX/TX s\u00ed que est\u00e1n cruzadas porque se conecta el puerto UART al microcontrolador Atmel, no al adaptador USB):","title":"Adaptador serie"},{"location":"ingenieria/arduino.html#programacion-de-attiny85","text":"El MC ATtiny85 no lleva el bootloader de Arduino que escucha por el puerto serie adaptado a USB ya que ni tiene puerto serie hardware ni suele estar acompa\u00f1ado por el adaptador USB. La \u00fanica forma de programarlo es por ISP o mediante un programador de MC adecuado de los que existen varios. Vamos a ver un par de ellos. Antes de empezar necesitamos cargar en el Arduino IDE las definiciones de placa para soportar ATtiny85 (y algunos de sus hermanos peque\u00f1os). Para ello proceder como sigue ( fuente ): Abrimos el Arduino IDE y nos vamos a la ventana de Preferencias ( Archivo > Preferencias ). En la ventana que aparece introducimos la siguiente URL en el campo Gestor de URLs Adicionales de Tarjetas : https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json Pulsamos OK . Abrimos el Gestor de tarjetas ( Herramientas > Placa > Gestor de tarjetas... ). Localizamos el m\u00f3dulo attiny by David A. Mellis y lo instalamos.","title":"Programaci\u00f3n de ATtiny85"},{"location":"ingenieria/arduino.html#programacion-con-arduino","text":"Podemos utilizar como programador un Arduino (basado en ATmega328p como el UNO) con el sketch \"Arduino ISP\" cargado. Los pasos para programar de esta forma son los siguientes: Cargamos en el Arduino el sketch \"Arduino ISP\" que hay en ejemplos. Colocamos un condensador de 10\u03bcF entre el pin RESET del Arduino y GND. Cableamos entre el ATtiny85 y el Arduino de la siguiente manera: Configuramos el Arduino IDE con los siguientes par\u00e1metros: Placa : ATtiny25/45/85 Procesador : ATtiny85 Clock : Internal 8 MHz Programador : Arduino as ISP","title":"Programaci\u00f3n con Arduino"},{"location":"ingenieria/arduino.html#programacion-con-buspirate","text":"En este caso vamos a utilizar un BusPirate 3.6 como programador y un m\u00f3dulo Digispark para cablear m\u00e1s f\u00e1cilmente la conexi\u00f3n ISP: Insertar en m\u00f3dulo Digispark . A la tira de pines de 2x4 del m\u00f3dulo le habremos recortado los pines que corresponden a los pines P3 y P4 del ATtiny85, ya que de esta forma la tira de pines se convierte en un conector ISP de 6 pines est\u00e1ndar. Conectar el cable ISP entre BusPirate y m\u00f3dulo Digispark cableando como sigue (aunque el ATtiny85 funciona a 5V, parece que soporta sin problemas ser programado a 3.3V): Pin ISP Se\u00f1al Pin BusPirate 1 MISO Negro:MISO 2 +3.3V Rojo:+3.3V 3 SCK Morado:CLK 4 MOSI Gris:MOSI 5 CS Blanco:CS 6 GND Marr\u00f3n:GND Configuramos el Arduino IDE con los siguientes par\u00e1metros: Placa : ATtiny25/45/85 Procesador : ATtiny85 Clock : Internal 8 MHz Programador : BusPirate as ISP Alternativamente podemos programar con el comando avrdude con el argumento -c buspirate . Por ejemplo para obtener el estado de los Fuse bits: $ avrdude -c buspirate -P /dev/ttyUSB0 -p attiny85 -v A partir de aqu\u00ed hay varias cosas que podemos hacer.","title":"Programaci\u00f3n con BusPirate"},{"location":"ingenieria/arduino.html#programacion-con-minipro-tl866xx-desde-linux","text":"Teniendo el programa minipro instalado, montar el ATtiny85 en el socket ZIP y conectar el cable USB. Interesa antes de empezar, asegurarnos de que el MC es identificado correctamente, lo que nos servir\u00e1 adem\u00e1s para comprobar que las conexiones son correctas, para lo que ejecutamos: edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 --read_id Found TL866II+ 04.2.125 (0x27d) Chip ID OK: 0x1E930B Una vez que vemos que la comunicaci\u00f3n se establece sin problemas, grabamos el MC con el siguiente comando: edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 -w PROGRAMA.hex -c code Found TL866II+ 04.2.125 (0x27d) Chip ID OK: 0x1E930B Found Intel hex file. Erasing... 0.01Sec OK Writing Code... 1.10Sec OK Reading Code... 0.49Sec OK Verification OK Para los fuse bits, escribiremos un fichero de texto con el siguiente contenido (los valores de los fusebits que se muestran a continuaci\u00f3n son los predeterminados, pero habr\u00e1 que sustituirlos por los que nos interesen; esta calculadora es muy \u00fatil): fuses_lo = 0x62 fuses_hi = 0xdf fuses_ext = 0xff lock_byte = 0xff Una vez creado el fichero, cargaremos sus valores en el MC con el siguiente comando: edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 -w PROGRAMA.fuses.conf -c config Found TL866II+ 04.2.125 (0x27d) Chip ID OK: 0x1E930B Writing fuses... 0.02Sec OK","title":"Programaci\u00f3n con MiniPRO TL866xx desde Linux"},{"location":"ingenieria/arduino.html#cambiar-el-reloj","text":"El ajuste del reloj que va a utilizar el MC es muy importante. Necesitamos conocerla para que el MC responda cuando queramos comunicarnos con \u00e9l para cargarle un programa. Si en alg\u00fan momento lo configuramos para que utilice reloj externo, tendremos que conectar uno entre los pines PB3 y PB4 siguiendo el datasheet. El ajuste del reloj se hace cambiando los fuse bits de 3 bytes especiales del MC. Esto desde el Arduino IDE se hace con el comando \"Quemar Bootloader\" que no hace otra cosa que cambiar estos fuse bits. En caso de cometer alg\u00fan error configurando los fuse bits y tener problemas para comunicar con el MC, se puede usar un programador de alto voltaje para forzar el cambio de los fusebits.","title":"Cambiar el reloj"},{"location":"ingenieria/arduino.html#cargar-un-sketch","text":"Simplemente utilizaremos el bot\u00f3n para subir el sketch que tengamos abierto en el Arduino IDE.","title":"Cargar un sketch"},{"location":"ingenieria/bus_pirate.html","text":"Bus Pirate \u00b6 Enlaces \u00b6 Bus Pirate - Documentaci\u00f3n oficial BusPirate oscilloscope python script Bus Pirate AVR Programming Referencia \u00b6 General Protocol interaction --------------------------------------------------------------------------- ? This help (0) List current macros =X/|X Converts X/reverse X (x) Macro x ~ Selftest [ Start # Reset ] Stop $ Jump to bootloader { Start with read &/% Delay 1 us/ms } Stop a/A/@ AUXPIN (low/HI/READ) \"abc\" Send string b Set baudrate 123 c/C AUX assignment (aux/CS) 0x123 d/D Measure ADC (once/CONT.) 0b110 Send value f Measure frequency r Read g/S Generate PWM/Servo / CLK hi h Commandhistory \\ CLK lo i Versioninfo/statusinfo ^ CLK tick l/L Bitorder (msb/LSB) - DAT hi m Change mode _ DAT lo o Set output type . DAT read p/P Pullup resistors (off/ON) ! Bit read s Script engine : Repeat e.g. r:10 v Show volts/states . Bits to read/write e.g. 0x55.2 w/W PSU (off/ON) <x>/<x= >/<0> Usermacro x/assign x/list all Conexi\u00f3n \u00b6 $ screen /dev/buspirate 115200 8N1 Adaptador USB-UART (modo bridge) \u00b6 Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia: HiZ>m3 Set serial port speed: (bps) 1. 300 2. 1200 3. 2400 4. 4800 5. 9600 6. 19200 7. 38400 8. 57600 9. 115200 10. BRG raw value (1)>5 Data bits and parity: 1. 8, NONE *default 2. 8, EVEN 3. 8, ODD 4. 9, NONE (1)>1 Stop bits: 1. 1 *default 2. 2 (1)>1 Receive polarity: 1. Idle 1 *default 2. Idle 0 (1)>1 Select output type: 1. Open drain (H=Hi-Z, L=GND) 2. Normal (H=3.3V, L=GND) (1)>2 Ready UART>(0) 0.Macro menu 1.Transparent bridge 2. Live monitor 3.Bridge with flow control UART>(1) UART bridge Reset to exit Are you sure? y Adaptador USB-UART (modo debug) \u00b6 Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed , s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando r ) se nos mostrar\u00e1 el error: 1 READ : 0x40 * Bytes dropped *<<< bytes dropped error En esas situaciones usar el modo transparente o usar el comando 'start' ( [ ).","title":"Bus Pirate"},{"location":"ingenieria/bus_pirate.html#bus-pirate","text":"","title":"Bus Pirate"},{"location":"ingenieria/bus_pirate.html#enlaces","text":"Bus Pirate - Documentaci\u00f3n oficial BusPirate oscilloscope python script Bus Pirate AVR Programming","title":"Enlaces"},{"location":"ingenieria/bus_pirate.html#referencia","text":"General Protocol interaction --------------------------------------------------------------------------- ? This help (0) List current macros =X/|X Converts X/reverse X (x) Macro x ~ Selftest [ Start # Reset ] Stop $ Jump to bootloader { Start with read &/% Delay 1 us/ms } Stop a/A/@ AUXPIN (low/HI/READ) \"abc\" Send string b Set baudrate 123 c/C AUX assignment (aux/CS) 0x123 d/D Measure ADC (once/CONT.) 0b110 Send value f Measure frequency r Read g/S Generate PWM/Servo / CLK hi h Commandhistory \\ CLK lo i Versioninfo/statusinfo ^ CLK tick l/L Bitorder (msb/LSB) - DAT hi m Change mode _ DAT lo o Set output type . DAT read p/P Pullup resistors (off/ON) ! Bit read s Script engine : Repeat e.g. r:10 v Show volts/states . Bits to read/write e.g. 0x55.2 w/W PSU (off/ON) <x>/<x= >/<0> Usermacro x/assign x/list all","title":"Referencia"},{"location":"ingenieria/bus_pirate.html#conexion","text":"$ screen /dev/buspirate 115200 8N1","title":"Conexi\u00f3n"},{"location":"ingenieria/bus_pirate.html#adaptador-usb-uart-modo-bridge","text":"Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia: HiZ>m3 Set serial port speed: (bps) 1. 300 2. 1200 3. 2400 4. 4800 5. 9600 6. 19200 7. 38400 8. 57600 9. 115200 10. BRG raw value (1)>5 Data bits and parity: 1. 8, NONE *default 2. 8, EVEN 3. 8, ODD 4. 9, NONE (1)>1 Stop bits: 1. 1 *default 2. 2 (1)>1 Receive polarity: 1. Idle 1 *default 2. Idle 0 (1)>1 Select output type: 1. Open drain (H=Hi-Z, L=GND) 2. Normal (H=3.3V, L=GND) (1)>2 Ready UART>(0) 0.Macro menu 1.Transparent bridge 2. Live monitor 3.Bridge with flow control UART>(1) UART bridge Reset to exit Are you sure? y","title":"Adaptador USB-UART (modo bridge)"},{"location":"ingenieria/bus_pirate.html#adaptador-usb-uart-modo-debug","text":"Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed , s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando r ) se nos mostrar\u00e1 el error: 1 READ : 0x40 * Bytes dropped *<<< bytes dropped error En esas situaciones usar el modo transparente o usar el comando 'start' ( [ ).","title":"Adaptador USB-UART (modo debug)"},{"location":"ingenieria/freecad.html","text":"FreeCAD \u00b6 Enlaces \u00b6 Tutoriales de ObiJuan: Temporada 1 , Temporada 2 Manuales FreeCAD oficiales Wiki oficial KiCAD StepUp cheat sheet Repositorio de Addons Tutorials Learn FreeCAD : Tutoriales en v\u00eddeo. Importaci\u00f3n modelo 3D KiCad \u00b6 KiCad StepUp Cheat Sheeet . Instalar kicadStepUpMod desde Addon manager en FreeCAD. Conviene que en KiCad est\u00e9 instalado el paquete kicad-packages3d para que adem\u00e1s de la PCB se exporten los vol\u00famenes 3D de los componentes. Comprobar que se corresponde la ruta del par\u00e1metro KISYS3DMOD en ambos programas ( Preferences... en FreeCAD y Configure Paths... en KiCad). Para que aparezcan los ajustes de kicadStepUpGui en las preferencias de FreeCAD hay que cargar antes el workbench, ya que para preservar recursos, los workbench no se cargan hasta ser utilizados. Esto puede forzarse por medio de Preferences > Workbenches , seleccionando el m\u00f3dulo y pulsando Load Selected . Cambiar al workbench kicadStepUp . Pulsar el bot\u00f3n para importar el dise\u00f1o 3D de la PCB. Tras importarlo puede convenir agrupar todos los componentes y la PCB para que queden como un objeto \u00fanico. Para ello utilizar la siguiente herramienta del workbench Draft : Cheat sheet \u00b6 Configuraci\u00f3n recomendada: Preferences... General: Document > Save thumbnail into project file when saving document : ON Document > Authoring and License > Author name : Nuestro nombre Document > Authoring and License > Default license : CreativeCommons Attribution-ShareAlike Output window > Redirect internal Python output to report view : ON Output window > Redirect internal Python errors to report view : ON Display: 3D View > 3D Navigation : Gesture (Workbench Part ) Part design: General > Model settings > Automatically check model after boolean operation : ON General > Model settings > Automatically refine model after boolean operation : ON General > Model settings > Automatically refine model after sketch-based operation : ON Tipo de navegaci\u00f3n: Right click > Navigation styles : Gesture Men\u00fas y Especialidades: File > Import... : Permite importar ficheros STEP para hacer modificaciones. Edit > Aligment... : Permite situar un s\u00f3lido sobre un plano. Tools > Dependency graph : \u00c1rbol de dependencias entre objetos. Duplicado de objetos (Copias totales, copias simples y piezas clonadas) Copia total (copiando dependencias): Edit > Copy/Paste . La pieza resultante es param\u00e9trica y no depende de la original. Copia simple (se pierden dependencias): Part > Create simple copy . La pieza resultante no es param\u00e9trica y no depende de la original. En el arbol de dependencias aparece como una pieza aislada. Clones (referenciando las dependencias de la original): Draft > Modification > Clone . La pieza resultante es param\u00e9trica por medio de la original. Dise\u00f1o de vol\u00famenes a partir de puntos, aristas y caras Restricciones en lineas Redondeando trayectorias: Tuber\u00edas, tubos y cables L\u00edneas: Intersecci\u00f3n, paralelas, perpendiculares y extensi\u00f3n Curvas, elipses y pol\u00edgonos Desplegando objetos Materiales y agrupaciones Generando Planos 2D con cotas y dibujos Haciendo engranajes Bibliotecas de piezas de FreeCAD . La librer\u00eda se encuentra aqu\u00ed . Ensamblaje de Zowi Workbench: Draft : Working plane Tools : Move : Rotate : Offsets : Trim or extend : Joins & Explodes : Edit : Converts between Wire and B-spline : Creates shape 2D : Convert between Draft and Sketch : Array : Multiplicaci\u00f3n de objetos en 1, 2 o 3 dimensiones. Lineal , Axial Clone : Duplicado de objetos vinculados al original con opci\u00f3n de escalado. Put objects in Drawing sheet : Snap tools : Drawing : New drawing : Crear plano de dise\u00f1o. Insert projection : Insertar proyecci\u00f3n en plano de dise\u00f1o. Export to SVG : Exportar a SVG. Part Design : Create sketch : Crear boceto (plano) de un objeto. Pad : Extruir el boceto de un objeto linealmente. Revolve : Extruir el boceto de un objeto axialmente. Pocket : Vaciar boceto de un objeto. Mirror : Simetr\u00eda de espejo. Linear Pattern : Multiplicaci\u00f3n lineal de una operaci\u00f3n. Polar Pattern : Multiplicaci\u00f3n polar de una operaci\u00f3n. Part : Dise\u00f1o de vol\u00famenes 3D. Algunas de sus herramientas: Tools : Parametrized geometric primitives : H\u00e9lices, espirales , cu\u00f1as , prismas , localizaci\u00f3n en un plano ... Shapes : Piezas a partir de aristas y caras. Extrude : Extrusi\u00f3n de trayectorias. Calcado de dibujos con Inkscape . Extrusi\u00f3n de texto con Inkscape . Importar SVG y convertir a Sketch . Extrusi\u00f3n en diagonal de polil\u00edneas Mirror : Simetr\u00eda de espejo. Fillet : Redondeo de aristas. Chamfer : Chafl\u00e1n en aristas. Loft : Interpolaci\u00f3n entre dos bocetos de objetos. Sweep : Extruir el boceto de un objeto a lo largo de una trayectoria. Puede hacerse con torsi\u00f3n si la trayectoria es una h\u00e9lice. Offset : Offset de objetos. Thickness : Carcasas o recipientes a partir de objetos. Fusion : Uni\u00f3n de vol\u00famenes. Si se ha activado el autorefine se mantendr\u00e1 la relaci\u00f3n entre el volumen fusionado y los constituyentes de manera que podremos modificar sus par\u00e1metros. Cut : Sustracci\u00f3n de vol\u00famenes. Si se ha activado el autorefine se mantendr\u00e1 la relaci\u00f3n entre el volumen fusionado y los constituyentes de manera que podremos modificar sus par\u00e1metros. Create shape from mesh : Crear objetos a partir de mallas 3D. El resumen del procedimiento ser\u00eda: Importar STL En este punto, opcionalmente, a veces ayuda utilizar Meshes > Split by components del banco de trabajo Mesh Design . Tambi\u00e9n Analyze > Evaluate and repair mesh del mismo banco de trabajo. Pasar al banco de trabajo Part Part > Create shape from mesh Part > Convert to solid Part > Refine shape Create simple copy Measure : Sketcher : Tools : Fillet : Redondea un v\u00e9rtice de un plano. Trim : Recorta las l\u00edneas sobrantes de un plano. Create edge : Crea linea de referencia en base a una arista de un objeto externo al sketch. Toggles to/from construction mode : Alterna un objeto entre el modo normal y el auxiliar. Constraints :","title":"FreeCAD"},{"location":"ingenieria/freecad.html#freecad","text":"","title":"FreeCAD"},{"location":"ingenieria/freecad.html#enlaces","text":"Tutoriales de ObiJuan: Temporada 1 , Temporada 2 Manuales FreeCAD oficiales Wiki oficial KiCAD StepUp cheat sheet Repositorio de Addons Tutorials Learn FreeCAD : Tutoriales en v\u00eddeo.","title":"Enlaces"},{"location":"ingenieria/freecad.html#importacion-modelo-3d-kicad","text":"KiCad StepUp Cheat Sheeet . Instalar kicadStepUpMod desde Addon manager en FreeCAD. Conviene que en KiCad est\u00e9 instalado el paquete kicad-packages3d para que adem\u00e1s de la PCB se exporten los vol\u00famenes 3D de los componentes. Comprobar que se corresponde la ruta del par\u00e1metro KISYS3DMOD en ambos programas ( Preferences... en FreeCAD y Configure Paths... en KiCad). Para que aparezcan los ajustes de kicadStepUpGui en las preferencias de FreeCAD hay que cargar antes el workbench, ya que para preservar recursos, los workbench no se cargan hasta ser utilizados. Esto puede forzarse por medio de Preferences > Workbenches , seleccionando el m\u00f3dulo y pulsando Load Selected . Cambiar al workbench kicadStepUp . Pulsar el bot\u00f3n para importar el dise\u00f1o 3D de la PCB. Tras importarlo puede convenir agrupar todos los componentes y la PCB para que queden como un objeto \u00fanico. Para ello utilizar la siguiente herramienta del workbench Draft :","title":"Importaci\u00f3n modelo 3D KiCad"},{"location":"ingenieria/freecad.html#cheat-sheet","text":"Configuraci\u00f3n recomendada: Preferences... General: Document > Save thumbnail into project file when saving document : ON Document > Authoring and License > Author name : Nuestro nombre Document > Authoring and License > Default license : CreativeCommons Attribution-ShareAlike Output window > Redirect internal Python output to report view : ON Output window > Redirect internal Python errors to report view : ON Display: 3D View > 3D Navigation : Gesture (Workbench Part ) Part design: General > Model settings > Automatically check model after boolean operation : ON General > Model settings > Automatically refine model after boolean operation : ON General > Model settings > Automatically refine model after sketch-based operation : ON Tipo de navegaci\u00f3n: Right click > Navigation styles : Gesture Men\u00fas y Especialidades: File > Import... : Permite importar ficheros STEP para hacer modificaciones. Edit > Aligment... : Permite situar un s\u00f3lido sobre un plano. Tools > Dependency graph : \u00c1rbol de dependencias entre objetos. Duplicado de objetos (Copias totales, copias simples y piezas clonadas) Copia total (copiando dependencias): Edit > Copy/Paste . La pieza resultante es param\u00e9trica y no depende de la original. Copia simple (se pierden dependencias): Part > Create simple copy . La pieza resultante no es param\u00e9trica y no depende de la original. En el arbol de dependencias aparece como una pieza aislada. Clones (referenciando las dependencias de la original): Draft > Modification > Clone . La pieza resultante es param\u00e9trica por medio de la original. Dise\u00f1o de vol\u00famenes a partir de puntos, aristas y caras Restricciones en lineas Redondeando trayectorias: Tuber\u00edas, tubos y cables L\u00edneas: Intersecci\u00f3n, paralelas, perpendiculares y extensi\u00f3n Curvas, elipses y pol\u00edgonos Desplegando objetos Materiales y agrupaciones Generando Planos 2D con cotas y dibujos Haciendo engranajes Bibliotecas de piezas de FreeCAD . La librer\u00eda se encuentra aqu\u00ed . Ensamblaje de Zowi Workbench: Draft : Working plane Tools : Move : Rotate : Offsets : Trim or extend : Joins & Explodes : Edit : Converts between Wire and B-spline : Creates shape 2D : Convert between Draft and Sketch : Array : Multiplicaci\u00f3n de objetos en 1, 2 o 3 dimensiones. Lineal , Axial Clone : Duplicado de objetos vinculados al original con opci\u00f3n de escalado. Put objects in Drawing sheet : Snap tools : Drawing : New drawing : Crear plano de dise\u00f1o. Insert projection : Insertar proyecci\u00f3n en plano de dise\u00f1o. Export to SVG : Exportar a SVG. Part Design : Create sketch : Crear boceto (plano) de un objeto. Pad : Extruir el boceto de un objeto linealmente. Revolve : Extruir el boceto de un objeto axialmente. Pocket : Vaciar boceto de un objeto. Mirror : Simetr\u00eda de espejo. Linear Pattern : Multiplicaci\u00f3n lineal de una operaci\u00f3n. Polar Pattern : Multiplicaci\u00f3n polar de una operaci\u00f3n. Part : Dise\u00f1o de vol\u00famenes 3D. Algunas de sus herramientas: Tools : Parametrized geometric primitives : H\u00e9lices, espirales , cu\u00f1as , prismas , localizaci\u00f3n en un plano ... Shapes : Piezas a partir de aristas y caras. Extrude : Extrusi\u00f3n de trayectorias. Calcado de dibujos con Inkscape . Extrusi\u00f3n de texto con Inkscape . Importar SVG y convertir a Sketch . Extrusi\u00f3n en diagonal de polil\u00edneas Mirror : Simetr\u00eda de espejo. Fillet : Redondeo de aristas. Chamfer : Chafl\u00e1n en aristas. Loft : Interpolaci\u00f3n entre dos bocetos de objetos. Sweep : Extruir el boceto de un objeto a lo largo de una trayectoria. Puede hacerse con torsi\u00f3n si la trayectoria es una h\u00e9lice. Offset : Offset de objetos. Thickness : Carcasas o recipientes a partir de objetos. Fusion : Uni\u00f3n de vol\u00famenes. Si se ha activado el autorefine se mantendr\u00e1 la relaci\u00f3n entre el volumen fusionado y los constituyentes de manera que podremos modificar sus par\u00e1metros. Cut : Sustracci\u00f3n de vol\u00famenes. Si se ha activado el autorefine se mantendr\u00e1 la relaci\u00f3n entre el volumen fusionado y los constituyentes de manera que podremos modificar sus par\u00e1metros. Create shape from mesh : Crear objetos a partir de mallas 3D. El resumen del procedimiento ser\u00eda: Importar STL En este punto, opcionalmente, a veces ayuda utilizar Meshes > Split by components del banco de trabajo Mesh Design . Tambi\u00e9n Analyze > Evaluate and repair mesh del mismo banco de trabajo. Pasar al banco de trabajo Part Part > Create shape from mesh Part > Convert to solid Part > Refine shape Create simple copy Measure : Sketcher : Tools : Fillet : Redondea un v\u00e9rtice de un plano. Trim : Recorta las l\u00edneas sobrantes de un plano. Create edge : Crea linea de referencia en base a una arista de un objeto externo al sketch. Toggles to/from construction mode : Alterna un objeto entre el modo normal y el auxiliar. Constraints :","title":"Cheat sheet"},{"location":"ingenieria/herramientas.html","text":"Herramientas \u00b6 Bus Pirate \u00b6 Enlaces \u00b6 Bus Pirate - Documentaci\u00f3n oficial BusPirate oscilloscope python script Bus Pirate AVR Programming Referencia \u00b6 General Protocol interaction --------------------------------------------------------------------------- ? This help (0) List current macros =X/|X Converts X/reverse X (x) Macro x ~ Selftest [ Start # Reset ] Stop $ Jump to bootloader { Start with read &/% Delay 1 us/ms } Stop a/A/@ AUXPIN (low/HI/READ) \"abc\" Send string b Set baudrate 123 c/C AUX assignment (aux/CS) 0x123 d/D Measure ADC (once/CONT.) 0b110 Send value f Measure frequency r Read g/S Generate PWM/Servo / CLK hi h Commandhistory \\ CLK lo i Versioninfo/statusinfo ^ CLK tick l/L Bitorder (msb/LSB) - DAT hi m Change mode _ DAT lo o Set output type . DAT read p/P Pullup resistors (off/ON) ! Bit read s Script engine : Repeat e.g. r:10 v Show volts/states . Bits to read/write e.g. 0x55.2 w/W PSU (off/ON) <x>/<x= >/<0> Usermacro x/assign x/list all Conexi\u00f3n \u00b6 $ screen /dev/buspirate 115200 8N1 Adaptador USB-UART (modo bridge) \u00b6 Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia: HiZ>m3 Set serial port speed: (bps) 1. 300 2. 1200 3. 2400 4. 4800 5. 9600 6. 19200 7. 38400 8. 57600 9. 115200 10. BRG raw value (1)>5 Data bits and parity: 1. 8, NONE *default 2. 8, EVEN 3. 8, ODD 4. 9, NONE (1)>1 Stop bits: 1. 1 *default 2. 2 (1)>1 Receive polarity: 1. Idle 1 *default 2. Idle 0 (1)>1 Select output type: 1. Open drain (H=Hi-Z, L=GND) 2. Normal (H=3.3V, L=GND) (1)>2 Ready UART>(0) 0.Macro menu 1.Transparent bridge 2. Live monitor 3.Bridge with flow control UART>(1) UART bridge Reset to exit Are you sure? y Adaptador USB-UART (modo debug) \u00b6 Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed , s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando r ) se nos mostrar\u00e1 el error: 1 READ : 0x40 * Bytes dropped *<<< bytes dropped error En esas situaciones usar el modo transparente o usar el comando 'start' ( [ ). Logic Analizer \u00b6 Enlaces \u00b6 sigrok : Portable, cross-platform, Free/Libre/Open-Source signal analysis software suite that supports various device types (e.g. logic analyzers, oscilloscopes, and many more). Getting started with a logic analyzer Using the USB Logic Analyzer with sigrok PulseView M328 Transistor Tester \u00b6 Enlaces \u00b6 2016 DIY KITS ATMEAG328P M328 Transistor Tester LCR Diode Capacitance ESR meter PWM Square wave Signal Generator with case : ~12\u20ac M328 Transistor Tester manual Enumeraci\u00f3n funciones \u00b6 Firmware 1.12k Transistor : Medidor de transistores. Frecuency : Medidor de frecuencias. Conectar las puntas en la entrada PWM (superior). f-Generator : Generador de frecuencias. Conectar las puntas en la salida PWM (inferior). 10-bit PWM : Generador de se\u00f1al PWM. Conectar las puntas en la salida PWM (inferior). C+ESR@TP1:3 : Capac\u00edmetro con posibilidad de medir en placa ya que genera tensiones de ~300mV. Aunque es recomendable medir antes con un oscilosc\u00f3pio si es as\u00ed (mi unidad aplicaba 5V igual que el capac\u00edmetro normal). Conectar un par de puntas en las entradas 1 y 3. Medidor de inductancias : Capac\u00edmetro : No sirve para medir en placa ya que genera tensiones de 5V. Descargar los condensadores antes de aplicarlos al medidor. DS18B20 : C(uF)-correction : Calibraci\u00f3n del capac\u00edmetro. IR_Decoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un receptor IR en las entradas 1, 2 y 3. IR_Encoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un LED emisor de IR en la salida PWM (inferior). DHT11 : Selftest : Calibraci\u00f3n del tester. Voltage : Volt\u00edmetro. Conectar las puntas en la entrada de volt\u00edmetro (inferior). FrontColor : Color RGB de los caracteres. BackColor : Color RGB del fondo. Show data : Muestra los datos de calibraci\u00f3n y el juego de gr\u00e1ficos y caracteres. Switch off : Apagado. Firmware \u00b6 El repositorio SVN del proyecto se baja con: $ svn checkout svn://mikrocontroller.net/transistortester Para actualizarlo a la \u00faltima versi\u00f3n una vez bajado, ejecutar desde el propio directorio: $ svn update Tambi\u00e9n se puede explorar el repositorio en esta URL . La configuraci\u00f3n del modelo enlazado arriba es la mega328_color_kit . Instrucciones sobre la carga del firmware en este hilo del foro EEVBlog . MiniPRO TL866xx \u00b6 Enlaces \u00b6 XGecu T56 Universal programmer minipro : An open source program for controlling the MiniPRO TL866xx series of chip programmers. Instalaci\u00f3n en Linux Firmware \u00b6 Descargar el \u00faltimo paquete del fabricante desde este enlace , que incluye la utilidad de interfaz de usuario para Windows y el fichero .dat con el firmware. Descomprimir el .exe que lleva dentro. Ese exe a su vez es un paquete autodescomprimible, por lo que se puede abrir con un descompresor como WinRAR o el Gestor de archivadores de Linux. Extraer de \u00e9l el fichero updateII.dat . Por alg\u00fan motivo da error con el Gestor de archivadores de Linux. Se puede descomprimir con Archive Extractor Online . Flashear el fichero updateII.dat con la utilidad minipro : edumoreno@eduardo-HP-Folio-13:~$ minipro -F updateII.dat Found TL866II+ 04.2.86 (0x256) Warning: Firmware is out of date. Expected 04.2.123 (0x27b) Found 04.2.86 (0x256) updateII.dat contains firmware version 4.2.125 (newer) Do you want to continue with firmware update? y/n:y Switching to bootloader... OK Erasing... OK Reflashing... 100% Resetting device... OK Reflash... OK Uso de utilidad minipro de linea de comando \u00b6 Versi\u00f3n firmware y utilidad: minipro -V Testeo dispositivo: minipro -t B\u00fasqueda de integrados compatibles: minipro -L <search> Indicar modelo de programador TL866II+ en comandos: minipro -q tl866ii Programar integrado (ejemplo con ATTiny85): minipro -p ATTINY85 -w <filename> Leer integrado (ejemplo con ATTiny85; adem\u00e1s del volcado de la flash, genera un par de ficheros adicionales, uno con el volcado de la EEPROM y otro con la configuraci\u00f3n de fuse bits): minipro -p ATTINY85 -r <filename> Leer tipo de memoria concreta (posibles valores: code, data, config) en integrado (ejemplo con ATTiny855): minipro -p ATTINY85 -r <filename> -c <type> Pinecil \u00b6 Firmware \u00b6 Wiki oficial IronOS - Flexible Soldering iron control Firmware Menu cheatsheet \u00b6 Correspondiente a IronOS v2.16: Soldering mode + short press: Short temperature increment + long press: Long temperature increment - short press: Short temperature decrement - long press: Long temperature decrement +/- same time press: Exit soldering mode - long press: Exit soldering mode + long press: Boost mode (if enabled) Power settings Power source: Sets cutoff voltage. (DC 10V) (S 3.3V per cell, disable power limit) # Default: DC QC voltage: Max QC voltage the iron should negotiate for # Default: 9.0 PD timeout: PD negotiation timeout in 100ms steps for compatibility with some QC chargers # Default: 20 Soldering settings Boost temp: Temperature used in \"boost mode\" # Default: 420 Heat on power up: O=off | S=soldering temp | Z=standby at sleep temp until moved | R=standby without heating until moved # Default: O Temp change short: Temperature-change-increment on short button press # Default: 1 Temp change long: Temperature-change-increment on long button press # Default: 10 Allow locking buttons: While soldering, hold down both buttons to toggle locking them (D=disable | B=boost mode only | F=full locking) # Default: D Sleep mode Motion sensitivity: 0=off | 1=least sensitive | ... | 9=most sensitive # Default: 7 Sleep temp: Tip temperature while in \"sleep mode\" # Default: 150 Sleep timeout: Interval before \\\"sleep mode\\\" kicks in (S=seconds | M=minutes) # Default: 50S Shutdown timeout: Interval before the iron shuts down (M=minutes) # Default: 10M Hall sensor sensitivity: Sensitivity of the Hall effect sensor to detect sleep (O=off | L=low | M=medium | H=high) # Default: L User interface Temperature unit: C=Celsius | F=Fahrenheit # Default: C Display orientation: R=right-handed | L=left-handed | A=automatic # Default: R Cooldown blink: Flash the temperature reading after heating was halted while the tip is still hot # Default: False Scrolling speed: Speed info text scrolls past at (S=slow | F=fast) # Default: S Reverse + - keys: Reverse assignment of buttons for temperature adjustment # Default: False Anim. speed: Pace of icon animations in menu (O=off | S=slow | M=medium | F=fast) # Default: M Anim. loop: Loop icon animations in main menu # Default: True Brightness: Adjust the brightness of the OLED screen # Default: 4 Invert: Invert the colours of the OLED screen # Default: False Detailed idle screen: Display detailed information in a smaller font on the idle screen # Default: False Detailed solder screen: Display detailed information in a smaller font on soldering screen # Default: False Advanced settings Power limit: Maximum power the iron can use (W=watt) # Default: Off Factory reset?: Reset settings to default Calibrate temperature?: Start tip temperature offset calibration Calibrate input voltage?: Start VIN calibration (long press to exit) Power pulse: Intensity of power of keep-awake-pulse (watt) # Default: Off","title":"Herramientas"},{"location":"ingenieria/herramientas.html#herramientas","text":"","title":"Herramientas"},{"location":"ingenieria/herramientas.html#bus-pirate","text":"","title":"Bus Pirate"},{"location":"ingenieria/herramientas.html#enlaces","text":"Bus Pirate - Documentaci\u00f3n oficial BusPirate oscilloscope python script Bus Pirate AVR Programming","title":"Enlaces"},{"location":"ingenieria/herramientas.html#referencia","text":"General Protocol interaction --------------------------------------------------------------------------- ? This help (0) List current macros =X/|X Converts X/reverse X (x) Macro x ~ Selftest [ Start # Reset ] Stop $ Jump to bootloader { Start with read &/% Delay 1 us/ms } Stop a/A/@ AUXPIN (low/HI/READ) \"abc\" Send string b Set baudrate 123 c/C AUX assignment (aux/CS) 0x123 d/D Measure ADC (once/CONT.) 0b110 Send value f Measure frequency r Read g/S Generate PWM/Servo / CLK hi h Commandhistory \\ CLK lo i Versioninfo/statusinfo ^ CLK tick l/L Bitorder (msb/LSB) - DAT hi m Change mode _ DAT lo o Set output type . DAT read p/P Pullup resistors (off/ON) ! Bit read s Script engine : Repeat e.g. r:10 v Show volts/states . Bits to read/write e.g. 0x55.2 w/W PSU (off/ON) <x>/<x= >/<0> Usermacro x/assign x/list all","title":"Referencia"},{"location":"ingenieria/herramientas.html#conexion","text":"$ screen /dev/buspirate 115200 8N1","title":"Conexi\u00f3n"},{"location":"ingenieria/herramientas.html#adaptador-usb-uart-modo-bridge","text":"Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia: HiZ>m3 Set serial port speed: (bps) 1. 300 2. 1200 3. 2400 4. 4800 5. 9600 6. 19200 7. 38400 8. 57600 9. 115200 10. BRG raw value (1)>5 Data bits and parity: 1. 8, NONE *default 2. 8, EVEN 3. 8, ODD 4. 9, NONE (1)>1 Stop bits: 1. 1 *default 2. 2 (1)>1 Receive polarity: 1. Idle 1 *default 2. Idle 0 (1)>1 Select output type: 1. Open drain (H=Hi-Z, L=GND) 2. Normal (H=3.3V, L=GND) (1)>2 Ready UART>(0) 0.Macro menu 1.Transparent bridge 2. Live monitor 3.Bridge with flow control UART>(1) UART bridge Reset to exit Are you sure? y","title":"Adaptador USB-UART (modo bridge)"},{"location":"ingenieria/herramientas.html#adaptador-usb-uart-modo-debug","text":"Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed , s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando r ) se nos mostrar\u00e1 el error: 1 READ : 0x40 * Bytes dropped *<<< bytes dropped error En esas situaciones usar el modo transparente o usar el comando 'start' ( [ ).","title":"Adaptador USB-UART (modo debug)"},{"location":"ingenieria/herramientas.html#logic-analizer","text":"","title":"Logic Analizer"},{"location":"ingenieria/herramientas.html#enlaces_1","text":"sigrok : Portable, cross-platform, Free/Libre/Open-Source signal analysis software suite that supports various device types (e.g. logic analyzers, oscilloscopes, and many more). Getting started with a logic analyzer Using the USB Logic Analyzer with sigrok PulseView","title":"Enlaces"},{"location":"ingenieria/herramientas.html#m328-transistor-tester","text":"","title":"M328 Transistor Tester"},{"location":"ingenieria/herramientas.html#enlaces_2","text":"2016 DIY KITS ATMEAG328P M328 Transistor Tester LCR Diode Capacitance ESR meter PWM Square wave Signal Generator with case : ~12\u20ac M328 Transistor Tester manual","title":"Enlaces"},{"location":"ingenieria/herramientas.html#enumeracion-funciones","text":"Firmware 1.12k Transistor : Medidor de transistores. Frecuency : Medidor de frecuencias. Conectar las puntas en la entrada PWM (superior). f-Generator : Generador de frecuencias. Conectar las puntas en la salida PWM (inferior). 10-bit PWM : Generador de se\u00f1al PWM. Conectar las puntas en la salida PWM (inferior). C+ESR@TP1:3 : Capac\u00edmetro con posibilidad de medir en placa ya que genera tensiones de ~300mV. Aunque es recomendable medir antes con un oscilosc\u00f3pio si es as\u00ed (mi unidad aplicaba 5V igual que el capac\u00edmetro normal). Conectar un par de puntas en las entradas 1 y 3. Medidor de inductancias : Capac\u00edmetro : No sirve para medir en placa ya que genera tensiones de 5V. Descargar los condensadores antes de aplicarlos al medidor. DS18B20 : C(uF)-correction : Calibraci\u00f3n del capac\u00edmetro. IR_Decoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un receptor IR en las entradas 1, 2 y 3. IR_Encoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un LED emisor de IR en la salida PWM (inferior). DHT11 : Selftest : Calibraci\u00f3n del tester. Voltage : Volt\u00edmetro. Conectar las puntas en la entrada de volt\u00edmetro (inferior). FrontColor : Color RGB de los caracteres. BackColor : Color RGB del fondo. Show data : Muestra los datos de calibraci\u00f3n y el juego de gr\u00e1ficos y caracteres. Switch off : Apagado.","title":"Enumeraci\u00f3n funciones"},{"location":"ingenieria/herramientas.html#firmware","text":"El repositorio SVN del proyecto se baja con: $ svn checkout svn://mikrocontroller.net/transistortester Para actualizarlo a la \u00faltima versi\u00f3n una vez bajado, ejecutar desde el propio directorio: $ svn update Tambi\u00e9n se puede explorar el repositorio en esta URL . La configuraci\u00f3n del modelo enlazado arriba es la mega328_color_kit . Instrucciones sobre la carga del firmware en este hilo del foro EEVBlog .","title":"Firmware"},{"location":"ingenieria/herramientas.html#minipro-tl866xx","text":"","title":"MiniPRO TL866xx"},{"location":"ingenieria/herramientas.html#enlaces_3","text":"XGecu T56 Universal programmer minipro : An open source program for controlling the MiniPRO TL866xx series of chip programmers. Instalaci\u00f3n en Linux","title":"Enlaces"},{"location":"ingenieria/herramientas.html#firmware_1","text":"Descargar el \u00faltimo paquete del fabricante desde este enlace , que incluye la utilidad de interfaz de usuario para Windows y el fichero .dat con el firmware. Descomprimir el .exe que lleva dentro. Ese exe a su vez es un paquete autodescomprimible, por lo que se puede abrir con un descompresor como WinRAR o el Gestor de archivadores de Linux. Extraer de \u00e9l el fichero updateII.dat . Por alg\u00fan motivo da error con el Gestor de archivadores de Linux. Se puede descomprimir con Archive Extractor Online . Flashear el fichero updateII.dat con la utilidad minipro : edumoreno@eduardo-HP-Folio-13:~$ minipro -F updateII.dat Found TL866II+ 04.2.86 (0x256) Warning: Firmware is out of date. Expected 04.2.123 (0x27b) Found 04.2.86 (0x256) updateII.dat contains firmware version 4.2.125 (newer) Do you want to continue with firmware update? y/n:y Switching to bootloader... OK Erasing... OK Reflashing... 100% Resetting device... OK Reflash... OK","title":"Firmware"},{"location":"ingenieria/herramientas.html#uso-de-utilidad-minipro-de-linea-de-comando","text":"Versi\u00f3n firmware y utilidad: minipro -V Testeo dispositivo: minipro -t B\u00fasqueda de integrados compatibles: minipro -L <search> Indicar modelo de programador TL866II+ en comandos: minipro -q tl866ii Programar integrado (ejemplo con ATTiny85): minipro -p ATTINY85 -w <filename> Leer integrado (ejemplo con ATTiny85; adem\u00e1s del volcado de la flash, genera un par de ficheros adicionales, uno con el volcado de la EEPROM y otro con la configuraci\u00f3n de fuse bits): minipro -p ATTINY85 -r <filename> Leer tipo de memoria concreta (posibles valores: code, data, config) en integrado (ejemplo con ATTiny855): minipro -p ATTINY85 -r <filename> -c <type>","title":"Uso de utilidad minipro de linea de comando"},{"location":"ingenieria/herramientas.html#pinecil","text":"","title":"Pinecil"},{"location":"ingenieria/herramientas.html#firmware_2","text":"Wiki oficial IronOS - Flexible Soldering iron control Firmware","title":"Firmware"},{"location":"ingenieria/herramientas.html#menu-cheatsheet","text":"Correspondiente a IronOS v2.16: Soldering mode + short press: Short temperature increment + long press: Long temperature increment - short press: Short temperature decrement - long press: Long temperature decrement +/- same time press: Exit soldering mode - long press: Exit soldering mode + long press: Boost mode (if enabled) Power settings Power source: Sets cutoff voltage. (DC 10V) (S 3.3V per cell, disable power limit) # Default: DC QC voltage: Max QC voltage the iron should negotiate for # Default: 9.0 PD timeout: PD negotiation timeout in 100ms steps for compatibility with some QC chargers # Default: 20 Soldering settings Boost temp: Temperature used in \"boost mode\" # Default: 420 Heat on power up: O=off | S=soldering temp | Z=standby at sleep temp until moved | R=standby without heating until moved # Default: O Temp change short: Temperature-change-increment on short button press # Default: 1 Temp change long: Temperature-change-increment on long button press # Default: 10 Allow locking buttons: While soldering, hold down both buttons to toggle locking them (D=disable | B=boost mode only | F=full locking) # Default: D Sleep mode Motion sensitivity: 0=off | 1=least sensitive | ... | 9=most sensitive # Default: 7 Sleep temp: Tip temperature while in \"sleep mode\" # Default: 150 Sleep timeout: Interval before \\\"sleep mode\\\" kicks in (S=seconds | M=minutes) # Default: 50S Shutdown timeout: Interval before the iron shuts down (M=minutes) # Default: 10M Hall sensor sensitivity: Sensitivity of the Hall effect sensor to detect sleep (O=off | L=low | M=medium | H=high) # Default: L User interface Temperature unit: C=Celsius | F=Fahrenheit # Default: C Display orientation: R=right-handed | L=left-handed | A=automatic # Default: R Cooldown blink: Flash the temperature reading after heating was halted while the tip is still hot # Default: False Scrolling speed: Speed info text scrolls past at (S=slow | F=fast) # Default: S Reverse + - keys: Reverse assignment of buttons for temperature adjustment # Default: False Anim. speed: Pace of icon animations in menu (O=off | S=slow | M=medium | F=fast) # Default: M Anim. loop: Loop icon animations in main menu # Default: True Brightness: Adjust the brightness of the OLED screen # Default: 4 Invert: Invert the colours of the OLED screen # Default: False Detailed idle screen: Display detailed information in a smaller font on the idle screen # Default: False Detailed solder screen: Display detailed information in a smaller font on soldering screen # Default: False Advanced settings Power limit: Maximum power the iron can use (W=watt) # Default: Off Factory reset?: Reset settings to default Calibrate temperature?: Start tip temperature offset calibration Calibrate input voltage?: Start VIN calibration (long press to exit) Power pulse: Intensity of power of keep-awake-pulse (watt) # Default: Off","title":"Menu cheatsheet"},{"location":"ingenieria/kicad.html","text":"KiCad \u00b6 Enlaces \u00b6 Creating A PCB In Everything: KiCad: Part 1 , Part 2 y Part 3 KiCad Best Practices: Library Management Desing Rules recomendadas para minimizar problemas en fabricaci\u00f3n PCB's KiCad Templates for new projects : Plantillas con ajustes adecuados para distintos fabricantes de PCBs. Sizing Logos in KiCAD Librer\u00eda de componentes de JLCPCB para Assembly Service Calculadoras de conversi\u00f3n en l\u00ednea por DigiKey Svg2Shenzhen : Inkscape extension for exporting drawings into a KiCad PCB. Descarga de footprints y modelos 3D: SnapEDA PARTcommunity Interactive HTML BOM plugin for KiCad Herramientas de Jan Mr\u00e1zek: KiKit : Automation for KiCAD: panelization, automatic DRC check, generating assembly data. PcbDraw , Pinion : Making nice pinout diagrams for your boards JLCPars : Parametric search for electronics components YSpurGear , YBevelGear : Parametric generators for gears in Fusion 360 which allow you to edit the gear parameters in history. Uso de etiquetas en KiCad para la conexi\u00f3n de componentes Best practices and considerations when designing your PCB Solder-stencil.me : Aplicaci\u00f3n/servicio para generar STLs a partir de los Gerber para imprimir stencils con una impresora 3D. Gesti\u00f3n de librer\u00edas \u00b6 Crear la siguiente estructura de directorios al crear un nuevo proyecto: 1 2 3 4 5 6 7 8 mi_proyecto \u21b33d_models // .STEP and .WRL model files for all footprints \u21b3datasheets // data sheets for components used \u21b3gerber // final production files \u21b3images // SVG images and 3D board renders \u21b3lib_sch // schematic symbols \u21b3lib_fp.pretty // footprints \u21b3pdf // schematics, board layouts, dimension drawings Conforme se va editando un esquem\u00e1tico, KiCad va incorporando todos los s\u00edmbolos utilizados (procedentes de las librer\u00edas de la aplicaci\u00f3n y de las creadas para el proyecto) a una librer\u00eda de backup llamada \"mi_proyecto-cache.lib\". Una vez que el esquem\u00e1tico est\u00e9 completo, copiar dicha librer\u00eda al directorio lib_sch , renombr\u00e1ndola para quitar el sufijo -cache del nombre, es decir quedando lib_sch/mi_proyecto.lib . En el editor del esquem\u00e1tico abrir el comando de men\u00fa Preferencias > Administrar librer\u00edas de s\u00edmbolos... , seleccionar la pesta\u00f1a Librer\u00edas espec\u00edficas del proyecto y a\u00f1adir la librer\u00eda que hemos copiado en el paso anterior por medio del bot\u00f3n con forma de carpeta ( Add existing library to table ). De esta forma nunca perderemos los s\u00edmbolos utilizados durante la creaci\u00f3n del esquema (se podr\u00edan modificar al actualizar las librer\u00edas del programa): Una alternativa a la forma de trabajar anterior es recoger todos los s\u00edmbolos y footprints generados en una librer\u00eda independiente que se pueda a\u00f1adir a todos los proyectos, una especie de repositorio personal. La incorporaremos como un subm\u00f3dulo git . Para ello seguir estos pasos: Inicializar un repositorio git para el proyecto: $ cd mi_proyecto $ git init Instalar la librer\u00eda como un subm\u00f3dulo git en un directorio llamado lib : $ git submodule add git@github.com:eduardofilo/kicad_footprints.git lib A\u00f1adir la librer\u00eda de s\u00edmbolos desde Preferences > Manage Symbol Libraries... > Project Specific Libraries : Y la librer\u00eda de footprints desde Preferences > Manage Footprint Libraries... > Project Specific Libraries : Workflow \u00b6 En general KiCad se utiliza con atajos de teclado. Para obtener los atajos de teclado que sirven en una de las aplicaciones, pulsar Ctrl+F1 . Crear proyecto: Desde la ventana principal del programa, File > FNew > Project... Dise\u00f1ar s\u00edmbolo: Abrir el programa Symbol Editor . Para mantener los ficheros del nuevo s\u00edmbolo, escoger uno de estos caminos en funci\u00f3n de si se quiere mantener el s\u00edmbolo exclusivamente dentro del proyecto o de forma global: Crear una nueva librer\u00eda con el comando File > New Library... en el directorio lib_sch . En el popup Add To Library Table que aparece seleccionar la opci\u00f3n Project . Instalar a nivel global ( Preferences > Manage Symbol Libraries... ) las que se mantienen en este repositorio . Seleccionar la librer\u00eda recien creada o importada y pulsar el bot\u00f3n Create new symbol . Se nos preguntar\u00e1 por la librer\u00eda donde incorporarlo. Seleccionar la que acabamos de crear (aparecer\u00e1 al final). Rellenar el cuadro Symbol Properties . Fundamentalmente tenemos que dar un nombre para el componente. Crear el s\u00edmbolo del componente utilizando fundamentalmente los siguientes atajos de teclado: M : Mover objeto. P : Crear pin. El c\u00edrculo al final de la l\u00ednea representa el punto donde se har\u00e1 la conexi\u00f3n. Supr : Eliminar objeto. Decorar el s\u00edmbolo con las herramientas de dibujo. Guardar los cambios. Dise\u00f1ar esquem\u00e1tico: Abrir el programa Schematic Layout Editor (eeschema) . A\u00f1adir los s\u00edmbolos que van a componer el esquem\u00e1tico con la ayuda de los siguientes atajos: A : A\u00f1adir s\u00edmbolo. P : A\u00f1adir fuente de alimentaci\u00f3n o masa. C : Copiar s\u00edmbolo. Una vez que tengamos todos los s\u00edmbolos a la vista los reorganizaremos y cablearemos con los siguientes atajos de teclado: M : Mover objeto (rompe las conexiones). G : Arrastrar objeto (mantiene las conexiones). R : Rotar objeto. E : Editar propiedades del objeto como Referencia ( U ), Valor ( V ) o Footprint ( F ). W : Conexi\u00f3n entre s\u00edmbolos. K : Terminar el trazado de una conexi\u00f3n. Q : A\u00f1adir no conexi\u00f3n. L : A\u00f1adir etiqueta de red. I : A\u00f1adir polil\u00ednea. T : A\u00f1adir texto. Dar valores a los componentes que lo necesiten (Resistencias, Condesadores, Diodos, etc.) con el atajo V o E . Dar nombre a los componentes. Se puede hacer autom\u00e1ticamente con la herramienta de anotaci\u00f3n a la que se accede con el bot\u00f3n de la barra superior. Asociar s\u00edmbolos del esquem\u00e1tico con huellas PCB ejecutando CvPCB. . Aprovechar los botones de filtrado, sobre todo Filter footprint list using a partial name or a pattern . Dise\u00f1ar las huellas que no se encuentren en la librer\u00eda: Abrir el programa Footprint Editor . Para mantener los ficheros de la nueva huella, escoger uno de estos caminos en funci\u00f3n de si se quiere mantener exclusivamente dentro del proyecto o de forma global: Crear una nueva librer\u00eda con el comando File > New Library... en el directorio lib_fp.pretty . En el popup Select Library Table que aparece seleccionar la opci\u00f3n Project . Instalar a nivel global ( Preferences > Manage Footprint Libraries... ) las que se mantienen en este repositorio en el directorio eduardofilo_footprints.pretty . Seleccionar en la lista de librer\u00edas la que acabamos de crear o incorporar en el paso anterior. De esta forma la nueva huella que vamos a crear se crear\u00e1 dentro de esta librer\u00eda. Pulsar el bot\u00f3n New footprint . Darle nombre en el popup que aparece. Crear la huella utilizando fundamentalmente los siguientes atajos de teclado: M : Mover objeto. R : Rotar objeto. Add pad: E : Editar propiedad de objeto. Cuando se aplica sobre los pads es importante asignar correctamente el valor del Pad number ya que es como se enlazan los s\u00edmbolos con las huellas. Decorar la huella con las herramientas de dibujo. Guardar los cambios. Dise\u00f1ar la PCB: En Schematic Layout Editor (eeschema) pulsar el bot\u00f3n Generate netlist . En el popup que aparece pulsar el bot\u00f3n Generate Netlist . Guardar el fichero que genera en la ra\u00edz del proyecto. Abrir el programa PCB Layout Editor (pcbnew) . Importar el netlist utilizando el bot\u00f3n Load netlist . En el popup que aparece seleccionar el fichero que hemos generado en el punto 3 anterior. Pulsar el bot\u00f3n Update PCB . Cerrar el popup y hacer clic sobre la PCB para colocar las huellas. Utilizando los atajos M y R recolocar todos los componentes como m\u00e1s convenga. Ocultar las etiquetas que no interesen, pulsando E sobre ellas y desmarcando el check Visible . Dibujar el perfil de la PCB con las herramientas de dibujo en la capa Edge.Cuts . Rutear haciendo uso de los siguientes atajos de teclado: X : A\u00f1adir pista. V : A\u00f1adir v\u00eda. M : Mover componente. R : Rotar componente. D : Arrastrar pista. Crear las zonas rellenas de cobre (normalmente para las nets +5V y GND): Seleccionar la capa donde queremos crear la zona rellena de cobre ( F.Cu o B.Cu normalmente). Seleccionar la herramienta Add filled zones . Delimitar una superficie que englobe la parte de la PCB que queremos rellenar de cobre. Al pinchar el primer v\u00e9rtice aparecer\u00e1 una ventana en la que tendremos que indicar las propiedades de la zona a rellenar donde indicaremos la net y la capa de cobre. En caso de modificar las pistas m\u00e1s adelante, pulsar B para recalcular las zonas rellenas de cobre. Ejecutar las DRC pulsando el bot\u00f3n Perform design rules check . Exportar Gerber: Pulsar el bot\u00f3n Plot (HPGL, Postscript, or GERBER format) . En la ventana que aparece, seleccionar las capas que queremos incluir y las opciones que se ven a continuaci\u00f3n e indicar el directorio gerber del proyecto (en esta p\u00e1gina se muestran las opciones m\u00e1s recomendables para JLCPCB). Pulsar el bot\u00f3n Plot . Pulsar el bot\u00f3n Generate Drill Files y en la nueva ventana que aparece encima pulsar el bot\u00f3n Generate Drill File . Exportar BOM: Pulsar el bot\u00f3n Generate bill of materials . De la lista BOM plugins que aparece seleccionar bom2grouped_csv y pulsar Generate . Cambios en esquem\u00e1tico y propagaci\u00f3n: Hacer el cambio en Schematic Layout Editor (eeschema) . Dar nombre a los nuevos componentes. Se puede hacer autom\u00e1ticamente con la herramienta de anotaci\u00f3n a la que se accede con el bot\u00f3n de la barra superior. Volver a PCB Layout Editor (pcbnew) y pulsar el bot\u00f3n Update PCB from schematic . En el popup que aparece pulsar el bot\u00f3n Update PCB . Nos har\u00e1 un informe de los cambios. En caso de que los cambios impliquen componentes nuevos, cuando lo cerremos se nos cargar\u00e1n en el cursor para incorporarlos al PCB. Las capas m\u00e1s importantes son: F.Cu : Capa superior de cobre. Atajo de teclado: RePag . B.Cu : Capa inferior de cobre. Atajo de teclado: AvPag . Edge.Cuts : Perfil de corte de la PCB. F.SilkS : Silkscreen superior o capa donde se representan los s\u00edmbolos y textos de los componentes habitualmente en blanco. B.SilkS : Silkscreen inferior. F.Mask : M\u00e1scara de soldado superior, habitualmente en verde. B.Mask : M\u00e1scara de soldado inferior. Generaci\u00f3n modelo 3D de la placa \u00b6 Es recomendable instalar los paquetes recomendados con apt cuando se instala KiCad. Se puede hacer con la siguiente opci\u00f3n en el comando de instalaci\u00f3n: $ sudo apt install --install-recommends kicad En caso de no tener las librer\u00edas de paquetes 3D o querer forzar el tener la \u00faltima versi\u00f3n de Github, se puede proceder como sigue: Bajar el repositorio con los modelos de los componentes: cd ~/git git clone git@gitlab.com:kicad/libraries/kicad-packages3D.git Abrir el men\u00fa `Preferencias > Configure Paths...\". Configurar el repositorio recien bajado como la nueva ruta de la librer\u00eda KISYS3DMOD (originalmente la ruta es /usr/share/kicad/modules/packages3d/ ): ) En Pcbnew editar las propiedades de las huellas y en la solapa Opciones 3D a\u00f1adir la ruta del modelo 3D o ajustarla si es que existe. ) Abrir el men\u00fa Ver > Visor 3D . Designaci\u00f3n de componentes \u00b6 Fuente Referencia Tipo de componente A Separable assembly or sub-assembly (e.g. printed circuit assembly) AT Attenuator or isolator BR Bridge Rectifier BT Battery C Capacitor CN Capacitor network D Diode (including zeners, thyristors and LEDs) DL Delay line DS Display F Fuse FB or FEB Ferrite bead FD Fiducial FL Filter G Generator or oscillator GN General network H Hardware HY Circulator or directional coupler J Jack (least-movable connector of a connector pair) | Jack connector (connector may have \"male\" pin contacts and/or \"female\" socket contacts) JP Link (Jumper) K Relay or contactor L Inductor or coil or ferrite bead LS Loudspeaker or buzzer M Motor MK Microphone MP Mechanical part (including screws and fasteners) P Plug (most-movable connector of a connector pair) | Plug connector (connector may have \"male\" pin contacts and/or \"female\" socket contacts) PS Power supply Q Transistor (all types) R Resistor RN Resistor network RT Thermistor RV Varistor S Switch (all types, including push-buttons) T Transformer TC Thermocouple TUN Tuner TP Test point U Inseparable assembly (e.g., integrated circuit) V Vacuum Tube VR Variable Resistor (potentiometer or rheostat) X Socket connector for another item not P or J, paired with the letter symbol for that item (XV for vacuum tube socket, XF for fuse holder, XA for printed circuit assembly connector, XU for integrated circuit connector, XDS for light socket, etc.) Y Crystal or oscillator Z Zener Diode Componentes \u00b6 Tiendas \u00b6 LCSC Viinko Electronics HK Ltd : Acepta pedidos BOM. Componentes interesantes, S\u00edmbolos y footprints propios KiCad \u00b6 En este repositorio . Antes de crear los s\u00edmbolos o los footprints, tratar de buscarlos en sitios como SnapEDA . Componente Symbol Footprint Compra Observaciones Resistencia 1/4W P=10,16mm Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal Resistencia convencional Condensador cer\u00e1mico 100nF P=2,54mm Capacitors_ThroughHole:C_Disc_D3.0mm_W1.6mm_P2.50mm Bypass capacitor convencional LED D=5mm LED_THT:LED_D5.0mm LED convencional 5mm USB micro-B Connect:USB_Micro-B LCSC Conector microUSB con terminales SMD y 4 agujeros para chasis Lector microSD Connector_Card:microSD_HC_Hirose_DM3AT-SD-PEJMS LCSC Ranura microSD inserci\u00f3n lateral Lector microSD Connector_Card:microSD_HC_Wuerth_693072010801 LCSC Ranura microSD inserci\u00f3n con portezuela superior Lector microSD LCSC Ranura microSD inserci\u00f3n deslizante para interior Transistor TO-92 Package_TO_SOT_THT:TO-92L_Inline_Wide o Package_TO_SOT_THT:TO-92L_HandSolder Transistor convencional, como NPN 2N3904 Tactile button 6mm Buttons_Switches_ThroughHole:SW_PUSH_6mm LCSC Tactile switch 6mm convencional AY-8760 eduardofilo_symbols.kicad_sym/AY-3-8760 Package_DIP:DIP-28_W15.24mm_Socket_LongPads Portapilas 2xAA eduardofilo_symbols.kicad_sym/Battery_Holder eduardofilo_footprints.pretty/BatteryHolder_Keystone_1013.kicad_mod LCSC Keystone 1013 Portapilas CR2032 eduardofilo_symbols.kicad_sym/BS-7 eduardofilo_footprints.pretty/BAT_BS-7.kicad_mod LCSC Portapilas LR44 Device:Battery_Cell eduardofilo_footprints.pretty/BatteryHolder_Keystone_2997_1x12mm.kicad_mod Digikey Keystone 2997 Cargador bater\u00eda Li y regulador de tensi\u00f3n eduardofilo_symbols.kicad_sym/DD05CVSA eduardofilo_footprints.pretty/DD05CVSA.kicad_mod Aliexpress MicroSD holder eduardofilo_symbols.kicad_sym/Micro_SD_Cd eduardofilo_footprints.pretty/Micro_SD_Cd.kicad_mod Aliexpress ; LCSC Pantalla OLED SSD1306-I2C eduardofilo_symbols.kicad_sym/OLED-SSD1306-I2C eduardofilo_footprints.pretty/OLED-SSD1306-I2C.kicad_mod Aliexpress Pantalla OLED SSD1306-SPI eduardofilo_symbols.kicad_sym/OLED-SSD1306-SPI eduardofilo_footprints.pretty/OLED-SSD1306-SPI.kicad_mod Aliexpress 0,96\" ; Aliexpress 1,54\" Potenci\u00f3metro Device:R_POT eduardofilo_footprints.pretty/Potentiometer_Alpha_RD901F-40-00D_Single_Vertical_mod.kicad_mod LCSC Raspberry Pi Pico eduardofilo_symbols.kicad_sym/raspberrypi-pico-module eduardofilo_footprints.pretty/raspberrypi-pico-module.kicad_mod Raspberry Pi Pico S\u00edmbolo de ncarandini Footprint de ncarandini SCART conector Connector:SCART-F eduardofilo_symbols.kicad_sym/SCART.kicad_mod Aliexpress SNES conector eduardofilo_symbols.kicad_sym/SNES_Connector eduardofilo_symbols.kicad_sym/SNES.kicad_mod Aliexpress Switch horizontal eduardofilo_symbols.kicad_sym/SK12D07VG4 Button_Switch_THT:SW_CuK_OS102011MA1QN1_SPDT_Angled LCSC Interruptor horizontal SPDT con 2mm de pitch Switch horizontal eduardofilo_symbols.kicad_sym/SS-12F44-G5 eduardofilo_footprints.pretty/SS-12F44-G5.kicad_mod LCSC Interruptor vertical SPDT con 3mm de pitch Switch horizontal Switch:SW_SPDT eduardofilo_footprints.pretty/SW_SPDT_Angled.kicad_mod LCSC Interruptor horizontal SPDT con 2,5mm de pitch sin terminales de chasis Switch horizontal Switch:SW_DPDT_x2 Button_Switch_THT:SW_E-Switch_EG1271_DPDT Digikey , Digikey , Digikey , Digikey Interruptor horizontal DPDT con 2,5 de pitch sin terminales de chasis Switch tactile goma 8mm Switch:SW_Push eduardofilo_footprints.pretty/SW_PUSH_8mm_2pin.kicad_mod Aliexpress Logo Niubit eduardofilo_footprints.pretty/NiubitLogo.kicad_mod Vibrador Motor:Motor_DC eduardofilo_footprints.pretty/Vibrator_Seeed_316040005.kicad_mod Digikey Barrel jack 2.3mm Connector:Jack-DC eduardofilo_footprints.pretty/Barrel_jack_PJ1-023.kicad_mod Digikey Tambi\u00e9n compatible con PJ1-022 Barrel jack 5.5mm Connector:Jack-DC Connector_BarrelJack:BarrelJack_Wuerth_6941xx301002 LCSC Z\u00f3calo 8 pin (ATtiny85) Housings_DIP:DIP-8_W7.62mm Z\u00f3calo DIP-8 convencional Valores habituales de resistencias \u00b6 A pesar de que se fabrican resistencias de pr\u00e1cticamente cualquier valor, como tienen una tolerancia de fabricaci\u00f3n amplia (lo normal es utilizar resistencias de en torno al 1-5% de tolerancia), lo habitual es utilizar valores nominales que comiencen con los siguientes valores: 1.0, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2 Aqu\u00ed puede verse una tabla donde se ven los valores normalizados en funci\u00f3n de la tolerancia (a menor tolerancia mayor n\u00famero de valores normalizados). Panelizaci\u00f3n \u00b6 Despu\u00e9s de una mala experiencia con GerberTools descrita en este post , se encuentra el pack de utilidades KiKit que funciona mucho mejor. En cuanto a la instalaci\u00f3n, sobre la versi\u00f3n 1.7.10 de KiCad, no aparecia el plugin panelize en el men\u00fa Tools > External Plugins... , por lo que instalo la versi\u00f3n unstable: $ pip3 install git+https://github.com/yaqwsx/KiKit@master $ kikit-plugin enable --all $ kikit-plugin registerlib Aunque se puede parametrizar desde la utilidad que hay en el men\u00fa mencionado antes, es mejor utilizar directamente la utilidad de l\u00ednea de comando, para lo que conviene consultar los siguientes documentos: Panelization CLI Examples Un ejemplo ser\u00eda: kikit panelize \\ --layout 'rows: 1; cols: 2; rotation: 180deg; alternation: cols;' \\ --source 'tolerance: 50mm;' \\ --post 'millradius: 0.5mm' \\ --cuts vcuts \\ --tabs 'type: fixed; hcount: 2; hwidth: 3mm;' \\ vibrabot.kicad_pcb panel.kicad_pcb","title":"KiCad"},{"location":"ingenieria/kicad.html#kicad","text":"","title":"KiCad"},{"location":"ingenieria/kicad.html#enlaces","text":"Creating A PCB In Everything: KiCad: Part 1 , Part 2 y Part 3 KiCad Best Practices: Library Management Desing Rules recomendadas para minimizar problemas en fabricaci\u00f3n PCB's KiCad Templates for new projects : Plantillas con ajustes adecuados para distintos fabricantes de PCBs. Sizing Logos in KiCAD Librer\u00eda de componentes de JLCPCB para Assembly Service Calculadoras de conversi\u00f3n en l\u00ednea por DigiKey Svg2Shenzhen : Inkscape extension for exporting drawings into a KiCad PCB. Descarga de footprints y modelos 3D: SnapEDA PARTcommunity Interactive HTML BOM plugin for KiCad Herramientas de Jan Mr\u00e1zek: KiKit : Automation for KiCAD: panelization, automatic DRC check, generating assembly data. PcbDraw , Pinion : Making nice pinout diagrams for your boards JLCPars : Parametric search for electronics components YSpurGear , YBevelGear : Parametric generators for gears in Fusion 360 which allow you to edit the gear parameters in history. Uso de etiquetas en KiCad para la conexi\u00f3n de componentes Best practices and considerations when designing your PCB Solder-stencil.me : Aplicaci\u00f3n/servicio para generar STLs a partir de los Gerber para imprimir stencils con una impresora 3D.","title":"Enlaces"},{"location":"ingenieria/kicad.html#gestion-de-librerias","text":"Crear la siguiente estructura de directorios al crear un nuevo proyecto: 1 2 3 4 5 6 7 8 mi_proyecto \u21b33d_models // .STEP and .WRL model files for all footprints \u21b3datasheets // data sheets for components used \u21b3gerber // final production files \u21b3images // SVG images and 3D board renders \u21b3lib_sch // schematic symbols \u21b3lib_fp.pretty // footprints \u21b3pdf // schematics, board layouts, dimension drawings Conforme se va editando un esquem\u00e1tico, KiCad va incorporando todos los s\u00edmbolos utilizados (procedentes de las librer\u00edas de la aplicaci\u00f3n y de las creadas para el proyecto) a una librer\u00eda de backup llamada \"mi_proyecto-cache.lib\". Una vez que el esquem\u00e1tico est\u00e9 completo, copiar dicha librer\u00eda al directorio lib_sch , renombr\u00e1ndola para quitar el sufijo -cache del nombre, es decir quedando lib_sch/mi_proyecto.lib . En el editor del esquem\u00e1tico abrir el comando de men\u00fa Preferencias > Administrar librer\u00edas de s\u00edmbolos... , seleccionar la pesta\u00f1a Librer\u00edas espec\u00edficas del proyecto y a\u00f1adir la librer\u00eda que hemos copiado en el paso anterior por medio del bot\u00f3n con forma de carpeta ( Add existing library to table ). De esta forma nunca perderemos los s\u00edmbolos utilizados durante la creaci\u00f3n del esquema (se podr\u00edan modificar al actualizar las librer\u00edas del programa): Una alternativa a la forma de trabajar anterior es recoger todos los s\u00edmbolos y footprints generados en una librer\u00eda independiente que se pueda a\u00f1adir a todos los proyectos, una especie de repositorio personal. La incorporaremos como un subm\u00f3dulo git . Para ello seguir estos pasos: Inicializar un repositorio git para el proyecto: $ cd mi_proyecto $ git init Instalar la librer\u00eda como un subm\u00f3dulo git en un directorio llamado lib : $ git submodule add git@github.com:eduardofilo/kicad_footprints.git lib A\u00f1adir la librer\u00eda de s\u00edmbolos desde Preferences > Manage Symbol Libraries... > Project Specific Libraries : Y la librer\u00eda de footprints desde Preferences > Manage Footprint Libraries... > Project Specific Libraries :","title":"Gesti\u00f3n de librer\u00edas"},{"location":"ingenieria/kicad.html#workflow","text":"En general KiCad se utiliza con atajos de teclado. Para obtener los atajos de teclado que sirven en una de las aplicaciones, pulsar Ctrl+F1 . Crear proyecto: Desde la ventana principal del programa, File > FNew > Project... Dise\u00f1ar s\u00edmbolo: Abrir el programa Symbol Editor . Para mantener los ficheros del nuevo s\u00edmbolo, escoger uno de estos caminos en funci\u00f3n de si se quiere mantener el s\u00edmbolo exclusivamente dentro del proyecto o de forma global: Crear una nueva librer\u00eda con el comando File > New Library... en el directorio lib_sch . En el popup Add To Library Table que aparece seleccionar la opci\u00f3n Project . Instalar a nivel global ( Preferences > Manage Symbol Libraries... ) las que se mantienen en este repositorio . Seleccionar la librer\u00eda recien creada o importada y pulsar el bot\u00f3n Create new symbol . Se nos preguntar\u00e1 por la librer\u00eda donde incorporarlo. Seleccionar la que acabamos de crear (aparecer\u00e1 al final). Rellenar el cuadro Symbol Properties . Fundamentalmente tenemos que dar un nombre para el componente. Crear el s\u00edmbolo del componente utilizando fundamentalmente los siguientes atajos de teclado: M : Mover objeto. P : Crear pin. El c\u00edrculo al final de la l\u00ednea representa el punto donde se har\u00e1 la conexi\u00f3n. Supr : Eliminar objeto. Decorar el s\u00edmbolo con las herramientas de dibujo. Guardar los cambios. Dise\u00f1ar esquem\u00e1tico: Abrir el programa Schematic Layout Editor (eeschema) . A\u00f1adir los s\u00edmbolos que van a componer el esquem\u00e1tico con la ayuda de los siguientes atajos: A : A\u00f1adir s\u00edmbolo. P : A\u00f1adir fuente de alimentaci\u00f3n o masa. C : Copiar s\u00edmbolo. Una vez que tengamos todos los s\u00edmbolos a la vista los reorganizaremos y cablearemos con los siguientes atajos de teclado: M : Mover objeto (rompe las conexiones). G : Arrastrar objeto (mantiene las conexiones). R : Rotar objeto. E : Editar propiedades del objeto como Referencia ( U ), Valor ( V ) o Footprint ( F ). W : Conexi\u00f3n entre s\u00edmbolos. K : Terminar el trazado de una conexi\u00f3n. Q : A\u00f1adir no conexi\u00f3n. L : A\u00f1adir etiqueta de red. I : A\u00f1adir polil\u00ednea. T : A\u00f1adir texto. Dar valores a los componentes que lo necesiten (Resistencias, Condesadores, Diodos, etc.) con el atajo V o E . Dar nombre a los componentes. Se puede hacer autom\u00e1ticamente con la herramienta de anotaci\u00f3n a la que se accede con el bot\u00f3n de la barra superior. Asociar s\u00edmbolos del esquem\u00e1tico con huellas PCB ejecutando CvPCB. . Aprovechar los botones de filtrado, sobre todo Filter footprint list using a partial name or a pattern . Dise\u00f1ar las huellas que no se encuentren en la librer\u00eda: Abrir el programa Footprint Editor . Para mantener los ficheros de la nueva huella, escoger uno de estos caminos en funci\u00f3n de si se quiere mantener exclusivamente dentro del proyecto o de forma global: Crear una nueva librer\u00eda con el comando File > New Library... en el directorio lib_fp.pretty . En el popup Select Library Table que aparece seleccionar la opci\u00f3n Project . Instalar a nivel global ( Preferences > Manage Footprint Libraries... ) las que se mantienen en este repositorio en el directorio eduardofilo_footprints.pretty . Seleccionar en la lista de librer\u00edas la que acabamos de crear o incorporar en el paso anterior. De esta forma la nueva huella que vamos a crear se crear\u00e1 dentro de esta librer\u00eda. Pulsar el bot\u00f3n New footprint . Darle nombre en el popup que aparece. Crear la huella utilizando fundamentalmente los siguientes atajos de teclado: M : Mover objeto. R : Rotar objeto. Add pad: E : Editar propiedad de objeto. Cuando se aplica sobre los pads es importante asignar correctamente el valor del Pad number ya que es como se enlazan los s\u00edmbolos con las huellas. Decorar la huella con las herramientas de dibujo. Guardar los cambios. Dise\u00f1ar la PCB: En Schematic Layout Editor (eeschema) pulsar el bot\u00f3n Generate netlist . En el popup que aparece pulsar el bot\u00f3n Generate Netlist . Guardar el fichero que genera en la ra\u00edz del proyecto. Abrir el programa PCB Layout Editor (pcbnew) . Importar el netlist utilizando el bot\u00f3n Load netlist . En el popup que aparece seleccionar el fichero que hemos generado en el punto 3 anterior. Pulsar el bot\u00f3n Update PCB . Cerrar el popup y hacer clic sobre la PCB para colocar las huellas. Utilizando los atajos M y R recolocar todos los componentes como m\u00e1s convenga. Ocultar las etiquetas que no interesen, pulsando E sobre ellas y desmarcando el check Visible . Dibujar el perfil de la PCB con las herramientas de dibujo en la capa Edge.Cuts . Rutear haciendo uso de los siguientes atajos de teclado: X : A\u00f1adir pista. V : A\u00f1adir v\u00eda. M : Mover componente. R : Rotar componente. D : Arrastrar pista. Crear las zonas rellenas de cobre (normalmente para las nets +5V y GND): Seleccionar la capa donde queremos crear la zona rellena de cobre ( F.Cu o B.Cu normalmente). Seleccionar la herramienta Add filled zones . Delimitar una superficie que englobe la parte de la PCB que queremos rellenar de cobre. Al pinchar el primer v\u00e9rtice aparecer\u00e1 una ventana en la que tendremos que indicar las propiedades de la zona a rellenar donde indicaremos la net y la capa de cobre. En caso de modificar las pistas m\u00e1s adelante, pulsar B para recalcular las zonas rellenas de cobre. Ejecutar las DRC pulsando el bot\u00f3n Perform design rules check . Exportar Gerber: Pulsar el bot\u00f3n Plot (HPGL, Postscript, or GERBER format) . En la ventana que aparece, seleccionar las capas que queremos incluir y las opciones que se ven a continuaci\u00f3n e indicar el directorio gerber del proyecto (en esta p\u00e1gina se muestran las opciones m\u00e1s recomendables para JLCPCB). Pulsar el bot\u00f3n Plot . Pulsar el bot\u00f3n Generate Drill Files y en la nueva ventana que aparece encima pulsar el bot\u00f3n Generate Drill File . Exportar BOM: Pulsar el bot\u00f3n Generate bill of materials . De la lista BOM plugins que aparece seleccionar bom2grouped_csv y pulsar Generate . Cambios en esquem\u00e1tico y propagaci\u00f3n: Hacer el cambio en Schematic Layout Editor (eeschema) . Dar nombre a los nuevos componentes. Se puede hacer autom\u00e1ticamente con la herramienta de anotaci\u00f3n a la que se accede con el bot\u00f3n de la barra superior. Volver a PCB Layout Editor (pcbnew) y pulsar el bot\u00f3n Update PCB from schematic . En el popup que aparece pulsar el bot\u00f3n Update PCB . Nos har\u00e1 un informe de los cambios. En caso de que los cambios impliquen componentes nuevos, cuando lo cerremos se nos cargar\u00e1n en el cursor para incorporarlos al PCB. Las capas m\u00e1s importantes son: F.Cu : Capa superior de cobre. Atajo de teclado: RePag . B.Cu : Capa inferior de cobre. Atajo de teclado: AvPag . Edge.Cuts : Perfil de corte de la PCB. F.SilkS : Silkscreen superior o capa donde se representan los s\u00edmbolos y textos de los componentes habitualmente en blanco. B.SilkS : Silkscreen inferior. F.Mask : M\u00e1scara de soldado superior, habitualmente en verde. B.Mask : M\u00e1scara de soldado inferior.","title":"Workflow"},{"location":"ingenieria/kicad.html#generacion-modelo-3d-de-la-placa","text":"Es recomendable instalar los paquetes recomendados con apt cuando se instala KiCad. Se puede hacer con la siguiente opci\u00f3n en el comando de instalaci\u00f3n: $ sudo apt install --install-recommends kicad En caso de no tener las librer\u00edas de paquetes 3D o querer forzar el tener la \u00faltima versi\u00f3n de Github, se puede proceder como sigue: Bajar el repositorio con los modelos de los componentes: cd ~/git git clone git@gitlab.com:kicad/libraries/kicad-packages3D.git Abrir el men\u00fa `Preferencias > Configure Paths...\". Configurar el repositorio recien bajado como la nueva ruta de la librer\u00eda KISYS3DMOD (originalmente la ruta es /usr/share/kicad/modules/packages3d/ ): ) En Pcbnew editar las propiedades de las huellas y en la solapa Opciones 3D a\u00f1adir la ruta del modelo 3D o ajustarla si es que existe. ) Abrir el men\u00fa Ver > Visor 3D .","title":"Generaci\u00f3n modelo 3D de la placa"},{"location":"ingenieria/kicad.html#designacion-de-componentes","text":"Fuente Referencia Tipo de componente A Separable assembly or sub-assembly (e.g. printed circuit assembly) AT Attenuator or isolator BR Bridge Rectifier BT Battery C Capacitor CN Capacitor network D Diode (including zeners, thyristors and LEDs) DL Delay line DS Display F Fuse FB or FEB Ferrite bead FD Fiducial FL Filter G Generator or oscillator GN General network H Hardware HY Circulator or directional coupler J Jack (least-movable connector of a connector pair) | Jack connector (connector may have \"male\" pin contacts and/or \"female\" socket contacts) JP Link (Jumper) K Relay or contactor L Inductor or coil or ferrite bead LS Loudspeaker or buzzer M Motor MK Microphone MP Mechanical part (including screws and fasteners) P Plug (most-movable connector of a connector pair) | Plug connector (connector may have \"male\" pin contacts and/or \"female\" socket contacts) PS Power supply Q Transistor (all types) R Resistor RN Resistor network RT Thermistor RV Varistor S Switch (all types, including push-buttons) T Transformer TC Thermocouple TUN Tuner TP Test point U Inseparable assembly (e.g., integrated circuit) V Vacuum Tube VR Variable Resistor (potentiometer or rheostat) X Socket connector for another item not P or J, paired with the letter symbol for that item (XV for vacuum tube socket, XF for fuse holder, XA for printed circuit assembly connector, XU for integrated circuit connector, XDS for light socket, etc.) Y Crystal or oscillator Z Zener Diode","title":"Designaci\u00f3n de componentes"},{"location":"ingenieria/kicad.html#componentes","text":"","title":"Componentes"},{"location":"ingenieria/kicad.html#tiendas","text":"LCSC Viinko Electronics HK Ltd : Acepta pedidos BOM.","title":"Tiendas"},{"location":"ingenieria/kicad.html#componentes-interesantes-simbolos-y-footprints-propios-kicad","text":"En este repositorio . Antes de crear los s\u00edmbolos o los footprints, tratar de buscarlos en sitios como SnapEDA . Componente Symbol Footprint Compra Observaciones Resistencia 1/4W P=10,16mm Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal Resistencia convencional Condensador cer\u00e1mico 100nF P=2,54mm Capacitors_ThroughHole:C_Disc_D3.0mm_W1.6mm_P2.50mm Bypass capacitor convencional LED D=5mm LED_THT:LED_D5.0mm LED convencional 5mm USB micro-B Connect:USB_Micro-B LCSC Conector microUSB con terminales SMD y 4 agujeros para chasis Lector microSD Connector_Card:microSD_HC_Hirose_DM3AT-SD-PEJMS LCSC Ranura microSD inserci\u00f3n lateral Lector microSD Connector_Card:microSD_HC_Wuerth_693072010801 LCSC Ranura microSD inserci\u00f3n con portezuela superior Lector microSD LCSC Ranura microSD inserci\u00f3n deslizante para interior Transistor TO-92 Package_TO_SOT_THT:TO-92L_Inline_Wide o Package_TO_SOT_THT:TO-92L_HandSolder Transistor convencional, como NPN 2N3904 Tactile button 6mm Buttons_Switches_ThroughHole:SW_PUSH_6mm LCSC Tactile switch 6mm convencional AY-8760 eduardofilo_symbols.kicad_sym/AY-3-8760 Package_DIP:DIP-28_W15.24mm_Socket_LongPads Portapilas 2xAA eduardofilo_symbols.kicad_sym/Battery_Holder eduardofilo_footprints.pretty/BatteryHolder_Keystone_1013.kicad_mod LCSC Keystone 1013 Portapilas CR2032 eduardofilo_symbols.kicad_sym/BS-7 eduardofilo_footprints.pretty/BAT_BS-7.kicad_mod LCSC Portapilas LR44 Device:Battery_Cell eduardofilo_footprints.pretty/BatteryHolder_Keystone_2997_1x12mm.kicad_mod Digikey Keystone 2997 Cargador bater\u00eda Li y regulador de tensi\u00f3n eduardofilo_symbols.kicad_sym/DD05CVSA eduardofilo_footprints.pretty/DD05CVSA.kicad_mod Aliexpress MicroSD holder eduardofilo_symbols.kicad_sym/Micro_SD_Cd eduardofilo_footprints.pretty/Micro_SD_Cd.kicad_mod Aliexpress ; LCSC Pantalla OLED SSD1306-I2C eduardofilo_symbols.kicad_sym/OLED-SSD1306-I2C eduardofilo_footprints.pretty/OLED-SSD1306-I2C.kicad_mod Aliexpress Pantalla OLED SSD1306-SPI eduardofilo_symbols.kicad_sym/OLED-SSD1306-SPI eduardofilo_footprints.pretty/OLED-SSD1306-SPI.kicad_mod Aliexpress 0,96\" ; Aliexpress 1,54\" Potenci\u00f3metro Device:R_POT eduardofilo_footprints.pretty/Potentiometer_Alpha_RD901F-40-00D_Single_Vertical_mod.kicad_mod LCSC Raspberry Pi Pico eduardofilo_symbols.kicad_sym/raspberrypi-pico-module eduardofilo_footprints.pretty/raspberrypi-pico-module.kicad_mod Raspberry Pi Pico S\u00edmbolo de ncarandini Footprint de ncarandini SCART conector Connector:SCART-F eduardofilo_symbols.kicad_sym/SCART.kicad_mod Aliexpress SNES conector eduardofilo_symbols.kicad_sym/SNES_Connector eduardofilo_symbols.kicad_sym/SNES.kicad_mod Aliexpress Switch horizontal eduardofilo_symbols.kicad_sym/SK12D07VG4 Button_Switch_THT:SW_CuK_OS102011MA1QN1_SPDT_Angled LCSC Interruptor horizontal SPDT con 2mm de pitch Switch horizontal eduardofilo_symbols.kicad_sym/SS-12F44-G5 eduardofilo_footprints.pretty/SS-12F44-G5.kicad_mod LCSC Interruptor vertical SPDT con 3mm de pitch Switch horizontal Switch:SW_SPDT eduardofilo_footprints.pretty/SW_SPDT_Angled.kicad_mod LCSC Interruptor horizontal SPDT con 2,5mm de pitch sin terminales de chasis Switch horizontal Switch:SW_DPDT_x2 Button_Switch_THT:SW_E-Switch_EG1271_DPDT Digikey , Digikey , Digikey , Digikey Interruptor horizontal DPDT con 2,5 de pitch sin terminales de chasis Switch tactile goma 8mm Switch:SW_Push eduardofilo_footprints.pretty/SW_PUSH_8mm_2pin.kicad_mod Aliexpress Logo Niubit eduardofilo_footprints.pretty/NiubitLogo.kicad_mod Vibrador Motor:Motor_DC eduardofilo_footprints.pretty/Vibrator_Seeed_316040005.kicad_mod Digikey Barrel jack 2.3mm Connector:Jack-DC eduardofilo_footprints.pretty/Barrel_jack_PJ1-023.kicad_mod Digikey Tambi\u00e9n compatible con PJ1-022 Barrel jack 5.5mm Connector:Jack-DC Connector_BarrelJack:BarrelJack_Wuerth_6941xx301002 LCSC Z\u00f3calo 8 pin (ATtiny85) Housings_DIP:DIP-8_W7.62mm Z\u00f3calo DIP-8 convencional","title":"Componentes interesantes, S\u00edmbolos y footprints propios KiCad"},{"location":"ingenieria/kicad.html#valores-habituales-de-resistencias","text":"A pesar de que se fabrican resistencias de pr\u00e1cticamente cualquier valor, como tienen una tolerancia de fabricaci\u00f3n amplia (lo normal es utilizar resistencias de en torno al 1-5% de tolerancia), lo habitual es utilizar valores nominales que comiencen con los siguientes valores: 1.0, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2 Aqu\u00ed puede verse una tabla donde se ven los valores normalizados en funci\u00f3n de la tolerancia (a menor tolerancia mayor n\u00famero de valores normalizados).","title":"Valores habituales de resistencias"},{"location":"ingenieria/kicad.html#panelizacion","text":"Despu\u00e9s de una mala experiencia con GerberTools descrita en este post , se encuentra el pack de utilidades KiKit que funciona mucho mejor. En cuanto a la instalaci\u00f3n, sobre la versi\u00f3n 1.7.10 de KiCad, no aparecia el plugin panelize en el men\u00fa Tools > External Plugins... , por lo que instalo la versi\u00f3n unstable: $ pip3 install git+https://github.com/yaqwsx/KiKit@master $ kikit-plugin enable --all $ kikit-plugin registerlib Aunque se puede parametrizar desde la utilidad que hay en el men\u00fa mencionado antes, es mejor utilizar directamente la utilidad de l\u00ednea de comando, para lo que conviene consultar los siguientes documentos: Panelization CLI Examples Un ejemplo ser\u00eda: kikit panelize \\ --layout 'rows: 1; cols: 2; rotation: 180deg; alternation: cols;' \\ --source 'tolerance: 50mm;' \\ --post 'millradius: 0.5mm' \\ --cuts vcuts \\ --tabs 'type: fixed; hcount: 2; hwidth: 3mm;' \\ vibrabot.kicad_pcb panel.kicad_pcb","title":"Panelizaci\u00f3n"},{"location":"ingenieria/minipro.html","text":"MiniPRO TL866xx \u00b6 Enlaces \u00b6 XGecu T56 Universal programmer minipro : An open source program for controlling the MiniPRO TL866xx series of chip programmers. Instalaci\u00f3n en Linux Actualizaci\u00f3n firmware \u00b6 Descargar el \u00faltimo paquete del fabricante desde este enlace , que incluye la utilidad de interfaz de usuario para Windows y el fichero .dat con el firmware. Descomprimir el .exe que lleva dentro. Ese exe a su vez es un paquete autodescomprimible, por lo que se puede abrir con un descompresor como WinRAR o el Gestor de archivadores de Linux. Extraer de \u00e9l el fichero updateII.dat . Por alg\u00fan motivo da error con el Gestor de archivadores de Linux. Se puede descomprimir con Archive Extractor Online . Flashear el fichero updateII.dat con la utilidad minipro : edumoreno@eduardo-HP-Folio-13:~$ minipro -F updateII.dat Found TL866II+ 04.2.86 (0x256) Warning: Firmware is out of date. Expected 04.2.123 (0x27b) Found 04.2.86 (0x256) updateII.dat contains firmware version 4.2.125 (newer) Do you want to continue with firmware update? y/n:y Switching to bootloader... OK Erasing... OK Reflashing... 100% Resetting device... OK Reflash... OK Uso de utilidad minipro de linea de comando \u00b6 Versi\u00f3n firmware y utilidad: minipro -V Testeo dispositivo: minipro -t B\u00fasqueda de integrados compatibles: minipro -L <search> Indicar modelo de programador TL866II+ en comandos: minipro -q tl866ii Programar integrado (ejemplo con ATTiny85): minipro -p ATTINY85 -w <filename> Leer integrado (ejemplo con ATTiny85; adem\u00e1s del volcado de la flash, genera un par de ficheros adicionales, uno con el volcado de la EEPROM y otro con la configuraci\u00f3n de fuse bits): minipro -p ATTINY85 -r <filename> Leer tipo de memoria concreta (posibles valores: code, data, config) en integrado (ejemplo con ATTiny855): minipro -p ATTINY85 -r <filename> -c <type>","title":"MiniPRO TL866xx"},{"location":"ingenieria/minipro.html#minipro-tl866xx","text":"","title":"MiniPRO TL866xx"},{"location":"ingenieria/minipro.html#enlaces","text":"XGecu T56 Universal programmer minipro : An open source program for controlling the MiniPRO TL866xx series of chip programmers. Instalaci\u00f3n en Linux","title":"Enlaces"},{"location":"ingenieria/minipro.html#actualizacion-firmware","text":"Descargar el \u00faltimo paquete del fabricante desde este enlace , que incluye la utilidad de interfaz de usuario para Windows y el fichero .dat con el firmware. Descomprimir el .exe que lleva dentro. Ese exe a su vez es un paquete autodescomprimible, por lo que se puede abrir con un descompresor como WinRAR o el Gestor de archivadores de Linux. Extraer de \u00e9l el fichero updateII.dat . Por alg\u00fan motivo da error con el Gestor de archivadores de Linux. Se puede descomprimir con Archive Extractor Online . Flashear el fichero updateII.dat con la utilidad minipro : edumoreno@eduardo-HP-Folio-13:~$ minipro -F updateII.dat Found TL866II+ 04.2.86 (0x256) Warning: Firmware is out of date. Expected 04.2.123 (0x27b) Found 04.2.86 (0x256) updateII.dat contains firmware version 4.2.125 (newer) Do you want to continue with firmware update? y/n:y Switching to bootloader... OK Erasing... OK Reflashing... 100% Resetting device... OK Reflash... OK","title":"Actualizaci\u00f3n firmware"},{"location":"ingenieria/minipro.html#uso-de-utilidad-minipro-de-linea-de-comando","text":"Versi\u00f3n firmware y utilidad: minipro -V Testeo dispositivo: minipro -t B\u00fasqueda de integrados compatibles: minipro -L <search> Indicar modelo de programador TL866II+ en comandos: minipro -q tl866ii Programar integrado (ejemplo con ATTiny85): minipro -p ATTINY85 -w <filename> Leer integrado (ejemplo con ATTiny85; adem\u00e1s del volcado de la flash, genera un par de ficheros adicionales, uno con el volcado de la EEPROM y otro con la configuraci\u00f3n de fuse bits): minipro -p ATTINY85 -r <filename> Leer tipo de memoria concreta (posibles valores: code, data, config) en integrado (ejemplo con ATTiny855): minipro -p ATTINY85 -r <filename> -c <type>","title":"Uso de utilidad minipro de linea de comando"},{"location":"ingenieria/modulos.html","text":"M\u00f3dulos \u00b6 SI5351 Clock Generator \u00b6 Generador de se\u00f1al de reloj entre 8KHz y 160MHz configurable por I2C. Compatible con 5V y 3.3V. Los niveles de se\u00f1al se adec\u00faan al de alimentaci\u00f3n, por tanto para utilizar la misma tensi\u00f3n de alimentaci\u00f3n que luego queremos que se utilice en la comunicaci\u00f3n I2C. El reloj de salida es de 3V. Enlaces \u00b6 Adafruit Si5351 Clock Generator Breakout Conexi\u00f3n \u00b6 Programaci\u00f3n \u00b6 Bajar librer\u00eda Adafruit_Si5351_Library . Volcar todo su contenido a un directorio llamado Adafruit_Si5351 . Copiar el directorio anterior a arduinosketchfolder/libraries/ . Reiniciar el IDE. Una vez preparado el entorno cargar un programa como el siguiente: #include <Adafruit_SI5351.h> #include <errors.h> #include <asserts.h> #include <Wire.h> Adafruit_SI5351 clockgen = Adafruit_SI5351 (); void setup ( void ) { if ( clockgen . begin () != ERROR_NONE ) { // There was a problem detecting the IC ... check your connections while ( 1 ); } // INTEGER ONLY MODE --> most accurate output // Setup PLLA to integer only mode @ 900MHz (must be 600..900MHz) // Set Multisynth 0 to 112.5MHz using integer only mode (div by 4/6/8) // 25MHz * 36 = 900 MHz, then 900 MHz / 8 = 112.5 MHz clockgen . setupPLLInt ( SI5351_PLL_A , 36 ); clockgen . setupMultisynthInt ( 0 , SI5351_PLL_A , SI5351_MULTISYNTH_DIV_8 ); // FRACTIONAL MODE --> More flexible but introduce clock jitter // Setup PLLB to fractional mode @616.66667MHz (XTAL * (24+2/3)) // Setup Multisynth 1 to 13.55311MHz (PLLB/(45+1/2)) clockgen . setupPLL ( SI5351_PLL_B , 24 , 2 , 3 ); clockgen . setupMultisynth ( 1 , SI5351_PLL_B , 45 , 1 , 2 ); // Multisynth 2 is not yet used and won't be enabled, but can be // Use PLLB @ 616.66667MHz, then divide by (900+0/1) -> 685.185 KHz // then divide by 64 for 10.706 KHz // configured using either PLL in either integer or fractional mode clockgen . setupMultisynth ( 2 , SI5351_PLL_B , 900 , 0 , 1 ); clockgen . setupRdiv ( 2 , SI5351_R_DIV_64 ); clockgen . enableOutputs ( true ); } void loop ( void ) { } A continuaci\u00f3n vemos algunos ejemplos. 8MHz \u00b6 clockgen . setupPLL ( SI5351_PLL_A , 24 , 0 , 1 ); clockgen . setupMultisynth ( 0 , SI5351_PLL_A , 75 , 0 , 1 ); 1MHz \u00b6 clockgen . setupPLL ( SI5351_PLL_A , 24 , 0 , 1 ); clockgen . setupMultisynth ( 0 , SI5351_PLL_A , 75 , 0 , 1 ); clockgen . setupRdiv ( 0 , SI5351_R_DIV_8 ); ATtiny high voltage programmer \u00b6 Enlaces \u00b6 Recover Bricked ATtiny Using Arduino as high voltage programmer Simple and Cheap Fuse Doctor for Attiny Calculadora de fuse bits HV Rescue Shield 2 Montaje \u00b6 Esquem\u00e1tico y montaje sobre stripboad hecho con Fritzing . Conexi\u00f3n \u00b6 La conexi\u00f3n del m\u00f3dulo a un Arduino UNO es como sigue: Programaci\u00f3n \u00b6 El programa a cargar en el Arduino UNO es \u00e9ste . Abrir el puerto serie de Arduino a 19200 baudios y seguir las indicaciones que aparecen en consola. Digispark \u00b6 Enlaces \u00b6 Digispark wiki Conexi\u00f3n y programaci\u00f3n micronucleus - Github","title":"M\u00f3dulos"},{"location":"ingenieria/modulos.html#modulos","text":"","title":"M\u00f3dulos"},{"location":"ingenieria/modulos.html#si5351-clock-generator","text":"Generador de se\u00f1al de reloj entre 8KHz y 160MHz configurable por I2C. Compatible con 5V y 3.3V. Los niveles de se\u00f1al se adec\u00faan al de alimentaci\u00f3n, por tanto para utilizar la misma tensi\u00f3n de alimentaci\u00f3n que luego queremos que se utilice en la comunicaci\u00f3n I2C. El reloj de salida es de 3V.","title":"SI5351 Clock Generator"},{"location":"ingenieria/modulos.html#enlaces","text":"Adafruit Si5351 Clock Generator Breakout","title":"Enlaces"},{"location":"ingenieria/modulos.html#conexion","text":"","title":"Conexi\u00f3n"},{"location":"ingenieria/modulos.html#programacion","text":"Bajar librer\u00eda Adafruit_Si5351_Library . Volcar todo su contenido a un directorio llamado Adafruit_Si5351 . Copiar el directorio anterior a arduinosketchfolder/libraries/ . Reiniciar el IDE. Una vez preparado el entorno cargar un programa como el siguiente: #include <Adafruit_SI5351.h> #include <errors.h> #include <asserts.h> #include <Wire.h> Adafruit_SI5351 clockgen = Adafruit_SI5351 (); void setup ( void ) { if ( clockgen . begin () != ERROR_NONE ) { // There was a problem detecting the IC ... check your connections while ( 1 ); } // INTEGER ONLY MODE --> most accurate output // Setup PLLA to integer only mode @ 900MHz (must be 600..900MHz) // Set Multisynth 0 to 112.5MHz using integer only mode (div by 4/6/8) // 25MHz * 36 = 900 MHz, then 900 MHz / 8 = 112.5 MHz clockgen . setupPLLInt ( SI5351_PLL_A , 36 ); clockgen . setupMultisynthInt ( 0 , SI5351_PLL_A , SI5351_MULTISYNTH_DIV_8 ); // FRACTIONAL MODE --> More flexible but introduce clock jitter // Setup PLLB to fractional mode @616.66667MHz (XTAL * (24+2/3)) // Setup Multisynth 1 to 13.55311MHz (PLLB/(45+1/2)) clockgen . setupPLL ( SI5351_PLL_B , 24 , 2 , 3 ); clockgen . setupMultisynth ( 1 , SI5351_PLL_B , 45 , 1 , 2 ); // Multisynth 2 is not yet used and won't be enabled, but can be // Use PLLB @ 616.66667MHz, then divide by (900+0/1) -> 685.185 KHz // then divide by 64 for 10.706 KHz // configured using either PLL in either integer or fractional mode clockgen . setupMultisynth ( 2 , SI5351_PLL_B , 900 , 0 , 1 ); clockgen . setupRdiv ( 2 , SI5351_R_DIV_64 ); clockgen . enableOutputs ( true ); } void loop ( void ) { } A continuaci\u00f3n vemos algunos ejemplos.","title":"Programaci\u00f3n"},{"location":"ingenieria/modulos.html#8mhz","text":"clockgen . setupPLL ( SI5351_PLL_A , 24 , 0 , 1 ); clockgen . setupMultisynth ( 0 , SI5351_PLL_A , 75 , 0 , 1 );","title":"8MHz"},{"location":"ingenieria/modulos.html#1mhz","text":"clockgen . setupPLL ( SI5351_PLL_A , 24 , 0 , 1 ); clockgen . setupMultisynth ( 0 , SI5351_PLL_A , 75 , 0 , 1 ); clockgen . setupRdiv ( 0 , SI5351_R_DIV_8 );","title":"1MHz"},{"location":"ingenieria/modulos.html#attiny-high-voltage-programmer","text":"","title":"ATtiny high voltage programmer"},{"location":"ingenieria/modulos.html#enlaces_1","text":"Recover Bricked ATtiny Using Arduino as high voltage programmer Simple and Cheap Fuse Doctor for Attiny Calculadora de fuse bits HV Rescue Shield 2","title":"Enlaces"},{"location":"ingenieria/modulos.html#montaje","text":"Esquem\u00e1tico y montaje sobre stripboad hecho con Fritzing .","title":"Montaje"},{"location":"ingenieria/modulos.html#conexion_1","text":"La conexi\u00f3n del m\u00f3dulo a un Arduino UNO es como sigue:","title":"Conexi\u00f3n"},{"location":"ingenieria/modulos.html#programacion_1","text":"El programa a cargar en el Arduino UNO es \u00e9ste . Abrir el puerto serie de Arduino a 19200 baudios y seguir las indicaciones que aparecen en consola.","title":"Programaci\u00f3n"},{"location":"ingenieria/modulos.html#digispark","text":"","title":"Digispark"},{"location":"ingenieria/modulos.html#enlaces_2","text":"Digispark wiki Conexi\u00f3n y programaci\u00f3n micronucleus - Github","title":"Enlaces"},{"location":"ingenieria/stm32.html","text":"STM 32 \u00b6 Placa de pruebas STM32 VL Discovery \u00b6 Enlaces \u00b6 STM32VLDISCOVERY : Discovery kit with STM32F100RB MCU. Atollic TrueSTUDIO : Free to download and free to use. No code size limits! A commercial-quality tool developed and maintained by Atollic, a professional tools company with years of experience in tools for embedded development. Linux and Mac OS X support is scheduled for later 2016. STM32-Template Open source version of the STMicroelectronics Stlink Tools STM32VLDISCOVERY programming tutorial Programming STM32VLDISCOVERY with Codesourcery and Eclipse Preparaci\u00f3n entorno desarrollo \u00b6 Desarrollado en este post .","title":"STM32"},{"location":"ingenieria/stm32.html#stm-32","text":"","title":"STM 32"},{"location":"ingenieria/stm32.html#placa-de-pruebas-stm32-vl-discovery","text":"","title":"Placa de pruebas STM32 VL Discovery"},{"location":"ingenieria/stm32.html#enlaces","text":"STM32VLDISCOVERY : Discovery kit with STM32F100RB MCU. Atollic TrueSTUDIO : Free to download and free to use. No code size limits! A commercial-quality tool developed and maintained by Atollic, a professional tools company with years of experience in tools for embedded development. Linux and Mac OS X support is scheduled for later 2016. STM32-Template Open source version of the STMicroelectronics Stlink Tools STM32VLDISCOVERY programming tutorial Programming STM32VLDISCOVERY with Codesourcery and Eclipse","title":"Enlaces"},{"location":"ingenieria/stm32.html#preparacion-entorno-desarrollo","text":"Desarrollado en este post .","title":"Preparaci\u00f3n entorno desarrollo"},{"location":"proyectos/dicom.html","text":"Impresi\u00f3n 3D de ecograf\u00edas \u00b6 Enlaces \u00b6 DCMTK - DICOM Toolkit Storage SCP Emulator DICOM Tutorial RUBY DICOM . En GitHub . Instalaci\u00f3n Ruby \u00b6 Descargar el paquete de RubyInstaller .","title":"Impresi\u00f3n 3D de ecograf\u00edas"},{"location":"proyectos/dicom.html#impresion-3d-de-ecografias","text":"","title":"Impresi\u00f3n 3D de ecograf\u00edas"},{"location":"proyectos/dicom.html#enlaces","text":"DCMTK - DICOM Toolkit Storage SCP Emulator DICOM Tutorial RUBY DICOM . En GitHub .","title":"Enlaces"},{"location":"proyectos/dicom.html#instalacion-ruby","text":"Descargar el paquete de RubyInstaller .","title":"Instalaci\u00f3n Ruby"},{"location":"proyectos/headsetcomm.html","text":"Headset Commander \u00b6 Enlaces \u00b6 How to detect Bluetooth headset key press headset button Using Android Headset Buttons (Earphone Buttons) Logcat play/pause \u00b6 #### Google Music 01-25 18:54:23.960 1226 1226 I AwesomePlayer: play_l 01-25 18:54:24.007 19228 19232 I dalvikvm: Jit: resizing JitTable from 4096 to 8192 01-25 18:54:25.038 19653 19663 D MediaPlaybackService: Event logging MUSIC_PAUSE_PLAYBACK_REQUESTED: [299, DEFAULT]/c10a328e-25f5-36a5-bb2b-8642bc8a8f76 01-25 18:54:25.053 1226 1779 I AwesomePlayer: pause_l 0 01-25 18:54:25.061 1373 1388 D NotificationService: turn off LED due to Dock full charging 01-25 18:54:25.085 1373 1384 D BluetoothA2dpService: received playstatechanged Action 01-25 18:54:25.085 1373 1384 D BluetoothA2dpService: Received Meta Data Details Track = Fool (If You Think It's Over) Artist = Chris Rea Album = The Best Of Chris Rea Trackno = null no.of track = null TrackDuration = null TrackPosition = null 01-25 18:54:25.085 1373 1384 D BluetoothA2dpService: received playstatechanged Action 01-25 18:54:25.249 1226 1367 D AudioHardwareMot: AudioStreamOutMot::setParameters() fm_attenuate=0;fm_mute=0 #### Pocket Cast 01-17 19:41:48.420 12280 12298 I AwesomePlayer: play_l 01-17 19:41:49.561 12280 12298 I AwesomePlayer: pause_l 0 #### M\u00fasica 01-25 19:03:54.350 1226 1369 I AwesomePlayer: play_l 01-25 19:03:54.382 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:54.421 19958 19958 E TuneWiki: Sending AVRCP command with action: com.android.music.metachanged 01-25 19:03:54.428 1373 1384 D BluetoothA2dpService: received metachanged Action New Build 01-25 19:03:54.428 1373 1384 D BluetoothA2dpService: Received Meta Data Details Track = AUD-20110917-WA0004 Artist = Artista desconocido Album = WhatsApp Audio Trackno = 1 no.of track = 144 TrackDuration = 17040 TrackPosition = 9540 01-25 19:03:54.428 19958 19958 V TuneWiki: MPD - Status Changed: 0 01-25 19:03:54.483 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:54.522 19958 19958 D FMControllerService: Starting FMSControllerService, action: tunewiki.intent.action.SWITCH_MPD 01-25 19:03:55.249 19958 19958 E TuneWiki: Starting TunWikiMPD, action: tunewiki.intent.action.HEADSET_SINGLE_CLICK 01-25 19:03:55.249 19958 19958 V TuneWiki: MPD - pause() called 01-25 19:03:55.249 19958 19958 V TuneWiki: MPD - currently playing, so pausing 01-25 19:03:55.257 1226 15028 I AwesomePlayer: pause_l 0 01-25 19:03:55.272 1373 1388 D NotificationService: turn off LED due to Dock full charging 01-25 19:03:55.296 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:55.311 19958 19958 E TuneWiki: Sending AVRCP command with action: com.android.music.playerpaused 01-25 19:03:55.311 1373 1384 D BluetoothA2dpService: received paused Action 01-25 19:03:55.311 19958 19958 V TuneWiki: MPD - Status Changed: 1 01-25 19:03:55.327 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:55.455 1226 1367 D AudioHardwareMot: AudioStreamOutMot::setParameters() fm_attenuate=0;fm_mute=0","title":"Headset Commander"},{"location":"proyectos/headsetcomm.html#headset-commander","text":"","title":"Headset Commander"},{"location":"proyectos/headsetcomm.html#enlaces","text":"How to detect Bluetooth headset key press headset button Using Android Headset Buttons (Earphone Buttons)","title":"Enlaces"},{"location":"proyectos/headsetcomm.html#logcat-playpause","text":"#### Google Music 01-25 18:54:23.960 1226 1226 I AwesomePlayer: play_l 01-25 18:54:24.007 19228 19232 I dalvikvm: Jit: resizing JitTable from 4096 to 8192 01-25 18:54:25.038 19653 19663 D MediaPlaybackService: Event logging MUSIC_PAUSE_PLAYBACK_REQUESTED: [299, DEFAULT]/c10a328e-25f5-36a5-bb2b-8642bc8a8f76 01-25 18:54:25.053 1226 1779 I AwesomePlayer: pause_l 0 01-25 18:54:25.061 1373 1388 D NotificationService: turn off LED due to Dock full charging 01-25 18:54:25.085 1373 1384 D BluetoothA2dpService: received playstatechanged Action 01-25 18:54:25.085 1373 1384 D BluetoothA2dpService: Received Meta Data Details Track = Fool (If You Think It's Over) Artist = Chris Rea Album = The Best Of Chris Rea Trackno = null no.of track = null TrackDuration = null TrackPosition = null 01-25 18:54:25.085 1373 1384 D BluetoothA2dpService: received playstatechanged Action 01-25 18:54:25.249 1226 1367 D AudioHardwareMot: AudioStreamOutMot::setParameters() fm_attenuate=0;fm_mute=0 #### Pocket Cast 01-17 19:41:48.420 12280 12298 I AwesomePlayer: play_l 01-17 19:41:49.561 12280 12298 I AwesomePlayer: pause_l 0 #### M\u00fasica 01-25 19:03:54.350 1226 1369 I AwesomePlayer: play_l 01-25 19:03:54.382 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:54.421 19958 19958 E TuneWiki: Sending AVRCP command with action: com.android.music.metachanged 01-25 19:03:54.428 1373 1384 D BluetoothA2dpService: received metachanged Action New Build 01-25 19:03:54.428 1373 1384 D BluetoothA2dpService: Received Meta Data Details Track = AUD-20110917-WA0004 Artist = Artista desconocido Album = WhatsApp Audio Trackno = 1 no.of track = 144 TrackDuration = 17040 TrackPosition = 9540 01-25 19:03:54.428 19958 19958 V TuneWiki: MPD - Status Changed: 0 01-25 19:03:54.483 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:54.522 19958 19958 D FMControllerService: Starting FMSControllerService, action: tunewiki.intent.action.SWITCH_MPD 01-25 19:03:55.249 19958 19958 E TuneWiki: Starting TunWikiMPD, action: tunewiki.intent.action.HEADSET_SINGLE_CLICK 01-25 19:03:55.249 19958 19958 V TuneWiki: MPD - pause() called 01-25 19:03:55.249 19958 19958 V TuneWiki: MPD - currently playing, so pausing 01-25 19:03:55.257 1226 15028 I AwesomePlayer: pause_l 0 01-25 19:03:55.272 1373 1388 D NotificationService: turn off LED due to Dock full charging 01-25 19:03:55.296 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:55.311 19958 19958 E TuneWiki: Sending AVRCP command with action: com.android.music.playerpaused 01-25 19:03:55.311 1373 1384 D BluetoothA2dpService: received paused Action 01-25 19:03:55.311 19958 19958 V TuneWiki: MPD - Status Changed: 1 01-25 19:03:55.327 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: <unknown>:WhatsApp Audio 01-25 19:03:55.455 1226 1367 D AudioHardwareMot: AudioStreamOutMot::setParameters() fm_attenuate=0;fm_mute=0","title":"Logcat play/pause"},{"location":"proyectos/minecraft.html","text":"Minecraft \u00b6 Enlaces \u00b6 Varios \u00b6 How to Create A Minecraft Server Like Mine on your Raspberry Pi Tutorials/Setting up a server Server Commands Minecraft Server Manager How to Run Low-Cost Minecraft on a Raspberry Pi for Block Building on the Cheap :exclamation: MineCraftPi - A Raspberry Pi MineCraft Server Image! : Minecraft se arranca autom\u00e1ticamente desde /etc/rc.local . How to 3D print what you build in Minecraft \u2026 TUTORIAL WITH VIDEO! Minecraft Projects Gu\u00eda / Manual del juego Minecraft Minecraft Crafting y Gu\u00eda de Referencia - La elaboraci\u00f3n de recetas, los valores de datos & Pociones :exclamation: Gu\u00eda de crafteo :exclamation: Mineplex : Servidores de juego con reglas adaptadas (Survival con protecci\u00f3n de terreno y normas \u00e9ticas). Minecraft sobre ARM : Compilaci\u00f3n de librer\u00edas LWJGL y OpenAL para lanzar Minecraft (completo, no Pocket edition) sobre ARM. MineOS: Minecraft hosting improved How to setup Minecraft 1.8.9 on RaspPi2 OptiFine : Mod para tunear Minecraft en placas poco potentes. Instrucciones aqu\u00ed . Debian/Ubuntu repository for Games/Emulators/Kernel : Repositorio con versi\u00f3n de Minecraft modificada para funcionar en ARM. Instrucciones aqu\u00ed . Educaci\u00f3n \u00b6 Video de educador que usa Minecraft Minecraft Edu Minecraft Edu Wiki Teaching with MinecraftEdu MinecraftEdu World Library Logic Gates : Mundo MinecraftEdu que explica las puertas l\u00f3gicas b\u00e1sicas. Paleontology : Mundo MinecraftEdu en el que hay un esqueleto de dinosaurio enterrado. Obstacle Course : Yincana. Escape from Everest Tutorial World Recursos educativos para Minecraft Opciones: Mecanismos Redstone Construcci\u00f3n con recursos limitados (como lo que hace Joel Levin ) Yincana (tipo Obstacle Course ) Aventura (tipo Escape from Everest ) Descubrimiento (tipo Paleontology o mundos tipo museo) Construcci\u00f3n de un modelo que luego se imprimir\u00e1 con la impresora 3D gracias a Printbot . La caza del tesoro. Por ejemplo esconder un objeto valioso en una gruta profunda y complicada. Dar pistas en carteles en forma de acertijos. Mecanismos \u00b6 Tutoriales/Mecanismos Introduction to Redstone Servidores \u00b6 MCServer Mineserver Descarga servidor oficial Mirror de Bukkit y Spigot para sortear DMCA Configuraciones \u00b6 server.properties Bukkit.yml fichero de configuraci\u00f3n de Craftbukkit y Spigot spigot.yml fichero de configuraci\u00f3n de Spigot Plugins interesantes \u00b6 NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder ClearLagg Dynmap : Mapa 2D din\u00e1mico. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . StopRain : Desactiva la lluvia. Essentials Printbot : Impresi\u00f3n 3D de partes de un mundo. Tiene dependencias con los plugins WorldGuard y con WorldEdit . Hay bastante sensibilidad con las versiones. Una combinaci\u00f3n que se ha probado que funciona es: WorldEdit v5.5.8 WorldGuard v5.9 Printbot v1.5.0 Ejecuci\u00f3n Servidor en Raspberry Pi y/o ODROID-C1 \u00b6 Comandos para arrancarlo \u00b6 Raspberry Pi \u00b6 $ sudo java -Xms256M -Xmx496M -jar /home/mine/spigot/spigot.jar nogui Raspberry Pi 2 o ODROID-C1 \u00b6 $ sudo java -Xms512M -Xmx768M -jar /home/mine/spigot/spigot.jar nogui Settings aconsejadas \u00b6 ( Fuente ) server.properties #Minecraft server properties #Thu Jan 03 16:16:28 WET 2013 level-name=world #Determina la carpeta donde se almacena el mundo. Por tanto sirve para cambiar de mundo level-type=DEFAULT server-name=Niubit Server motd=Raspberry Pi Minecraft server max-players=6 #M\u00e1ximo de jugadores admitidos online-mode=false spawn-monsters=false #No se generan monstruos spawn-npcs=false #No se generan vecinos (villagers) spawn-animals=true #Se generan animales spawn-protection=16 generate-structures=true #Determina si se generan estructuras (como ciudades) gamemode=1 #Creative difficulty=0 #Peaceful pvp=false #No se permiten da\u00f1os entre jugadores view-distance=4 #Es una medida del radio de visi\u00f3n que tienen los jugadores. Influye en el rendimiento del servidor allow-flight=true #En modo Creative creo que se permite siempre allow-nether=false white-list=false #Si se activa s\u00f3lo se permitir\u00e1 la incorporaci\u00f3n a la partida de determinados jugadores level-seed= server-ip= enable-query=false #Si se permite obtener informaci\u00f3n del servidor mediante el protocolo GameSpy4 hardcore=false enable-rcon=false generator-settings= server-port=25565 max-build-height=256 #Altura m\u00e1xima permitida para construir, aunque el terreno generado puede superarla snooper-enabled=false #Si se env\u00edan peri\u00f3dicamente datos a snoop.minecraft.net op-permission-level=4 #Nivel m\u00e1ximo de permisos de op announce-player-achievements=true #Se anuncian los logros obtenidos por los jugadores debug=false force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador resource-pack= enable-command-block=false player-idle-timeout=0 bukkit.yml settings: allow-end: false #Desactiva el End (http://minecraft.gamepedia.com/The_End) spigot.yml world-settings: default: view-distance: 4 plugins/WorldBorder/config.yml cfg-version: 11 message: Has alcanzado el l\u00edmite de este mundo. round-border: false debug-mode: false whoosh-effect: true portal-redirection: true knock-back-dist: 3.0 timer-delay-ticks: 5 remount-delay-ticks: 0 dynmap-border-enabled: true dynmap-border-message: Has alcanzado el l\u00edmite de este mundo. player-killed-bad-spawn: false deny-enderpearl: true fill-autosave-frequency: 30 bypass-list-uuids: [] fill-memory-tolerance: 500 worlds: taller1: # Nombre del mundo a limitar x: 0 z: 0 radiusX: 80 radiusZ: 80 wrapping: false Comandos \u00fatiles \u00b6 Terminal Linux \u00b6 sudo chown -R usuario:grupo directorio : Asigna el usuario y el grupo recursivamente a partir del directorio indicado. sudo poweroff : Apagar la m\u00e1quina. sudo reboot : Reiniciar la m\u00e1quina. ifconfig eth0 : Datos de TCP/IP del adaptador de red eth0 (tarjeta de red ethernet; los adaptadores wifi suelen llamarse wlan0 ). sudo nmap -sP 192.168.1.0/24 : Escanea la red local 192.168.1.0 para encontrar m\u00e1quinas conectadas a ella. Servidor Minecraft \u00b6 gamerule doDaylightCycle false : Paramos el reloj. time set 6000 : Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda. tp <jugador> [<x> <y> <z>] : Teleporta a un jugador a una posici\u00f3n. setworldspawn <x> <y> <z> : Definimos el punto de spawn del mundo. toggledownfall : Activa/desactiva la lluvia. weather rain <segundos> : Activa la lluvia durante los segundos indicados. weather clear <segundos> : Desactiva la lluvia/nieve durante los segundos indicados. gamerule doFireTick false : Evita que se propague el fuego. gamerule doMobSpawning false : Evita que se generen Mobs (pasivos y enemigos). Util para evitar distracciones. gamerule keepInventory true : Evita que los jugadores pierdan su inventario al morir. give <jugador> <elemento> [cantidad] [data] [dataTag] : Dar un elemento a un jugador. gamemode <modo> [jugador] : Asigna el modo de juego a uno o a todos los jugadores de entre los siguientes posibles: adventure , creative , survival kick <jugador> : Expulsar a un jugador de la partida. ban <player> : Expulsar a un jugador del servidor. Plugins \u00b6 WorldBorder \u00b6 wb shape square : Ajustamos el tipo de borde a cuadrado. wb <nombre_mundo> set 100 spawn : Ajustamos el radio del borde del mundo. wb <nombre_mundo> fill : Forzamos la generaci\u00f3n del mundo dentro del l\u00edmite. wb <nombre_mundo> trim : Eliminamos el mapeado del mundo que queda fuera del l\u00edmite. wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" : Ajustamos el mensaje que ven los jugadores al alcanzar el l\u00edmite. Dynmap \u00b6 dynmap fullrender <world-name> : Genera el mapa que inicialmente aparece en negro. WorldEdit \u00b6 Los comandos de WorldEdit s\u00f3lo se pueden lanzar desde la consola que hay dentro del juego (tecla T ). Por ese motivo llevan la / delante, aunque curiosamente la mayor\u00eda de los comandos de WorldEdit llevan una doble / en realidad. Para poder utilizar WorldEdit el jugador debe ser operador (comando op <jugador> desde consola. Hay que acordarse de quitar el permiso de operador a todos los jugadores para no tener problemas de bloqueo de bloques alrededor del punto de spawn. //wand : Te otorga la herramienta para definir regiones c\u00fabicas o planas. //walls <material> : Construye las 4 paredes del paralelep\u00edpedo definido por la selecci\u00f3n (dejando el suelo y techo sin construir). //faces <material> : Construye las 6 paredes del paralelep\u00edpedo definido por la selecci\u00f3n. //set <material> : Rellena todo el paralelep\u00edpedo definido por la selecci\u00f3n. La documentaci\u00f3n de WorldEdit est\u00e1 aqu\u00ed . Versi\u00f3n imprimible aqu\u00ed . Printbot \u00b6 Para poder utilizar este plugin, necesitamos tener instalados los plugins de WorldEdit y WorldGuard. Los comandos de Printbot s\u00f3lo se pueden lanzar siendo op. /printselection : Previamente deberemos haber hecho una selecci\u00f3n por medio de WorldEdit. Este comando env\u00eda informaci\u00f3n sobre lo que contenga la selecci\u00f3n a los servidores de Printbot y tras un periodo de proceso aparece en la consola del juego una URL que nos permitir\u00e1 descargar el fichero STL que podremos imprimir con la impresora 3D. Montaje de un mundo plano para talleres \u00b6 Antes de empezar paramos el servidor. Generamos un mundo nuevo cambiando lo siguiente en server.properties : level-type=FLAT level-name=taller1 allow-nether=false gamemode=1 #Creative difficulty=0 #Peaceful generate-structures=false #No se generan estructuras (como ciudades) spawn-npcs=false #No se generan vecinos (villagers) online-mode=false spawn-animals=false #No se generan animales force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador Instalamos los siguientes plugins: StopRain : Desactiva la lluvia. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder Arrancamos el servidor. Por medio de comandos lo modelamos: setworldspawn 0 20 0 wb shape square wb taller1 set 80 spawn # Lo limitamos a un cuadrado de 160x160 en torno al punto de spawn wb taller1 fill # Generamos el mundo wb fill confirm wb taller1 trim # Eliminamos lo que sobra wb trim confirm wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" # Ajustamos mensajes gamerule doDaylightCycle false # Paramos el reloj time set 6000 # Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda Bloques \u00b6 Es \u00fatil tener a mano esta gu\u00eda , aunque tiene el inconveniente de que est\u00e1 en ingl\u00e9s y que parece de una versi\u00f3n distinta a la que solemos usar, porque hay elementos de esta lista que no aparecen en nuestro servidor. Indico el nombre del elemento en ingl\u00e9s, luego su c\u00f3digo y finalmente el nombre del elemento en espa\u00f1ol: LEASH - 420 - Riendas IRON_BARDING - 417 - Armadura de caballo de hierro BOW - 261 - Arco ARROW - 262 - Flechas SADDLE - 329 - Silla de montar FENCE - 85 - Valla DIRT - 3 - Tierra BEDROCK - 7 - Piedra base Otras gu\u00edas en formato gr\u00e1fico se han sacado de esta p\u00e1gina : Instalaci\u00f3n MineOS en ODROID-C1 \u00b6 Como requerimiento previo, tendremos que tener instalado el JDK de Java, preferiblemente a partir de la versi\u00f3n 8. Aparte de eso, ejecutar los siguientes comandos: $ sudo apt-get update $ sudo apt-get -y install screen python-cherrypy3 rdiff-backup git $ sudo mkdir -p /usr/games $ cd /usr/games $ sudo git clone git://github.com/hexparrot/mineos minecraft $ cd minecraft $ sudo git config core.filemode false $ sudo chmod +x server.py mineos_console.py generate-sslcert.sh $ sudo ln -s /usr/games/minecraft/mineos_console.py /usr/local/bin/mineos $ sudo cp /usr/games/minecraft/init/mineos /etc/init.d/ $ sudo chmod 744 /etc/init.d/mineos $ sudo update-rc.d mineos defaults $ sudo cp /usr/games/minecraft/init/minecraft /etc/init.d/ $ sudo chmod 744 /etc/init.d/minecraft $ sudo update-rc.d minecraft defaults $ sudo cp /usr/games/minecraft/mineos.conf /etc/ $ cd /usr/games/minecraft $ sudo ./generate-sslcert.sh $ sudo service mineos start A partir de ahora accederemos a la consola web en la direcci\u00f3n: https://ODROID_IP:8080","title":"Minecraft"},{"location":"proyectos/minecraft.html#minecraft","text":"","title":"Minecraft"},{"location":"proyectos/minecraft.html#enlaces","text":"","title":"Enlaces"},{"location":"proyectos/minecraft.html#varios","text":"How to Create A Minecraft Server Like Mine on your Raspberry Pi Tutorials/Setting up a server Server Commands Minecraft Server Manager How to Run Low-Cost Minecraft on a Raspberry Pi for Block Building on the Cheap :exclamation: MineCraftPi - A Raspberry Pi MineCraft Server Image! : Minecraft se arranca autom\u00e1ticamente desde /etc/rc.local . How to 3D print what you build in Minecraft \u2026 TUTORIAL WITH VIDEO! Minecraft Projects Gu\u00eda / Manual del juego Minecraft Minecraft Crafting y Gu\u00eda de Referencia - La elaboraci\u00f3n de recetas, los valores de datos & Pociones :exclamation: Gu\u00eda de crafteo :exclamation: Mineplex : Servidores de juego con reglas adaptadas (Survival con protecci\u00f3n de terreno y normas \u00e9ticas). Minecraft sobre ARM : Compilaci\u00f3n de librer\u00edas LWJGL y OpenAL para lanzar Minecraft (completo, no Pocket edition) sobre ARM. MineOS: Minecraft hosting improved How to setup Minecraft 1.8.9 on RaspPi2 OptiFine : Mod para tunear Minecraft en placas poco potentes. Instrucciones aqu\u00ed . Debian/Ubuntu repository for Games/Emulators/Kernel : Repositorio con versi\u00f3n de Minecraft modificada para funcionar en ARM. Instrucciones aqu\u00ed .","title":"Varios"},{"location":"proyectos/minecraft.html#educacion","text":"Video de educador que usa Minecraft Minecraft Edu Minecraft Edu Wiki Teaching with MinecraftEdu MinecraftEdu World Library Logic Gates : Mundo MinecraftEdu que explica las puertas l\u00f3gicas b\u00e1sicas. Paleontology : Mundo MinecraftEdu en el que hay un esqueleto de dinosaurio enterrado. Obstacle Course : Yincana. Escape from Everest Tutorial World Recursos educativos para Minecraft Opciones: Mecanismos Redstone Construcci\u00f3n con recursos limitados (como lo que hace Joel Levin ) Yincana (tipo Obstacle Course ) Aventura (tipo Escape from Everest ) Descubrimiento (tipo Paleontology o mundos tipo museo) Construcci\u00f3n de un modelo que luego se imprimir\u00e1 con la impresora 3D gracias a Printbot . La caza del tesoro. Por ejemplo esconder un objeto valioso en una gruta profunda y complicada. Dar pistas en carteles en forma de acertijos.","title":"Educaci\u00f3n"},{"location":"proyectos/minecraft.html#mecanismos","text":"Tutoriales/Mecanismos Introduction to Redstone","title":"Mecanismos"},{"location":"proyectos/minecraft.html#servidores","text":"MCServer Mineserver Descarga servidor oficial Mirror de Bukkit y Spigot para sortear DMCA","title":"Servidores"},{"location":"proyectos/minecraft.html#configuraciones","text":"server.properties Bukkit.yml fichero de configuraci\u00f3n de Craftbukkit y Spigot spigot.yml fichero de configuraci\u00f3n de Spigot","title":"Configuraciones"},{"location":"proyectos/minecraft.html#plugins-interesantes","text":"NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder ClearLagg Dynmap : Mapa 2D din\u00e1mico. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . StopRain : Desactiva la lluvia. Essentials Printbot : Impresi\u00f3n 3D de partes de un mundo. Tiene dependencias con los plugins WorldGuard y con WorldEdit . Hay bastante sensibilidad con las versiones. Una combinaci\u00f3n que se ha probado que funciona es: WorldEdit v5.5.8 WorldGuard v5.9 Printbot v1.5.0","title":"Plugins interesantes"},{"location":"proyectos/minecraft.html#ejecucion-servidor-en-raspberry-pi-yo-odroid-c1","text":"","title":"Ejecuci\u00f3n Servidor en Raspberry Pi y/o ODROID-C1"},{"location":"proyectos/minecraft.html#comandos-para-arrancarlo","text":"","title":"Comandos para arrancarlo"},{"location":"proyectos/minecraft.html#raspberry-pi","text":"$ sudo java -Xms256M -Xmx496M -jar /home/mine/spigot/spigot.jar nogui","title":"Raspberry Pi"},{"location":"proyectos/minecraft.html#raspberry-pi-2-o-odroid-c1","text":"$ sudo java -Xms512M -Xmx768M -jar /home/mine/spigot/spigot.jar nogui","title":"Raspberry Pi 2 o ODROID-C1"},{"location":"proyectos/minecraft.html#settings-aconsejadas","text":"( Fuente ) server.properties #Minecraft server properties #Thu Jan 03 16:16:28 WET 2013 level-name=world #Determina la carpeta donde se almacena el mundo. Por tanto sirve para cambiar de mundo level-type=DEFAULT server-name=Niubit Server motd=Raspberry Pi Minecraft server max-players=6 #M\u00e1ximo de jugadores admitidos online-mode=false spawn-monsters=false #No se generan monstruos spawn-npcs=false #No se generan vecinos (villagers) spawn-animals=true #Se generan animales spawn-protection=16 generate-structures=true #Determina si se generan estructuras (como ciudades) gamemode=1 #Creative difficulty=0 #Peaceful pvp=false #No se permiten da\u00f1os entre jugadores view-distance=4 #Es una medida del radio de visi\u00f3n que tienen los jugadores. Influye en el rendimiento del servidor allow-flight=true #En modo Creative creo que se permite siempre allow-nether=false white-list=false #Si se activa s\u00f3lo se permitir\u00e1 la incorporaci\u00f3n a la partida de determinados jugadores level-seed= server-ip= enable-query=false #Si se permite obtener informaci\u00f3n del servidor mediante el protocolo GameSpy4 hardcore=false enable-rcon=false generator-settings= server-port=25565 max-build-height=256 #Altura m\u00e1xima permitida para construir, aunque el terreno generado puede superarla snooper-enabled=false #Si se env\u00edan peri\u00f3dicamente datos a snoop.minecraft.net op-permission-level=4 #Nivel m\u00e1ximo de permisos de op announce-player-achievements=true #Se anuncian los logros obtenidos por los jugadores debug=false force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador resource-pack= enable-command-block=false player-idle-timeout=0 bukkit.yml settings: allow-end: false #Desactiva el End (http://minecraft.gamepedia.com/The_End) spigot.yml world-settings: default: view-distance: 4 plugins/WorldBorder/config.yml cfg-version: 11 message: Has alcanzado el l\u00edmite de este mundo. round-border: false debug-mode: false whoosh-effect: true portal-redirection: true knock-back-dist: 3.0 timer-delay-ticks: 5 remount-delay-ticks: 0 dynmap-border-enabled: true dynmap-border-message: Has alcanzado el l\u00edmite de este mundo. player-killed-bad-spawn: false deny-enderpearl: true fill-autosave-frequency: 30 bypass-list-uuids: [] fill-memory-tolerance: 500 worlds: taller1: # Nombre del mundo a limitar x: 0 z: 0 radiusX: 80 radiusZ: 80 wrapping: false","title":"Settings aconsejadas"},{"location":"proyectos/minecraft.html#comandos-utiles","text":"","title":"Comandos \u00fatiles"},{"location":"proyectos/minecraft.html#terminal-linux","text":"sudo chown -R usuario:grupo directorio : Asigna el usuario y el grupo recursivamente a partir del directorio indicado. sudo poweroff : Apagar la m\u00e1quina. sudo reboot : Reiniciar la m\u00e1quina. ifconfig eth0 : Datos de TCP/IP del adaptador de red eth0 (tarjeta de red ethernet; los adaptadores wifi suelen llamarse wlan0 ). sudo nmap -sP 192.168.1.0/24 : Escanea la red local 192.168.1.0 para encontrar m\u00e1quinas conectadas a ella.","title":"Terminal Linux"},{"location":"proyectos/minecraft.html#servidor-minecraft","text":"gamerule doDaylightCycle false : Paramos el reloj. time set 6000 : Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda. tp <jugador> [<x> <y> <z>] : Teleporta a un jugador a una posici\u00f3n. setworldspawn <x> <y> <z> : Definimos el punto de spawn del mundo. toggledownfall : Activa/desactiva la lluvia. weather rain <segundos> : Activa la lluvia durante los segundos indicados. weather clear <segundos> : Desactiva la lluvia/nieve durante los segundos indicados. gamerule doFireTick false : Evita que se propague el fuego. gamerule doMobSpawning false : Evita que se generen Mobs (pasivos y enemigos). Util para evitar distracciones. gamerule keepInventory true : Evita que los jugadores pierdan su inventario al morir. give <jugador> <elemento> [cantidad] [data] [dataTag] : Dar un elemento a un jugador. gamemode <modo> [jugador] : Asigna el modo de juego a uno o a todos los jugadores de entre los siguientes posibles: adventure , creative , survival kick <jugador> : Expulsar a un jugador de la partida. ban <player> : Expulsar a un jugador del servidor.","title":"Servidor Minecraft"},{"location":"proyectos/minecraft.html#plugins","text":"","title":"Plugins"},{"location":"proyectos/minecraft.html#worldborder","text":"wb shape square : Ajustamos el tipo de borde a cuadrado. wb <nombre_mundo> set 100 spawn : Ajustamos el radio del borde del mundo. wb <nombre_mundo> fill : Forzamos la generaci\u00f3n del mundo dentro del l\u00edmite. wb <nombre_mundo> trim : Eliminamos el mapeado del mundo que queda fuera del l\u00edmite. wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" : Ajustamos el mensaje que ven los jugadores al alcanzar el l\u00edmite.","title":"WorldBorder"},{"location":"proyectos/minecraft.html#dynmap","text":"dynmap fullrender <world-name> : Genera el mapa que inicialmente aparece en negro.","title":"Dynmap"},{"location":"proyectos/minecraft.html#worldedit","text":"Los comandos de WorldEdit s\u00f3lo se pueden lanzar desde la consola que hay dentro del juego (tecla T ). Por ese motivo llevan la / delante, aunque curiosamente la mayor\u00eda de los comandos de WorldEdit llevan una doble / en realidad. Para poder utilizar WorldEdit el jugador debe ser operador (comando op <jugador> desde consola. Hay que acordarse de quitar el permiso de operador a todos los jugadores para no tener problemas de bloqueo de bloques alrededor del punto de spawn. //wand : Te otorga la herramienta para definir regiones c\u00fabicas o planas. //walls <material> : Construye las 4 paredes del paralelep\u00edpedo definido por la selecci\u00f3n (dejando el suelo y techo sin construir). //faces <material> : Construye las 6 paredes del paralelep\u00edpedo definido por la selecci\u00f3n. //set <material> : Rellena todo el paralelep\u00edpedo definido por la selecci\u00f3n. La documentaci\u00f3n de WorldEdit est\u00e1 aqu\u00ed . Versi\u00f3n imprimible aqu\u00ed .","title":"WorldEdit"},{"location":"proyectos/minecraft.html#printbot","text":"Para poder utilizar este plugin, necesitamos tener instalados los plugins de WorldEdit y WorldGuard. Los comandos de Printbot s\u00f3lo se pueden lanzar siendo op. /printselection : Previamente deberemos haber hecho una selecci\u00f3n por medio de WorldEdit. Este comando env\u00eda informaci\u00f3n sobre lo que contenga la selecci\u00f3n a los servidores de Printbot y tras un periodo de proceso aparece en la consola del juego una URL que nos permitir\u00e1 descargar el fichero STL que podremos imprimir con la impresora 3D.","title":"Printbot"},{"location":"proyectos/minecraft.html#montaje-de-un-mundo-plano-para-talleres","text":"Antes de empezar paramos el servidor. Generamos un mundo nuevo cambiando lo siguiente en server.properties : level-type=FLAT level-name=taller1 allow-nether=false gamemode=1 #Creative difficulty=0 #Peaceful generate-structures=false #No se generan estructuras (como ciudades) spawn-npcs=false #No se generan vecinos (villagers) online-mode=false spawn-animals=false #No se generan animales force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador Instalamos los siguientes plugins: StopRain : Desactiva la lluvia. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder Arrancamos el servidor. Por medio de comandos lo modelamos: setworldspawn 0 20 0 wb shape square wb taller1 set 80 spawn # Lo limitamos a un cuadrado de 160x160 en torno al punto de spawn wb taller1 fill # Generamos el mundo wb fill confirm wb taller1 trim # Eliminamos lo que sobra wb trim confirm wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" # Ajustamos mensajes gamerule doDaylightCycle false # Paramos el reloj time set 6000 # Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda","title":"Montaje de un mundo plano para talleres"},{"location":"proyectos/minecraft.html#bloques","text":"Es \u00fatil tener a mano esta gu\u00eda , aunque tiene el inconveniente de que est\u00e1 en ingl\u00e9s y que parece de una versi\u00f3n distinta a la que solemos usar, porque hay elementos de esta lista que no aparecen en nuestro servidor. Indico el nombre del elemento en ingl\u00e9s, luego su c\u00f3digo y finalmente el nombre del elemento en espa\u00f1ol: LEASH - 420 - Riendas IRON_BARDING - 417 - Armadura de caballo de hierro BOW - 261 - Arco ARROW - 262 - Flechas SADDLE - 329 - Silla de montar FENCE - 85 - Valla DIRT - 3 - Tierra BEDROCK - 7 - Piedra base Otras gu\u00edas en formato gr\u00e1fico se han sacado de esta p\u00e1gina :","title":"Bloques"},{"location":"proyectos/minecraft.html#instalacion-mineos-en-odroid-c1","text":"Como requerimiento previo, tendremos que tener instalado el JDK de Java, preferiblemente a partir de la versi\u00f3n 8. Aparte de eso, ejecutar los siguientes comandos: $ sudo apt-get update $ sudo apt-get -y install screen python-cherrypy3 rdiff-backup git $ sudo mkdir -p /usr/games $ cd /usr/games $ sudo git clone git://github.com/hexparrot/mineos minecraft $ cd minecraft $ sudo git config core.filemode false $ sudo chmod +x server.py mineos_console.py generate-sslcert.sh $ sudo ln -s /usr/games/minecraft/mineos_console.py /usr/local/bin/mineos $ sudo cp /usr/games/minecraft/init/mineos /etc/init.d/ $ sudo chmod 744 /etc/init.d/mineos $ sudo update-rc.d mineos defaults $ sudo cp /usr/games/minecraft/init/minecraft /etc/init.d/ $ sudo chmod 744 /etc/init.d/minecraft $ sudo update-rc.d minecraft defaults $ sudo cp /usr/games/minecraft/mineos.conf /etc/ $ cd /usr/games/minecraft $ sudo ./generate-sslcert.sh $ sudo service mineos start A partir de ahora accederemos a la consola web en la direcci\u00f3n: https://ODROID_IP:8080","title":"Instalaci\u00f3n MineOS en ODROID-C1"},{"location":"retro-emulacion/c64.html","text":"Commodore 64 \u00b6 Enlaces \u00b6 SAMS Computerfacts Commodore 64 (CC4) SAMS Computerfacts Commodore 128D (CSCS25) KU-14194HB board replica Carcasa C64c . Vista en este v\u00eddeo Can you build a brand new Commodore 64 from (nearly) 100% new parts?","title":"Commodore 64"},{"location":"retro-emulacion/c64.html#commodore-64","text":"","title":"Commodore 64"},{"location":"retro-emulacion/c64.html#enlaces","text":"SAMS Computerfacts Commodore 64 (CC4) SAMS Computerfacts Commodore 128D (CSCS25) KU-14194HB board replica Carcasa C64c . Vista en este v\u00eddeo Can you build a brand new Commodore 64 from (nearly) 100% new parts?","title":"Enlaces"},{"location":"retro-emulacion/fpga.html","text":"FPGA \u00b6 Enlaces \u00b6 SiDi-FPGA Wiki ForoFPGA","title":"FPGA"},{"location":"retro-emulacion/fpga.html#fpga","text":"","title":"FPGA"},{"location":"retro-emulacion/fpga.html#enlaces","text":"SiDi-FPGA Wiki ForoFPGA","title":"Enlaces"},{"location":"retro-emulacion/general.html","text":"General \u00b6 Enlaces \u00b6 Emuladores en OpenELEC Configuraci\u00f3n PiGRRL-2 Managing ROMs MAME FAQ : Resuelve dudas sobre peculiaridades de algunos juegos. Por ejemplo sobre el arranque de Joust . ZXBaremulator : Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI. BEST of the BEST: arcade/consolas/microPCs para Raspberry y Windows portable VOL2 500 Juegos de ZX Spectrum listos para jugar. Raspberry y Windows portable RGBtoHDMI : The RGBtoHDMI interface converts the \"digital\" RGB video signal from vintage computers to HDMI or DVI compatible with most modern TVs/Monitors. Viene a ser como la versi\u00f3n open de RetroTink . Empaquetado de ROMs MAME \u00b6 Primero hay que localizar los ficheros que componen la ROM. Hay varios tipos (explicados aqu\u00ed ). Una forma de ir a lo seguro es localizar sus piezas gracias a los hash SHA1 que se pueden encontrar en los ficheros .DAT y luego hacer un paquete ZIP sin compresi\u00f3n. Para generar un archivo ZIP con compresi\u00f3n nula en Linux, se consigue por ejemplo con el siguiente comando lanzado desde el directorio donde se encuentren los ficheros que queremos empaquetar: zip -0 rom.zip * El nombre del archivo (en el ejemplo rom.zip ) es importante para que el emulador reconozca la ROM. Tambi\u00e9n lo obtendremos del fichero .DAT . Conexi\u00f3n de mando SixAxis en Recalbox \u00b6 Para que funcione por USB en lugar de por Bluetooth que es como est\u00e1 previsto por defecto, hay que editar el fichero /recalbox/share/system/recalbox.conf y cambiar la siguiente propiedad a 0: 1 controllers.ps3.enabled=0 Se puede editar entrando por SSH, para lo cual las credenciales predeterminadas son: user: root password: recalboxroot Si se hace montando la SD en el ordenador, el fichero se encuentra en la partici\u00f3n /dev/mmcblk0p8 que se monta en Ubuntu como share0 en la ruta ./system/recalbox.conf . Backup juego PSX \u00b6 Introducir el disco en la unidad de CD-ROM. Localizar el dispositivo del CD-ROM: sudo cdrdao scanbus Desmontar el dispositivo sin expulsar el disco (suponemos que el comando anterior indica que el dispositivo es /dev/sr0 ): sudo umount /dev/sr0 Hacer el backup: cdrdao read-cd --device /dev/sr0 --driver generic-mmc-raw --read-raw --datafile nombre_juego.bin nombre_juego.toc Con esto obtendremos dos ficheros. En algunas ocasiones nos puede interesar m\u00e1s el fichero cue equivalente al toc . En ese caso convertirlo as\u00ed: toc2cue nombre_juego.toc nombre_juego.cue","title":"General"},{"location":"retro-emulacion/general.html#general","text":"","title":"General"},{"location":"retro-emulacion/general.html#enlaces","text":"Emuladores en OpenELEC Configuraci\u00f3n PiGRRL-2 Managing ROMs MAME FAQ : Resuelve dudas sobre peculiaridades de algunos juegos. Por ejemplo sobre el arranque de Joust . ZXBaremulator : Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI. BEST of the BEST: arcade/consolas/microPCs para Raspberry y Windows portable VOL2 500 Juegos de ZX Spectrum listos para jugar. Raspberry y Windows portable RGBtoHDMI : The RGBtoHDMI interface converts the \"digital\" RGB video signal from vintage computers to HDMI or DVI compatible with most modern TVs/Monitors. Viene a ser como la versi\u00f3n open de RetroTink .","title":"Enlaces"},{"location":"retro-emulacion/general.html#empaquetado-de-roms-mame","text":"Primero hay que localizar los ficheros que componen la ROM. Hay varios tipos (explicados aqu\u00ed ). Una forma de ir a lo seguro es localizar sus piezas gracias a los hash SHA1 que se pueden encontrar en los ficheros .DAT y luego hacer un paquete ZIP sin compresi\u00f3n. Para generar un archivo ZIP con compresi\u00f3n nula en Linux, se consigue por ejemplo con el siguiente comando lanzado desde el directorio donde se encuentren los ficheros que queremos empaquetar: zip -0 rom.zip * El nombre del archivo (en el ejemplo rom.zip ) es importante para que el emulador reconozca la ROM. Tambi\u00e9n lo obtendremos del fichero .DAT .","title":"Empaquetado de ROMs MAME"},{"location":"retro-emulacion/general.html#conexion-de-mando-sixaxis-en-recalbox","text":"Para que funcione por USB en lugar de por Bluetooth que es como est\u00e1 previsto por defecto, hay que editar el fichero /recalbox/share/system/recalbox.conf y cambiar la siguiente propiedad a 0: 1 controllers.ps3.enabled=0 Se puede editar entrando por SSH, para lo cual las credenciales predeterminadas son: user: root password: recalboxroot Si se hace montando la SD en el ordenador, el fichero se encuentra en la partici\u00f3n /dev/mmcblk0p8 que se monta en Ubuntu como share0 en la ruta ./system/recalbox.conf .","title":"Conexi\u00f3n de mando SixAxis en Recalbox"},{"location":"retro-emulacion/general.html#backup-juego-psx","text":"Introducir el disco en la unidad de CD-ROM. Localizar el dispositivo del CD-ROM: sudo cdrdao scanbus Desmontar el dispositivo sin expulsar el disco (suponemos que el comando anterior indica que el dispositivo es /dev/sr0 ): sudo umount /dev/sr0 Hacer el backup: cdrdao read-cd --device /dev/sr0 --driver generic-mmc-raw --read-raw --datafile nombre_juego.bin nombre_juego.toc Con esto obtendremos dos ficheros. En algunas ocasiones nos puede interesar m\u00e1s el fichero cue equivalente al toc . En ese caso convertirlo as\u00ed: toc2cue nombre_juego.toc nombre_juego.cue","title":"Backup juego PSX"},{"location":"retro-emulacion/juegos.html","text":"Juegos destacados \u00b6 ZX Spectrum \u00b6 Flying Shark Alter ego Old Tower : Vidas infinitas: POKE 35492,201 Return to Holy Tower Mighty Final Fight Los amores de Brunilda The Sword of Ianna Ninja Gaiden Shadow Warriors Bonnie and Clyde Amstrad CPC \u00b6 Psycho Pig UXB Commodore 64 \u00b6 Donkey Kong MSX \u00b6 Westen House (MSX) by Santiago Onta\u00f1\u00f3n Villar NES \u00b6 Faxanadu Castlevania III: Dracula's Curse SNES \u00b6 Do-Re-Mi Fantasy Chrono Trigger The Legend of Zelda: A Link to the Past Super Castlevania IV Master System \u00b6 Sonic NeoGeo Pocket Color \u00b6 Dark Arms MAME \u00b6 Truxton 2 Game Boy \u00b6 Super Mario Land 2 The Legend of Zelda: Link's Awakening Donkey Kong Kirby's Dream Land 2 Metal Gear Solid Catrap GameBoy Advance \u00b6 Drill Dozer Fire Emblem The Sacred Stones Golden Sun Dragon Ball Advance Castlevania: Aria of Sorrow PlayStation \u00b6 Harmful Park R-Type Delta Team Buddies Syphon Filter Einhander Chrono Cross Xenogears Android \u00b6 Mekorama","title":"Juegos destacados"},{"location":"retro-emulacion/juegos.html#juegos-destacados","text":"","title":"Juegos destacados"},{"location":"retro-emulacion/juegos.html#zx-spectrum","text":"Flying Shark Alter ego Old Tower : Vidas infinitas: POKE 35492,201 Return to Holy Tower Mighty Final Fight Los amores de Brunilda The Sword of Ianna Ninja Gaiden Shadow Warriors Bonnie and Clyde","title":"ZX Spectrum"},{"location":"retro-emulacion/juegos.html#amstrad-cpc","text":"Psycho Pig UXB","title":"Amstrad CPC"},{"location":"retro-emulacion/juegos.html#commodore-64","text":"Donkey Kong","title":"Commodore 64"},{"location":"retro-emulacion/juegos.html#msx","text":"Westen House (MSX) by Santiago Onta\u00f1\u00f3n Villar","title":"MSX"},{"location":"retro-emulacion/juegos.html#nes","text":"Faxanadu Castlevania III: Dracula's Curse","title":"NES"},{"location":"retro-emulacion/juegos.html#snes","text":"Do-Re-Mi Fantasy Chrono Trigger The Legend of Zelda: A Link to the Past Super Castlevania IV","title":"SNES"},{"location":"retro-emulacion/juegos.html#master-system","text":"Sonic","title":"Master System"},{"location":"retro-emulacion/juegos.html#neogeo-pocket-color","text":"Dark Arms","title":"NeoGeo Pocket Color"},{"location":"retro-emulacion/juegos.html#mame","text":"Truxton 2","title":"MAME"},{"location":"retro-emulacion/juegos.html#game-boy","text":"Super Mario Land 2 The Legend of Zelda: Link's Awakening Donkey Kong Kirby's Dream Land 2 Metal Gear Solid Catrap","title":"Game Boy"},{"location":"retro-emulacion/juegos.html#gameboy-advance","text":"Drill Dozer Fire Emblem The Sacred Stones Golden Sun Dragon Ball Advance Castlevania: Aria of Sorrow","title":"GameBoy Advance"},{"location":"retro-emulacion/juegos.html#playstation","text":"Harmful Park R-Type Delta Team Buddies Syphon Filter Einhander Chrono Cross Xenogears","title":"PlayStation"},{"location":"retro-emulacion/juegos.html#android","text":"Mekorama","title":"Android"},{"location":"retro-emulacion/microconsolas.html","text":"Micro consolas \u00b6 Enlaces \u00b6 uChip Simple VGA Console (uSVC) Arduboy Hackvision Uzebox AttinyArcade: Sitio oficial V\u00eddeo de ELECTRONOOBS Repositorio oficial Repositorio de juegos TinyJoypad Pocket Arcade Uzebox \u00b6 Enlaces \u00b6 Home del proyecto EdUzebox Getting Started with the Uzebox Video Game Console: parte 1 ; parte 2 ROMs . Pack Foro . Algunos posts importantes: Uzebox Quick Start Uzebox SD Gameloader V0.4.5 : Bootloader con el cargador de juegos desde SD. ATMEGA644 ISP - Uzebox : Instrucciones para flasheo con avrdude en post inicial. Instalaci\u00f3n de ATmega644 en Arduino IDE \u00b6 Para que la placa aparezca en el Arduino IDE, instalar las que proporciona el proyecto MightyCore que incluye el ATmega644: Abrir Arduino IDE. Abrir el men\u00fa File > Preferences . Introducir la siguiente URL en Additional Boards Manager URLs : https://mcudude.github.io/MightyCore/package_MCUdude_MightyCore_index.json Abrir el men\u00fa Tools > Board > Boards Manager... . Buscar la entrada correspondiente a MightyCore e instalarla.","title":"Micro consolas"},{"location":"retro-emulacion/microconsolas.html#micro-consolas","text":"","title":"Micro consolas"},{"location":"retro-emulacion/microconsolas.html#enlaces","text":"uChip Simple VGA Console (uSVC) Arduboy Hackvision Uzebox AttinyArcade: Sitio oficial V\u00eddeo de ELECTRONOOBS Repositorio oficial Repositorio de juegos TinyJoypad Pocket Arcade","title":"Enlaces"},{"location":"retro-emulacion/microconsolas.html#uzebox","text":"","title":"Uzebox"},{"location":"retro-emulacion/microconsolas.html#enlaces_1","text":"Home del proyecto EdUzebox Getting Started with the Uzebox Video Game Console: parte 1 ; parte 2 ROMs . Pack Foro . Algunos posts importantes: Uzebox Quick Start Uzebox SD Gameloader V0.4.5 : Bootloader con el cargador de juegos desde SD. ATMEGA644 ISP - Uzebox : Instrucciones para flasheo con avrdude en post inicial.","title":"Enlaces"},{"location":"retro-emulacion/microconsolas.html#instalacion-de-atmega644-en-arduino-ide","text":"Para que la placa aparezca en el Arduino IDE, instalar las que proporciona el proyecto MightyCore que incluye el ATmega644: Abrir Arduino IDE. Abrir el men\u00fa File > Preferences . Introducir la siguiente URL en Additional Boards Manager URLs : https://mcudude.github.io/MightyCore/package_MCUdude_MightyCore_index.json Abrir el men\u00fa Tools > Board > Boards Manager... . Buscar la entrada correspondiente a MightyCore e instalarla.","title":"Instalaci\u00f3n de ATmega644 en Arduino IDE"},{"location":"retro-emulacion/miyoo-mini.html","text":"Miyoo Mini \u00b6 Enlaces \u00b6 Sistema \u00b6 Firmware Hardware \u00b6 Extracci\u00f3n UART Teardown Para imprimir: Gatillos m\u00e1s accesibles: V1 , V2 Repuestos componentes Cheatsheets \u00b6 Directorios/Ficheros interesantes OnionOS \u00b6 Con el sistema arrancado, la ra\u00edz de la tarjeta SD se monta en /mnt/SDCARD . Directorio Contenido /mnt/SDCARD/Saves/CurrentProfile/saves/playActivity.db Base de datos de Play Activity. Para resetear las estad\u00edsticas se puede simplemente borrar el fichero /mnt/SDCARD/Saves/CurrentProfile/saves/PlayActivityBackup/ Directorio que contiene backups del fichero playActivity.db anterior. Aparentemente no se purga este directorio, por lo que habr\u00e1 que hacerlo a mano de vez en cuando. /mnt/SDCARD/Roms/recentlist.json Lista Recent /mnt/SDCARD/.tmp_update/romScreens/ Screenshots /mnt/SDCARD/.tmp_update/.disableMenu Desactiva el Game Switcher asociado a la tecla Menu","title":"Miyoo Mini"},{"location":"retro-emulacion/miyoo-mini.html#miyoo-mini","text":"","title":"Miyoo Mini"},{"location":"retro-emulacion/miyoo-mini.html#enlaces","text":"","title":"Enlaces"},{"location":"retro-emulacion/miyoo-mini.html#sistema","text":"Firmware","title":"Sistema"},{"location":"retro-emulacion/miyoo-mini.html#hardware","text":"Extracci\u00f3n UART Teardown Para imprimir: Gatillos m\u00e1s accesibles: V1 , V2 Repuestos componentes","title":"Hardware"},{"location":"retro-emulacion/miyoo-mini.html#cheatsheets","text":"","title":"Cheatsheets"},{"location":"retro-emulacion/miyoo-mini.html#directoriosficheros-interesantes-onionos","text":"Con el sistema arrancado, la ra\u00edz de la tarjeta SD se monta en /mnt/SDCARD . Directorio Contenido /mnt/SDCARD/Saves/CurrentProfile/saves/playActivity.db Base de datos de Play Activity. Para resetear las estad\u00edsticas se puede simplemente borrar el fichero /mnt/SDCARD/Saves/CurrentProfile/saves/PlayActivityBackup/ Directorio que contiene backups del fichero playActivity.db anterior. Aparentemente no se purga este directorio, por lo que habr\u00e1 que hacerlo a mano de vez en cuando. /mnt/SDCARD/Roms/recentlist.json Lista Recent /mnt/SDCARD/.tmp_update/romScreens/ Screenshots /mnt/SDCARD/.tmp_update/.disableMenu Desactiva el Game Switcher asociado a la tecla Menu","title":"Directorios/Ficheros interesantes OnionOS"},{"location":"retro-emulacion/pre_re-351.html","text":"Se pueden guardar configuraciones individuales de juegos. Para ello crear un .opt desde el men\u00fa save game overrides BOB FAT edition https://telegra.ph/BOB-FAT32edition-10-30 7z e -so \"BOB 3.7 Fix_FAT32_RG351P.7z\" | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync /dev/mmcblk0p1 524008 487928 36080 93% /flash /dev/mmcblk0p2 1376342 474267 897979 35% /storage /dev/mmcblk0p3 13648848 11761448 1887400 86% /var/media/ROMS RG351P:~ # ls -l roms lrwxrwxrwx 1 root root 15 Nov 8 11:07 roms -> /var/media/ROMS","title":"Pre re 351"},{"location":"retro-emulacion/retroarch.html","text":"RetroArch \u00b6 Enlaces \u00b6 Instalaci\u00f3n/configuraci\u00f3n de RetroArch Cheats RetroArch Using Content, Folder, and Core Overrides for Custom Settings","title":"RetroArch"},{"location":"retro-emulacion/retroarch.html#retroarch","text":"","title":"RetroArch"},{"location":"retro-emulacion/retroarch.html#enlaces","text":"Instalaci\u00f3n/configuraci\u00f3n de RetroArch Cheats RetroArch Using Content, Folder, and Core Overrides for Custom Settings","title":"Enlaces"},{"location":"retro-emulacion/rg-350.html","text":"RG350/RG280 \u00b6 Enlaces \u00b6 General \u00b6 Dingoonity Wiki Anbernic RG-350 Wiki Documentaci\u00f3n SOC, HDMI y drivers Windows How to make an OPK RG 350 Tips, Emulators and Resources - Wagner's TechTalk RGHandhelds device info Writing Software for the RG350M Gaming Handheld Blogs, Foros \u00b6 Foro en elotrolado.net . Algunos posts escogidos: XMAME EN LA SD EXTERNA Foro en Dingoonity.org . Algunos hilos escogidos: HOW-TO: PCSX4ALL Cheats [DEVELOPMENT] How to compile for RG350? (Help needed) RG350 Subreddit Blog de pcercuei Emuladores, Ports y Aplicaciones \u00b6 Repositorios: RG350_APPREPOSITORY de Rafa Vico OpenDingux Software list RG-350 & Pocket Go 2 - Application Repo rs97.bitgala.xyz Ports y Emuladores de Gameblabla: En Dingoonity En su sitio Para el nuevo OD Beta Ficheros SBI UniBIOS for Neo Geo Scrapers: ScreenScrapper ARRM Romcenter (ROM Manager) Conversi\u00f3n de ISOs PlayStation a PBP Mods de emuladores: ReGBA 1.45.5 sin bezel FBA con doble launcher (UX y Explorer) MAME4All con doble launcher (UX y Explorer) DOSBox que permite personalizar el dosbox.conf en cada juego incluy\u00e9ndolo en su directorio. Descripci\u00f3n m\u00e1s detallada aqu\u00ed A5200 permite seleccionar ROM por lo que se integra bien con launchers Repositorio de c\u00f3digo de juegos/clones Open Source Testeo colaborativo de juegos FBA/MAME promovido por @cejudin Retro Game Corps Arcade Guide Retro Game Corps Ports Guide Sistema \u00b6 Retro Game Handhelds CFW de Ninoh-FOX Buildroot : OpenDingux : Parece el repositorio upstream del Buildroot para dispositivos basados en opendingux. Tonyjih Ninoh-FOX gokr soarquin od-contrib glebm Toolchain: GCW Zero Toolchain WerWolv \u00daltima versi\u00f3n de pcercuei Linux kernel: OpenDingux : Parece el repositorio upstream del kernel para dispositivos basados en OpenDingux. Incluye los experimentos de pcercuei. Tonyjih Ninoh-FOX OpenDingux nightly builds State of OpenDingux Beta Frontends: GMenu2X: Documentaci\u00f3n . Themes: gmenu2x-theme PyMenu : Monogr\u00e1fico SimpleMenu : Monogr\u00e1fico . Themes: Lazarus GBZ35 Remix Megapixels ComicBook RG FAMILY 0A BigCody Unified SimUI EmulationStation : Monogr\u00e1fico . Themes: es-theme-pixel Hardware \u00b6 Teardown Placas de RG350M y RG350P Para imprimir: Stick de perfil bajo Cruceta Botones ABXY Botones L1-R1 Botones L2-R2 Grips laterales Carcasa Repuestos componentes: Repuestos oficiales en Aliexpress Pantalla 240p (HP350S001): Compra Tutorial de instalaci\u00f3n Pantalla 480p (JT035IPS02-V0): Compra Tutorial de instalaci\u00f3n Cristal pantalla Protector de pantalla: Amazon Aliexpress Carcasa silicona Stick anal\u00f3gico modelo original RG350: eBay Aliexpress Kit conversi\u00f3n stick plano Botones cristal Pack botones SNES y sticks de perfil bajo Conductice Rubber Pad: ebay myretrogamecase Sticks de perfil bajo: Compra Tutorial de instalaci\u00f3n (espa\u00f1ol) Tutorial de instalaci\u00f3n (ingl\u00e9s) Bater\u00edas (ver detalles al final del apartado Bater\u00eda ): Bater\u00eda 3,7V 4900mAh : 30,17\u20ac Incluye conector JST. Se anuncia como repuesto para RG350/M. Adaptadores WiFi compatibles con BASE y ROGUE (listados en directorio /lib/modules/3.12.0-dingux\\+/kernel/drivers/net/wireless/ ): Realtek RTL8188EU 150Mb/s (BASE y ROGUE) Realtek RTL8188FU 150Mb/s (s\u00f3lo ROGUE) Realtek RTL8192CU 300Mb/s (BASE y ROGUE) Por ejemplo \u00e9ste para el que necesitaremos adem\u00e1s un adaptador para USB tipo C . Adaptadores WiFi compatibles con OD beta (listados en directorio /lib/modules/5.15.0-rc6-opendingux/kernel/drivers/net/wireless/ ): Realtek RTL8192CU Mediatek MT7601U Conceptos \u00b6 Emuladores / Juegos / Ports / Aplicaciones \u00b6 Cada elemento que aparece en el lanzador, en las distintas secciones, es una especie de acceso directo. Algunos llevan a comandos o ejecutables que hay en el sistema (fundamentalmente los de la secci\u00f3n Settings) pero normalmente nosotros s\u00f3lo vamos a tratar con los que provengan de OPKs. Los OPKs son paquetes (una especie de ZIP) que podemos asimilar a una aplicaci\u00f3n de m\u00f3vil. Un OPK o aplicaci\u00f3n puede ser un emulador, un juego o port, una utilidad, etc. Dentro del OPK en un fichero se le dice al lanzador en qu\u00e9 categor\u00eda debe aparecer. B\u00e1sicamente las secciones que se ven y que se recorren con L1 y R1: Applications Emulators Games Settings Los ports son los que aparecen en Games. Nada impide que un emulador aparezca dentro de Games, pero todo el mundo pone las cosas siguiendo esta organizaci\u00f3n. Un port es una aplicaci\u00f3n que ejecuta un juego concreto, normalmente un cl\u00e1sico, del que se dispone del c\u00f3digo y que alguien ha compilado para OpenDingux que es el sistema de la RG-350. Tambi\u00e9n en Games est\u00e1n los remakes hechos por aficionados o homebrew. Un emulador es una aplicaci\u00f3n, normalmente tambi\u00e9n de c\u00f3digo abierto, que alguien ha compilado para OpenDingux. El emulador no contiene el c\u00f3digo de ning\u00fan juego en concreto ni la BIOS de la m\u00e1quina que emula. En teor\u00eda esto permite la libre distribuci\u00f3n de los emuladores. Un emulador simula por software (virtualiza) un sistema que normalmente puede ejecutar c\u00f3digos de juegos distintos que ven\u00edan en cartucho, CD, un chip de memoria, tarjeta de memoria, etc. Son las ROMs. En resumen: Port o juego: Un juego concreto normalmente un cl\u00e1sico de PC, un remake, juego indie o homebrew. En la RG350 tendr\u00e1n forma de OPK. Emulador: Virtualiza una m\u00e1quina que puede ejecutar varios juegos/ROMS. En cualquier m\u00e1quina emuladora como la RG-350 tendr\u00e1n distintas formas (.bin, .zip, .iso, .pbp, .smc, .nes, .sms, hasta el infinito). Tambi\u00e9n suelen venir en forma de OPK. Las ROMs y su organizaci\u00f3n \u00b6 Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el c\u00f3digo y los datos (sonidos por ejemplo) del juego en la m\u00e1quina original. En viejas recreativas y en m\u00e1quinas de cartucho, este soporte sol\u00edan ser chips de memoria no vol\u00e1til. En las m\u00e1quinas m\u00e1s modernas normalmente son CDs, DVDs, Bluray's. Las ROMs en la RG350 se suelen colocar en la tarjeta microSD externa. Pueden ir en la interna pero suele complicar el proceso de actualizaci\u00f3n del firmware. En cuanto a la estructura de carpetas, puede ser cualquiera ya que los emuladores normalmente al abrirlos, presentan una especie de explorador de archivos para seleccionar la ruta y archivo de la ROM a ejecutar. A pesar de que las ROMs puedan estar en cualquier lugar, todo el mundo tiende a utilizar una estructura similar en la que los distintos sistemas se meten dentro de una carpeta llamada roms en la ra\u00edz de la tarjeta. Cada sistema a su vez suele ser otra carpeta con el acr\u00f3nimo de la m\u00e1quina como nombre. M\u00e1s o menos se utilizan los siguientes acr\u00f3nimos: FBA : Final Burn Alpha FC : NES (por Famicom) GB : Gameboy GBA : Gameboy Advance GBC : Gameboy Color GG : SEGA GameGear MD : SEGA Megadrive NGP : NeoGeo Pocket PCE : PC Engine / TurboGrafx-16 PS : Sony PlayStation SFC : SuperNES (por Super Famicom) SMS : SEGA MasterSystem WSC : WonderSwan La importancia de las BIOS \u00b6 Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de \u00e9stas est\u00e1n siempre presentes en la m\u00e1quina. Es decir, as\u00ed como las ROMs son c\u00f3digo particular de cada juego, que digamos entra y sale de la m\u00e1quina (cuando cambias el CD o cartucho), la BIOS tambi\u00e9n es c\u00f3digo pero permanente de la m\u00e1quina. Est\u00e1 guardado en un chip y contiene el c\u00f3digo que se ejecuta cuando arranca la m\u00e1quina (los men\u00fas de lanzamiento de juegos por ejemplo en consolas avanzadas) y librer\u00edas que utilizan los desarrolladores para hacer los juegos m\u00e1s f\u00e1ciles de programar. Los emuladores o bien incorporan una reimplementaci\u00f3n de la BIOS (como el HLE de Pcsx4all) o bien es necesario que la pongamos nosotros. A\u00fan en ese primer caso es conveniente utilizar la BIOS original. Si no la incluyen los emuladores es porque son c\u00f3digo propietario del fabricante de la m\u00e1quina, lo que impedir\u00eda la libre distribuci\u00f3n del emulador. Lo mismo que sucede con las ROMs. M\u00e1s adelante se incluye un listado de d\u00f3nde buscan las BIOS los distintos emuladores. BIOS de PlayStation \u00b6 Siguiendo con el ejemplo de la BIOS HLE del emulador Pcsx4all, no es la real que puso Sony en sus m\u00e1quinas, sino una BIOS que alguien preparar\u00f3 haciendo ingenier\u00eda inversa por lo que nunca queda igual que la original. Esto se hace para poder distribuir el emulador y que sea funcional desde un principio. Porque si se incluye la BIOS original se comete un delito de propiedad intelectual y si no se incluye ning\u00fan tipo de BIOS el emulador ni siquiera arranca. Entonces se pone algo para salir del paso pero luego se le pide a los usuarios que busquen por su cuenta la BIOS original y la incorporen al emulador. Para pasar de usar la BIOS emulada (HLE) a una original, primero hay que colocarla en el directorio /media/data/local/home/.pcsx4all/bios/ , despu\u00e9s arrancar el emulador, entrar en las opciones (tecla Power ), abrir la secci\u00f3n Core settings y all\u00ed desactivar HLE emulated BIOS y seleccionar en Set BIOS file una de las que hayamos situado en el directorio indicado anteriormente. Por ejemplo: Sistemas de archivo \u00b6 OpenDingux, el sistema que utiliza la RG350, es una distribuci\u00f3n Linux. Por tanto es un sistema UNIX. En UNIX no existe el concepto de las unidades (como las t\u00edpicas C:, D:, etc en Windows). Todo forma parte de un \u00e1rbol de directorios cuya ra\u00edz es la / o root. Esto no quiere decir que un UNIX s\u00f3lo pueda tener una unidad de almacenamiento. Lo que ocurre es que las distintas unidades se \"montan\" en distintos puntos del \u00e1rbol de directorios. El \u00e1rbol de directorios base sobre el que se montan las unidades es ese archivo rootfs.squashfs (el nombre quiere decir \"sistema de archivos ra\u00edz\") que puede verse al pinchar la tarjeta interna en el PC poco antes de flashearla con otro firmware. Ah\u00ed comprimido est\u00e1 todo el sistema menos lo que se monta desde las tarjetas de memoria. La tarjeta interna tiene dos particiones. La primera contiene el \u00e1rbol root como hemos comentado, el kernel (del que no vamos a hablar, aunque es muy importante) y es de tipo FAT32, por eso se puede ver en Windows. B\u00e1sicamente contiene el sistema. La segunda partici\u00f3n se monta en /media/data y est\u00e1 dedicada a contener la informaci\u00f3n de soporte a las aplicaciones, es decir configuraciones, librer\u00edas, archivos de datos (savestates por ejemplo) y las propias aplicaciones instaladas en la tarjeta interna. El formato de esta partici\u00f3n es EXT3, propio de Linux y por eso no se monta en Windows. La tarjeta externa funciona de forma parecida a la segunda partici\u00f3n de la interna, es decir, sirve para contener aplicaciones y archivos de usuario, por ejemplo es donde se suelen colocar las ROMs. La \u00fanica partici\u00f3n de esta tarjeta se monta en /media/sdcard . Esta tarjeta externa puede estar en formatos FAT32 o los propios de Linux (ext2, ext3, ext4). ROGUE soporta adem\u00e1s exFAT, lo que permite aprovechar mejor las tarjetas de gran capacidad. En esta tarjeta lo \u00fanico importante en cuanto a la estructura de carpetas es que exista en la ra\u00edz de la misma un directorio llamado apps (si est\u00e1 en formato FAT32 o exFAT ser\u00e1 indiferente si est\u00e1 en may\u00fasculas, ya que estos sistemas de archivos no distinguen may\u00fasculas y min\u00fasculas). El resto de cosas que pongamos en esta tarjeta (fundamentalmente ROMs) podr\u00e1n organizarse como queramos (ver apartado Las ROMs y su organizaci\u00f3n ). Existe cierta confusi\u00f3n sobre si hay que formatear la tarjeta interna. En realidad la imagen que se graba o flashea (como se suele decir) incluye el formato. Flashear una tarjeta microSD es reconstruir el formato y el contenido de otra tarjeta, es decir clonarla. La imagen es un volcado bit a bit de la tarjeta original (forma y contenido). Entonces, \u00bfpor qu\u00e9 sugieren muchos videos y procedimientos formatear la microSD a la que luego se le va a flashear una imagen? Sospecho que es para hacer desaparecer las dos particiones de la tarjeta con el firmware que vamos a sobreescribir, para que luego no haya dudas de lo que hay que seleccionar en el programa de flasheo. Eso en Windows. En Linux se puede hacer muy f\u00e1cilmente referencia a la tarjeta en s\u00ed, adem\u00e1s de a las particiones, por lo que el formateo previo es redundante. En resumen, que en teor\u00eda da igual el formato en que est\u00e1 la tarjeta antes de flashear la imagen. El flasheo \"construye\" el formato a la vez que le da contenido. Es como estampar un vinilo a partir de un molde master. Conexi\u00f3n de red \u00b6 El puerto USB2 cuando se conecta al PC se monta como una tarjeta de red adicional. Por ejemplo en una m\u00e1quina Linux aparece este adaptador al conectar el cable: enp0s29u1u2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 10.1.1.1 netmask 255.255.255.252 broadcast 10.1.1.3 inet6 fe80::f721:afcb:94:3078 prefixlen 64 scopeid 0x20<link> ether a6:7b:58:c5:fe:30 txqueuelen 1000 (Ethernet) RX packets 13 bytes 2786 (2.7 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 24 bytes 4097 (4.0 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 Ah\u00ed puede verse que se define una red con un rango de IPs muy reducido (s\u00f3lo 2 bits). El PC toma la IP 10.1.1.1 y la consola la 10.1.1.2 . Si hacemos una detecci\u00f3n de puertos abiertos en la m\u00e1quina a trav\u00e9s de este adaptador de red veremos que se encuentran abiertos los puertos correspondientes a FTP, SSH (lo que nos permite hacer transmisiones SCP y SFTP) y Telnet: PORT STATE SERVICE 21/tcp open ftp 22/tcp open ssh 23/tcp open telnet Por defecto el sistema de red est\u00e1 configurado para utilizar password. Se desactiva abriendo la aplicaci\u00f3n Network que hay en la secci\u00f3n Settings Como el enrutado del adaptador \u00e9ste no da salida a internet no hay problema de inseguridad por quitar el password. El programa anterior s\u00f3lo es se utiliza para cambiar esos ajustes, no es necesario que est\u00e9 abierto para que funcione la conectividad. En Windows un buen programa para transferir archivos por FTP a la consola es WinSCP . A partir del minuto 3:45 de este v\u00eddeo (en ingl\u00e9s) se ve c\u00f3mo se usa. Este otro v\u00eddeo (en espa\u00f1ol) tambi\u00e9n muestra el proceso. En Linux no es necesario, pero en Windows, dependiendo de la versi\u00f3n hay que instalar un driver. En el post inicial de este foro lo comentan. Tambi\u00e9n se describe a partir del minuto 19:42 de este v\u00eddeo . Cambio de iconos a las aplicaciones \u00b6 Los iconos de los OPKs que muestra Gmenu2x (ya sean emuladores, juegos, ports o utilidades) se pueden cambiar muy f\u00e1cilmente. Algo que se suele hacer es cambiar el icono de los emuladores para que representen a la m\u00e1quina emulada. Para cambiarlos hay dos opciones: Copiar el fichero (.PNG por ejemplo) en cualquier lugar de alguna de las tarjetas (un buen sitio puede ser el mismo directorio apps ), editar el OPK (pulsando Select) y cambiarlo en el campo Icon (esta opci\u00f3n s\u00f3lo est\u00e1 disponible en ROGUE): Desempaquetar los OPKs de los emuladores, cambiar el icono y volver a empaquetar. Para desempaquetar/reempaquetar ver la secci\u00f3n Gesti\u00f3n de OPKs m\u00e1s adelante. En la opci\u00f3n 1, en el pantallazo, puede verse que el icono lo est\u00e1 cogiendo de dentro del OPK del propio emulador (el paso al interior es con el # ). Pero se puede elegir cualquier ruta del sistema de ficheros. Bater\u00eda \u00b6 El puerto de carga de la RG350 es el etiquetado como USB2. Es un conector USB tipo C. Los cargadores USB tipo C son m\u00e1s complejos que los microUSB. Con las nuevas tecnolog\u00edas de carga r\u00e1pida de los m\u00f3viles, el cargador no se limita a enviar corriente al dispositivo, sino que hay una negociaci\u00f3n previa, una especie de protocolo. Fue famoso el problema de la Raspberry Pi 4 por el cual no se pod\u00eda alimentar con algunos alimentadores tipo C porque identificaban a la Raspberry de forma incorrecta y luego se negaban a darle corriente. Adem\u00e1s de todo esto, da la impresi\u00f3n de que la RG350 tiene una circuiter\u00eda de carga muy elemental (por los distintos comportamientos que tiene el LED de carga entre los distintos usuarios). Por todos estos motivos, si hay que elegir un cargador, mejor optar por uno sencillo, no uno preparado para gestionar carga r\u00e1pida por USB-C. Escoger uno de s\u00f3lo 5 Voltios (los de carga r\u00e1pida tienen tensi\u00f3n variable de hasta 12V) y entre 1 y 1.5 Amperios. Una buena opci\u00f3n es cargar conectandola a un PC. Los puertos USB de un PC est\u00e1n limitados a 500mA, lo que se puede considerar una carga lenta, lo que en realidad es saludable para la bater\u00eda. La bater\u00eda de la RG350 es de 3,7V y 2.5Ah. Los alimentadores USB son de 5V. Considerando la diferencia de 3,7 a 5 como la p\u00e9rdida de rendimiento que hay en el proceso (aproximaci\u00f3n burda), se pueden echar las cuentas m\u00e1s f\u00e1cilmente. Estos ser\u00edan los tiempos con cargadores de distintas intensidades: Intensidad de carga Tiempo para carga completa 2,5A 1 hora 1A 2,5 horas 500mA (PC) 5 horas Todos estos tiempos son en el peor de los casos cuando la carga necesaria sea completa. El LED de la consola informa de varios aspectos de la bater\u00eda de la siguiente manera: Estado LED Significado Verde fijo Consola encendida con bater\u00eda con buen nivel de carga. Tambi\u00e9n indica carga completada cuando cargamos la bater\u00eda con la consola encendida, al pasar de rojo a verde Parpadeo en verde Bater\u00eda baja Rojo fijo Cargando (tanto con consola encendida como apagada) Apagado Carga completada (con la consola apagada) Algunos usuarios comentan que no llegan a ver apagarse nunca el LED rojo cuando la cargan con la consola apagada. Esto parece indicar que el circuito de carga no es muy avanzado y en ocasiones no es capaz de determinar correctamente el final de la carga. Es evidente que el firmware no gestiona el nivel de carga con estad\u00edsticas como hacen los modernos smartphones por lo que el mismo se debe calcular casi directamente en funci\u00f3n de la tensi\u00f3n medida en la bater\u00eda, que puede diferir entre las distintas unidades o incluso factores externos como la temperatura. En esos casos, tener en cuenta los tiempos de carga indicados m\u00e1s arriba en funci\u00f3n de la intensidad del cargador utilizado, para desconectar el cargador cuando haya pasado dicho tiempo. En cuanto al reemplazo de la bater\u00eda original, un usuario al que se le hinch\u00f3 la suya, le quit\u00f3 la cinta que la envuelve y pega a la tapa trasera y encontr\u00f3 que la bater\u00eda era \u00e9sta: Esta bater\u00eda tiene un conector de cinta como el siguiente: al que se le ha soldado el cable: El modelo oficial parece ser el siguiente: De dimensiones: 68.60 x 48.70 x 5.54mm Al final del cable soldado al conector de cinta, se encuentra un conector Micro JST 1.25mm 2-Pin: Algunas medidas tomadas con pol\u00edmetro sobre la bater\u00eda en operaci\u00f3n y carga: Intensidad de descarga: 385mA (GMenu2X) - 480mA (Tekken3) Tensi\u00f3n de descarga: 4,10V (casi llena) Tensi\u00f3n de carga: 4,20V Tensi\u00f3n de bater\u00eda: 4,18V (casi llena) Otra incidencia que se ha observado varias veces es la de las bater\u00edas que parecen no querer cargarse m\u00e1s. En estos casos, adem\u00e1s de hacer los evidentes cambios del material de carga (cargador y/o cable), puede intentarse hacer un \"power cycle\" de la siguiente forma: Abrir la consola y desconectar la bater\u00eda del conector. Mantener pulsado el bot\u00f3n Power durante 30 segundos. Volver a conectar la bater\u00eda, cerrar la consola e intentar cargar de nuevo. FAQ \u00b6 \u00bfQu\u00e9 m\u00e1quinas puedo emular? \u00b6 En general la PlayStation original (o PS1) marca el techo. Incluso en esta m\u00e1quina hay juegos particularmente exigentes que hacen sudar al procesador de la RG350 que se nota sobre todo en el sonido y la fluidez de las animaciones. Otras m\u00e1quinas de potencia parecida que por tanto podr\u00edan dar problemas con emuladores poco eficientes son la Game Boy Advance o incluso la SuperNintendo en los juegos que inclu\u00edan chips especiales en el cartucho. Con m\u00e1quinas m\u00e1s complejas como N64, Dreamcast o PSP podemos llegar a encontrar emuladores, pero eso no significa que vayan a resultar jugables. \u00bfQu\u00e9 es un romset? \u00b6 Romset = set de ROMs, es decir un conjunto cerrado y definido de ROMs. En los emuladores de m\u00e1quinas arcade suele manejarse el t\u00e9rmino m\u00e1s que con el resto de emuladores, aunque tambi\u00e9n aplica. Por ejemplo, cuando decimos que xMAME soporta el romset 84, quiere decir que es capaz de emular todas las ROMs contenidas en ese set. Los sets se definen con unos ficheros XML llamados DATs que se pueden consultar aqu\u00ed . De hecho la forma de verificar si una ROM est\u00e1 correctamente definida para ser ejecutada en xMAME, FBA o MAME4all es echar mano de estos DATs revisando los nombres tanto de la ROM como de los ficheros que la constituyen, as\u00ed como sus hashes. Los romsets soportados por xMAME, MAME4All y FBA son los siguientes: xMAME: 0.37b16 , tambi\u00e9n conocido como 0.52 0.69 0.84 MAME4All: 0.37b5 , tambi\u00e9n conocido como 0.41 FBA: 0.2.97.44 RetroArch core MAME2003: v0.78 RetroArch core MAME2003+: v0.78 En este documento se listan todos los romsets que se manejan habitualmente en RG350. Este art\u00edculo es un buen tutorial sobre c\u00f3mo podemos gestionar y solucionar los problemas que tengamos al montar un romset. \u00bfC\u00f3mo se activan los sticks anal\u00f3gicos en los juegos de PS? \u00b6 Depende del juego. Es decir, hay juegos que no los soportan porque son anteriores a la aparici\u00f3n del Dual Analog o del Dual Shock (mediados y finales de 1997, respectivamente). Hay por tanto que probar en cada juego todas las opciones que aparecen en Core settings > Analog Mode : No es lo mismo (porque no deja de ser digital), pero siempre existe la opci\u00f3n de usar la emulaci\u00f3n de la cruceta con el stick izquierdo pulsando Power + B. En los juegos de PlayStation en formato CUE+BIN \u00bfqu\u00e9 archivos tengo que copiar a la consola? \u00b6 El cue no es necesario si el bin es \u00fanico. Es decir si hay un bin y un cue con copiar el bin a la consola es suficiente. Si hay un cue y por ejemplo 8 bin (esto puede ocurrir en los juegos que ten\u00edan pistas de audio en el CD seg\u00fan c\u00f3mo se haya hecho el dump) entonces s\u00ed interesa copiar el cue y lanza el juego desde \u00e9l. En esos casos lo m\u00e1s recomendable es empaquetar todas las pistas en pbp que ocupa menos y es un s\u00f3lo archivo. Si se utilizan los cue+bin en los lanzadores aparece varias veces el mismo nombre del juego repetido tantas como ficheros cue y bin tengamos (en el ejemplo anterior 1+8=9 veces). El cue es una especie de directorio de las pistas que conten\u00eda el disco. De hecho es un fichero de texto que se puede leer. Si se le da s\u00f3lo un bin el emulador se adapta y entiende que es la \u00fanica pista que tiene que usar y que lo contiene todo. Como curiosidad, si el juego es de los de varias pistas y se copia s\u00f3lo el primer bin (que sol\u00eda ser la pista que conten\u00eda el c\u00f3digo del juego) tambi\u00e9n funciona, pero entonces el juego se ejecuta sin pistas de audio. \u00bfPor qu\u00e9 salen los juegos de GBC en blanco y negro en Gambatte? \u00b6 Algunos cartuchos de Game Boy eran mixtos, es decir serv\u00edan tanto para la Game Boy original como la Color. Cuando el juego se insertaba en la consola correspondiente mostraba los gr\u00e1ficos adecuados. En Gambatte, al ser un mismo emulador para las dos m\u00e1quinas, hay que seleccionar el tipo de m\u00e1quina con que queremos ejecutar la ROM mixta. El ajuste est\u00e1 en Settings > System . Priority DMG se corresponde con la Game Boy original y Priority GBC con la Game Boy Color. As\u00ed pues lo m\u00e1s recomendable es ajustar el segundo valor. As\u00ed los juegos de la Game Boy original (extensi\u00f3n .gb normalmente) se ejecutar\u00e1n en blanco y negro y los de la Game Boy Color (extensi\u00f3n .gbc normalmente) en color: Como tras hacer este cambio tenemos que reiniciar el emulador, hay que hacer que el nuevo valor sea el predeterminado seleccionando Save as default y luego confirmando: \u00bfQu\u00e9 formato hay que dar a la tarjeta interna antes de flashear el firmware? \u00b6 La interna no es necesario formatearla antes de flashear la imagen, a pesar de todo lo que se lee por ah\u00ed. El flasheo es formateo+instalaci\u00f3n de datos, as\u00ed que el formato previo se sobreescribe. \u00bfQu\u00e9 tama\u00f1o es recomendable que tenga la tarjeta interna? \u00b6 Si s\u00f3lo es para alojar el sistema, hasta con una de 4GB ser\u00eda suficiente. Si se quiere meter adem\u00e1s emuladores y ROMs, entonces hay que subir el tama\u00f1o lo que se considere que se va a necesitar. En el debate sobre qu\u00e9 tarjeta poner m\u00e1s grande (si la interna o la externa), hay que tener en cuenta que pasar cosas por cable a la interna es muy lento. Lo m\u00e1s r\u00e1pido para incorporar contenidos es copiarlos a la externa directamente en el ordenador. Tambi\u00e9n hay considerar que mantener muchos contenidos en la interna dificulta los cambios de firmware en el futuro (no las actualizaciones) ya que se sustituye completamente el contenido de esta tarjeta. En esa situaci\u00f3n habr\u00eda que rescatar los contenidos previamente por cable, lo que como hemos dicho ya es lento. Una opci\u00f3n m\u00e1s r\u00e1pida ser\u00eda copiar de la interna a la externa por medio de DinguxCmdr, pero esto demuestra que antes de llegar a esa situaci\u00f3n ser\u00eda mejor idea mantener esos ficheros directamente en la tarjeta externa. \u00bfC\u00f3mo se soluciona el petardeo de sonido en las \u00faltimas versiones de ROGUE? \u00b6 Abrir la aplicaci\u00f3n Sound Mixer de la secci\u00f3n Settings en GMenu2X Poner el volumen PCM y el master a 0% Reiniciar Poner el volumen PCM sobre 80% y el MASTER a 100% Reiniciar ( Fuente ) Opciones para actualizar el firmware RG350-ROGUE-CFW \u00b6 Entre los assets de cada release encontramos tres opciones: Tipo Descarga Descripci\u00f3n Update RG350 RG350M Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque dependiendo de la versi\u00f3n del sistema de partida puede no quedar del todo fino. Se recomienda utilizar esta opci\u00f3n s\u00f3lo para actualizar entre versiones de ROGUE, es decir si se parte de BASE, hay que utilizar una de las dos siguientes (preferentemente la \u00faltima). Flasher RG350 Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien. En este video se ilustra todo el procedimiento. sd_image.bin RG350 RG350M Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opci\u00f3n 2 y la \u00fanica que sirve si se parte de un sistema que no arranca. La imagen ocupa m\u00e1s porque es un volcado de todo lo que contiene la SD (incluidos los espacios vac\u00edos de la tarjeta). El proceso incorpora la complejidad adicional de tener que utilizar algunas utilidades poco habituales, y en el modelo normal de la consola, adem\u00e1s el tener que abrirla para extraer la microSD interna. En este video (en ingl\u00e9s) se ilustra todo el procedimiento. La primera parte de este otro v\u00eddeo tambi\u00e9n muestra el proceso, esta vez en espa\u00f1ol. As\u00ed pues, para la primera actualizaci\u00f3n (y posteriores) se puede utilizar cualquier m\u00e9todo. Dependiendo de la situaci\u00f3n es m\u00e1s recomendable uno que otro. En general empezar por la opci\u00f3n 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el m\u00e9todo 3. Flash de SD interna \u00b6 De los procesos de actualizaci\u00f3n descritos en el apartado anterior, el que m\u00e1s dudas y temores plantea es el tercero. Sin embargo es el m\u00e1s recomendable ya que nos permite cambiar la tarjeta por una de m\u00e1s calidad, lo que a la larga es beneficioso. Los pasos para realizar el flasheo de la tarjeta interna son los siguientes: En el modelo de RG350 original, abrir la consola (en los modelos RG350P y M no es necesario al estar accesible la tarjeta INT desde el exterior). El tornillo inferior izquierdo tiene encima un sello que no se puede despegar entero; se desintegra. S\u00f3lo hay que tener cuidado con no partir el cable de la bater\u00eda por darle un tir\u00f3n. Es perfectamente normal que se descuelguen los gatillos L y R. No pasa nada, nos ocuparemos de ello justo antes de cerrar. Sacar la SD rompiendo un nuevo sello que no se puede despegar de una pieza. Sale a cachos. Si no se ha flasheado anteriormente la tarjeta interna por otros medios, se recomienda apartarla, es decir guardarla como est\u00e1 y flashear otra tarjeta. Las recomendaciones para la tarjeta son que tenga 16GB class 10. Ser\u00eda suficiente con una tarjeta de 4GB, ya que el sistema ocupa menos de 1GB, pero tarjetas de esa capacidad ya no se suelen encontrar y de hacerlo, lo m\u00e1s probable es que sea una tarjeta vieja y lenta. Bajar la im\u00e1gen que queremos flashear. Existen dos ramas (para el caso de ROGUE consultar el apartado anterior): BASE: https://rs97.bitgala.xyz/RG-350/Latest%20Firmware/ ROGUE: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases Instalar uno de estos programas: WinDisk 32 Imager Balena Etcher Montar la tarjeta elegida para flashear en el PC con un adaptador o lector. Utilizando el programa del punto 4 flashear la imagen (hay quien recomienda formatear antes pero considero que confunde el proceso m\u00e1s que otra cosa). En este documento de la fundaci\u00f3n Raspberry Pi se detallan los pasos para flashear una imagen de sistema para esta placa. El proceso es id\u00e9ntico en RG350 (cambiando la imagen naturalmente). Expulsar la SD del ordenador. Pinchar en la RG y cerrarla cuidando de que encajen bien los gatillos L/R. Desde Linux el paso 6 de la lista anterior se puede hacer con este comando desde consola (adaptando el nombre del dispositivo si en nuestro sistema es distinto): $ sudo dd if = sd_image.bin of = /dev/mmcblk0 bs = 2M Gesti\u00f3n de OPKs \u00b6 Este art\u00edculo del viejo wiki de la GCW Zero (que afortunadamente se conserva en archive.org), documenta muy bien c\u00f3mo construir un OPK y algunos de los par\u00e1metros que contienen sus ficheros. En Linux se puede hacer y deshacer un OPK muy f\u00e1cilmente con los siguientes comandos: Descompresi\u00f3n: unsquashfs fichero.opk Compresi\u00f3n: mksquashfs directorio fichero.opk -all-root -noappend -no-exports -no-xattrs Cheatsheets \u00b6 Versiones del firmware BASE \u00b6 En BASE no se muestra la versi\u00f3n del firmware (como s\u00ed hace ROGUE), por lo que hay que adivinar la versi\u00f3n en base a la fecha de creaci\u00f3n: Fecha Versi\u00f3n 2019-10-10 1.4 2019-10-18 1.5 2019-10-27 1.5.1 2019-11-10 (build date) 1.6 2019-11-17 (build date) 1.7 Flags de ROGUE \u00b6 Existen 5 ficheros ocultos en el directorio /media/data que sirven para activar varias tareas de mantenimiento/instalaci\u00f3n inicial durante el arranque. Para reactivarlos s\u00f3lo hay que borrar el fichero correspondiente que se crea al finalizar la operaci\u00f3n: Fichero Operaci\u00f3n .clean Comprobaci\u00f3n del sistema de ficheros. .linker Instala los links para GMenu2X de los programas preinstalados. Se comprueba durante el script de arranque /usr/sbin/frontend_start .partition_resized Redimensiona la partici\u00f3n data de la SD interna para aprovechar todo el espacio disponible en la tarjeta ejecutando este script . .reconfig Borra algunos ficheros residuales SSH, de otros programas y de estado (como el volumen y brillo) ejecutando este script . .swapon Crea el fichero para la memoria SWAP ejecutando este script . Controles stock/ROGUE \u00b6 Funci\u00f3n Shortcut Ajuste de nitidez (hardware scaling) Power + Up/Down Emulaci\u00f3n de crucerta con stick izquierdo Power + B Ajuste de brillo Power + Volumen+/Volumen- Fuerza el escalado de la pantalla Power + A Pantallazo (se guarda en /media/data/local/home/screenshots ) Power + X Emulaci\u00f3n de rat\u00f3n con stick derecho (los botones son L2/R2) Power + R1 Fuerza la salida al frontend (normalmente GMenu2X) Power + Select Reset Power + Start or Reset button Forzar apagado Power mantenido 4 segundos Salvapantallas en GMenu2X Power Controles ODbeta \u00b6 Funci\u00f3n Shortcut Apagar el sistema Mantener POWER Reinicio del sistema Power + Start + Select Forzar cierre de aplicaci\u00f3n actual Power + Select Subir volumen sonido Power + UP Bajar volumen sonido Power + DOWN Subir brillo pantalla Power + RIGHT Bajar brillo pantalla Power + LEFT Modo de relaci\u00f3n de aspecto en el escalado por hardware Power + A Activa/desactiva el modo rat\u00f3n (anteriormente POWER + L1) Power + B Suspender sistema (pulsar POWER para despertar) Power + Y Captura de pantalla (en ~/screenshots ) Power + X Muestra la salida de los scripts de arranque en lugar del logo de boot A (durante el arranque) Boot mode del sistema. Luego seguir esta gu\u00eda para flashear por USB Select (durante el arranque) Estos controles est\u00e1n definidos en el fichero /etc/pwswd.conf . Si se quieren cambiar, hay que copiar dicho fichero a /media/data/local/etc/pwswd.conf con los cambios deseados. Controles emuladores \u00b6 Emulador/Aplicaci\u00f3n Funci\u00f3n Shortcut SimpleMenu Todos Listado FBA (CPS/NeoGeo) Todos Listado FBA (CPS/NeoGeo) Salir L1+R1+Start > Exit o Power > Exit FBA RetroArch con UniBIOS Entrar en ajustes UniBIOS A+B+Y ScummVM Todos Listado ScummVM Salir Start xMAME Todos Listado xMAME Salir Select + L1 + R1 Daphne Todos Listado Daphne Salir Select OpenBOR Todos Listado OpenBOR Salir Salir primero del juego (normalmente con Quit) y luego pulsar Y en el interfaz de OpenBOR (a pesar de que en la leyenda pone X) MAME4All Todos Listado MAME4All Salir Power Gambatte (GB/GBC) Salir Power > QUIT o R1 > QUIT ReGBA (GBA) Salir Power > Exit o Select + Start > Exit Game & Watch Salir Select FCEUX (NES) Salir Power > Exit PocketSNES (SNES) Salir Select + Start > Exit Genesis Plus GX (GG/SMS) Salir Power > Quit o Select + Start > Exit Genesis Plus GX (GG/SMS) Save state Select + L1 Genesis Plus GX (GG/SMS) Load state Select + R1 Picodrive (MD) Salir Select > Exit PCSX4All (PS) Salir Power > Quit Temper (PCE) Salir Power > Exit Temper NGPCEmu (NGP) Salir Power > Quit Race (NGP) Salir Select + Start > Exit SwanEmu (WS) Salir Power > Quit Stella (A2600) Salir Start > Exit Game (desplazando cursor con stick izquierdo y confirmando con A) A5200 Salir Select+Start > Exit ProSystem (A7800) Salir Select+Start > Exit Handy (LYNX) Salir Power JzIntv (Intellivision) Select > Quit to rom chooser o Power ColecoD (ColecoVision) Salir Select+Start > Exit Retro8 (PICO8) Salir Select DOSBox Salir Hay que localizar la opci\u00f3n del juego en ejecuci\u00f3n para salir a DOS Puntos de montaje de las tarjetas \u00b6 Directorio Elemento montado /media/system Primera partici\u00f3n de la SD interna /media/data Segunda partici\u00f3n de la SD interna /media/sdcard Primera partici\u00f3n de la SD externa Directorios/Ficheros interesantes stock/ROGUE \u00b6 En este documento se indican rutas importantes de varios emuladores y ports populares. Directorio Contenido /media/data/local/home/ Configuraciones de emuladores, ports y aplicaciones en general. Es el llamado Home del sistema. Enlace simb\u00f3lico desde /media/home /media/data/apps/ Aplicaciones ( .opk ) instaladas en la tarjeta interna /media/sdcard/apps/ Aplicaciones ( .opk ) instaladas en la tarjeta externa /usr/share/gmenu2x/sections/ Lanzadores de las aplicaciones y settings preinstaladas en el sistema y que se unen a las instaladas por el usuario en /media/data/local/home/.gmenu2x/sections/ /var/log/messages Logs del sistema /var/log/gmenu2x.log Log de GMenu2X /proc/ Ficheros asociados a procesos en ejecuci\u00f3n como cpuinfo que muestra informaci\u00f3n sobre el procesador /media/data/local/home/.gmenu2x/skins Themes de GMenu2X /media/data/local/home/.gmenu2x/skins/<tema>/wallpapers/ Wallpapers /usr/sbin/frontend_start Lanzador de frontend predeterminado /media/data/local/sbin/frontend_start Lanzador de frontend personalizado /media/home Enlace simb\u00f3lico de /media/data/local/home /usr/local Enlace simb\u00f3lico de /media/data/local /usr/share/scriptrunner/scripts Scripts preinstalados en ScriptRunner /sys/class/power_supply/battery/ Ficheros de control de bater\u00eda; voltage_now da el voltaje actual de la bater\u00eda /sys/class/graphics/fb0/ Ficheros de control de la pantalla; bits_per_pixel da la profundidad de color /usr/share/gmenu2x/sections/ Lanzadores de aplicaciones preinstaladas en rootfs /usr/share/gcwconnect/gcwzero.ttf Tipo de letra de GCWZero /proc/cmdline Permite conocer el modelo de consola (argumento hwvariant ) /sys/devices/platform/jz-lcd.0/graphics/fb0/modes o /sys/class/graphics/fb0/modes Permiten conocer la resoluci\u00f3n de la pantalla en Stock/ROGUE Directorios/Ficheros interesantes OpenDingux beta \u00b6 Directorio Contenido /sys/devices/platform/13050000.lcd-controller/graphics/fb0/modes Permite conocer la resoluci\u00f3n de la pantalla /sys/class/graphics/fb0/virtual_size Modo del framebuffer /media/data/local/share/opendingux/loading.png Pantalla mostrada durante las transiciones de modo ~/.autostart Script para lanzar el frontend. Si no existe se lanza GMenu2X por defecto /sys/kernel/debug/gpio Estado de los GPIOs del procesador y correspondencia con controles /sys/class/power_supply/jz-battery/voltage_max_design Voltaje de bater\u00eda considerado como carga m\u00e1xima (4,2V actualmente) /sys/class/power_supply/jz-battery/voltage_min_design Voltaje de bater\u00eda considerado como carga m\u00ednima (3,4V actualmente) /sys/class/power_supply/jz-battery/voltage_now Voltaje actual de la bater\u00eda /sys/class/power_supply/usb-charger/online Sensor del puerto de carga (0:Desconectado, 1:Conectado). No indica si la consola se est\u00e1 cargando, s\u00f3lo si hay un cable conectado /etc/pwswd.conf Atajos predeterminados de pwswd /media/data/local/etc/pwswd.conf Atajos de pwswd personalizados por usuario Directorios de savestates \u00b6 Sistema Emulador Directorio Atari 2600 Stella /media/data/local/home/.stella/state Atari 7800 ProSystem Mismo directorio de las ROMs Capcom System I, II, III y Neo Geo FBA /media/data/local/home/.fba/saves NES FCEUX /media/data/local/home/.fceux/fcs Game Boy y Game Boy Color Gambatte /media/data/local/home/.gambatte/saves Game Boy Advance ReGBA /media/data/local/home/.gpsp Game Gear y MasterSystem SMS Plus /media/data/local/home/.smsplus/state Game Gear y MasterSystem Genesis Plus /media/data/local/home/.genplus/saves Atari Lynx Handy /media/data/local/home/.handy Mega Drive PicoDrive /media/data/local/home/.picodrive/mds Neo Geo Pocket NGPCEmu /media/data/local/home/.ngpcemu/sstates PC Engine Temper /media/data/local/home/.temper/save_states PlayStation PCSX4All /media/data/local/home/.pcsx4all/sstates y /media/data/local/home/.pcsx4all/memcards SNES PocketSNES /media/data/local/home/.pocketsnes WonderSwan SwanEmu /media/data/local/home/.swanemu/sstates Arcade xMAME /media/data/local/share/xmame/xmame52/sta , /media/data/local/share/xmame/xmame69/sta y /media/data/local/share/xmame/xmame84/sta ScummVM ScummVM /media/data/local/home/.local/share/scummvm/saves OpenBOR OpenBOR /media/data/local/home/.OpenBOR/Saves Port Cave Story /media/data/local/home/.nxengine Port VVVVVV /media/data/local/home/.local/share/VVVVVV/saves Port Super Methane Bros. /media/data/local/home/.methane Port SORR /media/data/local/home/.sorrv5/savegame BIOS \u00b6 Sistema Emulador Directorio Fichero Atari 5200 A5200 /media/data/local/home 5200.rom Atari Lynx Handy /media/data/local/home/.handy lynxboot.img Gameboy Gambatte /media/data/local/home/.gambatte/bios/ gb_bios.bin Gameboy Color Gambatte /media/data/local/home/.gambatte/bios/ gbc_bios.bin Gameboy Advance Gpsp /media/data/local/home/.gpsp/ gba_bios.bin MegaCD Picodrive /media/data/local/home/.picodrive/ bios_CD_E.bin ; bios_CD_J.bin ; bios_CD_U.bin NeoGeo Mismo directorio de las ROMs neogeo.zip/uni-bios.rom PC-Engine CD Temper /media/data/local/home/.Temper/syscards/ syscard3.pce PlayStation Pcsx4all /media/data/local/home/.pcsx4all/bios/ psxonpsp660.bin ; scph1001.bin ; scph5500.bin ; scph5501.bin ; scph5502.bin C\u00f3digos teclas para mappers DOSBOX \u00b6 Control C\u00f3digo Tecla de PC en mapper predeterminado A 306 key_lctrl B 308 key_lalt X 32 key_space Y 304 key_lshift L1 9 key_tab L2 280 key_pageup R1 8 key_bspace R2 281 key_pagedown UP 273 key_up DOWN 274 key_down LEFT 276 key_left RIGHT 275 key_right START 13 key_enter SELECT 27 key_esc POWER 278 key_home C\u00f3digos teclas en OpenDingux Beta \u00b6 Los c\u00f3digos de las teclas cambian en el nuevo firmware beta : Control C\u00f3digo A 285 B 312 X 57 Y 42 L1 15 L2 73 R1 14 R2 81 UP 72 DOWN 80 LEFT 75 RIGHT 77 START ?? SELECT ?? POWER ?? Soluci\u00f3n de problemas \u00b6 Corrupci\u00f3n de lanzador \u00b6 En ocasiones no se muestra correctamente el icono de una aplicaci\u00f3n, o no apunta a donde deber\u00eda. Puede suceder cuando hay dos OPK's con el mismo nombre en la SD interna y externa, y se borra uno de ellos por ejemplo. Para resetear la informaci\u00f3n, entrar en la secci\u00f3n donde est\u00e9 el problema dentro de el directorio /media/data/local/home/.gmenu2x/sections y borrar el nombre de la aplicaci\u00f3n problem\u00e1tica. Lo que hay all\u00ed no es la aplicaci\u00f3n en s\u00ed sino un fichero tipo .desktop con metainformaci\u00f3n (icono, descripci\u00f3n, etc.). Colocar lanzadores en secciones nuevas de GMenu2X \u00b6 GMenu2X permite crear nuevas secciones y codificar en los .desktop que hay dentro de los OPKs que los lanzadores se muestren en esas secciones. Por alg\u00fan motivo el mecanismo no fnunciona del todo bien y si la secci\u00f3n no es de las tradicionales ( applications , emulators , settings , games ), al editar el lanzador no se persisten los cambios ya que no se generan los ficheros de enlace en ~/.gmenu2x/sections . Podemos enga\u00f1ar a GMenu2X para que genere estos ficheros siguiendo estos pasos: Crear el OPK con el .desktop apuntando a una secci\u00f3n de las que no dan problemas, por ejemplo emulators . Transferir el OPK a la consola y editar el lanzador haciendo un cambio menor, como por ejemplo el filtro de extensiones, para que se genere el fichero de link en ~/.gmenu2x/sections/emulators . Cambiar el par\u00e1metro Categories (es decir la secci\u00f3n) en el .desktop del OPK poniendo la que interese en lugar de emulators , por ejemplo doom . Transferir el nuevo OPK a la consola. Reiniciar GMenu2X para asegurarnos de que se lean todos los cambios. A partir de entonces aparece el lanzador en su secci\u00f3n ( doom en el ejemplo) y si se edita se persisten los cambios sin problemas. Como dato adicional, para que la nueva secci\u00f3n tenga icono propio, hay que colocar un icono png de 32x32 con el mismo nombre de la secci\u00f3n creada ( doom.png en el ejemplo) en la ruta: /media/data/local/home/.gmenu2x/skins/<theme>/sections donde <theme> se corresponde con el skin que estemos usando. Programas que se cierran \u00b6 En ocasiones los emuladores, aplicaciones o frontends (EmulationStation, PyMenu, SimpleMenu, etc.) cuando no est\u00e1n bien configurados se cierran sin dar m\u00e1s explicaciones al abrirlos o durante su manipulaci\u00f3n. Para tener algo que analizar, si los hemos lanzado desde GMenu2X, podemos activar un log que nos ofrecer\u00e1 la salida de error en la invocaci\u00f3n de estos programas. Para activarla hay que entrar en los ajustes de GMenu2X y poner a ON el par\u00e1metro Output logs ( Archivos de registro de sucesos si tenemos el interfaz en espa\u00f1ol): Una vez que en el log haya algo que mostrar aparecer\u00e1 un lanzador nuevo de nombre Log Viewer ( Lector de Registros de sucesos si tenemos el interfaz en espa\u00f1ol) donde podremos consultar la salida de error del proceso que se ha cerrado y con suerte obtener alguna pista sobre el motivo del cierre: Particularidades juegos \u00b6 Metal Gear Solid (PS): Desactivar HLE en el emulador y seleccionar BIOS scph1001.bin (instrucciones aqu\u00ed ). Realmente este ajuste, aunque imprescindible para MGS y otros, es recomendable en general. Metal Gear Solid (PS): En un momento dado del juego (alerta Spoiler) hay que superar un boss cambiando el mando de puerto en la consola original. Como con la RG esto no se puede hacer, hay un truco que consiste en llamar mucho al coronel, entonces se puede quitarles las vendas a los bustos que hay detras, y el boss se desconcierta haciendo que cueste menos derrotarle. Otra opci\u00f3n es descargar todo el cargador contra \u00e9l, que alguna vez le dar\u00e1s. Final Fantasy VIII, IX y algunos juegos europeos (PS): Necesitan parche anticopy o poner el archivo .sbi correspondiente a cada cd en el mismo directorio y con el mismo nombre. Ficheros SBI Harry Potter y la C\u00e1mara secreta , Vagrant Story , Ape Escape y Bugs Bunny & Taz - Time Busters (PS): Estos juegos se quedan atascado en los videos introductorios. La soluci\u00f3n es cambiar la opci\u00f3n Core settings > Emulation core de rec a int . El emulador es m\u00e1s lento pero m\u00e1s preciso y se puede superar ese punto. En ese momento grabar un savestate, volver a poner rec en Core settings > Emulation core y finalmente cargar el savestate. En el Vagrant Story el Analog Mode que soporta este juego es DualShock . Recordar adem\u00e1s que este juego es de los que necesita SBI . Aqu\u00ed se ofrece otra soluci\u00f3n para los casos en que cambiar de modo de emulaci\u00f3n sea demasiado engorroso (por tener que estar haci\u00e9ndolo continuamente). Dragon Ball Z: The Legacy of Goku (GBA): Este juego al poco de empezar a jugar en algunos emuladores muestra el error Este juego no funcionar\u00e1 con el hardware encontrado . Intentar el truco que comentan en este comentario . VVVVVV (port): Si hay problemas durante el arranque (pantalla en negro), borrar el directorio de settings /usr/local/home/.local/share/VVVVVV/ . Si no existe la ruta previa al directorio VVVVVV , es decir /usr/local/home/.local/share/ el juego abrir\u00e1 pero no guardar\u00e1 los estados. En ese caso crear manualmente la ruta desde terminal o DinguxCmdr. Run and Gun (XMAME): Para saltar el Memory Check, enchufar un teclado al puerto USB1/OTG y pulsar F7. Otra opci\u00f3n es mapear L2 a F2 ( Service mode en Input (this game) ) y R2 a F3 ( Reset game en Input (general) ) y pulsarlos a la vez. Parasite Eve 2 y Vandal Hearts 1/2 (PS): Estos juegos tienen un fix espec\u00edfico para ellos en las opciones del emulador: InuYasha Sengoku Battle (PS): Este juego tiene un fix espec\u00edfico para ellos en las opciones del emulador: Full Throttle (ScummVM): En la lucha contra los moteros se hace muy dif\u00edcil pasar por falta de potencia de la m\u00e1quina. No cambia de arma y a veces s\u00ed lo hace pero demasiado lento. Para mejorar la situaci\u00f3n hacer estos ajustes temporales para pasar esa parte: Particularidades emuladores \u00b6 A5200 (Atari 5200) : Hay que colocar la BIOS en /media/data/local/home/5200.rom . Las ROMs pueden estar en cualquier lugar porque el emulador permite seleccionarlas al abrirlo mediante un explorador de ficheros, pero deben estar descomprimidas y con extensi\u00f3n .a52 . ReGBA : La resoluci\u00f3n de pantalla de Game Boy Advance es de 240x160, lo que hace que si se quiere aprovechar bien la pantalla de la RG350 haya que utilizar alg\u00fan tipo de escalado. Los siguientes son los m\u00e1s recomendados (se ajustan en Display settings > Image scaling en ReGBA): None : Encaja la resoluci\u00f3n de GBA pixel a pixel en la pantalla de la RG. Tiene el inconveniente de que la pantalla queda un poco peque\u00f1a. Si se utiliza la versi\u00f3n modificada sin bezel que se puede bajar aqu\u00ed no se ver\u00e1 el marco con aspecto de GBA SP que trae la aplicaci\u00f3n original. Aspect, bilinear : Scaling recomendado por muchos usuarios. Hardware : Nos permitir\u00e1 ajustar el enfoque manualmente, a continuaci\u00f3n se describe el proceso. Empezamos pulsando Power+A hasta poner las bandas negras arriba y abajo. Luego pulsamos Power+Abajo varias veces hasta alcanzar el m\u00ednimo, momento en el que se pierde toda la difuminaci\u00f3n del escalado. Ahora ejecutamos un juego que tenga varios elementos cr\u00edticos en pantalla como texto y/o sprites detallados. Pulsando Power+Arriba iremos aumentando el grado de interpolaci\u00f3n de los gr\u00e1ficos. Si lo llevamos hasta el extremo (pulsando Power+Arriba muchas veces) veremos c\u00f3mo la imagen termina por coger mucho ruido. Se trata pues de localizar el equilibrio en un buen nivel de interpolaci\u00f3n sin que llegue a aparecer ruido. Pcsx4all (PS) : Algunos juegos de PS superan la resoluci\u00f3n de la pantalla de la RG350 (320x240). En esos juegos los textos pueden llegar a leerse mal. En esos casos configurar el par\u00e1metro Video scaling de GPU settings al valor hardware y luego durante el juego utilizar la combinaci\u00f3n de teclas Power+A para conmutar entre los distintos modos de scaling. Tambi\u00e9n podremos ajustar el grado de interpolaci\u00f3n del scaling pulsando Power+Arriba y Power+Abajo de la misma forma que se ha descrito en el caso de ReGBA . Modos de arranque seguro \u00b6 Durante el arranque se puede modificar la forma de iniciar el sistema pulsando algunas teclas: Y : Carga el \u00faltimo kernel que funcion\u00f3 correctamente. X : Carga el \u00faltimo sistema de archivos (rootfs) que funcion\u00f3 correctamente. X+Y : Carga el \u00faltimo sistema (kernel+rootfs) que funcion\u00f3 correctamente. Corrupci\u00f3n de archivos de texto \u00b6 Linux y Windows utilizan distintos sistemas para codificar los retornos de carro de los ficheros de texto. Si creamos o editamos uno de estos ficheros y luego lo transferimos a la RG350, dependiendo del uso que vaya a tener ese fichero podr\u00eda no funcionar. Unos ficheros especialmente sensibles son los scripts como el que determina el lanzador de aplicacione predeterminado, es decir /media/data/local/sbin/frontend_start . Para reconvertir los ficheros de texto del formato de Windows al de Linux existe una peque\u00f1a utilidad llamada dos2unix . Para utilizarla tenemos que conectar con la RG350 por SSH para tener acceso a una terminal o utilizar la aplicaci\u00f3n de terminal ST-SDL . Desde uno de estos terminales ejecutaremos: RG350:/media/data/local/home # dos2unix fichero_a_convertir.txt Backup de home \u00b6 El directorio /home/data/local/home pertenece a la tarjeta interna y es de los m\u00e1s importantes puesto que es donde la mayor\u00eda (por no decir todos) los programas (emuladores, ports, aplicaciones) guardan sus ajustes (como los savestates de los emuladores o las memory cards de pcsx4all). Cuando flasheamos la tarjeta interna (con las opciones 2 y 3 del apartado Opciones para actualizar el firmware RG350-ROGUE-CFW ) el contenido de este directorio se pierde. Una idea ser\u00eda hacer un respaldo del mismo en la tarjeta externa (que no se altera durante el flasheo) y luego restaurarlo. Podemos hacer el backup lanzando un comando de terminal ya sea conectando por SSH o utilizando una aplicaci\u00f3n de terminal (como ST-SDL ). El comando para realizar el backup es: tar -cf /media/sdcard/home_backup.tar -C /media/data/local home En caso de querer excluir alg\u00fan directorio concreto que ocupe mucho y que tengamos respaldado por otro lado (por ejemplo si tuvi\u00e9ramos las ROMs all\u00ed), utilizar el par\u00e1metro --exclude . Vamos a ver c\u00f3mo se excluir\u00edan por ejemplo las im\u00e1genes de previsualizaci\u00f3n de FBA: tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude = home/.fba/previews home Para restaurar: tar -xf /media/sdcard/home_backup.tar -C /media/data/local El comando no es sensible a la ruta, es decir puede lanzarse desde cualquier directorio y genera el fichero home_backup.tar en la ra\u00edz de la tarjeta externa (ruta /media/sdcard/ en el sistema de la consola). Aqu\u00ed puede leerse un monogr\u00e1fico sobre el tema. Monogr\u00e1ficos en blog \u00b6 Primeros pasos con la consola RG350 Instalaci\u00f3n y configuraci\u00f3n de FBA Instalaci\u00f3n y configuraci\u00f3n de xMAME Instalaci\u00f3n y configuraci\u00f3n de MAME4All Instalaci\u00f3n y configuraci\u00f3n de ScummVM Integraci\u00f3n de ScummVM en lanzadores con selecci\u00f3n de ROMs como SimpleMenu Instalaci\u00f3n y configuraci\u00f3n de Daphne Instalaci\u00f3n y configuraci\u00f3n de OpenBOR Instalaci\u00f3n y configuraci\u00f3n de DOSBox Generaci\u00f3n de previews de las roms instaladas Instalaci\u00f3n y configuraci\u00f3n de launcher SimpleMenu Instalaci\u00f3n y configuraci\u00f3n de launcher PyMenu Instalaci\u00f3n y configuraci\u00f3n de launcher EmulationStation Conexi\u00f3n a internet a trav\u00e9s de cable USB C\u00f3mo hacer backup para no perder savestates y configuraciones de emuladores Py Backup. Aplicaci\u00f3n para gestionar backups Compilaci\u00f3n de Buildroot con toolchain en un contenedor Docker Ejemplos de compilaci\u00f3n de algunas aplicaciones por medio del toolchain en Docker Procedimiento para generar una imagen de tarjeta SD flasheable Integraci\u00f3n en frontends y mejora en la gesti\u00f3n del modo vertical en FBA Interfaz de ajustes para las ROMs de xMAME lanzadas desde SimpleMenu Sustituci\u00f3n de pantalla por la del modelo M Instalador RetroArch","title":"RG350/RG280"},{"location":"retro-emulacion/rg-350.html#rg350rg280","text":"","title":"RG350/RG280"},{"location":"retro-emulacion/rg-350.html#enlaces","text":"","title":"Enlaces"},{"location":"retro-emulacion/rg-350.html#general","text":"Dingoonity Wiki Anbernic RG-350 Wiki Documentaci\u00f3n SOC, HDMI y drivers Windows How to make an OPK RG 350 Tips, Emulators and Resources - Wagner's TechTalk RGHandhelds device info Writing Software for the RG350M Gaming Handheld","title":"General"},{"location":"retro-emulacion/rg-350.html#blogs-foros","text":"Foro en elotrolado.net . Algunos posts escogidos: XMAME EN LA SD EXTERNA Foro en Dingoonity.org . Algunos hilos escogidos: HOW-TO: PCSX4ALL Cheats [DEVELOPMENT] How to compile for RG350? (Help needed) RG350 Subreddit Blog de pcercuei","title":"Blogs, Foros"},{"location":"retro-emulacion/rg-350.html#emuladores-ports-y-aplicaciones","text":"Repositorios: RG350_APPREPOSITORY de Rafa Vico OpenDingux Software list RG-350 & Pocket Go 2 - Application Repo rs97.bitgala.xyz Ports y Emuladores de Gameblabla: En Dingoonity En su sitio Para el nuevo OD Beta Ficheros SBI UniBIOS for Neo Geo Scrapers: ScreenScrapper ARRM Romcenter (ROM Manager) Conversi\u00f3n de ISOs PlayStation a PBP Mods de emuladores: ReGBA 1.45.5 sin bezel FBA con doble launcher (UX y Explorer) MAME4All con doble launcher (UX y Explorer) DOSBox que permite personalizar el dosbox.conf en cada juego incluy\u00e9ndolo en su directorio. Descripci\u00f3n m\u00e1s detallada aqu\u00ed A5200 permite seleccionar ROM por lo que se integra bien con launchers Repositorio de c\u00f3digo de juegos/clones Open Source Testeo colaborativo de juegos FBA/MAME promovido por @cejudin Retro Game Corps Arcade Guide Retro Game Corps Ports Guide","title":"Emuladores, Ports y Aplicaciones"},{"location":"retro-emulacion/rg-350.html#sistema","text":"Retro Game Handhelds CFW de Ninoh-FOX Buildroot : OpenDingux : Parece el repositorio upstream del Buildroot para dispositivos basados en opendingux. Tonyjih Ninoh-FOX gokr soarquin od-contrib glebm Toolchain: GCW Zero Toolchain WerWolv \u00daltima versi\u00f3n de pcercuei Linux kernel: OpenDingux : Parece el repositorio upstream del kernel para dispositivos basados en OpenDingux. Incluye los experimentos de pcercuei. Tonyjih Ninoh-FOX OpenDingux nightly builds State of OpenDingux Beta Frontends: GMenu2X: Documentaci\u00f3n . Themes: gmenu2x-theme PyMenu : Monogr\u00e1fico SimpleMenu : Monogr\u00e1fico . Themes: Lazarus GBZ35 Remix Megapixels ComicBook RG FAMILY 0A BigCody Unified SimUI EmulationStation : Monogr\u00e1fico . Themes: es-theme-pixel","title":"Sistema"},{"location":"retro-emulacion/rg-350.html#hardware","text":"Teardown Placas de RG350M y RG350P Para imprimir: Stick de perfil bajo Cruceta Botones ABXY Botones L1-R1 Botones L2-R2 Grips laterales Carcasa Repuestos componentes: Repuestos oficiales en Aliexpress Pantalla 240p (HP350S001): Compra Tutorial de instalaci\u00f3n Pantalla 480p (JT035IPS02-V0): Compra Tutorial de instalaci\u00f3n Cristal pantalla Protector de pantalla: Amazon Aliexpress Carcasa silicona Stick anal\u00f3gico modelo original RG350: eBay Aliexpress Kit conversi\u00f3n stick plano Botones cristal Pack botones SNES y sticks de perfil bajo Conductice Rubber Pad: ebay myretrogamecase Sticks de perfil bajo: Compra Tutorial de instalaci\u00f3n (espa\u00f1ol) Tutorial de instalaci\u00f3n (ingl\u00e9s) Bater\u00edas (ver detalles al final del apartado Bater\u00eda ): Bater\u00eda 3,7V 4900mAh : 30,17\u20ac Incluye conector JST. Se anuncia como repuesto para RG350/M. Adaptadores WiFi compatibles con BASE y ROGUE (listados en directorio /lib/modules/3.12.0-dingux\\+/kernel/drivers/net/wireless/ ): Realtek RTL8188EU 150Mb/s (BASE y ROGUE) Realtek RTL8188FU 150Mb/s (s\u00f3lo ROGUE) Realtek RTL8192CU 300Mb/s (BASE y ROGUE) Por ejemplo \u00e9ste para el que necesitaremos adem\u00e1s un adaptador para USB tipo C . Adaptadores WiFi compatibles con OD beta (listados en directorio /lib/modules/5.15.0-rc6-opendingux/kernel/drivers/net/wireless/ ): Realtek RTL8192CU Mediatek MT7601U","title":"Hardware"},{"location":"retro-emulacion/rg-350.html#conceptos","text":"","title":"Conceptos"},{"location":"retro-emulacion/rg-350.html#emuladores-juegos-ports-aplicaciones","text":"Cada elemento que aparece en el lanzador, en las distintas secciones, es una especie de acceso directo. Algunos llevan a comandos o ejecutables que hay en el sistema (fundamentalmente los de la secci\u00f3n Settings) pero normalmente nosotros s\u00f3lo vamos a tratar con los que provengan de OPKs. Los OPKs son paquetes (una especie de ZIP) que podemos asimilar a una aplicaci\u00f3n de m\u00f3vil. Un OPK o aplicaci\u00f3n puede ser un emulador, un juego o port, una utilidad, etc. Dentro del OPK en un fichero se le dice al lanzador en qu\u00e9 categor\u00eda debe aparecer. B\u00e1sicamente las secciones que se ven y que se recorren con L1 y R1: Applications Emulators Games Settings Los ports son los que aparecen en Games. Nada impide que un emulador aparezca dentro de Games, pero todo el mundo pone las cosas siguiendo esta organizaci\u00f3n. Un port es una aplicaci\u00f3n que ejecuta un juego concreto, normalmente un cl\u00e1sico, del que se dispone del c\u00f3digo y que alguien ha compilado para OpenDingux que es el sistema de la RG-350. Tambi\u00e9n en Games est\u00e1n los remakes hechos por aficionados o homebrew. Un emulador es una aplicaci\u00f3n, normalmente tambi\u00e9n de c\u00f3digo abierto, que alguien ha compilado para OpenDingux. El emulador no contiene el c\u00f3digo de ning\u00fan juego en concreto ni la BIOS de la m\u00e1quina que emula. En teor\u00eda esto permite la libre distribuci\u00f3n de los emuladores. Un emulador simula por software (virtualiza) un sistema que normalmente puede ejecutar c\u00f3digos de juegos distintos que ven\u00edan en cartucho, CD, un chip de memoria, tarjeta de memoria, etc. Son las ROMs. En resumen: Port o juego: Un juego concreto normalmente un cl\u00e1sico de PC, un remake, juego indie o homebrew. En la RG350 tendr\u00e1n forma de OPK. Emulador: Virtualiza una m\u00e1quina que puede ejecutar varios juegos/ROMS. En cualquier m\u00e1quina emuladora como la RG-350 tendr\u00e1n distintas formas (.bin, .zip, .iso, .pbp, .smc, .nes, .sms, hasta el infinito). Tambi\u00e9n suelen venir en forma de OPK.","title":"Emuladores / Juegos / Ports / Aplicaciones"},{"location":"retro-emulacion/rg-350.html#las-roms-y-su-organizacion","text":"Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el c\u00f3digo y los datos (sonidos por ejemplo) del juego en la m\u00e1quina original. En viejas recreativas y en m\u00e1quinas de cartucho, este soporte sol\u00edan ser chips de memoria no vol\u00e1til. En las m\u00e1quinas m\u00e1s modernas normalmente son CDs, DVDs, Bluray's. Las ROMs en la RG350 se suelen colocar en la tarjeta microSD externa. Pueden ir en la interna pero suele complicar el proceso de actualizaci\u00f3n del firmware. En cuanto a la estructura de carpetas, puede ser cualquiera ya que los emuladores normalmente al abrirlos, presentan una especie de explorador de archivos para seleccionar la ruta y archivo de la ROM a ejecutar. A pesar de que las ROMs puedan estar en cualquier lugar, todo el mundo tiende a utilizar una estructura similar en la que los distintos sistemas se meten dentro de una carpeta llamada roms en la ra\u00edz de la tarjeta. Cada sistema a su vez suele ser otra carpeta con el acr\u00f3nimo de la m\u00e1quina como nombre. M\u00e1s o menos se utilizan los siguientes acr\u00f3nimos: FBA : Final Burn Alpha FC : NES (por Famicom) GB : Gameboy GBA : Gameboy Advance GBC : Gameboy Color GG : SEGA GameGear MD : SEGA Megadrive NGP : NeoGeo Pocket PCE : PC Engine / TurboGrafx-16 PS : Sony PlayStation SFC : SuperNES (por Super Famicom) SMS : SEGA MasterSystem WSC : WonderSwan","title":"Las ROMs y su organizaci\u00f3n"},{"location":"retro-emulacion/rg-350.html#la-importancia-de-las-bios","text":"Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de \u00e9stas est\u00e1n siempre presentes en la m\u00e1quina. Es decir, as\u00ed como las ROMs son c\u00f3digo particular de cada juego, que digamos entra y sale de la m\u00e1quina (cuando cambias el CD o cartucho), la BIOS tambi\u00e9n es c\u00f3digo pero permanente de la m\u00e1quina. Est\u00e1 guardado en un chip y contiene el c\u00f3digo que se ejecuta cuando arranca la m\u00e1quina (los men\u00fas de lanzamiento de juegos por ejemplo en consolas avanzadas) y librer\u00edas que utilizan los desarrolladores para hacer los juegos m\u00e1s f\u00e1ciles de programar. Los emuladores o bien incorporan una reimplementaci\u00f3n de la BIOS (como el HLE de Pcsx4all) o bien es necesario que la pongamos nosotros. A\u00fan en ese primer caso es conveniente utilizar la BIOS original. Si no la incluyen los emuladores es porque son c\u00f3digo propietario del fabricante de la m\u00e1quina, lo que impedir\u00eda la libre distribuci\u00f3n del emulador. Lo mismo que sucede con las ROMs. M\u00e1s adelante se incluye un listado de d\u00f3nde buscan las BIOS los distintos emuladores.","title":"La importancia de las BIOS"},{"location":"retro-emulacion/rg-350.html#bios-de-playstation","text":"Siguiendo con el ejemplo de la BIOS HLE del emulador Pcsx4all, no es la real que puso Sony en sus m\u00e1quinas, sino una BIOS que alguien preparar\u00f3 haciendo ingenier\u00eda inversa por lo que nunca queda igual que la original. Esto se hace para poder distribuir el emulador y que sea funcional desde un principio. Porque si se incluye la BIOS original se comete un delito de propiedad intelectual y si no se incluye ning\u00fan tipo de BIOS el emulador ni siquiera arranca. Entonces se pone algo para salir del paso pero luego se le pide a los usuarios que busquen por su cuenta la BIOS original y la incorporen al emulador. Para pasar de usar la BIOS emulada (HLE) a una original, primero hay que colocarla en el directorio /media/data/local/home/.pcsx4all/bios/ , despu\u00e9s arrancar el emulador, entrar en las opciones (tecla Power ), abrir la secci\u00f3n Core settings y all\u00ed desactivar HLE emulated BIOS y seleccionar en Set BIOS file una de las que hayamos situado en el directorio indicado anteriormente. Por ejemplo:","title":"BIOS de PlayStation"},{"location":"retro-emulacion/rg-350.html#sistemas-de-archivo","text":"OpenDingux, el sistema que utiliza la RG350, es una distribuci\u00f3n Linux. Por tanto es un sistema UNIX. En UNIX no existe el concepto de las unidades (como las t\u00edpicas C:, D:, etc en Windows). Todo forma parte de un \u00e1rbol de directorios cuya ra\u00edz es la / o root. Esto no quiere decir que un UNIX s\u00f3lo pueda tener una unidad de almacenamiento. Lo que ocurre es que las distintas unidades se \"montan\" en distintos puntos del \u00e1rbol de directorios. El \u00e1rbol de directorios base sobre el que se montan las unidades es ese archivo rootfs.squashfs (el nombre quiere decir \"sistema de archivos ra\u00edz\") que puede verse al pinchar la tarjeta interna en el PC poco antes de flashearla con otro firmware. Ah\u00ed comprimido est\u00e1 todo el sistema menos lo que se monta desde las tarjetas de memoria. La tarjeta interna tiene dos particiones. La primera contiene el \u00e1rbol root como hemos comentado, el kernel (del que no vamos a hablar, aunque es muy importante) y es de tipo FAT32, por eso se puede ver en Windows. B\u00e1sicamente contiene el sistema. La segunda partici\u00f3n se monta en /media/data y est\u00e1 dedicada a contener la informaci\u00f3n de soporte a las aplicaciones, es decir configuraciones, librer\u00edas, archivos de datos (savestates por ejemplo) y las propias aplicaciones instaladas en la tarjeta interna. El formato de esta partici\u00f3n es EXT3, propio de Linux y por eso no se monta en Windows. La tarjeta externa funciona de forma parecida a la segunda partici\u00f3n de la interna, es decir, sirve para contener aplicaciones y archivos de usuario, por ejemplo es donde se suelen colocar las ROMs. La \u00fanica partici\u00f3n de esta tarjeta se monta en /media/sdcard . Esta tarjeta externa puede estar en formatos FAT32 o los propios de Linux (ext2, ext3, ext4). ROGUE soporta adem\u00e1s exFAT, lo que permite aprovechar mejor las tarjetas de gran capacidad. En esta tarjeta lo \u00fanico importante en cuanto a la estructura de carpetas es que exista en la ra\u00edz de la misma un directorio llamado apps (si est\u00e1 en formato FAT32 o exFAT ser\u00e1 indiferente si est\u00e1 en may\u00fasculas, ya que estos sistemas de archivos no distinguen may\u00fasculas y min\u00fasculas). El resto de cosas que pongamos en esta tarjeta (fundamentalmente ROMs) podr\u00e1n organizarse como queramos (ver apartado Las ROMs y su organizaci\u00f3n ). Existe cierta confusi\u00f3n sobre si hay que formatear la tarjeta interna. En realidad la imagen que se graba o flashea (como se suele decir) incluye el formato. Flashear una tarjeta microSD es reconstruir el formato y el contenido de otra tarjeta, es decir clonarla. La imagen es un volcado bit a bit de la tarjeta original (forma y contenido). Entonces, \u00bfpor qu\u00e9 sugieren muchos videos y procedimientos formatear la microSD a la que luego se le va a flashear una imagen? Sospecho que es para hacer desaparecer las dos particiones de la tarjeta con el firmware que vamos a sobreescribir, para que luego no haya dudas de lo que hay que seleccionar en el programa de flasheo. Eso en Windows. En Linux se puede hacer muy f\u00e1cilmente referencia a la tarjeta en s\u00ed, adem\u00e1s de a las particiones, por lo que el formateo previo es redundante. En resumen, que en teor\u00eda da igual el formato en que est\u00e1 la tarjeta antes de flashear la imagen. El flasheo \"construye\" el formato a la vez que le da contenido. Es como estampar un vinilo a partir de un molde master.","title":"Sistemas de archivo"},{"location":"retro-emulacion/rg-350.html#conexion-de-red","text":"El puerto USB2 cuando se conecta al PC se monta como una tarjeta de red adicional. Por ejemplo en una m\u00e1quina Linux aparece este adaptador al conectar el cable: enp0s29u1u2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 10.1.1.1 netmask 255.255.255.252 broadcast 10.1.1.3 inet6 fe80::f721:afcb:94:3078 prefixlen 64 scopeid 0x20<link> ether a6:7b:58:c5:fe:30 txqueuelen 1000 (Ethernet) RX packets 13 bytes 2786 (2.7 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 24 bytes 4097 (4.0 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 Ah\u00ed puede verse que se define una red con un rango de IPs muy reducido (s\u00f3lo 2 bits). El PC toma la IP 10.1.1.1 y la consola la 10.1.1.2 . Si hacemos una detecci\u00f3n de puertos abiertos en la m\u00e1quina a trav\u00e9s de este adaptador de red veremos que se encuentran abiertos los puertos correspondientes a FTP, SSH (lo que nos permite hacer transmisiones SCP y SFTP) y Telnet: PORT STATE SERVICE 21/tcp open ftp 22/tcp open ssh 23/tcp open telnet Por defecto el sistema de red est\u00e1 configurado para utilizar password. Se desactiva abriendo la aplicaci\u00f3n Network que hay en la secci\u00f3n Settings Como el enrutado del adaptador \u00e9ste no da salida a internet no hay problema de inseguridad por quitar el password. El programa anterior s\u00f3lo es se utiliza para cambiar esos ajustes, no es necesario que est\u00e9 abierto para que funcione la conectividad. En Windows un buen programa para transferir archivos por FTP a la consola es WinSCP . A partir del minuto 3:45 de este v\u00eddeo (en ingl\u00e9s) se ve c\u00f3mo se usa. Este otro v\u00eddeo (en espa\u00f1ol) tambi\u00e9n muestra el proceso. En Linux no es necesario, pero en Windows, dependiendo de la versi\u00f3n hay que instalar un driver. En el post inicial de este foro lo comentan. Tambi\u00e9n se describe a partir del minuto 19:42 de este v\u00eddeo .","title":"Conexi\u00f3n de red"},{"location":"retro-emulacion/rg-350.html#cambio-de-iconos-a-las-aplicaciones","text":"Los iconos de los OPKs que muestra Gmenu2x (ya sean emuladores, juegos, ports o utilidades) se pueden cambiar muy f\u00e1cilmente. Algo que se suele hacer es cambiar el icono de los emuladores para que representen a la m\u00e1quina emulada. Para cambiarlos hay dos opciones: Copiar el fichero (.PNG por ejemplo) en cualquier lugar de alguna de las tarjetas (un buen sitio puede ser el mismo directorio apps ), editar el OPK (pulsando Select) y cambiarlo en el campo Icon (esta opci\u00f3n s\u00f3lo est\u00e1 disponible en ROGUE): Desempaquetar los OPKs de los emuladores, cambiar el icono y volver a empaquetar. Para desempaquetar/reempaquetar ver la secci\u00f3n Gesti\u00f3n de OPKs m\u00e1s adelante. En la opci\u00f3n 1, en el pantallazo, puede verse que el icono lo est\u00e1 cogiendo de dentro del OPK del propio emulador (el paso al interior es con el # ). Pero se puede elegir cualquier ruta del sistema de ficheros.","title":"Cambio de iconos a las aplicaciones"},{"location":"retro-emulacion/rg-350.html#bateria","text":"El puerto de carga de la RG350 es el etiquetado como USB2. Es un conector USB tipo C. Los cargadores USB tipo C son m\u00e1s complejos que los microUSB. Con las nuevas tecnolog\u00edas de carga r\u00e1pida de los m\u00f3viles, el cargador no se limita a enviar corriente al dispositivo, sino que hay una negociaci\u00f3n previa, una especie de protocolo. Fue famoso el problema de la Raspberry Pi 4 por el cual no se pod\u00eda alimentar con algunos alimentadores tipo C porque identificaban a la Raspberry de forma incorrecta y luego se negaban a darle corriente. Adem\u00e1s de todo esto, da la impresi\u00f3n de que la RG350 tiene una circuiter\u00eda de carga muy elemental (por los distintos comportamientos que tiene el LED de carga entre los distintos usuarios). Por todos estos motivos, si hay que elegir un cargador, mejor optar por uno sencillo, no uno preparado para gestionar carga r\u00e1pida por USB-C. Escoger uno de s\u00f3lo 5 Voltios (los de carga r\u00e1pida tienen tensi\u00f3n variable de hasta 12V) y entre 1 y 1.5 Amperios. Una buena opci\u00f3n es cargar conectandola a un PC. Los puertos USB de un PC est\u00e1n limitados a 500mA, lo que se puede considerar una carga lenta, lo que en realidad es saludable para la bater\u00eda. La bater\u00eda de la RG350 es de 3,7V y 2.5Ah. Los alimentadores USB son de 5V. Considerando la diferencia de 3,7 a 5 como la p\u00e9rdida de rendimiento que hay en el proceso (aproximaci\u00f3n burda), se pueden echar las cuentas m\u00e1s f\u00e1cilmente. Estos ser\u00edan los tiempos con cargadores de distintas intensidades: Intensidad de carga Tiempo para carga completa 2,5A 1 hora 1A 2,5 horas 500mA (PC) 5 horas Todos estos tiempos son en el peor de los casos cuando la carga necesaria sea completa. El LED de la consola informa de varios aspectos de la bater\u00eda de la siguiente manera: Estado LED Significado Verde fijo Consola encendida con bater\u00eda con buen nivel de carga. Tambi\u00e9n indica carga completada cuando cargamos la bater\u00eda con la consola encendida, al pasar de rojo a verde Parpadeo en verde Bater\u00eda baja Rojo fijo Cargando (tanto con consola encendida como apagada) Apagado Carga completada (con la consola apagada) Algunos usuarios comentan que no llegan a ver apagarse nunca el LED rojo cuando la cargan con la consola apagada. Esto parece indicar que el circuito de carga no es muy avanzado y en ocasiones no es capaz de determinar correctamente el final de la carga. Es evidente que el firmware no gestiona el nivel de carga con estad\u00edsticas como hacen los modernos smartphones por lo que el mismo se debe calcular casi directamente en funci\u00f3n de la tensi\u00f3n medida en la bater\u00eda, que puede diferir entre las distintas unidades o incluso factores externos como la temperatura. En esos casos, tener en cuenta los tiempos de carga indicados m\u00e1s arriba en funci\u00f3n de la intensidad del cargador utilizado, para desconectar el cargador cuando haya pasado dicho tiempo. En cuanto al reemplazo de la bater\u00eda original, un usuario al que se le hinch\u00f3 la suya, le quit\u00f3 la cinta que la envuelve y pega a la tapa trasera y encontr\u00f3 que la bater\u00eda era \u00e9sta: Esta bater\u00eda tiene un conector de cinta como el siguiente: al que se le ha soldado el cable: El modelo oficial parece ser el siguiente: De dimensiones: 68.60 x 48.70 x 5.54mm Al final del cable soldado al conector de cinta, se encuentra un conector Micro JST 1.25mm 2-Pin: Algunas medidas tomadas con pol\u00edmetro sobre la bater\u00eda en operaci\u00f3n y carga: Intensidad de descarga: 385mA (GMenu2X) - 480mA (Tekken3) Tensi\u00f3n de descarga: 4,10V (casi llena) Tensi\u00f3n de carga: 4,20V Tensi\u00f3n de bater\u00eda: 4,18V (casi llena) Otra incidencia que se ha observado varias veces es la de las bater\u00edas que parecen no querer cargarse m\u00e1s. En estos casos, adem\u00e1s de hacer los evidentes cambios del material de carga (cargador y/o cable), puede intentarse hacer un \"power cycle\" de la siguiente forma: Abrir la consola y desconectar la bater\u00eda del conector. Mantener pulsado el bot\u00f3n Power durante 30 segundos. Volver a conectar la bater\u00eda, cerrar la consola e intentar cargar de nuevo.","title":"Bater\u00eda"},{"location":"retro-emulacion/rg-350.html#faq","text":"","title":"FAQ"},{"location":"retro-emulacion/rg-350.html#que-maquinas-puedo-emular","text":"En general la PlayStation original (o PS1) marca el techo. Incluso en esta m\u00e1quina hay juegos particularmente exigentes que hacen sudar al procesador de la RG350 que se nota sobre todo en el sonido y la fluidez de las animaciones. Otras m\u00e1quinas de potencia parecida que por tanto podr\u00edan dar problemas con emuladores poco eficientes son la Game Boy Advance o incluso la SuperNintendo en los juegos que inclu\u00edan chips especiales en el cartucho. Con m\u00e1quinas m\u00e1s complejas como N64, Dreamcast o PSP podemos llegar a encontrar emuladores, pero eso no significa que vayan a resultar jugables.","title":"\u00bfQu\u00e9 m\u00e1quinas puedo emular?"},{"location":"retro-emulacion/rg-350.html#que-es-un-romset","text":"Romset = set de ROMs, es decir un conjunto cerrado y definido de ROMs. En los emuladores de m\u00e1quinas arcade suele manejarse el t\u00e9rmino m\u00e1s que con el resto de emuladores, aunque tambi\u00e9n aplica. Por ejemplo, cuando decimos que xMAME soporta el romset 84, quiere decir que es capaz de emular todas las ROMs contenidas en ese set. Los sets se definen con unos ficheros XML llamados DATs que se pueden consultar aqu\u00ed . De hecho la forma de verificar si una ROM est\u00e1 correctamente definida para ser ejecutada en xMAME, FBA o MAME4all es echar mano de estos DATs revisando los nombres tanto de la ROM como de los ficheros que la constituyen, as\u00ed como sus hashes. Los romsets soportados por xMAME, MAME4All y FBA son los siguientes: xMAME: 0.37b16 , tambi\u00e9n conocido como 0.52 0.69 0.84 MAME4All: 0.37b5 , tambi\u00e9n conocido como 0.41 FBA: 0.2.97.44 RetroArch core MAME2003: v0.78 RetroArch core MAME2003+: v0.78 En este documento se listan todos los romsets que se manejan habitualmente en RG350. Este art\u00edculo es un buen tutorial sobre c\u00f3mo podemos gestionar y solucionar los problemas que tengamos al montar un romset.","title":"\u00bfQu\u00e9 es un romset?"},{"location":"retro-emulacion/rg-350.html#como-se-activan-los-sticks-analogicos-en-los-juegos-de-ps","text":"Depende del juego. Es decir, hay juegos que no los soportan porque son anteriores a la aparici\u00f3n del Dual Analog o del Dual Shock (mediados y finales de 1997, respectivamente). Hay por tanto que probar en cada juego todas las opciones que aparecen en Core settings > Analog Mode : No es lo mismo (porque no deja de ser digital), pero siempre existe la opci\u00f3n de usar la emulaci\u00f3n de la cruceta con el stick izquierdo pulsando Power + B.","title":"\u00bfC\u00f3mo se activan los sticks anal\u00f3gicos en los juegos de PS?"},{"location":"retro-emulacion/rg-350.html#en-los-juegos-de-playstation-en-formato-cuebin-que-archivos-tengo-que-copiar-a-la-consola","text":"El cue no es necesario si el bin es \u00fanico. Es decir si hay un bin y un cue con copiar el bin a la consola es suficiente. Si hay un cue y por ejemplo 8 bin (esto puede ocurrir en los juegos que ten\u00edan pistas de audio en el CD seg\u00fan c\u00f3mo se haya hecho el dump) entonces s\u00ed interesa copiar el cue y lanza el juego desde \u00e9l. En esos casos lo m\u00e1s recomendable es empaquetar todas las pistas en pbp que ocupa menos y es un s\u00f3lo archivo. Si se utilizan los cue+bin en los lanzadores aparece varias veces el mismo nombre del juego repetido tantas como ficheros cue y bin tengamos (en el ejemplo anterior 1+8=9 veces). El cue es una especie de directorio de las pistas que conten\u00eda el disco. De hecho es un fichero de texto que se puede leer. Si se le da s\u00f3lo un bin el emulador se adapta y entiende que es la \u00fanica pista que tiene que usar y que lo contiene todo. Como curiosidad, si el juego es de los de varias pistas y se copia s\u00f3lo el primer bin (que sol\u00eda ser la pista que conten\u00eda el c\u00f3digo del juego) tambi\u00e9n funciona, pero entonces el juego se ejecuta sin pistas de audio.","title":"En los juegos de PlayStation en formato CUE+BIN \u00bfqu\u00e9 archivos tengo que copiar a la consola?"},{"location":"retro-emulacion/rg-350.html#por-que-salen-los-juegos-de-gbc-en-blanco-y-negro-en-gambatte","text":"Algunos cartuchos de Game Boy eran mixtos, es decir serv\u00edan tanto para la Game Boy original como la Color. Cuando el juego se insertaba en la consola correspondiente mostraba los gr\u00e1ficos adecuados. En Gambatte, al ser un mismo emulador para las dos m\u00e1quinas, hay que seleccionar el tipo de m\u00e1quina con que queremos ejecutar la ROM mixta. El ajuste est\u00e1 en Settings > System . Priority DMG se corresponde con la Game Boy original y Priority GBC con la Game Boy Color. As\u00ed pues lo m\u00e1s recomendable es ajustar el segundo valor. As\u00ed los juegos de la Game Boy original (extensi\u00f3n .gb normalmente) se ejecutar\u00e1n en blanco y negro y los de la Game Boy Color (extensi\u00f3n .gbc normalmente) en color: Como tras hacer este cambio tenemos que reiniciar el emulador, hay que hacer que el nuevo valor sea el predeterminado seleccionando Save as default y luego confirmando:","title":"\u00bfPor qu\u00e9 salen los juegos de GBC en blanco y negro en Gambatte?"},{"location":"retro-emulacion/rg-350.html#que-formato-hay-que-dar-a-la-tarjeta-interna-antes-de-flashear-el-firmware","text":"La interna no es necesario formatearla antes de flashear la imagen, a pesar de todo lo que se lee por ah\u00ed. El flasheo es formateo+instalaci\u00f3n de datos, as\u00ed que el formato previo se sobreescribe.","title":"\u00bfQu\u00e9 formato hay que dar a la tarjeta interna antes de flashear el firmware?"},{"location":"retro-emulacion/rg-350.html#que-tamano-es-recomendable-que-tenga-la-tarjeta-interna","text":"Si s\u00f3lo es para alojar el sistema, hasta con una de 4GB ser\u00eda suficiente. Si se quiere meter adem\u00e1s emuladores y ROMs, entonces hay que subir el tama\u00f1o lo que se considere que se va a necesitar. En el debate sobre qu\u00e9 tarjeta poner m\u00e1s grande (si la interna o la externa), hay que tener en cuenta que pasar cosas por cable a la interna es muy lento. Lo m\u00e1s r\u00e1pido para incorporar contenidos es copiarlos a la externa directamente en el ordenador. Tambi\u00e9n hay considerar que mantener muchos contenidos en la interna dificulta los cambios de firmware en el futuro (no las actualizaciones) ya que se sustituye completamente el contenido de esta tarjeta. En esa situaci\u00f3n habr\u00eda que rescatar los contenidos previamente por cable, lo que como hemos dicho ya es lento. Una opci\u00f3n m\u00e1s r\u00e1pida ser\u00eda copiar de la interna a la externa por medio de DinguxCmdr, pero esto demuestra que antes de llegar a esa situaci\u00f3n ser\u00eda mejor idea mantener esos ficheros directamente en la tarjeta externa.","title":"\u00bfQu\u00e9 tama\u00f1o es recomendable que tenga la tarjeta interna?"},{"location":"retro-emulacion/rg-350.html#como-se-soluciona-el-petardeo-de-sonido-en-las-ultimas-versiones-de-rogue","text":"Abrir la aplicaci\u00f3n Sound Mixer de la secci\u00f3n Settings en GMenu2X Poner el volumen PCM y el master a 0% Reiniciar Poner el volumen PCM sobre 80% y el MASTER a 100% Reiniciar ( Fuente )","title":"\u00bfC\u00f3mo se soluciona el petardeo de sonido en las \u00faltimas versiones de ROGUE?"},{"location":"retro-emulacion/rg-350.html#opciones-para-actualizar-el-firmware-rg350-rogue-cfw","text":"Entre los assets de cada release encontramos tres opciones: Tipo Descarga Descripci\u00f3n Update RG350 RG350M Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque dependiendo de la versi\u00f3n del sistema de partida puede no quedar del todo fino. Se recomienda utilizar esta opci\u00f3n s\u00f3lo para actualizar entre versiones de ROGUE, es decir si se parte de BASE, hay que utilizar una de las dos siguientes (preferentemente la \u00faltima). Flasher RG350 Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien. En este video se ilustra todo el procedimiento. sd_image.bin RG350 RG350M Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opci\u00f3n 2 y la \u00fanica que sirve si se parte de un sistema que no arranca. La imagen ocupa m\u00e1s porque es un volcado de todo lo que contiene la SD (incluidos los espacios vac\u00edos de la tarjeta). El proceso incorpora la complejidad adicional de tener que utilizar algunas utilidades poco habituales, y en el modelo normal de la consola, adem\u00e1s el tener que abrirla para extraer la microSD interna. En este video (en ingl\u00e9s) se ilustra todo el procedimiento. La primera parte de este otro v\u00eddeo tambi\u00e9n muestra el proceso, esta vez en espa\u00f1ol. As\u00ed pues, para la primera actualizaci\u00f3n (y posteriores) se puede utilizar cualquier m\u00e9todo. Dependiendo de la situaci\u00f3n es m\u00e1s recomendable uno que otro. En general empezar por la opci\u00f3n 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el m\u00e9todo 3.","title":"Opciones para actualizar el firmware RG350-ROGUE-CFW"},{"location":"retro-emulacion/rg-350.html#flash-de-sd-interna","text":"De los procesos de actualizaci\u00f3n descritos en el apartado anterior, el que m\u00e1s dudas y temores plantea es el tercero. Sin embargo es el m\u00e1s recomendable ya que nos permite cambiar la tarjeta por una de m\u00e1s calidad, lo que a la larga es beneficioso. Los pasos para realizar el flasheo de la tarjeta interna son los siguientes: En el modelo de RG350 original, abrir la consola (en los modelos RG350P y M no es necesario al estar accesible la tarjeta INT desde el exterior). El tornillo inferior izquierdo tiene encima un sello que no se puede despegar entero; se desintegra. S\u00f3lo hay que tener cuidado con no partir el cable de la bater\u00eda por darle un tir\u00f3n. Es perfectamente normal que se descuelguen los gatillos L y R. No pasa nada, nos ocuparemos de ello justo antes de cerrar. Sacar la SD rompiendo un nuevo sello que no se puede despegar de una pieza. Sale a cachos. Si no se ha flasheado anteriormente la tarjeta interna por otros medios, se recomienda apartarla, es decir guardarla como est\u00e1 y flashear otra tarjeta. Las recomendaciones para la tarjeta son que tenga 16GB class 10. Ser\u00eda suficiente con una tarjeta de 4GB, ya que el sistema ocupa menos de 1GB, pero tarjetas de esa capacidad ya no se suelen encontrar y de hacerlo, lo m\u00e1s probable es que sea una tarjeta vieja y lenta. Bajar la im\u00e1gen que queremos flashear. Existen dos ramas (para el caso de ROGUE consultar el apartado anterior): BASE: https://rs97.bitgala.xyz/RG-350/Latest%20Firmware/ ROGUE: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases Instalar uno de estos programas: WinDisk 32 Imager Balena Etcher Montar la tarjeta elegida para flashear en el PC con un adaptador o lector. Utilizando el programa del punto 4 flashear la imagen (hay quien recomienda formatear antes pero considero que confunde el proceso m\u00e1s que otra cosa). En este documento de la fundaci\u00f3n Raspberry Pi se detallan los pasos para flashear una imagen de sistema para esta placa. El proceso es id\u00e9ntico en RG350 (cambiando la imagen naturalmente). Expulsar la SD del ordenador. Pinchar en la RG y cerrarla cuidando de que encajen bien los gatillos L/R. Desde Linux el paso 6 de la lista anterior se puede hacer con este comando desde consola (adaptando el nombre del dispositivo si en nuestro sistema es distinto): $ sudo dd if = sd_image.bin of = /dev/mmcblk0 bs = 2M","title":"Flash de SD interna"},{"location":"retro-emulacion/rg-350.html#gestion-de-opks","text":"Este art\u00edculo del viejo wiki de la GCW Zero (que afortunadamente se conserva en archive.org), documenta muy bien c\u00f3mo construir un OPK y algunos de los par\u00e1metros que contienen sus ficheros. En Linux se puede hacer y deshacer un OPK muy f\u00e1cilmente con los siguientes comandos: Descompresi\u00f3n: unsquashfs fichero.opk Compresi\u00f3n: mksquashfs directorio fichero.opk -all-root -noappend -no-exports -no-xattrs","title":"Gesti\u00f3n de OPKs"},{"location":"retro-emulacion/rg-350.html#cheatsheets","text":"","title":"Cheatsheets"},{"location":"retro-emulacion/rg-350.html#versiones-del-firmware-base","text":"En BASE no se muestra la versi\u00f3n del firmware (como s\u00ed hace ROGUE), por lo que hay que adivinar la versi\u00f3n en base a la fecha de creaci\u00f3n: Fecha Versi\u00f3n 2019-10-10 1.4 2019-10-18 1.5 2019-10-27 1.5.1 2019-11-10 (build date) 1.6 2019-11-17 (build date) 1.7","title":"Versiones del firmware BASE"},{"location":"retro-emulacion/rg-350.html#flags-de-rogue","text":"Existen 5 ficheros ocultos en el directorio /media/data que sirven para activar varias tareas de mantenimiento/instalaci\u00f3n inicial durante el arranque. Para reactivarlos s\u00f3lo hay que borrar el fichero correspondiente que se crea al finalizar la operaci\u00f3n: Fichero Operaci\u00f3n .clean Comprobaci\u00f3n del sistema de ficheros. .linker Instala los links para GMenu2X de los programas preinstalados. Se comprueba durante el script de arranque /usr/sbin/frontend_start .partition_resized Redimensiona la partici\u00f3n data de la SD interna para aprovechar todo el espacio disponible en la tarjeta ejecutando este script . .reconfig Borra algunos ficheros residuales SSH, de otros programas y de estado (como el volumen y brillo) ejecutando este script . .swapon Crea el fichero para la memoria SWAP ejecutando este script .","title":"Flags de ROGUE"},{"location":"retro-emulacion/rg-350.html#controles-stockrogue","text":"Funci\u00f3n Shortcut Ajuste de nitidez (hardware scaling) Power + Up/Down Emulaci\u00f3n de crucerta con stick izquierdo Power + B Ajuste de brillo Power + Volumen+/Volumen- Fuerza el escalado de la pantalla Power + A Pantallazo (se guarda en /media/data/local/home/screenshots ) Power + X Emulaci\u00f3n de rat\u00f3n con stick derecho (los botones son L2/R2) Power + R1 Fuerza la salida al frontend (normalmente GMenu2X) Power + Select Reset Power + Start or Reset button Forzar apagado Power mantenido 4 segundos Salvapantallas en GMenu2X Power","title":"Controles stock/ROGUE"},{"location":"retro-emulacion/rg-350.html#controles-odbeta","text":"Funci\u00f3n Shortcut Apagar el sistema Mantener POWER Reinicio del sistema Power + Start + Select Forzar cierre de aplicaci\u00f3n actual Power + Select Subir volumen sonido Power + UP Bajar volumen sonido Power + DOWN Subir brillo pantalla Power + RIGHT Bajar brillo pantalla Power + LEFT Modo de relaci\u00f3n de aspecto en el escalado por hardware Power + A Activa/desactiva el modo rat\u00f3n (anteriormente POWER + L1) Power + B Suspender sistema (pulsar POWER para despertar) Power + Y Captura de pantalla (en ~/screenshots ) Power + X Muestra la salida de los scripts de arranque en lugar del logo de boot A (durante el arranque) Boot mode del sistema. Luego seguir esta gu\u00eda para flashear por USB Select (durante el arranque) Estos controles est\u00e1n definidos en el fichero /etc/pwswd.conf . Si se quieren cambiar, hay que copiar dicho fichero a /media/data/local/etc/pwswd.conf con los cambios deseados.","title":"Controles ODbeta"},{"location":"retro-emulacion/rg-350.html#controles-emuladores","text":"Emulador/Aplicaci\u00f3n Funci\u00f3n Shortcut SimpleMenu Todos Listado FBA (CPS/NeoGeo) Todos Listado FBA (CPS/NeoGeo) Salir L1+R1+Start > Exit o Power > Exit FBA RetroArch con UniBIOS Entrar en ajustes UniBIOS A+B+Y ScummVM Todos Listado ScummVM Salir Start xMAME Todos Listado xMAME Salir Select + L1 + R1 Daphne Todos Listado Daphne Salir Select OpenBOR Todos Listado OpenBOR Salir Salir primero del juego (normalmente con Quit) y luego pulsar Y en el interfaz de OpenBOR (a pesar de que en la leyenda pone X) MAME4All Todos Listado MAME4All Salir Power Gambatte (GB/GBC) Salir Power > QUIT o R1 > QUIT ReGBA (GBA) Salir Power > Exit o Select + Start > Exit Game & Watch Salir Select FCEUX (NES) Salir Power > Exit PocketSNES (SNES) Salir Select + Start > Exit Genesis Plus GX (GG/SMS) Salir Power > Quit o Select + Start > Exit Genesis Plus GX (GG/SMS) Save state Select + L1 Genesis Plus GX (GG/SMS) Load state Select + R1 Picodrive (MD) Salir Select > Exit PCSX4All (PS) Salir Power > Quit Temper (PCE) Salir Power > Exit Temper NGPCEmu (NGP) Salir Power > Quit Race (NGP) Salir Select + Start > Exit SwanEmu (WS) Salir Power > Quit Stella (A2600) Salir Start > Exit Game (desplazando cursor con stick izquierdo y confirmando con A) A5200 Salir Select+Start > Exit ProSystem (A7800) Salir Select+Start > Exit Handy (LYNX) Salir Power JzIntv (Intellivision) Select > Quit to rom chooser o Power ColecoD (ColecoVision) Salir Select+Start > Exit Retro8 (PICO8) Salir Select DOSBox Salir Hay que localizar la opci\u00f3n del juego en ejecuci\u00f3n para salir a DOS","title":"Controles emuladores"},{"location":"retro-emulacion/rg-350.html#puntos-de-montaje-de-las-tarjetas","text":"Directorio Elemento montado /media/system Primera partici\u00f3n de la SD interna /media/data Segunda partici\u00f3n de la SD interna /media/sdcard Primera partici\u00f3n de la SD externa","title":"Puntos de montaje de las tarjetas"},{"location":"retro-emulacion/rg-350.html#directoriosficheros-interesantes-stockrogue","text":"En este documento se indican rutas importantes de varios emuladores y ports populares. Directorio Contenido /media/data/local/home/ Configuraciones de emuladores, ports y aplicaciones en general. Es el llamado Home del sistema. Enlace simb\u00f3lico desde /media/home /media/data/apps/ Aplicaciones ( .opk ) instaladas en la tarjeta interna /media/sdcard/apps/ Aplicaciones ( .opk ) instaladas en la tarjeta externa /usr/share/gmenu2x/sections/ Lanzadores de las aplicaciones y settings preinstaladas en el sistema y que se unen a las instaladas por el usuario en /media/data/local/home/.gmenu2x/sections/ /var/log/messages Logs del sistema /var/log/gmenu2x.log Log de GMenu2X /proc/ Ficheros asociados a procesos en ejecuci\u00f3n como cpuinfo que muestra informaci\u00f3n sobre el procesador /media/data/local/home/.gmenu2x/skins Themes de GMenu2X /media/data/local/home/.gmenu2x/skins/<tema>/wallpapers/ Wallpapers /usr/sbin/frontend_start Lanzador de frontend predeterminado /media/data/local/sbin/frontend_start Lanzador de frontend personalizado /media/home Enlace simb\u00f3lico de /media/data/local/home /usr/local Enlace simb\u00f3lico de /media/data/local /usr/share/scriptrunner/scripts Scripts preinstalados en ScriptRunner /sys/class/power_supply/battery/ Ficheros de control de bater\u00eda; voltage_now da el voltaje actual de la bater\u00eda /sys/class/graphics/fb0/ Ficheros de control de la pantalla; bits_per_pixel da la profundidad de color /usr/share/gmenu2x/sections/ Lanzadores de aplicaciones preinstaladas en rootfs /usr/share/gcwconnect/gcwzero.ttf Tipo de letra de GCWZero /proc/cmdline Permite conocer el modelo de consola (argumento hwvariant ) /sys/devices/platform/jz-lcd.0/graphics/fb0/modes o /sys/class/graphics/fb0/modes Permiten conocer la resoluci\u00f3n de la pantalla en Stock/ROGUE","title":"Directorios/Ficheros interesantes stock/ROGUE"},{"location":"retro-emulacion/rg-350.html#directoriosficheros-interesantes-opendingux-beta","text":"Directorio Contenido /sys/devices/platform/13050000.lcd-controller/graphics/fb0/modes Permite conocer la resoluci\u00f3n de la pantalla /sys/class/graphics/fb0/virtual_size Modo del framebuffer /media/data/local/share/opendingux/loading.png Pantalla mostrada durante las transiciones de modo ~/.autostart Script para lanzar el frontend. Si no existe se lanza GMenu2X por defecto /sys/kernel/debug/gpio Estado de los GPIOs del procesador y correspondencia con controles /sys/class/power_supply/jz-battery/voltage_max_design Voltaje de bater\u00eda considerado como carga m\u00e1xima (4,2V actualmente) /sys/class/power_supply/jz-battery/voltage_min_design Voltaje de bater\u00eda considerado como carga m\u00ednima (3,4V actualmente) /sys/class/power_supply/jz-battery/voltage_now Voltaje actual de la bater\u00eda /sys/class/power_supply/usb-charger/online Sensor del puerto de carga (0:Desconectado, 1:Conectado). No indica si la consola se est\u00e1 cargando, s\u00f3lo si hay un cable conectado /etc/pwswd.conf Atajos predeterminados de pwswd /media/data/local/etc/pwswd.conf Atajos de pwswd personalizados por usuario","title":"Directorios/Ficheros interesantes OpenDingux beta"},{"location":"retro-emulacion/rg-350.html#directorios-de-savestates","text":"Sistema Emulador Directorio Atari 2600 Stella /media/data/local/home/.stella/state Atari 7800 ProSystem Mismo directorio de las ROMs Capcom System I, II, III y Neo Geo FBA /media/data/local/home/.fba/saves NES FCEUX /media/data/local/home/.fceux/fcs Game Boy y Game Boy Color Gambatte /media/data/local/home/.gambatte/saves Game Boy Advance ReGBA /media/data/local/home/.gpsp Game Gear y MasterSystem SMS Plus /media/data/local/home/.smsplus/state Game Gear y MasterSystem Genesis Plus /media/data/local/home/.genplus/saves Atari Lynx Handy /media/data/local/home/.handy Mega Drive PicoDrive /media/data/local/home/.picodrive/mds Neo Geo Pocket NGPCEmu /media/data/local/home/.ngpcemu/sstates PC Engine Temper /media/data/local/home/.temper/save_states PlayStation PCSX4All /media/data/local/home/.pcsx4all/sstates y /media/data/local/home/.pcsx4all/memcards SNES PocketSNES /media/data/local/home/.pocketsnes WonderSwan SwanEmu /media/data/local/home/.swanemu/sstates Arcade xMAME /media/data/local/share/xmame/xmame52/sta , /media/data/local/share/xmame/xmame69/sta y /media/data/local/share/xmame/xmame84/sta ScummVM ScummVM /media/data/local/home/.local/share/scummvm/saves OpenBOR OpenBOR /media/data/local/home/.OpenBOR/Saves Port Cave Story /media/data/local/home/.nxengine Port VVVVVV /media/data/local/home/.local/share/VVVVVV/saves Port Super Methane Bros. /media/data/local/home/.methane Port SORR /media/data/local/home/.sorrv5/savegame","title":"Directorios de savestates"},{"location":"retro-emulacion/rg-350.html#bios","text":"Sistema Emulador Directorio Fichero Atari 5200 A5200 /media/data/local/home 5200.rom Atari Lynx Handy /media/data/local/home/.handy lynxboot.img Gameboy Gambatte /media/data/local/home/.gambatte/bios/ gb_bios.bin Gameboy Color Gambatte /media/data/local/home/.gambatte/bios/ gbc_bios.bin Gameboy Advance Gpsp /media/data/local/home/.gpsp/ gba_bios.bin MegaCD Picodrive /media/data/local/home/.picodrive/ bios_CD_E.bin ; bios_CD_J.bin ; bios_CD_U.bin NeoGeo Mismo directorio de las ROMs neogeo.zip/uni-bios.rom PC-Engine CD Temper /media/data/local/home/.Temper/syscards/ syscard3.pce PlayStation Pcsx4all /media/data/local/home/.pcsx4all/bios/ psxonpsp660.bin ; scph1001.bin ; scph5500.bin ; scph5501.bin ; scph5502.bin","title":"BIOS"},{"location":"retro-emulacion/rg-350.html#codigos-teclas-para-mappers-dosbox","text":"Control C\u00f3digo Tecla de PC en mapper predeterminado A 306 key_lctrl B 308 key_lalt X 32 key_space Y 304 key_lshift L1 9 key_tab L2 280 key_pageup R1 8 key_bspace R2 281 key_pagedown UP 273 key_up DOWN 274 key_down LEFT 276 key_left RIGHT 275 key_right START 13 key_enter SELECT 27 key_esc POWER 278 key_home","title":"C\u00f3digos teclas para mappers DOSBOX"},{"location":"retro-emulacion/rg-350.html#codigos-teclas-en-opendingux-beta","text":"Los c\u00f3digos de las teclas cambian en el nuevo firmware beta : Control C\u00f3digo A 285 B 312 X 57 Y 42 L1 15 L2 73 R1 14 R2 81 UP 72 DOWN 80 LEFT 75 RIGHT 77 START ?? SELECT ?? POWER ??","title":"C\u00f3digos teclas en OpenDingux Beta"},{"location":"retro-emulacion/rg-350.html#solucion-de-problemas","text":"","title":"Soluci\u00f3n de problemas"},{"location":"retro-emulacion/rg-350.html#corrupcion-de-lanzador","text":"En ocasiones no se muestra correctamente el icono de una aplicaci\u00f3n, o no apunta a donde deber\u00eda. Puede suceder cuando hay dos OPK's con el mismo nombre en la SD interna y externa, y se borra uno de ellos por ejemplo. Para resetear la informaci\u00f3n, entrar en la secci\u00f3n donde est\u00e9 el problema dentro de el directorio /media/data/local/home/.gmenu2x/sections y borrar el nombre de la aplicaci\u00f3n problem\u00e1tica. Lo que hay all\u00ed no es la aplicaci\u00f3n en s\u00ed sino un fichero tipo .desktop con metainformaci\u00f3n (icono, descripci\u00f3n, etc.).","title":"Corrupci\u00f3n de lanzador"},{"location":"retro-emulacion/rg-350.html#colocar-lanzadores-en-secciones-nuevas-de-gmenu2x","text":"GMenu2X permite crear nuevas secciones y codificar en los .desktop que hay dentro de los OPKs que los lanzadores se muestren en esas secciones. Por alg\u00fan motivo el mecanismo no fnunciona del todo bien y si la secci\u00f3n no es de las tradicionales ( applications , emulators , settings , games ), al editar el lanzador no se persisten los cambios ya que no se generan los ficheros de enlace en ~/.gmenu2x/sections . Podemos enga\u00f1ar a GMenu2X para que genere estos ficheros siguiendo estos pasos: Crear el OPK con el .desktop apuntando a una secci\u00f3n de las que no dan problemas, por ejemplo emulators . Transferir el OPK a la consola y editar el lanzador haciendo un cambio menor, como por ejemplo el filtro de extensiones, para que se genere el fichero de link en ~/.gmenu2x/sections/emulators . Cambiar el par\u00e1metro Categories (es decir la secci\u00f3n) en el .desktop del OPK poniendo la que interese en lugar de emulators , por ejemplo doom . Transferir el nuevo OPK a la consola. Reiniciar GMenu2X para asegurarnos de que se lean todos los cambios. A partir de entonces aparece el lanzador en su secci\u00f3n ( doom en el ejemplo) y si se edita se persisten los cambios sin problemas. Como dato adicional, para que la nueva secci\u00f3n tenga icono propio, hay que colocar un icono png de 32x32 con el mismo nombre de la secci\u00f3n creada ( doom.png en el ejemplo) en la ruta: /media/data/local/home/.gmenu2x/skins/<theme>/sections donde <theme> se corresponde con el skin que estemos usando.","title":"Colocar lanzadores en secciones nuevas de GMenu2X"},{"location":"retro-emulacion/rg-350.html#programas-que-se-cierran","text":"En ocasiones los emuladores, aplicaciones o frontends (EmulationStation, PyMenu, SimpleMenu, etc.) cuando no est\u00e1n bien configurados se cierran sin dar m\u00e1s explicaciones al abrirlos o durante su manipulaci\u00f3n. Para tener algo que analizar, si los hemos lanzado desde GMenu2X, podemos activar un log que nos ofrecer\u00e1 la salida de error en la invocaci\u00f3n de estos programas. Para activarla hay que entrar en los ajustes de GMenu2X y poner a ON el par\u00e1metro Output logs ( Archivos de registro de sucesos si tenemos el interfaz en espa\u00f1ol): Una vez que en el log haya algo que mostrar aparecer\u00e1 un lanzador nuevo de nombre Log Viewer ( Lector de Registros de sucesos si tenemos el interfaz en espa\u00f1ol) donde podremos consultar la salida de error del proceso que se ha cerrado y con suerte obtener alguna pista sobre el motivo del cierre:","title":"Programas que se cierran"},{"location":"retro-emulacion/rg-350.html#particularidades-juegos","text":"Metal Gear Solid (PS): Desactivar HLE en el emulador y seleccionar BIOS scph1001.bin (instrucciones aqu\u00ed ). Realmente este ajuste, aunque imprescindible para MGS y otros, es recomendable en general. Metal Gear Solid (PS): En un momento dado del juego (alerta Spoiler) hay que superar un boss cambiando el mando de puerto en la consola original. Como con la RG esto no se puede hacer, hay un truco que consiste en llamar mucho al coronel, entonces se puede quitarles las vendas a los bustos que hay detras, y el boss se desconcierta haciendo que cueste menos derrotarle. Otra opci\u00f3n es descargar todo el cargador contra \u00e9l, que alguna vez le dar\u00e1s. Final Fantasy VIII, IX y algunos juegos europeos (PS): Necesitan parche anticopy o poner el archivo .sbi correspondiente a cada cd en el mismo directorio y con el mismo nombre. Ficheros SBI Harry Potter y la C\u00e1mara secreta , Vagrant Story , Ape Escape y Bugs Bunny & Taz - Time Busters (PS): Estos juegos se quedan atascado en los videos introductorios. La soluci\u00f3n es cambiar la opci\u00f3n Core settings > Emulation core de rec a int . El emulador es m\u00e1s lento pero m\u00e1s preciso y se puede superar ese punto. En ese momento grabar un savestate, volver a poner rec en Core settings > Emulation core y finalmente cargar el savestate. En el Vagrant Story el Analog Mode que soporta este juego es DualShock . Recordar adem\u00e1s que este juego es de los que necesita SBI . Aqu\u00ed se ofrece otra soluci\u00f3n para los casos en que cambiar de modo de emulaci\u00f3n sea demasiado engorroso (por tener que estar haci\u00e9ndolo continuamente). Dragon Ball Z: The Legacy of Goku (GBA): Este juego al poco de empezar a jugar en algunos emuladores muestra el error Este juego no funcionar\u00e1 con el hardware encontrado . Intentar el truco que comentan en este comentario . VVVVVV (port): Si hay problemas durante el arranque (pantalla en negro), borrar el directorio de settings /usr/local/home/.local/share/VVVVVV/ . Si no existe la ruta previa al directorio VVVVVV , es decir /usr/local/home/.local/share/ el juego abrir\u00e1 pero no guardar\u00e1 los estados. En ese caso crear manualmente la ruta desde terminal o DinguxCmdr. Run and Gun (XMAME): Para saltar el Memory Check, enchufar un teclado al puerto USB1/OTG y pulsar F7. Otra opci\u00f3n es mapear L2 a F2 ( Service mode en Input (this game) ) y R2 a F3 ( Reset game en Input (general) ) y pulsarlos a la vez. Parasite Eve 2 y Vandal Hearts 1/2 (PS): Estos juegos tienen un fix espec\u00edfico para ellos en las opciones del emulador: InuYasha Sengoku Battle (PS): Este juego tiene un fix espec\u00edfico para ellos en las opciones del emulador: Full Throttle (ScummVM): En la lucha contra los moteros se hace muy dif\u00edcil pasar por falta de potencia de la m\u00e1quina. No cambia de arma y a veces s\u00ed lo hace pero demasiado lento. Para mejorar la situaci\u00f3n hacer estos ajustes temporales para pasar esa parte:","title":"Particularidades juegos"},{"location":"retro-emulacion/rg-350.html#particularidades-emuladores","text":"A5200 (Atari 5200) : Hay que colocar la BIOS en /media/data/local/home/5200.rom . Las ROMs pueden estar en cualquier lugar porque el emulador permite seleccionarlas al abrirlo mediante un explorador de ficheros, pero deben estar descomprimidas y con extensi\u00f3n .a52 . ReGBA : La resoluci\u00f3n de pantalla de Game Boy Advance es de 240x160, lo que hace que si se quiere aprovechar bien la pantalla de la RG350 haya que utilizar alg\u00fan tipo de escalado. Los siguientes son los m\u00e1s recomendados (se ajustan en Display settings > Image scaling en ReGBA): None : Encaja la resoluci\u00f3n de GBA pixel a pixel en la pantalla de la RG. Tiene el inconveniente de que la pantalla queda un poco peque\u00f1a. Si se utiliza la versi\u00f3n modificada sin bezel que se puede bajar aqu\u00ed no se ver\u00e1 el marco con aspecto de GBA SP que trae la aplicaci\u00f3n original. Aspect, bilinear : Scaling recomendado por muchos usuarios. Hardware : Nos permitir\u00e1 ajustar el enfoque manualmente, a continuaci\u00f3n se describe el proceso. Empezamos pulsando Power+A hasta poner las bandas negras arriba y abajo. Luego pulsamos Power+Abajo varias veces hasta alcanzar el m\u00ednimo, momento en el que se pierde toda la difuminaci\u00f3n del escalado. Ahora ejecutamos un juego que tenga varios elementos cr\u00edticos en pantalla como texto y/o sprites detallados. Pulsando Power+Arriba iremos aumentando el grado de interpolaci\u00f3n de los gr\u00e1ficos. Si lo llevamos hasta el extremo (pulsando Power+Arriba muchas veces) veremos c\u00f3mo la imagen termina por coger mucho ruido. Se trata pues de localizar el equilibrio en un buen nivel de interpolaci\u00f3n sin que llegue a aparecer ruido. Pcsx4all (PS) : Algunos juegos de PS superan la resoluci\u00f3n de la pantalla de la RG350 (320x240). En esos juegos los textos pueden llegar a leerse mal. En esos casos configurar el par\u00e1metro Video scaling de GPU settings al valor hardware y luego durante el juego utilizar la combinaci\u00f3n de teclas Power+A para conmutar entre los distintos modos de scaling. Tambi\u00e9n podremos ajustar el grado de interpolaci\u00f3n del scaling pulsando Power+Arriba y Power+Abajo de la misma forma que se ha descrito en el caso de ReGBA .","title":"Particularidades emuladores"},{"location":"retro-emulacion/rg-350.html#modos-de-arranque-seguro","text":"Durante el arranque se puede modificar la forma de iniciar el sistema pulsando algunas teclas: Y : Carga el \u00faltimo kernel que funcion\u00f3 correctamente. X : Carga el \u00faltimo sistema de archivos (rootfs) que funcion\u00f3 correctamente. X+Y : Carga el \u00faltimo sistema (kernel+rootfs) que funcion\u00f3 correctamente.","title":"Modos de arranque seguro"},{"location":"retro-emulacion/rg-350.html#corrupcion-de-archivos-de-texto","text":"Linux y Windows utilizan distintos sistemas para codificar los retornos de carro de los ficheros de texto. Si creamos o editamos uno de estos ficheros y luego lo transferimos a la RG350, dependiendo del uso que vaya a tener ese fichero podr\u00eda no funcionar. Unos ficheros especialmente sensibles son los scripts como el que determina el lanzador de aplicacione predeterminado, es decir /media/data/local/sbin/frontend_start . Para reconvertir los ficheros de texto del formato de Windows al de Linux existe una peque\u00f1a utilidad llamada dos2unix . Para utilizarla tenemos que conectar con la RG350 por SSH para tener acceso a una terminal o utilizar la aplicaci\u00f3n de terminal ST-SDL . Desde uno de estos terminales ejecutaremos: RG350:/media/data/local/home # dos2unix fichero_a_convertir.txt","title":"Corrupci\u00f3n de archivos de texto"},{"location":"retro-emulacion/rg-350.html#backup-de-home","text":"El directorio /home/data/local/home pertenece a la tarjeta interna y es de los m\u00e1s importantes puesto que es donde la mayor\u00eda (por no decir todos) los programas (emuladores, ports, aplicaciones) guardan sus ajustes (como los savestates de los emuladores o las memory cards de pcsx4all). Cuando flasheamos la tarjeta interna (con las opciones 2 y 3 del apartado Opciones para actualizar el firmware RG350-ROGUE-CFW ) el contenido de este directorio se pierde. Una idea ser\u00eda hacer un respaldo del mismo en la tarjeta externa (que no se altera durante el flasheo) y luego restaurarlo. Podemos hacer el backup lanzando un comando de terminal ya sea conectando por SSH o utilizando una aplicaci\u00f3n de terminal (como ST-SDL ). El comando para realizar el backup es: tar -cf /media/sdcard/home_backup.tar -C /media/data/local home En caso de querer excluir alg\u00fan directorio concreto que ocupe mucho y que tengamos respaldado por otro lado (por ejemplo si tuvi\u00e9ramos las ROMs all\u00ed), utilizar el par\u00e1metro --exclude . Vamos a ver c\u00f3mo se excluir\u00edan por ejemplo las im\u00e1genes de previsualizaci\u00f3n de FBA: tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude = home/.fba/previews home Para restaurar: tar -xf /media/sdcard/home_backup.tar -C /media/data/local El comando no es sensible a la ruta, es decir puede lanzarse desde cualquier directorio y genera el fichero home_backup.tar en la ra\u00edz de la tarjeta externa (ruta /media/sdcard/ en el sistema de la consola). Aqu\u00ed puede leerse un monogr\u00e1fico sobre el tema.","title":"Backup de home"},{"location":"retro-emulacion/rg-350.html#monograficos-en-blog","text":"Primeros pasos con la consola RG350 Instalaci\u00f3n y configuraci\u00f3n de FBA Instalaci\u00f3n y configuraci\u00f3n de xMAME Instalaci\u00f3n y configuraci\u00f3n de MAME4All Instalaci\u00f3n y configuraci\u00f3n de ScummVM Integraci\u00f3n de ScummVM en lanzadores con selecci\u00f3n de ROMs como SimpleMenu Instalaci\u00f3n y configuraci\u00f3n de Daphne Instalaci\u00f3n y configuraci\u00f3n de OpenBOR Instalaci\u00f3n y configuraci\u00f3n de DOSBox Generaci\u00f3n de previews de las roms instaladas Instalaci\u00f3n y configuraci\u00f3n de launcher SimpleMenu Instalaci\u00f3n y configuraci\u00f3n de launcher PyMenu Instalaci\u00f3n y configuraci\u00f3n de launcher EmulationStation Conexi\u00f3n a internet a trav\u00e9s de cable USB C\u00f3mo hacer backup para no perder savestates y configuraciones de emuladores Py Backup. Aplicaci\u00f3n para gestionar backups Compilaci\u00f3n de Buildroot con toolchain en un contenedor Docker Ejemplos de compilaci\u00f3n de algunas aplicaciones por medio del toolchain en Docker Procedimiento para generar una imagen de tarjeta SD flasheable Integraci\u00f3n en frontends y mejora en la gesti\u00f3n del modo vertical en FBA Interfaz de ajustes para las ROMs de xMAME lanzadas desde SimpleMenu Sustituci\u00f3n de pantalla por la del modelo M Instalador RetroArch","title":"Monogr\u00e1ficos en blog"},{"location":"retro-emulacion/rg-351.html","text":"RG351 \u00b6 Enlaces \u00b6 Documentaci\u00f3n \u00b6 FAQs ArkOS Using Content, Folder, and Core Overrides for Custom Settings Restaurar config BOBELEC Emuladores, Ports y Aplicaciones \u00b6 PSP game settings for RG351P by jserodio Sistema \u00b6 Distribuciones: 351ELEC Batocera ArkOS Lakka Buildroot: Gameblabla Hardware \u00b6 Extracci\u00f3n UART Teardown Soluci\u00f3n ruido Wifi : Colocar un condensador de 0.1uF a tierra en el terminal negativo del altavoz derecho. Programaci\u00f3n de STM32F103 Repuestos componentes: Repuestos oficiales en Aliexpress Funda protectora M\u00f3dulo Wifi MT7601 original : No est\u00e1 ya disponible; se mantiene por la referencia del factor forma correcto. M\u00f3dulo Wifi Mtk7601un compatible + Antena externa (opcional) Dongle Wifi MT7601 compatible Funda compatible Cheatsheets \u00b6 Logs completos del sistema \u00b6 En EmuELEC hay montado un sistema para subir un log muy detallado de todo el sistema a internet. La consola tiene que estar conectada a internet para que esto funcione, no s\u00f3lo a la red, porque sube todo el log a un sitio. Lo que hay que hacer es: Conectar la consola a internet. Iniciar un terminal por SSH. Ejecutar el comando emueleclogs.sh . El comando anterior devuelve una URL del dominio ix.io . Abrir la URL que devuelve con el navegador. Controles BOB FAT edition \u00b6 Situaci\u00f3n Funci\u00f3n Shortcut Emulador Pausa Select + A Emulador Reset Select + B Emulador Men\u00fa RetroArch Select + X Emulador Avance r\u00e1pido Select + Y Emulador Guardar savestate Select + R1 Emulador Cargar savestate Select + L1 Emulador Cambiar disco Select + R2 Emulador Abrir bandeja CD Select + L2 Emulador Cerrar juego Select + Start Emulador Cambiar slot savestate Select + \u2190\u2192 Emulador Cambiar volumen Select + \u2191\u2193 Nintendo DS Alternar pantalla L2 y R2 Nintendo DS Mover puntero Stick derecho Nintendo DS Click puntero R3 (click stick derecho) FBA con UniBIOS Entrar en ajustes UniBIOS A+B+Y Controles firmware stock \u00b6 Situaci\u00f3n Funci\u00f3n Shortcut Emulador Men\u00fa RetroArch L3 + R3 Controles ArkOS \u00b6 Situaci\u00f3n Funci\u00f3n Shortcut Emulador Men\u00fa RetroArch Select + X Emulador Cerrar juego Select + Start Emulador Screenshot de aplicaciones lanzadas con rg351p-js2xbox L3 Men\u00fas interesantes EmulationStation \u00b6 Men\u00fa Funci\u00f3n Imagen UI Settings > Show filenames in lists Alterna entre mostrar los nombres de los ficheros o el nombre del juego extra\u00eddo de los metadatos Game Settings > Per System advanced configuration Ajustes de cada sistema (como core con que emular) Main Menu > Games Settings > System Settings > Netplay Settings > Enable Netplay Activa el sistema Netplay integrado en ES. Ver caja Netplay al final de esta tabla 351ELEC Netplay Una vez activado Netplay, se escanear\u00e1n todas las ROMs con capacidad Netplay. Pulsando X desde el men\u00fa de elecci\u00f3n de sistemas de ES aparecer\u00e1 el men\u00fa Connect to Netplay que mostrar\u00e1 las partidas disponibles. Pulsando X desde el men\u00fa de elecci\u00f3n de ROMs, en el men\u00fa que aparece se nos dar\u00e1 la opci\u00f3n Start Netplay Host con el que podremos hospedar una partida. Men\u00fas interesantes RetroArch \u00b6 Men\u00fa Situaci\u00f3n Funci\u00f3n Quick Menu > Options > Use BIOS Core PCSX-ReARMed Poner a auto para cargar la BIOS original. No usar HLE Quick Menu > Controls > Save Core Remap File Guarda los ajustes de controles como predeterminados para el sistema Quick Menu > Controls > Save Game Remap File Guarda los ajustes de controles como particulares para el juego en ejecuci\u00f3n Quick Menu > On-Screen Overlay > Display Overlay Gambatte Poner a OFF ya que el overlay se amontona sobre la pantalla del juego en este emulador con los sistemas GB y GBC (usar Overrides > Save Core Overrides a continuaci\u00f3n para guardar) Quick Menu > Overrides > Save Core Overrides Convierte la configuraci\u00f3n actual en predeterminada para el core en ejecuci\u00f3n Directorios/Ficheros interesantes \u00b6 Sistema Directorio Contenido EmuELEC/351ELEC /storage/.config/emulationstation Configuraci\u00f3n EmulationStation EmuELEC/351ELEC /storage/.config/retroarch Configuraci\u00f3n RetroArch EmuELEC/351ELEC /storage/.config/emuelec/scripts Scripts de sistema como: Control de brillo, Lanzar emulador, Explorador de archivos, Mostrar splash, Mostrar di\u00e1logo. Se copian durante el arranque de /usr/config/emuelec/scripts/ EmuELEC/351ELEC /storage/.brightness Nivel de brillo en el arranque EmuELEC/351ELEC /usr/lib/coreelec/fs-resize Script que prepara la tercera partici\u00f3n para las ROMs (expandi\u00e9ndola para que ocupe el espacio libre de la tarjeta). Se lanza desde el servicio definido en /usr/lib/systemd/system/fs-resize.service EmuELEC/351ELEC /emuelec/logs/emuelec.log Log del \u00faltimo juego ejecutado. ArkOS /home/ark/.emulationstation Configuraci\u00f3n EmulationStation ArkOS /home/ark/.config/retroarch Configuraci\u00f3n RetroArch64 ArkOS /opt/system Scripts de sistema como: Enable/Disable Wifi, Enable/Disable remote services, Fix ExFAT Partition, Set clock, Network Info, Update OS ArkOS /opt/asciis/launch.txt ASCII art que aparece al lanzar los emuladores ArkOS /home/ark Screenshots ArkOS /boot/firstboot.sh Script de primer arranque, lanzado desde servicio /etc/systemd/system/firstboot.service que se desactiva y borra el propio script al terminar su trabajo ArkOS /boor/expandtoexfat.sh Script de expansi\u00f3n de tercera partici\u00f3n llamado desde /boot/firstboot.sh si no existe el flag /boot/doneit Usuarios sistemas \u00b6 Sistema Usuario Password EmuELEC/BOB FAT Edition root emuelec ArkOS ark ark 351ELEC/BOBElec root 351elec C\u00f3digos teclas \u00b6 Soluci\u00f3n de problemas \u00b6 Escalado de pantalla \u00b6 Una de las pocas cosas pol\u00e9micas que tiene esta consola es la resoluci\u00f3n de pantalla. La mayor\u00eda de los sistemas retro de 8 y 16 bit encajan muy mal en la resoluci\u00f3n de 480x320. En estos sistemas es casi obligado activar alg\u00fan tipo de filtrado. El m\u00e1s recomendable es el RGA. Para ello seguir los siguientes pasos: Iniciar RetroArch de forma aislada, no accediendo una vez abierta una ROM. Esto depender\u00e1 de la distribuci\u00f3n que tengamos instalada. En la BOB FAT edition por ejemplo se hace desde el men\u00fa que aparece al pulsar Select en el listado de sistemas de EmulationStation. Seguir la siguiente ruta de men\u00fas: Main Menu > Settings > Video > RGA Scaling > ON Seguir la siguiente ruta para guardar los cambios: Main Menu > Configuration File > Save Current Configuration Ajustes video en GB/GBC \u00b6 Por defecto la paleta de colores que utiliza Gambatte, el emulador de GB/GBC, no es muy afortunada. La imagen tiene un tono amarillo poco atractivo o parecido a los tonos de la pantalla de la Game Boy. Adem\u00e1s coloca un overlay que se superpone a la pantalla del juego. Se recomienda hacer los siguientes ajustes: Quick Menu > Options > GB Colorization : Internal Quick Menu > Options > Internal Palette : GB - DMG Quick Menu > On-Screen Overlay : OFF Main Menu > Settings > Video > Bilinear Filtering : OFF Main Menu > Settings > Video > RGA Scaling : OFF Quick Menu > Overrides > Save Core Overrides : Para convertir los ajustes anteriores en predeterminados para el core de GB/GBC. Jugar juegos verticales en horizontal \u00b6 Esto sirve en BOB FAT Edition. Explorar de alguna forma los archivos de la consola (por SSH, WinSCP, con alg\u00fan explorador de archivos en la propia consola o montando la tarjeta en un Linux) y desplazarnos hasta la ruta /storage/.config/retroarch/config . Borrar (o renombrar si queremos poder revertir el cambio m\u00e1s adelante) los directorios FinalBurn Neo y MAME 2003-Plus . Renombrar FinalBurn Neo no vertical a FinalBurn Neo . Renombrar MAME 2003-Plus no vertical a MAME 2003-Plus . Configuraci\u00f3n sensibilidad de sticks anal\u00f3gicos para mejorar diagonales \u00b6 Iniciar RetroArch de forma aislada, no accediendo una vez abierta una ROM. Esto depender\u00e1 de la distribuci\u00f3n que tengamos instalada. En la BOB FAT edition por ejemplo se hace desde el men\u00fa que aparece al pulsar Select en el listado de sistemas de EmulationStation. Hacer los siguientes ajustes: Main Menu > Settings > Input > Input Button Axis Threshold : 0.250 Main Menu > Settings > Input > Analog Deadzone : 0.5 Main Menu > Settings > Input > Analog Sensitivity : 5.0 Seguir la siguiente ruta para guardar los cambios: Main Menu > Configuration File > Save Current Configuration Cambio de disco en PlayStation \u00b6 Para cambiar de disco es necesario una vez lo pida, entrar en el men\u00fa de RetroArch > Quick menu > Disk control . Aqu\u00ed veremos dos opciones, una de ellas es para abrir la bandeja Cycle Disk Try Status (cd virtual metido en el lector) y otra para insertar el disco Disk append . Por tanto cuando pida el CD 2 hay que abrir bandeja, a\u00f1adir el CD 2 al lector y proceder a cerrar bandeja. Una vez hecho esto, volvemos para atr\u00e1s hasta la opci\u00f3n reset y le damos. Cargar\u00e1 el segundo CD y podremos seguir la partida. Todo esto se puede automatizar entrando previamente en men\u00fa de RetroArch > Controls > Hotkeys y asignando un bot\u00f3n para abrir bandeja y otro para cambiar de disco. Monogr\u00e1ficos en blog \u00b6 Instalaci\u00f3n de m\u00f3dulo Wifi interno en RG351P","title":"RG351"},{"location":"retro-emulacion/rg-351.html#rg351","text":"","title":"RG351"},{"location":"retro-emulacion/rg-351.html#enlaces","text":"","title":"Enlaces"},{"location":"retro-emulacion/rg-351.html#documentacion","text":"FAQs ArkOS Using Content, Folder, and Core Overrides for Custom Settings Restaurar config BOBELEC","title":"Documentaci\u00f3n"},{"location":"retro-emulacion/rg-351.html#emuladores-ports-y-aplicaciones","text":"PSP game settings for RG351P by jserodio","title":"Emuladores, Ports y Aplicaciones"},{"location":"retro-emulacion/rg-351.html#sistema","text":"Distribuciones: 351ELEC Batocera ArkOS Lakka Buildroot: Gameblabla","title":"Sistema"},{"location":"retro-emulacion/rg-351.html#hardware","text":"Extracci\u00f3n UART Teardown Soluci\u00f3n ruido Wifi : Colocar un condensador de 0.1uF a tierra en el terminal negativo del altavoz derecho. Programaci\u00f3n de STM32F103 Repuestos componentes: Repuestos oficiales en Aliexpress Funda protectora M\u00f3dulo Wifi MT7601 original : No est\u00e1 ya disponible; se mantiene por la referencia del factor forma correcto. M\u00f3dulo Wifi Mtk7601un compatible + Antena externa (opcional) Dongle Wifi MT7601 compatible Funda compatible","title":"Hardware"},{"location":"retro-emulacion/rg-351.html#cheatsheets","text":"","title":"Cheatsheets"},{"location":"retro-emulacion/rg-351.html#logs-completos-del-sistema","text":"En EmuELEC hay montado un sistema para subir un log muy detallado de todo el sistema a internet. La consola tiene que estar conectada a internet para que esto funcione, no s\u00f3lo a la red, porque sube todo el log a un sitio. Lo que hay que hacer es: Conectar la consola a internet. Iniciar un terminal por SSH. Ejecutar el comando emueleclogs.sh . El comando anterior devuelve una URL del dominio ix.io . Abrir la URL que devuelve con el navegador.","title":"Logs completos del sistema"},{"location":"retro-emulacion/rg-351.html#controles-bob-fat-edition","text":"Situaci\u00f3n Funci\u00f3n Shortcut Emulador Pausa Select + A Emulador Reset Select + B Emulador Men\u00fa RetroArch Select + X Emulador Avance r\u00e1pido Select + Y Emulador Guardar savestate Select + R1 Emulador Cargar savestate Select + L1 Emulador Cambiar disco Select + R2 Emulador Abrir bandeja CD Select + L2 Emulador Cerrar juego Select + Start Emulador Cambiar slot savestate Select + \u2190\u2192 Emulador Cambiar volumen Select + \u2191\u2193 Nintendo DS Alternar pantalla L2 y R2 Nintendo DS Mover puntero Stick derecho Nintendo DS Click puntero R3 (click stick derecho) FBA con UniBIOS Entrar en ajustes UniBIOS A+B+Y","title":"Controles BOB FAT edition"},{"location":"retro-emulacion/rg-351.html#controles-firmware-stock","text":"Situaci\u00f3n Funci\u00f3n Shortcut Emulador Men\u00fa RetroArch L3 + R3","title":"Controles firmware stock"},{"location":"retro-emulacion/rg-351.html#controles-arkos","text":"Situaci\u00f3n Funci\u00f3n Shortcut Emulador Men\u00fa RetroArch Select + X Emulador Cerrar juego Select + Start Emulador Screenshot de aplicaciones lanzadas con rg351p-js2xbox L3","title":"Controles ArkOS"},{"location":"retro-emulacion/rg-351.html#menus-interesantes-emulationstation","text":"Men\u00fa Funci\u00f3n Imagen UI Settings > Show filenames in lists Alterna entre mostrar los nombres de los ficheros o el nombre del juego extra\u00eddo de los metadatos Game Settings > Per System advanced configuration Ajustes de cada sistema (como core con que emular) Main Menu > Games Settings > System Settings > Netplay Settings > Enable Netplay Activa el sistema Netplay integrado en ES. Ver caja Netplay al final de esta tabla 351ELEC Netplay Una vez activado Netplay, se escanear\u00e1n todas las ROMs con capacidad Netplay. Pulsando X desde el men\u00fa de elecci\u00f3n de sistemas de ES aparecer\u00e1 el men\u00fa Connect to Netplay que mostrar\u00e1 las partidas disponibles. Pulsando X desde el men\u00fa de elecci\u00f3n de ROMs, en el men\u00fa que aparece se nos dar\u00e1 la opci\u00f3n Start Netplay Host con el que podremos hospedar una partida.","title":"Men\u00fas interesantes EmulationStation"},{"location":"retro-emulacion/rg-351.html#menus-interesantes-retroarch","text":"Men\u00fa Situaci\u00f3n Funci\u00f3n Quick Menu > Options > Use BIOS Core PCSX-ReARMed Poner a auto para cargar la BIOS original. No usar HLE Quick Menu > Controls > Save Core Remap File Guarda los ajustes de controles como predeterminados para el sistema Quick Menu > Controls > Save Game Remap File Guarda los ajustes de controles como particulares para el juego en ejecuci\u00f3n Quick Menu > On-Screen Overlay > Display Overlay Gambatte Poner a OFF ya que el overlay se amontona sobre la pantalla del juego en este emulador con los sistemas GB y GBC (usar Overrides > Save Core Overrides a continuaci\u00f3n para guardar) Quick Menu > Overrides > Save Core Overrides Convierte la configuraci\u00f3n actual en predeterminada para el core en ejecuci\u00f3n","title":"Men\u00fas interesantes RetroArch"},{"location":"retro-emulacion/rg-351.html#directoriosficheros-interesantes","text":"Sistema Directorio Contenido EmuELEC/351ELEC /storage/.config/emulationstation Configuraci\u00f3n EmulationStation EmuELEC/351ELEC /storage/.config/retroarch Configuraci\u00f3n RetroArch EmuELEC/351ELEC /storage/.config/emuelec/scripts Scripts de sistema como: Control de brillo, Lanzar emulador, Explorador de archivos, Mostrar splash, Mostrar di\u00e1logo. Se copian durante el arranque de /usr/config/emuelec/scripts/ EmuELEC/351ELEC /storage/.brightness Nivel de brillo en el arranque EmuELEC/351ELEC /usr/lib/coreelec/fs-resize Script que prepara la tercera partici\u00f3n para las ROMs (expandi\u00e9ndola para que ocupe el espacio libre de la tarjeta). Se lanza desde el servicio definido en /usr/lib/systemd/system/fs-resize.service EmuELEC/351ELEC /emuelec/logs/emuelec.log Log del \u00faltimo juego ejecutado. ArkOS /home/ark/.emulationstation Configuraci\u00f3n EmulationStation ArkOS /home/ark/.config/retroarch Configuraci\u00f3n RetroArch64 ArkOS /opt/system Scripts de sistema como: Enable/Disable Wifi, Enable/Disable remote services, Fix ExFAT Partition, Set clock, Network Info, Update OS ArkOS /opt/asciis/launch.txt ASCII art que aparece al lanzar los emuladores ArkOS /home/ark Screenshots ArkOS /boot/firstboot.sh Script de primer arranque, lanzado desde servicio /etc/systemd/system/firstboot.service que se desactiva y borra el propio script al terminar su trabajo ArkOS /boor/expandtoexfat.sh Script de expansi\u00f3n de tercera partici\u00f3n llamado desde /boot/firstboot.sh si no existe el flag /boot/doneit","title":"Directorios/Ficheros interesantes"},{"location":"retro-emulacion/rg-351.html#usuarios-sistemas","text":"Sistema Usuario Password EmuELEC/BOB FAT Edition root emuelec ArkOS ark ark 351ELEC/BOBElec root 351elec","title":"Usuarios sistemas"},{"location":"retro-emulacion/rg-351.html#codigos-teclas","text":"","title":"C\u00f3digos teclas"},{"location":"retro-emulacion/rg-351.html#solucion-de-problemas","text":"","title":"Soluci\u00f3n de problemas"},{"location":"retro-emulacion/rg-351.html#escalado-de-pantalla","text":"Una de las pocas cosas pol\u00e9micas que tiene esta consola es la resoluci\u00f3n de pantalla. La mayor\u00eda de los sistemas retro de 8 y 16 bit encajan muy mal en la resoluci\u00f3n de 480x320. En estos sistemas es casi obligado activar alg\u00fan tipo de filtrado. El m\u00e1s recomendable es el RGA. Para ello seguir los siguientes pasos: Iniciar RetroArch de forma aislada, no accediendo una vez abierta una ROM. Esto depender\u00e1 de la distribuci\u00f3n que tengamos instalada. En la BOB FAT edition por ejemplo se hace desde el men\u00fa que aparece al pulsar Select en el listado de sistemas de EmulationStation. Seguir la siguiente ruta de men\u00fas: Main Menu > Settings > Video > RGA Scaling > ON Seguir la siguiente ruta para guardar los cambios: Main Menu > Configuration File > Save Current Configuration","title":"Escalado de pantalla"},{"location":"retro-emulacion/rg-351.html#ajustes-video-en-gbgbc","text":"Por defecto la paleta de colores que utiliza Gambatte, el emulador de GB/GBC, no es muy afortunada. La imagen tiene un tono amarillo poco atractivo o parecido a los tonos de la pantalla de la Game Boy. Adem\u00e1s coloca un overlay que se superpone a la pantalla del juego. Se recomienda hacer los siguientes ajustes: Quick Menu > Options > GB Colorization : Internal Quick Menu > Options > Internal Palette : GB - DMG Quick Menu > On-Screen Overlay : OFF Main Menu > Settings > Video > Bilinear Filtering : OFF Main Menu > Settings > Video > RGA Scaling : OFF Quick Menu > Overrides > Save Core Overrides : Para convertir los ajustes anteriores en predeterminados para el core de GB/GBC.","title":"Ajustes video en GB/GBC"},{"location":"retro-emulacion/rg-351.html#jugar-juegos-verticales-en-horizontal","text":"Esto sirve en BOB FAT Edition. Explorar de alguna forma los archivos de la consola (por SSH, WinSCP, con alg\u00fan explorador de archivos en la propia consola o montando la tarjeta en un Linux) y desplazarnos hasta la ruta /storage/.config/retroarch/config . Borrar (o renombrar si queremos poder revertir el cambio m\u00e1s adelante) los directorios FinalBurn Neo y MAME 2003-Plus . Renombrar FinalBurn Neo no vertical a FinalBurn Neo . Renombrar MAME 2003-Plus no vertical a MAME 2003-Plus .","title":"Jugar juegos verticales en horizontal"},{"location":"retro-emulacion/rg-351.html#configuracion-sensibilidad-de-sticks-analogicos-para-mejorar-diagonales","text":"Iniciar RetroArch de forma aislada, no accediendo una vez abierta una ROM. Esto depender\u00e1 de la distribuci\u00f3n que tengamos instalada. En la BOB FAT edition por ejemplo se hace desde el men\u00fa que aparece al pulsar Select en el listado de sistemas de EmulationStation. Hacer los siguientes ajustes: Main Menu > Settings > Input > Input Button Axis Threshold : 0.250 Main Menu > Settings > Input > Analog Deadzone : 0.5 Main Menu > Settings > Input > Analog Sensitivity : 5.0 Seguir la siguiente ruta para guardar los cambios: Main Menu > Configuration File > Save Current Configuration","title":"Configuraci\u00f3n sensibilidad de sticks anal\u00f3gicos para mejorar diagonales"},{"location":"retro-emulacion/rg-351.html#cambio-de-disco-en-playstation","text":"Para cambiar de disco es necesario una vez lo pida, entrar en el men\u00fa de RetroArch > Quick menu > Disk control . Aqu\u00ed veremos dos opciones, una de ellas es para abrir la bandeja Cycle Disk Try Status (cd virtual metido en el lector) y otra para insertar el disco Disk append . Por tanto cuando pida el CD 2 hay que abrir bandeja, a\u00f1adir el CD 2 al lector y proceder a cerrar bandeja. Una vez hecho esto, volvemos para atr\u00e1s hasta la opci\u00f3n reset y le damos. Cargar\u00e1 el segundo CD y podremos seguir la partida. Todo esto se puede automatizar entrando previamente en men\u00fa de RetroArch > Controls > Hotkeys y asignando un bot\u00f3n para abrir bandeja y otro para cambiar de disco.","title":"Cambio de disco en PlayStation"},{"location":"retro-emulacion/rg-351.html#monograficos-en-blog","text":"Instalaci\u00f3n de m\u00f3dulo Wifi interno en RG351P","title":"Monogr\u00e1ficos en blog"},{"location":"retro-emulacion/z80-computer.html","text":"Z80 Computer \u00b6 Enlaces \u00b6 El art\u00edculo fundacional de Grant Searle Projects, Hardware, Software, Homemade Z80 systems Z80 part numbers Collapse OS Serie de art\u00edculos de BreakIntoProgram: part 1 , part 2 , part 3 , part 4 , part 5 , part 6 Serie de art\u00edculos en Maker Pro: Part 1: The CPU Part 2: Memory Part 3: EEPROM Programmer Part 4: Basic IO and Writing Your First Program Serie de art\u00edculos de Mike Sutton Lista de v\u00eddeos de Ben Eater Lista de v\u00eddeos de Doctor Volt LM80C . Repositorio MBC: v1 ; v2 ZX2020 : S\u00f3lo CPU y RAM est\u00e1tica. Ejecuta CP/M. Art\u00edculo en Hackster . RC2014 bus o RC40 : SC114 \u2013 Z80 Motherboard BP80 bus : SC126 \u2013 Z180 MOTHERBOARD Z50Bus : LiNC80 SBC1 SC118 \u2013 Z80 PROCESSOR CARD RC2014 \u00b6 An\u00e1lisis modelos: Small Computer Central Z80.no Tarjetas: Oficiales en Tindie Game Boards for RC2014 https://easyeda.com/search?wd=rc2014 VT132 Repositorio de documentaci\u00f3n Repositorio oficial Serie de art\u00edculos de Scott M. Baker: Intro to Z80 Retrocomputing Z80 Retrocomputing 2 \u2013 Real Time Clock for the RC2014 Z80 Retrocomputing 3 \u2013 Bus Monitor Board Z80 Retrocomputing 4 \u2013 Bus Supervisor Z80 Retrocomputing 5 \u2013 Single Stepper for RC2014 Z80 Retrocomputing 6 \u2013 RC2014 TIL311 Front Panel Board Z80 Retrocomputing 7 \u2013 RC2014 DAC (Digital To Analog Converter) Z80 Retrocomputing 8 \u2013 Speech Synthesizer for RC2014 Z80 Retrocomputing 9 \u2013 CTC and dual serial ports for RC2014 Z80 Retrocomputing 10 \u2013 RC2014 CompactFlash board Z80 retrocomputing 11 \u2013 CP/M on the RC2014 Z80 Retrocomputing 12 \u2013 Talking Nixie Tube Clock Z80 Retrocomputing 13 \u2013 RC2014 VFD Display Board Z80 Retrocomputing Part 14 \u2013 RC2014 Floppy Controller Boards Z80 Retrocomputing 15 \u2013 CP/M on RC2014 Revisted, Using RomWBW Z80 Retrocomputing 16 \u2013 Unix on RC2014 Z80 Retrocomputing 17: Enhanced Z80 CPU Board for RC2014 Z80 Retrocomputing 18 \u2013 Z180 CPU Board for RC2014","title":"Z80 Computer"},{"location":"retro-emulacion/z80-computer.html#z80-computer","text":"","title":"Z80 Computer"},{"location":"retro-emulacion/z80-computer.html#enlaces","text":"El art\u00edculo fundacional de Grant Searle Projects, Hardware, Software, Homemade Z80 systems Z80 part numbers Collapse OS Serie de art\u00edculos de BreakIntoProgram: part 1 , part 2 , part 3 , part 4 , part 5 , part 6 Serie de art\u00edculos en Maker Pro: Part 1: The CPU Part 2: Memory Part 3: EEPROM Programmer Part 4: Basic IO and Writing Your First Program Serie de art\u00edculos de Mike Sutton Lista de v\u00eddeos de Ben Eater Lista de v\u00eddeos de Doctor Volt LM80C . Repositorio MBC: v1 ; v2 ZX2020 : S\u00f3lo CPU y RAM est\u00e1tica. Ejecuta CP/M. Art\u00edculo en Hackster . RC2014 bus o RC40 : SC114 \u2013 Z80 Motherboard BP80 bus : SC126 \u2013 Z180 MOTHERBOARD Z50Bus : LiNC80 SBC1 SC118 \u2013 Z80 PROCESSOR CARD","title":"Enlaces"},{"location":"retro-emulacion/z80-computer.html#rc2014","text":"An\u00e1lisis modelos: Small Computer Central Z80.no Tarjetas: Oficiales en Tindie Game Boards for RC2014 https://easyeda.com/search?wd=rc2014 VT132 Repositorio de documentaci\u00f3n Repositorio oficial Serie de art\u00edculos de Scott M. Baker: Intro to Z80 Retrocomputing Z80 Retrocomputing 2 \u2013 Real Time Clock for the RC2014 Z80 Retrocomputing 3 \u2013 Bus Monitor Board Z80 Retrocomputing 4 \u2013 Bus Supervisor Z80 Retrocomputing 5 \u2013 Single Stepper for RC2014 Z80 Retrocomputing 6 \u2013 RC2014 TIL311 Front Panel Board Z80 Retrocomputing 7 \u2013 RC2014 DAC (Digital To Analog Converter) Z80 Retrocomputing 8 \u2013 Speech Synthesizer for RC2014 Z80 Retrocomputing 9 \u2013 CTC and dual serial ports for RC2014 Z80 Retrocomputing 10 \u2013 RC2014 CompactFlash board Z80 retrocomputing 11 \u2013 CP/M on the RC2014 Z80 Retrocomputing 12 \u2013 Talking Nixie Tube Clock Z80 Retrocomputing 13 \u2013 RC2014 VFD Display Board Z80 Retrocomputing Part 14 \u2013 RC2014 Floppy Controller Boards Z80 Retrocomputing 15 \u2013 CP/M on RC2014 Revisted, Using RomWBW Z80 Retrocomputing 16 \u2013 Unix on RC2014 Z80 Retrocomputing 17: Enhanced Z80 CPU Board for RC2014 Z80 Retrocomputing 18 \u2013 Z180 CPU Board for RC2014","title":"RC2014"},{"location":"retro-emulacion/zx-spectrum.html","text":"ZX Spectrum \u00b6 Enlaces \u00b6 ZX Design Info : A site dedicated to the reverse engineering of the ZX Spectrum and related projects. TK90X v3 ROM (ZX Spectrum compatible) . An\u00e1lisis . Tiendas: RetroRadionics ByteDelight ZX Renew Clones/recreaciones: Superfo Harlequin 48K Superfo Harlequin 128K Humble48 Sizif-128 : Easy-to-build minimalistic ZX Spectrum clone. Sizif-512 : Another CPLD-based ZX Spectrum clone for 48K rubber case with some sweet features. N-Go (Next clon) Emulaci\u00f3n: ZXBaremulator : Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI. ZX-ESPectrum : An emulation of the ZX-Spectrum computer on an Lilygo TTGo VGA32 . Carga de audio \u00b6 Amplificador sonido entrada EAR Loading ZX Spectrum tape audio in a post-cassette world z802tzx : Conversor de TAP a TZX (tambi\u00e9n en modo turbo). Variantes TZXDuino: Proyecto original MEGADuino: Placa Firmware Carcasa v2 Tutorial programaci\u00f3n firmware Probando el TZXDuino Probando el TSXDuino MEGA Tirada MegaDuino Tutorial programaci\u00f3n Fix en v2 para cargar mejor CDTs en Amstrad Componentes / Repuestos \u00b6 M\u00f3dulo de memoria baja Regulador de conmutaci\u00f3n Traco Power, entrada 6.5 \u2192 36V dc, Salida 5V, 1A, 5W Homebrew \u00b6 The Curse of Trasmoz MegaDuino \u00b6 Flash de MegaDuino \u00b6 Bajar librer\u00eda LiquidCrystal_I2C Copiar el contenido del repositorio anterior a un directorio de nombre LiquidCrystal_I2C y colocarlo dentro del directorio libraries del directorio de sketches de Arduino IDE. Instalar mediante el Gestor de Librer\u00edas la librer\u00eda SdFat de Bill Greiman. Bajar c\u00f3digo de repositorio Abrir el sketch MaxDuino_1.54M.ino Editar la linea 178 del sketch anterior para corregir el nombre del fichero de cabecera userMAXconfig.h (originalmente pone userMaxconfig.h ). Editar el fichero userMAXconfig.h y descomentar las l\u00edneas siguientes: #define OLED_SETCONTRAS 0xcf // Override default value inside Diplay.ino, bigger to increase output current per segment #define OLED1306 // Set if you are using OLED 1306 display #define OLED1306_128_64 // 128x64 resolution with 8 rows #define OLED1106_1_3 // Use this line as well if you have a 1.3\" OLED screen Seleccionar en el Arduino IDE: Placa: Arduino Mega or Mega 2560 Procesador: ATmega2560 (Mega 2560) Puerto: El que corresponda Pulsar el bot\u00f3n Subir . Opciones MegaDuino \u00b6 Baud: Velocidad de reproducci\u00f3n de los archivos CAS y TSX de MSX. Motor: Indica si el control de motor est\u00e1 activado/desactivado. S\u00f3lo \u00fatil para plataformas que permiten control del datasette como Amstrad, MSX y BBC Micro. En el resto de equipos nos permitir\u00e1 seleccionar manualmente los bloques para programas multicarga por ejemplo. TSXCzx: Indica si la opci\u00f3n TSXCzxpUEFSW est\u00e1 activada/desactivada. Sirve para tres cosas: Activar la carga turbo (bloques 4B) de los archivos CAS y TSX de MSX. Cambiar la polaridad de la se\u00f1al de audio de los archivos de Spactrum y Amstrad. Cambiar la polaridad de la se\u00f1al de audio de los archivos UEF de Acorn Electron y BBC Micro. Skip2A: ???","title":"ZX Spectrum"},{"location":"retro-emulacion/zx-spectrum.html#zx-spectrum","text":"","title":"ZX Spectrum"},{"location":"retro-emulacion/zx-spectrum.html#enlaces","text":"ZX Design Info : A site dedicated to the reverse engineering of the ZX Spectrum and related projects. TK90X v3 ROM (ZX Spectrum compatible) . An\u00e1lisis . Tiendas: RetroRadionics ByteDelight ZX Renew Clones/recreaciones: Superfo Harlequin 48K Superfo Harlequin 128K Humble48 Sizif-128 : Easy-to-build minimalistic ZX Spectrum clone. Sizif-512 : Another CPLD-based ZX Spectrum clone for 48K rubber case with some sweet features. N-Go (Next clon) Emulaci\u00f3n: ZXBaremulator : Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI. ZX-ESPectrum : An emulation of the ZX-Spectrum computer on an Lilygo TTGo VGA32 .","title":"Enlaces"},{"location":"retro-emulacion/zx-spectrum.html#carga-de-audio","text":"Amplificador sonido entrada EAR Loading ZX Spectrum tape audio in a post-cassette world z802tzx : Conversor de TAP a TZX (tambi\u00e9n en modo turbo). Variantes TZXDuino: Proyecto original MEGADuino: Placa Firmware Carcasa v2 Tutorial programaci\u00f3n firmware Probando el TZXDuino Probando el TSXDuino MEGA Tirada MegaDuino Tutorial programaci\u00f3n Fix en v2 para cargar mejor CDTs en Amstrad","title":"Carga de audio"},{"location":"retro-emulacion/zx-spectrum.html#componentes-repuestos","text":"M\u00f3dulo de memoria baja Regulador de conmutaci\u00f3n Traco Power, entrada 6.5 \u2192 36V dc, Salida 5V, 1A, 5W","title":"Componentes / Repuestos"},{"location":"retro-emulacion/zx-spectrum.html#homebrew","text":"The Curse of Trasmoz","title":"Homebrew"},{"location":"retro-emulacion/zx-spectrum.html#megaduino","text":"","title":"MegaDuino"},{"location":"retro-emulacion/zx-spectrum.html#flash-de-megaduino","text":"Bajar librer\u00eda LiquidCrystal_I2C Copiar el contenido del repositorio anterior a un directorio de nombre LiquidCrystal_I2C y colocarlo dentro del directorio libraries del directorio de sketches de Arduino IDE. Instalar mediante el Gestor de Librer\u00edas la librer\u00eda SdFat de Bill Greiman. Bajar c\u00f3digo de repositorio Abrir el sketch MaxDuino_1.54M.ino Editar la linea 178 del sketch anterior para corregir el nombre del fichero de cabecera userMAXconfig.h (originalmente pone userMaxconfig.h ). Editar el fichero userMAXconfig.h y descomentar las l\u00edneas siguientes: #define OLED_SETCONTRAS 0xcf // Override default value inside Diplay.ino, bigger to increase output current per segment #define OLED1306 // Set if you are using OLED 1306 display #define OLED1306_128_64 // 128x64 resolution with 8 rows #define OLED1106_1_3 // Use this line as well if you have a 1.3\" OLED screen Seleccionar en el Arduino IDE: Placa: Arduino Mega or Mega 2560 Procesador: ATmega2560 (Mega 2560) Puerto: El que corresponda Pulsar el bot\u00f3n Subir .","title":"Flash de MegaDuino"},{"location":"retro-emulacion/zx-spectrum.html#opciones-megaduino","text":"Baud: Velocidad de reproducci\u00f3n de los archivos CAS y TSX de MSX. Motor: Indica si el control de motor est\u00e1 activado/desactivado. S\u00f3lo \u00fatil para plataformas que permiten control del datasette como Amstrad, MSX y BBC Micro. En el resto de equipos nos permitir\u00e1 seleccionar manualmente los bloques para programas multicarga por ejemplo. TSXCzx: Indica si la opci\u00f3n TSXCzxpUEFSW est\u00e1 activada/desactivada. Sirve para tres cosas: Activar la carga turbo (bloques 4B) de los archivos CAS y TSX de MSX. Cambiar la polaridad de la se\u00f1al de audio de los archivos de Spactrum y Amstrad. Cambiar la polaridad de la se\u00f1al de audio de los archivos UEF de Acorn Electron y BBC Micro. Skip2A: ???","title":"Opciones MegaDuino"},{"location":"retro-emulacion/zx-uno.html","text":"ZX-Uno \u00b6 Enlaces \u00b6 ZX-Uno [Clon de ordenador ZX Spectrum basado en FPGA] Verkami: ZX-UNO Verkami: ZX-box ZX-Uno case, a Sinclair ZX Spectrum clone : Carcasa de Mejias3D para ZX-Uno oficial. ZX-Uno FAQ by @uto_dev INSTRUCCIONES PARA ACTUALIZAR LOS ZX-UNO DEL CROWDFUNDING CON ROMS DE SPECTRUM I am newbie. Where to start? / Soy novato, \u00bfpor d\u00f3nde empezar? Manual de esxDOS: Parte 1 y Parte 2 ZX-Uno FAQ ZX-Uno Wiki : Contiene el diagrama de bloques del sistema, la lista de registros, descripci\u00f3n de los modos gr\u00e1ficos disponibles, etc. Sinclair FAQ Wiki ZX-UNO (XL) ISSUE2 : Versi\u00f3n de ZX-Uno para integrar en carcasa de Spectrum original. RetroRadionics : Carcasas y repuestos para Spectrum original. Comandos \u00b6 NMI - EsxDOS: Ctrl-Alt-F5 Soft Reset: Ctrl-Alt-Supr Hard Reset: Ctrl-Alt-Del Configuraci\u00f3n: Hard Reset + F2 (Edit) Cambio de Core durante arranque: Caps Lock Cambio de modo de v\u00eddeo: Scroll Lock Huevo de pascua: Pulsar : (o SYMBOL SHIFT+Z) durante los 2 primeros segundos tras el arranque o tras hacer master reset (Ctrl-Alt-BkSpace). POKEs \u00b6 ( Fuente ) Arrancar con la ROM \"cargandoleches\". Con esa ROM no se pueden cargar juegos con el men\u00fa de NMI as\u00ed que hay que usar comandos de ESXDOS, despu\u00e9s de hacer BREAK al arracar la ROM. Para cargar taps hay que acceder al directorio donde est\u00e9n usando as\u00ed: .cd <directorio> Luego cargar el juego as\u00ed: .tapein <nombre del fichero tap> LOAD \"\" Una vez cargado el juego, pulsar NMI. Saldr\u00e1 arriba a la izquierda un recuadro donde primero hay que escribir la direcci\u00f3n del POKE (lo que va antes de la coma), pulsar enter, y despu\u00e9s teclear el valor del POKE (lo que va detr\u00e1s de la coma). Para terminar simplemente pulsar enter en lugar de escribir la direcci\u00f3n y volver\u00e1 al juego ya pokeado.","title":"ZX-UNO"},{"location":"retro-emulacion/zx-uno.html#zx-uno","text":"","title":"ZX-Uno"},{"location":"retro-emulacion/zx-uno.html#enlaces","text":"ZX-Uno [Clon de ordenador ZX Spectrum basado en FPGA] Verkami: ZX-UNO Verkami: ZX-box ZX-Uno case, a Sinclair ZX Spectrum clone : Carcasa de Mejias3D para ZX-Uno oficial. ZX-Uno FAQ by @uto_dev INSTRUCCIONES PARA ACTUALIZAR LOS ZX-UNO DEL CROWDFUNDING CON ROMS DE SPECTRUM I am newbie. Where to start? / Soy novato, \u00bfpor d\u00f3nde empezar? Manual de esxDOS: Parte 1 y Parte 2 ZX-Uno FAQ ZX-Uno Wiki : Contiene el diagrama de bloques del sistema, la lista de registros, descripci\u00f3n de los modos gr\u00e1ficos disponibles, etc. Sinclair FAQ Wiki ZX-UNO (XL) ISSUE2 : Versi\u00f3n de ZX-Uno para integrar en carcasa de Spectrum original. RetroRadionics : Carcasas y repuestos para Spectrum original.","title":"Enlaces"},{"location":"retro-emulacion/zx-uno.html#comandos","text":"NMI - EsxDOS: Ctrl-Alt-F5 Soft Reset: Ctrl-Alt-Supr Hard Reset: Ctrl-Alt-Del Configuraci\u00f3n: Hard Reset + F2 (Edit) Cambio de Core durante arranque: Caps Lock Cambio de modo de v\u00eddeo: Scroll Lock Huevo de pascua: Pulsar : (o SYMBOL SHIFT+Z) durante los 2 primeros segundos tras el arranque o tras hacer master reset (Ctrl-Alt-BkSpace).","title":"Comandos"},{"location":"retro-emulacion/zx-uno.html#pokes","text":"( Fuente ) Arrancar con la ROM \"cargandoleches\". Con esa ROM no se pueden cargar juegos con el men\u00fa de NMI as\u00ed que hay que usar comandos de ESXDOS, despu\u00e9s de hacer BREAK al arracar la ROM. Para cargar taps hay que acceder al directorio donde est\u00e9n usando as\u00ed: .cd <directorio> Luego cargar el juego as\u00ed: .tapein <nombre del fichero tap> LOAD \"\" Una vez cargado el juego, pulsar NMI. Saldr\u00e1 arriba a la izquierda un recuadro donde primero hay que escribir la direcci\u00f3n del POKE (lo que va antes de la coma), pulsar enter, y despu\u00e9s teclear el valor del POKE (lo que va detr\u00e1s de la coma). Para terminar simplemente pulsar enter en lugar de escribir la direcci\u00f3n y volver\u00e1 al juego ya pokeado.","title":"POKEs"},{"location":"sistemas/android_system.html","text":"Android \u00b6 Enlaces \u00b6 Mount a filesystem read-write HTC Super Tool Unlock Root Link2SD Como Desrootear tu terminal Simple ADB Backup - Full backup without root Desbloquea el bootloader de tu HTC f\u00e1cilmente con Firewater S-Off Los m\u00f3viles perfectos a los que instalar CyanogenMod y que te duren muchos a\u00f1os Aplicaciones interesantes \u00b6 KK Easy Launcher(Big Launcher) Files Go : Ayuda a limpiar el sistema. SD Maid : Ayuda a limpiar el sistema. Dispositivos \u00b6 OnePlus 5 \u00b6 Enlaces \u00b6 C\u00f3mo evitar que OnePlus recopile informaci\u00f3n del usuario sin conocimiento C\u00f3mo instalar Android Oreo 8.0 en el OnePlus 5 Eliminaci\u00f3n servicio OnePlus System Service \u00b6 Este servicio recopila informaci\u00f3n privada como ha reconocido la propia OnePlus . La forma de desinstalarlo es abriendo una shell por ADB y ejecutando un comando: $ ./adb shell OnePlus5:/ $ pm uninstall -k --user 0 net.oneplus.odm Success Previamente se recomienda hacer un backup de este paquete por si tras desinstalarlo el sistema queda inestable. Esto lo podemos hacer localizando el directorio del apk con App Inspector y lanzando el siguiente comando: $ ./adb pull <ruta> OnePlus One \u00b6 Enlaces \u00b6 How to Unlock Bootloader, Install Custom Recovery and Root OxygenOS is here [Installation Guide] OnePlus One Update: Manually Install CyanogenMod OS 12 CM12 [TUTORIAL] Mirrors for official Cyanogen roms and OTA updates TWRP for bacon Cyanogem Support : Im\u00e1genes de f\u00e1brica para Oneplus One y el resto de dispositivos que tienen soporte de Cyanogen. Plasma Mobile on Oneplus One Modos arranque \u00b6 Recovery: V- + Power Fastboot: V+ + Power Flasheo de ROM \u00b6 Cuando el m\u00f3vil avise de la disponibilidad de una nueva actualizaci\u00f3n, si est\u00e1 rooteado se producir\u00e1 un error durante el arranque al aplicarla. En ese caso hay que obtener la rom completa (no sirven los parches incrementales) e instalar manualmente desde recovery siguiendo estos pasos ( fuente ): Download the required ROM (full ROM) file for your device from the download section. Now transfer the ROM into your device\u2019s internal storage. Place the file where you can easily locate it. Now reboot into TWRP . To boot into TWRP, power off your phone and press and hold volume down button and power button at the same time. It is highly recommended that you perform a nandroid backup . To backup your ROM, tap on the backup option and select the following elements: System, Data, Boot, Recovery, EFS and swipe the confirmation action to backup. You can skip this step, but if after the installation system doesn\u2019t boot, try this step. After performing the ROM backup, return to the TWRP main menu and tap the Wipe button and select Advanced Wipe . Then wipe Dalvik Cache , System , and Cache . (If after the complete process system does not boot, try wiping the Data as well. But its will remove all your data) Go back to the TWRP main menu again and tap on Install option. Navigate to the ROM file and select it. Swipe the confirmation button to proceed with the installation. The ROM will be installed. Once installed, reboot to system . Reseteo de estad\u00edsticas de bater\u00eda desde TWRP \u00b6 Cargar la bater\u00eda hasta el 100% Arrancar el TWRP recovery Seguir la ruta: Advanced / File Manager Ir a la ruta: /data/system/ Pulsar sobre el fichero batterystats.bin Pulsar Delete Reiniciar el sistema Descargar la bater\u00eda hasta el 2 - 5 % Volver a cargar la bater\u00eda hasta el 100% Instalaci\u00f3n LineageOS \u00b6 ( Fuente ) Si no est\u00e1 ya, instalar el recovery TWRP siguiendo estas instrucciones . Descargar de aqu\u00ed . Opcionalmente bajar las GApps en edici\u00f3n ARM. Copiar los ficheros al directorio /sdcard (en caso de haber perdido la partici\u00f3n de almacenamiento interno por haber instalado UBPorts por ejemplo, copiar los ficheros a un pendrive y pincharlo con un adaptador OTG; el pendrive se ver\u00e1 como /sdcard desde el Recovery). Arrancar en modo Recovery ( V- + Power ). Seleccionar Wipe y despu\u00e9s Advanced Wipe . Seleccionar las particiones Cache , System y Data y despu\u00e9s Swipe to Wipe . Vuelve al men\u00fa principal y selecciona Install . Navega a /sdcard y seleciona el .zip de LineageOS. Sigue las instrucciones en pantalla. (Opcional) Instala el resto de paquetes. Si se van a instalar las GApps, hay que hacerlo antes del primer arranque. Vuelve al men\u00fa principal y selecciona Reboot , y despu\u00e9s System . Motorola Moto E (XT1021) \u00b6 Enlaces \u00b6 Info Cyanogenmod Downloads Cyanogenmod Modos arranque \u00b6 Recovery: Apagado pulsar Power mientras se pulsa Volume- . Cuando salga el logo de Android tumbado con el tri\u00e1ngulo rojo pulsar Volume+ mientras se mantiene pulsado Power . Geeksphone One \u00b6 Enlaces \u00b6 Reset manual Tutorial ROM y Google Apps ROMs \u00b6 SuperAosp 8.6, Rom Basada en Android Open Source Gingerbread CyanogenMod RCMod 3.0.4 RCMod 4.0.0 Configuraci\u00f3n A-GPS \u00b6 Te\u00f3ricamente, el server es: h-slp.mncXXX.mccYYY.pub.3gppnetwork.org En el puerto: 3425 XXX lo cambias por el MNC de tu operador, e YYY por el MCC. En el caso de Simyo MCC=214 y MNC=19 NVSBL P4D Sirius \u00b6 Enlaces \u00b6 SuperOSR ICS v1.4.6 para P4D Sirius Samsung Galaxy mini2 (GT-S6500D) \u00b6 Enlaces \u00b6 Backup EFS folder without rooting Samsung Galaxy mini2 Blog Root y unroot Galaxy Mini 2 HOW TO CHANGE CSC CODE ON SAMSUNG GALAXY GRAND DUOS I9082/I9082L Liberar Galacy Mini 2 Cambiar CSC (Country Specific Code) StockRoms S6500/D/L/T para flashear por CWM CyanogenMod 10 Thewhisp XDA - Galaxy Mini II Android Development XDA - Galaxy Mini II Q&A, Help & Troubleshooting Modos arranque \u00b6 Recovery: V+ V- Home Power Download: V- Home Power HTC Desire \u00b6 Los datos originales del HBOOT de un Desire sin manipular eran: BRAVO PVT4 SHIP S-ON HBOOT-0.93.0001 MICROP-051d RADIO-5.11.05.14 Aug 10 2010,17:52:18 Modos de arranque \u00b6 Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power. Enlaces \u00b6 C\u00f3mo rootear HTC Desire Unlock Bootloader (HTC oficial) MIUI-XJ 2.1.6 Gingerbread 2.3.7 para HTC Desire Ice Cream Sandwich con toques de CyanogenMod para HTC Desire Las mejores ROMs para HTC Desire Las mejores Roms para HTC Desire ICS for Desire Chromium AOKP for Bravo - Beta 3! - Stock HBOOT only C\u00f3mo flashear un Recovery en HTC Desire Proceso de instalaci\u00f3n de ROM \u00b6 Hacer S-OFF con revolutionary (ejecutarlo con sudo). Hacer root siguiendo los pasos de El Androide Libre . Instalar el HBOOT Bravo CM7 r2 de AlphaRev . Se hace descargando el fichero de la columna \"PB99IMG\", renombr\u00e1ndolo a \u201cPB99IMG.zip\u201d, copi\u00e1ndolo a la ra\u00edz de la SD y reiniciando en modo HBOOT. Borrar cach\u00e9, Data y Dalvik. Formatear SD desde Recoveery con 1024MB para la ext y 0MB para el swap. Instalar InsertCoin de tipo CM7: http://insertcoin-roms.org/ Samsung Galaxy Note II \u00b6 Enlaces \u00b6 DN4 (Ditto Note 4) ROM from E-team Electron Team (creadores de DN3 y DN4) Sony Xperia T \u00b6 Men\u00fa de servicio \u00b6 *#*#7378423#*#* Modos de Reset \u00b6 Volume Up + POWER (for 10 seconds) -> Battery reset [Device will vibrate once] Volume Up + POWER (for 15 seconds) -> Hard reset [Device will vibrate three times] Dispositivos de almacenamiento 4.0 \u00b6 /mnt/sdcard: Memoria interna (16GB) /mnt/ext_card: Tarjeta SD Dispositivos de almacenamiento 4.1 \u00b6 /mnt/int_storage 10.9G 2.6G 8.3G 4096 /storage/sdcard0 10.9G 2.6G 8.3G 4096 /storage/sdcard1 29.7G 2.7G 27.0G 32768 Historial firmware \u00b6 Fecha Versi\u00f3n 2013-07-02 9.1.A.1.141 2014-04 9.2.A.1.199 Enlaces \u00b6 Unlock your boot loader Full rooting guide for xperia t lt30p build 7.0.A.3.195 Xperia Roms Creacion de perfiles completos con Smart Tags + NFC Task Launcker + Tasker \u00bfA cuantos os ha fallado el Xperia T? y soluciones. Servicio T\u00e9cnico Flash tool for Xperia\u2122 devices Lista de Firmwares certificados Xperia T software updates TWRP 2.7 - Sony Xperia T page [4.4 ROM Flash] bypass set_metadata_xxx fails Disable Fast dormancy on sony smarthphones [MOD] Speakerphone whistle fix + volume boost Charging a dead Xperia T ROMs \u00b6 CyanogenMod FreeXperia Project OmniROM ROM(Unlocked)(KITKAT) Plain AOSP for Xperia T ROM(4.4.4)(T/TX) Carbon Rom KK Unofficial ROM(T)(4.3) Ultimate PureXT v4.5 (**) ROM(4.3)(T)(LB/UB) OMeGa v2.2 (**) DooMKernel {JB}(v12)(20140604) Stock ROMs para el Xperia T: HTCMania - XDA GAPPS(4.4.x) OFFICIAL Up-to-Date PA-GOOGLE APPS (All ROM's) (2014-08-18) Repuestos \u00b6 Tapa posterior Instrucciones de instalaci\u00f3n de ROMs \u00b6 power off the phone: hold vol+ and plug usb to boot into fastboot (blu led) fastboot flash boot boot.img (from cm10 zip) fastboot reboot enter recovery, on boot led will be violet for 3'', during this period press vol+ flash rom zip flash gapps zip wipe reboot Desactivar fast-dormancy (pepephone MCC= 214, MNC= 06) \u00b6 In /system/etc/fast-dormancy/fd_custm_conf.txt replace the 0s with your MNC and MCC from your APN setting. Solucion al problema de permisos de la memoria interna ( fuente ) \u00b6 $ su # cd /mnt/media_rw # busybox chown -R 2800:2800 sdcard0 # chmod 0770 sdcard0 Sony Xperia U \u00b6 Men\u00fa de servicio \u00b6 *#*#7378423#*#* Enlaces \u00b6 Unlock your boot loader DESBLOQUEAR COMPLETAMENTE tu Xperia y poder ROOTEARLO\u2605Aplicar MODS\u2605ROMS Sobre el Bootloader ROMS \u00b6 XDA-Developers Rom List (ROM)(UB)(4.4.4)(W37-S4)(XperiaSTE Team) CyanogenMod 11.0 Rikomagic MK802-IIIs \u00b6 Enlaces \u00b6 PicUntu MK802 Ubuntu Images with optional Droidmote MK802 IIIs en AndroidPC.es ROMS no oficiales funcionando al 100% para meter en los MK802IIIs Foro MK802-IIIS Rikomagic en AndroidPC.es Las mejores tiendas de aplicaciones alternativas a Google Play Configuraciones para mandos y m\u00e9todo para cambiar funciones de las teclas ROMs \u00b6 NEOTV Rom Finless 1.5 para MK802-IIIs Finless rom 1.8 para MK802-III y UG802 Rom Finless 2.0 con Android 4.2.2 para MX1/MX2 y MK802-IIIS con BT Software \u00b6 RetroArch, el Todo-en-1 de emuladores: Playstation, SNES, GBA y muchos m\u00e1s Sopcast Null Input Method TDT \u00b6 Televisi\u00f3n conectando un USB-TDT en tu AndroidPC con chip RK3066 Hardware \u00b6 Adaptador USB LAN + USB HUB Flasheo de Firmware oficial \u00b6 Bajar la \u00faltima versi\u00f3n de la p\u00e1gina oficial . En el paquete recien bajado (en el directorio 0121-IIIS8B\\0121-IIIS8B\\RKBatchTool1.5en\\Driver) se encuentran los drivers de modo Flashboot para Windows. Para Windows8 se pueden encontrar aqu\u00ed . Conectar un cable microUSB-USB a la ranura OTG. El otro extremo (USB) lo introducimos en un puerto libre del ordenador mientras a la vez con un palillo o clip desenrollado pulsamos el bot\u00f3n de reset que se adivina por una de las rejillas de ventilaci\u00f3n. Si Windows muestra un bocadillo pidiendo drivers, le damos a elegir la ruta en disco y apuntas al directorio comentado anteriormente que contenga la versi\u00f3n de los drivers que nos interese. Si Windows no reacciona habr\u00e1 que entrar en el Administrador de dispositivos y forzar la actualizaci\u00f3n sobre alguno de los \"Dispositivos desconocidos\" que veamos. En el directorio \"0121-IIIS8B\\0121-IIIS8B\" del paquete con el firmware viene una explicaci\u00f3n detallada (incluye fotos) del proceso de instalaci\u00f3n de los drivers y de la conexi\u00f3n al ordenador por el puerto OTG mientras se pulsa el reset. Una vez instalados los drivers lo mejor ser\u00e1 reiniciar Windows. Volvemos a conectar el MK802 por el puerto OTG mientras mantenemos pulsado el bot\u00f3n de reset como en el paso 3. Abrimos la aplicaci\u00f3n de flasheo (RKBatchTool). Deber\u00edamos ver en azul el cuadrado inferior izquierdo marcado con un 1. Si no es as\u00ed es que el proceso de instalaci\u00f3n de drivers y/o conexi\u00f3n del MK802 al PC no ha ido bien. Seleccionamos el fichero con la imagen de la ROM (extensi\u00f3n .img). Pulsamos el bot\u00f3n \"Upgrade\". Esperamos a que el proceso termine satisfactoriamente. Puede tardar entre 1 y 3 minutos. Flasheo ROM Finless \u00b6 Bajar el paquete de aqu\u00ed . Instalar los drivers Windows (ver pasos en instalaci\u00f3n ROM oficial). Descomprimir el paquete con la ROM. Conectar el Rikomagic al PC por USB como comentamos en el otro procedimiento, es decir conectando al puerto OTG y mientras se mantiene presionado el microbot\u00f3n de reset oculto entre las rendijas de ventilaci\u00f3n. Abrir el programa \"ROM Flash Tool.exe\" que hay en el primer nivel de directorios del paquete que hemos descomprimido. En la ventana que aparece se ve una serie de ficheros que se toman del subdirectorio \"FinlessROM\". Dentro de ese directorio hay varias opciones para los ficheros \"parameter\", \"kernel\" y \"boot\". El primero yo lo dejar\u00eda como viene por defecto. Los ficheros \"kernel\" y \"boot\" tienen que ir parejos. Hay dos versiones de cada, una para 720p y otra para 1080p. Recomiendan la 720p y por la potencia del Rikomagic (que va justito para los 1080p) yo tambi\u00e9n creo que no merece la pena el 1080p. Como por defecto viene seleccionado el 1080p, hay que cambiarlo. Para ello hay que hacer click en la fila correspondiente de la \u00faltima columna, la que tiene el r\u00f3tulo \"...\". Antes de empezar a flashear hay que comprobar que el programa se comunica con el Rikomagic. Para ello tiene que indicar abajo del todo en letra grande \"Found RKAndroid...\". Si pone \"No Found RKAndroid rock usb\" es que hay alg\u00fan problema con la conexi\u00f3n o los drivers. Simplemente volver a intentar la conexi\u00f3n (pulsando el botoncito). Le damos al bot\u00f3n \"Erase NAND (IDB)\" y luego cuando ese proceso termine le damos a \"Flash ROM\". ZTE Skate / Orange Montecarlo \u00b6 Enlaces \u00b6 Backup original ROM? How to Install CyanogenMod on ZTE Skate (\"skate\") Tutorial Como instalar ClockWorkMod Recovery,Rootear e instalar roms en ZTE skate/OMC [ROM][ZTE Skate] H3 Holo (Dolby Audio + Linaro optimized kernel + frandom + ROW I/O scheduler) HTC Wildfire \u00b6 Modos de arranque \u00b6 Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power. Enlaces \u00b6 Las mejores ROMs para HTC Wildfire S-OFF y rootear para instalar Rom HTC Wildfire: Full Update Guide Nuestras 4 ROM favoritas del 2011 para la HTC Desire Unlock Bootloader (HTC oficial) HTC Wildfire S \u00b6 Enlaces \u00b6 Unlock Bootloader (HTC oficial) HTC Wildfire S ROMs CM9-marvel-KANG MIUI V4 |CM9|ICS 4.0.3| Nuevo m\u00e9todo para conseguir ROOT en el HTC Wildfire S y algunas ROMs CyanogenMod 9.0.0-RC0-Marvel-Alpha2 Motorola Milestone 2 \u00b6 Modos de arranque \u00b6 Se arranca en Recovery encendiendo mientras se mantiene pulsada la tecla X del teclado f\u00edsico. Luego, en Froyo hay que pulsar @. En Gingerbread las dos teclas de volumen a la vez. Se arranca en HBOOT encendiendo mientras se mantiene pulsada la tecla de cursor \"Arriba\" del teclado f\u00edsico. Basebands \u00b6 Tel\u00e9fono original: EPU93_U_00.60.00 ICS 4.0.4 2012-08-15: EPU93ST2_U_03.0C.01 Kernels \u00b6 2.3.4: 2.6.32.9-g7d2667a ICS 4.0.4 2012-08-15: 2.6.32.9-g7d2667a Recomendado por Tezet para JB 4.1.1: 2.6.32.9-g5db7937 a17140@zch68lnxdroid63 #1 Fri Sep 16 17:57:00 CST 2011 Enlaces \u00b6 sbf_flash: Utilidad Linux/Mac para flashear una ROM Motorola Android Software Upgrade News Miledropedia SBF Files Milestone2 en XDA-developers Milestone 2 Actualizacion Gingerbread, CyanogenMOD y MIUI Rootear Motorola Milestone 2 CWM: Clockworkmod Recovery - Droid 2 Bootstrapper Hacer backup s\u00f3lo de System Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 9 for Motorola Milestone 2 MOTO Milestone 2 \u00bb ROM MIUI 1.12.9 The Noob Handbook for Bricked Phones Instalaci\u00f3n verificada de CM7 HOW TO install CyanogenMod/MIUI to your phone ROM Argen2Stone 2.7 RE (Based on Ms2Ginger 2.0) How to install Argen2Stone? Titanium Backup, The Easy Way! MIUI 2.5.25 GB 2.3.7 + ICS Multilanguage for Milestone 2! CyanogenMod 10 for Motorola Milestone 2 (Android 4.1.1) !!! CyanogenMod 9 for Motorola Milestone 2 (Android 4.0.4) MIUI v4 2.7.27 Baseband switcher Please come in,if your ms2 can't contect the GSM Kernel downgrade method for EU/BR/AR Gingerbread (only for BL=3) Multipack (alternativa a gapps) Instalaci\u00f3n SBF \u00b6 Bajar el SBF de aqu\u00ed . Aplicarlo con: sudo sbf_flash rom.sbf Rootear con DoomLoRD . Instalar bootmenu con droid2bootstrap sacado de aqu\u00ed . Instalaci\u00f3n de ROM JB 4.1.1 de tezet \u00b6 Hacer el downgrade del kernel flasheando el sbf que hay aqu\u00ed Al reiniciar deber\u00eda entrar en CWM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik Instalar el Kernel CH GB que indica tezet aqu\u00ed Instalar la ROM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik Sony Ericsson Xperia X8 \u00b6 Enlaces \u00b6 Root Sony Ericsson Xperia X8 With SuperOneClick How To Install Latest xRecovery to Sony Ericsson Xperia X10 CM7.1.0 FXP043 - FreeXperia Project Tutorial para reparar/desbrickear terminales Sony Ericsson How to install GingerXperiaV8 on Sony Ericsson X8 GingerDX para Xperia X8 GingerDX Como instalar un Rom a un Xperia X8 Las mejores ROMs para Sony Ericsson Xperia X8 How to rescue our bricked phone Hard brick warning - read before boot loader unlock SE Tweaker Tool v4.0 (16/2/12) Unlock Bootloader+Kernel Guide Bootloader and kernel guide Desbloquear el Bootloader para Novatos X8 Unlocking the boot loader (Oficial) Debrick \u00b6 Phone-lab Barcelona Movical Santiago de Compostela Liberar.es http://forum.xda-developers.com/showthread.php?t=1292705&page=2 http://forum.xda-developers.com/showthread.php?t=1399381&page=2 http://support.setool.net/showthread.php?3-UPDATES-AND-NEWS/page23 http://forum.xda-developers.com/showthread.php?t=986697&highlight=flash+tool Problem unlocking X8 with new bootloader [Solved] Soluci\u00f3n en el hilo de XDA \"Hard brick warning - read before boot loader unlock\" Xperia testpoint instructions and pictures Unlock Bootloader.Test Point Libera BOOTLOADER POR 15\u20ac OMNIUS O S1TOOL GRATIS T\u00e9cnicas varias \u00b6 Conectar el mando de la PS3 \u00b6 ( Fuente ) Requisitos \u00b6 Nuestro dispositivo Android Deberemos ser Root Dualshock 3 (Sixaxis) Sixaxis Compatibility Checker Sixaxis Controller SixaxisPairTool, que puedes descargarlo desde aqu\u00ed . Configuraci\u00f3n \u00b6 Abrimos el Sixaxis Compatibility Checker Nos aparecer\u00e1 un mensaje y pulsaremos sobre OK Pulsaremos sobre Start y le daremos permisos de Superusuario Si nuestro dispositivo es compatible recibiremos un mensaje dici\u00e9ndonos si nuestro dispositivo es compatible. En caso que de que as\u00ed sea pulsamos sobre Stop y salimos de la aplicaci\u00f3n. En caso de no recibir el mensaje de compatibilidad podemos para aqu\u00ed o seguir y probar suerte ;-) Ahora abrimos Sixaxis Controller App y clicamos sobre start. Le daremos permisos de superusuario al igual que a la otra aplicaci\u00f3n. Entonces obtendremos una direcci\u00f3n de Bluetooth local. Abriremos en nuestro ordenador el Sixaxis Pair Tool y la instalaremos. Despu\u00e9s la abriremos como administrador (bot\u00f3n derecho sobre el icono). Con el programa abierto enchufaremos el Sixaxis en nuestro PC mediante el cable USB. En el Sixaxis Pair Tool veremos una caja vac\u00eda. Ah\u00ed escribiremos la direcci\u00f3n Bluetooth Local que hab\u00edamos obtenido antes. Cuando esto est\u00e9 hecho pulsaremos sobre Update y veremos como la direcci\u00f3n se ha actualizado. Desconectaremos el Sixaxis de nuestro PC. Pulsaremos sobre el bot\u00f3n PS y veremos que ocurre\u2026 Nuestro Sixaxis ya deber\u00eda estar emparejado con nuestro dispositivo Android. ADB en Linux y arrancar settings \u00b6 Instalar el SDK. Sacar id de fabricante de lsusb (http://bradchow.wordpress.com/2009/02/16/adb-on-windows-and-ubuntu-linux/) y crear rule udev. Reiniciar adb server: adb kill-server sudo adb start-server adb devices Ejecutar: sudo adb shell am start -a android.intent.action.MAIN -n com.android.settings/.Settings Montar system en rw: \u00b6 # mount -o remount,rw /system # cd /system/app # mount -o remount,ro /system # reboot recovery Desinstalar aplicaciones de sistema sin root \u00b6 Fuente Activa el modo de depuraci\u00f3n en tu Android. Conecta tu Android al ordenador por USB y acepta la clave RSA. Abre una ventana de comandos y escribe adb devices sin las comillas. Tu dispositivo deber\u00eda detectarse apareciendo a modo de c\u00f3digo. Una vez conectado escribe adb shell . Ahora necesitas eliminar una a una las aplicaciones que desees. Utiliza App Inspector para saber el nombre del paquete. Pega este c\u00f3digo en la ventana de comandos: pm uninstall -k -user 0 nombre.del.paquete . Sin las comillas y cambiando \u201cnombre.del.paquete\u201d por el de la aplicaci\u00f3n que deseas (Google Chrome es com.android.chrome , por ejemplo). Acepta el comando y si el ordenador te devuelve un Success es que se ha eliminado de manera satisfactoria.","title":"Android"},{"location":"sistemas/android_system.html#android","text":"","title":"Android"},{"location":"sistemas/android_system.html#enlaces","text":"Mount a filesystem read-write HTC Super Tool Unlock Root Link2SD Como Desrootear tu terminal Simple ADB Backup - Full backup without root Desbloquea el bootloader de tu HTC f\u00e1cilmente con Firewater S-Off Los m\u00f3viles perfectos a los que instalar CyanogenMod y que te duren muchos a\u00f1os","title":"Enlaces"},{"location":"sistemas/android_system.html#aplicaciones-interesantes","text":"KK Easy Launcher(Big Launcher) Files Go : Ayuda a limpiar el sistema. SD Maid : Ayuda a limpiar el sistema.","title":"Aplicaciones interesantes"},{"location":"sistemas/android_system.html#dispositivos","text":"","title":"Dispositivos"},{"location":"sistemas/android_system.html#oneplus-5","text":"","title":"OnePlus 5"},{"location":"sistemas/android_system.html#enlaces_1","text":"C\u00f3mo evitar que OnePlus recopile informaci\u00f3n del usuario sin conocimiento C\u00f3mo instalar Android Oreo 8.0 en el OnePlus 5","title":"Enlaces"},{"location":"sistemas/android_system.html#eliminacion-servicio-oneplus-system-service","text":"Este servicio recopila informaci\u00f3n privada como ha reconocido la propia OnePlus . La forma de desinstalarlo es abriendo una shell por ADB y ejecutando un comando: $ ./adb shell OnePlus5:/ $ pm uninstall -k --user 0 net.oneplus.odm Success Previamente se recomienda hacer un backup de este paquete por si tras desinstalarlo el sistema queda inestable. Esto lo podemos hacer localizando el directorio del apk con App Inspector y lanzando el siguiente comando: $ ./adb pull <ruta>","title":"Eliminaci\u00f3n servicio OnePlus System Service"},{"location":"sistemas/android_system.html#oneplus-one","text":"","title":"OnePlus One"},{"location":"sistemas/android_system.html#enlaces_2","text":"How to Unlock Bootloader, Install Custom Recovery and Root OxygenOS is here [Installation Guide] OnePlus One Update: Manually Install CyanogenMod OS 12 CM12 [TUTORIAL] Mirrors for official Cyanogen roms and OTA updates TWRP for bacon Cyanogem Support : Im\u00e1genes de f\u00e1brica para Oneplus One y el resto de dispositivos que tienen soporte de Cyanogen. Plasma Mobile on Oneplus One","title":"Enlaces"},{"location":"sistemas/android_system.html#modos-arranque","text":"Recovery: V- + Power Fastboot: V+ + Power","title":"Modos arranque"},{"location":"sistemas/android_system.html#flasheo-de-rom","text":"Cuando el m\u00f3vil avise de la disponibilidad de una nueva actualizaci\u00f3n, si est\u00e1 rooteado se producir\u00e1 un error durante el arranque al aplicarla. En ese caso hay que obtener la rom completa (no sirven los parches incrementales) e instalar manualmente desde recovery siguiendo estos pasos ( fuente ): Download the required ROM (full ROM) file for your device from the download section. Now transfer the ROM into your device\u2019s internal storage. Place the file where you can easily locate it. Now reboot into TWRP . To boot into TWRP, power off your phone and press and hold volume down button and power button at the same time. It is highly recommended that you perform a nandroid backup . To backup your ROM, tap on the backup option and select the following elements: System, Data, Boot, Recovery, EFS and swipe the confirmation action to backup. You can skip this step, but if after the installation system doesn\u2019t boot, try this step. After performing the ROM backup, return to the TWRP main menu and tap the Wipe button and select Advanced Wipe . Then wipe Dalvik Cache , System , and Cache . (If after the complete process system does not boot, try wiping the Data as well. But its will remove all your data) Go back to the TWRP main menu again and tap on Install option. Navigate to the ROM file and select it. Swipe the confirmation button to proceed with the installation. The ROM will be installed. Once installed, reboot to system .","title":"Flasheo de ROM"},{"location":"sistemas/android_system.html#reseteo-de-estadisticas-de-bateria-desde-twrp","text":"Cargar la bater\u00eda hasta el 100% Arrancar el TWRP recovery Seguir la ruta: Advanced / File Manager Ir a la ruta: /data/system/ Pulsar sobre el fichero batterystats.bin Pulsar Delete Reiniciar el sistema Descargar la bater\u00eda hasta el 2 - 5 % Volver a cargar la bater\u00eda hasta el 100%","title":"Reseteo de estad\u00edsticas de bater\u00eda desde TWRP"},{"location":"sistemas/android_system.html#instalacion-lineageos","text":"( Fuente ) Si no est\u00e1 ya, instalar el recovery TWRP siguiendo estas instrucciones . Descargar de aqu\u00ed . Opcionalmente bajar las GApps en edici\u00f3n ARM. Copiar los ficheros al directorio /sdcard (en caso de haber perdido la partici\u00f3n de almacenamiento interno por haber instalado UBPorts por ejemplo, copiar los ficheros a un pendrive y pincharlo con un adaptador OTG; el pendrive se ver\u00e1 como /sdcard desde el Recovery). Arrancar en modo Recovery ( V- + Power ). Seleccionar Wipe y despu\u00e9s Advanced Wipe . Seleccionar las particiones Cache , System y Data y despu\u00e9s Swipe to Wipe . Vuelve al men\u00fa principal y selecciona Install . Navega a /sdcard y seleciona el .zip de LineageOS. Sigue las instrucciones en pantalla. (Opcional) Instala el resto de paquetes. Si se van a instalar las GApps, hay que hacerlo antes del primer arranque. Vuelve al men\u00fa principal y selecciona Reboot , y despu\u00e9s System .","title":"Instalaci\u00f3n LineageOS"},{"location":"sistemas/android_system.html#motorola-moto-e-xt1021","text":"","title":"Motorola Moto E (XT1021)"},{"location":"sistemas/android_system.html#enlaces_3","text":"Info Cyanogenmod Downloads Cyanogenmod","title":"Enlaces"},{"location":"sistemas/android_system.html#modos-arranque_1","text":"Recovery: Apagado pulsar Power mientras se pulsa Volume- . Cuando salga el logo de Android tumbado con el tri\u00e1ngulo rojo pulsar Volume+ mientras se mantiene pulsado Power .","title":"Modos arranque"},{"location":"sistemas/android_system.html#geeksphone-one","text":"","title":"Geeksphone One"},{"location":"sistemas/android_system.html#enlaces_4","text":"Reset manual Tutorial ROM y Google Apps","title":"Enlaces"},{"location":"sistemas/android_system.html#roms","text":"SuperAosp 8.6, Rom Basada en Android Open Source Gingerbread CyanogenMod RCMod 3.0.4 RCMod 4.0.0","title":"ROMs"},{"location":"sistemas/android_system.html#configuracion-a-gps","text":"Te\u00f3ricamente, el server es: h-slp.mncXXX.mccYYY.pub.3gppnetwork.org En el puerto: 3425 XXX lo cambias por el MNC de tu operador, e YYY por el MCC. En el caso de Simyo MCC=214 y MNC=19","title":"Configuraci\u00f3n A-GPS"},{"location":"sistemas/android_system.html#nvsbl-p4d-sirius","text":"","title":"NVSBL P4D Sirius"},{"location":"sistemas/android_system.html#enlaces_5","text":"SuperOSR ICS v1.4.6 para P4D Sirius","title":"Enlaces"},{"location":"sistemas/android_system.html#samsung-galaxy-mini2-gt-s6500d","text":"","title":"Samsung Galaxy mini2 (GT-S6500D)"},{"location":"sistemas/android_system.html#enlaces_6","text":"Backup EFS folder without rooting Samsung Galaxy mini2 Blog Root y unroot Galaxy Mini 2 HOW TO CHANGE CSC CODE ON SAMSUNG GALAXY GRAND DUOS I9082/I9082L Liberar Galacy Mini 2 Cambiar CSC (Country Specific Code) StockRoms S6500/D/L/T para flashear por CWM CyanogenMod 10 Thewhisp XDA - Galaxy Mini II Android Development XDA - Galaxy Mini II Q&A, Help & Troubleshooting","title":"Enlaces"},{"location":"sistemas/android_system.html#modos-arranque_2","text":"Recovery: V+ V- Home Power Download: V- Home Power","title":"Modos arranque"},{"location":"sistemas/android_system.html#htc-desire","text":"Los datos originales del HBOOT de un Desire sin manipular eran: BRAVO PVT4 SHIP S-ON HBOOT-0.93.0001 MICROP-051d RADIO-5.11.05.14 Aug 10 2010,17:52:18","title":"HTC Desire"},{"location":"sistemas/android_system.html#modos-de-arranque","text":"Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power.","title":"Modos de arranque"},{"location":"sistemas/android_system.html#enlaces_7","text":"C\u00f3mo rootear HTC Desire Unlock Bootloader (HTC oficial) MIUI-XJ 2.1.6 Gingerbread 2.3.7 para HTC Desire Ice Cream Sandwich con toques de CyanogenMod para HTC Desire Las mejores ROMs para HTC Desire Las mejores Roms para HTC Desire ICS for Desire Chromium AOKP for Bravo - Beta 3! - Stock HBOOT only C\u00f3mo flashear un Recovery en HTC Desire","title":"Enlaces"},{"location":"sistemas/android_system.html#proceso-de-instalacion-de-rom","text":"Hacer S-OFF con revolutionary (ejecutarlo con sudo). Hacer root siguiendo los pasos de El Androide Libre . Instalar el HBOOT Bravo CM7 r2 de AlphaRev . Se hace descargando el fichero de la columna \"PB99IMG\", renombr\u00e1ndolo a \u201cPB99IMG.zip\u201d, copi\u00e1ndolo a la ra\u00edz de la SD y reiniciando en modo HBOOT. Borrar cach\u00e9, Data y Dalvik. Formatear SD desde Recoveery con 1024MB para la ext y 0MB para el swap. Instalar InsertCoin de tipo CM7: http://insertcoin-roms.org/","title":"Proceso de instalaci\u00f3n de ROM"},{"location":"sistemas/android_system.html#samsung-galaxy-note-ii","text":"","title":"Samsung Galaxy Note II"},{"location":"sistemas/android_system.html#enlaces_8","text":"DN4 (Ditto Note 4) ROM from E-team Electron Team (creadores de DN3 y DN4)","title":"Enlaces"},{"location":"sistemas/android_system.html#sony-xperia-t","text":"","title":"Sony Xperia T"},{"location":"sistemas/android_system.html#menu-de-servicio","text":"*#*#7378423#*#*","title":"Men\u00fa de servicio"},{"location":"sistemas/android_system.html#modos-de-reset","text":"Volume Up + POWER (for 10 seconds) -> Battery reset [Device will vibrate once] Volume Up + POWER (for 15 seconds) -> Hard reset [Device will vibrate three times]","title":"Modos de Reset"},{"location":"sistemas/android_system.html#dispositivos-de-almacenamiento-40","text":"/mnt/sdcard: Memoria interna (16GB) /mnt/ext_card: Tarjeta SD","title":"Dispositivos de almacenamiento 4.0"},{"location":"sistemas/android_system.html#dispositivos-de-almacenamiento-41","text":"/mnt/int_storage 10.9G 2.6G 8.3G 4096 /storage/sdcard0 10.9G 2.6G 8.3G 4096 /storage/sdcard1 29.7G 2.7G 27.0G 32768","title":"Dispositivos de almacenamiento 4.1"},{"location":"sistemas/android_system.html#historial-firmware","text":"Fecha Versi\u00f3n 2013-07-02 9.1.A.1.141 2014-04 9.2.A.1.199","title":"Historial firmware"},{"location":"sistemas/android_system.html#enlaces_9","text":"Unlock your boot loader Full rooting guide for xperia t lt30p build 7.0.A.3.195 Xperia Roms Creacion de perfiles completos con Smart Tags + NFC Task Launcker + Tasker \u00bfA cuantos os ha fallado el Xperia T? y soluciones. Servicio T\u00e9cnico Flash tool for Xperia\u2122 devices Lista de Firmwares certificados Xperia T software updates TWRP 2.7 - Sony Xperia T page [4.4 ROM Flash] bypass set_metadata_xxx fails Disable Fast dormancy on sony smarthphones [MOD] Speakerphone whistle fix + volume boost Charging a dead Xperia T","title":"Enlaces"},{"location":"sistemas/android_system.html#roms_1","text":"CyanogenMod FreeXperia Project OmniROM ROM(Unlocked)(KITKAT) Plain AOSP for Xperia T ROM(4.4.4)(T/TX) Carbon Rom KK Unofficial ROM(T)(4.3) Ultimate PureXT v4.5 (**) ROM(4.3)(T)(LB/UB) OMeGa v2.2 (**) DooMKernel {JB}(v12)(20140604) Stock ROMs para el Xperia T: HTCMania - XDA GAPPS(4.4.x) OFFICIAL Up-to-Date PA-GOOGLE APPS (All ROM's) (2014-08-18)","title":"ROMs"},{"location":"sistemas/android_system.html#repuestos","text":"Tapa posterior","title":"Repuestos"},{"location":"sistemas/android_system.html#instrucciones-de-instalacion-de-roms","text":"power off the phone: hold vol+ and plug usb to boot into fastboot (blu led) fastboot flash boot boot.img (from cm10 zip) fastboot reboot enter recovery, on boot led will be violet for 3'', during this period press vol+ flash rom zip flash gapps zip wipe reboot","title":"Instrucciones de instalaci\u00f3n de ROMs"},{"location":"sistemas/android_system.html#desactivar-fast-dormancy-pepephone-mcc-214-mnc-06","text":"In /system/etc/fast-dormancy/fd_custm_conf.txt replace the 0s with your MNC and MCC from your APN setting.","title":"Desactivar fast-dormancy (pepephone MCC= 214, MNC= 06)"},{"location":"sistemas/android_system.html#solucion-al-problema-de-permisos-de-la-memoria-interna-fuente","text":"$ su # cd /mnt/media_rw # busybox chown -R 2800:2800 sdcard0 # chmod 0770 sdcard0","title":"Solucion al problema de permisos de la memoria interna (fuente)"},{"location":"sistemas/android_system.html#sony-xperia-u","text":"","title":"Sony Xperia U"},{"location":"sistemas/android_system.html#menu-de-servicio_1","text":"*#*#7378423#*#*","title":"Men\u00fa de servicio"},{"location":"sistemas/android_system.html#enlaces_10","text":"Unlock your boot loader DESBLOQUEAR COMPLETAMENTE tu Xperia y poder ROOTEARLO\u2605Aplicar MODS\u2605ROMS Sobre el Bootloader","title":"Enlaces"},{"location":"sistemas/android_system.html#roms_2","text":"XDA-Developers Rom List (ROM)(UB)(4.4.4)(W37-S4)(XperiaSTE Team) CyanogenMod 11.0","title":"ROMS"},{"location":"sistemas/android_system.html#rikomagic-mk802-iiis","text":"","title":"Rikomagic MK802-IIIs"},{"location":"sistemas/android_system.html#enlaces_11","text":"PicUntu MK802 Ubuntu Images with optional Droidmote MK802 IIIs en AndroidPC.es ROMS no oficiales funcionando al 100% para meter en los MK802IIIs Foro MK802-IIIS Rikomagic en AndroidPC.es Las mejores tiendas de aplicaciones alternativas a Google Play Configuraciones para mandos y m\u00e9todo para cambiar funciones de las teclas","title":"Enlaces"},{"location":"sistemas/android_system.html#roms_3","text":"NEOTV Rom Finless 1.5 para MK802-IIIs Finless rom 1.8 para MK802-III y UG802 Rom Finless 2.0 con Android 4.2.2 para MX1/MX2 y MK802-IIIS con BT","title":"ROMs"},{"location":"sistemas/android_system.html#software","text":"RetroArch, el Todo-en-1 de emuladores: Playstation, SNES, GBA y muchos m\u00e1s Sopcast Null Input Method","title":"Software"},{"location":"sistemas/android_system.html#tdt","text":"Televisi\u00f3n conectando un USB-TDT en tu AndroidPC con chip RK3066","title":"TDT"},{"location":"sistemas/android_system.html#hardware","text":"Adaptador USB LAN + USB HUB","title":"Hardware"},{"location":"sistemas/android_system.html#flasheo-de-firmware-oficial","text":"Bajar la \u00faltima versi\u00f3n de la p\u00e1gina oficial . En el paquete recien bajado (en el directorio 0121-IIIS8B\\0121-IIIS8B\\RKBatchTool1.5en\\Driver) se encuentran los drivers de modo Flashboot para Windows. Para Windows8 se pueden encontrar aqu\u00ed . Conectar un cable microUSB-USB a la ranura OTG. El otro extremo (USB) lo introducimos en un puerto libre del ordenador mientras a la vez con un palillo o clip desenrollado pulsamos el bot\u00f3n de reset que se adivina por una de las rejillas de ventilaci\u00f3n. Si Windows muestra un bocadillo pidiendo drivers, le damos a elegir la ruta en disco y apuntas al directorio comentado anteriormente que contenga la versi\u00f3n de los drivers que nos interese. Si Windows no reacciona habr\u00e1 que entrar en el Administrador de dispositivos y forzar la actualizaci\u00f3n sobre alguno de los \"Dispositivos desconocidos\" que veamos. En el directorio \"0121-IIIS8B\\0121-IIIS8B\" del paquete con el firmware viene una explicaci\u00f3n detallada (incluye fotos) del proceso de instalaci\u00f3n de los drivers y de la conexi\u00f3n al ordenador por el puerto OTG mientras se pulsa el reset. Una vez instalados los drivers lo mejor ser\u00e1 reiniciar Windows. Volvemos a conectar el MK802 por el puerto OTG mientras mantenemos pulsado el bot\u00f3n de reset como en el paso 3. Abrimos la aplicaci\u00f3n de flasheo (RKBatchTool). Deber\u00edamos ver en azul el cuadrado inferior izquierdo marcado con un 1. Si no es as\u00ed es que el proceso de instalaci\u00f3n de drivers y/o conexi\u00f3n del MK802 al PC no ha ido bien. Seleccionamos el fichero con la imagen de la ROM (extensi\u00f3n .img). Pulsamos el bot\u00f3n \"Upgrade\". Esperamos a que el proceso termine satisfactoriamente. Puede tardar entre 1 y 3 minutos.","title":"Flasheo de Firmware oficial"},{"location":"sistemas/android_system.html#flasheo-rom-finless","text":"Bajar el paquete de aqu\u00ed . Instalar los drivers Windows (ver pasos en instalaci\u00f3n ROM oficial). Descomprimir el paquete con la ROM. Conectar el Rikomagic al PC por USB como comentamos en el otro procedimiento, es decir conectando al puerto OTG y mientras se mantiene presionado el microbot\u00f3n de reset oculto entre las rendijas de ventilaci\u00f3n. Abrir el programa \"ROM Flash Tool.exe\" que hay en el primer nivel de directorios del paquete que hemos descomprimido. En la ventana que aparece se ve una serie de ficheros que se toman del subdirectorio \"FinlessROM\". Dentro de ese directorio hay varias opciones para los ficheros \"parameter\", \"kernel\" y \"boot\". El primero yo lo dejar\u00eda como viene por defecto. Los ficheros \"kernel\" y \"boot\" tienen que ir parejos. Hay dos versiones de cada, una para 720p y otra para 1080p. Recomiendan la 720p y por la potencia del Rikomagic (que va justito para los 1080p) yo tambi\u00e9n creo que no merece la pena el 1080p. Como por defecto viene seleccionado el 1080p, hay que cambiarlo. Para ello hay que hacer click en la fila correspondiente de la \u00faltima columna, la que tiene el r\u00f3tulo \"...\". Antes de empezar a flashear hay que comprobar que el programa se comunica con el Rikomagic. Para ello tiene que indicar abajo del todo en letra grande \"Found RKAndroid...\". Si pone \"No Found RKAndroid rock usb\" es que hay alg\u00fan problema con la conexi\u00f3n o los drivers. Simplemente volver a intentar la conexi\u00f3n (pulsando el botoncito). Le damos al bot\u00f3n \"Erase NAND (IDB)\" y luego cuando ese proceso termine le damos a \"Flash ROM\".","title":"Flasheo ROM Finless"},{"location":"sistemas/android_system.html#zte-skate-orange-montecarlo","text":"","title":"ZTE Skate / Orange Montecarlo"},{"location":"sistemas/android_system.html#enlaces_12","text":"Backup original ROM? How to Install CyanogenMod on ZTE Skate (\"skate\") Tutorial Como instalar ClockWorkMod Recovery,Rootear e instalar roms en ZTE skate/OMC [ROM][ZTE Skate] H3 Holo (Dolby Audio + Linaro optimized kernel + frandom + ROW I/O scheduler)","title":"Enlaces"},{"location":"sistemas/android_system.html#htc-wildfire","text":"","title":"HTC Wildfire"},{"location":"sistemas/android_system.html#modos-de-arranque_1","text":"Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power.","title":"Modos de arranque"},{"location":"sistemas/android_system.html#enlaces_13","text":"Las mejores ROMs para HTC Wildfire S-OFF y rootear para instalar Rom HTC Wildfire: Full Update Guide Nuestras 4 ROM favoritas del 2011 para la HTC Desire Unlock Bootloader (HTC oficial)","title":"Enlaces"},{"location":"sistemas/android_system.html#htc-wildfire-s","text":"","title":"HTC Wildfire S"},{"location":"sistemas/android_system.html#enlaces_14","text":"Unlock Bootloader (HTC oficial) HTC Wildfire S ROMs CM9-marvel-KANG MIUI V4 |CM9|ICS 4.0.3| Nuevo m\u00e9todo para conseguir ROOT en el HTC Wildfire S y algunas ROMs CyanogenMod 9.0.0-RC0-Marvel-Alpha2","title":"Enlaces"},{"location":"sistemas/android_system.html#motorola-milestone-2","text":"","title":"Motorola Milestone 2"},{"location":"sistemas/android_system.html#modos-de-arranque_2","text":"Se arranca en Recovery encendiendo mientras se mantiene pulsada la tecla X del teclado f\u00edsico. Luego, en Froyo hay que pulsar @. En Gingerbread las dos teclas de volumen a la vez. Se arranca en HBOOT encendiendo mientras se mantiene pulsada la tecla de cursor \"Arriba\" del teclado f\u00edsico.","title":"Modos de arranque"},{"location":"sistemas/android_system.html#basebands","text":"Tel\u00e9fono original: EPU93_U_00.60.00 ICS 4.0.4 2012-08-15: EPU93ST2_U_03.0C.01","title":"Basebands"},{"location":"sistemas/android_system.html#kernels","text":"2.3.4: 2.6.32.9-g7d2667a ICS 4.0.4 2012-08-15: 2.6.32.9-g7d2667a Recomendado por Tezet para JB 4.1.1: 2.6.32.9-g5db7937 a17140@zch68lnxdroid63 #1 Fri Sep 16 17:57:00 CST 2011","title":"Kernels"},{"location":"sistemas/android_system.html#enlaces_15","text":"sbf_flash: Utilidad Linux/Mac para flashear una ROM Motorola Android Software Upgrade News Miledropedia SBF Files Milestone2 en XDA-developers Milestone 2 Actualizacion Gingerbread, CyanogenMOD y MIUI Rootear Motorola Milestone 2 CWM: Clockworkmod Recovery - Droid 2 Bootstrapper Hacer backup s\u00f3lo de System Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 9 for Motorola Milestone 2 MOTO Milestone 2 \u00bb ROM MIUI 1.12.9 The Noob Handbook for Bricked Phones Instalaci\u00f3n verificada de CM7 HOW TO install CyanogenMod/MIUI to your phone ROM Argen2Stone 2.7 RE (Based on Ms2Ginger 2.0) How to install Argen2Stone? Titanium Backup, The Easy Way! MIUI 2.5.25 GB 2.3.7 + ICS Multilanguage for Milestone 2! CyanogenMod 10 for Motorola Milestone 2 (Android 4.1.1) !!! CyanogenMod 9 for Motorola Milestone 2 (Android 4.0.4) MIUI v4 2.7.27 Baseband switcher Please come in,if your ms2 can't contect the GSM Kernel downgrade method for EU/BR/AR Gingerbread (only for BL=3) Multipack (alternativa a gapps)","title":"Enlaces"},{"location":"sistemas/android_system.html#instalacion-sbf","text":"Bajar el SBF de aqu\u00ed . Aplicarlo con: sudo sbf_flash rom.sbf Rootear con DoomLoRD . Instalar bootmenu con droid2bootstrap sacado de aqu\u00ed .","title":"Instalaci\u00f3n SBF"},{"location":"sistemas/android_system.html#instalacion-de-rom-jb-411-de-tezet","text":"Hacer el downgrade del kernel flasheando el sbf que hay aqu\u00ed Al reiniciar deber\u00eda entrar en CWM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik Instalar el Kernel CH GB que indica tezet aqu\u00ed Instalar la ROM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik","title":"Instalaci\u00f3n de ROM JB 4.1.1 de tezet"},{"location":"sistemas/android_system.html#sony-ericsson-xperia-x8","text":"","title":"Sony Ericsson Xperia X8"},{"location":"sistemas/android_system.html#enlaces_16","text":"Root Sony Ericsson Xperia X8 With SuperOneClick How To Install Latest xRecovery to Sony Ericsson Xperia X10 CM7.1.0 FXP043 - FreeXperia Project Tutorial para reparar/desbrickear terminales Sony Ericsson How to install GingerXperiaV8 on Sony Ericsson X8 GingerDX para Xperia X8 GingerDX Como instalar un Rom a un Xperia X8 Las mejores ROMs para Sony Ericsson Xperia X8 How to rescue our bricked phone Hard brick warning - read before boot loader unlock SE Tweaker Tool v4.0 (16/2/12) Unlock Bootloader+Kernel Guide Bootloader and kernel guide Desbloquear el Bootloader para Novatos X8 Unlocking the boot loader (Oficial)","title":"Enlaces"},{"location":"sistemas/android_system.html#debrick","text":"Phone-lab Barcelona Movical Santiago de Compostela Liberar.es http://forum.xda-developers.com/showthread.php?t=1292705&page=2 http://forum.xda-developers.com/showthread.php?t=1399381&page=2 http://support.setool.net/showthread.php?3-UPDATES-AND-NEWS/page23 http://forum.xda-developers.com/showthread.php?t=986697&highlight=flash+tool Problem unlocking X8 with new bootloader [Solved] Soluci\u00f3n en el hilo de XDA \"Hard brick warning - read before boot loader unlock\" Xperia testpoint instructions and pictures Unlock Bootloader.Test Point Libera BOOTLOADER POR 15\u20ac OMNIUS O S1TOOL GRATIS","title":"Debrick"},{"location":"sistemas/android_system.html#tecnicas-varias","text":"","title":"T\u00e9cnicas varias"},{"location":"sistemas/android_system.html#conectar-el-mando-de-la-ps3","text":"( Fuente )","title":"Conectar el mando de la PS3"},{"location":"sistemas/android_system.html#requisitos","text":"Nuestro dispositivo Android Deberemos ser Root Dualshock 3 (Sixaxis) Sixaxis Compatibility Checker Sixaxis Controller SixaxisPairTool, que puedes descargarlo desde aqu\u00ed .","title":"Requisitos"},{"location":"sistemas/android_system.html#configuracion","text":"Abrimos el Sixaxis Compatibility Checker Nos aparecer\u00e1 un mensaje y pulsaremos sobre OK Pulsaremos sobre Start y le daremos permisos de Superusuario Si nuestro dispositivo es compatible recibiremos un mensaje dici\u00e9ndonos si nuestro dispositivo es compatible. En caso que de que as\u00ed sea pulsamos sobre Stop y salimos de la aplicaci\u00f3n. En caso de no recibir el mensaje de compatibilidad podemos para aqu\u00ed o seguir y probar suerte ;-) Ahora abrimos Sixaxis Controller App y clicamos sobre start. Le daremos permisos de superusuario al igual que a la otra aplicaci\u00f3n. Entonces obtendremos una direcci\u00f3n de Bluetooth local. Abriremos en nuestro ordenador el Sixaxis Pair Tool y la instalaremos. Despu\u00e9s la abriremos como administrador (bot\u00f3n derecho sobre el icono). Con el programa abierto enchufaremos el Sixaxis en nuestro PC mediante el cable USB. En el Sixaxis Pair Tool veremos una caja vac\u00eda. Ah\u00ed escribiremos la direcci\u00f3n Bluetooth Local que hab\u00edamos obtenido antes. Cuando esto est\u00e9 hecho pulsaremos sobre Update y veremos como la direcci\u00f3n se ha actualizado. Desconectaremos el Sixaxis de nuestro PC. Pulsaremos sobre el bot\u00f3n PS y veremos que ocurre\u2026 Nuestro Sixaxis ya deber\u00eda estar emparejado con nuestro dispositivo Android.","title":"Configuraci\u00f3n"},{"location":"sistemas/android_system.html#adb-en-linux-y-arrancar-settings","text":"Instalar el SDK. Sacar id de fabricante de lsusb (http://bradchow.wordpress.com/2009/02/16/adb-on-windows-and-ubuntu-linux/) y crear rule udev. Reiniciar adb server: adb kill-server sudo adb start-server adb devices Ejecutar: sudo adb shell am start -a android.intent.action.MAIN -n com.android.settings/.Settings","title":"ADB en Linux y arrancar settings"},{"location":"sistemas/android_system.html#montar-system-en-rw","text":"# mount -o remount,rw /system # cd /system/app # mount -o remount,ro /system # reboot recovery","title":"Montar system en rw:"},{"location":"sistemas/android_system.html#desinstalar-aplicaciones-de-sistema-sin-root","text":"Fuente Activa el modo de depuraci\u00f3n en tu Android. Conecta tu Android al ordenador por USB y acepta la clave RSA. Abre una ventana de comandos y escribe adb devices sin las comillas. Tu dispositivo deber\u00eda detectarse apareciendo a modo de c\u00f3digo. Una vez conectado escribe adb shell . Ahora necesitas eliminar una a una las aplicaciones que desees. Utiliza App Inspector para saber el nombre del paquete. Pega este c\u00f3digo en la ventana de comandos: pm uninstall -k -user 0 nombre.del.paquete . Sin las comillas y cambiando \u201cnombre.del.paquete\u201d por el de la aplicaci\u00f3n que deseas (Google Chrome es com.android.chrome , por ejemplo). Acepta el comando y si el ordenador te devuelve un Success es que se ha eliminado de manera satisfactoria.","title":"Desinstalar aplicaciones de sistema sin root"},{"location":"sistemas/appletv.html","text":"AppleTV \u00b6 Enlaces \u00b6 Backup del disco duro TVHeadEnd \u00b6 Trucos \u00b6 Comando para escanear frecuencias: $ sudo apt-get install w-scan $ sudo w_scan -f a -c ES -X Enlaces \u00b6 Instalaci\u00f3n en Ubuntu/Debian","title":"AppleTV"},{"location":"sistemas/appletv.html#appletv","text":"","title":"AppleTV"},{"location":"sistemas/appletv.html#enlaces","text":"Backup del disco duro","title":"Enlaces"},{"location":"sistemas/appletv.html#tvheadend","text":"","title":"TVHeadEnd"},{"location":"sistemas/appletv.html#trucos","text":"Comando para escanear frecuencias: $ sudo apt-get install w-scan $ sudo w_scan -f a -c ES -X","title":"Trucos"},{"location":"sistemas/appletv.html#enlaces_1","text":"Instalaci\u00f3n en Ubuntu/Debian","title":"Enlaces"},{"location":"sistemas/buildroot.html","text":"Buildroot \u00b6 Enlaces \u00b6 Manual Mastering Embedded Linux: 1 . 2 , 3 , 4 y 5 Secciones interesantes del manual \u00b6 Detalle de los subtargets que tiene cada package Uso de Buildroot durante el desarrollo Estructura de directorios Comandos interesantes \u00b6 Comando Efecto make list-defconfigs Muestra una lista de todos los defconfig que hay disponibles en la distribuci\u00f3n Buildroot. make rg350_defconfig BR2_EXTERNAL=board/opendingux Carga un defconfig como la configuraci\u00f3n actual (.config). make menuconfig Configuraci\u00f3n detallada de toda la distribuci\u00f3n Buildroot. make savedefconfig Graba la configuraci\u00f3n actual ( .config ) en el directorio configs . make BR2_DEFCONFIG=configs/raspi_defconfig savedefconfig Graba la configuraci\u00f3n actual ( .config ) en el directorio configs forzando el nombre del fichero. make busybox-menuconfig Configuraci\u00f3n detallada de BusyBox. Debe estar activado previamente en System configuration > Init system . El fichero que se edita es output/build/busybox-<version>/.config make uclibc-menuconfig Configuraci\u00f3n detallada de uClibc. Debe estar seleccionada como librer\u00eda C en Toolchain > C library . El fichero que se edita es output/build/uclibc-<version>/.config make linux-menuconfig Configuraci\u00f3n detallada del kernel Linux. El fichero que se edita es output/build/linux-<version>/.config make linux-savedefconfig Graba la configuraci\u00f3n hecha del kernel Linux. make barebox-menuconfig Configuraci\u00f3n detallada del bootloader Barebox. Debe estar seleccionado como bootloader en Bootloaders . make barebox-savedefconfig Graba la configuraci\u00f3n hecha del bootloader Barebox. make uboot-menuconfig Configuraci\u00f3n detallada del bootloader U-Boot. Debe estar seleccionado como bootloader en Bootloaders . make uboot-savedefconfig Graba la configuraci\u00f3n hecha del bootloader U-Boot. make source Descarga todo lo necesario para luego poder hacer una compilaci\u00f3n offline. make toolchain Compila el toolchain. Aparece en el directorio output/host/bin/ . Conviene a\u00f1adir esta ruta al PATH si queremos usar el toolchain para compilar programas para el dispositivo target que est\u00e9n fuera de Buildroot. make Compila toda la distribuci\u00f3n Buildroot. make V=1 Compila toda la distribuci\u00f3n Buildroot en modo verbose. make help Muestra una lista de todos los targets. make <package> Compila un paquete. make <package>-rebuild Fuerza la recompilaci\u00f3n del paquete. No implica la recreaci\u00f3n de la imagen ni el root filesystem. Para hacerlo ejecutar make . make <package>-reconfigure Fuerza la reconfiguraci\u00f3n y recompilaci\u00f3n del paquete. No implica la recreaci\u00f3n de la imagen ni el root filesystem. Para hacerlo ejecutar make . make <package>-dirclean Borra el directorio output/build/<package> forzando a compilar el paquete en pr\u00f3ximas invocaciones de make . No borra los ficheros copiados al rootfs en output/target . Al forzar la recompilaci\u00f3n se sobreescribir\u00e1n de nuevo, pero si en la nueva compilaci\u00f3n alg\u00fan fichero copiado la primera vez ya no debe ser incluido, permanecer\u00e1, por lo que en esos casos conviene borrar output/target previamente. make clean Borra todo lo compilado anteriormente (incluyendo directorios build, host, staging y target, las im\u00e1genes y el toolchain). Para saber cu\u00e1ndo merece la pena hacer un rebuild, consultar el apartado Understanding when a full rebuild is necessary . make distclean Borra todo lo que no sean fuentes (incluyendo .config). \u00datil cuando se quiere cambiar de placa. Los comandos siguientes se ven afectados por la variable de entorno BR2_GRAPH_OUT que permite ajustar el formato de salida de los gr\u00e1ficos generados a uno de los siguientes valores: ps, pdf, svg, png, gif, jpg. Comando Efecto make graph-depends Genera un gr\u00e1fico del \u00e1rbol de dependencias de toda la distribuci\u00f3n Buildroot. Aparece en output/graphs/graph-depends.pdf . make <package>-graph-depends Genera un gr\u00e1fico del \u00e1rbol de dependencias del paquete. Aparece en output/graph/<pkg>-graph-depends.pdf . make graph-build Genera gr\u00e1ficos de tiempos de compilaci\u00f3n de toda la distribuci\u00f3n Buildroot. Aparecen en output/graphs . make graph-size Genera gr\u00e1ficos de ocupaci\u00f3n en el filesystem de toda la distribuci\u00f3n Buildroot. Aparecen en output/graphs . Aviso Si ccache est\u00e1 activado, make clean o make distclean no borra la cach\u00e9 de compilaci\u00f3n usada por Buildroot. Para borrarla, consultar la secci\u00f3n 8.13.3 de Using ccache in Buildroot . Stamp files \u00b6 Cada vez que se compila un package, se generan unos ficheros ocultos que marcan las distintas fases de la compilaci\u00f3n en el directorio output/build/<package>-<version> . Se pueden borrar para provocar la repetici\u00f3n de esas fases, aunque lo habitual es utilizar los comandos make <package>-rebuild o make <package>-reconfigure (de hecho estos comandos precisamente lo que hacen es eliminar estos ficheros stamp). Por ejemplo estos son los ficheros generados en la compilaci\u00f3n del paquete sdl_image : root@04084426cffe:~/git/buildroot-rg350-old-kernel/output/build/sdl2_image-2.0.2# ls -ltra .stamp* -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_downloaded -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_extracted -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_patched -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_configured -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_built -rw-r--r-- 1 root root 0 Jun 1 18:51 .stamp_staging_installed -rw-r--r-- 1 root root 0 Jun 1 18:51 .stamp_target_installed Par\u00e1metros importantes del menuconfig \u00b6 Target options Target Architecture Target Architecture Variant Target ABI Build options [*] Enable compiler cache ($(HOME)/git/.buildroot-ccache) Compiler cache location (board/<company>/<model>/patches) global patch directories Toolchain Toolchain type (Buildroot toolchain) C library (uClibc-ng) Kernel Headers () : Seleccionar una versi\u00f3n igual o inferior a la del Kernel seleccionado m\u00e1s adelante (lo mejor es que sean iguales para no desaprovechar caracter\u00edsticas del Kernel que se instalar\u00e1) GCC compiler Version () System configuration (<hostname>) System hostname : S\u00f3lo con Root FS skeleton (default target skeleton) (Welcome to <hostname>) System banner : S\u00f3lo con Root FS skeleton (default target skeleton) /dev management : Documentaci\u00f3n Init system : Documentaci\u00f3n (<directorio con los ficheros a sustituir>) Root filesystem overlay directories (<script>) Custom scripts to run before creating filesystem images Kernel [*] Linux Kernel Kernel version () (<defconfig_name>) Defconfig name [ ] Build a Device Tree Blob (DTB) : En RG350 no, en Raspi S\u00ed. Target packages -*- BusyBox Filesystem images [*] ext2/3/4 root filesystem ext2/3/4 variant (ext4) Bootloaders : En RG350 y Raspi no seleccionar ninguno. Monogr\u00e1ficos \u00b6 Compilaci\u00f3n de Buildroot con toolchain de RG350 en un contenedor Docker \u00b6 Ejemplos de compilaci\u00f3n de algunas aplicaciones para RG350 por medio del toolchain en Docker \u00b6","title":"Buildroot"},{"location":"sistemas/buildroot.html#buildroot","text":"","title":"Buildroot"},{"location":"sistemas/buildroot.html#enlaces","text":"Manual Mastering Embedded Linux: 1 . 2 , 3 , 4 y 5","title":"Enlaces"},{"location":"sistemas/buildroot.html#secciones-interesantes-del-manual","text":"Detalle de los subtargets que tiene cada package Uso de Buildroot durante el desarrollo Estructura de directorios","title":"Secciones interesantes del manual"},{"location":"sistemas/buildroot.html#comandos-interesantes","text":"Comando Efecto make list-defconfigs Muestra una lista de todos los defconfig que hay disponibles en la distribuci\u00f3n Buildroot. make rg350_defconfig BR2_EXTERNAL=board/opendingux Carga un defconfig como la configuraci\u00f3n actual (.config). make menuconfig Configuraci\u00f3n detallada de toda la distribuci\u00f3n Buildroot. make savedefconfig Graba la configuraci\u00f3n actual ( .config ) en el directorio configs . make BR2_DEFCONFIG=configs/raspi_defconfig savedefconfig Graba la configuraci\u00f3n actual ( .config ) en el directorio configs forzando el nombre del fichero. make busybox-menuconfig Configuraci\u00f3n detallada de BusyBox. Debe estar activado previamente en System configuration > Init system . El fichero que se edita es output/build/busybox-<version>/.config make uclibc-menuconfig Configuraci\u00f3n detallada de uClibc. Debe estar seleccionada como librer\u00eda C en Toolchain > C library . El fichero que se edita es output/build/uclibc-<version>/.config make linux-menuconfig Configuraci\u00f3n detallada del kernel Linux. El fichero que se edita es output/build/linux-<version>/.config make linux-savedefconfig Graba la configuraci\u00f3n hecha del kernel Linux. make barebox-menuconfig Configuraci\u00f3n detallada del bootloader Barebox. Debe estar seleccionado como bootloader en Bootloaders . make barebox-savedefconfig Graba la configuraci\u00f3n hecha del bootloader Barebox. make uboot-menuconfig Configuraci\u00f3n detallada del bootloader U-Boot. Debe estar seleccionado como bootloader en Bootloaders . make uboot-savedefconfig Graba la configuraci\u00f3n hecha del bootloader U-Boot. make source Descarga todo lo necesario para luego poder hacer una compilaci\u00f3n offline. make toolchain Compila el toolchain. Aparece en el directorio output/host/bin/ . Conviene a\u00f1adir esta ruta al PATH si queremos usar el toolchain para compilar programas para el dispositivo target que est\u00e9n fuera de Buildroot. make Compila toda la distribuci\u00f3n Buildroot. make V=1 Compila toda la distribuci\u00f3n Buildroot en modo verbose. make help Muestra una lista de todos los targets. make <package> Compila un paquete. make <package>-rebuild Fuerza la recompilaci\u00f3n del paquete. No implica la recreaci\u00f3n de la imagen ni el root filesystem. Para hacerlo ejecutar make . make <package>-reconfigure Fuerza la reconfiguraci\u00f3n y recompilaci\u00f3n del paquete. No implica la recreaci\u00f3n de la imagen ni el root filesystem. Para hacerlo ejecutar make . make <package>-dirclean Borra el directorio output/build/<package> forzando a compilar el paquete en pr\u00f3ximas invocaciones de make . No borra los ficheros copiados al rootfs en output/target . Al forzar la recompilaci\u00f3n se sobreescribir\u00e1n de nuevo, pero si en la nueva compilaci\u00f3n alg\u00fan fichero copiado la primera vez ya no debe ser incluido, permanecer\u00e1, por lo que en esos casos conviene borrar output/target previamente. make clean Borra todo lo compilado anteriormente (incluyendo directorios build, host, staging y target, las im\u00e1genes y el toolchain). Para saber cu\u00e1ndo merece la pena hacer un rebuild, consultar el apartado Understanding when a full rebuild is necessary . make distclean Borra todo lo que no sean fuentes (incluyendo .config). \u00datil cuando se quiere cambiar de placa. Los comandos siguientes se ven afectados por la variable de entorno BR2_GRAPH_OUT que permite ajustar el formato de salida de los gr\u00e1ficos generados a uno de los siguientes valores: ps, pdf, svg, png, gif, jpg. Comando Efecto make graph-depends Genera un gr\u00e1fico del \u00e1rbol de dependencias de toda la distribuci\u00f3n Buildroot. Aparece en output/graphs/graph-depends.pdf . make <package>-graph-depends Genera un gr\u00e1fico del \u00e1rbol de dependencias del paquete. Aparece en output/graph/<pkg>-graph-depends.pdf . make graph-build Genera gr\u00e1ficos de tiempos de compilaci\u00f3n de toda la distribuci\u00f3n Buildroot. Aparecen en output/graphs . make graph-size Genera gr\u00e1ficos de ocupaci\u00f3n en el filesystem de toda la distribuci\u00f3n Buildroot. Aparecen en output/graphs . Aviso Si ccache est\u00e1 activado, make clean o make distclean no borra la cach\u00e9 de compilaci\u00f3n usada por Buildroot. Para borrarla, consultar la secci\u00f3n 8.13.3 de Using ccache in Buildroot .","title":"Comandos interesantes"},{"location":"sistemas/buildroot.html#stamp-files","text":"Cada vez que se compila un package, se generan unos ficheros ocultos que marcan las distintas fases de la compilaci\u00f3n en el directorio output/build/<package>-<version> . Se pueden borrar para provocar la repetici\u00f3n de esas fases, aunque lo habitual es utilizar los comandos make <package>-rebuild o make <package>-reconfigure (de hecho estos comandos precisamente lo que hacen es eliminar estos ficheros stamp). Por ejemplo estos son los ficheros generados en la compilaci\u00f3n del paquete sdl_image : root@04084426cffe:~/git/buildroot-rg350-old-kernel/output/build/sdl2_image-2.0.2# ls -ltra .stamp* -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_downloaded -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_extracted -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_patched -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_configured -rw-r--r-- 1 root root 0 Jun 1 18:50 .stamp_built -rw-r--r-- 1 root root 0 Jun 1 18:51 .stamp_staging_installed -rw-r--r-- 1 root root 0 Jun 1 18:51 .stamp_target_installed","title":"Stamp files"},{"location":"sistemas/buildroot.html#parametros-importantes-del-menuconfig","text":"Target options Target Architecture Target Architecture Variant Target ABI Build options [*] Enable compiler cache ($(HOME)/git/.buildroot-ccache) Compiler cache location (board/<company>/<model>/patches) global patch directories Toolchain Toolchain type (Buildroot toolchain) C library (uClibc-ng) Kernel Headers () : Seleccionar una versi\u00f3n igual o inferior a la del Kernel seleccionado m\u00e1s adelante (lo mejor es que sean iguales para no desaprovechar caracter\u00edsticas del Kernel que se instalar\u00e1) GCC compiler Version () System configuration (<hostname>) System hostname : S\u00f3lo con Root FS skeleton (default target skeleton) (Welcome to <hostname>) System banner : S\u00f3lo con Root FS skeleton (default target skeleton) /dev management : Documentaci\u00f3n Init system : Documentaci\u00f3n (<directorio con los ficheros a sustituir>) Root filesystem overlay directories (<script>) Custom scripts to run before creating filesystem images Kernel [*] Linux Kernel Kernel version () (<defconfig_name>) Defconfig name [ ] Build a Device Tree Blob (DTB) : En RG350 no, en Raspi S\u00ed. Target packages -*- BusyBox Filesystem images [*] ext2/3/4 root filesystem ext2/3/4 variant (ext4) Bootloaders : En RG350 y Raspi no seleccionar ninguno.","title":"Par\u00e1metros importantes del menuconfig"},{"location":"sistemas/buildroot.html#monograficos","text":"","title":"Monogr\u00e1ficos"},{"location":"sistemas/buildroot.html#compilacion-de-buildroot-con-toolchain-de-rg350-en-un-contenedor-docker","text":"","title":"Compilaci\u00f3n de Buildroot con toolchain de RG350 en un contenedor Docker"},{"location":"sistemas/buildroot.html#ejemplos-de-compilacion-de-algunas-aplicaciones-para-rg350-por-medio-del-toolchain-en-docker","text":"","title":"Ejemplos de compilaci\u00f3n de algunas aplicaciones para RG350 por medio del toolchain en Docker"},{"location":"sistemas/docker.html","text":"Docker \u00b6 Enlaces \u00b6 Tutorial Instalaci\u00f3n en Raspberry seg\u00fan uGeek Instalaci\u00f3n en Ubuntu de versi\u00f3n Community Edition JDownloader 2: Download the Internet with Docker! Instalaci\u00f3n \u00b6 Instalaci\u00f3n de Docker CE \u00b6 $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg $ echo \"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $( lsb_release -cs ) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null $ sudo apt-get update $ sudo apt-get install docker-ce docker-ce-cli containerd.io $ sudo systemctl enable docker $ sudo systemctl start docker $ sudo groupadd docker $ sudo usermod -aG docker $USER Instalaci\u00f3n de Docker compose (https://docs.docker.com/compose/install/) \u00b6 $ sudo curl -L \"https://github.com/docker/compose/releases/download/1.23.2/docker-compose- $( uname -s ) - $( uname -m ) \" -o /usr/local/bin/docker-compose $ sudo chmod +x /usr/local/bin/docker-compose Instalaci\u00f3n Portainer \u00b6 Cerrar y volver a abrir la consola para que se aplique el \u00faltimo cambio del bloque anterior. Crear un directorio para almacenar la configuraci\u00f3n: $ sudo mkdir /etc/config/portainer Ejecutar el comando: $ docker run -d --name = Portainer --restart = always -p 9000 :9000 -v /etc/config/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer Comandos \u00b6 List Docker CLI commands \u00b6 $ docker $ docker container --help Display Docker version and info \u00b6 $ docker --version $ docker version $ docker info Execute Docker image \u00b6 $ docker run hello-world $ docker run --name mi-couchdb -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con log $ docker run --name mi-couchdb -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n sin log (modo detached) $ docker run --name mi-couchdb --restart = always -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con reinicio si se para o reinicia el servidor List Docker images \u00b6 $ docker image ls List Docker containers (running, all, all in quiet mode) \u00b6 $ docker container ls $ docker container ls --all $ docker container ls -aq Varios \u00b6 $ docker build -t friendlyhello . # Create image using this directory's Dockerfile $ docker run -p 4000 :80 friendlyhello # Run \"friendlyname\" mapping port 4000 to 80 $ docker run -d -p 4000 :80 friendlyhello # Same thing, but in detached mode $ docker container ls # List all running containers $ docker container ls -a # List all containers, even those not running $ docker container logs <hash> # Logs $ docker container logs -f <hash> # Logs en tiempo real $ docker container start <hash> # Arranca un contenedor $ docker container stop <hash> # Gracefully stop the specified container $ docker container kill <hash> # Force shutdown of the specified container $ docker container rm <hash> # Remove specified container from this machine $ docker container rm $( docker container ls -a -q ) # Remove all containers $ docker image ls -a # List all images on this machine $ docker image rm <image id> # Remove specified image from this machine $ docker image rm $( docker image ls -a -q ) # Remove all images from this machine $ docker login # Log in this CLI session using your Docker credentials $ docker tag <image> username/repository:tag # Tag <image> for upload to registry $ docker push username/repository:tag # Upload tagged image to registry $ docker run username/repository:tag # Run image from a registry $ docker exec -it <hash> bash # Shell en un contenedor $ docker update --restart = always <hash> # A\u00f1adir opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado $ docker update --restart = no <hash> # Quitar opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado $ docker port <hash> # Muestra el mapeo de puertos del contenedor $ docker inspect <hash> # Muestra todo el JSON con la configuraci\u00f3n del contenedor Crear volume para persistir informaci\u00f3n \u00b6 Para poder recrear el contenedor sin perder la informaci\u00f3n que haya podido generar, conviene montar los distintos directorios que queremos conservar en vol\u00famenes. Crear volumen: $ docker volume create mi_volumen Posteriormente incluir en el comando de arranque del contenedor -v mi_volumen:ruta_en_contenedor donde ruta_en_contenedor ser\u00e1 la ruta dentro del contenedor que queremos \"delegar\" al volumen. Montar un contenedor Ubuntu para aislar aplicaciones \u00b6 Creaci\u00f3n contenedor: docker run -it --name test-ubuntu ubuntu Arrancar y abrir shell: docker start test-ubuntu docker exec -it test-ubuntu /bin/bash Instalar paquetes m\u00ednimos: apt-get update apt-get install vim sudo Crear contenedor y subirlo a Docker Hub \u00b6 Crear Dockerfile Crear repositorio en Docker hub Iniciar sesi\u00f3n en docker $ docker login Compilar imagen y etiquetarla $ docker build -t eduardofilo/rg350_buildroot . Subir imagen a repositorio $ docker push eduardofilo/rg350_buildroot Im\u00e1genes recomendables \u00b6 phusion/baseimage : Para im\u00e1genes basadas en Ubuntu. Documentaci\u00f3n Passenger-docker . Varias im\u00e1genes para servidores de aplicaci\u00f3n Ruby, Python o NodeJS. Consultar documentaci\u00f3n","title":"Docker"},{"location":"sistemas/docker.html#docker","text":"","title":"Docker"},{"location":"sistemas/docker.html#enlaces","text":"Tutorial Instalaci\u00f3n en Raspberry seg\u00fan uGeek Instalaci\u00f3n en Ubuntu de versi\u00f3n Community Edition JDownloader 2: Download the Internet with Docker!","title":"Enlaces"},{"location":"sistemas/docker.html#instalacion","text":"","title":"Instalaci\u00f3n"},{"location":"sistemas/docker.html#instalacion-de-docker-ce","text":"$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg $ echo \"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $( lsb_release -cs ) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null $ sudo apt-get update $ sudo apt-get install docker-ce docker-ce-cli containerd.io $ sudo systemctl enable docker $ sudo systemctl start docker $ sudo groupadd docker $ sudo usermod -aG docker $USER","title":"Instalaci\u00f3n de Docker CE"},{"location":"sistemas/docker.html#instalacion-de-docker-compose-httpsdocsdockercomcomposeinstall","text":"$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.23.2/docker-compose- $( uname -s ) - $( uname -m ) \" -o /usr/local/bin/docker-compose $ sudo chmod +x /usr/local/bin/docker-compose","title":"Instalaci\u00f3n de Docker compose (https://docs.docker.com/compose/install/)"},{"location":"sistemas/docker.html#instalacion-portainer","text":"Cerrar y volver a abrir la consola para que se aplique el \u00faltimo cambio del bloque anterior. Crear un directorio para almacenar la configuraci\u00f3n: $ sudo mkdir /etc/config/portainer Ejecutar el comando: $ docker run -d --name = Portainer --restart = always -p 9000 :9000 -v /etc/config/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer","title":"Instalaci\u00f3n Portainer"},{"location":"sistemas/docker.html#comandos","text":"","title":"Comandos"},{"location":"sistemas/docker.html#list-docker-cli-commands","text":"$ docker $ docker container --help","title":"List Docker CLI commands"},{"location":"sistemas/docker.html#display-docker-version-and-info","text":"$ docker --version $ docker version $ docker info","title":"Display Docker version and info"},{"location":"sistemas/docker.html#execute-docker-image","text":"$ docker run hello-world $ docker run --name mi-couchdb -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con log $ docker run --name mi-couchdb -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n sin log (modo detached) $ docker run --name mi-couchdb --restart = always -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con reinicio si se para o reinicia el servidor","title":"Execute Docker image"},{"location":"sistemas/docker.html#list-docker-images","text":"$ docker image ls","title":"List Docker images"},{"location":"sistemas/docker.html#list-docker-containers-running-all-all-in-quiet-mode","text":"$ docker container ls $ docker container ls --all $ docker container ls -aq","title":"List Docker containers (running, all, all in quiet mode)"},{"location":"sistemas/docker.html#varios","text":"$ docker build -t friendlyhello . # Create image using this directory's Dockerfile $ docker run -p 4000 :80 friendlyhello # Run \"friendlyname\" mapping port 4000 to 80 $ docker run -d -p 4000 :80 friendlyhello # Same thing, but in detached mode $ docker container ls # List all running containers $ docker container ls -a # List all containers, even those not running $ docker container logs <hash> # Logs $ docker container logs -f <hash> # Logs en tiempo real $ docker container start <hash> # Arranca un contenedor $ docker container stop <hash> # Gracefully stop the specified container $ docker container kill <hash> # Force shutdown of the specified container $ docker container rm <hash> # Remove specified container from this machine $ docker container rm $( docker container ls -a -q ) # Remove all containers $ docker image ls -a # List all images on this machine $ docker image rm <image id> # Remove specified image from this machine $ docker image rm $( docker image ls -a -q ) # Remove all images from this machine $ docker login # Log in this CLI session using your Docker credentials $ docker tag <image> username/repository:tag # Tag <image> for upload to registry $ docker push username/repository:tag # Upload tagged image to registry $ docker run username/repository:tag # Run image from a registry $ docker exec -it <hash> bash # Shell en un contenedor $ docker update --restart = always <hash> # A\u00f1adir opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado $ docker update --restart = no <hash> # Quitar opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado $ docker port <hash> # Muestra el mapeo de puertos del contenedor $ docker inspect <hash> # Muestra todo el JSON con la configuraci\u00f3n del contenedor","title":"Varios"},{"location":"sistemas/docker.html#crear-volume-para-persistir-informacion","text":"Para poder recrear el contenedor sin perder la informaci\u00f3n que haya podido generar, conviene montar los distintos directorios que queremos conservar en vol\u00famenes. Crear volumen: $ docker volume create mi_volumen Posteriormente incluir en el comando de arranque del contenedor -v mi_volumen:ruta_en_contenedor donde ruta_en_contenedor ser\u00e1 la ruta dentro del contenedor que queremos \"delegar\" al volumen.","title":"Crear volume para persistir informaci\u00f3n"},{"location":"sistemas/docker.html#montar-un-contenedor-ubuntu-para-aislar-aplicaciones","text":"Creaci\u00f3n contenedor: docker run -it --name test-ubuntu ubuntu Arrancar y abrir shell: docker start test-ubuntu docker exec -it test-ubuntu /bin/bash Instalar paquetes m\u00ednimos: apt-get update apt-get install vim sudo","title":"Montar un contenedor Ubuntu para aislar aplicaciones"},{"location":"sistemas/docker.html#crear-contenedor-y-subirlo-a-docker-hub","text":"Crear Dockerfile Crear repositorio en Docker hub Iniciar sesi\u00f3n en docker $ docker login Compilar imagen y etiquetarla $ docker build -t eduardofilo/rg350_buildroot . Subir imagen a repositorio $ docker push eduardofilo/rg350_buildroot","title":"Crear contenedor y subirlo a Docker Hub"},{"location":"sistemas/docker.html#imagenes-recomendables","text":"phusion/baseimage : Para im\u00e1genes basadas en Ubuntu. Documentaci\u00f3n Passenger-docker . Varias im\u00e1genes para servidores de aplicaci\u00f3n Ruby, Python o NodeJS. Consultar documentaci\u00f3n","title":"Im\u00e1genes recomendables"},{"location":"sistemas/email.html","text":"e-mail \u00b6 Enlaces \u00b6 Message header analyzer Chequeo de listas negras \u00b6 SPAMHAUS Tren Micro Email Reputation Services MXToolbox multiRBL BlacklistAlert SpamCop WhatIsMyIPAddress","title":"e-mail"},{"location":"sistemas/email.html#e-mail","text":"","title":"e-mail"},{"location":"sistemas/email.html#enlaces","text":"Message header analyzer","title":"Enlaces"},{"location":"sistemas/email.html#chequeo-de-listas-negras","text":"SPAMHAUS Tren Micro Email Reputation Services MXToolbox multiRBL BlacklistAlert SpamCop WhatIsMyIPAddress","title":"Chequeo de listas negras"},{"location":"sistemas/impresoras.html","text":"Impresoras \u00b6 Tipos de controladores impresora \u00b6 PS: El controlador de impresora PS resulta id\u00f3neo para imprimir desde software de Adobe Systems y ofrece un rendimiento \u00f3ptimo para imprimir texto y gr\u00e1ficos de alta calidad. PCL: Los controladores de impresora PCL5c, PCL5e y PCL6 se pueden utilizar con la mayor\u00eda de los tipos de software de aplicaciones empresariales. El controlador de impresora PCL5c es para impresoras en color, mientras que los controladores de impresora PCL5e y PCL6 son para impresora en blanco y negro. PCL6 es una versi\u00f3n mejorada de PCL5r y ofrece mayor calidad de impresi\u00f3n y velocidad. Los controladores PCL5e y PCL6 se proporcionan como controladores est\u00e1ndar con las impresoras en blanco y negro. UFR II: Con el controlador de impresora UFR II, las distintas tareas de procesamiento de datos que habitualmente se ejecutan en la impresora se distribuyen de la forma m\u00e1s conveniente entre el PC host y la impresora para reducir considerablemente el tiempo total de impresi\u00f3n. La carga de trabajo se puede delegar para que coincida con los datos de salida, lo que permite un aumento importante en la velocidad mediante esta optimizaci\u00f3n.","title":"Impresoras"},{"location":"sistemas/impresoras.html#impresoras","text":"","title":"Impresoras"},{"location":"sistemas/impresoras.html#tipos-de-controladores-impresora","text":"PS: El controlador de impresora PS resulta id\u00f3neo para imprimir desde software de Adobe Systems y ofrece un rendimiento \u00f3ptimo para imprimir texto y gr\u00e1ficos de alta calidad. PCL: Los controladores de impresora PCL5c, PCL5e y PCL6 se pueden utilizar con la mayor\u00eda de los tipos de software de aplicaciones empresariales. El controlador de impresora PCL5c es para impresoras en color, mientras que los controladores de impresora PCL5e y PCL6 son para impresora en blanco y negro. PCL6 es una versi\u00f3n mejorada de PCL5r y ofrece mayor calidad de impresi\u00f3n y velocidad. Los controladores PCL5e y PCL6 se proporcionan como controladores est\u00e1ndar con las impresoras en blanco y negro. UFR II: Con el controlador de impresora UFR II, las distintas tareas de procesamiento de datos que habitualmente se ejecutan en la impresora se distribuyen de la forma m\u00e1s conveniente entre el PC host y la impresora para reducir considerablemente el tiempo total de impresi\u00f3n. La carga de trabajo se puede delegar para que coincida con los datos de salida, lo que permite un aumento importante en la velocidad mediante esta optimizaci\u00f3n.","title":"Tipos de controladores impresora"},{"location":"sistemas/iot.html","text":"IOT \u00b6 Enlaces \u00b6 Contiki","title":"IOT"},{"location":"sistemas/iot.html#iot","text":"","title":"IOT"},{"location":"sistemas/iot.html#enlaces","text":"Contiki","title":"Enlaces"},{"location":"sistemas/kodi.html","text":"Kodi/OpenELEC \u00b6 Desactivar un canal de PelisALaCarta \u00b6 Si durante las b\u00fasquedas, alguno de los canales bloquea el progreso, seguramente habr\u00e1 habido alg\u00fan cambio en el c\u00f3digo del sitio que el plugin no es capaz de interpretar. Habr\u00e1 que esperar a que salga una nueva versi\u00f3n del plugin, pero mientras tanto se puede desactivar ese canal acudiendo a la ruta siguiente: 1 /storage/.kodi/addons/plugin.video.pelisalacarta/channels All\u00ed localizamos el archivo .xml correspondiente al canal, lo editamos y ponemos a false la propiedad active . Mapeo de teclas del mando a distancia \u00b6 En ocasiones alguna de las teclas del mando deja de funcionar. A mi me ha ocurrido varias veces con la tecla Back. Con el tiempo se soluciona solo (algunas veces reiniciar ayuda pero no siempre). Desconozco el mecanismo que estropea el mapeo de esta tecla, pero la soluci\u00f3n es modificar el fichero /storage/.kodi/userdata/keymaps/remote.xml . En \u00e9l, dentro de la secci\u00f3n <keymap><global><remote> , cuando deja de funcionar la tecla back me encuentro: <back> RunScript(special://userdata/keymaps/test.py) </back> La soluci\u00f3n es reponer el valor: <back> Back </back> Scrap manual de una serie \u00b6 Si al intentar forzar el contenido de una carpeta con una serie, no nos localiza la serie y \u00e9sta est\u00e1 dada de alta en TheTVDB (me ocurri\u00f3 por ejemplo con Ram\u00f3n y Cajal ), incluir un fichero en la ra\u00edz del directorio de la serie con el nombre tvshow.nfo y el siguiente contenido ( fuente ): http://thetvdb.com/index.php?tab=series&id=290587 Script autoarranque para reproducir una lista \u00b6 Situar en la ruta .kodi/userdata/ un fichero con el nombre autoexec.py . All\u00ed insertar el c\u00f3digo: import xbmc playlist = xbmc . PlayList ( xbmc . PLAYLIST_VIDEO ) playlist . load ( '/storage/.kodi/userdata/playlists/video/Africa.m3u' ) xbmc . Player () . play ( item = playlist ) Emulaci\u00f3n de juegos en Kodi 18 \u00b6 Seguir esta gu\u00eda .","title":"Kodi/OpenELEC"},{"location":"sistemas/kodi.html#kodiopenelec","text":"","title":"Kodi/OpenELEC"},{"location":"sistemas/kodi.html#desactivar-un-canal-de-pelisalacarta","text":"Si durante las b\u00fasquedas, alguno de los canales bloquea el progreso, seguramente habr\u00e1 habido alg\u00fan cambio en el c\u00f3digo del sitio que el plugin no es capaz de interpretar. Habr\u00e1 que esperar a que salga una nueva versi\u00f3n del plugin, pero mientras tanto se puede desactivar ese canal acudiendo a la ruta siguiente: 1 /storage/.kodi/addons/plugin.video.pelisalacarta/channels All\u00ed localizamos el archivo .xml correspondiente al canal, lo editamos y ponemos a false la propiedad active .","title":"Desactivar un canal de PelisALaCarta"},{"location":"sistemas/kodi.html#mapeo-de-teclas-del-mando-a-distancia","text":"En ocasiones alguna de las teclas del mando deja de funcionar. A mi me ha ocurrido varias veces con la tecla Back. Con el tiempo se soluciona solo (algunas veces reiniciar ayuda pero no siempre). Desconozco el mecanismo que estropea el mapeo de esta tecla, pero la soluci\u00f3n es modificar el fichero /storage/.kodi/userdata/keymaps/remote.xml . En \u00e9l, dentro de la secci\u00f3n <keymap><global><remote> , cuando deja de funcionar la tecla back me encuentro: <back> RunScript(special://userdata/keymaps/test.py) </back> La soluci\u00f3n es reponer el valor: <back> Back </back>","title":"Mapeo de teclas del mando a distancia"},{"location":"sistemas/kodi.html#scrap-manual-de-una-serie","text":"Si al intentar forzar el contenido de una carpeta con una serie, no nos localiza la serie y \u00e9sta est\u00e1 dada de alta en TheTVDB (me ocurri\u00f3 por ejemplo con Ram\u00f3n y Cajal ), incluir un fichero en la ra\u00edz del directorio de la serie con el nombre tvshow.nfo y el siguiente contenido ( fuente ): http://thetvdb.com/index.php?tab=series&id=290587","title":"Scrap manual de una serie"},{"location":"sistemas/kodi.html#script-autoarranque-para-reproducir-una-lista","text":"Situar en la ruta .kodi/userdata/ un fichero con el nombre autoexec.py . All\u00ed insertar el c\u00f3digo: import xbmc playlist = xbmc . PlayList ( xbmc . PLAYLIST_VIDEO ) playlist . load ( '/storage/.kodi/userdata/playlists/video/Africa.m3u' ) xbmc . Player () . play ( item = playlist )","title":"Script autoarranque para reproducir una lista"},{"location":"sistemas/kodi.html#emulacion-de-juegos-en-kodi-18","text":"Seguir esta gu\u00eda .","title":"Emulaci\u00f3n de juegos en Kodi 18"},{"location":"sistemas/macosx.html","text":"Mac OS X \u00b6 Comandos \u00fatiles \u00b6 sudo lsof -i -P | grep -i \"listen\" : Puertos abiertos.","title":"Mac OS X"},{"location":"sistemas/macosx.html#mac-os-x","text":"","title":"Mac OS X"},{"location":"sistemas/macosx.html#comandos-utiles","text":"sudo lsof -i -P | grep -i \"listen\" : Puertos abiertos.","title":"Comandos \u00fatiles"},{"location":"sistemas/mysql.html","text":"MySQL \u00b6 Recomendaciones \u00b6 Utilizar siempre el tipo de dato DOUBLE para los reales (pag. 125 de libro \"Desarrollo Web con PHP 6 y MySQL 5.1\") Instalaci\u00f3n \u00b6 Instalamos el paquete mysql-server : $ apt-get install mysql-server En caso de no haberlo configurado durante la instalaci\u00f3n del paquete, ajustar el password de root con el comando: $ mysql -u root mysql> SET PASSWORD FOR 'root' @ 'localhost\" = PASSWORD(' new_password ' ) ; Por defecto s\u00f3lo podemos entrar con el usuario root en local. Para permitir el acceso remoto ejecutar el siguiente comando: $ mysql -u root -p mysql> GRANT ALL PRIVILEGES ON *.* TO 'root' @ '%' IDENTIFIED BY 'password' WITH GRANT OPTION ; mysql> FLUSH PRIVILEGES ; mysql> exit Tambi\u00e9n hay que permitir las conexiones remotas a nivel de red comentando la siguiente linea del fichero de configuraci\u00f3n /etc/mysql/my.cnf : 1 bind-address = 127.0.0.1 Conexi\u00f3n \u00b6 MySQL Client \u00b6 1 mysql -u <usuario> -h <host> -P <puerto> <database> -p $ mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 89 to server version: 4.1.11-Debian_4-log Type 'help;' or '\\h' for help. Type '\\c' to clear the buffer. mysql> Trabajando con Bases de Datos \u00b6 Creaci\u00f3n de BBDD \u00b6 mysql > CREATE DATABASE irontec_db ; Query OK , 1 row affected ( 0 . 03 sec ) Selecci\u00f3n de BBDD \u00b6 Cambiar o elegir base de datos a utilizar: mysql > USE irontec_db ; Database changed Ver la base de datos seleccionada: mysql > SELECT DATABASE (); + ------------+ | database () | + ------------+ | irontec_db | + ------------+ 1 row in set ( 0 . 00 sec ) Eliminaci\u00f3n de BBDD \u00b6 mysql > DROP DATABASE irontec_db ; Query OK , 0 rows affected ( 0 . 60 sec ) Eliminaci\u00f3n de todas las tablas de una BBDD \u00b6 mysqldump -uUSUARIO -pPASSWORD --add-drop-table --no-data BBDD | grep -e '^DROP \\| FOREIGN_KEY_CHECKS' | mysql -uUSUARIO -pPASSWORD BBDD Trabajando con Usuarios / Privilegios \u00b6 Creaci\u00f3n de Usuarios \u00b6 Primero creamos el usuario: mysql > CREATE USER 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY 'irontec_pass' ; Luego otorgamos privilegios: Con todos los privilegios: mysql > GRANT ALL PRIVILEGES ON irontec_db . * TO irontec_user_allpriv @ localhost ; Query OK , 0 rows affected ( 0 . 14 sec ) Con privilegios de solo lectura en registros: mysql > GRANT SELECT ON irontec_db . * TO irontec_user_ro @ localhost ; Query OK , 0 rows affected ( 0 . 02 sec ) Con privilegios de solo inserci\u00f3n o modificaci\u00f3n de registros: mysql > GRANT INSERT , UPDATE on irontec_db . * TO irontec_user_wo @ localhost ; Query OK , 0 rows affected ( 0 . 01 sec ) Selecci\u00f3n de Usuarios \u00b6 Ver el usuario con el que se est\u00e1 trabajando: mysql > SELECT user (); + ------------------------+ | user () | + ------------------------+ | irontec_user @ localhost | + ------------------------+ 1 row in set ( 0 . 00 sec ) Visualizaci\u00f3n de Privilegios de Usuarios \u00b6 mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | | GRANT ALL PRIVILEGES ON ` irontec_db ` . * TO 'irontec_user_allpriv' @ 'localhost' | + ------------------------------------------------------------------------------------------------+ 2 rows in set ( 0 . 00 sec ) Eliminaci\u00f3n de Usuarios \u00b6 mysql > REVOKE ALL PRIVILEGES ON irontec_db . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | + ------------------------------------------------------------------------------------------------+ 1 row in set ( 0 . 00 sec ) mysql > revoke usage on * . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > drop user 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) Trabajando con Tablas \u00b6 Tipos de Tablas y Motores de Almacenamiento \u00b6 Referencia manual MySQL Tipos de Campos \u00b6 Referencia manual MySQL Creaci\u00f3n Tablas \u00b6 MyISAM \u00b6 mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 05 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 20 sec ) InnoDB \u00b6 mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 10 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> index ( empresa ), -> FOREIGN KEY ( empresa ) REFERENCES clientes ( id_cliente ) ON DELETE CASCADE ON UPDATE CASCADE -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 06 sec ) Visualizaci\u00f3n Tablas \u00b6 Tablas contenidas en una Base de Datos: mysql > show tables ; + ------------------+ | Tables_in_prueba | + ------------------+ | clientes | | presupuestos | + ------------------+ 2 rows in set ( 0 . 00 sec ) Estructura de una tabla: mysql > DESC presupuestos ; + ----------------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | + ----------------+-------------+------+-----+---------+----------------+ | id_presupuesto | int ( 8 ) | | PRI | NULL | auto_increment | | empresa | varchar ( 50 ) | | | | | | asunto | varchar ( 60 ) | YES | | NULL | | | precio | float | YES | | 0 | | | fecha | date | YES | | NULL | | + ----------------+-------------+------+-----+---------+----------------+ 5 rows in set ( 0 . 01 sec ) Estado de todas las tablas: mysql > show table status ; Modificaci\u00f3n Tablas \u00b6 Referencia manual MySQL A\u00f1adir un nuevo campo \u00b6 mysql > ALTER TABLE [ database .] tabla ADD campo_nuevo tipo AFTER campo_viejo ; mysql > ALTER TABLE presupuestos ADD adjunto BLOB AFTER fecha ; Query OK , 0 rows affected ( 0 . 06 sec ) Registros : 0 Duplicados : 0 Peligros : 0 Cambiar el nombre de una tabla \u00b6 mysql > ALTER TABLE [ database .] tabla RENAME tabla_nueva ; mysql > ALTER TABLE presupuestos RENAME proyectos ; Query OK , 0 rows affected ( 0 . 03 sec ) Cambiar el tipo de dato de un campo \u00b6 mysql > ALTER TABLE [ database .] tabla CHANGE campo campo nuevo_tipo ; mysql > ALTER TABLE presupuestos CHANGE asunto asunto VARCHAR ( 100 ); Query OK , 0 rows affected ( 0 . 23 sec ) Registros : 0 Duplicados : 0 Peligros : 0 Eliminar un campo existente \u00b6 mysql > ALTER TABLE [ database .] tabla DROP campo ; mysql > ALTER TABLE presupuestos DROP adjunto ; Query OK , 0 rows affected ( 0 . 05 sec ) Registros : 0 Duplicados : 0 Peligros : 0 Eliminaci\u00f3n Tablas \u00b6 mysql > DROP TABLE [ database .] tabla ; mysql > DROP TABLE presupuestos ; Query OK , 0 rows affected ( 0 . 44 sec ) Trabajando con Registros \u00b6 Nota: Si no se indica la Base de Datos a la que una tabla hace referencia, es necesario seleccionar previamente dicha BBDD ( use database ). Consultas \u00b6 mysql > SELECT campo1 , campo2 ,.. FROM [ database .] tabla ; mysql > SELECT * FROM proyectos ; Empty set ( 0 . 10 sec ) Inserci\u00f3n de datos \u00b6 mysql > INSERT INTO [ database .] tabla ( campo1 , campo2 ,..) VALUES ( 'valor_campo1' , 'valor_campo2' ,..); mysql > INSERT INTO presupuestos ( empresa , asunto , precio , fecha ) VALUES ( 'UPV' , 'Formaci\u00f3n GNU/Linux' , '600' , '2005-07-01' ); Query OK , 1 row affected ( 0 . 00 sec ) Modificaci\u00f3n de datos \u00b6 mysql > UPDATE [ database .] tabla SET campo1 = 'valor_nuevo_campo1' , campo2 = 'valor_nuevo_campo2' WHERE condici\u00f3n ; mysql > UPDATE presupuestos SET empresa = 'UPV/EHU' WHERE empresa = 'UPV' ; Eliminaci\u00f3n de datos \u00b6 mysql > DELETE FROM [ database .] tabla WHERE condici\u00f3n ; mysql > DELETE FROM presupuestos WHERE id = '1' ; Query OK , 1 row affected ( 0 . 04 sec ) Trabajando con MySQL \u00b6 Variables de Sistema \u00b6 Ver variables de sistema: mysql > SHOW VARIABLES ; + ---------------------------------+----------------------------------------------------------+ | Variable_name | Value | + ---------------------------------+----------------------------------------------------------+ | back_log | 50 | | basedir | / usr / | | bdb_cache_size | 8388600 | | bdb_home | / var / lib / mysql / | | bdb_log_buffer_size | 32768 | | bdb_logdir | | | bdb_max_lock | 10000 | | bdb_shared_data | OFF | | bdb_tmpdir | / tmp / | | binlog_cache_size | 32768 | .............................................................................................. | version | 4 . 1 . 11 - Debian_4 - log | | version_bdb | Sleepycat Software : Berkeley DB 4 . 1 . 24 : ( April 1 , 2005 ) | | version_comment | Source distribution | | version_compile_machine | i386 | | version_compile_os | pc - linux - gnu | | wait_timeout | 28800 | + ---------------------------------+----------------------------------------------------------+ 196 rows in set ( 0 . 01 sec ) Configuraci\u00f3n \u00b6 /etc/mysql/my.cnf Tablas InnoDB por defecto \u00b6 1 2 [mysqld] default-table-type = innodb Localizaci\u00f3n \u00b6 1 2 [mysqld] language = /usr/share/mysql/spanish UTF8 por defecto \u00b6 Como cabrea tener bases de datos en latin1 y cosas as\u00ed que siempre dan problemas al cambiarlas de servidor o de versi\u00f3n de BDD, o con los programas. Cuando aprendes eso empiezas a configurar todo en UTF8, el apache, el mysql, las locales del sistema, etc... Y cada vez que creas una BDD en mysql este se empe\u00f1a en ponerte \"latin1\" o \"unicode_swedish_ci\" \u00bfSwedish? \u00bfQue es esto? \u00bfUn rollo chovinista? Despu\u00e9s para cada tabla, incomprensiblemente, tambi\u00e9n tienes que especificar que es \"utf8_unicode_ci\". Para evitar esto lo que podemos hacer es configurar mysql a\u00f1adiendo estas l\u00edneas en la secci\u00f3n [mysqld] de /etc/mysql/my.cnf : 1 2 3 4 # UTF8: skip-character-set-client-handshake collation_server=utf8_unicode_ci character_set_server=utf8 Si despu\u00e9s pedimos un status: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mysql > status -------------- mysql Ver 14.12 Distrib 5.0 . 51 a , for debian - linux - gnu ( x86_64 ) using readline 5.2 Connection id : 31 Current database : Current user : root @ localhost SSL : Not in use Current pager : stdout Using outfile : ` Using delimiter : ; Server version : 5.0 . 51 a - 24 + lenny2 ( Debian ) Protocol version : 10 Connection : Localhost via UNIX socket Server characterset : utf8 Db characterset : utf8 Client characterset : utf8 Conn . characterset : utf8 UNIX socket : / var / run / mysqld / mysqld . sock Uptime : 11 min 21 sec Threads : 1 Questions : 86 Slow queries : 0 Opens : 23 Flush tables : 1 Open tables : 17 Queries per second avg : 0.126 -------------- Ahora si, ya podemos dormir tranquilos. Backups \u00b6 mysqldump \u00b6 Programa inclu\u00eddo en el paquete mysql-client Referencia manual MySQL Backup de todas las bases de datos: $ mysqldump --opt -d -h host --all-databases --user = root --password = contrase\u00f1a > backup_irontec_mysql.sql Para cargar un backup hecho previamente: $ mysql -h host --user = root --password = contrase\u00f1a < backup_irontec_mysql.sql Backup de una base de datos ( database ): $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database > backup_irontec_mysql.sql Backup de una lista de tablas ( t1 , t2 ) de una base de datos ( database ): $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database t1 t2 > backup_irontec_mysql.sql Para cargar un backup hecho previamente sobre una base de datos concreta: $ mysql -h host --user = root --password = contrase\u00f1a database < backup_irontec_mysql.sql Si se quita la opci\u00f3n -d en el volcado se incluir\u00e1n los datos que contengan las tablas. Para tablas muy grandes, para evitar los bloqueos que se producen durante su respaldo, a\u00f1adir la opci\u00f3n --single-transaction . BCPs \u00b6 El comando equivalente al bcp de otros gestores es mysqlimport . Aqu\u00ed est\u00e1 la p\u00e1gina de ayuda del comando. Un ejemplo de uso ser\u00eda: $ mysqlimport -h localhost -u adw -p -v -L --delete adw keywords.csv Para que no de errores hay que guardar el fichero en formato UTF8 (revisar con el comando od -c fichero.csv si no hay caracteres extra\u00f1os al principio). Por defecto se espera el car\u00e1cter TAB como separador de columnas y el retorno de carro como separador de registros. El fichero ser\u00e1 un CSV con las columnas en el mismo orden que la tabla en que se desea cargar los datos. El nombre del fichero sin extensi\u00f3n se debe corresponder con el nombre de la tabla. En el ejemplo anterior, la tabla ser\u00eda keywords . Para indicar un separador de campos y registros diferentes se pueden usar las opciones siguientes (ver man): 1 --fields-terminated-by=..., --fields-enclosed-by=..., --fields-optionally-enclosed-by=..., --fields-escaped-by=.. El mismo efecto se consigue con la siguiente query: LOAD DATA LOCAL INFILE 'keywords_clean.csv' INTO TABLE keywords FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' ; Para que el cliente acepte la opci\u00f3n LOCAL debe ser ejecutado con la opci\u00f3n --local-infile , por ejemplo: $ mysql -h localhost --local-infile -u adw -p adw Otras Herramientas \u00b6 mysqladmin \u00b6 Para cambiar la contrase\u00f1a del usuario root: $ mysqladmin -u root password ` <nueva_password> ` Muestra las variables del gestor: $ mysqladmin -u root -p variables Soluci\u00f3n de problemas \u00b6 Tabla de Schr\u00f6dinger \u00b6 La \u00fanica forma de solucionar un caso de tablas de Schr\u00f6dingers fue purgando la instalaci\u00f3n de MySQL y borrando el directorio de datos: $ sudo dpkg --purge mysql-server-5.5 mysql-server-core-5.5 mysql-server $ sudo mv /var/lib/mysql /var/lib/mysql.bak $ sudo apt-get install mysql-server-5.5 mysql-server-core-5.5 mysql-server Otra forma menos agresiva fue encontrada aqu\u00ed y consiste en borrar los ficheros siguientes con el servidor parado y luego arrancarlo: $ sudo service mysql stop $ sudo rm /var/lib/mysql/ibdata1 $ sudo rm /var/lib/mysql/ib_logfile0 $ sudo rm /var/lib/mysql/ib_logfile1 $ sudo service mysql start La \u00faltima vez que sucedi\u00f3 borr\u00e9 todas las tablas. Ver si borrando estos ficheros en cuanto ocurre se restituyen todas las tablas. Informaci\u00f3n en error \u00b6 Para tener m\u00e1s informaci\u00f3n de un error, si es sobre tablas InnoDB, se puede lanzar el siguiente comando: SHOW ENGINE INNODB STATUS ; Concretamente la secci\u00f3n LATEST FOREIGN KEY ERROR muestra m\u00e1s detalle en los errores relacionados con foreign keys.","title":"MySQL"},{"location":"sistemas/mysql.html#mysql","text":"","title":"MySQL"},{"location":"sistemas/mysql.html#recomendaciones","text":"Utilizar siempre el tipo de dato DOUBLE para los reales (pag. 125 de libro \"Desarrollo Web con PHP 6 y MySQL 5.1\")","title":"Recomendaciones"},{"location":"sistemas/mysql.html#instalacion","text":"Instalamos el paquete mysql-server : $ apt-get install mysql-server En caso de no haberlo configurado durante la instalaci\u00f3n del paquete, ajustar el password de root con el comando: $ mysql -u root mysql> SET PASSWORD FOR 'root' @ 'localhost\" = PASSWORD(' new_password ' ) ; Por defecto s\u00f3lo podemos entrar con el usuario root en local. Para permitir el acceso remoto ejecutar el siguiente comando: $ mysql -u root -p mysql> GRANT ALL PRIVILEGES ON *.* TO 'root' @ '%' IDENTIFIED BY 'password' WITH GRANT OPTION ; mysql> FLUSH PRIVILEGES ; mysql> exit Tambi\u00e9n hay que permitir las conexiones remotas a nivel de red comentando la siguiente linea del fichero de configuraci\u00f3n /etc/mysql/my.cnf : 1 bind-address = 127.0.0.1","title":"Instalaci\u00f3n"},{"location":"sistemas/mysql.html#conexion","text":"","title":"Conexi\u00f3n"},{"location":"sistemas/mysql.html#mysql-client","text":"1 mysql -u <usuario> -h <host> -P <puerto> <database> -p $ mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 89 to server version: 4.1.11-Debian_4-log Type 'help;' or '\\h' for help. Type '\\c' to clear the buffer. mysql>","title":"MySQL Client"},{"location":"sistemas/mysql.html#trabajando-con-bases-de-datos","text":"","title":"Trabajando con Bases de Datos"},{"location":"sistemas/mysql.html#creacion-de-bbdd","text":"mysql > CREATE DATABASE irontec_db ; Query OK , 1 row affected ( 0 . 03 sec )","title":"Creaci\u00f3n de BBDD"},{"location":"sistemas/mysql.html#seleccion-de-bbdd","text":"Cambiar o elegir base de datos a utilizar: mysql > USE irontec_db ; Database changed Ver la base de datos seleccionada: mysql > SELECT DATABASE (); + ------------+ | database () | + ------------+ | irontec_db | + ------------+ 1 row in set ( 0 . 00 sec )","title":"Selecci\u00f3n de BBDD"},{"location":"sistemas/mysql.html#eliminacion-de-bbdd","text":"mysql > DROP DATABASE irontec_db ; Query OK , 0 rows affected ( 0 . 60 sec )","title":"Eliminaci\u00f3n de BBDD"},{"location":"sistemas/mysql.html#eliminacion-de-todas-las-tablas-de-una-bbdd","text":"mysqldump -uUSUARIO -pPASSWORD --add-drop-table --no-data BBDD | grep -e '^DROP \\| FOREIGN_KEY_CHECKS' | mysql -uUSUARIO -pPASSWORD BBDD","title":"Eliminaci\u00f3n de todas las tablas de una BBDD"},{"location":"sistemas/mysql.html#trabajando-con-usuarios-privilegios","text":"","title":"Trabajando con Usuarios / Privilegios"},{"location":"sistemas/mysql.html#creacion-de-usuarios","text":"Primero creamos el usuario: mysql > CREATE USER 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY 'irontec_pass' ; Luego otorgamos privilegios: Con todos los privilegios: mysql > GRANT ALL PRIVILEGES ON irontec_db . * TO irontec_user_allpriv @ localhost ; Query OK , 0 rows affected ( 0 . 14 sec ) Con privilegios de solo lectura en registros: mysql > GRANT SELECT ON irontec_db . * TO irontec_user_ro @ localhost ; Query OK , 0 rows affected ( 0 . 02 sec ) Con privilegios de solo inserci\u00f3n o modificaci\u00f3n de registros: mysql > GRANT INSERT , UPDATE on irontec_db . * TO irontec_user_wo @ localhost ; Query OK , 0 rows affected ( 0 . 01 sec )","title":"Creaci\u00f3n de Usuarios"},{"location":"sistemas/mysql.html#seleccion-de-usuarios","text":"Ver el usuario con el que se est\u00e1 trabajando: mysql > SELECT user (); + ------------------------+ | user () | + ------------------------+ | irontec_user @ localhost | + ------------------------+ 1 row in set ( 0 . 00 sec )","title":"Selecci\u00f3n de Usuarios"},{"location":"sistemas/mysql.html#visualizacion-de-privilegios-de-usuarios","text":"mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | | GRANT ALL PRIVILEGES ON ` irontec_db ` . * TO 'irontec_user_allpriv' @ 'localhost' | + ------------------------------------------------------------------------------------------------+ 2 rows in set ( 0 . 00 sec )","title":"Visualizaci\u00f3n de Privilegios de Usuarios"},{"location":"sistemas/mysql.html#eliminacion-de-usuarios","text":"mysql > REVOKE ALL PRIVILEGES ON irontec_db . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | + ------------------------------------------------------------------------------------------------+ 1 row in set ( 0 . 00 sec ) mysql > revoke usage on * . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > drop user 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec )","title":"Eliminaci\u00f3n de Usuarios"},{"location":"sistemas/mysql.html#trabajando-con-tablas","text":"","title":"Trabajando con Tablas"},{"location":"sistemas/mysql.html#tipos-de-tablas-y-motores-de-almacenamiento","text":"Referencia manual MySQL","title":"Tipos de Tablas y Motores de Almacenamiento"},{"location":"sistemas/mysql.html#tipos-de-campos","text":"Referencia manual MySQL","title":"Tipos de Campos"},{"location":"sistemas/mysql.html#creacion-tablas","text":"","title":"Creaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#myisam","text":"mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 05 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 20 sec )","title":"MyISAM"},{"location":"sistemas/mysql.html#innodb","text":"mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 10 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> index ( empresa ), -> FOREIGN KEY ( empresa ) REFERENCES clientes ( id_cliente ) ON DELETE CASCADE ON UPDATE CASCADE -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 06 sec )","title":"InnoDB"},{"location":"sistemas/mysql.html#visualizacion-tablas","text":"Tablas contenidas en una Base de Datos: mysql > show tables ; + ------------------+ | Tables_in_prueba | + ------------------+ | clientes | | presupuestos | + ------------------+ 2 rows in set ( 0 . 00 sec ) Estructura de una tabla: mysql > DESC presupuestos ; + ----------------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | + ----------------+-------------+------+-----+---------+----------------+ | id_presupuesto | int ( 8 ) | | PRI | NULL | auto_increment | | empresa | varchar ( 50 ) | | | | | | asunto | varchar ( 60 ) | YES | | NULL | | | precio | float | YES | | 0 | | | fecha | date | YES | | NULL | | + ----------------+-------------+------+-----+---------+----------------+ 5 rows in set ( 0 . 01 sec ) Estado de todas las tablas: mysql > show table status ;","title":"Visualizaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#modificacion-tablas","text":"Referencia manual MySQL","title":"Modificaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#anadir-un-nuevo-campo","text":"mysql > ALTER TABLE [ database .] tabla ADD campo_nuevo tipo AFTER campo_viejo ; mysql > ALTER TABLE presupuestos ADD adjunto BLOB AFTER fecha ; Query OK , 0 rows affected ( 0 . 06 sec ) Registros : 0 Duplicados : 0 Peligros : 0","title":"A\u00f1adir un nuevo campo"},{"location":"sistemas/mysql.html#cambiar-el-nombre-de-una-tabla","text":"mysql > ALTER TABLE [ database .] tabla RENAME tabla_nueva ; mysql > ALTER TABLE presupuestos RENAME proyectos ; Query OK , 0 rows affected ( 0 . 03 sec )","title":"Cambiar el nombre de una tabla"},{"location":"sistemas/mysql.html#cambiar-el-tipo-de-dato-de-un-campo","text":"mysql > ALTER TABLE [ database .] tabla CHANGE campo campo nuevo_tipo ; mysql > ALTER TABLE presupuestos CHANGE asunto asunto VARCHAR ( 100 ); Query OK , 0 rows affected ( 0 . 23 sec ) Registros : 0 Duplicados : 0 Peligros : 0","title":"Cambiar el tipo de dato de un campo"},{"location":"sistemas/mysql.html#eliminar-un-campo-existente","text":"mysql > ALTER TABLE [ database .] tabla DROP campo ; mysql > ALTER TABLE presupuestos DROP adjunto ; Query OK , 0 rows affected ( 0 . 05 sec ) Registros : 0 Duplicados : 0 Peligros : 0","title":"Eliminar un campo existente"},{"location":"sistemas/mysql.html#eliminacion-tablas","text":"mysql > DROP TABLE [ database .] tabla ; mysql > DROP TABLE presupuestos ; Query OK , 0 rows affected ( 0 . 44 sec )","title":"Eliminaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#trabajando-con-registros","text":"Nota: Si no se indica la Base de Datos a la que una tabla hace referencia, es necesario seleccionar previamente dicha BBDD ( use database ).","title":"Trabajando con Registros"},{"location":"sistemas/mysql.html#consultas","text":"mysql > SELECT campo1 , campo2 ,.. FROM [ database .] tabla ; mysql > SELECT * FROM proyectos ; Empty set ( 0 . 10 sec )","title":"Consultas"},{"location":"sistemas/mysql.html#insercion-de-datos","text":"mysql > INSERT INTO [ database .] tabla ( campo1 , campo2 ,..) VALUES ( 'valor_campo1' , 'valor_campo2' ,..); mysql > INSERT INTO presupuestos ( empresa , asunto , precio , fecha ) VALUES ( 'UPV' , 'Formaci\u00f3n GNU/Linux' , '600' , '2005-07-01' ); Query OK , 1 row affected ( 0 . 00 sec )","title":"Inserci\u00f3n de datos"},{"location":"sistemas/mysql.html#modificacion-de-datos","text":"mysql > UPDATE [ database .] tabla SET campo1 = 'valor_nuevo_campo1' , campo2 = 'valor_nuevo_campo2' WHERE condici\u00f3n ; mysql > UPDATE presupuestos SET empresa = 'UPV/EHU' WHERE empresa = 'UPV' ;","title":"Modificaci\u00f3n de datos"},{"location":"sistemas/mysql.html#eliminacion-de-datos","text":"mysql > DELETE FROM [ database .] tabla WHERE condici\u00f3n ; mysql > DELETE FROM presupuestos WHERE id = '1' ; Query OK , 1 row affected ( 0 . 04 sec )","title":"Eliminaci\u00f3n de datos"},{"location":"sistemas/mysql.html#trabajando-con-mysql","text":"","title":"Trabajando con MySQL"},{"location":"sistemas/mysql.html#variables-de-sistema","text":"Ver variables de sistema: mysql > SHOW VARIABLES ; + ---------------------------------+----------------------------------------------------------+ | Variable_name | Value | + ---------------------------------+----------------------------------------------------------+ | back_log | 50 | | basedir | / usr / | | bdb_cache_size | 8388600 | | bdb_home | / var / lib / mysql / | | bdb_log_buffer_size | 32768 | | bdb_logdir | | | bdb_max_lock | 10000 | | bdb_shared_data | OFF | | bdb_tmpdir | / tmp / | | binlog_cache_size | 32768 | .............................................................................................. | version | 4 . 1 . 11 - Debian_4 - log | | version_bdb | Sleepycat Software : Berkeley DB 4 . 1 . 24 : ( April 1 , 2005 ) | | version_comment | Source distribution | | version_compile_machine | i386 | | version_compile_os | pc - linux - gnu | | wait_timeout | 28800 | + ---------------------------------+----------------------------------------------------------+ 196 rows in set ( 0 . 01 sec )","title":"Variables de Sistema"},{"location":"sistemas/mysql.html#configuracion","text":"/etc/mysql/my.cnf","title":"Configuraci\u00f3n"},{"location":"sistemas/mysql.html#tablas-innodb-por-defecto","text":"1 2 [mysqld] default-table-type = innodb","title":"Tablas InnoDB por defecto"},{"location":"sistemas/mysql.html#localizacion","text":"1 2 [mysqld] language = /usr/share/mysql/spanish","title":"Localizaci\u00f3n"},{"location":"sistemas/mysql.html#utf8-por-defecto","text":"Como cabrea tener bases de datos en latin1 y cosas as\u00ed que siempre dan problemas al cambiarlas de servidor o de versi\u00f3n de BDD, o con los programas. Cuando aprendes eso empiezas a configurar todo en UTF8, el apache, el mysql, las locales del sistema, etc... Y cada vez que creas una BDD en mysql este se empe\u00f1a en ponerte \"latin1\" o \"unicode_swedish_ci\" \u00bfSwedish? \u00bfQue es esto? \u00bfUn rollo chovinista? Despu\u00e9s para cada tabla, incomprensiblemente, tambi\u00e9n tienes que especificar que es \"utf8_unicode_ci\". Para evitar esto lo que podemos hacer es configurar mysql a\u00f1adiendo estas l\u00edneas en la secci\u00f3n [mysqld] de /etc/mysql/my.cnf : 1 2 3 4 # UTF8: skip-character-set-client-handshake collation_server=utf8_unicode_ci character_set_server=utf8 Si despu\u00e9s pedimos un status: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mysql > status -------------- mysql Ver 14.12 Distrib 5.0 . 51 a , for debian - linux - gnu ( x86_64 ) using readline 5.2 Connection id : 31 Current database : Current user : root @ localhost SSL : Not in use Current pager : stdout Using outfile : ` Using delimiter : ; Server version : 5.0 . 51 a - 24 + lenny2 ( Debian ) Protocol version : 10 Connection : Localhost via UNIX socket Server characterset : utf8 Db characterset : utf8 Client characterset : utf8 Conn . characterset : utf8 UNIX socket : / var / run / mysqld / mysqld . sock Uptime : 11 min 21 sec Threads : 1 Questions : 86 Slow queries : 0 Opens : 23 Flush tables : 1 Open tables : 17 Queries per second avg : 0.126 -------------- Ahora si, ya podemos dormir tranquilos.","title":"UTF8 por defecto"},{"location":"sistemas/mysql.html#backups","text":"","title":"Backups"},{"location":"sistemas/mysql.html#mysqldump","text":"Programa inclu\u00eddo en el paquete mysql-client Referencia manual MySQL Backup de todas las bases de datos: $ mysqldump --opt -d -h host --all-databases --user = root --password = contrase\u00f1a > backup_irontec_mysql.sql Para cargar un backup hecho previamente: $ mysql -h host --user = root --password = contrase\u00f1a < backup_irontec_mysql.sql Backup de una base de datos ( database ): $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database > backup_irontec_mysql.sql Backup de una lista de tablas ( t1 , t2 ) de una base de datos ( database ): $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database t1 t2 > backup_irontec_mysql.sql Para cargar un backup hecho previamente sobre una base de datos concreta: $ mysql -h host --user = root --password = contrase\u00f1a database < backup_irontec_mysql.sql Si se quita la opci\u00f3n -d en el volcado se incluir\u00e1n los datos que contengan las tablas. Para tablas muy grandes, para evitar los bloqueos que se producen durante su respaldo, a\u00f1adir la opci\u00f3n --single-transaction .","title":"mysqldump"},{"location":"sistemas/mysql.html#bcps","text":"El comando equivalente al bcp de otros gestores es mysqlimport . Aqu\u00ed est\u00e1 la p\u00e1gina de ayuda del comando. Un ejemplo de uso ser\u00eda: $ mysqlimport -h localhost -u adw -p -v -L --delete adw keywords.csv Para que no de errores hay que guardar el fichero en formato UTF8 (revisar con el comando od -c fichero.csv si no hay caracteres extra\u00f1os al principio). Por defecto se espera el car\u00e1cter TAB como separador de columnas y el retorno de carro como separador de registros. El fichero ser\u00e1 un CSV con las columnas en el mismo orden que la tabla en que se desea cargar los datos. El nombre del fichero sin extensi\u00f3n se debe corresponder con el nombre de la tabla. En el ejemplo anterior, la tabla ser\u00eda keywords . Para indicar un separador de campos y registros diferentes se pueden usar las opciones siguientes (ver man): 1 --fields-terminated-by=..., --fields-enclosed-by=..., --fields-optionally-enclosed-by=..., --fields-escaped-by=.. El mismo efecto se consigue con la siguiente query: LOAD DATA LOCAL INFILE 'keywords_clean.csv' INTO TABLE keywords FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' ; Para que el cliente acepte la opci\u00f3n LOCAL debe ser ejecutado con la opci\u00f3n --local-infile , por ejemplo: $ mysql -h localhost --local-infile -u adw -p adw","title":"BCPs"},{"location":"sistemas/mysql.html#otras-herramientas","text":"","title":"Otras Herramientas"},{"location":"sistemas/mysql.html#mysqladmin","text":"Para cambiar la contrase\u00f1a del usuario root: $ mysqladmin -u root password ` <nueva_password> ` Muestra las variables del gestor: $ mysqladmin -u root -p variables","title":"mysqladmin"},{"location":"sistemas/mysql.html#solucion-de-problemas","text":"","title":"Soluci\u00f3n de problemas"},{"location":"sistemas/mysql.html#tabla-de-schrodinger","text":"La \u00fanica forma de solucionar un caso de tablas de Schr\u00f6dingers fue purgando la instalaci\u00f3n de MySQL y borrando el directorio de datos: $ sudo dpkg --purge mysql-server-5.5 mysql-server-core-5.5 mysql-server $ sudo mv /var/lib/mysql /var/lib/mysql.bak $ sudo apt-get install mysql-server-5.5 mysql-server-core-5.5 mysql-server Otra forma menos agresiva fue encontrada aqu\u00ed y consiste en borrar los ficheros siguientes con el servidor parado y luego arrancarlo: $ sudo service mysql stop $ sudo rm /var/lib/mysql/ibdata1 $ sudo rm /var/lib/mysql/ib_logfile0 $ sudo rm /var/lib/mysql/ib_logfile1 $ sudo service mysql start La \u00faltima vez que sucedi\u00f3 borr\u00e9 todas las tablas. Ver si borrando estos ficheros en cuanto ocurre se restituyen todas las tablas.","title":"Tabla de Schr\u00f6dinger"},{"location":"sistemas/mysql.html#informacion-en-error","text":"Para tener m\u00e1s informaci\u00f3n de un error, si es sobre tablas InnoDB, se puede lanzar el siguiente comando: SHOW ENGINE INNODB STATUS ; Concretamente la secci\u00f3n LATEST FOREIGN KEY ERROR muestra m\u00e1s detalle en los errores relacionados con foreign keys.","title":"Informaci\u00f3n en error"},{"location":"sistemas/nas.html","text":"NAS \u00b6 Enlaces \u00b6 Instalaci\u00f3n de Dokuwiki en ReadyNAS Duo Montaje de los discos del ReadyNAS Duo con Linux","title":"NAS"},{"location":"sistemas/nas.html#nas","text":"","title":"NAS"},{"location":"sistemas/nas.html#enlaces","text":"Instalaci\u00f3n de Dokuwiki en ReadyNAS Duo Montaje de los discos del ReadyNAS Duo con Linux","title":"Enlaces"},{"location":"sistemas/oculus.html","text":"Oculus Quest 2 \u00b6 Enlaces \u00b6 BMBF","title":"Oculus Quest 2"},{"location":"sistemas/oculus.html#oculus-quest-2","text":"","title":"Oculus Quest 2"},{"location":"sistemas/oculus.html#enlaces","text":"BMBF","title":"Enlaces"},{"location":"sistemas/odroid.html","text":"ODROID \u00b6 Enlaces \u00b6 Varios \u00b6 ODROID Magazine ODROID Wiki ODROID.in : Im\u00e1genes de distintos sistemas. Hardware \u00b6 2.5 mm x 0.8 mm USB Charger Universal Cable Main Power Supply Generic PB20517 - Cargador (2 A, Negro) NorthPad Universal 2,5x0,8mm Europa Adaptador AC Cargador 5V 3A HDMI Femenino Enchufe A Micro HDMI Masculino Clavija Adaptador Para HDMI Cables Comandos \u00fatiles \u00b6 Utilidad de configuraci\u00f3n \u00b6 $ sudo odroid-utility.sh Flasheo de imagen Ubuntu oficial \u00b6 $ xzcat ubuntu-14.04.1lts-lubuntu-odroid-c1-20141211.img.xz | sudo dd of = /dev/mmcblk0 bs = 2M Backup de la SD (comprimiendo al vuelo) \u00b6 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | gzip -9 - > odroid_8gb_backup.img.gz $ #Restauraci\u00f3n: $ gunzip odroid_8gb_backup.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M Control de progreso durante flasheo \u00b6 $ sudo pkill -USR1 -n -x dd","title":"ODROID"},{"location":"sistemas/odroid.html#odroid","text":"","title":"ODROID"},{"location":"sistemas/odroid.html#enlaces","text":"","title":"Enlaces"},{"location":"sistemas/odroid.html#varios","text":"ODROID Magazine ODROID Wiki ODROID.in : Im\u00e1genes de distintos sistemas.","title":"Varios"},{"location":"sistemas/odroid.html#hardware","text":"2.5 mm x 0.8 mm USB Charger Universal Cable Main Power Supply Generic PB20517 - Cargador (2 A, Negro) NorthPad Universal 2,5x0,8mm Europa Adaptador AC Cargador 5V 3A HDMI Femenino Enchufe A Micro HDMI Masculino Clavija Adaptador Para HDMI Cables","title":"Hardware"},{"location":"sistemas/odroid.html#comandos-utiles","text":"","title":"Comandos \u00fatiles"},{"location":"sistemas/odroid.html#utilidad-de-configuracion","text":"$ sudo odroid-utility.sh","title":"Utilidad de configuraci\u00f3n"},{"location":"sistemas/odroid.html#flasheo-de-imagen-ubuntu-oficial","text":"$ xzcat ubuntu-14.04.1lts-lubuntu-odroid-c1-20141211.img.xz | sudo dd of = /dev/mmcblk0 bs = 2M","title":"Flasheo de imagen Ubuntu oficial"},{"location":"sistemas/odroid.html#backup-de-la-sd-comprimiendo-al-vuelo","text":"$ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | gzip -9 - > odroid_8gb_backup.img.gz $ #Restauraci\u00f3n: $ gunzip odroid_8gb_backup.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M","title":"Backup de la SD (comprimiendo al vuelo)"},{"location":"sistemas/odroid.html#control-de-progreso-durante-flasheo","text":"$ sudo pkill -USR1 -n -x dd","title":"Control de progreso durante flasheo"},{"location":"sistemas/office.html","text":"Trucos sobre Office \u00b6 Interpolar una tabla de valores \u00b6 Existen varias formas para poder interpolar, una de ellas es utilizando el polinomio de Lagrange, debes buscarlo en un buen libro de m\u00e9todos num\u00e9ricos, incluso puede que encuentres algun programa que interpole en el mismo libro. La soluci\u00f3n mas f\u00e1cil es que utilizar Excel o algun programa de hojas de calculo. Una vez que tengas tu tabla de datos, haz click en el asistente de gr\u00e1ficos y elige el modo de dispersi\u00f3n, despu\u00e9s sigue los pasos. Cuando ya tengas la gr\u00e1fica da un click secundario en la curva que obtuviste y elige \"agregar linea de tendencia\" aqui elige la opci\u00f3n de gr\u00e1fica que quieras ajustar y con esta podr\u00e1s interpolar muy facilmente ya que te da la ecuacion si tu quieres, o puedes interpolar directamente con la curva que obtuviste, de hecho es la manera mas r\u00e1pida de interpolar, a trav\u00e9s de una curva. M\u00f3dulo de compatibilidad de Office 2010 \u00b6 Para poder abrir/editar documentos OpenXML en Office 2007 y anteriores, instalar el m\u00f3dulo de compatibilidad de Office 2007 .","title":"Office"},{"location":"sistemas/office.html#trucos-sobre-office","text":"","title":"Trucos sobre Office"},{"location":"sistemas/office.html#interpolar-una-tabla-de-valores","text":"Existen varias formas para poder interpolar, una de ellas es utilizando el polinomio de Lagrange, debes buscarlo en un buen libro de m\u00e9todos num\u00e9ricos, incluso puede que encuentres algun programa que interpole en el mismo libro. La soluci\u00f3n mas f\u00e1cil es que utilizar Excel o algun programa de hojas de calculo. Una vez que tengas tu tabla de datos, haz click en el asistente de gr\u00e1ficos y elige el modo de dispersi\u00f3n, despu\u00e9s sigue los pasos. Cuando ya tengas la gr\u00e1fica da un click secundario en la curva que obtuviste y elige \"agregar linea de tendencia\" aqui elige la opci\u00f3n de gr\u00e1fica que quieras ajustar y con esta podr\u00e1s interpolar muy facilmente ya que te da la ecuacion si tu quieres, o puedes interpolar directamente con la curva que obtuviste, de hecho es la manera mas r\u00e1pida de interpolar, a trav\u00e9s de una curva.","title":"Interpolar una tabla de valores"},{"location":"sistemas/office.html#modulo-de-compatibilidad-de-office-2010","text":"Para poder abrir/editar documentos OpenXML en Office 2007 y anteriores, instalar el m\u00f3dulo de compatibilidad de Office 2007 .","title":"M\u00f3dulo de compatibilidad de Office 2010"},{"location":"sistemas/raspi.html","text":"Raspberry Pi \u00b6 Enlaces \u00b6 Varios \u00b6 Gesti\u00f3n usuarios IP Est\u00e1tica Instalaci\u00f3n cliente NO-IP Ultimate Raspberry Pi Configuration Guide GitPi: A Private Git Server on Raspberry Pi PiKISS para Raspberry Pi : Un pu\u00f1ado de scripts con men\u00fa para hacerte la vida m\u00e1s f\u00e1cil Java JDK para ARM Cylon.js para Raspberry Pi BerryBoot : Men\u00fa de arranque que permite arrancar varios sistemas instalados en la propia SD, en un disco duro/pendrive externo o en un almacenamiento en red (NAS). An A to Z Beginners Guide to Installing RetroPie on a Raspberry Pi How to install Oracle Java 8 in Debian via repository (JDK8) Adafruit - Learn Raspberry Pi Tutorials - The MagPi MagazineThe MagPi Magazine Read-Only Raspberry Pi Read-only Raspberry PI with Jessie Raspberry Pi Turnkey : Sistema para gestionar la conexi\u00f3n a un punto de acceso cuando no hay posibilidad de conectar por SSH o consola (pantalla+teclado) para modificar el wpa_supplicant . Im\u00e1genes berryboot Im\u00e1genes Raspbian: Normal Lite Distribuciones \u00b6 Binary Emotions Slideshow : Slideshow de im\u00e1genes/v\u00eddeos. Binary Emotions Digital Signage : Slideshow de p\u00e1ginas web. DietPi - Lightweight justice for your SBC Flint OS : Versi\u00f3n de ChromeOS con soporte Android. PiMAME : Raspbian con un frontend para lanzar emuladores. Lakka : Lakka is a lightweight Linux distribution that transforms a credit card sized computer into a full blown emulation console. RetroPie batocera.linux : Para construir Recalbox. Software \u00b6 Pi-Hole : DNS que filtra dominios marcados por la comunidad como \"molestos\" y conseguiremos una navegaci\u00f3n mas limpia y r\u00e1pida. PiVPN Hardware \u00b6 Lista de hardware verificado Lista de compatibilidad de SDs Quick2Wire ESP8266 Serial Esp- 01 : M\u00f3dulo Wifi por 2,25\u20ac recomendado por Fernando . Listado de recursos . Tutorial conexi\u00f3n a Raspi . TK2050 50W+50W Dual Channel Class T HIFI Stereo Audio Amplifier Board DC12V 24V : Recomendado por Fernando Oroquieta. Using a Console Cable Adaptador Wifi (RTL8188CUS) Adaptador TDT Conceptronic C08-096 (RTL2832) Receptor infrarrojos TP4056 DIY 1A Micro USB Li-Ion Battery Charging Board Charger Module : Cargador de bater\u00eda. PowerBoost 500 Charger - Rechargeable 5V Lipo USB Boost : Alimentaci\u00f3n ininterrumpida con bater\u00eda y gestor de carga. UA0053 ADAPTADOR LOGILINK USB 2.0 AUDIO 5.1 : Adaptador audio USB. 2-Channel 3W PAM8403 Audio Amplifier Board : Amplificador audio 3W. Stereo 2.8W Class D Audio Amplifier - I2C Control AGC : Amplificador audio 2.8W con control I2C. Raspberry Pi Pinout : The comprehensive GPIO Pinout guide for the Raspberry Pi. Comandos \u00fatiles \u00b6 Comprobar asignaciones de cliente No-IP \u00b6 Las asignaciones dejan marca en el log syslog : edumoreno@raspi-git /var/log $ sudo fgrep noip syslog Oct 16 12 :18:57 raspi-git noip2 [ 2165 ] : v2.1.9 daemon ended. Oct 16 12 :19:19 raspi-git noip2 [ 2186 ] : v2.1.9 daemon started with NAT enabled Oct 16 12 :19:35 raspi-git noip2 [ 2186 ] : eduardofilo.no-ip.biz set to 88 .19.216.95 Oct 16 12 :53:06 raspi-git noip2 [ 2186 ] : v2.1.9 daemon ended. Oct 16 13 :15:23 raspi-git noip2 [ 2217 ] : v2.1.9 daemon started with NAT enabled Oct 16 13 :15:25 raspi-git noip2 [ 2217 ] : eduardofilo.no-ip.biz was already set to 88 .19.216.95. Utilidad de configuraci\u00f3n \u00b6 $ sudo raspi-config Backup de la SD (comprimiendo al vuelo) \u00b6 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M status = progress | gzip -9 - > Rpi_8gb_backup.img.gz $ #Backup s\u00f3lo de 4GB (si por ejemplo la tarjeta es m\u00e1s grande pero no aprovecha toda la superficie) $ sudo dd if = /dev/mmcblk0 bs = 2M count = 2048 | pv -s 4g | gzip -9 - > Rpi_4gb_backup.img.gz $ #Restauraci\u00f3n (comprimido con gzip): $ gunzip Rpi_8gb_backup.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con xz): $ xzcat Rpi_8gb_backup.img.xz | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con zip): $ unzip -p Rpi_8gb_backup.zip | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con 7z): $ 7z e -so Rpi_8gb_backup.7z | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con rar): $ rar p Rpi_8gb_backup.rar -idq | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync Para hacer un backup parcial los c\u00e1lculos se har\u00edan as\u00ed. Primero sacamos los datos de la estructura de la tarjeta con fdisk : $ sudo fdisk -l /dev/mmcblk0 Disco /dev/mmcblk0: 14 ,4 GiB, 15502147584 bytes, 30277632 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector ( l\u00f3gico/f\u00edsico ) : 512 bytes / 512 bytes Tama\u00f1o de E/S ( m\u00ednimo/\u00f3ptimo ) : 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0xa125a0dc Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo /dev/mmcblk0p1 8192 96663 88472 43 ,2M c W95 FAT32 ( LBA ) /dev/mmcblk0p2 98304 15550463 15452160 7 ,4G 83 Linux Aqu\u00ed vemos que cada sector ocupa 512 bytes. Nos fijamos en el \u00faltimo sector utilizado que en este caso es 15550463. Multiplicando este sector por el tama\u00f1o del sector (y sumando 1 al n\u00famero de sectores por si empiezan a contar en 0) obtendremos el n\u00famero de bytes que tendremos que copiar. Como el block size que vamos a utilizar es 2MB tendremos que truncar por lo alto (tambi\u00e9n servir\u00e1 de medida de seguidad). Los c\u00e1lculos en este caso resultar\u00edan: 1 (15550463 + 1) (sector) * 512 (Byte/sector) / 1024 (Byte/KB) / 1024 (KB/MB) / 2 (MB/bloque) = 3796,5 bloques Por tanto en este caso copiaremos 3797 bloques para cubrir esos 15550464 sectores. Backup de la SD (comprimiendo al vuelo con gzip y diviendo en trozos el fichero resultante) \u00b6 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M status = progress | gzip -9 - | split --bytes = 2G - Rpi_8gb_backup.img.gz.part_ $ #Restauraci\u00f3n: $ cat Rpi_8gb_backup.img.gz.part_* | gunzip -c | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync Backup de la SD (comprimiendo al vuelo con 7z y diviendo en trozos el fichero resultante) \u00b6 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M count = 7350 status = progress | 7z -si -v1400m a Rpi_8gb_backup.img.7z $ #Restauraci\u00f3n: $ 7z e -so Rpi_8gb_backup.7z.001 | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync Backup de la SD (comprimiendo al vuelo con rar y diviendo en trozos el fichero resultante) \u00b6 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M count = 7350 status = progress | rar a -m5 -sRpi_8gb_backup.img -v1400000k Rpi_8gb_backup.img.rar $ #Restauraci\u00f3n: $ rar p Rpi_8gb_backup.img.part1.rar -idq | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync Control de progreso durante flasheo \u00b6 $ sudo pkill -USR1 -n -x dd Como alternativa se puede instalar el comando dcfldd para sustituir a dd , con lo que obtendremos una indicaci\u00f3n del progreso de la copia. dcfldd informa cada 256 bloques escritos por defecto. Para que lo haga con m\u00e1s frecuencia hay que pasarle la opci\u00f3n statusinterval de esta forma: $ #Backup: $ sudo dcfldd statusinterval = 10 if = /dev/mmcblk0 bs = 2M | gzip -9 - > Rpi_8gb_backup.img.gz Redimensionar particiones en imagen \u00b6 Fuente: Apartado Resizing a partition within an image file en Shrinking Raspberry Pi SD Card Images . Obtenemos los par\u00e1metros de las particiones de la imagen: $ sudo fdisk -l Octoprint_niubit.img Disco Octoprint_niubit.img: 7,5 GiB, 8010072064 bytes, 15644672 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes Tama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x15f1d664 Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo Octoprint_niubit.img1 8192 98045 89854 43,9M c W95 FAT32 (LBA) Octoprint_niubit.img2 98304 15644671 15546368 7,4G 83 Linux Localizamos el primer dispositivo loop libre: $ ls -l /dev/loop* Conectamos la partici\u00f3n que queremos redimensionar con el primer dispositivo loop libre aplicando un offset en base al sector de comienzo de la partici\u00f3n que queremos encoger ( 98304 en este ejemplo): $ sudo losetup /dev/loop12 Octoprint_niubit.img -o $((98304*512)) Montamos la partici\u00f3n en el sistema de archivos para hacer limpieza (por ejemplo /var/cache/apt/archives ) y desmontamos al final. Editamos la partici\u00f3n con gparted y la encogemos todo lo posible: $ sudo gparted /dev/loop12 Aunque hemos encogido la partici\u00f3n, en la tabla de asignaci\u00f3n de la imagen continuar\u00e1 con el antiguo tama\u00f1o, motivo por el que gparted muestra un icono de aviso. Lo solucionaremos a continuaci\u00f3n. Tomamos nota del tama\u00f1o final en KB que se ha dado a la partici\u00f3n fij\u00e1ndonos en el comando resize2fs que gparted ha ejecutado mirando los detalles al finalizar la operaci\u00f3n anterior. Por ejemplo: resize2fs -p '/dev/loop12' 3250176K Eliminar el dispositivo loop que hemos estado utilizando: $ sudo losetup -d /dev/loop12 Conectar ahora la imagen completa de nuevo al dispositivo loop: $ sudo losetup /dev/loop12 Octoprint_niubit.img Editamos con fdisk la imagen: sudo fdisk /dev/loop12 Borramos la partici\u00f3n que hemos redimensionado pulsando d 2 . Creamos de nuevo la partici\u00f3n pulsando n p 2 . Nos pedir\u00e1 el primer sector. Introduciremos el obtenido en el paso 1 ( 98304 en este ejemplo). A continuaci\u00f3n nos pedir\u00e1 el tama\u00f1o. Introduciremos el obtenido en el paso 6 con un + delante ( +3250176K en este ejemplo). Si nos pregunta en ese momento \u00bfDesea eliminar la firma? respondemos No . Finalmente pulsamos w para registrar los cambios. Volvemos a obtener los par\u00e1metros de las particiones de la imagen: $ sudo fdisk -l Octoprint_niubit.img Disco Octoprint_niubit.img: 7,5 GiB, 8010072064 bytes, 15644672 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes Tama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x15f1d664 Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo Octoprint_niubit.img1 8192 98045 89854 43,9M c W95 FAT32 (LBA) Octoprint_niubit.img2 98304 6598655 6500352 3,1G 83 Linux Tomamos nota del sector final de la segunda partici\u00f3n ( 6598655 en este ejemplo). Eliminamos el dispositivo loop que hemos utilizado: $ sudo losetup -d /dev/loop12 Truncamos la imagen para retirar la parte que ya no est\u00e1 cubierta por la partici\u00f3n que hemos encogido: $ truncate -s $(((6598655+1)*512)) Octoprint_niubit.img Ya habr\u00edamos terminado, pero todav\u00eda se puede mejorar la imagen rellenando con ceros los sectores no utilizados. Para ello proceder como sigue (sustituyendo el sector de comienzo 98304 del ejemplo por el que corresponda): $ sudo losetup /dev/loop12 Octoprint_niubit.img -o $((98304*512)) $ sudo mkdir -p /mnt/imageroot $ sudo mount /dev/loop12 /mnt/imageroot $ sudo dd if=/dev/zero of=/mnt/imageroot/zero.txt status=progress $ sudo rm /mnt/imageroot/zero.txt $ sudo umount /mnt/imageroot $ sudo rmdir /mnt/imageroot $ sudo losetup -d /dev/loop12 Ya tenemos lista la imagen para poderla flashear sobre tarjetas. Si la comprimimos con gzip se comprimir\u00e1 mejor si hemos realizado el paso final. Existen estas dos utilidades para automatizar este proceso: PiShrink cotswoldjam Gesti\u00f3n de la SWAP \u00b6 Para redimensionar la Swap predeterminada (fichero de 100MB en /var/swap ): $ sudo nano /etc/dphys-swapfile $ sudo dphys-swapfile setup $ sudo dphys-swapfile swapon Para consultar el estado de la swap: $ swapon -s Para dejar de usar swap: $ sudo swapoff -a Para activar la swap tal y como est\u00e1 definida en ''/etc/fstab'': $ sudo swapon -a Para activar swap con un fichero en concreto: $ sudo swapon /var/swap Escaneo de Raspberry Pi's en red \u00b6 $ arp -a | grep b8:27:eb $ sudo nmap -PR -sP 192 .168.1.0/24 | fgrep -B 2 \"Raspberry\" Pulsador encendido/apagado \u00b6 Existe una configuraci\u00f3n accesible mediante un Device Tree overlay que permite arrancar y parar el sistema controladamente con un pulsador entre los pines #5 (GPIO03 o SCL) y GND. Para que funcione hay que a\u00f1adir lo siguiente al fichero /boot/config.txt : dtoverlay=gpio-shutdown Aqu\u00ed se documenta en profundidad. Pi-top \u00b6 Enlaces \u00b6 pi-top-install : Scripts para controlar el hardware del Pi-top (teclas brillo pantalla, power off, etc.) sobre Raspbian oficial. pi-top-battery-status : Muestra el estado de la bater\u00eda del Pi-top en Raspbian. Pi-Top battery firmware / battery issues Art\u00edculos interesantes de TheMagPi \u00b6 Librer\u00eda Python para controlar un puerto USB: P\u00e1gina 14 de #3 de TheMagPi Buffer de dispositivos controlados con el GPIO de RPi: P\u00e1gina 19 de #4 de TheMagPi Librer\u00eda wiringPi: Sirve para comandar y leer el GPIO desde bash. P\u00e1gina 14 de #6 de TheMagPi Comunicaci\u00f3n entre RaspPi y Arduino: P\u00e1gina 4 de #7 de TheMagPi Uso de interrupciones para chequear GPIO sin bucles: P\u00e1gina 12 de #7 de TheMagPi Librer\u00eda Nanpy para comunicar RaspPi y Arduino por USB: P\u00e1gina 10 de #8 de TheMagPi WebIOPi - Framework REST para controlar el GPIO: P\u00e1gina 8 de #9 de TheMagPi Ajustes primer arranque \u00b6 Configuraci\u00f3n headless \u00b6 Activaci\u00f3n de SSH \u00b6 Crear un fichero vac\u00edo con nombre ssh en partici\u00f3n boot. Conexi\u00f3n a punto de acceso Wifi \u00b6 Crear un fichero con nombre wpa_supplicant.conf en partici\u00f3n boot con el siguiente contenido: country=ES ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=\"<el_ssid>\" psk=\"<el_pwd>\" key_mgmt=WPA-PSK } IP est\u00e1tica \u00b6 Primero averiguamos el nombre del interfaz al que queremos poner la IP est\u00e1tica consultando ifconfig . Luego editamos /etc/dhcpcd.conf y al final a\u00f1adimos: interface <nombre_interfaz> static ip_address=<ip>/24 static routers=<gateway> static domain_name_servers=<dns separadas por espacios> raspi-config \u00b6 Network Options > Hostname Boot Options > Wait for Network at Boot Localisation Options > Change Locale Localisation Options > Change Timezone Ajustes usuario \u00b6 Crear una nueva cuenta: $ sudo adduser usuario $ sudo adduser usuario adm $ sudo adduser usuario dialout $ sudo adduser usuario cdrom $ sudo adduser usuario sudo $ sudo adduser usuario audio $ sudo adduser usuario video $ sudo adduser usuario plugdev $ sudo adduser usuario games $ sudo adduser usuario users $ sudo adduser usuario input $ sudo adduser usuario netdev $ sudo adduser usuario gpio $ sudo adduser usuario i2c $ sudo adduser usuario spi Cambiar UID de usuario edumoreno para que coincida con el del NAS: sudo usermod -u 1002 usuario Borrar la cuenta pi desde la nueva: $ sudo deluser -remove-home pi Copia de clave p\u00fablica para SSH autom\u00e1tico (desde m\u00e1quina host): $ ssh-copy-id -i ~/.ssh/id_rsa.pub usuario@IP_RASPBERRY Instalaci\u00f3n de paquetes \u00b6 Instalar paquetes: fail2ban nfs-common transmission-daemon amule-daemon Desinstalar paquete wolfram-engine que ocupa mucho y no se suele usar (en la versi\u00f3n lite no viene). Montaje NAS \u00b6 A\u00f1adir lo siguiente a /etc/fstab : 1 192.168.1.200:/c/carpeta_compartida /home/usuario/carpeta_compartida nfs4 defaults,user,exec 0 0 SSH \u00b6 Editar el fichero /etc/ssh/sshd_config y modificar/a\u00f1adir las siguientes l\u00edneas ( fuente ): PermitRootLogin no MaxAuthTries 3 MaxStartups 5 AllowUsers edumoreno Medidas de protecci\u00f3n: Top 20 OpenSSH Server Best Security Practices Protege tu servidor casero de ataques externos Protegiendo el servidor SSH con fail2ban Pasos para asegurar tu Raspberry Pi frente a posibles amenazas Raspad \u00b6 Enlaces \u00b6 SunFounder Wiki Replace HDMI cable tutorial Replace power USB cable tutorial The touch screen does not work properly FAQ Install the fan for Raspad : STL's alternativos . Instalaci\u00f3n de Android Install Android on his Raspberry Pi Calibraci\u00f3n de pantalla https://www.facebook.com/groups/192987478051513/permalink/233950007288593/ Clic derecho Raspberry Ri Touch Screen setup right click with twofing \u2013 Raspbian Jessie Configuraci\u00f3n \u00b6 Sistema base \u00b6 Raspbian Digitalizador de pantalla \u00b6 El equipo reci\u00e9n instalado lleva un firmware bastante deficiente en el digitalizador t\u00e1ctil de la pantalla. Hay que actualizarlo siguiendo los pasos del siguiente art\u00edculo del wiki de SunFounder: The touch screen does not work properly FAQ Teclado en pantalla \u00b6 Instalar el paquete: matchbox-keyboard Clic secundario \u00b6 Para conseguir emular el clic derecho del rat\u00f3n procedemos como sigue (fuentes: 1 y 2 ): Instalamos los siguientes paquetes: $ sudo apt-get update && sudo apt-get install build-essential libx11-dev libxtst-dev libxi-dev x11proto-randr-dev libxrandr-dev xserver-xorg-input-evdev xinput-calibrator Descargamos el c\u00f3digo de twofing y lo extraemos: $ wget http://plippo.de/dwl/twofing/twofing-0.1.2.tar.gz $ tar -xvzf twofing-0.1.2.tar.gz $ cd twofing-0.1.2 Compilamos: $ make && sudo make install Creamos el fichero /etc/udev/rules.d/70-touchscreen-ilitek.rules con el siguiente contenido: SUBSYSTEMS==\"usb\",ACTION==\"add\",KERNEL==\"event*\",ATTRS{idVendor}==\"222a\",ATTRS{idProduct}==\"0001\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" KERNEL==\"event*\",ATTRS{name}==\"ILITEK Multi-Touch-V3000\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" Creamos el fichero /usr/share/X11/xorg.conf.d/90-touchinput.conf con el siguiente contenido: Section \"InputClass\" Identifier \"calibration\" Driver \"evdev\" MatchProduct \"ILITEK ILITEK-TP\" MatchDevicePath \"/dev/input/event*\" Option \"Emulate3Buttons\" \"True\" Option \"EmulateThirdButton\" \"1\" Option \"EmulateThirdButtonTimeout\" \"750\" Option \"EmulateThirdButtonMoveThreshold\" \"30\" EndSection Creamos el fichero /etc/udev/rules.d/ 99-input-tagging.rules con el siguiente contenido: ACTION==\"add\", KERNEL==\"event*\", SUBSYSTEM==\"input\", TAG+=\"systemd\", , ENV{SYSTEMD_ALIAS}+=\"/sys/subsystem/input/devices/$env{ID_SERIAL}\" Creamos el fichero ~/.config/autostart/twofing.desktop con el siguiente contenido: [Desktop Entry] Type=Application Name=Twofing Exec=twofing StartupNotify=false Raspi Camera \u00b6 La documentaci\u00f3n de la librer\u00eda picamera en Python est\u00e1 aqu\u00ed . Concretamente las recetas para hacer la foto est\u00e1n aqu\u00ed . Por ejemplo, para hacer fotos que luego vayan a formar parte de un timelapse: import time import picamera import datetime as dt with picamera . PiCamera () as camera : camera . resolution = ( 1280 , 720 ) camera . framerate = 30 # calentamiento/enfoque de la camara time . sleep ( 2 ) # fijamos valores para que salga mejor el timelapse camera . shutter_speed = camera . exposure_speed camera . exposure_mode = 'off' g = camera . awb_gains camera . awb_mode = 'off' camera . awb_gains = g camera . annotate_background = picamera . Color ( 'black' ) camera . annotate_text = dt . datetime . now () . strftime ( '%Y-%m- %d %H:%M:%S' ) filename = time . strftime ( \"%Y-%m- %d _%H%M.jpg\" ) camera . capture ( filename ) Activar consola en puerto serie \u00b6 Las Raspberry Pi Zero W, Pi 3 y Pi 4 traen un adaptador Bluetooth que en Raspbian est\u00e1 conectado precisamente a los pines #08 y #10 donde tradicionalmente se encontraba el puerto serie. En este documento se explican los cambios en estas versiones. En este otro art\u00edculo se dan opciones para modificar este comportamiento. Lo que sigue es una versi\u00f3n personal. Para liberar esta conexi\u00f3n debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: 1 2 Would you like a login shell to be accessible over serial? -> Yes Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos conectar a la consola a trav\u00e9s del puerto serie. Crankshaft \u00b6 Actualizaci\u00f3n distribuci\u00f3n \u00b6 Descargar la \u00faltima versi\u00f3n de la p\u00e1gina de descarga . Copiar el zip o mejor el contenido (.img y .md5) a la ra\u00edz de un pendrive con formato FAT32. Conectar el pendrive a la Raspberry antes de arrancar. El proceso de actualizaci\u00f3n (descrito en esta p\u00e1gina ) es lento y requiere varios reinicios. Esperar pues hasta terminar de ver el sistema correctamente arrancado. Instalar el script del Mausberry Car Switch: Copiar el siguiente script en la ruta /etc/switch.sh : #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done Darle permisos de ejecuci\u00f3n. A\u00f1adir lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: /etc/switch.sh &","title":"Raspberry Pi"},{"location":"sistemas/raspi.html#raspberry-pi","text":"","title":"Raspberry Pi"},{"location":"sistemas/raspi.html#enlaces","text":"","title":"Enlaces"},{"location":"sistemas/raspi.html#varios","text":"Gesti\u00f3n usuarios IP Est\u00e1tica Instalaci\u00f3n cliente NO-IP Ultimate Raspberry Pi Configuration Guide GitPi: A Private Git Server on Raspberry Pi PiKISS para Raspberry Pi : Un pu\u00f1ado de scripts con men\u00fa para hacerte la vida m\u00e1s f\u00e1cil Java JDK para ARM Cylon.js para Raspberry Pi BerryBoot : Men\u00fa de arranque que permite arrancar varios sistemas instalados en la propia SD, en un disco duro/pendrive externo o en un almacenamiento en red (NAS). An A to Z Beginners Guide to Installing RetroPie on a Raspberry Pi How to install Oracle Java 8 in Debian via repository (JDK8) Adafruit - Learn Raspberry Pi Tutorials - The MagPi MagazineThe MagPi Magazine Read-Only Raspberry Pi Read-only Raspberry PI with Jessie Raspberry Pi Turnkey : Sistema para gestionar la conexi\u00f3n a un punto de acceso cuando no hay posibilidad de conectar por SSH o consola (pantalla+teclado) para modificar el wpa_supplicant . Im\u00e1genes berryboot Im\u00e1genes Raspbian: Normal Lite","title":"Varios"},{"location":"sistemas/raspi.html#distribuciones","text":"Binary Emotions Slideshow : Slideshow de im\u00e1genes/v\u00eddeos. Binary Emotions Digital Signage : Slideshow de p\u00e1ginas web. DietPi - Lightweight justice for your SBC Flint OS : Versi\u00f3n de ChromeOS con soporte Android. PiMAME : Raspbian con un frontend para lanzar emuladores. Lakka : Lakka is a lightweight Linux distribution that transforms a credit card sized computer into a full blown emulation console. RetroPie batocera.linux : Para construir Recalbox.","title":"Distribuciones"},{"location":"sistemas/raspi.html#software","text":"Pi-Hole : DNS que filtra dominios marcados por la comunidad como \"molestos\" y conseguiremos una navegaci\u00f3n mas limpia y r\u00e1pida. PiVPN","title":"Software"},{"location":"sistemas/raspi.html#hardware","text":"Lista de hardware verificado Lista de compatibilidad de SDs Quick2Wire ESP8266 Serial Esp- 01 : M\u00f3dulo Wifi por 2,25\u20ac recomendado por Fernando . Listado de recursos . Tutorial conexi\u00f3n a Raspi . TK2050 50W+50W Dual Channel Class T HIFI Stereo Audio Amplifier Board DC12V 24V : Recomendado por Fernando Oroquieta. Using a Console Cable Adaptador Wifi (RTL8188CUS) Adaptador TDT Conceptronic C08-096 (RTL2832) Receptor infrarrojos TP4056 DIY 1A Micro USB Li-Ion Battery Charging Board Charger Module : Cargador de bater\u00eda. PowerBoost 500 Charger - Rechargeable 5V Lipo USB Boost : Alimentaci\u00f3n ininterrumpida con bater\u00eda y gestor de carga. UA0053 ADAPTADOR LOGILINK USB 2.0 AUDIO 5.1 : Adaptador audio USB. 2-Channel 3W PAM8403 Audio Amplifier Board : Amplificador audio 3W. Stereo 2.8W Class D Audio Amplifier - I2C Control AGC : Amplificador audio 2.8W con control I2C. Raspberry Pi Pinout : The comprehensive GPIO Pinout guide for the Raspberry Pi.","title":"Hardware"},{"location":"sistemas/raspi.html#comandos-utiles","text":"","title":"Comandos \u00fatiles"},{"location":"sistemas/raspi.html#comprobar-asignaciones-de-cliente-no-ip","text":"Las asignaciones dejan marca en el log syslog : edumoreno@raspi-git /var/log $ sudo fgrep noip syslog Oct 16 12 :18:57 raspi-git noip2 [ 2165 ] : v2.1.9 daemon ended. Oct 16 12 :19:19 raspi-git noip2 [ 2186 ] : v2.1.9 daemon started with NAT enabled Oct 16 12 :19:35 raspi-git noip2 [ 2186 ] : eduardofilo.no-ip.biz set to 88 .19.216.95 Oct 16 12 :53:06 raspi-git noip2 [ 2186 ] : v2.1.9 daemon ended. Oct 16 13 :15:23 raspi-git noip2 [ 2217 ] : v2.1.9 daemon started with NAT enabled Oct 16 13 :15:25 raspi-git noip2 [ 2217 ] : eduardofilo.no-ip.biz was already set to 88 .19.216.95.","title":"Comprobar asignaciones de cliente No-IP"},{"location":"sistemas/raspi.html#utilidad-de-configuracion","text":"$ sudo raspi-config","title":"Utilidad de configuraci\u00f3n"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo","text":"$ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M status = progress | gzip -9 - > Rpi_8gb_backup.img.gz $ #Backup s\u00f3lo de 4GB (si por ejemplo la tarjeta es m\u00e1s grande pero no aprovecha toda la superficie) $ sudo dd if = /dev/mmcblk0 bs = 2M count = 2048 | pv -s 4g | gzip -9 - > Rpi_4gb_backup.img.gz $ #Restauraci\u00f3n (comprimido con gzip): $ gunzip Rpi_8gb_backup.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con xz): $ xzcat Rpi_8gb_backup.img.xz | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con zip): $ unzip -p Rpi_8gb_backup.zip | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con 7z): $ 7z e -so Rpi_8gb_backup.7z | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync $ #Restauraci\u00f3n (comprimido con rar): $ rar p Rpi_8gb_backup.rar -idq | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync Para hacer un backup parcial los c\u00e1lculos se har\u00edan as\u00ed. Primero sacamos los datos de la estructura de la tarjeta con fdisk : $ sudo fdisk -l /dev/mmcblk0 Disco /dev/mmcblk0: 14 ,4 GiB, 15502147584 bytes, 30277632 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector ( l\u00f3gico/f\u00edsico ) : 512 bytes / 512 bytes Tama\u00f1o de E/S ( m\u00ednimo/\u00f3ptimo ) : 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0xa125a0dc Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo /dev/mmcblk0p1 8192 96663 88472 43 ,2M c W95 FAT32 ( LBA ) /dev/mmcblk0p2 98304 15550463 15452160 7 ,4G 83 Linux Aqu\u00ed vemos que cada sector ocupa 512 bytes. Nos fijamos en el \u00faltimo sector utilizado que en este caso es 15550463. Multiplicando este sector por el tama\u00f1o del sector (y sumando 1 al n\u00famero de sectores por si empiezan a contar en 0) obtendremos el n\u00famero de bytes que tendremos que copiar. Como el block size que vamos a utilizar es 2MB tendremos que truncar por lo alto (tambi\u00e9n servir\u00e1 de medida de seguidad). Los c\u00e1lculos en este caso resultar\u00edan: 1 (15550463 + 1) (sector) * 512 (Byte/sector) / 1024 (Byte/KB) / 1024 (KB/MB) / 2 (MB/bloque) = 3796,5 bloques Por tanto en este caso copiaremos 3797 bloques para cubrir esos 15550464 sectores.","title":"Backup de la SD (comprimiendo al vuelo)"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-con-gzip-y-diviendo-en-trozos-el-fichero-resultante","text":"$ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M status = progress | gzip -9 - | split --bytes = 2G - Rpi_8gb_backup.img.gz.part_ $ #Restauraci\u00f3n: $ cat Rpi_8gb_backup.img.gz.part_* | gunzip -c | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync","title":"Backup de la SD (comprimiendo al vuelo con gzip y diviendo en trozos el fichero resultante)"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-con-7z-y-diviendo-en-trozos-el-fichero-resultante","text":"$ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M count = 7350 status = progress | 7z -si -v1400m a Rpi_8gb_backup.img.7z $ #Restauraci\u00f3n: $ 7z e -so Rpi_8gb_backup.7z.001 | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync","title":"Backup de la SD (comprimiendo al vuelo con 7z y diviendo en trozos el fichero resultante)"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-con-rar-y-diviendo-en-trozos-el-fichero-resultante","text":"$ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M count = 7350 status = progress | rar a -m5 -sRpi_8gb_backup.img -v1400000k Rpi_8gb_backup.img.rar $ #Restauraci\u00f3n: $ rar p Rpi_8gb_backup.img.part1.rar -idq | sudo dd of = /dev/mmcblk0 bs = 2M status = progress conv = fsync","title":"Backup de la SD (comprimiendo al vuelo con rar y diviendo en trozos el fichero resultante)"},{"location":"sistemas/raspi.html#control-de-progreso-durante-flasheo","text":"$ sudo pkill -USR1 -n -x dd Como alternativa se puede instalar el comando dcfldd para sustituir a dd , con lo que obtendremos una indicaci\u00f3n del progreso de la copia. dcfldd informa cada 256 bloques escritos por defecto. Para que lo haga con m\u00e1s frecuencia hay que pasarle la opci\u00f3n statusinterval de esta forma: $ #Backup: $ sudo dcfldd statusinterval = 10 if = /dev/mmcblk0 bs = 2M | gzip -9 - > Rpi_8gb_backup.img.gz","title":"Control de progreso durante flasheo"},{"location":"sistemas/raspi.html#redimensionar-particiones-en-imagen","text":"Fuente: Apartado Resizing a partition within an image file en Shrinking Raspberry Pi SD Card Images . Obtenemos los par\u00e1metros de las particiones de la imagen: $ sudo fdisk -l Octoprint_niubit.img Disco Octoprint_niubit.img: 7,5 GiB, 8010072064 bytes, 15644672 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes Tama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x15f1d664 Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo Octoprint_niubit.img1 8192 98045 89854 43,9M c W95 FAT32 (LBA) Octoprint_niubit.img2 98304 15644671 15546368 7,4G 83 Linux Localizamos el primer dispositivo loop libre: $ ls -l /dev/loop* Conectamos la partici\u00f3n que queremos redimensionar con el primer dispositivo loop libre aplicando un offset en base al sector de comienzo de la partici\u00f3n que queremos encoger ( 98304 en este ejemplo): $ sudo losetup /dev/loop12 Octoprint_niubit.img -o $((98304*512)) Montamos la partici\u00f3n en el sistema de archivos para hacer limpieza (por ejemplo /var/cache/apt/archives ) y desmontamos al final. Editamos la partici\u00f3n con gparted y la encogemos todo lo posible: $ sudo gparted /dev/loop12 Aunque hemos encogido la partici\u00f3n, en la tabla de asignaci\u00f3n de la imagen continuar\u00e1 con el antiguo tama\u00f1o, motivo por el que gparted muestra un icono de aviso. Lo solucionaremos a continuaci\u00f3n. Tomamos nota del tama\u00f1o final en KB que se ha dado a la partici\u00f3n fij\u00e1ndonos en el comando resize2fs que gparted ha ejecutado mirando los detalles al finalizar la operaci\u00f3n anterior. Por ejemplo: resize2fs -p '/dev/loop12' 3250176K Eliminar el dispositivo loop que hemos estado utilizando: $ sudo losetup -d /dev/loop12 Conectar ahora la imagen completa de nuevo al dispositivo loop: $ sudo losetup /dev/loop12 Octoprint_niubit.img Editamos con fdisk la imagen: sudo fdisk /dev/loop12 Borramos la partici\u00f3n que hemos redimensionado pulsando d 2 . Creamos de nuevo la partici\u00f3n pulsando n p 2 . Nos pedir\u00e1 el primer sector. Introduciremos el obtenido en el paso 1 ( 98304 en este ejemplo). A continuaci\u00f3n nos pedir\u00e1 el tama\u00f1o. Introduciremos el obtenido en el paso 6 con un + delante ( +3250176K en este ejemplo). Si nos pregunta en ese momento \u00bfDesea eliminar la firma? respondemos No . Finalmente pulsamos w para registrar los cambios. Volvemos a obtener los par\u00e1metros de las particiones de la imagen: $ sudo fdisk -l Octoprint_niubit.img Disco Octoprint_niubit.img: 7,5 GiB, 8010072064 bytes, 15644672 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes Tama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x15f1d664 Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo Octoprint_niubit.img1 8192 98045 89854 43,9M c W95 FAT32 (LBA) Octoprint_niubit.img2 98304 6598655 6500352 3,1G 83 Linux Tomamos nota del sector final de la segunda partici\u00f3n ( 6598655 en este ejemplo). Eliminamos el dispositivo loop que hemos utilizado: $ sudo losetup -d /dev/loop12 Truncamos la imagen para retirar la parte que ya no est\u00e1 cubierta por la partici\u00f3n que hemos encogido: $ truncate -s $(((6598655+1)*512)) Octoprint_niubit.img Ya habr\u00edamos terminado, pero todav\u00eda se puede mejorar la imagen rellenando con ceros los sectores no utilizados. Para ello proceder como sigue (sustituyendo el sector de comienzo 98304 del ejemplo por el que corresponda): $ sudo losetup /dev/loop12 Octoprint_niubit.img -o $((98304*512)) $ sudo mkdir -p /mnt/imageroot $ sudo mount /dev/loop12 /mnt/imageroot $ sudo dd if=/dev/zero of=/mnt/imageroot/zero.txt status=progress $ sudo rm /mnt/imageroot/zero.txt $ sudo umount /mnt/imageroot $ sudo rmdir /mnt/imageroot $ sudo losetup -d /dev/loop12 Ya tenemos lista la imagen para poderla flashear sobre tarjetas. Si la comprimimos con gzip se comprimir\u00e1 mejor si hemos realizado el paso final. Existen estas dos utilidades para automatizar este proceso: PiShrink cotswoldjam","title":"Redimensionar particiones en imagen"},{"location":"sistemas/raspi.html#gestion-de-la-swap","text":"Para redimensionar la Swap predeterminada (fichero de 100MB en /var/swap ): $ sudo nano /etc/dphys-swapfile $ sudo dphys-swapfile setup $ sudo dphys-swapfile swapon Para consultar el estado de la swap: $ swapon -s Para dejar de usar swap: $ sudo swapoff -a Para activar la swap tal y como est\u00e1 definida en ''/etc/fstab'': $ sudo swapon -a Para activar swap con un fichero en concreto: $ sudo swapon /var/swap","title":"Gesti\u00f3n de la SWAP"},{"location":"sistemas/raspi.html#escaneo-de-raspberry-pis-en-red","text":"$ arp -a | grep b8:27:eb $ sudo nmap -PR -sP 192 .168.1.0/24 | fgrep -B 2 \"Raspberry\"","title":"Escaneo de Raspberry Pi's en red"},{"location":"sistemas/raspi.html#pulsador-encendidoapagado","text":"Existe una configuraci\u00f3n accesible mediante un Device Tree overlay que permite arrancar y parar el sistema controladamente con un pulsador entre los pines #5 (GPIO03 o SCL) y GND. Para que funcione hay que a\u00f1adir lo siguiente al fichero /boot/config.txt : dtoverlay=gpio-shutdown Aqu\u00ed se documenta en profundidad.","title":"Pulsador encendido/apagado"},{"location":"sistemas/raspi.html#pi-top","text":"","title":"Pi-top"},{"location":"sistemas/raspi.html#enlaces_1","text":"pi-top-install : Scripts para controlar el hardware del Pi-top (teclas brillo pantalla, power off, etc.) sobre Raspbian oficial. pi-top-battery-status : Muestra el estado de la bater\u00eda del Pi-top en Raspbian. Pi-Top battery firmware / battery issues","title":"Enlaces"},{"location":"sistemas/raspi.html#articulos-interesantes-de-themagpi","text":"Librer\u00eda Python para controlar un puerto USB: P\u00e1gina 14 de #3 de TheMagPi Buffer de dispositivos controlados con el GPIO de RPi: P\u00e1gina 19 de #4 de TheMagPi Librer\u00eda wiringPi: Sirve para comandar y leer el GPIO desde bash. P\u00e1gina 14 de #6 de TheMagPi Comunicaci\u00f3n entre RaspPi y Arduino: P\u00e1gina 4 de #7 de TheMagPi Uso de interrupciones para chequear GPIO sin bucles: P\u00e1gina 12 de #7 de TheMagPi Librer\u00eda Nanpy para comunicar RaspPi y Arduino por USB: P\u00e1gina 10 de #8 de TheMagPi WebIOPi - Framework REST para controlar el GPIO: P\u00e1gina 8 de #9 de TheMagPi","title":"Art\u00edculos interesantes de TheMagPi"},{"location":"sistemas/raspi.html#ajustes-primer-arranque","text":"","title":"Ajustes primer arranque"},{"location":"sistemas/raspi.html#configuracion-headless","text":"","title":"Configuraci\u00f3n headless"},{"location":"sistemas/raspi.html#activacion-de-ssh","text":"Crear un fichero vac\u00edo con nombre ssh en partici\u00f3n boot.","title":"Activaci\u00f3n de SSH"},{"location":"sistemas/raspi.html#conexion-a-punto-de-acceso-wifi","text":"Crear un fichero con nombre wpa_supplicant.conf en partici\u00f3n boot con el siguiente contenido: country=ES ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=\"<el_ssid>\" psk=\"<el_pwd>\" key_mgmt=WPA-PSK }","title":"Conexi\u00f3n a punto de acceso Wifi"},{"location":"sistemas/raspi.html#ip-estatica","text":"Primero averiguamos el nombre del interfaz al que queremos poner la IP est\u00e1tica consultando ifconfig . Luego editamos /etc/dhcpcd.conf y al final a\u00f1adimos: interface <nombre_interfaz> static ip_address=<ip>/24 static routers=<gateway> static domain_name_servers=<dns separadas por espacios>","title":"IP est\u00e1tica"},{"location":"sistemas/raspi.html#raspi-config","text":"Network Options > Hostname Boot Options > Wait for Network at Boot Localisation Options > Change Locale Localisation Options > Change Timezone","title":"raspi-config"},{"location":"sistemas/raspi.html#ajustes-usuario","text":"Crear una nueva cuenta: $ sudo adduser usuario $ sudo adduser usuario adm $ sudo adduser usuario dialout $ sudo adduser usuario cdrom $ sudo adduser usuario sudo $ sudo adduser usuario audio $ sudo adduser usuario video $ sudo adduser usuario plugdev $ sudo adduser usuario games $ sudo adduser usuario users $ sudo adduser usuario input $ sudo adduser usuario netdev $ sudo adduser usuario gpio $ sudo adduser usuario i2c $ sudo adduser usuario spi Cambiar UID de usuario edumoreno para que coincida con el del NAS: sudo usermod -u 1002 usuario Borrar la cuenta pi desde la nueva: $ sudo deluser -remove-home pi Copia de clave p\u00fablica para SSH autom\u00e1tico (desde m\u00e1quina host): $ ssh-copy-id -i ~/.ssh/id_rsa.pub usuario@IP_RASPBERRY","title":"Ajustes usuario"},{"location":"sistemas/raspi.html#instalacion-de-paquetes","text":"Instalar paquetes: fail2ban nfs-common transmission-daemon amule-daemon Desinstalar paquete wolfram-engine que ocupa mucho y no se suele usar (en la versi\u00f3n lite no viene).","title":"Instalaci\u00f3n de paquetes"},{"location":"sistemas/raspi.html#montaje-nas","text":"A\u00f1adir lo siguiente a /etc/fstab : 1 192.168.1.200:/c/carpeta_compartida /home/usuario/carpeta_compartida nfs4 defaults,user,exec 0 0","title":"Montaje NAS"},{"location":"sistemas/raspi.html#ssh","text":"Editar el fichero /etc/ssh/sshd_config y modificar/a\u00f1adir las siguientes l\u00edneas ( fuente ): PermitRootLogin no MaxAuthTries 3 MaxStartups 5 AllowUsers edumoreno Medidas de protecci\u00f3n: Top 20 OpenSSH Server Best Security Practices Protege tu servidor casero de ataques externos Protegiendo el servidor SSH con fail2ban Pasos para asegurar tu Raspberry Pi frente a posibles amenazas","title":"SSH"},{"location":"sistemas/raspi.html#raspad","text":"","title":"Raspad"},{"location":"sistemas/raspi.html#enlaces_2","text":"SunFounder Wiki Replace HDMI cable tutorial Replace power USB cable tutorial The touch screen does not work properly FAQ Install the fan for Raspad : STL's alternativos . Instalaci\u00f3n de Android Install Android on his Raspberry Pi Calibraci\u00f3n de pantalla https://www.facebook.com/groups/192987478051513/permalink/233950007288593/ Clic derecho Raspberry Ri Touch Screen setup right click with twofing \u2013 Raspbian Jessie","title":"Enlaces"},{"location":"sistemas/raspi.html#configuracion","text":"","title":"Configuraci\u00f3n"},{"location":"sistemas/raspi.html#sistema-base","text":"Raspbian","title":"Sistema base"},{"location":"sistemas/raspi.html#digitalizador-de-pantalla","text":"El equipo reci\u00e9n instalado lleva un firmware bastante deficiente en el digitalizador t\u00e1ctil de la pantalla. Hay que actualizarlo siguiendo los pasos del siguiente art\u00edculo del wiki de SunFounder: The touch screen does not work properly FAQ","title":"Digitalizador de pantalla"},{"location":"sistemas/raspi.html#teclado-en-pantalla","text":"Instalar el paquete: matchbox-keyboard","title":"Teclado en pantalla"},{"location":"sistemas/raspi.html#clic-secundario","text":"Para conseguir emular el clic derecho del rat\u00f3n procedemos como sigue (fuentes: 1 y 2 ): Instalamos los siguientes paquetes: $ sudo apt-get update && sudo apt-get install build-essential libx11-dev libxtst-dev libxi-dev x11proto-randr-dev libxrandr-dev xserver-xorg-input-evdev xinput-calibrator Descargamos el c\u00f3digo de twofing y lo extraemos: $ wget http://plippo.de/dwl/twofing/twofing-0.1.2.tar.gz $ tar -xvzf twofing-0.1.2.tar.gz $ cd twofing-0.1.2 Compilamos: $ make && sudo make install Creamos el fichero /etc/udev/rules.d/70-touchscreen-ilitek.rules con el siguiente contenido: SUBSYSTEMS==\"usb\",ACTION==\"add\",KERNEL==\"event*\",ATTRS{idVendor}==\"222a\",ATTRS{idProduct}==\"0001\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" KERNEL==\"event*\",ATTRS{name}==\"ILITEK Multi-Touch-V3000\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" Creamos el fichero /usr/share/X11/xorg.conf.d/90-touchinput.conf con el siguiente contenido: Section \"InputClass\" Identifier \"calibration\" Driver \"evdev\" MatchProduct \"ILITEK ILITEK-TP\" MatchDevicePath \"/dev/input/event*\" Option \"Emulate3Buttons\" \"True\" Option \"EmulateThirdButton\" \"1\" Option \"EmulateThirdButtonTimeout\" \"750\" Option \"EmulateThirdButtonMoveThreshold\" \"30\" EndSection Creamos el fichero /etc/udev/rules.d/ 99-input-tagging.rules con el siguiente contenido: ACTION==\"add\", KERNEL==\"event*\", SUBSYSTEM==\"input\", TAG+=\"systemd\", , ENV{SYSTEMD_ALIAS}+=\"/sys/subsystem/input/devices/$env{ID_SERIAL}\" Creamos el fichero ~/.config/autostart/twofing.desktop con el siguiente contenido: [Desktop Entry] Type=Application Name=Twofing Exec=twofing StartupNotify=false","title":"Clic secundario"},{"location":"sistemas/raspi.html#raspi-camera","text":"La documentaci\u00f3n de la librer\u00eda picamera en Python est\u00e1 aqu\u00ed . Concretamente las recetas para hacer la foto est\u00e1n aqu\u00ed . Por ejemplo, para hacer fotos que luego vayan a formar parte de un timelapse: import time import picamera import datetime as dt with picamera . PiCamera () as camera : camera . resolution = ( 1280 , 720 ) camera . framerate = 30 # calentamiento/enfoque de la camara time . sleep ( 2 ) # fijamos valores para que salga mejor el timelapse camera . shutter_speed = camera . exposure_speed camera . exposure_mode = 'off' g = camera . awb_gains camera . awb_mode = 'off' camera . awb_gains = g camera . annotate_background = picamera . Color ( 'black' ) camera . annotate_text = dt . datetime . now () . strftime ( '%Y-%m- %d %H:%M:%S' ) filename = time . strftime ( \"%Y-%m- %d _%H%M.jpg\" ) camera . capture ( filename )","title":"Raspi Camera"},{"location":"sistemas/raspi.html#activar-consola-en-puerto-serie","text":"Las Raspberry Pi Zero W, Pi 3 y Pi 4 traen un adaptador Bluetooth que en Raspbian est\u00e1 conectado precisamente a los pines #08 y #10 donde tradicionalmente se encontraba el puerto serie. En este documento se explican los cambios en estas versiones. En este otro art\u00edculo se dan opciones para modificar este comportamiento. Lo que sigue es una versi\u00f3n personal. Para liberar esta conexi\u00f3n debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: 1 2 Would you like a login shell to be accessible over serial? -> Yes Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos conectar a la consola a trav\u00e9s del puerto serie.","title":"Activar consola en puerto serie"},{"location":"sistemas/raspi.html#crankshaft","text":"","title":"Crankshaft"},{"location":"sistemas/raspi.html#actualizacion-distribucion","text":"Descargar la \u00faltima versi\u00f3n de la p\u00e1gina de descarga . Copiar el zip o mejor el contenido (.img y .md5) a la ra\u00edz de un pendrive con formato FAT32. Conectar el pendrive a la Raspberry antes de arrancar. El proceso de actualizaci\u00f3n (descrito en esta p\u00e1gina ) es lento y requiere varios reinicios. Esperar pues hasta terminar de ver el sistema correctamente arrancado. Instalar el script del Mausberry Car Switch: Copiar el siguiente script en la ruta /etc/switch.sh : #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done Darle permisos de ejecuci\u00f3n. A\u00f1adir lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: /etc/switch.sh &","title":"Actualizaci\u00f3n distribuci\u00f3n"},{"location":"sistemas/raspi_pico.html","text":"Raspberry Pi Pico \u00b6 Enlaces \u00b6 Emuladores: B-Em : Emulador de BBC Micro. pico-zxspectrum : Emulador de ZX Spectrum. Montajes: Raspberry Pi Pico 200Khz Digital Oscilloscope CircuitPython: CircuitPython Essentials Getting Started with Raspberry Pi Pico and CircuitPython An Introduction to RP2040 PIO with CircuitPython Librer\u00edas: Adafruit Sponsored Libraries and Drivers on GitHub Adafruit CircuitPython API Reference Adafruit CircuitPython Library Bundle CircuitPython \u00b6 Pines \u00b6 Obtenidos con este programa . board.A0 board.GP26 board.GP26_A0 board.A1 board.GP27 board.GP27_A1 board.A2 board.GP28 board.GP28_A2 board.A3 board.VOLTAGE_MONITOR board.GP0 board.GP1 board.GP10 board.GP11 board.GP12 board.GP13 board.GP14 board.GP15 board.GP16 board.GP17 board.GP18 board.GP19 board.GP2 board.GP20 board.GP21 board.GP22 board.GP25 board.LED board.GP3 board.GP4 board.GP5 board.GP6 board.GP7 board.GP8 board.GP9 board.SMPS_MODE Librer\u00edas soportadas \u00b6 _bleio, _pixelbuf, adafruit_bus_device, analogio, audiobusio, audiocore, audiomp3, audiopwmio, binascii, bitbangio, bitmaptools, bitops, board, busio, countio, digitalio, displayio, errno, fontio, framebufferio, gamepad, json, math, microcontroller, msgpack, neopixel_write, nvm, os, pulseio, pwmio, random, re, rgbmatrix, rotaryio, rtc, sdcardio, sharpdisplay, storage, struct, supervisor, terminalio, time, touchio, ulab, usb_hid, usb_midi, vectorio, watchdog","title":"Raspberry Pi Pico"},{"location":"sistemas/raspi_pico.html#raspberry-pi-pico","text":"","title":"Raspberry Pi Pico"},{"location":"sistemas/raspi_pico.html#enlaces","text":"Emuladores: B-Em : Emulador de BBC Micro. pico-zxspectrum : Emulador de ZX Spectrum. Montajes: Raspberry Pi Pico 200Khz Digital Oscilloscope CircuitPython: CircuitPython Essentials Getting Started with Raspberry Pi Pico and CircuitPython An Introduction to RP2040 PIO with CircuitPython Librer\u00edas: Adafruit Sponsored Libraries and Drivers on GitHub Adafruit CircuitPython API Reference Adafruit CircuitPython Library Bundle","title":"Enlaces"},{"location":"sistemas/raspi_pico.html#circuitpython","text":"","title":"CircuitPython"},{"location":"sistemas/raspi_pico.html#pines","text":"Obtenidos con este programa . board.A0 board.GP26 board.GP26_A0 board.A1 board.GP27 board.GP27_A1 board.A2 board.GP28 board.GP28_A2 board.A3 board.VOLTAGE_MONITOR board.GP0 board.GP1 board.GP10 board.GP11 board.GP12 board.GP13 board.GP14 board.GP15 board.GP16 board.GP17 board.GP18 board.GP19 board.GP2 board.GP20 board.GP21 board.GP22 board.GP25 board.LED board.GP3 board.GP4 board.GP5 board.GP6 board.GP7 board.GP8 board.GP9 board.SMPS_MODE","title":"Pines"},{"location":"sistemas/raspi_pico.html#librerias-soportadas","text":"_bleio, _pixelbuf, adafruit_bus_device, analogio, audiobusio, audiocore, audiomp3, audiopwmio, binascii, bitbangio, bitmaptools, bitops, board, busio, countio, digitalio, displayio, errno, fontio, framebufferio, gamepad, json, math, microcontroller, msgpack, neopixel_write, nvm, os, pulseio, pwmio, random, re, rgbmatrix, rotaryio, rtc, sdcardio, sharpdisplay, storage, struct, supervisor, terminalio, time, touchio, ulab, usb_hid, usb_midi, vectorio, watchdog","title":"Librer\u00edas soportadas"},{"location":"sistemas/redes.html","text":"Redes \u00b6 Enlaces \u00b6 Email blacklist check Email blacklist check : Poner la IP directamente en la URL tras ip= Email blacklist check NSLookup online IP-Lookup : Servicio de resoluci\u00f3n inversa de IP recomendado por Google. \u00bfQu\u00e9 navegador estoy utilizando? : Chequea e informa sobre el navegador utilizado y da sugerencias sobre si merece la pena cambiar/actualizar. Message header analyzer : An\u00e1lisis de cabeceras de un correo. Indica los saltos que ha hecho el mensaje entre los distintos servidores SMTP que ha atravesado hasta su destino. Glosario \u00b6 OID: Basicamente, un OID, o Identificador de Objeto, es una secuencia de n\u00fameros que se asignan jer\u00e1rquicamente y que permite identificar objetos en la red, siendo usados con gran cantidad de protocolos. ( Definici\u00f3n en RedIRIS )","title":"Redes"},{"location":"sistemas/redes.html#redes","text":"","title":"Redes"},{"location":"sistemas/redes.html#enlaces","text":"Email blacklist check Email blacklist check : Poner la IP directamente en la URL tras ip= Email blacklist check NSLookup online IP-Lookup : Servicio de resoluci\u00f3n inversa de IP recomendado por Google. \u00bfQu\u00e9 navegador estoy utilizando? : Chequea e informa sobre el navegador utilizado y da sugerencias sobre si merece la pena cambiar/actualizar. Message header analyzer : An\u00e1lisis de cabeceras de un correo. Indica los saltos que ha hecho el mensaje entre los distintos servidores SMTP que ha atravesado hasta su destino.","title":"Enlaces"},{"location":"sistemas/redes.html#glosario","text":"OID: Basicamente, un OID, o Identificador de Objeto, es una secuencia de n\u00fameros que se asignan jer\u00e1rquicamente y que permite identificar objetos en la red, siendo usados con gran cantidad de protocolos. ( Definici\u00f3n en RedIRIS )","title":"Glosario"},{"location":"sistemas/router_xiaomi.html","text":"Router Xiaomi MiWiFi 3G \u00b6 Enlaces \u00b6 Serie de art\u00edculos de Carlos Monge sobre OpenWRT instalado en Xiaomi MiWiFi 3G P\u00e1gina del router en OpenWRT : Incluye instrucciones para debrick. Xiaomi WiFi Router 3G : Hilo del foro OpenWRT sobre el Xiaomi MiWiFi 3G router. Xiaomi Wifi Router 3G - 18.06.X / feedback and help : Hilo del foro OpenWRT sobre el firmware 18.06 en el Xiaomi MiWiFi 3G router. Things to do after installing Linux LEDE 17.01 Configuraci\u00f3n desde cero \u00b6 Instalar Luci: 1 2 3 4 5 # opkg update # opkg install luci # opkg install luci-ssl # /etc/init.d/uhttpd start # /etc/init.d/uhttpd enable Descarga de paquetes por HTTPS: Instalar: 1 2 # opkg update # opkg install ca-certificates Editar el fichero /etc/opkg/distfeeds.conf y cambiar http por https. Crear usuario normal y permitirle usar sudo: Ejecutar: 1 2 3 4 5 6 7 8 # opkg update # opkg install shadow-useradd # useradd miusuario # passwd miusuario # mkdir /home # mkdir /home/miusuario # chown miusuario:miusuario /home/miusuario # opkg install sudo Editar el fichero /etc/passwd y poner shell al usuario nuevo: 1 miusuario : x : 1000 : 1000 ::/ home /miusuario:/bin/ ash Ejecutar el comando visudo y a\u00f1adir la siguiente l\u00ednea bajo la correspondiente a root: 1 miusuario ALL=(ALL) ALL Desactivar ping: En Luci ir a la ruta Network > Firewall Abrir la solapa Traffic Rules Desactivar las reglas (desmarcando el check) Allow-Ping , Allow-ICMPv6-Input y Allow-ICMPv6-Forward Pulsar el bot\u00f3n Save & Apply abajo a la derecha Bloquear la publicidad desde el fichero hosts: Iniciar sesi\u00f3n SSH. Hacer backup de fichero hosts: 1 $ sudo cp /etc/hosts /etc/hosts.bkp Editar crontab de root con comando sudo crontab -e y a\u00f1adir la siguiente l\u00ednea: 1 0 */12 * * * wget -O /etc/hosts https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews/hosts; cat /etc/hosts.bkp >> /etc/hosts Hay varias configuraciones posibles para el fichero hosts descritas aqu\u00ed . Configuraci\u00f3n de ProtonVPN \u00b6 Siguiendo esta gu\u00eda . Antes de empezar es recomendable hacer un backup de la configuraci\u00f3n del router por si es necesario volver a empezar. Instalaci\u00f3n de paquetes (el comando siguiente instala adem\u00e1s los siguientes paquetes dependientes kmod-tun liblzo zlib libopenssl ): 1 $ sudo opkg install luci-app-openvpn openvpn-openssl Creamos un nuevo interface para lo que en Luci vamos a Network > Interfaces . Pulsamos el bot\u00f3n Add new interface... . En el formulario que aparece rellenamos los siguientes campos: Name of the new interface : openvpn Protocol of the new interface : Unmanaged Cover the following interface : Custom Interface: \"tun0\" Pulsar el bot\u00f3n Submit . Seleccionar la pesta\u00f1a Advanced Settings . Marcar la opci\u00f3n Bring up on boot . Seleccionar la pesta\u00f1a Firewall Settings . En el desplegable Create / Assign firewall-zone crear una zona con nombre vpn . Pulsar el bot\u00f3n Save & Apply . Ir a la secci\u00f3n Network > Firewall . Los siguientes cambios son muy sensibles, por lo que muestro un pantallazo del estado de las zonas antes de los cambios: En la zona wan cambiar Input y Forward a drop y desmarcar los checks Masquerading y MSS clamping . En la zona vpn cambiar Input y Forward a drop y marcar los checks Masquerading y MSS clamping . Pulsar el bot\u00f3n Save & Apply . Pulsar el bot\u00f3n Edit de la zona lan . En la secci\u00f3n Inter-Zone Forwarding abrir el desplegable Allow forward to destination zones y marcar la secci\u00f3n vpn y desmarcar wan . Pulsar el bot\u00f3n Save & Apply Pantallazo de c\u00f3mo deber\u00edan de quedar las zonas: Descargar el perfil .ovpn deseado de la secci\u00f3n \"Downloads\" de nuestro perfil en ProtonVPN seleccionando como plataforma Router y protocolo UDP . Vamos a suponer que el fichero se llama is-es-01.protonvpn.com.udp.ovpn . Editar el fichero y modificar la l\u00ednea que contiene el par\u00e1metro auth-user-pass dej\u00e1ndola como sigue: 1 auth-user-pass '/etc/openvpn/protonvpn/auth' Transferir el fichero descargado al router y situarlo en la ruta /etc/openvpn/protonvpn (habr\u00e1 que crear el directorio protonvpn ). Ir a la secci\u00f3n \"Account\" de nuestro perfil en ProtonVPN y tomar nota de los valores de \"OpenVPN/IKEv2 Username\" y \"OpenVPN/IKEv2 Password\". Crear en el router el fichero /etc/openvpn/protonvpn/auth , editarlo y escribir en la primera l\u00ednea el username anterior y en la segunda el password. Editar en el router el fichero /etc/config/openvpn y a\u00f1adir las siguientes l\u00edneas: 1 2 3 config openvpn 'protonvpn' option config '/etc/openvpn/protonvpn/is-es-01.protonvpn.com.udp.ovpn' option enabled '1' Reiniciar el servicio openvpn en el router: 1 $ sudo /etc/init.d/openvpn restart Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers dejar \u00fanicamente la IP 10.8.8.1 (en caso de utilizar OpenVPN por protocolo TCP usar 10.7.7.1 en su lugar). Pulsar el bot\u00f3n Save & Apply . Para mantener acceso desde el exterior de la red, estudiar este art\u00edculo . Actualizaci\u00f3n firmware \u00b6 Siguiendo este art\u00edculo : Bajar el paquete pinchando uno de los enlaces siguientes seg\u00fan si se desea la versi\u00f3n de desarrollo o la estable de la p\u00e1gina de soporte del router en OpenWRT : Estable: Firmware OpenWrt Upgrade URL Desarrollo: Firmware OpenWrt snapshot Upgrade URL En el interfaz web (Luci) acudir a la ruta System > Backup / Flash Firmware . En la secci\u00f3n Flash new firmware image pulsar el bot\u00f3n Examinar... y seleccionar el fichero .tar bajado en el punto anterior. Pulsar el bot\u00f3n Flash image... . En la siguiente p\u00e1gina confirmar el flasheo comprobando si se quiere los checksums. Cuando termine el proceso habremos perdido los paquetes adicionales. Tambi\u00e9n los ajustes hechos al usuario adicional (como el directorio home) por lo que seguramente habr\u00e1 que repasar la mayor\u00eda de los ajustes hechos durante la configuraci\u00f3n desde cero . Desactivaci\u00f3n VPN \u00b6 Para poder salir directamente a trav\u00e9s de la conexi\u00f3n WAN sin atravesar el VPN: Desmontar unidades NAS, apagar Raspis y NAS. Ir a Network > Interfaces y detener el interfaz OPENVPN pulsando el bot\u00f3n Stop : Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers poner las IPs de OpenDNS: 208.67.222.222 y 208.67.220.220 . Ir a Network > Firewall y editar la zona lan para que haga forward a la zona wan y no a la vpn : En el listado de zonas firewall activar Masquerading y MSS clamping en la zona wan de manera que quede as\u00ed: Reiniciar router. Para volver a utilizar el VPN Ir a Network > Interfaces y conectar el interfaz OPENVPN pulsando el bot\u00f3n Connect : Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers dejar \u00fanicamente la IP: 10.8.8.1 . Ir a Network > Firewall y editar la zona lan para que haga forward a la zona vpn y no a la wan : En el listado de zonas firewall desactivar Masquerading y MSS clamping en la zona wan de manera que quede as\u00ed: Reiniciar router. Cambio de perfil ProtonVPN \u00b6 En el router hay instalados un par de perfiles (se descargan de aqu\u00ed ), los correspondientes a Suiza (ch) y a Islandia (is). Los perfiles est\u00e1n aqu\u00ed: edumoreno@OpenWrt:~$ cd /etc/openvpn/protonvpn edumoreno@OpenWrt:/etc/openvpn/protonvpn$ ls -l -rw-r--r-- 1 root root 24 Nov 24 2018 auth -rw-r--r-- 1 edumoren edumoren 4479 Jan 25 15:16 ch-es-01.protonvpn.com.udp.ovpn -rw-r--r-- 1 root root 4609 Nov 24 2018 is-es-01.protonvpn.com.udp.ovpn Y se configuran al principio del fichero /etc/config/openvpn : config openvpn 'protonvpn' option config '/etc/openvpn/protonvpn/ch-es-01.protonvpn.com.udp.ovpn' option enabled '1'","title":"Router Xiaomi MiWiFi 3G"},{"location":"sistemas/router_xiaomi.html#router-xiaomi-miwifi-3g","text":"","title":"Router Xiaomi MiWiFi 3G"},{"location":"sistemas/router_xiaomi.html#enlaces","text":"Serie de art\u00edculos de Carlos Monge sobre OpenWRT instalado en Xiaomi MiWiFi 3G P\u00e1gina del router en OpenWRT : Incluye instrucciones para debrick. Xiaomi WiFi Router 3G : Hilo del foro OpenWRT sobre el Xiaomi MiWiFi 3G router. Xiaomi Wifi Router 3G - 18.06.X / feedback and help : Hilo del foro OpenWRT sobre el firmware 18.06 en el Xiaomi MiWiFi 3G router. Things to do after installing Linux LEDE 17.01","title":"Enlaces"},{"location":"sistemas/router_xiaomi.html#configuracion-desde-cero","text":"Instalar Luci: 1 2 3 4 5 # opkg update # opkg install luci # opkg install luci-ssl # /etc/init.d/uhttpd start # /etc/init.d/uhttpd enable Descarga de paquetes por HTTPS: Instalar: 1 2 # opkg update # opkg install ca-certificates Editar el fichero /etc/opkg/distfeeds.conf y cambiar http por https. Crear usuario normal y permitirle usar sudo: Ejecutar: 1 2 3 4 5 6 7 8 # opkg update # opkg install shadow-useradd # useradd miusuario # passwd miusuario # mkdir /home # mkdir /home/miusuario # chown miusuario:miusuario /home/miusuario # opkg install sudo Editar el fichero /etc/passwd y poner shell al usuario nuevo: 1 miusuario : x : 1000 : 1000 ::/ home /miusuario:/bin/ ash Ejecutar el comando visudo y a\u00f1adir la siguiente l\u00ednea bajo la correspondiente a root: 1 miusuario ALL=(ALL) ALL Desactivar ping: En Luci ir a la ruta Network > Firewall Abrir la solapa Traffic Rules Desactivar las reglas (desmarcando el check) Allow-Ping , Allow-ICMPv6-Input y Allow-ICMPv6-Forward Pulsar el bot\u00f3n Save & Apply abajo a la derecha Bloquear la publicidad desde el fichero hosts: Iniciar sesi\u00f3n SSH. Hacer backup de fichero hosts: 1 $ sudo cp /etc/hosts /etc/hosts.bkp Editar crontab de root con comando sudo crontab -e y a\u00f1adir la siguiente l\u00ednea: 1 0 */12 * * * wget -O /etc/hosts https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews/hosts; cat /etc/hosts.bkp >> /etc/hosts Hay varias configuraciones posibles para el fichero hosts descritas aqu\u00ed .","title":"Configuraci\u00f3n desde cero"},{"location":"sistemas/router_xiaomi.html#configuracion-de-protonvpn","text":"Siguiendo esta gu\u00eda . Antes de empezar es recomendable hacer un backup de la configuraci\u00f3n del router por si es necesario volver a empezar. Instalaci\u00f3n de paquetes (el comando siguiente instala adem\u00e1s los siguientes paquetes dependientes kmod-tun liblzo zlib libopenssl ): 1 $ sudo opkg install luci-app-openvpn openvpn-openssl Creamos un nuevo interface para lo que en Luci vamos a Network > Interfaces . Pulsamos el bot\u00f3n Add new interface... . En el formulario que aparece rellenamos los siguientes campos: Name of the new interface : openvpn Protocol of the new interface : Unmanaged Cover the following interface : Custom Interface: \"tun0\" Pulsar el bot\u00f3n Submit . Seleccionar la pesta\u00f1a Advanced Settings . Marcar la opci\u00f3n Bring up on boot . Seleccionar la pesta\u00f1a Firewall Settings . En el desplegable Create / Assign firewall-zone crear una zona con nombre vpn . Pulsar el bot\u00f3n Save & Apply . Ir a la secci\u00f3n Network > Firewall . Los siguientes cambios son muy sensibles, por lo que muestro un pantallazo del estado de las zonas antes de los cambios: En la zona wan cambiar Input y Forward a drop y desmarcar los checks Masquerading y MSS clamping . En la zona vpn cambiar Input y Forward a drop y marcar los checks Masquerading y MSS clamping . Pulsar el bot\u00f3n Save & Apply . Pulsar el bot\u00f3n Edit de la zona lan . En la secci\u00f3n Inter-Zone Forwarding abrir el desplegable Allow forward to destination zones y marcar la secci\u00f3n vpn y desmarcar wan . Pulsar el bot\u00f3n Save & Apply Pantallazo de c\u00f3mo deber\u00edan de quedar las zonas: Descargar el perfil .ovpn deseado de la secci\u00f3n \"Downloads\" de nuestro perfil en ProtonVPN seleccionando como plataforma Router y protocolo UDP . Vamos a suponer que el fichero se llama is-es-01.protonvpn.com.udp.ovpn . Editar el fichero y modificar la l\u00ednea que contiene el par\u00e1metro auth-user-pass dej\u00e1ndola como sigue: 1 auth-user-pass '/etc/openvpn/protonvpn/auth' Transferir el fichero descargado al router y situarlo en la ruta /etc/openvpn/protonvpn (habr\u00e1 que crear el directorio protonvpn ). Ir a la secci\u00f3n \"Account\" de nuestro perfil en ProtonVPN y tomar nota de los valores de \"OpenVPN/IKEv2 Username\" y \"OpenVPN/IKEv2 Password\". Crear en el router el fichero /etc/openvpn/protonvpn/auth , editarlo y escribir en la primera l\u00ednea el username anterior y en la segunda el password. Editar en el router el fichero /etc/config/openvpn y a\u00f1adir las siguientes l\u00edneas: 1 2 3 config openvpn 'protonvpn' option config '/etc/openvpn/protonvpn/is-es-01.protonvpn.com.udp.ovpn' option enabled '1' Reiniciar el servicio openvpn en el router: 1 $ sudo /etc/init.d/openvpn restart Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers dejar \u00fanicamente la IP 10.8.8.1 (en caso de utilizar OpenVPN por protocolo TCP usar 10.7.7.1 en su lugar). Pulsar el bot\u00f3n Save & Apply . Para mantener acceso desde el exterior de la red, estudiar este art\u00edculo .","title":"Configuraci\u00f3n de ProtonVPN"},{"location":"sistemas/router_xiaomi.html#actualizacion-firmware","text":"Siguiendo este art\u00edculo : Bajar el paquete pinchando uno de los enlaces siguientes seg\u00fan si se desea la versi\u00f3n de desarrollo o la estable de la p\u00e1gina de soporte del router en OpenWRT : Estable: Firmware OpenWrt Upgrade URL Desarrollo: Firmware OpenWrt snapshot Upgrade URL En el interfaz web (Luci) acudir a la ruta System > Backup / Flash Firmware . En la secci\u00f3n Flash new firmware image pulsar el bot\u00f3n Examinar... y seleccionar el fichero .tar bajado en el punto anterior. Pulsar el bot\u00f3n Flash image... . En la siguiente p\u00e1gina confirmar el flasheo comprobando si se quiere los checksums. Cuando termine el proceso habremos perdido los paquetes adicionales. Tambi\u00e9n los ajustes hechos al usuario adicional (como el directorio home) por lo que seguramente habr\u00e1 que repasar la mayor\u00eda de los ajustes hechos durante la configuraci\u00f3n desde cero .","title":"Actualizaci\u00f3n firmware"},{"location":"sistemas/router_xiaomi.html#desactivacion-vpn","text":"Para poder salir directamente a trav\u00e9s de la conexi\u00f3n WAN sin atravesar el VPN: Desmontar unidades NAS, apagar Raspis y NAS. Ir a Network > Interfaces y detener el interfaz OPENVPN pulsando el bot\u00f3n Stop : Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers poner las IPs de OpenDNS: 208.67.222.222 y 208.67.220.220 . Ir a Network > Firewall y editar la zona lan para que haga forward a la zona wan y no a la vpn : En el listado de zonas firewall activar Masquerading y MSS clamping en la zona wan de manera que quede as\u00ed: Reiniciar router. Para volver a utilizar el VPN Ir a Network > Interfaces y conectar el interfaz OPENVPN pulsando el bot\u00f3n Connect : Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers dejar \u00fanicamente la IP: 10.8.8.1 . Ir a Network > Firewall y editar la zona lan para que haga forward a la zona vpn y no a la wan : En el listado de zonas firewall desactivar Masquerading y MSS clamping en la zona wan de manera que quede as\u00ed: Reiniciar router.","title":"Desactivaci\u00f3n VPN"},{"location":"sistemas/router_xiaomi.html#cambio-de-perfil-protonvpn","text":"En el router hay instalados un par de perfiles (se descargan de aqu\u00ed ), los correspondientes a Suiza (ch) y a Islandia (is). Los perfiles est\u00e1n aqu\u00ed: edumoreno@OpenWrt:~$ cd /etc/openvpn/protonvpn edumoreno@OpenWrt:/etc/openvpn/protonvpn$ ls -l -rw-r--r-- 1 root root 24 Nov 24 2018 auth -rw-r--r-- 1 edumoren edumoren 4479 Jan 25 15:16 ch-es-01.protonvpn.com.udp.ovpn -rw-r--r-- 1 root root 4609 Nov 24 2018 is-es-01.protonvpn.com.udp.ovpn Y se configuran al principio del fichero /etc/config/openvpn : config openvpn 'protonvpn' option config '/etc/openvpn/protonvpn/ch-es-01.protonvpn.com.udp.ovpn' option enabled '1'","title":"Cambio de perfil ProtonVPN"},{"location":"sistemas/soft_imprescindible.html","text":"Aplicaciones interesantes \u00b6 Web \u00b6 Web Developer Checklist Html Validator Multi OS \u00b6 EICAR : Virus de laboratorio para poner a prueba scanners antivirus. MPV : Media Player. VSCodium : Free/Libre Open Source Software Binaries of VSCode. LosslessCut Linux \u00b6 GNU Screen Shotcut : Editor de v\u00eddeo. SMPlayer : Frontend para MPlayer. Soporta YouTube. Stacer : Alternativa a CCleaner de Windows. Disk Usage Analyzer (also known as baobab) : An\u00e1lisis de ocupaci\u00f3n de disco (similar a WinDirStat). Shutter : Edici\u00f3n r\u00e1pida y marcado de im\u00e1genes. AppImageLauncher : Integrate AppImages to your application launcher with one click, and manage, update and remove them from there. FSArchiver : FSArchiver is a system tool that allows you to save the contents of a file-system to a compressed archive file. The file-system can be restored on a partition which has a different size and it can be restored on a different file-system. SystemRescue : SystemRescue (also known as SystemRescueCd) is a Linux system rescue toolkit available as a bootable medium for administrating or repairing your system and data after a crash. It aims to provide an easy way to carry out admin tasks on your computer, such as creating and editing the hard disk partitions. It comes with a lot of Linux system utilities such as GParted, fsarchiver, filesystem tools and basic tools (editors, midnight commander, network tools). TestDisk : Recuperaci\u00f3n de particiones estropeadas y de ficheros. BleachBit : With BleachBit you can free cache, delete cookies, clear Internet history, shred temporary files, delete logs, and discard junk you didn't know was there. gucharmap : Mapa de caracteres. mosh : Alternativa al cliente de SSH. Mejora la persistencia de la conexi\u00f3n, es decir es tolerante a desconexiones o latencias altas. batcat : Reemplazo mejorado de cat . ncdu : Reemplazo mejorado de du . tldr : Alternativa a man , centrada en mostrar ejemplos de uso de los distintos comandos. Windows \u00b6 CNet Windows Vista Test : Test online de requerimientos de Vista. Colossus : Gestor de contrase\u00f1as. KeePass : Gestor de contrase\u00f1as. WHosIP : Utilidad de linea de comando que muestra toda la informaci\u00f3n disponible sobre una IP (propietario, pais, rango de IP's, informaci\u00f3n de contacto, etc. ShelExec : Para crear un CD/DVD de autoarranque. SharpKeys : Mapeo del teclado (tambi\u00e9n sirve para desactivar alguna tecla). Wink : Creaci\u00f3n tutoriales animados. The Regex Coach : Editor de expresiones regulares. SoftPerfect Network Scanner : Scanner de red. Lista los adaptadores de red conectados a la red. SIW : Auditor de sistemas en un dispositivo USB. Virtual CloneDrive : Para montar ISOs. CCleaner : Optimizaci\u00f3n del sistema y limpieza de archivos de aplicaciones no utilizadas (an\u00e1lisis aqu\u00ed ). Cleanmgr+ : Alternativa a CCleaner . ConEmu : Consola mejorada. HDD Raw Copy Tool : Para hacer y cargar im\u00e1genes de disco. DiskGenius : Equivalente a gparted. H2testw : Test de stress para tarjetas SD y pendrives. Gesti\u00f3n de red \u00b6 SpiceWorks OpManager Zenoss Zabbix MRTG GroudWork","title":"Aplicaciones interesantes"},{"location":"sistemas/soft_imprescindible.html#aplicaciones-interesantes","text":"","title":"Aplicaciones interesantes"},{"location":"sistemas/soft_imprescindible.html#web","text":"Web Developer Checklist Html Validator","title":"Web"},{"location":"sistemas/soft_imprescindible.html#multi-os","text":"EICAR : Virus de laboratorio para poner a prueba scanners antivirus. MPV : Media Player. VSCodium : Free/Libre Open Source Software Binaries of VSCode. LosslessCut","title":"Multi OS"},{"location":"sistemas/soft_imprescindible.html#linux","text":"GNU Screen Shotcut : Editor de v\u00eddeo. SMPlayer : Frontend para MPlayer. Soporta YouTube. Stacer : Alternativa a CCleaner de Windows. Disk Usage Analyzer (also known as baobab) : An\u00e1lisis de ocupaci\u00f3n de disco (similar a WinDirStat). Shutter : Edici\u00f3n r\u00e1pida y marcado de im\u00e1genes. AppImageLauncher : Integrate AppImages to your application launcher with one click, and manage, update and remove them from there. FSArchiver : FSArchiver is a system tool that allows you to save the contents of a file-system to a compressed archive file. The file-system can be restored on a partition which has a different size and it can be restored on a different file-system. SystemRescue : SystemRescue (also known as SystemRescueCd) is a Linux system rescue toolkit available as a bootable medium for administrating or repairing your system and data after a crash. It aims to provide an easy way to carry out admin tasks on your computer, such as creating and editing the hard disk partitions. It comes with a lot of Linux system utilities such as GParted, fsarchiver, filesystem tools and basic tools (editors, midnight commander, network tools). TestDisk : Recuperaci\u00f3n de particiones estropeadas y de ficheros. BleachBit : With BleachBit you can free cache, delete cookies, clear Internet history, shred temporary files, delete logs, and discard junk you didn't know was there. gucharmap : Mapa de caracteres. mosh : Alternativa al cliente de SSH. Mejora la persistencia de la conexi\u00f3n, es decir es tolerante a desconexiones o latencias altas. batcat : Reemplazo mejorado de cat . ncdu : Reemplazo mejorado de du . tldr : Alternativa a man , centrada en mostrar ejemplos de uso de los distintos comandos.","title":"Linux"},{"location":"sistemas/soft_imprescindible.html#windows","text":"CNet Windows Vista Test : Test online de requerimientos de Vista. Colossus : Gestor de contrase\u00f1as. KeePass : Gestor de contrase\u00f1as. WHosIP : Utilidad de linea de comando que muestra toda la informaci\u00f3n disponible sobre una IP (propietario, pais, rango de IP's, informaci\u00f3n de contacto, etc. ShelExec : Para crear un CD/DVD de autoarranque. SharpKeys : Mapeo del teclado (tambi\u00e9n sirve para desactivar alguna tecla). Wink : Creaci\u00f3n tutoriales animados. The Regex Coach : Editor de expresiones regulares. SoftPerfect Network Scanner : Scanner de red. Lista los adaptadores de red conectados a la red. SIW : Auditor de sistemas en un dispositivo USB. Virtual CloneDrive : Para montar ISOs. CCleaner : Optimizaci\u00f3n del sistema y limpieza de archivos de aplicaciones no utilizadas (an\u00e1lisis aqu\u00ed ). Cleanmgr+ : Alternativa a CCleaner . ConEmu : Consola mejorada. HDD Raw Copy Tool : Para hacer y cargar im\u00e1genes de disco. DiskGenius : Equivalente a gparted. H2testw : Test de stress para tarjetas SD y pendrives.","title":"Windows"},{"location":"sistemas/soft_imprescindible.html#gestion-de-red","text":"SpiceWorks OpManager Zenoss Zabbix MRTG GroudWork","title":"Gesti\u00f3n de red"},{"location":"sistemas/trucos_windows.html","text":"Trucos Windows \u00b6 Acelerar la exploraci\u00f3n de equipos en red e incrementar el rendimiento general \u00b6 Borrar la clave siguiente ( fuente ): HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RemoteComputer\\NameSpace\\{D6277990-4C6A-11CF-8D87-00AA0060F5BF} Cambiar la clave de producto en Windows XP \u00b6 Proceder como sigue ( fuente ): Ejecutar regedit y buscar la clave HKEY_LOCAL_MACHINE\\Software\\Microsoft\\WindowsNT\\CurrentVersion\\WPAEvents Abrir la clave oobetimer, borrar el valor hexadecimal CA, y cerrar regedit Ir a Inicio, Ejecutar y escribir %systemroot%\\system32\\oobe\\msoobe.exe /a Nos aparecer\u00e1 la pantalla de activaci\u00f3n de Windows XP, seleccionar activaci\u00f3n por tel\u00e9fono, pulsar en Cambiar clave del producto e introducir la nueva clave y pulsar actualizar. (Las claves que comienzan por F o D han sido baneadas por Microsoft en el SP1) Ejecutar de nuevo %systemroot%\\system32\\oobe\\msoobe.exe /a, y con esto finalizar\u00e1 el proceso de activaci\u00f3n Averiguar la clave de producto \u00b6 Por medio de alguno de estos programas: Magical Jelly Bean Keyfinder CD Key Reader Sustituir archivos en uso en Windows XP \u00b6 \"inuse.exe\u201d es una herramienta que anta\u00f1o formaba parte del kit de recursos de Windows 2000, y que con la liberaci\u00f3n de Windows XP Microsoft ha decidido ponerla a disposici\u00f3n de forma gratuita. Su cometido es permitir la sustituci\u00f3n de archivos que est\u00e9n en uso por parte del Sistema Operativo y que de otra manera no podr\u00edan ser sustituidos. Su sintaxis es: INUSE origen destino /y origen: especifica el nombre del archivo actualizado destino: especifica el nombre del archivo existente que ser\u00e1 reemplazado /y elimina la petici\u00f3n de confirmaci\u00f3n para reemplazar el archivo. Nota: los cambios no surtir\u00e1n efecto hasta que reiniciemos el ordenador. Esta utilidad junto a todas las del kit de recursos de Windows 2000 se puede obtener de Windows 2000 Resource Kit Tools . ( Fuente ) Evitar la activaci\u00f3n de Windows XP \u00b6 Como es bien sabido Windows XP debe ser activado despu\u00e9s de su instalaci\u00f3n, porque de lo contrario dejar\u00e1 de funcionar a los 30 d\u00edas. Hasta este punto todo correcto, se instala Windows XP, se activa y listo, pero el problema viene una vez que por cualquier circunstancia hay que formatear el PC o reinstalar Windows, que nuevamente tenemos que activarlo, para evitar esto debemos hacer lo siguiente ( fuente ): Una vez que se activa Windows XP por primera vez, se guarda un archivo en nuestro PC, este archivo debemos copiarlo y guardarlo muy bien para la siguiente vez que borremos el disco duro y as\u00ed evitaremos la activaci\u00f3n nuevamente. Sigue estos pasos para buscar y guardar el archivo que guarda las configuraciones del hardware y la activaci\u00f3n de tu copia de Windows XP. Haces clic con el bot\u00f3n Inicio y a continuaci\u00f3n en Ejecutar. Escribe wpa.dbl y pulsa el boton Aceptar, despu\u00e9s de unos segundos aparecer\u00e1 el archivo en el cuadro buscar. Ahora fijate bien donde est\u00e1 el archivo (normalmente estar\u00e1 en el directorio C:\\Windows\\System32), copia este archivo en un disquete o en cualquier otro lugar del disco duro donde est\u00e9 a salvo de errores y lo puedas conservar hasta que lo necesites. La pr\u00f3xima vez que formatees el disco duro, o por cualquier otra causa necesites activar tu copia de Windows XP simplemente copia el archivo que acabas de guardar al directorio Windows, reinicias y listo ya est\u00e1 activada nuevamente tu copia de Windows XP Evitar colapsos de conexi\u00f3n de red \u00b6 Activar el servicio \"Programador de paquetes QoS\". Se puede configurar el valor de reserva de ancho de banda con: gpedit.msc / Configuraci\u00f3n del equipo / Plantillas administrativas / Red / Programador de paquetes QoS / Limitar ancho de banda reservado Reparar registro de Windows \u00b6 ( Fuente ) Arrancar con la consola de reparaci\u00f3n del CD de instalaci\u00f3n. Copiar los archivos del registro de la versi\u00f3n de instalaci\u00f3n: copy c:\\windows\\repair\\system c:\\windows\\system32\\config\\system copy c:\\windows\\repair\\software c:\\windows\\system32\\config\\software copy c:\\windows\\repair\\sam c:\\windows\\system32\\config\\sam copy c:\\windows\\repair\\security c:\\windows\\system32\\config\\security copy c:\\windows\\repair\\default c:\\windows\\system32\\config\\default Con esta configuraci\u00f3n se puede arrancar en Modo a Prueba de Fallos. Elegir un conjunto de archivos de un punto de restauraci\u00f3n en la ruta: C:\\System Volume Information\\_restore{27BBF476-A824-438F-93A9-39BC37483C34}\\RPn\\Snapshot (el ClassID y el n de RPn son variables) Copiar los siguientes ficheros a una carpeta accesible como C:\\Windows\\tmp renombr\u00e1ndolos como se indica: _REGISTRY_USER_.DEFAULT -> default _REGISTRY_MACHINE_SECURITY -> security _REGISTRY_MACHINE_SOFTWARE -> software _REGISTRY_MACHINE_SYSTEM -> system _REGISTRY_MACHINE_SAM -> sam Volver a arrancar con la consola de reparaci\u00f3n y sustituir los ficheros de C:\\Windows\\tmp a c:\\windows\\system32\\config. Clonado de equipos \u00b6 Instalar un equipo el cual servira de modelo, una vez instalado el sistema operativo y sus parches vamos al paso 2. Extraer el archivo DEPLOY.CAB de [CD_WIN]:\\support\\tools\\ en directorio C:\\sysprep Ejecutar sysprep.exe para crear el sysprep.inf. Existen unos botones al ejecutar sysprep. Darle a Factory. Instalar los programas y todo lo que utilizaran los PCs, una vez terminado esta parte le damos en la opcion de Sellar equipo en sysprep. Hacemos la imagen con Ghost, g4u o similar. Volcamos esta imagen en los demas PCs y sin poner el disquete de sysprep, alli vuelve a pedir los datos del Key de Windows, Nombre de PC y todo lo demas, dejando los programas listos e incluso con sus acesos directos y con el escritorio como en la imagen. Enlaces: \u00b6 Gu\u00eda r\u00e1pida a la preinstalaci\u00f3n de Windows Comandos \u00fatiles \u00b6 Mostrar lista de procesos con servicios asociados: tasklist /svc Lista de conexiones con PID de procesos asociados: netstat -aon Eliminar unidades de red: net use /d A: A\u00f1adir unidades de red: net use A: \\\\Servidor\\Directorio Muestra la diferencia de hora del sistema con un servidor NTP externo: w32tm /stripchart /computer:es.pool.ntp.org /samples:3 /dataonly Utilidad de configuraci\u00f3n del sistema (WinXP): msconfig Bloqueo y desbloqueo del Registro \u00b6 Para deshabilitarlo, accedemos al registro, nos situamos en HKEY_CURENT_USER/Software/Microsoft/Windows/CurrentVersion/Policies/System. En la parte de la derecha creamos un nuevo valor DWORD y le damos el nombre DisableRegistryTools, otorg\u00e1ndole el 1 para deshabilitar las funciones de edici\u00f3n del Registro. Una vez realizada esta operaci\u00f3n, nadie podr\u00e1 acceder a \u00e9l hasta que no lo volvamos a activar. Para habilitarlo, abrimos un editor de texto y escribimos: Windows Registry Editor Version 5.00 [HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\system] \"DisableRegistryTools\"=dword:00000000 Ahora, guardamos el archivo con el nombre unlock.reg y, a partir de ese momento, cuando queramos activar el Registro de Windows, despu\u00e9s de haberlo deshabilitado, s\u00f3lo tendremos que hacer doble clic sobre el archivo que acabamos de crear. Escritorio Remoto / Editar registro con comandos \u00b6 La funcionalidad \"Escritorio Remoto\" se encuentra desactivada por defecto. Se puede activar editando el registro del ordenador que nos interese. Esto se puede hacer remotamente por medio del siguiente comando: reg add \\\\[NombreEquipo]\\HKLM\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent /V EnableRemoteMgmt /T REG_DWORD /F /D 1 Edici\u00f3n ficheros BKS de la utilidad Copia de Seguridad \u00b6 En estos ficheros se almacena la selecci\u00f3n de directorios/ficheros que entran en el backup. Hay que respetar el formato que les da la utilidad cuando los genera. Es texto Unicode, pero si se edita con Notepad no queda exactamente en el formato esperado y luego aparece en el log el error \"No se encontr\u00f3 el archivo de selecci\u00f3n...\". Una forma de conseguirlo es editando con Notepad, guardando en formato \"Codificaci\u00f3n: Unicode\" y luego usar un editor hexadecimal para eliminar los dos primeros bytes que se incluyen con este formato. Procesos de inicio \u00b6 En las siguientes rutas del registro: HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce En el caso de Windows 98 y Windows ME ser\u00e1 necesario revisar tambi\u00e9n en los 2 archivos: WIN.INI Son las entradas que inician con \"run=\" o \"load=\" SYSTEM.INI Son las entradas que inician con \"shell=\" . Hay que tener en cuenta que la \u00fanica entrada legal es shell=Explorer.exe y que alg\u00fan virus podr\u00eda agregar una l\u00ednea del tipo shell=Explorer.exe %Windows% ombredelviruse.exe Otro lugar donde se deber\u00eda revisar son las carpetas de los programas de inicio que por ejemplo en Windows XP ser\u00e1n: C:\\Documents and Settings\\tucuenta\\Men\u00fa Inicio\\Programas\\Inicio C:\\Documents and Settings\\All Users\\Men\u00fa Inicio\\Programas\\Inicio y en Windows 98 ser\u00e1: C:\\Windows\\Men\u00fa Inicio\\Programas\\Inicio ( Fuente ) Ajustes tras instalaci\u00f3n Windows 10 \u00b6 Recien instalado, Windows 10 trae preconfiguradas unas cuantas cosas que estar\u00edan mejor desactivadas. Aqu\u00ed tenemos una lista de ajustes a efectuar tras la instalaci\u00f3n o actualizaci\u00f3n.","title":"Windows"},{"location":"sistemas/trucos_windows.html#trucos-windows","text":"","title":"Trucos Windows"},{"location":"sistemas/trucos_windows.html#acelerar-la-exploracion-de-equipos-en-red-e-incrementar-el-rendimiento-general","text":"Borrar la clave siguiente ( fuente ): HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RemoteComputer\\NameSpace\\{D6277990-4C6A-11CF-8D87-00AA0060F5BF}","title":"Acelerar la exploraci\u00f3n de equipos en red e incrementar el rendimiento general"},{"location":"sistemas/trucos_windows.html#cambiar-la-clave-de-producto-en-windows-xp","text":"Proceder como sigue ( fuente ): Ejecutar regedit y buscar la clave HKEY_LOCAL_MACHINE\\Software\\Microsoft\\WindowsNT\\CurrentVersion\\WPAEvents Abrir la clave oobetimer, borrar el valor hexadecimal CA, y cerrar regedit Ir a Inicio, Ejecutar y escribir %systemroot%\\system32\\oobe\\msoobe.exe /a Nos aparecer\u00e1 la pantalla de activaci\u00f3n de Windows XP, seleccionar activaci\u00f3n por tel\u00e9fono, pulsar en Cambiar clave del producto e introducir la nueva clave y pulsar actualizar. (Las claves que comienzan por F o D han sido baneadas por Microsoft en el SP1) Ejecutar de nuevo %systemroot%\\system32\\oobe\\msoobe.exe /a, y con esto finalizar\u00e1 el proceso de activaci\u00f3n","title":"Cambiar la clave de producto en Windows XP"},{"location":"sistemas/trucos_windows.html#averiguar-la-clave-de-producto","text":"Por medio de alguno de estos programas: Magical Jelly Bean Keyfinder CD Key Reader","title":"Averiguar la clave de producto"},{"location":"sistemas/trucos_windows.html#sustituir-archivos-en-uso-en-windows-xp","text":"\"inuse.exe\u201d es una herramienta que anta\u00f1o formaba parte del kit de recursos de Windows 2000, y que con la liberaci\u00f3n de Windows XP Microsoft ha decidido ponerla a disposici\u00f3n de forma gratuita. Su cometido es permitir la sustituci\u00f3n de archivos que est\u00e9n en uso por parte del Sistema Operativo y que de otra manera no podr\u00edan ser sustituidos. Su sintaxis es: INUSE origen destino /y origen: especifica el nombre del archivo actualizado destino: especifica el nombre del archivo existente que ser\u00e1 reemplazado /y elimina la petici\u00f3n de confirmaci\u00f3n para reemplazar el archivo. Nota: los cambios no surtir\u00e1n efecto hasta que reiniciemos el ordenador. Esta utilidad junto a todas las del kit de recursos de Windows 2000 se puede obtener de Windows 2000 Resource Kit Tools . ( Fuente )","title":"Sustituir archivos en uso en Windows XP"},{"location":"sistemas/trucos_windows.html#evitar-la-activacion-de-windows-xp","text":"Como es bien sabido Windows XP debe ser activado despu\u00e9s de su instalaci\u00f3n, porque de lo contrario dejar\u00e1 de funcionar a los 30 d\u00edas. Hasta este punto todo correcto, se instala Windows XP, se activa y listo, pero el problema viene una vez que por cualquier circunstancia hay que formatear el PC o reinstalar Windows, que nuevamente tenemos que activarlo, para evitar esto debemos hacer lo siguiente ( fuente ): Una vez que se activa Windows XP por primera vez, se guarda un archivo en nuestro PC, este archivo debemos copiarlo y guardarlo muy bien para la siguiente vez que borremos el disco duro y as\u00ed evitaremos la activaci\u00f3n nuevamente. Sigue estos pasos para buscar y guardar el archivo que guarda las configuraciones del hardware y la activaci\u00f3n de tu copia de Windows XP. Haces clic con el bot\u00f3n Inicio y a continuaci\u00f3n en Ejecutar. Escribe wpa.dbl y pulsa el boton Aceptar, despu\u00e9s de unos segundos aparecer\u00e1 el archivo en el cuadro buscar. Ahora fijate bien donde est\u00e1 el archivo (normalmente estar\u00e1 en el directorio C:\\Windows\\System32), copia este archivo en un disquete o en cualquier otro lugar del disco duro donde est\u00e9 a salvo de errores y lo puedas conservar hasta que lo necesites. La pr\u00f3xima vez que formatees el disco duro, o por cualquier otra causa necesites activar tu copia de Windows XP simplemente copia el archivo que acabas de guardar al directorio Windows, reinicias y listo ya est\u00e1 activada nuevamente tu copia de Windows XP","title":"Evitar la activaci\u00f3n de Windows XP"},{"location":"sistemas/trucos_windows.html#evitar-colapsos-de-conexion-de-red","text":"Activar el servicio \"Programador de paquetes QoS\". Se puede configurar el valor de reserva de ancho de banda con: gpedit.msc / Configuraci\u00f3n del equipo / Plantillas administrativas / Red / Programador de paquetes QoS / Limitar ancho de banda reservado","title":"Evitar colapsos de conexi\u00f3n de red"},{"location":"sistemas/trucos_windows.html#reparar-registro-de-windows","text":"( Fuente ) Arrancar con la consola de reparaci\u00f3n del CD de instalaci\u00f3n. Copiar los archivos del registro de la versi\u00f3n de instalaci\u00f3n: copy c:\\windows\\repair\\system c:\\windows\\system32\\config\\system copy c:\\windows\\repair\\software c:\\windows\\system32\\config\\software copy c:\\windows\\repair\\sam c:\\windows\\system32\\config\\sam copy c:\\windows\\repair\\security c:\\windows\\system32\\config\\security copy c:\\windows\\repair\\default c:\\windows\\system32\\config\\default Con esta configuraci\u00f3n se puede arrancar en Modo a Prueba de Fallos. Elegir un conjunto de archivos de un punto de restauraci\u00f3n en la ruta: C:\\System Volume Information\\_restore{27BBF476-A824-438F-93A9-39BC37483C34}\\RPn\\Snapshot (el ClassID y el n de RPn son variables) Copiar los siguientes ficheros a una carpeta accesible como C:\\Windows\\tmp renombr\u00e1ndolos como se indica: _REGISTRY_USER_.DEFAULT -> default _REGISTRY_MACHINE_SECURITY -> security _REGISTRY_MACHINE_SOFTWARE -> software _REGISTRY_MACHINE_SYSTEM -> system _REGISTRY_MACHINE_SAM -> sam Volver a arrancar con la consola de reparaci\u00f3n y sustituir los ficheros de C:\\Windows\\tmp a c:\\windows\\system32\\config.","title":"Reparar registro de Windows"},{"location":"sistemas/trucos_windows.html#clonado-de-equipos","text":"Instalar un equipo el cual servira de modelo, una vez instalado el sistema operativo y sus parches vamos al paso 2. Extraer el archivo DEPLOY.CAB de [CD_WIN]:\\support\\tools\\ en directorio C:\\sysprep Ejecutar sysprep.exe para crear el sysprep.inf. Existen unos botones al ejecutar sysprep. Darle a Factory. Instalar los programas y todo lo que utilizaran los PCs, una vez terminado esta parte le damos en la opcion de Sellar equipo en sysprep. Hacemos la imagen con Ghost, g4u o similar. Volcamos esta imagen en los demas PCs y sin poner el disquete de sysprep, alli vuelve a pedir los datos del Key de Windows, Nombre de PC y todo lo demas, dejando los programas listos e incluso con sus acesos directos y con el escritorio como en la imagen.","title":"Clonado de equipos"},{"location":"sistemas/trucos_windows.html#enlaces","text":"Gu\u00eda r\u00e1pida a la preinstalaci\u00f3n de Windows","title":"Enlaces:"},{"location":"sistemas/trucos_windows.html#comandos-utiles","text":"Mostrar lista de procesos con servicios asociados: tasklist /svc Lista de conexiones con PID de procesos asociados: netstat -aon Eliminar unidades de red: net use /d A: A\u00f1adir unidades de red: net use A: \\\\Servidor\\Directorio Muestra la diferencia de hora del sistema con un servidor NTP externo: w32tm /stripchart /computer:es.pool.ntp.org /samples:3 /dataonly Utilidad de configuraci\u00f3n del sistema (WinXP): msconfig","title":"Comandos \u00fatiles"},{"location":"sistemas/trucos_windows.html#bloqueo-y-desbloqueo-del-registro","text":"Para deshabilitarlo, accedemos al registro, nos situamos en HKEY_CURENT_USER/Software/Microsoft/Windows/CurrentVersion/Policies/System. En la parte de la derecha creamos un nuevo valor DWORD y le damos el nombre DisableRegistryTools, otorg\u00e1ndole el 1 para deshabilitar las funciones de edici\u00f3n del Registro. Una vez realizada esta operaci\u00f3n, nadie podr\u00e1 acceder a \u00e9l hasta que no lo volvamos a activar. Para habilitarlo, abrimos un editor de texto y escribimos: Windows Registry Editor Version 5.00 [HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\system] \"DisableRegistryTools\"=dword:00000000 Ahora, guardamos el archivo con el nombre unlock.reg y, a partir de ese momento, cuando queramos activar el Registro de Windows, despu\u00e9s de haberlo deshabilitado, s\u00f3lo tendremos que hacer doble clic sobre el archivo que acabamos de crear.","title":"Bloqueo y desbloqueo del Registro"},{"location":"sistemas/trucos_windows.html#escritorio-remoto-editar-registro-con-comandos","text":"La funcionalidad \"Escritorio Remoto\" se encuentra desactivada por defecto. Se puede activar editando el registro del ordenador que nos interese. Esto se puede hacer remotamente por medio del siguiente comando: reg add \\\\[NombreEquipo]\\HKLM\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent /V EnableRemoteMgmt /T REG_DWORD /F /D 1","title":"Escritorio Remoto / Editar registro con comandos"},{"location":"sistemas/trucos_windows.html#edicion-ficheros-bks-de-la-utilidad-copia-de-seguridad","text":"En estos ficheros se almacena la selecci\u00f3n de directorios/ficheros que entran en el backup. Hay que respetar el formato que les da la utilidad cuando los genera. Es texto Unicode, pero si se edita con Notepad no queda exactamente en el formato esperado y luego aparece en el log el error \"No se encontr\u00f3 el archivo de selecci\u00f3n...\". Una forma de conseguirlo es editando con Notepad, guardando en formato \"Codificaci\u00f3n: Unicode\" y luego usar un editor hexadecimal para eliminar los dos primeros bytes que se incluyen con este formato.","title":"Edici\u00f3n ficheros BKS de la utilidad Copia de Seguridad"},{"location":"sistemas/trucos_windows.html#procesos-de-inicio","text":"En las siguientes rutas del registro: HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce En el caso de Windows 98 y Windows ME ser\u00e1 necesario revisar tambi\u00e9n en los 2 archivos: WIN.INI Son las entradas que inician con \"run=\" o \"load=\" SYSTEM.INI Son las entradas que inician con \"shell=\" . Hay que tener en cuenta que la \u00fanica entrada legal es shell=Explorer.exe y que alg\u00fan virus podr\u00eda agregar una l\u00ednea del tipo shell=Explorer.exe %Windows% ombredelviruse.exe Otro lugar donde se deber\u00eda revisar son las carpetas de los programas de inicio que por ejemplo en Windows XP ser\u00e1n: C:\\Documents and Settings\\tucuenta\\Men\u00fa Inicio\\Programas\\Inicio C:\\Documents and Settings\\All Users\\Men\u00fa Inicio\\Programas\\Inicio y en Windows 98 ser\u00e1: C:\\Windows\\Men\u00fa Inicio\\Programas\\Inicio ( Fuente )","title":"Procesos de inicio"},{"location":"sistemas/trucos_windows.html#ajustes-tras-instalacion-windows-10","text":"Recien instalado, Windows 10 trae preconfiguradas unas cuantas cosas que estar\u00edan mejor desactivadas. Aqu\u00ed tenemos una lista de ajustes a efectuar tras la instalaci\u00f3n o actualizaci\u00f3n.","title":"Ajustes tras instalaci\u00f3n Windows 10"},{"location":"sistemas/ubuntu.html","text":"Ubuntu \u00b6 Aplicaciones interesantes \u00b6 ReText : Editor Markdown. Franz : Configuraci\u00f3n de icono en GNome . App Grid : Repositorio de aplicaciones. OpenWeather Shell Extension : Informaci\u00f3n del tiempo meteorol\u00f3gico en la barra de men\u00fa. Servicios interesantes \u00b6 KodExplorer Gitea Problema con aplicaciones root en Wayland \u00b6 Hay que ejecutar el comando: 1 xhost si:localuser:root Se puede automatizar en el arranque a\u00f1adiendo el comando en las Aplicaciones al incio ( fuente ). Configuraci\u00f3n de opci\u00f3n predeterminada en GRUB \u00b6 Fuente Editar fichero /etc/default/grub y modificar el par\u00e1metro GRUB_DEFAULT dando el valor saved en lugar del valor num\u00e9rico que encontraremos. Ejecutar sudo update-grub . Ejecutar sudo grub-set-default N siendo N la posici\u00f3n de la entrada del men\u00fa de GRUB que queremos que act\u00fae como predeterminada (contando desde 0). Problemas con GRUB \u00b6 Reinstalar GRUB 2 Soluci\u00f3n problemas wifi en 11.04 y 11.10 \u00b6 Help with Ubuntu: Fix slow WiFi in Ubuntu 11.04 Soluci\u00f3n problema Wireshark en trusty y utopic \u00b6 liboverlay-scrollbar hangs Wireshark Actualizaci\u00f3n de Intrepid a Jaunty \u00b6 Tras actualizar de Intrepid a Jaunty se observa un empobrecimiento del rendimiento gr\u00e1fico en equipos con gr\u00e1ficas integradas Intel 945. En las siguientes p\u00e1ginas explican como hacer downgrade al controlador Intel que hab\u00eda en Intrepid: https://wiki.ubuntu.com/ReinhardTartler/X/RevertingIntelDriverTo2.4 http://www.astaroth.glufca.com/?p=346 Otro truco que tambi\u00e9n funcion\u00f3 sin necesidad de hacer lo anterior fue reconfigurar xorg a la configuraci\u00f3n por defecto y luego en la composici\u00f3n de m\u00faltiples monitores, situar uno debajo del otro en lugar de uno al lado del otro. Actualizaci\u00f3n de raring a saucy \u00b6 Apache cambia de versi\u00f3n de 2.2 a 2.4. Aqu\u00ed encontr\u00e9 soluci\u00f3n a los problemas que eso supuso. Recursos gr\u00e1ficos \u00b6 /usr/share/icons /usr/share/app-install/icons /usr/share/pixmaps /usr/share/icons/gnome /usr/share/icons/hicolor /usr/share/icons/Human /usr/share/icons/Humanity <--- /usr/share/icons/oxygen /usr/share/icons/default.kde4 <--- Convertir un video a formato 3GP (H263+AAC) \u00b6 Instalar un repositorio no oficial que contiene los codecs: $ sudo -E wget --output-document = /etc/apt/sources.list.d/medibuntu.list http://www.medibuntu.org/sources.list.d/ $( lsb_release -cs ) .list && sudo apt-get --quiet update && sudo apt-get --yes --quiet --allow-unauthenticated install medibuntu-keyring && sudo apt-get --quiet update Instalar el codificador y los codecs: $ sudo aptitude install ffmpeg libavcodec-extra-53 Codificar el video: $ ffmpeg -i EspacioMudejar.wmv -s qcif -vcodec h263 -acodec libfaac -ac 1 -ar 8000 -r 25 -ab 32 -strict experimental -y EspacioMudejar.3gp Las opciones m\u00e1s importantes son: ar: Frecuencia de audio r: framerate ab: Audio bitrate en kbps Convertir APE a WAV \u00b6 Los ficheros .ape con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .ape se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete ffmpeg y ejecutando el siguiente comando: $ ffmpeg -i fichero.ape fichero.wav Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .ape por el nuevo .wav. Convertir FLAC a WAV \u00b6 Los ficheros .flac con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .flac se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete flac y ejecutando el siguiente comando: $ flac -d fichero.flac Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .flac por el nuevo .wav. Restaurar panel Gnome \u00b6 ( fuente 1 ; fuente 2 ) $ gconftool --recursive-unset /apps/panel $ rm -rf ~/.gconf/apps/panel $ pkill gnome-panel Concatenar PDF's \u00b6 Con pdftk programa en linea de comando para procesar ficheros PDF. Est\u00e1 para casi todas las plataformas. $ sudo aptitude search pdftk i pdftk - A useful tool for manipulating PDF documents $ sudo aptitude install pdftk Concatenar todos los archivos facilmente que tengas en una carpeta: $ pdftk carpeta_con_todos_ficheros/*.pdf cat output fichero_concatenado.pdf Tiene muchas mas funcionalidades consultables con \u2013help, pero si quieres, puedes echarle un vistazo a un articulo de Linux-Magazine \u201cPDF a tope\u201d . APOD \u00b6 Programa para descargar y ajustar como fondo de escritorio la imagen astron\u00f3mica del d\u00eda de la web APOD . Es necesario que se encuentre Python instalado en el sistema. Instalar el siguiente script en alg\u00fan lugar: #!/usr/bin/python #APOD in the GNOME desktop #Author: Rodrigo Rivas Costa. #Mail: rodrigorivascosta@gmail.com #Web: http://rodrigo.dualnot.com/ # This program is in public domain, so do whatever you wish with it, # although it'd be nice if you keep the above notice. # Just don't blame me if it blows your computer. import urllib import gconf import os dir = os.getenv ( 'HOME' ) + '/.apod' try: os.mkdir ( dir ) except: pass try: execfile ( dir + '/options.py' ) except: pass def DoAPOD () : u = urllib.urlopen ( 'http://apod.nasa.gov/apod/' ) KEY1 = 'href=\"' KEY2 = '\"' image = None for line in u.readlines () : pos1 = line.find ( KEY1 ) if pos1 == -1: continue pos1 += len ( KEY1 ) pos2 = line.find ( KEY2, pos1 ) if pos2 == -1: continue href = line [ pos1:pos2 ] hrefl = href.lower () if hrefl.endswith ( '.jpg' ) or hrefl.endswith ( '.png' ) : image = href break u.close () if not image: return image_base = os.path.split ( image )[ -1 ] image_base_ext = os.path.splitext ( image_base ) image_base = 'apod' + image_base_ext [ -1 ] if not ( image.startswith ( 'http:' ) or image.startswith ( 'ftp:' )) : if not image.startswith ( '/' ) : image = '/apod.nasa.gov/apod/' + image image = 'http:/' + image img = urllib.urlopen ( image ) d = img.read () img.close () try: os.unlink ( 'apod.jpg' ) except: pass try: os.unlink ( 'apod.png' ) except: pass name = dir + '/' + image_base f = file ( name, 'wb' ) f.write ( d ) f.close () cli = gconf.client_get_default () cli.set_string ( '/desktop/gnome/background/picture_filename' , name ) cli.set_string ( '/desktop/gnome/background/picture_options' , 'zoom' ) if __name__ == '__main__' : DoAPOD () Por \u00faltimo programar una tarea en cron para ejecutar el script con el usuario al que queramos que se aplique el fondo de escritorio. Por ejemplo introduciendo la siguiente l\u00ednea en /etc/crontab para que se ejecute a las 10 de la ma\u00f1ana: 00 10 * * * edumoreno /home/edumoreno/.apod/apod En el ejemplo se ha puesto como ejemplo el usuario edumoreno as\u00ed como su home. Instalar Oracle Java \u00b6 (Fuentes: 1 y 2 ) Movemos la carpeta creada despu\u00e9s de la instalaci\u00f3n (llamada jre1.7.0_05 en este ejemplo) a una ruta m\u00e1s apropiada: $ sudo mv jre1.7.0_05 /usr/lib/jvm Establecemos el nuevo Java como una de las \"alternativas de java\": $ sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jre1.7.0_05/bin/java\" 1 Ahora establecemos la \"nueva alternativa\" como la real de Java. Este paso hace que la versi\u00f3n de Oracle sea la usada por defecto: $ sudo update-alternatives --set java /usr/lib/jvm/jre1.7.0_05/bin/java Para comprobar si tenemos la versi\u00f3n 1.7.0, tecleamos en la terminal: $ java -version java version \"1.7.0_05\" Java ( TM ) SE Runtime Environment ( build 1 .7.0_05-b05 ) Java HotSpot ( TM ) 64 -Bit Server VM ( build 23 .1-b03, mixed mode ) Para ver c\u00f3mo ha quedado el estado de las alternativas: $ update-alternatives --config java Para ver f\u00edsicamente c\u00f3mo han quedado las alternativas relativas a java : $ ls -l /etc/alternatives/java* Si nos interesa borrar alguna de las alternativas (por ejemplo una para java ): $ sudo update-alternatives --remove java /usr/lib/jvm/jdk1.8.0_20/bin/java Hay un PPA para poder instalar el JDK m\u00e1s f\u00e1cilmente. Se pueden ver las instrucciones aqu\u00ed . Desafortunadamente dej\u00f3 de funcionar a mediados de abril de 2019 por cambios en la pol\u00edtica de distribuci\u00f3n de Java por parte de Oracle. A partir de ahora instalar manualmente siguiendo estas instrucciones o instalar el JDK que se distribuye en forma de .deb . Reparaci\u00f3n del sistema de archivos cuando se pone en modo \"s\u00f3lo lectura\" \u00b6 $ sudo fsck Descarga de un v\u00eddeo incrustado en un reproductor Flash \u00b6 Fuente Hacer captura Wireshark. Filtrar los paquetes RTMP con el filtro: \"rtmpt\". Localizar en los paquetes RTMP los comandos Handshake o Invoke la base de la url, lo que est\u00e1 en una propiedad llamada \"tcUrl\". Por ejemplo en un v\u00eddeo de Antena3 de F1 esta propiedad val\u00eda: rtmp://antena3tvfs.fplive.net/antena3mediateca Luego localizar el fichero en concreto. Suele estar en otro paquete y est\u00e1 relacionado con el comando \"play\". En el caso del ejemplo anterior sal\u00eda: mp4:mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4 Unir las dos piezas para construir la URL completa: rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4 Descargar el stream con el comando \"rtmpdump\": $ rtmpdump -r \"rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\" -o archivo.mp4 En ocasiones se produce el error siguiente: WARNING: Received FLV packet before play()! Ignoring. En estos casos utilizar el siguiente comando que separa las dos porciones de la URL: $ rtmpdump -r \"rtmp://alacarta.aragontelevision.es/vod\" -y \"mp4:/_archivos/videos/web/15288/15288.mp4\" -o archivo.flv Para v\u00eddeos de emisiones en vivo hay que a\u00f1adir la opci\u00f3n -v . Por ejemplo, en una emisi\u00f3n de Arag\u00f3nTV, en la captura Wireshark se localizaron los siguientes elementos: Paquete Handshake S2 => tcUrl = rtmp://aragontvlivefs.fplive.net/aragontvlive-live Paquete play => valor = stream_normal_abt As\u00ed pues la URL final ser\u00e1: rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt y el comando de descarga: $ rtmpdump -v -r \"rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt\" -o archivo.mp4 Para descargar v\u00eddeos desde YouTube, last.fm, Google video, Dailymotion y Vimeo se puede utilizar el comando clive . Aqu\u00ed comentan c\u00f3mo se usa. Descarga v\u00eddeo de A3Player \u00b6 Enlaces \u00b6 C\u00f3mo descargar v\u00eddeos en formato M3U8 (o HLS) http live streaming player Las carreras de Formula1 \u00faltimamente son emitidas en el formato HLS. Para descargar una carrera empezar haciendo una captura con Wireshark desde el momento en que se le da al Play hasta que se empieza a ver parte del v\u00eddeo (esperando que terminen los anuncios). Luego filtrar en Wireshark con la siguiente expresi\u00f3n: http.request.uri contains \"playlist.m3u8\" Localizar la URL de descarga del fichero playlist.m3u8. Por ejemplo podr\u00eda ser: http://geodeswowa3player.antena3.com/vcg/_definst_/mp4:assets3/2013/10/26/E6941C5D-2A9F-414B-B3FF-01FAC33073C4/sigra.mp4/playlist.m3u8?pulse=assets3%2F2013%2F10%2F26%2FE6941C5D-2A9F-414B-B3FF-01FAC33073C4%2F%7C1382835190%7Cb23df1201096fc1cc490427e05307f70 Compresi\u00f3n batch de v\u00eddeos \u00b6 Instalar el cliente de linea de comando de Handbrake . Dependiendo de la extensi\u00f3n habr\u00e1 que cambiar el ls inicial. Los v\u00eddeos de salida son MP4, por lo que si la extensi\u00f3n inicial no es esa, habr\u00e1 que cambiarla en los ficheros finales. $ mkdir comp $ ls *.mp4 | awk '{print \"HandBrakeCLI -Z Normal -i \"$0\" -o comp/\"$0}' | sh Resampleado de video con HandBrake \u00b6 ( Fuente ) On the Video tab use Avg Bitrate and use 2500 to 3000 depending if a big action movie(3000) or if less fast action/movement in the movie(2500). Make sure to click on 2-Pass Encoding and Turbo first pass. Split de v\u00eddeos \u00b6 ( Fuente ) Con el siguiente comando: $ ffmpeg -acodec copy -vcodec copy -ss 00 :00:00 -t 00 :04:09 -i archivo_original.mp4 archivo_recortado.mp4 Donde el valor de la opci\u00f3n -ss es el instante de inicio en hh:mm:ss y el valor de -t es la longitud en hh:mm:ss Durante un tiempo en Ubuntu, ffmpeg no estuvo disponible. Su sustituto fue avconv , compatible la mayor\u00eda de las veces. No admit\u00eda sin embargo la opci\u00f3n de copiar el codec de audio y v\u00eddeo. Hab\u00eda que especificarlo. Una lista de encoders soportados se puede obtener ejecutando: $ avconv -encoders Un par de codecs comprobados que suelen dar buen resultados son h264 y aac: ffmpeg -acodec aac -vcodec h264 -ss 01 :07:38 -t 00 :01:14 -i archivo_original.mp4 archivo_recortado.mp4 Crop en video \u00b6 $ ffmpeg -i input.mp4 -filter:v \"crop=w:h:x:y\" output.mp4 donde: w: ancho final h: alto final x: coordenada x del punto superior izquierdo del recuadro y: coordenada y del punto superior izquierdo del recuadro Extraer frame de video \u00b6 $ ffmpeg -ss 00 :01:00 -i input.mp4 -frames:v 1 frame.png donde el argumento -ss marca el instante del frame en hh:mm:ss Redimensionado de im\u00e1genes en lote \u00b6 Por ejemplo a 1080 de alto manteniendo el ratio dentro de un directorio llamado resized: $ convert '*.jpg[x1080]' resized/%03d.jpg En ocasiones, si hay varios miles de fotos, se puede llenar la memoria. En este caso hacer la conversi\u00f3n con el siguiente comando, que trata las im\u00e1genes una a una: a = 1 for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) convert ${ i } [ x1080 ] resized/ ${ new } let a = a+1 done Crop y resize de im\u00e1genes en lote \u00b6 a = 1 for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) convert ${ i } -crop wxh+x+y -resize wsxhs -gravity Center ${ new } let a = a+1 done donde: w: ancho del crop h: alto del crop x: posici\u00f3n horizontal esquina superior derecha del crop y: posici\u00f3n vertical esquina superior derecha del crop ws: ancho del reescalado final hs: alto del reescalado final Conversi\u00f3n de formato en lote \u00b6 for file in *.jpg ; do filename = $( basename \" $file \" ) fileid = ${ filename %%.* } convert ${ filename } ${ fileid } .png done Renombrado de archivos en lote \u00b6 Por ejemplo una serie de archivos jpg: a = 1 for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) mv ${ i } ${ new } let a = a+1 done Compresi\u00f3n de ficheros en lote \u00b6 for file in *.col ; do filename = $( basename \" ${ file } \" ) fileid = ${ filename %%.* } 7z a \" ${ fileid } .7z\" \" ${ filename } \" done Sustituci\u00f3n de cadena en ficheros en lote \u00b6 for file in *.cfg ; do filename = $( basename \" ${ file } \" ) fileid = ${ filename %%.* } sed -i 's/ShowFps 1/ShowFps 0/' \" ${ file } \" done Montaje de v\u00eddeo StopMotion a partir de im\u00e1genes \u00b6 A 10fps por ejemplo ( Fuente ): $ ffmpeg -f image2 -r 10 -i %04d.jpg -vf scale = 1440 :1080 -r:v 10 -c:v libx264 -qp 0 -preset veryslow -an \"video.mkv\" Montaje de gif a partir de im\u00e1genes \u00b6 convert -delay n -loop 0 *.jpg output.gif donde: n: milisegundos entre cada frame. Configurar Wireshark para poder capturar con usuarios no-root \u00b6 Ejecutar lo siguiente: $ sudo dpkg-reconfigure wireshark-common $ sudo usermod -a -G wireshark <usuario> Reiniciar la sesi\u00f3n. Solucionar el problema con Wireshark en las \u00faltimas versiones de Ubuntu \u00b6 Cuando se inicia una captura, se cuelga Wireshark, emitiendo una serie infinita de errores de GTK en consola. En esta p\u00e1gina comentan varios workarrounds. Por ejemplo editando el fichero /usr/share/applications/wireshark.desktop y cambiando la l\u00ednea de ejecuci\u00f3n por: 1 Exec=env LIBOVERLAY_SCROLLBAR=0 wireshark %f Ficheros implicados en arranque \u00b6 /etc/rc.local : This script is executed at the end of each multiuser runlevel. Montar imagen de disco o partici\u00f3n \u00b6 ( Fuente ) Averiguar la estructura de las particiones: $ fdisk -l Rpi_8gb_wheezy_backup.img Disco Rpi_8gb_wheezy_backup.img: 7 ,5 GiB, 8068792320 bytes, 15759360 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector ( l\u00f3gico/f\u00edsico ) : 512 bytes / 512 bytes Tama\u00f1o de E/S ( m\u00ednimo/\u00f3ptimo ) : 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x000981cb Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo Rpi_8gb_wheezy_backup.img1 8192 122879 114688 56M c W95 FAT32 ( LBA ) Rpi_8gb_wheezy_backup.img2 122880 15759359 15636480 7 ,5G 83 Linux Calcular el offset multiplicando el sector de comienzo de la partici\u00f3n por el tama\u00f1o del sector: 122880 * 512 = 62914560 Montar: $ sudo mount -t ext4 -o loop,offset = 62914560 ,ro,noexec Rpi_8gb_wheezy_backup.img mnt Screencast \u00b6 $ avconv -f x11grab -r 25 -s 910x550 -i :0.0 -vcodec huffyuv screencast.avi Gesti\u00f3n de m\u00f3dulos \u00b6 A\u00f1adir un m\u00f3dulo al kernel \u00b6 $ sudo modprobe <modulo> Si se quiere a\u00f1adir de forma permanente, es decir, de forma autom\u00e1tica en el arranque, se incorpora el nombre del m\u00f3dulo al fichero /etc/modules . Cuando el m\u00f3dulo que se carga es un driver de un dispositivo, el kernel env\u00eda un evento al subsistema udev . La monitorizaci\u00f3n de estos mensajes se puede hacer teniendo abierto un terminal con el siguiente comando lanzado ( fuente ): $ udevadm monitor --property Listado de m\u00f3dulos \u00b6 $ lsmod Informaci\u00f3n de un m\u00f3dulo \u00b6 $ modinfo <modulo> Ficheros definici\u00f3n variables de entorno \u00b6 Si se necesita definir una variable global se podr\u00e1 hacer en los ficheros: /etc/environment /etc/profile /etc/profile.d /etc/bashrc o /etc/bash.bashrc Si es a nivel de usuario se har\u00e1 en: ~/.bashrc ~/.bash_profile Poner barras de scroll normales \u00b6 gsettings set com.canonical.desktop.interface scrollbar-mode normal Skype en tray \u00b6 Instalar los paquetes sni-qt y sni-qt:i386 . Workrave en tray \u00b6 Fuente gsettings set com.canonical.Unity.Panel systray-whitelist \"['all']\" Localizaci\u00f3n de ficheros .desktop \u00b6 Los del usuario se encuentran en: ~/.local/share/applications Los del sistema en: /usr/share/applications Configuraci\u00f3n de gedit \u00b6 Al menos las \u00faltimas versiones de gedit no tienen un panel de ajustes para las opciones predeterminadas. Cada vez que arranca aparecen preajustados 8 espacios como anchura del tabulador y no sustituye por espacios. Puede sacarse una lista de todos los ajustes que se pueden cambiar con el siguiente comando: gsettings list-recursively | grep -i gedit.preferences.editor Los ajustes del tabulador mencionados antes, para pasar a 4 espacios, ejecutar: gsettings set org.gnome.gedit.preferences.editor insert-spaces true gsettings set org.gnome.gedit.preferences.editor tabs-size 4 Otro ajuste interesante es el del wrap mode. Se puede hacer con (puede valer 'none', 'word', 'char', o 'word-char'): gsettings set org.gnome.gedit.preferences.editor wrap-mode 'word' Localizar paquete que contiene un fichero \u00b6 ( Fuente ) Instalar apt-file : $ sudo apt-get install apt-file Actualizar su base de datos: $ sudo apt-file update Hacer la b\u00fasqueda: $ apt-file search <fichero_con_ruta> Configuraci\u00f3n de idiomas del sistema (locales) \u00b6 $ sudo dpkg-reconfigure locales Configuraci\u00f3n de SWAP en disco SSD \u00b6 Siguiendo [esta p\u00e1gina], a\u00f1ado lo siguiente al fichero /etc/sysctl.conf para bajar el 60% que usa Ubuntu por defecto a 10%: vm.swappiness=10 Buscar paquetes \u00b6 Encontrar un paquete por su nombre: apt-cache search 'cadena' Encontrar un paquete que contiene un fichero: apt-file search 'fichero' Limpieza de paquetes snap \u00b6 Localizar los paquetes desactivados con: $ snap list --all|fgrep desactivado Y luego borrarlos con: $ snap remove --revision XXX NOMBRE Por ejemplo: edumoreno@eduardo-HP-Folio-13:~$ snap list --all|fgrep desactivado canonical-livepatch 9.7.3 105 latest/stable canonical* desactivado chromium 94.0.4606.81 1781 latest/stable canonical* desactivado edumoreno@eduardo-HP-Folio-13:~$ snap remove --revision 105 canonical-livepatch canonical-livepatch (revisi\u00f3n 105) eliminado edumoreno@eduardo-HP-Folio-13:~$ snap remove --revision 1781 chromium chromium (revisi\u00f3n 1781) eliminado Montar ext4 para usuario \u00b6 Normalmente al automontar una partici\u00f3n ext4 se respetar\u00e1n los ID's de los propietarios:grupos de los ficheros. Para montar temporalmente con permisos ajustados para un usuario, utilizar bindfs de esta forma: # El punto de partida es una partici\u00f3n automontada de esta forma: # /dev/sdb1 306616440 64348 290907216 1% /media/edumoreno/47acea17-841f-42d3-85f2-886543f056db sudo bindfs -u $( id -u ) -g $( id -g ) /media/edumoreno/47acea17-841f-42d3-85f2-886543f056db /home/edumoreno/mnt/","title":"Ubuntu"},{"location":"sistemas/ubuntu.html#ubuntu","text":"","title":"Ubuntu"},{"location":"sistemas/ubuntu.html#aplicaciones-interesantes","text":"ReText : Editor Markdown. Franz : Configuraci\u00f3n de icono en GNome . App Grid : Repositorio de aplicaciones. OpenWeather Shell Extension : Informaci\u00f3n del tiempo meteorol\u00f3gico en la barra de men\u00fa.","title":"Aplicaciones interesantes"},{"location":"sistemas/ubuntu.html#servicios-interesantes","text":"KodExplorer Gitea","title":"Servicios interesantes"},{"location":"sistemas/ubuntu.html#problema-con-aplicaciones-root-en-wayland","text":"Hay que ejecutar el comando: 1 xhost si:localuser:root Se puede automatizar en el arranque a\u00f1adiendo el comando en las Aplicaciones al incio ( fuente ).","title":"Problema con aplicaciones root en Wayland"},{"location":"sistemas/ubuntu.html#configuracion-de-opcion-predeterminada-en-grub","text":"Fuente Editar fichero /etc/default/grub y modificar el par\u00e1metro GRUB_DEFAULT dando el valor saved en lugar del valor num\u00e9rico que encontraremos. Ejecutar sudo update-grub . Ejecutar sudo grub-set-default N siendo N la posici\u00f3n de la entrada del men\u00fa de GRUB que queremos que act\u00fae como predeterminada (contando desde 0).","title":"Configuraci\u00f3n de opci\u00f3n predeterminada en GRUB"},{"location":"sistemas/ubuntu.html#problemas-con-grub","text":"Reinstalar GRUB 2","title":"Problemas con GRUB"},{"location":"sistemas/ubuntu.html#solucion-problemas-wifi-en-1104-y-1110","text":"Help with Ubuntu: Fix slow WiFi in Ubuntu 11.04","title":"Soluci\u00f3n problemas wifi en 11.04 y 11.10"},{"location":"sistemas/ubuntu.html#solucion-problema-wireshark-en-trusty-y-utopic","text":"liboverlay-scrollbar hangs Wireshark","title":"Soluci\u00f3n problema Wireshark en trusty y utopic"},{"location":"sistemas/ubuntu.html#actualizacion-de-intrepid-a-jaunty","text":"Tras actualizar de Intrepid a Jaunty se observa un empobrecimiento del rendimiento gr\u00e1fico en equipos con gr\u00e1ficas integradas Intel 945. En las siguientes p\u00e1ginas explican como hacer downgrade al controlador Intel que hab\u00eda en Intrepid: https://wiki.ubuntu.com/ReinhardTartler/X/RevertingIntelDriverTo2.4 http://www.astaroth.glufca.com/?p=346 Otro truco que tambi\u00e9n funcion\u00f3 sin necesidad de hacer lo anterior fue reconfigurar xorg a la configuraci\u00f3n por defecto y luego en la composici\u00f3n de m\u00faltiples monitores, situar uno debajo del otro en lugar de uno al lado del otro.","title":"Actualizaci\u00f3n de Intrepid a Jaunty"},{"location":"sistemas/ubuntu.html#actualizacion-de-raring-a-saucy","text":"Apache cambia de versi\u00f3n de 2.2 a 2.4. Aqu\u00ed encontr\u00e9 soluci\u00f3n a los problemas que eso supuso.","title":"Actualizaci\u00f3n de raring a saucy"},{"location":"sistemas/ubuntu.html#recursos-graficos","text":"/usr/share/icons /usr/share/app-install/icons /usr/share/pixmaps /usr/share/icons/gnome /usr/share/icons/hicolor /usr/share/icons/Human /usr/share/icons/Humanity <--- /usr/share/icons/oxygen /usr/share/icons/default.kde4 <---","title":"Recursos gr\u00e1ficos"},{"location":"sistemas/ubuntu.html#convertir-un-video-a-formato-3gp-h263aac","text":"Instalar un repositorio no oficial que contiene los codecs: $ sudo -E wget --output-document = /etc/apt/sources.list.d/medibuntu.list http://www.medibuntu.org/sources.list.d/ $( lsb_release -cs ) .list && sudo apt-get --quiet update && sudo apt-get --yes --quiet --allow-unauthenticated install medibuntu-keyring && sudo apt-get --quiet update Instalar el codificador y los codecs: $ sudo aptitude install ffmpeg libavcodec-extra-53 Codificar el video: $ ffmpeg -i EspacioMudejar.wmv -s qcif -vcodec h263 -acodec libfaac -ac 1 -ar 8000 -r 25 -ab 32 -strict experimental -y EspacioMudejar.3gp Las opciones m\u00e1s importantes son: ar: Frecuencia de audio r: framerate ab: Audio bitrate en kbps","title":"Convertir un video a formato 3GP (H263+AAC)"},{"location":"sistemas/ubuntu.html#convertir-ape-a-wav","text":"Los ficheros .ape con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .ape se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete ffmpeg y ejecutando el siguiente comando: $ ffmpeg -i fichero.ape fichero.wav Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .ape por el nuevo .wav.","title":"Convertir APE a WAV"},{"location":"sistemas/ubuntu.html#convertir-flac-a-wav","text":"Los ficheros .flac con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .flac se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete flac y ejecutando el siguiente comando: $ flac -d fichero.flac Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .flac por el nuevo .wav.","title":"Convertir FLAC a WAV"},{"location":"sistemas/ubuntu.html#restaurar-panel-gnome","text":"( fuente 1 ; fuente 2 ) $ gconftool --recursive-unset /apps/panel $ rm -rf ~/.gconf/apps/panel $ pkill gnome-panel","title":"Restaurar panel Gnome"},{"location":"sistemas/ubuntu.html#concatenar-pdfs","text":"Con pdftk programa en linea de comando para procesar ficheros PDF. Est\u00e1 para casi todas las plataformas. $ sudo aptitude search pdftk i pdftk - A useful tool for manipulating PDF documents $ sudo aptitude install pdftk Concatenar todos los archivos facilmente que tengas en una carpeta: $ pdftk carpeta_con_todos_ficheros/*.pdf cat output fichero_concatenado.pdf Tiene muchas mas funcionalidades consultables con \u2013help, pero si quieres, puedes echarle un vistazo a un articulo de Linux-Magazine \u201cPDF a tope\u201d .","title":"Concatenar PDF's"},{"location":"sistemas/ubuntu.html#apod","text":"Programa para descargar y ajustar como fondo de escritorio la imagen astron\u00f3mica del d\u00eda de la web APOD . Es necesario que se encuentre Python instalado en el sistema. Instalar el siguiente script en alg\u00fan lugar: #!/usr/bin/python #APOD in the GNOME desktop #Author: Rodrigo Rivas Costa. #Mail: rodrigorivascosta@gmail.com #Web: http://rodrigo.dualnot.com/ # This program is in public domain, so do whatever you wish with it, # although it'd be nice if you keep the above notice. # Just don't blame me if it blows your computer. import urllib import gconf import os dir = os.getenv ( 'HOME' ) + '/.apod' try: os.mkdir ( dir ) except: pass try: execfile ( dir + '/options.py' ) except: pass def DoAPOD () : u = urllib.urlopen ( 'http://apod.nasa.gov/apod/' ) KEY1 = 'href=\"' KEY2 = '\"' image = None for line in u.readlines () : pos1 = line.find ( KEY1 ) if pos1 == -1: continue pos1 += len ( KEY1 ) pos2 = line.find ( KEY2, pos1 ) if pos2 == -1: continue href = line [ pos1:pos2 ] hrefl = href.lower () if hrefl.endswith ( '.jpg' ) or hrefl.endswith ( '.png' ) : image = href break u.close () if not image: return image_base = os.path.split ( image )[ -1 ] image_base_ext = os.path.splitext ( image_base ) image_base = 'apod' + image_base_ext [ -1 ] if not ( image.startswith ( 'http:' ) or image.startswith ( 'ftp:' )) : if not image.startswith ( '/' ) : image = '/apod.nasa.gov/apod/' + image image = 'http:/' + image img = urllib.urlopen ( image ) d = img.read () img.close () try: os.unlink ( 'apod.jpg' ) except: pass try: os.unlink ( 'apod.png' ) except: pass name = dir + '/' + image_base f = file ( name, 'wb' ) f.write ( d ) f.close () cli = gconf.client_get_default () cli.set_string ( '/desktop/gnome/background/picture_filename' , name ) cli.set_string ( '/desktop/gnome/background/picture_options' , 'zoom' ) if __name__ == '__main__' : DoAPOD () Por \u00faltimo programar una tarea en cron para ejecutar el script con el usuario al que queramos que se aplique el fondo de escritorio. Por ejemplo introduciendo la siguiente l\u00ednea en /etc/crontab para que se ejecute a las 10 de la ma\u00f1ana: 00 10 * * * edumoreno /home/edumoreno/.apod/apod En el ejemplo se ha puesto como ejemplo el usuario edumoreno as\u00ed como su home.","title":"APOD"},{"location":"sistemas/ubuntu.html#instalar-oracle-java","text":"(Fuentes: 1 y 2 ) Movemos la carpeta creada despu\u00e9s de la instalaci\u00f3n (llamada jre1.7.0_05 en este ejemplo) a una ruta m\u00e1s apropiada: $ sudo mv jre1.7.0_05 /usr/lib/jvm Establecemos el nuevo Java como una de las \"alternativas de java\": $ sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jre1.7.0_05/bin/java\" 1 Ahora establecemos la \"nueva alternativa\" como la real de Java. Este paso hace que la versi\u00f3n de Oracle sea la usada por defecto: $ sudo update-alternatives --set java /usr/lib/jvm/jre1.7.0_05/bin/java Para comprobar si tenemos la versi\u00f3n 1.7.0, tecleamos en la terminal: $ java -version java version \"1.7.0_05\" Java ( TM ) SE Runtime Environment ( build 1 .7.0_05-b05 ) Java HotSpot ( TM ) 64 -Bit Server VM ( build 23 .1-b03, mixed mode ) Para ver c\u00f3mo ha quedado el estado de las alternativas: $ update-alternatives --config java Para ver f\u00edsicamente c\u00f3mo han quedado las alternativas relativas a java : $ ls -l /etc/alternatives/java* Si nos interesa borrar alguna de las alternativas (por ejemplo una para java ): $ sudo update-alternatives --remove java /usr/lib/jvm/jdk1.8.0_20/bin/java Hay un PPA para poder instalar el JDK m\u00e1s f\u00e1cilmente. Se pueden ver las instrucciones aqu\u00ed . Desafortunadamente dej\u00f3 de funcionar a mediados de abril de 2019 por cambios en la pol\u00edtica de distribuci\u00f3n de Java por parte de Oracle. A partir de ahora instalar manualmente siguiendo estas instrucciones o instalar el JDK que se distribuye en forma de .deb .","title":"Instalar Oracle Java"},{"location":"sistemas/ubuntu.html#reparacion-del-sistema-de-archivos-cuando-se-pone-en-modo-solo-lectura","text":"$ sudo fsck","title":"Reparaci\u00f3n del sistema de archivos cuando se pone en modo \"s\u00f3lo lectura\""},{"location":"sistemas/ubuntu.html#descarga-de-un-video-incrustado-en-un-reproductor-flash","text":"Fuente Hacer captura Wireshark. Filtrar los paquetes RTMP con el filtro: \"rtmpt\". Localizar en los paquetes RTMP los comandos Handshake o Invoke la base de la url, lo que est\u00e1 en una propiedad llamada \"tcUrl\". Por ejemplo en un v\u00eddeo de Antena3 de F1 esta propiedad val\u00eda: rtmp://antena3tvfs.fplive.net/antena3mediateca Luego localizar el fichero en concreto. Suele estar en otro paquete y est\u00e1 relacionado con el comando \"play\". En el caso del ejemplo anterior sal\u00eda: mp4:mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4 Unir las dos piezas para construir la URL completa: rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4 Descargar el stream con el comando \"rtmpdump\": $ rtmpdump -r \"rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\" -o archivo.mp4 En ocasiones se produce el error siguiente: WARNING: Received FLV packet before play()! Ignoring. En estos casos utilizar el siguiente comando que separa las dos porciones de la URL: $ rtmpdump -r \"rtmp://alacarta.aragontelevision.es/vod\" -y \"mp4:/_archivos/videos/web/15288/15288.mp4\" -o archivo.flv Para v\u00eddeos de emisiones en vivo hay que a\u00f1adir la opci\u00f3n -v . Por ejemplo, en una emisi\u00f3n de Arag\u00f3nTV, en la captura Wireshark se localizaron los siguientes elementos: Paquete Handshake S2 => tcUrl = rtmp://aragontvlivefs.fplive.net/aragontvlive-live Paquete play => valor = stream_normal_abt As\u00ed pues la URL final ser\u00e1: rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt y el comando de descarga: $ rtmpdump -v -r \"rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt\" -o archivo.mp4 Para descargar v\u00eddeos desde YouTube, last.fm, Google video, Dailymotion y Vimeo se puede utilizar el comando clive . Aqu\u00ed comentan c\u00f3mo se usa.","title":"Descarga de un v\u00eddeo incrustado en un reproductor Flash"},{"location":"sistemas/ubuntu.html#descarga-video-de-a3player","text":"","title":"Descarga v\u00eddeo de A3Player"},{"location":"sistemas/ubuntu.html#enlaces","text":"C\u00f3mo descargar v\u00eddeos en formato M3U8 (o HLS) http live streaming player Las carreras de Formula1 \u00faltimamente son emitidas en el formato HLS. Para descargar una carrera empezar haciendo una captura con Wireshark desde el momento en que se le da al Play hasta que se empieza a ver parte del v\u00eddeo (esperando que terminen los anuncios). Luego filtrar en Wireshark con la siguiente expresi\u00f3n: http.request.uri contains \"playlist.m3u8\" Localizar la URL de descarga del fichero playlist.m3u8. Por ejemplo podr\u00eda ser: http://geodeswowa3player.antena3.com/vcg/_definst_/mp4:assets3/2013/10/26/E6941C5D-2A9F-414B-B3FF-01FAC33073C4/sigra.mp4/playlist.m3u8?pulse=assets3%2F2013%2F10%2F26%2FE6941C5D-2A9F-414B-B3FF-01FAC33073C4%2F%7C1382835190%7Cb23df1201096fc1cc490427e05307f70","title":"Enlaces"},{"location":"sistemas/ubuntu.html#compresion-batch-de-videos","text":"Instalar el cliente de linea de comando de Handbrake . Dependiendo de la extensi\u00f3n habr\u00e1 que cambiar el ls inicial. Los v\u00eddeos de salida son MP4, por lo que si la extensi\u00f3n inicial no es esa, habr\u00e1 que cambiarla en los ficheros finales. $ mkdir comp $ ls *.mp4 | awk '{print \"HandBrakeCLI -Z Normal -i \"$0\" -o comp/\"$0}' | sh","title":"Compresi\u00f3n batch de v\u00eddeos"},{"location":"sistemas/ubuntu.html#resampleado-de-video-con-handbrake","text":"( Fuente ) On the Video tab use Avg Bitrate and use 2500 to 3000 depending if a big action movie(3000) or if less fast action/movement in the movie(2500). Make sure to click on 2-Pass Encoding and Turbo first pass.","title":"Resampleado de video con HandBrake"},{"location":"sistemas/ubuntu.html#split-de-videos","text":"( Fuente ) Con el siguiente comando: $ ffmpeg -acodec copy -vcodec copy -ss 00 :00:00 -t 00 :04:09 -i archivo_original.mp4 archivo_recortado.mp4 Donde el valor de la opci\u00f3n -ss es el instante de inicio en hh:mm:ss y el valor de -t es la longitud en hh:mm:ss Durante un tiempo en Ubuntu, ffmpeg no estuvo disponible. Su sustituto fue avconv , compatible la mayor\u00eda de las veces. No admit\u00eda sin embargo la opci\u00f3n de copiar el codec de audio y v\u00eddeo. Hab\u00eda que especificarlo. Una lista de encoders soportados se puede obtener ejecutando: $ avconv -encoders Un par de codecs comprobados que suelen dar buen resultados son h264 y aac: ffmpeg -acodec aac -vcodec h264 -ss 01 :07:38 -t 00 :01:14 -i archivo_original.mp4 archivo_recortado.mp4","title":"Split de v\u00eddeos"},{"location":"sistemas/ubuntu.html#crop-en-video","text":"$ ffmpeg -i input.mp4 -filter:v \"crop=w:h:x:y\" output.mp4 donde: w: ancho final h: alto final x: coordenada x del punto superior izquierdo del recuadro y: coordenada y del punto superior izquierdo del recuadro","title":"Crop en video"},{"location":"sistemas/ubuntu.html#extraer-frame-de-video","text":"$ ffmpeg -ss 00 :01:00 -i input.mp4 -frames:v 1 frame.png donde el argumento -ss marca el instante del frame en hh:mm:ss","title":"Extraer frame de video"},{"location":"sistemas/ubuntu.html#redimensionado-de-imagenes-en-lote","text":"Por ejemplo a 1080 de alto manteniendo el ratio dentro de un directorio llamado resized: $ convert '*.jpg[x1080]' resized/%03d.jpg En ocasiones, si hay varios miles de fotos, se puede llenar la memoria. En este caso hacer la conversi\u00f3n con el siguiente comando, que trata las im\u00e1genes una a una: a = 1 for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) convert ${ i } [ x1080 ] resized/ ${ new } let a = a+1 done","title":"Redimensionado de im\u00e1genes en lote"},{"location":"sistemas/ubuntu.html#crop-y-resize-de-imagenes-en-lote","text":"a = 1 for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) convert ${ i } -crop wxh+x+y -resize wsxhs -gravity Center ${ new } let a = a+1 done donde: w: ancho del crop h: alto del crop x: posici\u00f3n horizontal esquina superior derecha del crop y: posici\u00f3n vertical esquina superior derecha del crop ws: ancho del reescalado final hs: alto del reescalado final","title":"Crop y resize de im\u00e1genes en lote"},{"location":"sistemas/ubuntu.html#conversion-de-formato-en-lote","text":"for file in *.jpg ; do filename = $( basename \" $file \" ) fileid = ${ filename %%.* } convert ${ filename } ${ fileid } .png done","title":"Conversi\u00f3n de formato en lote"},{"location":"sistemas/ubuntu.html#renombrado-de-archivos-en-lote","text":"Por ejemplo una serie de archivos jpg: a = 1 for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) mv ${ i } ${ new } let a = a+1 done","title":"Renombrado de archivos en lote"},{"location":"sistemas/ubuntu.html#compresion-de-ficheros-en-lote","text":"for file in *.col ; do filename = $( basename \" ${ file } \" ) fileid = ${ filename %%.* } 7z a \" ${ fileid } .7z\" \" ${ filename } \" done","title":"Compresi\u00f3n de ficheros en lote"},{"location":"sistemas/ubuntu.html#sustitucion-de-cadena-en-ficheros-en-lote","text":"for file in *.cfg ; do filename = $( basename \" ${ file } \" ) fileid = ${ filename %%.* } sed -i 's/ShowFps 1/ShowFps 0/' \" ${ file } \" done","title":"Sustituci\u00f3n de cadena en ficheros en lote"},{"location":"sistemas/ubuntu.html#montaje-de-video-stopmotion-a-partir-de-imagenes","text":"A 10fps por ejemplo ( Fuente ): $ ffmpeg -f image2 -r 10 -i %04d.jpg -vf scale = 1440 :1080 -r:v 10 -c:v libx264 -qp 0 -preset veryslow -an \"video.mkv\"","title":"Montaje de v\u00eddeo StopMotion a partir de im\u00e1genes"},{"location":"sistemas/ubuntu.html#montaje-de-gif-a-partir-de-imagenes","text":"convert -delay n -loop 0 *.jpg output.gif donde: n: milisegundos entre cada frame.","title":"Montaje de gif a partir de im\u00e1genes"},{"location":"sistemas/ubuntu.html#configurar-wireshark-para-poder-capturar-con-usuarios-no-root","text":"Ejecutar lo siguiente: $ sudo dpkg-reconfigure wireshark-common $ sudo usermod -a -G wireshark <usuario> Reiniciar la sesi\u00f3n.","title":"Configurar Wireshark para poder capturar con usuarios no-root"},{"location":"sistemas/ubuntu.html#solucionar-el-problema-con-wireshark-en-las-ultimas-versiones-de-ubuntu","text":"Cuando se inicia una captura, se cuelga Wireshark, emitiendo una serie infinita de errores de GTK en consola. En esta p\u00e1gina comentan varios workarrounds. Por ejemplo editando el fichero /usr/share/applications/wireshark.desktop y cambiando la l\u00ednea de ejecuci\u00f3n por: 1 Exec=env LIBOVERLAY_SCROLLBAR=0 wireshark %f","title":"Solucionar el problema con Wireshark en las \u00faltimas versiones de Ubuntu"},{"location":"sistemas/ubuntu.html#ficheros-implicados-en-arranque","text":"/etc/rc.local : This script is executed at the end of each multiuser runlevel.","title":"Ficheros implicados en arranque"},{"location":"sistemas/ubuntu.html#montar-imagen-de-disco-o-particion","text":"( Fuente ) Averiguar la estructura de las particiones: $ fdisk -l Rpi_8gb_wheezy_backup.img Disco Rpi_8gb_wheezy_backup.img: 7 ,5 GiB, 8068792320 bytes, 15759360 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector ( l\u00f3gico/f\u00edsico ) : 512 bytes / 512 bytes Tama\u00f1o de E/S ( m\u00ednimo/\u00f3ptimo ) : 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0x000981cb Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo Rpi_8gb_wheezy_backup.img1 8192 122879 114688 56M c W95 FAT32 ( LBA ) Rpi_8gb_wheezy_backup.img2 122880 15759359 15636480 7 ,5G 83 Linux Calcular el offset multiplicando el sector de comienzo de la partici\u00f3n por el tama\u00f1o del sector: 122880 * 512 = 62914560 Montar: $ sudo mount -t ext4 -o loop,offset = 62914560 ,ro,noexec Rpi_8gb_wheezy_backup.img mnt","title":"Montar imagen de disco o partici\u00f3n"},{"location":"sistemas/ubuntu.html#screencast","text":"$ avconv -f x11grab -r 25 -s 910x550 -i :0.0 -vcodec huffyuv screencast.avi","title":"Screencast"},{"location":"sistemas/ubuntu.html#gestion-de-modulos","text":"","title":"Gesti\u00f3n de m\u00f3dulos"},{"location":"sistemas/ubuntu.html#anadir-un-modulo-al-kernel","text":"$ sudo modprobe <modulo> Si se quiere a\u00f1adir de forma permanente, es decir, de forma autom\u00e1tica en el arranque, se incorpora el nombre del m\u00f3dulo al fichero /etc/modules . Cuando el m\u00f3dulo que se carga es un driver de un dispositivo, el kernel env\u00eda un evento al subsistema udev . La monitorizaci\u00f3n de estos mensajes se puede hacer teniendo abierto un terminal con el siguiente comando lanzado ( fuente ): $ udevadm monitor --property","title":"A\u00f1adir un m\u00f3dulo al kernel"},{"location":"sistemas/ubuntu.html#listado-de-modulos","text":"$ lsmod","title":"Listado de m\u00f3dulos"},{"location":"sistemas/ubuntu.html#informacion-de-un-modulo","text":"$ modinfo <modulo>","title":"Informaci\u00f3n de un m\u00f3dulo"},{"location":"sistemas/ubuntu.html#ficheros-definicion-variables-de-entorno","text":"Si se necesita definir una variable global se podr\u00e1 hacer en los ficheros: /etc/environment /etc/profile /etc/profile.d /etc/bashrc o /etc/bash.bashrc Si es a nivel de usuario se har\u00e1 en: ~/.bashrc ~/.bash_profile","title":"Ficheros definici\u00f3n variables de entorno"},{"location":"sistemas/ubuntu.html#poner-barras-de-scroll-normales","text":"gsettings set com.canonical.desktop.interface scrollbar-mode normal","title":"Poner barras de scroll normales"},{"location":"sistemas/ubuntu.html#skype-en-tray","text":"Instalar los paquetes sni-qt y sni-qt:i386 .","title":"Skype en tray"},{"location":"sistemas/ubuntu.html#workrave-en-tray","text":"Fuente gsettings set com.canonical.Unity.Panel systray-whitelist \"['all']\"","title":"Workrave en tray"},{"location":"sistemas/ubuntu.html#localizacion-de-ficheros-desktop","text":"Los del usuario se encuentran en: ~/.local/share/applications Los del sistema en: /usr/share/applications","title":"Localizaci\u00f3n de ficheros .desktop"},{"location":"sistemas/ubuntu.html#configuracion-de-gedit","text":"Al menos las \u00faltimas versiones de gedit no tienen un panel de ajustes para las opciones predeterminadas. Cada vez que arranca aparecen preajustados 8 espacios como anchura del tabulador y no sustituye por espacios. Puede sacarse una lista de todos los ajustes que se pueden cambiar con el siguiente comando: gsettings list-recursively | grep -i gedit.preferences.editor Los ajustes del tabulador mencionados antes, para pasar a 4 espacios, ejecutar: gsettings set org.gnome.gedit.preferences.editor insert-spaces true gsettings set org.gnome.gedit.preferences.editor tabs-size 4 Otro ajuste interesante es el del wrap mode. Se puede hacer con (puede valer 'none', 'word', 'char', o 'word-char'): gsettings set org.gnome.gedit.preferences.editor wrap-mode 'word'","title":"Configuraci\u00f3n de gedit"},{"location":"sistemas/ubuntu.html#localizar-paquete-que-contiene-un-fichero","text":"( Fuente ) Instalar apt-file : $ sudo apt-get install apt-file Actualizar su base de datos: $ sudo apt-file update Hacer la b\u00fasqueda: $ apt-file search <fichero_con_ruta>","title":"Localizar paquete que contiene un fichero"},{"location":"sistemas/ubuntu.html#configuracion-de-idiomas-del-sistema-locales","text":"$ sudo dpkg-reconfigure locales","title":"Configuraci\u00f3n de idiomas del sistema (locales)"},{"location":"sistemas/ubuntu.html#configuracion-de-swap-en-disco-ssd","text":"Siguiendo [esta p\u00e1gina], a\u00f1ado lo siguiente al fichero /etc/sysctl.conf para bajar el 60% que usa Ubuntu por defecto a 10%: vm.swappiness=10","title":"Configuraci\u00f3n de SWAP en disco SSD"},{"location":"sistemas/ubuntu.html#buscar-paquetes","text":"Encontrar un paquete por su nombre: apt-cache search 'cadena' Encontrar un paquete que contiene un fichero: apt-file search 'fichero'","title":"Buscar paquetes"},{"location":"sistemas/ubuntu.html#limpieza-de-paquetes-snap","text":"Localizar los paquetes desactivados con: $ snap list --all|fgrep desactivado Y luego borrarlos con: $ snap remove --revision XXX NOMBRE Por ejemplo: edumoreno@eduardo-HP-Folio-13:~$ snap list --all|fgrep desactivado canonical-livepatch 9.7.3 105 latest/stable canonical* desactivado chromium 94.0.4606.81 1781 latest/stable canonical* desactivado edumoreno@eduardo-HP-Folio-13:~$ snap remove --revision 105 canonical-livepatch canonical-livepatch (revisi\u00f3n 105) eliminado edumoreno@eduardo-HP-Folio-13:~$ snap remove --revision 1781 chromium chromium (revisi\u00f3n 1781) eliminado","title":"Limpieza de paquetes snap"},{"location":"sistemas/ubuntu.html#montar-ext4-para-usuario","text":"Normalmente al automontar una partici\u00f3n ext4 se respetar\u00e1n los ID's de los propietarios:grupos de los ficheros. Para montar temporalmente con permisos ajustados para un usuario, utilizar bindfs de esta forma: # El punto de partida es una partici\u00f3n automontada de esta forma: # /dev/sdb1 306616440 64348 290907216 1% /media/edumoreno/47acea17-841f-42d3-85f2-886543f056db sudo bindfs -u $( id -u ) -g $( id -g ) /media/edumoreno/47acea17-841f-42d3-85f2-886543f056db /home/edumoreno/mnt/","title":"Montar ext4 para usuario"},{"location":"sistemas/ubuntu_phone.html","text":"Ubuntu Phone \u00b6 Enlaces \u00b6 Installing Ubuntu Install Android On BQ Aquaris Ubuntu Phone In Linux Activar SSH \u00b6 1 2 3 sudo service ssh start sudo setprop persist.service.ssh true sudo reboot Permitir cambios en / \u00b6 1 sudo mount -o remount,rw / Ejecutar en modo desktop \u00b6 1 gsettings set com.canonical.Unity8 usage-mode Windowed Retornar a interfaz tel\u00e9fono \u00b6 1 gsettings set com.canonical.Unity8 usage-mode Staged","title":"Ubuntu Phone"},{"location":"sistemas/ubuntu_phone.html#ubuntu-phone","text":"","title":"Ubuntu Phone"},{"location":"sistemas/ubuntu_phone.html#enlaces","text":"Installing Ubuntu Install Android On BQ Aquaris Ubuntu Phone In Linux","title":"Enlaces"},{"location":"sistemas/ubuntu_phone.html#activar-ssh","text":"1 2 3 sudo service ssh start sudo setprop persist.service.ssh true sudo reboot","title":"Activar SSH"},{"location":"sistemas/ubuntu_phone.html#permitir-cambios-en","text":"1 sudo mount -o remount,rw /","title":"Permitir cambios en /"},{"location":"sistemas/ubuntu_phone.html#ejecutar-en-modo-desktop","text":"1 gsettings set com.canonical.Unity8 usage-mode Windowed","title":"Ejecutar en modo desktop"},{"location":"sistemas/ubuntu_phone.html#retornar-a-interfaz-telefono","text":"1 gsettings set com.canonical.Unity8 usage-mode Staged","title":"Retornar a interfaz tel\u00e9fono"},{"location":"sistemas/unix.html","text":"UNIX \u00b6 Cheat sheets \u00b6 Colecci\u00f3n de Carlos Fenollosa Tricks de Carlos Fenollosa Bash Cheat Sheet Programar en Bash, peque\u00f1o manual de referencia How To Use Linux Screen Bash Conditional Expressions Comandos \u00fatiles \u00b6 strace -e file [command] : runs command , printing out any time a file is opened or checked. strace -e file,network,process [command] : the same as above, but also printing network process and subcommands run. strace -e file,process -f [command] : the -f parameter follows forks -- in case it's not main command but a subshell that you're interested in. strace -p [PID] : Connect to pid PID and start tracing. route -n : Tabla de rutas del sistema. du -h --max-depth=1 . : Tama\u00f1o de un directorio y sus subdirectorios directos. find [directorio] ! -user [usuario] -ls : Lista los ficheros que NO pertenecen a un usuario. badblocks -swv /dev/sda : Bloquear sectores defectuosos (sustituir /dev/sda por el dispositivo que corresponda. dpkg --configure -a : Soluciona problemas con paquetes mal instalados. mkdosfs -F 32 -v -n \"\" /dev/sdc1 : Formato de partici\u00f3n en FAT32. du -sh */ | sort -h : Muestra los directorios del directorio actual ordenados por tama\u00f1o (en formato humano) indicando su tama\u00f1o. cat fichero.txt | awk '{print $5}' : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | cut -d' ' -f5 : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | sed -e 's/ /\\n/g' : Sustituye todos los espacios del fichero por retornos de carro. netstat -nr : Tabla de rutas del sistema. netstat -ntu|grep :80|wc -l : n\u00famero de conexiones al servidor HTTP. netstat -ntu|grep :21|wc -l : n\u00famero de conexiones al servidor FTP. netstat -tulanp : Lista los puertos TCP/UDP abiertos (tanto de servidores como de clientes). netstat -tlnp : Lista los puertos TCP abiertos de los servicios. crontab -e : A\u00f1adir un job a cron. sudo badblocks /dev/sda > badblocks.txt; sudo fsck -l badblocks.txt /dev/sda : Bloqueo de sectores defectuosos del disco duro ( fuente ). sudo blkid : Lista los dispositivos de bloques (discos) disponibles en el sistema. sudo nmap -sP 192.168.1.0/24 : Descubrir todos los equipos presentes en la red 192.168.1.0 . sudo netstat -lp --inet : Puertos de red abiertos y procesos asociados. sudo dd if=/dev/zero of=/dev/mmcblk0 : Formateo de una tarjeta de memoria (en realidad vale para cualquier dispositivo de almacenamiento). sudo tcpdump -s 0 -i ppp0 -w trafico.pcap : Captura de tr\u00e1fico por el interfaz ppp0. iptables -L -n : Listar reglas iptables en formato num\u00e9rico (muestra IPs en lugar de hostnames). iptables -t nat -L : Listar reglas iptables de tabla NAT. wget -q -O - url : Hace la request de la URL sin emitir trazas (-q = no verbose) y redireccionando la response a la salida est\u00e1ndar (-O -). route -n : Muestra la tabla de rutas con IP's en lugar de con nombres. cat /etc/resolv.conf : Muestra el gateway en uso. nmcli dev show <adaptador_red> : Muestra los par\u00e1metros de la conexi\u00f3n de red (IP, gateway, DNS's, etc.). ldd <binario> : Indica las librer\u00edas que usa el binario. exiftool -AllDates='2010:08:08 15:35:33' -overwrite_original photo.jpg : Actualiza todas las fechas dentro de la metainformaci\u00f3n de un JPG. exiftool -all= photo.jpg : Borrar toda la metainformaci\u00f3n de una foto (por cuestiones de privacidad antes de subirla a un sitio por ejemplo). mplayer -vo caca MovieName.avi : Reproduce un v\u00eddeo en consola con ascii. Para verlo en blanco y negro sustituir caca por aa . sudo traceroute -4T -p 22 192.168.1.203 : Comprobar la traza hasta alcanzar un determinado puerto en una determinada m\u00e1quina. dig @8.8.8.8 -t any eduardofilo.es : Query DNS de los registros de cualquier tipo a trav\u00e9s del servidor 8.8.8.8 al dominio eduardofilo.es . Gesti\u00f3n de usuarios: sudo adduser userName : A\u00f1ade usuario creando home. sudo usermod -a -G groupName userName : A\u00f1ade el usuario userName ya existente al grupo groupName ya existente. sudo userdel -r userName : Borra el usuario eliminando su home. sudo stat /proc/1/exe : Nos da pistas de si el sistema funciona sobre SysV, Upstart o Systemd ( fuente ). stty < /dev/port : (sustituir port por lo que corresponda) Interroga el puerto para encontrar sus par\u00e1metros de conexi\u00f3n. recode ISO-8859-15/CR-LF..UTF8 fichero.txt : Recodifica un fichero de texto del formato habitual en Windows a UTF-8. find . ! -type d -name \"*.txt\" -exec recode ISO-8859-15/CR-LF..UTF8 {} \\; : Recodifica todos los ficheros de texto de un directorio del formato habitual en Windows a UTF-8. zenity : Para dotar de cuadros de di\u00e1logo a los scripts bash. Documentaci\u00f3n Alias SSH \u00b6 Para asimilar un identificador a una pareja user@host, editar el fichero ~/.ssh/config y a\u00f1adir un bloque como el siguiente ( fuente ): Host example HostName example.com User exampleuser Tunel de un puerto remoto por SSH \u00b6 ( Fuente ) Para conducir el tr\u00e1fico hasta un host:puerto remoto canaliz\u00e1ndolo por un tunel seguro, se puede utilizar el comando ssh . Por ejemplo, vamos a tunelizar una conexi\u00f3n contra el puerto telnet de la m\u00e1quina remota telnet.example.com por medio del usuario ssh-user para tenerlo disponible en el puerto 2000 local de nuestra m\u00e1quina: ssh -f ssh-user@telnet.example.com -L 2000:telnet.example.com:23 -N A partir de ahora podremos conectarnos al telnet conectando con localhost:2000 . Uso b\u00e1sico de screen \u00b6 En esta cheat sheet se re\u00fanen bastantes comandos \u00fatiles. A continuaci\u00f3n indico el uso t\u00edpico: Arrancamos una sesi\u00f3n: 1 shell ~$ screen Aparece una splashscreen que cerramos pulsando enter y ya podemos trabajar Lanzamos un comando: 1 screenshell_1 ~$ top Para cerrar la sesi\u00f3n screen que acabamos de abrir, tan s\u00f3lo hay que lanzar el comando exit (en este ejemplo, parando previamente el comando top que hab\u00edamos lanzado). Ahora sin embargo pretendemos dejarla abierta, con el comando top en ejecuci\u00f3n, para volver a ella m\u00e1s adelante. Es lo que se llama un detach (sirve para recordar la tecla que se pulsa al final de la combinaci\u00f3n de teclas). Para ello pulsamos la combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"d\" Habremos vuelto a nuestro bash inicial. Cuando en cualquier momento queramos recuperar la sesi\u00f3n screen, lo haremos con el comando: 1 shell ~$ screen -r Ahora estaremos viendo de nuevo la salida del comando top que hab\u00edamos dejado arrancado dentro de la sesi\u00f3n screen. Volvemos a abandonar la sesi\u00f3n sin cerrarla procediendo por tanto como en el paso 4: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial, vamos a abrir una segunda sesi\u00f3n screen para ver c\u00f3mo podemos movernos a una u a otra. Arrancamos la sesi\u00f3n como hicimos con la primera: 1 shell ~$ screen Cerramos la splashscreen y ejecutamos alg\u00fan comando para reconocer la sesi\u00f3n cuando volvamos a ella. Por ejemplo: 1 screenshell_2 ~$ ping 8.8.8.8 Abandonamos la sesi\u00f3n dej\u00e1ndola abierta: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial ahora tenemos dos sesiones screen lanzadas. Ahora el comando screen -r no se puede lanzar sin especificar el identificador de la sesi\u00f3n tras la opci\u00f3n -r . Obtenemos la lista de sesiones con el siguiente comando: 1 2 3 4 5 shell ~$ screen - list There are screens on : 12629. pts - 7. eduardo - HP - Folio - 13 ( 04 / 04 / 15 13 : 55 : 03 ) ( Detached ) 12609. pts - 7. eduardo - HP - Folio - 13 ( 04 / 04 / 15 13 : 54 : 51 ) ( Detached ) 2 Sockets in / var / run / screen / S - edumoreno . Ahora, para recuperar una de ella, por ejemplo la m\u00e1s vieja que conten\u00eda lanzado el comando top incorporaremos el identificador de la sesi\u00f3n tras la opci\u00f3n -r : 1 shell ~$ screen -r 12609.pts-7.eduardo-HP-Folio-13 Como se comentaba en el punto 4, para cerrar las sesiones simplemente saldremos con exit , aunque tambi\u00e9n, y sobre todo en caso de que la sesi\u00f3n se quedara bloqueada con alg\u00fan comando que no se pudiera cerrar, se puede matar la sesi\u00f3n con la siguiente combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"k\" B\u00faqueda de ficheros que contienen una cadena \u00b6 #!/bin/bash SAVEIFS = $IFS IFS = $( echo -en \"\\n\\b\" ) for file in ` find . ` do fgrep \"[cadena a buscar]\" $file > /dev/null 2 > & 1 if [ $? -eq 0 ] ; then echo $file fi done IFS = $SAVEIFS En realidad el script anterior hace lo mismo que el simple comando siguiente: $ fgrep -rl \"[cadena a buscar]\" . Ajustes de permisos a ficheros y directorios por separado \u00b6 $ #Para los ficheros: $ find . ! -type d -exec chmod 664 {} \\; $ #Para los directorios: $ find . -type d -exec chmod 775 {} \\; Renombrado de ficheros de may\u00fasculas a min\u00fasculas \u00b6 ( Fuente ) #!/bin/sh for f in * ; do g = ` expr \"xxx $f \" : 'xxx\\(.*\\)' | tr '[A-Z]' '[a-z]' ` mv \" $f \" \" $g \" done Comprimir uno a uno los ficheros de un directorio \u00b6 Por ejemplo ficheros de extensi\u00f3n .gba : for f in *.gba ; do file = $( basename \" $f \" .gba ) zip \" ${ file } .zip\" \" ${ file } .gba\" done Quitar los primeros 5 caracteres de los ficheros de un directorio \u00b6 for f in *.gba ; do mv \" $f \" \" ${ f : 5 : ${# f }} \" done Redirecci\u00f3n de salidas \u00b6 Para redirigir ambas salidas de un programa (estandar y error) hacer lo siguiente: $ COMANDO > FICHERO_O_DISPOSITIVO 2 > & 1 En esta p\u00e1gina se documenta con m\u00e1s detalle este tema. Ejecuci\u00f3n remota de aplicaciones XWindow \u00b6 Abrir el servidor X (Cygwin) Iniciar sesi\u00f3n remota: ssh -X [usuario]@[m\u00e1quina] Ejecutar la aplicaci\u00f3n MySQL \u00b6 Acceso: mysql -u root -p Listar bases de datos: show databases; Abrir una base de datos: use [NombreBBDD]; Listar tablas: show tables; Ficheros de configuraci\u00f3n importantes \u00b6 /etc/security/limits.conf : Configuration file for the pam_limits module. Permite limitar el n\u00famero de ficheros abiertos por el sistema, el n\u00famero de procesos, etc. Soluci\u00f3n al problema de los alias (alternatives) de Java6 en Ubuntu \u00b6 Los paquetes de Java 6 (1.6) en Ubuntu tienen problemas a la hora de ajustar los alias en /etc/alternatives cuando antes ha estado instalada otra versi\u00f3n (1.5 por ejemplo). Se puede forzar la generaci\u00f3n de los alias mediante las siguientes ordenes: $ update-java-alternatives --list $ sudo update-java-alternatives --set [ elegir el identificador de la lista que muestra el comando anterior ] Bits SUID, SGID y sticky \u00b6 Manual de LuCAS Autentificaci\u00f3n autom\u00e1tica por SSH \u00b6 Conseguiremos que la autentificaci\u00f3n del cliente se haga por medio de una pareja de claves privada/p\u00fablica en lugar de con identificador de usuario/password. Primero generamos la pareja de claves p\u00fablica-privada ejecutando en el cliente ssh-keygen : $ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key ( /home/user/.ssh/id_rsa ) : Enter passphrase ( empty for no passphrase ) : Enter same passphrase again: Your identification has been saved in /home/user/.ssh/id_rsa. Your public key has been saved in /home/user/.ssh/id_rsa.pub. The key fingerprint is: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx user@machine Las claves se almacenan por defecto en ~/.ssh/ , quedando el directorio as\u00ed: $ ls -l total 12 -rw------- 1 user user 883 2005 -08-13 14 :16 id_rsa -rw-r--r-- 1 user user 223 2005 -08-13 14 :16 id_rsa.pub -rw-r--r-- 1 user user 1344 2005 -08-04 02 :14 known_hosts Los ficheros id_rsa e id_rsa.pub contienen respectivamente las claves privada y p\u00fablica. El fichero known_hosts contiene la lista de las claves p\u00fablicas de las m\u00e1quinas reconocidas. Ahora se debe copiar la clave p\u00fablica al servidor, al fichero ~/.ssh/authorized_keys . Para ello se utiliza el comando ssh-copy-id: $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine1 $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine2 ssh-copy-id es un script que se conecta a la m\u00e1quina y copia el archivo (indicado por la opci\u00f3n -i ) en ~/.ssh/authorized_keys , y ajusta los permisos a los valores adecuados. Si no se dispone del programa ssh-copy-id se puede realizar una copia manual a la m\u00e1quina remota del fichero conteniendo la clave p\u00fablica (por ejemplo usando scp o sftp ) y a\u00f1adir su contenido al fichero ~/.ssh/authorized_keys . Ahora la conexi\u00f3n deber\u00eda funcionar sin necesidad de introducir la clave. Si no es as\u00ed es posible que sea un problema de permisos en los ficheros. Los permisos correctos deben ser similares a estos: $ chmod go-w ~ ~/.ssh $ chmod 600 ~/.ssh/authorized_keys La conexi\u00f3n SSH se realizar\u00e1 indicando el fichero con la clave privada como argumento de la siguiente forma: $ ssh -i ~/.ssh/id_rsa user@machine (Si el nombre del fichero con la clave privada es precisamente el del ejemplo, es decir id_rsa , creo que no es necesario indicarlo con la opci\u00f3n -i ). Configuraci\u00f3n de Firefox para ejecuci\u00f3n de applets Java \u00b6 ( Fuente ) Vaya al subdirectorio de complementos, situado dentro del directorio de instalaci\u00f3n de Mozilla. $ cd ` <directorio de instalaci\u00f3n de Mozilla> ` /plugins # Normalmente /usr/lib/firefox/plugins o $ cd ` <home del usuario> ` /.mozilla/plugins En el directorio actual, cree un v\u00ednculo simb\u00f3lico al archivo del JRE ns7/libjavaplugin_oji.so. Escriba: $ ln -s ` <directorio de instalaci\u00f3n del JRE> ` /plugin/i386/ns7/libjavaplugin_oji.so Inicie el navegador Mozilla o rein\u00edcielo si ya se estaba ejecutando. Tenga en cuenta que, si se est\u00e1 ejecutando alg\u00fan otro componente de Mozilla (como Messenger, Composer, etc.) deber\u00e1 tambi\u00e9n reiniciarlo. Vaya a Editar > Preferencias. En la categor\u00eda Avanzadas, seleccione Activar Java. Organizaci\u00f3n de men\u00fas cuando se mezclan aplicaciones KDE y Gnome \u00b6 GNU/Linux nos permite tener varios sistemas de escritorio diferentes instalados y funcionando, pero inevitablemente nos encontramos con una mezcla de opciones y programas de cada entorno en los men\u00fas principales. Existen aplicaciones precisamente para limpiar autom\u00e1ticamente las entradas del men\u00fa que no corresponden a tu sistema de escritorio habitual, y dejarlas apartadas y ordenadas de alguna manera. Con Gnome y KDE instalados a la vez, hay dos programas para aquellos Gnomeros que han querido probar KDE y para los KDEeros que han querido probar Gnome. Gnome Menu Extended es el propio men\u00fa normal de Gnome, pero incluye una carpeta donde se guardan todas las aplicaciones y opciones de KDE. Se instala f\u00e1cilmente descargando el paquete para cualquier distribuci\u00f3n: Debian (y Ubuntu), Slackware o directamente el c\u00f3digo fuente para compilarlo. Una vez instalado, se activa yendo a Preferencias -> Add KDE Menu. Y si quieres recuperar el men\u00fa como estaba, tambi\u00e9n tiene la opci\u00f3n de restaurarlo. K Menu Gnome es un men\u00fa exactamente igual que el KMenu original, pero incluye una carpeta donde residen todas las aplicaciones de Gnome, en sistemas que tienen ambos escritorios instalados. Est\u00e1 disponible para Debian (y Ubuntu), Slackware, Fedora y el c\u00f3digo fuente para compilarlo en cualquier sistema. Error \"error while loading shared libraries: ...\" \u00b6 Runtime error. The linker hasn't found your libraries. Either they are not installed properly or the linker doesn't know where they are (most probably in /usr/local/lib ). To get your linker to update its list of libraries type: $ ldconfig /usr/local/lib or as a temporary measure: $ export LD_LIBRARY_PATH = \"/usr/local/lib\" En este documento se dan m\u00e1s detalles. Compartir ficheros con Samba \u00b6 Aparte de instalar y configurar Samba (fichero /etc/samba/smb.conf ) hay que dar de alta los usuarios UNIX que se usar\u00e1n a trav\u00e9s de Samba y asignarles un password para el acceso por el mismo. Esto se hace con el comando: $ sudo smbpasswd -a usuario Migraci\u00f3n masiva de usuarios \u00b6 ( Fuente ) Para los casos en los que sea necesario replicar los usuarios de un servidor Linux a otro o en los que se vaya a migrar a un servidor con m\u00e1s recursos, el siguiente procedimiento puede ser de utilidad. Los escenarios son varios, desde los servidores que ejecutan alg\u00fan tipo de base de datos, los que tienen ciertas aplicaciones, los que alojan p\u00e1ginas Web, etc\u00e9tera. Para fines de la demostraci\u00f3n pensaremos que el servidor est\u00e1 dedicado como servidor de archivos, mismos que se almacenan en el home de cada uno de los usuarios. NOTA: El presente procedimiento da por hecho que se hayan realizado las configuraciones necesarias en el nuevo servidor. Primero, lo que debe respaldarse es la lista de usuarios con su respectiva contrase\u00f1a. El archivo /etc/passwd contiene las cuentas de los usuarios en el sistema bajo el siguiente formato de ejemplo: root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/ nologin adm:x:3:4:adm:/var/adm:/sbin/nologin nitsuga:x:500:500::/home/nitsuga:/bin/bash nitsuga2:x:501:501::/home/nitsuga2:/bin/bash nitsuga3:x:502:502::/home/nitsuga3:/bin/bash Como se observa, el segundo campo respectivo al hash de la contrase\u00f1a no se muestra. La contrase\u00f1a se encuentra en el archivo /etc/shadow root:$1$/7zmwgAa$Jd5ja7nsC4nTm O3s0.Z1j1:13445:0:99999:7::: bin:*:13445:0:99999:7::: daemon:*:13445:0:99999:7::: adm:*:13445:0:99999:7::: nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:13498:2:1:1::: nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: Se proceder\u00e1 a unir el usuario con su contrase\u00f1a utilizando el comando pwunconv para \u201cdesactivar\u201d el shadow, quedando as\u00ed las contrase\u00f1as en el archivo passwd. root:$1$/7zmwgAa$Jd5ja7nsC4n TmO3s0.Z1j1:0:0:root:/root:/bin/bash bin:*:1:1:bin:/bin:/sbin/nologin daemon:*:2:2:daemon:/sbin:/sbin/ nologin adm:*:3:4:adm:/var/adm:/sbin/nologin nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/ nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga3:/bin/bash Depuraci\u00f3n de /etc/passwd \u00b6 Se copiar\u00e1 el archivo /etc/passwd a uno de trabajo /etc/passwd.migracion . Ahora se editar\u00e1 el archivo y se quitar\u00e1n todos los usuarios propios del sistema (root, usuarios de demonios, etc\u00e9tera) dejando s\u00f3lo los usuarios que van a ser autenticados. nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga2:/bin/bash Tambi\u00e9n se copiar\u00e1 el archivo /etc/group a /etc/group.migracion root:x:0:root bin:x:1:root,bin,daemon daemon:x:2:root,bin,daemon sys:x:3:root,bin,adm adm:x:4:root,adm,daemon nitsuga:x:500: nitsuga2:x:501: nitsuga3:x:502: nitsuga8:x:507: Y se editar\u00e1 para dejar s\u00f3lo los grupos de los usuarios: nitsuga:x:500: nitsuga2:x:501: nitsuga3:x:502: Ahora se respaldar\u00e1 el home de los usuarios, suponiendo que se encuentra bajo el directorio/home, se har\u00e1 lo siguiente desde ra\u00edz (/): [root@localhost /]# tar -cpzvf home.tgz home/ En el que las banderas: c = crea el archivo p = preserva los permisos z = comprime el archivo .tar generado v = da salida detallada f = especifica el archivo a crear (para este caso home.tgz) Ahora bien, se realizar\u00e1 la transferencia de los archivos home.tgz, passwd.migracion y group.migracion al nuevo servidor: [root@localhost /]# scp /home.tgz root@nuevoservidor [root@localhost /]# scp /etc/passwd.migracion root@nuevoservidor [root@localhost /]# scp /etc/group.migracion root@nuevoservidor Una vez en el nuevo servidor se deber\u00e1 verificar que no se repitan tanto los UID como los GID entre los dos servidores. Se realizar\u00e1: [root@localhost /]# cp \u2013p home.tgz / ; tar \u2013zxvf home.tgz [root@localhost /]# cp \u2013p passwd.migracion /etc ; pwunconv ; cat passwd.migracion >> passwd; pwconv [root@localhost /]# cp \u2013p group.migracion /etc ; cat group.migracion >> group Eliminar petici\u00f3n password en sudo \u00b6 Es necesario reconfigurar el fichero /etc/sudoers para que no se solicite el password del usuario a la hora de hacer sudo, dado que necesitamos que se haga sudo desde un proceso que no tendr\u00e1 interacci\u00f3n con el usuario. Para conseguir esto hay que hacer dos cosas: Incorporar el usuario que nos interesa al grupo sudo del sistema Situar al final del fichero de configuraci\u00f3n /etc/sudoers lo siguiente: %sudo ALL=NOPASSWD: ALL Hay que fijarse que la linea anterior normalmente ya aparece en el fichero pero comentada con una almohadilla. Se puede aprovechar la linea quitando el car\u00e1cter almohadilla del principio, pero hay que tener en cuenta que no es suficiente con eso. Hay que mover la linea al final del fichero ya que las lineas siguientes pueden sobreescribir su efecto. Importante : La edici\u00f3n del fichero /etc/sudoers s\u00f3lo se puede hacer con el comando visudo . Este comando hay que lanzarlo con sudo a su vez, por lo que se har\u00e1 de la siguiente forma: $ sudo visudo Proxy HTTP en consola \u00b6 Setting up proxy at Firefox do not have effects at console, which means your wget, ssh, apt-get, yum etc do not access through the proxy you set at Firfox browser. To setup http proxy at console, you can do as bellow, assume the proxy IP is 219.93.2.113 and port 3128: $ export http_proxy = 'http://219.93.2.113:3128/' Remember, you have to specified http://, and to know more about export, check out HERE. To clear your http proxy and use back yours, do this: $ export http_proxy = '' Convertir nombres de ficheros de ISO a UTF-8 \u00b6 Al migrar una web, o al copiar un sistema de archivos, te puedes encontrar con nombres de ficheros en otras codificaciones de caracteres. Mediante el siguiente comando transformar\u00edamos los nombres de ficheros desde ISO-8869-1 a UTF-8: $ convmv -r -f ISO-8859-1 -t UTF-8 --notest * Backup de un FileSystem \u00b6 Backup: $ dd if = /dev/hdx | gzip > /path/to/image.gz Restauraci\u00f3n: $ gzip -dc /path/to/image.gz | dd of = /dev/hdx Montar un fichero .img \u00b6 ( Fuente ). Primero hay que averiguar el offset de la partici\u00f3n que queremos montar: fdisk -l /ruta/fichero.img Esto nos mostrar\u00e1 el tama\u00f1o del bloque y el bloque de comienzo de la partici\u00f3n. Por ejemplo: edumoreno@eduardo-HP-Folio-13:~/Descargas$ fdisk -l RetroPie.img Disk RetroPie.img: 3,7 GiB, 3965190144 bytes, 7744512 sectors Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disklabel type: dos Disk identifier: 0xb847d94e Disposit. Inicio Start Final Sectores Size Id Tipo RetroPie.img1 * 8192 124927 116736 57M e W95 FAT16 (LBA) RetroPie.img2 124928 7744511 7619584 3,6G 83 Linux El offset se calcular\u00e1 multiplicando el bloque de comienzo por el tama\u00f1o de bloque. En el ejemplo, para la segunda partici\u00f3n: offset = 124928 * 512 = 63963136 Por tanto el comando para montar ser\u00e1: sudo mount -o loop,offset=63963136 RetroPie.img /mnt/tmp Manipulaci\u00f3n de PDFs \u00b6 Divisi\u00f3n en m\u00faltiples ficheros (uno por p\u00e1gina): $ pdftk largepdfile.pdf burst Fusi\u00f3n de varios ficheros en uno: $ pdftk *.pdf cat output onelargepdfile.pdf Obtener hash MD5 de una cadena \u00b6 $ echo -n \"<cadena>\" | md5sum System + MySQL backup script \u00b6 #!/bin/bash # System + MySQL backup script # Full backup day - Sun (rest of the day do incremental backup) # Copyright (c) 2005-2006 nixCraft `<http://www.cyberciti.biz/fb/>` # This script is licensed under GNU GPL version 2.0 or above # Automatically generated by http://bash.cyberciti.biz/backup/wizard-ftp-script.php # --------------------------------------------------------------------- ### System Setup ### DIRS = \"/var/spool/sms /var/log/smstools /root\" BACKUP = /tmp/backup. $$ NOW = $( date + \"%d-%m-%Y\" ) INCFILE = \"/var/tar-inc-backup.dat\" DAY = $( date + \"%a\" ) # echo $DAY >> /root/dates FULLBACKUP = \"Sun\" ### MySQL Setup ### MUSER = \"mysqluser\" MPASS = \"mysqlpwd\" MHOST = \"localhost\" MYSQL = \" $( which mysql ) \" MYSQLDUMP = \" $( which mysqldump ) \" GZIP = \" $( which gzip ) \" ### FTP server Setup ### FTPD = \"//incremental\" FTPU = \"ftpuser\" FTPP = \"ftppwd\" FTPS = \"ftphost\" NCFTP = \" $( which ncftpput ) \" ### Other stuff ### EMAILID = \"user@domain.com\" ### Start Backup for file system ### [ ! -d $BACKUP ] && mkdir -p $BACKUP || : ### See if we want to make a full backup ### if [ \" $DAY \" == \" $FULLBACKUP \" ] ; then FTPD = \"//full\" FILE = \"fs-full- $NOW .tar.gz\" tar -zcvf $BACKUP / $FILE $DIRS else i = $( date + \"%Hh%Mm%Ss\" ) FILE = \"fs-i- $NOW - $i .tar.gz\" tar -g $INCFILE -zcvf $BACKUP / $FILE $DIRS fi ### Start MySQL Backup ### # Get all databases name DBS = \" $( $MYSQL -u $MUSER -h $MHOST -p $MPASS -Bse 'show databases' ) \" for db in $DBS do FILE = $BACKUP /mysql- $db . $NOW - $( date + \"%T\" ) .gz $MYSQLDUMP -u $MUSER -h $MHOST -p $MPASS $db | $GZIP -9 > $FILE done ### Dump backup using FTP ### #Start FTP backup using ncftp ncftp -u \" $FTPU \" -p \" $FTPP \" $FTPS <<EOF mkdir $FTPD mkdir $FTPD/$NOW cd $FTPD/$NOW lcd $BACKUP mput * quit EOF ### Find out if ftp backup failed or not ### if [ \" $? \" == \"0\" ] ; then rm -f $BACKUP /* else T = /tmp/backup.fail echo \"Date: $( date ) \" > $T echo \"Hostname: $( hostname ) \" >> $T echo \"Backup failed\" >> $T mail -s \"BACKUP FAILED\" \" $EMAILID \" < $T rm -f $T fi Recuperaci\u00f3n de pendrive o tarjeta de memoria corrupta \u00b6 Con TestDisk/Photorec. Enlaces \u00b6 TestDisk Paso A Paso How to Recover Data from Corrupt / formatted USB Flash using Photorec Instalaci\u00f3n/desinstalaci\u00f3n de scripts SysV/Upstart \u00b6 Los scripts del serivicio deber\u00e1n tener una cabecera especial que indique c\u00f3mo deben comportarse en cada nivel de ejecuci\u00f3n. Por ejemplo \u00e9ste es el que tiene MySQL: #!/bin/bash # ### BEGIN INIT INFO # Provides: mysql # Required-Start: $remote_fs $syslog # Required-Stop: $remote_fs $syslog # Should-Start: $network $time # Should-Stop: $network $time # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Start and stop the mysql database server daemon # Description: Controls the main MySQL database server daemon \"mysqld\" # and its wrapper script \"mysqld_safe\". ### END INIT INFO # Instalar: sudo update-rc.d SERVICE defaults Desinstalar: sudo update-rc.d -f SERVICE remove Creaci\u00f3n de servicios Systemd \u00b6 Crear un archivo en /etc/systemd/system/ con el nombre del servicio y la extensi\u00f3n .service . Insertar el siguiente contenido: [Unit] Description=Nombre del servicio Wants=network-online.target After=network-online.target [Service] Type=simple ExecStart=/bin/bash /home/usuario/script_arranque.sh Restart=on-abort User=usuario Group=usuario [Install] WantedBy=multi-user.target Activar el nuevo servicio: 1 $ sudo systemctl enable mi_servicio.service Para no esperar al reinicio, arrancar manualmente el servicio: 1 $ sudo systemctl start mi_servicio.service Para comprobar si el servicio se inicia correctamente: 1 $ sudo systemctl status mi_servicio.service Gesti\u00f3n de servicios Systemd \u00b6 systemctl start SERVICE - Use it to start a service. Does not persist after reboot systemctl stop SERVICE - Use it to stop a service. Does not persist after reboot systemctl restart SERVICE - Use it to restart a service systemctl reload SERVICE - If the service supports it, it will reload the config files related to it without interrupting any process that is using the service. systemctl status SERVICE - Shows the status of a service. Tells whether a service is currently running. systemctl enable SERVICE - Turns the service on, on the next reboot or on the next start event. It persists after reboot. systemctl disable SERVICE - Turns the service off on the next reboot or on the next stop event. It persists after reboot. systemctl is-enabled SERVICE - Check if a service is currently configured to start or not on the next reboot. systemctl is-active SERVICE - Check if a service is currently active. systemctl show SERVICE - Show all the information about the service. systemctl mask SERVICE - Completely disable a service by linking it to /dev/null ; you cannot start the service manually or enable the service. systemctl unmask SERVICE - Removes the link to /dev/null and restores the ability to enable and or manually start the service. Montaje de carpeta compartida samba en /etc/fstab \u00b6 Crear un fichero /home/usuario/.smbcredentials con el siguiente contenido: user=usuario password=password A\u00f1adir la siguiente l\u00ednea a /etc/fstab : 192.168.1.100/carpeta_compartida /home/usuario/punto_montaje cifs uid=usuario,gid=usuario,credentials=/home/usuario/.smbcredentials,iocharset=utf8,sec=ntlmv2,file_mode=0664,dir_mode=0775 0 0 Mini servidor HTTP \u00b6 Web oficial $ wget http://www.acme.com/software/thttpd/thttpd-2.29.tar.gz $ tar xzvf thttpd-2.29.tar.gz $ cd thttpd-2.29/ $ ./configure $ make $ sudo ./thttpd -d <directorio_root> Montado de unidades de red con autofs \u00b6 NFS \u00b6 ( Fuente ) Instalar paquetes: $ sudo apt-get install autofs nfs-common A\u00f1adir lo siguiente al final del fichero /etc/auto.master : /home/usuario/red /etc/auto.red Crear fichero /etc/auto.red con el siguiente contenido (cambiar rw por ro si se desea acceso de s\u00f3lo lectura): montaje -fstype=nfs4,rw 192.168.1.100:/path/directory Crear enlaces a los directorios montados con autofs: $ cd ~ $ ln -s /home/usuario/red/montaje montaje SMB/CIFS \u00b6 ( Fuente ) Instalar paquetes: $ sudo apt-get install autofs smbclient cifs-utils A\u00f1adir lo siguiente al final del fichero /etc/auto.master : /home/usuario/red /etc/auto.red --timeout=600 Crear fichero /etc/auto.red con el siguiente contenido: montaje -fstype=cifs,rw,noperm,netbiosname=${HOST},credentials=/home/usuario/.smbcredentials ://192.168.1.100/carpeta_compartida Crear fichero /home/usuario/.smbcredentials con el siguiente contenido: username=<usuario> password=<password> Proteger el fichero: $ chmod 600 /home/usuario/.smbcredentials Crear enlaces a los directorios montados con autofs: $ cd ~ $ ln -s /home/usuario/red/montaje montaje","title":"UNIX"},{"location":"sistemas/unix.html#unix","text":"","title":"UNIX"},{"location":"sistemas/unix.html#cheat-sheets","text":"Colecci\u00f3n de Carlos Fenollosa Tricks de Carlos Fenollosa Bash Cheat Sheet Programar en Bash, peque\u00f1o manual de referencia How To Use Linux Screen Bash Conditional Expressions","title":"Cheat sheets"},{"location":"sistemas/unix.html#comandos-utiles","text":"strace -e file [command] : runs command , printing out any time a file is opened or checked. strace -e file,network,process [command] : the same as above, but also printing network process and subcommands run. strace -e file,process -f [command] : the -f parameter follows forks -- in case it's not main command but a subshell that you're interested in. strace -p [PID] : Connect to pid PID and start tracing. route -n : Tabla de rutas del sistema. du -h --max-depth=1 . : Tama\u00f1o de un directorio y sus subdirectorios directos. find [directorio] ! -user [usuario] -ls : Lista los ficheros que NO pertenecen a un usuario. badblocks -swv /dev/sda : Bloquear sectores defectuosos (sustituir /dev/sda por el dispositivo que corresponda. dpkg --configure -a : Soluciona problemas con paquetes mal instalados. mkdosfs -F 32 -v -n \"\" /dev/sdc1 : Formato de partici\u00f3n en FAT32. du -sh */ | sort -h : Muestra los directorios del directorio actual ordenados por tama\u00f1o (en formato humano) indicando su tama\u00f1o. cat fichero.txt | awk '{print $5}' : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | cut -d' ' -f5 : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | sed -e 's/ /\\n/g' : Sustituye todos los espacios del fichero por retornos de carro. netstat -nr : Tabla de rutas del sistema. netstat -ntu|grep :80|wc -l : n\u00famero de conexiones al servidor HTTP. netstat -ntu|grep :21|wc -l : n\u00famero de conexiones al servidor FTP. netstat -tulanp : Lista los puertos TCP/UDP abiertos (tanto de servidores como de clientes). netstat -tlnp : Lista los puertos TCP abiertos de los servicios. crontab -e : A\u00f1adir un job a cron. sudo badblocks /dev/sda > badblocks.txt; sudo fsck -l badblocks.txt /dev/sda : Bloqueo de sectores defectuosos del disco duro ( fuente ). sudo blkid : Lista los dispositivos de bloques (discos) disponibles en el sistema. sudo nmap -sP 192.168.1.0/24 : Descubrir todos los equipos presentes en la red 192.168.1.0 . sudo netstat -lp --inet : Puertos de red abiertos y procesos asociados. sudo dd if=/dev/zero of=/dev/mmcblk0 : Formateo de una tarjeta de memoria (en realidad vale para cualquier dispositivo de almacenamiento). sudo tcpdump -s 0 -i ppp0 -w trafico.pcap : Captura de tr\u00e1fico por el interfaz ppp0. iptables -L -n : Listar reglas iptables en formato num\u00e9rico (muestra IPs en lugar de hostnames). iptables -t nat -L : Listar reglas iptables de tabla NAT. wget -q -O - url : Hace la request de la URL sin emitir trazas (-q = no verbose) y redireccionando la response a la salida est\u00e1ndar (-O -). route -n : Muestra la tabla de rutas con IP's en lugar de con nombres. cat /etc/resolv.conf : Muestra el gateway en uso. nmcli dev show <adaptador_red> : Muestra los par\u00e1metros de la conexi\u00f3n de red (IP, gateway, DNS's, etc.). ldd <binario> : Indica las librer\u00edas que usa el binario. exiftool -AllDates='2010:08:08 15:35:33' -overwrite_original photo.jpg : Actualiza todas las fechas dentro de la metainformaci\u00f3n de un JPG. exiftool -all= photo.jpg : Borrar toda la metainformaci\u00f3n de una foto (por cuestiones de privacidad antes de subirla a un sitio por ejemplo). mplayer -vo caca MovieName.avi : Reproduce un v\u00eddeo en consola con ascii. Para verlo en blanco y negro sustituir caca por aa . sudo traceroute -4T -p 22 192.168.1.203 : Comprobar la traza hasta alcanzar un determinado puerto en una determinada m\u00e1quina. dig @8.8.8.8 -t any eduardofilo.es : Query DNS de los registros de cualquier tipo a trav\u00e9s del servidor 8.8.8.8 al dominio eduardofilo.es . Gesti\u00f3n de usuarios: sudo adduser userName : A\u00f1ade usuario creando home. sudo usermod -a -G groupName userName : A\u00f1ade el usuario userName ya existente al grupo groupName ya existente. sudo userdel -r userName : Borra el usuario eliminando su home. sudo stat /proc/1/exe : Nos da pistas de si el sistema funciona sobre SysV, Upstart o Systemd ( fuente ). stty < /dev/port : (sustituir port por lo que corresponda) Interroga el puerto para encontrar sus par\u00e1metros de conexi\u00f3n. recode ISO-8859-15/CR-LF..UTF8 fichero.txt : Recodifica un fichero de texto del formato habitual en Windows a UTF-8. find . ! -type d -name \"*.txt\" -exec recode ISO-8859-15/CR-LF..UTF8 {} \\; : Recodifica todos los ficheros de texto de un directorio del formato habitual en Windows a UTF-8. zenity : Para dotar de cuadros de di\u00e1logo a los scripts bash. Documentaci\u00f3n","title":"Comandos \u00fatiles"},{"location":"sistemas/unix.html#alias-ssh","text":"Para asimilar un identificador a una pareja user@host, editar el fichero ~/.ssh/config y a\u00f1adir un bloque como el siguiente ( fuente ): Host example HostName example.com User exampleuser","title":"Alias SSH"},{"location":"sistemas/unix.html#tunel-de-un-puerto-remoto-por-ssh","text":"( Fuente ) Para conducir el tr\u00e1fico hasta un host:puerto remoto canaliz\u00e1ndolo por un tunel seguro, se puede utilizar el comando ssh . Por ejemplo, vamos a tunelizar una conexi\u00f3n contra el puerto telnet de la m\u00e1quina remota telnet.example.com por medio del usuario ssh-user para tenerlo disponible en el puerto 2000 local de nuestra m\u00e1quina: ssh -f ssh-user@telnet.example.com -L 2000:telnet.example.com:23 -N A partir de ahora podremos conectarnos al telnet conectando con localhost:2000 .","title":"Tunel de un puerto remoto por SSH"},{"location":"sistemas/unix.html#uso-basico-de-screen","text":"En esta cheat sheet se re\u00fanen bastantes comandos \u00fatiles. A continuaci\u00f3n indico el uso t\u00edpico: Arrancamos una sesi\u00f3n: 1 shell ~$ screen Aparece una splashscreen que cerramos pulsando enter y ya podemos trabajar Lanzamos un comando: 1 screenshell_1 ~$ top Para cerrar la sesi\u00f3n screen que acabamos de abrir, tan s\u00f3lo hay que lanzar el comando exit (en este ejemplo, parando previamente el comando top que hab\u00edamos lanzado). Ahora sin embargo pretendemos dejarla abierta, con el comando top en ejecuci\u00f3n, para volver a ella m\u00e1s adelante. Es lo que se llama un detach (sirve para recordar la tecla que se pulsa al final de la combinaci\u00f3n de teclas). Para ello pulsamos la combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"d\" Habremos vuelto a nuestro bash inicial. Cuando en cualquier momento queramos recuperar la sesi\u00f3n screen, lo haremos con el comando: 1 shell ~$ screen -r Ahora estaremos viendo de nuevo la salida del comando top que hab\u00edamos dejado arrancado dentro de la sesi\u00f3n screen. Volvemos a abandonar la sesi\u00f3n sin cerrarla procediendo por tanto como en el paso 4: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial, vamos a abrir una segunda sesi\u00f3n screen para ver c\u00f3mo podemos movernos a una u a otra. Arrancamos la sesi\u00f3n como hicimos con la primera: 1 shell ~$ screen Cerramos la splashscreen y ejecutamos alg\u00fan comando para reconocer la sesi\u00f3n cuando volvamos a ella. Por ejemplo: 1 screenshell_2 ~$ ping 8.8.8.8 Abandonamos la sesi\u00f3n dej\u00e1ndola abierta: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial ahora tenemos dos sesiones screen lanzadas. Ahora el comando screen -r no se puede lanzar sin especificar el identificador de la sesi\u00f3n tras la opci\u00f3n -r . Obtenemos la lista de sesiones con el siguiente comando: 1 2 3 4 5 shell ~$ screen - list There are screens on : 12629. pts - 7. eduardo - HP - Folio - 13 ( 04 / 04 / 15 13 : 55 : 03 ) ( Detached ) 12609. pts - 7. eduardo - HP - Folio - 13 ( 04 / 04 / 15 13 : 54 : 51 ) ( Detached ) 2 Sockets in / var / run / screen / S - edumoreno . Ahora, para recuperar una de ella, por ejemplo la m\u00e1s vieja que conten\u00eda lanzado el comando top incorporaremos el identificador de la sesi\u00f3n tras la opci\u00f3n -r : 1 shell ~$ screen -r 12609.pts-7.eduardo-HP-Folio-13 Como se comentaba en el punto 4, para cerrar las sesiones simplemente saldremos con exit , aunque tambi\u00e9n, y sobre todo en caso de que la sesi\u00f3n se quedara bloqueada con alg\u00fan comando que no se pudiera cerrar, se puede matar la sesi\u00f3n con la siguiente combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"k\"","title":"Uso b\u00e1sico de screen"},{"location":"sistemas/unix.html#buqueda-de-ficheros-que-contienen-una-cadena","text":"#!/bin/bash SAVEIFS = $IFS IFS = $( echo -en \"\\n\\b\" ) for file in ` find . ` do fgrep \"[cadena a buscar]\" $file > /dev/null 2 > & 1 if [ $? -eq 0 ] ; then echo $file fi done IFS = $SAVEIFS En realidad el script anterior hace lo mismo que el simple comando siguiente: $ fgrep -rl \"[cadena a buscar]\" .","title":"B\u00faqueda de ficheros que contienen una cadena"},{"location":"sistemas/unix.html#ajustes-de-permisos-a-ficheros-y-directorios-por-separado","text":"$ #Para los ficheros: $ find . ! -type d -exec chmod 664 {} \\; $ #Para los directorios: $ find . -type d -exec chmod 775 {} \\;","title":"Ajustes de permisos a ficheros y directorios por separado"},{"location":"sistemas/unix.html#renombrado-de-ficheros-de-mayusculas-a-minusculas","text":"( Fuente ) #!/bin/sh for f in * ; do g = ` expr \"xxx $f \" : 'xxx\\(.*\\)' | tr '[A-Z]' '[a-z]' ` mv \" $f \" \" $g \" done","title":"Renombrado de ficheros de may\u00fasculas a min\u00fasculas"},{"location":"sistemas/unix.html#comprimir-uno-a-uno-los-ficheros-de-un-directorio","text":"Por ejemplo ficheros de extensi\u00f3n .gba : for f in *.gba ; do file = $( basename \" $f \" .gba ) zip \" ${ file } .zip\" \" ${ file } .gba\" done","title":"Comprimir uno a uno los ficheros de un directorio"},{"location":"sistemas/unix.html#quitar-los-primeros-5-caracteres-de-los-ficheros-de-un-directorio","text":"for f in *.gba ; do mv \" $f \" \" ${ f : 5 : ${# f }} \" done","title":"Quitar los primeros 5 caracteres de los ficheros de un directorio"},{"location":"sistemas/unix.html#redireccion-de-salidas","text":"Para redirigir ambas salidas de un programa (estandar y error) hacer lo siguiente: $ COMANDO > FICHERO_O_DISPOSITIVO 2 > & 1 En esta p\u00e1gina se documenta con m\u00e1s detalle este tema.","title":"Redirecci\u00f3n de salidas"},{"location":"sistemas/unix.html#ejecucion-remota-de-aplicaciones-xwindow","text":"Abrir el servidor X (Cygwin) Iniciar sesi\u00f3n remota: ssh -X [usuario]@[m\u00e1quina] Ejecutar la aplicaci\u00f3n","title":"Ejecuci\u00f3n remota de aplicaciones XWindow"},{"location":"sistemas/unix.html#mysql","text":"Acceso: mysql -u root -p Listar bases de datos: show databases; Abrir una base de datos: use [NombreBBDD]; Listar tablas: show tables;","title":"MySQL"},{"location":"sistemas/unix.html#ficheros-de-configuracion-importantes","text":"/etc/security/limits.conf : Configuration file for the pam_limits module. Permite limitar el n\u00famero de ficheros abiertos por el sistema, el n\u00famero de procesos, etc.","title":"Ficheros de configuraci\u00f3n importantes"},{"location":"sistemas/unix.html#solucion-al-problema-de-los-alias-alternatives-de-java6-en-ubuntu","text":"Los paquetes de Java 6 (1.6) en Ubuntu tienen problemas a la hora de ajustar los alias en /etc/alternatives cuando antes ha estado instalada otra versi\u00f3n (1.5 por ejemplo). Se puede forzar la generaci\u00f3n de los alias mediante las siguientes ordenes: $ update-java-alternatives --list $ sudo update-java-alternatives --set [ elegir el identificador de la lista que muestra el comando anterior ]","title":"Soluci\u00f3n al problema de los alias (alternatives) de Java6 en Ubuntu"},{"location":"sistemas/unix.html#bits-suid-sgid-y-sticky","text":"Manual de LuCAS","title":"Bits SUID, SGID y sticky"},{"location":"sistemas/unix.html#autentificacion-automatica-por-ssh","text":"Conseguiremos que la autentificaci\u00f3n del cliente se haga por medio de una pareja de claves privada/p\u00fablica en lugar de con identificador de usuario/password. Primero generamos la pareja de claves p\u00fablica-privada ejecutando en el cliente ssh-keygen : $ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key ( /home/user/.ssh/id_rsa ) : Enter passphrase ( empty for no passphrase ) : Enter same passphrase again: Your identification has been saved in /home/user/.ssh/id_rsa. Your public key has been saved in /home/user/.ssh/id_rsa.pub. The key fingerprint is: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx user@machine Las claves se almacenan por defecto en ~/.ssh/ , quedando el directorio as\u00ed: $ ls -l total 12 -rw------- 1 user user 883 2005 -08-13 14 :16 id_rsa -rw-r--r-- 1 user user 223 2005 -08-13 14 :16 id_rsa.pub -rw-r--r-- 1 user user 1344 2005 -08-04 02 :14 known_hosts Los ficheros id_rsa e id_rsa.pub contienen respectivamente las claves privada y p\u00fablica. El fichero known_hosts contiene la lista de las claves p\u00fablicas de las m\u00e1quinas reconocidas. Ahora se debe copiar la clave p\u00fablica al servidor, al fichero ~/.ssh/authorized_keys . Para ello se utiliza el comando ssh-copy-id: $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine1 $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine2 ssh-copy-id es un script que se conecta a la m\u00e1quina y copia el archivo (indicado por la opci\u00f3n -i ) en ~/.ssh/authorized_keys , y ajusta los permisos a los valores adecuados. Si no se dispone del programa ssh-copy-id se puede realizar una copia manual a la m\u00e1quina remota del fichero conteniendo la clave p\u00fablica (por ejemplo usando scp o sftp ) y a\u00f1adir su contenido al fichero ~/.ssh/authorized_keys . Ahora la conexi\u00f3n deber\u00eda funcionar sin necesidad de introducir la clave. Si no es as\u00ed es posible que sea un problema de permisos en los ficheros. Los permisos correctos deben ser similares a estos: $ chmod go-w ~ ~/.ssh $ chmod 600 ~/.ssh/authorized_keys La conexi\u00f3n SSH se realizar\u00e1 indicando el fichero con la clave privada como argumento de la siguiente forma: $ ssh -i ~/.ssh/id_rsa user@machine (Si el nombre del fichero con la clave privada es precisamente el del ejemplo, es decir id_rsa , creo que no es necesario indicarlo con la opci\u00f3n -i ).","title":"Autentificaci\u00f3n autom\u00e1tica por SSH"},{"location":"sistemas/unix.html#configuracion-de-firefox-para-ejecucion-de-applets-java","text":"( Fuente ) Vaya al subdirectorio de complementos, situado dentro del directorio de instalaci\u00f3n de Mozilla. $ cd ` <directorio de instalaci\u00f3n de Mozilla> ` /plugins # Normalmente /usr/lib/firefox/plugins o $ cd ` <home del usuario> ` /.mozilla/plugins En el directorio actual, cree un v\u00ednculo simb\u00f3lico al archivo del JRE ns7/libjavaplugin_oji.so. Escriba: $ ln -s ` <directorio de instalaci\u00f3n del JRE> ` /plugin/i386/ns7/libjavaplugin_oji.so Inicie el navegador Mozilla o rein\u00edcielo si ya se estaba ejecutando. Tenga en cuenta que, si se est\u00e1 ejecutando alg\u00fan otro componente de Mozilla (como Messenger, Composer, etc.) deber\u00e1 tambi\u00e9n reiniciarlo. Vaya a Editar > Preferencias. En la categor\u00eda Avanzadas, seleccione Activar Java.","title":"Configuraci\u00f3n de Firefox para ejecuci\u00f3n de applets Java"},{"location":"sistemas/unix.html#organizacion-de-menus-cuando-se-mezclan-aplicaciones-kde-y-gnome","text":"GNU/Linux nos permite tener varios sistemas de escritorio diferentes instalados y funcionando, pero inevitablemente nos encontramos con una mezcla de opciones y programas de cada entorno en los men\u00fas principales. Existen aplicaciones precisamente para limpiar autom\u00e1ticamente las entradas del men\u00fa que no corresponden a tu sistema de escritorio habitual, y dejarlas apartadas y ordenadas de alguna manera. Con Gnome y KDE instalados a la vez, hay dos programas para aquellos Gnomeros que han querido probar KDE y para los KDEeros que han querido probar Gnome. Gnome Menu Extended es el propio men\u00fa normal de Gnome, pero incluye una carpeta donde se guardan todas las aplicaciones y opciones de KDE. Se instala f\u00e1cilmente descargando el paquete para cualquier distribuci\u00f3n: Debian (y Ubuntu), Slackware o directamente el c\u00f3digo fuente para compilarlo. Una vez instalado, se activa yendo a Preferencias -> Add KDE Menu. Y si quieres recuperar el men\u00fa como estaba, tambi\u00e9n tiene la opci\u00f3n de restaurarlo. K Menu Gnome es un men\u00fa exactamente igual que el KMenu original, pero incluye una carpeta donde residen todas las aplicaciones de Gnome, en sistemas que tienen ambos escritorios instalados. Est\u00e1 disponible para Debian (y Ubuntu), Slackware, Fedora y el c\u00f3digo fuente para compilarlo en cualquier sistema.","title":"Organizaci\u00f3n de men\u00fas cuando se mezclan aplicaciones KDE y Gnome"},{"location":"sistemas/unix.html#error-error-while-loading-shared-libraries","text":"Runtime error. The linker hasn't found your libraries. Either they are not installed properly or the linker doesn't know where they are (most probably in /usr/local/lib ). To get your linker to update its list of libraries type: $ ldconfig /usr/local/lib or as a temporary measure: $ export LD_LIBRARY_PATH = \"/usr/local/lib\" En este documento se dan m\u00e1s detalles.","title":"Error \"error while loading shared libraries: ...\""},{"location":"sistemas/unix.html#compartir-ficheros-con-samba","text":"Aparte de instalar y configurar Samba (fichero /etc/samba/smb.conf ) hay que dar de alta los usuarios UNIX que se usar\u00e1n a trav\u00e9s de Samba y asignarles un password para el acceso por el mismo. Esto se hace con el comando: $ sudo smbpasswd -a usuario","title":"Compartir ficheros con Samba"},{"location":"sistemas/unix.html#migracion-masiva-de-usuarios","text":"( Fuente ) Para los casos en los que sea necesario replicar los usuarios de un servidor Linux a otro o en los que se vaya a migrar a un servidor con m\u00e1s recursos, el siguiente procedimiento puede ser de utilidad. Los escenarios son varios, desde los servidores que ejecutan alg\u00fan tipo de base de datos, los que tienen ciertas aplicaciones, los que alojan p\u00e1ginas Web, etc\u00e9tera. Para fines de la demostraci\u00f3n pensaremos que el servidor est\u00e1 dedicado como servidor de archivos, mismos que se almacenan en el home de cada uno de los usuarios. NOTA: El presente procedimiento da por hecho que se hayan realizado las configuraciones necesarias en el nuevo servidor. Primero, lo que debe respaldarse es la lista de usuarios con su respectiva contrase\u00f1a. El archivo /etc/passwd contiene las cuentas de los usuarios en el sistema bajo el siguiente formato de ejemplo: root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/ nologin adm:x:3:4:adm:/var/adm:/sbin/nologin nitsuga:x:500:500::/home/nitsuga:/bin/bash nitsuga2:x:501:501::/home/nitsuga2:/bin/bash nitsuga3:x:502:502::/home/nitsuga3:/bin/bash Como se observa, el segundo campo respectivo al hash de la contrase\u00f1a no se muestra. La contrase\u00f1a se encuentra en el archivo /etc/shadow root:$1$/7zmwgAa$Jd5ja7nsC4nTm O3s0.Z1j1:13445:0:99999:7::: bin:*:13445:0:99999:7::: daemon:*:13445:0:99999:7::: adm:*:13445:0:99999:7::: nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:13498:2:1:1::: nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: Se proceder\u00e1 a unir el usuario con su contrase\u00f1a utilizando el comando pwunconv para \u201cdesactivar\u201d el shadow, quedando as\u00ed las contrase\u00f1as en el archivo passwd. root:$1$/7zmwgAa$Jd5ja7nsC4n TmO3s0.Z1j1:0:0:root:/root:/bin/bash bin:*:1:1:bin:/bin:/sbin/nologin daemon:*:2:2:daemon:/sbin:/sbin/ nologin adm:*:3:4:adm:/var/adm:/sbin/nologin nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/ nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga3:/bin/bash","title":"Migraci\u00f3n masiva de usuarios"},{"location":"sistemas/unix.html#depuracion-de-etcpasswd","text":"Se copiar\u00e1 el archivo /etc/passwd a uno de trabajo /etc/passwd.migracion . Ahora se editar\u00e1 el archivo y se quitar\u00e1n todos los usuarios propios del sistema (root, usuarios de demonios, etc\u00e9tera) dejando s\u00f3lo los usuarios que van a ser autenticados. nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga2:/bin/bash Tambi\u00e9n se copiar\u00e1 el archivo /etc/group a /etc/group.migracion root:x:0:root bin:x:1:root,bin,daemon daemon:x:2:root,bin,daemon sys:x:3:root,bin,adm adm:x:4:root,adm,daemon nitsuga:x:500: nitsuga2:x:501: nitsuga3:x:502: nitsuga8:x:507: Y se editar\u00e1 para dejar s\u00f3lo los grupos de los usuarios: nitsuga:x:500: nitsuga2:x:501: nitsuga3:x:502: Ahora se respaldar\u00e1 el home de los usuarios, suponiendo que se encuentra bajo el directorio/home, se har\u00e1 lo siguiente desde ra\u00edz (/): [root@localhost /]# tar -cpzvf home.tgz home/ En el que las banderas: c = crea el archivo p = preserva los permisos z = comprime el archivo .tar generado v = da salida detallada f = especifica el archivo a crear (para este caso home.tgz) Ahora bien, se realizar\u00e1 la transferencia de los archivos home.tgz, passwd.migracion y group.migracion al nuevo servidor: [root@localhost /]# scp /home.tgz root@nuevoservidor [root@localhost /]# scp /etc/passwd.migracion root@nuevoservidor [root@localhost /]# scp /etc/group.migracion root@nuevoservidor Una vez en el nuevo servidor se deber\u00e1 verificar que no se repitan tanto los UID como los GID entre los dos servidores. Se realizar\u00e1: [root@localhost /]# cp \u2013p home.tgz / ; tar \u2013zxvf home.tgz [root@localhost /]# cp \u2013p passwd.migracion /etc ; pwunconv ; cat passwd.migracion >> passwd; pwconv [root@localhost /]# cp \u2013p group.migracion /etc ; cat group.migracion >> group","title":"Depuraci\u00f3n de /etc/passwd"},{"location":"sistemas/unix.html#eliminar-peticion-password-en-sudo","text":"Es necesario reconfigurar el fichero /etc/sudoers para que no se solicite el password del usuario a la hora de hacer sudo, dado que necesitamos que se haga sudo desde un proceso que no tendr\u00e1 interacci\u00f3n con el usuario. Para conseguir esto hay que hacer dos cosas: Incorporar el usuario que nos interesa al grupo sudo del sistema Situar al final del fichero de configuraci\u00f3n /etc/sudoers lo siguiente: %sudo ALL=NOPASSWD: ALL Hay que fijarse que la linea anterior normalmente ya aparece en el fichero pero comentada con una almohadilla. Se puede aprovechar la linea quitando el car\u00e1cter almohadilla del principio, pero hay que tener en cuenta que no es suficiente con eso. Hay que mover la linea al final del fichero ya que las lineas siguientes pueden sobreescribir su efecto. Importante : La edici\u00f3n del fichero /etc/sudoers s\u00f3lo se puede hacer con el comando visudo . Este comando hay que lanzarlo con sudo a su vez, por lo que se har\u00e1 de la siguiente forma: $ sudo visudo","title":"Eliminar petici\u00f3n password en sudo"},{"location":"sistemas/unix.html#proxy-http-en-consola","text":"Setting up proxy at Firefox do not have effects at console, which means your wget, ssh, apt-get, yum etc do not access through the proxy you set at Firfox browser. To setup http proxy at console, you can do as bellow, assume the proxy IP is 219.93.2.113 and port 3128: $ export http_proxy = 'http://219.93.2.113:3128/' Remember, you have to specified http://, and to know more about export, check out HERE. To clear your http proxy and use back yours, do this: $ export http_proxy = ''","title":"Proxy HTTP en consola"},{"location":"sistemas/unix.html#convertir-nombres-de-ficheros-de-iso-a-utf-8","text":"Al migrar una web, o al copiar un sistema de archivos, te puedes encontrar con nombres de ficheros en otras codificaciones de caracteres. Mediante el siguiente comando transformar\u00edamos los nombres de ficheros desde ISO-8869-1 a UTF-8: $ convmv -r -f ISO-8859-1 -t UTF-8 --notest *","title":"Convertir nombres de ficheros de ISO a UTF-8"},{"location":"sistemas/unix.html#backup-de-un-filesystem","text":"Backup: $ dd if = /dev/hdx | gzip > /path/to/image.gz Restauraci\u00f3n: $ gzip -dc /path/to/image.gz | dd of = /dev/hdx","title":"Backup de un FileSystem"},{"location":"sistemas/unix.html#montar-un-fichero-img","text":"( Fuente ). Primero hay que averiguar el offset de la partici\u00f3n que queremos montar: fdisk -l /ruta/fichero.img Esto nos mostrar\u00e1 el tama\u00f1o del bloque y el bloque de comienzo de la partici\u00f3n. Por ejemplo: edumoreno@eduardo-HP-Folio-13:~/Descargas$ fdisk -l RetroPie.img Disk RetroPie.img: 3,7 GiB, 3965190144 bytes, 7744512 sectors Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disklabel type: dos Disk identifier: 0xb847d94e Disposit. Inicio Start Final Sectores Size Id Tipo RetroPie.img1 * 8192 124927 116736 57M e W95 FAT16 (LBA) RetroPie.img2 124928 7744511 7619584 3,6G 83 Linux El offset se calcular\u00e1 multiplicando el bloque de comienzo por el tama\u00f1o de bloque. En el ejemplo, para la segunda partici\u00f3n: offset = 124928 * 512 = 63963136 Por tanto el comando para montar ser\u00e1: sudo mount -o loop,offset=63963136 RetroPie.img /mnt/tmp","title":"Montar un fichero .img"},{"location":"sistemas/unix.html#manipulacion-de-pdfs","text":"Divisi\u00f3n en m\u00faltiples ficheros (uno por p\u00e1gina): $ pdftk largepdfile.pdf burst Fusi\u00f3n de varios ficheros en uno: $ pdftk *.pdf cat output onelargepdfile.pdf","title":"Manipulaci\u00f3n de PDFs"},{"location":"sistemas/unix.html#obtener-hash-md5-de-una-cadena","text":"$ echo -n \"<cadena>\" | md5sum","title":"Obtener hash MD5 de una cadena"},{"location":"sistemas/unix.html#system-mysql-backup-script","text":"#!/bin/bash # System + MySQL backup script # Full backup day - Sun (rest of the day do incremental backup) # Copyright (c) 2005-2006 nixCraft `<http://www.cyberciti.biz/fb/>` # This script is licensed under GNU GPL version 2.0 or above # Automatically generated by http://bash.cyberciti.biz/backup/wizard-ftp-script.php # --------------------------------------------------------------------- ### System Setup ### DIRS = \"/var/spool/sms /var/log/smstools /root\" BACKUP = /tmp/backup. $$ NOW = $( date + \"%d-%m-%Y\" ) INCFILE = \"/var/tar-inc-backup.dat\" DAY = $( date + \"%a\" ) # echo $DAY >> /root/dates FULLBACKUP = \"Sun\" ### MySQL Setup ### MUSER = \"mysqluser\" MPASS = \"mysqlpwd\" MHOST = \"localhost\" MYSQL = \" $( which mysql ) \" MYSQLDUMP = \" $( which mysqldump ) \" GZIP = \" $( which gzip ) \" ### FTP server Setup ### FTPD = \"//incremental\" FTPU = \"ftpuser\" FTPP = \"ftppwd\" FTPS = \"ftphost\" NCFTP = \" $( which ncftpput ) \" ### Other stuff ### EMAILID = \"user@domain.com\" ### Start Backup for file system ### [ ! -d $BACKUP ] && mkdir -p $BACKUP || : ### See if we want to make a full backup ### if [ \" $DAY \" == \" $FULLBACKUP \" ] ; then FTPD = \"//full\" FILE = \"fs-full- $NOW .tar.gz\" tar -zcvf $BACKUP / $FILE $DIRS else i = $( date + \"%Hh%Mm%Ss\" ) FILE = \"fs-i- $NOW - $i .tar.gz\" tar -g $INCFILE -zcvf $BACKUP / $FILE $DIRS fi ### Start MySQL Backup ### # Get all databases name DBS = \" $( $MYSQL -u $MUSER -h $MHOST -p $MPASS -Bse 'show databases' ) \" for db in $DBS do FILE = $BACKUP /mysql- $db . $NOW - $( date + \"%T\" ) .gz $MYSQLDUMP -u $MUSER -h $MHOST -p $MPASS $db | $GZIP -9 > $FILE done ### Dump backup using FTP ### #Start FTP backup using ncftp ncftp -u \" $FTPU \" -p \" $FTPP \" $FTPS <<EOF mkdir $FTPD mkdir $FTPD/$NOW cd $FTPD/$NOW lcd $BACKUP mput * quit EOF ### Find out if ftp backup failed or not ### if [ \" $? \" == \"0\" ] ; then rm -f $BACKUP /* else T = /tmp/backup.fail echo \"Date: $( date ) \" > $T echo \"Hostname: $( hostname ) \" >> $T echo \"Backup failed\" >> $T mail -s \"BACKUP FAILED\" \" $EMAILID \" < $T rm -f $T fi","title":"System + MySQL backup script"},{"location":"sistemas/unix.html#recuperacion-de-pendrive-o-tarjeta-de-memoria-corrupta","text":"Con TestDisk/Photorec.","title":"Recuperaci\u00f3n de pendrive o tarjeta de memoria corrupta"},{"location":"sistemas/unix.html#enlaces","text":"TestDisk Paso A Paso How to Recover Data from Corrupt / formatted USB Flash using Photorec","title":"Enlaces"},{"location":"sistemas/unix.html#instalaciondesinstalacion-de-scripts-sysvupstart","text":"Los scripts del serivicio deber\u00e1n tener una cabecera especial que indique c\u00f3mo deben comportarse en cada nivel de ejecuci\u00f3n. Por ejemplo \u00e9ste es el que tiene MySQL: #!/bin/bash # ### BEGIN INIT INFO # Provides: mysql # Required-Start: $remote_fs $syslog # Required-Stop: $remote_fs $syslog # Should-Start: $network $time # Should-Stop: $network $time # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Start and stop the mysql database server daemon # Description: Controls the main MySQL database server daemon \"mysqld\" # and its wrapper script \"mysqld_safe\". ### END INIT INFO # Instalar: sudo update-rc.d SERVICE defaults Desinstalar: sudo update-rc.d -f SERVICE remove","title":"Instalaci\u00f3n/desinstalaci\u00f3n de scripts SysV/Upstart"},{"location":"sistemas/unix.html#creacion-de-servicios-systemd","text":"Crear un archivo en /etc/systemd/system/ con el nombre del servicio y la extensi\u00f3n .service . Insertar el siguiente contenido: [Unit] Description=Nombre del servicio Wants=network-online.target After=network-online.target [Service] Type=simple ExecStart=/bin/bash /home/usuario/script_arranque.sh Restart=on-abort User=usuario Group=usuario [Install] WantedBy=multi-user.target Activar el nuevo servicio: 1 $ sudo systemctl enable mi_servicio.service Para no esperar al reinicio, arrancar manualmente el servicio: 1 $ sudo systemctl start mi_servicio.service Para comprobar si el servicio se inicia correctamente: 1 $ sudo systemctl status mi_servicio.service","title":"Creaci\u00f3n de servicios Systemd"},{"location":"sistemas/unix.html#gestion-de-servicios-systemd","text":"systemctl start SERVICE - Use it to start a service. Does not persist after reboot systemctl stop SERVICE - Use it to stop a service. Does not persist after reboot systemctl restart SERVICE - Use it to restart a service systemctl reload SERVICE - If the service supports it, it will reload the config files related to it without interrupting any process that is using the service. systemctl status SERVICE - Shows the status of a service. Tells whether a service is currently running. systemctl enable SERVICE - Turns the service on, on the next reboot or on the next start event. It persists after reboot. systemctl disable SERVICE - Turns the service off on the next reboot or on the next stop event. It persists after reboot. systemctl is-enabled SERVICE - Check if a service is currently configured to start or not on the next reboot. systemctl is-active SERVICE - Check if a service is currently active. systemctl show SERVICE - Show all the information about the service. systemctl mask SERVICE - Completely disable a service by linking it to /dev/null ; you cannot start the service manually or enable the service. systemctl unmask SERVICE - Removes the link to /dev/null and restores the ability to enable and or manually start the service.","title":"Gesti\u00f3n de servicios Systemd"},{"location":"sistemas/unix.html#montaje-de-carpeta-compartida-samba-en-etcfstab","text":"Crear un fichero /home/usuario/.smbcredentials con el siguiente contenido: user=usuario password=password A\u00f1adir la siguiente l\u00ednea a /etc/fstab : 192.168.1.100/carpeta_compartida /home/usuario/punto_montaje cifs uid=usuario,gid=usuario,credentials=/home/usuario/.smbcredentials,iocharset=utf8,sec=ntlmv2,file_mode=0664,dir_mode=0775 0 0","title":"Montaje de carpeta compartida samba en /etc/fstab"},{"location":"sistemas/unix.html#mini-servidor-http","text":"Web oficial $ wget http://www.acme.com/software/thttpd/thttpd-2.29.tar.gz $ tar xzvf thttpd-2.29.tar.gz $ cd thttpd-2.29/ $ ./configure $ make $ sudo ./thttpd -d <directorio_root>","title":"Mini servidor HTTP"},{"location":"sistemas/unix.html#montado-de-unidades-de-red-con-autofs","text":"","title":"Montado de unidades de red con autofs"},{"location":"sistemas/unix.html#nfs","text":"( Fuente ) Instalar paquetes: $ sudo apt-get install autofs nfs-common A\u00f1adir lo siguiente al final del fichero /etc/auto.master : /home/usuario/red /etc/auto.red Crear fichero /etc/auto.red con el siguiente contenido (cambiar rw por ro si se desea acceso de s\u00f3lo lectura): montaje -fstype=nfs4,rw 192.168.1.100:/path/directory Crear enlaces a los directorios montados con autofs: $ cd ~ $ ln -s /home/usuario/red/montaje montaje","title":"NFS"},{"location":"sistemas/unix.html#smbcifs","text":"( Fuente ) Instalar paquetes: $ sudo apt-get install autofs smbclient cifs-utils A\u00f1adir lo siguiente al final del fichero /etc/auto.master : /home/usuario/red /etc/auto.red --timeout=600 Crear fichero /etc/auto.red con el siguiente contenido: montaje -fstype=cifs,rw,noperm,netbiosname=${HOST},credentials=/home/usuario/.smbcredentials ://192.168.1.100/carpeta_compartida Crear fichero /home/usuario/.smbcredentials con el siguiente contenido: username=<usuario> password=<password> Proteger el fichero: $ chmod 600 /home/usuario/.smbcredentials Crear enlaces a los directorios montados con autofs: $ cd ~ $ ln -s /home/usuario/red/montaje montaje","title":"SMB/CIFS"},{"location":"varios/bici.html","text":"Bicicleta \u00b6 Brompton \u00b6 Enlaces \u00b6 Lubricaci\u00f3n Repuestos \u00b6 Cadena 96 eslabones 3/32\" Plato 44 dientes Pi\u00f1\u00f3n 13 dientes Hub BWR-3 \u00b6 Servicing Sturmey-Archer 3-Speed Hubs Brompton Sturmey Archer Internal Gear Hub Re-grease Maintenance - V\u00eddeo","title":"Bicicleta"},{"location":"varios/bici.html#bicicleta","text":"","title":"Bicicleta"},{"location":"varios/bici.html#brompton","text":"","title":"Brompton"},{"location":"varios/bici.html#enlaces","text":"Lubricaci\u00f3n","title":"Enlaces"},{"location":"varios/bici.html#repuestos","text":"Cadena 96 eslabones 3/32\" Plato 44 dientes Pi\u00f1\u00f3n 13 dientes","title":"Repuestos"},{"location":"varios/bici.html#hub-bwr-3","text":"Servicing Sturmey-Archer 3-Speed Hubs Brompton Sturmey Archer Internal Gear Hub Re-grease Maintenance - V\u00eddeo","title":"Hub BWR-3"},{"location":"varios/corsa_d.html","text":"Corsa D \u00b6 Reset de mensaje InSP \u00b6 ( Fuente ) Para borrar el mensaje de inspecci\u00f3n en caso de que el taller olvide hacerlo (a mi me ha sucedido una vez): Pisar y mantener el pedal del freno. Pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial para que se ilumine el mismo. Volver a pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial y mantenerlo esta vez. Dar contacto (no es necesario arrancar). Seguir manteniendo pulsado el bot\u00f3n de reset del cuentakil\u00f3metros parcial hasta que desaparezca el mensaje InSP. Men\u00fa oculto de diagn\u00f3stico \u00b6 ( Fuente ) Muestra algunas estad\u00edsticas y valores instant\u00e1neos que no se muestran en el display normalmente (como la temperatura del motor o los litros exactos que quedan de combustible): Dar contacto (no es necesario arrancar). Pulsar tres veces la tecla de reset del ordenador de a bordo o del cuentakil\u00f3metros parcial. Pulsar una cuarta vez y mantener 10 segundos la tecla anterior. Por medio de la misma tecla iremos alternando entre las siguientes visualizaciones en pantalla: Versi\u00f3n del modelo y fecha de fabricaci\u00f3n Versi\u00f3n del software y fecha de producci\u00f3n ??? (00 / 000072) Velocidad y revoluciones Voltaje de la bater\u00eda y ??? (24). Varios: Nivel de brillo del display Temperatura del l\u00edquido refrigerante ??? (100 / L2 129) ??? (100 / S2 337) ??? (100 / P2 353) ??? (100 / t2 463) Combustible: Nivel en litros Lecturas del sensor del dep\u00f3sito?? Consumos: Flujo Consumo instant\u00e1neo \u00daltima revisi\u00f3n (en realidad desde que se resetea el mensaje Insp ): N\u00famero de d\u00edas desde la \u00faltima revisi\u00f3n Kil\u00f3metros desde la \u00faltima revisi\u00f3n Salida Opciones ocultas \u00b6 Meter la llave pero no girarla, es decir, no dar contacto. Tirar de las dos palancas laterales (luces y lavaluneta) hacia atr\u00e1s, es decir hacia nosotros, durante 3 segundos hasta que se oiga un tono. Usar la palanca izquierda (luces) arriba y abajo para cambiar de opci\u00f3n y la palanca derecha (lavaluneta) tambi\u00e9n arriba y abajo para cambiar el valor. Las opciones disponibles son las siguientes (en mi modelo de 3 puertas no aparece la opci\u00f3n 5): P1: Luces de bienvenida: on/off. Enciende las luces delanteras cuando al abrir el coche con el mando pulsamos el bot\u00f3n de abrir una segunda vez. P2: Lavaluneta trasera autom\u00e1tico: on/off. Se enciende autom\u00e1ticamente cuando el lavaluneta delantero est\u00e1 activo y se pone la marcha atr\u00e1s. P3: Intermitentes con un toque: on/off. Para se\u00f1alizar c\u00f3modamente el cambio de carril (esta opci\u00f3n est\u00e1 activada por defecto). P4: Cierre autom\u00e1tico de puertas: on/off. Al pasar de 20 km/h aproximadamente. P5: Cierre separado de puerta de conductor: on/off. P6: Aviso al superar una velocidad determinada en el ajuste: on/off. P7: Volumen de los tonos de aviso: 1-5. Para aceptar los nuevos ajustes tirar de nuevo de ambas palancas como al principio hasta que se escuche un tono. Si no se hacen cambios durante 10 segundos se cancelar\u00e1n los ajustes. Se supone que estos ajustes se asocian a la llave con que fueron hechos. Leer los DTC (diagnostic trouble codes) \u00b6 Pisar los pedales de freno y acelerador. Dar contacto (sin arrancar). Esperar a que el s\u00edmbolo del motor se apague. A partir de ese momento empezar\u00e1 a parpadear indic\u00e1ndonos el c\u00f3digo de error. Hay que contar los parpadeos. El c\u00f3digo consta de 4 d\u00edgitos. El d\u00edgito 0 se representa con 10 parpadeos. Cambio de bombillas fundidas en el display central \u00b6","title":"Opel Corsa D"},{"location":"varios/corsa_d.html#corsa-d","text":"","title":"Corsa D"},{"location":"varios/corsa_d.html#reset-de-mensaje-insp","text":"( Fuente ) Para borrar el mensaje de inspecci\u00f3n en caso de que el taller olvide hacerlo (a mi me ha sucedido una vez): Pisar y mantener el pedal del freno. Pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial para que se ilumine el mismo. Volver a pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial y mantenerlo esta vez. Dar contacto (no es necesario arrancar). Seguir manteniendo pulsado el bot\u00f3n de reset del cuentakil\u00f3metros parcial hasta que desaparezca el mensaje InSP.","title":"Reset de mensaje InSP"},{"location":"varios/corsa_d.html#menu-oculto-de-diagnostico","text":"( Fuente ) Muestra algunas estad\u00edsticas y valores instant\u00e1neos que no se muestran en el display normalmente (como la temperatura del motor o los litros exactos que quedan de combustible): Dar contacto (no es necesario arrancar). Pulsar tres veces la tecla de reset del ordenador de a bordo o del cuentakil\u00f3metros parcial. Pulsar una cuarta vez y mantener 10 segundos la tecla anterior. Por medio de la misma tecla iremos alternando entre las siguientes visualizaciones en pantalla: Versi\u00f3n del modelo y fecha de fabricaci\u00f3n Versi\u00f3n del software y fecha de producci\u00f3n ??? (00 / 000072) Velocidad y revoluciones Voltaje de la bater\u00eda y ??? (24). Varios: Nivel de brillo del display Temperatura del l\u00edquido refrigerante ??? (100 / L2 129) ??? (100 / S2 337) ??? (100 / P2 353) ??? (100 / t2 463) Combustible: Nivel en litros Lecturas del sensor del dep\u00f3sito?? Consumos: Flujo Consumo instant\u00e1neo \u00daltima revisi\u00f3n (en realidad desde que se resetea el mensaje Insp ): N\u00famero de d\u00edas desde la \u00faltima revisi\u00f3n Kil\u00f3metros desde la \u00faltima revisi\u00f3n Salida","title":"Men\u00fa oculto de diagn\u00f3stico"},{"location":"varios/corsa_d.html#opciones-ocultas","text":"Meter la llave pero no girarla, es decir, no dar contacto. Tirar de las dos palancas laterales (luces y lavaluneta) hacia atr\u00e1s, es decir hacia nosotros, durante 3 segundos hasta que se oiga un tono. Usar la palanca izquierda (luces) arriba y abajo para cambiar de opci\u00f3n y la palanca derecha (lavaluneta) tambi\u00e9n arriba y abajo para cambiar el valor. Las opciones disponibles son las siguientes (en mi modelo de 3 puertas no aparece la opci\u00f3n 5): P1: Luces de bienvenida: on/off. Enciende las luces delanteras cuando al abrir el coche con el mando pulsamos el bot\u00f3n de abrir una segunda vez. P2: Lavaluneta trasera autom\u00e1tico: on/off. Se enciende autom\u00e1ticamente cuando el lavaluneta delantero est\u00e1 activo y se pone la marcha atr\u00e1s. P3: Intermitentes con un toque: on/off. Para se\u00f1alizar c\u00f3modamente el cambio de carril (esta opci\u00f3n est\u00e1 activada por defecto). P4: Cierre autom\u00e1tico de puertas: on/off. Al pasar de 20 km/h aproximadamente. P5: Cierre separado de puerta de conductor: on/off. P6: Aviso al superar una velocidad determinada en el ajuste: on/off. P7: Volumen de los tonos de aviso: 1-5. Para aceptar los nuevos ajustes tirar de nuevo de ambas palancas como al principio hasta que se escuche un tono. Si no se hacen cambios durante 10 segundos se cancelar\u00e1n los ajustes. Se supone que estos ajustes se asocian a la llave con que fueron hechos.","title":"Opciones ocultas"},{"location":"varios/corsa_d.html#leer-los-dtc-diagnostic-trouble-codes","text":"Pisar los pedales de freno y acelerador. Dar contacto (sin arrancar). Esperar a que el s\u00edmbolo del motor se apague. A partir de ese momento empezar\u00e1 a parpadear indic\u00e1ndonos el c\u00f3digo de error. Hay que contar los parpadeos. El c\u00f3digo consta de 4 d\u00edgitos. El d\u00edgito 0 se representa con 10 parpadeos.","title":"Leer los DTC (diagnostic trouble codes)"},{"location":"varios/corsa_d.html#cambio-de-bombillas-fundidas-en-el-display-central","text":"","title":"Cambio de bombillas fundidas en el display central"},{"location":"varios/english.html","text":"Ingl\u00e9s \u00b6 Acr\u00f3nimos: i.e. = \"id est\". Viene del lat\u00edn y significa \"es decir\" ( Fuente ) e.g. = \"exempli gratia\". Viene del lat\u00edn y significa \"por ejemplo\" ( Fuente ) AFAICS = As far as I can see AFAIK = As far as I know ASAP = As soon as possible BTW = By the way FUD = Fear, Uncertainty, and Doubt GOTY = Game Of The Year IANAL = I am not a lawyer (but) IDK = I don't know IIRC = If I remember correctly IMHO = In my humble opinion IMO = In my opinion IOW = In other words IRL = In real life JFYTK = Just For You To Know KISS = Keep it simple stupid LOL = Laughing out loud NVM = Never mind OMG = Oh my God OTOH = On the other hand PITA = Pain in the Ass QOL = Quality of fife ROTFL = Rolling on the floor laughing RTFM = Read The Fine Manual TIA = Thanks in advance TL;DR = Too Long; Didn't Read TOC = Table of Contents WTF? = What the f***? WYSIWYG = What You See Is What You Get YMMV = Your mileage may vary","title":"Ingl\u00e9s"},{"location":"varios/english.html#ingles","text":"Acr\u00f3nimos: i.e. = \"id est\". Viene del lat\u00edn y significa \"es decir\" ( Fuente ) e.g. = \"exempli gratia\". Viene del lat\u00edn y significa \"por ejemplo\" ( Fuente ) AFAICS = As far as I can see AFAIK = As far as I know ASAP = As soon as possible BTW = By the way FUD = Fear, Uncertainty, and Doubt GOTY = Game Of The Year IANAL = I am not a lawyer (but) IDK = I don't know IIRC = If I remember correctly IMHO = In my humble opinion IMO = In my opinion IOW = In other words IRL = In real life JFYTK = Just For You To Know KISS = Keep it simple stupid LOL = Laughing out loud NVM = Never mind OMG = Oh my God OTOH = On the other hand PITA = Pain in the Ass QOL = Quality of fife ROTFL = Rolling on the floor laughing RTFM = Read The Fine Manual TIA = Thanks in advance TL;DR = Too Long; Didn't Read TOC = Table of Contents WTF? = What the f***? WYSIWYG = What You See Is What You Get YMMV = Your mileage may vary","title":"Ingl\u00e9s"},{"location":"varios/excursionismo.html","text":"Excursionismo \u00b6 Herramientas \u00b6 Mapas de Espa\u00f1a Descargar mapa topogr\u00e1fico IGN en Oruxmaps : La descripci\u00f3n se corresponde con el interfaz de OruxMaps, pero se puede seguir dentro de la aplicaci\u00f3n del IGN. Manual de Usuario - Mapas de Espa\u00f1a v.1.0 Rutas \u00b6 Ordesa \u00b6 Fuente Faja de las Flores con Tozal del Mallo : Hecho. Faja Rac\u00f3n : Hecho. Broto - Ermita de Morillo Mondarruego por la faja de las Flores oeste Pradera - Cotatuero - G\u00f3riz Torla - Punta Acuta : Hecho. Pradera - Cotatuero - Brecha Rolando - Taill\u00f3n Bolta\u00f1a - J\u00e1novas Canfranc \u00b6 Ib\u00f3n de IP-Collarada Moncayo \u00b6 Los tres dosmiles principales del macizo del Moncayo por Collado Bellido: Pico Lobera, Moncayo y Pe\u00f1a Negrilla Circular a los hayedos de Pe\u00f1a Roya (S1), y Pe\u00f1arrajada (PRC-SO79), desde la Fuente del Sacrist\u00e1n Moncayo (desde Cueva de \u00c1greda) CUEVA DE \u00c1GREDA-LAS SIETE CIMAS DE M\u00c1S DE 2000 METROS-MAJADA ALTA-LOBERA-MORCA-SAN JUAN-MONCAYO-PE\u00d1A NEGRILLA SUR Y NORTE Agramonte-(GR-90)-Santuaruio Nuestra Se\u00f1ora del Moncayo-Hoya de San Miguel-Moncayo-Restos avi\u00f3n militar-Bco. Castilla : Hecho. Circular a las Pe\u00f1as de Herrera, desde Purujosa (Ascensi\u00f3n por barranco Valcongosto, descenso por barranco Cuart\u00fan)","title":"Excursionismo"},{"location":"varios/excursionismo.html#excursionismo","text":"","title":"Excursionismo"},{"location":"varios/excursionismo.html#herramientas","text":"Mapas de Espa\u00f1a Descargar mapa topogr\u00e1fico IGN en Oruxmaps : La descripci\u00f3n se corresponde con el interfaz de OruxMaps, pero se puede seguir dentro de la aplicaci\u00f3n del IGN. Manual de Usuario - Mapas de Espa\u00f1a v.1.0","title":"Herramientas"},{"location":"varios/excursionismo.html#rutas","text":"","title":"Rutas"},{"location":"varios/excursionismo.html#ordesa","text":"Fuente Faja de las Flores con Tozal del Mallo : Hecho. Faja Rac\u00f3n : Hecho. Broto - Ermita de Morillo Mondarruego por la faja de las Flores oeste Pradera - Cotatuero - G\u00f3riz Torla - Punta Acuta : Hecho. Pradera - Cotatuero - Brecha Rolando - Taill\u00f3n Bolta\u00f1a - J\u00e1novas","title":"Ordesa"},{"location":"varios/excursionismo.html#canfranc","text":"Ib\u00f3n de IP-Collarada","title":"Canfranc"},{"location":"varios/excursionismo.html#moncayo","text":"Los tres dosmiles principales del macizo del Moncayo por Collado Bellido: Pico Lobera, Moncayo y Pe\u00f1a Negrilla Circular a los hayedos de Pe\u00f1a Roya (S1), y Pe\u00f1arrajada (PRC-SO79), desde la Fuente del Sacrist\u00e1n Moncayo (desde Cueva de \u00c1greda) CUEVA DE \u00c1GREDA-LAS SIETE CIMAS DE M\u00c1S DE 2000 METROS-MAJADA ALTA-LOBERA-MORCA-SAN JUAN-MONCAYO-PE\u00d1A NEGRILLA SUR Y NORTE Agramonte-(GR-90)-Santuaruio Nuestra Se\u00f1ora del Moncayo-Hoya de San Miguel-Moncayo-Restos avi\u00f3n militar-Bco. Castilla : Hecho. Circular a las Pe\u00f1as de Herrera, desde Purujosa (Ascensi\u00f3n por barranco Valcongosto, descenso por barranco Cuart\u00fan)","title":"Moncayo"},{"location":"varios/hogar.html","text":"Hogar \u00b6 Quitar olor a humedad de ropa \u00b6 El olor se produce porque la ropa ha acumulado esporas de moho. Se pueden eliminar con alguno o varios de los siguientes productos: Vinagre blanco Bicarbonato de sodio Borax Introduciremos uno o varios de estos productos durante el lavado. Lo mejor es usar agua caliente para asegurar la eliminaci\u00f3n de las esporas de moho. Si no puede usarse agua caliente, seguramente habr\u00e1 que repetir el proceso entre varios lavados. Lo mejor es esperar a que la cuba est\u00e9 llena de agua para aportar el producto o productos directamente sobre ella, pero si la lavadora no lo permite (la mayor\u00eda), mezclar con 1 taza de agua caliente y usa el dispensador de detergente l\u00edquido. Varias opciones: Utilizar una taza de uno de los tres productos listados al principio. Si la ropa tiene un fuerte olor a humedad, mezclar 1/3 de taza de bicarbonato de sodio en 1 taza de vinagre blanco. Secar la ropa preferiblemente al sol. Repetir el procedimiento hasta que desaparezca el olor a humedad. Si en pocos d\u00edas, el olor a humedad vuelve a aparecer dejar la prenda en remojo durante 30 minutos en agua tibia con vinagre o con media taza de bicarbonato de sodio. Usos del bicarbonato de sodio para desodorizar \u00b6 Refrigerador : Coloque un bol con 3 o 4 cucharadas de Bicarbonato de Sodio en la parte trasera de la nevera o del congelador para neutralizar olores. Dejar actuar y cambiar el bicarbonato cada dos meses. Cubos de basura : Para eliminar manchas, incrustaciones y malos olores solo es necesario espolvorear 2 o 3 cucharadas soperas de Bicarbonato de Sodio en el cubo y dejarlo actuar durante toda la noche. A la ma\u00f1ana siguiente enjuague el cubo y s\u00e9quelo bien. Pa\u00f1os de cocina : Deje en remojo los pa\u00f1os toda la noche en un litro de agua caliente con 3 o 4 cucharadas de Bicarbonato de Sodio. Por la ma\u00f1ana, enju\u00e1guelos bien y p\u00f3ngalos a secar. Desag\u00fces : Desodorice los lavabos y desag\u00fces vertiendo \u00bd taza de Bicarbonato de Sodio por el desag\u00fce mientras corre el agua tibia y consiga una correcta neutralizaci\u00f3n de olores. Tuppers : Elimine los olores de los alimentos de tuppers y envases espolvoreando Bicarbonato de Sodio en el interior de los mismos y consiga una desodorizaci\u00f3n eficaz. Esponjas : Para eliminar los malos olores de las esponjas, rem\u00f3jelas en una soluci\u00f3n de 4 cucharadas de Bicarbonato de Sodio disuelto en 1 litro de agua tibia. Guantes de fregar : A\u00f1ada un poco de Bicarbonato de Sodio en el interior de los guantes (si lo cree necesario puede guardarlos con bicarbonato en contacto con el exterior). Deje actuar durante unas horas. Despu\u00e9s, saque el bicarbonato y dele la vuelta a los guantes para eliminar bien los restos de polvo del interior. Puede repetir la operaci\u00f3n cada vez que sea necesario. Ropa de cama : A\u00f1ada \u00bd taza de Bicarbonato de Sodio al ciclo de enjuague para conseguir unas s\u00e1banas y toallas m\u00e1s frescas y suaves. Armarios : Coloque un recipiente abierto con 3 o 4 cucharadas de Bicarbonato de Sodio en un estante de su armario para mantener un olor fresco. Naftalina : Para eliminar el olor a naftalina de la ropa a\u00f1ada \u00bd taza de Bicarbonato de Sodio durante el proceso de lavado, es decir, cuando la lavadora est\u00e9 llena de agua. Cesta de ropa sucia : Para evitar los malos olores procedentes de la ropa sucia espolvoree el cesto de lavander\u00eda con un poco de Bicarbonato de Sodio cada d\u00eda. Ropa deportiva : Para eliminar los malos olores de la bolsa de deporte, zapatillas, ropa deportiva, solo es necesario espolvorear con Bicarbonato de Sodio. Deje actuar toda la noche y a la ma\u00f1ana siguiente l\u00e1velos con normalidad. Zapatos : Desodorice de manera natural sus zapatos espolvoreando Bicarbonato de Sodio sobre ellos y consiga eliminar el mal olor a pies. Coche : Coloque un recipiente peque\u00f1o con 2 o 3 cucharadas de Bicarbonato de Sodio en el interior de su coche y deje actuar. Cambie el bicarbonato cada semana o cada 10 d\u00edas para asegurar la absorci\u00f3n de los malos olores de su coche. Maletas : Espolvoree Bicarbonato de Sodio en el interior del equipaje para quitar el mal olor de las maletas cerradas y guardadas durante largo tiempo. Otros usos del bicarbonato de sodio \u00b6 Limpieza de tapicer\u00edas : Espolvoree el sof\u00e1 o sill\u00f3n con Bicarbonato de Sodio, d\u00e9jelo actuar durante 30 minutos y cep\u00edllelos despu\u00e9s. Si lo prefiere, tambi\u00e9n puede disolver el bicarbonato en agua tibia y frotar suavemente con un trapo o esponja para eliminar las manchas, finalmente enjuague bien y deje secar. Colchones : Limpie su colch\u00f3n en profundidad, neutral\u00edcelo de malos olores y prot\u00e9jalo de posibles \u00e1caros y g\u00e9rmenes que se adhieran entre sus tejidos espolvoreando Bicarbonato de Sodio sobre el colch\u00f3n. Deje reposar durante dos o tres horas y retire el bicarbonato con ayuda de un aspirador, o en su defecto, con un trapo seco. Legumbre : Deje en remojo las legumbres durante toda la noche en una soluci\u00f3n de 1 cucharada de Bicarbonato de Sodio especial Alimentaci\u00f3n por litro de agua. A la ma\u00f1ana siguiente, tire el agua del remojo y a\u00f1ada una cucharadita de bicarbonato al agua de cocci\u00f3n para hacer que las legumbres se ablanden antes y se hagan m\u00e1s digeribles. Mal olor cocci\u00f3n col : Para evitar el mal olor al cocer alimentos como la coliflor, solo es necesario a\u00f1adir una cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua de cocci\u00f3n. Huevos duros : Agregue media cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua en la que hierva los huevos para poder pelarlos posteriormente con mayor facilidad. Prevenci\u00f3n mal aliento y caries : Disuelva una cucharadita de Bicarbonato de Sodio en un vaso de agua tibia o fr\u00eda. Haga enjuagues con ella, haciendo g\u00e1rgaras y escupiendo el agua. Finalmente, enjuague su boca con agua fresca. Desodorante : A\u00f1ada una pizca de Bicarbonato de Sodio mezclado con agua para conseguir una pasta desodorante natural y eficaz. Verrugas : Mezcle 1 cucharada sopera de Bicarbonato de Sodio en 1/3 de cucharada sopera de agua. Aplique la pasta sobre la verruga y cubra con una tirita, renovando la aplicaci\u00f3n por lo menos 2 veces al d\u00eda, durante 1 semana. Hongos, mal olor y pies cansados : En una palangana, echar 1 litro de agua caliente o tibia. Disuelva un vasito (aproximadamente 5 o 6 cucharadas soperas) de Bicarbonato de Sodio. A continuaci\u00f3n ponga los pies en remojo durante 10 o15 minutos.","title":"Hogar"},{"location":"varios/hogar.html#hogar","text":"","title":"Hogar"},{"location":"varios/hogar.html#quitar-olor-a-humedad-de-ropa","text":"El olor se produce porque la ropa ha acumulado esporas de moho. Se pueden eliminar con alguno o varios de los siguientes productos: Vinagre blanco Bicarbonato de sodio Borax Introduciremos uno o varios de estos productos durante el lavado. Lo mejor es usar agua caliente para asegurar la eliminaci\u00f3n de las esporas de moho. Si no puede usarse agua caliente, seguramente habr\u00e1 que repetir el proceso entre varios lavados. Lo mejor es esperar a que la cuba est\u00e9 llena de agua para aportar el producto o productos directamente sobre ella, pero si la lavadora no lo permite (la mayor\u00eda), mezclar con 1 taza de agua caliente y usa el dispensador de detergente l\u00edquido. Varias opciones: Utilizar una taza de uno de los tres productos listados al principio. Si la ropa tiene un fuerte olor a humedad, mezclar 1/3 de taza de bicarbonato de sodio en 1 taza de vinagre blanco. Secar la ropa preferiblemente al sol. Repetir el procedimiento hasta que desaparezca el olor a humedad. Si en pocos d\u00edas, el olor a humedad vuelve a aparecer dejar la prenda en remojo durante 30 minutos en agua tibia con vinagre o con media taza de bicarbonato de sodio.","title":"Quitar olor a humedad de ropa"},{"location":"varios/hogar.html#usos-del-bicarbonato-de-sodio-para-desodorizar","text":"Refrigerador : Coloque un bol con 3 o 4 cucharadas de Bicarbonato de Sodio en la parte trasera de la nevera o del congelador para neutralizar olores. Dejar actuar y cambiar el bicarbonato cada dos meses. Cubos de basura : Para eliminar manchas, incrustaciones y malos olores solo es necesario espolvorear 2 o 3 cucharadas soperas de Bicarbonato de Sodio en el cubo y dejarlo actuar durante toda la noche. A la ma\u00f1ana siguiente enjuague el cubo y s\u00e9quelo bien. Pa\u00f1os de cocina : Deje en remojo los pa\u00f1os toda la noche en un litro de agua caliente con 3 o 4 cucharadas de Bicarbonato de Sodio. Por la ma\u00f1ana, enju\u00e1guelos bien y p\u00f3ngalos a secar. Desag\u00fces : Desodorice los lavabos y desag\u00fces vertiendo \u00bd taza de Bicarbonato de Sodio por el desag\u00fce mientras corre el agua tibia y consiga una correcta neutralizaci\u00f3n de olores. Tuppers : Elimine los olores de los alimentos de tuppers y envases espolvoreando Bicarbonato de Sodio en el interior de los mismos y consiga una desodorizaci\u00f3n eficaz. Esponjas : Para eliminar los malos olores de las esponjas, rem\u00f3jelas en una soluci\u00f3n de 4 cucharadas de Bicarbonato de Sodio disuelto en 1 litro de agua tibia. Guantes de fregar : A\u00f1ada un poco de Bicarbonato de Sodio en el interior de los guantes (si lo cree necesario puede guardarlos con bicarbonato en contacto con el exterior). Deje actuar durante unas horas. Despu\u00e9s, saque el bicarbonato y dele la vuelta a los guantes para eliminar bien los restos de polvo del interior. Puede repetir la operaci\u00f3n cada vez que sea necesario. Ropa de cama : A\u00f1ada \u00bd taza de Bicarbonato de Sodio al ciclo de enjuague para conseguir unas s\u00e1banas y toallas m\u00e1s frescas y suaves. Armarios : Coloque un recipiente abierto con 3 o 4 cucharadas de Bicarbonato de Sodio en un estante de su armario para mantener un olor fresco. Naftalina : Para eliminar el olor a naftalina de la ropa a\u00f1ada \u00bd taza de Bicarbonato de Sodio durante el proceso de lavado, es decir, cuando la lavadora est\u00e9 llena de agua. Cesta de ropa sucia : Para evitar los malos olores procedentes de la ropa sucia espolvoree el cesto de lavander\u00eda con un poco de Bicarbonato de Sodio cada d\u00eda. Ropa deportiva : Para eliminar los malos olores de la bolsa de deporte, zapatillas, ropa deportiva, solo es necesario espolvorear con Bicarbonato de Sodio. Deje actuar toda la noche y a la ma\u00f1ana siguiente l\u00e1velos con normalidad. Zapatos : Desodorice de manera natural sus zapatos espolvoreando Bicarbonato de Sodio sobre ellos y consiga eliminar el mal olor a pies. Coche : Coloque un recipiente peque\u00f1o con 2 o 3 cucharadas de Bicarbonato de Sodio en el interior de su coche y deje actuar. Cambie el bicarbonato cada semana o cada 10 d\u00edas para asegurar la absorci\u00f3n de los malos olores de su coche. Maletas : Espolvoree Bicarbonato de Sodio en el interior del equipaje para quitar el mal olor de las maletas cerradas y guardadas durante largo tiempo.","title":"Usos del bicarbonato de sodio para desodorizar"},{"location":"varios/hogar.html#otros-usos-del-bicarbonato-de-sodio","text":"Limpieza de tapicer\u00edas : Espolvoree el sof\u00e1 o sill\u00f3n con Bicarbonato de Sodio, d\u00e9jelo actuar durante 30 minutos y cep\u00edllelos despu\u00e9s. Si lo prefiere, tambi\u00e9n puede disolver el bicarbonato en agua tibia y frotar suavemente con un trapo o esponja para eliminar las manchas, finalmente enjuague bien y deje secar. Colchones : Limpie su colch\u00f3n en profundidad, neutral\u00edcelo de malos olores y prot\u00e9jalo de posibles \u00e1caros y g\u00e9rmenes que se adhieran entre sus tejidos espolvoreando Bicarbonato de Sodio sobre el colch\u00f3n. Deje reposar durante dos o tres horas y retire el bicarbonato con ayuda de un aspirador, o en su defecto, con un trapo seco. Legumbre : Deje en remojo las legumbres durante toda la noche en una soluci\u00f3n de 1 cucharada de Bicarbonato de Sodio especial Alimentaci\u00f3n por litro de agua. A la ma\u00f1ana siguiente, tire el agua del remojo y a\u00f1ada una cucharadita de bicarbonato al agua de cocci\u00f3n para hacer que las legumbres se ablanden antes y se hagan m\u00e1s digeribles. Mal olor cocci\u00f3n col : Para evitar el mal olor al cocer alimentos como la coliflor, solo es necesario a\u00f1adir una cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua de cocci\u00f3n. Huevos duros : Agregue media cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua en la que hierva los huevos para poder pelarlos posteriormente con mayor facilidad. Prevenci\u00f3n mal aliento y caries : Disuelva una cucharadita de Bicarbonato de Sodio en un vaso de agua tibia o fr\u00eda. Haga enjuagues con ella, haciendo g\u00e1rgaras y escupiendo el agua. Finalmente, enjuague su boca con agua fresca. Desodorante : A\u00f1ada una pizca de Bicarbonato de Sodio mezclado con agua para conseguir una pasta desodorante natural y eficaz. Verrugas : Mezcle 1 cucharada sopera de Bicarbonato de Sodio en 1/3 de cucharada sopera de agua. Aplique la pasta sobre la verruga y cubra con una tirita, renovando la aplicaci\u00f3n por lo menos 2 veces al d\u00eda, durante 1 semana. Hongos, mal olor y pies cansados : En una palangana, echar 1 litro de agua caliente o tibia. Disuelva un vasito (aproximadamente 5 o 6 cucharadas soperas) de Bicarbonato de Sodio. A continuaci\u00f3n ponga los pies en remojo durante 10 o15 minutos.","title":"Otros usos del bicarbonato de sodio"},{"location":"varios/links.html","text":"Enlaces \u00b6 Tutoriales \u00b6 Eclipse And Java For Total Beginners :exclamation: UNIX Redirecci\u00f3n de salidas en UNIX Variables en UNIX Variables importantes en UNIX Configuraci\u00f3n de terminales en UNIX Subversion Cheat Sheets \u00b6 Cheat Sheets Cheat Sheets Cheat Sheets Subversion Markdown \u00datiles \u00b6 Copy Paste Character : Para copiar al portapapeles caracteres que no aparecen en nuestro teclado. Pastebin : Para pegar logs y trozos grandes de texto que luego linkar en foros o para pasar a otras personas. JSFiddle : Prototipado HTML/CSS/JS. Debuggex : Editor de expresiones regulares (recomendado por Carlos Fenollosa). RegExr : Learn, Build & Test RegEx. eBooks \u00b6 Looking for free Kobo books? Here are 9 great sites to explore Project Gutenberg Smashwords Internet Archive Open Library Feedbooks Goodreads ManyBooks DigiLibraries Internet radio \u00b6 Parsonica Movie Ticket Radio","title":"Enlaces"},{"location":"varios/links.html#enlaces","text":"","title":"Enlaces"},{"location":"varios/links.html#tutoriales","text":"Eclipse And Java For Total Beginners :exclamation: UNIX Redirecci\u00f3n de salidas en UNIX Variables en UNIX Variables importantes en UNIX Configuraci\u00f3n de terminales en UNIX Subversion","title":"Tutoriales"},{"location":"varios/links.html#cheat-sheets","text":"Cheat Sheets Cheat Sheets Cheat Sheets Subversion Markdown","title":"Cheat Sheets"},{"location":"varios/links.html#utiles","text":"Copy Paste Character : Para copiar al portapapeles caracteres que no aparecen en nuestro teclado. Pastebin : Para pegar logs y trozos grandes de texto que luego linkar en foros o para pasar a otras personas. JSFiddle : Prototipado HTML/CSS/JS. Debuggex : Editor de expresiones regulares (recomendado por Carlos Fenollosa). RegExr : Learn, Build & Test RegEx.","title":"\u00datiles"},{"location":"varios/links.html#ebooks","text":"Looking for free Kobo books? Here are 9 great sites to explore Project Gutenberg Smashwords Internet Archive Open Library Feedbooks Goodreads ManyBooks DigiLibraries","title":"eBooks"},{"location":"varios/links.html#internet-radio","text":"Parsonica Movie Ticket Radio","title":"Internet radio"},{"location":"varios/recetas.html","text":"Recetas \u00b6 Snack \u00b6 Barritas de coco veganas Apple mug cake in 1 minute Receta de galletas de avena y zanahoria Primeros \u00b6 Col rizada con ajos y patata Segundos \u00b6 Empanadillas de at\u00fan de Karlos Argui\u00f1ano H\u00edgado \u00b6 Fuente El multivitam\u00ednico de la naturaleza. Es el alimento con m\u00e1s aporte de vitamina A , rico adem\u00e1s en B12, B6, biotina y folato. Algunas ideas para los no iniciados: Rem\u00f3jalo durante unas horas en agua (la m\u00ednima necesaria para cubrirlo) y a\u00f1ade un \u00e1cido, como jugo de lim\u00f3n, yogur o un poco de vinagre. Suavizar\u00e1s su sabor para aplicar despu\u00e9s cualquier receta. Sumergirlo en leche tambi\u00e9n le dar\u00e1 una textura menos arisca. Coc\u00ednalo con cebolla , a\u00f1adiendo otras especias si es necesario. Prepara un buen pat\u00e9 ( receta ). Comb\u00ednalo con carne picada , en forma de hamburguesa o alb\u00f3ndigas. En la proporci\u00f3n adecuada el h\u00edgado pasar\u00e1 desapercibido. Trit\u00faralo con la batidora hasta convertirlo en pasta (agrega un poco de agua si prefieres), amasa peque\u00f1os trozos (como si fueran p\u00edldoras grandes) y almac\u00e9nalos en el congelador. Utiliza estas pastillas para potenciar caldos, sopas o cualquier otro plato. Si te preocupa la acumulaci\u00f3n de toxinas debes entender que la analog\u00eda del h\u00edgado como filtro es poco acertada. M\u00e1s que un filtro es una compleja planta de tratamiento. Neutraliza los posibles compuestos t\u00f3xicos y los expulsa, no los almacena. Pero s\u00ed almacena el conjunto de nutrientes que requiere para realizar su alquimia qu\u00edmica, de ah\u00ed su valor nutritivo ( m\u00e1s detalle ). Aunque el h\u00edgado acumula m\u00e1s metales pesados que el m\u00fasculo (las toxinas tienen m\u00e1s afinidad por la grasa), los niveles son bajos y seguros ( estudio , estudio , estudio , estudio ), aunque es recomendable priorizar producci\u00f3n ecol\u00f3gica.","title":"Recetas"},{"location":"varios/recetas.html#recetas","text":"","title":"Recetas"},{"location":"varios/recetas.html#snack","text":"Barritas de coco veganas Apple mug cake in 1 minute Receta de galletas de avena y zanahoria","title":"Snack"},{"location":"varios/recetas.html#primeros","text":"Col rizada con ajos y patata","title":"Primeros"},{"location":"varios/recetas.html#segundos","text":"Empanadillas de at\u00fan de Karlos Argui\u00f1ano","title":"Segundos"},{"location":"varios/recetas.html#higado","text":"Fuente El multivitam\u00ednico de la naturaleza. Es el alimento con m\u00e1s aporte de vitamina A , rico adem\u00e1s en B12, B6, biotina y folato. Algunas ideas para los no iniciados: Rem\u00f3jalo durante unas horas en agua (la m\u00ednima necesaria para cubrirlo) y a\u00f1ade un \u00e1cido, como jugo de lim\u00f3n, yogur o un poco de vinagre. Suavizar\u00e1s su sabor para aplicar despu\u00e9s cualquier receta. Sumergirlo en leche tambi\u00e9n le dar\u00e1 una textura menos arisca. Coc\u00ednalo con cebolla , a\u00f1adiendo otras especias si es necesario. Prepara un buen pat\u00e9 ( receta ). Comb\u00ednalo con carne picada , en forma de hamburguesa o alb\u00f3ndigas. En la proporci\u00f3n adecuada el h\u00edgado pasar\u00e1 desapercibido. Trit\u00faralo con la batidora hasta convertirlo en pasta (agrega un poco de agua si prefieres), amasa peque\u00f1os trozos (como si fueran p\u00edldoras grandes) y almac\u00e9nalos en el congelador. Utiliza estas pastillas para potenciar caldos, sopas o cualquier otro plato. Si te preocupa la acumulaci\u00f3n de toxinas debes entender que la analog\u00eda del h\u00edgado como filtro es poco acertada. M\u00e1s que un filtro es una compleja planta de tratamiento. Neutraliza los posibles compuestos t\u00f3xicos y los expulsa, no los almacena. Pero s\u00ed almacena el conjunto de nutrientes que requiere para realizar su alquimia qu\u00edmica, de ah\u00ed su valor nutritivo ( m\u00e1s detalle ). Aunque el h\u00edgado acumula m\u00e1s metales pesados que el m\u00fasculo (las toxinas tienen m\u00e1s afinidad por la grasa), los niveles son bajos y seguros ( estudio , estudio , estudio , estudio ), aunque es recomendable priorizar producci\u00f3n ecol\u00f3gica.","title":"H\u00edgado"},{"location":"varios/suenyo.html","text":"Sue\u00f1o \u00b6 Enlaces \u00b6 Auriculares para dormir. \u00bfCu\u00e1les es mejor comprar en 2018? Hibermate 2016 + Peltor =Super Comfortable Sleep Hibermate - Amazon 3M PELTOR Kit de higiene para Orejeras Optime III, HY54 - Amazon beeswift HY54 Peltor optime 3 Higiene Kit PR - Amazon Itian Ultra Thin auriculares, Soft lana orejeras auriculares m\u00e1s c\u00f3modos para dormir Ultra Soft Foam Earplugs Tapones para los o\u00eddos de silicona SleepDreamz (4 pares)","title":"Sue\u00f1o"},{"location":"varios/suenyo.html#sueno","text":"","title":"Sue\u00f1o"},{"location":"varios/suenyo.html#enlaces","text":"Auriculares para dormir. \u00bfCu\u00e1les es mejor comprar en 2018? Hibermate 2016 + Peltor =Super Comfortable Sleep Hibermate - Amazon 3M PELTOR Kit de higiene para Orejeras Optime III, HY54 - Amazon beeswift HY54 Peltor optime 3 Higiene Kit PR - Amazon Itian Ultra Thin auriculares, Soft lana orejeras auriculares m\u00e1s c\u00f3modos para dormir Ultra Soft Foam Earplugs Tapones para los o\u00eddos de silicona SleepDreamz (4 pares)","title":"Enlaces"},{"location":"varios/viajes.html","text":"Viajes \u00b6 Comunicaciones \u00b6 Prepaid SIM Cards With Data For Travelers : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a. Cheap mobile internet and calls abroad with Holiday Phone : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a. Salud \u00b6 World Nomads Travel Insurance : Seguro de salud para viajes recomendado por \u00c1ngel Alegre .","title":"Viajes"},{"location":"varios/viajes.html#viajes","text":"","title":"Viajes"},{"location":"varios/viajes.html#comunicaciones","text":"Prepaid SIM Cards With Data For Travelers : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a. Cheap mobile internet and calls abroad with Holiday Phone : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a.","title":"Comunicaciones"},{"location":"varios/viajes.html#salud","text":"World Nomads Travel Insurance : Seguro de salud para viajes recomendado por \u00c1ngel Alegre .","title":"Salud"}]}