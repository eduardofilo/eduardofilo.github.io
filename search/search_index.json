{"config":{"lang":["es","en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Blog","text":"<p>ZX Mechtrum</p> <p> <code>2024-09-09 12:00</code></p> <p>Fabricaci\u00f3n de un ZX Mechtrum Harlequin, es decir un ZX Spectrum con la placa Harlequin 128 y con teclado mec\u00e1nico.</p> <p>Instalaci\u00f3n Arch Linux en Steam Deck</p> <p> <code>2024-09-04 15:30</code></p> <p>Procedimiento completo para instalar Arch Linux junto a SteamOS con dual boot en Steam Deck.</p> <p>V\u00edas Zaragoza - Campus en bicicleta</p> <p> <code>2024-05-31 08:00</code></p> <p>V\u00edas para acceder desde Zaragoza al Campus de Aula Dei en bicicleta.</p> <p>Entrevista en Podcast Linux</p> <p> <code>2022-10-05 07:00</code></p> <p>Entrevista en Podcast Linux sobre la imagen Ad\u00e1n para RG350/280.</p> <p>Miyoo Mini UART</p> <p> <code>2022-08-08 17:00</code></p> <p>Extracci\u00f3n de puerto UART para tener acceso a la terminal del sistema.</p> <p>Aventuras en VR</p> <p> <code>2022-04-17 23:00</code></p> <p>Introducci\u00f3n al mundo VR con Oculus Quest 2.</p> <p>Raspberry Pi Zero 2 W upgrade</p> <p> <code>2021-10-30 17:40</code></p> <p>Actualizaci\u00f3n de Raspberry Pi Zero al modelo 2 para OctoPrint.</p> <p>RG350/RG280 Imagen</p> <p> <code>2021-04-03 20:00</code></p> <p>Imagen para las consolas RG350 y RG280 con emuladores, ports y frontends.</p> <p>FUZIX en Raspberry Pi Pico</p> <p> <code>2021-02-28 20:00</code></p> <p>Montaje e instalaci\u00f3n de FUZIX (variante UNIX) en Raspberry Pi Pico.</p> <p>Retroconsolas</p> <p> <code>2021-01-19 21:20</code></p> <p>Dudas frecuentes sobre los distintos modelos de retroconsolas.</p> <p>RG350 Instalador RA</p> <p> <code>2021-01-16 21:20</code></p> <p>Instalador RetroArch para RG350/RG280.</p> <p>RG351P Wifi mod</p> <p> <code>2020-12-13 14:45</code></p> <p>Instalaci\u00f3n de m\u00f3dulo Wifi interno en RG351P.</p> <p>RG350 Interfaz xMAME SimpleMenu</p> <p> <code>2020-09-27 02:30</code></p> <p>Interfaz de ajustes para las ROMs de xMAME lanzadas desde SimpleMenu.</p> <p>La canci\u00f3n que merece la pena escuchar</p> <p> <code>2020-08-31 19:00</code></p> <p>This Guy's in Love with You de Herb Alpert.</p> <p>RG350 ScummVM en lanzadores</p> <p> <code>2020-08-15 17:20</code></p> <p>Integraci\u00f3n de ScummVM en lanzadores con selecci\u00f3n de ROMs como SimpleMenu.</p> <p>RG350 Py Backup</p> <p> <code>2020-08-12 22:20</code></p> <p>Aplicaci\u00f3n para gestionar backups en RG350.</p> <p>RG350 Sustituci\u00f3n de pantalla 480p</p> <p> <code>2020-07-12 14:30</code></p> <p>Sustituci\u00f3n de pantalla en RG350 por la del modelo M.</p> <p>RG350 RG350 FBA mod</p> <p> <code>2020-07-09 17:00</code></p> <p>Integraci\u00f3n en frontends y mejora en la gesti\u00f3n del modo vertical en FBA.</p> <p>RG350 Primeros pasos</p> <p> <code>2020-07-02 23:00</code></p> <p>Primeros pasos con la consola RG350.</p> <p>RG350 Raspi Imagen</p> <p> <code>2020-06-04 04:00</code></p> <p>Procedimiento para generar una imagen de tarjeta SD flasheable para RG350, Raspberry Pi y otras.</p> <p>RG350 Compilar aplicaciones</p> <p> <code>2020-05-31 00:40</code></p> <p>Ejemplos de compilaci\u00f3n de algunas aplicaciones para RG350 por medio del toolchain en Docker.</p> <p>RG350 Docker Buildroot</p> <p> <code>2020-05-25 17:00</code></p> <p>Compilaci\u00f3n de Buildroot con toolchain de RG350 en un contenedor Docker.</p> <p>RG350 MAME4All</p> <p> <code>2020-05-14 11:00</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de MAME4All en RG350.</p> <p>RG350 DOSBox</p> <p> <code>2020-05-08 00:30</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de DOSBox en RG350.</p> <p>RG350 OpenBOR</p> <p> <code>2020-05-06 12:30</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de OpenBOR en RG350.</p> <p>RG350 Daphne</p> <p> <code>2020-05-04 16:15</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de Daphne en RG350.</p> <p>RG350 xMAME</p> <p> <code>2020-04-15 12:00</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de xMAME en RG350.</p> <p>RG350 ScummVM</p> <p> <code>2020-04-14 09:50</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de ScummVM en RG350.</p> <p>RG350 PyMenu</p> <p> <code>2020-03-28 21:20</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de PyMenu en RG350.</p> <p>RG350 Backup</p> <p> <code>2020-03-19 23:00</code></p> <p>C\u00f3mo hacer backup de la RG350 para no perder savestates y configuraciones de emuladores.</p> <p>Panelizar PCB</p> <p> <code>2020-02-16 19:04</code></p> <p>Panelizaci\u00f3n de varias PCBs para hacer un pedido m\u00e1s econ\u00f3mico a JLCPCB.</p> <p>RG350 EmulationStation</p> <p> <code>2020-02-13 00:00</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de EmulationStation en RG350.</p> <p>RG350 Conexi\u00f3n a internet</p> <p><code>2020-02-09 01:48</code></p> <p>Conexi\u00f3n a internet en RG350 a trav\u00e9s de cable USB.</p> <p>EdUzebox</p> <p> <code>2020-02-08 19:55</code></p> <p>Creaci\u00f3n de un clon de Uzebox con salida de video por Euroconector.</p> <p>RG350 FBA</p> <p> <code>2020-01-31 22:28</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de FBA en RG350.</p> <p>RG350 SimpleMenu</p> <p> <code>2020-01-25 17:25</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de SimpleMenu en RG350.</p> <p>RG350 Scraper</p> <p> <code>2020-01-11 17:50</code></p> <p>Generaci\u00f3n de previews de las roms instaladas en RG350.</p> <p>Creaci\u00f3n de un sitio Django desde cero</p> <p> <code>2019-08-06 16:30</code></p> <p>Procedimiento de creaci\u00f3n de un entorno de desarrollo y producci\u00f3n para un sitio Django.</p> <p>Compilaci\u00f3n OpenAuto para solucionar touch screen</p> <p> <code>2019-07-07 21:45</code></p> <p>Compilaci\u00f3n de OpenAuto tras dejar de funcionar la pantalla t\u00e1ctil por actualizaci\u00f3n de Google Play Services.</p> <p>Composite mod en consola Pong</p> <p> <code>2019-04-20 16:00</code></p> <p>Composite mod en vieja consola Pong basada en chip AY-3-8500.</p> <p>Bloqueo de llamadas entrantes en Telsome</p> <p> <code>2019-01-29 19:20</code></p> <p>Bloqueo de llamadas entrantes en proveedor de VoIP Telsome.</p> <p>Conversi\u00f3n del sitio de Apuntes a MkDocs</p> <p><code>2019-01-26 19:00</code></p> <p>Migraci\u00f3n del motor de apuntes de Rubi/Jekyll a Python/MkDocs.</p> <p>Octoprint en Anet A8</p> <p> <code>2018-10-20 21:30</code></p> <p>Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint.</p> <p>Crankshaft - AndroidAuto sobre Raspberry Pi</p> <p> <code>2018-10-18 22:30</code></p> <p>Montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D.</p> <p>Otto DIY</p> <p><code>2018-05-05 17:25</code></p> <p>Montaje de robot Otto.</p> <p>Raspberry Pi 3 + KODI 16 + Tvheadend</p> <p> <code>2017-01-14 12:00</code></p> <p>Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi3 (actualizaci\u00f3n de art\u00edculo anterior).</p> <p>Raspberry Pi 3 + KODI</p> <p> <code>2016-12-06 15:32</code></p> <p>Instalaci\u00f3n de Kodi sobre Raspberry Pi3.</p> <p>Interruputor de encendido para Raspberry Pi</p> <p> <code>2016-10-17 20:00</code></p> <p>Instalaci\u00f3n de un pulsador de reset/encendido en Raspberry Pi.</p> <p>El mundo de ayer - Stefan Zweig</p> <p> <code>2016-08-17 21:00</code></p> <p>Rese\u00f1a del libro 'El mundo de ayer' de Stefan Zweig.</p> <p>Entorno desarrollo STM32 VL Discovery sobre Linux</p> <p> <code>2016-08-02 08:30</code></p> <p>Configuraci\u00f3n de entorno de desarrollo para STM332 VL Discovery con herramientas libres sobre Linux.</p> <p>Configuraci\u00f3n PiGRRL-2</p> <p> <code>2016-07-21 09:30</code></p> <p>Instalaci\u00f3n RetroPie desde cero sobre Adafruit PiGRRL-2.</p> <p>Wild - Cheryl Strayed</p> <p> <code>2016-07-10 16:30</code></p> <p>Rese\u00f1a del libro 'Wild' de Cheryl Strayed.</p> <p>Alertas por supuestos virus en Android</p> <p><code>2016-07-02 16:30</code></p> <p>T\u00e9cnicas para combatir los mensajes que aparecen en Android alert\u00e1ndonos de supuestos virus en el sistema.</p> <p>Un antrop\u00f3logo en Marte - Oliver Sacks</p> <p> <code>2016-04-10 16:30</code></p> <p>Rese\u00f1a del libro 'Un antrop\u00f3logo en Marte' de Oliver Sacks.</p> <p>Los Innovadores - Walter Isaacson</p> <p> <code>2016-02-25 22:30</code></p> <p>Rese\u00f1a del libro 'Los Innovadores' de Walter Isaacson.</p> <p>Raspberry Pi 2 + KODI + Tvheadend</p> <p> <code>2015-03-14 15:04</code></p> <p>Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi.</p> <p>M\u00f3viles recomendables</p> <p> <code>2015-01-09 20:08</code></p> <p>Listado de m\u00f3viles recomendables.</p> <p>Jekyll+GitHub Pages</p> <p> <code>2015-01-08 15:08</code></p> <p>Creaci\u00f3n de sitio en GitHub Pages con Jekyll.</p> <p>Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS</p> <p> <code>2014-12-20 12:52</code></p> <p>Instalaci\u00f3n de Dokuwiki sobre Raspberry Pi con ficheros alojados en NAS.</p> <p>Micro placas</p> <p> <code>2014-12-20 12:52</code></p> <p>Listado de micro placas tipo Raspberry Pi.</p> <p>Presentaci\u00f3n</p> <p><code>2014-12-15 18:25</code></p> <p>Presentaci\u00f3n del blog.</p>"},{"location":"2014-12-15-presentacion.html","title":"Presentaci\u00f3n","text":"<p>Hola.</p> <p>Me llamo Eduardo Moreno y en esta p\u00e1gina pretendo colgar p\u00edldoras de conocimiento sobre los temas que me interesan y ocupan. Los campos a tratar y la frecuencia de publicaci\u00f3n depender\u00e1n del orden y la oportunidad en que sean encontradas, puesto que el sitio pretende ser una especie de cuaderno de apuntes p\u00fablico. Entrar\u00e1n por tanto todos los temas que me interesan, que fundamentalmente son:</p> <ul> <li>Ciencia en general con Psicolog\u00eda, Matem\u00e1ticas, Geolog\u00eda en particular.</li> <li>Astron\u00e1utica</li> <li>Programaci\u00f3n o Desarrollo</li> <li>Sistemas inform\u00e1ticos. Linux, Raspberry Pi</li> <li>Cine</li> <li>M\u00fasica</li> <li>F1</li> </ul> <p>Puedes seguirme en las siguientes redes:</p> <ul> <li>Twitter</li> <li>GitHub</li> <li>Linkedin</li> <li>Tumblr</li> <li>YouTube</li> </ul>"},{"location":"2014-12-20-micro-placas.html","title":"Micro placas","text":"<p>Llevo un tiempo pendiente del relativamente nuevo mundo de las micro placas (o SBC's de Single Board Computer), popularizadas gracias a Arduino y Raspberry Pi. De entre las dos anteriores me quedo con la segunda al ser una persona m\u00e1s de soft que de hard y tener Raspberry Pi m\u00e1s potencial en este sentido. Adem\u00e1s siendo que la diferencia de precio es peque\u00f1a, por qu\u00e9 resistirse a tener un Linux completo corriendo en la placa. Est\u00e1 claro que esto tiene repercusiones en cuanto a estabilidad, seguridad y sobre todo autonom\u00eda energ\u00e9tica, pero como digo, en mi caso es m\u00e1s habitual que esto pese menos que las ventajas que me aporta construir sobre Linux.</p> <p>A continuaci\u00f3n una lista con algunas de las placas de este tipo que se pueden encontrar:</p> <ul> <li>Raspberry Pi: Revista</li> <li>Banana Pi y Banana Pro</li> <li>Hummingboard</li> <li>BeagleBoard</li> <li>pdDuino</li> <li>Cubieboard</li> <li>UDOO</li> <li>ODROID: Revista</li> <li>Up y Up core</li> <li>Orange Pi</li> <li>C.H.I.P.</li> <li>LattePanda</li> <li>Asus Tinker Board</li> <li>Asus Tinker Edge R</li> <li>HiKey 960</li> <li>Rock64 Media Board Computer</li> <li>NanoPi K2</li> <li>NanoPi NEO4</li> <li>NanoPi NEO: Compra en Amazon.</li> <li>Khadas VIM, VIM2, VIM3, VIM3L</li> <li>La Frite</li> <li>LibreComputer (Le Potato): Compra en Amazon</li> <li>RockPi</li> <li>Atomic Pi</li> <li>Onion OMEGA2+: Para IOT.</li> <li>NVIDIA Jetson Nano</li> </ul> <p>Un par de listados alternativos:</p> <ul> <li>Raspberry Pi : rivales y alternativas</li> <li>Best Raspberry Pi Alternatives 2019</li> </ul> <p>Y un sitio dedicado a recopilarlos:</p> <ul> <li>The Single Board Computer Database</li> </ul> <p>Hasta ahora los \u00fanicos proyectos que he puesto en marcha han sido de computaci\u00f3n, es decir, sin componente hardware, que es otro de los usos importantes que se les suelen dar. Han servido para delegar un par de funciones que antes ejecutaba directamente sobre mi PC principal. Concretamente:</p> <ul> <li>Gestor de descargas.</li> <li>Servidor git para proyectos personales privados que no quiera publicar en GitHub.</li> <li>Media center con Kodi.</li> <li>Consola port\u00e1til.</li> </ul> <p>Raspi consume 3.5W como m\u00e1ximo, as\u00ed que con ella se puede uno permitir que estos servicios funcionen las 24 horas del d\u00eda. Ya no s\u00f3lo por las ventajas que tiene de cara a la factura el\u00e9ctrica, sino tambi\u00e9n por evitar \"quemar\" un caro PC en tareas de proceso puntual pero que requieren alta disponibilidad (se ve muy claro en el caso del servidor git).</p> <p>Tambi\u00e9n vienen muy bien estas placas para adosarlas a los televisores modernos y montar cosas como media centers (por ejemplo con XBMC-Kodi) y consolas de videojuegos retro por emulaci\u00f3n (con distribuciones como Lakka), sin ruidos de ventiladores, ocupando muy poco espacio y consumiendo poca energ\u00eda.</p> <p>A partir de mayo de 2015 tengo el plan de utilizar este tipo de placas como procesadores principales de prop\u00f3sito general, es decir sustituyendo a mi actual port\u00e1til. Y es que he financiado el proyecto Pi-Top por el cual recibir\u00e9 las piezas en esa fecha para montar mi propio port\u00e1til. Y para construir/mejorar todos los que quiera desde entonces, ya que el kit incluye los planos/archivos para poder imprimir la carcasa en una impresora 3D, y el resto de componentes son tan accesibles/asequibles como las propias micro placas. La \u00faltima versi\u00f3n de Pi-Top est\u00e1 anunciado que soporte de serie al menos UDOO, BeagleBone, ODROID y Banana Pi, aparte por supuesto de Raspberry Pi.</p> <p>La placa que m\u00e1s me gusta en la actualidad (y que seguramente mueva las entra\u00f1as del Pi-Top inicial) es la ODROID-C1. 4 cores ARMv7 a 1.5GHz, Mali450, 1GB de RAM DDR3, Gigabit Ethernet, z\u00f3calo eMMC y 4 puertos USB por 37\u20ac.</p>"},{"location":"2014-12-26-dokuwiki-raspi.html","title":"Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS","text":"<p>Tengo desde hace a\u00f1os un Dokuwiki corriendo en el NAS, pero el que utilizo tiene un procesador muy poco potente y funcionaba muy lento. Sin embargo me gustaba que estuviera en el NAS por ser el sitio m\u00e1s seguro para tener la importante informaci\u00f3n que en el Dokuwiki mantengo. La forma de tener la informaci\u00f3n asegurada y disponible permanentemente es combinar el almacenamiento en el NAS con la ejecuci\u00f3n de los procesos en una de las Raspberry Pi que tengo en marcha permanentemente. Describo a continuaci\u00f3n c\u00f3mo ha sido el proceso en mi caso.</p> <p>Antes de empezar, un comentario. Voy a utilizar el paquete <code>dokuwiki</code> de la distribuci\u00f3n porque de Dokuwiki salen continuas ediciones y parches. De esta forma la actualizaci\u00f3n se har\u00e1 con un simple <code>apt-get upgrade</code>. Dokuwiki, en su versi\u00f3n empaquetada para Raspbian, puede correr sobre Apache o sobre Lighttpd. Si instalo directamente <code>dokuwiki</code>, el paquete prioriza la dependencia con Apache, pero prefiero utilizar Lighttpd en la Raspberry. As\u00ed pues la instalaci\u00f3n la hago por etapas para forzar la dependencia con Lighttpd. En otro caso hubiera sido tan sencillo como hacer <code>apt-get install dokuwiki</code>.</p> <ol> <li> <p>Instalo Lighttpd:</p> <pre><code>sudo apt-get install lighttpd\n</code></pre> </li> <li> <p>Instalo PHP:</p> <pre><code>sudo apt-get install php5-common php5-cgi php5\n</code></pre> </li> <li> <p>Activo el m\u00f3dulo PHP en Lighttpd y recargo la configuraci\u00f3n de este \u00faltimo:</p> <pre><code>sudo lighty-enable-mod fastcgi-php\nsudo service lighttpd force-reload\n</code></pre> </li> <li> <p>Ahora s\u00ed instalo Dokuwiki:</p> <pre><code>sudo apt-get install dokuwiki\n</code></pre> </li> <li> <p>Durante la instalaci\u00f3n del paquete aparece un di\u00e1logo de configuraci\u00f3n en el que, aparte de solicitar el password del usuario <code>admin</code> para Dokuwiki, pregunta sobre qu\u00e9 servidores HTTP de los dos soportados, queremos que se haga una configuraci\u00f3n autom\u00e1tica. De nuevo prioriza Apache, es decir, este servidor sale preseleccionado y Lighttpd desactivado. Invierto la situaci\u00f3n.</p> </li> <li>Doy de alta un recurso compartido en el NAS. No muestro el proceso de esto puesto que es muy distinto en cada NAS. Comparto el recurso por medio del protocolo NFS.</li> <li> <p>La instalaci\u00f3n predeterminada de Dokuwiki en Raspbian mantiene los ficheros en el directorio <code>/var/lib/dokuwiki/data</code>, as\u00ed que ser\u00e1 esto lo que habr\u00e1 que mantener en el NAS. Me fijo en los permisos de los ficheros de este directorio, puesto que tendremos que respetarlos para que Dokuwiki pueda trabajar. Veo esto:</p> <pre><code>edumoreno@raspi-git /var/lib/dokuwiki/data $ ls -l\ntotal 208\ndrwx------  2 www-data root 16384 dic 26 11:58 attic\ndrwx------ 11 www-data root 16384 dic 26 11:39 cache\n-rw-r--r--  1 www-data root  7180 dic 26 11:39 deleted.files\n-rw-r--r--  1 www-data root     0 dic 26 11:38 _dummy\ndrwx------  2 www-data root 16384 dic 26 11:58 index\ndrwx------  2 www-data root 16384 dic 26 11:58 locks\ndrwx------  3 www-data root 16384 dic 26 11:39 media\ndrwxr-xr-x  2 www-data root 16384 dic 26 11:39 media_attic\ndrwxr-xr-x  2 www-data root 16384 dic 26 11:39 media_meta\ndrwx------  2 www-data root 16384 dic 26 11:58 meta\ndrwx------  4 www-data root 16384 dic 26 11:42 pages\n-rw-r--r--  1 www-data root  7917 dic 26 11:39 security.png\n-rw-r--r--  1 www-data root 12093 dic 26 11:39 security.xcf\ndrwx------  2 www-data root 16384 dic 26 11:39 tmp\n</code></pre> </li> <li> <p>Antes de hacer el montaje del directorio remoto del NAS hacia la Raspberry, transfiero al primero todos los ficheros que ha dejado la instalaci\u00f3n en Raspberry. En mi caso, como tengo habilitado el acceso SSH en el NAS, lo hago as\u00ed (desde la Raspberry):</p> <pre><code>scp -r /var/lib/dokuwiki/data/* 192.168.1.200:/c/dokuwiki\n</code></pre> </li> <li> <p>Ahora configuro en Raspberry el montaje del recurso compartido en el NAS, lo que hago insertando la siguiente l\u00ednea en el fichero <code>/etc/fstab</code>:</p> <pre><code>192.168.1.200:/c/dokuwiki /var/lib/dokuwiki/data nfs rw 0 0\n</code></pre> </li> <li> <p>Como veo que los permisos est\u00e1n muy orientados al acceso por usuario, y no por grupo, averiguo el UID del usuario <code>www-data</code> para ajustar ese valor en los ficheros en el NAS. Lo hago ejecutando sobre Raspberry:</p> <pre><code>edumoreno@raspi-git ~ $ id www-data\nuid=33(www-data) gid=33(www-data) grupos=33(www-data)\n</code></pre> </li> <li> <p>Ahora inicio sesi\u00f3n por SSH en el NAS, me voy al directorio que voy a montar en la Raspberry y ajusto el UID de los ficheros que he copiado en el paso 7:</p> <pre><code>chown -R 33 /c/dokuwiki/*\n</code></pre> </li> <li> <p>Finalmente vuelvo a Raspberry Pi y monto el nuevo directorio:</p> <pre><code>sudo mount -a\n</code></pre> </li> </ol> <p>A partir de entonces, el directorio <code>/var/lib/dokuwiki/data</code> de la Raspberry se encuentra en realidad en el NAS y por tanto, toda la actividad de Dokuwiki se registrar\u00e1 donde m\u00e1s conviene. Ya puedo acceder a Dokuwiki en: http://192.168.1.204/dokuwiki</p>"},{"location":"2015-01-08-jekyll.html","title":"Jekyll+GitHub Pages","text":"<p>Este sitio est\u00e1 creado con la tecnolog\u00eda de GitHub Pages. Trat\u00e1ndose de GitHub, est\u00e1 basado en Ruby, en concreto en el gem Jekyll. Tras estudiarlo un poco me gust\u00f3 mucho por distintos motivos y me anim\u00e9 a poner en marcha el proyecto. Llevo a\u00f1os acumulando informaci\u00f3n en un Dokuwiki, que me sigue encantando, pero me gusta mucho m\u00e1s el formato Markdown que casi se puede considerar un est\u00e1ndar ya. Adem\u00e1s hace tiempo que ten\u00eda la intenci\u00f3n de hacer p\u00fablica la mayor\u00eda de la informaci\u00f3n que en Dokuwiki manten\u00eda. El haber encontrado Jekyll ha desencadenado el proceso de migraci\u00f3n/publicaci\u00f3n de estos apuntes.</p> <p>El sitio se genera simplemente creando un nuevo repositorio dentro de la cuenta GitHub teniendo el nombre un formato determinado, concretamente <code>username.github.io</code>, siendo <code>username</code> nuestro identificador de usuario en GitHub. As\u00ed de sencillo. A partir de entonces todo lo que el repositorio contenga ser\u00e1 servido con base a la URL http://username.github.io</p> <p>Al ser un repositorio git (gu\u00eda sencilla para git), los cambios en la p\u00e1gina se hacen mediante commits en el propio repositorio. GitHub Pages soporta adem\u00e1s el mencionado Jekyll, lo que nos permitir\u00e1 dar estructura al sitio, gestionando los men\u00fas, las p\u00e1ginas y los posts del blog. Los documentos escritos en Markdown (existe la opci\u00f3n de trabajar tambi\u00e9n en Textile y HTML) resultan con un estilo homog\u00e9neo y f\u00e1cil de mantener. Con Jekyll tenemos tres de las cosas que m\u00e1s me gustaban de Dokuwiki, como son que se incluye un sistema de remarcado de sintaxis en los listados de c\u00f3digo incrustados en los documentos (cosa que es habitual en la clase de documentaci\u00f3n que manejo), evitamos utilizar una base de datos y finalmente el c\u00f3digo de los documentos no resulta alterado por editores WYSIWYG. Como novedad frente a Dokuwiki, el sitio resultante es est\u00e1tico, es decir, todo se termina compilando en HTML puro, con lo que obtenemos velocidad y seguridad.</p> <p>Las instrucciones oficiales con detalle para montar el sitio en GitHub Pages con soporte Jekyll est\u00e1n aqu\u00ed. El proceso paso a paso en mi caso fue como sigue:</p> <ol> <li>Los requerimientos previos son tener instalado Ruby 1.9.3 como m\u00ednimo (yo utilic\u00e9 el que viene empaquetado en Ubuntu, es decir <code>sudo apt-get install ruby</code>), RubyGems y Bundler (lo instalamos con RubyGems, es decir <code>sudo gem install bundler</code>).</li> <li>Creamos el repositorio en GitHub. Como hemos dicho el nombre tendr\u00e1 que ser nuestro identificador de usuario m\u00e1s el sufijo <code>.github.io</code>. No s\u00f3lo eso, si estamos haciendo una p\u00e1gina de usuario (tambi\u00e9n existe la posibilidad de crear una p\u00e1gina de proyecto), tendremos que trabajar obligatoriamente con el branch <code>master</code>. A partir de ahora voy a indicar mi nombre de usuario, es decir <code>eduardofilo</code> en lugar de <code>username</code> para hacerlo m\u00e1s realista.</li> <li> <p>Clonamos el repositorio en nuestra m\u00e1quina para trabajar en local y seleccionamos el branch mencionado (aunque en realidad no es necesario porque es el predeterminado):</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/eduardofilo/eduardofilo.github.io.git\n$ git checkout master\n</code></pre> </li> <li> <p>Instalamos Jekyll. Bueno, en realidad instalamos <code>github-pages</code> que lo lleva incluido como dependencia:</p> <pre><code>$ gem install github-pages\n</code></pre> </li> <li> <p>Generamos la estructura del sitio con Jekyll. En este paso el directorio donde vamos a generar la estructura deber\u00e1 estar vac\u00edo o se producir\u00e1 un error. Si exist\u00edan ficheros (como el <code>README.md</code> que suele generar GitHub), tendremos que sacar temporalmente esos ficheros del directorio y devolverlos posteriormente:</p> <pre><code>$ cd ~/git/eduardofilo.github.io\n$ jekyll new .\n</code></pre> </li> <li> <p>Creamos el fichero <code>Gemfile</code> que gestionar\u00e1 las dependencias del proyecto:</p> <pre><code># ~/git/eduardofilo.github.io/Gemfile\nsource 'https://rubygems.org'\ngem 'github-pages'\n</code></pre> </li> <li> <p>Generamos un fichero <code>.gitignore</code> para que no ser carguen en GitHub un fichero y un par de directorios que se generan din\u00e1micamente a partir del resto:</p> <pre><code># ~/git/eduardofilo.github.io/.gitignore\n_site\n.sass-cache\nGemfile.lock\n</code></pre> </li> <li> <p>Ejecutamos el siguiente comando para que encajen todas las dependencias:</p> <pre><code>$ cd ~/git/eduardofilo.github.io\n$ bundle install\n</code></pre> </li> <li> <p>Levantamos el servidor web de desarrollo para ir observando los cambios en el sitio mientras generamos o modificamos los ficheros, por defecto estar\u00e1 accesible a trav\u00e9s de la URL: http://localhost:4000</p> <pre><code>$ cd ~/git/eduardofilo.github.io\n$ bundle exec jekyll serve\n</code></pre> </li> </ol> <p>Y ya est\u00e1. A partir de ahora tocar\u00e1 retocar el sitio para dejarlo a nuestro gusto. En mi caso he creado directorios para las distintas secciones de documentaci\u00f3n que manejo (Desarrollo, Sistemas, Proyectos y Varios). Dentro de estos directorios mantengo documentos en Markdown que luego enlazo desde el fichero que se sirve de forma predeterminada (<code>index.md</code> aunque tambi\u00e9n puede ser el m\u00e1s clasico <code>index.html</code>). La funci\u00f3n m\u00e1s habitual de Jekyll es la de gestionar una estructura de Blog. Tambi\u00e9n la he aprovechado, manteniendo los ficheros en el subdirectorio <code>_posts</code>. En este caso los ficheros tienen que tener una nomenclatura especial, ya que de su nombre sale la fecha del post y su URL. En ambos tipos de documentos, es importante el sistema de metainformaci\u00f3n llamado FrontMatter. Todos los documentos llevan una peque\u00f1a secci\u00f3n al comienzo delimitada por dos l\u00edneas de tres guiones en formato YML. Es recomendable leer la documentaci\u00f3n sobre su uso ya que tiene m\u00faltiples efectos sobre el funcionamiento de Jekyll. De hecho los documentos que no lleven esta cabecera YML no ser\u00e1n procesados por Jekyll (esto puede servir para dejar de lado algunos ficheros como por ejemplo el <code>README.md</code> en mi caso).</p> <p>Para no tener problemas, conviene ajustarse a las versiones de los componentes que utiliza GitHub, pero al menos en mi caso, sin haberlo hecho (ya de partida uso Ruby 1.9.3 en mi ordenador) no he observado diferencias entre el servidor en desarrollo y lo servido finalmente por GitHub. Si se tienen problemas o se quiere ser m\u00e1s riguroso, estas son las versiones que hay que tener en cuenta: https://pages.github.com/versions/</p> <p>Como curiosidad decir que el directorio <code>_site</code> que hemos ignorado en git (al incluirlo en <code>.gitignore</code>) es donde Jekyll genera todo el contenido est\u00e1tico que termina sirviendo (lo que de hecho sirve GitHub). Por \u00faltimo dejar aqu\u00ed la gu\u00eda de GitHub sobre la variante de Markdown concreta que ellos soportan. Directamente no es la que trae Jekyll de serie, aunque en mi sitio he ido haciendo ajustes para que se parezca lo m\u00e1s posible.</p> <p>Para ver y seguir c\u00f3mo se he hecho el proceso en este sitio, el c\u00f3digo de todo se encuentra en: https://github.com/eduardofilo/eduardofilo.jekyll</p>"},{"location":"2015-01-09-moviles.html","title":"M\u00f3viles recomendables","text":"<p>Es habitual que me hagan la pregunta de \u00bfqu\u00e9 movil comprar?. Responder es muy complicado. Por una parte por la gran oferta actual y por otra por ser un tema tan en boca de todos actualmente. El caso es que hace tiempo que, para responder m\u00e1s r\u00e1pidamente a la pregunta, mantengo una lista de m\u00f3viles que me parecen recomendables y que voy actualizando conforme encuentro alguna opci\u00f3n interesante en los blogs que sigo. He pensado hacer p\u00fablica la lista en forma de post que ir\u00e9 actualizando como hac\u00eda antes en privado. Intentar\u00e9 marcar las recomendaciones con fechas para que se autodescarten las opciones por antig\u00fcedad (de vez en cuando aprovechar\u00e9 estas mismas fechas para hacer limpieza, pero mientras llega esa limpieza la fecha puede servir como indicador de vigencia). La mayor\u00eda de los m\u00f3viles ser\u00e1n Android, en otro caso lo indicar\u00e9. Por \u00faltimo, la lista se detiene en poco m\u00e1s de los 400\u20ac porque considero que cuando alguien est\u00e1 dispuesto a gastar m\u00e1s en un m\u00f3vil normalmente ya sabe lo que quiere.</p> Fecha Terminal Procesador RAM Almac. Pantalla Precio 2017-05-01 Motorola Moto E 4G Qualcomm 410 1,2GHz 1GB 8GB 4,5\u201d 540p 90\u20ac 2017-05-24 Vernee Thor E MediaTek MT6753 1,3GHz 3GB 16GB 5\u201d 720p 91\u20ac 2017-05-01 Umidigi C Note MediaTek MT6737T 1,5GHz 3GB 32GB 5,5\u201d 1080p 118\u20ac 2018-01-30 Xiaomi Redmi 5 Qualcomm 450 1,8GHz 3GB 32GB 5,7\u201d 720p 133\u20ac 2017-05-01 Huawei P8 Lite Kirin 620 1,2GHz 2GB 16GB 5\u201d 720p 153\u20ac 2017-05-01 Motorola Moto G4 Qualcomm 617 1,5GHz 2GB 16GB 5,5\u201d 1080p 166\u20ac 2017-11-17 Meizu M6 Note Qualcomm 625 2,0GHz 3GB 16GB 5,5\u201d 1080p 170\u20ac 2018-01-27 Xiaomi Mi A1 Qualcomm 625 2,0GHz 4GB 64GB 5,5\u201d 1080p 183\u20ac 2017-08-19 Motorola Moto G5 Qualcomm 430 1,4GHz 3GB 16GB 5\u201d 1080p 199\u20ac 2017-05-01 Huawei P9 Lite Kirin 650 2GHz 3GB 16GB 5,2\u201d 1080p 239\u20ac 2017-06-29 BQ Aquaris X Qualcomm 626 2,2GHz 3GB 32GB 5,2\u201d 1080p 279\u20ac 2017-05-01 OnePlus 3T Qualcomm 821 2,35GHz 6GB 64GB 5,5\u201d 1080p 439\u20ac <p>Incluyo algunos enlaces de tiendas o art\u00edculos de donde han podido salir estas recomendaciones:</p> <ul> <li>Serie \u201ccazando gangas\u201d de Xatakandroid</li> <li>2016-11-21 - Los mejores m\u00f3viles por menos de 100 euros (2016)</li> <li>2016-11-28 - Los mejores m\u00f3viles por menos de 150 euros (2016)</li> <li>2017-07-31 - Los mejores m\u00f3viles por menos de 200 euros (2017)</li> <li>2017-06-27 - Los mejores m\u00f3viles por menos de 350 euros (2017)</li> <li>2016-05-22 - Buscando el mejor m\u00f3vil barato: Alternativas al Moto G4</li> <li>2016-05-26 - UMI Super, el m\u00f3vil ultrabarato con 4GB RAM ya se puede reservar</li> <li>2017-06-02 - Nuestro Cazando Gangas no espera a las rebajas de verano: las mejores ofertas en m\u00f3viles Android</li> <li>2017-06-27 - Este es el mejor m\u00f3vil de gama media que puedes comprar ahora mismo, y no es un Xiaomi</li> <li>2017-08-13 - El m\u00f3vil Android barato con buena c\u00e1mara que recomendar\u00e9 a partir de ahora</li> </ul>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html","title":"Raspberry Pi 2 + KODI + Tvheadend","text":"<p>(\u00daltima actualizaci\u00f3n: 2016-03-25 16:00)</p> <p>Actualizaci\u00f3n: A partir de la versi\u00f3n 3 de Raspberry Pi la placa incluye un adaptador Wifi, por lo que no ser\u00e1 necesario disponerlo. Si adem\u00e1s optamos por no instalar el decodificador TDT tambi\u00e9n podremos prescindir del concentrador USB. En este post se detallan las instrucciones para esta versi\u00f3n m\u00e1s simplificada del sistema, as\u00ed como se complementan con una configuraci\u00f3n m\u00e1s detallada del propio Kodi.</p> <p>Nota: Si est\u00e1s usando la versi\u00f3n 7 de OpenELEC que incluye la versi\u00f3n 16 de Kodi, utiliza este otro post.</p> <p>A continuaci\u00f3n se describe el montaje de un media center ejecut\u00e1ndose sobre Raspberry Pi 2 basado en la distribuci\u00f3n OpenELEC que implementa de forma muy ligera el software media center Kodi (anteriormente llamado XBMC). Se incorpora un decodificador TDT gestionado con el software Tvheadend.</p> <p>En la instalaci\u00f3n se incluye un adaptador Wifi que no ser\u00e1 necesario en caso de tener el router cerca y poder llevar un cable ethernet hasta la Raspberry Pi. De hecho es lo m\u00e1s recomendable ya que ser\u00e1 habitual consumir contenidos pesados por red. Si se puede prescindir del adaptador Wifi, seguramente tampoco ser\u00e1 necesario el concentrador USB que se coloc\u00f3 por precauci\u00f3n al ver como la Raspberry Pi se quejaba de deficiencias en la alimentaci\u00f3n (aparece en pantalla un cuadro de colores arriba a la derecha) al conectar directamente el adaptador Wifi y el TDT.</p> <p>Para el airmouse o teclado/rat\u00f3n inal\u00e1mbrico tambi\u00e9n hay alternativas:</p> <ul> <li>Aplicaciones para el m\u00f3vil: Kore o Yatse</li> <li>Mando a distancia del TV: Si nuestro TV soporta el protocolo CEC, puede comandar Kodi a trav\u00e9s del cable HDMI</li> </ul>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#elementos-necesarios","title":"Elementos necesarios","text":"<p>Empezamos con la lista de piezas que vamos a necesitar.</p>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#hardware","title":"Hardware","text":"<ul> <li>Raspberry Pi 2: En Raspipc.es o en Cooking-Hacks.com</li> <li>Tarjeta microSD: En Raspipc.es o en Amazon.es</li> <li>Dongle Wifi</li> <li>Hub USB alimentado: En Raspipc.es o en Pccomponentes.com</li> <li>Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es</li> <li>Cable HDMI. Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente.</li> <li>Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es</li> </ul>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#software","title":"Software","text":"<ul> <li>OpenELEC para Raspberry Pi 2</li> <li>Licencia MPEG-2: Necesaria para reproducir la se\u00f1al TDT.</li> </ul>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion","title":"Instalaci\u00f3n","text":"<p>A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques.</p>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-openelec","title":"Instalaci\u00f3n OpenELEC","text":"<p>Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena.</p> <ol> <li>Abrimos un terminal.</li> <li> <p>Bajamos la imagen de OpenELEC para Raspberry Pi 2:</p> <pre><code>$ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-6.0.3.img.gz\n</code></pre> </li> <li> <p>Insertamos la tarjeta microSD en el lector de tarjetas del ordenador.</p> </li> <li> <p>Averiguamos la ruta del dispositivo de la tarjeta:</p> <pre><code>$ df -h\nS.ficheros             Tama\u00f1o Usados  Disp Uso% Montado en\n/dev/sda3                 61G    44G   14G  76% /\nnone                     4,0K      0  4,0K   0% /sys/fs/cgroup\nudev                     1,9G    12K  1,9G   1% /dev\ntmpfs                    390M   1,3M  389M   1% /run\nnone                     5,0M      0  5,0M   0% /run/lock\nnone                     2,0G    27M  1,9G   2% /run/shm\nnone                     100M    84K  100M   1% /run/user\n/dev/mmcblk0p2           3,4G   1,6M  3,4G   1% /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191\n/dev/mmcblk0p1           256M   104M  153M  41% /media/edumoreno/1765-7DD1\n</code></pre> </li> <li> <p>La mejor forma de averiguar los dispositivos correctos es ejecutar <code>df -h</code> antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo <code>/dev/mmcblk0</code> (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer <code>/dev/sdb1</code> y <code>/dev/sdb2</code> por ejemplo, lo que indicar\u00eda que el dispositivo es <code>/dev/sdb</code>).</p> </li> <li> <p>Desmontamos las particiones montadas de la tarjeta:</p> <pre><code>$ sudo umount /dev/mmcblk0p1\n$ sudo umount /dev/mmcblk0p2\n</code></pre> </li> <li> <p>Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2:</p> <pre><code>$ gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M\n$ sudo sync\n</code></pre> </li> </ol>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#conexion-de-piezas","title":"Conexi\u00f3n de piezas","text":"<p>Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT y el adaptador Wifi al concentrador USB. Alimentamos el concentrador y enlazamos la entrada del concentrador con una de las entradas USB de la Raspberry. Finalmente alimentamos la Raspberry con un cable USB - microUSB desde el concentrador hacia la Raspberry. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi.</p> <p></p> <p>En la foto s\u00f3lo vemos el adaptador Wifi y el decodificador TDT, directamente conectados a la Raspberry. Esta configuraci\u00f3n se termin\u00f3 descartando porque la Raspberry ten\u00eda problemas de alimentaci\u00f3n, a\u00fan utilizando un alimentador de 2 Amperios. El elemento que m\u00e1s pico de corriente exige es el decodificador TDT. Los problemas se detectan por un cuadrado de colores que aparece en la esquina superior derecha de la pantalla. Normalmente el sistema no es capaz de arrancar en esta situaci\u00f3n (aparecen unos errores en la consola) y lo que es peor se termina corrompiendo el sistema de archivos de la microSD. Con el concentrador USB alimentado se evitan estos problemas.</p> <p>A partir de ahora trabajaremos con Kodi para configurar una serie de cosas.</p>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#configuracion-kodi","title":"Configuraci\u00f3n Kodi","text":"<p>El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2.</p> <p>Una vez terminado el asistente acudimos a la siguiente ruta de los men\u00fas para activar el adaptador Wifi:</p> <pre><code>Sistema / OpenELEC / Red / Redes inal\u00e1mbricas / Activo\n</code></pre> <p>Una vez activo conectamos a nuestro punto de acceso siguiendo esta secuencia de men\u00fas:</p> <pre><code>Sistema / OpenELEC / Conexiones / engancho mi AP\n</code></pre>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-de-tvheadend","title":"Instalaci\u00f3n de TVheadend","text":"<p>Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT:</p> <pre><code>Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar\nSistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar\nSistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar\nSistema / Ajustes / Add-ons / Mis add-ons / Clientes PVR / Tvheadend HTSP Client / Configurar / OK\nSistema / Ajustes / Add-ons / Mis add-ons / Clientes PVR / Tvheadend HTSP Client / Activar\nSistema / Ajustes / TV en directo / General / Activado\n</code></pre>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#configuracion-de-tvheadend","title":"Configuraci\u00f3n de Tvheadend","text":"<p>Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981</p> <p>La IP de la raspberry la podremos averiguar acudiendo a la ruta:</p> <pre><code>Sistema / OpenELEC / Conexiones\n</code></pre> <p>Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil.</p> <p>Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores:</p> <ul> <li>Realtek RTL2832</li> <li>Siano Mobile Digital MDTV Receiver</li> </ul> <p>El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero <code>/etc/modprobe.d/smsmdtv.conf</code> con el siguiente contenido:</p> <pre><code>options smsmdtv default_mode=4\n</code></pre> <p>Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales:</p> <pre><code>Configuration / General / Language settings / Available / Spanish; Castilian -&gt; Selected / Save configuration\nConfiguration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save\nConfiguration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create\nConfiguration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante)\nConfiguration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save\n</code></pre> <p>Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes:</p> <p></p> <p>Todos ellos se han introducido con los siguientes par\u00e1metros:</p> <ul> <li>Bandwidth: 8MHz</li> <li>Constellation: QAM/64</li> <li>Transmission Mode: 8k</li> <li>Resto de par\u00e1metros: AUTO</li> </ul> <p>Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas <code>Scan Status</code> y <code>Scan Result</code> del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n <code>Map All</code> que se encuentra en la ruta:</p> <pre><code>Configuration / DVB Inputs / Services / Map All / Check availability / Map\n</code></pre> <p>Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna <code>Number</code>:</p> <pre><code>Configuration / Channel/EPG / Channels\n</code></pre> <p>Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n <code>Save</code>.</p>"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-licencia-mpeg-2","title":"Instalaci\u00f3n licencia MPEG-2","text":"<p>Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos:</p> <ol> <li> <p>Conectamos por SSH con la Raspberry (password = <code>openelec</code>):</p> <pre><code>$ ssh root@ip-de-raspberry\n</code></pre> </li> <li> <p>Obtenemos el n\u00famero de serie:</p> <pre><code>OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial\nSerial      : 0000000029bcaeeb\n</code></pre> </li> <li> <p>Adquirimos la licencia acudiendo a la Raspberry Pi Store.</p> </li> <li>Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry.</li> <li>Apagamos Kodi/OpenELEC desde men\u00fa.</li> <li>Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD.</li> <li>Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el <code>config.txt</code>. Casi al final hay una serie de claves que comienzan por <code>decode_</code>. La primera de ellas es <code>decode_MPG2</code>. Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry.</li> </ol> <p>FIN</p>"},{"location":"2016-02-25-los-innovadores.html","title":"Los Innovadores - Walter Isaacson","text":"<p>Quer\u00eda recomendar el \u00faltimo libro que he le\u00eddo. Los innovadores de Walter Isaacson, el mismo autor que escribi\u00f3 magistralmente las biograf\u00edas de Albert Einstein y Steve Jobs (que tambi\u00e9n recomiendo). Relata la historia de la cascada de descubrimientos e innovaciones que se produjeron desde mediados del siglo XIX y que nos trajeron la era digital (los ordenadores y dispositivos personales e Internet).</p> <p>Me he dado cuenta de que conoc\u00eda aproximadamente un 10% de la historia y que se me escapaba el reconocimiento a personajes esenciales como John Bardeen y Walter Brattain (inventores del transistor), Robert Noyce y Gordon Moore en Intel y en paralelo Jack Kilby y Patrick Haggerty en Texas Instruments (microchips y microprocesadores), Douglas Engelbart y J.C.R. Licklider (como te\u00f3ricos de la interacci\u00f3n hombre-m\u00e1quina; el primero realiz\u00f3 en 1968 \"La madre de todas las demos\" en que ya mostraba un interfaz gr\u00e1fico de usuario con rat\u00f3n y todo) y sobre todo los m\u00e1s pioneros de todos, Charles Babbage y Ada Byron, que especularon con casi todo lo que vino despu\u00e9s 100 a\u00f1os antes que todos los dem\u00e1s.</p> <p>Otra cosa que muestra el libro insistentemente es algo en lo que creo desde hace tiempo, y es que gran parte de las innovaciones surgieron de la tensi\u00f3n creativa que se produce al combinar habilidades humanas contrapuestas. Introvertidos y extrovertidos, pr\u00e1cticos y te\u00f3ricos, personas pragm\u00e1ticas capaces de encontrar salida comercial a los descubrimientos y otras que no se conformaban hasta dominar a fondo la teor\u00eda subyacente. Todas las parejas de nombres mencionadas anteriormente ilustran este fen\u00f3meno, as\u00ed como otras m\u00e1s conocidas que aparecieron posteriormente como Steve Wozniak y Steve Jobs o Larry Page y Sergu\u00e9i Brin.</p> <p>Os dejo con un documento impresionante. La madre de todas las demos:</p>"},{"location":"2016-04-10-un-antropologo-en-marte.html","title":"Un antrop\u00f3logo en Marte - Oliver Sacks","text":"<p>Leer este libro del recientemente fallecido neur\u00f3logo Oliver Sacks hace pensar sobre el concepto de \"realidad\".</p> <p>El libro relata varios casos a los que hizo seguimiento a lo largo de su carrera. Casos como el del pintor que perdi\u00f3 la percepci\u00f3n del color a ra\u00edz de un accidente y que se vio forzado a sustituir su realidad anterior por otra distinta a la que no hubiera renunciado de haber podido tras haberse adaptado, pues le permit\u00eda percibir cosas en el mundo que antes no pod\u00eda. U otro caso que se podr\u00eda considerar opuesto, como fue el de una persona ciega desde la infancia a la que una operaci\u00f3n le devolvi\u00f3 la vista en la cuarentena y que poco a poco termin\u00f3 renunciando al nuevo don ya que sus estructuras neuronales hab\u00edan construido una realidad v\u00e1lida partiendo de lo que ten\u00eda, haciendo que la visi\u00f3n la modificara hasta un grado insoportable.</p> <p>Describe tambi\u00e9n varios casos del desconcertante s\u00edndrome de Tourette. En mis tiempos de instituto conviv\u00ed con un muchacho que seguramente correspond\u00eda con este s\u00edndrome. Como suele ser habitual en estos casos, y m\u00e1s en un ambiente adolescente, era objeto de numerosas burlas. Personalmente nunca llegu\u00e9 a burlarme de \u00e9l, pero s\u00ed me desconcertaba. Ahora creo que ese muchacho era un valiente cuando menos.</p> <p>El libro en general dibuja la casi imposibilidad de comprensi\u00f3n hacia los casos que m\u00e1s se alejan de la normalidad. En igual grado a ambos lados del espacio que separa las distintas realidades que viven unos (sus pacientes) y otro (Sacks). Pero a la vez es un ejercicio de tolerancia y escepticismo hacia lo diferente, siendo muy consiciente del poder que encierran estas personas al vivir otra realidad, en algunos aspectos aumentada y en otros reducida, no mejor ni peor sino m\u00e1s o menos v\u00e1lida para la suerte que les toque vivir. De la misma forma que un perro no elige vivir en un mundo \"tan\" olfativo pero construye su mundo en \u00e9l y nos puede ayudar en ocasiones, personas con sistemas nerviosos diferentes como los autistas, pueden ayudarnos tambi\u00e9n, como Temple Grandin ilustra muy bien.</p>"},{"location":"2016-07-02-virus-android.html","title":"Alertas por supuestos virus en Android","text":"<p>En este v\u00eddeo veremos un par de t\u00e9cnicas para combatir los mensajes que aparecen en algunos tel\u00e9fonos Android alert\u00e1ndonos de supuestos virus en el sistema.</p> <p>Dado el dise\u00f1o de Android y la forma en que los distintos fabricantes lo distribuyen y modifican, es muy poco rentable t\u00e9cnicamente escribir virus para este sistema, por tanto lo que hay detr\u00e1s de estos mensajes suele ser otro tipo de problemas. Son simples enga\u00f1os emitidos por aplicaciones que nosotros mismos hemos instalado. El objetivo ser\u00e1 pues localizar dichas aplicaciones y desinstalarlas. En el v\u00eddeo se muestra la forma de localizar qu\u00e9 aplicaci\u00f3n ha emitido una notificaci\u00f3n. Como consejo general se recomienda minimizar o mejor a\u00fan evitar completamente la instalaci\u00f3n de aplicaciones de dudosa procedencia, a\u00fan estando en el propio Google Play.</p> <p>Otra situaci\u00f3n (como la del caso que se ilustra al principio del v\u00eddeo) es que la alerta aparezca mediante una p\u00e1gina web en el navegador. Con el dise\u00f1o minimalista de los navegadores web Android (el que se ve en el v\u00eddeo es Chrome), a veces cuesta reconocer que estamos ante una simple p\u00e1gina web y no delante de una pantalla del sistema. Esto es lo que parece pretender el dise\u00f1o del mensaje que se muestra en el v\u00eddeo al incluir dise\u00f1os y logotipos propios de Google. En este caso lo que tendremos que hacer es borrar los datos del navegador, ya que la p\u00e1gina de la alerta puede haberse \"instalado\" (modificando la p\u00e1gina de inicio por ejemplo) al haber navegado por algunos sitios (normalmente poco recomendables, otra cosa que conviene minimizar o evitar; en caso de hacerlo se recomienda usar el modo inc\u00f3gnito que incorporan ahora la mayor\u00eda de los navegadores).</p> <p>Enlaces:</p> <ul> <li>El Androide Libre - C\u00f3mo eliminar ese \"virus\" que ha aparecido en tu m\u00f3vil</li> </ul>"},{"location":"2016-07-10-wild.html","title":"Wild - Cheryl Strayed","text":"<p>Instructivo relato sobre el recorrido que realiz\u00f3 su autora en 1995 de parte del Pacific Crest Trail, una especie de Transpiren\u00e1ica pero de una escala superior (como suele ocurrir cuando hablamos del continente americano) que recorre las crestas de la cadena de cordilleras que existen en el oeste del continente norteamericano en disposici\u00f3n vertical a unos pocos centenares de km de la costa. El PCT tiene m\u00e1s de 4000 km, aunque Cheryl \"s\u00f3lo\" recorri\u00f3 alrededor de 1700 en unos 100 d\u00edas, partiendo desde el desierto de Mojave en California y terminando en El puente de los dioses en la frontera entre los estados de Oreg\u00f3n y Whashington.</p> <p>Durante su periplo, hace balance de su vida y trata de reencontrarse. En ese momento ten\u00eda 26 a\u00f1os y tras una infancia complicada y haber perdido a su madre recientemente, se encuentra metida en una espiral de autodestrucci\u00f3n.</p> <p>Cheryl consigue transmitir con muy buena prosa, tanto su estado mental como los peligros y problemas que tiene que enfrentar en su viaje, la mayor parte de las veces con una soledad autoimpuesta.</p> <p>De manera parecida a la historia de Christopher McCandless (de la que tambi\u00e9n hay pel\u00edcula y libro, aunque en esta ocasi\u00f3n escrito obligatoriamente por un tercero), la aventura de Cheryl es una temeridad analizada posteriormente. Se lanz\u00f3 a la aventura sin experiencia ni preparaci\u00f3n suficientes, como ella misma reconoce, arrastrando una mochila que pesaba aproximadamente la mitad que ella. A pesar de ello no puedo dejar de sentir admiraci\u00f3n por la fuerza de esta mujer.</p> <p>Os dejo con el trailer de la pel\u00edcula que se hizo en 2014 basada en el libro que no le hace justicia, aunque sirve para acceder a algunos de los espectaculares paisajes que Cheryl atraves\u00f3.</p>"},{"location":"2016-07-21-PIGRRL-2.html","title":"Configuraci\u00f3n PiGRRL-2","text":"<p>Hace unos meses mont\u00e9 un PiGRRL-2. La imagen de tarjeta microSD que Adafruit ofrece para el sistema, viene preconfigurada con todo lo necesario, pero hab\u00eda cosas que no funcionaban a mi gusto (como los emuladores de ZX Spectrum) y quer\u00eda conocer m\u00e1s de cerca todas las posibilidades de RetroPie. Lo que sigue son los pasos que he seguido para montar una microSD con RetroPie para la PiGRRL-2 desde cero.</p>"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-raspbian","title":"Instalaci\u00f3n de Raspbian","text":"<p>Comenzamos haciendo una instalaci\u00f3n limpia del sistema base. He elegido Raspbian Lite puesto que no necesitamos entorno de escritorio ni las aplicaciones que lleva la instalaci\u00f3n normal.</p> <ol> <li>Bajamos Rasbian Lite: https://www.raspberrypi.org/downloads/raspbian/</li> <li> <p>Instalamos:</p> <pre><code>unzip -p 2016-05-27-raspbian-jessie-lite.zip | sudo dd of=/dev/mmcblk0 bs=2M\nsudo sync\n</code></pre> </li> <li> <p>Pinchamos la tarjeta en la Raspberry Pi y conectamos un cable de red para poder acceder por SSH (user: pi; pwd: raspberry).</p> </li> <li> <p>Actualizamos la distribuci\u00f3n:</p> <pre><code>sudo apt-get update\nsudo apt-get upgrade\n</code></pre> </li> <li> <p>Hacemos algunos ajustes generales:</p> <pre><code>sudo raspi-config\n</code></pre> <ol> <li> <p>Extendemos la partici\u00f3n a toda la SD (opci\u00f3n: <code>1 Expand Filesystem</code>).</p> </li> <li> <p>Ajustar el Timezone (opci\u00f3n <code>5 Internationalisation Options &gt; I2 Change Timezone</code>). Realmente no es necesario, pero me gusta ver fechas coherentes cuando manipulo el sistema.</p> </li> <li> <p>Ajustar los locales (opci\u00f3n <code>5 Internationalisation Options &gt; I1 Change Locale</code>). Yo por ejemplo elijo <code>en_GB.UTF-8</code>. Es importante que todas las variables que aparecen al ejecutar el comando <code>locale</code> tengan valor correcto e igual en todas ellas. Tras hacer los ajustes es necesario reiniciar, ya que se gestionan mediante variables de entorno de sesi\u00f3n. Tras hacerlo volver a comprobar con el comando <code>locale</code>. Si alguna de las variables sigue con un valor incorrecto (suele ocurrir en LANG, LANGUAGE y LC_ALL), usar el siguiente comando e ir comprobando con sucesivos reinicios hasta que todas las variables tengan el mismo locale:     <pre><code>sudo update-locale LC_ALL=\"en_GB.UTF-8\"\n</code></pre></p> </li> <li> <p>Desactivamos el Overscan (opci\u00f3n <code>9 Advanced Options &gt; A1 Overscan</code>, respondiendo \"No\").</p> </li> <li> <p>Forzamos el audio a trav\u00e9s del jack 3,5mm (opci\u00f3n <code>9 Advanced Options &gt; A8 Audio</code>, respondiendo \"1 Force 3.5mm\").</p> </li> </ol> </li> </ol>"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-retropie-setup","title":"Instalaci\u00f3n de RetroPie-Setup","text":"<ol> <li> <p>Instalamos unos paquetes necesarios:</p> <pre><code>sudo apt-get install git dialog xmlstarlet\n</code></pre> </li> <li> <p>Bajamos el c\u00f3digo de RetroPie-Setup:</p> <pre><code>cd ~\ngit clone --depth=1 https://github.com/RetroPie/RetroPie-Setup.git\n</code></pre> </li> <li> <p>Ejecutamos RetroPie-Setup:</p> <pre><code>cd RetroPie-Setup\nsudo ./retropie_setup.sh\n</code></pre> </li> <li> <p>Cerramos el cuadro de advertencia que aparece y acudimos a la siguiente ruta: <code>Manage Packages &gt; Quick Install</code></p> </li> <li>Respondemos \"Yes\". A continuaci\u00f3n se desencadenar\u00e1 una secuencia de descargas, compilaciones y configuraciones autom\u00e1ticas de todas las herramientas que integran RetroPie. En mi caso el proceso en una Raspberry Pi 2 tard\u00f3 unos 13 minutos. Al terminar volvemos a la misma ventana. Pulsamos los botones \"Back\" y \"Exit\".</li> </ol>"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-pitft","title":"Instalaci\u00f3n de PiTFT","text":""},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-fbcp","title":"Instalaci\u00f3n de fbcp","text":"<p>La PiTFT de Adafruit funciona haciendo framebuffer de la memoria de v\u00eddeo de la Raspberry Pi hacia la peque\u00f1a pantalla por SPI (explicado aqu\u00ed). Para que esto funcione hay que instalar un peque\u00f1o programa.</p> <ol> <li> <p>Bajamos, compilamos e instalamos:</p> <pre><code>cd ~\nsudo apt-get install cmake\ngit clone https://github.com/tasanakorn/rpi-fbcp\ncd rpi-fbcp/\nmkdir build\ncd build/\ncmake ..\nmake\nsudo install fbcp /usr/local/bin/fbcp\n</code></pre> </li> <li> <p>Configuramos el sistema para que autoarranque el programa que acabamos de instalar. Para ello editar <code>/etc/rc.local</code> y a\u00f1adir lo siguiente justo antes de la \u00faltima l\u00ednea (<code>exit 0</code>):</p> <pre><code>/usr/local/bin/fbcp &amp;\n</code></pre> </li> <li> <p>Reconfiguramos la consola para que se vea bien en la peque\u00f1a PiTFT (Elegimos las opciones <code>UTF-8</code>, <code>Guess optimal character set</code>, <code>Terminus</code> y <code>6x12 (framebuffer only).</code>):</p> <pre><code>sudo dpkg-reconfigure console-setup\n</code></pre> </li> </ol>"},{"location":"2016-07-21-PIGRRL-2.html#configuracion-de-pitft","title":"Configuraci\u00f3n de PiTFT","text":"<p>Adem\u00e1s de instalar fbcp habr\u00e1 que hacer una serie de ajustes en el sistema para que se adapte a la resoluci\u00f3n tan especial y modo de trabajo de esta pantalla.</p> <ol> <li> <p>Instalamos un repositorio de Adafruit y un par de paquetes:</p> <pre><code>cd ~\ncurl -SLs https://apt.adafruit.com/add-pin | sudo bash\nsudo apt-get install raspberrypi-bootloader adafruit-pitft-helper\n</code></pre> </li> <li> <p>Ejecutamos el aistente para configurar PiTFT:</p> <pre><code>sudo adafruit-pitft-helper -t 28r\n</code></pre> </li> <li> <p>Responder <code>n</code> a la primera pregunta y <code>y</code> a la segunda. Con esto \u00faltimo asociaremos la tecla vinculada al GPIO23 (la segunda empezando por arriba de las cuatro que tiene la pantalla a la izquierda) a un apagado/encendido de la consola que nos servir\u00e1 para reiniciarla limpiamente si en alg\u00fan momento perdemos el control en alguno de los emuladores.</p> </li> <li> <p>Editar el fichero <code>/boot/config.txt</code> y cambiar los valores de la l\u00ednea que empieza con <code>dtoverlay</code> para dejarla como sigue:</p> <pre><code>dtoverlay=pitft28-resistive,rotate=270,speed=80000000,fps=60\n</code></pre> </li> <li> <p>En el mismo fichero <code>/boot/config.txt</code> a\u00f1adir las siguientes l\u00edneas (si ya existen comentarlas):</p> <pre><code>hdmi_force_hotplug=1\nhdmi_group=2\nhdmi_mode=87\nhdmi_cvt=320 240 60 1 0 0 0\n</code></pre> </li> </ol>"},{"location":"2016-07-21-PIGRRL-2.html#configurar-emulationstation","title":"Configurar EmulationStation","text":"<p>Vamos a hacer que EmulationStation arranque autom\u00e1ticamente con el sistema.</p> <ol> <li> <p>A\u00f1adir lo siguiente al final del fichero <code>/etc/profile</code>:</p> <pre><code>[ -n \"${SSH_CONNECTION}\" ] || emulationstation\n</code></pre> </li> <li> <p>Configurar con raspi-config el autologin en consola. Para ello seguir la ruta <code>3 Boot Options &gt; B1 Desktop / CLI &gt; B2 Console Autologin</code>.</p> </li> </ol>"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-retrogame","title":"Instalaci\u00f3n de Retrogame","text":"<p>El pad que incorpora PiGRRL-2 enlaza cada bot\u00f3n con un GPIO determinado. Para que las se\u00f1ales en estos GPIO's se conviertan en pulsaciones de teclas normales hay que instalar y configurar un software que nos proporciona Adafruit, mediante los siguientes pasos:</p> <ol> <li> <p>Bajamos el c\u00f3digo:</p> <pre><code>cd ~\ngit clone https://github.com/adafruit/Adafruit-Retrogame.git\ncd Adafruit-Retrogame\n</code></pre> </li> <li> <p>Editamos el fichero <code>~/Adafruit-Retrogame/retrogame.c</code> y sustituimos la estructura <code>ioStandard</code> que hay a partir de la l\u00ednea 111 por lo que sigue. Esto har\u00e1 corresponder algunas de las teclas importantes para manejar los emuladores y el propio EmulationStation con el mapeo de pulsadores del gamepad de PiGRRL 2:</p> <pre><code>ioStandard[] = {\n    // This pin/key table is used when the PiTFT isn't found\n    // (using HDMI or composite instead), as with our original\n    // retro gaming guide.\n    // Input   Output (from /usr/include/linux/input.h)\n    {  17,     KEY_RIGHTSHIFT },  // PiTFT 17\n    {  22,     KEY_RIGHTCTRL  },  // PiTFT 22\n    {  27,     KEY_ESC        },  // PiTFT 27\n    {   4,     KEY_LEFT       },  // Left\n    {  16,     KEY_UP         },  // Up\n    {  19,     KEY_RIGHT      },  // Right\n    {  26,     KEY_DOWN       },  // Down\n    {   5,     KEY_SPACE      },  // Select\n    {   6,     KEY_ENTER      },  // Start\n    {  14,     KEY_LEFTCTRL   },  // A Button\n    {  15,     KEY_LEFTALT    },  // B Button\n    {  20,     KEY_Z          },  // X Button\n    {  18,     KEY_X          },  // Y Button\n    {  12,     KEY_A          },  // L Shoulder\n    {  13,     KEY_S          },  // R Shoulder\n\n    // For credit/start/etc., use USB keyboard or add more buttons.\n    {  -1,     -1           } }; // END OF LIST, DO NOT CHANGE\n</code></pre> </li> <li> <p>Dentro del mismo fichero <code>~/Adafruit-Retrogame/retrogame.c</code> acudir a la l\u00ednea 300 (tras el cambio anterior) y sustituir:</p> <pre><code>// Select io[] table for Cupcade (TFT) or 'normal' project.\nio = (access(\"/etc/modprobe.d/adafruit.conf\", F_OK) ||\n      access(\"/dev/fb1\", F_OK)) ? ioStandard : ioTFT;\n</code></pre> <p>por:</p> <pre><code>io = ioStandard;\n</code></pre> </li> <li> <p>Compilamos e instalamos:</p> <pre><code>make retrogame\nsudo mv retrogame /usr/local/bin\n</code></pre> </li> <li> <p>Crear el fichero <code>/etc/udev/rules.d/10-retrogame.rules</code> con el siguiente contenido:</p> <pre><code>SUBSYSTEM==\"input\", ATTRS{name}==\"retrogame\", ENV{ID_INPUT_KEYBOARD}=\"1\"\n</code></pre> </li> <li> <p>A\u00f1adir lo siguiente al final de <code>/etc/rc.local</code>:</p> <pre><code>/usr/local/bin/retrogame &amp;\n</code></pre> </li> <li> <p>A\u00f1adir los siguientes m\u00f3dulos al fichero <code>/etc/modules</code>:</p> <pre><code>uinput\njoydev\nsnd-bcm2835\n</code></pre> </li> <li> <p>Sustituir el contenido del fichero <code>/opt/retropie/configs/all/emulationstation/es_input.cfg</code> por:</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;inputList&gt;\n  &lt;inputAction type=\"onfinish\"&gt;\n    &lt;command&gt;/opt/retropie/supplementary/emulationstation/scripts/inputconfiguration.sh&lt;/command&gt;\n  &lt;/inputAction&gt;\n  &lt;inputConfig type=\"keyboard\" deviceName=\"Keyboard\" deviceGUID=\"-1\"&gt;\n    &lt;input name=\"a\" type=\"key\" id=\"1073742048\" value=\"1\" /&gt;\n    &lt;input name=\"b\" type=\"key\" id=\"1073742050\" value=\"1\" /&gt;\n    &lt;input name=\"down\" type=\"key\" id=\"1073741905\" value=\"1\" /&gt;\n    &lt;input name=\"left\" type=\"key\" id=\"1073741904\" value=\"1\" /&gt;\n    &lt;input name=\"pagedown\" type=\"key\" id=\"120\" value=\"1\" /&gt;\n    &lt;input name=\"pageup\" type=\"key\" id=\"122\" value=\"1\" /&gt;\n    &lt;input name=\"right\" type=\"key\" id=\"1073741903\" value=\"1\" /&gt;\n    &lt;input name=\"select\" type=\"key\" id=\"32\" value=\"1\" /&gt;\n    &lt;input name=\"start\" type=\"key\" id=\"13\" value=\"1\" /&gt;\n    &lt;input name=\"up\" type=\"key\" id=\"1073741906\" value=\"1\" /&gt;\n  &lt;/inputConfig&gt;\n&lt;/inputList&gt;\n</code></pre> </li> </ol>"},{"location":"2016-07-21-PIGRRL-2.html#fin","title":"FIN","text":"<p>S\u00f3lo queda copiar algunas roms a los directorios correspondientes a cada emulador dentro de la ruta <code>/home/pi/RetroPie/roms</code>. Hasta que no lo hagamos no aparecer\u00e1 la entrada correspondiente al emulador en EmulationStation. Si a\u00f1adimos las roms mientras \u00e9ste est\u00e1 en marcha (conect\u00e1ndonos por sFTP por ejemplo) habr\u00e1 que reiniciarlo para que las encuentre.</p>"},{"location":"2016-07-21-PIGRRL-2.html#enlaces","title":"Enlaces:","text":"<ul> <li>Running OpenGL-based Games &amp; Emulators on Adafruit PiTFT Displays</li> <li>Adafruit PiTFT - 2.8\" Touchscreen Display for Raspberry Pi</li> <li>Adafruit-PiTFT-Helper: A script for configuring Adafruit's PiTFT displays on a Raspberry Pi.</li> <li>Tactile switch as power button</li> <li>Adafruit-Retrogame: Librer\u00eda para mapear GPIO's a teclas.</li> <li>Retro Gaming with Raspberry Pi</li> <li>Retroarch Controls</li> </ul>"},{"location":"2016-08-02-stm32-vl-discovery.html","title":"Entorno desarrollo STM32 VL Discovery sobre Linux","text":"<p>ST propone varios entornos de desarrollo para trabajar sobre su placa STM32 VL Discovery, pero en todos los casos sobre Windows. Vamos a ver aqu\u00ed c\u00f3mo montar el toolkit de desarrollo sobre Ubuntu 16.04.</p> <ol> <li> <p>Instalaci\u00f3n de \u00faltima versi\u00f3n de GCC ARM Embedded siguiendo estas instrucciones. B\u00e1sicamente consiste en bajar este archivo y descomprimirlo en /usr/local del siguiente modo:</p> <pre><code>$ cd /usr/local\n$ sudo tar xjvf ~/Descargas/gcc-arm-none-eabi-5_4-2016q2-20160622-linux.tar.bz2\n</code></pre> </li> <li> <p>Introducir en la variable PATH del sistema la ruta del directorio bin del compilador GCC ARM reci\u00e9n instalado incorporando al final del fichero ~/.profile:</p> <pre><code>PATH=\"/usr/local/gcc-arm-none-eabi-5_4-2016q2/bin:$PATH\"\n</code></pre> </li> <li> <p>Descargamos la STM32 Firmware Library de aqu\u00ed.</p> </li> <li> <p>Descomprimimos y dejamos en la ruta <code>~/STM32F10x_StdPeriph_Lib_V3.5.0</code>.</p> </li> <li> <p>Descargamos plantilla para los proyectos de c\u00f3digo por ejemplo en <code>~/git/</code>:</p> <pre><code>$ cd ~/git\n$ git clone git://github.com/geoffreymbrown/STM32-Template.git\n</code></pre> </li> <li> <p>La compilaci\u00f3n del c\u00f3digo se har\u00eda as\u00ed:</p> <pre><code>$ cd ~/git/STM32-Template/Demo\n$ make\n</code></pre> </li> <li> <p>Modificamos el fichero <code>~/git/STM32-Template/Makefile.common</code> ajustando las variables <code>TOOLROOT</code> y <code>LIBROOT</code> de la siguiente forma:</p> <pre><code>TOOLROOT=/usr/local/gcc-arm-none-eabi-5_4-2016q2/bin\nLIBROOT=~/STM32F10x_StdPeriph_Lib_V3.5.0\n</code></pre> </li> <li> <p>Instalamos el software que nos permitir\u00e1 hacer uso del interfaz STLink para programar el MCU:</p> <pre><code>$ cd ~/git\n$ git clone git://github.com/texane/stlink.git\n</code></pre> </li> <li> <p>Instalamos una serie de paquetes necesarios:</p> <pre><code>$ sudo apt-get install pkg-config intltool build-essential cmake libusb-1.0 libgtk-3-dev\n</code></pre> </li> <li> <p>Tal y como se explica en el README del proyecto descargado en el paso 7, el interfaz STLINKv1 que utiliza la STM32VLDISCOVERY, tiene ciertos problemas que para evitar hay que reconfigurar el m\u00f3dulo <code>usb-storage</code>. Para ello ejecutar lo siguiente al principio de una sesi\u00f3n en la que se quiera trabajar con \u00e9l:</p> <pre><code>$ sudo modprobe -r usb-storage &amp;&amp; sudo modprobe usb-storage quirks=0483:3744:i\n</code></pre> </li> <li> <p>Si se quiere hacer permanente el cambio en su lugar, crear el fichero <code>/etc/modprobe.d/usb-storage.conf</code> con el siguiente contenido:</p> <pre><code># stlink/v1 ignore mass storage\noptions usb-storage quirks=0483:3744:i\n</code></pre> </li> <li> <p>Compilamos:</p> <pre><code>$ cd ~/git/stlink\n$ ./autogen.sh\n$ ./configure --with-gtk-gui\n$ make\n$ mkdir build &amp;&amp; cd build\n$ cmake -DCMAKE_BUILD_TYPE=Debug ..\n$ make\n</code></pre> </li> <li> <p>Conectar la placa por USB al ordenador.</p> </li> <li> <p>Arrancamos gdbserver:</p> <pre><code>$ cd ~/git/stlink/build\n$ sudo ./st-util -1\n</code></pre> </li> <li> <p>Conectamos con \u00e9l desde el directorio donde est\u00e9 el binario que queremos depurar o ejecutar:</p> <pre><code>$ cd ~/git/STM32-Template/Demo\n$ arm-none-eabi-gdb Demo.elf\n(gdb) target extended-remote localhost:4242\n(gdb) load\n(gdb) quit\n</code></pre> </li> </ol>"},{"location":"2016-08-17-el-mundo-de-ayer.html","title":"El mundo de ayer - Stefan Zweig","text":"<p>He pasado el \u00faltimo mes viviendo a principios del siglo XX gracias a la descripci\u00f3n que hace Stefan Zweig de la Europa de ese tiempo. A pesar de que siempre he intuido que mi cultura tiene una nacionalidad m\u00e1s amplia que la espa\u00f1ola, yo cre\u00eda que Europa era un invento de Miterrand y Francia en general como forma de domesticar a Alemania tras las dos guerras mundiales. Zweig me ha ense\u00f1ado que la conciencia europea es algo m\u00e1s antiguo y poderoso de lo que sospechaba.</p> <p>A pesar de que en su tiempo fue uno de los escritores m\u00e1s populares del mundo, yo no lo conoc\u00eda. Tras descubrirlo, he investigado y descubierto que fue un excelente testigo de las situaciones que condujeron a nuestro continente a las guerras mundiales. Por cierto que en los dos casos Zweig parece apuntar a intereses de poderes f\u00e1cticos en la sombra que no necesariamente representaban la opini\u00f3n del pueblo, pero que supieron coaccionarlo. La coyuntura anterior a la Primera Guerra Mundial tambi\u00e9n era una de mis carencias en materia de historia que este libro me ha ayudado a paliar m\u00e1s que ninguno otro hasta ahora.</p> <p>El relato es una autobiograf\u00eda que escribi\u00f3 en el exilio. Era jud\u00edo austriaco y naturalmente tuvo que abandonar su pa\u00eds y le convirtieron en ap\u00e1trida (le retiraron la nacionalidad en su pa\u00eds y prohibieron todas sus obras) hasta que en 1942 no pudo soportar la crueldad de su tiempo y poco despu\u00e9s de escribir el libro se suicid\u00f3 a los 60 a\u00f1os junto a su esposa.</p> <p>Zweig fue un intelectual con may\u00fasculas, cuyas obras y esfuerzo humanista seguramente nos influyen hoy en d\u00eda. Su nombre tengo la impresi\u00f3n de que ha quedado un poco olvidado por c\u00f3mo se desenvolvieron los \u00faltimos a\u00f1os de su vida. Por mi parte voy a tratar de acercarme al resto de su obra. Como ejemplo, Wes Anderson reconoci\u00f3 que su pel\u00edcula El Gran Hotel Budapest se inspira en las obras de Stefan Zweig.</p>"},{"location":"2016-10-17-raspi-switch.html","title":"Interruputor de encendido para Raspberry Pi","text":"<p>Una de las carencias de Raspberry Pi es la falta de bot\u00f3n de encendido o apagado. Algo que no es grave, s\u00ed resulta inc\u00f3modo por ejemplo cuando se utiliza como media center con Kodi ya que puede no resultar sencillo quitar y poner el cable de encendido a la Raspberry estando \u00e9sta detr\u00e1s del televisor enterrada en cables y aparatos. La opci\u00f3n l\u00f3gica ser\u00eda alimentar la Raspberry a trav\u00e9s de una regleta de conexiones con interruptor, pero cuando no es posible/conveniente, hay alternativas. La comunidad ha desarrollado numerosos accesorios (como \u00e9ste), pero existe una opci\u00f3n mucho m\u00e1s simplificada y barata que paso a describir.</p> <p>Se trata de conectar un pulsador a los pines de reset que existen en todas las versiones de Raspberry Pi. En la placa se se\u00f1alan con la etiqueta <code>Run</code> y seg\u00fan la versi\u00f3n se encuentran en uno u otro lugar. Por ejemplo en las versiones B+ y 2 est\u00e1 en el borde izquierdo justo debajo de los LEDs de actividad y encendido:</p> <p></p> <p>En la versi\u00f3n 3 est\u00e1 desplazado a la derecha del GPIO:</p> <p></p> <p>Pues bien, s\u00f3lo hay que soldar un par de pines a esas dos conexiones:</p> <p></p> <p>En esos pines lo ideal ser\u00eda enchufar un conector de pin hembra doble como \u00e9ste:</p> <p></p> <p>Hasta que me haga con \u00e9l he improvisado la conexi\u00f3n con unos terminales de empalme aplastados:</p> <p></p> <p>En el otro extremo de los cables se puede conectar cualquier tipo de interruptor o mejor un pulsador. Por ejemplo utilic\u00e9 un tactile switch que me sobr\u00f3 del montaje de la PiGRRL 2:</p> <p></p> <p>Se puede situar en la caja haciendo un agujero en un lugar que no interfiera con los componentes altos de la Raspberry y pegarlo con cola caliente:</p> <p></p> <p>Desde fuera el resultado final es el que puede verse en la imagen de cabecera del post.</p> <p>El pulsador en realidad es un Reset. De hecho viene bien tambi\u00e9n en caso de un bloqueo de Kodi. As\u00ed, el apagado de la Raspberry tendremos que hacerlo de forma l\u00f3gica. Para ello se puede utilizar el men\u00fa \"Apagar\" de Kodi (abajo a la izquierda en la pantalla principal). En mi caso incluso se apaga el televisor ya que Kodi debe enviar la orden a trav\u00e9s del HDMI. Con esto la Raspberry queda apagada. S\u00f3lo queda el consumo residual del alimentador microUSB, pero supongo que si es medianamente inteligente ser\u00e1 despreciable. Luego a la hora de encender s\u00f3lo tengo que pulsar el switch. Tambi\u00e9n en mi caso se enciende autom\u00e1ticamente el televisor a los 2 \u00f3 3 segundos de haber pulsado el switch y aparece el interfaz Kodi en pantalla (en una Raspberry Pi 2).</p>"},{"location":"2016-12-06-raspi3-kodi.html","title":"Raspberry Pi 3 + KODI","text":"<p>Lo que sigue es una versi\u00f3n simplificada del montaje de Kodi sobre Raspberry Pi descrito en un post anterior. Dado que la versi\u00f3n 3 de Raspberry Pi incluye un adaptador Wifi, no ser\u00e1 necesario a\u00f1adirlo. Prescindiendo tambi\u00e9n del decodificador TDT, el concentrador USB deja de ser necesario, resultando en conjunto una instalaci\u00f3n m\u00e1s sencilla y econ\u00f3mica. En el post anterior hac\u00eda m\u00e1s hincapi\u00e9 en la configuraci\u00f3n del decodificador TDT. Aqu\u00ed nos centraremos m\u00e1s en el propio Kodi.</p>"},{"location":"2016-12-06-raspi3-kodi.html#elementos-necesarios","title":"Elementos necesarios","text":"<ul> <li>Raspberry Pi 3: En Raspipc.es o en PCComponentes</li> <li>Tarjeta de memoria, recomendable m\u00ednimo 16GB. Aunque servir\u00eda una de 4GB, al ser un media center, podr\u00eda ser necesaria cierto espacio libre para cachear contenidos. Lo que s\u00ed es importante es que la tarjeta sea lo m\u00e1s r\u00e1pida posible. Class 10 como m\u00ednimo.</li> <li>Mando si nuestra tele no soporta el protocolo CEC.</li> </ul>"},{"location":"2016-12-06-raspi3-kodi.html#mando-o-control-remoto","title":"Mando o control remoto","text":"<p>Normalmente los televisores de hasta 8 a\u00f1os soportan el protocolo CEC que permite comandar dispositivos conectados por HDMI desde el mismo mando. En mi caso (un Sony KDL 40U4000) para que empezara a funcionar tuve que pulsar una tecla del mando llamada \"SYNC MENU\". En otras marcas me consta que se llama de otra forma. Si nuestro televisor no lo soporta, se puede utilizar un rat\u00f3n/teclado inal\u00e1mbricos o adquirir un mando de los muchos que hay previstos para esta funci\u00f3n (ejemplo). Por \u00faltimo est\u00e1 la opci\u00f3n de utilizar algunas aplicaciones m\u00f3viles como:</p> <ul> <li>Yatse, the Kodi Remote</li> <li>Kore, Official Remote for Kodi</li> </ul>"},{"location":"2016-12-06-raspi3-kodi.html#instalacion","title":"Instalaci\u00f3n","text":"<p>El proceso para la instalaci\u00f3n de Kodi ser\u00eda:</p> <ol> <li>Bajar OpenELEC de aqu\u00ed</li> <li> <p>Instalar con una utilidad de flasheo de tarjetas como por ejemplo Etcher. Desde Linux puede hacerse con el siguiente comando (sustituyendo el <code>/dev</code> por el que corresponda; en el post anterior hay m\u00e1s detalles sobre esto):</p> <pre><code>gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M\n</code></pre> </li> <li> <p>Pinchar en Raspberry y conectar. El primer arranque es m\u00e1s lento ya que se redimensiona la partici\u00f3n principal de la tarjeta de memoria para aprovechar toda su superficie.</p> </li> <li>En la actualidad (2016-12-06) aparece un mensaje de error al principio indicando que el Add-on \"TheAudioDB\" es incompatible o est\u00e1 roto en el repositorio. De momento responderemos que no a la pregunta de desactivarlo, ya que al lograr conectividad a la red muchos de los add-ons se actualizar\u00e1n, pudiendo solucionarse el problema por si mismo.</li> <li> <p>Aparece un asistente de configuraci\u00f3n. Los pasos m\u00e1s importantes son:</p> <ol> <li>Networking: Si vamos a conectar por Wifi habr\u00e1 que seleccionar y configurar el punto de acceso.</li> <li>Sharing and Remote Access: Aunque esto ser\u00e1 m\u00e1s \u00fatil para los que se desenvuelvan bien en Linux, se recomienda activar el servicio SSH. Nos permitir\u00e1 por ejemplo explorar el sistema de archivos de la Raspberry con clientes como Filezilla.</li> </ol> </li> </ol>"},{"location":"2016-12-06-raspi3-kodi.html#configuracion","title":"Configuraci\u00f3n","text":"<p>Una vez finalizado el asistente, el sistema ya es funcional, pero vamos a repasar algunos ajustes:</p> <ol> <li> <p>Acudimos a la ruta: <code>System &gt; Settings &gt; Appearance &gt; International</code> y cambiamos lo siguiente:</p> <ul> <li><code>Language</code>: Spanish (a partir de ahora las indicaciones de rutas de men\u00fa cambian consecuentemente del ingl\u00e9s al espa\u00f1ol)</li> <li><code>Regi\u00f3n</code>: Espa\u00f1a (24 horas)</li> <li><code>Distribuciones de teclado</code>: Spanish QWERTY (hay que deseleccionar el English QWERTY adem\u00e1s)</li> <li><code>Pa\u00eds del huso horario</code>: Spain</li> </ul> </li> <li> <p>Acudimos a la ruta: <code>Sistema &gt; OpenELEC &gt; Sistema</code> y cambiamos lo siguiente:</p> <ul> <li><code>Teclado &gt; Disposici\u00f3n de teclas</code>: es</li> </ul> </li> </ol>"},{"location":"2016-12-06-raspi3-kodi.html#origenes-de-datos","title":"Or\u00edgenes de datos","text":"<p>Si tenemos fuentes de archivos en casa, como pueda ser un NAS o un ordenador en la misma red, hay que crear accesos para dichas fuentes en las distintas secciones que hay para los contenidos (M\u00fasica, V\u00eddeos e Im\u00e1genes). Kodi permite adem\u00e1s sincronizar los metadatos de esos archivos con varias bases de datos en internet, de manera que podremos ver sinopsis, car\u00e1tulas y en general informaci\u00f3n enriquecida asociada a los contenidos. Por ejemplo as\u00ed se har\u00eda para una carpeta compartida que contuviera pel\u00edculas:</p> <ol> <li>Entramos en la secci\u00f3n <code>V\u00eddeos &gt; Archivos</code>.</li> <li>Seleccionamos la opci\u00f3n <code>A\u00f1adir v\u00eddeos...</code>.</li> <li>Aparece el cuadro de di\u00e1logo titulado <code>A\u00f1adir fuente de v\u00eddeo</code> en el que pulsamos el bot\u00f3n <code>Buscar</code>.</li> <li>Emerge por la derecha de la pantalla un listado que nos permite explorar el propio sistema de archivos de la Raspberry (opci\u00f3n <code>Directorio de inicio</code>) y los distintos protocolos de descubrimiento de red que Kodi soporta. El m\u00e1s habitual ser\u00e1 <code>Red Windows (SMB)</code>, aunque si tenemos un NAS o equipo con Linux, puede ser m\u00e1s conveniente el <code>Network File System (NFS)</code> por ejemplo. Seleccionamos lo que corresponda.</li> <li>Dependiendo del protocolo elegido y de la configuraci\u00f3n del mismo que tengamos en el origen de datos, nos aparecer\u00e1 la fuente o tendremos que introducirla a mano. Tambi\u00e9n podr\u00e1 o no requerirnos credenciales de acceso a la fuente.</li> <li>Una vez seleccionada la fuente volveremos al cuadro de di\u00e1logo titulado <code>A\u00f1adir fuente de v\u00eddeo</code> donde daremos nombre a la fuente en la parte inferior y pulsaremos el bot\u00f3n <code>OK</code>.</li> <li> <p>Aparecer\u00e1 otro cuadro de di\u00e1logo con el t\u00edtulo <code>Establecer el contenido</code>. En \u00e9l lo que tenemos que hacer es seleccionar el tipo de contenido arriba a la izquierda por medio de las peque\u00f1as flechas. Las opciones son:</p> <ul> <li><code>Videoclips</code>: Para v\u00eddeos musicales.</li> <li><code>Series</code></li> <li><code>Pel\u00edculas</code></li> </ul> </li> <li> <p>Para cada uno de ellos se selecciona a la derecha un scraper que es una base de datos en internet con metainformaci\u00f3n. Por defecto s\u00f3lo contamos con uno, aunque se pueden activar m\u00e1s por medio de add-ons.</p> </li> </ol> <p>Al terminar esta configuraci\u00f3n, veremos una nueva secci\u00f3n dedicada a las pel\u00edculas en el men\u00fa principal de Kodi.</p> <p>Para sacar verdadero provecho de Kodi, hay que conocer e instalar extensiones o add-ons. No es el prop\u00f3sito de esta gu\u00eda y hay sitios enteros dedicados a enumerarlos y a proporcionar instrucciones detalladas de instalaci\u00f3n como los siguientes:</p> <ul> <li>https://howtomediacenter.com/es</li> <li>http://mundokodi.com/</li> <li>http://kodiaddonstv.com/</li> </ul>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html","title":"Raspberry Pi 3 + KODI 16 + Tvheadend","text":"<p>Nota: Este post es una especie de actualizaci\u00f3n de este otro que correspond\u00eda a la versi\u00f3n 6.0.3 de OpenELEC (Kodi 15). Si est\u00e1s usando esa versi\u00f3n, utiliza el post anterior en lugar de \u00e9ste.</p> <p>A continuaci\u00f3n se describe el montaje de un media center ejecut\u00e1ndose sobre Raspberry Pi 3 basado en la distribuci\u00f3n OpenELEC que implementa de forma muy ligera el software media center Kodi (anteriormente llamado XBMC). Se incorpora un decodificador TDT gestionado con el software Tvheadend.</p> <p>En caso de tener el router cerca y poder llevar un cable ethernet hasta la Raspberry Pi se recomienda, ya que ser\u00e1 habitual consumir contenidos pesados por red.</p> <p>Para el airmouse o teclado/rat\u00f3n inal\u00e1mbrico hay alternativas:</p> <ul> <li>Aplicaciones para el m\u00f3vil: Kore o Yatse</li> <li>Mando a distancia del TV: Si nuestro TV soporta el protocolo CEC, puede comandar Kodi a trav\u00e9s del cable HDMI</li> </ul>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#elementos-necesarios","title":"Elementos necesarios","text":"<p>Empezamos con la lista de piezas que vamos a necesitar.</p>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#hardware","title":"Hardware","text":"<ul> <li>Raspberry Pi 3: En Raspipc.es o en Pccomponentes.com</li> <li>Tarjeta microSD: En Raspipc.es o en Amazon.es</li> <li>Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es</li> <li>Cable HDMI. Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente.</li> <li>Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es</li> </ul>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#software","title":"Software","text":"<ul> <li>OpenELEC para Raspberry Pi 2</li> <li>Licencia MPEG-2: Necesaria para reproducir la se\u00f1al TDT.</li> </ul>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion","title":"Instalaci\u00f3n","text":"<p>A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques.</p>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-openelec","title":"Instalaci\u00f3n OpenELEC","text":"<p>Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena.</p> <ol> <li>Abrimos un terminal.</li> <li> <p>Bajamos la imagen de OpenELEC para Raspberry Pi 2:</p> <pre><code>$ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-7.0.1.img.gz\n</code></pre> </li> <li> <p>Insertamos la tarjeta microSD en el lector de tarjetas del ordenador.</p> </li> <li> <p>Averiguamos la ruta del dispositivo de la tarjeta:</p> <pre><code>$ df -h\nS.ficheros             Tama\u00f1o Usados  Disp Uso% Montado en\n/dev/sda3                 61G    44G   14G  76% /\nnone                     4,0K      0  4,0K   0% /sys/fs/cgroup\nudev                     1,9G    12K  1,9G   1% /dev\ntmpfs                    390M   1,3M  389M   1% /run\nnone                     5,0M      0  5,0M   0% /run/lock\nnone                     2,0G    27M  1,9G   2% /run/shm\nnone                     100M    84K  100M   1% /run/user\n/dev/mmcblk0p2           3,4G   1,6M  3,4G   1% /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191\n/dev/mmcblk0p1           256M   104M  153M  41% /media/edumoreno/1765-7DD1\n</code></pre> </li> <li> <p>La mejor forma de averiguar los dispositivos correctos es ejecutar <code>df -h</code> antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo <code>/dev/mmcblk0</code> (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer <code>/dev/sdb1</code> y <code>/dev/sdb2</code> por ejemplo, lo que indicar\u00eda que el dispositivo es <code>/dev/sdb</code>).</p> </li> <li> <p>Desmontamos las particiones montadas de la tarjeta (en el ejemplo son dos, pero en una tarjeta nueva lo normal es que s\u00f3lo sea una):</p> <pre><code>$ sudo umount /dev/mmcblk0p1\n$ sudo umount /dev/mmcblk0p2\n</code></pre> </li> <li> <p>Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2:</p> <pre><code>$ gunzip OpenELEC-RPi2.arm-7.0.1.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M\n$ sudo sync\n</code></pre> </li> </ol>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#conexion-de-piezas","title":"Conexi\u00f3n de piezas","text":"<p>Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT a uno de los puertos USB de la Raspberry Pi y el cable de antena al propio adaptador. Finalmente alimentamos la Raspberry el t\u00edpico alimentador microUSB. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi.</p> <p>A partir de ahora trabajaremos con Kodi para configurar una serie de cosas.</p>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#configuracion-kodi","title":"Configuraci\u00f3n Kodi","text":"<p>El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2.</p> <p>Si vamos a conectar por Wifi y no lo hemos hecho durante el asistente inicial, hay que acudir a la siguiente ruta para conectar a nuestro punto de acceso:</p> <pre><code>Sistema / OpenELEC / Conexiones / engancho mi AP\n</code></pre>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-de-tvheadend","title":"Instalaci\u00f3n de TVheadend","text":"<p>Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT:</p> <pre><code>Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar\nSistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar\nSistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar\nSistema / Ajustes / TV / General / Activado\n</code></pre>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#configuracion-de-tvheadend","title":"Configuraci\u00f3n de Tvheadend","text":"<p>Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981</p> <p>La IP de la raspberry la podremos averiguar acudiendo a la ruta:</p> <pre><code>Sistema / OpenELEC / Conexiones\n</code></pre> <p>Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil.</p> <p>Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores:</p> <ul> <li>Realtek RTL2832</li> <li>Siano Mobile Digital MDTV Receiver</li> </ul> <p>El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero <code>/etc/modprobe.d/smsmdtv.conf</code> con el siguiente contenido:</p> <pre><code>options smsmdtv default_mode=4\n</code></pre> <p>Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales:</p> <pre><code>Configuration / General / Language settings / Available / Spanish; Castilian -&gt; Selected / Save configuration\nConfiguration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save\nConfiguration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create\nConfiguration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante)\nConfiguration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save\nConfiguration / DVB Inputs / Networks / TDT / Force Scan\nConfiguration / DVB Inputs / Muxes (observar evoluci\u00f3n del escaneo)\n</code></pre> <p>Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes:</p> <p></p> <p>Todos ellos se han introducido con los siguientes par\u00e1metros:</p> <ul> <li>Bandwidth: 8MHz</li> <li>Constellation: QAM/64</li> <li>Transmission Mode: 8k</li> <li>Resto de par\u00e1metros: AUTO</li> </ul> <p>Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas <code>Scan Status</code> y <code>Scan Result</code> del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n <code>Map All</code> que se encuentra en la ruta:</p> <pre><code>Configuration / DVB Inputs / Services / Map All / Check availability / Map\n</code></pre> <p>Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna <code>Number</code>:</p> <pre><code>Configuration / Channel/EPG / Channels\n</code></pre> <p>Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n <code>Save</code>.</p>"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-licencia-mpeg-2","title":"Instalaci\u00f3n licencia MPEG-2","text":"<p>Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos:</p> <ol> <li> <p>Conectamos por SSH con la Raspberry (password = <code>openelec</code>):</p> <pre><code>$ ssh root@ip-de-raspberry\n</code></pre> </li> <li> <p>Obtenemos el n\u00famero de serie:</p> <pre><code>OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial\nSerial      : 0000000029bcaeeb\n</code></pre> </li> <li> <p>Adquirimos la licencia acudiendo a la Raspberry Pi Store.</p> </li> <li>Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry.</li> <li>Apagamos Kodi/OpenELEC desde men\u00fa.</li> <li>Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD.</li> <li>Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el <code>config.txt</code>. Casi al final hay una serie de claves que comienzan por <code>decode_</code>. La primera de ellas es <code>decode_MPG2</code>. Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry.</li> </ol> <p>FIN</p>"},{"location":"2018-05-05-otto.html","title":"Otto DIY","text":"<p>En este art\u00edculo se detallan las piezas hardware, software e informaci\u00f3n conveniente para montar y poner en marcha el robot Otto.</p>"},{"location":"2018-05-05-otto.html#enlaces","title":"Enlaces","text":"<ul> <li> <p>OttoDIY:</p> <ul> <li>OttoDIY/DIY - Github</li> <li>OttoDIY/DIY - Instructables</li> <li>OttoDIY/DIY - Thingiverse</li> </ul> </li> <li> <p>OttoDIY+:</p> <ul> <li>OttoDIY/PLUS - Github</li> <li>OttoDIY/PLUS - Instructables</li> <li>OttoDIY/PLUS - Thingiverse</li> </ul> </li> </ul>"},{"location":"2018-05-05-otto.html#componentes","title":"Componentes","text":""},{"location":"2018-05-05-otto.html#ottodiy","title":"OttoDIY","text":"<ul> <li>Cable de pin hembra-hembra</li> <li>Pulsador ON/OFF</li> <li>Portapilas AAx4</li> <li>Shield Arduino Nano</li> <li>M\u00f3dulo sensor Ultrasonidos HC-SR04</li> <li>Servo SG90: 4 unidades</li> <li>Zumbador 5V</li> <li>Arduino Nano 328p</li> </ul>"},{"location":"2018-05-05-otto.html#ottodiy_1","title":"OttoDIY+","text":"<ul> <li>Pulsaodor t\u00e1ctil TTP223B: 3 unidades</li> <li>M\u00f3dulo Bluetooth HC-05</li> <li>Matriz LED MAX7219</li> </ul>"},{"location":"2018-05-05-otto.html#montaje","title":"Montaje","text":"<p>Los STLs de las piezas impresas se encuentran en el repositorio GitHub dentro del directorio 3D print.</p> <p>Para el montaje seguir el PDF incluido en la ra\u00edz del repositorio GitHub (en el momento de escribir este art\u00edculo era la versi\u00f3n 07).</p>"},{"location":"2018-05-05-otto.html#calibracion","title":"Calibraci\u00f3n","text":"<p>Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot:</p> <pre><code>//-----------------------------------------------------------------\n//-- Easy calibration for Otto DIY\n//-- CC BY SA (http://ottodiy.com)\n//--  Javier Isabel, 02/06/2015\n//-- VERY IMPORTANT only calibrate ONE TIME per board!to avoid damage EEPROM memory\n//-----------------------------------------------------------------\n#include &lt;Otto.h&gt;\n#include &lt;Servo.h&gt;\n#include &lt;Oscillator.h&gt;\n#include &lt;EEPROM.h&gt;\n\n//-- First step: Configure the pins where the servos are attached\n/*\n         ---------------\n        |     O   O     |\n        |---------------|\nYR 3==&gt; |               | &lt;== YL 2\n         ---------------\n            ||     ||\n            ||     ||\nRR 5==&gt;   -----   ------  &lt;== RL 4\n         |-----   ------|\n*/\n\n#define PIN_YL 2\n#define PIN_YR 3\n#define PIN_RL 4\n#define PIN_RR 5\n\n#define TRIM_YL 3\n#define TRIM_YR 9\n#define TRIM_RL -3\n#define TRIM_RR 6\n\nOtto Otto;\n\nvoid setup() {\n  Otto.init(PIN_YL, PIN_YR, PIN_RL, PIN_RR, false);\n  Otto.setTrims(TRIM_YL, TRIM_YR, TRIM_RL, TRIM_RR); //change Trim \"offset values\" gradually until Otto is completely straight (90\u00ba)\n  // Otto.saveTrimsOnEEPROM(); //use only after completely straight(90\u00ba), delete this line after for further programming\n}\n\nvoid loop() { //test comparing before &amp; after function\n  Otto.home();\n}\n</code></pre> <p>Por medio de ensayo/error identificar los valores de <code>TRIM_RR</code>, <code>TRIM_RL</code>, <code>TRIM_YR</code> y <code>TRIM_YL</code> que hacen que las cuatro articulaciones queden perfectamente cuadradas. Cuando se consiga, descomentar la l\u00ednea que contiene el comando <code>Otto.saveTrimsOnEEPROM();</code> y ejecutar una vez m\u00e1s para que se almacenen los valores en la EEPROM. A partir de entonces, todos los sketches que utilicen la librer\u00eda Otto y que inicialicen ese objeto por medio de la funci\u00f3n <code>init</code> poniendo <code>true</code> en el quinto argumento, cargar\u00e1n estos valores de la calibraci\u00f3n de la EEPROM y por tanto comenzar\u00e1n con el robot bien encuadrado.</p> <p>En el repositorio hay sketches que no se basan en la librer\u00eda Otto sino que gestionan los servos directamente. En estos casos la gesti\u00f3n del trim tambi\u00e9n se har\u00e1 directamente, ya que desafortunadamente las posiciones de los trim en la EEPROM no coinciden con los que hace la librer\u00eda Otto, para evitar tener que regrabar sus valores en la EEPROM cada vez que pasemos de un tipo a otro de sketch. Por ejemplo en el sketch Otto_smooth_criminal, que no utiliza la librer\u00eda Otto, los trim se leen de la EEPROM en orden inverso. Por tanto, ser\u00e1 mejor desactivar su lectura y escribir los valores de trim directamente en el c\u00f3digo. As\u00ed:</p> <pre><code>#define EEPROM_TRIM false\n// Activate to take callibration data from internal memory\n#define TRIM_RR 6\n#define TRIM_RL -3\n#define TRIM_YR  9\n#define TRIM_YL 3\n</code></pre>"},{"location":"2018-05-05-otto.html#programacion","title":"Programaci\u00f3n","text":"<p>De entre los varios sketches de ejemplo que vienen en el repositorio, el m\u00e1s pr\u00e1ctico para empezar a hacer una programaci\u00f3n personalizada de Otto es el <code>Otto_BASIC</code>. En los comentarios que hay al principio se describen las funciones b\u00e1sicas de la librer\u00eda Otto:</p> <pre><code>/*SOUNDS******************\n * S_connection  S_disconnection  S_buttonPushed S_mode1 S_mode2 S_mode3 S_surprise S_OhOoh  S_OhOoh2  S_cuddly\n * S_sleeping  S_happy S_superHappy S_happy_short S_sad S_confused S_fart1 S_fart2  S_fart3\n */\n/*MOVEMENTS LIST**************\n * dir=1---&gt; FORWARD/LEFT\n * dir=-1---&gt; BACKWARD/RIGTH\n * T : amount of movement. HIGHER VALUE SLOWER MOVEMENT usually 1000 (from 600 to 1400)\n * h: height of mov. around 20\n     jump(steps=1, int T = 2000);\n     walk(steps, T, dir);\n     turn(steps, T, dir);\n     bend (steps, T, dir); //usually steps =1, T=2000\n     shakeLeg (steps, T, dir);\n     updown(steps, T, HEIGHT);\n     swing(steps, T, HEIGHT);\n     tiptoeSwing(steps, T, HEIGHT);\n     jitter(steps, T, HEIGHT); (small T)\n     ascendingTurn(steps, T, HEIGHT);\n     moonwalker(steps, T, HEIGHT,dir);\n     crusaito(steps, T, HEIGHT,dir);\n     flapping(steps, T, HEIGHT,dir);\n/*GESTURES LIST***************\nOttoHappy OttoSuperHappy  OttoSad   OttoSleeping  OttoFart  OttoConfused OttoLove  OttoAngry\nOttoFretful OttoMagic  OttoWave  OttoVictory  OttoFail*/\n</code></pre> <p>En <code>setup</code> se hace una inicializaci\u00f3n b\u00e1sica de la librer\u00eda Otto y se emite un sonido por el buzzer. Luego en el <code>loop</code> se ha programado una sencilla funci\u00f3n para que Otto camine hacia delante hasta que localice un obst\u00e1culo a menos de 15cm y d\u00e9 unos pasos hacia atr\u00e1s y gire.</p> <pre><code>//-- Function to avoid obstacles\nvoid obstacleMode(){\n      distance = Otto.getDistance();\n      if(distance&lt;15){\n          Otto.sing(S_surprise);\n               Otto.walk(2,1300,-1);\n               Otto.turn(3,1000,-1);\n             delay(50);\n        }\n        else{\n          Otto.walk(2,1000,1);\n        }\n}\n</code></pre> <p>Es \u00fatil aprovechar la funcionalidad del sensor de distancia para disparar el comportamiento de Otto que queremos programar. En otro caso todo lo que programemos dentro de la funci\u00f3n <code>loop</code> se ejecutar\u00e1 sin parar. As\u00ed por ejemplo, imitando la funci\u00f3n <code>obstacleMode</code>, un ejemplo de <code>loop</code> en el que haremos que cuando pongamos la mano delante, Otto avance un par de pasos, haga el moonwalk hacia la derecha, d\u00e9 un peque\u00f1o salto y se detenga ejecutando el gesto de victoria ser\u00eda:</p> <pre><code>void loop() {\n  distance = Otto.getDistance();\n  if(distance&lt;15){\n    Otto.walk(2,1000,1);\n    Otto.home();\n    Otto.moonwalker(3, 1000, 25, -1);\n    Otto.home();\n    Otto.jump(1, 1000);\n    Otto.home();\n    Otto.playGesture(OttoVictory);\n    Otto.home();\n  } else {\n    Otto.home();\n  }\n}\n</code></pre>"},{"location":"2018-10-19-crankshaft.html","title":"Crankshaft - AndroidAuto sobre Raspberry Pi","text":"<p>Actualizaci\u00f3n 2019-07-07</p> <p>Tras una actualizaci\u00f3n de los Google Play Services a principios de julio de 2019, la respuesta t\u00e1ctil de la pantalla durante la ejecuci\u00f3n de OpenAuto dej\u00f3 de funcionar. Est\u00e1 reportado como issue #352 en el repositorio de Crankshaft. En este post se ofrece una posibilidad para superar el problema hasta que aparezca una release que integre la soluci\u00f3n.</p> <p>Actualizaci\u00f3n 2019-07-22</p> <p>Tras unos 9 meses de uso sin problemas, el m\u00f3dulo Car switch de Mausberry Circuits ha dejado de funcionar. Ha coincidido con varios d\u00edas en que he tenido quitada la Raspberry y la pantalla (por el problema con Crankshaft comentado en la actualizaci\u00f3n anterior). Desconozco si habr\u00e1 tenido alguna influencia, pero parece demasiada casualidad. El problema est\u00e1 en el circuito impreso que integra el controlador. El m\u00f3dulo transformador de 12V a 5V funciona bien, por lo que hasta que piense una soluci\u00f3n mejor he retirado el controlador y alimentado la Raspberry directamente con el m\u00f3dulo transformador tomando los 12V de la l\u00ednea de contacto. De esta forma cuando se quita el contacto, la Raspberry se apaga abr\u00faptamente, pero en teor\u00eda el sistema est\u00e1 montado en s\u00f3lo lectura por lo que no deber\u00eda haber problemas.</p> <p></p> <p>Se describe a continuaci\u00f3n el montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D (2012), en sustituci\u00f3n del radio CD que llevaba de serie, para ser utilizada como terminal compatible de AndroidAuto.</p> <p>La pantalla consiste en la oficial t\u00e1ctil de 7\" de la fundaci\u00f3n Raspberry Pi que tiene aproximadamente las medidas del hueco 2DIN que deja el radio CD del coche. Para su sujecci\u00f3n en el hueco de la radio se crean un par de piezas que se fabrican con una impresora 3D.</p>"},{"location":"2018-10-19-crankshaft.html#componentes","title":"Componentes","text":"<ul> <li>Extractor radio</li> <li>Raspberry Pi 3</li> <li>Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi</li> <li>Micr\u00f3fono USB</li> <li>Circuito de alimentaci\u00f3n</li> <li>Tarjeta microSD</li> <li>LED</li> <li>Resistencia 220\u2126</li> <li>4x Tornillo M3x10</li> <li>Cable con conector JST</li> <li>Cables de pin hembra-hembra</li> <li>Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D</li> </ul>"},{"location":"2018-10-19-crankshaft.html#preparacion-sistema","title":"Preparaci\u00f3n sistema","text":"<p>El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed. Transferimos la imagen a la microSD con un programa como Etcher.</p>"},{"location":"2018-10-19-crankshaft.html#retirando-el-radio-cd","title":"Retirando el radio CD","text":"<p>Esto es lo que vamos a perder:</p> <p></p> <p>Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar.</p>"},{"location":"2018-10-19-crankshaft.html#circuito-de-alimentacion","title":"Circuito de alimentaci\u00f3n","text":"<p>La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente.</p> <p></p> <p>Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo).</p> <p>Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n.</p> <p>Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas.</p> <p></p> <p>Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD:</p> <ul> <li>GND (cable negro)</li> <li>+12V constantes (cable amarillo)</li> <li>+12V contacto (cable rojo)</li> </ul> <p>Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os.</p> <p>En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo.</p> <p>Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry.</p> <p>El resultado final es \u00e9ste:</p> <p></p> <p>Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja.</p> <p>Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen.</p> <p></p> <p></p> <p>Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup.</p> <p>Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta <code>/etc/switch.sh</code>, d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero <code>/etc/rc.local</code> (justo antes del <code>exit 0</code>) para que se ejecute en el arranque:</p> <pre><code>/etc/switch.sh &amp;\n</code></pre> <p>El script es \u00e9ste:</p> <pre><code>#!/bin/bash\n\n#this is the GPIO pin connected to the lead on switch labeled OUT\nGPIOpin1=23\n\n#this is the GPIO pin connected to the lead on switch labeled IN\nGPIOpin2=24\n\n#Enter the shutdown delay in minutes\ndelay=0\n\necho \"$GPIOpin1\" &gt; /sys/class/gpio/export\necho \"in\" &gt; /sys/class/gpio/gpio$GPIOpin1/direction\necho \"$GPIOpin2\" &gt; /sys/class/gpio/export\necho \"out\" &gt; /sys/class/gpio/gpio$GPIOpin2/direction\necho \"1\" &gt; /sys/class/gpio/gpio$GPIOpin2/value\nlet minute=$delay*60\nSD=0\nSS=0\nSS2=0\nwhile [ 1 = 1 ]; do\npower=$(cat /sys/class/gpio/gpio$GPIOpin1/value)\nuptime=$(&lt;/proc/uptime)\nuptime=${uptime%%.*}\ncurrent=$uptime\nif [ $power = 1 ] &amp;&amp; [ $SD = 0 ]\nthen\nSD=1\nSS=${uptime%%.*}\nfi\n\nif [ $power = 1 ] &amp;&amp; [ $SD = 1 ]\nthen\nSS2=${uptime%%.*}\nfi\n\nif [ \"$((uptime - SS))\" -gt \"$minute\" ] &amp;&amp; [ $SD = 1 ] &amp;&amp; [ $power = 1 ]\nthen\npoweroff\nSD=3\nfi\n\nif [ \"$((uptime - SS2))\" -gt 20 ] &amp;&amp; [ $SD = 1 ]\nthen\nSD=0\nfi\n\nsleep 1\ndone\n</code></pre> <p>En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch:</p> <ul> <li><code>Car Switch: IN  &lt;-&gt; GPIO24 :Raspberry</code></li> <li><code>Car Switch: OUT &lt;-&gt; GPIO23 :Raspberry</code></li> </ul> <p>En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo).</p> <p></p> <p>La instalaci\u00f3n del script se hizo desde un ordenador con Linux montando la tarjeta en el sistema. Para hacerlo sobre el propio Crankshaft en ejecuci\u00f3n hay que tener en cuenta que en las \u00faltimas versiones la microSD est\u00e1 montada en modo de s\u00f3lo lectura para evitar corrupciones de la misma durante apagados repentinos. Para montar en modo escritura hay que ejecutar uno de estos dos comandos en funci\u00f3n de la partici\u00f3n que queramos modificar:</p> <pre><code>crankshaft filesystem boot unlock\ncrankshaft filesystem system unlock\n</code></pre>"},{"location":"2018-10-19-crankshaft.html#montaje-de-raspberry-pi-sobre-pantalla","title":"Montaje de Raspberry Pi sobre pantalla","text":"<p>La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto:</p> <p></p> <p></p> <p>El pineado es como sigue:</p> <ul> <li><code>Pantalla: 5V  &lt;-&gt; PIN#02 :Raspberry</code></li> <li><code>Pantalla: GND &lt;-&gt; PIN#06 :Raspberry</code></li> <li><code>Pantalla: SCL &lt;-&gt; PIN#05 :Raspberry</code></li> <li><code>Pantalla: SDA &lt;-&gt; PIN#03 :Raspberry</code></li> </ul> <p>En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch).</p>"},{"location":"2018-10-19-crankshaft.html#cableado","title":"Cableado","text":"<p>Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente:</p> <ol> <li>Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente:<ul> <li>Toma 12V constantes</li> <li>Toma 12V contacto</li> <li>Toma de masa</li> </ul> </li> <li>Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes:<ul> <li><code>Car Switch: IN  &lt;-&gt; GPIO24 :Raspberry</code></li> <li><code>Car Switch: OUT &lt;-&gt; GPIO23 :Raspberry</code></li> </ul> </li> <li>Conector JST de alimentaci\u00f3n de Raspberry Pi.</li> <li>Micr\u00f3fono USB conectado a Raspberry Pi.</li> <li>Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas.</li> <li>(Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas.</li> </ol>"},{"location":"2018-10-19-crankshaft.html#sujeccion-pantalla-a-consola-coche","title":"Sujecci\u00f3n pantalla a consola coche","text":"<p>Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente:</p> <p>https://www.thingiverse.com/thing:3162930</p> <p>B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar.</p> <p>Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed:</p> <p></p> <p>Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte.</p> <p>A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED.</p> <p></p> <p>La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita.</p> <p></p> <p></p> <p>El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona).</p> <p></p> <p>Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol.</p> <p></p> <p>La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado.</p> <p></p> <p>Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.</p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html","title":"Octoprint en Anet A8","text":"<p>Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint.</p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#imagen-de-sistema","title":"Im\u00e1gen de sistema","text":"<p>Aunque es posible instalar manualmente Octoprint sobre una instalaci\u00f3n Raspbian est\u00e1ndar, existe una im\u00e1gen para grabar directamente sobre la tarjeta microSD llamada OctoPi. Dado que la Raspberry Pi y por tanto su sistema se va dedicar exclusivamente para esta funci\u00f3n, se prefiere esta alternativa.</p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#modelo-de-raspberry-pi-elegido","title":"Modelo de Raspberry Pi elegido","text":"<p>A pesar de que la utilizaci\u00f3n de una Raspberry Pi Zero no est\u00e1 recomendada por problemas de rendimiento que pueden terminar afectando a las impresiones, en mi experiencia no he sufrido ning\u00fan percance y la forma y bajo consumo de la Raspberry Pi Zero (que permite alimentarla desde la misma fuente de la impresora) resulta perfecta para esta instalaci\u00f3n.</p> <p>Sospecho que los posibles problemas est\u00e1n relacionados con el uso de la webcam. Eligiendo la c\u00e1mara adecuada (que soporte MJPG de forma nativa) y no abusando del v\u00eddeo en streaming creo que se deja un margen de seguridad adecuado para poder aprovechar las ventajas de la versi\u00f3n Zero W de la Raspberry Pi.</p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#conexion-serie-entre-anet-a8-y-raspberry-pi","title":"Conexi\u00f3n serie entre Anet A8 y Raspberry Pi","text":"<p>Octoprint se comunica con la impresora por medio de una conexi\u00f3n serie. Esta conexi\u00f3n puede f\u00e1cilmente establecerse a trav\u00e9s de USB. De hecho el puerto serie del microcontrolador Atmel que gobierna la impresora est\u00e1 puenteado a un adaptador serie/USB que hay sobre la placa (CH340G). Utilizar esta conexi\u00f3n USB resulta muy aparatoso por el tipo de conectores que implica, as\u00ed que se ha preferido liberar el puerto serie del microcontrolador para poder utilizarlo directamente.</p> <p>Estudiando el esquem\u00e1tico de la placa se ve que las siguientes secciones son las implicadas en este asunto (se han marcado en azul las zonas de m\u00e1s inter\u00e9s):</p> <p></p> <p>Podemos ver c\u00f3mo el puerto serie del microcontrolador (pines <code>AOFI</code> y <code>AIFO</code>) est\u00e1 puenteado al chip CH340G (U6) por medio de un par de resistencias de 0\u2126 que act\u00faan como puente. Tendremos que retirar de la placa dichas resistencias R52 y R53.</p> <p>Una vez hecho, soldaremos unos pines en la ubicaci\u00f3n J8 de la placa (al menos la m\u00eda ven\u00eda con los agujeros en la PCB sin los pines soldados). En esta foto de alta resoluci\u00f3n de la placa podemos ver bien tanto la ubicaci\u00f3n de los puentes J8 como las resistencias que hay que retirar:</p> <p></p> <p>S\u00f3lo queda poner un par de jumpers entre los pines siguientes de J8:</p> <ul> <li>3-5</li> <li>4-6</li> </ul> <p>Con esto conseguimos que el puerto serie del microcontrolador aparezca disponible en el conector J3. Si antes utiliz\u00e1bamos el puerto USB de la PCB para alg\u00fan cometido, hay que entender que al realizar esta modificaci\u00f3n deja de estar disponible, pero tenemos la opci\u00f3n de reactivarlo cambiando los jumpers a la siguiente disposici\u00f3n:</p> <ul> <li>1-3</li> <li>2-4</li> </ul> <p>Como la orientaci\u00f3n de la PCB en la impresora es distinta a la del esquem\u00e1tico, se muestra ahora con claridad el resultado final, es decir c\u00f3mo deben disponerse los dos jumpers para que el puerto serie aparezca en el conector J3 y el hueco dejado por las resistencias R52 y R53:</p> <p></p> <p>Como vemos los puentes deben apuntar hacia el r\u00f3tulo BLE. Seguramente se designa as\u00ed porque la sustituci\u00f3n habitual del puerto USB ser\u00eda un adaptador Bluetooth que podr\u00eda adaptarse al conector J3.</p> <p>S\u00f3lo queda localizar en el conector J3 los pines del puerto serie del microcontrolador recien redirijidos y los de alimentaci\u00f3n (5V y GND). En este punto podr\u00edamos conectar la Raspberry Pi con simples cables de pin, pero dada la cercan\u00eda en el GPIO de la Raspberry Pi del puerto serie y de los terminales de alimentaci\u00f3n, me decid\u00ed a preparar una peque\u00f1a placa adaptadora para el conector J3 de la PCB de la impresora.</p> <p>El conector J3 de la impresora seg\u00fan el esquem\u00e1tico tiene el siguiente pineado:</p> <p></p> <p>De nuevo es necesario orientar el conector correctamente para interpretar el esquem\u00e1tico. Para evitar confusiones se indica a continuaci\u00f3n la numeraci\u00f3n de los pines sobre el conector:</p> <p></p> <p>La conexi\u00f3n de estos pines con los del GPIO de la Raspberry Pi ser\u00e1 as\u00ed:</p> <ul> <li><code>J3: 1 (J3_TX) &lt;-&gt; PIN#08 (GPIO14 UART0_TXD) :Raspberry</code></li> <li><code>J3: 2 (J3_RX) &lt;-&gt; PIN#10 (GPIO15 UART0_RXD) :Raspberry</code></li> <li><code>J3: 4 (+5V)   &lt;-&gt; PIN#04 (5V)               :Raspberry</code></li> <li><code>J3: 8 (GND)   &lt;-&gt; PIN#06 (Ground)           :Raspberry</code></li> </ul> <p></p> <p>Puede generar confusi\u00f3n ver que las conexiones entre ambos conectores son TX-TX y RX-RX, cuando las conexiones TX y RX deben cruzarse. La confusi\u00f3n viene de que en el conector J3 lo que se indica es a d\u00f3nde se debe conectar y no el terminal del puerto serie del microcontrolador. Si tiramos del hilo en el esquem\u00e1tico vemos que por ejemplo el pin 1 del conector J3 sigue la secuencia:</p> <pre><code>J3_TX - AIFO - RXD0\n</code></pre> <p>Por tanto en realidad s\u00ed estamos cruzando las se\u00f1ales.</p> <p>El adaptador realizado es el siguiente:</p> <p></p> <p></p> <p>A continuaci\u00f3n se puede ver soldado sobre la Raspberry:</p> <p></p> <p></p> <p></p> <p>Finalmente montado sobre la PCB de la impresora queda as\u00ed:</p> <p></p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#desactivacion-de-bt-y-activacion-de-puerto-serie","title":"Desactivaci\u00f3n de BT y activaci\u00f3n de puerto serie","text":"<p>La Raspberry Pi Zero W (en Raspberry Pi 3 sucede lo mismo) trae un adaptador Bluetooth que tanto en la distribuci\u00f3n Raspbian como en la im\u00e1gen OctoPi utilizada est\u00e1 conectado precisamente a los pines #08 y #10 a los que hemos conectado el puerto serie de la impresora. Antes de continuar necesitamos liberar esta conexi\u00f3n. Para ello debemos editar el fichero <code>config.txt</code> que hay en la partici\u00f3n <code>boot</code> y a\u00f1adir (al final por ejemplo) lo siguiente:</p> <pre><code>dtoverlay=pi3-disable-bt\n</code></pre> <p>Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos:</p> <pre><code>sudo raspi-config\n</code></pre> <p>All\u00ed acudiremos a la secci\u00f3n <code>Interfacing options &gt; Serial</code> y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1:</p> <ul> <li>Would you like a login shell to be accessible over serial? -&gt; No</li> <li>Would you like the serial port hardware to be enabled?     -&gt; Yes</li> </ul> <p>Reiniciaremos y ya podremos pasar a trabajar sobre la consola web de Octoprint a la que accederemos abriendo en un navegador la IP de la Raspberry.</p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#configuracion-conexion-en-octoprint","title":"Configuraci\u00f3n conexi\u00f3n en Octoprint","text":"<p>Por defecto Octoprint espera encontrar la impresora en un puerto USB de la Raspberry. Al haber cambiado a un puerto serie convencional, tenemos que ayudarle a encontrarlo. Para ello acudimos a Settings (llave inglesa) de Octoprint y en la secci\u00f3n <code>Serial Connection</code> a\u00f1adimos lo siguiente en el cuadro <code>Additional serial ports</code>:</p> <pre><code>/dev/ttyAMA0\n</code></pre> <p></p> <p>Tras esto podremos volver a la ventana principal y seleccionar dicho puerto en el apartado Connection:</p> <p></p> <p>Tras pulsar el bot\u00f3n Connect oiremos c\u00f3mo la impresora reacciona (al menos en la m\u00eda el ventilador de capa se revoluciona unos segundos, aunque tambi\u00e9n puede suceder por el firmware que tengo instalado) y ya podremos empezar a utilizar Octoprint.</p>"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#webcam","title":"Webcam","text":"<p>Un complemento muy bueno para Octoprint es una webcam para poder hacer un mejor seguimiento de las impresiones. Tras haber probado con una webcam convencional conectada por USB (aqu\u00ed se ve una de las ventajas de haberlo dejado libre al conectar la Raspberry a la impresora), me di cuenta de que la c\u00e1mara oficial de Raspberry se puede encontrar barata (4\u20ac) y resulta m\u00e1s adecuada. Adquiriendo dicha c\u00e1mara junto con la versi\u00f3n del cable especial para Raspberry Pi Zero, se puede montar f\u00e1cilmente al chasis de la impresora. En concreto para la Anet A8 se dise\u00f1a esta peque\u00f1a pieza:</p> <p>https://www.thingiverse.com/thing:3142521</p>"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html","title":"Conversi\u00f3n del sitio de Apuntes a MkDocs","text":"<p>Migraci\u00f3n del motor de apuntes de Ruby/Jekyll a Python/MkDocs.</p>"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html#procedimiento","title":"Procedimiento","text":"<ol> <li>Renombro el antiguo repositorio construido con Jekyll de <code>eduardofilo.github.io</code> a <code>eduardofilo.jekyll</code> para dejar libre el repositorio que contendr\u00e1 el nuevo sitio.</li> <li>Creo directorio:     <pre><code>$ mkdir ~/git/eduardofilo.mkdocs\n$ cd ~/git/eduardofilo.mkdocs\n</code></pre></li> <li>Creo entorno Python3 con pipenv:     <pre><code>$ pipenv install --three\n</code></pre></li> <li>Instalo mkdocs, el tema Material y algunas extensiones:     <pre><code>$ pipenv install mkdocs pygments mkdocs-material\n</code></pre></li> <li>Instalo versi\u00f3n beta de m\u00f3dulo pyyaml por un aviso de seguridad que da GitHub sobre la versi\u00f3n 3.13 que se instala normalmente. Para ello a\u00f1ado lo siguiente al fichero <code>Pipfile</code> en la secci\u00f3n <code>[packages]</code>. Tras ello ejecuto <code>pipenv install</code>:     <pre><code>pyyaml = \"&gt;=4.2b1\"\n</code></pre></li> <li>Arranco shell en el entorno:     <pre><code>$ pipenv shell\n</code></pre></li> <li>Creo el proyecto mkdocs desde el directorio anterior:     <pre><code>$ cd ..\n$ mkdocs new eduardofilo.mkdocs\n$ cd eduardofilo.mkdocs\n</code></pre></li> <li>Copio los directorios con los contenidos del sitio Jekyll (<code>cursos</code>, <code>desarrollo</code>, <code>images</code>, <code>proyectos</code>, <code>sistemas</code> y <code>varios</code>) al directorio <code>docs</code>.</li> <li>Configuro el fichero <code>mkdocs.yml</code> con el siguiente contenido:     <pre><code># Project information\nsite_name: Apuntes de eduardofilo\nsite_description: Apuntes varios sobre algunas de las cosas que necesito recordar, principalmente sobre Desarrollo y         Sistemas.\nsite_author: Eduardo Moreno Lamana\n\n# Repository\nrepo_name: 'eduardofilo.mkdocs'\nrepo_url: https://github.com/eduardofilo/eduardofilo.mkdocs\n\n# Configuration\nuse_directory_urls: false\nplugins:\n    - search:\n        lang: ['es']\ntheme:\n    name: material\n    logo: 'images/eduardofilo.png'\n    language: es\n    feature:\n        tabs: true\n    palette:\n        primary: 'deep orange'\n        accent: 'amber'\n\n\n# Customization\nextra:\n    social:\n        - type: github-alt\n          link: https://github.com/eduardofilo\n        - type: twitter\n          link: https://twitter.com/eduardofilo\n        - type: linkedin\n          link: https://linkedin.com/in/edumoreno/\n        - type: tumblr\n          link: https://eduardofilo.es\n        - type: youtube\n          link: https://www.youtube.com/c/EduardoMorenoLamana\n    search:\n        language: 'es'\n    manifest: 'manifest.webmanifest'\n\n# Extensions\nmarkdown_extensions:\n    - codehilite:\n        linenums: true\n    - toc:\n        permalink: True\n    - admonition\n</code></pre></li> <li>Copio todos los ficheros del directorio <code>_posts</code> de Jekyll al directorio <code>docs</code>.</li> <li>Modifico cada uno de los posts que all\u00ed hay de la siguiente manera:<ol> <li>Retiro los delimitadores del YAML, es decir los tres guiones que hay al principio y al final del bloque.</li> <li>Retiro las propiedad <code>layout</code> y <code>published</code> y a\u00f1ado una llamada <code>summary</code>.</li> </ol> </li> <li>Genero estructura de navegaci\u00f3n en bloque <code>nav:</code> al final de <code>mkdocs.yml</code></li> <li>Creo fichero <code>CNAME</code> dentro del directorio <code>docs</code> con el nombre del dominio personalizado.</li> <li>Creo repositorio en GitHub con nombre <code>eduardofilo.github.io</code>.</li> <li>Creo copia de trabajo del repsitorio anterior:     <pre><code>$ cd ~/git\n$ git clone git@github.com:eduardofilo/eduardofilo.github.io.git\n</code></pre></li> <li>Finalmente publico el sitio ejecutando el siguiente comando desde el directorio de trabajo del repositorio anterior (hay que recordar que para que funcione el comando <code>mkdocs</code> hay que haber iniciado el entorno virtual antes con <code>pipenv shell</code> desde el directorio <code>~/git/eduardofilo.mkdocs</code>):     <pre><code>$ cd ~/git/eduardofilo.github.io\n$ mkdocs gh-deploy --config-file ../eduardofilo.mkdocs/mkdocs.yml --remote-branch master\n</code></pre></li> </ol> <p>Falta crear un RSS con el feed que generaba Jekyll antiguamente.</p>"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html#enlaces-documentacion","title":"Enlaces documentaci\u00f3n","text":"<ul> <li>MkDocs Configuration</li> <li>MkDocs Material - Setup</li> <li>MkDocs Material - Reference</li> <li>PyMdown Extensions</li> </ul>"},{"location":"2019-01-29-bloqueo_telsome.html","title":"Bloqueo de llamadas entrantes en Telsome","text":""},{"location":"2019-01-29-bloqueo_telsome.html#enlaces","title":"Enlaces","text":"<ul> <li>C\u00f3mo bloquear llamadas de determinados n\u00fameros</li> <li>Informe detallado de llamadas \u2013 CDR</li> </ul>"},{"location":"2019-01-29-bloqueo_telsome.html#procedimiento","title":"Procedimiento","text":"<p>Vamos a describir c\u00f3mo impedir que se produzca la entrada de una llamada desde un n\u00famero determinado en el servicio de VoIP Telsome. T\u00edpicamente nos interesar\u00e1 esto para bloquear las llamadas comerciales SPAM.</p> <p>Necesitamos el n\u00famero que queremos bloquear. Si no lo recordamos o no tenemos registro de llamadas en el terminal, se puede consultar en la informaci\u00f3n detallada de las llamadas recibidas a trav\u00e9s del servicio. Para ello iniciar sesi\u00f3n en la cuenta Telsome con nuestras credenciales. Una vez dentro, navegar siguiendo la siguiente ruta:</p> <pre><code>Configuraci\u00f3n avanzada &gt; Enlaces r\u00e1pidos &gt; Registro de llamadas\n</code></pre> <p>All\u00ed encontraremos el detalle de todas las llamadas emitidas y recibidas. Una vez localizado el n\u00famero que queremos bloquear, navegaremos siguiendo la ruta:</p> <pre><code>Configuraci\u00f3n avanzada &gt; Extensiones &gt; (clic sobre nuestra extensi\u00f3n) &gt;\nTelefon\u00eda &gt; Reglas de llamadas entrantes\n</code></pre> <p>All\u00ed rellenaremos el peque\u00f1o formulario con el r\u00f3tulo <code>Agregar desv\u00edos</code> sustituyendo el n\u00famero del ejemplo (999888777) por el que nos interese:</p> <p></p> <p>En el formulario, el primer desplegable nos permite elegir el efecto que observar\u00e1 el llamante. En el ejemplo he seleccionado <code>reproductor ocupado</code>, pero tambi\u00e9n servir\u00edan las opciones <code>reproductor congestionado</code> o <code>colgar</code>. Una vez que pulsemos el bot\u00f3n <code>OK</code> se incorporar\u00e1 a la lista inferior y pasar\u00e1 a ser efectiva.</p>"},{"location":"2019-04-20-pong_composite_mod.html","title":"Composite mod en consola Pong","text":"<p>Uno de los mejores recuerdos de la ni\u00f1ez fue recibir esta peque\u00f1a consola como regalo de mi abuela tra\u00edda de un viaje a Canarias a finales de los 70. Nunca dej\u00f3 de funcionar del todo, pero acumul\u00f3 desperfectos como los l\u00f3gicos problemas en los potenci\u00f3metros que contienen los mandos y sobre todo la incomodidad de tener \u00fanicamente una salida de RF o antena para conectar al televisor. La unidad que tengo, por lo que he podido averiguar, fue un modelo que apareci\u00f3 bajo diversas denominaciones. La m\u00eda presenta la marca REGINA y seg\u00fan la caja es el modelo T-338.</p> <p></p> <p>Investigando la modificaci\u00f3n para conseguir una salida de v\u00eddeo compuesto encontr\u00e9 que la consola est\u00e1 basada en el chip AY-3-8500 de General Instruments:</p> <p></p> <p>Este chip tiene una historia interesante. Fue todo un \u00e9xito en la \u00e9poca y es pr\u00e1cticamente seguro encontrar uno de estos chips, sus clones o alguna de sus evoluciones en cualquier consola de juegos tipo Pong de finales de los 70. El fabricante produjo tantas unidades que, aunque no se fabrica desde entonces, a\u00fan hoy es posible encontrarlo nuevo. He conseguido un par para montar alguna unidad desde cero dado que el esquem\u00e1tico es extremadamente sencillo y aparece en la documentaci\u00f3n del integrado.</p> <p></p> <p></p> <p>La se\u00f1al de v\u00eddeo en el patillaje del chip aparece descompuesta en los siguientes 5 pines:</p> <ul> <li>6: Ball output</li> <li>9: Right player output</li> <li>10: Left player output</li> <li>16: Sync output</li> <li>24: Score and field output</li> </ul> <p>Esto es as\u00ed porque exist\u00eda la opci\u00f3n de incorporar un coprocesador de video que permit\u00eda colorear los distintos componentes de la salida (los jugadores, la bola y el resto del campo). El esquem\u00e1tico anterior corresponde a la versi\u00f3n sin este coprocesador y por tanto se limita a sumar las cuatro salidas (sin contar la se\u00f1al de sync) con una puerta l\u00f3gica OR de cuatro entradas (4072). La placa de mi unidad sin embargo difiere del esquem\u00e1tico oficial. Observo que no existe el integrado 4072 con las puertas OR de cuatro entradas:</p> <p></p> <p></p> <p>En su lugar se utilizan los cuatro diodos que marco en la segunda foto. Realmente los diodos son equivalentes a la puerta OR. Una vez localizadas las se\u00f1ales implicadas, era cuesti\u00f3n de encontrar el circuito que las llevara hasta una se\u00f1al de v\u00eddeo compuesto est\u00e1ndar. Hay poco m\u00e1s que hacer que sumarlas y normalizarlas hasta los niveles que se esperan en una se\u00f1al de este tipo. Al haber tantas consolas en el mercado es f\u00e1cil encontrar varias versiones del circuito necesario realizados por otros aficionados. Pongo algunos enlaces a continuaci\u00f3n:</p> <ul> <li>Breathing New (Composite) Life Into a Binatone Pong Console</li> <li>Binatone TV Master MK 4 Composite Video Mod</li> <li>AV modding a pong unit...even possible?</li> <li>Hacking Composite Video into a 1977 Pong Console</li> </ul> <p>Casi todos los art\u00edculos le\u00eddos hacen referencia al mismo esquema de una p\u00e1gina que ya no existe, pero que afortunadamente todo el mundo ha reproducido en sus sitios, cosa que yo hago aqu\u00ed tambi\u00e9n:</p> <p></p> <p>As\u00ed pues, para realizar este circuito necesitaremos los siguientes componentes:</p> <ul> <li>1x 9V \u2013 5V Regulador de tensi\u00f3n 7805</li> <li>2x Resistencia 75\u2126</li> <li>1x Resistencia 750\u2126</li> <li>1x Transistor 2N3904</li> <li>1x Diodo 1N914</li> <li>1x Condensador electrol\u00edtico 100\u03bcF / 16V</li> <li>1x Conector RCA</li> </ul> <p>Utilizaremos una porci\u00f3n de stripboard para montarlo. Lo que sigue es la simulaci\u00f3n del circuito con Fritzing:</p> <p></p> <p>Realmente a la hora de soldar se puede compactar m\u00e1s, pero he ahuecado los componentes para que no se solapen en la visualizaci\u00f3n. Podemos comprobar en la vista esquem\u00e1tica de Fritzing que el circuito es correcto:</p> <p></p> <p>Adjunto el fichero Fritzing por si ayuda con el montaje.</p> <p>\u00c9ste es el resultado en la realidad:</p> <p></p> <p>Lo siguiente es localizar sobre la placa de mi consola los puntos de entrada al circuito. Estudiando un poco las pistas llego a la conclusi\u00f3n de que en mi caso son los siguientes:</p> <p> </p> <p>El punto 2 es donde se reunen las cuatro se\u00f1ales y se suman con los diodos como coment\u00e1bamos antes. Ya s\u00f3lo queda alojar el peque\u00f1o circuito en el interior de la caja. Encuentro hueco en la parte inferior y sujeto la peque\u00f1a placa con cola caliente:</p> <p></p> <p>Para la salida retiro los espadines que sujetaban el viejo cable de antena que sal\u00eda por la parte superior, para hacer hueco a un conector RCA que sujeto agrandando el agujero del cable RF:</p> <p></p> <p>Ya s\u00f3lo queda hacer las conexiones entre todas las piezas y cerrar el conjunto:</p> <p></p> <p>Adem\u00e1s de los componentes para el circuito de modificaci\u00f3n, adquir\u00ed tambi\u00e9n potenci\u00f3metros de 1M\u2126 para sustituir los que llevan los mandos. El resultado:</p> <p>Al conocer el proyecto un amigo me ha pasado su consola de aquella \u00e9poca para realizar una modificaci\u00f3n equivalente. Abri\u00e9ndola encuentro que efectivamente est\u00e1 basada en el mismo integrado, aunque \u00e9sta parece montada con mejores componentes y s\u00ed incluye el integrado con las puertas OR para el sumado de las salidas de v\u00eddeo del chip:</p> <p></p>"},{"location":"2019-07-07-crankshaft-build.html","title":"Compilaci\u00f3n OpenAuto para solucionar touch screen","text":"<p>Tras una reciente actualizaci\u00f3n de los Google Play Services de Android, ha dejado de funcionar el touch screen en Crankshaft. Parece ser que el problema tiene que ver con el uso de la librer\u00eda Protocol Buffers, que ha pasado a ser m\u00e1s estricto en esta \u00faltima versi\u00f3n de los Play Services y parece que no se hab\u00eda implementado de forma rigurosa en OpenAuto.</p> <p>Esta es la issue de Crankshaft donde se trata el tema.</p> <p>La soluci\u00f3n pasa por compilar un fork de OpenAuto que uno de los usuarios ha preparado. A continuaci\u00f3n se describe el paso a paso para hacer la compilaci\u00f3n. El punto de partida es una instalaci\u00f3n de la \u00faltima versi\u00f3n de Crankshaft en el momento de escribir esto (la <code>NG Alpha-5 2019-06-08</code>).</p> <ol> <li>Activamos modo DEV (necesario por lo menos para que el sistema se monte en modo lectura/escritura) montando la SD en el ordenador y cambiando el par\u00e1metro <code>DEV_MODE</code> a 1 (<code>DEV_MODE=1</code>) en el fichero <code>/boot/crankshaft/crankshaft_env.sh</code>. (fuente)</li> <li>Montamos la microSD, arrancamos, averiguamos la IP (con Fing por ejemplo) y conectamos por SSH (user: pi; pwd: raspberry).</li> <li> <p>Actualizamos la librer\u00eda de paquetes e instalamos algunos necesarios:</p> <pre><code>$ sudo apt-get update\n$ sudo apt-get upgrade\n$ sudo apt-get install -y libboost-all-dev libusb-1.0.0-dev cmake libprotobuf-dev protobuf-c-compiler protobuf-compiler librtaudio-dev\n</code></pre> </li> <li> <p>Bajamos el branch <code>development</code>del fork de aasdk de abraha2d:</p> <pre><code>$ cd ~\n$ git clone -b development https://github.com/abraha2d/aasdk.git\n</code></pre> </li> <li> <p>(OPCIONAL) En el momento de escribir esta gu\u00eda compil\u00e9 el commit <code>361380e7d74ddeaf17afd8cd89882001bb62c77e</code>. Si nuevos commits provocan problemas, hacer el siguiente checkout:</p> <pre><code>$ cd aasdk\n$ git checkout 361380e7d74ddeaf17afd8cd89882001bb62c77e\n</code></pre> </li> <li> <p>Compilamos aasdk:</p> <pre><code>$ cd ~\n$ mkdir aasdk_build\n$ cd aasdk_build\n$ cmake -DCMAKE_BUILD_TYPE=Release ../aasdk\n$ make\n</code></pre> </li> <li> <p>Instalamos algunos paquetes necesarios para compilar <code>ilclient</code>:</p> <pre><code>$ sudo apt-get install -y libraspberrypi-doc libraspberrypi-dev\n$ cd /opt/vc/src/hello_pi/libs/ilclient\n$ make\n</code></pre> </li> <li> <p>Bajamos el branch <code>crankshaft-ng</code> del fork de openauto de abraha2d:</p> <pre><code>$ cd ~\n$ git clone -b crankshaft-ng https://github.com/abraha2d/openauto.git\n</code></pre> </li> <li> <p>(OPCIONAL) En el momento de escribir esta gu\u00eda compil\u00e9 el commit <code>d56417bfd6b2af9beacb104f8659aea8bff94a72</code>. Si nuevos commits provocan problemas, hacer el siguiente checkout:</p> <pre><code>$ cd openauto\n$ git checkout d56417bfd6b2af9beacb104f8659aea8bff94a72\n</code></pre> </li> <li> <p>Compilamos openauto:</p> <pre><code>$ cd ~\n$ mkdir openauto_build\n$ cd openauto_build\n$ sudo apt-get install -y libtag1-dev libblkid-dev\n$ cmake -DCMAKE_BUILD_TYPE=Release -DRPI3_BUILD=TRUE -DAASDK_INCLUDE_DIRS=\"/home/pi/aasdk/include\" -DAASDK_LIBRARIES=\"/home/pi/aasdk/lib/libaasdk.so\" -DAASDK_PROTO_INCLUDE_DIRS=\"/home/pi/aasdk_build\" -DAASDK_PROTO_LIBRARIES=\"/home/pi/aasdk/lib/libaasdk_proto.so\" ../openauto\n$ make\n</code></pre> </li> <li> <p>Sustituimos el binario compilado por el de la distribuci\u00f3n Crankshaft:</p> <pre><code>$ sudo cp /home/pi/openauto/bin/autoapp /usr/local/bin/autoapp\n</code></pre> </li> <li> <p>Desactivamos el DEV mode del paso 1 y arrancamos normalmente.</p> </li> </ol>"},{"location":"2019-08-06-django_site.html","title":"Creaci\u00f3n de un sitio Django desde cero","text":"<p>Procedimiento de creaci\u00f3n de un entorno de desarrollo y producci\u00f3n para un sitio Django.</p>"},{"location":"2019-08-06-django_site.html#entorno-dev","title":"Entorno DEV","text":"<ol> <li>Creo repositorio git y lo sincronizo con el directorio de desarrollo.</li> <li> <p>Creo entorno Python con pipenv. Dos opciones:</p> <ul> <li> <p>Con una versi\u00f3n de Python compilada previamente en nuestra m\u00e1quina:</p> <pre><code>$ cd ~/git/remote_james\n$ pipenv install --python /home/usuario/Python-3.6.5/bin/python3\n</code></pre> </li> <li> <p>Con la versi\u00f3n de Python3 instalada en el sistema:</p> <pre><code>$ cd ~/git/remote_james\n$ pipenv install --three\n</code></pre> </li> </ul> </li> <li> <p>Instalo Django, creo proyecto y aplicaci\u00f3n:</p> <pre><code>$ pipenv shell\n$ pipenv install django\n$ django-admin startproject remote_james .\n$ python manage.py startapp james\n</code></pre> </li> <li> <p>Incorporo nueva app en fichero <code>settings.py</code>:</p> <pre><code>INSTALLED_APPS = [\n    'james.apps.JamesConfig',\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre> </li> <li> <p>Ejecuto migraciones, creo superusuario y arranco servidor desarrollo:</p> <pre><code>$ python manage.py makemigrations\n$ python manage.py migrate\n$ python manage.py createsuperuser\n$ python manage.py runserver 0.0.0.0:8000\n</code></pre> </li> </ol>"},{"location":"2019-08-06-django_site.html#entorno-prod","title":"Entorno PROD","text":"<ol> <li> <p>Bajo el repositorio:</p> <pre><code>$ cd ~\n$ git clone git@bitbucket.org:eduardofilo/remote_james.git\n</code></pre> </li> <li> <p>Creo el entorno (de nuevo existe la opci\u00f3n de utilizar la versi\u00f3n de Python3 del sistema como en el punto 2 del entorno de desarrollo):</p> <pre><code>$ cd remote_james\n$ pipenv install --python /home/servidor/Python-3.6.5/bin/python3\n</code></pre> </li> <li> <p>Creo base de datos y usuario admin:</p> <pre><code>$ pipenv shell\n$ python manage_ovh.py migrate\n$ python manage_ovh.py createsuperuser\n</code></pre> </li> <li> <p>Creo sitio en Apache (<code>/etc/apache2/sites-available/008-remote_james.conf</code>):</p> <pre><code>&lt;VirtualHost *:80&gt;\n        ServerName remotejames.example.com\n        ServerAdmin webmaster@localhost\n        DocumentRoot /var/www/html\n\n        ErrorLog ${APACHE_LOG_DIR}/error-remotejames.log\n        CustomLog ${APACHE_LOG_DIR}/access-remotejames.log combined\n\n        Alias /static /home/servidor/remote_james/static\n        &lt;Directory /home/servidor/remote_james/static&gt;\n                Require all granted\n        &lt;/Directory&gt;\n\n        Alias /media /home/servidor/remote_james/media\n        &lt;Directory /home/servidor/remote_james/media&gt;\n                Require all granted\n        &lt;/Directory&gt;\n\n        &lt;Directory /home/servidor/remote_james/remote_james&gt;\n                &lt;Files wsgi.py&gt;\n                        Require all granted\n                &lt;/Files&gt;\n        &lt;/Directory&gt;\n\n        WSGIDaemonProcess remote_james python-path=/home/servidor/remote_james python-home=/home/servidor/.virtualenvs/remote_james-Sjv1LfIa\n        WSGIProcessGroup remote_james\n        WSGIScriptAlias / /home/servidor/remote_james/remote_james/wsgi.py\n&lt;/VirtualHost&gt;\n\n# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n</code></pre> </li> <li> <p>Activo sitio:</p> <pre><code>$ sudo a2ensite 008-remote_james.conf\n$ sudo systemctl reload apache2\n</code></pre> </li> </ol>"},{"location":"2020-01-11-rg350_scraper.html","title":"RG350 Scraper","text":"<p>El lanzador de aplicaciones Gmenu2x de OpenDingux en la RG350, soporta previsualizaci\u00f3n de ROMs (creo que tambi\u00e9n Esoteric, pero no estoy seguro), es decir, permite mostrar una imagen para ayudar a la identificaci\u00f3n de los juegos. Normalmente se utiliza un frame del gameplay, el logo, el cartucho, la caja o una combinaci\u00f3n de todo ello.</p> <p>Para que funcione simplemente hay que colocar una carpeta con las im\u00e1genes al mismo nivel donde queden las ROMs para las que queramos que se muestre la previsualizaci\u00f3n. Antes de la versi\u00f3n 1.7.9.4 del firmware RG350-ROGUE-CFW la carpeta se deb\u00eda llamar <code>previews</code>, y a partir de dicha versi\u00f3n (incluida) lleva un punto delante para que se oculte en el explorador de archivos, es decir <code>.previews</code>. A partir de ahora vamos a suponer que estamos trabajando con las \u00faltimas versiones de ROGUE para representar las rutas en lo que queda de art\u00edculo. Para versiones anteriores simplemente retirar el punto de delante en las rutas.</p> <p>El nombre de archivo de las im\u00e1genes tiene que ser el mismo que la ROM sustituyendo la extensi\u00f3n de la ROM por <code>.png</code> ya que las im\u00e1genes ser\u00e1n de este formato. Por ejemplo la miniatura de la ROM <code>/media/sdcard/roms/GB/DKLAND.gb</code> ir\u00eda en <code>/media/sdcard/roms/GB/.previews/DKLAND.png</code>.</p> <p>Desde la versi\u00f3n 1.7.9.4 del firmware RG350-ROGUE-CFW, la previsualizaci\u00f3n puede verse de dos modos. El ajuste del modo se hace abriendo el lanzador <code>GMenu2X</code> que hay en la secci\u00f3n <code>Settings</code> y cambiando el par\u00e1metro <code>Preview type</code>:</p> <p> </p> <p>En el tipo 1 las previsualizaciones se ven de fondo a toda pantalla:</p> <p></p> <p>Y en el tipo 2 se ven en miniatura en la esquina superior derecha:</p> <p></p> <p>Como suele ser habitual que haya muchas ROMs cargadas en la m\u00e1quina, existe una forma de automatizar la generaci\u00f3n de estas miniaturas para los juegos por medio un programa que se suele llamar scraper. A continuaci\u00f3n se muestra una lista con varios de ellos:</p> <ul> <li>Steven Selph's Scraper: Instrucciones</li> <li>Lars Muldjord's Skyscraper: Instrucciones</li> <li>Skraper</li> <li>Universal XML Scraper</li> </ul> <p>Como ejemplo vamos a utilizar uno de los mejores, el Skraper que utiliza la base de datos del sitio ScreenScraper. A continuaci\u00f3n se describe c\u00f3mo ser\u00eda el proceso. Vamos a hacerlo desde Windows ya que en el momento de escribir esto s\u00f3lo existe versi\u00f3n para este sistema, aunque se puede utilizar en Linux con Wine.</p> <ol> <li>Descargar ScreenScraperUI de aqu\u00ed</li> <li>Crear cuenta en ScreenScraper. He le\u00eddo que hay problemas si se hace con la p\u00e1gina en espa\u00f1ol as\u00ed que lo he hecho en ingl\u00e9s. El \u00fanico problema que he tenido es que el mail de confirmaci\u00f3n para activar la cuenta ha entrado por la bandeja de SPAM de GMail.</li> <li>Sacar la microSD externa donde habitualmente tendremos las ROMs y montarla en el ordenador. Esto s\u00f3lo servir\u00e1 si la tarjeta tiene formato reconocible por Windows (FAT32 o exFAT).</li> <li>Abrir ScreenScraperUI. Se iniciar\u00e1 con un asistente. Lo primero que nos pedir\u00e1 es la cuenta de ScreenScraper.</li> <li> <p>En el siguiente paso nos pedir\u00e1 el tipo de sistema para el que vamos a scrapear las ROMs. Le diremos \"Emulaci\u00f3n Gen\u00e9rica\".</p> <p></p> </li> <li> <p>Lo siguiente ser\u00e1 indicar el lugar donde est\u00e1n las ROMs. Al hacerlo he tenido un problema y es que aun marcando la opci\u00f3n \"Inspeccionar sub-carpetas\", el asistente s\u00f3lo ha sido capaz de reconocer 6 sistemas. Luego he podido comprobar que el problema es que cada sistema utiliza una sub-carpeta espec\u00edfica que si no coincide con la que nosotros tenemos, no ser\u00e1 reconocido. Esto se puede solucionar m\u00e1s adelante a\u00f1adiendo los sistemas que falten a mano.</p> <p></p> </li> <li> <p>Una vez terminado el asistente configuraremos lo siguiente en el apartado MEDIA:</p> <ul> <li>Eliminamos la entrada MANUAL que nos descargar\u00eda un PDF con el folleto del juego para cada ROM.</li> <li>Indicamos <code>%ROMROOTFOLDER%\\.previews</code> en el par\u00e1metro <code>Carpeta de Destino</code>.</li> <li>Marcamos las opciones <code>Redimensionar altura a: 240</code> y <code>Mantener relaci\u00f3n de aspecto de imagen</code>.</li> </ul> <p></p> </li> <li> <p>Finalmente pulsamos el bot\u00f3n con forma de Play que hay abajo a la derecha para comenzar el proceso. Dependiendo de las ROMs y sistemas que vayamos a reconocer el proceso puede tardar bastante.</p> <p></p> </li> </ol> <p>Como hemos comentado antes, el programa a la hora de reconocer los sistemas, utiliza unas rutas de directorios predefinidas. Vamos a ver c\u00f3mo se a\u00f1adir\u00eda manualmente un sistema que no haya sido reconocido autom\u00e1ticamente por este motivo. Por ejemplo la NES. El directorio que utilizo yo para almacenar esas ROMs es <code>FC</code> (por Famicom).</p> <ol> <li>En la pantalla principal, pulsar el bot\u00f3n <code>+</code> que hay abajo a la izquierda.</li> <li>Aparece una ventana popup con la lista de todos los sistemas reconocidos por el programa. Buscamos el sistema que queremos a\u00f1adir. En el caso de NES se encuentra en la secci\u00f3n <code>Console</code>. Pulsamos OK.</li> <li> <p>Volveremos a la pantalla principal con el sistema instalado y seleccionado en la lista de la izquierda. Como vemos la ruta que espera la aplicaci\u00f3n para las ROMs de NES es <code>D:\\roms\\Nintendo Entertainment System</code>.</p> <p></p> </li> <li> <p>Sustituimos la ruta por la correcta (<code>D:\\roms\\FC</code>) y pulsamos el bot\u00f3n Play.</p> </li> </ol> <p>Ya s\u00f3lo queda devolver la microSD a la consola y disfrutar de las previews.</p> <p>Aqu\u00ed podemos ver todo el proceso en un tutorial en video:</p>"},{"location":"2020-01-25-rg350_simplemenu.html","title":"RG350 SimpleMenu","text":"<p>Actualizaci\u00f3n 2020-04-29</p> <p>Se modifica el art\u00edculo para que las instrucciones correspondan con la nueva versi\u00f3n 5.5.</p> <p>Se ilustra a continuaci\u00f3n el proceso de instalaci\u00f3n y configuraci\u00f3n del launcher SimpleMenu para RG350.</p>"},{"location":"2020-01-25-rg350_simplemenu.html#instalacion","title":"Instalaci\u00f3n","text":"<p>La instalaci\u00f3n consiste \u00fanicamente en copiar el OPK que ofrece su autor a una de las dos rutas que lee Gmenu2x para mostrar el lanzador, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul> <p>Tras hacerlo aparece el lanzador en la secci\u00f3n <code>applications</code> de GMenu2X:</p> <p></p> <p>Si lo abrimos en este momento, reconocer\u00e1 las aplicaciones y ports que tengamos instalados, dado que la ruta y extensi\u00f3n de los mismos es previsible:</p> <p> </p> <p>Si nos desplazamos hasta alguno de los sistemas de emulaci\u00f3n seguramente veremos que no reconoce los emuladores y/o ROMs que tengamos instalados. Esto es normal puesto que todav\u00eda no hemos adaptado la configuraci\u00f3n:</p> <p></p>"},{"location":"2020-01-25-rg350_simplemenu.html#configuracion","title":"Configuraci\u00f3n","text":"<p>Aviso</p> <p>Las tres \u00faltimas versiones mayores del programa han modificado el formato de los ficheros de configuraci\u00f3n, por lo que si cont\u00e1bamos con una instalaci\u00f3n de las versiones previas (2.x \u00f3 3.x) nos va a tocar adaptarlos, es decir no se pueden utilizar directamente ya que no son compatibles. Lo mejor ser\u00e1 renombrar el directorio <code>/media/data/local/home/.simplemenu</code> para que se vuelva a generar en el siguiente arranque y as\u00ed adem\u00e1s mantener copia de la configuraci\u00f3n anterior para que nos sirva de modelo para crear la nueva.</p> <p>Entre la versi\u00f3n 4.1 y la 4.2 ha habido un cambio importante en la gesti\u00f3n del tema gr\u00e1fico.</p> <p>Entre la versi\u00f3n 4.2 y la 4.5 el cambio importante ha sido en la ubicaci\u00f3n y divisi\u00f3n del fichero <code>sections.ini</code> en varios para agrupar las distintas m\u00e1quinas por tipos.</p> <p>Entre la versi\u00f3n 4.5 y 5.5 no ha habido cambios importantes en la configuraci\u00f3n por lo que podremos mantenerla.</p> <p>De serie SimpleMenu trae una configuraci\u00f3n con varios sistemas precargados, pero como apunta de forma est\u00e1tica a las rutas de los distintos emuladores y ROMs, es casi seguro que nos va a tocar ajustar esta configuraci\u00f3n a los que nosotros tengamos instalados en la consola. A\u00fan as\u00ed interesa que lo ejecutemos al menos una vez para que se genere el directorio <code>.simplemenu</code> dentro del home de la consola para que tengamos la plantilla sobre la que empezar a modificar.</p>"},{"location":"2020-01-25-rg350_simplemenu.html#sistemas","title":"Sistemas","text":"<p>Los ficheros clave son los que se encuentran en la ruta <code>/media/data/local/home/.simplemenu/section_groups</code>. All\u00ed encontramos los siguientes ficheros:</p> <pre><code>RG350:/media/data/local/home/.simplemenu/section_groups # ls -l\n-rw-r--r--    1 root     root           235 Jan 28 17:35 apps and games.ini\n-rw-r--r--    1 root     root         10716 Jan 28 17:35 apps and games.png\n-rw-r--r--    1 root     root           936 Jan 28 17:35 arcades.ini\n-rw-r--r--    1 root     root         14746 Jan 28 17:35 arcades.png\n-rw-r--r--    1 root     root          1889 Jan 28 17:35 consoles.ini\n-rw-r--r--    1 root     root         19669 Jan 28 17:35 consoles.png\n-rw-r--r--    1 root     root          1188 Jan 28 17:35 handhelds.ini\n-rw-r--r--    1 root     root          8626 Jan 28 17:35 handhelds.png\n-rw-r--r--    1 root     root           949 Jan 28 17:35 home computers.ini\n-rw-r--r--    1 root     root         17383 Jan 28 17:35 home computers.png\n</code></pre> <p>Como vemos hay una imagen y un fichero <code>.ini</code> para 5 grupos de sistemas. Esta agrupaci\u00f3n es flexible, es decir, podemos ampliar o reducir el n\u00famero de tipos a nuestro gusto. El fichero de imagen tiene que llamarse exactamente igual que el de configuraci\u00f3n. Ser\u00e1 lo que se vea en la pantalla al seleccionar el tipo correspondiente.</p> <p>A no ser que seamos expertos con el editor <code>vi</code> que podemos ejecutar por SSH, lo mejor ser\u00e1 transferir los ficheros al ordenador de alguna manera (pas\u00e1ndolos a la tarjeta externa con DinguxCmdr si no se conoce otra forma m\u00e1s directa) y editarlos all\u00ed con un editor que soporte los finales de l\u00ednea y la codificaci\u00f3n utilizada habitualmente en sistemas Linux (como Notepad++).</p> <p>A partir de aqu\u00ed nos vamos a centrar en el tipo <code>handhelds</code> para seguir la explicaci\u00f3n, pero todo lo que digamos se puede aplicar exactamente igual a cualquiera de los otros tipos.</p> <p>En el fichero <code>handhelds.ini</code> tenemos al principio la lista de sistemas en la propiedad <code>consoleList</code> del apartado <code>[CONSOLES]</code>. En esta propiedad se van a\u00f1adiendo los distintos sistemas que definiremos a continuaci\u00f3n, separados por comas. Podemos seleccionar un subconjunto de los sistemas definidos m\u00e1s abajo, es decir, podemos ocultar algunos simplemente no incluy\u00e9ndolos en <code>consoleList</code>.</p> <pre><code>[CONSOLES]\nconsoleList =GAME BOY,GAME BOY COLOR,GAME BOY ADVANCE,GAME &amp; WATCH,GAME GEAR,NEO GEO POCKET,WONDERSWAN,LYNX\n</code></pre> <p>Luego por cada sistema tenemos un bloque como el siguiente:</p> <pre><code>[GAME BOY]\nexecs = /media/data/apps/gambatte-multi-r572u4-20200127.opk\nromDirs = /media/data/roms/GB/\nromExts = .gb,.gz,.zip\n</code></pre> <p>El formato del archivo es el que se utiliza habitualmente para los ficheros de configuraci\u00f3n tipo INI. El significado de los par\u00e1metros es:</p> <ul> <li><code>execs</code>: OPKs de los emuladores del sistema con sus rutas, separados por comas.</li> <li><code>romDirs</code>: Directorios donde se encuentran las ROMs de este sistema, separados por comas.</li> <li><code>romExts</code>: Extensiones de los ficheros que se incluir\u00e1n en el listado de ROMs, separadas por comas.</li> </ul> <p>Una vez que devolvamos los ficheros de configuraci\u00f3n a su lugar en <code>/media/data/local/home/.simplemenu/section_groups</code>, ya podremos tratar de ejecutarlo para comprobar si ha cargado bien los sistemas y previews de las ROMs. Al menos en mi caso lo que me encuentro en este momento es:</p> <p></p> <p>Como vemos en la definici\u00f3n de los par\u00e1metros, ahora puede haber varios emuladores y varios directorios de ROMs en cada sistema. En el primer caso podremos elegir el emulador a utilizar pulsando <code>Select</code> cuando est\u00e9 seleccionada la ROM que queremos emular. Por ejemplo, tras a\u00f1adir el emulador GPSP a la configuraci\u00f3n de GBA podemos ver lo siguiente al pulsar <code>Select</code> en el listado de ROMs de GBA y pulsar arriba/abajo en la cruceta:</p> <p> </p> <p>Como punto de partida dejo aqu\u00ed mis ficheros de configuraci\u00f3n que contienen la mayor\u00eda de los emuladores y la estructura de directorios para las ROMs que se utilizan habitualmente.</p> <ul> <li>simplemenu.zip</li> </ul> <p>Nota</p> <p>A partir de la versi\u00f3n 4.2, SimpleMenu es mucho m\u00e1s robusto respecto a defectos o carencias en la configuraci\u00f3n tanto de los sistemas como del tema, por lo que arrancar\u00e1 siempre. Cuando por ejemplo no exista correspondencia de un sistema en el tema, nos mostrar\u00e1 el nombre del mismo en lugar de un logotipo, lo que nos servir\u00e1 como indicaci\u00f3n de que debemos incorporarlo nosotros.</p> <p>Aviso</p> <p>Si sustituimos los ficheros de configuraci\u00f3n de los sistemas despu\u00e9s de haber abierto SimpleMenu al menos una vez y hecho cambios en su configuraci\u00f3n, es probable que \u00e9ste se niegue a abrirse (volviendo inmediatamente a GMenu2X al intentarlo). En esos casos borrar el fichero <code>/media/data/local/home/.simplemenu/last_state.sav</code>.</p>"},{"location":"2020-01-25-rg350_simplemenu.html#configuracion-general","title":"Configuraci\u00f3n general","text":"<p>Dentro de <code>/media/data/local/home/.simplemenu</code> hay otro fichero que nos interesa modificar. Se trata del <code>config.ini</code>.</p> <p>A partir de la versi\u00f3n 5.0 esta configuraci\u00f3n general se puede hacer desde el propio frontend. Accedemos a ella pulsando <code>Start</code> desde el listado de ROMs de un sistema:</p> <p></p> <p>La mayor\u00eda de estos ajustes tienen su correspondencia en el fichero de configuraci\u00f3n. Vamos a empezar estudiando las opciones directamente sobre el fichero y al final veremos las opciones del men\u00fa de settings que no est\u00e1n en \u00e9l.</p> <p>El contenido del fichero es el siguiente por defecto:</p> <pre><code>[GENERAL]\nmedia_folder = media\ntheme = default\n\n[FULLSCREEN_MODE]\ndisplay_footer = 0\ndisplay_menu = 1\n\n[SYSTEM]\nscreen_timeout_in_seconds = 30\nallow_shutdown = 0\n\n[CPU]\nunderclocked_speed = 408\nnormal_speed = 702\noverclocked_speed = 732\nsleep_speed = 200\n</code></pre> <p>Los par\u00e1metros dentro del grupo <code>[CPU]</code> son ignorados en RG350 (en principio son para modificar las frecuencias del procesador). El resto de par\u00e1metros s\u00ed los podemos modificar. Su significado es el siguiente:</p> <ul> <li><code>media_folder</code>: Directorio donde se buscan las previsualizaciones de las ROMs. Interesa cambiar este valor del <code>media</code> que viene por defecto a <code>.previews</code> para que sea compatible con la ruta utilizada por Gmenu2x.</li> <li><code>theme</code>: A partir de la versi\u00f3n 4.2 se pueden incorporar varios temas (en distintos directorios dentro de <code>/media/data/local/home/.simplemenu/themes</code>) que luego se pueden seleccionar mediante este par\u00e1metro.</li> <li><code>display_footer</code>: Muestra el nombre de la ROM cuando estamos en modo preview (0=No; 1=S\u00ed).</li> <li><code>display_menu</code>: Muestra la lista de ROMs de una secci\u00f3n cuando nos desplazamos entre las ROMs en modo preview (0=No; 1=S\u00ed).</li> <li><code>screen_timeout_in_seconds</code>: N\u00famero de segundos a partir del cual salta el salvapantallas. Cuando \u00e9ste entre, la forma de salir es pulsar cualquier bot\u00f3n.</li> <li><code>allow_shutdown</code>: Antes de la versi\u00f3n 5.0 esta opci\u00f3n serv\u00eda para configurar el efecto de la combinaci\u00f3n de teclas <code>Start+Select</code> para cerrar la aplicaci\u00f3n o apagar la consola. A partir de esta versi\u00f3n este comportamiento se gestiona de forma diferente como veremos dentro de poco.</li> </ul> <p>Por \u00faltimo comentamos las opciones del men\u00fa de settings que muestra el frontend que son independientes del fichero de configuraci\u00f3n. Son las siguientes:</p> <p></p> <p>Confirmando este men\u00fa cerraremos SimpleMenu y regresaremos al programa desde el que lo hayamos lanzado (GMenu2X habitualmente).</p> <p></p> <p>Cuando estamos navegando entre los sistemas de un grupo, si esta opci\u00f3n est\u00e1 a <code>YES</code> el logo del sistema se ver\u00e1 durante un segundo antes de aparecer el listado de ROMs de ese sistema. Si est\u00e1 a <code>NO</code> el logo se mantendr\u00e1 visible hasta que pulsemos <code>A</code> para pasar al listado de ROMs.</p> <p></p> <p>Permite seleccionar entre tres tipos de disposiciones de los listados de ROMs y sus previews. La visualizaci\u00f3n depender\u00e1 del tema activo. Por ejemplo para el tema <code>default</code> las tres disposiciones tienen el siguiente aspecto:</p> <ul> <li> <p>Layout SimpleMenu</p> <p></p> </li> <li> <p>Layout Traditional</p> <p></p> </li> <li> <p>Layout Drunken Monkey</p> <p></p> </li> </ul> <p></p> <p>Esta entrada del men\u00fa de settings nos permite configurar SimpleMenu como frontend predeterminado en el sistema. Cuando lo configuramos de este modo, la primera entrada del men\u00fa de settings pasa de <code>QUIT</code> a <code>SHUTDOWN</code> permiti\u00e9ndonos apagar la m\u00e1quina.</p> <p></p>"},{"location":"2020-01-25-rg350_simplemenu.html#manejo","title":"Manejo","text":"<p>Como hemos visto durante la configuraci\u00f3n, a partir de la versi\u00f3n 4.5 se pueden definir varios grupos de m\u00e1quinas. Por defecto existen 5 grupos definidos por tipo de m\u00e1quinas. Entramos en el modo de selecci\u00f3n de un grupo pulsando <code>B</code>. En ese momento vemos por ejemplo:</p> <p></p> <p>En esta situaci\u00f3n cambiamos de grupo pulsando <code>Arriba</code> y <code>Abajo</code> en la cruceta, y entramos en el grupo pulsando <code>A</code>.</p>"},{"location":"2020-01-25-rg350_simplemenu.html#previews","title":"Previews","text":"<p>SimpleMenu soporta previsualizaci\u00f3n de las ROMs. Para que aparezcan hay que hacer dos cosas:</p> <ol> <li>Colocar las im\u00e1genes con el mismo nombre que las ROMs pero con extensi\u00f3n <code>.png</code> en un directorio al mismo nivel que las ROMs cuyo nombre se corresponda con el definido en el par\u00e1metro <code>media_folder</code> del fichero de configuraci\u00f3n <code>config.ini</code>. Inicialmente este nombre es <code>media</code>. Por ejemplo la previsualizaci\u00f3n de la ROM <code>/media/sdcard/roms/GB/DKLAND.gb</code> ir\u00eda en <code>/media/sdcard/roms/GB/media/DKLAND.png</code>.</li> <li>Activar la visualizaci\u00f3n de las miniaturas. Para ello hay que pulsar la tecla <code>Y</code>. Volvi\u00e9ndola a pulsar volvemos al listado normal.</li> </ol> <p>Como hemos comentado en el apartado de Configuraci\u00f3n general, podemos modificar el directorio que se utiliza de forma predeterminada (<code>media</code>) por el <code>.previews</code> que utiliza Gmenu2x para as\u00ed hacerlos compatibles y no tener que duplicar las previsualizaciones.</p> <p>El resultado:</p>"},{"location":"2020-01-25-rg350_simplemenu.html#controles","title":"Controles","text":"<p>La p\u00e1gina de documentaci\u00f3n de controles es \u00e9sta, pero resulta un poco confusa porque mezcla varias m\u00e1quinas, por lo que se listan a continuaci\u00f3n de forma expl\u00edcita los controles para RG350:</p> Shortcut Modo Funci\u00f3n <code>R1</code> / <code>L1</code> Listado de ROMs Cambia de sistema desde la lista de ROMs. Si est\u00e1 activada la previsualizaci\u00f3n de las ROMs, se mostrar\u00e1 el logotipo del sistema durante un segundo <code>Arriba</code> / <code>Abajo</code> Listado de ROMs Selecciona la ROM anterior/siguiente <code>Izquierda</code> / <code>Derercha</code> Listado de ROMs Avanza 10 ROMs anteriores/siguientes <code>B+Izquierda</code> / <code>B+Derecha</code> Listado de ROMs Cambia de sistema mostrando el logotipo de los sistemas <code>B+Arriba</code> / <code>B+Abajo</code> Listado de ROMs Pasa a la letra anterior/siguiente <code>Y</code> Listado de ROMs Activa/desactiva la previsualizaci\u00f3n de las ROMs <code>A</code> Listado de ROMs Lanza la ROM seleccionada <code>B+Select</code> Listado de ROMs Lanza una ROM aleatoria <code>Select</code> Listado de ROMs Permite seleccionar el emulador a utilizar cuando hay varios definidos en el sistema <code>Select+Start</code> Listado de ROMs Apaga la consola o cierra SimpleMenu (dependiendo del par\u00e1metro <code>allow_shutdown</code> en <code>config.ini</code>) <code>X</code> Listado de ROMs A\u00f1ade la ROM seleccionada a Favoritos <code>L2</code> Listado de ROMs Entra en la lista de Favoritos <code>X</code> Listado de Favoritos Borra la ROM seleccionada de Favoritos <code>L2</code> Listado de Favoritos Sale de la lista de Favoritos <code>B</code> Listado de ROMs Sube al nivel de seleci\u00f3n de grupos <code>A</code> Listado de grupos Entra en el grupo seleccionado"},{"location":"2020-01-31-rg350_fba.html","title":"RG350 FBA","text":"<p>Final Burn Alpha o FBA es un emulador de m\u00faltiples m\u00e1quinas arcade, sobre todo Neo-Geo, Konami y Capcom. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350.</p> <p>El repositorio donde se publican versiones especiales para RG350 es \u00e9ste. En concreto las releases se descargan de aqu\u00ed. En la secci\u00f3n de assets de cada release podemos encontrar un OPK creado especialmente para esta consola.</p>"},{"location":"2020-01-31-rg350_fba.html#instalacion","title":"Instalaci\u00f3n","text":"<p>La instalaci\u00f3n es como la de cualquier emulador en formato OPK:</p> <ol> <li>Descargar el OPK para RG350 del \u00faltimo release. En el momento de escribir este art\u00edculo es: fba-RG350-r19-8e351b8b.opk</li> <li>Copiarlo dentro del directorio <code>apps</code> de la microSD externa.</li> </ol> <p>Tambi\u00e9n puede copiarse en la tarjeta interna (en la ruta <code>/media/data/apps</code>, pero particularmente prefiero instalar las aplicaciones en la externa).</p> <p>Una vez instalado, reiniciar Gmenu2x pulsando <code>Power+Select</code> para asegurar el que aparezca:</p> <p></p>"},{"location":"2020-01-31-rg350_fba.html#configuracion","title":"Configuraci\u00f3n","text":"<p>La primera vez que lo abramos nos mostrar\u00e1 las 5807 ROMs que es capaz de reconocer (al menos en la r19), pero seguramente no nos permitir\u00e1 abrirlas y las representar\u00e1 en rojo.</p> <p></p> <p>Si pulsamos la tecla <code>X</code> (y no la <code>Y</code> como sugiere el propio programa) veremos la ayuda en la que se explica que las ROMs que aparecen en rojo est\u00e1n missing, es decir que no han sido localizadas en la consola.</p> <p></p> <p>Hay que configurar en los ajustes de FBA la ruta de las ROMs. Para ello seguir estos pasos:</p> <ol> <li> <p>Pulsar <code>Start</code>. Aparecen las <code>Main settings</code>. Bajamos hasta seleccionar la entrada <code>ROMs Paths --&gt;</code>:</p> <p></p> </li> <li> <p>Entrar con <code>A</code> para ver la serie de 20 rutas que nos permite configurar FBA. Como vemos, por defecto tiene algunas rutas habituales ya definidas. Curiosamente la ruta n\u00famero 4 hubiera funcionado en mi m\u00e1quina cuando ten\u00eda la tarjeta externa en formato FAT32, ya que la ruta de mis ROMs de FBA es <code>/media/sdcard/roms/FBA</code> y ese formato no es sensible a may\u00fasculas/min\u00fasculas:</p> <p></p> </li> <li> <p>Hacer limpieza de las rutas que no nos sirvan seleccion\u00e1ndolas y borr\u00e1ndolas con la tecla <code>X</code>:</p> <p></p> </li> <li> <p>Seleccionar la primera entrada (por ejemplo) y pulsar <code>A</code>. Aparecer\u00e1 una especie de explorador de ficheros que nos permitir\u00e1 navegar por la estructura de directorios. Subiremos por el \u00e1rbol seleccionando la entrada de los dos puntos <code>..</code> hasta llegar a la ra\u00edz y luego comenzaremos a descender por la ruta que nos lleve hasta nuestras ROMs, en mi caso <code>/media/sdcard/roms/FBA</code>. Las subidas y bajadas por el \u00e1rbol se hacen con la tecla <code>A</code>. Cuando lleguemos a la ruta deseada pulsar <code>Start</code>:</p> <p></p> </li> <li> <p>Tras haber indicado al menos una ruta v\u00e1lida volver al men\u00fa <code>Main settings</code> pulsando <code>B</code>. All\u00ed bajar hasta la opci\u00f3n <code>Clear ROMs list cache and rescaning</code>:</p> <p></p> </li> <li> <p>Esto nos har\u00e1 volver a la lista de ROMs, pero si en la ruta configurada tenemos ROMs v\u00e1lidas empezaremos a ver algunos nombres en amarillo y/o naranja. Son las ROMs que el emulador puede ejecutar:</p> <p></p> </li> <li> <p>A no ser que tengamos el romset completo de FBA que soporta la versi\u00f3n que hayamos instalado, veremos varias ROMs en rojo que no vamos a poder jugar. Para esconderlas volver al men\u00fa de settings con la tecla <code>Start</code> y entrar en la secci\u00f3n <code>Filter settings --&gt;</code> con la tecla <code>A</code>:</p> <p></p> </li> <li> <p>En la nueva pantalla cambiar el ajuste <code>Show roms</code> con las teclas izquierda/derecha de la cruceta hasta que aparezca la opci\u00f3n <code>Available only</code>:</p> <p></p> </li> <li> <p>Al volver a la lista de ROMs (esta vez no hace falta provocar el rescaning) veremos s\u00f3lo las ROMs que podemos ejecutar:</p> <p></p> </li> </ol> <p>En realidad los pasos 7 a 9 se pueden realizar con la combinaci\u00f3n de teclas <code>Y+Arriba/Abajo</code> que veremos luego.</p>"},{"location":"2020-01-31-rg350_fba.html#controles","title":"Controles","text":"<p>A continuaci\u00f3n se describen los controles que aparecen en las pantallas de ayuda.</p> <p> </p> Combinaci\u00f3n teclas Situaci\u00f3n Funci\u00f3n <code>Select</code> Listado de ROMs Pantalla de salida. Pulsar otra vez para confirmar <code>Start</code> Listado de ROMs Pantalla de ajustes principales <code>Y+Izq./Der.</code> Listado de ROMs Cambia el valor del filtro <code>Hardware</code> <code>Y+Arriba/Abajo</code> Listado de ROMs Cambia el valor del filtro <code>Show roms</code> <code>Y+R1/L1</code> Listado de ROMs Cambia el valor del filtro <code>Genre</code>, es decir la categor\u00eda de ROMs <code>Y+Select</code> Listado de ROMs A\u00f1ade/quita la ROM a la selecci\u00f3n <code>Y+A</code> Listado de ROMs A\u00f1ade a favoritos la ROM <code>Y+Start</code> Listado de ROMs OJO!!! Borra sin confirmar las ROMs seleccionadas <code>Select</code> Ejecutando ROM Insertar moneda <code>Start</code> Ejecutando ROM Start Player 1 <code>Select+Start</code> Ejecutando ROM Start Player 2 <code>L1+R1+Y</code> Ejecutando ROM Muestra/oculta la tasa de frames por segundo (FPS) <code>L1+R1+B</code> Ejecutando ROM Graba estado de juego <code>L1+R1+A</code> Ejecutando ROM Carga estado de juego <code>L1+R1+Select</code> Ejecutando ROM con UniBIOS instalada Men\u00fa de servicio <code>X+A+B</code> Durante arranque de UniBIOS Men\u00fa de servicio <code>X+Y+B</code> Durante arranque de UniBIOS Cambio de modo (arcade/consola), regi\u00f3n y ajustes BIOS <code>L1+R1+Start</code> Ejecutando ROM Men\u00fa FBA SDL <p>La combinaci\u00f3n de teclas <code>L1+R1+Start</code> es importante ya que es la que muestra el men\u00fa de la aplicaci\u00f3n una vez que hemos arrancado una ROM. Ser\u00e1 el que nos permita hacer ajustes en los controles, guardar y recuperar estados de partidas y salir de la ROM para volver a la lista:</p> <p></p>"},{"location":"2020-01-31-rg350_fba.html#previews","title":"Previews","text":"<p>FBA, como muchos emuladores, soporta im\u00e1genes para ilustrar los juegos que puede ejecutar. En realidad esta funci\u00f3n tiene un efecto mayor que en otros emuladores, ya que al venir precargado con un romset, es decir, con una base de datos de juegos, aunque no tengamos las ROMs correspondientes, podremos explorar y filtrar el cat\u00e1logo para ver esas previsualizaciones. Vamos pues a ver c\u00f3mo instalarlas.</p> <p>La clave est\u00e1 en ponerlas en el directorio <code>/media/data/local/home/.fba/previews</code>. All\u00ed tendr\u00e1 que haber ficheros de imagen en un formato soportado (como <code>.png</code> por ejemplo). El nombre del archivo tendr\u00e1 que coincidir con el de la ROM que represente. Los nombres est\u00e1n predefinidos en el romset. El programa nos los muestra cuando recorremos el listado. Por ejemplo:</p> <p></p> <p>Para que se previsualice este juego por tanto deber\u00e1 existir el siguiente fichero:</p> <pre><code>/media/data/local/home/.fba/previews/bombjack.png\n</code></pre> <p>Como estamos hablando de 5807 ROMs en la versi\u00f3n 44 de FBA, naturalmente no podemos preparar las im\u00e1genes una a una. O bien conseguimos un pack de previews (el que busca encuentra) o bien las intentamos preparar nosotros mismos con un Scrapper. Si optamos por esto \u00faltimo, las im\u00e1genes las tenemos que generar con un tama\u00f1o de 192x112 pixeles, es decir sin mantener la relaci\u00f3n de aspecto.</p> <p>Vamos a suponer que ya disponemos de un directorio con todas esas im\u00e1genes preparadas. Vamos a ver c\u00f3mo instalarlo.</p> <ol> <li>Partimos del directorio con las imagenes en nuestro ordenador. Renombrarlo como <code>previews</code>.</li> <li>Extraer la tarjeta externa de la consola, montarla en el ordenador y copiar el directorio <code>previews</code> a la raiz de la misma.</li> <li>Extraer del ordenador la tarjeta y volverla a pinchar en la consola, mejor con ella apagada.</li> <li> <p>Tras arrancar abrir la aplicaci\u00f3n <code>DinguxCmdr</code>. Navegar por los directorios hasta colocar a un lado la ruta <code>/media/sdcard</code> y en el otro <code>/media/data/local/home/.fba</code>. En ese momento seleccionar el directorio <code>previews</code> del lado correspondiente a la ruta de la SD, pulsar <code>X</code>, seleccionar <code>Move &gt;</code> y confirmar con <code>A</code>:</p> <p></p> </li> <li> <p>Como seguramente el directorio ya existir\u00e1, se nos pedira confirmaci\u00f3n para sobreescribirlo. Seleccionar <code>Yes to all</code> y confirmar con <code>A</code>:</p> <p></p> </li> <li> <p>Si como en mi caso tenemos en el directorio m\u00e1s de 11.000 ficheros, el proceso tardar\u00e1 un rato (alrededor de un minuto):</p> <p></p> </li> </ol> <p>Si todo ha ido bien, tras salir de DinguxCmdr (tecla <code>Y</code> y comando <code>Quit</code>), al abrir FBA empezaremos a ver esto:</p> <p></p>"},{"location":"2020-01-31-rg350_fba.html#roms","title":"ROMs","text":"<p>Como hemos comentado, FBA funciona en base a un romset, es decir un listado cerrado de ROMs que es capaz de ejecutar en una versi\u00f3n determinada. Las ROMs son identificadas haciendo c\u00e1lculos con el contenido de los ficheros, de manera que si se detecta alg\u00fan peque\u00f1o cambio, la ROM se descarta, apareciendo en rojo en el listado. Para lograr depurar un romset, es decir, encontrar los ficheros que falten o se detecten como inv\u00e1lidos, conviene utilizar un programa que nos asista en la tarea. Son los llamados ROM Managers, de los que hay varios, como por ejemplo:</p> <ul> <li>Romcenter</li> <li>Clrmamepro</li> <li>RomVault</li> <li>Arcade Manager</li> </ul> <p>Existe un proyecto en marcha para listar e identificar el grado de compatibilidad de los juegos del romset de FBA y xMAME en la RG350. Puede encontrarse y colaborar a trav\u00e9s de este documento Google Docs.</p>"},{"location":"2020-01-31-rg350_fba.html#bios-neogeo","title":"BIOS NeoGeo","text":"<p>Como muchos emuladores, algunas de las m\u00e1quinas que emula FBA necesitan las BIOS que exist\u00edan en la placa, por ejemplo NeoGeo. Hay que por tanto conseguir esta BIOS (el que busca encuentra) y copiarla al mismo directorio donde est\u00e1n las ROMs, es decir, siguiendo el ejemplo de todo el art\u00edculo, en mi caso ser\u00eda <code>/media/sdcard/roms/FBA</code>. La BIOS de NeoGeo en realidad consiste en un conjunto de ficheros comprimidos en uno de nombre <code>neogeo.zip</code>.</p> <p>Existe una BIOS modificada para NeoGeo llamada UNIBIOS con la que al abrir un juego de esta m\u00e1quina y pulsar <code>Select+Start</code> aparece un men\u00fa de cheats. Tambi\u00e9n se puede cambiar la regi\u00f3n y los idiomas de los juegos.</p> <p></p>"},{"location":"2020-02-08-eduzebox.html","title":"EdUzebox","text":"<p>En la pasada edici\u00f3n de RetroZaragoza me llam\u00f3 la atenci\u00f3n una consolita que alguien llev\u00f3 montada sobre una breadboard. Al volver a casa investigu\u00e9 y me decid\u00ed a fabricar una ya que el proyecto era perfecto para poner a prueba el aprendizaje que hab\u00eda hecho con el dise\u00f1ador de circuitos KiCad.</p> <p>El proyecto original tiene como nombre Uzebox y es una consola de videojuegos basado en un microcontrolador de la amplia familia AVR de Atmel, en concreto el ATmega644. El creador es un tal Uze que explica muy bien el origen del proyecto en la secci\u00f3n Description de la p\u00e1gina del mismo. La m\u00e1quina resultante tiene una potencia y estilo muy similar a la de los cl\u00e1sicos microordenadores de 8 bits con los que me inici\u00e9 en la inform\u00e1tica en los 80. Aqu\u00ed puede verse un ejemplo del estilo de los juegos que puede ejecutar:</p> <p>Uzebox es hardware y software libre, con una amplia y activa comunidad alrededor del foro oficial. La documentaci\u00f3n es extensa y de calidad, tanto a nivel de hardware como de software, lo que termin\u00f3 de convencerme de que merec\u00eda la pena.</p>"},{"location":"2020-02-08-eduzebox.html#diseno-version-propia","title":"Dise\u00f1o versi\u00f3n propia","text":"<p>Existen multitud de clones referenciados en el propio wiki oficial. El mejor documentado naturalmente es el original, pero tiene el inconveniente de que est\u00e1 orientado al mercado americano y por tanto la salida de v\u00eddeo es NTSC. Adem\u00e1s utiliza un chip (el AD725) para mezclar la se\u00f1al RGB que sale del microcontrolador, lo que es un desperdicio porque en Europa los televisores disponen de entrada para esta se\u00f1al y es de mucha mejor calidad que la de v\u00eddeo compuesto o S-video que se expone en la Uzebox original.</p> <p>Tras un an\u00e1lisis de las opciones existentes decid\u00ed dise\u00f1ar mi propia placa, inspir\u00e1ndome en los esquem\u00e1ticos de los proyectos EUzebox y el del espa\u00f1ol Doragasu RgbUzebox. Imprim\u00ed ambos esquem\u00e1ticos junto al de la Uzebox original y cerr\u00e9 un dise\u00f1o propio, \u00e9ste:</p> <p></p> <p>Aunque este tipo de proyectos suelen realizarse con componentes de tipo THT, por considerarse m\u00e1s accesibles, me apetec\u00eda adentrarme en el mundo SMD, as\u00ed que decid\u00ed utilizar muchos componentes de este tipo. La placa resulta m\u00e1s peque\u00f1a, sobre todo optando por la versi\u00f3n SMD del microcontrolador (utilic\u00e9 el formato TQFP), y francamente, una vez dado el paso tiene m\u00e1s ventajas que inconvenientes (precio de componentes, tama\u00f1o, aspecto final, retrabajo, es decir sustituci\u00f3n o recolocaci\u00f3n de componentes).</p> <p>El aspecto de la placa seg\u00fan un render que hace el propio KiCad es el siguiente (faltan algunos componentes de los que tuve que hacer yo la huella ya que no exist\u00eda en las librer\u00edas):</p> <p></p> <p>Todos los archivos del proyecto KiCad pueden encontrarse en este repositorio: https://github.com/eduardofilo/eduzebox</p> <p>Si est\u00e1s habituado a este tipo de proyectos, estos son los ficheros que necesitas; ya sabr\u00e1s qu\u00e9 hacer con ellos. En otro caso contin\u00faa leyendo:</p> <ul> <li>Gerbers</li> <li>BOM</li> <li>Firmware (Bootloader)</li> <li>Fuse bits:<ul> <li>LFuse: <code>0xFE</code></li> <li>HFuse: <code>0xD2</code></li> <li>EGuse: <code>0xFF</code></li> </ul> </li> <li>Carcasa: Inferior, Superior, Bot\u00f3n RESET</li> </ul>"},{"location":"2020-02-08-eduzebox.html#construccion","title":"Construcci\u00f3n","text":"<p>En la construcci\u00f3n podemos distinguir las siguientes etapas:</p> <ol> <li>Encargar PCBs</li> <li>Encargar componentes</li> <li>Preparar herramientas SMD</li> <li>Montaje final</li> </ol> <p>Vamos a detallarlas por separado.</p>"},{"location":"2020-02-08-eduzebox.html#encargar-pcbs","title":"Encargar PCBs","text":"<p>A partir del proyecto KiCad se generan los ficheros Gerber. Pueden encontrarse en el directorio gerber del repositorio. Tambi\u00e9n se publican comprimidos en ZIP en los assets de cada release.</p> <p>Hoy en d\u00eda existen muchos servicios de prototipado de PCBs que encajan sobradamente en las dimensiones y calidades necesarias para la placa dise\u00f1ada. Algunos ejemplos:</p> <ul> <li>JLCPCB: 2\u20ac por 5 PCBs de hasta 10x10cm y 2 capas. Los gastos de env\u00edo rondan los 7\u20ac.</li> <li>NextPCB: $0 por 5 PCBs de hasta 10x10cm y 2 capas a cambio de poner el logo de NextPCB\u00a0en la placa. Los gastos de env\u00edo son $10.80.</li> <li>Seeed Studio: $4.90 por 5 PCBs de hasta 10x10cm y 2 capas.</li> <li>PCBWay: $5 por 5 PCBs de hasta 10x10cm y 2 capas.</li> </ul> <p>Yo hasta ahora s\u00f3lo he utilizado JLCPCB y las placas han llegado siempre sin defectos y tardado en llegar lo acordado. El proceso de encargar las placas (las 5 del pedido m\u00ednimo) consiste \u00fanicamente en subir el fichero gerber.zip a la p\u00e1gina de pedido ya que las opciones predeterminadas que ofrece el fabricante son perfectas. S\u00f3lo queda esperar alrededor de 20 d\u00edas hasta recibir una caja dentro de la cual encontramos esto:</p> <p></p>"},{"location":"2020-02-08-eduzebox.html#encargar-componentes","title":"Encargar componentes","text":"<p>Antes de pensar en comprar los componentes hay que resolver la tarea de organizar la lista de materiales o BOM como se suele llamar (Bill Of Materials). En realidad gran parte de este trabajo se hace durante la fase de dise\u00f1o con KiCad, ya que al crear la PCB a partir del esquem\u00e1tico, es necesario seleccionar la huella o footprint de cada componente. Es en ese momento cuando conviene realizar la investigaci\u00f3n del mercado para averiguar si vamos a tener disponibilidad de todos los componentes en el formato que nos interesa. Puede ocurrir que tengamos ya el componente en casa o que encontremos uno que nos convenga y del que no exista la huella en las librer\u00eda de KiCad. Es por ejemplo lo que me ocurri\u00f3 con los conectores de los mandos de SNES. El conector que se utilizaba en todos los montajes de Uzebox que analic\u00e9 ten\u00eda los pines rectos y yo sin embargo acab\u00e9 comprando unos con los pines acodados. \u00c9ste:</p> <p></p> <p>En estos casos lo que hay que hacer es dise\u00f1ar nuestra propia huella o footprint (el proceso se detalla en el punto 5 del workflow de KiCad).</p> <p>En la hoja LibreOffice incluida en los assets de cada release se detalla la lista de materiales junto con los enlaces que utilic\u00e9 para comprarlos. Como puede verse la mayor\u00eda de los componentes los adquir\u00ed en LCSC que es una empresa del mismo grupo que JLCPCB. En Aliexpress sale m\u00e1s barato adquirir componentes sueltos, pero cuando se trata de pedir numerosos componentes distintos, conviene que alguien nos los env\u00ede en un solo paquete como hace LCSC. En el pedido, encargu\u00e9 100 unidades de los componentes m\u00e1s sencillos como resistencias y condensadores y de los m\u00e1s complejos como el ATmega644p, el lector de microSD o el cristal 5 \u00f3 10 unidades. El pedido completo que me permite montar 5 consolas con env\u00edo includo fue de 43,60\u20ac. Si quisiera fabricar 95 m\u00e1s s\u00f3lo habr\u00eda que pedir el ATmega644p, los conectores (SNES y Euroconector), cristal y lector de microSD.</p> <p></p>"},{"location":"2020-02-08-eduzebox.html#preparar-herramientas-smd","title":"Preparar herramientas SMD","text":"<p>Como comentaba anteriormente, incorpor\u00e9 al proyecto desde un principio el reto a\u00f1adido de que parte de \u00e9l se realizara con componentes SMD. Esto requer\u00eda adquirir nuevas herramientas y habilidades. La verdad es que aunque para aprender prefiero leer a ver v\u00eddeos de YouTube, en este caso YouTube resulta insuperable. Por ejemplo:</p> <p>Aunque todos los componentes SMD que he utilizado en la placa se pueden llegar a soldar con hilo de esta\u00f1o, soldador de punta fina, algo de paciencia y un par de t\u00e9cnicas (una y otra), si emprend\u00eda este camino era para recorrerlo hasta el final. As\u00ed que me hice con los siguientes elementos:</p> <ul> <li> <p>Pistola de aire caliente</p> <p></p> </li> <li> <p>Tubo de pasta para soldar</p> <p></p> </li> </ul>"},{"location":"2020-02-08-eduzebox.html#montaje-final","title":"Montaje final","text":"<p>Una vez recibidos componentes y herramientas s\u00f3lo queda buscar un momento en que poderse sentar con tiempo por delante y buena iluminaci\u00f3n para disfrutar practicando nuevas habilidades.</p> <p></p> <p>El primer paso consiste en aplicar un poco de pasta en cada uno de los pads donde va a ir un componente SMD. Como consejo, ayuda el que la placa est\u00e9 un poco caliente para que la pasta fluya y se adhiera mejor a los pads. Para esto la cama caliente de la impresora 3D puede hacer ese papel. Por ejemplo ajustada a unos 50\u00baC para no quemarnos al apoyarnos.</p> <p></p> <p>Lo vemos m\u00e1s cerca en una porci\u00f3n de la placa.</p> <p></p> <p>A continuaci\u00f3n y con la hoja BOM delante, vamos extrayendo los componentes de la tira en que suelen venir para colocarlos con unas pinzas finas en su lugar. La pasta, que tiene la consistencia de la pasta de dientes, ayuda a que el componente se quede en su sitio.</p> <p></p> <p>Tras colocar el \u00faltimo componente, ya s\u00f3lo queda utilizar la pistola de aire caliente. De nuevo (como aprend\u00ed viendo este v\u00eddeo) conviene que la PCB se precaliente un poco para minimizar estr\u00e9s t\u00e9rmico en componentes y placa. De nuevo la cama caliente de la impresora 3D puede ayudarnos, ajustada esta vez a 100\u00baC. La pistola de aire caliente la ajust\u00e9 a 240\u00baC. Se aplica haciendo peque\u00f1os c\u00edrculos alrededor de los componentes. Las micropart\u00edculas de esta\u00f1o en un momento dado se funden entre s\u00ed, pasando del original gris oscuro mate de la pasta fr\u00eda al caracter\u00edstico brillo del esta\u00f1o. En el momento de convertirse la pasta en esta\u00f1o l\u00edquido, adem\u00e1s, por la tensi\u00f3n superficial de \u00e9ste, el componente se autoalinea por si mismo si no lo estuviera ya. Puede apreciarse por ejemplo en la resistencia R9 que coloqu\u00e9 un poco m\u00e1s elevada que el resto y que como vemos a continuaci\u00f3n se aline\u00f3 con sus hermanas.</p> <p></p> <p>En los componentes con pines m\u00faltiples y muy pr\u00f3ximos como el microcontrolador y el lector microSD, es muy f\u00e1cil que se produzcan puentes de esta\u00f1o entre varios pines. Para solucionar estos casos la t\u00e9cnica es aplicar flux en pasta y tratar de retirar algo de esta\u00f1o con la punta del soldador peinando los pines hacia el exterior. En los casos m\u00e1s dif\u00edciles aplicar malla desoldadora.</p> <p>S\u00f3lo queda soldar el resto de componentes de tipo THT con el tradicional soldador e hilo de esta\u00f1o. La verdad es que una vez conocida la nueva t\u00e9cnica casi apetece continuar con ella y soldar tambi\u00e9n los componentes de este tipo, pero la pasta es m\u00e1s cara que el hilo, as\u00ed que se reserva para SMD.</p> <p>Se recomienda no soldar todav\u00eda los LEDs o hacerlo aprovechando toda la longitud de sus terminales, ya que si vamos a imprimir la carcasa, tienen que alcanzar la parte superior de la misma.</p> <p></p> <p>Al finalizar ya tenemos la parte de hardware resuelta.</p> <p></p>"},{"location":"2020-02-08-eduzebox.html#carcasa","title":"Carcasa","text":"<p>En el repositorio del proyecto se incluyen ficheros de una carcasa a medida en el directorio case. Dentro encontraremos el fichero fuente en formato FreeCAD y los STLs de las tres partes de la carcasa.</p> <p>Antes de empezar tenemos que hacer un par de modificaciones en la placa reci\u00e9n montada para que la carcasa pueda cerrar. Son las siguientes:</p> <ol> <li>Cortaremos con un alicate de corte el alojamiento derecho del Euroconector (mir\u00e1ndolo de frente) para el tornillo de chasis.</li> <li>Abatiremos ligeramente (unos 30\u00ba) el regulador de tensi\u00f3n hasta que su altura se iguale a la del Euroconector.</li> </ol> <p></p> <p>Si no hemos soldado los LEDs como se recomendaba en el apartado Montaje final, podemos utilizar la carcasa superior como plantilla para soldarlos a la altura correcta. Para ello apoyaremos la carcasa superior sobre una superficie plana que tenga la altura que queramos que sobresalgan los LEDs (por ejemplo unas cuantas hojas de un cuaderno), dejando que los LEDs descuelguen hasta la superficie de trabajo:</p> <p></p> <p>Lo siguiente ser\u00e1 atornillar la PCB a la carcasa inferior con 4 tornillos de M2.5 de 4 mm de largo:</p> <p></p> <p>Antes de cerrar la carcasa, tenemos que colocar el bot\u00f3n sobre el pulsador de RESET. Constituir\u00e1 la \"O\" del logo EDUZEBOX que se ver\u00e1 en la parte superior de la carcasa:</p> <p></p> <p>Finalmente cerraremos la carcasa teniendo cuidado de que el bot\u00f3n que hemos colocado sobre el RESET quede enfocado al hueco que hay para \u00e9l:</p> <p></p>"},{"location":"2020-02-08-eduzebox.html#flash-de-juegos","title":"Flash de juegos","text":"<p>S\u00f3lo queda ocuparse de la parte software. Para que el microcontrolador ATmega644 haga algo hay que instalarle (flashearle) un firmware y configurar unos cuantos par\u00e1metros que determinan su modo de funcionamiento. inicialmente viene vac\u00edo y con los par\u00e1metros en sus valores predeterminados.</p> <p>El ATmega644 es muy parecido al ATmega328 que est\u00e1 montado sobre las placas Arduino, pero \u00e9ste tiene un par de ventajas:</p> <ol> <li>En Arduino existe adem\u00e1s otro chip que implementa el est\u00e1ndar USB y conecta el microcontrolador al PC.</li> <li>El microcontrolador lleva preflasheado un peque\u00f1o firmware llamado bootloader que atiende a este puerto en busca de unos comandos especiales para flashear desde el PC por USB.</li> </ol> <p>Aqu\u00ed ni tenemos USB ni bootloader, por lo que necesitamos un mecanismo de m\u00e1s bajo nivel previsto en todos los microcontrolador de la famila AVR de Atmel. Este mecanismo se denomina ISP y b\u00e1sicamente consiste en un protocolo basado en la variedad SPI de puerto serie. En las placas que incorporan un microcontrolador programable mediante este sistema solemos encontrar un conector t\u00edpico de 2x3 o 2x5 pines. En EdUzebox es el conector J3 que se encuentra justo encima del pulsador de reset.</p> <p></p> <p>Para poder programar el microcontrolador a trav\u00e9s de este puerto necesitamos un programador ISP. Hay muchas opciones. Podemos por ejemplo utilizar un Arduino UNO con el scketch <code>ArduinoISP</code> que viene entre los ejemplos del Arduino IDE. Sin embargo por alg\u00fan motivo que desconozco (a pesar de que creo que utilic\u00e9 las opciones correctas), no tuve \u00e9xito utilizando esta alternativa.</p> <p>Una opci\u00f3n seguramente m\u00e1s fiable es adquirir un programador ISP. De entre los muchos que hay en el mercado, seguramente uno de los m\u00e1s equilibrados es el USBtiny que adem\u00e1s es hardware libre, por lo que se encuentran clones muy econ\u00f3micos.</p> <p>Sin embargo cuando ya estaba a punto de adquirir uno de esos cl\u00f3nicos, descubr\u00ed que otra opci\u00f3n es utilizar la placa BusPirate de la que tengo una unidad hace tiempo. Realmente BusPirate es una navaja suiza en lo que a uso y depuraci\u00f3n de transmisiones serie se refiere que ya me ha dado muy buen servicio en unas cuantas ocasiones.</p> <p>Adem\u00e1s del programador o adaptador ISP que elijamos, necesitamos un programa que implemente este protocolo. Aqu\u00ed, aparte de las herramientas oficiales, en mi mano ten\u00eda dos opciones:</p> <ol> <li>Configurar el entorno de Arduino (Arduino IDE) para que soportara el microcontrolador ATmega644.</li> <li>Utilizar la herramienta de bajo nivel <code>avrdude</code> (que adem\u00e1s es la que utiliza Arduino IDE por debajo).</li> </ol> <p>Me decant\u00e9 por lo segundo, es decir por utilizar <code>avrdude</code> directamente. Necesitaba conocer los par\u00e1metros m\u00e1s recomendables para programar y configurar el ATmega644. Lo segundo es importante, es decir su configuraci\u00f3n. \u00c9sta se logra mediante 3 bytes especiales llamados fusebits que se mantienen en la memoria no vol\u00e1til del microcontrolador, en los que cada bit tiene un significado distinto. Entre algunos de los ajustes est\u00e1 el tipo y la velocidad de reloj que va a utilizar el chip. Este dato es important\u00edsimo, ya que el microcontrolador dispone de un reloj interno que es el que viene configurado de f\u00e1brica y que se activa simplemente al alimentar. Pero si m\u00e1s adelante se configura uno externo y no lo tenemos conectado o sin alimentar, no habr\u00e1 manera de comunicarse con el microcontrolador ya que no arrancar\u00e1 el protocolo ISP (ni ninguna otra cosa). Uzebox utiliza un reloj externo, por lo que en un momento dado lo configuraremos para usarlo y a partir de entonces deber\u00e1 estar conectado antes de hacer nada con el chip. Como decimos, para la primera programaci\u00f3n todo esto no es problema porque de serie el chip viene con una configuraci\u00f3n segura que activa el reloj interno, por lo que podremos comunicar sin problemas.</p> <p>Estudiando este post del foro de Uzebox y este apartado de la wiki llegu\u00e9 a entender que ten\u00eda que flashear dos cosas:</p> <ul> <li>Los siguientes fusebits:<ul> <li>LFuse: <code>0xFE</code></li> <li>HFuse: <code>0xD2</code></li> <li>EGuse: <code>0xFF</code></li> </ul> </li> <li>El bootloader que permite cargar los juegos desde la SD.</li> </ul> <p>En cuanto a los fusebits, para entender que ajustan exactamente ayuda mucho la siguiente calculadora de fusebits.</p> <p>El bootloader podemos encontrarlo en el post enlazado anteriormente. En concreto la \u00faltima versi\u00f3n en el momento de escribir este art\u00edculo era: Bootloader_0_4_5.hex</p> <p>A continuaci\u00f3n se detalla el proceso de flasheo desde Linux (supongo que desde Windows resultar\u00e1 muy similar). Como digo lo he realizado con un BusPirate como programador. Con un programador distinto como USBtiny s\u00f3lo hay que cambiar el par\u00e1metro <code>-c</code>:</p> <ol> <li> <p>Para tener disponible en el sistema <code>avrdude</code> podemos instalarlo desde el gestor de paquetes de Linux o bien instalar el Arduino IDE y averiguar la ruta donde queda. En mi caso lo instal\u00e9 desde el gestor de paquetes.</p> <pre><code>sudo apt install avrdude\n</code></pre> </li> <li> <p>Cableo el BusPirate siguiendo la documentaci\u00f3n del protocolo ISP para este aparato.</p> Pin ISP Se\u00f1al Pin BusPirate 1 MISO Negro:MISO 2 +5V Naranja:+5V 3 SCK Morado:CLK 4 MOSI Gris:MOSI 5 CS Blanco:CS 6 GND Marr\u00f3n:GND <p></p> </li> <li> <p>Flasheo primero el bootloader (ya que si empiezo por los fusebits temo perder la capacidad para comunicar con el chip):</p> <pre><code>sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v -U flash:w:/home/edumoreno/Bootloader_0_4_5.hex\n</code></pre> </li> <li> <p>Por \u00faltimo flasheo los fusebits:</p> <pre><code>sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v -V -B 1 -U lfuse:w:0xFE:m -U hfuse:w:0xD2:m -U efuse:w:0xFF:m\n</code></pre> </li> <li> <p>Aunque no es necesario, si queremos verificar el estado en que ha quedado el microcontrolador o testear la comunicaci\u00f3n, podemos lanzar simplemente:</p> <pre><code>sudo avrdude -c buspirate -p m644p -P /dev/ttyUSB0 -v\n</code></pre> </li> </ol> <p>En este momento si conectamos la consola a un televisor deber\u00edamos ver una im\u00e1gen indicando que la consola ha cobrado vida.</p>"},{"location":"2020-02-08-eduzebox.html#juegos","title":"Juegos","text":"<p>Lo primero que haremos ser\u00e1 copiar a la SD juegos. El directorio de los mismos podemos encontrarlo en este enlace del wiki. All\u00ed por cada juego se nos suele proporcionar el c\u00f3digo y el binario en dos formatos:</p> <ul> <li><code>.hex</code>: Para flasheo directo.</li> <li><code>.uze</code>: Para carga desde SD si se ha flasheado el bootloader.</li> </ul> <p>Existe tambi\u00e9n un pack con todos los juegos publicados descargable desde esta p\u00e1gina.</p>"},{"location":"2020-02-09-rg350_network.html","title":"RG350 Conexi\u00f3n a internet","text":"<p>Vamos a ver en este art\u00edculo un par de posibilidades para conectar la consola RG350 a internet.</p>"},{"location":"2020-02-09-rg350_network.html#a-traves-de-cable-usb","title":"A trav\u00e9s de cable USB","text":"<p>Cuando la RG350 se conecta por USB a trav\u00e9s del puerto USB2 al ordenador, se monta como un adaptador de red nuevo en el PC con una configuraci\u00f3n de punto a punto. Es decir, se define una nueva red entre los dos equipos, con s\u00f3lo dos IPs posibles, <code>10.1.1.1</code> para el PC y <code>10.1.1.2</code> para la RG350.</p> <p>As\u00ed es por ejemplo como se ve el adaptador desde la RG350:</p> <pre><code>usb0      Link encap:Ethernet  HWaddr 7E:5B:3B:17:C7:7A\n          inet addr:10.1.1.2  Bcast:0.0.0.0  Mask:255.255.255.252\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:62 errors:0 dropped:12 overruns:0 frame:0\n          TX packets:37 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:9880 (9.6 KiB)  TX bytes:7153 (6.9 KiB)\n</code></pre> <p>Y as\u00ed la contraparte en mi m\u00e1quina Linux:</p> <pre><code>enp0s29u1u2: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.1.1.1  netmask 255.255.255.252  broadcast 10.1.1.3\n        inet6 fe80::fe3:ce72:8963:ca1  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 1e:fc:4d:c7:bd:b1  txqueuelen 1000  (Ethernet)\n        RX packets 55  bytes 9539 (9.5 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 95  bytes 14091 (14.0 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <p>Como vemos por la netmask s\u00f3lo se dejan los dos \u00faltimos bits para definir direcciones, lo que s\u00f3lo permite como IPs posibles las terminadas en 1 y 2 (0 es la direcci\u00f3n de red y 3 la de broadcast).</p> <p>En lo que sigue, voy a ilustrar la situaci\u00f3n con mi infraestructura, en la que mi PC sale a internet a trav\u00e9s del adaptador <code>wlan0</code> con la IP <code>192.168.1.40</code>. Sustituir estos dos datos por los que corresponda.</p> <p></p> <p>As\u00ed las cosas, la RG350 no tiene salida a internet, ya que tenemos dos redes que no est\u00e1n interconectadas. Para conseguirla tenemos que establecer un puente entre las dos redes y configurar que se haga NAT para poder enviar los paquetes de una red a trav\u00e9s de la otra. Es decir, en realidad tenemos que convertir el PC que hay entre la RG y la salida a internet en un router.</p> <p>A continuaci\u00f3n se describen los pasos para hacerlo. Desgraciadamente s\u00f3lo he podido dise\u00f1ar el procedimiento para un equipo con Linux, que es lo que yo uso. Los usuarios de Windows parece que pueden conseguir el mismo efecto por medio de la utilidad NAT32 tal y como se explica en este video.</p> <ol> <li> <p>Activar el IP forward en el sistema:</p> <pre><code>sudo sh -c \"echo 1 &gt; /proc/sys/net/ipv4/ip_forward\"\n</code></pre> </li> <li> <p>Configurar una regla en IPables para hacer NAT de la red entre la RG y el PC (sustituir <code>wlan0</code> por el adaptador de red que d\u00e9 salida a internet en el PC, en mi caso el adaptador Wifi, y la IP <code>192.168.1.40</code> por la que tenga dicho adaptador en el PC):</p> <pre><code>sudo iptables -t nat -A POSTROUTING -s 10.1.1.0/2 -o wlan0 -j SNAT --to 192.168.1.40\n</code></pre> </li> <li> <p>A partir de este momento ya tendremos salida a internet, pero no se resolver\u00e1n los nombres de dominio ya que en la RG no hay definido ning\u00fan DNS. Para hacerlo crear el fichero <code>/usr/local/etc/resolv.conf</code> y definir dentro de \u00e9l nuestros DNS preferidos, por ejemplo los de OpenDNS:</p> <pre><code>nameserver 208.67.222.222\nnameserver 208.67.220.220\n</code></pre> </li> </ol> <p>Los pasos 1 y 2 no son permanentes en el sistema, por lo que cuando reiniciemos se perder\u00e1n. Si queremos que se mantengan entre reinicios habr\u00e1 que escribirlos en un script que se ejecute durante el arranque (por ejemplo a\u00f1adi\u00e9ndolos en <code>/etc/rc.local</code>).</p> <p>Ya podremos hacer cosas como \u00e9sta:</p> <pre><code>RG350:/media/data/local/home # wget apuntes.eduardofilo.es\n--2020-02-09 02:31:03--  http://apuntes.eduardofilo.es/\nResolving apuntes.eduardofilo.es... 185.199.108.153, 185.199.109.153, 185.199.110.153, ...\nConnecting to apuntes.eduardofilo.es|185.199.108.153|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 45544 (44K) [text/html]\nSaving to: 'index.html'\n\n100%[============================================================================================================&gt;] 45,544       130KB/s   in 0.3s\n\n2020-02-09 02:31:05 (130 KB/s) - 'index.html' saved [45544/45544]\n</code></pre>"},{"location":"2020-02-09-rg350_network.html#a-traves-de-adaptador-wifi","title":"A trav\u00e9s de adaptador Wifi","text":"<p>Tambi\u00e9n podemos conectar la consola a internet directamente y de forma inal\u00e1mbrica insertando un adaptador Wifi en el puerto USB1. Hay que tener en cuenta que no sirve cualquiera, ya que el sistema operativo s\u00f3lo da soporte a los adaptadores basados en los siguientes chips:</p> <ul> <li><code>Realtek RTL8188EU</code> 150Mb/s (BASE y ROGUE)</li> <li><code>Realtek RTL8188FU</code> 150Mb/s (s\u00f3lo ROGUE)</li> <li><code>Realtek RTL8192CU</code> 300Mb/s (BASE y ROGUE)</li> </ul> <p>Por ejemplo \u00e9ste para el que necesitaremos adem\u00e1s un adaptador para USB tipo C.</p> <p>En el siguiente video puede verse c\u00f3mo conectar y configurar el adaptador:</p>"},{"location":"2020-02-09-rg350_network.html#opkmanager","title":"OPKManager","text":"<p>Una vez que contemos con salida a internet en nuestra RG350, una de las cosas que podemos hacer es utilizar aplicaciones como OPKManager, que podemos ver en acci\u00f3n en el siguiente v\u00eddeo:</p> <p>Como explican en el v\u00eddeo, los controles <code>X</code> e <code>Y</code> est\u00e1n intercambiados respecto a lo que se ve en la leyenda inferior de la pantalla de la aplicaci\u00f3n:</p> <ul> <li><code>X</code>: Delete</li> <li><code>Y</code>: Copy/install</li> </ul> <p></p>"},{"location":"2020-02-13-rg350_emulationstation.html","title":"RG350 EmulationStation","text":"<p>Advertencia</p> <p>Comentar antes de empezar, que EmulationStation es pesado de configurar y el resultado final con frecuencia resulta lento (sobre todo si se tiene un gran n\u00famero de emuladores y ROMs en la consola). Tambi\u00e9n es propenso a errores extra\u00f1os. Se encuentran problemas con ROMs concretas y sobre todo con los ficheros <code>gamelist.xml</code> que aparecen con el scraping por exigencias en el formato del mismo que no est\u00e1n claras. A menudo la \u00fanica forma de solucionarlos es por ensayo/error introduciendo las ROMs o los <code>gamelist.xml</code> por lotes para aislar los problemas. Algunos emuladores como la \u00faltima versi\u00f3n de FBA no son capaces de lanzar las ROMs directamente.</p> <p>En este art\u00edculo vamos a ver c\u00f3mo instalar y configurar el frontend EmulationStation en la RG350.</p>"},{"location":"2020-02-13-rg350_emulationstation.html#instalacion","title":"Instalaci\u00f3n","text":"<p>Empezamos por la instalaci\u00f3n. Desgraciadamente adem\u00e1s de copiar un OPK como habitualmente, hay que mover unos cuantos ficheros a una ruta de la tarjeta interna. A continuaci\u00f3n los detalles paso a paso (las operaciones de copiado de ficheros se muestran con <code>DinguxCmdr</code> por ser accesible para todo el mundo, pero naturalmente se pueden hacer por FTP o SCP):</p> <ol> <li>Bajar este fichero y descomprimirlo. Dentro veremos un par de directorios y un README. Nos fijamos en el directorio <code>Internal SD Card</code> (el resto no los utilizaremos para nada).</li> <li>Abrir el directorio <code>Internal SD Card</code> y renombrar el directorio <code>data</code> que all\u00ed veremos a <code>.emulationstation</code> (si lo hacemos en Linux, el directorio desaparecer\u00e1 a no ser que tengamos activa la opci\u00f3n de mostrar archivos ocultos).</li> <li>Abrir el directorio que acabamos de renombrar en el paso anterior. Dentro veremos dos directorios y algunos ficheros. Borrar el directorio <code>gamelists</code> (ya que contiene listados de ROMs que ten\u00eda el autor del repositorio en su consola, lo que har\u00e1 m\u00e1s lenta la carga de EmulationStation).</li> <li>Subir un par de niveles de directorios hasta volver a tener a la vista el directorio <code>Internal SD Card</code>.</li> <li>Copiar este directorio a la tarjeta externa de la consola (mont\u00e1ndola en el PC con un adaptador o lector de tarjetas o por FTP, SCP, ...).</li> <li>Desmontar la SD del PC para devolverla a la ranura externa de la consola.</li> <li> <p>Abrir <code>DinguxCmdr</code>. Moverse por la estructura de ficheros hasta localizar a la izquierda la ruta <code>/media/sdcard/Internal SD Card</code> y a la derecha <code>/media/sdcard/apps</code>. La ruta de la derecha es donde vamos a instalar el OPK. En este caso hemos indicado la ruta donde est\u00e1n los OPKs en la tarjeta externa. Alternativamente se puede utilizar la ruta donde est\u00e1n los OPKs en la interna que es <code>/media/data/apps</code>, si se prefiere instalar en esta tarjeta:</p> <p></p> </li> <li> <p>Seleccionar el fichero <code>emulationstation.opk</code> en el panel izquierdo y pulsar <code>X</code>. En el men\u00fa que aparece seleccionar <code>Copy &gt;</code> y confirmar con <code>A</code>:</p> <p></p> </li> <li> <p>Cambiar en el panel derecho la ruta a <code>/media/data/local/home</code>:</p> <p></p> </li> <li> <p>Seleccionar en el panel izquierdo el directorio <code>.emulationstation</code> y pulsar <code>X</code>. En el men\u00fa que aparece seleccionar <code>Copy &gt;</code> y confirmar con <code>A</code>:</p> <p></p> </li> <li> <p>Finalmente salir de <code>DinguxCmdr</code> pulsando <code>Y</code> y seleccionando <code>Quit</code>:</p> <p></p> </li> </ol> <p>Con esto finaliza la instalaci\u00f3n de la aplicaci\u00f3n.</p>"},{"location":"2020-02-13-rg350_emulationstation.html#configuracion","title":"Configuraci\u00f3n","text":"<p>Para que EmulationStation reconozca los distintos sistemas de emulaci\u00f3n, deben estar correctamente registrados en uno de los ficheros de configuraci\u00f3n que hemos copiado durante la instalaci\u00f3n, concretamente el que queda en la ruta <code>/usr/local/home/.emulationstation/es_systems.cfg</code>. Desafortunadamente no hay ning\u00fan medio para hacer esta configuraci\u00f3n autom\u00e1ticamente. Nos va a tocar hacerlo manualmente.</p> <p>Estamos en una situaci\u00f3n muy similar a la de SimpleMenu. De hecho el apartado de Configuraci\u00f3n de ese art\u00edculo, conceptualmente nos sirve aqu\u00ed. S\u00f3lo cambia el formato concreto de la configuraci\u00f3n que necesita EmulationStation. Se recomienda por tanto hacer como en el caso de SimpleMenu, es decir, transferir el fichero de configuraci\u00f3n <code>/usr/local/home/.emulationstation/es_systems.cfg</code> al ordenador para editarlo all\u00ed con un editor que soporte directamente el formato de texto de Linux. Por ejemplo Notepad++. En realidad podemos aprovechar la copia que todav\u00eda tendremos en la tarjeta externa que hay dentro de la carpeta <code>.emulationstation</code> que renombramos durante la instalaci\u00f3n.</p> <p>El fichero <code>es_systems.cfg</code>, aunque no lo indique la extensi\u00f3n, internamente tiene formato XML. Se trata por tanto de una serie de bloques anidados que comienzan y terminan con etiquetas encerradas entre los s\u00edmbolos <code>&lt;</code> y <code>&gt;</code>. El bloque ra\u00edz se define con la etiqueta <code>&lt;systemList&gt;</code> y dentro de \u00e9l hay un bloque <code>&lt;system&gt;</code> para cada emulador. Dentro de este bloque ya directamente se encuentran los distintos par\u00e1metros del emulador. Como vemos la filosof\u00eda es muy similar a la del fichero de configuraci\u00f3n de SimpleMenu, s\u00f3lo que en \u00e9ste \u00faltimo el formato del archivo no era XML, sino el que se utiliza habitualmente para los ficheros de configuraci\u00f3n tipo INI. De hecho si ya tenemos SimpleMenu instalado y configurado, podemos utilizar su fichero de configuraci\u00f3n como plantilla para transplantar todos los par\u00e1metros (que son pr\u00e1cticamente los mismos) a <code>es_systems.cfg</code>.</p> <p>Un bloque <code>&lt;system&gt;</code> de un sistema como Game Boy podr\u00eda ser el siguiente:</p> <pre><code>&lt;system&gt;\n    &lt;name&gt;gb&lt;/name&gt;\n    &lt;fullname&gt;Gameboy&lt;/fullname&gt;\n    &lt;path&gt;/media/sdcard/roms/Gameboy&lt;/path&gt;\n    &lt;extension&gt;.gb&lt;/extension&gt;\n    &lt;command&gt;opkrun \"/media/sdcard/apps/gambatte.opk\" %ROM%&lt;/command&gt;\n    &lt;platform&gt;gb&lt;/platform&gt;\n&lt;/system&gt;\n</code></pre> <p>Es recomendable poner entre comillas la ruta del OPK para as\u00ed no tener que escapar caracteres especiales como los espacios y los par\u00e9ntesis.</p> <p>Vamos a detallar el significado de cada par\u00e1metro (la documentaci\u00f3n original puede encontrarse aqu\u00ed):</p> <ul> <li><code>name</code>: Nombre corto del sistema. Usado en algunas estructuras de directorios y mensajes de error.</li> <li><code>fullname</code>: Nombre descriptivo. Es el que aparece en el frontend. Esta etiqueta es opcional. Si no est\u00e1 se usar\u00e1 <code>name</code> en su lugar.</li> <li><code>path</code>: Ruta de las ROMs.</li> <li><code>extension</code>: Extensiones de las ROMs que se listar\u00e1n dentro del sistema. Las distintas extensiones se separan por comas o espacios.</li> <li><code>command</code>: Comando con el que se lanzar\u00e1 el emulador cuando seleccionemos una ROM. Lo normal ser\u00e1 que contenga algunos par\u00e1metros que ser\u00e1n sustituidos, como por ejemplo <code>%ROM%</code> que se convertir\u00e1 en la ruta de la ROM seleccionada.</li> <li><code>platform</code>: Plataforma utilizada cuando se hace scraping. Esta etiqueta es opcional. La lista completa de los c\u00f3digos de plataforma se encuentra en la p\u00e1gina de documentaci\u00f3n de EmulationStation. Se pueden poner varias plataformas separadas por comas, por ejemplo <code>genesis,megadrive</code>.</li> </ul> <p>Una vez que devolvamos el fichero de configuraci\u00f3n <code>es_systems.cfg</code> a su lugar en <code>/usr/local/home/.emulationstation</code>, el resultado al abrir EmulationStation ser\u00e1 \u00e9ste:</p> <p> </p> <p>Como se ve en las fotos, al menos en mi sistema algunos de los textos se ven ligeramente distorsionados. Esto se puede solucionar o mejorar cambiando el tema. La instalaci\u00f3n que hemos hecho lleva 4 temas preinstalados. Desafortunadamente, el que viene por defecto y que produce esos peque\u00f1os defectos gr\u00e1ficos es el que me parecer\u00eda m\u00e1s recomendable si no fuera por este problema.</p> <p>Como punto de partida dejo aqu\u00ed mi fichero de configuraci\u00f3n que contiene la mayor\u00eda de los emuladores y la estructura de directorios para las ROMs que se utilizan habitualmente.</p> <ul> <li>es_systems.cfg</li> </ul>"},{"location":"2020-02-13-rg350_emulationstation.html#arranque","title":"Arranque","text":"<p>EmulationStation aparecer\u00e1 como aplicaci\u00f3n en la secci\u00f3n <code>Emulators</code> de GMenu2X (no como SimpleMenu cuyo lanzador tenemos que a\u00f1adir a mano). Si queremos que EmulationStation se autoarranque en el inicio de la consola tenemos que proceder como sigue:</p> <ol> <li>Bajar el fichero frontend_start.</li> <li>Copiarlo a la ra\u00edz de la microSD externa.</li> <li>Montar la microSD externa en la RG350 y arrancar. La ruta del fichero que acabamos de copiar, se encuentra en <code>/media/sdcard/frontend_start</code>.</li> <li>Abrir <code>DinguxCmdr</code>y copiar el fichero <code>frontend_start</code> a la ruta <code>/media/data/local/sbin</code>.</li> <li> <p>Hacer ejecutable el fichero instalado. Desafortunadamente DinguxCmdr no nos ayuda en este caso. Tendremos que ejecutar el siguiente comando desde consola, ya sea por SSH o utilizando una aplicaci\u00f3n de terminal como <code>ST-SDL</code>:</p> <pre><code># chmod +x /media/data/local/sbin/frontend_start\n</code></pre> </li> </ol> <p>Tal y como est\u00e1 dise\u00f1ado el script de arranque que acabamos de copiar, si salimos de EmulationStation (tecla <code>Start</code> y luego eligiendo <code>Quit</code> y <code>Quit EmulationStation</code>), se abrir\u00e1 GMenu2X.</p> <p>Para el \u00faltimo paso merece la pena intentar conectar por SSH ya que las \u00faltimas versiones de Windows 10 ya incorporan el cliente de forma predeterminada. Para ello, estando la RG350 conectada por USB2 al ordenador, abrir una terminal o consola (buscando en el men\u00fa inicio o en Cortana <code>cmd</code>) y teclear lo siguiente:</p> <pre><code>ssh root@10.1.1.2\n</code></pre> <p>Si nos aparece lo siguiente es que hemos conseguido abrir una terminal dentro del sistema de la RG350. Desde all\u00ed podremos ejecutar directamente el comando del punto 5 de la lista anterior.</p> <pre><code>edumoreno@pceduardo:~$ ssh root@10.1.1.2\n _________________________\n&lt; Welcome to ROGUE resistance ! &gt;\n -------------------------\n           |\\\n        &lt;=--===\\&gt;   -------\n          ==0=[]=&gt;&gt;\n        &lt;=--===/&gt;   -------\n           |/\n\nRG350:/media/data/local/home # chmod +x /media/data/local/sbin/frontend_start\n</code></pre>"},{"location":"2020-02-13-rg350_emulationstation.html#boxart","title":"Boxart","text":"<p>Una de las funcionalidades m\u00e1s interesantes de EmulationStation es su capacidad para adornar la presentaci\u00f3n del listado de ROMs con previsualizaciones de los juegos y con metainformaci\u00f3n (fecha de publicaci\u00f3n, compa\u00f1\u00eda desarrolladora, n\u00famero de jugadores, etc.). Esta funcionalidad se basa en un fichero de texto llamado <code>gamelist.xml</code> en formato XML (parecido al que hemos visto antes para la configuraci\u00f3n de los sistemas). El fichero puede estar en varios sitios, pero la ubicaci\u00f3n m\u00e1s conveniente es el propio directorio de las ROMs. Deber\u00e1 haber un fichero <code>gamelist.xml</code> por sistema, es decir por directorio de ROMs.</p> <p>Como siempre que hablamos de este tema, interesa utilizar una herramienta que automatice el proceso, ya que normalmente tendremos muchas ROMs por cada sistema y aparte de largo y tedioso, escribir manualmente ficheros XML supone casi con toda seguridad introducir errores en su estructura. As\u00ed pues ser\u00e1 conveniente utilizar un Scraper como los siguientes:</p> <ul> <li>Steven Selph's Scraper: Instrucciones</li> <li>Lars Muldjord's Skyscraper: Instrucciones</li> <li>Skraper</li> <li>Universal XML Scraper</li> </ul> <p>Vamos a detallar el uso de los dos \u00faltimos para generar los ficheros <code>gamelist.xml</code> y las im\u00e1genes de previsualizaci\u00f3n de los sistemas que tengamos instalados en la consola. Skraper ofrece m\u00e1s posibilidades de configuraci\u00f3n y mejor experiencia que Universal XML Scraper. Incluyo el segundo por ofrecer m\u00e1s posibilidades (por ejemplo Skraper no se ofrece compilado en versi\u00f3n 32 bit).</p>"},{"location":"2020-02-13-rg350_emulationstation.html#skraper","title":"Skraper","text":"<p>Seguiremos los 8 pasos vistos en el post anterior RG350 Scraper, a\u00f1adiendo las siguientes opciones al paso 7:</p> <ul> <li>Apartado <code>Lista de juegos</code><ul> <li><code>Tipo de Lista de Juego</code>: <code>EmulationStation gamelist.xml</code></li> <li><code>Ruta absoluta de lista de juegos</code>: <code>%ROMROOTFOLDER%\\gamelist.xml</code></li> </ul> </li> <li>Apartado <code>Media</code>:<ul> <li><code>Enlace a la lista de juegos</code>: <code>Enlace desde el nodo '&lt;image&gt;'</code></li> </ul> </li> </ul> <p>De esta forma, adem\u00e1s de las im\u00e1genes en los subdirectorios <code>.previews</code> dentro de los directorios de ROMs de los sistemas (compatible por tanto en este caso con las previsualizaciones de GMenu2X), aparecer\u00e1 tambi\u00e9n el fichero <code>gamelist.xml</code> que contiene la metainformaci\u00f3n de los juegos y el enlace a las im\u00e1genes. A partir de que se incorpore el fichero <code>gamelist.xml</code> en los distintos sistemas empezaremos a ver el men\u00fa de ROMs correspondiente con la metainformaci\u00f3n y las im\u00e1genes:</p> <p></p>"},{"location":"2020-02-13-rg350_emulationstation.html#universal-xml-scraper","title":"Universal XML Scraper","text":"<ol> <li>Extraer la tarjeta externa de la RG350 y montarla con un adaptador o lector en el PC.</li> <li>Descargar Universal XML Scraper V2 y ejecutar.</li> <li> <p>Al abrirlo lo primero que se nos pregunta es por el idioma. Elegir <code>English (US)</code> porque en todas las pruebas que hice en <code>Espa\u00f1ol</code> EmulationStation se cerraba cuando seleccionaba un juego en cuya descripci\u00f3n hab\u00eda acentos:</p> <p></p> </li> <li> <p>Despu\u00e9s se inicia una especia de asistente. En \u00e9l seleccionar <code>Recalbox</code> como Sistema Operativo:</p> <p></p> </li> <li> <p>En la segunda pantalla del asistente seleccionar el tipo de previsualizaci\u00f3n que m\u00e1s nos guste y si es un mix el tipo de mix:</p> <p> </p> </li> <li> <p>Lo siguiente es localizar la ruta de las ROMs. Seleccionaremos <code>Localy</code> (imagen de PC) y acto seguido localizamos el diretorio <code>roms</code> de la tarjeta montada en el punto 1:</p> <p> </p> </li> <li> <p>Nos pregunta si estamos registrados en ScreenScraper. Si en el pasado seguimos el post anterior RG350 Scraper, ya tendremos la cuenta creada. Si no, nos permite continuar sin cuenta:</p> <p> </p> </li> <li> <p>Por \u00faltimo aparece una \u00faltima pantalla de confirmaci\u00f3n para inciar el scraping:</p> <p></p> </li> <li> <p>Al comenzar se nos preguntar\u00e1 por el directorio de ROMs del que queremos hacer el scraping y el sistema al que pertenece:</p> <p> </p> </li> <li> <p>Sobre la ventana principal veremos el progreso del scraping:</p> <p></p> </li> <li> <p>Tras un tiempo durante el cual se generar\u00e1n y bajar\u00e1n las previsualizaciones, cerraremos el programa. En ese momento veremos que junto a las ROMs del sistema seleccionado se habr\u00e1n creado dos cosas:</p> <ul> <li>Un directorio llamado <code>downloaded_images</code> que contendr\u00e1 las im\u00e1genes.</li> <li>Un fichero llamado <code>gamelist.xml</code> con la metainformaci\u00f3n y las rutas de las im\u00e1genes asociadas a cada ROM.</li> </ul> </li> </ol> <p>Podr\u00edamos pensar que renombrando el directorio <code>downloaded_images</code> por <code>.previews</code> conseguiremos que las previsualizaciones sean compatibles con GMenu2X, pero no es as\u00ed porque los nombres de las im\u00e1genes incluyen el sufijo <code>-image</code> antes de la extensi\u00f3n.</p> <p>Ya podemos extraer la microSD del PC y devolverla a la RG350. Ya deber\u00edamos poder ver las previsualizaciones y la metainformaci\u00f3n de los juegos scrapeados:</p> <p></p>"},{"location":"2020-02-13-rg350_emulationstation.html#temas","title":"Temas","text":"<p>Por \u00faltimo vamos a hacer un muestrario de los temas que trae precargados la versi\u00f3n de EmulationStation que acabamos de instalar. El tema se cambia dentro de la secci\u00f3n <code>UI Settings</code> del <code>Main Menu</code> que aparece al pulsar <code>Start</code>:</p> <p></p> <p>Es la \u00faltima opci\u00f3n de esa pantalla:</p> <p></p> <p>Los temas disponibles son estos cuatro, aunque los dos \u00faltimos parecen ser el mismo:</p> <p></p> <p>Vamos a ver ejemplos de cada uno:</p>"},{"location":"2020-02-13-rg350_emulationstation.html#pixelperfect","title":"PixelPerfect","text":""},{"location":"2020-02-13-rg350_emulationstation.html#pixel","title":"Pixel","text":""},{"location":"2020-02-13-rg350_emulationstation.html#simple-y-simplegcw","title":"Simple y SimpleGCW","text":""},{"location":"2020-02-13-rg350_emulationstation.html#personalizacion-de-los-temas","title":"Personalizaci\u00f3n de los Temas","text":"<p>Los temas se encuentran instalados en la ruta <code>/media/data/local/home/.emulationstation/themes</code>. Dentro de ella encontramos un directorio por cada tema disponible:</p> <pre><code>RG350:/media/data/local/home/.emulationstation/themes # ls -l\ndrwx------   69 root     root          4096 Feb 10 21:38 _PixelPerfect (Default)\ndrwx------   64 root     root          4096 Feb 10 21:38 pixel\ndrwx------   62 root     root          4096 Feb 10 21:38 simple\ndrwx------   64 root     root          4096 Feb 10 21:38 simplegcw\n</code></pre> <p>El nombre del directorio ser\u00e1 el que luego aparezca en el listado de temas en los ajustes de ES:</p> <p></p> <p>Dentro de cada uno de los temas encontramos los siguientes elementos:</p> <ul> <li>Fichero <code>simple.xml</code>: Configuraci\u00f3n general del tema. El nombre del fichero puede ser cualquiera pero hay que tener en cuenta que se hace referencia a \u00e9l dentro de la configuraci\u00f3n particular de cada sistema que luego veremos, por lo que si ya hemos empezado a adaptar los mismos no podremos cambiar su nombre a no ser que lo reemplacemos en todos ellos.</li> <li>Directorio <code>art</code> con recursos generales del tema como tipos de letra e im\u00e1genes. En realidad este directorio es m\u00e1s conveniente que necesario, es decir, los recursos que contienen est\u00e1n enlazados dentro del fichero <code>simple.xml</code>, por lo que podr\u00edan estar en otro lugar.</li> <li>Directorios de cada sistema: Por cada sistema que queramos mostrar en ES tendremos un directorio con su nombre. Los nombres de los sistemas pueden ser cualquiera que hayamos utilizado en el par\u00e1metro <code>name</code> del fichero <code>es_systems.cfg</code>, aunque se recomienda utilizar los que aparecen en el apartado Recommended Theme Names que hay en esta p\u00e1gina:</li> </ul> <p>En el siguiente listado podemos ver todos estos elementos (se ocultan la mayor\u00eda de los sistemas para que no quede muy voluminoso):</p> <pre><code>RG350:/media/data/local/home/.emulationstation/themes/simple # ls -l\ndrwx------    3 root     root          4096 Feb 10 21:38 3do\ndrwx------    3 root     root          4096 Feb 10 21:38 amiga\ndrwx------    3 root     root          4096 Feb 10 21:38 amstradcpc\ndrwx------    3 root     root          4096 Feb 10 21:38 apple2\ndrwx------    2 root     root          4096 Feb 10 21:38 art\ndrwx------    3 root     root          4096 Feb 10 21:38 atari2600\ndrwx------    3 root     root          4096 Feb 10 21:38 atari5200\n...\ndrwx------    3 root     root          4096 Feb 10 21:38 segacd\ndrwx------    3 root     root          4096 Feb 10 21:38 sfc\n-rw-r--r--    1 root     root          2785 Feb 10 21:38 simple.xml\ndrwx------    3 root     root          4096 Feb 10 21:38 snes\ndrwx------    3 root     root          4096 Feb 10 21:38 vectrex\n...\ndrwx------    3 root     root          4096 Feb 10 21:38 zxspectrum\n</code></pre> <p>Si por ejemplo queremos a\u00f1adir un sistema nuevo, tan s\u00f3lo tendremos que crear un nuevo directorio con un fichero <code>theme.xml</code> y resto de ficheros a los que luego se haga referencia en \u00e9l. Por ejemplo este es el contenido del directorio correspondiente a Game Boy en el tema <code>Simple</code>:</p> <pre><code>RG350:/media/data/local/home/.emulationstation/themes/simple/gb # find .\n.\n./art\n./art/gb_art.png\n./art/gb.svg\n./art/gb_art_blur.jpg\n./theme.xml\n</code></pre> <p>Como vemos junto al fichero XML hay un directorio <code>art</code> que contiene tres im\u00e1genes. Al igual que con los recursos generales del tema, este directorio se utiliza por organizaci\u00f3n, no por necesidad. Los recursos que contienen est\u00e1n enlazados dentro de <code>theme.xml</code>, por lo que podr\u00edan estar en otro lugar.</p> <p>El fichero <code>theme.xml</code> puede contener mucha informaci\u00f3n. Lo mejor es clonar todo el directorio de otro sistema y adaptar las im\u00e1genes y las referencias a \u00e9stas dentro de <code>theme.xml</code>.</p>"},{"location":"2020-02-16-panelizar_pcb.html","title":"Panelizar PCB","text":"<p>\u00daltimamente uso mucho el servicio de fabricaci\u00f3n de PCBs de JLCPCB. En la modalidad de prototipado, fabricar 5 placas de hasta 10x10cm cuesta 2\u20ac (m\u00e1s unos 7\u20ac de env\u00edo, pero suelo hacer pedidos m\u00faltiples, aunque en ese caso a partir de la segunda placa el coste es de 4\u20ac). Como los proyectos para los que tengo capacidad no pueden ser muy grandes, normalmente las placas que dise\u00f1o quedan bastante por debajo de esas dimensiones. En esos casos, para aprovechar mejor el pedido se puede panelizar la PCB, es decir meter varias unidades de la misma en el fichero Gerber.</p> <p>Tambi\u00e9n se puede panelizar desde el mismo sitio, pero en ese caso ya no aplica la oferta de 2\u20ac.</p> <p></p>"},{"location":"2020-02-16-panelizar_pcb.html#preparar-los-gerbers","title":"Preparar los Gerbers","text":"<p>Los Gerber deben utilizar las extensiones de tipo Protel. En las \u00faltimas versiones de KiCad se utiliza por defecto la misma extensi\u00f3n en todos los ficheros (<code>.GBR</code>) y el tipo de fichero/capa se codifica en el nombre. En estos casos para obtener las extensiones Protel podemos hacer dos cosas:</p> <ul> <li>Convertir las extensiones manualmente. Por ejemplo en este enlace podemos encontrar la correspondencia (ojo porque la correspondencia de la extensi\u00f3n <code>.GTO</code> es con la capa <code>F.SILKS</code> y no con la <code>F.MASK</code> como indica la tabla).</li> <li>Marcar la opci\u00f3n <code>Use Protel filename extensions</code> en el cuadro de di\u00e1logo de trazado de los Gerber. Tambi\u00e9n la opci\u00f3n <code>PTH and NPTH in single file</code> del cuadro de di\u00e1logo de generaci\u00f3n de los drill files.</li> </ul>"},{"location":"2020-02-16-panelizar_pcb.html#panelizacion","title":"Panelizaci\u00f3n","text":"<p>Una vez que tengamos los ficheros Gerber con las extensiones Protel comprimidos en un ZIP, utilizaremos una utilidad gratuita para disponer varias copias de la PCB dentro del panel de 10x10cm que JLCPCB nos permite. Vamos a ver c\u00f3mo hacerlo paso a paso.</p> <ol> <li>Bajar la \u00faltima release de las GerberTools desde aqu\u00ed.</li> <li>Descomprimir el ZIP y abrir el ejecutable <code>GerberPanelizer.exe</code> que hay dentro del directorio <code>Panelizer</code>.</li> <li>Seleccionar <code>New</code> del men\u00fa <code>File</code>. Por defecto nos aparecer\u00e1 un panel de 10x10cm que es lo que necesitamos. Si por alg\u00fan motivo no ocurriera as\u00ed o nos interesaran otras dimensiones, podemos cambiarlas en el men\u00fa <code>Panel Properties</code>.</li> <li> <p>Arrastrar el archivo ZIP que contiene los Gerber al panel. Aparecer\u00e1 la silueta de la PCB en pantalla. Puede ocurrir que s\u00f3lo veamos un aspa con forma de signo <code>+</code>. Suele ocurrir porque al dise\u00f1ar la PCB en KiCad normalmente se sit\u00faa en el centro del \u00e1rea de dibujo, y el punto en el que arrastramos el ZIP se asimila a la esquina superior izquierda de dicha \u00e1rea de dibujo. Para alcanzar a ver la silueta de la PCB y poderla arrastrar hasta el interior del panel, utilizar el men\u00fa <code>View &gt; Scale 1:1</code>. Tambi\u00e9n podemos probar a dar valores negativos a los par\u00e1metros <code>X</code> e <code>Y</code> que vemos en el panel derecho de la aplicaci\u00f3n:</p> <p></p> </li> <li> <p>Una vez recolocada la PCB dentro del panel, a\u00f1adiremos nuevas instancias de la misma haciendo click sobre la instancia inicial en el listado de la derecha. Como alternativa podemos hacer click con el bot\u00f3n derecho del rat\u00f3n sobre el panel y seleccionar la entrada <code>Add Instance</code> del men\u00fa contextual:</p> <p></p> </li> <li> <p>A\u00f1adiremos todas las instancias de la placa que quepan en el panel. En ocasiones nos puede interesar girar una de las instancias. Para ello utilizaremos los controles que hay en el panel situado bajo el listado de instancias. Al girar puede ocurrir que la instancia desaparezca de la visualizaci\u00f3n por el problema descrito en el punto 4. De nuevo jugar con las opciones de zoom o dar valor manualmente a los campos <code>X</code> e <code>Y</code>:</p> <p></p> </li> <li> <p>Llega el momento de a\u00f1adir las pesta\u00f1as que unir\u00e1n las distintas instancias para constituir un panel. Para ello haremos click sobre el punto donde deseemos colocar una pesta\u00f1a de uni\u00f3n y seleccionaremos <code>Add Breaktab</code> del men\u00fa contextual. Advertir que para que la pesta\u00f1a sea operativa, las instancias de la PCB deben estar separadas una distancia m\u00ednima. El programa nos advertir\u00e1 sobre ello marcando la pesta\u00f1a en rojo si sucede este problema:</p> <p></p> </li> <li> <p>A\u00f1adiremos por lo menos 2 pesta\u00f1as por lado adyacente:</p> <p></p> </li> <li> <p>S\u00f3lo queda exportar el panel resultante mediante el comando de men\u00fa <code>File &gt; Export Merged Gerbers</code>. Tras terminar el progreso que se muestra sobre una peque\u00f1a ventana, obtendremos dos vistas de ambas caras del panel y los Gerbers resultantes en el directorio que hayamos seleccionado donde guardar el resultado de la exportaci\u00f3n.</p> </li> </ol> <p>Aqu\u00ed podemos ver el proceso en video:</p> <p>Advertencia</p> <p>Debo mencionar que he observado que la utilidad Panelizer introduce un problema en el panel resultante. Por alg\u00fan motivo pierde el detalle de los agujeros alargados y los convierte en dos agujeros hechos al comienzo y al final. Prestar atenci\u00f3n por tanto a si nuestras huellas incluyen agujeros de este tipo.</p> <p> </p> <p>Aclaraci\u00f3n</p> <p>A la vista de este art\u00edculo podr\u00eda pensarse que podemos aprovechar el sistema de panelizaci\u00f3n para encargar varias PCBs en un mismo pedido sin m\u00e1s que a\u00f1adir instancias de distintas PCBs al panel. En teor\u00eda hay que declarar cu\u00e1ntas PCBs distintas hay en un panel panelizado por el usuario en el par\u00e1metro <code>Different Design</code> a la hora de hacer el pedido. Desconozco si JLCPCB detectar\u00e1 y no admitir\u00e1 este tipo de pedidos, aunque sospecho que as\u00ed es.</p> <p></p>"},{"location":"2020-03-19-rg350_backup.html","title":"RG350 Backup","text":"<p>Aplicaci\u00f3n de gesti\u00f3n de backup</p> <p>Existe la aplicaci\u00f3n Py Backup que facilita enormemente la gesti\u00f3n de los backups en RG350. Ver este art\u00edculo para m\u00e1s detalles.</p> <p>Vamos a hablar de algo de lo que nunca se habla lo suficiente, de backups.</p> <p>Algunas de las acciones que hacemos con la RG350 tienen su contrapartida en forma de ficheros que suelen quedar almacenados en el directorio Home del sistema que se encuentra en la tarjeta interna, concretamente en <code>/media/data/local/home</code>.</p> <p>Nota</p> <p>tambi\u00e9n sirven <code>/media/home</code> y <code>/usr/local/home</code> ya que son enlaces simb\u00f3licos, una especie de alias o accesos directos, pero la ruta f\u00edsica es la que se ha indicado antes.</p> <p>En el directorio Home se almacenan cosas como:</p> <ul> <li>Settings de los emuladores.</li> <li>BIOS de algunos emuladores como PCSX4All.</li> <li>Previews de algunos emuladores como FBA.</li> <li>Y seguramente lo m\u00e1s importante, los savestates o los ficheros que aparecen al utilizar el sistema de almacenamiento de la consola emulada como los memorycards de PlayStation.</li> </ul> <p>Si en alg\u00fan momento perdemos el contenido de la tarjeta interna (ya sea por descuido o por fallo de la misma), perderemos todo lo anterior. Por tanto es conveniente resguardar al menos los ficheros m\u00e1s valiosos como los savestates para evitar disgustos futuros. Una manera es copiar manualmente los ficheros que m\u00e1s nos importen. Podemos hacerlo copi\u00e1ndolos a la tarjeta externa con DinguxCmdr o conectando con la consola por cable y abriendo una sesi\u00f3n SSH o FTP. Aqu\u00ed vamos a ver una alternativa m\u00e1s f\u00e1cil y que respaldar\u00e1 el contenido completo del directorio Home.</p>"},{"location":"2020-03-19-rg350_backup.html#comando-de-backup","title":"Comando de backup","text":"<p>Vamos a empezar conociendo el comando que vamos a utilizar. OpenDingux como sabemos es un sistema Linux. En estos sistemas hay una utilidad y formato de archivo muy popular pensado para realizar backups llamado <code>tar</code>. Proviene de cuando los backups se hac\u00edan en cintas y de ah\u00ed el nombre (Tape ARchive). Est\u00e1 instalado pr\u00e1cticamente en todos los sitemas Linux existentes, por lo que est\u00e1 muy disponible. La forma habitual de utilizarlo es por l\u00ednea de comando, pero que nadie se asuste. Vamos a empezar vi\u00e9ndolo de esta forma pero m\u00e1s adelante veremos c\u00f3mo ejecutar este comando desde una aplicaci\u00f3n gr\u00e1fica disponible en ROGUE.</p> <p>Un comando adecuado para \"entarar\" el directorio Home ser\u00eda el siguiente (\"entarar\" es como se dice en la jerga a la acci\u00f3n de respaldar algo con <code>tar</code>):</p> <pre><code>tar -cf /media/sdcard/home_backup.tar -C /media/data/local home\n</code></pre> <p>Ejecutando esto nos aparecer\u00eda en la ra\u00edz de la tarjeta externa un fichero de nombre <code>home_backup.tar</code> con el contenido del directorio <code>/media/data/local/home</code>. En una consola reci\u00e9n comprada o instalada el comando anterior se ejecuta muy r\u00e1pidamente y el fichero resultante ser\u00e1 peque\u00f1o. Si hemos colocado ficheros muy grandes o numerosos en el Home, cosa que es necesario para algunos emuladores, el fichero resultante puede llegar a ser muy grande y el proceso tardar mucho tiempo. En este caso tendremos que recordar o averiguar qu\u00e9 ficheros merece la pena excluir del backup como veremos a continuaci\u00f3n.</p>"},{"location":"2020-03-19-rg350_backup.html#excluyendo-ficheros-del-backup","title":"Excluyendo ficheros del backup","text":"<p>Una vez que sepamos qu\u00e9 directorios o ficheros del Home se pueden excluir del backup las incorporaremos al comando <code>tar</code>. Como ejemplo vamos a utilizar el directorio de previews de FBA que este emulador obliga a que se encuentre en el Home, concretamente en <code>/media/data/local/home/.fba/previews</code>. El comando de backup quedar\u00e1 como sigue:</p> <pre><code>tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude=home/.fba/previews home\n</code></pre> <p>Como vemos lo que tenemos que hacer es a\u00f1adir el par\u00e1metro <code>--exclude</code> con el valor de la ruta a excluir a partir de <code>home</code>. Es decir no hay que poner delante <code>/media/data/local</code> ya que la opci\u00f3n <code>-C</code> que est\u00e1 poco antes en el comando establece ese directorio como la ra\u00edz. Por cada directorio o archivo que queramos excluir a\u00f1adiremos un par\u00e1metro <code>--exclude</code> como el anterior. Por ejemplo vamos a ver c\u00f3mo se excluir\u00eda la BIOS de PlayStation adem\u00e1s de las previews de FBA que hemos indicado antes. No es el mejor ejemplo, porque ganamos poco excluy\u00e9ndola, ya que s\u00f3lo ocupa unos 500KB, pero ciertamente ese fichero se puede encontrar f\u00e1cilmente si lo perdemos:</p> <pre><code>tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude=home/.fba/previews --exclude=home/.pcsx4all/bios/SCPH1001.BIN home\n</code></pre> <p>Una vez que tengamos identificado lo que merece la pena excluir de nuestro backup para aligerarlo, vamos a ver c\u00f3mo lanzarlo m\u00e1s c\u00f3modamente.</p>"},{"location":"2020-03-19-rg350_backup.html#ejecucion-desde-scriptrunner","title":"Ejecuci\u00f3n desde Scriptrunner","text":"<p>Desde hace unas versiones, ROGUE incluye una utilidad muy pr\u00e1ctica de Rafa Vico llamada Scriptrunner que permite ejecutar scripts de comandos desde un listado. De serie trae un script para hacer backup del Home con el comando indicado en un principio (sin los excludes). Los scripts que vienen de serie no se pueden modificar, pero se pueden a\u00f1adir nuevos sin m\u00e1s que incorporarlos al directorio <code>/media/data/local/home/.scriptrunner</code>. Por ejemplo, vamos a ver c\u00f3mo incorporar\u00edamos un nuevo script de backup con el exclude del directorio de im\u00e1genes de previews de FBA que hemos comentado antes.</p> <p>Empezamos creando un fichero de texto con el siguiente contenido y de nombre <code>home_backup_partial.sh</code> (por ejemplo):</p> <pre><code>#!/bin/sh\n# title=Backup partial home folder\n# desc=Backup home folder to SD card, save all your settings except FBA previews\n# author=eduardofilo\n\necho \"Backup home folder.\"\ntar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude=home/.fba/previews home\necho \"\"\necho \"Backup done.\"\n</code></pre> <p>Lo que pongamos en las lineaas 2 y 3 ser\u00e1n el t\u00edtulo y la descripci\u00f3n del script que luego se mostrar\u00e1 en el listado de Scriptrunner, por lo que podemos adaptarlo a nuestra conveniencia.</p> <p>Advertencia</p> <p>Si creamos el fichero desde Windows es recomendable que sea con un editor potente como Notepad++ y guardarlo con retornos de carro UNIX y codificaci\u00f3n UTF8.</p> <p>Lo siguiente ser\u00e1 transferirlo al directorio <code>/media/data/local/home/.scriptrunner</code> por alg\u00fan medio como copi\u00e1ndolo desde la tarjeta externa con DinguxCmdr o por cable por FTP o SCP.</p> <p>Una vez copiado lo veremos en el listado que muestra Scriptrunner al abrirlo:</p> <p></p> <p>Desde all\u00ed podremos ejecutarlo seleccion\u00e1ndolo como se ve en el pantallazo anterior y pulsando <code>A</code>, lo que habr\u00e1 que confirmar de nuevo con <code>A</code>:</p> <p></p> <p>Veremos el progreso mediante un icono giratorio que aparece arriba a la derecha:</p> <p></p> <p>Hasta que el backup finalmente se complete:</p> <p></p> <p>Podemos comprobar con DinguxCmdr que se ha creado el fichero de backup:</p> <p></p>"},{"location":"2020-03-19-rg350_backup.html#restauracion","title":"Restauraci\u00f3n","text":"<p>La forma m\u00e1s c\u00f3moda de restaurar el backup en caso de ser necesario es utilizar el script <code>Restore home folder</code> precargado en Scriptrunner. Esta vez no es necesario modificarlo, funcionar\u00e1 tal cual. El \u00fanico inconveniente es que restaurar\u00e1 el backup completo, y puede ser que nos interese recuperar un s\u00f3lo fichero (un savestate de un emulador concreto por ejemplo). En ese caso se recomienda pinchar en el PC la tarjeta externa para tener acceso al fichero <code>home_backup.tar</code> y abrirlo con un gestor de compresi\u00f3n multiformato como WinRAR. Localizar el fichero que nos interesa y transferirlo a la consola por los medios habituales (DinguxCmdr, FTP o SCP).</p>"},{"location":"2020-03-28-rg350_pymenu.html","title":"RG350 PyMenu","text":"<p>Se ilustra a continuaci\u00f3n el proceso de instalaci\u00f3n y configuraci\u00f3n del launcher PyMenu para RG350.</p> <p>Aviso</p> <p>PyMenu al contrario que SimpleMenu y EmulationStation, trata de autoconfigurarse localizando los emuladores, ports y aplicaciones que hay en la consola y contrast\u00e1ndolos con un fichero de configuraci\u00f3n que contiene la mayor\u00eda de los sistemas. Desafortunadamente no es perfecto y no lo logra en todos los casos, haciendo que los que fallan sean m\u00e1s dif\u00edciles de configurar. En este art\u00edculo se desvelan algunas de las t\u00e9cnicas que usa el programa para que sepamos c\u00f3mo terminar de adaptar la configuraci\u00f3n.</p>"},{"location":"2020-03-28-rg350_pymenu.html#instalacion","title":"Instalaci\u00f3n","text":"<p>La instalaci\u00f3n es sencilla ya que el programador ofrece un OPK para ello en las releases del repositorio. En concreto el OPK adecuado para instalar en RG350 es \u00e9ste:</p> <p>https://github.com/JackD83/PyMenu/releases/download/2.0.0-PRE/PyMenu-Installer-2.0.0.opk</p> <p>Como con todos los OPKs s\u00f3lo tenemos que copiarlo a uno de estos dos directorios:</p> <ul> <li><code>/media/data/apps</code></li> <li><code>/media/sdcard/apps</code></li> </ul> <p>Preferiblemente en el segundo que corresponde al directorio <code>apps</code> de la tarjeta externa, ya que el OPK lo podremos borrar una vez hecha la instalaci\u00f3n. En GMenu2X nos aparecer\u00e1 este lanzador:</p> <p></p> <p>Lo abriremos y veremos una pantalla de terminal en la que es posible que aparezcan algunos errores. Al principio cre\u00eda que se trataba del proceso de b\u00fasqueda de OPKs para la autoconfiguraci\u00f3n, pero analizando el script de instalaci\u00f3n veo que s\u00f3lo las \u00faltimas 4 l\u00edneas corresponden a la verdadera instalaci\u00f3n:</p> <p></p> <p>Las l\u00edneas anteriores pertenecen a GMenu2X y en mi caso indicaban que ten\u00eda ficheros residuales en <code>/media/data/local/home/.gmenu2x/sections</code>. Son lanzadores de aplicaciones que en su d\u00eda instal\u00e9 y borr\u00e9. Haciendo limpieza de los ficheros correspondientes consigo un log de instalaci\u00f3n m\u00e1s limpio:</p> <p></p> <p>En cualquier caso estos errores no son importantes.</p> <p>El instalador copia todo el c\u00f3digo y recursos de PyMenu en el directorio <code>/media/data/pymenu</code>. Tambi\u00e9n copia un lanzador en <code>/media/data/local/home/.gmenu2x/sections/applications</code>, motivo por el que nos aparecer\u00e1 lo siguiente:</p> <p></p>"},{"location":"2020-03-28-rg350_pymenu.html#configuracion","title":"Configuraci\u00f3n","text":"<p>Una vez instalado, si ejecutamos PyMenu a trav\u00e9s de su lanzador seguramente arrancar\u00e1, no como SimpleMenu o EmulationStation que hasta que no tienen una configuraci\u00f3n perfecta suelen cerrarse. Otra ventaja de PyMenu es que puede configurarse desde el propio interfaz gr\u00e1fico del programa. Para ello basta situarse sobre el sistema a configurar y pulsar <code>Select</code> para seleccionar la entrada <code>edit entry</code>:</p> <p> </p> <p>All\u00ed veremos los par\u00e1metros que contiene el fichero de configuraci\u00f3n para ese sistema. El fichero de configuraci\u00f3n es <code>/media/data/pymenu/config/config.json</code>. Como vemos es un fichero JSON (mucho m\u00e1s amigable que los XML de SimpleMenu y EmulationStation). Al principio encontramos unos par\u00e1metros generales:</p> <pre><code>    \"batteryHigh\": 3900000,\n    \"batteryLow\": 3300000,\n    \"firstStart\": false,\n    \"lcd_backlight\": 70,\n    \"linkPath\": \"/media/data/local/home/.gmenu2x/sections\",\n</code></pre> <p>Los dos primeros controlan el comportamiento del indicador de bater\u00eda. Seg\u00fan comunicaci\u00f3n de su autor, los par\u00e1metros se ajustan autom\u00e1ticamente cargando completamente la bater\u00eda y dej\u00e1ndo que se descargue del todo.</p> <p>A continuaci\u00f3n aparece la configuraci\u00f3n de los sistemas. Por ejemplo \u00e9ste ser\u00eda el bloque correspondiente a la Game Boy:</p> <pre><code>        {\n            \"description\": \"Gameboy\",\n            \"hideFolders\": false,\n            \"limitSelection\": null,\n            \"name\": \"GB\",\n            \"overclock\": \"360\",\n            \"previews\": \"/media/data/roms/GB/.previews\",\n            \"selectionPath\": \"/media/data/roms/GB\",\n            \"system\": \"gambatte\",\n            \"type\": \"emulator\",\n            \"useFileFilter\": false,\n            \"useGamelist\": false,\n            \"useSelection\": true\n        },\n</code></pre> <p>Como vemos se corresponde con lo que ve\u00edamos en el pantallazo anterior. Ser\u00e1 por tanto equivalente modificar la configuraci\u00f3n desde el programa o desde el fichero. Si PyMenu no encuentra un OPK compatible con la configuraci\u00f3n del emulador correspondiente ocultar\u00e1 el sistema en el interfaz gr\u00e1fico, pero podemos forzar su aparici\u00f3n activando la opci\u00f3n <code>Show All</code> en <code>General Settings</code>:</p> <p></p> <p>A pesar de poder configurar los sistemas desde el propio frontend, prefiero hacerlo manipulando el fichero de configuraci\u00f3n directamente, ya que permite ajustar todos los sistemas de una vez. Para editar este fichero, como siempre, podemos hacerlo conectando con la consola por SSH para manipularlo con <code>vi</code> o copiarlo con DinguxCmdr, FTP o SCP para editarlo desde el ordenador.</p> <p>A continuaci\u00f3n menciono algunos de los problemas que tuve haciendo la configuraci\u00f3n.</p>"},{"location":"2020-03-28-rg350_pymenu.html#problema-con-la-identificador-de-sistema-en-rogue","title":"Problema con la Identificador de sistema en ROGUE","text":"<p>En principio para indicar el emulador (o emuladores, ya que como veremos luego soporta varios en cada sistema) a utilizar en un sistema determinado basta indicar el nombre completo de dicho emulador (incluyendo espacios). Esto en BASE se aplicar\u00e1 directamente. En ROGUE se pueden editar los nombres de los emuladores, por lo que podemos perder de vista el nombre original que es el que necesitamos, ya que PyMenu extraer\u00e1 este nombre del interior del OPK que no es alterado al modificar el nombre en el GMenu2X de ROGUE. Vamos a profundizar pues un poco en la manera en que son identificados los emuladores para ayudar a entender c\u00f3mo debemos configurar PyMenu en ROGUE.</p> <p>El par\u00e1metro donde debemos indicar el nombre original del emulador es <code>system</code>. Vamos a verlo por ejemplo con el caso de la Game Boy. Como vemos en la configuraci\u00f3n anterior est\u00e1 definido en <code>system</code> el valor <code>gambatte</code>. Pues bien, para que el sistema Game Boy aparezca en PyMenu ser\u00e1 comparado con dos cosas:</p> <ul> <li>El par\u00e1metro <code>Name</code> de los ficheros <code>.desktop</code> que contienen los OPKs.</li> <li>El par\u00e1metro <code>title</code> de los ficheros que hay en las distintas secciones que hay en <code>/media/data/local/home/.gmenu2x/sections</code>, a lo que PyMenu llama links.</li> </ul> <p>No estoy seguro, pero creo que en el caso de emuladores en los que hay que seleccionar una ROM para lanzarlo (la mayor\u00eda), s\u00f3lo sirve el primero de los dos tipos. Para aplicaciones sueltas o Ports pueden servir cualquiera de los dos.</p> <p>Ahora la cosa se complica un poco. Por una parte el fichero <code>.desktop</code> (casi siempre se llama <code>default.gcw0.desktop</code>) se encuentra enterrado en el OPK que es una especie de ZIP (en realidad una especie de imagen de sistema de ficheros). Vamos a ver por ejemplo c\u00f3mo acceder\u00edamos a \u00e9l siguiendo con el ejemplo de Game Boy. En mi m\u00e1quina el OPK de este emulador es <code>gambatte-multi-r572u4-20200127.opk</code>. Lo descargamos al PC y ejecutamos lo siguiente (s\u00f3lo s\u00e9 hacerlo con Linux):</p> <pre><code>$ unsquashfs gambatte-multi-r572u4-20200127.opk\n</code></pre> <p>Nos aparecer\u00e1 un directorio de nombre <code>squashfs-root</code> con el contenido del OPK. Dentro de \u00e9l encontramos un fichero llamado <code>default.gcw0.desktop</code> con el siguiente contenido:</p> <pre><code>[Desktop Entry]\nName=Gambatte\nComment=GB/GBC emulator\nExec=gambatte.opendingux %f\nTerminal=false\nType=Application\nStartupNotify=true\nIcon=gambatte\nCategories=emulators;\nX-OD-Manual=manual.txt\nMimeType=application/x-gameboy-rom;application/x-gbc-rom;application/x-gzip;application/zip;application/gzip;\n</code></pre> <p>Pues bien, el valor de <code>Name</code> ser\u00e1 lo que tengamos que poner en el par\u00e1metro <code>system</code> de Game Boy en <code>/media/data/pymenu/config/config.json</code>. Las may\u00fasculas/min\u00fasculas no son importantes ya que PyMenu convierte todo a min\u00fasculas antes de hacer comparaciones. Como digo, en mi caso hab\u00eda modificado los nombres de los emuladores en GMenu2X. Por ejemplo el nombre original <code>Gambatte</code> lo hab\u00eda cambiado a <code>Game Boy</code>. As\u00ed, antes de entender que lo que se cog\u00eda era el <code>Name</code> dentro del <code>.desktop</code> probaba con <code>Game Boy</code> o con el nombre completo del OPK (<code>gambatte-multi-r572u4-20200127.opk</code>) sin \u00e9xito.</p> <p>Luego est\u00e1 el segundo elemento que se compara con <code>system</code>, es decir el par\u00e1metro <code>title</code> de los ficheros de las distintas secciones que hay en <code>/media/data/local/home/.gmenu2x/sections</code>, a lo que PyMenu llama links. Curiosamente este par\u00e1metro s\u00ed que se adapta cuando en GMenu2X cambiamos el nombre del emulador, pero como se ha comentado antes, parece que este elemento no sirve para lanzar emuladores a los que tenemos que pasarles como par\u00e1metro la ROM a ejecutar. Por ejemplo, en mi caso el link de Gambatte es <code>/usr/local/home/.gmenu2x/sections/emulators/gambatte-multi-r572u4-20200127_gambatte.opendinguxf</code> y su contenido:</p> <pre><code>title=Game Boy\ndescription=GB/GBC emulator\nmanual=manual.txt\nicon=/media/data/apps/gambatte-multi-r572u4-20200127.opk#gambatte.png\nselectorfilter=gb,gbc,gz,zip,gz\nclock=360\nselectordir=/media/data/local/home/roms/GB/\n</code></pre> <p>Como vemos el <code>title</code> no se corresponde con el <code>Name</code> del <code>.desktop</code> dentro del OPK por el motivo mencionado de que modifiqu\u00e9 los nombres de los emuladores en GMenu2X. Es mejor no hacerlo para no tener que abrir la lata del OPK en busca del <code>.desktop</code>, pero para mi ya era tarde.</p> <p>En resumen, si queremos que un emulador sea reconocido en PyMenu, tenemos que averiguar el nombre original del emulador y colocarlo en el par\u00e1metro <code>system</code> del sistema correspondiente en el fichero de configuraci\u00f3n de PyMenu.</p>"},{"location":"2020-03-28-rg350_pymenu.html#problema-con-determinados-emuladores","title":"Problema con determinados emuladores","text":"<p>Con el emulador de Intellivision hubo un problema particular. Por alg\u00fan motivo el <code>.desktop</code> que contiene el OPK no era interpretado correctamente y al intentar entrar en la lista de ROMs PyMenu se reiniciaba. Tras depurar a\u00f1adiendo trazas al c\u00f3digo Python encontr\u00e9 que el problema estaba en el fichero <code>default.gcw0.desktop</code>. El original conten\u00eda esto:</p> <pre><code>#!/usr/bin/env xdg-open\n[Desktop Entry]\nName=JzIntellivision\nType=Application\nExec=jzintv %F\nIcon=dingux-int\nComment=Intellivision emulator\n#Comment=Intellivision emulator\nTerminal=false\nCategories=emulators;\nMimetype=application/octet-stream;\nX-OD-Manual=readmegcw.txt\n</code></pre> <p>La soluci\u00f3n consiste en desempaquetar el OPK (con <code>unsquashfs</code>) y cambiar la <code>F</code> final del par\u00e1metro <code>Exec</code> del fichero <code>default.gcw0.desktop</code> poni\u00e9ndola en min\u00fasculas. Luego hay que volver a empaquetar en squashfs el OPK (<code>mksquashfs</code>).</p>"},{"location":"2020-03-28-rg350_pymenu.html#soporte-de-varios-emuladores","title":"Soporte de varios emuladores","text":"<p>Una cosa buena que tiene PyMenu es que admite varios valores en este par\u00e1metro separados por comas. As\u00ed se pueden escribir varias posibilidades para dar m\u00e1s oportunidades a PyMenu para encontrar los emuladores. Cuando lo hacemos nos permite seleccionar el emulador que queremos utilizar para lanzar el juego. Por ejemplo si tenemos instalado ReGBA y GPSP, al pulsar <code>Start</code> en la pantalla de selecci\u00f3n de ROMs, nos aparecer\u00e1 un desplegable en el que podremos seleccionar el emulador a utilizar:</p> <p></p> <p>Como punto de partida dejo aqu\u00ed mi fichero de configuraci\u00f3n que contiene la mayor\u00eda de los emuladores que se utilizan habitualmente.</p> <ul> <li>config.json</li> </ul>"},{"location":"2020-03-28-rg350_pymenu.html#arranque","title":"Arranque","text":"<p>Para conseguir que PyMenu arranque como lanzador predeterminado, al igual que con SimpleMenu y EmulationStation tenemos que incorporar un script de nombre <code>frontend_start</code> en el directorio <code>/media/data/local/sbin</code>. El contenido del script ser\u00e1 el siguiente:</p> <pre><code>#!/bin/sh\n\nexport HOME=`cat /etc/passwd |head -1 |cut -d':' -f 6`\n\n# Restore the framebuffer to a working state\n/usr/sbin/unlockvt &gt; /dev/null\n\n# Reset the console\n/usr/bin/reset\n\n# Disactivate the console on framebuffer\necho 0 &gt; /sys/devices/virtual/vtconsole/vtcon1/bind\n\n# Disable downscaling for future apps\nif [ -f /sys/devices/platform/jz-lcd.0/allow_downscaling ] ; then\n        echo 0 &gt; /sys/devices/platform/jz-lcd.0/allow_downscaling\nfi\n\n# Restore the regular key map\nif [ -f /sys/devices/platform/linkdev/alt_key_map ] ; then\n        echo 0 &gt; /sys/devices/platform/linkdev/alt_key_map\nfi\n\n# Stop the gravity sensor if it's loaded\n/usr/sbin/gsensor --stop\n\n# Source /etc/profile to set the environment variables\n. /etc/profile\n\nexec /media/data/pymenu/pymenu.dge\n</code></pre> <p>Una vez instalado el script, debemos asignarle el permiso UNIX de ejecuci\u00f3n. Para ello ejecutaremos a trav\u00e9s de SSH o con la aplicaci\u00f3n <code>ST-SDL</code> el siguiente comando:</p> <pre><code># chmod +x /media/data/local/sbin/frontend_start\n</code></pre> <p>Para que el script anterior funcione, debemos modificar adem\u00e1s el fichero <code>/media/data/pymenu/pymenu.dge</code>. En concreto modificar la l\u00ednea 37 para incorporar la ruta completa del fichero <code>pymenu.sh</code>:</p> <pre><code>...\n                echo \"starting PyMenu\"\n                sh /media/data/pymenu/pymenu.sh\n                #&gt; /dev/ttyS1 2&gt; /dev/ttyS1\n...\n</code></pre>"},{"location":"2020-03-28-rg350_pymenu.html#temas","title":"Temas","text":"<p>PyMenu tiene un sistema de temas como EmulationStation. Se basa en unos ficheros JSON que hay en la ruta <code>/media/data/pymenu/theme/themes</code>. Internamente estos ficheros hacen referencia a recursos de imagen que pueden estar en cualquier lugar, aunque suelen estar bajo el directorio <code>/media/data/pymenu/images</code>. Por ejemplo lo siguiente es la definici\u00f3n del sistema GameBoy en el tema Pixel:</p> <pre><code>    \"GAMEBOY\": {\n        \"background\": \"images/pixel/backgrounds/gbc.png\",\n        \"folderIcon\": \"images/pixel/icons/gbc.png\",\n        \"icon\": \"images/pixel/systems/gbc.png\"\n    },\n</code></pre> <p>El tema se selecciona desde el icono de rueda dentada que hay abajo a la izquierda en la pantalla principal. Al pulsar sobre ella aparecen los <code>General Settings</code>, siendo el tema uno de ellos. Una vez seleccionado, como siempre en PyMenu, hay que confirmar los cambios pulsando <code>Start</code>:</p> <p></p> <p>Vamos a ver ejemplos de cada uno:</p>"},{"location":"2020-03-28-rg350_pymenu.html#tft","title":"tft","text":""},{"location":"2020-03-28-rg350_pymenu.html#pixel","title":"pixel","text":""},{"location":"2020-03-28-rg350_pymenu.html#default","title":"default","text":""},{"location":"2020-03-28-rg350_pymenu.html#funcionalidades","title":"Funcionalidades","text":"<p>PyMenu tiene un par de funcionalidades de las que carece EmulationStation (al menos en la versi\u00f3n compilada para RG350 que circula por ah\u00ed) y es que guarda un hist\u00f3rico de los juegos lanzados as\u00ed como una lista de favoritos. Para a\u00f1adir un juego a favoritos tenemos que pulsar <code>Select</code> cuando estemos seleccionando el juego. Aparecer\u00e1 un desplegable con la opci\u00f3n <code>Add to favourites</code>:</p> <p></p> <p>Tambi\u00e9n es operativo el men\u00fa para reiniciar y apagar la consola. Se obtiene pulsando en el t\u00edpico s\u00edmbolo de Power que hay abajo a la derecha en la pantalla principal:</p> <p></p> <p>La opci\u00f3n <code>Exit to Gmenu2x</code> la he incorporado yo modificando el c\u00f3digo, es decir, no aparecer\u00e1 si se instala el c\u00f3digo original siguiendo este art\u00edculo.</p>"},{"location":"2020-04-14-rg350_scummvm.html","title":"RG350 ScummVM","text":"<p>ScummVM es un programa que permite ejecutar aventuras gr\u00e1ficas cl\u00e1sicas. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350.</p> <p>Integraci\u00f3n de ScummVM en lanzadores</p> <p>La versi\u00f3n de ScummVM instalada en este art\u00edculo utiliza un interfaz propio para lanzar los juegos y no permite su integraci\u00f3n en lanzadores gr\u00e1ficos tipo SimpleMenu. En este art\u00edculo posterior se describe la manera de lograrlo.</p> <p>El repositorio de la versi\u00f3n adaptada a la RG350 es \u00e9ste. Seg\u00fan su autor se trata de un repositorio auxiliar destinado a integrar los cambios en el repositorio del proyecto principal, pero hasta que eso suceda se puede bajar del mismo una versi\u00f3n que funciona bastante bien.</p>"},{"location":"2020-04-14-rg350_scummvm.html#instalacion-de-emulador","title":"Instalaci\u00f3n de emulador","text":"<p>La instalaci\u00f3n es como la de cualquier emulador en formato OPK:</p> <ol> <li>Descargar el OPK para RG350 del \u00faltimo release. En el momento de escribir este art\u00edculo es: scummvm-rg350-01132020.opk</li> <li>Copiarlo dentro del directorio <code>apps</code> de la microSD externa.</li> </ol> <p>Tambi\u00e9n puede copiarse en la tarjeta interna (en la ruta <code>/media/data/apps</code>, pero particularmente prefiero instalar las aplicaciones en la externa).</p> <p>Una vez instalado, reiniciar Gmenu2x pulsando <code>Power+Select</code> para asegurar el que aparezca:</p> <p></p>"},{"location":"2020-04-14-rg350_scummvm.html#instalacion-de-juegos","title":"Instalaci\u00f3n de juegos","text":"<p>Los juegos que permite ejecutar ScummVM estaban basados en motores o engines desarrollados por sus comercializadores. As\u00ed pues los ficheros que vienen con estos juegos son el ejecutable del motor y los ficheros de datos del juego concreto. ScummVM sustituye \u00fanicamente al ejecutable del motor. Seremos nosotros los que suministraremos los ficheros de datos del juego que tengamos. Por ejemplo, en el juego Loom encontramos que los ficheros de datos son:</p> <pre><code>$ ls -l\ntotal 42436\n-rw-r--r-- 1 edumoreno edumoreno     8307 ene 23  2005 000.LFL\n-rw-r--r-- 1 edumoreno edumoreno     2613 ene 23  2005 901.LFL\n-rw-r--r-- 1 edumoreno edumoreno     4193 ene 23  2005 902.LFL\n-rw-r--r-- 1 edumoreno edumoreno     2019 ene 23  2005 903.LFL\n-rw-r--r-- 1 edumoreno edumoreno     4388 ene 23  2005 904.LFL\n-rw-r--r-- 1 edumoreno edumoreno  4059462 ene 23  2005 DISK01.LEC\n-r--r--r-- 1 edumoreno edumoreno 39347931 dic 31  1999 Track1.mp3\n</code></pre> <p>Vamos a ver paso a paso c\u00f3mo instalar estos ficheros en la consola:</p> <ol> <li> <p>Copiar estos ficheros en cualquier lugar de la consola, por ejemplo en el directorio <code>/media/sdcard/roms/SCUMMVM/Loom</code> que corresponde con el directorio <code>roms/SCUMMVM/Loom</code> en la ra\u00edz de la tarjeta externa.</p> </li> <li> <p>Abrir ScummVM. Tras unos segundos con la pantalla en negro aparecer\u00e1 el interfaz de ScummVM. El manejo del puntero se hace con el stick izquierdo o la cruceta y el click del rat\u00f3n con la tecla <code>A</code>:</p> <p></p> </li> <li> <p>Pulsar el bot\u00f3n <code>Add Game...</code>. Aparece un explorador de ficheros apuntando a la ruta <code>/media</code>:</p> <p></p> </li> <li> <p>Recorrer el sistema de ficheros hasta localizar la ruta donde tengamos los ficheros (en el siguiente pantallazo est\u00e1n en una ruta de la tarjeta interna):</p> <p></p> </li> <li> <p>Pulsar el bot\u00f3n <code>Choose</code>. Aparece la ficha de configuraci\u00f3n del juego con 4 pesta\u00f1as donde podemos elegir algunos par\u00e1metros. De momento los dejaremos tal y como aparecen:</p> <p></p> </li> <li> <p>Al pulsar <code>OK</code> regresamos a la pantalla principal en la que ya aparecer\u00e1 el juego cargado.</p> <p></p> </li> <li> <p>Ya s\u00f3lo queda hacer doble click sobre el nombre del juego para que \u00e9ste arranque:</p> <p></p> </li> </ol> <p>En el siguiente video puede verse el proceso de instalaci\u00f3n del emulador y de los juegos:</p>"},{"location":"2020-04-14-rg350_scummvm.html#controles","title":"Controles","text":"<p>A continuaci\u00f3n se muestran los controles de ScummVM:</p> Control en RG350 Control en ScummVM o Efecto Stick izquierdo/Cruceta Movimiento del rat\u00f3n <code>A</code> Click izquierdo del rat\u00f3n <code>B</code> Click derecho del rat\u00f3n <code>X</code> <code>ESPACIO</code> - Pausa o salta el di\u00e1logo actual, dependiendo del juego <code>Y</code> <code>PUNTO</code> - Salta el di\u00e1logo actual, dependiendo del juego <code>Start</code> <code>F5</code> - Men\u00fa de ScummVM <code>Select</code> <code>Esc</code> - Salta escena, dependiendo del juego <code>L1</code> <code>Shift</code> -  No se conocen juegos que lo utilicen <code>R1</code> Muestra/oculta el teclado virtual"},{"location":"2020-04-15-rg350_xmame.html","title":"RG350 xMAME","text":"<p>xMAME es un port para UNIX del conocido multiemulador de m\u00e1quinas arcade MAME. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350.</p>"},{"location":"2020-04-15-rg350_xmame.html#instalacion","title":"Instalaci\u00f3n","text":"<p>El OPK que utilizaremos para instalarlo es s\u00f3lo eso, un instalador. Una vez que la instalaci\u00f3n haya terminado podremos borrarlo. El proceso es el siguiente:</p> <ol> <li>Bajar \u00e9ste OPK</li> <li> <p>Copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul> </li> <li> <p>Localizar el lanzador del instalador en GMenu2X:</p> <p></p> </li> <li> <p>Abrir el instalador. Se nos preguntar\u00e1 si queremos instalar xMAME en la tarjeta interna o la externa. La selecci\u00f3n de uno u otro destino se hace pulsando izquierda o derecha:</p> <p> </p> </li> <li> <p>Confirmamos la instalaci\u00f3n con <code>Start</code> o cancelamos con <code>Select</code>. Al pulsar <code>Start</code> veremos una pantalla de texto durante un minuto aproximadamente (el error que se ve al principio en realidad no es del instalador sino un res\u00edduo del log de GMenu2X). Al finalizar la instalaci\u00f3n aparece brevemente un mensaje que nos indica que podemos borrar el instalador:</p> <p> </p> </li> <li> <p>Al regresar a GMenu2X ya deber\u00edamos ver el nuevo icono lanzador:</p> <p></p> </li> </ol>"},{"location":"2020-04-15-rg350_xmame.html#configuracion","title":"Configuraci\u00f3n","text":"<p>Si tratamos de abrir xMAME recien instalado, se cerrar\u00e1 mostrando brevemente un mensaje de error:</p> <p></p> <p>Como vemos se queja de que no encuentra ROMs. xMAME tiene un comportamiento particular. Para empezar, en su versi\u00f3n 1.3, incluye tres versiones distintas de romsets:</p> <ul> <li>0.37b16, tambi\u00e9n conocido como 0.52</li> <li>0.69</li> <li>0.84</li> </ul> <p>Cada uno de estos romsets apuntan a un directorio diferente:</p> <ul> <li>0.52 =&gt; <code>/media/data/local/share/xmame/xmame52/roms</code></li> <li>0.69 =&gt; <code>/media/data/local/share/xmame/xmame69/roms</code></li> <li>0.84 =&gt; <code>/media/data/local/share/xmame/xmame84/roms</code></li> </ul> <p>Nota</p> <p>Las rutas anteriores corresponden a cuando la instalaci\u00f3n ha sido hecha sobre la tarjeta interna. En caso de hacerlo sobre la externa la ruta base es <code>/media/sdcard/apps/xmame</code></p> <p>Es aqu\u00ed donde debemos colocar al menos una ROM para que el programa se mantenga abierto y nos muestre su frontend:</p> <p></p> <p>Gesti\u00f3n unificada de ROMs</p> <p>Existe una forma de evitar tener que triplicar las ROMs entre los tres directorios y es sustituirlos por tres enlaces simb\u00f3licos hacia una \u00fanica ruta. Esto lo podemos lograr ejecutando los siguientes comandos por consola (por SSH por ejemplo). La ruta utilizada deber\u00e1 existir previamente (<code>/media/data/roms/ARCADE/</code> en el ejemplo):</p> <pre><code># rm -rf /media/data/local/share/xmame/xmame52/roms\n# rm -rf /media/data/local/share/xmame/xmame69/roms\n# rm -rf /media/data/local/share/xmame/xmame84/roms\n# ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame52/roms\n# ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame69/roms\n# ln -s /media/data/roms/ARCADE/ /media/data/local/share/xmame/xmame84/roms\n</code></pre>"},{"location":"2020-04-15-rg350_xmame.html#previews","title":"Previews","text":"<p>Como la mayor\u00eda de emuladores, xMAME soporta un sistema de previsualizaci\u00f3n de las ROMs para ayudar a identificar los juegos en el listado. Las im\u00e1genes tienen que colocarse en el directorio <code>/media/data/local/share/xmame/resource/snap</code> y llamarse igual que las ROMs excepto por la extensi\u00f3n <code>.png</code>. Por ejemplo para previsualizar la ROM <code>/media/data/local/share/xmame/xmame52/roms/bombjack.zip</code> tendr\u00e1 que existir el fichero <code>/media/data/local/share/xmame/resource/snap/bombjack.png</code>. Si es as\u00ed, en el listado de ROMs veremos lo siguiente:</p> <p></p> <p>En realidad puede haber m\u00e1s de una imagen por ROM. Se puede poner una secuencia de im\u00e1genes que aparecer\u00e1n en sucesi\u00f3n en el frontend (cada 3 \u00f3 4 segundos aproximadamente). Los nombres de las im\u00e1genes deben ser como cuando la imagen es \u00fanica, es decir con el mismo nombre de la ROM, m\u00e1s un n\u00famero correlativo de dos cifras empezando por <code>00</code>. Por ejemplo, para el caso de la ROM comentada antes, una serie de 5 im\u00e1genes se conseguir\u00eda con los ficheros: <code>bombjack.png</code>, <code>bombjack00.png</code>, <code>bombjack01.png</code>, <code>bombjack02.png</code> y <code>bombjack03.png</code>. No es casualidad que el directorio donde se almacenan los snapshots o pantallazos del juego (se hacen con la combinaci\u00f3n de teclas <code>Start + Abajo</code>), terminen en el mismo directorio de las previews, y que los nombres de estos pantallazos vayan incorporando esta numeraci\u00f3n sucesivamente. De esta forma, cada pantallazo que hagamos se incorporar\u00e1 a la secuencia de previews.</p> <p>Previews compatibles con GMenu2X</p> <p>Como siempre nos interesa hacer compatible este sistema de previews con el propio de GMenu2X para as\u00ed evitar tener las im\u00e1genes duplicadas en dos rutas distintas. Vamos a partir de la situaci\u00f3n en la que hemos unificado la ruta de las ROMs del truco anterior, es decir que los tres directorios correspondientes a los tres romsets apuntan a <code>/media/data/roms/ARCADE/</code>. En este caso el directorio de previews deber\u00eda ser: <code>/media/data/roms/ARCADE/.previews/</code>. Para convertir este directorio en el que utiliza xMAME, de nuevo haremos un parche en el sistema de ficheros con un enlace simb\u00f3lico:</p> <pre><code># rm -rf /media/data/local/share/xmame/resource/snap\n# ln -s /media/data/roms/ARCADE/.previews/ /media/data/local/share/xmame/resource/snap\n</code></pre> <p>Como recopilar todas las previews de las ROMs es una tarea inabarcable manualmente, podemos como siempre utilizar un scraper, o bajar un lote preparado ya por alguien como \u00e9ste.</p>"},{"location":"2020-04-15-rg350_xmame.html#integracion-en-frontends","title":"Integraci\u00f3n en frontends","text":"<p>Para que un emulador sea integrado correctamente en un frontend como EmulationStation, PyMenu o SimpleMenu necesitamos que el emulador pueda ser ejecutado por linea de comando y que acepte como argumentos la ruta de la ROM a emular. En el caso de xMAME hay tres ejecutables que se pueden invocar de esta forma, uno por cada versi\u00f3n de romset. Los ejecutables son los siguientes:</p> <ul> <li><code>/media/data/local/share/xmame/xmame52/xmame.SDL.52</code></li> <li><code>/media/data/local/share/xmame/xmame69/xmame.SDL.69</code></li> <li><code>/media/data/local/share/xmame/xmame84/xmame.SDL.84</code></li> </ul> <p>En frontends que s\u00f3lo admitan un ejecutable como EmulationStation no tendremos m\u00e1s remedio que elegir uno de los tres (lo m\u00e1s l\u00f3gico es escoger el romset 84). En frontends como PyMenu o SimpleMenu podemos indicar los tres ejecutables para seleccionarlos luego antes de lanzar la ROM. Por ejemplo en SimpleMenu tendr\u00edamos:</p> <pre><code>[MAME]\nexecs = /media/data/local/share/xmame/xmame52/xmame.SDL.52,/media/data/local/share/xmame/xmame69/xmame.SDL.69,/media/data/local/share/xmame/xmame84/xmame.SDL.84\nromDirs = /media/data/roms/ARCADE/,/media/sdcard/roms/ARCADE/\nromExts = .zip\naliasFile = /media/home/.simplemenu/alias.txt\nonlyFileNamesNoPathOrExtension = yes\n</code></pre>"},{"location":"2020-04-15-rg350_xmame.html#controles","title":"Controles","text":"<p>A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de xMAME:</p> Control Situaci\u00f3n Funci\u00f3n <code>Arriba</code> / <code>Abajo</code> En frontend Seleccionar ROM una a una <code>Izquierda</code> / <code>Derecha</code> En frontend Seleccionar ROM p\u00e1gina a p\u00e1gina <code>Select</code> En frontend Salir <code>Start</code> En frontend Refresca lista de ROMs <code>L1</code> En frontend Cambia el filtro de ROMs entre <code>Available Game</code>, <code>Available Clones</code>, <code>Favourites</code> y <code>All Games</code> <code>R1</code> En frontend Cambia entre las versiones de xMAME: <code>0.52</code>, <code>0.69</code> y <code>0.84</code> <code>A</code> En frontend Arranca un juego y selecci\u00f3n de opciones <code>Y</code> En frontend A\u00f1ade/quita de favoritos <code>Select + R1</code> En juego Insertar moneda <code>Select + L1</code> En juego Comenzar 1P <code>Select + L1 + R1</code> En juego Salir <code>L1 + R1</code> En juego Pausa <code>Start + R1</code> En juego Mostrar FPS <code>Start + L1</code> En juego Men\u00fa de configuraci\u00f3n <code>Start + Abajo</code> En juego Hacer captura de pantalla (se almacena en <code>/media/data/local/share/xmame/xmameVV/snap</code>) <code>Start + Izquierda</code> En juego Guardar state. Luego seleccionar casilla de guardado (por letras, hay 29) y pulsar A <code>Start + Derecha</code> En juego Recuperar state. Luego seleccionar casilla donde se guard\u00f3 y pulsar A"},{"location":"2020-05-04-rg350_daphne.html","title":"RG350 Daphne","text":"<p>Daphne es un emulador de m\u00faltiples m\u00e1quinas arcade basadas en LaserDisc. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350.</p>"},{"location":"2020-05-04-rg350_daphne.html#instalacion","title":"Instalaci\u00f3n","text":"<p>El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul>"},{"location":"2020-05-04-rg350_daphne.html#juegos","title":"Juegos","text":"<p>Los juegos de Daphne se parecen mucho a las ROMs de xMAME o FBA, es decir consisten en una serie de ficheros con el volcado de los chips ROM de memoria que ten\u00eda la m\u00e1quina del juego. A estos ficheros que normalmente se re\u00fanen en un archivo ZIP, hay que acompa\u00f1arlos en el caso de Daphne con los medios (audio y video) que iban grabados en un LaserDisc. Para que Daphne funcione, deberemos disponer los ficheros de medios y las ROMs en ZIP del juego en un mismo directorio. Dentro del directorio, cada juego constar\u00e1 de los siguientes 4 tipos de ficheros:</p> <ul> <li><code>juego.zip</code>: Las ROMs del juego.</li> <li><code>juego.txt</code>: Fichero de texto que contiene una referencia interna al de video.</li> <li><code>juego.ogg</code>: Fichero con el audio del juego.</li> <li><code>juego.m2v</code>: Fichero con el video del juego.</li> </ul> <p>Es muy probable que junto a los 4 ficheros anteriores, encontremos otro de tipo <code>juego.dat</code>. Este fichero lo generar\u00e1 el propio Daphne de acuerdo a las caracter\u00edsticas de la pantalla de la consola por lo que aunque nos venga en el lote no lo copiaremos junto al resto.</p> <p>Por ejemplo el juego Interestellar contiene los siguientes ficheros:</p> <pre><code>RG350:/media/data/roms/DAPHNE/Interestellar # ls -l\n-rwxr-xr-x    1 root     root     142239907 May  4 15:49 interstellar.m2v\n-rwxr-xr-x    1 root     root      25741275 May  4 15:49 interstellar.ogg\n-rwxr-xr-x    1 root     root            25 May  4 15:49 interstellar.txt\n-rwxr-xr-x    1 root     root         40150 May  4 15:49 interstellar.zip\n</code></pre> <p>Hay que adaptar el fichero de video (<code>.m2v</code>) a la resoluci\u00f3n de la consola (en el caso de la RG350 320x240). En este tutorial encontramos instrucciones detalladas para hacerlo mediante la utilidad <code>ffmpeg</code>.</p> <p>La primera vez que ejecutemos el juego, Daphne generar\u00e1 el fichero <code>.dat</code> en el directorio del juego. Nos pedir\u00e1 que pulsemos <code>Y</code> para iniciar el proceso, pero la indicaci\u00f3n es incorrecta. Es <code>X</code> o <code>Start</code> lo que debemos pulsar. El proceso tardar\u00e1 unos pocos segundos.</p> <p> </p> <p>Tras terminar este proceso el juego arrancar\u00e1.</p> <p></p> <p>Por \u00faltimo incluyo a continuaci\u00f3n una valoraci\u00f3n personal de algunos juegos que he podido probar:</p> Nombre ROM Tipo Dificultad Valoraci\u00f3n Astron Belt astron Vuelo 6 8 Bad Lands badlands Dragon's Lair 9 7 Bega's Battle bega Shoot 'em up 6 6 Cliff Hanger cliff Dragon's Lair 9 7 Cobra Command cobra Vuelo 7 7 Dragon's Lair lair Dragon's Lair 9 7 Esh's Aurunmilla esh Dragon's Lair 8 7 Galaxy Ranger galaxyr Vuelo 6 7 GP World gpworld Coches 7 5 Interestellar interestellar Vuelo 6 8 M.A.C.H. 3 mach3 Vuelo 9 5 Road Blaster roadblaster Coches 6 7 Space Ace ace Dragon's Lair 9 7 Super Don Quijote sdq Dragon's Lair 8 7 Thayer's Quest tq ? (no empieza la partida) ? ? Us vs Them uvt Vuelo 10 (creo que funciona mal) 5"},{"location":"2020-05-04-rg350_daphne.html#previews","title":"Previews","text":"<p>Como hemos comentado, Daphne se comporta como un emulador convencional, por lo que las previews se gestionan de la manera habitual, que como siempre depender\u00e1 del frontend que estemos utilizando. Por ejemplo en el caso de GMenu2X, tendremos que poner la imagen <code>.png</code> en un directorio de nombre <code>.previews</code> a la altura donde se encuentre el <code>.zip</code> con las ROMs. El nombre de la imagen ser\u00e1 el mismo que el del <code>.zip</code>. Por ejemplo en el caso anterior del juego <code>Interestellar</code>, la imagen ir\u00eda de esta forma:</p> <pre><code>RG350:/media/data/roms/DAPHNE/Interestellar # ls -laR\n.:\ndrwxr-xr-x    3 root     root          4096 May  4 15:57 .\ndrwxr-xr-x    3 root     root          4096 May  4 15:48 ..\ndrwxr-xr-x    2 root     root          4096 May  4 15:57 .previews\n-rwxr-xr-x    1 root     root     142239907 May  4 15:49 interstellar.m2v\n-rwxr-xr-x    1 root     root      25741275 May  4 15:49 interstellar.ogg\n-rwxr-xr-x    1 root     root            25 May  4 15:49 interstellar.txt\n-rwxr-xr-x    1 root     root         40150 May  4 15:49 interstellar.zip\n\n./.previews:\ndrwxr-xr-x    2 root     root          4096 May  4 15:57 .\ndrwxr-xr-x    3 root     root          4096 May  4 15:57 ..\n-rw-r--r--    1 root     root         86709 May  4 15:56 interstellar.png\n</code></pre>"},{"location":"2020-05-04-rg350_daphne.html#integracion-en-frontends","title":"Integraci\u00f3n en frontends","text":"<p>La integraci\u00f3n con frontends tambi\u00e9n es de la manera convencional. Por ejemplo \u00e9sta podr\u00eda ser la definici\u00f3n de una secci\u00f3n para DAPHNE en SimpleMenu:</p> <pre><code>[DAPHNE]\nexecs = /media/data/apps/Daphne_2015-05-07.opk\nromDirs = /media/data/roms/DAPHNE/,/media/sdcard/roms/DAPHNE/\nromExts = .zip\naliasFile = /media/home/.simplemenu/alias.txt\n</code></pre>"},{"location":"2020-05-04-rg350_daphne.html#controles","title":"Controles","text":"<p>A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de Daphne:</p> Control Funci\u00f3n Cruceta/Stick izquierdo Direcci\u00f3n. Un consejo: Utiliza mejor el stick <code>B</code> Bot\u00f3n 1 <code>A</code> Bot\u00f3n 2 <code>Y</code> Bot\u00f3n 3 <code>X</code> Intercambia controles verticales (para simuladores de vuelo) <code>R1</code> Pausa <code>L1</code> Insertar moneda (jugador 1) <code>Start</code> Comenzar juego (tras haber insertado moneda) <code>Select</code> Salir del emulador"},{"location":"2020-05-06-rg350_openbor.html","title":"RG350 OpenBOR","text":"<p>OpenBOR es un motor para juegos de scroll horizontal basados en sprites publicado con una licencia libre de royalties. Surgi\u00f3 a partir de que unos aficionados hicieran un homenaje al juego de SEGA Streets of Rage al que llamaron Beats of Rage. A partir de \u00e9l desarrollaron el motor de juegos llamado Open Beats of Rage u OpenBOR.</p>"},{"location":"2020-05-06-rg350_openbor.html#instalacion","title":"Instalaci\u00f3n","text":"<p>El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul>"},{"location":"2020-05-06-rg350_openbor.html#juegos","title":"Juegos","text":"<p>Los juegos de OpenBOR se encuentran como unos ficheros de extensi\u00f3n <code>.pak</code>. La gesti\u00f3n de los juegos se tiene que hacer desde el propio interfaz o frontend de OpenBOR (de manera parecida a como ocurre con xMAME o FBA). Al igual que ocurre en xMAME las rutas donde deben estar estos ficheros son fijas. Concretamente:</p> <ul> <li>Interna: <code>/usr/local/share/OpenBOR/Paks/</code></li> <li>Externa: <code>/media/sdcard/OpenBOR/Paks</code></li> </ul> <p>Rutas de ROMs alternativas</p> <p>Como siempre, jugando con enlaces simb\u00f3licos podemos hacer que estos directorios apunten a donde nosotros queramos. Por ejemplo, para pasar a utilizar las rutas m\u00e1s habituales en <code>/media/data/roms</code> y <code>/media/sdcard/roms</code>, podr\u00edamos ejecutar lo siguiente:</p> <pre><code># rm -rf /usr/local/share/OpenBOR/Paks\n# rm -rf /media/sdcard/OpenBOR/Paks\n# ln -s /media/data/roms/OPENBOR/ /usr/local/share/OpenBOR/Paks\n# ln -s /media/sdcard/roms/OPENBOR/ /media/sdcard/OpenBOR/Paks\n</code></pre>"},{"location":"2020-05-06-rg350_openbor.html#integracion-en-frontends","title":"Integraci\u00f3n en frontends","text":"<p>Como hemos comentado antes, OpenBOR tiene su propio frontend y no parece que haya una forma de lanzar una ROM concreta por l\u00ednea de comando (o al menos yo no la he encontrado), por lo que no tenemos m\u00e1s remedio que abrir el propio OpenBOR, y luego a trav\u00e9s de su interfaz, lanzar los juegos. Afortunadamente, de forma predeterminada, el OPK de OpenBOR se instala en la secci\u00f3n <code>games</code> de GMenu2X, por lo que frontends como SimpleMenu muestran el lanzador en la secci\u00f3n de ese mismo nombre.</p> <p></p>"},{"location":"2020-05-06-rg350_openbor.html#controles","title":"Controles","text":"<p>En el frontend de OpenBOR se nos informa en la barra inferior sobre los controles, pero hay que tener en cuenta que <code>X</code> e <code>Y</code> est\u00e1n intercambiados (no as\u00ed <code>A</code> y <code>B</code>).</p> <p> </p>"},{"location":"2020-05-08-rg350_dosbox.html","title":"RG350 DOSBox","text":"<p>DOSBox recrea un entorno MS-DOS virtual para permitir ejecutar los viejos juegos aparecidos en los 80-90 para esta plataforma. Soporta sonido, controles de entrada y gr\u00e1ficos.</p>"},{"location":"2020-05-08-rg350_dosbox.html#instalacion","title":"Instalaci\u00f3n","text":"<p>El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Por tanto s\u00f3lo tenemos que bajarlo de este enlace y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul> <p>Una vez instalado se puede ejecutar el entorno sin ning\u00fan juego para as\u00ed alcanzar algunas utilidades que ayudan a la configuraci\u00f3n del mismo. Para conseguir llegar al prompt, hay que editar el lanzador de GMenu2X, dejar en blanco el par\u00e1metro <code>Selector Directory</code> (ojo porque cada vez que se arranca toma el valor <code>/media</code>, por lo que hay que limpiarlo cada vez) y poner <code>OFF</code> en el par\u00e1metro <code>Selector Browser</code>:</p> <p></p> <p>Cuando lo lancemos aparecer\u00e1 la t\u00edpica pantalla de DOS. La pantalla tiene una resoluci\u00f3n de 640x400 por lo que en la pantalla de la RG350 se ver\u00e1 muy mal por el reescalado a 320x240 (para esto puede venir bien la reciente publicaci\u00f3n de un update que permite activar la salida de video HDMI que soporta esta resoluci\u00f3n):</p> <p></p> <p>Como se puede leer ah\u00ed, tecleando <code>INTRO</code> mediante el teclado virtual (que aparece pulsando <code>L1</code>) se nos muestran varias pantallas con informaci\u00f3n:</p> <p> </p>"},{"location":"2020-05-08-rg350_dosbox.html#configuracion","title":"Configuraci\u00f3n","text":"<p>El concepto m\u00e1s importante de entender en DOSBox es el del fichero de configuraci\u00f3n o <code>dosbox.conf</code>. Cuando arrancamos por primera vez DOSBox, se genera un fichero de configuraci\u00f3n gen\u00e9rico en el directorio <code>/media/data/local/home/.dosbox</code>. En concreto en la versi\u00f3n compilada para la RG350 este fichero tiene de nombre <code>dosbox-SVN.conf</code>. Dentro de \u00e9l est\u00e1n todos los ajustes que aplicar\u00e1n a los programas o juegos que ejecutemos en DOSBox. En particular hay un ajuste de la configuraci\u00f3n que se volver\u00e1 fundamental en la mayor\u00eda de los juegos y es el del mapeado del teclado. En la documentaci\u00f3n de este fichero vemos que los controles tienen su propio fichero de configuraci\u00f3n al que se apunta desde el <code>dosbox.conf</code> mediante el par\u00e1metro <code>mapperfile</code>.</p> <p>Un fichero mapper t\u00edpico contiene la relaci\u00f3n entre los c\u00f3digos de las teclas de un teclado de PC y las de los controles de la consola. En cada l\u00ednea del fichero se indica un c\u00f3digo de teclado de PC y a continuaci\u00f3n entre comillas el c\u00f3digo del pulsador de la RG350 con la palabra <code>key</code> delante separada del c\u00f3digo por un espacio (m\u00e1s adelante se muestran ejemplos).</p> <p>Los c\u00f3digos de teclado de PC m\u00e1s importantes son:</p> <ul> <li><code>key_a</code> hasta <code>key_z</code> para las letras</li> <li><code>key_0</code> hasta <code>key_9</code> para los n\u00fameros</li> <li><code>key_kp_0</code> hasta <code>key_kp_9</code> para el teclado num\u00e9rico</li> <li><code>key_kp_enter</code> para enter en teclado num\u00e9rico</li> <li><code>key_f1</code> hasta <code>key_f12</code> para las teclas de funci\u00f3n</li> <li><code>key_up</code>, <code>key_down</code>, <code>key_left</code>, <code>key_right</code> para las teclas de cursor</li> <li><code>key_lalt</code>, <code>key_lctrl</code>, <code>key_lshift</code>, <code>key_alt</code>, <code>key_ctrl</code>, <code>key_shift</code> para las teclas modificadoras</li> <li><code>key_enter</code>, <code>key_esc</code>, <code>key_space</code>, <code>key_tab</code></li> </ul> <p>Se adjunta aqu\u00ed un fichero todos los c\u00f3digos de teclado y joystick de PC que soporta DOSBox.</p> <p>Los c\u00f3digos de los controles de la RG350 son los siguientes:</p> Control C\u00f3digo Tecla de PC en mapper predeterminado A 306 key_lctrl B 308 key_lalt X 32 key_space Y 304 key_lshift L1 9 key_tab L2 280 key_pageup R1 8 key_bspace R2 281 key_pagedown UP 273 key_up DOWN 274 key_down LEFT 276 key_left RIGHT 275 key_right START 13 key_enter SELECT 27 key_esc POWER 278 key_home <p>Por ejemplo para mapear la tecla <code>A</code> de un PC al control <code>A</code> de la RG350 habr\u00eda que incluir la siguiente l\u00ednea en el fichero de mapper:</p> <pre><code>key_a \"key 306\"\n</code></pre> <p>Como ejemplo vamos a elaborar el mapper para el juego Prince of Persia. Un listado b\u00e1sico de los controles de este juego ser\u00eda:</p> Tecla Efecto Cursores Movimiento LShift Paso lento/Coger/Luchar Enter Empezar Espacio Muestra tiempo que queda Escape Pausa Ctrl-R Termina el juego y vuelve a la secuencia de t\u00edtulo Ctrl-A Reinicia el juego al comienzo del nivel actual Ctrl-S Apaga/enciende el sonido Ctrl-Q Cierra el juego y retorna a MS-DOS <p>As\u00ed pues vamos a establecer las siguientes relaciones entre las teclas de un PC y los controles de la RG350 (la tecla L1 la evitaremos puesto que siempre saca el teclado virtual):</p> Tecla PC Control RG350 Cursor arriba UP Cursor abajo DOWN Cursor derecha RIGHT Cursor izquierda LEFT LShift A Enter START Espacio B Escape SELECT LCtrl L2 R X A Y S R2 Q R1 <p>Lo que traducido a un fichero de mapper se convierte en:</p> <pre><code>key_up \"key 273\"\nkey_down \"key 274\"\nkey_right \"key 275\"\nkey_left \"key 276\"\nkey_lshift \"key 306\"\nkey_enter \"key 13\"\nkey_space \"key 308\"\nkey_esc \"key 27\"\nkey_lctrl \"key 280\"\nkey_r \"key 32\"\nkey_a \"key 304\"\nkey_s \"key 281\"\nkey_q \"key 8\"\n</code></pre> <p>Creamos el fichero con el contenido anterior y lo dejamos en <code>/media/data/local/home/.dosbox/mapper.txt</code>. Finalmente editamos el fichero <code>/media/data/local/home/.dosbox/dosbox-SVN.conf</code> para que el par\u00e1metro <code>mapperfile</code> apunte al nuevo fichero. A partir de entonces podremos utilizar el juego con los nuevos controles. La tabla inicial de controles con los equivalentes en RG350 queda ahora:</p> Tecla PC Efecto Control RG350 Cursores Movimiento Cruceta LShift Paso lento/Coger/Luchar A Enter Empezar START Espacio Muestra tiempo que queda B Escape Pausa SELECT Ctrl-R Termina el juego y vuelve a la secuencia de t\u00edtulo L2 + X Ctrl-A Reinicia el juego al comienzo del nivel actual L2 + Y Ctrl-S Apaga/enciende el sonido L2 + R2 Ctrl-Q Cierra el juego y retorna a MS-DOS L2 + R1 <p>Por \u00faltimo se incluyen a continuaci\u00f3n una serie de enlaces de documentaci\u00f3n que pueden servir de ayuda:</p> <ul> <li>Documentaci\u00f3n</li> <li>Tutorial</li> <li>dosbox.conf</li> <li>Manual de DOSBox: Revive juegos antiguos | Emezeta.COM</li> </ul>"},{"location":"2020-05-08-rg350_dosbox.html#juegos","title":"Juegos","text":"<p>Los juegos para DOSBox consisten simplemente en los ficheros originales del juego sin modificar, normalmente dentro de un directorio. DOSBox soporta el montaje de im\u00e1genes de CD-ROM para los juegos que ven\u00edan en este formato, pero de momento no nos vamos a complicar con eso (estudiar los enlaces indicados un poco m\u00e1s arriba). Una vez que tengamos los ficheros del juego en un directorio s\u00f3lo tendremos que abrir el OPK desde GMenu2X y explorar hasta localizar el directorio. Por defecto se nos filtrar\u00e1n los ficheros con extensiones <code>.exe</code>, <code>.com</code> y <code>.bat</code> que eran los t\u00edpicos ficheros ejecutables en MS-DOS. Seleccionando el ejecutable adecuado el juego arrancar\u00e1. Por ejemplo en una instalaci\u00f3n del juego <code>Prince of Persia</code> aparecen los siguientes ficheros como ejecutables:</p> <p></p> <p>El que tendremos que seleccionar es el de nombre <code>prince</code>.</p> <p></p>"},{"location":"2020-05-08-rg350_dosbox.html#integracion-en-frontends","title":"Integraci\u00f3n en frontends","text":"<p>DOSBox se integra bien con frontends puesto que permite seleccionar el ejecutable a lanzar mediante el explorador. Se recomienda filtrar \u00fanicamente la extensi\u00f3n <code>.bat</code> y generar un fichero de este tipo si no existe ya entre los ficheros del juego. De esta forma s\u00f3lo aparecer\u00e1 una entrada para arrancar el juego (y no 4 como hemos visto en el ejemplo anterior).</p>"},{"location":"2020-05-08-rg350_dosbox.html#personalizacion-de-controles-para-juegos","title":"Personalizaci\u00f3n de controles para juegos","text":"<p>Del extenso apartado Configuraci\u00f3n se desprende que la principal dificultad de instalar juegos MS-DOS en DOSBox es la del mapeo de controles. Adem\u00e1s, a pesar de que el proyecto oficial permite cargar autom\u00e1ticamente un dosbox.conf desde el directorio del juego, la versi\u00f3n para la RG350 que se encuentra habitualmente, no parece soportar esta capacidad. Sin embargo no es complicado adaptarla para que lo consiga. Simplemente incluyendo dentro del OPK el siguiente script de nombre <code>set_conf.sh</code> que ser\u00e1 el que se ejecute desde el fichero <code>default.gcw0.desktop</code>:</p> <pre><code>#!/bin/sh\n\nDIRBASE=`dirname \"${1}\"`\nif [ -f \"$DIRBASE/dosbox.conf\" ]\nthen\n    ./dosbox \"$1\" -exit -conf \"$DIRBASE/dosbox.conf\"\nelse\n    ./dosbox \"$1\" -exit\nfi\n</code></pre> <p>En <code>default.gcw0.desktop</code> sustituiremos la l\u00ednea correspondiente al par\u00e1metro <code>Exec</code> por lo siguiente:</p> <pre><code>Exec=set_conf.sh %f\n</code></pre> <p>El OPK resultante con estos cambios, que se puede utilizar en lugar del que se distribuye habitualmente, se puede descargar desde aqu\u00ed: Dosbox_conf_mod.opk</p> <p>Con este OPK simplemente tendremos que colocar el <code>dosbox.conf</code> que queremos que aplique en el mismo directorio del juego. El mapper al que se apunte desde este fichero (par\u00e1metro <code>mapperfile</code>, recordemos) tambi\u00e9n se deber\u00e1 encontrar en el directorio del juego.</p>"},{"location":"2020-05-08-rg350_dosbox.html#configuracion-de-scalers","title":"Configuraci\u00f3n de scalers","text":"<p>Un par\u00e1metro interesante del <code>dosbox.conf</code> es el <code>scaler</code> que se encuentra dentro de la secci\u00f3n <code>[render]</code>. Permite seleccionar de entre una serie de filtros para producir efectos en la pantalla (como los t\u00edpicos scanlines de los televisores CRT). Por ejemplo en el <code>dosbox.conf</code> predeterminado se ve esto:</p> <pre><code>[render]\n# frameskip: How many frames DOSBox skips before drawing one.\n#    aspect: Do aspect correction, if your output method doesn't support scaling this can slow things down!.\n#    scaler: Scaler used to enlarge/enhance low resolution modes. If 'forced' is appended,\n#            then the scaler will be used even if the result might not be desired.\n#            Possible values: none, normal2x, normal3x, advmame2x, advmame3x, advinterp2x, advinterp3x, hq2x, hq3x, 2xsai, super2xsai, supereagle, tv2x, tv3x, rgb2x, rgb3x, scan2x, scan3x.\n\nframeskip=0\naspect=false\nscaler=none\n</code></pre> <p>Cambiando ese par\u00e1metro se pueden conseguir los distintos efectos, aunque al probarlos se ve que no resultan de mucha utilidad en la RG350. Supongo que depender\u00e1 mucho de la resoluci\u00f3n original del juego. Es decir, si el juego se dibuja a 320x240, la mayor\u00eda de esos scalers no tienen mucho sentido.</p> <p>A continuaci\u00f3n se muestra el efecto de cada uno de los scalers sobre la pantalla de presentaci\u00f3n del Prince of Persia que sin scaler aplicado se ve as\u00ed:</p> <p></p> <p>normal2x</p> <p></p> <p>advmame2x</p> <p></p> <p>advinterp2x</p> <p></p> <p>hq2x</p> <p></p> <p>2xsai</p> <p></p> <p>super2xsai</p> <p></p> <p>supereagle</p> <p></p> <p>scaler_tv2x</p> <p></p> <p>rgb2x</p> <p></p> <p>scan2x</p> <p></p> <p>Los siguientes scalers parecen no funcionar (supongo que porque ser\u00e1 necesario que la resoluci\u00f3n de pantalla sea el triple al menos de la del juego):</p> <ul> <li>normal3x</li> <li>advmame3x</li> <li>advinterp3x</li> <li>hq3x</li> <li>tv3x</li> <li>rgb3x</li> <li>scan3x</li> </ul>"},{"location":"2020-05-14-rg350_mame4all.html","title":"RG350 MAME4All","text":"<p>MAME4All es otro port del conocido multiemulador de m\u00e1quinas arcade, alternativo a xMAME. En principio implementa un romset m\u00e1s antiguo que los tres que implementa xMAME, pero aun as\u00ed nos puede convenir instalarlo ya que algunos juegos se ejecutan mejor en MAME4All que en xMAME. Vamos a ver c\u00f3mo instalarlo y configurarlo en la consola RG350.</p>"},{"location":"2020-05-14-rg350_mame4all.html#instalacion","title":"Instalaci\u00f3n","text":"<p>El emulador tiene forma de OPK, como la mayor\u00eda de los emuladores para el sistema de la RG350 (OpenDingux). Encontramos dos variantes de este OPK:</p> <ul> <li>La del repositorio original cuyo OPK compilado lo podemos encontrar aqu\u00ed por ejemplo.</li> <li>Mod que permite usar el explorer para seleccionar las ROMs, presentada en este foro, desarrollada sobre este repositorio y cuyo OPK podemos encontrar aqu\u00ed.</li> </ul> <p>Nosotros vamos a utilizar la segunda variante que presenta dos lanzadores en GMenu2X, uno para lanzar el interfaz propio de MAME4All (<code>mame4all ux</code>) y otro para lanzar directamente ROMs desde el explorador. Esto \u00faltimo ser\u00e1 lo que nos permita integrar MAME4All con otros frontends como EmulationStation, SimpleMenu o PyMenu.</p> <p></p> <p>Por tanto s\u00f3lo tenemos que bajar el OPK elegido de la lista anterior y copiarlo a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul>"},{"location":"2020-05-14-rg350_mame4all.html#configuracion","title":"Configuraci\u00f3n","text":"<p>La primera vez que tratemos de abrir el lanzador que nos lleva al interfaz propio de MAME4All (<code>mame4all ux</code> en el caso de que hayamos instalado el OPK con doble lanzador), aparecer\u00e1 un mensaje de error y se nos pedir\u00e1 que localicemos el directorio donde se encuentran las ROMs:</p> <p></p> <p>Navegaremos por el \u00e1rbol de directorios hasta localizar nuestras ROMs:</p> <p> </p> <p>Finalmente al seleccionar el directorio pulsando <code>Start</code> aparecer\u00e1 el listado de las ROMs que se han reconocido correctamente:</p> <p></p> <p>Nota</p> <p>Que aparezcan las ROMs en el listado s\u00f3lo significa que se han encontrado con el nombre correcto. El contenido de las mismas no se comprueba hasta que intentamos abrirlas. As\u00ed es posible que algunas ROMs aparezcan pero luego no sean ejecutables. MAME4All nos mostrar\u00e1 un informe del problema que ha encontrado para ejecutar las ROMs.</p> <p></p> <p>MAME4All se basa en el romset 0.37b5, tambi\u00e9n conocido como 0.41, cuya definici\u00f3n podemos encontrar aqu\u00ed.</p>"},{"location":"2020-05-14-rg350_mame4all.html#integracion-en-frontends","title":"Integraci\u00f3n en frontends","text":"<p>Si hemos elegido la variante del OPK con el mod que permite seleccionar las ROMs mediante el explorer, MAME4All se podr\u00e1 integrar con otros frontends como la mayor\u00eda de los emuladores. Por ejemplo esta es la definici\u00f3n como sistema en SimpleMenu:</p> <pre><code>[MAME4ALL]\nexecs = /media/data/apps/mame4all-params-5-skipwarnings.opk\nromDirs = /media/data/roms/ARCADE/,/media/sdcard/roms/ARCADE/\nromExts = .zip\naliasFile = /media/home/.simplemenu/alias.txt\n</code></pre> <p>Y esta en PyMenu:</p> <pre><code>{\n    \"description\": \"MAME4All Arcade EMU\",\n    \"hideFolders\": true,\n    \"limitSelection\": true,\n    \"name\": \"MAME4All\",\n    \"overclock\": \"1080\",\n    \"previews\": \"/media/data/roms/ARCADE/.previews\",\n    \"selectionPath\": \"/media/data/roms/ARCADE\",\n    \"system\": \"mame4all\",\n    \"type\": \"emulator\",\n    \"useFileFilter\": true,\n    \"useGamelist\": false,\n    \"useSelection\": true\n},\n</code></pre>"},{"location":"2020-05-14-rg350_mame4all.html#controles","title":"Controles","text":"<p>A continuaci\u00f3n se muestra una recopilaci\u00f3n de controles de MAME4All:</p> Control Situaci\u00f3n Funci\u00f3n <code>Arriba</code> / <code>Abajo</code> En frontend Seleccionar ROM una a una <code>Izquierda</code> / <code>Derecha</code> En frontend Seleccionar ROM p\u00e1gina a p\u00e1gina <code>A</code> En frontend Abrir ROM seleccionada <code>L1 + R1</code> En frontend Salir <code>Select</code> En frontend Regenerar cach\u00e9 (para detectar nuevas ROMs a\u00f1adidas) <code>Arriba</code> / <code>Abajo</code> En configuraci\u00f3n de ROM Seleccionar opci\u00f3n a cambiar <code>Izquierda</code> / <code>Derecha</code> En configuraci\u00f3n de ROM Cambiar opci\u00f3n <code>A</code> En configuraci\u00f3n de ROM Guardar opciones configuradas y abrir ROM <code>B</code> En configuraci\u00f3n de ROM Volver a la lista de ROMs <code>A</code>, <code>B</code>, <code>X</code>, <code>Y</code>, <code>L</code>, <code>R</code> En juego Botones MAME 1,2,3,4,5,6 <code>Select</code> En juego Insertar moneda <code>Start</code> En juego Comenzar 1P <code>Start + Select</code> En juego Menu MAME <code>Start + L1 + R1</code> o <code>Power</code> (seg\u00fan versi\u00f3n) En juego Salir del juego <code>L1 + R1</code> En juego Pausa <code>Select + R1</code> En juego Mostrar FPS <code>Start + L1</code> En juego Mostrar Profiler <code>L1 + B</code> En juego Hacer captura de pantalla (se almacena en <code>/media/data/local/home/.mame4all/snap</code>)"},{"location":"2020-05-25-rg350_docker_buildroot.html","title":"RG350 Docker Buildroot","text":"<p>La distribuci\u00f3n del sistema operativo OpenDingux de la RG350 est\u00e1 basado en Buildroot. Para compilarlo se recomienda utilizar una instalaci\u00f3n Debian Stretch o Buster (seg\u00fan la versi\u00f3n de Buildroot en que est\u00e9 basado). Si no es el sistema que tenemos en nuestra m\u00e1quina (bien por usar Windows o Mac o por tener otra distribuci\u00f3n Linux), y no queremos o podemos instalar una pesada m\u00e1quina virtual para disponer del entorno adecuado, existe la posibilidad de encapsularlo en un contenedor Docker.</p> <p>El procedimiento que se muestra a continuaci\u00f3n est\u00e1 hecho sobre un Linux Ubuntu 20.04, pero no deber\u00eda ser complicado de adaptar para poder realizarse sobre Windows o Mac.</p>"},{"location":"2020-05-25-rg350_docker_buildroot.html#eleccion-de-distribucion-buildroot","title":"Elecci\u00f3n de distribuci\u00f3n Buildroot","text":"<p>Existen varias distribuciones Buildroot para RG350. A continuaci\u00f3n se listan algunas:</p> Distribuci\u00f3n Versi\u00f3n Buildroot Entorno de compilaci\u00f3n Observaciones GCW0 \u00c9ste realmente no es para la RG350 sino para la GCWZero, pero se incluye por ser el origen del resto OpenDingux Tampoco tiene una configuraci\u00f3n espec\u00edfica para la RG350 Tonyjih 2014.08 Debian Stretch; Docker eduardofilo/rg350_buildroot Buildroot en el que se basan muchos Ninoh-FOX Debian Stretch ROGUE CFW gokr soarquin CentOS 7; Docker soarqin/rg350_toolchain od-contrib 2020.05 Debian Buster; Docker eduardofilo/rg350_buster_buildroot Basado en un Buildroot moderno glebm <p>Vamos a empezar bajando una de estas distribuciones Buildroot de RG350 a un directorio de nuestra m\u00e1quina (la que actuar\u00e1 de host para Docker). Es habitual utilizar un directorio <code>git</code> en el home del usuario donde descargar los repositorios y nosotros seguiremos esta costumbre. M\u00e1s adelante, al arrancar el contenedor, indicaremos ese directorio como volumen para conectar el sistema de archivos de nuestra m\u00e1quina (host) con el contenedor. As\u00ed conseguimos que nuestra m\u00e1quina (host) s\u00f3lo sirva de almac\u00e9n de las fuentes y los binarios resultantes, utilizando Docker para encapsular las dependencias que tiene la versi\u00f3n de Buildroot que vamos a utilizar que son muy numerosas y con frecuencia no coinciden con lo que nuestro sistema tiene instalado.</p> <p>Por ejemplo vamos a utilizar la distribuci\u00f3n de Tonyjih. Bajamos pues el repositorio en nuestra m\u00e1quina. Con los siguientes comandos quedar\u00e1 en <code>~/git/RG350_buildroot</code>:</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/tonyjih/RG350_buildroot.git\n</code></pre>"},{"location":"2020-05-25-rg350_docker_buildroot.html#procedimiento-para-crear-el-contenedor","title":"Procedimiento para crear el contenedor","text":"<p>Ve\u00edamos en la tabla anterior que podemos compilar la distribuci\u00f3n que hemos elegido para ilustrar el art\u00edculo (la de Tonyjih) con la imagen Docker eduardofilo/rg350_buildroot. A continuaci\u00f3n vamos a ver los pasos para descargar y ejecutar esta imagen. Los primeros pasos son una receta r\u00e1pida para instalar Docker en nuestro sistema si no cont\u00e1ramos ya con \u00e9l, pero es mejor seguir una de las muchas gu\u00edas que se pueden encontrar (por ejemplo para Ubuntu).</p> <ol> <li> <p>Instalar Docker en m\u00e1quina host:</p> <pre><code>$ sudo apt install docker.io\n$ sudo groupadd docker\n$ sudo usermod -aG docker $USER\n$ sudo systemctl enable docker\n$ sudo systemctl start docker\n</code></pre> </li> <li> <p>Arrancar contenedor pasando el directorio <code>~/git</code> como volumen:</p> <pre><code>$ docker run -it -v ~/git:/root/git --name RG350_buildroot eduardofilo/rg350_buildroot\n</code></pre> </li> </ol> <p>Si en lugar de utilizar la versi\u00f3n compilada de la imagen subida al Docker Hub queremos construirla en local (por si quisi\u00e9ramos hacer alguna modificaci\u00f3n en el Dockerfile), intercalar\u00edamos los siguientes comandos entre los pasos 1 y 2 anteriores:</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/eduardofilo/RG350_buildroot_docker.git\n$ cd ~/git/RG350_buildroot_docker\n$ docker build -t eduardofilo/rg350_buildroot .\n</code></pre> <p>Tras ejecutar el paso 2 deber\u00eda quedar un prompt ejecut\u00e1ndose desde el entorno Debian dentro del contenedor. Como hemos conectado el directorio <code>/root/git</code> del contenedor con el directorio <code>~/git</code> de nuestra m\u00e1quina, cualquier cosa que queramos modificar o recoger al final de la compilaci\u00f3n, la podremos localizar desde un explorador de archivos de nuestra m\u00e1quina. Si en alg\u00fan momento perdi\u00e9ramos de vista la terminal ejecut\u00e1ndose en el entorno del contenedor, podremos recuperarla ejecutando:</p> <pre><code>$ docker exec -it RG350_buildroot /bin/bash\n</code></pre> <p>Si el comando anterior devuelve un error indicando que el contenedor est\u00e1 parado, podemos arrancarlo antes ejecutando la orden:</p> <pre><code>$ docker start RG350_buildroot\n</code></pre>"},{"location":"2020-05-25-rg350_docker_buildroot.html#operacion-general-de-buildroot","title":"Operaci\u00f3n general de Buildroot","text":"<p>Una vez que tenemos en marcha y el contenedor y nos hemos conectado con \u00e9l, ya podemos empezar a trabajar con Buildroot. Esta distribuci\u00f3n tiene su propia estructura y formas de operaci\u00f3n. Vamos a empezar describiendo por encima el entorno y algunas operaciones habituales o interesantes.</p> <p>Buildroot se puede describir de forma resumida como un toolchain de compilaci\u00f3n cruzada unido a un gran n\u00famero de paquetes (siendo uno de ellos el kernel Linux) que en conjunto pueden constituir un sistema Linux completo, habitualmente para un sistema embebido. La lista de paquetes que contiene Buildroot podemos encontrarla en el directorio package.</p> <p>Luego, existen una serie de configuraciones predefinidas para placas conocidas. Las podemos encontrar en el directorio configs. Una de las primeras cosas que haremos m\u00e1s adelante es cargar la configuraci\u00f3n para RG350 (fichero rg350_defconfig). Esta configuraci\u00f3n se basa en la estructura oficial de Buildroot que es gen\u00e9rica para sistemas embebidos Linux. Si en nuestro sistema deseamos alguna caracter\u00edstica especial o parche sobre los paquetes est\u00e1ndar que Buildroot ofrece, tenemos otro mecanismo, los ficheros que encontraremos en el directorio <code>board/&lt;fabricante&gt;/&lt;placa&gt;</code>. En el caso de RG350 el nombre del fabricante elegido es <code>opendingux</code> y el nombre de la placa <code>gcw0</code>. As\u00ed pues en el directorio <code>board/opendingux/gcw0</code> podemos encontrar por ejemplo los scripts para generar una imagen v\u00e1lida para la consola.</p> <p>Nota</p> <p>A partir de este punto veremos que las l\u00edneas de terminal est\u00e1n precedidas por <code>#</code> y no por <code>$</code> como antes porque se refieren al terminal dentro del contenedor Docker, que se ejecuta con el usuario root del mismo.</p> <p>Antes de empezar cargamos la configuraci\u00f3n para RG350 de las m\u00faltiples que trae Buildroot de serie:</p> <pre><code># cd ~/git/RG350_buildroot\n# make rg350_defconfig BR2_EXTERNAL=board/opendingux\n</code></pre> <p>Si ahora queremos repasar o cambiar algo de esta configuraci\u00f3n lo haremos por medio de una herramienta similar a la que se utiliza para configurar un kernel Linux antes de compilarlo. Para ello utilizaremos uno de los dos comandos <code>make</code> siguientes (s\u00f3lo uno):</p> <pre><code># cd ~/git/RG350_buildroot\n# make menuconfig\n# make nconfig\n</code></pre> <p>Antes de empezar a compilar cosas vamos a definir la siguiente variable de entorno que permitir\u00e1 la compilaci\u00f3n en paralelo:</p> <pre><code># export BR2_JLEVEL=0\n</code></pre> <p>A continuaci\u00f3n describimos algunas operaciones que podemos realizar:</p> Comando Efecto <code>make clean</code> Borra todos los ficheros generados en la compilaci\u00f3n <code>make toolchain</code> Genera el toolchain de compilaci\u00f3n cruzada. El resultado queda en el directorio <code>~/git/RG350_buildroot/output/host/usr/bin</code>; tarda 1h50m en un Intel i3-4005U y genera unos 3GBs de archivos <code>make &lt;paquete&gt;</code> Compila el paquete (de la lista de paquetes de la distribuci\u00f3n) <code>make &lt;paquete&gt;-rebuild</code> Fuerza la recompilaci\u00f3n del paquete <code>make &lt;paquete&gt;-reconfigure</code> Fuerza la reconfiguraci\u00f3n del paquete <code>make &lt;paquete&gt;-graph-depends</code> Genera un gr\u00e1fico del \u00e1rbol de dependencias del paquete <code>make all</code> Compila la distribuci\u00f3n completa"},{"location":"2020-05-25-rg350_docker_buildroot.html#operacion-particular-de-la-distribucion-buildroot-para-rg350","title":"Operaci\u00f3n particular de la distribuci\u00f3n Buildroot para RG350","text":"<p>Una vez que tenemos preparado el entorno podremos realizar las tareas y compilaciones previstas en el mismo. Por ejemplo en el entorno preparado por Tonyjih vemos que podemos realizar las siguientes operaciones:</p> <ul> <li> <p>Si se quiere que la imagen incluya emuladores y aplicaciones, ejecutar antes lo siguiente (s\u00f3lo es necesario hacerlo una vez):</p> <pre><code># cd ~/git/RG350_buildroot\n# board/opendingux/gcw0/download_local_pack.sh\n</code></pre> </li> <li> <p>Compilaci\u00f3n de imagen para flashear en SD (el fichero con la imagen resultante queda en <code>~/git/RG350_buildroot/output/images/od-imager/images/sd_image.bin</code>; tarda 6h en un Intel i3-4005U y genera unos 9GBs de archivos):</p> <pre><code># cd ~/git/RG350_buildroot\n# board/opendingux/gcw0/make_initial_image.sh\n</code></pre> </li> <li> <p>Generaci\u00f3n de un OPK update para ejecutarse directamente sobre el sistema anterior (el fichero con el OPK resultante queda en <code>~/git/RG350_buildroot/output/images/rg350-update-&lt;fecha&gt;.opk</code>):</p> <pre><code># cd ~/git/RG350_buildroot\n# board/opendingux/gcw0/make_upgrade.sh\n</code></pre> </li> </ul> <p>Hay un problema con el script <code>make_initial_image.sh</code> y es que internamente ejecuta <code>make rg350_defconfig BR2_EXTERNAL=board/opendingux</code> lo que hace que si hemos hecho <code>make menuconfig</code> se pierdan los cambios realizados ya que se vuelve a cargar el <code>rg350_defconfig</code> que hay en <code>config</code>. Tenemos varias opciones para evitar este problema:</p> <ol> <li>Editar manualmente el fichero rg350_defconfig.</li> <li>Retirar la llamada a <code>make rg350_defconfig BR2_EXTERNAL=board/opendingux</code> dentro del script <code>make_initial_image.sh</code>.</li> <li>Ejecutar <code>make BR2_DEFCONFIG=configs/rg350_defconfig savedefconfig</code> tras el <code>make menuconfig</code> para regenerar el fichero <code>configs/rg350_defconfig</code> con la nueva configuraci\u00f3n.</li> </ol>"},{"location":"2020-05-25-rg350_docker_buildroot.html#compilacion-de-distribucion-od-contrib","title":"Compilaci\u00f3n de distribuci\u00f3n od-contrib","text":"<p>Existe una distribuci\u00f3n Buildroot bastante moderna (basada en la versi\u00f3n 2020.05), que por tanto ofrece una versi\u00f3n mucho m\u00e1s actual de los paquetes que constituyen la distribuci\u00f3n (no as\u00ed el Kernel Linux que se mantiene en la versi\u00f3n 3.12). El procedimiento de compilaci\u00f3n es muy similar al de la distribuci\u00f3n de Tonyjih ilustrada antes. Vamos a mostrar el paso a paso sin dar explicaciones (sirven las mismas que antes) para compilar esta versi\u00f3n:</p> <ol> <li> <p>En m\u00e1quina host:</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/od-contrib/buildroot-rg350-old-kernel.git\n$ docker run -it -v ~/git:/root/git --name RG350_buster_buildroot eduardofilo/rg350_buster_buildroot\n</code></pre> </li> <li> <p>En contenedor:</p> <pre><code># cd ~/git/buildroot-rg350-old-kernel\n# make rg350_defconfig BR2_EXTERNAL=board/opendingux\n# make menuconfig\n# export BR2_JLEVEL=0\n# make toolchain\n# board/opendingux/gcw0/make_initial_image.sh rg350\n</code></pre> </li> </ol> <p>El script <code>make_initial_image.sh</code> tiene el mismo problema que coment\u00e1bamos al final del apartado anterior con la distribuci\u00f3n Tonyjih. Adem\u00e1s falla por tener un patr\u00f3n de target doble:</p> <pre><code># cd ~/git/buildroot-rg350-old-kernel\n# make rg350_defconfig BR2_EXTERNAL=board/opendingux:opks\nMakefile:184: *** multiple target patterns.\u00a0 Stop.\n</code></pre> <p>La soluci\u00f3n consiste en retirar el <code>:opks</code> del final de la llamada anterior que hay en la linea 18 del script <code>make_initial_image.sh</code>.</p> <p>Tras solucionar esos problemas y ejecutar todo lo anterior, encontraremos la imagen completa compilada en <code>~/git/buildroot-rg350-old-kernel/output/images/od-imager/images/sd_image.bin</code>.</p> <p>Nota</p> <p>A la hora de compilar esta distribuci\u00f3n Buildroot, no estaba disponible el paquete <code>libpng14</code>. La URL principal de descarga produc\u00eda timeout en la conexi\u00f3n y las secundarias no exist\u00edan. La soluci\u00f3n fue bajar el paquete por nuestra cuenta, colocarlo en el directorio <code>~/git/buildroot-rg350-old-kernel/dl/libpng14</code> y volver a compilar. El paquete se puede encontrar por ejemplo aqu\u00ed.</p>"},{"location":"2020-05-25-rg350_docker_buildroot.html#comandos-para-gestionar-contenedores","title":"Comandos para gestionar contenedores","text":"<p>Por \u00faltimo se comentan a continuaci\u00f3n a modo de cheatsheet unos pocos comandos \u00fatiles para gestionar el contenedor que acabamos de crear:</p> Comando Efecto <code>docker container ls -a</code> Listar contenedores. Para averiguar hash por ejemplo. <code>docker container start &lt;hash&gt;</code> Arrancar contenedor. <code>docker exec -it &lt;hash&gt; /bin/bash</code> Obtener prompt bash en contenedor. <code>docker container stop &lt;hash&gt;</code> Detener contenedor. <code>docker container rm &lt;hash&gt;</code> Borrar contenedor."},{"location":"2020-05-31-rg350_compile.html","title":"RG350 Compilar aplicaciones","text":"<p>En el post anterior vimos c\u00f3mo construir un entorno para hacer compilaci\u00f3n cruzada para el procesador y el sistema operativo de la RG350. En este post separado vamos a ver c\u00f3mo utilizar el entorno anterior para compilar algunos programas.</p> <p>Aclarar que este entorno es necesario para compilar c\u00f3digo en C y C++ que es el habitual en sistemas embebidos Linux. Puede haber programas pensados para la RG350 que est\u00e9n programados en otros lenguajes. Por ejemplo el frontend PyMenu est\u00e1 programado en Python. En ese caso no necesitamos un compilador; en todo caso algunas herramientas como el empaquetador de OPK para montar el instalador de PyMenu, pero no el compilador.</p> <p>Por supuesto el toolchain ser\u00e1 imprescindible para construir una imagen completa para la consola. En el post anterior ya se relataron los pasos para realizar esta operaci\u00f3n. En este art\u00edculo vamos a centrarnos en la compilaci\u00f3n de aplicaciones, ya que tiene su propia complejidad. Uno de los problemas del ambiente C es que existen multitud de gestores de compilaci\u00f3n que adem\u00e1s se pueden utilizar de m\u00faltiples formas, por lo que ser\u00e1 habitual que cada aplicaci\u00f3n se compile de una forma particular. Aqu\u00ed vamos a ver algunos ejemplos habituales.</p> <p>En el post anterior se comenta que el toolchain, una vez compilado queda en el directorio <code>~/git/RG350_buildroot/output/host/usr/bin</code>. Si listamos el contenido de ese directorio veremos muchos binarios y otros tantos enlaces simb\u00f3licos para que algunos de los binarios tengan nombres habituales. Uno de los m\u00e1s importantes es el binario <code>toolchain-wrapper</code> que adopta m\u00faltiples nombres a trav\u00e9s de los enlaces simb\u00f3licos:</p> <pre><code>$ ls -l |fgrep toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-gcw0-linux-uclibc-c++ -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-gcw0-linux-uclibc-cc -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-gcw0-linux-uclibc-cpp -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-gcw0-linux-uclibc-g++ -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-gcw0-linux-uclibc-gcc -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-gcw0-linux-uclibc-gcc-5.4.0 -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-linux-c++ -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-linux-cc -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-linux-cpp -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-linux-g++ -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-linux-gcc -&gt; toolchain-wrapper\nlrwxrwxrwx 1 root root      17 may 29 00:19 mipsel-linux-gcc-5.4.0 -&gt; toolchain-wrapper\n-rwxr-xr-x 1 root root   14808 may 29 00:19 toolchain-wrapper\n</code></pre> <p>Como vemos, encontramos ah\u00ed todos los nombres habituales del compilador de C y C++ para Linux sobre arquitectura MIPS.</p> <p>Veamos pues algunos ejemplos de compilaci\u00f3n de distintos programas.</p>"},{"location":"2020-05-31-rg350_compile.html#invoker","title":"invoker","text":"<p>Se trata de un peque\u00f1o programa utilizado por el frontend SimpleMenu para ejecutar los emuladores. El c\u00f3digo de invoker se encuentra en este repositorio. Analizando los ficheros vemos que el proyecto tiene ya hecho un sencillo Makefile. Al ser un programa muy peque\u00f1o y simple resulta muy educativo. Tampoco tiene dependencias con ninguno de los paquetes de Buildroot por lo que no ser\u00e1 necesario compilar antes ninguno de ellos, tan s\u00f3lo el toolchain. Vamos a ver c\u00f3mo compilarlo con nuestro recien construido toolchain paso a paso:</p> <ol> <li> <p>Bajamos el c\u00f3digo dentro del directorio <code>git</code> de la m\u00e1quina host que es el que tenemos conectado con el contenedor:</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/fgl82/invoker.git\n</code></pre> </li> <li> <p>Editamos el fichero <code>/git/invoker/invoker/Makefile</code>. Cambiamos el par\u00e1metro <code>PLATFORM</code> en las primeras lineas para que sea <code>RG-350</code> y corregimos la ruta del compilador de nuestro toolchain en la linea 16:</p> <pre><code>...\nelse ifeq ($(PLATFORM), RG-350)\n  CC = /root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-gcc\n...\n</code></pre> </li> <li> <p>Conectamos con el contenedor:</p> <pre><code>$ docker start RG350_buildroot\n$ docker exec -it RG350_buildroot /bin/bash\n</code></pre> </li> <li> <p>Compilamos:</p> <pre><code># cd ~/git/invoker/invoker\n# make\n</code></pre> </li> </ol> <p>Veremos los mensajes del compilador y al terminar encontraremos dos nuevos binarios:</p> <pre><code>root@18c6ecd1a610:~/git/invoker/invoker# ls -ltr\ntotal 36\n-rw-rw-r-- 1 1000 1000  4844 May 30 20:21 invoker.c\n-rw-rw-r-- 1 1000 1000  1685 May 30 20:27 Makefile\n-rw-r--r-- 1 root root 14368 May 30 20:28 invoker.o\n-rwxr-xr-x 1 root root  5484 May 30 20:28 invoker.dge\n</code></pre>"},{"location":"2020-05-31-rg350_compile.html#tetris-clone-for-the-rg350","title":"Tetris Clone for the RG350","text":"<p>Continuamos con un port de un juego. El c\u00f3digo podemos encontrarlo aqu\u00ed. Analizando los ficheros vemos que el proyecto es de tipo CMake. Vamos a ver c\u00f3mo se podr\u00eda compilar:</p> <ol> <li> <p>Bajamos el c\u00f3digo:</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/eduardofilo/tetris_rg350.git\n</code></pre> </li> <li> <p>Editamos fichero <code>~/git/tetris_rg350/CMakeLists.txt</code> para ajustar las rutas del toolchain de esta forma:</p> <pre><code>SET(CMAKE_C_COMPILER   \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-gcc\")\nSET(CMAKE_CXX_COMPILER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-g++\")\nSET(CMAKE_RANLIB \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-ranlib\")\nSET(CMAKE_LINKER \"/root/git/RG350_buildroot/output/host/usr/bin/mipsel-gcw0-linux-uclibc-ld\")\nSET(CMAKE_FIND_ROOT_PATH  /root/git/RG350_buildroot/output/host/usr/mipsel-gcw0-linux-uclibc/sysroot)\n</code></pre> </li> <li> <p>La forma en la que est\u00e1n construidos los ficheros <code>CMakeLists.txt</code> exige que la versi\u00f3n de cmake a utilizar sea igual o superior a la 3.13, pero nosotros tenemos 3.7. Por tanto es necesario hacer modificaciones en los <code>CMakeLists.txt</code>. Comentamos la \u00faltima l\u00ednea del fichero <code>~/git/tetris_rg350/CMakeLists.txt</code>:</p> <pre><code>#install(TARGETS tetris RUNTIME DESTINATION ${BIN_DIR} )\n</code></pre> </li> <li> <p>Y descomentamos la \u00faltima linea del <code>~/git/tetris_rg350/src/CMakeLists.txt</code>:</p> <pre><code>install(TARGETS tetris RUNTIME DESTINATION ${BIN_DIR} )\n</code></pre> </li> <li> <p>Conectamos con el contenedor que contiene el toolchain:</p> <pre><code>$ docker start RG350_buildroot\n$ docker exec -it RG350_buildroot /bin/bash\n</code></pre> </li> <li> <p>El programa tiene 4 paquetes como dependencias, as\u00ed que los tenemos que compilar previamente. Si es la primera vez tardar\u00e1 bastante:</p> <pre><code># cd ~/git/RG350_buildroot\n# export BR2_JLEVEL=0\n# make sdl2 sdl2_image sdl2_mixer sdl2_ttf\n</code></pre> </li> <li> <p>Finalmente compilamos el programa (el binario resultante de la compilaci\u00f3n queda en <code>~/git/tetris_rg350/build/tetris</code>):</p> <pre><code># cd ~/git/tetris_rg350\n# mkdir build\n# cd ~/git/tetris_rg350/build\n# cmake ..\n# make\n</code></pre> </li> <li> <p>S\u00f3lo queda empaquetar el binario y sus recursos (gr\u00e1ficos, sonidos, fichero <code>.desktop</code> para el lanzador, etc.). Existe un peque\u00f1o script que lo hace por nosotros, as\u00ed que lo utilizamos:</p> <pre><code># cd ~/git/tetris_rg350/build\n# ./make_opk.sh\n</code></pre> </li> </ol> <p>Si todo ha ido bien el OPK resultante se encontrar\u00e1 en <code>~/git/tetris_rg350/build/tetris.opk</code>. Comentar que por ejemplo el OPK compilado de esta forma no es operativo en ROGUE (seguramente por las diferencias en las versiones de las librer\u00edas SDL). Sin embargo en la imagen de sistema compilada con este mismo Buildroot funciona correctamente.</p>"},{"location":"2020-05-31-rg350_compile.html#dinguxcmdr","title":"DinguxCmdr","text":"<p>En esta ocasi\u00f3n vamos a compilar una aplicaci\u00f3n de uso frecuente, el DinguxCommander o DinguxCmdr. Las fuentes las podemos encontrar en este repositorio. Analizando su contenido vemos que ofrece un script para automatizar la compilaci\u00f3n, aunque internamente se trata de un proyecto de tipo CMake. El procedimiento para compilarlo es:</p> <ol> <li> <p>Bajamos el c\u00f3digo:</p> <pre><code>$ cd ~/git\n$ git clone https://github.com/od-contrib/commander.git\n</code></pre> </li> <li> <p>Conectamos con el contenedor que contiene el toolchain:</p> <pre><code>$ docker start RG350_buildroot\n$ docker exec -it RG350_buildroot /bin/bash\n</code></pre> </li> <li> <p>Definimos la variable de entorno que servir\u00e1 para localizar el toolchain de nuestro Buildroot:</p> <pre><code># export BUILDROOT=/root/git/RG350_buildroot\n</code></pre> </li> <li> <p>Ejecutamos el script indicando la plataforma de destino:</p> <pre><code># cd ~/git/commander\n# ./build.sh rg350\n</code></pre> </li> </ol> <p>Tras terminar encontraremos el OPK en <code>~/git/commander/build-rg350/commander-rg350.opk</code>. Al igual que ocurre con Tetris Clone for the RG350 el OPK no es operativo en ROGUE. Sin embargo en la imagen de sistema compilada con este mismo Buildroot funciona correctamente.</p>"},{"location":"2020-06-04-rg350_raspi_image.html","title":"RG350 Raspi Imagen","text":"<p>Muchas de las placas Linux Embedded, como RG350 o Raspberry Pi, contienen el sistema operativo en una microSD con una distribuci\u00f3n de particiones y archivos determinada. Una vez que tenemos un sistema configurado a nuestro gusto nos puede interesar hacer una imagen de la misma por si se corrompe o estropea la tarjeta que estamos utilizando o por si queremos distribuir el sistema a otras personas.</p> <p>En este art\u00edculo se comenta el procedimiento para obtener un dump o imagen de una tarjeta SD, consistente en producir un fichero con el contenido y estructura de una tarjeta dada, es decir el proceso opuesto al flasheo.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#teoria","title":"Teor\u00eda","text":"<p>En teor\u00eda para hacer la imagen tan s\u00f3lo necesitar\u00edamos una herramienta para hacer el dump. En la pr\u00e1ctica hay varios temas que merece la pena considerar antes de utilizar una de estas utilidades. Vamos a comentarlas a continuaci\u00f3n. Si no te interesan estos aspectos puedes saltar directamente al apartado Pr\u00e1ctica.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#tamano-de-la-tarjeta","title":"Tama\u00f1o de la tarjeta","text":"<p>Es obvio que si hacemos una imagen de una tarjeta de 32GB, luego no tendremos problemas flasheando por ejemplo en tarjetas de 64GB y ser\u00e1 imposible flashearla en tarjetas de 16GB. Lo que no resulta tan obvio es que esa imagen de 32GB es posible que no entre en muchas otras tarjetas de 32GB. \u00bfPor qu\u00e9? Pues porque no hay dos tarjetas iguales. Por alg\u00fan motivo que desconozco, los fabricantes producen tarjetas con peque\u00f1as diferencias sobre la capacidad nominal.</p> <p>Podemos consultar los detalles de la capacidad de una tarjeta por medio del comando <code>fdisk --list</code> (en Linux; luego veremos un programa equivalente en Windows). La primera linea de toda la informaci\u00f3n que devuelve este comando nos da los detalles sobre la capacidad de la tarjeta. Por ejemplo este es el resultado de ejecutar este comando en tres tarjetas de 16GB de distintos fabricantes:</p> Fabricante Detalles Capacidad en MB Energizer 14,47 GiB, 15523119104 bytes, 30318592 sectores 14804 Toshiba 14,5 GiB, 15552479232 bytes, 30375936 sectores 14832 Samsung PRO 14,93 GiB, 16003891200 bytes, 31257600 sectores 15262,5 <p>A la vista de esto se entiende que si hacemos una imagen de la tarjeta Toshiba por ejemplo, se podr\u00e1 flashear sin modificar en la Samsung PRO pero no en la Energizer.</p> <p>El truco para crear una imagen de por ejemplo 16GB (nominalmente) que luego vaya a poderse flashear sin problemas en todas las tarjetas de 16GB del mercado consiste en encoger la \u00faltima partici\u00f3n de la tarjeta de manera que dejemos un espacio de seguridad sin utilizar al final. Por ejemplo en el caso de la Toshiba que ya hemos determinado que es bastante peque\u00f1a, vamos a dejar 200MB. En caso de trabajar con la Samsung ser\u00eda mejor elevar esa cifra hasta los 500MB.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#dump-parcial","title":"Dump parcial","text":"<p>M\u00e1s tarde a la hora de realizar el dump o generaci\u00f3n del archivo de imagen, tendremos que indicar al programa de turno que lea s\u00f3lo el espacio ocupado por las particiones. De esta manera el fichero de imagen no cubrir\u00e1 esos MB de margen que hemos dejado en el paso anterior, y a la hora de escribir en tarjetas especialmente peque\u00f1as no obtendremos el t\u00edpico error de que se ha alcanzado el l\u00edmite del dispositivo. En realidad lo verdaderamente importante es haber dejado el espacio sin utilizar al final de la tarjeta. Si luego hacemos el dump de toda la tarjeta, aunque obtengamos el error mencionado anteriormente al hacer el flasheo, \u00e9ste se podr\u00e1 considerar correcto, ya que se dar\u00e1 fuera del espacio utilizado por las particiones. Es algo parecido a dejar un margen grande en los documentos de texto que escribimos. As\u00ed si luego imprimimos estos documento en hojas ligeramente m\u00e1s peque\u00f1as (por haber recortado los bordes por ejemplo) el contenido del documento se presentar\u00e1 \u00edntegro aunque la impresora pueda detectar que la hoja es m\u00e1s peque\u00f1a de lo esperado e incluso pueda mostrar un error por ello.</p> <p>Siguiendo con el ejemplo de la tarjeta de 16GB anterior, vamos a ver c\u00f3mo hacer las cuentas de la cantidad de tarjeta que tenemos que leer durante el dump para que s\u00f3lo cubra el espacio ocupado por las particiones, dejando fuera el espacio final sin utilizar que hemos reservado.</p> <p>En Linux consultamos la informaci\u00f3n de la tarjeta y las particiones que contiene mediante <code>fdisk</code>:</p> <pre><code>$ sudo fdisk -l /dev/mmcblk0\nDisco /dev/mmcblk0: 14,5 GiB, 15552479232 bytes, 30375936 sectores\nUnidades: sectores de 1 * 512 = 512 bytes\nTama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes\nTama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes\nTipo de etiqueta de disco: dos\nIdentificador del disco: 0x8e7b7353\n\nDispositivo    Inicio Comienzo    Final Sectores Tama\u00f1o Id Tipo\n/dev/mmcblk0p1              32   819199   819168   400M  b W95 FAT32\n/dev/mmcblk0p2          819200 29966335 29147136  13,9G 83 Linux\n</code></pre> <p>Los datos que nos interesan son el sector de comienzo y el n\u00famero de sectores de la \u00faltima partici\u00f3n, en este caso 819200 y 29147136 respectivamente.</p> <p>En Windows obtendremos esta misma informaci\u00f3n con DiskGenius seleccionando la \u00faltima partici\u00f3n de la tarjeta:</p> <p></p> <p>En este caso los datos que nos interesan son los valores <code>Total Sectors</code> y <code>Starting Sector</code>. Como vemos coinciden con los valores 29147136 y 819200 que hab\u00edamos localizado en Linux.</p> <p>Una vez que tenemos estos valores, el n\u00famero de sectores a copiar en el dump ser\u00e1 la suma de los mismos, es decir 819200 + 29147136 = 29966336 sectores. En la informaci\u00f3n que ofrec\u00eda el comando <code>fdisk</code> de Linux, vemos claramente que cada sector ocupa 512 bytes. DiskGenius tambi\u00e9n ofrece ese dato en el valor <code>Sector Size</code>. Por tanto el dump tiene que hacerse de 29966336 * 512 = 15342764032 bytes = 14983168 KB = 14632 MB.</p> <p>As\u00ed pues, el dump que haremos en este caso ser\u00e1 de 29966336 sectores o lo que es lo mismo de 14632 MB.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#informacion-residual-en-espacio-libre","title":"Informaci\u00f3n residual en espacio libre","text":"<p>Muchos ya sabr\u00e9is que cuando se elimina un fichero en un sistema de archivo, normalmente s\u00f3lo se da de baja de las tablas de directorios, pero el contenido del mismo se mantiene en su lugar. Esto se hace por eficacia de los sistemas de archivo (dedicarse a escribir ceros en donde antes hab\u00eda un fichero que acabamos de borrar lleva tiempo y consumo de ciclos de escritura en dispositivos flash). Tambi\u00e9n permite recuperar informaci\u00f3n borrada por error. Pero cuando estamos pensando en hacer una imagen, toda esa informaci\u00f3n que en teor\u00eda ya no deber\u00eda estar ah\u00ed es un problema. Primero porque har\u00e1 que la imagen se comprima peor y segundo porque estaremos incluyendo datos que a lo mejor no nos interesa publicar (por eso los hemos borrado seguramente). As\u00ed pues ser\u00e1 muy conveniente borrar efectivamente todo el espacio de las particiones que dejemos libre.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#practica","title":"Pr\u00e1ctica","text":"<p>Una vez explicadas algunas de las cosas que vamos a hacer a partir de ahora, vamos a mostrar el proceso paso a paso en Linux y Windows.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#linux","title":"Linux","text":"<ol> <li> <p>Reducimos con <code>gparted</code> el tama\u00f1o de la \u00faltima partici\u00f3n para dejar espacio libre al final de la tarjeta. Seg\u00fan los datos mostrados en la teor\u00eda dejar\u00edamos 200MB libres en la tarjeta Toshiba del ejemplo.</p> <p></p> </li> <li> <p>Montamos la tarjeta en nuestro sistema y averiguamos los directorios donde se anclan las particiones (en sistemas como los de la RG350 y Raspberry Pi ser\u00e1n dos casi siempre), por ejemplo en mi m\u00e1quina (filtro la salida del comando <code>df</code> por <code>mmcblk0</code> porque es el nombre de dispositivo que adopta siempre el lector de tarjetas de mi port\u00e1til, pero puede cambiar en otras m\u00e1quinas; retirar el <code>grep</code> si se desconoce):</p> <pre><code>$ df -h | grep mmcblk0\n/dev/mmcblk0p1             400M   179M  221M  45% /media/edumoreno/2738-756D\n/dev/mmcblk0p2              14G    13G  1,3G  91% /media/edumoreno/6684e595-e23b-4e2f-8eb9-65f1286798cd\n</code></pre> </li> <li> <p>Escribimos ceros en el espacio no utilizado de la tarjeta. Nos situamos en un directorio cualquiera de esas dos particiones (por ejemplo el ra\u00edz) y ejecutamos los siguientes comandos (hay que hacerlo para cada partici\u00f3n):</p> <pre><code>$ cd /media/edumoreno/2738-756D\n$ sudo dd if=/dev/zero of=zero.txt &amp;&amp; sudo sync\n$ sudo rm zero.txt &amp;&amp; sudo sync\n$ cd /media/edumoreno/6684e595-e23b-4e2f-8eb9-65f1286798cd\n$ sudo dd if=/dev/zero of=zero.txt &amp;&amp; sudo sync\n$ sudo rm zero.txt &amp;&amp; sudo sync\n</code></pre> </li> <li> <p>Desmontamos las particiones para que no se puedan modificar durante el dump:</p> <pre><code>$ sudo umount /dev/mmcblk0p*\n</code></pre> </li> <li> <p>Finalmente realizamos el dump. Vamos a hacer el dump en bloques de 2MB y dado que seg\u00fan las cuentas hechas en la teor\u00eda s\u00f3lo queremos copiar 14632 MB, el dump ser\u00e1 de 14632 / 2 = 7316 bloques:</p> <pre><code>$ sudo dd if=/dev/mmcblk0 of=imagen.img bs=2M count=7316 status=progress\n</code></pre> </li> </ol> <p>El comando anterior puede tardar bastante. Al finalizar encontraremos el fichero <code>imagen.img</code> con nuestro dump de la tarjeta con el tama\u00f1o prometido:</p> <pre><code>$ ls -l --block-size=M\ntotal 14632M\n-rwxrwxrwx 1 edumoreno edumoreno 14632M jun  4 00:44 imagen.img\n</code></pre> <p>Suele ser conveniente comprimir el dump (ya que como sabemos contendr\u00e1 mucho espacio vac\u00edo que se comprimir\u00e1 bien). Adem\u00e1s la mayor\u00eda de las aplicaciones de flasheo aceptan imagenes comprimidas directamente.</p> <p>Los comandos para rellenar con ceros del punto 3, en el caso de hacerse sobre particiones Linux (ext4, ext3, ext2), hay un comando espec\u00edfico para esa tarea. Se trata del <code>zerofree</code>. As\u00ed se aplicar\u00eda sobre la segunda partici\u00f3n del ejemplo que es de tipo Linux. En este caso hay que utilizarlo con la partici\u00f3n desmontada. El valor que va detr\u00e1s de la opci\u00f3n <code>-f</code> es el que se utilizar\u00e1 para rellenar el espacio no asignado. En el ejemplo siguiente utilizamos el valor <code>0xFF</code> (255) ya que las unidades de tipo flash suelen utilizar el estado alto (1) como natural:</p> <pre><code>$ sudo umount /dev/mmcblk0p2\n$ sudo zerofree -v -f 0xFF /dev/mmcblk0p2\n</code></pre>"},{"location":"2020-06-04-rg350_raspi_image.html#windows","title":"Windows","text":"<p>En el caso de Windows todos los pasos los podemos realizar con la excelente utilidad DiskGenius si contamos con la versi\u00f3n de pago. Si s\u00f3lo tenemos la versi\u00f3n Free, el paso final lo realizaremos con Win32DiskImager.</p> <ol> <li> <p>Reducimos con DiskGenius el tama\u00f1o de la \u00faltima partici\u00f3n para dejar espacio libre al final de la tarjeta. Seg\u00fan los datos mostrados en la teor\u00eda dejar\u00edamos 200MB libres en la tarjeta Toshiba del ejemplo.</p> <p></p> </li> <li> <p>Escribimos ceros en el espacio no utilizado de la tarjeta. Para ello en DiskGenius seleccionamos el men\u00fa <code>Tools &gt; Erase Free Space</code>. Aparece una ventana mostr\u00e1ndonos todas las particiones de los discos detectados en el sistema. Seleccionamos en primer lugar la primera partici\u00f3n:</p> <p></p> </li> <li> <p>Al pulsar OK aparece otra ventana que nos permite seleccionar el valor que se escribir\u00e1 en el espacio no utilizado. Dejamos el valor <code>00</code> que nos ofrece y pulsamos <code>OK</code>:</p> <p></p> </li> <li> <p>Se nos informa del progreso hasta que el proceso termina y podemos cerrar pulsando <code>Complete</code>:</p> <p></p> </li> <li> <p>Repetimos el proceso para borrar el espacio no utilizado de la segunda partici\u00f3n. Esta vez tardar\u00e1 m\u00e1s tiempo:</p> <p></p> </li> <li> <p>Para hacer el dump final abandonamos DiskGenius porque la funci\u00f3n que necesitamos para ello (<code>Tools &gt; Copy Sectors</code>) s\u00f3lo est\u00e1 disponible en la versi\u00f3n de pago. Pasamos a utilizar Win32DiskImager. Abrimos la utilidad y la configuramos indicando en <code>Image File</code> el destino y nombre del fichero de imagen, en <code>Device</code> seleccionamos la letra de la unidad donde se monta la partici\u00f3n FAT de la tarjeta y finalmente marcamos la opci\u00f3n <code>Read Only Allocated Partitions</code> para que el dump no incluya el espacio libre que hemos dejado al final en el paso 1.</p> <p></p> </li> <li> <p>Finalmente pulsamos <code>Read</code> y esperamos a que el proceso termine:</p> <p></p> </li> </ol>"},{"location":"2020-06-04-rg350_raspi_image.html#compresion-y-troceo-de-la-imagen","title":"Compresi\u00f3n y troceo de la imagen","text":"<p>Como vemos la imagen de una tarjeta SD va a ser casi siempre un fichero enorme. Si queremos compartirla lo habitual ser\u00e1 comprimirla y trocearla con un compresor. Vamos a ver c\u00f3mo hacerlo en Linux y Windows.</p>"},{"location":"2020-06-04-rg350_raspi_image.html#linux_1","title":"Linux","text":"<p>Como siempre echamos mano de la linea de comando. Vamos a mostrar c\u00f3mo hacerlo en un par de formatos:</p> <ul> <li> <p>7z:</p> <pre><code>$ 7z -v1400m a imagen.img.7z imagen.img\n</code></pre> </li> <li> <p>Rar:</p> <pre><code>$ rar a -m5 -v1400000k imagen.img.rar imagen.img\n</code></pre> </li> </ul>"},{"location":"2020-06-04-rg350_raspi_image.html#windows_1","title":"Windows","text":"<ul> <li> <p>7z: Naturalmente para que esto funcione debemos tener instalado 7-Zip. Pulsamos con el bot\u00f3n derecho del rat\u00f3n sobre el fichero de imagen y seleccionamos <code>7-Zip &gt; A\u00f1adir al archivo...</code> en el menu contextual. Aparece una ventana en la que lo \u00fanico que tenemos que cambiar es introducir el n\u00famero de MBs que queremos tengan los trozos. Por ejemplo 1400MB se indica en 7-Zip con 1400M:</p> <p></p> </li> <li> <p>WinRAR: Igualmente necesitaremos tener instalado WinRAR. Pulsamos con el bot\u00f3n derecho del rat\u00f3n sobre el fichero de imagen y seleccionamos <code>A\u00f1adir al archivo...</code> en el menu contextual que tiene al lado el icono de WinRAR. Aparece una ventana en la que lo \u00fanico que tenemos que cambiar es introducir el n\u00famero de MBs que queremos tengan los trozos. Por ejemplo 1400MB:</p> <p></p> </li> </ul>"},{"location":"2020-07-02-rg350_primeros_pasos.html","title":"RG350 Primeros pasos","text":"<p>En este art\u00edculo vamos a tratar las dudas iniciales que se suelen tener cuando se comienza con esta consola. En este documento ya se encuentran descritos unos cuantos conceptos y respondidas algunas preguntas frecuentes, pero aqu\u00ed vamos a centrarnos en las dudas iniciales, es decir las que suelen surgir nada m\u00e1s sacar la consola de la caja.</p>"},{"location":"2020-07-02-rg350_primeros_pasos.html#instalacionactualizacion-de-emuladoresopks","title":"Instalaci\u00f3n/actualizaci\u00f3n de emuladores/OPKs","text":"<p>De f\u00e1brica la consola suele venir con muchos emuladores instalados, aunque no suelen ser las versiones m\u00e1s actualizadas. As\u00ed pues, una de las primeras inquietudes suele ser la de actualizar los emuladores preinstalados o a\u00f1adir otros nuevos. Lo primero ser\u00eda entender el formato de los mismos. En el documento general sobre RG350 ya se comenta algo sobre ello. Aunque no es obligatorio, la mayor\u00eda de los emuladores los vamos a encontrar en formato OPK. Es la forma m\u00e1s sencilla y conveniente para distribuir aplicaciones de cualquier tipo en el sistema operativo de la consola (OpenDingux). Los OPKs son ficheros \u00fanicos que internamente contienen todos los ficheros que necesita el emulador (ejecutables, configuraciones, im\u00e1genes, sonidos, etc.). As\u00ed pues si queremos actualizar por ejemplo el emulador de Game Boy, simplemente tenemos que localizar el fichero OPK y copiarlo a la consola (m\u00e1s adelante diremos d\u00f3nde).</p>"},{"location":"2020-07-02-rg350_primeros_pasos.html#donde-encontramos-los-ficheros-opk","title":"\u00bfD\u00f3nde encontramos los ficheros OPK?","text":"<p>Desafortunadamente, el concepto tan habitual en otros sistemas de tienda de aplicaciones, en OpenDingux no existe. Bueno, el primer intento serio de montar algo equivalente es el trabajo de Rafa Vico integrado en las \u00faltimas versiones de ROGUE, pero vamos a suponer que a\u00fan no tenemos acceso a ello (ya que requiere haber instalado este sistema y disponer de un adaptador Wifi funcional).</p> <p>As\u00ed pues nos va a tocar localizar por nuestra cuenta los OPK. Normalmente, siendo una consola/sistema de concepci\u00f3n \"open\", el c\u00f3digo de los emuladores suele estar publicado en repositorios de c\u00f3digo como GitHub. Por ejemplo en el caso del emulador de Game Boy, uno de los m\u00e1s populares es Gambatte, cuyo repositorio de c\u00f3digo se encuentra aqu\u00ed. Si acudimos a la secci\u00f3n releases del repositorio, encontraremos algunas compilaciones del c\u00f3digo hechas por su autor para varias m\u00e1quinas. En concreto la adecuada para RG350 ser\u00eda \u00e9sta:</p> <ul> <li>https://github.com/bardeci/gambatte-dms/releases/download/20200601/gambatte-dms-multi-r572u4-20200601.opk</li> </ul> <p>As\u00ed pues el primer paso para actualizar el emulador Gambatte ser\u00eda bajar el fichero anterior.</p>"},{"location":"2020-07-02-rg350_primeros_pasos.html#dondecomo-instalo-el-fichero-opk-del-emulador-que-he-bajado","title":"\u00bfD\u00f3nde/c\u00f3mo instalo el fichero OPK del emulador que he bajado?","text":"<p>En estos momentos tendremos un fichero de nombre <code>gambatte-dms-multi-r572u4-20200601.opk</code> en la carpeta Descargas de nuestro ordenador. Tenemos que copiarlo a una de las dos tarjetas microSD que puede utilizar la consola. Aunque nada impide copiarlo a casi cualquier lugar, existen un par de directorios especiales para contener OPKs que nos conviene utilizar. Son los siguientes:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/&lt;nombre_sd&gt;/apps</code> en BASE (el sistema que trae la consola de f\u00e1brica) o <code>/media/sdcard/apps</code> en ROGUE.</li> </ul> <p>Por simplicidad, a partir de ahora vamos a utilizar la nomenclatura de ROGUE, es decir la ruta <code>/media/sdcard</code>. En caso de utilizar BASE sustituir por <code>/media/&lt;nombre_sd&gt;</code>, siendo <code>&lt;nombre_sd&gt;</code> el nombre o label que hayamos dado a nuestra SD.</p> <p>Lo que tienen de especial estos dos directorios es que son los que rastrea el launcher de la consola (el programa que utilizamos para explorar/ejecutar los emuladores y aplicaciones instaladas) para mostrarnos su contenido. De estas dos opciones, la m\u00e1s sencilla es la segunda, es decir copiar el OPK a la tarjeta externa. \u00bfPor qu\u00e9? Por dos motivos:</p> <ol> <li>La tarjeta se puede extraer f\u00e1cilmente (al menos en el modelo normal de RG350, es la \u00fanica de las dos tarjetas que podemos extraer sin abrir la tapa trasera de la consola).</li> <li>El formato de la tarjeta externa puede ser de tipo FAT, es decir legible por cualquier sistema operativo (Windows, Linux, Mac).</li> </ol> <p>Antes de continuar hay que comentar aunque s\u00f3lo sea brevemente, que la tarjeta externa se \"monta\" en el Linux de la consola en la ruta <code>/media/sdcard</code>. As\u00ed, cuando pinchemos la tarjeta en el ordenador veremos en la ra\u00edz directamente lo que en la consola ver\u00edamos en esa ruta. Lo mostramos con varios ejemplos (suponemos que la tarjeta se pincha en un Windows y que \u00e9sta adopta la letra de unidad <code>D:</code>):</p> Ruta en OpenDingux Ruta en PC <code>/media/sdcard/apps</code> <code>D:\\apps</code> <code>/media/sdcard/apps/gambatte-dms-multi-r572u4-20200601.opk</code> <code>D:\\apps\\gambatte-dms-multi-r572u4-20200601.opk</code> <code>/media/sdcard/roms</code> <code>D:\\roms</code> <code>/media/sdcard/roms/GB/donkey_kong.gb</code> <code>D:\\roms\\GB\\donkey_kong.gb</code> <code>/media/sdcard/leeme.txt</code> <code>D:\\leeme.txt</code> <p>Lo mismo visto de forma gr\u00e1fica (a la izquierda lo que vemos en el PC y a la derecha en la RG con la aplicaci\u00f3n DinguxCmdr):</p> <p> </p> <p>Para terminar con el ejemplo de la instalaci\u00f3n de la \u00faltima versi\u00f3n de Gambatte, este ser\u00eda el lugar donde copiar\u00edamos el fichero sobre la tarjeta externa montada en el PC:</p> <p></p> <p>Si ahora expulsamos la SD del PC y la insertamos en la RG350, deber\u00eda aparecer un nuevo icono en el lanzador:</p> <p></p> <p>Como vemos, ahora aparecen dos iconos para el emulador Gambatte, el que hab\u00eda instalado originalmente en la tarjeta interna y el que acabamos de incorporar a la externa. El emulador original debe encontrarse en la ruta indicada al principio de la tarjeta interna dedicada a la instalaci\u00f3n de OPKs, es decir <code>/media/data/apps</code>. Si queremos deshacernos de \u00e9l lo haremos utilizando DinguxCmdr, localizando dicha ruta y borrando el fichero desde el men\u00fa que aparece al pulsar la tecla <code>X</code>:</p> <p></p>"},{"location":"2020-07-02-rg350_primeros_pasos.html#hay-algun-sitio-dedicado-a-recopilar-repositorios-de-emuladores","title":"\u00bfHay alg\u00fan sitio dedicado a recopilar repositorios de emuladores?","text":"<p>Como coment\u00e1bamos al principio, el repositorio de emuladores y aplicaciones m\u00e1s evolucionado actualmente es la App Store incluida en las \u00faltimas versiones del Custom Firmware ROGUE. Aunque no tengamos acceso a ella, podemos explorar manualmente la base de datos que utiliza por debajo esta aplicaci\u00f3n acudiendo al siguiente repositorio:</p> <ul> <li>https://github.com/RafaVico/RG350_APPREPOSITORY</li> </ul> <p>Otra opci\u00f3n ser\u00eda recorrer el README de estos dos repositorios que se suelen actualizar frecuentemente con las rutas de los repositorios y OPKs de los emuladores y aplicaciones m\u00e1s importantes para OpenDingux:</p> <ul> <li>https://github.com/retrogamehandheld/OpenDingux/</li> <li>https://github.com/SeongGino/RetroGame350-AppRepo/</li> </ul> <p>Un \u00faltimo lugar donde localizar OPKs es el siguiente sitio:</p> <ul> <li>https://rs97.bitgala.xyz/RG-350/localpack/</li> </ul> <p>La \u00faltima opci\u00f3n ser\u00eda simplemente buscar en Google o en webs tem\u00e1ticas sobre el sistema o la consola como:</p> <ul> <li>https://boards.dingoonity.org/retro-game-350rg-350/</li> </ul>"},{"location":"2020-07-02-rg350_primeros_pasos.html#instalacion-de-roms","title":"Instalaci\u00f3n de ROMs","text":"<p>La instalaci\u00f3n de ROMs es similar a la de emuladores pero con menos restricciones. Podemos copiarlas a cualquier directorio con permisos de escritura de la tarjeta interna y/o externa. Los dos puntos del sistema de archivos de la consola donde se montan las dos tarjetas con permisos de escritura son los siguientes:</p> <ul> <li>Tarjeta interna: <code>/media/data</code></li> <li>Tarjeta externa: <code>/media/sdcard</code></li> </ul> <p>Por tanto las ROMs las podremos copiar a cualquier lugar al nivel de los dos directorios anteriores o cualquiera de sus subdirectorios. Al igual que con los emuladores, resulta m\u00e1s c\u00f3modo copiarlos a la tarjeta externa. En este caso, aunque no es obligatorio (como s\u00ed lo era con los emuladores u OPKs en general que deb\u00edan ir en un subdirectorio <code>apps</code>) se recomienda por organizaci\u00f3n crear un directorio llamado <code>roms</code> en la ra\u00edz de la tarjeta externa (cuando la montamos en el PC) y colocar dentro de \u00e9l las ROMs de los distintos sistemas con un directorio propio para cada uno de ellos. Por ejemplo:</p> <p> </p> <p>Una vez que hayamos insertado la microSD en la ranura externa de la consola, encontraremos el directorio <code>roms</code> y su contenido montado en la ruta <code>/media/sdcard/roms</code> del sistema OpenDingux. Al abrir un emulador, la mayor\u00eda de ellos nos mostrar\u00e1 un explorador de ficheros para recorrer el \u00e1rbol de directorios del sistema. Como vemos en el siguiente video tendremos que seguir la ruta indicada anteriormente. La entrada con dos puntos (<code>..</code>) permite subir en el \u00e1rbol de directorios hacia arriba:</p> <p>Una vez abierta una ROM, la pr\u00f3xima vez que lancemos el emulador recordar\u00e1 la ruta de las ROMs de ese sistema.</p> <p>Para terminar, un buen tutorial en video:</p>"},{"location":"2020-07-02-rg350_primeros_pasos.html#merece-la-pena-actualizar-el-firmware-yo-instalar-rogue","title":"\u00bfMerece la pena actualizar el firmware y/o instalar ROGUE?","text":"<p>Esta es una de las primeras cuestiones que se suelen plantear los nuevos usuarios de la consola.</p> <p>Lo primero que hay que tener en cuenta es que a pesar de que la consola tiene una arquitectura bastante abierta, el kernel o n\u00facleo del sistema operativo Linux, dif\u00edcilmente se puede mejorar sin especificaciones detalladas del SoC o chip principal de la m\u00e1quina, el procesador MIPS Ingenic JZ4770. Por tanto lo ideal ser\u00eda que el firmware evolucionara con apoyo oficial del fabricante de dicho chip. Sin este apoyo, las mejoras que podremos encontrar en firmwares alternativos ser\u00e1n cosas como las siguientes:</p> <ul> <li>Cambios o adici\u00f3n de aplicaciones auxiliares (lanzadores de aplicaciones, exploradores de archivos, conectividad, etc.).</li> <li>Cambios de versi\u00f3n o adiciones de m\u00f3dulos Buildroot (sistema para componer el puzle de piezas del firmware).</li> <li>Mejoras est\u00e9ticas.</li> </ul> <p>El kernel es lo que da soporte al hardware espec\u00edfico de cada m\u00e1quina, por lo que la dificultad para \"meterle mano\" que coment\u00e1bamos antes limitar\u00e1 el avance en este aspecto. Cosas como:</p> <ul> <li>Soporte HDMI y salida AV.</li> <li>Soporte de aceleraci\u00f3n gr\u00e1fica por hardware.</li> </ul> <p>Actualmente existen dos ramas de desarrollo del firmware:</p> <ul> <li>BASE: La oficial.</li> <li>ROGUE: De Ninoh-FOX.</li> </ul> <p>BASE pr\u00e1cticamente no ha avanzado desde que sali\u00f3 la consola. Casi se podr\u00eda decir que ha retrocedido, ya que alcanz\u00f3 la versi\u00f3n 1.7 de dicho firmware pero poco despu\u00e9s fueron eliminadas las versiones 1.6 y 1.7 tras ser encontrados varios problemas. Actualmente la versi\u00f3n m\u00e1s actual es la 1.5.1 con fecha 2019-10-27. Puede encontrarse aqu\u00ed: Imagen + Update</p> <p>Existe tambi\u00e9n una versi\u00f3n de BASE con soporte para el HDMI, pero no tengo claro si es oficial o si es suficientemente estable (a pesar de lo que diga la p\u00e1gina de descarga). Puede encontrarse aqu\u00ed.</p> <p>En cuanto a ROGUE, todas las versiones publicadas junto al detalle de las mejoras introducidas pueden encontrarse en GitHub aqu\u00ed. Una lista de las mejoras m\u00e1s destacadas podr\u00eda ser la siguiente:</p> <ul> <li>Ligero overclock del procesador a 1080MHz (la velocidad normal es 1000MHz).</li> <li>Posibilidad de seleccionar la velocidad del procesador para cada emulador entre 360MHz y 1080MHz.</li> <li>Dos modos de visualizaci\u00f3n de previews de las ROMs (pantalla completa o en esquina superior derecha).</li> <li>Se eliminan errores en el sistema de archivo de las dos particiones de la tarjeta interna.</li> <li>Aplicaciones adicionales:<ul> <li>Clock: Redise\u00f1o.</li> <li>RG350Test: Aplicaci\u00f3n de test de controles muy mejorada respecto a la oficial.</li> <li>ScriptRunner: Aplicaci\u00f3n para ejecutar scripts de distinta utilidad como formatear tarjetas o hacer backups.</li> <li>ROGUE Connect: Mejoras en la aplicaci\u00f3n oficial GCW-Connect para administrar la conexi\u00f3n a internet con un pincho Wifi.</li> <li>ROGUE Update Manager: Aplicaci\u00f3n para gestionar las actualizaciones de ROGUE por Wifi.</li> <li>ROGUE App Store: Aplicaci\u00f3n para gestionar la descarga y actualizaci\u00f3n de emuladores y juegos (ports).</li> <li>Pixel Fixer: Para tratar de recuperar pixeles vagos de la pantalla.</li> </ul> </li> <li>Actualizaci\u00f3n de librer\u00edas SDL2 (mejora la compatibilidad de algunos juegos).</li> <li>Soporte de m\u00e1s formatos para la tarjeta externa (ext2 y exFAT).</li> </ul> <p>Como vemos las mejoras de ROGUE son numerosas, pero si nos fijamos son casi todas algo accesorias, es decir no producen mejoras en la experiencia de juego (salvo el overclock) sino en la gesti\u00f3n que podemos hacer con la consola prepar\u00e1ndola para ejecutar nuevos juegos o emuladores. Comento esto para valorar adecuadamente la conveniencia de actualizar y evaluar los riesgos de proceder con el cambio. La consola no se puede brickear, dado que no tiene almacenamiento flash en la propia placa. Todo est\u00e1 en la microSD interna, por lo que todos los problemas se solucionan flasheando correctamente esta tarjeta con un sistema v\u00e1lido (sea el que sea). A pesar de ello, el proceso puede resultar complicado o confuso si no se ha flasheado antes una tarjeta SD. Adem\u00e1s, al menos en el modelo normal de la consola, hay que desatornillar la tapa trasera para acceder a la microSD interna.</p> <p>Mi consejo ser\u00eda mantener el firmware BASE durante las primeras semanas al menos, para no tener impedimentos claros para optar a la garant\u00eda en caso de que aparezcan problemas. Aunque el modelo M no es necesario abrirlo, si queremos flashear la tarjeta de la ranura INT, vamos a tener que romper igualmente el precinto de garant\u00eda. Si se tienen dudas sobre el proceso de flasheo, aprovechar ese tiempo para ir conoci\u00e9ndolo consultando foros o leyendo lo que sigue a continuaci\u00f3n.</p>"},{"location":"2020-07-02-rg350_primeros_pasos.html#actualizacion-del-firmware","title":"Actualizaci\u00f3n del firmware","text":"<p>Como hemos comentado antes, a fecha de publicaci\u00f3n de este art\u00edculo, la \u00fanica opci\u00f3n para actualizar el firmware de RG350 es ROGUE. Este custom firmware ofrece tres formas para ser instalado. Dos de ellas no requieren extraer la tarjeta interna (y por tanto en el modelo normal ni siquiera ser\u00e1 necesario abrir la consola). Se detallan en este documento, pero vamos a repetirlo aqu\u00ed para no perder el hilo de este art\u00edculo:</p> Tipo Descarga Descripci\u00f3n Update RG350RG350M Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque dependiendo de la versi\u00f3n del sistema de partida puede no quedar del todo fino. Se recomienda utilizar esta opci\u00f3n s\u00f3lo para actualizar entre versiones de ROGUE, es decir si se parte de BASE, hay que utilizar una de las dos siguientes (preferentemente la \u00faltima). Flasher RG350 Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien. En este video se ilustra todo el procedimiento. sd_image.bin RG350RG350M Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opci\u00f3n 2 y la \u00fanica que sirve si se parte de un sistema que no arranca. La imagen ocupa m\u00e1s porque es un volcado de todo lo que contiene la SD (incluidos los espacios vac\u00edos de la tarjeta). El proceso incorpora la complejidad adicional de tener que utilizar algunas utilidades poco habituales, y en el modelo normal de la consola, adem\u00e1s el tener que abrirla para extraer la microSD interna. En este video (en ingl\u00e9s) se ilustra todo el procedimiento. La primera parte de este otro v\u00eddeo tambi\u00e9n muestra el proceso, esta vez en espa\u00f1ol. <p>As\u00ed pues, para la primera actualizaci\u00f3n (y posteriores) se puede utilizar cualquier m\u00e9todo. Dependiendo de la situaci\u00f3n es m\u00e1s recomendable uno que otro. En general empezar por la opci\u00f3n 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el m\u00e9todo 3.</p> <p>De la experiencia de muchos usuarios pasando de BASE a ROGUE se puede deducir que si no se utiliza el tercer m\u00e9todo es muy f\u00e1cil acabar teniendo problemas. Parece que tiene que ver con que la tarjeta Toshiba que trae la consola de f\u00e1brica no es de buena calidad. La recomendaci\u00f3n mayoritaria es apartar esa tarjeta dej\u00e1ndola con el firmware BASE (para reponerla adem\u00e1s en caso de que aparezcan problemas, para as\u00ed tener con qu\u00e9 comparar) y utilizar el m\u00e9todo 3 (flasheo convencional) sobre una tarjeta microSD nueva de calidad.</p> <p>Si al final nos decidimos a dar el paso, en este documento se ofrecen detalles sobre el proceso de flasheo. De nuevo los repetimos aqu\u00ed para mantenernos centrados en este post:</p> <ol> <li>En el modelo normal, abrir la consola. El tornillo inferior izquierdo tiene encima un sello que no se puede despegar entero; se desintegra. S\u00f3lo hay que tener cuidado con no partir el cable de la bater\u00eda por darle un tir\u00f3n. Es perfectamente normal que se descuelguen los gatillos L y R. No pasa nada, nos ocuparemos de ello justo antes de cerrar.</li> <li>Sacar la SD rompiendo un nuevo sello que no se puede despegar de una pieza. Sale a cachos. Si no se ha flasheado anteriormente la tarjeta interna por otros medios, se recomienda apartarla, es decir guardarla como est\u00e1 y flashear otra tarjeta. Las recomendaciones para la tarjeta son que tenga 16GB class 10. Ser\u00eda suficiente con una tarjeta de 4GB, ya que el sistema ocupa menos de 1GB, pero tarjetas de esa capacidad ya no se suelen encontrar y de hacerlo, lo m\u00e1s probable es que sea una tarjeta vieja y lenta.</li> <li>Bajar la im\u00e1gen que queremos flashear. Existen dos ramas (para el caso de ROGUE consultar la tabla pocos p\u00e1rrafos m\u00e1s arriba):<ul> <li>BASE: https://rs97.bitgala.xyz/RG-350/Latest%20Firmware/</li> <li>ROGUE: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases</li> </ul> </li> <li>Instalar uno de estos programas:<ul> <li>WinDisk 32 Imager</li> <li>Balena Etcher</li> </ul> </li> <li>Montar la tarjeta elegida para flashear en el PC con un adaptador o lector.</li> <li>Utilizando el programa del punto 4 flashear la imagen (hay quien recomienda formatear antes pero considero que confunde el proceso m\u00e1s que otra cosa). En este documento de la fundaci\u00f3n Raspberry Pi se detallan los pasos para flashear una imagen de sistema para esta placa. El proceso es id\u00e9ntico en RG350 (cambiando la imagen naturalmente).</li> <li>Expulsar la SD del ordenador.</li> <li>Pinchar en la RG y cerrarla cuidando de que encajen bien los gatillos L/R.</li> </ol> <p>Desde Linux el paso 6 de la lista anterior se puede hacer con este comando desde consola (adaptando el nombre del dispositivo si en nuestro sistema es distinto):</p> <pre><code>$ sudo dd if=sd_image.bin of=/dev/mmcblk0 bs=2M\n</code></pre>"},{"location":"2020-07-02-rg350_primeros_pasos.html#utilizacion-de-la-tarjeta-externa","title":"Utilizaci\u00f3n de la tarjeta externa","text":"<p>Otro aspecto que suele generar dudas es el manejo de la tarjeta externa.</p> <p>En primer lugar comentar las capacidades y formatos recomendados. As\u00ed como no nos tenemos que preocupar por el formato ni la estructura de directorios de la tarjeta interna, ya que estas dos cosas se construyen adecuadamente durante el proceso de flasheo, en la tarjeta externa somos nosotros los responsables tanto de formato como de contenido. En cuanto a formato, hay que recordar que reci\u00e9n comprada, toda tarjeta suele venir formateada con formatos FAT. Tarjetas peque\u00f1as suelen venir en FAT32 y las m\u00e1s grandes en el formato exFAT m\u00e1s moderno. Esto es importante porque BASE s\u00f3lo soporta FAT32, por lo que si tenemos este firmware y hemos comprado una tarjeta grande, tendremos que forzar su formato a FAT32. En Windows es posible formatear la tarjeta pulsando con el bot\u00f3n derecho del rat\u00f3n sobre la unidad y seleccionando <code>Formatear...</code>. Seg\u00fan la versi\u00f3n de Windows, es posible que no nos aparezca FAT32 entre las opciones de formato disponibles. En ese caso deberemos recurrir a utilidades de terceros como SD Memory Card Formatter.</p> <p>En cuanto al tama\u00f1o de la tarjeta, hay usuarios que han conseguido utilizar tarjetas de hasta 256GB, aunque lo recomendado oficialmente es 128GB como m\u00e1ximo.</p> <p>Finalmente vamos a hablar de la estructura de directorios o carpetas. S\u00f3lo hay un directorio sensible, es decir que tenga que estar en un determinado lugar y con un nombre concreto y es <code>apps</code>. Debe estar situado en la ra\u00edz de la tarjeta (cuando est\u00e1 montada en el ordenador). En este directorio es donde tendremos que copiar los OPKs de las aplicaciones (emuladores, ports, utilidades, actualizaciones de firmware, etc.) que queramos instalar en la consola a trav\u00e9s de la tarjeta interna. Volver sobre el apartado \u00bfD\u00f3nde/c\u00f3mo instalo el fichero OPK del emulador que he bajado? de este mismo documento para obtener m\u00e1s detalles.</p> <p>El uso principal de la tarjeta externa va a ser almacenar las ROMs de los distintos emuladores instalados en la consola. Las ROMs (excepto en unos pocos emuladores que exigen un directorio concreto que adem\u00e1s en ocasiones se encuentra en la tarjeta interna), pueden estar almacenadas en cualquier directorio (lo que incluye la tarjeta interna). Esto es as\u00ed porque la mayor\u00eda de los emuladores, muestran un explorador de ficheros (semejante al cuadro de di\u00e1logo <code>Abrir</code> de casi cualquier aplicaci\u00f3n de ordenador) que nos permitir\u00e1 localizar las ROMs est\u00e9n donde est\u00e9n. A pesar de ello suele ser habitual organizar las ROMs por sistema dentro de un directorio <code>roms</code> en la ra\u00edz de la tarjeta externa. Los sistemas se suelen identificar con acr\u00f3nimos como \u00e9stos:</p> <ul> <li>A2600: Atari 2600</li> <li>FBA: Final Burn Alpha</li> <li>FC: NES (por Famicom)</li> <li>GB: Gameboy</li> <li>GBA: Gameboy Advance</li> <li>GBC: Gameboy Color</li> <li>GG: SEGA GameGear</li> <li>MD: SEGA Megadrive</li> <li>NEOGEO: Neo Geo</li> <li>NGP: NeoGeo Pocket</li> <li>PCE: PC Engine / TurboGrafx-16</li> <li>PS: Sony PlayStation</li> <li>SFC: SuperNES (por Super Famicom)</li> <li>SMS: SEGA MasterSystem</li> <li>WSC: WonderSwan</li> </ul>"},{"location":"2020-07-09-rg350_fba_vertical_mod.html","title":"RG350 FBA mod","text":"<p>Versi\u00f3n de FBA mejorada</p> <p>La modificaci\u00f3n realizada en FBA que se describe en este art\u00edculo ya no merece la pena desde que apareci\u00f3 la versi\u00f3n que puede encontrarse aqu\u00ed y del que se habla en este foro. El art\u00edculo se mantiene ya que ilustra el proceso de modificaci\u00f3n de un OPK por medio de un script wrapper que puede resolver muchas necesidades.</p>"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#descripcion-del-problema","title":"Descripci\u00f3n del problema","text":"<p>FBA permite rotar la pantalla para poder jugar m\u00e1s c\u00f3modamente los juegos verticales (modo TATE). De hecho detecta autom\u00e1ticamente este tipo de juegos y los muestra rotados por defecto. El problema es que lo hace hacia la parte izquierda de la consola y al menos en la RG350/M resultar\u00eda m\u00e1s c\u00f3modo que lo hiciera hacia la derecha donde est\u00e1n los botones en lugar de la cruceta.</p> <p>Por ejemplo al arrancar 1941 aparece as\u00ed:</p> <p></p> <p>En la versi\u00f3n r19 de FBA est\u00e1n duplicados todos los settings para poder ajustar los juegos verticales de forma independiente:</p> <p></p> <p>En concreto en <code>Default Vertical Run Game settings</code> podemos encontrar el par\u00e1metro para rotar la pantalla. All\u00ed nos interesa poner el valor <code>-180</code> en el par\u00e1metro <code>Rotate vertical game</code>:</p> <p></p> <p>Tras hacerlo, si lanzamos el juego desde el interfaz propio de FBA conseguimos la orientaci\u00f3n deseada:</p> <p></p> <p>Hasta aqu\u00ed bien. El problema viene cuando integramos FBA en frontends como SimpleMenu o PyMenu. En esos casos el emulador se lanzar\u00e1 por linea de comando pasando como argumento la ruta de la ROM. Cuando se lanzan as\u00ed los juegos, FBA no aplica los ajustes que hemos podido hacer en su interfaz propio. As\u00ed siempre se van a ver girados hacia la izquierda.</p> <p>Como en otros art\u00edculos, a partir de aqu\u00ed voy a mostrar detalles t\u00e9cnicos del problema que hay debajo de lo anterior y c\u00f3mo se ha hecho la modificaci\u00f3n del emulador. Si no te interesan y s\u00f3lo quieres aprovechar la modificaci\u00f3n del emulador puedes saltar hasta el apartado Utilizaci\u00f3n del mod de FBA.</p>"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#descripcion-tecnica-del-problema","title":"Descripci\u00f3n t\u00e9cnica del problema","text":"<p>En el Readme que hay dentro del OPK puede leerse lo siguiente:</p> <pre><code>FBA SDL could be used as a standalone application when invoked with\nrom zip with full path as a parameter:\n\n./fbasdl.dge ./roms/dino.zip\n\nFull path and extension are obligatory.\n\n\nCommandline interface\n---------------------\n\nFBA SDL can also be invoked with command line options.\nThe options are as follows;\n\n./fbasdl.dge &lt;game&gt; [&lt;parameters&gt;]\n\n&lt;game&gt;                  - The game's romname with full path and extension.\n--no-sound              - Just be silent\n--sound-sdl             - Use SDL for sound (mutex syncro)\n--sound-sdl-old         - Use SDL for sound\n--sound-ao              - Use libao for sound\n--samplerate=&lt;Hz&gt;       - Valid values are: 11025, 16000, 22050, 32000 and 44100\n--sense=&lt;value&gt;         - Analog sensitivity: 0..100\n--showfps               - Show frames per second while play\n--vsync                 - Syncronize video refresh on 60Hz\n--68kcore=&lt;value&gt;       - Choose Motorola 68000 emulation core.\n                          0 - C68k, 1 - Musashi M68k, 2 - A68k\n\nExample:\n\n./fbasdl.dge ./roms/dino.zip --sound-sdl --samplerate=44100 --68kcore=0\n</code></pre> <p>As\u00ed pues como vemos, el ejecutable que hay dentro del OPK (<code>fbasdl.dge</code>) est\u00e1 preparado para aceptar par\u00e1metros. Aqu\u00ed podemos detectar dos problemas:</p> <ol> <li>El emulador s\u00f3lo tiene un lanzador (fichero <code>.desktop</code> en el interior del OPK) que es el que sirve para abrir el interfaz propio de FBA. Necesitar\u00edamos el t\u00edpico lanzador que tienen la mayor\u00eda de los emuladores que muestra un explorador de ficheros para seleccionar la ROM que luego se pasa como argumento al ejecutable.</li> <li>Entre las opciones que vemos en el Readme no parece estar contemplada la que sirve para rotar la pantalla.</li> </ol> <p>Vamos a ocuparnos de estos problemas uno a uno.</p>"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#1-nuevo-lanzador-con-explorer","title":"1. Nuevo lanzador con explorer","text":"<p>Lo primero que hacemos es bajar el OPK. Vamos a partir de \u00e9ste.</p> <p>A continuaci\u00f3n lo desenlatamos para ver su interior. En Windows creo que se puede utilizar WinRAR o 7Zip (no lo tengo claro). En Linux lo haremos por linea de comando:</p> <pre><code>$ unsquashfs fba-RG350-r19-8e351b8b.opk\nParallel unsquashfs: Using 4 processors\n9 inodes (241 blocks) to write\n\n[=====================================================================================================================================|] 241/241 100%\n\ncreated 8 files\ncreated 2 directories\ncreated 0 symlinks\ncreated 0 devices\ncreated 0 fifos\n</code></pre> <p>Si miramos lo que hay en el interior del OPK vemos que efectivamente s\u00f3lo contiene un lanzador:</p> <pre><code>$ ls -l\ntotal 29972\n-rw-rw-r-- 1 edumoreno edumoreno      193 ene  4  2020 default.gcw0.desktop\n-rw-rw-r-- 2 edumoreno edumoreno      795 ene  4  2020 fba_icon.png\n-rwxrwxr-x 1 edumoreno edumoreno 30666200 ene 22 03:50 fbasdl.dge\n-rw-rw-r-- 1 edumoreno edumoreno     8819 ene 22 03:46 readme.txt\ndrwxrwxr-x 2 edumoreno edumoreno     4096 ene  4  2020 skin\n</code></pre> <p>Visualizando el fichero <code>default.gcw0.desktop</code> (es un fichero de texto) el lanzador lo \u00fanico que hace es ejecutar FBA sin argumentos, es decir el binario <code>fbasdl.dge</code>:</p> <pre><code>[Desktop Entry]\nName=FBA-RG350\nComment=Arcade machine emulator\nExec=fbasdl.dge\nTerminal=false\nType=Application\nStartupNotify=true\nIcon=fba_icon\nCategories=emulators;\nX-OD-NeedsDownscaling=true\n</code></pre> <p>Lo primero que haremos es renombrar el fichero para reservar el nombre <code>default.gcw0.desktop</code> para el lanzador que crearemos a continuaci\u00f3n. Tambi\u00e9n cambiaremos el par\u00e1metro <code>Name</code> por <code>FBA UX</code> para indicar que este lanzador es el que lanza el interfaz (UX = User eXperience) propio de FBA. As\u00ed pues terminaremos con un fichero de nombre <code>fba_ux.gcw0.desktop</code> y el siguiente contenido:</p> <pre><code>[Desktop Entry]\nName=FBA UX\nComment=Arcade machine emulator\nExec=fbasdl.dge\nTerminal=false\nType=Application\nStartupNotify=true\nIcon=fba_icon\nCategories=emulators;\nX-OD-NeedsDownscaling=true\n</code></pre> <p>Ahora creamos un segundo <code>.desktop</code> para ejecutar FBA como un emulador m\u00e1s convencional con selecci\u00f3n previa de ROM. Crearemos un fichero de nombre <code>default.gcw0.desktop</code> y el siguiente contenido:</p> <pre><code>[Desktop Entry]\nName=FBA Explorer\nComment=Arcade machine emulator\nExec=fbasdl.dge %f\nTerminal=false\nType=Application\nStartupNotify=true\nIcon=fba_icon\nCategories=emulators;\nX-OD-NeedsDownscaling=true\n</code></pre> <p>En \u00e9l vemos que el comando a ejecutar tiene previsto el argumento <code>%f</code> donde se insertar\u00e1 el fichero de la ROM seleccionada con el explorador de ficheros.</p> <p>Una vez hechos estos cambios volvemos a enlatar el OPK. En Linux lo haremos con el siguiente comando:</p> <pre><code>$ mksquashfs squashfs-root/ fba-RG350-r19-mod.opk -all-root -noappend -no-exports -no-xattrs\n</code></pre> <p>Si sustituimos el OPK original instalado en la consola por el que acabamos de re-ensamblar con el comando anterior, veremos que ahora nos aparecen dos lanzadores en GMenu2X:</p> <p></p> <p>El que tiene la etiqueta <code>FBA UX</code> se comportar\u00e1 como el original y el nuevo <code>FBA Explorer</code> mostrar\u00e1 un explorador de ficheros como la mayor\u00eda de los emuladores:</p> <p></p> <p>Con esto tendr\u00edamos resuelto el primer problema dado que ahora launchers como SimpleMenu, PyMenu o EmulationStation podr\u00e1n integrar este OPK modificado de FBA para ejecutar los juegos.</p>"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#2-localizar-opcion-para-rotar-pantalla","title":"2. Localizar opci\u00f3n para rotar pantalla","text":"<p>El segundo problema pod\u00eda no haber tenido soluci\u00f3n pero hubo suerte. Como ve\u00edamos, seg\u00fan el Readme no parec\u00eda haber un par\u00e1metro que permitiera controlar la rotaci\u00f3n de la pantalla por linea de comando. A pesar de ello echando un vistazo al c\u00f3digo fuente de FBA encontramos la siguiente estructura en el fichero src/sdl-dingux/main.cpp:</p> <pre><code>    static struct option long_opts[] = {\n        {\"sound-sdl-old\", 0, &amp;options.sound, 3},\n        {\"sound-sdl\", 0, &amp;options.sound, 2},\n        {\"sound-ao\", 0, &amp;options.sound, 1},\n        {\"no-sound\", 0, &amp;options.sound, 0},\n        {\"samplerate\", required_argument, 0, 'r'},\n        {\"frameskip\", required_argument, 0, 'c'},\n        {\"vsync\", 0, &amp;options.vsync, 1},\n        {\"scaling\", required_argument, 0, 'a'},\n        {\"rotate\", required_argument, 0, 'o'},\n        {\"hwscaling\", required_argument, 0, 'h'},\n        {\"sense\", required_argument, 0, 'd'},\n        {\"showfps\", 0, &amp;options.showfps, 1},\n        {\"no-showfps\", 0, &amp;options.showfps, 0},\n        {\"create-lists\", 0, &amp;options.create_lists, 1},\n        {\"68kcore\", required_argument, 0, 's'},\n        {\"z80core\", required_argument, 0, 'z'},\n    };\n</code></pre> <p>Esto parece indicar que hay m\u00e1s opciones sin documentar en el Readme. As\u00ed pues sin revisar m\u00e1s a fondo el c\u00f3digo, haciendo una prueba incorporando la opci\u00f3n <code>rotate</code> al <code>.desktop</code> de tipo Explorer se comprueba que es efectiva. Concretamente lo que hay que a\u00f1adir al comando de ejecuci\u00f3n es:</p> <pre><code>Exec=fbasdl.dge %f --rotate=2\n</code></pre> <p>El valor 2 se obtiene de observar el valor que toma el par\u00e1metro <code>FBA_ROTATE</code> en los ficheros que aparecen en <code>/media/data/local/home/.fba/configs</code> y que son los que aplican cuando ejecutamos los juegos desde el interfaz propio de FBA (<code>FBA UX</code>).</p> <p>Ya sabemos c\u00f3mo podemos indicar por linea de comando c\u00f3mo rotar la pantalla. Ahora tenemos un \u00faltimo problema y es que este par\u00e1metro s\u00f3lo nos interesa para los juegos en vertical. Si ponemos este argumento en los juegos horizontales, veremos la pantalla de esta forma:</p> <p></p> <p>Una opci\u00f3n ser\u00eda crear un tercer <code>.desktop</code> con la opci\u00f3n (dejando el que hemos creado antes sin la opci\u00f3n) y utilizar ese lanzador para los juegos verticales pero esto nos obligar\u00eda a separar en secciones distintas los juegos verticales de los horizontales en los frontends como SimpleMenu. La soluci\u00f3n por la que se ha optado aqu\u00ed es intercalar un peque\u00f1o script que analice si el juego es vertical o no y en funci\u00f3n de eso aplique la opci\u00f3n <code>--rotate=2</code> o no. La forma de averiguar si el juego es vertical ser\u00e1 declar\u00e1ndolo en un peque\u00f1o fichero de texto en el directorio de las ROMs.</p> <p>Lo primero que haremos ser\u00e1 modificar el <code>default.gcw0.desktop</code> para que en lugar de ejecutar el binario del emulador directamente se ejecute un peque\u00f1o script:</p> <pre><code>[Desktop Entry]\nName=FBA Explorer\nComment=Arcade machine emulator\nExec=v_detector.sh %f\nTerminal=false\nType=Application\nStartupNotify=true\nIcon=fba_icon\nCategories=emulators;\nX-OD-NeedsDownscaling=true\n</code></pre> <p>Finalmente incorporaremos dentro del OPK el script que discrimina los juegos verticales como hemos comentado. Su nombre ser\u00e1 <code>v_detector.sh</code> y su contenido el siguiente:</p> <pre><code>#!/bin/sh\n\nV_GAMES_FILE=$(dirname \"$1\")/vertical_games.txt\nif [ -f \"$V_GAMES_FILE\" ]\nthen\n    V_GAME_NAME=$(basename \"$1\")\n    if grep -q $V_GAME_NAME $V_GAMES_FILE\n    then\n        ./fbasdl.dge $1 --rotate=2\n    else\n        ./fbasdl.dge $1\n    fi\nelse\n    ./fbasdl.dge $1\nfi\n</code></pre> <p>No hay que olvidarse de dar permiso de ejecuci\u00f3n (<code>+x</code>) al script anterior.</p> <pre><code>$ chmod +x v_detector.sh\n</code></pre> <p>Con todos estos cambios, volvemos a empaquetar el OPK como hemos visto antes:</p> <pre><code>$ mksquashfs squashfs-root/ fba-RG350-r19-mod.opk -all-root -noappend -no-exports -no-xattrs\n</code></pre> <p>Lo instalamos en la consola y a partir de ahora s\u00f3lo tendremos que incluir el nombre del fichero de la ROM (extensi\u00f3n <code>.zip</code> incluida) en un fichero de nombre <code>vertical_games.txt</code> en el mismo directorio donde se encuentren las ROMs. Por ejemplo algunos de los juegos candidatos a encontrarse en este listado son:</p> <pre><code>1941.zip\n19xx.zip\ndimahoo.zip\nmercs.zip\nvarth.zip\n</code></pre>"},{"location":"2020-07-09-rg350_fba_vertical_mod.html#utilizacion-del-mod-de-fba","title":"Utilizaci\u00f3n del mod de FBA","text":"<p>Vamos a dar instrucciones para utilizar el emulador FBA modificado a lo largo de este art\u00edculo.</p> <p>Una versi\u00f3n empaquetada con todas las modificaciones ya hechas puede descargarse de aqu\u00ed.</p> <p>Una vez instalado en la consola, veremos que ahora aparecen dos lanzadores (al menos en GMenu2X):</p> <p></p> <p>El lanzador <code>FBA UX</code> se comporta como el habitual, es decir muestra el interfaz propio de FBA donde podemos hacer el ajuste de la rotaci\u00f3n de la pantalla (y muchos otros) antes de lanzar los juegos. El nuevo <code>FBA Explorer</code> ser\u00e1 el que nos permitir\u00e1 seleccionar la ROM por medio del explorador de archivos de GMenu2X, de la misma forma que hacen la mayor\u00eda de los emuladores:</p> <p></p> <p>Si queremos que el juego rote la pantalla -180\u00ba para que se puedan utilizar los controles de la parte derecha de la pantalla, s\u00f3lo tendremos que crear un fichero de texto de nombre <code>vertical_games.txt</code> en el mismo directorio donde se encuentren las ROMs, e incorporar a \u00e9l los nombres de las ROMs que queramos girar, uno por l\u00ednea y con la extensi\u00f3n <code>.zip</code> incluida. Por ejemplo:</p> <p>Si todo va bien, al ejecutar uno de estos juegos desde <code>FBA Explorer</code> o desde SimpleMenu veremos lo siguiente y podremos utilizar los controles de la parte derecha de la consola:</p>"},{"location":"2020-07-12-rg350_screen_mod.html","title":"RG350 Sustituci\u00f3n de pantalla 480p","text":"<p>Recientemente ha aparecido un modelo de RG350 llamado RG350M con unas pocas actualizaciones, de las cuales la m\u00e1s importante es la pantalla. Si en el modelo original la pantalla tiene una resoluci\u00f3n de 320x240, en el nuevo modelo es de 640x480. Es decir multiplica por 4 el n\u00famero de p\u00edxeles de la original.</p> <p>Al final del art\u00edculo comentar\u00e9 lo que opino sobre si merece la pena la nueva pantalla. Como el resto del hardware es id\u00e9ntico, el controlador de pantalla est\u00e1 en el propio procesador (que no cambia como digo) y el conector de la pantalla tambi\u00e9n es el mismo (54 pines), la pantalla de alta resoluci\u00f3n es compatible y se puede instalar en el modelo antiguo. Vamos a ver c\u00f3mo realizar la modificaci\u00f3n.</p> <p>Actualizaci\u00f3n 2020-10-10</p> <p>El repuesto oficial de Anbernic de la pantalla de la RG350M no es la misma pantalla que la instalada inicialmente en este art\u00edculo. Al final del mismo se ampl\u00eda con la experiencia con esta otra pantalla. Adelanto aqu\u00ed que merece la pena el incremento de precio, por lo que actualmente no considerar\u00eda comprar la que se presenta inicialmente.</p>"},{"location":"2020-07-12-rg350_screen_mod.html#compra-de-la-pantalla","title":"Compra de la pantalla","text":"<p>La pantalla tiene como nombre en c\u00f3digo <code>JT035IPS02-V0</code> y se encuentra f\u00e1cilmente en Aliexpress por entre 20 y 30\u20ac. Un enlace de compra ser\u00eda por ejemplo \u00e9ste. En la p\u00e1gina de repuestos oficiales de Anbernic dentro de Aliexpress tambi\u00e9n se puede encontrar por 26\u20ac y supongo que puede ser la opci\u00f3n m\u00e1s recomendable.</p> <p>Recibiremos algo como lo que se ve al comienzo de este art\u00edculo.</p>"},{"location":"2020-07-12-rg350_screen_mod.html#instalacion-hardware","title":"Instalaci\u00f3n hardware","text":"<p>Vamos a ver el proceso de sustituci\u00f3n. Necesitaremos los siguientes elementos:</p> <p></p> <p>Para trabajar con la consola y dado que mantengo los sticks altos originales, utilizo la almohadilla que ven\u00eda en la caja de la consola, de esta forma podremos tenerla apoyada en la mesa de forma estable por la cara frontal:</p> <p> </p> <p>Empezamos retirando los 4 tornillos y una vez levantada la tapa trasera apartamos tambi\u00e9n los 4 gatillos que nos estorbar\u00e1n durante el proceso. Soltamos el conector de la bater\u00eda para poder apartar completamente la tapa trasera con la bater\u00eda pegada:</p> <p></p> <p>Tenemos que extraer completamente la placa base, para lo que s\u00f3lo es necesario retirar los 6 tornillos que la mantienen unida a la carcasa y las cintas de datos de los sticks anal\u00f3gicos. Empezamos levantando la pesta\u00f1a del conector del cable de cinta de los sticks:</p> <p></p> <p>Una vez desconectados los dos sticks anal\u00f3gicos, desatornillamos los 6 tornillos que vemos marcados con una flecha roja a continuaci\u00f3n:</p> <p></p> <p>A partir de ese momento podremos levantar la placa base. Lo haremos basculando sobre la parte inferior, es decir, levantando la parte de arriba, ya que el cable de datos de la pantalla tiene la articulaci\u00f3n en la parte inferior:</p> <p> </p> <p>Ahora tenemos que desconectar la pantalla. Empezamos levantando la pesta\u00f1a que aprisiona el cable de cinta en el conector. Aunque en la foto se ven unas pinzas, es mejor utilizar la u\u00f1a o un elemento plano, ya que la pesta\u00f1a est\u00e1 sujeta con bastante fuerza y unas pinzas finas seguramente la partir\u00edan:</p> <p> </p> <p>En este momento ya podremos abatir totalmente la placa base para alcanzar la pantalla de forma completa. Hay que tener cuidado con los cables de los altavoces. Est\u00e1n lo suficientemente holgados como para que podamos abatir la placa sin problemas, pero los vigilaremos durante el proceso para evitar tirones en las soldaduras que saltar\u00edan f\u00e1cilmente al ser tan peque\u00f1as:</p> <p></p> <p>Llegamos a uno de los momentos m\u00e1s complicados del montaje y es que la pantalla que vamos a retirar est\u00e1 pegada. En mi caso hice palanca con cuidado con las pinzas de punta fina, empezando por la parte superior izquierda y poco a poco sali\u00f3. Lo que ocurri\u00f3 en realidad es que la pantalla se solt\u00f3 del marco met\u00e1lico que tiene. No es una mala situaci\u00f3n en realidad. De hecho podemos aprovechar que el marco es id\u00e9ntico en ambos modelos de pantalla, para quit\u00e1rselo a la nueva y encajarla en el marco que ha quedado pegado en la consola. No lo hice as\u00ed porque hasta no tener el marco en la mano no tuve claro que eran iguales.</p> <p></p> <p>As\u00ed pues retir\u00e9 el marco que hab\u00eda quedado pegado. Es muy f\u00e1cil que se doble al hacerlo ya que se trata de una chapa met\u00e1lica muy fina. Seguramente sea buena idea aplicar algo de aire caliente antes de empezar a hacer palanca. Sin pasarse ya que la carcasa de la consola es de pl\u00e1stico.</p> <p></p> <p>En caso de que hayamos retirado el marco antiguo necesitaremos cinta de doble cara como la que lo manten\u00eda pegado a la carcasa (si no la tenemos, \u00e9ste ser\u00e1 otro motivo para reutilizar el marco antiguo, ya que como decimos son compatibles entre ambas pantallas):</p> <p></p> <p>Apliqu\u00e9 cuatro tiras de cinta de doble cara en los cuatro lados de la pantalla (en la foto falta la inferior que apliqu\u00e9 directamente sobre la pantalla). Puede que sea mejor idea aplicar s\u00f3lo un par de tiras arriba y abajo por ejemplo para facilitar desmontajes en el futuro:</p> <p></p> <p>En este momento colocamos la nueva pantalla en su lugar (dejando la articulaci\u00f3n de la cinta en la parte inferior):</p> <p></p> <p>Ahora introducimos el extremo del cable de cinta de la pantalla por la ranura de la placa base e insertamos y sujetamos (bajando la pesta\u00f1a) el cable al conector. Al ser la cinta de datos algo r\u00edgida y estar la ranura en la PCB por la que asoma tan cerca del conector, puede resultar algo complicado. Es cuesti\u00f3n de armarse de paciencia y aprovechar que todav\u00eda no hemos atornillado la placa base para tener algo de juego pasando m\u00e1s cable de cinta de lo normal a trav\u00e9s de la ranura:</p> <p></p> <p>Antes de terminar de encajar la placa base en su lugar, nos fijamos en los botones de la parte inferior (Power, Volumen y Reset). Es muy probable que se hayan descolgado de su lugar, por lo que los recolocaremos:</p> <p></p> <p>Ya s\u00f3lo queda rearmar la consola procediendo como al principio pero en sentido inverso, es decir, empezamos por encajar la placa base y recolocar los 6 tornillos:</p> <p></p> <p>Ahora recolocamos los cables de cinta de los sticks fij\u00e1ndolos bajando la pesta\u00f1a que cierra el contacto. Tambi\u00e9n reponemos los botones de los gatillos que hab\u00edamos apartado al principio:</p> <p></p> <p>Ahora tocar\u00eda reconectar la bater\u00eda y atornillar la tapa trasera, pero no lo vamos a hacer todav\u00eda ya que la consola arrancar\u00eda y dado que no hemos tocado el sistema la pantalla no se ver\u00eda. As\u00ed pues pasamos al apartado de instalaci\u00f3n del software antes de terminar.</p>"},{"location":"2020-07-12-rg350_screen_mod.html#instalacion-software","title":"Instalaci\u00f3n software","text":"<p>El firmware original de la RG350 no da soporte directo a la pantalla de alta resoluci\u00f3n, por lo que necesitamos ciertas piezas del firmware de la RG350M para que funcione. En concreto necesitamos el kernel Linux que hay en la partici\u00f3n <code>/boot</code>, es decir la primera partici\u00f3n de la tarjeta interna (la \u00fanica que es de tipo FAT y que por tanto nos facilita el intercambio de ficheros). Como uso ROGUE, voy a tomar el fichero del kernel directamente de los releases que ofrece Ninoh. Concretamente el fichero del kernel es el siguiente (correspondiente a la versi\u00f3n 1.7.10 de ROGUE que era la disponible en el momento de escribir este art\u00edculo):</p> <ul> <li>https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/vmlinuz.bin</li> </ul> <p>Aunque en teor\u00eda ser\u00e1 suficiente con sustituir el kernel Linux, prefiero sustituir tambi\u00e9n los m\u00f3dulos y el rootfs (sistema de archivos ra\u00edz del sistema) por si hay tambi\u00e9n cambios en ellos respecto del firmware del modelo normal de la RG350:</p> <ul> <li>https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/modules.squashfs</li> <li>https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases/download/1.7.10M/rootfs.squashfs</li> </ul> <p>En caso de preferir el firmware BASE, no he localizado estos ficheros por separado, por lo que nos tocar\u00e1 flashear la tarjeta interna completamente con este fichero:</p> <ul> <li>https://rs97.bitgala.xyz/RG350M/Stock%20Firmware/sd_image.7z</li> </ul> <p>Una vez hechos estos cambios, ya podemos conectar la bater\u00eda y cerrar la tapa trasera. Al conectar la bater\u00eda la consola arrancar\u00e1 y deberemos ver el logo de ROGUE en alta resoluci\u00f3n:</p> <p></p>"},{"location":"2020-07-12-rg350_screen_mod.html#tutorial-en-video","title":"Tutorial en video","text":"<p>Todo el proceso anterior coincide m\u00e1s o menos con el siguiente v\u00eddeo que puede venir bien para \"rellenar los huecos\" de la explicaci\u00f3n anterior. En el video se sustituye la pantalla de una RG350 por otra de la misma resoluci\u00f3n, pero el proceso para cambiar por una de resoluci\u00f3n mayor es id\u00e9ntico:</p>"},{"location":"2020-07-12-rg350_screen_mod.html#merece-la-pena-el-cambio","title":"\u00bfMerece la pena el cambio?","text":"<p>Por \u00faltimo, har\u00e9 unos comentarios sobre las ventajas y desventajas que tiene el cambio de pantalla y si merece la pena.</p> <p>Como sabemos hay muchos sistemas retro en los que encaja bastante bien la resoluci\u00f3n de la pantalla de 320x240 de la RG350 original. Esto ocurre en la mayor\u00eda de las consolas de 8 y 16 bit. En cuanto a los sistemas que no coincide, podemos encontrarnos casos que queden por debajo (Game Boy por ejemplo) y por encima (PlayStation fundamentalmente). En ambos casos tener una pantalla de mayor resoluci\u00f3n es una ventaja. En el caso de sistemas con m\u00e1s resoluci\u00f3n resulta muy evidente, pero tambi\u00e9n en sistemas de baja resoluci\u00f3n ya que al hacer el escalado \"hacia arriba\" tendremos m\u00e1s p\u00edxeles para jugar, para aplicar distintos efectos de suavizado o para simular el acusado efecto dot matrix que sol\u00edan tener pantallas como las de la Game Boy.</p> <p>De todas formas, a grandes rasgos se puede decir que la pantalla de 480p merece fundamentalmente la pena si vamos a jugar a ciertos juegos de alta resoluci\u00f3n en PlayStation, DOSBox y Arcade.</p> <p>En cuanto a los contras, al haber m\u00e1s resoluci\u00f3n, el proceso de scaling en emuladores o juegos que funcionan a baja resoluci\u00f3n, en ocasiones produce efectos de suavizado o emborronado que no gustan a muchos usuarios. En general casi siempre existe manera de solucionar estos problemas tocando los ajustes de scaling del emulador (de hecho a veces se pueden conseguir mejoras o efectos muy interesantes como luego veremos). Por \u00faltimo hay que mencionar un problema que parecen tener la mayor\u00eda de los usuarios de esta pantalla (y del modelo M de la consola) y es que parece no restaurar correctamente cuando se sale de la suspensi\u00f3n de pantalla. En ocasiones tras reactivar la pantalla, aparecen cercos de luz y parpadeos por los bordes.</p> <p>Otro aspecto a considerar, que siempre me parece importante para valorar estas retroconsolas, es el de la escena de desarrollo o scene. S\u00f3lo el tiempo lo dir\u00e1, pero parece l\u00f3gico pensar que gradualmente se ir\u00e1 ampliando la scene del modelo M y reduciendo la de la normal. Aunque tambi\u00e9n podr\u00eda ocurrir lo contrario si no \"cuajan\" las ventas del modelo M frente al normal y teniendo en cuenta adem\u00e1s la cantidad de consolas basadas en la misma arquitectura que contin\u00faan con la pantalla de baja resoluci\u00f3n (RG280, PocketGo 2 V2, RG350P; sin olvidar la que empez\u00f3 todo GCW0).</p> <p>Otro contra es la p\u00e9rdida de rendimiento que se tiene en el modelo M por la sobrecarga que supone en un bus de datos de la m\u00e1quina al tener que transferir m\u00e1s informaci\u00f3n. Esta p\u00e9rdida de rendimiento se estima en alrededor de un 5%. En este hilo de Dingoonity se aportan detalles del problema.</p> <p>Para terminar vamos a mostrar algunos pantallazos de juegos tal y como se ver\u00edan en la pantalla de 240p frente a la de 480p. Las dos im\u00e1genes se han escalado a 640x480 para que se puedan comparar f\u00e1cilmente. A\u00fan as\u00ed debo decir que los pantallazos no hacen justicia. La pantalla de alta resoluci\u00f3n se ve mucho mejor de lo que parece con estos juegos de alta resoluci\u00f3n:</p> <p>Logos arranque PlayStation: Resoluci\u00f3n original 640x448</p> <p> </p> <p>Crash Bandicoot (PS): Resoluci\u00f3n original 512x224</p> <p> </p> <p>Tekken 3 (PS): Resoluci\u00f3n original 368x448</p> <p> </p> <p>SimCity (DOS): Resoluci\u00f3n original 640x352</p> <p> </p> <p>Game Boy</p> <p>Por \u00faltimo mostrar algunos ejemplos en el caso de Game Boy que mencion\u00e1bamos antes. La \u00faltima release del emulador Gambatte ofrece una versi\u00f3n especial para la RG350M (descargable aqu\u00ed) que ofrece m\u00e1s opciones de escalado para aprovechar mejor la resoluci\u00f3n de la pantalla:</p> <p></p> <p>Por ejemplo la opci\u00f3n Dot Matrix produce el efecto de separaci\u00f3n entre p\u00edxeles que suele haber en las pantallas de baja resoluci\u00f3n. Puede parecer absurdo ya que la pantalla de la RG350 original precisamente tiene esta caracter\u00edstica. El problema como dec\u00edamos antes es que al no coincidir la resoluci\u00f3n de la Game Boy (160x144) y ser tan distinta, o bien jugamos con pixeles 1 a 1 y bordes de pantalla o el escalado a toda pantalla producir\u00e1 distorsiones y precisamente se intercalar\u00e1 el efecto dot matrix de la propia pantalla donde no corresponda.</p> <p>Por ejemplo as\u00ed se ve un juego de Game Boy con la opci\u00f3n <code>Dot Matrix 3x</code> en la pantalla de 480p de la RG350M:</p> <p> </p> <p>Actualizaci\u00f3n 2020-10-10</p> <p>A partir de este punto se incorpora contenido nuevo al art\u00edculo original tras la experiencia con la pantalla oficial.</p>"},{"location":"2020-07-12-rg350_screen_mod.html#pantalla-oficial","title":"Pantalla oficial","text":"<p>A pesar de las mejoras de la pantalla instalada anteriormente, desde un principio present\u00f3 una serie de problemas que se pueden considerar menores. Seg\u00fan las experiencias de otras personas que hicieron la misma modificaci\u00f3n, los problemas suelen ser distintos en cada caso. En el m\u00edo los problemas eran estos:</p> <ul> <li>P\u00e9rdida de sincronismo vertical (imagen parecida al aspecto de la vieja codificaci\u00f3n de Canal+) en ciertas situaciones (durante un segundo al reiniciar y sobre todo en pantallas de texto, tipo terminal, en algunas ocasiones, no siempre).</li> <li>Peque\u00f1a linea muy fina vertical en GMenu2X (que achaqu\u00e9 a una distorsi\u00f3n de scaling, ahora s\u00e9 que no deb\u00eda ocurrir).</li> <li>En ciertas im\u00e1genes de alta resoluci\u00f3n como en algunos juegos de PlayStation o en SimpleMenu, se produc\u00eda un efecto shadow en los bordes de las areas de color lisas.</li> </ul> <p>Los problemas suenan m\u00e1s graves por escrito que observ\u00e1ndolos en la realidad, y de hecho no fue el motivo de cambiar la pantalla, puesto que supon\u00eda que ocurrir\u00edan problemas parecidos hasta en la consola con la pantalla instalada de serie, es decir la RG350M. Sin embargo con la idea de mejorar a\u00fan m\u00e1s la experiencia de la consola decid\u00ed cambiar a la pantalla original de la RG350M que est\u00e1 pegada directamente al cristal exterior, con lo que se elimina el espacio que hay en la RG350 normal. Fue al probar esta pantalla cuando vi que los problemas enumerados antes, no se ten\u00edan por qu\u00e9 producir. La nueva pantalla no ten\u00eda ninguno de ellos, adem\u00e1s de como dec\u00eda evitar el espacio que hay en la RG normal entre pantalla y cristal.</p> <p>Al recibir la nueva pantalla pude comprobar que realmente se trata de una pantalla diferente, lo que explica su comportamiento diferente. En la siguiente foto puede verse c\u00f3mo la faja de datos es claramente diferente:</p> <p></p> <p>As\u00ed pues, no recomiendo ya la compra de la pantalla <code>JT035IPS02-V0</code> de Wisecoco que se encuentra por todas partes en Aliexpress y s\u00ed el repuesto oficial de Anbernic de la pantalla que trae la RG350M que puede encontrarse a trav\u00e9s de los siguientes enlaces:</p> <ul> <li>eBay</li> <li>Aliexpress</li> </ul> <p>Hay que aclarar que la pantalla oficial requiere modificar la carcasa de la consola para poder instalarla, por lo que esta opci\u00f3n s\u00f3lo es recomendable para los que no tengan problemas en trabajar la carcasa con cuchilla y lima.</p>"},{"location":"2020-07-12-rg350_screen_mod.html#instalacion-pantalla-oficial","title":"Instalaci\u00f3n pantalla oficial","text":"<p>El proceso de instalaci\u00f3n de la pantalla oficial es similar al descrito antes para la pantalla Wisecoco, con la diferencia del recorte en el marco que hay que realizar. Por este motivo es recomendable desmontar completamente la carcasa superior de la consola, y no parcialmente como se hizo antes. Esto es as\u00ed para evitar todo lo posible los obst\u00e1culos a la hora de trabajar la carcasa. Retiramos pues todos los componentes y separamos las distintas piezas de la carcasa hasta llegar a esto (realmente todav\u00eda se puede retirar tambi\u00e9n el marco blanco, de lo que fui consciente tras hacer la foto):</p> <p></p> <p>En este punto llega el primer momento complicado que consiste en despegar la pantalla antigua y el cristal exterior sin romperlos. Empec\u00e9 despegando el cristal exterior (ya que tiene menos valor en caso de romperse). Apliqu\u00e9 aire caliente a 150\u00baC durante un rato y el cristal se separ\u00f3 f\u00e1cilmente torsionando ligeramente la consola entre las manos. La pantalla fue f\u00e1cil de despegar empujando por delante una vez que ya no estaba el cristal protector.</p> <p> </p> <p>Llega el momento de coger la cuchilla para rebajar el marco. La cuesti\u00f3n es \u00bfcu\u00e1nto hay que recortar?, pero la respuesta es sencilla. Si miramos al trasluz la carcasa vemos que tras el marco fino que tenemos que recortar est\u00e1 el alojamiento de la pantalla anterior que tiene m\u00e1s o menos las mismas dimensiones que la nueva pantalla:</p> <p> </p> <p>As\u00ed pues el marco interior de la pantalla marca el l\u00edmite de corte. En realidad la pantalla nueva es ligeramente m\u00e1s peque\u00f1a (entre 6 y 8 d\u00e9cimas en cada eje), pero tiene una especie de peque\u00f1os dientes (un par en cada lado) que hacen que, medida en esos dientes, alcance las dimensiones de la pantalla vieja. As\u00ed si dejamos 3 \u00f3 4 d\u00e9cimas de la l\u00e1mina que estamos recortando, la pantalla se sujetar\u00e1 con los dientes adem\u00e1s de con el adhesivo que pondremos al final. Si no dejamos nada, es decir si recortamos completamente el marco, la pantalla se fijar\u00e1 en su sitio s\u00f3lo con el adhesivo y los dientes servir\u00e1n \u00fanicamente para ubicarla correctamente. En cualquier caso el montaje quedar\u00e1 bien, por lo que no es especialmente cr\u00edtico si recortamos el marco completamente o si tenemos habilidad suficiente para dejar esas pocas d\u00e9cimas de mil\u00edmetro en cada lado.</p> <p> </p> <p>El resultado del recorte. Puede observarse en la vista desde la parte interior c\u00f3mo trat\u00e9 de dejar esas pocas d\u00e9cimas de material en el marco:</p> <p> </p> <p>Lo siguiente ser\u00e1 colocar cuatro tiras de adhesivo de dos caras:</p> <p></p> <p>Ya podemos colocar la pantalla en su sitio y volver a montar la consola restituyendo todos los componentes que se desmontaron al principio:</p> <p></p> <p>Aunque es dif\u00edcil de apreciar en fotos, la nueva pantalla se ve claramente mejor. Adem\u00e1s de solucionar los tres problemas que mencionaba al principio, al estar directamente tras el cristal produce una imagen mucho m\u00e1s n\u00edtida. La primera foto corresponde a la pantalla antigua y la segunda a la nueva:</p> <p> </p> <p>Por \u00faltimo mencionar este video donde podemos ver todo el proceso en vivo:</p>"},{"location":"2020-08-12-rg350_py_backup.html","title":"RG350 Py Backup","text":"<p>Py Backup es un programa que nos va a facilitar la gesti\u00f3n de los backups en la RG350. Est\u00e1 pensado principalmente para respaldar los directorios donde se almacenan los savestates (las partidas) de los emuladores, pero modificando su configuraci\u00f3n podemos utilizarlo para hacer backup de cualquier fichero o directorio de la consola.</p>"},{"location":"2020-08-12-rg350_py_backup.html#instalacion","title":"Instalaci\u00f3n","text":"<p>La aplicaci\u00f3n tiene forma de OPK, por lo que se instalar\u00e1 como habitualmente copiando el fichero a una de las dos rutas que explora GMenu2X para mostrar los lanzadores, es decir:</p> <ul> <li>Tarjeta interna: <code>/media/data/apps</code></li> <li>Tarjeta externa: <code>/media/sdcard/apps</code></li> </ul> <p>El OPK lo podemos bajar de la secci\u00f3n releases del repositorio de c\u00f3digo de la aplicaci\u00f3n, en concreto la \u00faltima versi\u00f3n se encuentra aqu\u00ed.</p> <p>Una vez instalada, podremos encontrar la aplicaci\u00f3n en la secci\u00f3n Applications de los distintos lanzadores:</p> <p> </p>"},{"location":"2020-08-12-rg350_py_backup.html#configuracion","title":"Configuraci\u00f3n","text":"<p>La configuraci\u00f3n de Py Backup se hace por medio del fichero que se crea en la siguiente ruta la primera vez que se ejecuta:</p> <pre><code>/media/data/local/home/.py_backup/config.ini\n</code></pre> <p>Por defecto viene con las rutas de los directorios de savestate de varios emuladores populares:</p> <pre><code>[DEFAULT]\ndestination_directory = /media/sdcard/backups\nsystems =\n    Stella (A2600),True,/media/data/local/home/.stella/state\n    FBA,True,/media/data/local/home/.fba/saves\n    FCEUX (NES),True,/media/data/local/home/.fceux/fcs\n    Gambatte (GB/GBC),True,/media/data/local/home/.gambatte/saves\n    ReGBA (GBA),True,/media/data/local/home/.gpsp\n    SMS Plus (GG/SMS),True,/media/data/local/home/.smsplus/state\n    Genesis Plus (GG/SMS/MD),True,/media/data/local/home/.genplus/saves\n    PicoDrive (MD),True,/media/data/local/home/.picodrive/mds\n    Handy (Lynx),True,/media/data/local/home/.handy\n    NGPCEmu (NGP),True,/media/data/local/home/.ngpcemu/sstates\n    Temper (PCE),True,/media/data/local/home/.temper/save_states\n    PCSX4All (PS),True,/media/data/local/home/.pcsx4all/sstates,/media/data/local/home/.pcsx4all/memcards\n    PocketSNES (SNES),True,/media/data/local/home/.pocketsnes\n    SwanEmu (WS),True,/media/data/local/home/.swanemu/sstates\n    xMAME (Arcade),True,/media/data/local/share/xmame/xmame52/sta,/media/data/local/share/xmame/xmame69/sta,/media/data/local/share/xmame/xmame84/sta\n    ScummVM,True,/media/data/local/home/.local/share/scummvm/saves\n    OpenBOR,True,/media/data/local/home/.OpenBOR/Saves\n    Ports,True,/media/data/local/home/.nxengine,/media/data/local/home/.local/share/VVVVVV/saves,/media/data/local/home/.methane,/media/data/local/home/.sorrv5/savegame\n</code></pre> <p>Como vemos dentro del fichero de tipo INI encontramos dos par\u00e1metros:</p> <ul> <li><code>destination_directory</code>: Contiene la ruta sobre la que queremos que se dejen los backups.</li> <li><code>systems</code>: Contiene los varios (uno por linea) ficheros de backup que podemos crear y gestionar por separado. Normalmente cada uno de estos ficheros estar\u00e1 asociado a un emulador o sistema.</li> </ul> <p>Los ficheros de backup indicados en el par\u00e1metro <code>systems</code> se configuran por una serie de elementos separados por comas en el siguiente orden:</p> <ol> <li>Nombre del fichero de backup. Una vez ejecutado el backup encontraremos un fichero con este nombre y extensi\u00f3n <code>tgz</code> en el directorio indicado en <code>destination_directory</code>.</li> <li><code>True</code> o <code>False</code> para indicar si queremos activar o desactivar el fichero de backup. Esto puede modificarse f\u00e1cilmente desde el propio interfaz del programa como luego veremos.</li> <li>Listado de ficheros o directorios (separados por comas) que se incluir\u00e1n en el fichero de backup.</li> </ol> <p>Es importante que las lineas que contienen las definiciones de los ficheros de backup est\u00e9n indentados con 4 espacios o un tabulador.</p> <p>Por ejemplo vamos a analizar la configuraci\u00f3n del fichero de backup siguiente:</p> <pre><code>    PCSX4All (PS),True,/media/data/local/home/.pcsx4all/sstates,/media/data/local/home/.pcsx4all/memcards\n</code></pre> <p>Al ejecutar el backup, aparecer\u00e1 un fichero de nombre <code>PCSX4All (PS).tgz</code> en el directorio <code>/media/sdcard/backups</code> y con el contenido de los dos siguientes directorios:</p> <ul> <li><code>/media/data/local/home/.pcsx4all/sstates</code></li> <li><code>/media/data/local/home/.pcsx4all/memcards</code></li> </ul>"},{"location":"2020-08-12-rg350_py_backup.html#utilizacion","title":"Utilizaci\u00f3n","text":"<p>Cuando abramos la aplicaci\u00f3n por primera vez encontraremos los ficheros de backup definidos en la configuraci\u00f3n predeterminada. Dependiendo de si tenemos instalados en nuestra consola los emuladores relacionados con estos ficheros, \u00e9stos aparecer\u00e1n coloreados de una u otra forma que luego explicaremos. En caso de tener todos los emuladores instalados, seguramente veremos algo como lo siguiente:</p> <p></p> <p>En todo momento la aplicaci\u00f3n indica los controles disponibles para su manejo. Seg\u00fan lo visto en la pantalla anterior, en este caso lo que podr\u00edamos hacer es navegar por los distintos ficheros con Arriba/Abajo, marcar o desmarcar (toggle) con la tecla <code>A</code> y finalmente ejecutar el backup con la tecla <code>B</code>.</p> <p>Como dec\u00edamos antes, el color con que se representa cada fichero tiene un significado. Por ejemplo en el siguiente fragmento vemos los tres colores posibles:</p> <p></p> <p>El significado de cada color aplicado a estos tres ficheros se interpreta de la siguiente forma:</p> <ul> <li>Blanco: Se puede hacer backup y restaurar.</li> <li>Rojo: Se puede hacer backup pero no restaurar. T\u00edpicamente porque todav\u00eda no se ha hecho el primer backup.</li> <li>Gris: No se puede hacer backup ni restaurar. T\u00edpicamente porque no existen los ficheros o directorios configurados para este backup, seguramente porque no tenemos instalado el sistema correspondiente en nuestra m\u00e1quina.</li> </ul> <p>La marca que aparece a la izquierda de cada fichero de backup sirve para especificar si queremos que dicho fichero forme parte de las operaciones de backup o restauraci\u00f3n que ejecutaremos a partir de entonces.</p> <p>Cuando existan ficheros de backup ya realizados (color blanco) y alguno de \u00e9stos se encuentre marcado (marca a la izqierda), veremos que aparece un nuevo control que nos permite realizar la restauraci\u00f3n, la tecla <code>X</code> (restore). La restauraci\u00f3n s\u00f3lo se realizar\u00e1 de los ficheros de los que exista backup. Por ejemplo en la siguiente configuracion, si ejecutamos una restauraci\u00f3n de los backups, s\u00f3lo se restaurar\u00e1 el primer fichero (<code>Stella (A2600)</code> que aparece en blanco) y no el del segundo (<code>FBA</code> que aparece en rojo) a pesar de que ambos est\u00e1n marcados para ser ejecutados:</p> <p></p> <p>La ejecuci\u00f3n del backup s\u00ed se realizar\u00e1 sobre los dos ficheros, y de hecho al finalizar, el segundo pasar\u00e1 a tomar color blanco al permitir ya la restauraci\u00f3n:</p> <p></p> <p>Podemos comprobar la generaci\u00f3n de ambos backups (en realidad la repetici\u00f3n del primero y la creaci\u00f3n del segundo) si exploramos los ficheros que existen en el directorio donde se dejan los backups (si no se modifica la configuraci\u00f3n ser\u00e1 <code>/media/sdcard/backups</code>):</p> <p></p> <p>Al ejecutar las operaciones de backup y restauraci\u00f3n se nos pedir\u00e1 confirmaci\u00f3n por medio de un peque\u00f1o popup:</p> <p></p> <p>Por \u00faltimo, una vez confirmada la operaci\u00f3n podremos ver el progreso del backup o la restauraci\u00f3n, indic\u00e1ndose los ficheros de backup realizados o restaurados. Al realizar el primer backup observaremos adem\u00e1s c\u00f3mo cambia la coloraci\u00f3n de rojo a blanco, indicando la aparici\u00f3n de los ficheros de backup que permiten la restauraci\u00f3n a partir de entonces (al principio del video se desactiva el backup de PCSX4All por tardar demasiado para el prop\u00f3sito del v\u00eddeo):</p> <p>La aplicaci\u00f3n puede ser cerrada en cualquier momento pulsando la tecla <code>START</code>.</p>"},{"location":"2020-08-15-rg350_scummvm_launchers.html","title":"RG350 ScummVM en lanzadores","text":"<p>Nota</p> <p>Este art\u00edculo ha sido posible gracias a la investigaci\u00f3n realizada sobre el tema por Jos\u00e9 Vicente Alberca y a los detalles y ficheros preparados que me ha entregado. Gracias.</p> <p>ScummVM es uno de esos sistemas de emulaci\u00f3n que en RG350, al igual que otros como OpenBOR, utiliza un interfaz propio para seleccionar y arrancar los juegos, lo que dificulta su integraci\u00f3n en lanzadores como SimpleMenu, EmulationStation o PyMenu. A pesar de ello, en las \u00faltimas versiones existe un mecanismo previsto para poder realizar la integraci\u00f3n con los selectores de ROMs de los lanzadores. Vamos a ver c\u00f3mo.</p> <p>Partimos de una instalaci\u00f3n como la vista en este art\u00edculo anterior.</p>"},{"location":"2020-08-15-rg350_scummvm_launchers.html#instalacion-de-opk-con-soporte-de-argumentos","title":"Instalaci\u00f3n de OPK con soporte de argumentos","text":"<p>Necesitamos una versi\u00f3n del emulador que admita o mejor dicho que lea argumentos o par\u00e1metros que se le pasen al ejecutable y que por medio de los mismos se le pueda indicar el juego a abrir. Esta es justo la mejora realizada en la versi\u00f3n de ScummVM que encontramos en este repositorio:</p> <p>https://github.com/goldmojo/scummvm-rg350/releases/tag/2.2gitRC2-params</p> <p>Bajamos pues el OPK (desde este enlace) y sustituimos el emulador de ScummVM que ten\u00edamos instalado antes. Como siempre, para instalar un nuevo OPK, lo que tenemos que hacer es copiarlo a uno de estos dos directorios:</p> <ul> <li>En tarjeta interna: <code>/media/data/apps</code></li> <li>En tarjeta externa: <code>/media/sdcard/apps</code></li> </ul>"},{"location":"2020-08-15-rg350_scummvm_launchers.html#creacion-de-targets","title":"Creaci\u00f3n de targets","text":"<p>ScummVM reconoce los juegos por unos IDs basados en una contracci\u00f3n del nombre de los juegos de forma parecida a como hace por ejemplo FBA. La lista de IDs puede consultarse en esta p\u00e1gina. El OPK instalado en el apartado anterior, externamente se comporta como la mayor\u00eda de los emuladores, es decir admite que le pasemos un fichero como argumento. Internamente (mediante un peque\u00f1o wrapper), disecciona la ruta completa del fichero anterior y entrega al ejecutable interno lo siguiente:</p> <ol> <li>Ruta del directorio con los ficheros del juego.</li> <li>Nombre del fichero sin extensi\u00f3n a modo de target.</li> </ol> <p>Vamos a verlo con un ejemplo. Cogemos como muestra el juego Day Of The Tentacle. Seg\u00fan la p\u00e1gina que lista los IDs, a este juego le corresponde el ID <code>tentacle</code>. En mi m\u00e1quina por ejemplo los ficheros del juego se encuentran en <code>/media/data/roms/SCUMMVM/Day Of The Tentacle</code>. En concreto esto es lo que all\u00ed hay:</p> <pre><code>RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # ls -l\ndrwxr-xr-x    2 root     root          4096 Feb  5  1970 MANIAC\n-rw-r--r--    1 root     root     268965339 Feb  5  1970 MONSTER.SOU\n-rw-r--r--    1 root     root          7932 Feb  5  1970 TENTACLE.000\n-rw-r--r--    1 root     root      11378198 Feb  5  1970 TENTACLE.001\n</code></pre> <p>Creamos pues el fichero que se convertir\u00e1 en el target. Del fichero s\u00f3lo nos interesa el nombre. Puede estar vac\u00edo. Como hemos dicho el nombre del fichero tiene que ser <code>tentacle</code> y la extensi\u00f3n cualquiera, aunque parece que existe una convenci\u00f3n para utilizar <code>svm</code>. As\u00ed pues creamos el fichero con un simple <code>touch</code> (esa es la forma r\u00e1pida de hacerlo por SSH, pero como siempre se puede hacer por otros medios como FTP, SCP o DinguxCmdr):</p> <pre><code>RG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # touch tentacle.svm\nRG350M:/media/data/roms/SCUMMVM/Day Of The Tentacle # ls -l\ndrwxr-xr-x    2 root     root          4096 Feb  5  1970 MANIAC\n-rw-r--r--    1 root     root     268965339 Feb  5  1970 MONSTER.SOU\n-rw-r--r--    1 root     root          7932 Feb  5  1970 TENTACLE.000\n-rw-r--r--    1 root     root      11378198 Feb  5  1970 TENTACLE.001\n-rw-r--r--    1 root     root             0 Aug 15 22:47 tentacle.svm\n</code></pre> <p>S\u00f3lo queda configurar el launcher que utilicemos para que filtre la extensi\u00f3n que hayamos elegido (<code>svm</code> en el ejemplo anterior) para que no nos permita seleccionar el resto de ficheros del juego que podr\u00edan no tener el nombre correspondiente al target.</p> <p></p> <p>A partir de ese momento, si vamos al directorio del juego, s\u00f3lo nos deber\u00eda aparecer el fichero correspondiente al target. Abri\u00e9ndolo arrancar\u00e1 el juego directamente sin mediar el interfaz cl\u00e1sico de ScummVM:</p>"},{"location":"2020-08-15-rg350_scummvm_launchers.html#integracion-en-simplemenu","title":"Integraci\u00f3n en SimpleMenu","text":"<p>Vamos a ver c\u00f3mo realizar\u00edamos la integraci\u00f3n en SimpleMenu.</p> <p>Empezamos editando el fichero de configuraci\u00f3n que contiene los sistemas instalados. En mi caso por ejemplo es un \u00fanico fichero en la ruta:</p> <pre><code>/media/data/local/home/.simplemenu/section_groups/sections.ini\n</code></pre> <p>All\u00ed creamos un bloque como el siguiente:</p> <pre><code>[SCUMMVM]\nexecs = /media/data/apps/scummvm-2.2-git-rg350-01132020-params.opk\nromDirs = /media/data/roms/SCUMMVM/\nromExts = .svm\naliasFile = /media/home/.simplemenu/alias.txt\n</code></pre> <p>No hay que olvidar a\u00f1adir el nuevo sistema al par\u00e1metro <code>consoleList</code> dentro del bloque <code>[CONSOLES]</code> que hay al principio del fichero.</p> <p>Naturalmente habr\u00e1 que adaptar en cada caso las rutas de OPK y ROMs. Como vemos, hemos incluido en la configuraci\u00f3n el fichero <code>alias.txt</code> para que los targets sean convertidos a los nombres largos de los juegos. Para que esto funcione hay que incorporar el listado de targets al fichero. Jos\u00e9 Javier ha extra\u00eddo todos los nombres posibles de la web de ScummVM por lo que s\u00f3lo tenemos que sustituir este fichero en el directorio de home de SimpleMenu, es decir: <code>/media/data/local/home/.simplemenu</code></p> <p>Por \u00faltimo hay que comprobar que el theme que estemos utilizando contenga la definici\u00f3n del sistema <code>SCUMMVM</code>. Afortunadamente el theme oficial <code>GBZ35Remix</code> ya lo incorpora. En caso de utilizar uno que no lo contenga habr\u00e1 que incorporar una entrada en el fichero de definici\u00f3n del theme (<code>theme.ini</code>) y los recursos necesarios.</p> <p>Ya s\u00f3lo queda abrir SimpleMenu y comprobar el resultado:</p>"},{"location":"2020-08-31-cancion_herb_alpert.html","title":"La canci\u00f3n que merece la pena escuchar","text":"<p>Mientras terminan las \u00faltimas horas de mi particular versi\u00f3n del encierro al que en mayor o menor grado hemos estado todos sometidos los \u00faltimos meses, voy a contar aqu\u00ed una de esas peque\u00f1as historias ocurridas durante el mismo. Soy consciente de que se aparta mucho de la linea habitual de posts que se encuentran en este sitio.</p> <p>Nota</p> <p>El t\u00edtulo del post \"La canci\u00f3n que merece la pena escuchar\" hace referencia a una secci\u00f3n que hab\u00eda al principio en Todopoderosos, uno de mis podcasts favoritos.</p>"},{"location":"2020-08-31-cancion_herb_alpert.html#tijuana-brass","title":"Tijuana Brass","text":"<p>La historia tiene sus ra\u00edces hace m\u00e1s de 40 a\u00f1os. Por aquella \u00e9poca casi todos los fines de semana mis padres nos llevaban a su pueblo natal, Tarazona. El viaje siempre iba acompa\u00f1ado de m\u00fasica porque era uno de los mejores remedios para evitar el mareo al que \u00e9ramos propensos una de mis dos hermanas y yo mismo. Una de las pocas cassettes que ten\u00edamos era de los Tijuana Brass. Mis hermanas y yo nos sab\u00edamos de memoria aquella cassette hasta el punto de replicar sus piezas en play back interpretando cada uno un instrumento (la marimba, las trompetas y trombones fundamentalmente). Todav\u00eda recuerdo bastante bien la mayor\u00eda de esos temas. As\u00ed sonaban:</p> <p>No s\u00e9 si por ser parte de mi ni\u00f1ez o por no haber vuelto casi a encontrar aquella m\u00fasica fuera del escenario de aquellos viajes, siempre la consider\u00e9 como m\u00fasica menor. Desconoc\u00eda lo equivocado que estaba.</p>"},{"location":"2020-08-31-cancion_herb_alpert.html#buscando-un-amigo-para-el-fin-del-mundo","title":"Buscando un amigo para el fin del mundo","text":"<p>El segundo punto de la conjunci\u00f3n de detalles que me condujo a la canci\u00f3n, es una de las muchas (much\u00edsimas) pel\u00edculas que he visto durante estos meses vividos casi exclusivamente en casa, Buscando un amigo para el fin del mundo. Realmente la hab\u00eda visto hace algo m\u00e1s de un a\u00f1o, y me gust\u00f3 bastante, porque me suele atraer el estilo de cine que tiene, original, de ritmo pausado y sobre todo con buena m\u00fasica. Es de esas pel\u00edculas que guard\u00e9 para ver en determinados momentos en que \"sienta bien\". Pero en ese momento desconoc\u00eda su conexi\u00f3n con los Tijuana.</p> <p>Tuvo su gracia ver esta pel\u00edcula en los momentos m\u00e1s duros del confinamiento (tarde para vosotros). Es quiz\u00e1 la pel\u00edcula m\u00e1s apocal\u00edptica que conozco. Ni siquiera da pie al concepto de post-apocalipsis, no digo m\u00e1s. Realmente hasta el propio t\u00edtulo deja clara la premisa, pero en cualquier caso s\u00f3lo es la excusa para poner en marcha la historia, no el fin (bueno s\u00ed, \ud83d\ude44). Pero que nadie se asuste, no es un drama sino m\u00e1s bien una pel\u00edcula rom\u00e1ntica. Muy rom\u00e1ntica.</p> <p>Como dec\u00eda antes la pel\u00edcula tiene muy buena m\u00fasica y ya desde un primer visionado me llamaron mucho la atenci\u00f3n tres piezas, siendo la que es motivo de este post la reservada para quiz\u00e1 el momento cumbre de la pel\u00edcula. Pero volver\u00e9 a ella, para desvelarla finalmente, tras el siguiente apartado.</p>"},{"location":"2020-08-31-cancion_herb_alpert.html#movie-ticket-radio","title":"Movie Ticket Radio","text":"<p>El \u00faltimo detalle que logr\u00f3 fijar mi atenci\u00f3n (y mucho) en el tema que os quer\u00eda presentar es esta radio online: http://www.movieticketradio.com/</p> <p>La descubr\u00ed hacia finales del a\u00f1o pasado y no he dejado de escucharla desde entonces, sobre todo cuando trabajo. Ha empeorado un poco hace unos tres meses cuando decidieron fusionar en uno los dos canales que ten\u00edan hasta entonces. Antes estaban los canales Classic y Pop, siendo el primero el que me ten\u00eda enganchado y que me ha hecho descubrir una gran cantidad de temas y de pel\u00edculas. Estoy particularmente agradecido a este sitio por haberme hecho conocer las siguientes pel\u00edculas (sobre todo la primera que se ha convertido en mi musical favorito):</p> <ul> <li>The Music Man</li> <li>Camelot</li> <li>White Christmas</li> <li>Animal Crackers</li> <li>The King and I</li> <li>Guys and Dolls</li> <li>Yankee Doodle Dandy</li> <li>South Pacific</li> </ul> <p>Por si os interesa el canal, escucharlo a trav\u00e9s del navegador es inc\u00f3modo y da problemas. Est\u00e1 integrado en varias plataformas y apps para m\u00f3vil como TuneIn o Simple Radio. En mi caso con el ordenador prefiero reproducirlo con VLC conectando este reproductor a esta URL: http://listen.djcmedia.com/movieticketclassichigh</p> <p>Varios de los temas de Buscando un amigo para el fin del mundo aparecen recurrentemente en el canal, lo que intensific\u00f3 mi atracci\u00f3n por el tema que nos ocupa, e hizo que investigara sobre su autor.</p>"},{"location":"2020-08-31-cancion_herb_alpert.html#herb-alpert","title":"Herb Alpert","text":"<p>Llegado este momento es cuando me doy cuenta de que el autor de la canci\u00f3n es el mismo que fund\u00f3 el grupo Tijuana Brass de mi infancia y que lejos de ser un m\u00fasico menor, ha sido uno de los m\u00e1s influyentes de su generaci\u00f3n. Otra de las sorpresas ha sido comprobar que el bueno de Herb todav\u00eda vive, que ha estado en activo todo este tiempo y que ha dado continuas muestras de evoluci\u00f3n y adaptaci\u00f3n a los tiempos. Aqu\u00ed podemos verlo tocando su inconfundible trompeta, en un video subido a su canal de YouTube hace tan s\u00f3lo 3 d\u00edas enviando un mensaje optimista:</p> <p>Algunos de sus logros musicales son:</p> <ul> <li>Es la \"A\" del importante sello discogr\u00e1fico A&amp;M Records.</li> <li>5 n\u00fameros uno y 28 \u00e1lbumes en las listas de Billboard.</li> <li>8 premios Grammy.</li> <li>14 discos de platino y 15 discos de oro.</li> <li>M\u00e1s de 72 millones de discos vendidos en el mundo.</li> </ul> <p>Una vez que le hab\u00eda \"puesto cara\" a Herb, en posteriores visionados de la pel\u00edcula me doy cuenta de que seguramente a su director o guionista, le gusta mucho este m\u00fasico, ya que aparte de la canci\u00f3n por la que escribo el post, la protagonista de Buscando un amigo para el fin del mundo aparece abrazada a un disco de Herb durante toda una importante escena (en realidad es a una colecci\u00f3n de discos al frente de la cual aparece el de Herb):</p> <p></p>"},{"location":"2020-08-31-cancion_herb_alpert.html#la-cancion","title":"La canci\u00f3n","text":"<p>Llegamos ya por fin a la canci\u00f3n. Con semejantes expectativas ya casi s\u00f3lo puede defraudar.</p> <p>Cada vez que suenan en Movie Ticket Radio los acordes de teclado electr\u00f3nico del principio se me ponen los pelos de punta. En la entrada de Wikipedia sobre Herb Alpert puede leerse lo siguiente sobre la canci\u00f3n:</p> <p>El \u00fanico sencillo de Alpert que fue n\u00famero uno durante este periodo (y el primer #1 corte de su sello A&amp;M) fue: \"Este Tipo Enamorado de Ti (This Guy's in Love with You)\", creada recientemente por Burt Bacharach y Hal David en m\u00fasica y letra, todav\u00eda no ten\u00eda int\u00e9rprete y se la dieron a Alpert que se lo dedic\u00f3 a su primera esposa en un especial de Televisi\u00f3n CBS en 1968 titulado Beat of the Brass ofreciendo un raro vocal. La secuencia se grab\u00f3 en la playa en Malibu. No se pensaba que la canci\u00f3n se volviese a emitir, pero despu\u00e9s del especial, los miles de llamadas telef\u00f3nicas a CBS preguntando por Herb convencieron al due\u00f1o del sello de Alpert para lanzarlo como single dos d\u00edas despu\u00e9s de que el show se emitiese. Las habilidades vocales de Alpert eran limitadas, pero esta canci\u00f3n era muy mel\u00f3dica y estaba hecha por un hacedor de \u00e9xitos como Bacharach. Herb la cant\u00f3 con gran sentimiento y el \u00e9xito fue de inmediato, como un acto de magia y ello jug\u00f3 a su favor. El sencillo apareci\u00f3 en mayo de 1968, lleg\u00f3 a la cima de las listas en cuatro semanas y estuvo en lo m\u00e1s alto entre los mejores hits del a\u00f1o; inicialmente menospreciado por los cr\u00edticos y los mel\u00f3manos como un tema para amas de casa, la expresiva grabaci\u00f3n de Alpert en \"This Guy's in Love with You\" se considera ahora como una de las baladas emblem\u00e1ticas del pop y todo un cl\u00e1sico.</p> <p>Existe un video digamos oficial de la \u00e9poca del tema, que seguramente corresponde con lo emitido durante el especial de CBS mencionado en Wikipedia, pero ha envejecido muy mal, no como la canci\u00f3n. Por eso pongo el siguiente en el que s\u00f3lo suena el tema.</p> <p>Sin m\u00e1s:</p> <p></p>"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html","title":"RG350 Interfaz xMAME SimpleMenu","text":"<p>xMAME tiene un frontend propio que intercala una pantalla de ajustes entre la selecci\u00f3n de la ROM y la ejecuci\u00f3n final de la misma. \u00c9sta:</p> <p></p> <p>Cuando se integra xMAME en SimpleMenu se pierde esta pantalla de ajustes y la ROM es ejecutada con las opciones predeterminadas. Para mejorar esta situaci\u00f3n se ha desarrollado una especie de clon de la pantalla de ajustes de xMAME que se puede integrar entre SimpleMenu y los binarios de xMAME que ejecutan al final la ROM.</p> <p>Vamos a ver aqu\u00ed c\u00f3mo instalar y utilizar este interfaz. Al final se describen tambi\u00e9n los aspectos t\u00e9cnicos de la soluci\u00f3n para los que est\u00e9n interesados. Funciona en los dos modelos de pantalla de la RG350, es decir que sirve tanto para el modelo original como los nuevos RG350P y RG350M.</p>"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#instalacion","title":"Instalaci\u00f3n","text":"<p>La instalaci\u00f3n se hace por medio de un OPK que sit\u00faa los ficheros necesarios dentro de la ruta donde se encuentra xMAME (en concreto en el subdirectorio <code>/media/data/local/share/xmame/sm_bridge</code>). Tambi\u00e9n hace las modificaciones autom\u00e1ticamente en los ficheros de configuraci\u00f3n de SimpleMenu. Naturalmente, antes tendremos que tener instalados xMAME y SimpleMenu.</p> <p>El OPK con el instalador se puede descargar desde el siguiente enlace: https://github.com/eduardofilo/RG350_xmame_sm_bridge/releases/download/1.2/xmame_sm_bridge_installer_1.2.opk</p> <p>Una vez instalado en la RG350 (como cualquier otro OPK; ver instrucciones aqu\u00ed en caso de dudas), lo deberemos encontrar en nuestro lanzador en la secci\u00f3n de aplicaciones. Por ejemplo:</p> <p> </p> <p>Una vez instalado lo abriremos y encontraremos un sencillo aviso para confirmar la instalaci\u00f3n seleccionando el bot\u00f3n <code>&lt;Yes&gt;</code> y pulsando <code>Start</code>:</p> <p></p> <p>Con esto el peque\u00f1o interfaz de ajustes habr\u00e1 quedado instalado.</p>"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#utilizacion","title":"Utilizaci\u00f3n","text":"<p>A partir de entonces, al ejecutar una ROM con el sistema xMAME integrado en SimpleMenu, nos aparecer\u00e1 un peque\u00f1o interfaz muy parecido al que muestra el interfaz propio de xMAME justo despu\u00e9s de seleccionar la ROM.</p> <p>Se han replicado los controles de la pantalla de ajustes de xMAME que, al igual que en ella, se indican en la leyenda inferior. B\u00e1sicamente son estos:</p> <ul> <li>Arriba/Abajo: Para seleccionar el ajuste que se quiere modificar.</li> <li>Izquierda/Derecha: Para cambiar el valor del ajuste seleccionado.</li> <li>A: Confirmar el arranque del juego.</li> <li>B: Cancelar el arranque del juego, es decir volver a SimpleMenu.</li> </ul> <p>Los ajustes, una vez hechos, en el momento de arrancar el juego (no as\u00ed si volvemos atr\u00e1s con <code>B</code>), se guardan en el mismo fichero que utiliza xMAME. Por tanto los ajustes que hagamos persistir\u00e1n entre distintas sesiones. Adem\u00e1s ser\u00e1n compatibles con los ajustes que hayamos hecho en xMAME.</p> <p>Como se ha mencionado, se muestran los mismos ajustes que en xMAME y el manejo de la pantalla es id\u00e9ntico, pero hay dos excepciones:</p> <ul> <li>En el ajuste Video Rotation hay un valor posible adicional. En xMAME los valores posibles eran: <code>Auto</code>, <code>Landscape</code> y <code>Portrait</code>. En este nuevo interfaz el valor <code>Portrait</code> se ha desdoblado en dos: <code>Portrait (L)</code> y <code>Portrait (R)</code>. Esto es as\u00ed porque internamente xMAME soporta dos opciones de pantalla horizontal (girada hacia la izquierda y hacia la derecha). Por alg\u00fan motivo en el interfaz original de xMAME s\u00f3lo se ofrece uno de los dos. Aqu\u00ed pues se muestran los dos. Hay un problema sin embargo y es que el fichero de configuraci\u00f3n donde se almacenan los ajustes para cada juego no soporta este modo adicional <code>Portrait (R)</code>, por lo que si se utiliza, al volver a intentar lanzar el juego nos encontraremos el valor m\u00e1s cercano al seleccionado <code>Portrait (L)</code>.</li> <li>El ajuste Save state no funciona ni siquiera en xMAME (se cierra el emulador al cambiar el valor predeterminado <code>None</code>), por lo que en esta reimplementaci\u00f3n de la pantalla de ajustes se ha optado por desactivarlo. Por ese motivo aparece en gris.</li> </ul>"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#aspectos-tecnicos","title":"Aspectos t\u00e9cnicos","text":"<p>Se mencionan aqu\u00ed los detalles de funcionamiento interno del interfaz de ajustes para quien tenga inter\u00e9s. Si s\u00f3lo te interesa instalarlo y utilizarlo, puedes dejar de leer aqu\u00ed.</p>"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#analisis-previo","title":"An\u00e1lisis previo","text":"<p>Este interfaz de ajustes para xMAME ha sido posible por la peculiar arquitectura que tiene este emulador. No es como los emuladores habituales en que todo est\u00e1 implementado en un \u00fanico binario o ejecutable (normalmente empaquetado en un OPK, aunque esa no es la clave de la diferencia). xMAME, haciendo honor a su nombre, sigue un poco m\u00e1s la filosof\u00eda UNIX en la que las distintas partes del sistema se encuentran en distintos binarios que se invocan unos a otros lanzando procesos con los par\u00e1metros necesarios. En concreto, xMAME tiene los siguientes binarios principales:</p> <ul> <li><code>/media/data/local/share/xmame/xmame.dge</code></li> <li><code>/media/data/local/share/xmame/xmame52/xmame.SDL.52</code></li> <li><code>/media/data/local/share/xmame/xmame69/xmame.SDL.69</code></li> <li><code>/media/data/local/share/xmame/xmame84/xmame.SDL.84</code></li> </ul> <p>El primero es el interfaz normal (el de la pantalla de fondo verde) que es el que muestra la lista de ROMs de los distintos romsets y la pantalla de ajustes una vez que seleccionamos una ROM:</p> <p> </p> <p>Tras la segunda pantalla se ejecuta el proceso correspondiente al romset elegido al principio, que se corresponde con uno de los tres procesos restantes de la lista anterior. Por ejemplo, tal y como se ha ajustado el juego que se selecciona en los dos pantallazos anteriores, el proceso que se ejecuta finalmente es:</p> <pre><code>xmame.SDL.84 bombjack -ipu_scaler 2 -nodirty -triplebuf -rol\n</code></pre> <p>As\u00ed pues tenemos todo el poder en nuestras manos para ejecutar una ROM con los ajustes que deseemos siempre que se conozca la correspondencia entre los distintos ajustes con los argumentos a pasar al proceso a la hora de ejecutarlo. Esto fue lo primero que fue necesario hacer. El resultado est\u00e1 codificado en la estructura de datos que se ve a partir de la linea 36 de este fichero fuente: https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/settings.py</p> <p>Como ejemplo vamos a ver c\u00f3mo se interpreta la parte correspondiente al ajuste <code>Video Rotation</code>:</p> <pre><code>{\n    \"file_pos\": 0,\n    \"desc\": \"Video Rotation\",\n    \"enabled\": True,\n    \"values\": [0, 1, 2, 3],\n    \"descs\": [\"Auto\", \"Landscape\", \"Portrait (L)\", \"Portrait (R)\"],\n    \"args\": [\"-autoror\", \"\", \"-rol\", \"-ror\"],\n    \"value\": 0\n},\n</code></pre> <p>Los valores de las claves <code>values</code>, <code>descs</code> y <code>args</code> se corresponden entre s\u00ed seg\u00fan el orden en que aparecen. Es decir:</p> Descripci\u00f3n Auto Landscape Portrait (L) Portrait (R) Valor 0 1 2 3 Argumento -autoror -rol -ror <p>Valor (o <code>values</code> en la codificaci\u00f3n JSON) es el dato que luego se almacena en el peque\u00f1o fichero de configuraci\u00f3n que deja xMAME en los siguientes directorios en funci\u00f3n del romset:</p> <ul> <li><code>/media/data/local/share/xmame/xmame52/frontend</code></li> <li><code>/media/data/local/share/xmame/xmame69/frontend</code></li> <li><code>/media/data/local/share/xmame/xmame84/frontend</code></li> </ul> <p>Por ejemplo el fichero que aparece cuando configuramos el juego del ejemplo del romset 84 como se ve\u00eda en los pantallazos anteriores es <code>/media/data/local/share/xmame/xmame84/frontend/bombjack.cfg</code> y tiene el siguiente contenido:</p> <pre><code>2,0,0,0,0,0,0,0,0,0,0,0,0,1,0\n</code></pre> <p>El par\u00e1metro <code>file_pos</code> del JSON nos indica en qu\u00e9 posici\u00f3n se almacena el ajuste. Por ejemplo el ajuste <code>Video Rotation</code> que estamos utilizando de ejemplo est\u00e1 en la posici\u00f3n <code>0</code> (el primero). Como vemos en el fichero tiene el valor <code>2</code> que seg\u00fan la tabla anterior corresponde a <code>Portrait (L)</code>.</p> <p>Finalmente el argumento ser\u00e1 el que se a\u00f1ada a la hora de ejecutar el emulador con la ROM. En el caso del ejemplo ser\u00e1 el argumento <code>-rol</code> que ve\u00edamos en el proceso que se ejecuta al final y que repetimos de nuevo:</p> <pre><code>xmame.SDL.84 bombjack -ipu_scaler 2 -nodirty -triplebuf -rol\n</code></pre> <p>La forma de averiguar todos los valores posibles fue ajust\u00e1ndolos uno a uno cambiando uno cada vez y analizando el proceso ejecutado al final con el comando <code>ps</code> de Linux.</p>"},{"location":"2020-09-27-rg350_xmame_sm_bridge.html#programacion","title":"Programaci\u00f3n","text":"<p>Una vez reunida toda la informaci\u00f3n lleg\u00f3 el momento de programar. La idea era reproducir de la forma m\u00e1s fiel posible el interfaz de ajustes de la ROM que tiene xMAME. Para la programaci\u00f3n se ha elegido el entorno Python m\u00e1s la librer\u00eda <code>pygame</code> que ofrece primitivas para dibujar en pantalla y controlar eventos (b\u00e1sicamente es una envoltura Python a la librer\u00eda SDL). Ambos se encuentran preinstalados en OpenDingux.</p> <p>El c\u00f3digo puede encontrarse en este repositorio: https://github.com/eduardofilo/RG350_xmame_sm_bridge</p> <p>El programa realizado en Python/pygame tan solo muestra las opciones y permite cambiarlas. Al seleccionar la ROM en SimpleMenu (que le llega como argumento) hace dos cosas:</p> <ol> <li>Persiste los ajustes en el fichero de configuraci\u00f3n de xMAME correspondiente (subdirectorio <code>frontend</code> del directorio de cada romset).</li> <li>Genera un fichero <code>/tmp/run</code> que contiene el proceso a ejecutar, es decir el binario del emulador del romset elegido junto a los argumentos correspondientes a los ajustes hechos.</li> </ol> <p>Todo esto est\u00e1 envuelto con tres peque\u00f1os shell scripts, uno por cada romset, que son los que se configuran en SimpleMenu en el fichero donde tengamos definido el sistema xMAME. Los tres scripts son los siguientes:</p> <ul> <li>https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.52</li> <li>https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.69</li> <li>https://github.com/eduardofilo/RG350_xmame_sm_bridge/blob/master/romset.84</li> </ul> <p>Todos los ficheros necesarios deben instalarse en la ruta siguiente en el sistema de la consola:</p> <pre><code>/media/data/local/share/xmame/sm_bridge\n</code></pre> <p>As\u00ed pues la configuraci\u00f3n de SimpleMenu para integrar este sistema deber\u00eda invocar los scripts anteriores instalados en esta ruta, por ejemplo:</p> <pre><code>[MAME]\nexecs = /media/data/local/share/xmame/sm_bridge/romset.84,/media/data/local/share/xmame/sm_bridge/romset.69,/media/data/local/share/xmame/sm_bridge/romset.52\nromDirs = /media/data/roms/ARCADE/\nromExts = .zip,.ZIP\naliasFile = /media/home/.simplemenu/alias.txt\n</code></pre> <p>El instalador comentado al principio de este art\u00edculo se encarga tanto de copiar los ficheros necesarios a la ruta indicada antes, como de ajustar los ficheros de definici\u00f3n de sistemas de SimpleMenu para que se llame a los scripts que lanzan el interfaz de ajustes.</p>"},{"location":"2020-12-13-rg351_wifi_mod.html","title":"RG351P Wifi mod","text":"<p>Las primeras unidades vendidas de la consola RG351P tra\u00edan instalado en el interior un m\u00f3dulo Wifi. Concretamente \u00e9ste:</p> <p></p> <p>En una revisi\u00f3n posterior fue retirado por las interferencias en forma de ruido que provocaba en los altavoces. La PCB de la consola no fue modificada, por lo que sigue vendi\u00e9ndose con el espacio y las conexiones necesarias para montarlo:</p> <p></p> <p>El m\u00f3dulo original ya no se encuentra a la venta, pero de todas formas pens\u00e9 en instalar mejor uno con antena integrada por su mayor sencillez de instalaci\u00f3n y para evitar colocar m\u00e1s cables en el interior de la consola que pudieran absorber o provocar m\u00e1s interferencias. Buscando por el c\u00f3digo del chipset <code>MT7601UN</code> se encuentran numerosos modelos compatibles (conviene utilizar el mismo chipset para asegurar la compatibilidad de los firmwares de la consola). El elegido en mi caso fue el siguiente:</p> <p></p> <p>Que se puede encontrar en el siguiente enlace: https://es.aliexpress.com/item/32967895240.html</p> <p>La raz\u00f3n principal para hacer esta modificaci\u00f3n es que necesito con mucha frecuencia tener acceso por red a la consola para utilizar la terminal por SSH. El dongle externo que suelen regalar los vendedores de esta consola, sobresale demasiado y tarde o temprano hubiera podido estropear el puerto al hacer palanca el conjunto dongle+adaptador, adem\u00e1s de tenerlo que poner y quitar continuamente. Por \u00faltimo, dado que esta consola soporta Linux y Android, tengo la idea de hacer una imagen para ella que consista en un sistema completo de escritorio que poder utilizar por SSH/VNC a modo de ordenador port\u00e1til que podr\u00eda llevar siempre encima. En esos casos la conectividad es imprescindible.</p> <p>A continuaci\u00f3n se describe el proceso de instalaci\u00f3n. En todo momento cuando hable de la orientaci\u00f3n de la consola me referir\u00e9 a la vista desde la parte inferior cuando est\u00e1 abierta, es decir \u00e9sta:</p> <p></p> <ol> <li> <p>Lo primero fue encontrar una buena ubicaci\u00f3n. Por el temor a las interferencias pretend\u00eda alejar todo lo posible la antena de los cables de los altavoces y del circuito de audio que sospecho se encuentra en el lado donde est\u00e1 el potenci\u00f3metro de volumen (mismo lado donde se montaba el m\u00f3dulo original). Teniendo en cuenta lo anterior y la situaci\u00f3n de la bater\u00eda as\u00ed como lo despejado de componentes de la PCB de la consola en esa parte, me pareci\u00f3 que el mejor sitio era colocar el m\u00f3dulo en el lado derecho en posici\u00f3n vertical con la antena apuntando hacia arriba y hacia afuera de la consola (hacia la tapa):</p> <p></p> </li> <li> <p>Para alzar un poco el m\u00f3dulo y aislarlo de los componentes de la PCB utilic\u00e9 tres alturas de cinta de doble cara gruesa (de esa que tiene una tira de espuma de alrededor de 1mm entre las caras adhesivas):</p> <p></p> </li> <li> <p>En la primera de las tres tiras que utilic\u00e9 hice un corte diagonal para salvar la mayor altura del componente (un transistor creo) que hab\u00eda en esa zona:</p> <p></p> </li> <li> <p>En realidad esto no es necesario ya que la anchura del m\u00f3dulo queda justo a ras de ese componente, pero era m\u00e1s dif\u00edcil recortar la cinta de doble cara a lo largo que hacer ese corte diagonal. La longitud de las tiras de doble cara ser\u00e1n las adecuadas para dejar la zona de las conexiones al aire. Aqu\u00ed puede verse la disposici\u00f3n final de las tres tiras de cinta y la situaci\u00f3n del m\u00f3dulo:</p> <p></p> </li> <li> <p>Lo siguiente era fabricar un cable para conectar el m\u00f3dulo. Digo fabricar porque ten\u00eda claro que no quer\u00eda utilizar los t\u00edpicos cables de parcheo de circuitos por el temor a las interferencias. Localic\u00e9 un viejo cable miniUSB-USB de calidad de los muchos que es habitual tener de cuando era un cable que se utilizaba m\u00e1s. Cort\u00e9 una porci\u00f3n de longitud adecuada para pasarlo por la parte inferior de la consola. Como tiene un grosor considerable por estar apantallado (unos 4mm de di\u00e1metro exterior), hab\u00eda que evitar el plano de la bater\u00eda y por esa zona exist\u00eda un canal de espacio vac\u00edo. Tras retirar la pantalla hubo que proteger la salida de los cables con un par de trozos de termoretr\u00e1ctil para aislar los extremos de los hilos de la pantalla que era muy dif\u00edcil recortar completamente:</p> <p></p> </li> <li> <p>Los cables negro y rojo eran muy gruesos (por ser un cable de calidad) por lo que no pasaban por los peque\u00f1os agujeros de conexi\u00f3n del m\u00f3dulo. As\u00ed pues los de datos (blanco y verde) los sold\u00e9 atravesando y los de alimentaci\u00f3n (negro y rojo) superficialmente:</p> <p></p> </li> <li> <p>Una vez soldado el cableado al m\u00f3dulo s\u00f3lo quedaba pegarlo sobre el coj\u00edn de tres tiras de cinta de doble cara:</p> <p></p> </li> <li> <p>Lo \u00faltimo fue encajar el cable y soldar sobre los pads del hueco previsto en la PCB de la consola para el m\u00f3dulo original. Aqu\u00ed hay que estar atento a la correspondencia con los pads del m\u00f3dulo:</p> <p></p> </li> <li> <p>El codo inferior derecho se puede encajar muy bien aprovechando las aristas de la PCB del stick que hay en ese lado y el conector del altavoz:</p> <p></p> </li> <li> <p>El m\u00f3dulo ya est\u00e1 instalado. Una comprobaci\u00f3n final antes de cerrar la tapa muestra que funciona:</p> <p></p> </li> </ol>"},{"location":"2021-01-16-rg350_ra_installer.html","title":"RG350 Instalador RA","text":"<p>A finales de diciembre empezaron a aparecer distribuciones oficiales de RetroArch para RG350 y RG280. De momento en versi\u00f3n beta en forma de nightly builds que pueden obtenerse de este sitio para stock/ROGUE o este otro para ODBeta.</p> <p>Los zips que distribuyen contienen un \u00fanico OPK, un binario (opcional) y un directorio (con toda la configuraci\u00f3n y los cores) destinado a copiarse al home de la consola:</p> <p></p> <p>Una vez que todo est\u00e1 instalado en su sitio, la \u00fanica manera de ejecutar las ROMs con los cores que incluye la distribuci\u00f3n es por medio del \u00fanico OPK que lanza RetroArch a modo frontend (el interfaz UX que suele decirse en otros emuladores):</p> <p></p> <p>Para lograr una integraci\u00f3n m\u00e1s completa de RetroArch, que respete la experiencia normal de los frontends habituales en RG350/RG280 (GMenu2X, SimpleMenu, PyMenu, EmulationStation, etc.) se pueden crear unos OPKs tipo wrapper que permitan seleccionar las ROMs y lanzar el core de RetroArch correspondiente, ya que el binario opcional admite los mismos argumentos que RetroArch en otras plataformas.</p>"},{"location":"2021-01-16-rg350_ra_installer.html#wrappers-opk","title":"Wrappers OPK","text":"<p>Para lograrlo, primero hubo que averiguar la forma de parametrizar el core y la ROM. Cargar un core y una ROM desde el propio RetroArch no sirve porque no exterioriza estos datos en forma de argumentos sobre el ejecutable. Lo que se hizo fue suponer que servir\u00eda el mismo formato de argumentos que utiliza el binario <code>retroarch_rg350</code> (dentro del directorio <code>bin</code>; en la distribuci\u00f3n correspondiente a ODBeta, el binario es <code>retroarch_rg350_odbeta</code>) en otros sistemas como EmuELEC en RG351P. All\u00ed el frontend habitual EmulationStation s\u00ed que parametriza el core y la ROM a ejecutar por medio de argumentos en la llamada. Por ejemplo ejecutando Tetris de Game Boy con el core gambatte en EmuELEC sobre RG3551P se encuentra que el proceso se invoca de esta forma:</p> <pre><code>/usr/bin/retroarch -v -L /tmp/cores/gambatte_libretro.so --config /storage/.config/retroarch/retroarch.cfg /storage/roms/gb/Tetris (World) (Rev A).7z\n</code></pre> <p>Por tanto la idea es por un lado instalar el binario opcional <code>retroarch_rg350</code> en una ruta accesible (se elige <code>/media/data/local/bin</code>) y luego construir distintos OPKs que invoque un script al que se le pase como argumento la ROM a ejecutar. Dentro del script podemos montar la llamada completa a <code>retroarch_rg30</code>. Por ejemplo para el sistema Game Boy el script podr\u00eda ser el siguiente:</p> <pre><code>#!/bin/sh\n/media/data/local/bin/retroarch_rg350 -v -L /media/data/local/home/.retroarch/cores/gambatte_libretro.so --config /media/data/local/home/.retroarch/retroarch.cfg \"$1\"\n</code></pre> <p>Introducimos el script anterior junto con un icono adecuado al sistema que va a lanzar y un <code>.desktop</code> que invoque el script pasando como argumento la ROM que vamos a lanzar, por ejemplo:</p> <pre><code>[Desktop Entry]\nName=Nintendo GB (RA)\nComment=Nintendo GB in RetroArch\nExec=exec.sh %f\nTerminal=false\nType=Application\nStartupNotify=true\nIcon=icon\nCategories=retroarch;\nX-OD-NeedsDownscaling=true\n</code></pre> <p>Los cores que ofrece la \u00faltima versi\u00f3n de RetroArch publicada en el momento de actualizar este art\u00edculo (2021-07-04) son los siguientes:</p> Core Sistema Extensiones soportadas Observaciones dosbox_pure_libretro.so DOSBox zip, dosz, exe, com, bat, iso, cue, ins, img, ima, vhd, m3u, m3u8 fbalpha2012_cps1_libretro.so CPS1 zip fbalpha2012_cps2_libretro.so CPS2 zip fbalpha2012_neogeo_libretro.so Neo Geo zip fceumm_libretro.so Nintendo NES fds, nes, unif, unf Disk System necesita BIOS: <code>disksys.rom</code> (md5: <code>ca30b50f880eb660a320674ed365ef7a</code>) gambatte_libretro.so GB/GBC gb, gbc, dmg BIOS opcional: <code>gb_bios.bin</code> (md5: <code>32fbbd84168d3482956eb3c5051637f5</code>), <code>gbc_bios.bin</code> (md5: <code>dbfce9db9deaa2567f6a84fde55f9680</code>) genesis_plus_gx_libretro.so MD, MS, GG, SEGA CD mdx, md, smd, gen, bin, cue, iso, sms, bms, gg, sg, 68k, chd, m3u SEGA CD necesita BIOS: <code>bios_CD_E.bin</code>, <code>bios_CD_U.bin</code>, <code>bios_CD_J.bin</code> genesis_plus_gx_wide_libretro.so MD, MS, GG, SEGA CD mdx, md, smd, gen, bin, cue, iso, sms, bms, gg, sg, 68k, chd, m3u SEGA CD necesita BIOS: <code>bios_CD_E.bin</code>, <code>bios_CD_U.bin</code>, <code>bios_CD_J.bin</code> gpsp_libretro.so GBA gba, bin BIOS opcional: <code>gba_bios.bin</code> (md5: <code>a860e8c0b6d573d191e4ec7db1b1e4f6</code>) handy_libretro.so LYNX lnx, o Necesita BIOS: <code>lynxboot.img</code> (md5: <code>fcd403db69f54290b51035d82f835e7b</code>) mame2003_libretro.so MAME2003 zip mame2003_plus_libretro.so MAME2003 zip mednafen_pce_fast_libretro.so PCE, PCE CD pce, cue, ccd, chd, toc, m3u PCE CD necesita BIOS: <code>syscard3.pce</code> (md5: <code>38179df8f4ac870017db21ebcbf53114</code>) mednafen_wswan_libretro.so WS ws, wsc, pc2 mgba_libretro.so GBA gb, gbc, gba BIOS opcional: <code>gba_bios.bin</code> (md5: <code>a860e8c0b6d573d191e4ec7db1b1e4f6</code>) mrboom_libretro.so MrBoom o2em_libretro.so Magnavox Odyssey2, Phillips Videopac+ bin Necesita BIOS: <code>o2rom.bin</code> (md5: <code>562d5ebf9e030a40d6fabfc2f33139fd</code>) picodrive_libretro.so MD, MS, SEGA CD, SEGA 32X bin, gen, smd, md, 32x, chd, cue, iso, sms, 68k, m3u SEGA CD necesita BIOS: <code>bios_CD_U.bin</code> (md5: <code>2efd74e3232ff260e371b99f84024f7f</code>), <code>bios_CD_E.bin</code> (md5: <code>e66fa1dc5820d254611fdcdba0662372</code>), <code>bios_CD_J.bin</code> (md5: <code>278a9397d192149e84e820ac621a8edd</code>) pokemini_libretro.so POKEMINI min Necesita BIOS: <code>bios.min</code> (md5: <code>1e4fb124a3a886865acb574f388c803d</code>) potator_libretro.so Watara Supervision bin, sv prboom_libretro.so DOOM wad, iwad, pwad Necesita ficheros de juego prosystem_libretro.so Atari 7800 a78, bin BIOS opcional: <code>7800 BIOS (U).rom</code> (md5: <code>0763f1ffb006ddbe32e52d497ee848ae</code>) quicknes_libretro.so NES nes race_libretro.so NGP ngp, ngc, ngpc, npc scummvm_libretro.so ScummVM snes9x2005_libretro.so SNES smc, fig, sfc, gd3, gd7, dx2, bsx, swc snes9x2005_plus_libretro.so SNES smc, fig, sfc, gd3, gd7, dx2, bsx, swc stella2014_libretro.so Atari 2600 a26, bin tic80_libretro.so TIC-80 tic tyrquake_libretro.so QUAKE pak Necesita ficheros de juego vice_x64_libretro.so C64 d64, d71, d80, d81, d82, g64, g41, x64, t64, tap, prg, p00, crt, bin, zip, gz, d6z, d7z, d8z, g6z, g4z, x6z, cmd, m3u, vfl, vsf, nib, nbz, d2m, d4m <p>Adicionalmente, se ha incluido la compilaci\u00f3n de cores no oficiales hecha por Poligraf (ADVERTENCIA: esta compilaci\u00f3n es un experimento de su autor; algunos cores como <code>hatari</code> o <code>puae</code> no han sido testeados; el feedback es bienvenido). Esto implica que se han a\u00f1adido los siguientes cores a la lista anterior:</p> Core Sistema Extensiones soportadas Observaciones 2048_libretro.so 2048 81_libretro.so Sinclair ZX81 p, tzx, t81 atari800_libretro.so Atari 5200 xfd,atr,cdm,cas,bin,a52,zip,atx,car,com,xex Necesita BIOS para emular Atari5200: <code>5200.rom</code> (md5: <code>281f20ea4320404ec820fb7ec0693b38</code>) bk_libretro.so Elektronika - BK-0010/BK-0011 bin Needs BIOS (model <code>BK-0010</code>): <code>bk/BASIC10.ROM</code> (md5: <code>3fa774326d75410a065659aea80252f0</code>), <code>bk/FOCAL10.ROM</code> (md5: <code>5737f972e8638831ab71e9139abae052</code>), <code>bk/MONIT10.ROM</code> (md5: <code>95f8c41c6abf7640e35a6a03cecebd01</code>). Unsupported video mode en stock/ROGUE. bluemsx_libretro.so MSX, MSX2 rom,ri,mx1,mx2,col,dsk,cas,sg,sc,m3u Necesita BIOS en directorio <code>.retroarch/system/Machines</code> cannonball_libretro.so SEGA Outrun game, 88 Necesita ficheros de juego y un fichero dummy con la extensi\u00f3n <code>.game</code> cap32_libretro.so Amstrad CPC dsk, sna, zip, tap, cdt, voc, cpr, m3u crocods_libretro.so Amstrad CPC dsk,sna,kcr dinothawr_libretro.so Dinothawr game Necesita ficheros de juego fmsx_libretro.so MSX, MSX2 rom,mx1,mx2,dsk,cas Necesita BIOS: <code>MSX.ROM</code> (md5: <code>364a1a579fe5cb8dba54519bcfcdac0d</code>), <code>MSX2.ROM</code> (md5: <code>ec3a01c91f24fbddcbcab0ad301bc9ef</code>), <code>MSX2EXT.ROM</code> (md5: <code>2183c2aff17cf4297bdb496de78c2e8a</code>), <code>MSX2P.ROM</code> (md5: <code>847cc025ffae665487940ff2639540e5</code>), <code>MSX2PEXT.ROM</code> (md5: <code>7c8243c71d8f143b2531f01afa6a05dc</code>). Unsupported video mode en RG280/ODBeta. freechaf_libretro.so Fairchild ChannelF bin, chf Necesita BIOS: <code>sl31253.bin</code> (md5: <code>ac9804d4c0e9d07e33472e3726ed15c3</code>), <code>sl31254.bin</code> (md5: <code>da98f4bb3242ab80d76629021bb27585</code>), <code>sl90025.bin</code> (md5: <code>95d339631d867c8f1d15a5f2ec26069d</code>) frodo_libretro.so Commodore 64 d64,t64,x64,p00,lnx,zip fuse_libretro.so Sinclair ZX Spectrum tzx, tap, z80, rzx, scl, trd, dsk gme_libretro.so Game Music Emu ay, gbs, gym, hes, kss, nsf, nsfe, sap, spc, vgm, vgz, zip gw_libretro.so Nintendo Game&amp;Watch mgw Unsupported video mode en algunos juegos sobre stock/ROGUE, pero pulsando algunas teclas a veces funcionan hatari_libretro.so Atari ST st, msa, zip, stx, dim, ipf, m3u Necesita BIOS: <code>tos.img</code> (md5: <code>c1c57ce48e8ee4135885cee9e63a68a2</code>). Configuraci\u00f3n complicada a causa del unsupported video mode. Conseguido cierto \u00e9xito con ODBeta, pero no con stock/ROGUE. lowresnx_libretro.so LowRes NX nx mednafen_vb_libretro.so Nintendo Virtual Boy vb, vboy, bin Rendimiento pobre mu_libretro.so Palm prc,pqa,img Necesita BIOS: <code>palmos41-en-m515.rom</code> (md5: <code>83cb1d1c76e568b916dc2e7c0bf669f6</code>). Necesita un stick para manejar el stylus, por lo que no funciona sobre RG280V. nekop2_libretro.so NEC PC-98 d98,zip,98d,fdi,fdd,2hd,tfd,d88,88d,hdm,xdf,dup,cmd,hdi,thd,nhd,hdd No he conseguido hacerlo funcionar. Puede que necesite algunas BIOS. nxengine_libretro.so Cave Story exe Necesita ficheros de juego pcsx_rearmed_libretro.so PlayStation bin,cue,img,mdf,pbp,toc,cbn,m3u,ccd,chd Rendimiento pobre pocketcdg_libretro.so PocketCDG cdg puae_libretro.so Commodore Amiga adf, adz, dms, fdi, ipf, hdf, hdz, lha, slave, info, cue, ccd, nrg, mds, iso, chd, uae, m3u, zip, 7z Necesita BIOS: <code>kick34005.A500</code> (md5: <code>82a21c1890cae844b3df741f2762d48d</code>) quasi88_libretro.so NEC PC-88 d88,u88,m3u Necesita BIOS: <code>quasi88/n88.rom</code>, <code>quasi88/n88_0.rom</code> reminiscence_libretro.so Flashback map, aba, seq, lev Necesita ficheros de juego. No he conseguido hacerlo funcionar. stonesoup_libretro.so Dungeon Crawl Stone Soup crawlrc Necesita ficheros de juego and an empty file <code>game.crawlrc</code> (instructions here). Unsupported video mode sobre RG280/stock/ROGUE, reinicios sobre ODBeta. theodore_libretro.so Thomson - MO/TO fd, sap, k7, m7, m5, rom Configuraci\u00f3n complicada debido a unsupported video mode. Conseguido cierto \u00e9xito con el modelo MO5 sobre ODBeta, pero no sobre stock/ROGUE. uzem_libretro.so Uzebox uze Rendimiento pobre vecx_libretro.so Vectrex bin,vec x1_libretro.so Sharp X1 dx1,zip,2d,2hd,tfd,d88,88d,hdm,xdf,dup,tap,cmd Necesita BIOS: <code>xmil/IPLROM.X1</code> (md5: <code>eeeea1cd29c6e0e8b094790ae969bfa7</code>), <code>xmil/IPLROM.X1T</code> (md5: <code>851e4a5936f17d13f8c39a980cf00d77</code>) <p>Por lo tanto habr\u00e1 que hacer al menos un OPK para cada uno de ellos. Decimos al menos porque se puede plantear la opci\u00f3n de hacer un OPK por cada combinaci\u00f3n \"core/sistema a emular\".</p>"},{"location":"2021-01-16-rg350_ra_installer.html#instalador","title":"Instalador","text":"<p>Como son varias las piezas necesarias para que funcione el conjunto, se ha creado un instalador para instalar de una sola vez todo lo necesario. En concreto el instalador integra:</p> <ul> <li>37+31 (oficial+no oficial) OPKs para lanzar de manera independiente desde distintos frontends (GMenu2X, SimpleMenu, PyMenu, EmulationStation, etc) los distintos cores seleccionando previamente la ROM.</li> <li>Binario <code>retroarch_rg350</code> (o <code>retroarch_rg350_odbeta</code> para ODBeta) en localizaci\u00f3n com\u00fan (<code>/media/data/local/bin</code>) para no tener que repetirlo dentro de los OPKs anteriores.</li> <li>Configuraciones de todos los cores diferenciados por pantalla, es decir se instalan unas configuraciones adecuadas para 320x240 o para 640x480 en funci\u00f3n de la pantalla detectada. Las configuraciones se han adoptado de las recomendaciones de Retro Game Corps en esta gu\u00eda.</li> <li>Filtros de GMenu2X por extensi\u00f3n para cada sistema.</li> <li>Secci\u00f3n nueva con el icono de RetroArch en todos los skins instalados en GMenu2X donde aparecen todos los lanzadores de los OPKs.</li> </ul> <p>Cuando se lanza, pregunta por dos opciones que est\u00e1n desactivadas por defecto:</p> <p></p> <ul> <li>Install config: Para instalar las configuraciones comentadas en el tercer punto de la lista anterior. Se recomienda instalar las configuraciones la primera vez y no instalarlas en reinstalaciones posteriores para evitar la p\u00e9rdida de los ajustes personales hechos sobre la configuraci\u00f3n b\u00e1sica.</li> <li>Install unofficial cores: Para instalar los 31 nuevos pero no oficiales cores compilados por Poligraf.</li> </ul> <p>El OPK con el instalador puede obtenerse en las releases de este repositorio.</p>"},{"location":"2021-01-16-rg350_ra_installer.html#hotkeys","title":"Hotkeys","text":"<p>En el fichero de configuraci\u00f3n de RetroArch que instala el instalador, se han definido los siguientes controles:</p> Funci\u00f3n Shortcut Pausa <code>Select + A</code> Reset <code>Select + B</code> Men\u00fa RetroArch <code>Select + X</code> Avance r\u00e1pido <code>Select + Y</code> Guardar savestate <code>Select + R1</code> Cargar savestate <code>Select + L1</code> Cambiar disco <code>Select + R2</code> Abrir bandeja CD <code>Select + L2</code> Cerrar juego <code>Select + Start</code> Cambiar slot savestate <code>Select + \u2190\u2192</code> Cambiar volumen <code>Select + \u2191\u2193</code>"},{"location":"2021-01-16-rg350_ra_installer.html#canal-telegram","title":"Canal Telegram","text":"<p>Se ha creado este canal de Telegram para comunicar m\u00e1s f\u00e1cilmente las actualizaciones de este instalador: https://t.me/RG350_ra_installer</p>"},{"location":"2021-01-19-retroconsolas.html","title":"Retroconsolas","text":"<p>En este art\u00edculo vamos a responder a las preguntas frecuentes que suelen surgir al comparar estas dos consolas de emulaci\u00f3n de videojuegos retro.</p>"},{"location":"2021-01-19-retroconsolas.html#que-modelos-merecen-la-pena","title":"\u00bfQu\u00e9 modelos merecen la pena?","text":"<p>Este tipo de consolas se han popularizado en los \u00faltimos a\u00f1os y unos cuantos fabricantes en China han producido numerosos modelos en un espectro de precio y prestaciones muy grande (aqu\u00ed puede consultarse un listado enorme). En este art\u00edculo vamos a centrarnos en los modelos RG350 (y sus variantes P y M) y RG351 (tambi\u00e9n en variantes P y M) ya que son seguramente los modelos m\u00e1s populares. Cuando hablemos de RG350 sin letra final, nos referiremos a los tres modelos (original, P y M). De la misma forma, cuando hablemos de RG351, nos referiremos a los dos modelos (P y M).</p>"},{"location":"2021-01-19-retroconsolas.html#que-caracteristicas-tienen-las-consolas-rg350-y-rg351","title":"\u00bfQu\u00e9 caracter\u00edsticas tienen las consolas RG350 y RG351?","text":""},{"location":"2021-01-19-retroconsolas.html#rg350","title":"RG350","text":"<ul> <li>Procesador: Ingenic JZ4770 MIPS</li> <li>Velocidad: 1GHz</li> <li>Cores: 1</li> <li>Ranuras tarjeta de memoria: 2</li> <li>Memoria: 512MB</li> <li>Pantalla 3,5\" relaci\u00f3n aspecto: 4:3<ul> <li>Modelo original y P: 320x240 px</li> <li>Modelo M: 640x480 px</li> </ul> </li> </ul>"},{"location":"2021-01-19-retroconsolas.html#rg351","title":"RG351","text":"<ul> <li>Procesador: RockChip RK3326 ARM</li> <li>Velocidad: 1,3-1,5GHz</li> <li>Cores: 4</li> <li>Ranuras tarjeta de memoria: 1</li> <li>Memoria: 1024MB</li> <li>Pantalla 3,5\" relaci\u00f3n aspecto: 3:2<ul> <li>Modelo P: 480x320 px</li> <li>Modelo M: 480x320 px</li> </ul> </li> </ul> <p>En cuesti\u00f3n de rendimiento la RG351 es superior a la RG350, pero a pesar de lo que parezcan sugerir los n\u00fameros, la primera no llega a duplicar el rendimiento de la primera. Medido en base a los sistemas que son capaces de emular, podr\u00edamos decir que RG350 se queda en PlayStation 1 y RG351 se atreve con algunos juegos (no todos) de Nintendo 64, Dreamcast, Sony PSP y Nintendo DS. El siguiente gr\u00e1fico es una modificaci\u00f3n de un original de Retro Game Corps (se puede ver aqu\u00ed) donde se han dejado \u00fanicamente los sistemas que mueven las dos consolas que nos interesan aqu\u00ed:</p> <p></p> <p>Por \u00faltimo se recomienda ver los siguientes videos donde se comparan varias consolas:</p>"},{"location":"2021-01-19-retroconsolas.html#que-modelos-llevan-wifi","title":"\u00bfQu\u00e9 modelos llevan Wifi?","text":"<ul> <li>RG350: No llevan, pero funcionan algunos modelos de pinchos USB como \u00e9ste.</li> <li>RG351P: No lleva, pero funcionan algunos modelos de pinchos USB como este. Los vendedores suelen incluirlo con la consola.</li> <li>RG351M: Lleva un m\u00f3dulo integrado en el interior.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#para-que-sirve-que-la-consola-lleve-wifi","title":"\u00bfPara qu\u00e9 sirve que la consola lleve Wifi?","text":"<ul> <li>RG350: Poca utilidad. Hay unos pocos emuladores que soportan juego en red, pero son realmente pocos. Facilita algo la actualizaci\u00f3n de emuladores y el sistema con ciertas utilidades, pero realmente son cosas que se pueden hacer por otros medios.</li> <li>RG351: El sistema RetroArch y el frontend EmulationStation que se utiliza pr\u00e1cticamente en todos los sistemas/firmwares aparecidos para esta m\u00e1quina, s\u00ed sacan partido de la conexi\u00f3n a la red para descargar car\u00e1tulas y videos de los juegos, los propios juegos y actualizar los emuladores o el sistema entero.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#las-consolas-llevan-roms","title":"\u00bfLas consolas llevan ROMs?","text":"<p>Depende del vendedor. En teor\u00eda es ilegar vender productos con ROMs que tienen derechos de autor (la inmensa mayor\u00eda). A pesar de ello, aunque los vendedores no declaran incluir las ROMs en las fichas de producto, suelen venir con ellas. Aqu\u00ed hay diferencia entre los dos tipos de consola:</p> <ul> <li>RG350: Al tener dos ranuras, la denominada INT (porque en el modelo original era interna) se dedica al sistema. Aqu\u00ed no suelen incluir ROMs, s\u00ed los emuladores. En caso de ofrecer la consola con ROMs los vendedores las ponen en la ranura EXT. Por tanto cuando el vendedor nos ofrece la posibilidad de comprar la consola con una segunda tarjeta, en realidad lo que nos est\u00e1 ofreciendo son las ROMs.</li> <li>RG351: Al tener una \u00fanica ranura, donde tiene que ponerse todo (sistema, emuladores y ROMs), lo habitual es que esta consola venga siempre con ROMs.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#como-se-anaden-roms","title":"\u00bfC\u00f3mo se a\u00f1aden ROMs?","text":"<ul> <li>RG350: Al tener dos ranuras para tarjeta microSD, lo m\u00e1s pr\u00e1ctico es a\u00f1adirlas en la ranura marcada como EXT. Esta tarjeta puede estar en formato FAT32, es decir el formato en el que vienen formateadas normalmente las tarjetas reci\u00e9n compradas. Las ROMs en esa tarjeta pueden colocarse en cualquier lugar ya que m\u00e1s tarde cuando abramos un emulador, normalmente nos mostrar\u00e1 un explorador de archivos para localizar las ROMs donde las tengamos. Si se ha seguido el consejo de instalarlas en la tarjeta EXT, se encontrar\u00e1n a partir de la ruta <code>/media/sdcard</code> que es donde se monta esa tarjeta en el arbol de directorios del sistema. ROGUE adem\u00e1s del FAT32 soporta el formato exFAT, un formato m\u00e1s moderno que suele utilizarse en las tarjetas de gran capacidad. M\u00e1s detalles aqu\u00ed.</li> <li>RG351: Aunque en esta consola s\u00f3lo tenemos una tarjeta, lo normal es que est\u00e9 particionada de manera que las ROMs se alojen en una partici\u00f3n de tipo FAT32 o exFAT, por lo que normalmente si pinchamos la tarjeta en el PC con un lector de tarjetas, podremos copiar las ROMs a esa partici\u00f3n sin m\u00e1s que arrastrar. Hay alternativas como conectar la consola a la red (con un adaptador Wifi en el caso del modelo P o directamente con el modelo M ya que lleva el adaptador integrado) y activar alg\u00fan sistema para compartir los archivos de la consola (depender\u00e1 del sistema y versi\u00f3n que tengamos instalado). En general lo m\u00e1s c\u00f3modo y r\u00e1pido es pinchar la tarjeta en el PC.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#merece-la-pena-comprar-la-consola-con-tarjeta-microsd-con-juegos-rg350","title":"\u00bfMerece la pena comprar la consola con tarjeta microSD con juegos? (RG350)","text":"<p>Las tarjetas microSD que llevan estas consolas tienen una calidad muy justita. En la RG350 suele venir una tarjeta Toshiba en la ranura INT. Es muy frecuente que esa tarjeta d\u00e9 problemas al flashear (grabar) un firmware alternativo. En esta consola la tarjeta EXT tampoco es de calidad, por lo que si se adquiere con la idea de conseguir una colecci\u00f3n de ROMs (ver duda anterior), lo m\u00e1s probable es que haya que transferirlas a otra. Incluso no es infrecuente que no puedan copiarse todas las ROMs por problemas de formato en la tarjeta recibida. Adem\u00e1s las colecciones de juegos que suelen venir en estas tarjetas son recopilaciones mal ordenadas y en localizaciones de otros paises. En general se recomienda ahorrar el extra de coste de comprar la consola con tarjeta para ROMs. Mejor buscarlas por uno mismo.</p>"},{"location":"2021-01-19-retroconsolas.html#tengo-que-actualizar-el-sistema-de-la-consola-nada-mas-recibirla","title":"\u00bfTengo que actualizar el sistema de la consola nada m\u00e1s recibirla?","text":"<p>Necesario no es. Forma parte del entretenimiento para muchos de nosotros, pero la consola llegar\u00e1 con un sistema completamente funcional. Es cierto que existen normalmente varios firmwares alternativos (se suelen llamar Custom Firmwares o CFW), sobre todo en el caso de las RG351. Es otra de las aficiones que se pueden desarrollar sobre estas consolas al tener una arquitectura muy abierta. Suelen crearse comunidades de desarrollo y sus usuarios nos beneficiamos de ello.</p> <p>Es cierto que instalar un firmware alternativo en estas m\u00e1quinas tiene un riesgo m\u00ednimo, dado que todo lo \"estropeable\" se encuentra en las tarjetas microSD, por lo que en caso de problemas siempre se van a solucionar cambiando la tarjeta. Digamos que no son consolas f\u00e1ciles de \"brickear\" (ver Diccionario de t\u00e9rminos). A pesar de ello, si est\u00e1s leyendo estas preguntas/respuestas mi consejo es que, para evitar frustraciones, utilices la consola tal y como se recibe de f\u00e1brica al menos durante un tiempo mientras vas adquiriendo conocimientos. Los juegos que funcionen, que van a ser miles (seguramente todos los que traiga la consola si viene con ellos) lo van a hacer de la misma forma en el firmware original.</p> <p>Si a\u00fan as\u00ed te animas a instalar un CFW, tras o\u00edr las ventajas que tiene tal o cual distribuci\u00f3n, como dec\u00edamos antes, todo est\u00e1 en la tarjeta (la INT en la RG350 y la \u00fanica que tiene la RG351), por lo que siempre podemos reservar la tarjeta original tal cual est\u00e1 e instalar el CFW sobre una tarjeta nueva. De esa forma, a modo de cartucho, cuando queramos cambiar de un sistema a otro s\u00f3lo tendremos que cambiar la microSD.</p>"},{"location":"2021-01-19-retroconsolas.html#que-sistemas-o-firmwares-existen-para-estas-consolas","title":"\u00bfQu\u00e9 sistemas o firmwares existen para estas consolas?","text":"<ul> <li>RG350:<ul> <li>Sistema base o stock. Se puede encontrar aqu\u00ed. Es el \u00fanico en el que funciona el HDMI aunque con problemas.</li> <li>ROGUE: El sistema que recomendamos aqu\u00ed. Se puede encontrar aqu\u00ed.</li> <li>OpenDingux Beta: Promete ser el futuro de la consola, pero todav\u00eda no est\u00e1 claro si llegar\u00e1 a buen puerto. Tiene sus virtudes y sus, m\u00e1s que defectos, problemas de juventud. Puede encontrarse aqu\u00ed.</li> </ul> </li> <li>RG351:<ul> <li>351ELEC: Derivaci\u00f3n (fork) de EmuELEC que no tiene soporte oficial a la RG351. Es quiz\u00e1 el sistema m\u00e1s fiel a la filosof\u00eda OGA (la m\u00e1quina a la que la RG351 clona). Puede encontrarse aqu\u00ed.</li> <li>ArkOS: Es un Ubuntu con RetroArch y EmulationStation instalados para que arranque por defecto. Como virtudes principales est\u00e1n el que la distribuci\u00f3n se actualiza por si sola cada vez que se publican parches del sistema como es habitual en Ubuntu. Puede encontrarse aqui.</li> <li>Batocera: La popular distribuci\u00f3n de emuladores para SBCs y ordenadores. Puede encontrarse aqu\u00ed. Actualmente parece la menos recomendable.</li> </ul> </li> </ul>"},{"location":"2021-01-19-retroconsolas.html#que-sistema-es-mas-recomendable-para-rg351-351elec-o-arkos-rg351","title":"\u00bfQu\u00e9 sistema es m\u00e1s recomendable para RG351, 351ELEC o ArkOS? (RG351)","text":"<p>Ambos son muy parecidos en rendimiento y funcionalidad. 351ELEC se parece m\u00e1s a EmuELEC que es de donde deriva y por tanto tiende a integrar m\u00e1s ajustes del sistema de emulaci\u00f3n que tiene debajo (RetroArch) en el interfaz principal (EmulationStation). ArkOS sigue una filosof\u00eda m\u00e1s pr\u00f3xima a la instalaci\u00f3n de RetroArch que se har\u00eda en un ordenador, de hecho es un Ubuntu recortado. Esto \u00faltimo tiene ventajas en cuanto a que se actualiza el sistema m\u00e1s f\u00e1cil y frecuentemente (aprovechando el sistema de repositorios habitual en las distribuciones Linux). A cambio es un sistema menos robusto que 351ELEC que se encuentra en una partici\u00f3n de solo lectura, por lo que ArkOS ser\u00e1 m\u00e1s dif\u00edcil que se corrompa (en cuelgues o en apagados abruptos).</p> <p>A continuaci\u00f3n una comparativa en video:</p>"},{"location":"2021-01-19-retroconsolas.html#que-diferencias-hay-entre-las-versiones-p-y-m-de-la-rg351-rg351","title":"\u00bfQu\u00e9 diferencias hay entre las versiones P y M de la RG351? (RG351)","text":"<ul> <li>RG351P: Carcasa de pl\u00e1stico y sin Wifi interno, aunque el vendedor suele incluir en la caja uno con un adaptador USB-USB type C.</li> <li>RG350M: Carcasa de metal y m\u00f3dulo Wifi integrado en la placa. Algunos usuarios comentan que la carcasa met\u00e1lica transmite mejores sensaciones en la pulsaci\u00f3n de los controles en general.</li> </ul> <p>En el resto de caracter\u00edsticas son exactamente iguales, incluyendo la pantalla. El siguiente video contiene la comparativa que hizo Retro Game Corps sobre los dos modelos:</p>"},{"location":"2021-01-19-retroconsolas.html#que-diferencias-hay-entre-las-versiones-original-p-y-m-de-la-rg350-rg350","title":"\u00bfQu\u00e9 diferencias hay entre las versiones original, P y M de la RG350? (RG350)","text":"<ul> <li>RG350: Carcasa de pl\u00e1stico. Pantalla de 320x240 no laminada, es decir el cristal que hay sobre la pantalla no se encuentra directamente pegado, sino ligeramente separado. Stick izquierdo en la parte superior y cruceta en la inferior. Ranura de tarjeta INT en el interior lo que obliga a abrir la tapa trasera en caso de querer acceder a ella.</li> <li>RG350P: Carcasa de pl\u00e1stico. Pantalla de 320x240 laminada, lo que produce una imagen m\u00e1s viva y mejora el \u00e1ngulo de visi\u00f3n al evitarse los reflejos y sombras del cristal sobre la pantalla. Ranura INT accesible desde el exterior.</li> <li>RG350M: Carcasa de metal. Pantalla de 640x480 laminada. Ranura INT accesible desde el exterior. Algunos usuarios comentan que la carcasa met\u00e1lica transmite mejores sensaciones en la pulsaci\u00f3n de los controles en general.</li> </ul> <p>En el siguiente video podemos ver una comparativa directa entre el modelo original y el modelo M. Como hemos enumerado antes, entre estos dos modelos hay m\u00e1s diferencias que si se comparara la RG350P con la RG350M, pero a\u00fan as\u00ed resulta interesante, por las sensaciones que ofrece el chasis de metal:</p>"},{"location":"2021-01-19-retroconsolas.html#por-que-la-rg350-lleva-dos-tarjetas-microsd-rg350","title":"\u00bfPor qu\u00e9 la RG350 lleva dos tarjetas microSD? (RG350)","text":"<p>Motivos hist\u00f3ricos. La RG350 es un clon de la GZW Zero, una consola surgida de un crowdfunding que tuvo bastante \u00e9xito. Esta consola ten\u00eda esta configuraci\u00f3n doble de tarjetas con la idea de destinar una al sistema operativo y aplicaciones, y la otra a los medios (ROMs, videos y audios). La tarjeta de sistema tiene un formato Linux, por lo que no se puede leer desde los sistemas Windows o Mac. La externa soporta el formato FAT32 por lo que resulta muy sencillo y pr\u00e1ctico extraer la tarjeta de la consola, montarla con un lector de tarjetas en el PC y copiar a ella los archivos.</p>"},{"location":"2021-01-19-retroconsolas.html#que-tamano-es-recomendable-que-tenga-la-tarjeta-del-sistema","title":"\u00bfQu\u00e9 tama\u00f1o es recomendable que tenga la tarjeta del sistema?","text":"<ul> <li>RG350: Como se ha comentado en la pregunta anterior, la tarjeta INT est\u00e1 dedicada al sistema. El sistema Linux que lleva la consola es muy minimalista y cabe perfectamente en una tarjeta de 4GB. A\u00fan as\u00ed, se suelen utilizar tarjetas de 16GB porque es el m\u00ednimo que se encuentra en los comercios. M\u00e1s detalles aqu\u00ed.</li> <li>RG351: Al s\u00f3lo disponer de una ranura para tarjetas y no tener la consola almacenamiento interno, la tarjeta tendr\u00e1 que contenerlo todo: Sistema operativo, aplicaciones, emuladores y ROMs. Por tanto el tama\u00f1o adecuado depender\u00e1 principalmente de las ROMs que queramos instalar, sobre todo si vamos a poner sistemas basados en CD, cuyas ROMs (o mejor dicho ISOs puesto que son volcados de discos) ocupan bastante. El tama\u00f1o m\u00e1ximo de tarjeta soportado te\u00f3ricamente es 256GB.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#hay-que-cambiar-la-tarjeta-o-tarjetas-que-trae-de-fabrica-la-consola","title":"\u00bfHay que cambiar la tarjeta o tarjetas que trae de f\u00e1brica la consola?","text":"<p>En general las tarjetas que incluye el fabricante (o la que incluyen los vendedores en la ranura EXT en la RG350) no son de la mejor calidad. Pero sustituir la tarjeta del sistema no es trivial, es decir no sirve con copiar el contenido de una tarjeta en otra (ver otra pregunta m\u00e1s adelante). Si se va a continuar con el sistema que tra\u00eda de f\u00e1brica (por lo menos durante un tiempo al principio como se recomendaba en una pregunta anterior), entonces no es necesario cambiar la tarjeta. Si se opta por instalar un firmware alternativo o CFW, entonces la mejor opci\u00f3n es apartar la tarjeta original e instalar el nuevo sistema en una nueva, a poder ser de una marca de garant\u00eda. Adem\u00e1s de evitar los problemas que dan las tarjetas originales, sobre todo al grabar (flashear) im\u00e1genes nuevas, siempre podremos recurrir a la tarjeta original para comparar comportamientos en caso de que tengamos dudas de si alguna capacidad de la consola tiene problemas. O para reclamar la garant\u00eda llegado el caso.</p>"},{"location":"2021-01-19-retroconsolas.html#como-elegir-una-tarjeta-microsd-para-la-consola","title":"\u00bfC\u00f3mo elegir una tarjeta microSD para la consola?","text":"<p>Se recomienda seguir las recomendaciones habituales para cualquier otro producto. Las tarjetas baratas, o que resultan ser fakes en comercios como Aliexpress, pueden arruinar la experiencia de juego al producir lentitud en los accesos por parte del sistema operativo. Aunque no existe garant\u00eda absoluta de que una tarjeta de buena marca vaya a funcionar sin problemas, lo m\u00e1s probable es que no los haya. En cuanto a la velocidad, las RG350 y RG351 no son los equipos m\u00e1s r\u00e1pidos del mercado, por lo que una tarjeta de class 10 ser\u00e1 suficiente. Sin embargo dado que en ocasiones se utilizan tarjetas de alta capacidad por el gran volumen que puede tener una buena colecci\u00f3n de ROMs, s\u00ed que puede merecer adquirir una tarjeta r\u00e1pida para poder cargar las ROMs desde el ordenador r\u00e1pidamente. La capacidad m\u00e1xima te\u00f3rica admitida en las ranuras de estas consolas es de 256GB.</p> <p>El siguiente gr\u00e1fico explica c\u00f3mo se interpretan algunos de los c\u00f3digos que suelen llevar estas tarjetas:</p> <p></p>"},{"location":"2021-01-19-retroconsolas.html#puedo-copiar-el-contenido-de-una-tarjeta-a-otra","title":"\u00bfPuedo copiar el contenido de una tarjeta a otra?","text":"<ul> <li>RG350: La interna no. La externa s\u00ed. La interna tiene dos particiones y una de ellas es de formato Linux. La externa suele estar en formato FAT32 por lo que se puede acceder a su contenido y transferir todo lo que en ella hay a otra tarjeta en el mismo formato FAT32. Como en esta consola las ROMs suele ser lo que nos interesa conservar cuando vamos a cambiar el sistema, podemos cambiar la tarjeta interna sin que las ROMs se vean afectadas.</li> <li>RG351: No. La tarjeta contiene varias particiones y para que el sistema arranque hay que respetar la situaci\u00f3n y el contenido de algunas de ellas. Hay que utilizar programas para hacer volcados (dumps) de la tarjeta completa a una imagen (ver Diccionario de t\u00e9rminos). El que esta consola s\u00f3lo tenga una ranura para tarjetas tiene el inconveniente de que si queremos grabar (flashear) otro firmware alternativo en la tarjeta, vamos a perder las ROMs, por lo que habr\u00e1 que copiarlas a otro sitio antes.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#la-consola-lleva-salida-hdmi","title":"\u00bfLa consola lleva salida HDMI?","text":"<ul> <li>RG350: S\u00ed lleva, pero el firmware oficial no le ha dado soporte hasta mediados del a\u00f1o pasado. Los firmwares alternativos (con ROGUE a la cabeza) todav\u00eda no han podido importar esta funci\u00f3n al no haber sido hechas p\u00fablicas las especificaciones por el fabricante. De todas formas el funcionamiento de muchos emuladores a trav\u00e9s de HDMI (sobre todo los Arcade y PlayStation) tienen problemas de latencia y distorsiones gr\u00e1ficas.</li> <li>RG351: No lleva.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#sirven-los-adaptadores-usb-hdmi","title":"\u00bfSirven los adaptadores USB-HDMI?","text":"<ul> <li>RG350: Seguramente no ya que no me consta que los firmwares de esta consola los soporten.</li> <li>RG351: Aqu\u00ed habr\u00eda m\u00e1s posibilidades ya que existen distribuciones como ArkOS que en realidad son un Ubuntu enmascarado. De todas formas dudo mucho que la velocidad del bus USB de la consola soporte la tasa de transferencia necesaria para que funcione adecuadamente.</li> </ul>"},{"location":"2021-01-19-retroconsolas.html#opinion-personal","title":"Opini\u00f3n personal","text":"<p>T\u00e9cnicamente hablando:</p> <ul> <li>RG350P: Mejor resoluci\u00f3n y aspecto de pantalla para sistemas 8 y 16 bit. Mejor precio.</li> <li>RG350M: Mejor resoluci\u00f3n y aspecto de pantalla para sistemas 8 y 16 bit. Carcasa de metal que da mayor precisi\u00f3n en el manejo. Mayor resoluci\u00f3n que permite efectos gr\u00e1ficos que la 350P no puede mostrar.</li> <li>RG351P/M: M\u00e1s potencia de procesador (aproximadamente un 50%) que permite subir el list\u00f3n hasta rozar Dreamcast, N64, PSP y Nintendo DS. Frontend m\u00e1s moderno que ofrece una experiencia de manejo explorando sistemas y ROMs muy superior. A cambio la resoluci\u00f3n y aspecto de pantalla no resulta la m\u00e1s adecuada para ver los juegos en modo pixel perfect. Hay que aplicar filtros de interpolaci\u00f3n.</li> </ul> <p>Valoraci\u00f3n m\u00e1s personal:</p> <p>Si no llevas mucho tiempo en esto la RG351 te va a resultar m\u00e1s satisfactoria. Si eres un aficionado hardcore del retro, las 350 resultan m\u00e1quinas m\u00e1s atractivas por historia, comunidad y la precisi\u00f3n gr\u00e1fica que permiten.</p>"},{"location":"2021-01-19-retroconsolas.html#diccionario-de-terminos","title":"Diccionario de t\u00e9rminos","text":"<ul> <li> <p>EmuELEC: Es un sistema operativo Linux basado en CoreELEC que se compone fundamentalmente de un interfaz de usuario o frontend (EmulationStation) y de un sistema que integra m\u00faltiples emuladores (RetroArch).</p> </li> <li> <p>Core o N\u00facleo: Concepto normalmente vinculado a RetroArch. Los cores son las librer\u00edas de RetroArch que implementan la emulaci\u00f3n de un sistema concreto. Cuando se abre un juego o ROM en RetroArch, hay que cargar el core con el que lo queremos ejecutar.</p> </li> <li> <p>ROMs: Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el c\u00f3digo y los datos (sonidos por ejemplo) del juego en la m\u00e1quina original. En viejas recreativas y en m\u00e1quinas de cartucho, este soporte sol\u00edan ser chips de memoria no vol\u00e1til. En las m\u00e1quinas m\u00e1s modernas normalmente son CDs, DVDs, Bluray's. Ver m\u00e1s detalles aqu\u00ed.</p> </li> <li> <p>BIOS: Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de \u00e9stas est\u00e1n siempre presentes en la m\u00e1quina. Es decir, as\u00ed como las ROMs son c\u00f3digo particular de cada juego, que digamos entra y sale de la m\u00e1quina (cuando cambias el CD o cartucho), la BIOS tambi\u00e9n es c\u00f3digo pero permanente de la m\u00e1quina. Ver m\u00e1s detalles aqu\u00ed.</p> </li> <li> <p>Ports: Un port es una aplicaci\u00f3n que ejecuta un juego concreto, normalmente un cl\u00e1sico, del que se dispone del c\u00f3digo y que alguien ha compilado para el sistema de nuestra m\u00e1quina. Tambi\u00e9n entran dentro de esta categor\u00eda los remakes hechos por aficionados o homebrew. Ver m\u00e1s detalles aqu\u00ed.</p> </li> <li> <p>ROMSET: Romset = set de ROMs, es decir un conjunto cerrado y definido de ROMs. Ver m\u00e1s detalles aqu\u00ed.</p> </li> <li> <p>Imagen: Es un volcado de un dispositivo de almacenamiento (en estas consolas ser\u00e1 una microSD) donde se encuentra el sistema completo y funcional (normalmente con sistema operativo, emuladores, frontend y ROMs). Se hace con la idea de replicar la instalaci\u00f3n de una m\u00e1quina en otras muchas. Normalmente estos ficheros ocupan casi tanto como la capacidad de la microSD de que proceden.</p> </li> <li> <p>Escrapear: Obtener metadatos (sinopsis, fecha de publicaci\u00f3n, g\u00e9nero, etc. de un juego), car\u00e1tulas o videos de los juegos para facilitar su identificaci\u00f3n en el frontend o interfaz de manejo de la consola.</p> </li> <li> <p>Brickear: Convertir la consola en un ladrillo. Es decir que no haya forma de que arranque. En las consolas de la gama RG350 es completamente imposible dado que no hay ninguna memoria flash en la placa. Con la RG351 existe algo m\u00e1s de posibilidad ya que hay un par de chips en la placa que tienen su propia memoria, pero las probabilidades son muy remotas. A efectos pr\u00e1cticos se pueden considerar las dos no brickeables.</p> </li> </ul>"},{"location":"2021-02-28_pico_fuzix.html","title":"FUZIX en Raspberry Pi Pico","text":"<p>En el sitio de la Fundaci\u00f3n Raspberry Pi apareci\u00f3 hace poco este art\u00edculo explicando c\u00f3mo instalar la variante UNIX llamada FUZIX en el microcontrolador de reciente aparici\u00f3n Raspberry Pi Pico. Al parecer FUZIX es un proyecto surgido en torno al microprocesador de 8 bit Z-80 al que tengo un cari\u00f1o especial ya que es el \u00fanico procesador del que he llegado a conocer su c\u00f3digo m\u00e1quina. Decidido a realizar el montaje para probarlo, encontr\u00e9 que se puede simplificar bastante en tres puntos:</p> <ol> <li>El dump que proporcionan para la microSD es de la segunda partici\u00f3n, cuando podr\u00edan haber proporcionado una imagen de la tarjeta completa que ahorrar\u00eda los pasos de la sesi\u00f3n con <code>fdisk</code> para crear sus particiones y el posterior <code>dd</code> para cargar el dump de la segunda.</li> <li>El m\u00f3dulo que utilizan para conectar la microSD no es en realidad necesario ya que al funcionar Raspberry Pi Pico a 3,3V no hace falta ninguna adaptaci\u00f3n de las se\u00f1ales, es decir se puede cablear directamente la microSD a Raspberry Pi Pico.</li> <li>Como adaptador para el puerto serie, en lugar de utilizar una Raspberry Pi, utilizo un Arduino Nano con el t\u00edpico truco de puentear el pin de RESET a GND. En este caso s\u00ed que habr\u00e1 que adaptar la linea RX ya que Arduino trabaja a 5V. Esto se puede hacer mejor con un buen m\u00f3dulo UART-USB capaz de trabajar a 3,3V, pero no contaba con \u00e9l en el momento de escribir este art\u00edculo.</li> </ol> <p>Sin m\u00e1s veamos los pasos simplificados para ejecutar FUZIX en Raspberry Pi Pico.</p>"},{"location":"2021-02-28_pico_fuzix.html#lector-microsd","title":"Lector microSD","text":"<p>Como comentaba antes, la conexi\u00f3n de una tarjeta microSD se puede hacer realizando el patillaje directo y correcto entre los terminales de la microSD y los pines 16 a 20 de Raspberry Pi Pico. En esos pines se encuentra uno de los puertos SPI que tiene el microcontrolador. Las tarjetas SD y microSD pueden funcionar en dos modos, el nativo SD y como puerto SPI. Utilizaremos pues \u00e9ste \u00faltimo. Tan s\u00f3lo necesitamos conocer el patillaje a utilizar en este modo. Haciendo una b\u00fasqueda r\u00e1pida en cualquier buscador, en la modalidad de im\u00e1genes, por ejemplo por la cadena \"spi microsd pinout\", encontramos la respuesta:</p> <p></p> <p>En la tabla anterior se ve adem\u00e1s la correspondencia entre los pines de las tarjetas en formato SD y microSD. Vamos a aprovechar esta correspondencia para construir un lector de tarjetas microSD utilizando uno de los t\u00edpicos adaptadores que suelen venir con las tarjetas microSD. Soldaremos directamente 7 cables entre los terminales 1 y 7 que m\u00e1s tarde conectaremos a Raspberry Pi Pico. La correspondencia entre los terminales del adaptador SD y Raspberry Pi Pico es como sigue:</p> Pin adaptador SD SPI Raspberry Pi Pico 1 CS Pin 17 (GP13) 2 MOSI Pin 20 (GP15) 3 GND Pin 18 (GND) 4 3,3V Pin 36 (3V3 OUT) 5 SCK Pin 19 (GP14) 6 GND Pin 18 (GND) 7 MISO Pin 16 (GP12) 8 - - 9 - - <p>Haciendo un cableado sobre una tira de pin de 1x6 (unificamos los dos terminales GND de la SD) reordenando los cables para que los pines de Raspberry Pi Pico queden en secuencia (pin 16 a 20) y dejando el pin de 3,3V a continuaci\u00f3n del pin 20, podremos conectar el adaptador directamente. El adaptador resultante es el siguiente:</p> <p></p> <p>Se puede incluso hacer m\u00e1s f\u00e1cil y flexible el conexionado aprovechando que la separaci\u00f3n de los terminales de la SD es de una d\u00e9cima de pulgada, como en las t\u00edpicas tiras de pin y las breadboard, por lo que puede soldarse directamente una tira de pin. La idea y la foto siguiente est\u00e1n sacadas de este sitio:</p> <p></p> <p>El adaptador construido se puede conectar directamente a Raspberry Pi Pico. Observad que el pin que recibe la alimentaci\u00f3n de 3,3V (cable rojo) queda fuera de la planta de Raspberry Pi Pico de manera que por medio de un par de puentes blancos se lleva hasta el pin 36 que es de donde obtenemos los 3,3V de alimentaci\u00f3n.</p> <p></p>"},{"location":"2021-02-28_pico_fuzix.html#imagen-de-la-microsd","title":"Imagen de la microSD","text":"<p>En las instrucciones del art\u00edculo original se incluye un proceso que por medio del comando <code>fdisk</code> utilizado desde una Raspberry Pi (desde cualquier Linux en realidad), permite construir dos particiones en la microSD (una para la swap y otra para el sistema de archivos). Se nos ofrece un dump de la segunda partici\u00f3n que se carga con el comando <code>dd</code>. Todo esto se podr\u00eda haber evitado generando el dump de las dos particiones juntas. Es lo que puede encontrarse en el siguiente fichero que podremos flashear directamente sobre una microSD con programas como Balena Etcher.</p> <p>card.img.gz</p> <p>En Linux podemos flashear directamente con el siguiente comando, sustituyendo el dispositivo (<code>/dev/mmcblk0</code> en el ejemplo) por el que corresponda:</p> <pre><code>gunzip card.img.gz -c | sudo dd of=/dev/mmcblk0 bs=1M status=progress conv=fsync\n</code></pre>"},{"location":"2021-02-28_pico_fuzix.html#firmware-para-raspberry-pi-pico","title":"Firmware para Raspberry Pi Pico","text":"<p>Aunque puede encontrarse en el art\u00edculo original lo incluyo aqu\u00ed de nuevo para que todo el proceso pueda seguirse sin salir de aqu\u00ed:</p> <p>fuzix.uf2</p> <p>La forma de cargar el firmware en Raspberry Pi Pico es conectar por USB al ordenador mientras se mantiene pulsada la tecla <code>BOOTSEL</code>. En ese momento se montar\u00e1 una unidad de almacenamiento externa en el ordenador donde copiaremos el fichero anterior.</p>"},{"location":"2021-02-28_pico_fuzix.html#conexion-serie","title":"Conexi\u00f3n serie","text":"<p>Ya tenemos todo instalado y preparado. Tan s\u00f3lo necesitamos una manera de conectar con el sistema. El \u00fanico medio para conectar con \u00e9l es por medio del puerto serie que hay en los pines 1 y 2 (GP0 y GP1 respectivamente) de Raspberry Pi Pico. Desconzco si hay alg\u00fan motivo que haya impedido utilizar el puerto USB de Pico para este prop\u00f3sito. Desde luego hubiera sido mucho m\u00e1s c\u00f3modo.</p> <p>Para conectar el puerto serie de Pico al ordenador, lo mejor es utilizar un m\u00f3dulo adaptador USB como \u00e9ste. Al no tener uno a mano utilic\u00e9 el t\u00edpico truco de usar un Arduino en modo RESET permanente. Si utilizamos esta t\u00e9cnica nos tocar\u00e1 montar un divisor de tensi\u00f3n con un par de resistencias para adaptar el nivel de tensi\u00f3n para que la linea RX de Pico no reciba directamente los 5V con que trabaja Arduino. En la linea TX no ser\u00e1 necesario, ya que los 3,3V de Pico son suficientes para que Arduino interprete ese nivel de tensi\u00f3n como un 1 digital en 5V.</p> <p>El siguiente esquema completo muestra el divisor de tensi\u00f3n as\u00ed como la forma de alimentar Raspberry Pi Pico desde los 5V de salida que ofrece Arduino en uno de sus pins. Llevaremos esos 5V hasta el pin VSYS de Pico que admite entre 1,8V y 5,5V. Las resistencias del divisor de tensi\u00f3n pueden ser pr\u00e1cticamente de cualquier valor con tal de que la que est\u00e1 en serie en la linea RX tenga aproximadamente la mitad de valor que la que deriva a GND.</p> <p></p> <p>Ya s\u00f3lo queda conectar por USB el Arduino al ordenador y conectar con nuestro cliente serie favorito a 115200 baudios. Por ejemplo en Linux puede hacerse con el siguiente comando:</p> <pre><code>screen /dev/ttyUSB0 115200 8N1\n</code></pre> <p>Si todo va bien, en pantalla veremos lo siguiente. El sistema, antes de pedirnos el usuario (<code>root</code>) y password (vac\u00edo) nos pedir\u00e1 el d\u00eda y hora para poner la fecha al sistema:</p> <pre><code>FUZIX version 0.4pre1\nCopyright (c) 1988-2002 by H.F.Bower, D.Braun, S.Nitschke, H.Peraza\nCopyright (c) 1997-2001 by Arcady Schekochikhin, Adriano C. R. da Cunha\nCopyright (c) 2013-2015 Will Sowerbutts &lt;will@sowerbutts.com&gt;\nCopyright (c) 2014-2020 Alan Cox &lt;alan@etchedpixels.co.uk&gt;\nDevboot\n64kB total RAM, 64kB available to processes (15 processes max)\nEnabling interrupts ... ok.\nSD drive 0: hda: hda1 hda2\nMounting root fs (root_dev=2, ro): OK\nStarting /init\ninit version 0.9.0ac#1\nCannot open file\nCurrent date is Wed 2021-02-17\nEnter new date: 2021-02-28\nCurrent time is 22:21:10\nEnter new time: 19:54\n\n ^ ^\n n n   Fuzix 0.3.1\n &gt;@&lt;\n       Welcome to Fuzix\n m m\n\nlogin: root\n\nWelcome to FUZIX.\n#\n</code></pre>"},{"location":"2021-04-03_RG350_imagen.html","title":"RG350/RG280 Imagen","text":"<p>Actualizaci\u00f3n 2021-04-25</p> <p>Se actualiza el art\u00edculo para reflejar los cambios introducidos en la v10.1 de la imagen presentada en esta fecha. Para convertir la v10.0 original en la nueva v10.1, existe un parche que realiza las mejoras y cambios. El parche puede descargarse desde este enlace.</p>"},{"location":"2021-04-03_RG350_imagen.html#presentacion","title":"Presentaci\u00f3n","text":"<p>Se comentan aqu\u00ed los detalles de una imagen de tarjeta interna preparada para las consolas de emulaci\u00f3n Anbernic RG350, RG350P, RG350M, RG280V y RG280M. La imagen es un volcado de una microSD de 4GB con sistema ROGUE (agradecimiento especial a Ninoh-FOX por su soporte), ports, emuladores y cores RetroArch y los frontends GMenu2X, SimpleMenu (agradecimiento especial a FGL82 por su soporte) y PyMenu. Se puede flashear sobre una tarjeta de ese tama\u00f1o o superior. Durante el primer arranque se expandir\u00e1 el tama\u00f1o de la partici\u00f3n principal hasta ocupar todo el espacio disponible en la tarjeta.</p> <p>Descarga de la imagen desde los siguientes enlaces:</p> <ul> <li>Panda (RG350 y RG350P)</li> <li>Mapache (RG350M)</li> <li>Vis\u00f3n (RG280V)</li> <li>Musara\u00f1a (RG280M)</li> </ul> <p>Alternativamente todas las im\u00e1genes y parches tambi\u00e9n pueden encontrarse en el canal Telegram Code Animal images. Utilizar el canal tiene la ventaja adicional de que se reciben notificaciones cuando aparecen parches o nuevas versiones de las im\u00e1genes.</p> <p>Los emuladores y los cores RetroArch tienen lanzadores personalizados con iconos que representan las m\u00e1quinas que emulan para mejor identificaci\u00f3n. Los nombres de los emuladores y cores tambi\u00e9n se han modificado con esta misma idea.</p> <p> </p> <p>Los ports o juegos instalados son los siguientes (algunos como <code>Cannonball</code>, <code>OpenBOR</code>, <code>OpenJazz</code> y <code>Solarus</code> necesitan ROMs en la tarjeta externa):</p> <p></p> <p>Por \u00faltimo, en este documento pueden encontrarse detalles de los emuladores instalados y las configuraciones de RetroArch para los cores disponibles en la imagen.</p>"},{"location":"2021-04-03_RG350_imagen.html#backup-de-partidas-antes-de-flashear","title":"Backup de partidas antes de flashear","text":"<p>Si se ha estado utilizando la consola con otro sistema, seguramente nos interese guardar los savestates de las partidas que hayamos jugado. As\u00ed pues, antes de flashear esta imagen, conviene hacer backup de los mismos. Para facilitar esta tarea se ha creado la aplicaci\u00f3n <code>Py Backup</code> que se describe en este art\u00edculo y que viene preconfigurada con todos los directorios de savestates de los emuladores instalados en la imagen.</p> <p>B\u00e1sicamente el procedimiento para hacer el backup es el siguiente. Empezamos trabajando sobre la imagen que exista en la consola antes de flashear la que se ofrece aqu\u00ed:</p> <ol> <li>Instalar el OPK.</li> <li> <p>Localizar la aplicaci\u00f3n instalada en el paso anterior. Se encontrar\u00e1 en la secci\u00f3n <code>applications</code> de los distintos launchers. Una vez encontrada abrirla.</p> <p></p> </li> <li> <p>Pulsar <code>B</code> para empezar el backup y confirmar con <code>A</code> (al llegar a PCSX4All suele engancharse un buen rato porque los savestates de este emulador son pesados). Se pueden desactivar previamente los backups de los sistemas que no nos interesen, pero es m\u00e1s seguro dejar todos activos para evitar disgustos.</p> <p></p> </li> </ol> <p>Hasta aqu\u00ed para generar el backup. \u00c9ste se deja en el directorio <code>backups</code> de la tarjeta externa, dentro del cual aparecer\u00e1n una serie de ficheros con extensi\u00f3n <code>.tgz</code>. Una vez flasheada la imagen tendremos que hacer la restauraci\u00f3n. Para ello proceder de la siguiente forma:</p> <ol> <li>Abrir la aplicaci\u00f3n <code>Py Backup</code> que ya est\u00e1 preinstalada en la imagen.</li> <li> <p>Pulsar <code>X</code> para empezar la restauraci\u00f3n del backup y confirmar con <code>A</code>.</p> <p></p> </li> </ol> <p>Advertencia: La correspondencia de las partidas o savestates depende de los nombres de las ROMs. Si guardamos una partida cuando por ejemplo la ROM se llamaba \"001. Catrap.gb\" si luego tratamos de recuperarla desde una ROM llamada \"Catrap.gb\" no nos va a funcionar. En ese caso tocar\u00e1 revisar el directorio de savestate correspondiente (en el caso de GB es <code>/media/data/local/home/.gambatte/saves</code>) y renombrar el fichero para que corresponda con el nuevo nombre de la ROM.</p> <p>Por \u00faltimo, un peque\u00f1o tutorial en video:</p>"},{"location":"2021-04-03_RG350_imagen.html#flasheo-de-la-imagen","title":"Flasheo de la imagen","text":"<p>La imagen est\u00e1 contenida en un \u00fanico fichero en formato <code>img.gz</code>. Esto significa que es un volcado directo de la tarjeta (<code>img</code>) comprimido (<code>gz</code>). El fichero tiene alrededor de 1GB de tama\u00f1o.</p> <p>Para flashear se recomienda utilizar el programa Balena Etcher que es capaz de utilizar este formato directamente adem\u00e1s de ser compatible con los tres sistemas principales (Windows, MacOS y Linux). La imagen se puede flashear en tarjetas de 4GB en adelante.</p> <p>En Linux resulta m\u00e1s r\u00e1pido y directo flashear con los siguientes comandos (sustituyendo el dispositivo <code>/dev/mmcblk0</code> del ejemplo por el que corresponda en nuestro caso):</p> <pre><code>$ sudo umount /dev/mmcblk0*\n$ gunzip panda_v10.1.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n</code></pre> <p>No se recomienda flashear sobre la misma tarjeta Toshiba que trae la consola de f\u00e1brica. Se han observado problemas de rendimiento y errores con ella. Mejor buscar una tarjeta de marca de garant\u00eda y que sea r\u00e1pida.</p> <p>En este v\u00eddeo puede verse el proceso de apertura de la consola y extracci\u00f3n de la tarjeta interna en la RG350 original (en RG350P/M y RG280V/M no es necesario), as\u00ed como el flasheo de una imagen con Balena Etcher en Windows. En el v\u00eddeo la imagen que se utiliza es la de ROGUE limpio (fichero <code>sd_image.bin</code>), pero el proceso para la imagen que se comenta aqu\u00ed (fichero <code>panda_v10.1.img.gz</code>, <code>mapache_v10.1.img.gz</code>, <code>vison_v10.1.img.gz</code> o <code>musarana_v10.1.img.gz</code> dependiendo de la versi\u00f3n de la consola) ser\u00eda el mismo sin m\u00e1s que seleccionar el fichero correspondiente en Balena Etcher. El formateo de la tarjeta que se hace en el v\u00eddeo en realidad no es necesario. El video s\u00f3lo es necesario seguirlo hasta el minuto 11:20, ya que a partir de ese punto lo que se hace es a\u00f1adir emuladores y juegos a la consola, cosas que en la imagen ya est\u00e1n incluidas.</p>"},{"location":"2021-04-03_RG350_imagen.html#seleccion-de-frontend-predeterminado","title":"Selecci\u00f3n de frontend predeterminado","text":"<p>Durante el primer arranque de la imagen, se ejecutan los procesos de ROGUE para consolidar el sistema. Esto supone varios reinicios. En alg\u00fan momento aparece un selector con cuatro opciones para elegir el launcher o frontend predeterminado:</p> <p></p> <p>S\u00f3lo hay que seleccionar el launcher preferido con la cruceta (arriba/abajo) y confirmar con <code>Start</code>. En ese momento la consola se reiniciar\u00e1 de nuevo y apareceremos en el launcher elegido. Si en cualquier momento se quiere cambiar de launcher se puede volver a lanzar el selector por medio de la aplicaci\u00f3n <code>Launcher selector</code>:</p> <p> </p>"},{"location":"2021-04-03_RG350_imagen.html#anadir-roms","title":"A\u00f1adir ROMs","text":"<p>La imagen no incorpora ROMs ni BIOS, por lo que deberemos incorporarlas nosotros. Todos los emuladores y frontends est\u00e1n preconfigurados para encontrar las ROMs en rutas concretas pertenecientes a la tarjeta externa. Estos son los directorios que hay que respetar para instalar ROMs (se muestra la ruta relativa a la tarjeta externa; como sabemos <code>roms/NEOGEO</code> por ejemplo, se corresponde con <code>/media/sdcard/roms/NEOGEO</code> en el sistema de la consola):</p> Ruta Sistema Extensiones admitidas roms/32X SEGA 32X .32x,.zip roms/A2600 Atari 2600 .bin,.a26 roms/A5200 Atari 5200 .a52 roms/A7800 Atari 7800 .a78 roms/AMIGA Commodore Amiga .adf,.sna,.zip roms/AMSTRAD Amstrad CPC .dsk,.hfe roms/ARCADE xMAME .zip roms/ATARIST Atari ST .st,.zip roms/C64 Commodore 64 .crt,.d64,.t64,.bin roms/COLECO ColecoVision .rom,.col roms/CPS CPS .zip roms/DAPHNE Daphne .zip roms/DOOM Doom .wad roms/DOSBOX DosBOX .bat,.exe,.com roms/FBA Final Burn Alpha .zip roms/FC Nintendo NES .nes,.zip roms/GB Nintendo GB .gb,.gz,.zip roms/GBA Nintendo GBA .gba,.zip roms/GBC Nintendo GBC .gbc,.zip roms/GG SEGA GG .gg,.zip roms/GW Nintendo G&amp;W .ws,.wsc roms/INTELLI Intellivision .int roms/JAZZ OpenJazz (port) roms/LYNX Atari Lynx .lnx,.zip roms/MAME2003 MAME2003 .zip roms/MAME4ALL MAME4All .zip roms/MD SEGA MD .bin,.smd,.md,.zip roms/MSX MSX .rom,.zip roms/NEOGEO Neo Geo .zip roms/NGP Neo Geo Pocket .ngp,.ngc roms/OUTRUN Cannonball (port) roms/PCE PC Engine .pce,.tg16,.cue roms/PCECD PC Engine CD .pce,.tg16,.cue roms/PICO8 PICO-8 .png roms/POKEMINI Pokemon Mini .zip roms/PS PlayStation .mdf,.cue, .bin,.img,.ccd,.sub,.zip,.pbp,.chd roms/QUAKE Quake .pak roms/SCUMMVM ScummVM .svm roms/SEGACD SEGA CD .cue roms/SFC Nintendo SNES .smc,.sfc,.zip roms/SMS SEGA MS .sms,.zip roms/SOLARUS Solarus (port) .zip roms/SUPERVISION Watara Supervision .sv roms/TIC80 TIC-80 .tic roms/VB Nintendo VB .vb roms/VIDEOPAC Phillips Videopac .bin roms/WSC WonderSwan .ws,.wsc roms/ZX ZX Spectrum .z80,.scl,.trd,.tzx,.csw,.tap OpenBOR/Paks OpenBOR (port) .pak <p>Advertencia: Ojo al caso de OpenBOR que se comporta de forma irregular al exigir una ruta fija en la tarjeta externa.</p> <p>En el caso de los sistemas para los que exista core RetroArch, tambi\u00e9n servir\u00e1n las extensiones <code>zip</code> y <code>7z</code>, ya que se soportan a nivel de framework. Tambi\u00e9n se soporta la extensi\u00f3n <code>chd</code> en los cores RetroArch de sistemas basados en CD, es decir <code>SEGACD</code> y <code>PCECD</code>.</p>"},{"location":"2021-04-03_RG350_imagen.html#anadir-bios","title":"A\u00f1adir BIOS","text":"<p>Todos los emuladores instalados en la imagen (RetroArch incluido) tienen redirigidas las rutas donde deben estar las BIOS al directorio <code>bios</code> en la tarjeta externa. De forma similar al caso de las ROMs, el directorio <code>bios</code> en la ra\u00edz de la tarjeta externa, se corresponder\u00e1 con la ruta <code>/media/sdcard/bios</code> en el sistema de la consola.</p> <p>No todos los emuladores necesitan BIOS. Es el caso de las m\u00e1quinas que no la ten\u00edan o cuya funci\u00f3n se ha podido emular. A continuaci\u00f3n se indica el fichero de BIOS que habr\u00e1 que localizar as\u00ed como el lugar donde lo deberemos colocar. Para ayudar a identificar los ficheros correctos, se indica su tama\u00f1o en bytes y un hash MD5. Se marcan tambi\u00e9n los casos en que la BIOS es imprescindible para que funcione el emulador. En caso de indicarse que <code>NO</code>, el emulador funcionar\u00e1, pero se recomienda instalarla de cara a conseguir la mayor compatibilidad de los juegos. Para comprobar los hashes MD5 se recomienda la utilidad multiplataforma Quickhash.</p> <p>Los tama\u00f1os y hashes indicados son de BIOS que se han comprobado funcionales, pero no necesariamente las \u00fanicas posibles. Es decir, en algunas m\u00e1quinas existen varias versiones de BIOS posibles, normalmente por haber existido varios modelos de las m\u00e1quinas (siendo el caso de la PlayStation uno de los m\u00e1s t\u00edpicos), o por haber desarrollado alguien BIOS con capacidades mejoradas (aqu\u00ed el caso t\u00edpico es el de Neo Geo y su UNIBIOS).</p> Sistema Ruta Tama\u00f1o Hash MD5 \u00bfNecesaria? Atari 5200 bios/5200.rom 2048 <code>281f20ea4320404ec820fb7ec0693b38</code> S\u00ed Atari ST bios/rom 196608 <code>036c5ae4f885cbf62c9bed651c6c58a8</code> S\u00ed SEGACD bios/bios_CD_E.bin 131072 <code>e66fa1dc5820d254611fdcdba0662372</code> S\u00ed SEGACD bios/bios_CD_J.bin 131072 <code>278a9397d192149e84e820ac621a8edd</code> S\u00ed SEGACD bios/bios_CD_U.bin 131072 <code>854b9150240a198070150e4566ae1290</code> S\u00ed Intellivision bios/exec.bin 8192 <code>62e761035cb657903761800f4437b8af</code> S\u00ed Intellivision bios/grom.bin 2048 <code>0cd5946c6473e42e8e4c2137785e427f</code> S\u00ed PC Engine CD bios/syscard3.pce 262144 <code>390815d3d1a184a9e73adc91ba55f2bb</code> S\u00ed Commodore Amiga bios/kick.rom 262144 <code>82a21c1890cae844b3df741f2762d48d</code> S\u00ed Nintendo Famicom Disk System bios/disksys.rom 8192 <code>ca30b50f880eb660a320674ed365ef7a</code> S\u00ed Atari Lynx bios/lynxboot.img 512 <code>fcd403db69f54290b51035d82f835e7b</code> S\u00ed Phillips Videopac bios/o2rom.bin 1024 <code>562d5ebf9e030a40d6fabfc2f33139fd</code> S\u00ed SNK Neo Geo bios/neogeo.zip 1950023 <code>36241192dae2823eaf3bf464dde6dbc6</code> S\u00ed en FBA, No en RetroArch Nintendo GBA bios/gba_bios.bin 16384 <code>a860e8c0b6d573d191e4ec7db1b1e4f6</code> No, aunque recomendable PlayStation bios/SCPH1001.BIN 524288 <code>924e392ed05558ffdb115408c263dccf</code> No, aunque muy recomendable"},{"location":"2021-10-30_raspi_zero_2_upgrade.html","title":"Raspberry Pi Zero 2 W upgrade","text":"<p>Justo hace tres a\u00f1os realic\u00e9 una instalaci\u00f3n de una Raspberry Pi Zero en una impresora 3D Anet A8 para gestionar las impresiones con el software OctoPrint. El uso de este modelo de Raspberry Pi no est\u00e1 recomendado, ya que la potencia de la misma es un poco ajustada. Yo mismo hab\u00eda notado que algunas impresiones complejas (sobre todo cuando hay muchas curvas), se ralentizaban ligeramente. No tanto como para que dejara de merecer la pena la instalaci\u00f3n, pero ciertamente la situaci\u00f3n no era conveniente. Tras el anuncio del nuevo modelo Raspberry Pi Zero 2 W en seguida pens\u00e9 que ser\u00eda perfecto para esta funci\u00f3n, as\u00ed que he procedido a la actualizaci\u00f3n. Aqu\u00ed describo los detalles del cambio.</p>"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#flasheo-octoprint","title":"Flasheo OctoPrint","text":"<p>Antes de flashear</p> <p>En esta instalaci\u00f3n vamos a rescatar la configuraci\u00f3n de la instalaci\u00f3n anterior, por lo que si queremos flashear sobre la misma tarjeta, habr\u00e1 que adelantar los pasos que se comentan en el apartado Configuraci\u00f3n OctoPrint</p> <p>Al igual que en la instalaci\u00f3n original, se utiliza la distribuci\u00f3n oficial que adem\u00e1s se puede instalar desde la utilidad Raspberry Pi Imager (se encuentra dentro de la secci\u00f3n <code>Other specific purpose OS</code>).</p> <p></p>"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#configuracion-de-red","title":"Configuraci\u00f3n de red","text":"<p>Una vez flasheado OctoPrint, lo primero que interesa es conseguir conectividad a trav\u00e9s de Wifi para poder continuar haciendo ajustes por SSH. El servicio SSH est\u00e1 activado por defecto en la imagen de OctoPrint. Para conseguir que la nueva instalaci\u00f3n de OctoPrint se conecte a mi router con una IP fija, hacemos lo siguiente:</p> <ol> <li>Montar la tarjeta recien flasheada en el PC.</li> <li>Editar el fichero <code>octopi-wpa-supplicant.txt</code> que hay en la partici\u00f3n boot.</li> <li>Descomentar el bloque que tiene la leyenda <code>## WPA/WPA2 secured</code>, sustituyendo los valores de mi SSID y password.</li> <li>Sustituir <code>UK</code> por <code>ES</code> en el par\u00e1metro <code>country</code> que hay casi al final.</li> <li>Editar el fichero <code>etc/dhcpcd.conf</code> que hay en la partici\u00f3n rootfs.</li> <li> <p>Al final del mismo a\u00f1adir las siguientes l\u00edneas (sustituyendo <code>IP</code>, <code>GATEWAY</code> y <code>DNS</code> por lo que corresponda):</p> <pre><code>interface wlan0\nstatic ip_address=IP/24\nstatic routers=GATEWAY\nstatic domain_name_servers=DNS\n</code></pre> </li> </ol> <p>Tras hacer estos cambios, insertar la tarjeta en la Pi Zero 2 y aliment\u00e1ndola (y esperando a que se reinicie un par de veces, ya que en el primer arranque se expande la partici\u00f3n rootfs para ocupar toda la tarjeta), se consigue acceder por SSH con el usuario <code>pi</code> y el habitual password <code>raspberry</code>. Lo primero que conviene hacer como el propio sistema se encarga de recomendar, es cambiar el password del usuario <code>pi</code> con el comando <code>passwd</code>.</p>"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#configuracion-de-puerto-serie","title":"Configuraci\u00f3n de puerto serie","text":"<p>Tal y como se coment\u00f3 en el art\u00edculo de la instalaci\u00f3n original, el puerto serie f\u00edsico que hay en el GPIO de Raspberry Pi est\u00e1 en uso por el adaptador Bluetooth integrado. Hay que desactivar este adaptador y la consola serie que se asocia al mismo que nos da la posibilidad de iniciar sesi\u00f3n por el puerto serie. Para ello hacemos lo siguiente:</p> <ol> <li>Volver a montar la microSD en el PC.</li> <li>Editar el fichero <code>config.txt</code> que hay en la partici\u00f3n boot.</li> <li> <p>A\u00f1adir al final las lineas siguientes:</p> <pre><code>dtoverlay=pi3-miniuart-bt\nenable_uart=1\n</code></pre> </li> <li> <p>Volver a poner la microSD en la Raspberry y arrancar el sistema.</p> </li> <li>Tras iniciar sesi\u00f3n por SSH ejecutar la utilidad <code>raspi-config</code> con <code>sudo</code>.</li> <li> <p>Acudir a la secci\u00f3n <code>Interfacing options &gt; Serial</code> y responder de la siguiente forma a las dos preguntas que se har\u00e1n:</p> <ul> <li>Would you like a login shell to be accessible over serial? -&gt; No</li> <li>Would you like the serial port hardware to be enabled? -&gt; Yes</li> </ul> </li> <li> <p>Reiniciar.</p> </li> </ol>"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#conexion-fisica","title":"Conexi\u00f3n f\u00edsica","text":"<p>Vamos a aprovechar el viejo adaptador artesanal que se realiz\u00f3 para la instalaci\u00f3n original. Tras desoldarlo, esta vez instalamos una tira de pins hembra en el adaptador y una macho en la Raspi Zero 2, para poder extraerla de la impresora y utilizarla para otros proyectos cuando la impresora est\u00e9 parada.</p> <p></p> <p></p> <p></p>"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#configuracion-octoprint","title":"Configuraci\u00f3n OctoPrint","text":"<p>En este caso vamos a aprovechar la configuraci\u00f3n anterior de OctoPrint generando un backup y carg\u00e1ndolo en la nueva instalaci\u00f3n. Para ello:</p> <ol> <li>Arrancar la vieja instalaci\u00f3n.</li> <li>Acudir a la siguiente ruta en el interfaz web: <code>Settings (llave inglesa) &gt; OCTOPRINT &gt; Backup &amp; Restore</code>.</li> <li>All\u00ed pulsar el bot\u00f3n <code>Create backup now</code>.</li> <li> <p>Tras esperar un buen rato aparecer\u00e1 una entrada en el listado de backups realizados:</p> <p></p> </li> <li> <p>Pulsar el icono de descarga para obtener el fichero zip.</p> </li> <li>Apagar la vieja instalaci\u00f3n y arrancar la nueva.</li> <li>Al abrir el interfaz web encontraremos un asistente, siendo el primer paso precisamente el que permite cargar el backup.</li> </ol>"},{"location":"2021-10-30_raspi_zero_2_upgrade.html#finalizacion","title":"Finalizaci\u00f3n","text":"<p>Tras este paso ya habr\u00edamos terminado. S\u00f3lo quedar\u00eda instalar la Raspi Zero 2 en el lugar que ocupaba la vieja, tal y como se ve\u00eda en la imagen de cabecera.</p>"},{"location":"2022-04-17_vr.html","title":"Aventuras en VR","text":"<p>El 17 de febrero de 2022 utilic\u00e9 por primera vez unas Oculus Quest 2. Menciono la fecha porque siento que puede ser un punto de inflexi\u00f3n en mi vida. Supongo que suena exagerado, pero ese d\u00eda me convenc\u00ed de repente de todos los pron\u00f3sticos hechos en tantas pel\u00edculas y libros de ciencia ficci\u00f3n. Bien utilizada, la realidad virtual puede ser una herramienta potent\u00edsima para expandir o permitir la entrada a terrenos de dif\u00edcil acceso para muchas personas. Pero el prop\u00f3sito de este post no era hablar de filosof\u00eda, sino reflejar algunos de los aprendizajes que he hecho desde ese d\u00eda por si alguien se decide a recorrer la senda hacia este nuevo \"nuevo mundo\".</p> <p>Hay actualmente en el mercado muchas otras gafas de realidad virtual, pero aqu\u00ed me voy a restringir a lo que conozco, las Oculus/Meta Quest 2 (a partir de ahora utilizar\u00e9 s\u00f3lo el nombre Oculus por ser el m\u00e1s representativo de la historia de estas gafas). Estas \u00faltimas son las que m\u00e1s cuota de mercado tienen actualmente seguidas por las PlayStation VR. El resto de gafas del mercado pertenecen al mismo tipo que las segundas, es decir vinculadas a otro dispositivo como una PS4 o un PC. La propuesta de Oculus difiere en cuanto a que las gafas son independientes o autosuficientes. Tienen menos potencia bruta que el resto, pero a cambio tienen otras ventajas. Ser\u00edan un poco equivalentes al concepto de la Nintendo Switch, que sin poderse comparar en potencia a las consolas de \u00faltima generaci\u00f3n del resto de fabricantes, sacan provecho a sus limitaciones por la v\u00eda de la portabilidad y el menor precio. Menciono todo esto m\u00e1s que nada porque los conceptos, mercado y dispositivos auxiliares que mencionar\u00e9 a continuaci\u00f3n, en su mayor\u00eda no van a poder ser trasladables a otras plataformas.</p> <p>Considero las Oculus Quest 2 lo que los ingleses llaman un MVP (Minimum Viable Product). Es decir, se nota que en su dise\u00f1o se han resuelto la mayor\u00eda de los compromisos con el criterio de tener algo funcional y v\u00e1lido pero al menor coste posible. El producto final es funcional desde un principio, pero tiene margen de mejora y se deja al usuario el trabajo de (si lo estima oportuno) abordar esas mejoras sustituyendo algunas de las piezas o adquiriendo accesorios. Varios de los apartados siguientes cubren algunos de esos aspectos que se pueden mejorar.</p>"},{"location":"2022-04-17_vr.html#obtener-aplicaciones","title":"Obtener aplicaciones","text":"<p>En general los juegos/experiencias/aplicaciones (a partir de ahora los llamaremos \"contenidos\") se obtienen de la Oculus Store. Hay que decir que los precios en general son considerablemente m\u00e1s altos que en plataformas VR del ambiente PC. Oculus Quest 2 se puede considerar una consola de videojuegos, y los precios de los contenidos suelen estar acorde a lo que se encuentra en ese terreno. El sistema de las gafas en realidad es Android y podr\u00eda pensarse que los precios estar\u00edan en la l\u00ednea de lo que se ve en la tienda de Google. Supongo que el list\u00f3n de precios superior est\u00e1 relacionado con el mayor coste de producci\u00f3n que tienen los contenidos VR respecto a los habituales en Android. Pero como comentaba antes, el mismo juego en SteamVR para PC/gafas no independientes, puede costar el 20% de lo que cuesta en la tienda de Oculus. La buena noticia es que para empezar hay una buena cantidad de contenidos gratuitos como luego veremos.</p> <p>La Oculus Store tiene criterios muy extrictos para permitir la entrada de contenidos. Por ese motivo, al principio de la comercializaci\u00f3n de las gafas, surgi\u00f3 un mercado paralelo no controlador por la marca llamado Sidequest. Dentro de esta \"tienda alternativa\" adem\u00e1s de haber contenidos que como dec\u00eda antes no podr\u00edan entrar en la tienda oficial por los filtros que \u00e9sta tiene, hay mucho material indie muchas veces gratuito. Tambi\u00e9n demos de aplicaciones finales en las que se puede probar parte del contenido antes de adquirirlo. La pega es que hay que realizar algunas manualidades para conseguir instalar los contenidos que s\u00f3lo est\u00e1n en Sidequest. No es complicado; hay que activar el modo desarrollador en las gafas, abrir una cuenta de desarrollador (gratuita) y conectar las gafas a un PC por USB.</p> <p>Como Oculus se dio cuenta de que Sidequest estaba desviando la atenci\u00f3n de su Oculus Store oficial, finalmente abri\u00f3 un programa para aceptar todos esos contenidos que no pod\u00edan entrar en la tienda y que terminaban en Sidequest. Se llama App Lab y est\u00e1 parcialmente integrado en la tienda oficial. Los contenidos de App Lab no aparecen en las b\u00fasquedas de la tienda oficial, pero los enlaces desde App Lab permiten instalar con la tienda oficial sin tener que hacer manualidades como en Sidequest. S\u00f3lo recibiremos un aviso al instalar en el que se nos recuerda que lo que vamos a instalar puede tener fallos o no estar terminado del todo.</p> <p></p> <p>Una cuarta v\u00eda para acceder a contenidos es utilizar el navegador web integrado en el sistema y acceder a los cada vez m\u00e1s numerosos contenidos compatibles con los est\u00e1ndares WebXR y OpenXR. Hay incluso sitios especializados en estos contenidos, como por ejemplo ConstructArcade. Esta tecnolog\u00eda es muy accesible. Si se tiene inter\u00e9s recomiendo echar un vistazo a los ejemplos de c\u00f3digo que pueden encontrarse aqu\u00ed. Me cost\u00f3 5 minutos improvisar esta escena VR con el logo de niubit.</p>"},{"location":"2022-04-17_vr.html#devolucion-aplicaciones","title":"Devoluci\u00f3n aplicaciones","text":"<p>Existe una pol\u00edtica de devoluci\u00f3n de aplicaciones en la tienda oficial que mitiga en parte el v\u00e9rtigo que producen los altos precios para adquirir algo que no se ha podido ver antes (y en el mundo VR esto es algo habitual, ya que un v\u00eddeo de YouTube o un art\u00edculo de un blog no puede transmitir la inmersi\u00f3n). Las condiciones para solicitar la devoluci\u00f3n son:</p> <ol> <li>Hacerlo antes de 14 d\u00edas desde la compra.</li> <li>No haber utilizado la aplicaci\u00f3n por m\u00e1s de 2 horas.</li> </ol>"},{"location":"2022-04-17_vr.html#ofertas-y-cupones","title":"Ofertas y cupones","text":"<p>Como comentaba antes, los precios de los contenidos en la tienda oficial son en general elevados. Los juegos punteros suelen rondar los 19/29\u20ac. Algunos se acercan a los 40\u20ac. No s\u00e9 si por este motivo Oculus ha implantado varios mecanismos para hacer m\u00e1s accesibles/apetecibles los contenidos. Los mecanismos son los siguientes:</p> <ul> <li>Descuentos temporales</li> <li>Cupones temporales</li> <li>Regalo de cr\u00e9dito por recomendaci\u00f3n</li> </ul> <p>Veamos cada uno de los sistemas por separado.</p>"},{"location":"2022-04-17_vr.html#descuentos-temporales","title":"Descuentos temporales","text":"<p>Se trata simplemente de ofertas que duran unos d\u00edas. Son muy frecuentes, por lo que he desarrollado el h\u00e1bito de esperar a que el contenido que me interese se ponga en oferta. Por ejemplo, en los s\u00f3lo dos meses de tiempo que llevo atento a la tienda, uno de los juegos que me gustan ha estado dos veces de oferta como puede verse en el siguiente pantallazo que acabo de hacer:</p> <p></p> <p>En la ficha de detalle del contenido se indica claramente la duraci\u00f3n de la oferta con una cuenta atr\u00e1s que incluye segundos, por lo que tendremos un control muy preciso sobre la duraci\u00f3n de la misma.</p> <p>Esta p\u00e1gina recopila las ofertas y aplicaciones gratuitas que hay en cada momento.</p>"},{"location":"2022-04-17_vr.html#cupones-temporales","title":"Cupones temporales","text":"<p>Son cupones de descuento personales que llegan a trav\u00e9s de notificaciones en la aplicaci\u00f3n Oculus que se instala en el tel\u00e9fono. En los dos meses que llevo he recibidos dos cupones de este tipo, uno con un 25% de descuento y otro con un 30%. El cup\u00f3n suele durar una semana y se puede aplicar s\u00f3lo a una compra. Los cupones de este tipo se pueden acumular con los descuentos temporales anteriores por lo que combinando ambos descuentos se puede adquirir un contenido pr\u00e1cticamente por la mitad de precio.</p> <p>Comentar sobre los cupones temporales que si se aplican sobre un contenido que luego devolvemos, se nos devuelve el importe de la aplicaci\u00f3n sin aplicar el cup\u00f3n, es decir que nos devuelven m\u00e1s cr\u00e9dito del que nos cobraron al hacer la compra con el cup\u00f3n aplicado. No s\u00e9 si se trata de un fallo de la plataforma o algo deliberado, pero esto anima a utilizar los cupones temporales antes de que caduquen. As\u00ed, si tenemos un cup\u00f3n del 30% pr\u00f3ximo a caducar, merece la pena arriesgarnos a comprar una aplicaci\u00f3n con \u00e9l para probarla y luego devolverla. Obtendremos el descuento que lograba el cup\u00f3n como sobrecr\u00e9dito para adquirir otros contenidos en el futuro. Es decir en cierto modo conseguiremos romper la fecha de caducidad del cup\u00f3n.</p>"},{"location":"2022-04-17_vr.html#regalo-de-credito-por-recomendacion","title":"Regalo de cr\u00e9dito por recomendaci\u00f3n","text":"<p>Finalmente, existe un programa de recomendaci\u00f3n por el cual si un amigo activa la cuenta que luego utiliza en unas gafas nuevas por medio de un enlace que nosotros le enviamos, el amigo recibe inmediatamente 30\u20ac de cr\u00e9dito para la Oculus Store (para hardware y software) y nosotros tambi\u00e9n recibimos 30\u20ac, aunque pasado un mes.</p> <p>Si alguien piensa adquirir las gafas y no tiene a nadie que le env\u00ede el enlace de recomendaci\u00f3n, que me lo pida :-)</p>"},{"location":"2022-04-17_vr.html#mareo","title":"Mareo","text":"<p>Cuando se habla de realidad virtual, uno de las primeras cuestiones que surgen es la del mareo. Precisamente fue el principal motivo por el que no me lanc\u00e9 directamente a por las Quest cuando las conoc\u00ed. Como casi siempre los temores se disiparon al escuchar a alguien de confianza y con experiencia en el tema hablando de ello. Resumo a continuaci\u00f3n las ideas que tengo sobre esta cuesti\u00f3n ahora mismo.</p> <p>Para empezar, y de forma muy superficial, comentar\u00e9 que el mareo se produce fundamentalmente por la discrepancia en la percepci\u00f3n de movimiento entre los distintos sentidos, sobre todo el del equilibrio (el o\u00eddo interno que mide las aceleraciones y giros que sufre el cuerpo) y el de la vista. Aqu\u00ed hay que volver a hablar de la diferencia entre las gafas dependientes (del PC o la PlayStation) y las independientes como Quest. En las primeras, si nos enfrentamos a una experiencia que requiere desplazarnos, como puede ser visitar la recreaci\u00f3n de un castillo, por ejemplo, no tendremos m\u00e1s remedio que indicar los desplazamientos con los mandos. En Quest, siempre que nos movamos dentro del espacio de seguridad que tengamos definido para jugar, podremos desplazarnos con nuestros pies, es decir caminando normalmente. Lo primero puede llegar a marear, lo segundo rotundamente no. Naturalmente con Quest en algunas experiencias tambi\u00e9n necesitaremos alg\u00fan tipo de mecanismo de movimiento con los mandos, ya que el espacio de seguridad es limitado. As\u00ed que vamos a hablar algo m\u00e1s sobre en qu\u00e9 consisten estos desplazamientos con los mandos.</p> <p>El desplazamiento con los mandos puede ser de varios tipos, vamos a describirlos por separado:</p> <ul> <li>Suave: Ser\u00eda el equivalente al que se utiliza en los videojuegos cl\u00e1sicos (no VR), es decir el que indicamos con la cruceta o el stick. \u00c9ste es con diferencia el sistema de movimiento que m\u00e1s marea, sobre todo en movimientos r\u00e1pidos y laterales. Si son movimientos lentos y sobre todo hacia delante, no suele haber demasiado problema. Este tipo de movimiento es casi imprescindible en los populares juegos tipo FPS, por lo que no se recomienda empezar por este tipo de juegos. La mayor\u00eda de las personas hablan de que con el tiempo se desarrollan unas \"piernas virtuales\" o \"piernas VR\" y el mareo deja de aparecer al utilizar este sistema de movimiento. Como casi todos los problemas que queramos superar, requiere que nos enfrentemos a \u00e9l, es decir que lo pasemos mal durante una temporada mientras desarrollamos esas \"piernas virtuales\". Se supone que durante esta fase de aprendizaje ayuda el simular el movimiento en la realidad dando peque\u00f1os pasos (sin avanzar) mientras ejecutamos con el mando el gesto de avanzar. Tambi\u00e9n se recomienda hacer movimientos m\u00e1s lentos al principio, lo que normalmente se puede controlar ya que el desplazamiento se suele realizar con los sticks anal\u00f3gicos. Yo todav\u00eda estoy en ello, sobre todo porque los FPS son los juegos que menos me llaman.</li> <li>Desplazamiento con gestos: En este caso tambi\u00e9n vamos a conseguir desplazarnos suavemente y sin realizar un desplazamiento en la realidad, pero en lugar de utilizar el mando para indicar el sentido en que queremos movernos, lo haremos con alg\u00fan gesto con las manos. Por alg\u00fan motivo nuestro cerebro no tiene tantos problemas para gestionar la discrepancia en los sentidos al hacerlo de esta forma. Dos ejemplos:<ul> <li>Gorilla Tag: Este juego es un poco el paradigma de lo que hablamos. Para avanzar en este juego de persecuci\u00f3n entre \u00e1rboles la \u00fanica forma es impulsarnos hacia delante golpeando el suelo con nuestras manos, como si salt\u00e1ramos con ellas.</li> <li>Mission: ISS: Quest: Fue una de las primeras experiencias VR que disfrut\u00e9. Es una recreaci\u00f3n de la ISS. En el tutorial te ense\u00f1an a moverte por el interior de la estaci\u00f3n flotando como hacen los astronautas, impuls\u00e1ndonos con uno de los sticks, es decir con un movimiento \"suave\". El resultado fue un mareo inmediato. Luego descubr\u00ed (seguramente lo menciona el propio tutorial, ya no recuerdo) que tambi\u00e9n me pod\u00eda impulsar con las manos desde alg\u00fan agarre. O simplemente golpeando una pared como en Gorilla Tag. De esa manera el mareo no surgi\u00f3.</li> </ul> </li> <li>Teletransporte: En este caso se\u00f1alamos con el mando el punto al que nos queremos desplazar y aparecemos all\u00ed instant\u00e1neamente. Esta forma de desplazamiento no marea nada en absoluto, pero dependiendo del tipo de juego puede arruinar la experiencia, ya que si los desplazamientos tienen que ser muy r\u00e1pidos, tendremos la sensaci\u00f3n de que estamos viendo una de esas pel\u00edculas actuales de superh\u00e9roes en las que el director no es capaz de mantener el plano 2 segundos. Es perfecta sin embargo para juegos reposados como Walkabout Mini Golf. Hablando de este juego, comentar que en \u00e9l se combinan las dos t\u00e9cnicas que menos marean (desplazamiento con nuestros pies dentro del espacio de seguridad y teletransporte), pero hay que decir que ambos sistemas encajan a la perfecci\u00f3n a la din\u00e1mica del mini golf.</li> </ul> <p>Otro aspecto que puede desembocar en mareo es el de la baja tasa de refresco, que puede llegar a producir mareo, ya no al desplazarnos dentro del entorno virtual, sino simplemente al girar la cabeza. En el fondo se trata de otra versi\u00f3n del mismo problema, es decir, si la tasa de refresco es muy baja (pongamos 30Hz), al hacer un giro r\u00e1pido de la cabeza vamos a ver una secuencia de 2 \u00f3 3 frames que se repartir\u00e1n a lo largo del giro, habiendo por tanto mucha discrepancia entre lo que vemos y lo que nuestro cerebro esperar\u00eda percibir. Este problema se puede decir que a d\u00eda de hoy ya no existe, es decir era algo que afectaba a las gafas de generaciones anteriores. Quest 2 trabaja por ejemplo a 90Hz en general y se puede incluso overclockear a 120Hz a costa de menor duraci\u00f3n de la bater\u00eda. Con esas tasas de refresco este problema se puede considerar resuelto.</p>"},{"location":"2022-04-17_vr.html#aplicaciones-recomendables","title":"Aplicaciones recomendables","text":"<p>Lo siguiente es una lista de los contenidos m\u00e1s interesantes que he encontrado para las Oculus Quest 2 hasta ahora.</p> <ul> <li>Anne Frank House VR: [gratis] Reproducci\u00f3n y visita guiada (en varios idiomas incluido el espa\u00f1ol) de la casa donde Anne estuvo escondida con 7 personas m\u00e1s durante dos a\u00f1os. \u00c1ltamente recomendable.</li> <li>Apollo 11: [9,99\u20ac] Recreaci\u00f3n de varias maniobras clave del viaje del Apollo 11. S\u00f3lo para espaciotrastornados. Al resto seguramente no le compense pagar los 10\u20ac.</li> <li>Arkio: [gratis] Aplicaci\u00f3n de dise\u00f1o arquitect\u00f3nico. No la tengo muy explorada. Antes me pondr\u00eda con Gravity Sketch.</li> <li>ARK-ADE Demo: [gratis] La descubr\u00ed entre las aplicaciones similares a Cartidge'81 y en seguida llam\u00f3 mi atenci\u00f3n. Es un shooter on rails como aquel, mucho m\u00e1s avanzado pero a la vez m\u00e1s caro. \u00c9sta es la demo.</li> <li>Bait!: [gratis] Juego de pesca bastante simp\u00e1tico. Es sencillo y relajante y tambi\u00e9n resulta una experiencia muy accesible cuando se empieza.</li> <li>Beat Saber - Demo: [gratis] Beat Saber es una de las aplicaciones m\u00e1s populares de la plataforma. Pero como coment\u00e1bamos en el apartado correspondiente, eso suele significar unos 30\u20ac. Termin\u00e9 comprando la aplicaci\u00f3n completa utilizando uno de los peri\u00f3dicos cupones. Al principio estuve a punto de devolverla porque a pesar de que la aplicaci\u00f3n me parece casi perfecta, la selecci\u00f3n de temas dista bastante de mis gustos personales. La mayor\u00eda parecen temas motivadores de estos que ponen en los gimnasios o en algunas tiendas de ropa. Al final encontr\u00e9 unos pocos temas pasables y la calidad y el inter\u00e9s que tengo en experiencias deportivas hizo que la mantuviera.</li> <li>Bigscreen Beta: [gratis] Una especie de sala de cine privada o p\u00fablica (hay varias opciones) en la que ver acompa\u00f1ado de otras personas contenidos de v\u00eddeo ya sea propuestos por la propia plataforma, alojados en la red o que tengan en posesi\u00f3n todos los que est\u00e1n en la sala. No lo he probado, pero en teor\u00eda si un mismo fichero lo tuvi\u00e9ramos un amigo y yo, podr\u00edamos verlo juntos.</li> <li>Bogo: [gratis] Una especie de Tamagotchi, es decir una mascota que tienes que cuidar/jugar/alimentar. Reconozco que s\u00f3lo lo he abierto un par de veces, pero viene bien aunque s\u00f3lo sea para ense\u00f1ar la VR a las visitas.</li> <li>Cartridge'81: [4,99\u20ac] Shooter on rails de est\u00e9tica retro. No tiene mucho recorrido, pero siempre me han gustado los juegos de disparo (de punter\u00eda m\u00e1s que los FPS) y este encaja bastante en mi gusto.</li> <li>Crisis VRigade: [4,99\u20ac] Uno de mis juegos favoritos de todos los tiempos es Time Crisis de PlayStation. Los aficionados a los juegos de pistola saben que es un g\u00e9nero que se perdi\u00f3 cuando la tecnolog\u00eda de los televisores pas\u00f3 del CRT a las pantallas planas LCD/Plasma. Por lo visto, salvando las distancias de la precisi\u00f3n que permit\u00eda la combinaci\u00f3n pistola/CRT, este g\u00e9nero ha reaparecido en el ambiente VR. As\u00ed que cuando localic\u00e9 este juego gracias a la recomendaci\u00f3n de un amigo, me lanc\u00e9 a por \u00e9l. Realmente el t\u00edtulo del juego parece hacer referencia a Time Crisis. Crisis VRigade es un juego que tiene algunos a\u00f1os y viene de otras plataformas, por lo que los gr\u00e1ficos no son muy punteros. Existe una segunda parte con gr\u00e1ficos m\u00e1s propios de las Quest 2 pero cuesta 19,99\u20ac y adem\u00e1s no est\u00e1 en espa\u00f1ol. Hasta que no termine el primero no considero adquirir el segundo. A\u00fan no lo tengo muy jugado (maldito Walkabout), pero lo poco que prob\u00e9 me gust\u00f3 mucho. Realmente lo m\u00e1s cercano a Time Crisis que recuerdo.</li> <li>ConstructArcade: [gratis - web] Recopilaci\u00f3n de minijuegos realizados sobre WebXR.</li> <li>DeoVR Quest: [gratis] Se trata de un media player. \u00datil para reproducir contenidos de v\u00eddeo que hayamos copiado a las gafas o que tengamos accesible por red en nuestro ordenador o NAS (realmente esto \u00faltimo no lo he probado a\u00fan).</li> <li>Echo VR: [gratis] Uno de los juegos m\u00e1s populares. De nuevo no he pasado del tutorial inicial pero realmente no me cuesta imaginar que ser\u00e1 interesante. Es una especie de balonmano multijugador en ingravidez. Habr\u00e1 que explorarlo.</li> <li>Eleven Table Tennis: [19,99\u20ac] La primera aplicaci\u00f3n que compr\u00e9 y una de mis favoritas. El juego tiene unos men\u00fas muy mejorables, pero una vez que arrancas las partidas es simplemente de 10. Juego habitualmente con un amigo y los dos opinamos que es dif\u00edcilmente mejorable en ese aspecto. Dadas las caracter\u00edsticas del Ping Pong, en cuanto al espacio necesario para jugarlo y los esfuerzos que requiere (peso de paleta y pelota) encaja a la perfecci\u00f3n en la simulaci\u00f3n VR. Con el tenis de tama\u00f1o real por ejemplo habr\u00eda que llegar a algunos compromisos. Eso s\u00ed, por la velocidad del juego, para jugar con un oponente humano hay que vigilar la latencia de la conexi\u00f3n.</li> <li>Elixir: [gratis] Otro imprescindible, aunque en este caso de corto recorrido, es decir, se termina en seguida y sabe a poco, pero es perfecto. No quisiera spoilear la experiencia, simplemente hay que disfrutarlo. Uno de los pocos con el audio en espa\u00f1ol y de calidad.</li> <li>Goliath: Playing with Reality: [gratis] Esta experiencia es inclasificable. Es en general una historia, aunque extra\u00f1a, muy extra\u00f1a. En algunos pasajes hay bastante interacci\u00f3n, aunque en general hay que dejarse llevar. Muy interesante.</li> <li>Gorilla Tag: [gratis] Un juego inclasificable. Es muy indie y los gr\u00e1ficos parecen no estar a la altura, pero de nuevo creo que es un juego multiplataforma y desde luego no parece venir de un gran estudio. Pero desde luego es interesante. Es jugar al \"tu la llevas\" con m\u00e1s gente a la que escuchas hablar desde lejos (se montan unos jaleos majos; en ingl\u00e9s naturalmente). Cuesta un poco pillar la forma en la que hay que desplazarse, que es golpeando con las manos en el suelo para salir impulsados en sentido contrario. Para subir a los \u00e1rboles hay que sujetar el tronco entre las manos e impulsarnos hacia arriba.</li> <li>Gravity Sketch: [gratis] M\u00e1s que un juego o una experiencia es una aplicaci\u00f3n en el sentido tradicional. De dise\u00f1o 3D en concreto. Es por ejemplo la aplicaci\u00f3n que utilizan los dise\u00f1adores de los circuitos de Walkabout Mini Golf como puede verse en este v\u00eddeo.</li> <li>Half + Half: [gratis] Un juego social sencillamente encantador. Dentro del mundo de Half + Half adoptamos la apariencia de un monigote de l\u00edneas redondeadas y voz distorsionada. Todo parece pensado para que no sea posible el abuso entre los jugadores. Todo se dulcifica de manera que se pueden compartir las experiencias de juego con otros jugadores an\u00f3nimos de forma agradable y sin conflictos.</li> <li>INVASION!: [gratis] Historia 3D con un ligero toque de interacci\u00f3n. De nuevo ideal para visitas.</li> <li>Liminal: [gratis] Tampoco lo tengo muy explorado, pero es una serie de experiencias relajantes cercanas a la meditaci\u00f3n.</li> <li>Maloka: [gratis] Muy similar al anterior. Comentar que me atrajo porque uno de los narradores parece ser Neil de Grasse Tyson, aunque no he conseguido verificarlo en los cr\u00e9ditos de la aplicaci\u00f3n.</li> <li>Mission: ISS: Quest: [gratis] Imprescindible para espaciotrastornados. Es una reproducci\u00f3n 3D de la Estaci\u00f3n Espacial Internacional en la que te puedes mover libremente resolviendo algunos retos sencillos que te van proponiendo. Comentar que fue la primera vez que experiment\u00e9 el famoso mareo VR, pero hay un truco y es desplazarse utilizando las manos en lugar del stick anal\u00f3gico que controla el desplazamiento suave, empujando las paredes como hacen los astronautas en la realidad.</li> <li>MoonRider: [gratis - web] Clon de Beat Saber realizado sobre WebXR, por tanto hay que abrirlo con el navegador web de las gafas. Los contenidos est\u00e1n creados por la comunidad en base a canciones obtenidas de servidores p\u00fablicos como YouTube (esto lo supongo yo), por lo que podemos encontrar cientos de canciones populares f\u00e1cilmente.</li> <li>Nocturne: [gratis] Una especie de Gitar Hero de m\u00fasica cl\u00e1sica. Cuesta hacerse con el manejo, pero si te gusta la m\u00fasica cl\u00e1sica dale una oportunidad porque pueden salir sonidos interesantes.</li> <li>Notes on blindness: [gratis] Experiencia dedicada a explicar c\u00f3mo perciben el mundo las personas ciegas.</li> <li>Oculus First Contact: [gratis] Cuando arrancan las gafas por primera vez se nos abre una aplicaci\u00f3n llamada Primeros pasos (en realidad no estoy seguro de si se abre autom\u00e1ticamente o se nos sugiere; no recuerdo). \u00c9sta otra es una aplicaci\u00f3n muy parecida que llevaban las Oculus Quest originales. Es distinta a la Primeros pasos, pero tambi\u00e9n merece mucho la pena, sobre todo para ense\u00f1ar la VR a las visitas.</li> <li>On the morning you wake (to the end of the world): [gratis] Experiencia sobre un incidente ocurrido en Hawaii hace unos pocos a\u00f1os por el que la poblaci\u00f3n recibi\u00f3 una alerta de ataque con misiles a las islas. Est\u00e1 recreado todo con foto gravimetr\u00eda.</li> <li>Pavlov Shack beta: [gratis] Todav\u00eda no he jugado a este juego. Pertenece al g\u00e9nero del FPS (First Person Shooter) que no es de mis favoritos. Reconozco que lo he instalado por si en el futuro lo aceptan en la Oculus Store oficial y deja de ser gratuito, para tenerlo ya adquirido. Seg\u00fan todo el mundo, uno de los buenos FPS que hay para las Quest 2. Supongo que marear\u00e1, eso s\u00ed.</li> <li>Rec Room: [gratis] Juego social al que no le he dado muchas oportunidades todav\u00eda (no he terminado el tutorial de introducci\u00f3n). A pesar de que no tiene los gr\u00e1ficos m\u00e1s avanzados (seguramente por ser una experiencia multiplataforma), todo el mundo comenta que junto a VRChat es otro de los Metaversos m\u00e1s establecidos. Dentro podemos encontramos juegos de grupo como por ejemplo tipo Laser Tag, parques acu\u00e1ticos, parkour, roc\u00f3dromos, etc. Incluso podemos dise\u00f1ar nuestros propios juegos.</li> <li>Space Explorers: [gratis] De nuevo imprescindible para espaciotrastornados. En este caso son v\u00eddeos 360\u00ba grabados en la ISS. La imagen es real por tanto en este caso, no sint\u00e9tica como en Mission: ISS: Quest, pero a cambio nosotros no podemos elegir el punto de vista sino que somos meros pasajeros.</li> <li>SUPERHOT VR - Demo: [gratis] Otro de esos juegos que hay que probar al menos y que podemos hacer gracias a la demo.</li> <li> <p>Tea For God: [gratis] Este juego est\u00e1 en mi podium personal. El juego es de tipo infiltraci\u00f3n. Su principal virtud est\u00e1 en la forma en que aprovecha el espacio de juego real de que disponemos. Genera una red de laberintos imposibles (porque se cruzan los pasillos aunque nosotros no seamos conscientes) de manera que tienes la sensaci\u00f3n de estar explorando un espacio mucho mayor del que tenemos para jugar. Pongo a continuaci\u00f3n un v\u00eddeo que le grab\u00e9 a un amigo, aunque como siempre es imposible transmitir la sensaci\u00f3n de inmersi\u00f3n que produce que es total.</p> <p></p> </li> <li> <p>The Key: [gratis] La primera historia/pel\u00edcula VR que disfrut\u00e9 en las gafas. Y una de las mejores de todas las que he visto. Claro exponente del nuevo cine que est\u00e1 llegando gracias a esta tecnolog\u00eda.</p> </li> <li>The world beyond: [gratis] Mini juego/experiencia para probar las nuevas capacidades de realidad mixta que Meta incorpor\u00f3 al sistema operativo a partir de la v40 aproximadamente.</li> <li>VR Animation Player: [gratis] Otra que no tengo muy explorada. Es un visor de contenidos de animaci\u00f3n. Animaci\u00f3n VR se entiende, es decir consumir estos contenidos desde dentro de las propias animaciones.</li> <li>VRChat: [gratis] Una de las aplicaciones imprescindibles de la plataforma que todav\u00eda no he explorado pero que me atrevo a recomendar. En algunos sitios se lee que es uno de los 2 \u00f3 3 Metaversos consolidades que existen en la actualidad.</li> <li>VRtuos: [gratis] Piano virtual en el que se puede mapear un teclado real para sentir las teclas reales cuando las pulsamos en VR. De esta forma se pueden aprender piezas jugando de forma parecida a Guitar Hero.</li> <li>Walkabout Mini Golf: [14,99\u20ac] En mi opini\u00f3n el primer imprescindible de todo lo que llevo visto. Se trata de circuitos de mini golf en ambientes encantadores. De momento existen 8 circuitos abiertos y 3 DLCs. Cada uno de los circuitos tiene un modo m\u00e1s dif\u00edcil que se desbloquea al encontrar bolas ocultas en cada uno de los hoyos del recorrido normal. Luego en el recorrido dif\u00edcil hay un juego de acertijos para encontrar tesoros ocultos que nos permiten obtener un objeto de regalo que no voy a desvelar. Tanto estos minijuegos escondidos como el propio juego principal, es decir el mini golf, nunca cansan. De hecho este juego es el culpable de que la exploraci\u00f3n del mundo VR que empec\u00e9 ese 17 de febrero se volviera much\u00edsimo m\u00e1s lenta desde que lo adquir\u00ed a las dos semanas. Suelo terminar todos los d\u00edas haciendo al menos 9 hoyos para relajarme antes de dormir. Lo dicho, imprescindible.</li> <li>We Live Here: [gratis] Representante de lo que puede considerarse una nueva forma de cine gracias al VR. Nos cuenta una historia con cierto nivel de interacci\u00f3n. Este tipo de contenidos no suelen tener mucho recorrido, es decir no duran mucho ni deber\u00eda apetecernos consumirlo m\u00e1s de un par de veces, pero de nuevo es algo que hay que ver y ense\u00f1ar a las visitas.</li> <li>Within: [gratis] Es una lista curada de contenidos VR alojados en plataformas como YouTube.</li> <li>YouTube VR: [gratis] Una de esas aplicaciones imprescindibles en cualquier plataforma. Que voy a decir de YouTube. S\u00f3lo mencionar que naturalmente los muchos contenidos en 180/360\u00ba y en 3D se disfrutan particularmente bien con unas gafas VR.</li> </ul>"},{"location":"2022-04-17_vr.html#straps","title":"Straps","text":"<p>El strap o sistema de sujecci\u00f3n a la cara es uno de los elementos que se pueden mejorar bastante como coment\u00e1bamos en un principio. Soy de los que considera que el que lleva es perfectamente funcional (como todo lo que viene con las gafas), pero como desde un principio percib\u00ed que las gafas hab\u00edan llegado para quedarse, decid\u00ed que merec\u00eda la pena explorar todas las posibilidades para mejorar/facilitar la experiencia.</p> <p>La propia Oculus vende o mejor dicho vend\u00eda (ya que fueron retiradas de la venta por romperse f\u00e1cilmente) un strap llamado Elite Strap con un ajuste r\u00edgido por ruleta en lugar de el\u00e1stico. Pero en el m\u00e1s de un a\u00f1o que llevan en el mercado las Oculus Quest 2, m\u00faltiples fabricantes han presentado sus propuestas. Tras estudiar el mercado voy a se\u00f1alar las que me parecen m\u00e1s destacables.</p> <p>Antes de empezar, comentar que se puede considerar que existen las dos tipolog\u00edas de straps siguientes:</p> <ul> <li>Tipo Halo: Me refiero al concepto PlayStation VR que sujeta las gafas a la cabeza en modo casco, es decir apoyado o presionando frente y nuca. Las gafas cuelgan del halo de forma que en teor\u00eda ser\u00eda incluso posible no apoyarlas en la cara. Hay quien incluso retira el interfaz facial, es decir la pieza con forma anat\u00f3mica que normalmente apoya en la cara e ilumina el recinto de juego con luces IR para que no se produzcan entradas de luz en las gafas.</li> <li>Tipo Elite Strap: Es el que imita el funcionamiento de este strap o del strap original de tiras el\u00e1sticas, es decir el que aprisiona las gafas contra nuestra cara. En este caso el interfaz facial naturalmente se vuelve imprescindible, y de hecho si apostamos por este formato puede merecernos la pena encontrar un interfaz facial m\u00e1s c\u00f3modo o m\u00e1s adaptado a nuestra cara.</li> </ul> <p>El de segundo tipo puede parecer menos conveniente que el de tipo halo, pero al menos en mi caso ha resultado preferible. Jugando al golf con un strap de tipo halo, se me descolocaban las gafas al bajar la cabeza para golpear la bola. Tambi\u00e9n parece claro que para juegos muy vigorosos como los deportivos, el tipo halo puede ser menos conveniente porque podemos experimentar balanceo de las gafas, perdiendo con facilidad el \"punto dulce\" del enfoque. De todas formas tras estudiar bastante el tema, parece que no hay consenso. Es decir, es una cuesti\u00f3n de gustos y de formas de cabeza para las que parece que un tipo de strap encaja mejor que el otro en cada caso.</p> <p>En cuanto a los de tipo Halo podr\u00eda se\u00f1alar:</p> <ul> <li>BOBOVR M2: Es quiz\u00e1 el m\u00e1s representativo.</li> <li>GOMRVR: Especie de clon que cuesta la tercera parte y que puedo recomendar porque lo llegu\u00e9 a adquirir y puedo confirmar que est\u00e1 muy bien construido, aunque como comentaba antes, no ha resultado ser la mejor opci\u00f3n para mi.</li> </ul> <p>En cuanto a los de tipo Elite Strap est\u00e1n:</p> <ul> <li>KIWI: Esta es la opci\u00f3n por la que apuesto yo.</li> <li>AUBIKA: Existe en versi\u00f3n con bater\u00eda integrada.</li> </ul>"},{"location":"2022-04-17_vr.html#bateria","title":"Bater\u00eda","text":"<p>La bater\u00eda de las Oculus Quest 2 es de unos 3600mAh. Con un uso normal la bater\u00eda dura alrededor de 3 horas, pero soy muy sensible al trato que conviene dar a las bater\u00edas de Litio, por lo que intento moverme siempre entre el 40% y el 80% de capacidad, por lo que el periodo de utilizaci\u00f3n si no quiero salir de ese rango es de hora y media. Por este motivo, uno de los primeros accesorios a adquirir es un PowerBank. En mi caso adquir\u00ed \u00e9ste que me pareci\u00f3 tener un buen balance entre capacidad y peso, si lo quer\u00eda llevar adosado al caso como era mi caso. El lugar adecuado para sujetar el PowerBank es en la parte trasera de las gafas y de esa forma act\u00faa como contrapeso. Para hacerlo se suele recurrir a bridas o abrazaderas de velcro, aunque en mi caso espero aprovechar los muchos dise\u00f1os que han hecho otros usuarios para imprimir en 3D, como por ejemplo \u00e9ste que est\u00e1 hecho a la medida del PowerBank que adquir\u00ed.</p> <p>El PowerBank que utilizo tiene la ventaja de que m\u00e1s o menos suministra la intensidad de corriente que consumen las gafas con un uso normal, por lo que si lo conecto desde un principio, con la bater\u00eda interna de las gafas al 80% como me gusta que est\u00e9, \u00e9ste nivel se mantiene durante toda la sesi\u00f3n variando como mucho un 5% hacia arriba o hacia abajo dependiendo de la situaci\u00f3n. De esta manera la bater\u00eda interna pr\u00e1cticamente no consume ciclos de carga.</p>"},{"location":"2022-04-17_vr.html#lentes-en-aliexpress","title":"Lentes en Aliexpress","text":"<p>Necesitar gafas graduadas para corregir defectos de la vista supone un problema para utilizar gafas VR. Aunque las Oculus Quest 2 traen en la caja un accesorio que aleja el interfaz facial de las propias gafas, dejando en teor\u00eda espacio para usar el visor con nuestras gafas graduadas, al menos en mi caso no ha servido. Supongo que de nuevo depender\u00e1 de la forma de la cabeza/cara de cada uno. Tambi\u00e9n supongo, aunque no he experimentado con ello, que si se quieren usar las Oculus Quest 2 con gafas, los straps de tipo halo pueden funcionar mejor, al en teor\u00eda permitir incluso retirar el interfaz facial.</p> <p>La soluci\u00f3n definitiva es de nuevo adquirir un accesorio separado. En este caso unas lentes que se colocan sobre las que trae integradas el visor. En mi caso recurr\u00ed al servicio que recomendaban en los lugares que consult\u00e9: WidmoVR. Las lentes que me enviaron tienen una calidad excelente, pero el precio tambien era excelente (por lo alto).</p> <p>M\u00e1s adelante supe que hay vendedores en Aliexpress (1, 2, 3) que ofrecen el mismo servicio por la tercera parte del precio. Tras haber probado una de estas opciones, compruebo que la calidad es la misma.</p> <p>Si se tiene acceso a una impresora 3D, una opci\u00f3n muy interesante es \u00e9sta.</p>"},{"location":"2022-04-17_vr.html#despedida","title":"Despedida","text":"<p>Con esto concluye el art\u00edculo de gu\u00eda a la VR. Nos vemos en el metaverso...</p>"},{"location":"2022-08-08_mmiyoo_uart.html","title":"Miyoo Mini UART","text":"<p>En este art\u00edculo vamos a ver una modificaci\u00f3n de la retroconsola de emulaci\u00f3n Miyoo Mini para extraer el puerto UART que existe en la PCB y as\u00ed poder tener acceso a \u00e9l sin abrir la carcasa. Dicho puerto UART adem\u00e1s est\u00e1 conectado con una terminal del sistema, lo que nos ayudar\u00e1 mucho durante el desarrollo o la personalizaci\u00f3n del sistema de la consola.</p> <p>Antes de empezar con el procedimiento, comentar que la modificaci\u00f3n no es sencilla. Al ser una m\u00e1quina tan peque\u00f1a, hay poco espacio para pasar cables o situar el conector exterior.</p>"},{"location":"2022-08-08_mmiyoo_uart.html#procedimiento","title":"Procedimiento","text":"<ol> <li> <p>Abrimos la consola. Encontraremos los pads del puerto UART bajo la salida de la cinta de datos de la pantalla.</p> <p></p> </li> <li> <p>Buscamos un sitio donde poder colocar alg\u00fan tipo de puerto con 3 \u00f3 4 pines. Realmente con 3 es suficiente, pero ya que estamos haciendo la modificaci\u00f3n, intentaremos rutear los 4 pines del puerto completo. Encontramos que hay un espacio (en la v2 de la Miyoo Mini) en el compartimento de la bater\u00eda donde se puede colocar medio z\u00f3calo de 2x4 cortado por la mitad de manera que quede una tira de 4 pines hembra. Las tiras de pin hembra tradicionales son demasiado altas por lo que no se podr\u00eda cerrar la tapa de la bater\u00eda. Aqu\u00ed vemos el z\u00f3calo antes y despu\u00e9s de partirlo por la mitad (realmente en la foto de la izquierda ya estaba cortado, pero he apoyado las dos mitades para que se entienda de d\u00f3nde ha salido la pieza).</p> <p></p> </li> <li> <p>La mini tira de pin hembra que hemos fabricado encaja perfectamente en la posici\u00f3n que se muestra en la foto.</p> <p></p> </li> <li> <p>Pegamos la mini tira de pin con resina epoxi.</p> <p></p> </li> <li> <p>Por el lado interior de la carcasa tenemos que doblar los pines del z\u00f3calo para que no colisionen con la PCB (como coment\u00e1bamos al principio, el interior de la consola est\u00e1 muy bien aprovechado).</p> <p></p> </li> <li> <p>Comienza la fase m\u00e1s complicada del proceso. Como hemos comentado ya, hay muy poco espacio libre en el interior de la consola. Por ejemplo la carcasa a la que acabamos de pegar el mini z\u00f3calo est\u00e1 completamente apoyada en la PCB en toda la superficie del hueco donde se aloja la bater\u00eda. Vamos pues a rutear las conexiones rodeando este hueco. A\u00fan as\u00ed el espacio es reducido, por lo que optamos por utilizar cables barnizados en lugar de hilos con envoltura PVC tradicional. El cable barnizado adem\u00e1s al ser de un s\u00f3lo hilo, nos ayudar\u00e1 a enrutarlo, ya que una vez deformado, conserva su forma. Buscamos el cable barnizado por ejemplo en un viejo alimentador de port\u00e1til estropeado. Es seguro que al menos contendr\u00e1 cable barnizado en el transformador, pero al abrirlo encontramos los tres bobinados que se\u00f1alamos en la foto (el transformador es el de la derecha).</p> <p></p> </li> <li> <p>Finalmente escogemos la bobina que tiene un espesor de cable intermedio (no desmont\u00e9 el transformador, pero seguro que habr\u00eda tenido el cable m\u00e1s fino). De ella extraemos 4 fragmentos de unos 12cm. Hay que recordar que al ser cable barnizado, habr\u00e1 que rascar o disolver de alguna forma el barniz en los extremos para que podamos soldar. El raspado se puede hacer con una cuchilla o con papel de lija.</p> <p></p> </li> <li> <p>Comienza ahora s\u00ed la parte m\u00e1s laboriosa. Empezamos soldando los cuatro cables a los pines del z\u00f3calo. Curvamos los cables con la forma de los pines doblados del z\u00f3calo para que haya m\u00e1s superficie de contacto para la soldadura. En la foto no aparece porque se instal\u00f3 al final, pero es muy conveniente cubrir las soldaduras con cinta aislante o mejor cinta Kapton (que es m\u00e1s fina), para evitar que \u00e9stas ara\u00f1en la PCB y terminen provocando un puente. Es m\u00e1s sencillo colocar la cinta sobre la PCB, pero en ese caso tendremos que estimar a ojo la zona a cubrir, aunque no hay problema en poner m\u00e1s cinta de la cuenta para asegurar la operaci\u00f3n.</p> <p></p> </li> <li> <p>Ahora s\u00ed, con paciencia vamos enrutando los cables, dando forma con unas pinzas o alicates finos y fij\u00e1ndolos de vez en cuando con cola caliente por ejemplo.</p> <p></p> </li> <li> <p>Cuando nos acerquemos a la posici\u00f3n final de los cables, los cortaremos escalonadamente (averiguando cual es cual respecto de las soldaduras del z\u00f3calo con el pol\u00edmetro en modo continuidad). Tambi\u00e9n haremos un peque\u00f1o doblez que ser\u00e1 el que introduciremos en los pads del puerto en la PCB. Hay que recordar que de nuevo tendremos que retirar el barniz de este extremo de los cables, lo que haremos preferentemente antes de hacer el doblez.</p> <p></p> </li> <li> <p>S\u00f3lo resta hacer las soldaduras en la PCB.</p> <p></p> </li> <li> <p>Ya podemos cerrar la consola. Hay que vigilar los cables que discurren cerca del labio que hay entre las dos mitades de la carcasa para evitar que pillemos alguno de ellos. Ya tenemos nuestro puerto UART a la vista.</p> <p></p> </li> </ol>"},{"location":"2022-08-08_mmiyoo_uart.html#conexion","title":"Conexi\u00f3n","text":"<p>Para conectar al puerto UART recien expuesto, utilizamos el t\u00edpico adaptador UART-USB. En mi caso utilizo \u00e9ste que tiene bastantes posibilidades. Como cliente utilizo <code>screen</code> lanzado de la siguiente forma ya que la velocidad del puerto es 115200bps:</p> <pre><code>sudo screen /dev/ttyUSB0 115200 8N1\n</code></pre> <p>S\u00f3lo utilizaremos los pines GND, RX y TX, cruzando los dos \u00faltimos con los del adaptador UART-USB, es decir cableando el RX de la consola al TX del adaptador y viceversa. Aunque no utilizamos la l\u00ednea de alimentaci\u00f3n (2.8V en esta consola), configuraremos el adaptador UART-USB a 3.3V para que los niveles de se\u00f1al que viajan por RX/TX sean lo m\u00e1s parecidos posible.</p> <p>Un ejemplo:</p>"},{"location":"2022-10-05_entrevista_podcast_linux.html","title":"Entrevista en Podcast Linux","text":"<p>Hace unas semanas Juan Febles, responsable de Podcast Linux, tuvo la gentileza de invitarme para charlar con \u00e9l en su programa. Fundamentalmente hablamos sobre la imagen Ad\u00e1n para consolas port\u00e1tiles de retro-emulaci\u00f3n. Charlamos tambi\u00e9n de mis comienzos y recorrido con Linux y el software libre, un sistema operativo y filosof\u00eda que nos apasionan tanto a Juan como a mi.</p> <p>Desde aqu\u00ed agradecer de nuevo a Juan por haberse fijado en el proyecto Ad\u00e1n y considerarlo como contenido interesante para su podcast, que por cierto te animo a seguir si su tem\u00e1tica est\u00e1 entre tus intereses.</p> <p>Si te apetece escuchar la conversaci\u00f3n puedes hacerlo desde aqu\u00ed mismo:</p> <p> </p> <p>El enlace a la entrevista en la web del podcast es \u00e9ste.</p> <p>Por \u00faltimo indico algunas direcciones de contacto del podcast de Juan:</p> <ul> <li>Web</li> <li>iVoox</li> <li>Telegram</li> <li>Twitter</li> </ul>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html","title":"V\u00edas Zaragoza - Campus en bicicleta","text":"<p> Foto de Javier Rodrigo</p> <p>Actualmente trabajo en el Campus de Aula Dei, a unos 15Km de Zaragoza. Aunque existen varias opciones para acudir al campus en autob\u00fas, en mi caso particular la combinaci\u00f3n de rutas y horarios no es favorable, por lo que desde un principio opt\u00e9 por ir en bicicleta. Tras unos d\u00edas realizando pruebas, ajust\u00e9 la ruta y la equipaci\u00f3n para hacerla m\u00e1s conveniente y segura. En este post enumero las distintas opciones que he terminado conociendo y describo a mi parecer sus ventajas e inconvenientes.</p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#problemas-y-soluciones","title":"Problemas y soluciones","text":"<p>Hay que comentar desde un principio que desafortunadamente el acceso al campus en bicicleta no es muy favorable. Por un lado existen las barreras naturales de la acequia de Urd\u00e1n y sobre todo el r\u00edo G\u00e1llego para el que existen muy pocos pasos. Si no tenemos en cuenta los puentes de las distintas carreteras, s\u00f3lo existen las pasarelas peatonales de Santa Isabel y la pr\u00f3xima a San Juan de Mozarrifar que se indican en el plano siguiente. La foto que hay a continuaci\u00f3n del plano es de la segunda pasarela.</p> <p></p> <p></p> <p>Por otro lado, la carretera de acceso al campus (A-123) carece de arc\u00e9n en gran parte de su trazado, tiene l\u00edmite de 70 km/h, muchas incorporaciones/salidas y considerable tr\u00e1fico de tractores, camiones y autobuses (sobre todo a las horas de comienzo y fin de la jornada), por lo que la considero inconveniente para ciclistas. Pero evitar las carreteras conlleva algunos inconvenientes que vamos a analizar.</p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#ensuciamiento-de-la-bicicleta","title":"Ensuciamiento de la bicicleta","text":"<p>Los caminos en verano son muy polvorientos y en invierno se embarran y forman lagunas. Ambas situaciones ensucian la bicicleta, sobre todo el polvo en verano que ataca la transmisi\u00f3n (cadena, platos y pi\u00f1ones), bujes y pedalier. Para el barro y los charcos lo mejor es que la bicicleta disponga de guardabarros, aunque en mi caso particular no los puedo (ni quiero) poner.</p> <p>Considerando ambos problemas, a\u00fan as\u00ed me he decantado por utilizar los caminos rurales y limpiar la bicicleta con la frecuencia que la situaci\u00f3n requiera. Pero hay momentos puntuales, tras varios d\u00edas de lluvia por ejemplo, en los que conviene tener una alternativa por asfalto. Para esa situaci\u00f3n, y en mi caso particular, recurro a la carretera que conecta San Gregorio con San Juan de Mozarrifar que termina en la carretera de Cogullada, otra buena alternativa si se accede desde una zona situada al noroeste de Zaragoza. Ambos tramos de carretera tienen poco tr\u00e1fico y l\u00edmite de 50 km/h. Desde la carretera de Cogullada se puede acceder a la pasarela cerca de San Juan saliendo hacia el campo de f\u00fatbol de San Juan.</p> <p>De todas formas en t\u00e9rminos de minimizar el ensuciamiento y mantenimiento de la bicicleta, la mejor ruta en mi opini\u00f3n es la que me ense\u00f1\u00f3 el compa\u00f1ero Mag\u00ed que utilizando la pasarela de Santa Isabel para superar el G\u00e1llego, transcurre por asfalto hasta m\u00e1s arriba de la Monta\u00f1anesa. Es la denominada <code>Azud - Campus (margen izq. G\u00e1llego, asfalto)</code> en la tabla de rutas final. Poco antes de llegar a la acequia de Urd\u00e1n (en este punto) tenemos las opciones de terminar por caminos rurales por la izquierda o girar a la derecha para salir delante de la Monta\u00f1anesa a la carretera de Monta\u00f1ana de la que recorreremos un peque\u00f1o tramo hasta tomar el Camino el Soaso para alcanzar el campus integramente por asfalto y por v\u00edas con poco tr\u00e1fico. Si no utilizo personalmente esta ruta es porque tengo que dar algo de vuelta para poder acceder a ella y porque disfruto m\u00e1s rodando por caminos rurales con la bicicleta de monta\u00f1a.</p> <p>Otra ruta un poco m\u00e1s larga pero \u00edntegramente por asfalto y que minimiza el tr\u00e1nsito por la carretera de Monta\u00f1ana es la que me ense\u00f1\u00f3 el compa\u00f1ero Ricardo y que desde Santa Isable discurre enteramente por calzadas paralelas a la de Monta\u00f1ana. Es la denominada <code>Azud - Campus (todo asfalto 3)</code> en la tabla de rutas final.</p> <p>En cuanto a la limpieza de la bicicleta en s\u00ed, he llegado al compromiso de fijarme exclusivamente en la transmisi\u00f3n (cadena, platos y pi\u00f1ones). He terminado usando lubicante basado en cera, que tiene el inconveniente de que hay que reponerlo cada pocos d\u00edas (3 \u00f3 4) pero a cambio la cadena no acumula la t\u00edpica mugre mezcla de grasa y polvo. Utilizo el de la marca X-sauce (en tiendas de comercio local cuesta la mitad que en Amazon).</p> <p>Una vez al mes llevo la bicicleta a un lavadero de coches. Empiezo limpiando la cadena con un accesorio para facilitar la tarea que lleno de desengrasante biodegradable (la marca BLUB en concreto me da un resultado excelente). Tras eso, retiro las pastillas de freno para que no se contaminen y le doy un manguerazo a la bicicleta. En casa seco, aplico WD-40 en las articulaciones de los desviadores y lubrico la cadena con el producto mencionado antes.</p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#charcos-y-barro","title":"Charcos y barro","text":"<p>El tema de los charcos puede parecer menor, pero al menos la pasada temporada fr\u00eda (2023/2024), desde octubre hasta abril han existido en varios puntos de mi ruta habitual, tres zonas dif\u00edciles de pasar, es decir, el problema va m\u00e1s all\u00e1 de que se ensucie la bicicleta. Uno de los puntos es el puente del ferrocarril que accede a la Monta\u00f1anesa en su paso sobre la pista que trascurre por la margen derecha del G\u00e1llego. Afortunadamente descubr\u00ed que poco antes de ese punto sale una v\u00eda a la derecha que permite pasar el puente por uno de sus vanos menores m\u00e1s adelante.</p> <p></p> <p>Otro paso incluso peor, dado que no existe alternativa una vez que est\u00e1s all\u00ed (est\u00e1 entre una valla y un campo que en ocasiones no es practicable), es el que hay en un punto del camino muy pr\u00f3ximo al puente comentado antes. Durante todos estos meses fr\u00edos han existido unas lagunas cuyos bordes se manten\u00edan permanentemente embarrados por el agua que desplazaban los veh\u00edculos al pasar. En los peores momentos la alternativa era dar un poco de vuelta subiendo un poco por la carretera de Cogullada para acceder al camino que discurre por el otro lado de la v\u00eda del ferrocarril y de paso evitar el puente.</p> <p></p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#frio-y-noche","title":"Fr\u00edo y noche","text":"<p>En invierno el principal enemigo es el fr\u00edo en las manos y la iluminaci\u00f3n. Para lo primero he probado muchos modelos de guantes con y sin calefacci\u00f3n, y no ha sido hasta adquirir los \u00faltimos que no he conseguido solucionar el problema. Desafortunadamente en el momento de escribir este art\u00edculo no se encuentran a la venta, aunque podr\u00eda ser por no estar todav\u00eda en la temporada de invierno. Son el modelo \"HEAT CONCEPT BIKE\" de la marca Ekoi.</p> <p>En cuanto a la iluminaci\u00f3n, hace tiempo que adquir\u00ed un foco potente (parecido a \u00e9ste) para las excursiones veraniegas nocturnas. Empec\u00e9 a tener problemas con la bater\u00eda, pero por lo que he podido ver el formato de las mismas es bastante est\u00e1ndar o popular (8,4V) por lo que pude encontrar reemplazo f\u00e1cilmente.</p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#mayor-riesgo-de-pinchazos","title":"Mayor riesgo de pinchazos","text":"<p>Aqu\u00ed s\u00f3lo puedo hacer la natural recomendaci\u00f3n de llevar bomba encima para por lo menos poder ir hinchando la rueda en caso de pinchar hasta llegar al destino. En mi caso llevo las ruedas montadas sin c\u00e1mara o en tubeless, cosa que recomiendo a pesar de los inconvenientes que tiene (requiere mantenimiento y es mucho m\u00e1s engorroso desmontar el neum\u00e1tico). Gracias a ello me he podido olvidar del tema de los pinchazos desde hace a\u00f1os (salvo un par de episodios dram\u00e1ticos en los que el neum\u00e1tico se hubiera destrozado llevase lo que llevase).</p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#mas-tiempo-de-viaje","title":"M\u00e1s tiempo de viaje","text":"<p>Utilizar los caminos rurales conlleva m\u00e1s tiempo por una parte por la menor velocidad de circulaci\u00f3n y por otra por los rodeos que hay que hacer para lograr la conexi\u00f3n de pistas. Aunque como puede verse en el mapa final con las rutas, la mayor\u00eda son bastante directas.</p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#orientacion-inicial","title":"Orientaci\u00f3n inicial","text":"<p>Relacionado con el punto anterior existe la posibilidad de despistarse, al menos durante los primeros d\u00edas, sobre todo si se utiliza la opci\u00f3n de los caminos rurales, al no haber se\u00f1alizaci\u00f3n y ser los caminos/campos parecidos. El primer d\u00eda que intent\u00e9 ir al campus en bicicleta fue un desastre. Tuve que improvisar en las proximidades del recinto porque la ruta que llevaba pretrazada con Google Maps me llevaba por un paso bloqueado. Ese d\u00eda emple\u00e9 una hora m\u00e1s de la cuenta dando vueltas por un terreno salvaje que hay entre el G\u00e1llego y el recinto del campus y m\u00e1s adelante atravesando unos campos encharcados que parec\u00edan una buena opci\u00f3n para atajar \ud83e\udd26.</p> <p></p> <p>Para evitar este problema, por una parte conviene utilizar la herramienta adecuada para trazar la ruta, que no es Google Maps como el compa\u00f1ero Miguel me ense\u00f1\u00f3, sino otra basada en los mapas de OpenStreetMap como GraphHopper donde s\u00ed est\u00e1n correctamente mapeado el per\u00edmetro del recinto del campus. Por otra parte, conviene llevar un GPS que nos permita seguir la ruta sin tener que parar a mirar el mapa. En mi caso empec\u00e9 utilizando un viejo Garmin Edge 305 que ya que ahora domino de memoria las distinas opciones, puedo prestar a otras personas que se animen a ir en bici al campus para que se aprendan el recorrido. Si se dispone de un soporte de manillar para smartphone, tambi\u00e9n se puede utilizar una aplicaci\u00f3n de navegaci\u00f3n como OsmAnd con los tracks precargados.</p> <p></p>"},{"location":"2024-05-31_campus_aula_dei_en_bici.html#rutas","title":"Rutas","text":"<p>A continuaci\u00f3n se enumera la coleccion de rutas que he seleccionado. Uno de los objetivos de la selecci\u00f3n ha sido cubrir distintos puntos de partida repartidos por el noreste de Zaragoza. Otro el que existan opciones que discurran \u00edntegramente por asfalto, bien por los d\u00edas en que los caminos est\u00e9n embarrados o pensando en las personas que s\u00f3lo cuenten con bicicletas de carretera. El tiempo estimado que aparece en la tabla es una aproximaci\u00f3n que puede variar en funci\u00f3n de la forma f\u00edsica, el tipo de bicicleta y las condiciones meteorol\u00f3gicas (\u00a1hola cierzo!). En la columna de observaciones se indican los puntos conflictivos o a tener en cuenta en cada ruta. Por \u00faltimo, la primera columna contiene un enlace para descargar los tracks GPX de forma que se puedan instalar en aplicaciones como la mencionada OsmAnd.</p> Ruta Distancia Tiempo estimado Observaciones Juslibol/Actur - Campus (por San Gregorio) 14,38 km 40m-1h Hay que cruzar la carretera de Huesca pero se puede hacer por paso elevado. \ud83d\udea7 Arrabal/Picarral - Campus (por Corbera Alta) 13,05 km 35m-55m \ud83d\udea7 Cogullada - Campus (Carretera Cogullada) 9,95 km 30m-45m Poco tr\u00e1fico. \ud83d\udea7 Azud - Campus (por margen der. G\u00e1llego) 13,00 km 35m-55m La m\u00e1s divertida. \ud83d\udea7 Azud - Campus (margen izq. G\u00e1llego, asfalto) 12,05 km 35m-50m En mi opini\u00f3n la mejor, buen equilibrio entre rapidez, pocos coches, limpieza de bici y opci\u00f3n a terminar del todo por asfalto. Azud - Campus (margen izq. G\u00e1llego, caminos) 11,73 km 35m-50m Paralela a la anterior, sin coches pero ensucia m\u00e1s la bicicleta. \ud83d\udea7 Azud - Campus (todo asfalto) 13,08 km 35m-55m Tramo compartido con tr\u00e1fico rodado desde Monta\u00f1anesa hasta entrada a Camino el Saso. Azud - Campus (todo asfalto 2) 12,12 km 35m-50m Tramo compartido con tr\u00e1fico rodado desde Santa Isabel hasta Monta\u00f1ana. Azud - Campus (todo asfalto 3) 13,02 km 35m-55m S\u00f3lo discurre por la carretera de Monta\u00f1ana un peque\u00f1o tramo con arc\u00e9n. <p>El emoji \ud83d\udea7 en las observaciones de algunas de las rutas de la tabla significa que hay que hacer el paso por el acueducto sobre la acequia de Urd\u00e1n. Se trata del acueducto de la foto. Puede ser un poco complicado de pasar junto a la bici, sobre todo cuando transporta agua o est\u00e1 mojado, ya que se vuelve resbaladizo y es estrecho. En caso de no verlo claro, se puede pasar al otro lado de la acequia por un paso a nivel que hay m\u00e1s adelante a unos 400m.</p> <p></p> <p>Ver a pantalla completa</p> <p></p>"},{"location":"2024-09-04_steam_deck_arch.html","title":"Instalaci\u00f3n Arch Linux en Steam Deck","text":"<p>En julio de 2024 durante unas semanas, el modelo de 512GB de la Steam Deck LCD pudo adquirirse por debajo de los 400\u20ac. Un precio muy atractivo para una m\u00e1quina decente con procesador AMD de arquitectura x86 (AMD64), 16GB de RAM, disco SSD tipo NVMe de la capacidad mencionada antes, pantalla t\u00e1ctil y controles de juego integrados. Es decir un PC consolizado, pero un PC al fin y al cabo. Pero sobre todo lo que hace para mi especialmente atractiva la m\u00e1quina es su soporte Linux completo, lo que la convierte en una plataforma ideal para cacharrear con distribuciones Linux o utilizarlo como PC port\u00e1til secundario. Todo esto naturalmente adem\u00e1s de su uso convencional para jugar y emular videojuegos.</p> <p>SteamOS, el sistema operativo que trae de serie, est\u00e1 basado en Arch Linux, y en su modo escritorio, puede utilizarse pr\u00e1cticamente como un Arch Linux normal. La principal restricci\u00f3n es que est\u00e1 construido en modo inmutable y a pesar de que este tipo de configuraci\u00f3n de sistema tiene sus virtudes y se entiende perfectamente que Valve lo haya escogido para su m\u00e1quina, todav\u00eda prefiero un sistema normal (mutable), por lo que me decid\u00ed por instalar un Arch normal y aprender a instalar de paso esta distribuci\u00f3n. Seg\u00fan el wiki de Arch, el hardware del modelo LCD de la Steam Deck est\u00e1 soportado al 100% en Arch.</p> <p>Lo que sigue es el procedimiento completo que he utilizado.</p>"},{"location":"2024-09-04_steam_deck_arch.html#tecladoraton","title":"Teclado/rat\u00f3n","text":"<p>Aunque gran parte de las operaciones pueden hacerse utilizando la pantalla t\u00e1ctil y los trackpads de la Steam Deck, es muy recomendable conectar un teclado y rat\u00f3n a la consola para facilitar la instalaci\u00f3n, sobre todo durante la sesi\u00f3n de terminal con la que instalaremos el sistema base. La Steam Deck s\u00f3lo posee un puerto USB-C, por lo que lo m\u00e1s pr\u00e1ctico es utilizar un dock. Tambi\u00e9n puede ser suficiente (sobre todo si ejecutamos los sistemas live desde una microSD) con un dongle de teclado/rat\u00f3n inal\u00e1mbricos conectados con un adaptador USB&lt;-&gt;USB-C, aunque en ese caso conviene asegurarse de que la Steam Deck tiene la bater\u00eda completamente cargada.</p> <p>En mi caso utilic\u00e9 un dock DA310z de Dell.</p>"},{"location":"2024-09-04_steam_deck_arch.html#reparticionado-del-disco","title":"Reparticionado del disco","text":"<p>El disco SSD de la Steam Deck que adquir\u00ed es de 512GB y de tipo NVMe. Es el tama\u00f1o m\u00ednimo si queremos instalar otro sistema junto a SteamOS.</p> <p>Antes de empezar con la instalaci\u00f3n debemos hacer hueco para la misma encogiendo la partici\u00f3n principal (la n\u00famero 8). Para ello podemos utilizar pr\u00e1cticamente cualquier distribuci\u00f3n live Linux que arranquemos desde una unidad extra\u00edble (USB o microSD) ya que todas ellas llevan alg\u00fan programa para gestionar particiones. En mi caso utilic\u00e9 una ISO del programa <code>gparted</code>.</p> <p>El procedimiento completo puede verse a continuaci\u00f3n:</p> <ol> <li>Descargar la ISO de gparted. En concreto en mi caso utilic\u00e9 \u00e9sta versi\u00f3n.</li> <li>Instalar la ISO en un pendrive o mejor a\u00fan en una microSD (ya que la Steam Deck posee una ranura para \u00e9stas). Puede utilizarse un programa como Balena Etcher o el comando <code>dd</code> de Linux si se sabe manejar.</li> <li>Arrancar la Steam Deck con el pendrive o la microSD insertada manteniendo pulsado el bot\u00f3n de bajar el volumen hasta que se escuchen los tonos de encendido. Esto hace que la consola arranque en el men\u00fa <code>Boot Manager</code>.</li> <li>Seleccionar la opci\u00f3n de arrancar desde el dispositivo extra\u00edble que aparecer\u00e1 en el men\u00fa como <code>EFI USB Device (USB)</code> o <code>EFI SD/MMC Card (XX XXXX XXXX)</code> seg\u00fan si utilizamos un pendrive o una microSD respectivamente.</li> <li> <p>Aparece una pantalla de configuraci\u00f3n  en la que hacemos las siguientes selecciones:</p> <ul> <li>Policy for handling keymaps =&gt; Don't touch keymap</li> <li>Which language do you prefer? =&gt; 25</li> <li>Which mode do you prefer? =&gt; 0</li> </ul> </li> <li> <p>Tras aceptar la \u00faltima opci\u00f3n anterior, arrancar\u00e1 el programa <code>gparted</code> en modo gr\u00e1fico (con la pantalla girada, eso s\u00ed). Haremos cambios hasta dejar las particiones como se ve en la foto. B\u00e1sicamente lo que haremos ser\u00e1 encoger la partici\u00f3n #8 unos 100GB, crear la #9 de 4GB para swap y la #10 con el espacio restante para el sistema ra\u00edz de Arch:</p> <p></p> </li> </ol> <p>Destacar a la vista de las particiones que utiliza SteamOS que hace uso de un sistema de particiones A/B, habitual en Android, por el cual la mayor\u00eda de las particiones del sistema (excepto la de usuario) est\u00e1n duplicadas. Dicho sistema est\u00e1 pensado para facilitar las actualizaciones, o m\u00e1s bien para volver atr\u00e1s en caso de problemas durante las mismas.</p>"},{"location":"2024-09-04_steam_deck_arch.html#instalacion-base","title":"Instalaci\u00f3n base","text":"<p>Para el proceso de instalaci\u00f3n del sistema base me decant\u00e9 por el camino convencional siguiendo las instrucciones de la gu\u00eda de instalaci\u00f3n en el wiki de Arch. Dicha instalaci\u00f3n utiliza una ISO de un sistema Arch que podremos arrancar desde una unidad extra\u00edble (USB o microSD) con el que instalaremos los paquetes b\u00e1sicos para tener un sistema arrancable y muy b\u00e1sico.</p> <p>Antes de comenzar, comentar que por las caracter\u00edsticas tan din\u00e1micas de la distribuci\u00f3n Arch Linux, es muy posible que esta gu\u00eda quede desactualizada en poco tiempo. Por lo que recomiendo consultar la gu\u00eda oficial en caso de encontrar que algo no sale como se supone.</p> <p>A continuaci\u00f3n vemos paso a paso el proceso de instalaci\u00f3n:</p> <ol> <li>Descargar la ISO de Arch Linux. En concreto en mi caso utilic\u00e9 \u00e9sta versi\u00f3n.</li> <li>Instalar la ISO en un pendrive o mejor a\u00fan en una microSD para utilizar la ranura que posee la Steam Deck. Puede utilizarse un programa como Balena Etcher o el comando <code>dd</code> de Linux si se sabe manejar.</li> <li>Arrancar la Steam Deck con el pendrive o la microSD insertada manteniendo pulsado el bot\u00f3n de bajar el volumen hasta que se escuchen los tonos de encendido. Esto hace que la consola arranque en el men\u00fa <code>Boot Manager</code>.</li> <li>Seleccionar la opci\u00f3n de arrancar desde el dispositivo extra\u00edble que aparecer\u00e1 en el men\u00fa como <code>EFI USB Device (USB)</code> o <code>EFI SD/MMC Card (XX XXXX XXXX)</code> seg\u00fan si utilizamos un pendrive o una microSD respectivamente.</li> <li> <p>Una vez que termine de arrancar el sistema live de instalaci\u00f3n de Arch, ejecutar los siguiente comandos en orden (en la sesi\u00f3n con <code>iwctl</code> sustituiremos <code>&lt;SSID&gt;</code> por el nuestro e introduciremos la contrase\u00f1a cuando se nos pida; tambi\u00e9n sustituiremos el identificador de usuario <code>&lt;USER&gt;</code> por el que queramos utilizar):</p> <pre><code># loadkeys es\n# iwctl\n[iwd]# station wlan0 scan\n[iwd]# station wlan0 get-networks\n[iwd]# station wlan0 connect &lt;SSID&gt;\n[iwd]# exit\n# mkfs.ext4 /dev/nvme0n1p10\n# mkswap /dev/nvme0n1p9\n# mount /dev/nvme0n1p10 /mnt\n# mount --mkdir /dev/nvme0n1p1 /mnt/boot/efi\n# swapon /dev/nvme0n1p9\n# pacstrap -K /mnt base base-devel linux linux-firmware sudo vi ntfs-3g networkmanager amd-ucode grub efibootmgr git cmake qt5-wayland\n# genfstab -U /mnt &gt;&gt; /mnt/etc/fstab\n# arch-chroot /mnt\n# ln -sf /usr/share/zoneinfo/Europe/Madrid /etc/localtime\n# hwclock --systohc\n# vi /etc/locale.gen    # descomentar 'en_US.UTF-8 UTF-8' y 'es_ES.UTF-8 UTF-8'\n# locale-gen\n# echo \"LANG=es_ES.UTF-8\" &gt; /etc/locale.conf\n# echo \"KEYMAP=es\" &gt; /etc/vconsole.conf\n# echo \"deck\" &gt; /etc/hostname\n# echo -e \"\\n127.0.0.1    localhost\\n::1    localhost\\n127.0.1.1    deck\" &gt;&gt; /etc/hosts\n# passwd\n# grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=Arch\n# grub-mkconfig -o /boot/grub/grub.cfg\n# systemctl enable NetworkManager\n# useradd -m -G wheel &lt;USER&gt;\n# passwd &lt;USER&gt;\n# chmod u+w /etc/sudoers\n# vi /etc/sudoers       # Descomentar '%wheel ALL=(ALL) ALL'\n# chmod u-w /etc/sudoers\n# pacman -Syy\n# pacman -S xorg-server xf86-video-amdgpu maliit-keyboard qt5-wayland\n# su - &lt;USER&gt;\n</code></pre> </li> </ol> <p>El password que elegiremos cuando ejecutemos el comando <code>passwd &lt;USER&gt;</code> debe ser num\u00e9rico si queremos utilizar Plasma Mobile, ya que la pantalla de desbloqueo s\u00f3lo nos permite introducir un PIN.</p>"},{"location":"2024-09-04_steam_deck_arch.html#instalacion-entorno-grafico","title":"Instalaci\u00f3n entorno gr\u00e1fico","text":"<p>Continuamos donde nos hab\u00edamos quedado, es decir en la sesi\u00f3n chroot desde el sistema live de instalaci\u00f3n de Arch Linux. Lo haremos ya con el usuario normal (no root) por lo que a partir de ahora haremos uso con frecuencia de <code>sudo</code>.</p> <p>Ahora vamos a instalar los entornos gr\u00e1ficos. Lo digo en plural porque vamos a instalar dos, Plasma y Plasma Mobile. Hago esto porque dependiendo de si vamos a utilizar la Steam Deck con Arch en modo escritorio (con teclado/rat\u00f3n y posiblemente pantalla) o port\u00e1til (sin teclado/rat\u00f3n), nos convendr\u00e1 m\u00e1s un sistema u otro, dado que Plasma Mobile presenta un interfaz dise\u00f1ado para ser manejado con una pantalla t\u00e1ctil (estilo tablet).</p> <p>En realidad no es necesario instalar los dos escritorios, por eso se han separado sus pasos de instalaci\u00f3n. Podemos instalar uno, el otro o ambos.</p>"},{"location":"2024-09-04_steam_deck_arch.html#plasma","title":"Plasma","text":"<pre><code>$ sudo pacman -S plasma-meta\n</code></pre> <p>Durante la instalaci\u00f3n del paquete anterior se nos har\u00e1n una serie de preguntas. A la tercera pregunta responder <code>2) noto-fonts</code>. En el resto ofrecer la respuesta predeterminada (pulsando retorno).</p>"},{"location":"2024-09-04_steam_deck_arch.html#plasma-mobile","title":"Plasma Mobile","text":"<p>Plasma Mobile no se encuentra todav\u00eda en los repositorios oficiales. Tenemos que utilizar AUR:</p> <ol> <li> <p>Empezamos instalando algunas dependencias:</p> <pre><code>$ sudo pacman -S plasma-workspace kcontacts kirigami2 kpeople libphonenumber\n</code></pre> </li> <li> <p>Instalamos los paquetes de AUR <code>plasma-nano</code>, <code>plasma-settings</code> y <code>plasma-mobile</code> en este orden:</p> <pre><code>$ cd ~\n$ git clone https://aur.archlinux.org/plasma-nano.git\n$ cd plasma-nano\n$ makepkg -si\n$ cd ~\n$ git clone https://aur.archlinux.org/plasma-settings.git\n$ cd plasma-settings\n$ makepkg -si\n$ cd ~\n$ git clone https://aur.archlinux.org/plasma-mobile.git\n$ cd plasma-mobile\n$ makepkg -si\n</code></pre> </li> </ol>"},{"location":"2024-09-04_steam_deck_arch.html#fin-de-instalacion-entorno-grafico","title":"Fin de instalaci\u00f3n entorno gr\u00e1fico","text":"<ol> <li> <p>Instalamos el gestor de sesiones SDDM y algunas aplicaciones que nos har\u00e1n falta para terminar la instalaci\u00f3n desde el modo gr\u00e1fico:</p> <pre><code>$ sudo pacman -S sddm konsole dolphin kwrite partitionmanager htop power-profiles-daemon\n$ sudo systemctl enable sddm\n$ exit\n</code></pre> </li> <li> <p>Cerramos la sesi\u00f3n chroot, desmontamos las particiones y reiniciamos el sistema:</p> <pre><code># exit\n# umount -R /mnt\n# reboot\n</code></pre> </li> </ol>"},{"location":"2024-09-04_steam_deck_arch.html#configuracion-basica","title":"Configuraci\u00f3n b\u00e1sica","text":"<p>Tras reiniciar deber\u00edamos ver el gestor de sesiones SDDM, inicialmente con la pantalla girada y sin posibilidad de utilizar el teclado en pantalla, por lo que todav\u00eda continuaremos utilizando el teclado y rat\u00f3n externos.</p> <p>Una vez que hayamos iniciado sesi\u00f3n en Plasma o Plasma Mobile, lo primero que tenemos que hacer es configurar la conexi\u00f3n a internet. Para ello hacemos click sobre el icono correspondiente en la bandeja del sistema abajo a la derecha en Plasma o arriba a la derecha en Plasma Mobile.</p> <p>Una vez que tengamos conexi\u00f3n, abrimos la aplicaci\u00f3n Konsole y ejecutamos los siguientes comandos para instalar el paquete de aplicaciones b\u00e1sico de KDE, el navegador Firefox y el servidor SSH:</p> <pre><code>$ sudo pacman -S firefox kde-applications-meta openssh usbutils lshw man-db\n$ sudo systemctl start sshd\n$ sudo systemctl enable sshd\n</code></pre> <p>Finalmente hacemos las siguientes configuraciones:</p> <ul> <li><code>Preferencias &gt; Preferencias del sistema &gt; Entrada y salida &gt; Pantalla y monitor &gt; Escalar</code>: Configurar la escala de la pantalla a 100%.</li> <li><code>Preferencias &gt; Preferencias del sistema &gt; Entrada y salida &gt; Teclado &gt; Distribuciones &gt; Configurar distribuciones &gt; A\u00f1adir</code>: A\u00f1adir la distribuci\u00f3n de teclado espa\u00f1ol.</li> <li><code>Preferencias &gt; Preferencias del sistema &gt; Idioma y hora &gt; Fecha y hora &gt; Zona horaria</code>: Seleccionar Madrid.</li> <li><code>Preferencias &gt; Preferencias del sistema &gt; Aspecto y estilo &gt; Texto y tipos de letra &gt; Tipos de letra</code>. Ajustar estos valores:<ul> <li><code>General</code>: <code>Noto Sans 11pt</code></li> <li><code>Anchura fija</code>: <code>Hack 10pt</code></li> <li><code>Peque\u00f1a</code>: <code>Noto Sans 9pt</code></li> <li><code>Barra de herramientas</code>: <code>Noto Sans 11pt</code></li> <li><code>Men\u00fa</code>: <code>Noto Sans 11pt</code></li> <li><code>T\u00edtulo de la ventana</code>: <code>Noto Sans 10pt</code></li> </ul> </li> <li>Bot\u00f3n derecho (L2) sobre la barra de tareas y seleccionar <code>Mostrar configuraci\u00f3n del panel</code>. En <code>Preferencias del panel &gt; Altura del panel</code> subir la altura a 54px.</li> <li>Bot\u00f3n derecho (L2) sobre el icono que sirve para mostrar los iconos ocultos en la bandeja del sistema y seleccionar <code>Configurar Bandeja del sistema</code>. En <code>General</code> seleccionar estos valores:<ul> <li><code>Tama\u00f1o de los iconos del panel</code>: <code>Escalar a la altura del panel</code></li> <li><code>Espacio entre los iconos del panel</code>: <code>Normal</code></li> </ul> </li> <li>Bot\u00f3n derecho (L2) sobre el icono que sirve para mostrar los iconos ocultos en la bandeja del sistema y seleccionar <code>Mostrar configuraci\u00f3n del panel</code>. Veremos un minireloj que antes no se ve\u00eda sobre el que pulsaremos con el bot\u00f3n derecho (L2). Seleccionamos <code>Mostrar alternativas</code> y de los elementos gr\u00e1ficos alternativos que aparecen escogemos <code>Reloj digital</code>.</li> </ul>"},{"location":"2024-09-04_steam_deck_arch.html#configuracion-de-sddm","title":"Configuraci\u00f3n de SDDM","text":"<p>Finalmente vamos a mejorar la configuraci\u00f3n del gestor de sesiones SDDM para que permita el teclado en pantalla, tenga mejor aspecto y muestre la pantalla en la orientaci\u00f3n correcta:</p> <ol> <li> <p>Crear fichero <code>/etc/sddm.conf.d/10-wayland.conf</code> con el siguiente contenido:</p> <pre><code>[General]\nDisplayServer=wayland\nGreeterEnvironment=QT_WAYLAND_SHELL_INTEGRATION=layer-shell\n\n[Wayland]\nCompositorCommand=kwin_wayland --drm --no-lockscreen --no-global-shortcuts --locale1 --inputmethod maliit-keyboard\n</code></pre> </li> <li> <p>Abrir <code>Preferencias &gt; Pantalla de inicio de sesi\u00f3n (SDDM)</code>, seleccionar Brisa como theme y pulsar el bot\u00f3n <code>Aplicar las preferencias de Plasma...</code> arriba a la derecha.</p> </li> </ol>"},{"location":"2024-09-04_steam_deck_arch.html#configuracion-sonido","title":"Configuraci\u00f3n sonido","text":"<p>Tal y como comenta el wiki de Arch, el volumen por defecto en la Steam Deck es muy bajo. Para solucionarlo hay que instalar el paquete <code>alsa-utils</code> y ejecutar el comando <code>alsamixer</code> para ajustar el volumen de algunos de los canales.</p> <pre><code>$ sudo pacman -S alsa-utils\n$ alsamixer\n</code></pre> <p>Para acceder a los mismos, una vez en <code>alsamixer</code>, hay que pulsar <code>F6</code> para poder seleccionar el dispositivo de audio <code>acp5x</code> ya que por defecto aparecen seleccionado el dispositivo 0 que es el asociado a la salida HDMI del chip gr\u00e1fico:</p> <p></p> <p>Una vez seleccionado el dispositivo correcto, veremos todos sus canales que son muy numerosos. Localizaremos los que menciona el wiki para ajustarlos a los siguientes valores:</p> Canal Valor Analog PCM 85% Digital 86% Digital PCM 85% Left Analog PCM 85% Left Digital PCM 85% Right Analog PCM 85% Right Digital PCM 85%"},{"location":"2024-09-04_steam_deck_arch.html#instalacion-gestor-dualboot","title":"Instalaci\u00f3n gestor dualboot","text":"<p>El sistema Arch ya est\u00e1 listo y podemos arrancarlo encendiendo la consola en modo Boot Manager (manteniendo pulsada la tecla de bajar volumen) y seleccionando la opci\u00f3n <code>Arch</code>. Pero para facilitar el arranque de SteamOS, vamos a instalar un gestor de arranque dualboot llamado rEFInd.</p> <ol> <li>Arrancar SteamOS (con Volume- + Power).</li> <li> <p>Desde una terminal en modo escritorio ejecutar:</p> <pre><code>cd $HOME &amp;&amp; rm -rf $HOME/SteamDeck_rEFInd/ &amp;&amp; git clone https://github.com/jlobue10/SteamDeck_rEFInd &amp;&amp; cd SteamDeck_rEFInd &amp;&amp; chmod +x install-GUI.sh &amp;&amp; ./install-GUI.sh\n</code></pre> </li> <li> <p>Descargar o crear un icono de Arch Linux de 128x128px.</p> </li> <li>Abrir el lanzador del escritorio que encontraremos en el escritorio.</li> <li> <p>Configurar de la siguiente forma (seleccionar en el campo <code>Boot Option #2 Icon</code> el icono descargado o creado anteriormente):</p> <p></p> </li> <li> <p>Pulsar bot\u00f3n <code>Create Config</code>.</p> </li> <li> <p>Editar el fichero que encontraremos en <code>~/.local/SteamDeck_rEFInd/GUI/refind.conf</code> y modificar la \u00faltima entrada de la siguiente forma:</p> <pre><code>menuentry \"Arch\" {\n    icon /EFI/refind/os_icon2.png\n    loader /EFI/Arch/grubx64.efi\n    graphics on\n}\n</code></pre> </li> <li> <p>Pulsar el bot\u00f3n <code>Install rEFInd</code>.</p> </li> <li>Pulsar el bot\u00f3n <code>Install Config</code></li> </ol> <p>La ruta <code>/EFI/Arch/grubx64.efi</code> del paso 6 puede cambiar si en el comando <code>grub-install</code> ejecutado durante la instalaci\u00f3n del sistema base se eligi\u00f3 otro identificador que no fuera <code>Arch</code>. En ese caso habr\u00eda que adaptar la ruta.</p>"},{"location":"2024-09-04_steam_deck_arch.html#conclusion","title":"Conclusi\u00f3n","text":"<p>Y esto ser\u00eda todo. Ahora tenemos un sistema Arch Linux en nuestra Steam Deck con un gestor de arranque dualboot que nos permite arrancar tambi\u00e9n SteamOS. A partir de aqu\u00ed tendremos una m\u00e1quina con una naturaleza doble, una (SteamOS) para jugar y otra (Arch) para ser utilizada como un PC (Plasma) o tabletPC (Plasma Mobile).</p> <p>Para elegir el entorno gr\u00e1fico Plasma normal o el Plasma Mobile, utilizaremos el men\u00fa desplegable que aparece abajo a la izquierda en el gestor de inicios de sesi\u00f3n SDDM.</p> <p>Algunos enlaces de inter\u00e9s consultados durante la elaboraci\u00f3n de esta gu\u00eda:</p> <ul> <li>The Arch Linux Handbook \u2013 Learn Arch Linux for Beginners</li> <li>Instalando Arch Linux con KDE en Steam Deck</li> <li>Steam Deck - ArchWiki</li> </ul>"},{"location":"2024-09-09_zx_mechtrum.html","title":"ZX Mechtrum","text":"<p>Hace tiempo que me apetec\u00eda montar un kit de ZX Spectrum Harlequin 128. Es el Spectrum perfecto (128KB, soporte de todos los modelos/ROMs de las distintas versiones producidas por Sinclair y Amstrad, y con componentes que se pueden adquirir a d\u00eda de hoy, incluida la ULA que est\u00e1 reemplazada por l\u00f3gica discreta). Pero para la caja, la opci\u00f3n de adquirir una de las carcasas r\u00e9plica del 48K original (gomas), no me entusiasmaba.</p> <p>Hace unos meses conoc\u00ed el proyecto ZX Mechtrum de Lee Smith, una caja para placas de formato 48KB con un teclado mec\u00e1nico, y me pareci\u00f3 el complemento perfecto para el Harlequin. De hecho, en el v\u00eddeo del canal More Fun Making It gracias al que supe de su existencia, su creador comenta que tiene el proyecto inmediato de instalar un Harlequin 128 en una de estas cajas.</p> <p>Como ya existen varios v\u00eddeos y gu\u00edas tanto del kit Harlequin como de la caja ZX Mechtrum, no voy a detallar el proceso de montaje, pero s\u00ed describirlo en general y comentar algunas particularidades y problemas que he encontrado.</p>"},{"location":"2024-09-09_zx_mechtrum.html#mechtrum","title":"Mechtrum","text":"<p>Como el kit Harlequin 128 es distribuido por Byte Delight, por lo que su disponibilidad es bastante estable, el punto m\u00e1s cr\u00edtico del plan era adquirir el Mechtrum de Lee Smith, ya que la venta de productos no es su principal actividad. De hecho pude conseguir la \u00faltima unidad de una tirada que hizo a finales de 2023. En el momento de escribir esto (septiembre 2024) vuelve a estar a la venta, pero no es de esperar que se mantenga siempre as\u00ed. El caso es que pude adquirir una unidad que lleg\u00f3 ya montada. Mi unidad ven\u00eda con 3 faceplates, una para el 48K, otra para el Sifzif 512 y otra para el Harlequin 128.</p> <p></p>"},{"location":"2024-09-09_zx_mechtrum.html#harlequin-128","title":"Harlequin 128","text":"<p>El Harlequin 128, es un dise\u00f1o de Don Superfo y puede adquirirse la PCB a trav\u00e9s de los enlaces que hay en el repositorio base del proyecto. En el repositorio se encuentra tambi\u00e9n la BOM (Bill Of Materials) para las distintas versiones con todos los componentes necesarios. Pero con diferencia la opci\u00f3n m\u00e1s sencilla es adquirir uno de los kits que distribuye Ben Versteeg, de Byte Delight. El kit viene con una PCB de la versi\u00f3n issue 2D y todos los componentes necesarios para montarlo, convenientemente clasificados en bolsitas junto a un manual con el que es casi imposible perderse. Tambi\u00e9n hay \u00e9pocas en las que no est\u00e1 disponible en su tienda, pero es cuesti\u00f3n de estar atento o suscribirse a las notificaciones de disponibilidad. En mi caso tuve que esperar un par de meses a que volviera a estar disponible.</p> <p></p> <p>El \u00fanico problema que tuve durante su montaje fue que seg\u00fan el manual el array de resistencias R61 es opcional si no se va a instalar la interfaz de joystick. Pero esas resistencias, adem\u00e1s de dar servicio al puerto de joystick, hacen de pullup para los microinterruptores de selecci\u00f3n del banco de ROM, por lo que sin instalarlas, la selecci\u00f3n de bancos de ROM superiores al 0 no era estable. Tras instalar el array R61, todo funcion\u00f3 correctamente.</p> <p></p>"},{"location":"2024-09-09_zx_mechtrum.html#resultado","title":"Resultado","text":"<p>El resultado es un sue\u00f1o hecho realidad, un Spectrum 128K con teclado mec\u00e1nico y componentes fiables. Adem\u00e1s de una belleza. \ud83e\udd29</p> <p></p>"},{"location":"desarrollo/android.html","title":"Android","text":""},{"location":"desarrollo/android.html#entorno","title":"Entorno","text":"<ul> <li>Todos los drivers para instalar ADB en Windows sin morir en el intento</li> </ul>"},{"location":"desarrollo/android.html#compilacion-aosp","title":"Compilaci\u00f3n AOSP","text":"<ul> <li>Getting Started: Building Android From Source</li> <li>How to Build an Android ROM</li> </ul>"},{"location":"desarrollo/android.html#documentacion-clave","title":"Documentaci\u00f3n clave","text":"<ul> <li>ID's de los View's</li> </ul>"},{"location":"desarrollo/android.html#tips-varios","title":"Tips varios","text":"<ul> <li>Activity restart on rotation Android</li> <li>Lint, eliminando la pelusa de nuestras aplicaciones</li> </ul>"},{"location":"desarrollo/android.html#librerias","title":"Librer\u00edas","text":"<ul> <li>RoboGuice la librer\u00eda que exprime nuestro c\u00f3digo</li> <li>OrmLite - Lightweight Object Relational Mapping (ORM) Java Package</li> <li>Mobile Framework that uses the actual features of #HTML5, #CSS3 and #JavaScript</li> </ul>"},{"location":"desarrollo/android.html#tutoriales","title":"Tutoriales","text":"<ul> <li>Android Development Tutorial (Lars Vogel)</li> <li>Android ListView and ListActivity (Lars Vogel)</li> <li>Pasando informaci\u00f3n entre Actividades (Activity) en Android</li> <li>Avoid memory leaks on Android</li> </ul>"},{"location":"desarrollo/android.html#snippets","title":"Snippets","text":"<ul> <li>WikiDroid</li> <li>Categor\u00eda Android en WikiCode</li> <li>Androcode</li> <li>Android Snippets</li> </ul>"},{"location":"desarrollo/android.html#estructuras-de-datos","title":"Estructuras de datos","text":"<ul> <li>Android DataFramework, creando la estructura de la Base de Datos</li> <li>Usando Android DataFramework en nuestro proyecto</li> </ul>"},{"location":"desarrollo/android.html#sobre-diseno","title":"Sobre Dise\u00f1o","text":"<ul> <li>Hello, Views</li> <li>Common Layout Objects</li> <li>Android Interaction Desing Patterns :!:</li> <li>Icon Design Guidelines</li> <li>Widget Design Guidelines</li> <li>Android App Developers GUI Kits, Icons, Fonts and Tools</li> <li>Android R Drawable Explorer</li> <li>20 herramientas \u00fatiles para Desarrolladores Android</li> <li>Android Design</li> <li>El cambio de tendencia en la UI de Android: el Men\u00fa Lateral</li> </ul>"},{"location":"desarrollo/android.html#mapas","title":"Mapas","text":"<ul> <li>Obtener APIKey</li> </ul> <p>Tu clave es:</p> <pre><code>0V21y2J7NRVSVKA...5C9Ag\n</code></pre> <p>Esta clave es v\u00e1lida para todas las aplicaciones firmadas con el certificado cuya huella dactilar sea:</p> <pre><code>C2:EC:22:8F:...:56:39\n</code></pre> <p>Incluimos un dise\u00f1o xml de ejemplo para que puedas iniciarte por los senderos de la creaci\u00f3n de mapas:</p> <pre><code>&lt;com.google.android.maps.MapView\n   android:layout_width=\"fill_parent\"\n   android:layout_height=\"fill_parent\"\n   android:apiKey=\"0V21y2J7NRVSVKA...5C9Ag\"\n   /&gt;\n</code></pre>"},{"location":"desarrollo/android.html#depurar","title":"Depurar","text":"<p>A\u00f1adir el atributo siguiente al bloque \"application\":</p> <pre><code>android:debuggable=\"true\"\n</code></pre> <p>Solicitar el permiso siguiente:</p> <pre><code>&lt;uses-permission android:name=\"android.permission.SET_DEBUG_APP\" /&gt;\n</code></pre>"},{"location":"desarrollo/android.html#logcat-filtrado","title":"Logcat filtrado","text":"<p>Ejemplo de una expresi\u00f3n de filtrado que suprime (silencia) todos los mensajes de log excepto los que tienen el tag \"ActivityManager\" con una prioridad Info o superior, y los que tienen el tag \"MyApp\" con una prioridad Debug o superior:</p> <pre><code>$ adb logcat ActivityManager:I MyApp:D *:S\n</code></pre> <p>Las prioridades de log son:</p> <ul> <li>V \u2014 Verbose (lowest priority)</li> <li>D \u2014 Debug</li> <li>I \u2014 Info</li> <li>W \u2014 Warning</li> <li>E \u2014 Error</li> <li>F \u2014 Fatal</li> <li>S \u2014 Silent (highest priority, on which nothing is ever printed)</li> </ul>"},{"location":"desarrollo/android.html#dumpsys-y-dumpstate","title":"Dumpsys y Dumpstate","text":"<p>Hace un volcado de los datos del sistema. Viene bien para encontrar componentes instalados (Aplicaciones, ContentProvider's, etc.):</p> <pre><code>$ adb shell dumpsys\n</code></pre> <pre><code>$ adb shell dumpstate\n</code></pre>"},{"location":"desarrollo/android.html#buscar-callerid","title":"Buscar CallerID","text":"<pre><code>import android.database.Cursor;\nimport android.net.Uri;\nimport android.provider.ContactsContract;\n\nUri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(\"+34976010101\"));\nCursor c = getContentResolver().query(uri, new String[]{ContactsContract.PhoneLookup.DISPLAY_NAME}, null, null, null);\n</code></pre>"},{"location":"desarrollo/android.html#manejo-de-uris-de-contactos","title":"Manejo de URI's de contactos","text":"<p>La API de Contacts de Android es muy potente y compleja. Los conceptos b\u00e1sicos se describen aqu\u00ed.</p> <p>Se manejan dos tipos de URI's:</p> <ul> <li>URI's de tipo tabla: Apuntan por ejemplo a una tabla completa como puede ser la de RawContacts.</li> <li>URI's de tipo item: Apuntan a un registro concreto de una tabla, por ejemplo un RawContact.</li> </ul>"},{"location":"desarrollo/android.html#uri-de-la-tabla-raiz-contacts","title":"URI de la tabla ra\u00edz Contacts","text":"<pre><code>import android.net.Uri;\nimport android.provider.ContactsContract;\nUri contactsUri = ContactsContract.Contacts.CONTENT_URI;\n</code></pre>"},{"location":"desarrollo/android.html#uri-de-la-subtabla-rawcontacts","title":"URI de la subtabla RawContacts","text":"<pre><code>import android.net.Uri;\nimport android.provider.ContactsContract;\nUri rawContactsUri = ContactsContract.RawContacts.CONTENT_URI;\n</code></pre>"},{"location":"desarrollo/android.html#uri-de-la-subtabla-data","title":"URI de la subtabla Data","text":"<pre><code>import android.net.Uri;\nimport android.provider.ContactsContract;\nUri datasUri = ContactsContract.Data.CONTENT_URI;\n</code></pre>"},{"location":"desarrollo/android.html#uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto","title":"URI de la subtabla Data s\u00f3lo con los registros de un RawContact concreto","text":"<pre><code>import android.net.Uri;\nimport android.provider.ContactsContract;\n// Tenemos en rawContactUri el URI de un RawContact. Ser\u00e1 del tipo content://com.android.contacts/raw_contacts/_id\nUri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY);\n</code></pre>"},{"location":"desarrollo/android.html#obtener-id-a-partir-de-una-uri-de-tipo-item","title":"Obtener ID a partir de una URI de tipo item","text":"<p>Por ejemplo el m\u00e9todo para insertar un RawContact devuelve una URI de tipo item (no tabla). Para obtener el ID de dicho elemento podemos usar algunas funciones que hay en la clase ''android.content.ContentUris''.</p> <pre><code>import android.content.ContentUris;\nlong rawContactId = ContentUris.parseId(rawContactUri);\n</code></pre>"},{"location":"desarrollo/android.html#obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla","title":"Obtener la URI de tipo item de un elemento concreto a partir de la tabla","text":"<p>Por ejemplo tenemos el ID de un elemento y queremos una URI para \u00e9l.</p> <pre><code>import android.net.Uri;\nimport android.provider.ContactsContract;\nimport android.content.ContentUris;\nUri rawContactUri = ContentUris.withAppendedId(ContactsContract.RawContacts.CONTENT_URI, rawContactId);\n</code></pre> <p>Resumiendo:</p> Significado URI (string) URI (constant) URI de toda la tabla RawContacts content://com.android.contacts/raw_contacts Uri rawContactsUri = android.provider.ContactsContract.RawContacts.CONTENT_URI URI de un registro concreto de RawContacts content://com.android.contacts/raw_contacts/&lt;_id&gt; Uri rawContactUri = ContentUris.withAppendedId(android.provider.ContactsContract.RawContacts.CONTENT_URI, rawContactId); URI de una subtabla (subdirectorio lo llaman en la documentaci\u00f3n) con los Datas asociados a un RawContact concreto content://com.android.contacts/raw_contacts/&lt;_id&gt;/entity Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY);"},{"location":"desarrollo/android.html#obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo","title":"Obtener el ID de un recurso en el ContentProvider de audio externo","text":"<pre><code>String outText = \"\";\nUri externalMediaUri = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\nString[] projection = new String[] {android.provider.BaseColumns._ID};\nString where = android.provider.MediaStore.MediaColumns.TITLE + \"=?\";\nString[] whereArgs = new String[] { \"Space Oddity\" };\nCursor c = managedQuery(externalMediaUri, projection, where, whereArgs, null);\nwhile (c.moveToNext()) {\n    for (int i = 0; i &lt; c.getColumnCount(); i++) {\n        outText += c.getColumnName(i) + \"= \" + c.getString(i) + \"\\n\";\n    }\n}\n</code></pre>"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\"","text":"<pre><code>ArrayList&lt;ContentProviderOperation&gt; operationList = new ArrayList&lt;ContentProviderOperation&gt;();\nBuilder builder = ContentProviderOperation.newInsert(RawContacts.CONTENT_URI);\nbuilder.withValue(RawContacts.ACCOUNT_NAME, \"vnd.sec.contact.phone\");\nbuilder.withValue(RawContacts.ACCOUNT_TYPE, \"vnd.sec.contact.phone\");\noperationList.add(builder.build());\n\nbuilder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);\nbuilder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);\nbuilder.withValue(ContactsContract.Data.MIMETYPE,\n        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE);\nbuilder.withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, \"Felipito\");\noperationList.add(builder.build());\n\nbuilder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);\nbuilder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);\nbuilder.withValue(ContactsContract.Data.MIMETYPE, CommonDataKinds.Phone.CONTENT_ITEM_TYPE);\nbuilder.withValue(CommonDataKinds.Phone.TYPE, CommonDataKinds.Phone.TYPE_MAIN);\nbuilder.withValue(CommonDataKinds.Phone.NUMBER, \"976010101\");\noperationList.add(builder.build());\n\nbuilder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);\nbuilder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);\nbuilder.withValue(ContactsContract.Data.MIMETYPE, CommonDataKinds.Photo.CONTENT_ITEM_TYPE);\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nbitmap.compress(Bitmap.CompressFormat.JPEG, 75, stream);\nbuilder.withValue(CommonDataKinds.Photo.PHOTO, stream.toByteArray());\nbuilder.withValue(RawContacts.Data.IS_SUPER_PRIMARY, 1);\noperationList.add(builder.build());\n\ntry {\n    getContentResolver().applyBatch(ContactsContract.AUTHORITY, operationList);\n} catch (RemoteException e) {\n    e.printStackTrace();\n} catch (OperationApplicationException e) {\n    e.printStackTrace();\n}\n</code></pre>"},{"location":"desarrollo/android.html#extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone","title":"Extraer el nombre, el n\u00famero y la foto de los Contacts de tipo \"vnd.sec.contact.phone\"","text":"<pre><code>Uri rawContactsUri = ContactsContract.RawContacts.CONTENT_URI;\nString[] projection = new String[] { ContactsContract.RawContacts._ID };\nString where = ContactsContract.RawContacts.ACCOUNT_TYPE + \"=? AND \"\n        + ContactsContract.RawContacts.ACCOUNT_NAME + \"=? AND \"\n        + ContactsContract.RawContacts.DELETED + \"=?\";\nString[] whereArgs = new String[] { \"vnd.sec.contact.phone\", \"vnd.sec.contact.phone\", \"0\" };\nString sortOrder = \"display_name ASC\";\nCursor c = managedQuery(rawContactsUri, projection, where, whereArgs, sortOrder);\noutText += rawContactsUri.toString() + \"\\n\";\noutText += c.getCount() + \"\\n\";\nwhile (c.moveToNext()) {\n    int colPos = c.getColumnIndex(ContactsContract.RawContacts._ID);\n    long rawContactId = Long.parseLong(c.getString(colPos));\n    Uri rawContactUri = ContentUris.withAppendedId(ContactsContract.RawContacts.CONTENT_URI,\n            rawContactId);\n    Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY);\n    String name = \"\";\n    String number = \"\";\n    Bitmap bitmap = null;\n\n    String[] projection1 = new String[] { CommonDataKinds.StructuredName.DISPLAY_NAME };\n    String where1 = Data.MIMETYPE + \"=?\";\n    String[] whereArgs1 = new String[] { CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE };\n    Cursor c1 = managedQuery(datasUri, projection1, where1, whereArgs1, null);\n    if (c1.moveToNext()) {\n        name = c1.getString(c1.getColumnIndex(CommonDataKinds.StructuredName.DISPLAY_NAME));\n        c1.close();\n    }\n\n    String[] projection2 = new String[] { CommonDataKinds.Phone.NUMBER };\n    String where2 = Data.MIMETYPE + \"=?\";\n    String[] whereArgs2 = new String[] { CommonDataKinds.Phone.CONTENT_ITEM_TYPE };\n    Cursor c2 = managedQuery(datasUri, projection2, where2, whereArgs2, null);\n    if (c2.moveToNext()) {\n        number = c2.getString(c2.getColumnIndex(CommonDataKinds.Phone.NUMBER));\n        c2.close();\n    }\n\n    String[] projection3 = new String[] { CommonDataKinds.Photo.PHOTO };\n    String where3 = Data.MIMETYPE + \"=?\";\n    String[] whereArgs3 = new String[] { CommonDataKinds.Photo.CONTENT_ITEM_TYPE };\n    Cursor c3 = managedQuery(datasUri, projection3, where3, whereArgs3, null);\n    if (c3.moveToNext()) {\n        byte[] photo = c3.getBlob(c3.getColumnIndex(CommonDataKinds.Photo.PHOTO));\n        bitmap = BitmapFactory.decodeByteArray(photo, 0, photo.length);\n        c3.close();\n    }\n\n    outText += \"ID= \" + rawContactId + \"; Nombre= \" + name + \"; N\u00famero= \" + number;\n    if (bitmap != null) {\n        outText += \"; Ancho foto= \" + bitmap.getWidth() + \"; Alto foto= \" + bitmap.getHeight();\n    }\n    outText += \"\\n\";\n}\nc.close();\n</code></pre>"},{"location":"desarrollo/android.html#borrado-de-los-contactos-de-un-tipo","title":"Borrado de los contactos de un tipo","text":"<pre><code>Uri rawContacts = ContactsContract.RawContacts.CONTENT_URI;\nString where = ContactsContract.RawContacts.ACCOUNT_TYPE + \"=?\";\nString[] whereArgs = new String[] { \"es.eduardofilo.app\" };\ngetContentResolver().delete(rawContacts, where, whereArgs);\n</code></pre>"},{"location":"desarrollo/android.html#borrado-de-un-contacto","title":"Borrado de un contacto","text":"<pre><code>Uri rawContacts = ContactsContract.RawContacts.CONTENT_URI;\nUri rawContactUri = ContentUris.withAppendedId(ContactsContract.RawContacts.CONTENT_URI, 13);\ngetContentResolver().delete(rawContactUri, null, null);\n</code></pre>"},{"location":"desarrollo/android.html#actualizar-el-nombre-de-un-contacto","title":"Actualizar el nombre de un contacto","text":"<pre><code>long rawContactId = 14;\nUri data = ContactsContract.Data.CONTENT_URI;\nContentValues values = new ContentValues();\nvalues.put(CommonDataKinds.StructuredName.DISPLAY_NAME, \"Jorgito\");\nString where = Data.MIMETYPE + \"=? AND \" + ContactsContract.Data.RAW_CONTACT_ID + \"=?\";\nString[] whereArgs = new String[] { CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE, Long.toString(rawContactId) };\ngetContentResolver().update(data, values, where, whereArgs);\n</code></pre>"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\"","text":"<pre><code>ContentValues values = new ContentValues();\nvalues.put(RawContacts.ACCOUNT_TYPE, \"vnd.sec.contact.phone\");\nvalues.put(RawContacts.ACCOUNT_NAME, \"vnd.sec.contact.phone\");\nUri rawContactUri = getContentResolver().insert(RawContacts.CONTENT_URI, values);\nlong rawContactId = ContentUris.parseId(rawContactUri);\n\nvalues.clear();\nvalues.put(Data.RAW_CONTACT_ID, rawContactId);\nvalues.put(Data.MIMETYPE, CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE);\nvalues.put(CommonDataKinds.StructuredName.DISPLAY_NAME, \"Pepito\");\nUri data1Uri = getContentResolver().insert(ContactsContract.Data.CONTENT_URI, values);\nvalues.clear();\n\nvalues.put(Data.RAW_CONTACT_ID, rawContactId);\nvalues.put(Data.MIMETYPE, CommonDataKinds.Phone.CONTENT_ITEM_TYPE);\nvalues.put(CommonDataKinds.Phone.TYPE, CommonDataKinds.Phone.TYPE_MAIN);\nvalues.put(CommonDataKinds.Phone.NUMBER, \"976010101\");\nUri data2Uri = getContentResolver().insert(ContactsContract.Data.CONTENT_URI, values);\n</code></pre>"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\"","text":"<p>Igual que antes pero hecho con el sistema de operaciones por lotes de los ContentProvider's.</p> <pre><code>ArrayList&lt;ContentProviderOperation&gt; operationList = new ArrayList&lt;ContentProviderOperation&gt;();\nBuilder builder = ContentProviderOperation.newInsert(RawContacts.CONTENT_URI);\nbuilder.withValue(RawContacts.ACCOUNT_NAME, \"vnd.sec.contact.phone\");\nbuilder.withValue(RawContacts.ACCOUNT_TYPE, \"vnd.sec.contact.phone\");\noperationList.add(builder.build());\n\nbuilder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);\nbuilder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);\nbuilder.withValue(ContactsContract.Data.MIMETYPE,\n        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE);\nbuilder.withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, \"Debianito\");\noperationList.add(builder.build());\n\nbuilder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);\nbuilder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);\nbuilder.withValue(ContactsContract.Data.MIMETYPE, CommonDataKinds.Phone.CONTENT_ITEM_TYPE);\nbuilder.withValue(CommonDataKinds.Phone.TYPE, CommonDataKinds.Phone.TYPE_MAIN);\nbuilder.withValue(CommonDataKinds.Phone.NUMBER, \"976010101\");\noperationList.add(builder.build());\n\ntry {\n    getContentResolver().applyBatch(ContactsContract.AUTHORITY, operationList);\n} catch (RemoteException e) {\n    e.printStackTrace();\n} catch (OperationApplicationException e) {\n    e.printStackTrace();\n}\n</code></pre>"},{"location":"desarrollo/android.html#localizar-un-launcher-que-no-sea-el-nuestro","title":"Localizar un Launcher que no sea el nuestro","text":"<pre><code>PackageManager pm = getPackageManager();\nIntent intent = new Intent(Intent.ACTION_MAIN);\nintent.addCategory(Intent.CATEGORY_HOME);\nList&lt;ResolveInfo&gt; launchers = pm.queryIntentActivities(intent, 0);\nString packageName = null;\nString name = null;\nfor (ResolveInfo ri : launchers) {\n    if (!ri.activityInfo.name.equals(\"es.eduardofilo.app.mobile.IdentificarTerminal\")) {\n        name = ri.activityInfo.name;\n        packageName = ri.activityInfo.packageName;\n        break;\n    }\n}\n\nIntent myIntent = new Intent();\nmyIntent.setClassName(packageName, name);\nstartActivity(myIntent);\n</code></pre>"},{"location":"desarrollo/android.html#obtener-un-authtoken-de-un-account","title":"Obtener un authToken de un Account","text":"<pre><code>mAccountManager = AccountManager.get(this);\nAccount[] accounts = mAccountManager.getAccountsByType(ACCOUNT_TYPE);\nfor (Account account : accounts) {\n    outText += account.toString() + \"\\n\";\n    AccountManagerFuture&lt;Bundle&gt; accountManagerFuture = mAccountManager.getAuthToken(account,\n                    \"es.eduardofilo.app\", true, null, null);\n    Bundle authTokenBundle;\n    String token = null;\n    try {\n        authTokenBundle = accountManagerFuture.getResult();\n        token = authTokenBundle.get(AccountManager.KEY_AUTHTOKEN).toString();\n    } catch (OperationCanceledException e) {\n        e.printStackTrace();\n    } catch (AuthenticatorException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    if (!TextUtils.isEmpty(token)) {\n        outText += token + \"\\n\";\n    }\n}\n</code></pre>"},{"location":"desarrollo/db.html","title":"Bases de Datos","text":""},{"location":"desarrollo/db.html#enlaces","title":"Enlaces","text":"<ul> <li>What's the difference between identifying and non-identifying relationships?</li> </ul>"},{"location":"desarrollo/db.html#join-cheat-sheet","title":"Join Cheat sheet","text":""},{"location":"desarrollo/diseno.html","title":"Dise\u00f1o","text":""},{"location":"desarrollo/diseno.html#colecciones-iconos","title":"Colecciones iconos","text":"<ul> <li>Crystal Clear</li> <li>FamFamFam</li> <li>Free icons search engine - iconlet</li> <li>Icon Finder :exclamation:</li> <li>ICONS etc</li> </ul>"},{"location":"desarrollo/diseno.html#coleccion-fondos","title":"Colecci\u00f3n fondos","text":"<ul> <li>Backgrounds ETC</li> </ul>"},{"location":"desarrollo/diseno.html#buscador-imagenes","title":"Buscador im\u00e1genes","text":"<ul> <li>freepik</li> </ul>"},{"location":"desarrollo/diseno.html#coleccion-de-imagenes","title":"Colecci\u00f3n de im\u00e1genes","text":"<ul> <li>stock.xchng</li> </ul>"},{"location":"desarrollo/diseno.html#colores","title":"Colores","text":"<ul> <li>Colour Scheme Calculator: Calculadora de colores complementarios a uno dado.</li> </ul>"},{"location":"desarrollo/dokuwiki.html","title":"Dokuwiki","text":""},{"location":"desarrollo/dokuwiki.html#thumbnails-automaticos-de-imagenes","title":"Thumbnail's autom\u00e1ticos de im\u00e1genes","text":"<p>Para ello basta con instalar en el servidor PHP que ejecute DokuWiki el m\u00f3dulo GD para PHP. En Ubuntu el paquete se llama <code>php5-gd</code>.</p>"},{"location":"desarrollo/dokuwiki.html#template-monobook","title":"Template Monobook","text":"<p>Hay un template que proporciona el mismo interfaz que el de MediaWiki (Wikipedia) a DokuWiki. Se trata de Monobook.</p>"},{"location":"desarrollo/dokuwiki.html#instalacion","title":"Instalaci\u00f3n","text":"<p>Adem\u00e1s de instalar la plantilla y configurarla, es necesario instalar el plugin Display Wiki Page.</p>"},{"location":"desarrollo/dokuwiki.html#cambios-recientes","title":"Cambios recientes","text":"<p>Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"Cambios recientes\" haciendo lo siguiente:</p> <ul> <li>A\u00f1adir las siguientes lineas al fichero <code>$DOKU_BASE/lib/tpl/monobook/context.php</code>:     <pre><code>$monobook['defaulttoolbox']['recent']['href'] = DOKU_BASE.\"doku.php?do=recent\";\n$monobook['defaulttoolbox']['recent']['text'] = $lang['monobook_recent'];\n$monobook['defaulttoolbox']['recent']['rel'] = \"nofollow\";\n</code></pre></li> <li>Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354):     <pre><code>$monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;amp;do=backlink\";\n</code></pre></li> <li>A\u00f1adir la linea siguiente al fichero <code>$DOKU_BASE/lib/tpl/monobook/lang/es/lang.php</code>:     <pre><code>$lang['monobook_recent'] = \"Cambios recientes\";\n</code></pre></li> </ul>"},{"location":"desarrollo/dokuwiki.html#indice","title":"\u00cdndice","text":"<p>Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"\u00cdndice\" haciendo lo siguiente:</p> <ul> <li>A\u00f1adir las siguientes lineas al fichero <code>$DOKU_BASE/lib/tpl/monobook/context.php</code>:     <pre><code>$monobook['defaulttoolbox']['index']['href'] = DOKU_BASE.\"doku.php?do=index\";\n$monobook['defaulttoolbox']['index']['text'] = $lang['monobook_index'];\n$monobook['defaulttoolbox']['index']['rel'] = \"nofollow\";\n</code></pre></li> <li>Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354):     <pre><code>$monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;amp;do=backlink\";\n</code></pre></li> <li>A\u00f1adir la linea siguiente al fichero <code>$DOKU_BASE/lib/tpl/monobook/lang/es/lang.php</code>:     <pre><code>$lang['monobook_index'] = \"\u00cdndice\";\n</code></pre></li> </ul>"},{"location":"desarrollo/dokuwiki.html#logo","title":"Logo","text":"<p>El logo que aparece arriba a la izquierda es el fichero <code>logo.png</code> que se encuentra en el directorio <code>$DOKU_BASE/lib/tpl/monobook/user</code>. El icono que aparece en la barra de direcci\u00f3n del navegador es el fichero <code>favicon.ico</code> del mismo directorio.</p>"},{"location":"desarrollo/dokuwiki.html#backup-automatico","title":"Backup autom\u00e1tico","text":"<p>Programar diariamente el script siguiente:</p> <pre><code>#!/bin/bash\n\n# Backup de IMSWiki.\n\n# Creamos un identificador con la fecha para diferenciar los backups\nfecha=`date +%m%d`\n\n# Si el fichero ya existe no repetimos el backup\nif [ -f $HOME.backupWiki/backupWiki$fecha.tgz ]; then\n        echo \"El backup ya existe\"\n        exit\nfi\n\n# Hacemos el backup sobre el servidor\nssh aire@192.168.11.3 tar -czvf /tmp/backupWiki$fecha.tgz /var/www/data/\n\n# Lo copiamos a nuestra m\u00e1quina\nscp aire@192.168.11.3:/tmp/backupWiki$fecha.tgz $HOME/.backupWiki\n\n# Borramos el bote recien creado y que ya ha sido transmitido a nuestra m\u00e1quina\nssh aire@192.168.11.3 rm /tmp/backupWiki$fecha.tgz\n\n# Purgamos los backups de hace m\u00e1s de un mes en nuestra m\u00e1quina\nfind $HOME/.backupWiki -name 'backupWiki*.tgz' -mtime +30 -type f|xargs rm -rf\n</code></pre> <p>El script anterior tal y como est\u00e1 dise\u00f1ado deposita el backup sobre el directorio <code>$HOME/.backupWiki</code> por lo que deber\u00e1 existir dicho directorio. La programaci\u00f3n se puede hacer de muchas maneras (por ejemplo en Gnome a\u00f1adiendo una entrada al panel de control Sesiones, solapa \"Programas de inicio\").</p>"},{"location":"desarrollo/eclipse.html","title":"Eclipse","text":""},{"location":"desarrollo/eclipse.html#cambio-de-tipo-de-letra-del-editor","title":"Cambio de tipo de letra del editor","text":"<p>Acceder al siguiente elemento de las preferencias: \"General / Appearence / Colors and Fonts\". Desplegar el lenguaje que se est\u00e9 utilizando en el proyecto (Java por ejemplo). Seleccionar el elemento \"Java Editor Text Font\" y pulsar el bot\u00f3n \"Change\".</p>"},{"location":"desarrollo/eclipse.html#atributos-de-ficheros-xml-uno-por-linea","title":"Atributos de ficheros XML uno por linea","text":"<ul> <li>Fuente</li> </ul> <p>Acceder al siguiente elemento de las preferencias: \"XML / XML FIles / Editor\". Seleccionar el elemento \"Split multiple attributes each on a new line\".</p>"},{"location":"desarrollo/eclipse.html#columnas-admitidas-por-el-indentador-automatico","title":"Columnas admitidas por el indentador autom\u00e1tico","text":"<p>Por defecto Eclipse admite 80 columnas de texto cuando se aplica el formateador autom\u00e1tico (Comando/Ctrl + Shift + F). Para cambiar este valor hay que acudir a la siguiente ruta en Preferencias:</p> <pre><code>Java / Code Style / Formatter\n</code></pre> <p>Aqu\u00ed hay que crear un profile nuevo que podamos editar (dado que los predeterminados son de s\u00f3lo lectura). Una vez creado (nos podemos basar en el predeterminado de nombre \"Eclipse [built-in]\") iremos a:</p> <pre><code>Edit... / Line Wrapping / General settings / Maximun line width\n</code></pre> <p>Y le daremos el valor deseado (120 en mi caso). Para reforzar la situaci\u00f3n de ese l\u00edmite, podemos cambiar el siguiente ajuste en preferencias y darle el mismo valor (120 en mi caso):</p> <pre><code>General / Editors / Text Editors / Print margin column (previamente hay que activar \"Show print margin\")\n</code></pre>"},{"location":"desarrollo/git.html","title":"Git","text":""},{"location":"desarrollo/git.html#enlaces","title":"Enlaces","text":"<ul> <li>Libro Pro Git en espa\u00f1ol</li> <li>Cheat Sheat</li> <li>git - la gu\u00eda sencilla :exclamation:</li> <li>Git Tutorials &amp; Training by Atlassian :exclamation:</li> <li>Detached HEAD en Git</li> <li>Github git tutorial</li> <li>La Par\u00e1bola de Git @ CAPSiDE HQ</li> <li>Lleva Git al pr\u00f3ximo nivel con Git Flow</li> <li>git-flow cheatsheet</li> <li>Github Release Stats</li> </ul>"},{"location":"desarrollo/git.html#comandos-basicos","title":"Comandos b\u00e1sicos","text":"<p>Config:</p> <pre><code>$ git config --global user.name \"Eduardo Moreno\"\n$ git config --global user.email user@dominio.com\n$ git config --global alias.co checkout\n$ git config --global alias.ci commit\n$ git config --global alias.st status\n$ git config --global core.editor \"subl -w\"\n</code></pre> <p>Alternativamente se pueden hacer todos los cambios simult\u00e1neamente editando el fichero <code>~/.gitconfig</code>. Una configuraci\u00f3n podr\u00eda ser:</p> <pre><code>[user]\n        name = Eduardo Moreno\n        email = user@dominio.com\n[alias]\n        co = checkout\n        ci = commit\n        st = status\n[core]\n        editor = subl -w\n</code></pre> <p>Creaci\u00f3n repositorio (local; crea el subdirectorio <code>.git</code>):</p> <pre><code>$ cd first_app\n$ git init\n</code></pre> <p>Add (fuente):</p> <pre><code># stages All\n$ git add -A\n# stages new and modified, without deleted\n$ git add .\n# stages modified and deleted, without new\n$ git add -u\n</code></pre> <p>Commit:</p> <pre><code>$ git commit\n</code></pre> <p>Commit general de cambios:</p> <pre><code>$ git commit -a\n</code></pre> <p>Status:</p> <pre><code>$ git status\n</code></pre> <p>Restituir ficheros borrados:</p> <pre><code>$ git checkout -f\n</code></pre> <p>Log:</p> <pre><code>$ git log\n</code></pre> <p>Log indicando los ficheros modificados:</p> <pre><code>$ git log --name-status\n$ git log --stat\n</code></pre> <p>Ficheros modificados en un branch:</p> <pre><code>$ git diff --name-status master..sip-economy\n$ git diff --stat master..sip-economy\n</code></pre> <p>Log indicando los commits que afectan a un fichero (fuente):</p> <pre><code>$ git log --follow filename\n</code></pre> <p>Localizar el commit inicial de la rama <code>branch_name</code> surgida de <code>master</code> (fuente):</p> <pre><code>$ git log master..branch_name --oneline | tail -1\n</code></pre> <p>Rename:</p> <pre><code>$ git mv fichero.txt fichero.log\n</code></pre> <p>Preparar un servidor:</p> <pre><code>$ cd first_app/..\n$ git clone --bare first_app first_app.git\n$ scp -r first_app.git usuario@dominio.com:git\n</code></pre> <p>Conectar la copia de trabajo con un servidor:</p> <pre><code>$ cd first_app\n$ git remote add origin usuario@dominio.com:git/first_app.git\n</code></pre> <p>(<code>origin</code> es el nombre de la conexi\u00f3n; puede ser cualquier cosa, aunque si se pone otra cosa habr\u00e1 que especificar el nombre al hacer <code>push</code>, ya que <code>origin</code> es el nombre de destino predeterminado)</p> <p>Mostrar la lista de conexiones de la copia de trabajo con servidores:</p> <pre><code>$ git remote -v\n</code></pre> <p>Desconectar la copia de trabajo con un servidor:</p> <pre><code>$ git remote rm origin\n</code></pre> <p>(<code>origin</code> es el nombre de la conexi\u00f3n; puede ser cualquier otro)</p> <p>Checkout (remoto):</p> <pre><code>$ git clone usuario@dominio.com:git/first_app.git\n</code></pre> <p>Sincronizar con el servidor remoto:</p> <pre><code>$ git push [origin master]\n</code></pre> <p>Info (parecido a svn info):</p> <pre><code>$ cat .git/config\n</code></pre> <p>Crear un tag</p> <pre><code>$ git tag -a tag_id -m \"Creaci\u00f3n de tag tag_id.\"\n$ git push --follow-tags\n</code></pre> <p>Eliminaci\u00f3n de un tag</p> <pre><code>$ git tag -d tag_id\n$ git push origin :refs/tags/tag_id\n</code></pre> <p>Eliminaci\u00f3n de \u00faltimo commit (fuente)</p> <pre><code>$ git reset --hard HEAD~1\n</code></pre> <p>Si el commit ya ha subido al repositorio hacer adem\u00e1s:</p> <pre><code>$ git push origin HEAD --force\n</code></pre> <p>Para olvidar cambios (incluso commits) hechos en local (fuente):</p> <pre><code>$ git reset --hard origin/master\n</code></pre>"},{"location":"desarrollo/git.html#diffs","title":"Diff's","text":"<p>Distintos tipos de diff's:</p> <ul> <li>working vs staging: <code>git diff</code></li> <li>staging vs snapshot: <code>git diff --staged</code></li> <li>working vs snapshot: <code>git diff HEAD</code></li> <li>snapshot vs snapshot: <code>git diff &lt;from_SHA1&gt; &lt;to_SHA1&gt;</code></li> </ul> <p>Ficheros modificados entre dos commits:</p> <pre><code>$ git diff --name-status SHA1 SHA2\n$ #o\n$ git diff --name-only SHA1 SHA2\n$ #o\n$ git diff --stat SHA1 SHA2\n</code></pre> <p>Diferencias en un fichero entre dos commits:</p> <pre><code>$ git diff SHA1 SHA2 FICHERO\n</code></pre> <p>Muestra la versi\u00f3n de un fichero en un determinado commit:</p> <pre><code>$ git show SHA:FILE\n</code></pre>"},{"location":"desarrollo/git.html#branches","title":"Branches","text":"<p>Creaci\u00f3n:</p> <pre><code>$ git checkout -b alta-usuarios\n</code></pre> <p>Listado de branches:</p> <pre><code>$ git branch\n</code></pre> <p>Listado de branches locales y remotos:</p> <pre><code>$ git branch -a\n</code></pre> <p>Seleccionar un branch:</p> <pre><code>$ git checkout alta-usuarios\n</code></pre> <p>Sincronizar con el servidor remoto:</p> <pre><code>$ git push origin alta-usuarios\n</code></pre> <p>Seleccionar trunk:</p> <pre><code>$ git checkout master\n</code></pre> <p>Merge:</p> <pre><code>$ git checkout master\n$ git merge alta-usuarios\n$ git branch -d alta-usuarios\n</code></pre> <p>Abandonar y borrar un branch local:</p> <pre><code>$ git checkout master\n$ git branch -D alta-usuarios\n</code></pre> <p>Borrar un branch remoto. Si despu\u00e9s de hacer lo anterior hacemos un git pull la rama local volver\u00e1 a crearse, ya que segu\u00eda estando en el servidor. Esto podemos arreglarlo de la siguiente manera:</p> <pre><code>$ git push origin :alta-usuarios #suponiendo que la rama en el servidor se llama igual que nuestra ex-rama local\n</code></pre> <p>o</p> <pre><code>$ git push origin --delete alta-usuarios\n</code></pre> <p>Seleccionar un branch remoto (fuente):</p> <pre><code>$ git checkout -b fix#3413 origin/fix#3413\n</code></pre>"},{"location":"desarrollo/git.html#stash","title":"Stash","text":"<p>Borrado de la lista:</p> <pre><code>$ git stash clear\n</code></pre> <p>Guardar y recuperar con nombre (fuente):</p> <pre><code># Guardar\ngit stash save nombre\n# Listar\ngit stash list\n    stash@{0}: On branch: nombre\n# Aplicar\ngit stash apply stash@{0}\n# Borrar\ngit stash drop stash@{0}\n</code></pre> <p>Ver los cambios que contiene un stash (fuente):</p> <pre><code># Para ver el contenido del stash m\u00e1s reciente\ngit stash show -p\n# Para ver el contenido de un stash en concreto\ngit stash show -p stash@{1}\n</code></pre>"},{"location":"desarrollo/git.html#ignorar-cambios-de-un-fichero-incluido-en-el-repositorio","title":"Ignorar cambios de un fichero incluido en el repositorio","text":"<p>(Fuente) No se trata de la t\u00edpica entrada en <code>.gitignore</code> dado que los ficheros all\u00ed listados se supone que ni siquiera forman parte del repositorio. Se trata de tener una versi\u00f3n del fichero en el repositorio pero luego no queremos actualizarlo. Para ello ejecutar:</p> <pre><code>git update-index --assume-unchanged &lt;file&gt;\n</code></pre> <p>Para averiguar los ficheros que estamos ignorando de esta forma:</p> <pre><code>git ls-files -v | grep '^h'\n</code></pre> <p>Y si en alg\u00fan momento queremos recuperar la detecci\u00f3n de cambios en el fichero:</p> <pre><code>git update-index --no-assume-unchanged &lt;file&gt;\n</code></pre>"},{"location":"desarrollo/git.html#salir-de-estado-head-detached-at","title":"Salir de estado \"HEAD detached at\"","text":"<p>En este estado b\u00e1sicamente es que HEAD deja de apuntar al final de una rama (secuencia de commits) para apuntar a un commit concreto directamente. La forma de salir es o volver a hacer checkout de cualquier branch si no se quieren conservar los cambios hechos tras recuperar ese commit, o bien crear un branch temporal para commitear esos cambios y ya luego si se desea incorporarlos a la rama de la que nos hab\u00edamos descolgado.</p> <p>A continuaci\u00f3n se describen las dos opciones:</p> <ul> <li>Si no nos importa perder los cambios</li> </ul> <pre><code>git checkout &lt;branch&gt;\n</code></pre> <ul> <li>Si hay cambios tras hacer el checkout del commit:</li> </ul> <pre><code>git checkout -b temp\ngit checkout &lt;branch&gt;\ngit merge temp\n</code></pre> <p>En la fuente de estas ideas se describe un procedimiento m\u00e1s elaborado para reapuntar el <code>&lt;branch&gt;</code> (<code>master</code> en el ejemplo que ponen) a este nuevo branch temporal.</p>"},{"location":"desarrollo/git.html#cambiar-el-message-del-ultimo-commit","title":"Cambiar el message del \u00faltimo commit","text":"<p>(Fuente) Esto sirve si a\u00fan no hemos propagado el commit hacia otros repositorios remotos:</p> <pre><code>git commit --amend\n</code></pre>"},{"location":"desarrollo/git.html#gitbook","title":"gitbook","text":"<p>La utilidad de l\u00ednea de comando para compilar los libros a <code>epub</code> por ejemplo se instala con <code>npm</code>:</p> <pre><code>sudo npm install gitbook-cli -g\nsudo npm install svgexport -g\n</code></pre> <p>Una vez disponible, entraremos en el directorio del repositorio que contenga un gitbook y generaremos un epub:</p> <pre><code>$ cd git/\n$ git clone https://github.com/DjangoGirls/tutorial.git\n$ cd tutorial/es/\n$ gitbook epub ./ ./tutorial.epub\n</code></pre>"},{"location":"desarrollo/git.html#borrar-ultimo-commit","title":"Borrar \u00faltimo commit","text":"<p>Para borrar el \u00faltimo commit cuando a\u00fan no lo hemos publicado (push) hacer lo siguiente (fuente):</p> <pre><code>$ git reset --hard HEAD~1\n</code></pre> <p>Con esto conseguimos que el puntero del branch apunte al commit anterior al HEAD actual. Es importante que el commit que vayamos a borrar s\u00f3lo est\u00e9 en nuestro repositorio. Si ya ha sido propagado a otros repositorios, ser\u00e1 mejor deshacer los cambios mediante otro commit.</p>"},{"location":"desarrollo/git.html#sustituir-autor-de-todos-los-commits","title":"Sustituir autor de todos los commits","text":"<p>Fuente</p> <ol> <li> <p>Crear un clon bare del repositorio</p> <ul> <li> <p>A partir de origen remoto (suponemos que tenemos todas las copias de trabajo en <code>~/git</code>):</p> <pre><code>$ cd ~/git\n$ git clone --bare https://github.com/user/repo.git\n</code></pre> </li> <li> <p>A partir de origen local:</p> <pre><code>$ cd ~/git\n$ git clone --bare repo repo.git\n</code></pre> </li> </ul> </li> <li> <p>Nos situamos en el directorio con el repositorio bare que se acaba de crear:</p> <pre><code>$ cd repo.git\n</code></pre> </li> <li> <p>Copiar y pegar en la terminal el siguiente script sustituyendo las siguientes variables por lo que corresponda:</p> <ul> <li><code>OLD_EMAIL</code></li> <li><code>CORRECT_NAME</code></li> <li><code>CORRECT_EMAIL</code></li> </ul> <pre><code>#!/bin/sh\n\ngit filter-branch --env-filter '\n\nOLD_EMAIL=\"your-old-email@example.com\"\nCORRECT_NAME=\"Your Correct Name\"\nCORRECT_EMAIL=\"your-correct-email@example.com\"\n\nif [ \"$GIT_COMMITTER_EMAIL\" = \"$OLD_EMAIL\" ]\nthen\nexport GIT_COMMITTER_NAME=\"$CORRECT_NAME\"\nexport GIT_COMMITTER_EMAIL=\"$CORRECT_EMAIL\"\nfi\nif [ \"$GIT_AUTHOR_EMAIL\" = \"$OLD_EMAIL\" ]\nthen\nexport GIT_AUTHOR_NAME=\"$CORRECT_NAME\"\nexport GIT_AUTHOR_EMAIL=\"$CORRECT_EMAIL\"\nfi\n' --tag-name-filter cat -- --branches --tags\n</code></pre> </li> <li> <p>Pulsar Enter para ejecutar el script.</p> </li> <li>Revisar el log de Git.</li> <li> <p>Sincronizar los cambios al origin:</p> <pre><code>$ git push --force --tags origin 'refs/heads/*'\n</code></pre> </li> <li> <p>Borrar el clon temporal:</p> <pre><code>$ cd ..\n$ rm -rf repo.git\n</code></pre> </li> </ol>"},{"location":"desarrollo/git.html#submodulos","title":"Subm\u00f3dulos","text":"<p>Documentaci\u00f3n: Enlace 1, Enlace 2.</p> <p>A\u00f1adir subm\u00f3dulo (el directorio PATH que se pone al final no debe existir):</p> <pre><code>$ git submodule add SUBMODULE_URL PATH\n</code></pre> <p>Clonar un repositorio con subm\u00f3dulos:</p> <pre><code>$ git clone --recursive REPO_URL       # si los subm\u00f3dulos tienen a su vez subm\u00f3dulos\n$ git clone --recurse-submodules URL   # si no hay subm\u00f3dulos recursivos\n</code></pre> <p>Actualizar repositorio y subm\u00f3dulos:</p> <pre><code>$ git pull --recurse-submodules\n</code></pre>"},{"location":"desarrollo/git.html#borrar-commits-en-repositorio-remoto","title":"Borrar commits en repositorio remoto","text":"<p>Es importante recordar que si los cambios ya han sido compartidos, es decir otras personas los han sincronizado, se va a romper el hist\u00f3rico para estas personas. Pero si el repositorio es personal, se puede hacer lo siguiente:</p> <ol> <li> <p>Situarnos en el commit que nos interese:</p> <ol> <li>Para borrar s\u00f3lo el \u00faltimo: <code>git reset HEAD^ --hard</code></li> <li>Para borrar varios: <code>git reset &lt;hash_commit&gt; --hard</code></li> </ol> </li> <li> <p>Forzar los cambios en el repositorio remoto: <code>git push origin -f</code></p> </li> </ol>"},{"location":"desarrollo/html.html","title":"HTML+CSS","text":""},{"location":"desarrollo/html.html#enlaces","title":"Enlaces","text":""},{"location":"desarrollo/html.html#varios","title":"Varios","text":"<ul> <li>Google Video Player Web App</li> <li>C\u00f3mo reescribir correctamente una URL desde el servidor</li> <li>Herramientas que no te pueden faltar como desarrollador web: 5 herramientas para testear la calidad del c\u00f3digo desde el punto de vista de SEO, velocidad, etc.</li> <li>jsFiddle: Para testear c\u00f3digo HTML+JS+CSS.</li> <li>NetRenderer: Renderiza una p\u00e1gina con distintas versiones del motor de Internet Explorer.</li> <li>An\u00e1lisis de UserAgent</li> <li>All About Floats: Explica el concepto de Clearfix.</li> <li>TheCodePlayer: Video style walkthroughs showing cool stuff being created from scratch :exclamation:</li> <li>What's My Chain Cert?: Comprobaci\u00f3n de cadena de certificados en sitios HTTPS.</li> <li>Carrd: Simple, free, fully responsive one-page sites for pretty much anything.</li> </ul>"},{"location":"desarrollo/html.html#componentes","title":"Componentes","text":"<ul> <li>Menucool Horizontal menu</li> <li>Wifeo Creative Code</li> </ul>"},{"location":"desarrollo/html.html#seo","title":"SEO","text":"<ul> <li>Gu\u00eda de consejos de posicionamiento en Google</li> <li>Formatos de imagen: Gu\u00eda de optimizaci\u00f3n</li> </ul>"},{"location":"desarrollo/html.html#fonts","title":"Fonts","text":"<ul> <li>Web Safe Fonts Preview</li> <li>FontJazz - Embed fonts on web pages</li> <li>How to Embed Font in HTML Webpage \u2013 Custom Web Fonts</li> <li>Font Squirrel </li> <li>Google WebFonts</li> <li>Font Awesome: The iconic font designed for use with Twitter Bootstrap. Post que explica c\u00f3mo se usa.</li> <li>Heroicons: Beautiful hand-crafted SVG icons, by the makers of Tailwind CSS.</li> </ul>"},{"location":"desarrollo/html.html#frameworks","title":"Frameworks","text":"<ul> <li>Bootstrap by Twitter<ul> <li>Scaffolding</li> <li>Componentes</li> </ul> </li> <li>LESS</li> <li>Centurion</li> <li>IVORY</li> </ul>"},{"location":"desarrollo/html.html#rendimiento","title":"Rendimiento","text":"<ul> <li>Using Page Speed for Google Chrome</li> </ul>"},{"location":"desarrollo/html.html#html5","title":"HTML5","text":"<ul> <li>Seis sencillas \"buenas pr\u00e1cticas\" cuando usemos HTML5</li> <li>HTML5 Cheat Sheet</li> <li>Con IndexedDB puedes almacenar offline una base de datos en un navegador</li> </ul>"},{"location":"desarrollo/html.html#css","title":"CSS","text":"<ul> <li>Most Practical CSS Cheat Sheet Yet</li> <li>Recopilaci\u00f3n de siete tutoriales sorprendentes de CSS3</li> <li>CSS-Tricks</li> <li>CSS contents and browser compatibility</li> </ul>"},{"location":"desarrollo/html.html#responsive-design","title":"Responsive Design","text":"<ul> <li>Recommendations for building smartphone-optimized websites</li> <li>Skeleton</li> <li>Descripci\u00f3n de RD en Xitrus</li> <li>Screenqueries: Simular el funcionamiento de una p\u00e1gina en las pantallas de los dispositivos m\u00f3viles o en cualquier tama\u00f1o de pantalla. :exclamation:</li> <li>Media Queries: Recopilaci\u00f3n de responsive designs.</li> </ul>"},{"location":"desarrollo/ia.html","title":"IA","text":""},{"location":"desarrollo/ia.html#enlaces","title":"Enlaces","text":""},{"location":"desarrollo/ia.html#cursos","title":"Cursos","text":"<ul> <li>fast.ai</li> <li>IA para todos - Coursera</li> <li>Cursos de Machine Learning Andrew Ng - Coursera</li> <li>Stanford video lectures of course CS224n: Natural Language Processing with Deep Learning - YouTube</li> <li>Lecture Collection | Convolutional Neural Networks for Visual Recognition - YouTube</li> <li>Machine Learning (aprendizaje autom\u00e1tico) con Python: una introducci\u00f3n pr\u00e1ctica: Rese\u00f1a en Genbeta</li> </ul>"},{"location":"desarrollo/ia.html#tensorflow","title":"TensorFlow","text":"<ul> <li>TensorFlow For Poets</li> </ul>"},{"location":"desarrollo/ia.html#variational-autoencoders-vae","title":"Variational Autoencoders (VAE)","text":"<ul> <li>Tutorial on Variational Autoencoders</li> <li>Variational autoencoders</li> <li>Building Variational Auto-Encoders in TensorFlow</li> <li>Building Autoencoders in Keras</li> <li>Variational Autoencoder: Intuition and Implementation</li> <li>World Models. En PDF</li> </ul>"},{"location":"desarrollo/java.html","title":"Java","text":""},{"location":"desarrollo/java.html#enlaces","title":"Enlaces","text":"<ul> <li>Java Decompiler</li> <li>Project Lombok</li> </ul>"},{"location":"desarrollo/java.html#reempaquetar-un-jar","title":"Reempaquetar un jar","text":"<p>Para re-enlatar un jar que hemos explotado para retocar su contendido, hay que ejecutar el siguiente comando desde el directorio ra\u00edz donde descomprimimos el jar original:</p> <pre><code>$ jar cvf nombre.jar *\n</code></pre>"},{"location":"desarrollo/java.html#contar-lineas","title":"Contar lineas","text":"<p>Para contar las lineas de un proyecto, lanzar desde la ra\u00edz del proyecto ( el directorio src/java de un proyecto NetBeans, por ejemplo):</p> <pre><code>$ find . -name \"*.java\" | xargs wc -l\n</code></pre>"},{"location":"desarrollo/java.html#imprimir-callstack","title":"Imprimir callstack","text":"<p>Para averiguar la pila de llamadas de funciones que nos permiten llegar a la ejecuci\u00f3n del punto que estamos revisando. Viene muy bien cuando la ejecuci\u00f3n implica llamadas JNI ya que esa parte del c\u00f3digo suele quedar oculta en una librer\u00eda nativa (.so o .dll).</p> <pre><code>for (StackTraceElement ste : Thread.currentThread().getStackTrace()) {\n    Log.w(TAG, ste);\n}\n</code></pre>"},{"location":"desarrollo/java.html#iterar-un-map","title":"Iterar un Map","text":"<p>Para el caso de un <code>Map&lt;String, String&gt;</code>:</p> <pre><code>Iterator it = mapa.entrySet().iterator();\nwhile (it.hasNext()) {\n    Map.Entry e = (Map.Entry) it.next();\n    String name = (String) e.getKey();\n    String value = (String) e.getValue();\n    //...\n}\n</code></pre>"},{"location":"desarrollo/java.html#log4j","title":"log4j","text":"<p>(Fuente)</p> <p>El proyecto FHoSS utiliza la librer\u00eda log4j como casi todos los proyectos Java actuales. Log4j  es una librer\u00eda open source desarrollada en Java por la Apache Software Foundation que permite a los desarrolladores de software elegir la salida y el nivel de granularidad de los mensajes o \u201clogs\u201d a tiempo de ejecuci\u00f3n y no a tiempo de compilaci\u00f3n como es com\u00fanmente realizado.  La configuraci\u00f3n de salida y granularidad de los mensajes es realizada a tiempo de ejecuci\u00f3n mediante el uso de archivos de configuraci\u00f3n externos. Log4J ha sido implementado en otros lenguajes como: C, C++, C#, Perl, Python, Ruby y Eiffel.</p>"},{"location":"desarrollo/java.html#conceptos","title":"Conceptos","text":""},{"location":"desarrollo/java.html#niveles-de-prioridad-de-los-mensajes","title":"Niveles de prioridad de los mensajes","text":"<p>Por defecto Log4J tiene 6 niveles de prioridad para los mensajes (debug, info, warn, error, fatal, trace). Adem\u00e1s existen otros dos niveles extras (all y off):</p> <ul> <li>DEBUG:  se utiliza para escribir mensajes de depuraci\u00f3n, este log no debe estar activado cuando la aplicaci\u00f3n se encuentre en producci\u00f3n.</li> <li>INFO:  se utiliza para mensajes similares al modo \"verbose\" en otras aplicaciones.</li> <li>WARN:  se utiliza para mensajes de alerta sobre eventos que se desea mantener constancia, pero que no afectan el correcto funcionamiento del programa.</li> <li>ERROR:  se utiliza en mensajes de error de la aplicaci\u00f3n que se desea guardar, estos eventos afectan al programa pero lo dejan seguir funcionando, como por ejemplo que alg\u00fan par\u00e1metro de configuraci\u00f3n no es correcto y se carga el par\u00e1metro por defecto.</li> <li>FATAL:  se utiliza para mensajes cr\u00edticos del sistema, generalmente luego de guardar el mensaje el programa abortar\u00e1.</li> <li>TRACE: se utiliza para mostrar mensajes con un mayor nivel de detalle que debug.</li> <li>ALL: este es el nivel m\u00e1s bajo posible, habilita todos los logs.</li> <li>OFF: este es el nivel m\u00e1s alto posible, deshabilita todos los logs.</li> </ul>"},{"location":"desarrollo/java.html#appenders","title":"Appenders","text":"<p>En Log4J los mensajes son enviados a una (o varias) salida de destino, lo que se denomina un appender.</p> <p>Existen varios appenders disponibles y configurados, aunque tambi\u00e9n podemos crear y configurar nuestros propios appenders.</p> <p>T\u00edpicamente la salida de los mensajes es redirigida a un fichero de texto .log (FileAppender, RollingFileAppender), a un servidor remoto donde almacenar registros (SocketAppender), a una direcci\u00f3n de correo electr\u00f3nico (SMTPAppender), e incluso en una base de datos (JDBCAppender).</p> <p>Casi nunca es utilizado en un entorno de producci\u00f3n la salida a la consola (ConsoleAppender) ya que perder\u00eda gran parte de la utilidad de Log4J.</p>"},{"location":"desarrollo/java.html#layouts","title":"Layouts","text":"<p>Es el responsable de dar un formato de presentaci\u00f3n a los mensajes.</p> <p>Permite presentar el mensaje con el formato necesario para almacenarlo simplemente en un archivo de texto .log (SimpleLayout y PatternLayout), en una tabla HTML (HTMLLayout), o en un archivo XML (XMLLayout).</p> <p>Adem\u00e1s podemos a\u00f1adir informaci\u00f3n extra al mensaje, como la fecha en que se gener\u00f3, la clase que lo gener\u00f3, el nivel que posee...</p>"},{"location":"desarrollo/java.html#configuracion","title":"Configuraci\u00f3n","text":"<p>La API es totalmente configurable, ya que se realiza mediante un archivo en formato XML o en formato Java Properties (clave=valor), generalmente llamado log4j.properties.</p> <p>En el siguiente ejemplo implementamos un fichero properties de configuraci\u00f3n, y configuramos dos registros.</p> <ul> <li>CONSOLE imprimir\u00e1 los mensajes en la consola por l\u00edneas (%m%n).</li> <li>LOGFILE a\u00f1adir\u00e1 (append) los mensajes a un fichero (aplicacion.log), reservando los primeros 4 caracteres para los milisegundos en que se gener\u00f3 el mensaje (%-4r), entre corchetes qui\u00e9n gener\u00f3 el mensaje ( [%t]), cinco espacios para la prioridad del mensaje (%-5p), la categor\u00eda del mensaje (%c) y finalmente el propio mensaje junto con un retorno de carro (%m%n).</li> </ul> <pre><code>################################################################\n### Configuraci\u00f3n para LOCAL                                 ###\n###   Nivel de trazas m\u00e1ximo                                 ###\n###   Salida por consola y fichero                           ###\n################################################################\n#log4j.rootCategory=DEBUG, LOGFILE, CONSOLE\n\n#log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\n#log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\n#log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\n#log4j.appender.CONSOLE.layout.ConversionPattern=%-5p %c %x - %m%n\n\n################################################################\n### Configuraci\u00f3n para DESARROLLO, PREPRODUCCION, PRODUCCION ###\n###   S\u00f3lo nos interesa el nivel de ERROR                    ###\n###   No hay salida de consola                               ###\n################################################################\nlog4j.rootCategory=ERROR, LOGFILE\n\nlog4j.appender.LOGFILE=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.LOGFILE.file=${catalina.base}/logs/aplicacion.log\nlog4j.appender.LOGFILE.append=true\nlog4j.appender.LOGFILE.DatePattern='.'yyyy-MM-dd\nlog4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout\nlog4j.appender.LOGFILE.layout.ConversionPattern=%-4r [%t] %-5p %c - %m%n\n</code></pre> <p>Para el caso de utilizar PatternLayout, la definici\u00f3n de las piezas de informaci\u00f3n que se pueden incorporar al patr\u00f3n se encuentra en esta p\u00e1gina.</p> <p>Si se desea \u00fanicamente log de las clases pertenecientes a un paquete (es una forma de evitar los logs del servidor de aplicaci\u00f3n en una aplicaci\u00f3n J2EE), se indica de a\u00f1adiendo esta l\u00ednea:</p> <p><pre><code>log4j.logger.&lt;paquete&gt;=&lt;nivel_de_trazas&gt;\n</code></pre> por ejemplo:</p> <pre><code>log4j.logger.es.eduardofilo.ccm=DEBUG\n</code></pre>"},{"location":"desarrollo/javaee.html","title":"JavaEE","text":""},{"location":"desarrollo/javaee.html#displaytag-struts2","title":"DisplayTag &amp; Struts2","text":""},{"location":"desarrollo/javaee.html#subtabla-en-base-a-lista-anidada","title":"Subtabla en base a lista anidada","text":"<pre><code>&lt;display:table name=\"platformList\" id=\"platform\" pagesize=\"0\" requestURI=\"\" class=\"displaytag\"&gt;\n&lt;display:column property=\"name\" title=\"Platform\" /&gt;\n&lt;s:set name=\"formats\" value=\"#attr.platform.formats\" /&gt;\n&lt;display:column title=\"Formats\"&gt;\n&lt;display:table name=\"formats\" id=\"format\" class=\"simple sublist\"&gt;\n&lt;s:set name=\"screenRes\" value=\"#attr.format.screenWidth + 'x' + #attr.format.screenHeight\" /&gt;\n&lt;s:set name=\"wpRes\" value=\"#attr.format.wallpaperWidth + 'x' + #attr.format.wallpaperHeight\" /&gt;\n&lt;display:column title=\"Screen Resolution\"&gt;&lt;s:property value=\"screenRes\"/&gt;&lt;/display:column&gt;\n&lt;display:column title=\"Wallpaper Resolution\"&gt;&lt;s:property value=\"wpRes\"/&gt;&lt;/display:column&gt;\n&lt;display:column title=\"File\"&gt;&lt;s:file name=\"pic\" label=\"Pic\" theme=\"simple\"/&gt;&lt;/display:column&gt;\n&lt;/display:table&gt;\n&lt;/display:column&gt;\n&lt;/display:table&gt;\n</code></pre>"},{"location":"desarrollo/javaee.html#sessionid-en-action","title":"SessionID en Action","text":"<pre><code>public class MyActionClass extends ActionSupport implements ServletRequestAware {\n   //...\n\n   // Objeto HttpServletRequest asociado a la request. Inyectado por el interceptor servletConfig\n   private HttpServletRequest servletRequest;\n\n   /**\n    * Implementaci\u00f3n de interfaz ServletRequestAware\n    * @param servletRequest Objeto HttpServletRequest asociado a la request\n    */\n   @Override\n   public void setServletRequest(HttpServletRequest servletRequest) {\n       this.servletRequest = servletRequest;\n   }\n\n   public HttpServletRequest getServletRequest() {\n       return this.servletRequest;\n   }\n\n   //...\n\n   @Override\n   public String execute() throws Exception {\n       //...\n       // Obtenemos el ID de la sesi\u00f3n\n       String sessionID = this.servletRequest.getSession().getId();\n       //...\n   }\n}\n</code></pre>"},{"location":"desarrollo/javaee.html#mapa-de-session","title":"Mapa de Session","text":"<pre><code>public class MyActionClass extends ActionSupport implements SessionAware {\n   //...\n\n   // Mapa de par\u00e1metros de la sesi\u00f3n. Inyectado por el interceptor servletConfig\n   private Map&lt;String, Object&gt; session;\n\n   /**\n    * Implementaci\u00f3n de interfaz SessionAware\n    * @param session El mapa de session Servlet\n    */\n   @Override\n   public void setSession(Map&lt;String, Object&gt; session) {\n       this.session = session;\n   }\n\n   public Map&lt;String, Object&gt; getSession() {\n       return this.session;\n   }\n\n   //...\n\n   @Override\n   public String execute() throws Exception {\n       //...\n       // Ponemos y cogemos datos de la sessi\u00f3n\n       getSession().put(\"objeto\", objeto);\n       objeto = getSession().get(\"objeto\");\n       //...\n   }\n}\n</code></pre>"},{"location":"desarrollo/javaee.html#jsp","title":"JSP","text":""},{"location":"desarrollo/javaee.html#prepoblado-de-combo-desde-el-propio-jsp","title":"Prepoblado de combo desde el propio JSP","text":"<pre><code>&lt;s:select label=\"Priority\" name=\"wallpaper_priority\" list=\"#{-2:'Very Low',-1:'Low',0:'Normal',1:'High',2:'Very High'}\" /&gt;\n</code></pre>"},{"location":"desarrollo/javaee.html#inyectar-cabecera-http-en-jsp","title":"Inyectar cabecera HTTP en JSP","text":"<pre><code>&lt;% response.setHeader(\"P3P\", \"CP=\\\"HONK\\\"\"); %&gt;\n</code></pre>"},{"location":"desarrollo/javascript.html","title":"JavaScript","text":""},{"location":"desarrollo/javascript.html#json","title":"JSON","text":"<p>La siguiente sentencia serializa en forma de JSON cualquier objeto. Es muy \u00fatil para analizar un objeto:</p> <pre><code>alert(JSON.stringify(object));\n</code></pre> <p>Es m\u00e1s limpio escribir en la consola del navegador. Aqu\u00ed por ejemplo se muestra el objeto <code>data</code> de una instancia Vue.js:</p> <pre><code>console.log(JSON.stringify(vm._data));\n</code></pre> <p>\u00c9ste paquete es un buen explorador de estructuras JSON.</p>"},{"location":"desarrollo/javascript.html#npm","title":"NPM","text":"<p>Uso b\u00e1sico del gestor de paquetes de Node.js.</p> <p>Para gestionar las dependencias de paquetes en un proyecto hay que generar un fichero de seguimiento llamado <code>package.json</code>. Se genera con el comando (si a\u00f1adimos la opci\u00f3n <code>-y</code> dar\u00e1 todos los valores predeterminados autom\u00e1ticamente, incluso recoger\u00e1 los datos del repositorio git si \u00e9ste ya est\u00e1 inicializado):</p> <pre><code>npm init\n</code></pre> <p>Para descargar un paquete (por ejemplo lodash) e incorporarlo al fichero <code>package.json</code> ejecutar:</p> <pre><code>npm install lodash --save\n</code></pre> <p>Encontraremos que el paquete se ha descargado en un subdirectorio llamado <code>node_modules</code> e incorporado a la secci\u00f3n <code>dependencies</code> de <code>packages.json</code> (si no hubi\u00e9ramos puesto la opci\u00f3n <code>--save</code> s\u00f3lo se habr\u00eda descargado). Si la dependencia la queremos s\u00f3lo para el entorno de desarrollo (t\u00edpico por ejemplo en los paquetes de testing), en lugar de <code>--save</code> pondremos <code>--save-dev</code>.</p> <p>Algunos comandos \u00fatiles de npm son:</p> <ul> <li><code>npm install</code>: Descarga todos los paquetes indicados en <code>package.json</code>.</li> <li><code>npm install -g grunt-cli</code>: Descarga e instala el paquete indicado en global. Es lo habitual en herramientas de tipo CLI como Grunt.</li> <li><code>npm ls</code>: Muestra los paquetes instalados.</li> <li><code>npm outdated</code>: Muestra cu\u00e1les de los paquetes instalados est\u00e1n desactualizados, es decir, existen nuevas versiones.</li> <li><code>npm update</code>: Descarga las ultimas versiones de los paquetes instalados.</li> <li><code>npm show [package]@* version</code>: Muestra las versiones disponibles (en el repositorio npm) del paquete indicado. Por ejemplo: <code>npm show lodash@* version</code>.</li> <li><code>npm uninstall lodash</code>: Desinstala el paquete (lo elimina de <code>node_modules</code>). Si adem\u00e1s queremos que desaparezca de <code>package.json</code> hay que a\u00f1adir la opci\u00f3n <code>--save</code></li> </ul>"},{"location":"desarrollo/joomla.html","title":"Joomla","text":""},{"location":"desarrollo/joomla.html#enlaces","title":"Enlaces","text":"<ul> <li>Env\u00edo de mail desde FacileForms (Joomla)</li> </ul>"},{"location":"desarrollo/joomla.html#codificacion-de-la-pagina","title":"Codificaci\u00f3n de la p\u00e1gina","text":"<ul> <li>La codificaci\u00f3n de caracteres que se usa para enviar la p\u00e1gina al navegador se ajusta en el fichero globals.php a\u00f1adiendo la siguiente linea:     <pre><code>header( 'Content-Type: text/html; charset=UTF-8');\n</code></pre></li> <li>La codificaci\u00f3n que se informa en la secci\u00f3n header del c\u00f3digo fuente html de la p\u00e1gina se ajusta en el fichero language/spanish.php en la linea que dice:     <pre><code>DEFINE('_ISO','charset=utf-8');\n</code></pre></li> </ul> <p>Ver comentario de Mitsurugi en este foro.</p>"},{"location":"desarrollo/joomla.html#allow_url_fopen-desactivado","title":"allow_url_fopen desactivado","text":"<p>Para el problema del eWeather del tipo (fuente):</p> <pre><code>Warning: file_get_contents(): URL file-access is disabled in the server configuration in /(lo que sea)/includes/domit/xml_domit_parser.php on line 1645\n</code></pre> <p>El problema es seguramente del servidor, ya que el archivo php.ini tiene el par\u00e1metro allow_url_fopen deshabilitado. La soluci\u00f3n es utilizar la librer\u00eda cURL para evitar el uso de la funci\u00f3n file_get_contents().</p> <ul> <li>Localizar el archivo que est\u00e1 en la carpeta donde est\u00e9 alojado el Joomla en la siguiente ruta: /includes/domit/xml_domit_parser.php</li> <li>Editarlo e ir a la linea 1645</li> <li>En esa linea pone: return file_get_contents($filename);</li> <li>Eliminamos la l\u00ednea y ponemos esto en su lugar:     <pre><code>$ch = curl_init();\n$timeout = 5;\ncurl_setopt ($ch, CURLOPT_URL, $filename);\ncurl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);\nreturn curl_exec($ch);\ncurl_close($ch);\n</code></pre></li> <li>Guardamos el archivo y lo subimos al servidor sustituyendo al antiguo.</li> </ul>"},{"location":"desarrollo/phonegap.html","title":"Apuntes Curso Phonegap","text":"<p>Profesor: @ciberado</p>"},{"location":"desarrollo/phonegap.html#dias-1-a-5-18112014-24112014","title":"D\u00edas 1 a 5: 18/11/2014 -&gt; 24/11/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces","title":"Enlaces","text":"<ul> <li>Presentaci\u00f3n sobre Phonegap</li> <li>Freelance Corner: Listas de distribuci\u00f3n de proyectos para freelancers.</li> <li>Socrative: Gestor de aula (tests de profesor a alumnos).</li> <li>Brackets: Editor de c\u00f3digo.</li> <li>10 trucos para mejorar la terminal de Windows</li> <li>JSLint:Chequeador sintaxis JS.</li> <li>Cursos MongoDB</li> <li>Microjs: Microjs: Fantastic Micro-Frameworks and Micro-Libraries for Fun and Profit!</li> <li>Leaflet: An Open-Source JavaScript Library for Mobile-Friendly Interactive Maps.</li> <li>V\u00eddeos de Douglas Crockford (evangelizador JavaScript).</li> <li>Emmet: Plugin para Brackets. Macros para crear documentos f\u00e1cilmente.</li> <li>Beautify: Plugin para Brackets para formatear la indentaci\u00f3n autom\u00e1ticamente.</li> <li>Mockable: Para construir mocks de web services.</li> <li>Proveedores de WebServices:</li> <li>Digital Ocean</li> <li>AWS: Una m\u00e1quina micro (estilo Raspberry Pi) gratis durante un a\u00f1o.</li> <li>AWS Lambda</li> <li>Google AppEngine: Gratis hasta un umbral. Especial sobre AppEngine de We.Developers.</li> <li>DonDominio.com: Proveedor de dominios recomendado por alumno curso.</li> <li>json.org: Definici\u00f3n/documentaci\u00f3n de JSON.</li> <li>Firefox REST Easy addon: Cliente de servicios REST para testeos.</li> <li>jQuery: Librer\u00eda Javascript.</li> <li>Angular: Framework Javascript.</li> <li>CanIUse: Indica las tecnolog\u00edas soportadas por los distintos navegadores.</li> <li>W3C TRs: Listado de est\u00e1ndares y borradores del W3C.</li> <li>Mozilla Developer Network: Alternativa al W3C para consultar la documentaci\u00f3n de HTML.</li> <li>DevDocs: Filtrado de la documentaci\u00f3n MDN.</li> <li>Jade y HAML: Alternativas a HTML.</li> <li>JSFiddle: Prototipos HTML/CSS/JS.</li> <li>Transit: Plugin jQuery para animaciones.</li> <li>Adobe Color CC: Ruedas crom\u00e1ticas.</li> <li>Express: Fast, unopinionated, minimalist web framework for Node.js</li> <li>Heroku: Cloud Application Platform con soporte a Node.js</li> </ul>"},{"location":"desarrollo/phonegap.html#instalacion-entorno","title":"Instalaci\u00f3n entorno","text":"<p>M\u00f3dulos necesarios:</p> <ul> <li>JDK (instalado en <code>C:\\jdk1.8</code>)</li> <li>Poner en el PATH: <code>C:\\jdk1.8\\bin</code></li> <li>Ant (instalado en <code>C:\\ant</code>)</li> <li>Poner en el PATH: <code>C:\\ant\\bin</code></li> <li>Android SDK (instalado en <code>C:\\android-sdk</code>)</li> <li>Definir variable de entorno <code>ANDROID_HOME</code> con: <code>C:\\android-sdk</code></li> <li>Node (en Ubuntu)</li> <li>Phonegap: <code>npm install -g phonegap</code></li> <li>Genymotion: Emulador Android (muy r\u00e1pido).</li> <li>Vagrant (opcional): Empaquetador de entornos de desarrollo</li> </ul>"},{"location":"desarrollo/phonegap.html#creacion-de-proyecto-phonegap","title":"Creaci\u00f3n de proyecto Phonegap","text":"<pre><code>$ phonegap create 00HolaMundo --name HolaMundo --id es.eduardofilo.hm\n</code></pre>"},{"location":"desarrollo/phonegap.html#compilacion-y-ejecucion-de-proyecto-phonegap","title":"Compilaci\u00f3n y ejecuci\u00f3n de proyecto Phonegap","text":"<pre><code>$ cd 00HolaMundo\n$ phonegap build android\n$ phonegap run android\n</code></pre> <p>En realidad la tarea <code>run</code> hace <code>build</code>.</p>"},{"location":"desarrollo/phonegap.html#inspeccionar-dispositivos-externos-en-chrome","title":"Inspeccionar dispositivos externos en Chrome","text":"<pre><code>about:inspect\n</code></pre>"},{"location":"desarrollo/phonegap.html#rest-webservices","title":"REST WebServices","text":"<p>Servidor mock (mockable): demo0034470.mockable.io</p> <ul> <li>url: http://demo0034470.mockable.io/votaciones/38/yes</li> <li>type: POST</li> <li>dataType: json</li> </ul> <p>Respuesta:</p> <pre><code>{\n    \"votosTotal\": 6000,\n    \"votosPositivos\": 3500,\n    \"votosNegativos\": 2500,\n    \"fecha\": \"2013-04-17T12:32:12\"\n}\n</code></pre>"},{"location":"desarrollo/phonegap.html#jquery","title":"jQuery","text":"<p>Hay una convenci\u00f3n por la cual cuando invocamos jQuery ($) para localizar un elemento del DOM, la variable donde se carga se pone con el prefijo $. Por ejemplo:</p> <pre><code>var $paragrafos = $('p');\n</code></pre>"},{"location":"desarrollo/phonegap.html#ejemplo1","title":"Ejemplo1","text":"<pre><code>var $paragraphs = $('p');\nfor (var i=0; i &lt; $paragraphs.length ; i++) {\n    console.log(i, $paragraphs[i]);\n}\n$paragraphs.css('color', 'red');\n$paragraphs.css('background-color', 'green');\n\n$paragraphs.css({'color': 'blue',\n                 'background-color': 'yellow'});\n\nconsole.log($paragraphs.css('color'));\n$firstp = $('p:first');\n//$firstp = $('p').first();\n//$firstp = $('p').eq(0);\n$firstp.addClass('importante');\n</code></pre>"},{"location":"desarrollo/phonegap.html#ejemplo2","title":"Ejemplo2","text":"<pre><code>var $firstp = $('p:first');\nvar texto = $firstp.text();\n$firstp.text(texto.toUpperCase());\n//var $strong = $('&lt;strong&gt;');\n//$strong.text('contenido');\n//$firstp.prepend($strong);\n\n$('&lt;strong&gt;')\n    .text('contenido')\n    .prependTo($firstp);\n</code></pre>"},{"location":"desarrollo/phonegap.html#ejemplo3","title":"Ejemplo3","text":"<pre><code>var colores = ['Rojo', 'Verde', 'Azul'];\nvar $ol = $('ol');\n$ol.empty();\nfor (var i=0; i&lt;colores.length; i++) {\n    $ol.append($('&lt;li&gt;').text(colores[i]));\n    //$('&lt;li&gt;').text(colores[i]).appendTo($ol);\n}\n</code></pre>"},{"location":"desarrollo/phonegap.html#ejemplo4","title":"Ejemplo4","text":"<pre><code>$('p').on('click', function(evt) {\n    evt.preventDefault();\n    $(this).css('background-color', 'green');\n});\n</code></pre>"},{"location":"desarrollo/phonegap.html#ejemplo5","title":"Ejemplo5","text":"<pre><code>$('p').on('click', function(evt) {\n    $(this).fadeOut(function() {\n        $(this).text($(this).text().toUpperCase());\n        $(this).fadeIn();\n    });\n});\n</code></pre>"},{"location":"desarrollo/phonegap.html#dia-6-martes-25112014","title":"D\u00eda 6: Martes 25/11/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_1","title":"Enlaces","text":"<ul> <li>Git</li> <li>SourceTree: GUI de Git.</li> <li>La par\u00e1bola de git: V\u00eddeo interesante.</li> <li>gitflow: Patr\u00f3n de uso de git.</li> <li>Yeoman: Plantillas/Scaffolding.</li> <li>Webapp: Plantilla de Yeoman para webapps.</li> <li>Grunt: Gestor de tareas.</li> <li>Gulp: Gestor de tareas. Equivalente a Grunt. Est\u00e1 de moda ahora.</li> <li>Bower: Gestor de librer\u00edas (como npm pero a nivel de librer\u00edas JS, tipo leaflet o bootstrap). Depende de git.</li> </ul>"},{"location":"desarrollo/phonegap.html#montaje-de-entorno-y-workflow","title":"Montaje de entorno y workflow","text":"<ol> <li>Bajamos el instalador de git y lo instalamos. Durante la instalaci\u00f3n, en una p\u00e1gina del asistente, marcamos la tercera opci\u00f3n que lleva una leyenda en rojo.</li> <li>Inicializamos el proyecto local:     <pre><code>mkdir 06YesNoGit\ncd 06YesNoGit\ngit init\n</code></pre></li> <li>Entramos con nuestra cuenta (o creamos una) en GitHub y creamos un repositorio con el mismo nombre que el local (<code>06YesNoGit</code>).</li> <li>Creamos un \"remote\" desde el git local hacia GitHub:     <pre><code>git remote add origin https://github.com/eduardofilo/06YesNoGit.git\n</code></pre></li> <li>Sincronizamos:     <pre><code>git pull origin master\n</code></pre></li> <li>Modificamos un fichero en local (.gitignore), lo commiteamos en local y sincronizamos con GitHub:     <pre><code>git add .gitignore\ngit commit -m \"Primer commit\"\ngit push origin master\n</code></pre></li> <li>Inicializamos gitflow en SourceTree (pulsando el bot\u00f3n de la toolbar).</li> <li>Instalamos Bower (la opci\u00f3n g lo instala en global, es decir accesible desde todos los proyectos):     <pre><code>npm install -g bower\n</code></pre></li> <li>Grunt no se suele instalar de forma global porque cambia mucho de versi\u00f3n. Vamos a instalar algo que ejecuta el grunt local del proyecto:     <pre><code>npm install -g grunt-cli\n</code></pre></li> <li>Instalamos Yeoman:     <pre><code>npm install -g yo\n</code></pre></li> <li>Si falla la descarga de alg\u00fan paquete, es mejor no reejecutar yeoman. Se habr\u00e1 generado un fichero <code>package.json</code> que contiene los paquetes npm que necesitamos. Ejecutando lo siguiente se bajar\u00e1 lo que falte:     <pre><code>npm install\n</code></pre></li> <li>Si <code>npm install</code> nos da warnings se puede solucionar inicializando npm (que genera el fichero <code>package.json</code>):     <pre><code>npm init\n</code></pre></li> <li>Instalamos la plantilla webapp de Yeoman:     <pre><code>npm install -g generator-webapp\n</code></pre></li> <li>En este punto tenemos todas las herramientas instaladas.</li> <li>\u201cStart New Feature\u201d en gitflow@SourceTree. Le damos el nombre \u201cInicializarConYeoman\u201d.</li> <li>Generamos un proyecto con la plantilla webapp de Yeoman:<ul> <li><code>yo</code></li> <li>Instalamos \u201cwebapp\u201d</li> <li>Incluimos las librer\u00edas Bootstrap y Modernizr</li> <li>Hacemos overwrite de <code>.gitignore</code></li> </ul> </li> <li>Lanzamos los tests para probar Grunt:     <pre><code>grunt test\n</code></pre></li> <li>Compilamos con Grunt:     <pre><code>grunt build\n</code></pre></li> <li>Aparece el directorio <code>dist</code> con la versi\u00f3n final (lista para desplegar) de nuestro proyecto.</li> <li>Arrancamos un servidor web para probar el proyecto:     <pre><code>grunt serve\n</code></pre></li> </ol>"},{"location":"desarrollo/phonegap.html#dia-7-miercoles-26112014","title":"D\u00eda 7: Mi\u00e9rcoles 26/11/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_2","title":"Enlaces","text":"<ul> <li>Phonegap developer app: Sincroniza la app desplegada por Phonegap en el tel\u00e9fono o en Genymotion para pasar los cambios directamente sin necesidad de volver a desplegar.</li> <li>Genymotion with Google Play Services: Instalaci\u00f3n de Google Play Services en Genymotion.</li> </ul>"},{"location":"desarrollo/phonegap.html#bower","title":"Bower","text":"<p>La diferencia con npm es que \u00e9ste instala cosas en m\u00e1quina; Bower a\u00f1ade librer\u00edas al proyecto. Lo vamos a manejar con los siguientes comandos por terminal:</p> <ul> <li><code>bower search leaflet</code>: Busca las librer\u00edas que contienen \u201cleaflet\u201d.</li> <li><code>bower install --save leaflet</code>: Instala la librer\u00eda leaflet. La opci\u00f3n <code>--save</code> hace que se apunte en un fichero de referencia de librer\u00edas (<code>bower.json</code>) para luego no tener que subir las librer\u00edas al control de versiones (evitar\u00edamos subir el directorio <code>bower_components</code>, que es donde se almacenan las librer\u00edas instaladas y sus dependencias). Es parecido al <code>package.json</code> de npm.</li> <li><code>grunt wiredep</code>: Conecta las dependencias. Por ejemplo vincula los ficheros CSS de las librer\u00edas en la posici\u00f3n del comentario <code>&lt;!-- bower:css --&gt;</code> del fichero <code>index.html</code>. Los CSS de las librer\u00edas que hab\u00eda instaladas previamente (bootstrap y modernizr) se hab\u00edan conectado cuando instalamos la plantilla webapp con yeoman. Esta tarea est\u00e1 incluida en la tarea <code>build</code>.</li> <li><code>bower uninstall --save leaflet</code>: Desinstala la librer\u00eda leaflet.</li> </ul>"},{"location":"desarrollo/phonegap.html#grunt","title":"Grunt","text":"<p>El fichero de configuraci\u00f3n tiene forma de script Javascript. Es el fichero <code>Gruntfile.js</code>.</p>"},{"location":"desarrollo/phonegap.html#git","title":"git","text":"<p>Vamos a hacer el merge de la feature que creamos ayer en la rama develop:</p> <ol> <li>SourceTree / Commit / Marcamos \u201cUnstage all\u201d para pasar a stage todos los ficheros modificados / Incluimos el comentario del commit en la caja de abajo.</li> <li>SourceTree / Gitflow / Finish Feature (marcamos Delete branch)</li> <li>SourceTree / Push (marcamos las dos ramas: develop y master)</li> </ol>"},{"location":"desarrollo/phonegap.html#phonegap-app-developer","title":"Phonegap app developer","text":"<ol> <li>Se instala en el emulador o dispositivo la aplicaci\u00f3n.</li> <li>Se abre la aplicaci\u00f3n \u201cPhoneGap\u201d en el dispositivo o emulador.</li> <li>Se configura poniendo la URL que aparece al arrancar el servidor phonegap en la m\u00e1quina de desarrollo:     <pre><code>phonegap serve\n</code></pre></li> </ol>"},{"location":"desarrollo/phonegap.html#dia-8-jueves-27112014","title":"D\u00eda 8: Jueves 27/11/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_3","title":"Enlaces","text":"<ul> <li>Fundation: Framework CSS basado en em. Bootstrap est\u00e1 basado en px.</li> <li>QuirksMode: Peter Paul Koch. Buscar sus conferencias sobre display.</li> <li>Media Queries: Cat\u00e1logo de sitios responsive.</li> <li>Swwweet: Estudio de Barcelona con buena filosof\u00eda web.</li> <li>CSS Zen garden: Juego para modificar con CSS un HTML fijado desde hace a\u00f1os.</li> <li>Pedro Arilla: Especialista en tipograf\u00eda de Zaragoza.</li> <li>Fontsinuse: Galer\u00eda de sitios con tipograf\u00eda interesante.</li> <li>Unos tipos duros: Teor\u00eda y pr\u00e1ctica de la tipograf\u00eda.</li> <li>Font Awesome: 479 iconos vectorizados. Recomendado por Merche.</li> </ul>"},{"location":"desarrollo/phonegap.html#css","title":"CSS","text":"<p>Siguiendo la lecci\u00f3n sobre CSS del curso de HTML5 de Javier.</p>"},{"location":"desarrollo/phonegap.html#unidades-de-medida","title":"Unidades de medida","text":"<p><code>em</code> es una de las m\u00e1s interesantes. Procede del mundo de la tipograf\u00eda y es la anchura de la M may\u00fascula en un tama\u00f1o que se considera legible con facilidad por un usuario normal. Las <code>em</code> se basan en el tama\u00f1o de letra del elemento y son relativas entre elementos que se contienen, es decir, si un elemento tiene <code>2em</code> pero est\u00e1 afectado por un contenedor en el que se aplica <code>2em</code>, el tama\u00f1o resultante ser\u00e1 equivalente a <code>6em</code>. Para evitar la acumulaci\u00f3n est\u00e1 la unidad <code>rem</code> (=root em).</p>"},{"location":"desarrollo/phonegap.html#preferencias","title":"Preferencias","text":"<p>Hay un orden de prioridad entre los selectores de CSS. Algunos detalles:</p> <ul> <li>Prioridades generales de menos a m\u00e1s: Reglas definidas por el navegador (useragent stylesheet rules) -&gt; Reglas que seleccionan elementos -&gt; Reglas que seleccionan atributos (<code>id</code> o <code>class</code>).</li> <li><code>id</code> prioriza sobre <code>class</code>.</li> <li><code>!important</code> se salta las prioridades, es decir se aplica siempre.</li> </ul>"},{"location":"desarrollo/phonegap.html#position","title":"Position","text":"<p><code>top</code> y <code>left</code> no aplican si <code>position</code> es <code>static</code>. El <code>position: absolute</code> toma el origen de coordenadas del primer contenedor que no es <code>static</code>.</p>"},{"location":"desarrollo/phonegap.html#display","title":"Display","text":"<p>El <code>display</code> de un <code>div</code> por defecto (useragent stylesheet rules) es <code>block</code>. El de <code>span</code> es <code>inline</code>. Se puede modificar tanto un caso como el otro. Por ejemplo si ponemos <code>display: inline</code> a un <code>div</code>, pasa a comportarse como un <code>span</code>. El <code>display: inline</code> hace que se ignore el <code>width</code>. Con <code>display: inline-block</code> s\u00ed que se tiene en cuenta el <code>width</code>. Hay un truco para conservar la indentaci\u00f3n en el c\u00f3digo HTML mientras se evita que se introduzca un car\u00e1cter espacio que ocupa sitio y descoloca la maquetaci\u00f3n y es introducir un comentario entre l\u00edneas de esta forma:</p> <pre><code>   &lt;section&gt;\n   \u2026\n   &lt;/section&gt;&lt;!--\n--&gt;&lt;section&gt;\n   \u2026\n   &lt;/section&gt;\n</code></pre>"},{"location":"desarrollo/phonegap.html#float","title":"Float","text":"<p>La propiedad <code>clear</code> s\u00f3lo funciona si el <code>display</code> no es <code>inline</code>. Se usa mucho el apa\u00f1o del clearfix para solucionar la p\u00e9rdida de dimensi\u00f3n vertical de un contenedor cuando todo su contenido m\u00e1s alto flota. El selector <code>:after</code> selecciona despu\u00e9s del contenido al que se aplica el estilo, no el contenido del siguiente elemento en el DOM. El clearfix favorito de Javier es:</p> <pre><code>.clearfix:after {\n    content: \".\";\n    visibility: hidden;\n    display: block;\n    height: 0;\n    clear: both;\n}\n</code></pre>"},{"location":"desarrollo/phonegap.html#viewport","title":"viewport","text":"<p>Diferencia entre layout-viewport y display-viewport. La relaci\u00f3n entre ambos es el nivel de zoom. El layout-viewport predeterminado es 960px. Se defini\u00f3 pixel-ratio cuando apareci\u00f3 iPhone 4, inicialmente con un valor de 2 (pantalla retina de 640px de ancho por los 320px del iPhone original). Terminales con pantallas QuadHD tienen un pixel-ratio de alrededor de 4. Tiene el inconveniente de que hace que las im\u00e1genes se redimensionen, lo que en terminales con mucha densidad de pixel produce desenfoque. La soluci\u00f3n es enviar la imagen adecuada a cada dispositivo. De momento se hace con condiciones en CSS.</p>"},{"location":"desarrollo/phonegap.html#mediaqueries","title":"mediaqueries","text":"<p>Permite hacer condiciones en CSS. <code>@media</code> es un if. En las mediaqueries los <code>em</code> son siempre <code>rem</code> es decir son absolutos, no relativos. M\u00e1s que hablar de resoluciones debemos pensar en tama\u00f1os. Se suelen considerar cuatro tama\u00f1os:</p> <ul> <li>M\u00f3vil: 360 px CSS</li> <li>Tablet: 768 px CSS</li> <li>Desktop: 1200 px CSS</li> <li>TV</li> </ul>"},{"location":"desarrollo/phonegap.html#tipografia","title":"Tipograf\u00eda","text":"<p>La tipograf\u00eda cada vez tiene m\u00e1s importancia. Para pantalla, Javier no recomienda Helvetica. Existen muchos tipos buenos, muy legibles y gratuitos, como:</p> <ul> <li>Mozilla Fira</li> <li>Ubuntu</li> <li>Google OpenSans</li> </ul> <p>Javier recomienda no descartar las fuentes de pago. La inversi\u00f3n puede tener un impacto muy importante en el proyecto. Algunas foundries:</p> <ul> <li>Typekit: Foundry de Adobe.</li> <li>Google Fonts: Foundry de Google.</li> </ul> <p>Nos describe el uso de Google Fonts usando el sitio para definir un paquete con dos fuentes.</p>"},{"location":"desarrollo/phonegap.html#frameworks","title":"Frameworks","text":"<p>Algunos framewoks:</p> <ul> <li>Bootstrap: es el m\u00e1s importante ahora mismo. El favorito de Javier, sobre todo por su ecosistema.</li> <li>Bootsnipp: Componentes para bootstrap.</li> <li>Foundation</li> <li>Skeleton</li> <li>Ionic: Perfecto para pantallas peque\u00f1as.</li> <li>Ratchet: Tambi\u00e9n para m\u00f3viles.</li> <li>Sencha Touch: Para m\u00f3viles. No recomendado por Javier.</li> <li>jQuery Mobile: No recomendado por Javier.</li> </ul>"},{"location":"desarrollo/phonegap.html#dia-9-viernes-28112014","title":"D\u00eda 9: Viernes 28/11/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_4","title":"Enlaces","text":"<ul> <li>UI Bootstrap: Bootstrap adaptado a Angular.</li> <li>Bootsnipp: Galer\u00eda de elementos para Bootstrap.</li> <li>Couchbase Mobile: Plugin Phonegap para tener una base de datos noSQL local con opci\u00f3n de sincronizar con el servidor.</li> </ul>"},{"location":"desarrollo/phonegap.html#bootstrap","title":"Bootstrap","text":"<p>En Customize se puede compilar una versi\u00f3n personalizada (s\u00f3lo con los componentes que vayamos a utilizar, lo que adem\u00e1s hace m\u00e1s peque\u00f1a la librer\u00eda). Dentro de este Customize se pueden cambiar por ejemplo los Media queries breakpoints que son los que hacen que el dise\u00f1o cambie entre los distintos tama\u00f1os de pantalla. Es recomendable instalarlo con Bower si se va a integrar en Phonegap (para tenerlo en local y minimizar la latencia que supondr\u00eda el descargarlo). El men\u00fa superior del sitio de Bootstrap est\u00e1 bien estructurado en cuanto a la dificultad de menor a mayor de izquierda a derecha. Conviene leer por lo menos la secci\u00f3n Getting Started. Bootstrap utiliza CDN para minimizar la latencia. Si vamos a utilizar Angular, en lugar de poner bootstrap normal hay que integrar UI Bootstrap que no utiliza jQuery. Es importante meter en la cabecera lo siguiente (aparece en Basic Template):</p> <pre><code>&lt;meta charset=\"utf-8\"&gt;\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n</code></pre> <p>Importante leer todo el documento sobre CSS, sobre todo lo relativo al Grid System y a los Forms. Los componentes que no encontremos en Bootstrap buscarlos en Bootsnipp. Si utilizamos la parte de JS de Bootstrap hay que integrar jQuery.</p>"},{"location":"desarrollo/phonegap.html#buenas-practicas-con-bootstrap","title":"Buenas pr\u00e1cticas con Bootstrap","text":"<p>Interesa poner siempre un label en los campos de formulario por accesibilidad, pero en pantallas peque\u00f1as se suele usar un placeholder, lo que es redundante. Para evitarlo se oculta a\u00f1adiendo la clase <code>sr-only</code> (sr de Screen Reader), lo que mantiene el label en el c\u00f3digo pero no lo muestra.</p>"},{"location":"desarrollo/phonegap.html#javascript","title":"JavaScript","text":"<p>Almacenamiento de un conjunto de variables en localStorage:</p> <pre><code>var l1 = [\"Alice\", \"Bob\", \"Charly\"];\nvar l2 = [1, 2, 3]\nvar listas = { listaPrincipal: l1, listaSecundaria: l2};\nvar listasComoCadena = JSON.stringify(listas);\nlocalStorage.setItem('listas', listasComoCadena);\n</code></pre>"},{"location":"desarrollo/phonegap.html#deberes-para-el-fin-de-semana","title":"Deberes para el fin de semana","text":"<ul> <li>Landing page con tres zonas y call for action superior (= jumbotron).</li> <li>Qu\u00e9 hacemos</li> <li>Por qu\u00e9 somos buenos</li> <li>Pasta</li> <li>Repasar Closures de JS.</li> </ul>"},{"location":"desarrollo/phonegap.html#dia-10-lunes-1122014","title":"D\u00eda 10: Lunes 1/12/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_5","title":"Enlaces","text":"<ul> <li>famo.us: Free, open source JavaScript framework that helps you create smooth, complex UIs for any screen.</li> <li>EggHead: Screencasts.</li> </ul>"},{"location":"desarrollo/phonegap.html#proyecto","title":"Proyecto","text":"<p>Vamos a montar el proyecto poni\u00e9ndolo todo junto desde cero:</p> <ol> <li>Creamos el proyecto dentro del directorio \\curso:     <pre><code>cd \\curso\nphonegap create 10Votaciones --name Votaciones --id es.eduardofilo.yesno\n</code></pre></li> <li>Nos metemos en el directorio y lanzamos Yeoman para instalar la plantilla web:     <pre><code>cd 10Votaciones\nyo\n</code></pre></li> <li>Durante la configuraci\u00f3n de Yeoman indicamos que incluya Bootstrap.</li> <li>Configuramos en Gruntile.js (l\u00ednea 21 del fichero que la carpeta de la aplicaci\u00f3n es <code>www</code> en lugar de <code>app</code> que es la que viene por defecto.</li> <li>Movemos carpeta <code>10Votaciones\\www\\res</code> a <code>10Votaciones\\res</code>, es decir un nivel hacia arriba. Esta carpeta contiene los recursos que utilizar\u00e1 Phonegap (por ejemplo el icono de escritorio que ajustar\u00e1 en las distintas plataformas). No tiene mucho sentido que est\u00e9 dentro de <code>www</code> ya que Phonegap duplicar\u00e1 hacia el directorio <code>dist</code> los recursos correspondientes a la plataforma con la que estemos trabajando. Si est\u00e1 en <code>www</code> es porque cuando utilizamos el servidor de compilaci\u00f3n de Adobe para montar las aplicaciones nativas, s\u00f3lo pasamos el directorio <code>www</code> y el que contenga <code>res</code> es una forma de enviar todo de una vez.</li> <li>Configuramos en <code>config.xml</code> el movimiento del directorio <code>res</code> que acabamos de hacer. Para ello sustituimos las rutas de los recursos, es decir <code>www/res</code> por <code>res</code>.</li> <li>Borramos el contenido de <code>www</code> y lo sustituimos por el de <code>app</code>.</li> <li>Borramos la carpeta <code>app</code> que ha quedado vac\u00eda.</li> <li>Movemos la carpeta <code>bower_components</code> al interior de <code>www</code>.</li> <li>Cambiamos la configuraci\u00f3n de Bower en el fichero <code>.bowerrc</code> poniendo <code>www/bower_components</code> donde s\u00f3lo pon\u00eda <code>bower_components</code>.</li> <li>Finalmente lanzamos la tarea que inyectar\u00e1 las dependencias entre los ficheros de c\u00f3digo:     <pre><code>grunt wiredep\n</code></pre></li> </ol> <p>Con esto ya tendr\u00edamos la base.</p> <p>Vamos a utilizar el patr\u00f3n MVC. Pondremos tanto el modelo como el controlador en el mismo fichero <code>main.js</code>, aunque ser\u00eda m\u00e1s correcto separarlo.</p> <p>Vamos a hacer una Single Page Application. Cada p\u00e1gina \u201cvirtual\u201d de la app lo vamos a codificar mediante un <code>div</code> de clase <code>pagina</code>. Ese div tendr\u00e1 un atributo personalizado \u201cdata-title\u201d que contendr\u00e1 el t\u00edtulo de la p\u00e1gina. El controlador s\u00f3lo va a hacer:</p> <ul> <li>Reacciona a la pantalla</li> <li>Modifica la pantalla</li> </ul> <p>Todo lo que no tenga que ver con esto ir\u00e1 al modelo/servicio.</p>"},{"location":"desarrollo/phonegap.html#dia-11-martes-2122014","title":"D\u00eda 11: Martes 2/12/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_6","title":"Enlaces","text":"<ul> <li>history.js</li> </ul>"},{"location":"desarrollo/phonegap.html#proyecto_1","title":"Proyecto","text":"<p>Vamos a programar el env\u00edo del voto al servidor (mockable) en un POST. El voto va en la URL por lo que aunque utilicemos https no ocultamos la informaci\u00f3n. Ser\u00eda m\u00e1s correcto enviar el voto en el cuerpo del POST, por ejemplo:</p> <pre><code>var url = this.URL_POST_NUEVO_VOTO.replace('{value}', tipoDeVoto);\nvar promesa = $.post(url, {value: \u2018yes\u2019});\n</code></pre> <p>En segundo lugar programamos la gesti\u00f3n de la navegaci\u00f3n, es decir c\u00f3mo cambia la aplicaci\u00f3n de pantalla, ya sea hacia delante o hacia atr\u00e1s (incluyendo por ejemplo el evento \u201cBack\u201d del dispositivo que equivale al bot\u00f3n \u201cAtr\u00e1s\u201d del navegador). Javier nos comenta el truco de a\u00f1adir anchors (#) a la URL. Con esto se consigue que no se recargue el documento y que s\u00ed afecte al historial. Como nuestra app es SPA nos viene muy bien este truco. En Phonegap, la tecla \u201cAtr\u00e1s\u201d de los dispositivos equivale al Back del WebView. La gesti\u00f3n del historial la vamos a hacer con history.js.</p> <ol> <li>Buscamos/instalamos history.js con Bower (<code>--save</code> actualiza el fichero <code>bower.json</code> con lo que hacemos que la inclusi\u00f3n de este componente sea persistente, es decir, si luego borramos los componentes, para no subirlos al control de versiones por ejemplo, lo podremos recuperar f\u00e1cilmente):     <pre><code>bower search history\nbower install --save history.js\n</code></pre></li> <li>Inyectamos dependencias (<code>grunt wiredep</code> no funciona =&gt; hay que mirar en la documentaci\u00f3n). Elegimos la librer\u00eda que nos conviene consultando la documentaci\u00f3n. En <code>index.html</code> incluimos la referencia en el bloque <code>scripts/main.js</code> del <code>build.js</code> final:     <pre><code>&lt;script src=\"bower_components/history.js/scripts/bundled/html4+html5/native.history.js\"&gt;&lt;/script&gt;\n</code></pre></li> </ol> <p>Con history.js manejamos el historial del navegador/webview por medio del objeto <code>History</code>. El objeto <code>history</code> ser\u00eda la parte nativa del navegador. En muchas ocasiones se comportan igual.</p> <p>Los par\u00e1metros de la funci\u00f3n <code>pushState</code> tanto de <code>history</code> como de <code>History</code> son:</p> <pre><code>history.pushState({\n    id: idDestino\n}, $('#' + idDestion).attr('data-title'), idDestion);\n</code></pre> <ol> <li>Objeto arbitrario en el que podemos almacenar datos</li> <li>Descripci\u00f3n o T\u00edtulo de esa entrada en el historial</li> <li>Direcci\u00f3n/URL</li> </ol>"},{"location":"desarrollo/phonegap.html#dia-12-miercoles-3122014","title":"D\u00eda 12: Mi\u00e9rcoles 3/12/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_7","title":"Enlaces","text":"<ul> <li>Using Location Hash To Enable BACK/FORWARD Navigation</li> <li>Web Fundamentals: C\u00f3mo adaptar experiencias web a dispositivos de distintos tama\u00f1os.</li> <li>seen.js: Render 3D scenes into SVG or HTML5 Canvas.</li> <li>jQuery-Color: Animaciones con colores.</li> <li>Removing the 300ms tap delay in Chrome 32: Se hace con la librer\u00eda fastclick.</li> <li>QuoJS: Librer\u00eda de gestures.</li> <li>HammerJS: Librer\u00eda de gestures.</li> <li>TouchSwipe-Jquery-Plugin: Librer\u00eda de swipes.</li> <li>iScroll: Librer\u00eda para gestionar listas y los eventos f\u00edsicos de arrastre.</li> <li>CancelBubble: Cuenta de Twitter que comenta muchas librer\u00edas buenas.</li> <li>r/javascript: Subreddit de Javascript en el que comentan tambi\u00e9n librer\u00edas.</li> <li>Q: Librer\u00eda js para la gesti\u00f3n de promesas.</li> </ul>"},{"location":"desarrollo/phonegap.html#proyecto_2","title":"Proyecto","text":"<p><code>document</code> recibe todos los eventos. Implementamos un cartel \u201cCargando\u2026\u201d que aparece/desaparece cuando hay peticiones AJAX mientras se espera la respuesta del servidor. Se gestiona mediante los eventos <code>ajaxStart</code> y <code>ajaxStop</code>.</p> <p>Instalamos jQuery-Color para hacer un efecto de transici\u00f3n al jumbotron:</p> <ol> <li>Buscamos/instalamos:     <pre><code>bower search jquery-color\nbower install --save jquery-color\n</code></pre></li> <li>Inyectamos la librer\u00eda a mano al final del index.html ya que Bower no puede:     <pre><code>&lt;script src=\"bower_components/jquery-color/jquery.color.js\"&gt;&lt;/script&gt;\n</code></pre></li> </ol> <p>Hasta ahora hab\u00eda algo mal en el proyecto. No esper\u00e1bamos a que cargara el DOM ni jQuery. Para conseguirlo envolvemos la funci\u00f3n de inicializaci\u00f3n de la siguiente forma:</p> <pre><code>$(document).ready(function () {\n    controlador.inicializar();\n});\n</code></pre> <p>Vemos una forma de desactivar el highlight en el tap que hace el sistema operativo en WindowsPhone. Se consigue a\u00f1adiendo la siguiente etiqueta <code>meta</code> en el <code>head</code> del HTML:</p> <pre><code>&lt;meta name=\"msapplication-tap-highlight\" content=\"no\"/&gt;\n</code></pre> <p>Vamos a programar un gesto para volver a la pantalla de votaciones desde resultados. Instalamos TouchSwipe-Jquery-Plugin:</p> <ol> <li>Buscamos/instalamos:     <pre><code>bower search touchswipe\nbower install --save jquery-touchswipe\n</code></pre></li> </ol> <p>Sustituimos el servicio votar para que guarde en local. Hay que generar promesa. Se puede hacer con la librer\u00eda Q o con jQuery. Lo hacemos as\u00ed:</p> <pre><code>var servicioPreguntas = {\n    //...\n\n    votar: function (tipoDeVoto) {\n        localStorage.setItem('voto', tipoDeVoto);\n        var deferred = $.Deferred();\n        var promesa = deferred.promise();\n        deferred.resolve({\n            total: 0,\n            positives: 0,\n            negatives: 0\n        });\n        return promesa;\n    }\n};\n</code></pre>"},{"location":"desarrollo/phonegap.html#dia-13-jueves-4122014","title":"D\u00eda 13: Jueves 4/12/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_8","title":"Enlaces","text":"<ul> <li>Documentaci\u00f3n Phonegap Command Line</li> <li>Documentaci\u00f3n Phonegap Plugins API</li> <li>Repositorio de Cordova Plugins</li> <li>La estafa de la linterna molona que ilumina m\u00e1s en Android</li> <li>InfoTelefonoPlugin: Plugin de Javier para obtener datos de identificaci\u00f3n del tel\u00e9fono.</li> </ul>"},{"location":"desarrollo/phonegap.html#proyecto-plugins","title":"Proyecto Plugins","text":"<p>Vamos a hacer una peque\u00f1a aplicaci\u00f3n para consultar la geolocalizaci\u00f3n:</p> <ol> <li>Creamos el proyecto:     <pre><code>cd \\curso`\nphonegap create 13GeoDemo --name GeoDemo --id es.eduardofilo.geodemo\n</code></pre></li> <li>A\u00f1adimos el plugin de geolocalizaci\u00f3n:     <pre><code>cd 13GeoDemo\nphonegap plugin add org.apache.cordova.geolocation\n</code></pre></li> </ol> <p>Buscar el c\u00f3digo nativo para Android en git.</p> <p>Javier no recomienda getCurrentPosition porque da timeout r\u00e1pidamente si est\u00e1s en HighAccuracy. Mejor con watchPosition.</p> <p>Vamos a ver c\u00f3mo se crear\u00eda un plugin. Para ello instalamos un plugin hecho por Javier y estudiamos detenidamente su sencillo c\u00f3digo:</p> <ol> <li>Creamos el proyecto:     <pre><code>cd \\curso\nphonegap create 13.1DatosTelefono --name DatosTelefono --id es.eduardofilo.datostfn\n</code></pre></li> <li>A\u00f1adimos el plugin de Javier:     <pre><code>cd 13.1DatosTelefono\nphonegap plugin add https://github.com/ciberado/domina-phonegap-infotelefonoplugin.git\n</code></pre></li> </ol>"},{"location":"desarrollo/phonegap.html#dia-14-viernes-5122014","title":"D\u00eda 14: Viernes 5/12/2014","text":""},{"location":"desarrollo/phonegap.html#enlaces_9","title":"Enlaces","text":"<ul> <li>Cordova Device Motion Plugin</li> <li>MakeAppIcon</li> <li>Web2Splash</li> <li>Pastebin de Javier</li> <li>Adobe PhoneGap Build</li> <li>c9: IDE web.</li> </ul>"},{"location":"desarrollo/phonegap.html#proyecto-plugins_1","title":"Proyecto Plugins","text":"<p>Continuamos con el proyecto de ayer:</p> <ol> <li>Comprobamos la instalaci\u00f3n:     <pre><code>phonegap plugin list\n</code></pre></li> </ol>"},{"location":"desarrollo/phonegap.html#proyecto-acelerometro","title":"Proyecto Aceler\u00f3metro","text":"<p>Vamos a hacer un peque\u00f1o proyecto que controlar\u00e1 un peque\u00f1o cuadrado por pantalla con los aceler\u00f3metros del tel\u00e9fono. En el proyecto haremos uso del plugin oficial de Phonegap que se encarga de acceder al dispositivo.</p> <ol> <li>Creamos el proyecto:     <pre><code>phonegap create 14DemoAcelerometro --name DemoAcelerometro --id es.eduardofilo.demoaccel\n</code></pre></li> <li>Instalamos plugin:     <pre><code>phonegap plugin add org.apache.cordova.device-motion\n</code></pre></li> </ol> <p>Por defecto <code>watchAcceleration</code> llama al callback cada 10 segundos:</p> <pre><code>var watchID = navigator.accelerometer.watchAcceleration(\n      accelerometerSuccess,\n      accelerometerError,\n      accelerometerOptions);\n</code></pre> <ul> <li>accelerometerOptions: An object with the following optional keys:<ul> <li>period: requested period of calls to accelerometerSuccess with acceleration data in Milliseconds.(Number) (Default: 10000)</li> </ul> </li> </ul> <p>Para conseguir que la aplicaci\u00f3n sea m\u00e1s \"responsiva\", se puede cambiar el periodo de consulta pasando un objeto con un par\u00e1metro de clave frecuency en su interior (aunque la documentaci\u00f3n menciona <code>period</code>, es <code>frecuency</code>). Hubiera funcionado cada segundo por ejemplo llamando al watchAcceleration as\u00ed:</p> <pre><code>var options = { frequency: 1000 };\nvar watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);\n</code></pre>"},{"location":"desarrollo/phonegap.html#subir-a-google-play","title":"Subir a Google Play","text":"<p>Para generar un certificado con que firmar las aplicaciones:</p> <pre><code>$ keytool -genkey -alias demoiconos -keyalg RSA -validity 20000 -keystore demoiconos.keystore\n</code></pre>"},{"location":"desarrollo/phonegap.html#compilar-en-adobe-phonegap-build","title":"Compilar en Adobe PhoneGap Build","text":"<p>Para delegar la construcci\u00f3n del proyecto en el servicio de compilaci\u00f3n de Adobe en la nube:</p> <p><pre><code>$ phonegap remote build android\n</code></pre> Se puede firmar la aplicaci\u00f3n desde Adobe subiendo el fichero keystore que hemos creado antes.</p>"},{"location":"desarrollo/phonegap.html#inicializacion-del-controlador","title":"Inicializaci\u00f3n del controlador","text":"<p>Si usamos jQuery:</p> <pre><code>$(document).ready(function () {\n    document.addEventListener('deviceready', function () {\n        controlador.inicializar();\n    });\n});\n</code></pre> <p>Si no usamos jQuery:</p> <pre><code>document.addEventListener('deviceready', function () {\n    controlador.inicializar();\n});\n</code></pre>"},{"location":"desarrollo/phonegap.html#pendiente-de-preguntar","title":"Pendiente de preguntar","text":"<ul> <li>JSONP vs CORS</li> <li>Workspaces en Chrome.</li> </ul>"},{"location":"desarrollo/php.html","title":"PHP","text":""},{"location":"desarrollo/php.html#configuracion","title":"Configuraci\u00f3n","text":"<p>Se pueden cambiar los ajustes de PHP para el sitio por medio del fichero de configuraci\u00f3n de Apache. Ver p\u00e1gina 244 del libro \"Desarrollo Web con PHP 6 y MySQL 5.1\".</p>"},{"location":"desarrollo/php.html#cadenas","title":"Cadenas","text":"<p>Se pueden definir de tres formas:</p>"},{"location":"desarrollo/php.html#con-comillas-simples","title":"Con comillas simples","text":"<pre><code>&lt;?php\n$cadena = 'Esto es una cadena.';\n</code></pre> <p>Para incluir el caracter comilla simple hay que escaparlo:</p> <pre><code>&lt;?php\n$cadena = 'Esto es una comilla: \\'.';\n</code></pre>"},{"location":"desarrollo/php.html#con-comillas-dobles","title":"Con comillas dobles","text":"<p>Permiten incluir variables:</p> <pre><code>&lt;?php\n$i = 12;\n$cadena = \"Un a\u00f1o tiene $i meses.\";\n</code></pre> <p>Tambi\u00e9n permite escapar una serie de caracteres como:</p> <ul> <li>\\\": Comilla doble</li> <li>\\n: Retorno de carro</li> <li>\\t: Tabulador</li> <li>\\$: S\u00edmbolo de dolar</li> </ul>"},{"location":"desarrollo/php.html#en-bloque","title":"En bloque","text":"<p>Ejemplo:</p> <pre><code>&lt;?php\n$i = 12;\n$cadena = &lt;&lt;&lt;CADENA\nEsto es una cadena\ndefinida en bloque.\nPodemos utilizar variables como\nen las cadenas de comillas dobles.\nEsto es un ejemplo: $i.\nCADENA;\n</code></pre>"},{"location":"desarrollo/php.html#volcado-de-variables","title":"Volcado de variables","text":"<ul> <li><code>var_dump($var);</code>: Para variables normales</li> <li><code>print_r($array);</code>: Para arrays</li> <li><code>CVarDumper::dump($param, 10, true);</code>: S\u00f3lo en Yii</li> </ul>"},{"location":"desarrollo/php.html#comparadores","title":"Comparadores","text":"<p>Debido a la flexibilidad de PHP con los tipos de datos, los comparadores normales (<code>==</code> por ejemplo) pueden producir resultados err\u00f3neos si no forzamos que adem\u00e1s del valor se compare el tipo. Por ejemplo la funci\u00f3n <code>strpos()</code> devuelve 0 si se encuentra la subcadena al principio y FALSE si no lo encuentra, pero en PHP, ambos tienen el mismo significado. El operador <code>==</code> compara si la expresi\u00f3n de la izquierda y la derecha tienen el mismo valor, mientras que <code>===</code> compara adem\u00e1s que sean del mismo tipo. As\u00ed se distingue 0 (entero) de FALSE (l\u00f3gico). Aqu\u00ed se encuentra la documentaci\u00f3n completa de los operadores de comparaci\u00f3n.</p>"},{"location":"desarrollo/projects.html","title":"Gesti\u00f3n de Proyectos","text":""},{"location":"desarrollo/projects.html#enlaces","title":"Enlaces","text":"<ul> <li>Redmine: Recomendado por Carlos Fenollosa.</li> <li>Swagger: Documentaci\u00f3n de APIs REST y sandbox para probarlas. Comentario en GenbetaDev.</li> <li>Web Developer Checklist: Listas de control para desarrollos web. Comentario en GenbetaDev.</li> </ul>"},{"location":"desarrollo/python.html","title":"Python/Django","text":""},{"location":"desarrollo/python.html#enlaces","title":"Enlaces","text":""},{"location":"desarrollo/python.html#cheatsheet","title":"Cheatsheet","text":"<ul> <li>Classy Class-Based Views: Detailed descriptions, with full methods and attributes, for each of Django's class-based generic views.</li> <li>Classy Django Forms</li> </ul>"},{"location":"desarrollo/python.html#aprendizaje","title":"Aprendizaje","text":"<ul> <li>The Hitchhiker's Guide to Python</li> <li>How to Reset Migrations</li> <li>Django Admin Cookbook</li> <li>Django data migration when changing a field to ManyToMany: Cuando queremos cambiar de un modelo ForeignKey a ManyToMany.</li> <li>Alter model to add \u201cthrough\u201d relationship to order a ManytoMany field: Cuando queremos cambiar la tabla intermedia autom\u00e1tica a una gestionada con un modelo propio.</li> <li>Django Inline formsets example</li> <li>Django Migrations and How to Manage Conflicts</li> </ul>"},{"location":"desarrollo/python.html#modulos-interesantes","title":"M\u00f3dulos interesantes","text":"<ul> <li>django-tinymce</li> <li>django-autocomplete-light</li> <li>awesome Django: A curated list of awesome Django apps, projects and resources.</li> <li>bincopy: Mangling of various file formats that conveys binary information (Motorola S-Record, Intel HEX, TI-TXT and binary files).</li> </ul>"},{"location":"desarrollo/python.html#entorno-django","title":"Entorno Django","text":"<p>Ver antes este post.</p> <p>Para tener un entorno aislado (sin depender con los paquetes y versiones del sistema), instalar primero <code>pip</code> de Python3. Se puede hacer instalando el paquete <code>python3-pip</code> de Ubuntu, pero dado que interesa actualizar a la \u00faltima versi\u00f3n, es mejor instalarlo de forma independiente bajando el script <code>get-pip.py</code> de aqu\u00ed ejecut\u00e1ndolo as\u00ed:</p> <pre><code>$ sudo python3 get-pip.py\n</code></pre> <p>Despu\u00e9s ejecutar en terminal:</p> <pre><code>$ sudo pip3 install virtualenv\n$ virtualenv --python=`which python3` djangodev\n$ source djangodev/bin/activate\n(djangodev) $ pip install Django\n</code></pre> <p>Cada vez que se quiera adaptar el entorno de la sesi\u00f3n del terminal a este entorno aislado, hay que ejecutar el pen\u00faltimo comando anterior (<code>source</code>).</p>"},{"location":"desarrollo/python.html#entorno-django-en-synology-nas","title":"Entorno Django en Synology NAS","text":"<ol> <li>Instalo m\u00f3dulo Python3 desde el Centro de Paquetes.</li> <li> <p>Instalo pip en Python3:</p> <pre><code>$ wget -nd https://bootstrap.pypa.io/get-pip.py\n$ python get-pip.py\n$ cd /usr/local/bin\n$ sudo ln -s /volume1/@appstore/py3k/usr/local/bin/pip3\n</code></pre> </li> <li> <p>Instalo virtualenv:</p> <pre><code>$ sudo pip3 install virtualenv\n$ python3 /volume1/@appstore/py3k/usr/local/lib/python3.5/site-packages/virtualenv.py --python=`which python3` djangodev\n</code></pre> </li> <li> <p>Arranco el entorno virtual e instalo Django:</p> <pre><code>$ source djangodev/bin/activate\n(djangodev) $ pip install Django\n</code></pre> </li> </ol>"},{"location":"desarrollo/python.html#creacion-de-proyecto-django","title":"Creaci\u00f3n de proyecto Django","text":"<p>Desde el directorio donde queremos que se cree ejecutamos:</p> <pre><code>(djangodev) $ django-admin startproject project01\n</code></pre>"},{"location":"desarrollo/python.html#creacion-de-aplicacion-django","title":"Creaci\u00f3n de aplicaci\u00f3n Django","text":"<p>Desde el directorio del proyecto (donde se encuentre el fichero <code>manage.py</code>) ejecutamos:</p> <pre><code>(djangodev) $ python manage.py startapp app01\n</code></pre> <p>Para incorporar los modelos de la nueva aplicaci\u00f3n al mantenimiento autom\u00e1tico que proporciona el m\u00f3dulo <code>admin</code> de Django, hay que incorporar al fichero <code>project01/settings.py</code> lo siguiente en la secci\u00f3n <code>INSTALLED_APPS</code>:</p> <pre><code>INSTALLED_APPS = [\n    'app01.apps.App01Config',\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre> <p>Luego ejecutamos el siguiente comando para generar las migraciones a partir de los modelos definidos en la app:</p> <pre><code>(djangodev) $ python manage.py makemigrations app01\n</code></pre> <p>Finalmente ejecutamos las migraciones propiamente dichas:</p> <pre><code>(djangodev) $ python manage.py migrate\n</code></pre> <p>Para poder utilizar el m\u00f3dulo <code>admin</code> de Django, hay que crear al menos un usuario:</p> <pre><code>(djangodev) $ python manage.py createsuperuser\n</code></pre>"},{"location":"desarrollo/python.html#pipenv","title":"Pipenv","text":"<p>Actualizaci\u00f3n: A partir de haber tenido problemas de dependencias entre paquetes y de leer este art\u00edculo, abandono la utilizai\u00f3n de Pipenv en favor de virtualenvwrapper+pip.</p>"},{"location":"desarrollo/python.html#enlaces_1","title":"Enlaces","text":"<ul> <li>How to manage your Python projects with Pipenv</li> </ul>"},{"location":"desarrollo/python.html#instalacion","title":"Instalaci\u00f3n","text":"<pre><code>$ sudo -H pip install pipenv\n</code></pre>"},{"location":"desarrollo/python.html#creacion-de-entorno-para-python3","title":"Creaci\u00f3n de entorno para Python3","text":"<pre><code>$ pipenv install --three\n$ pipenv shell\n</code></pre>"},{"location":"desarrollo/python.html#creacion-de-entorno-en-directorio-de-proyecto","title":"Creaci\u00f3n de entorno en directorio de proyecto","text":"<pre><code>$ PIPENV_VENV_IN_PROJECT=1 pipenv install --three\n</code></pre>"},{"location":"desarrollo/python.html#creacion-de-entorno-con-version-especifica-de-python-y-de-paquetes","title":"Creaci\u00f3n de entorno con versi\u00f3n espec\u00edfica de Python y de paquetes","text":"<ol> <li> <p>Instalar algunos paquetes necesarios:</p> <pre><code>$ sudo apt-get install build-essential checkinstall\n$ sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev\n</code></pre> </li> <li> <p>Bajamos la versi\u00f3n <code>source</code> de aqu\u00ed.</p> </li> <li> <p>Descomprimimos:</p> <pre><code>$ tar -xzvf Python-3.6.5.tgz\n</code></pre> </li> <li> <p>Renombramos el directorio de las fuentes para no confundirlo con el de los binarios:</p> <pre><code>$ mv Python-3.6.5 Python-3.6.5_src\n</code></pre> </li> <li> <p>Creamos el directorio para los binarios:</p> <pre><code>$ mkdir Python-3.6.5\n</code></pre> </li> <li> <p>Entramos en el directorio de las fuentes y compilamos:</p> <pre><code>$ cd /home/usuario/Python-3.6.5_src\n$ ./configure --disable-ipv6 --prefix=/home/usuario/Python-3.6.5\n$ make\n$ make test\n$ make install\n</code></pre> </li> <li> <p>Creamos el entorno:</p> <pre><code>$ cd directorio_proyecto\n$ pipenv install --python /home/usuario/Python-3.6.5/bin/python3\n$ pipenv install Django==1.11.12\n$ pipenv install _resto_de_paquetes_\n$ pipenv shell\n</code></pre> </li> </ol>"},{"location":"desarrollo/python.html#ejemplo-de-creacion-de-entorno-django-desde-cero-con-pipenv","title":"Ejemplo de creaci\u00f3n de entorno Django desde cero con pipenv","text":"<p>Actualizaci\u00f3n: A partir de haber tenido problemas de dependencias entre paquetes y de leer este art\u00edculo, abandono la utilizai\u00f3n de Pipenv en favor de virtualenvwrapper+pip.</p> <p>Creamos repositorio git (por ejemplo <code>remote_james</code>) y lo sincronizamos (por ejemplo con <code>/home/edumoreno/git/remote_james</code>).</p> <p>Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina):</p> <pre><code>$ cd ~/git/remote_james\n$ pipenv install --python /home/edumoreno/Python-3.6.5/bin/python3\n$ pipenv shell\n$ pipenv install django\n$ django-admin startproject remote_james .\n$ python manage.py startapp james\n</code></pre> <p>Incorporamos nueva app en fichero <code>settings.py</code>:</p> <pre><code>INSTALLED_APPS = [\n    'james.apps.JamesConfig',\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre> <p>Ejecutamos:</p> <pre><code>$ python manage.py makemigrations\n$ python manage.py migrate\n$ python manage.py createsuperuser\n$ python manage.py runserver 0.0.0.0:8000\n</code></pre>"},{"location":"desarrollo/python.html#virtualenvwrapperpip","title":"Virtualenvwrapper+pip","text":""},{"location":"desarrollo/python.html#enlaces_2","title":"Enlaces","text":"<ul> <li>Los problemas de pipenv</li> <li>Virtualenv and pip Basics</li> <li>Notes on using pip and virtualenv with Django</li> </ul>"},{"location":"desarrollo/python.html#instalacion_1","title":"Instalaci\u00f3n","text":"<ol> <li> <p>Ejecutar:</p> <pre><code>$ sudo pip install --break-system-packages virtualenv virtualenvwrapper\n</code></pre> </li> <li> <p>A\u00f1adir a <code>~/.bashrc</code>:</p> <pre><code># Virtualenvwrapper\nexport WORKON_HOME=$HOME/.virtualenvs\nexport PROJECT_HOME=$HOME/git\nexport VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3\n#export VIRTUALENVWRAPPER_VIRTUALENV_ARGS='--no-site-packages'\nsource /usr/local/bin/virtualenvwrapper.sh\n</code></pre> </li> <li> <p>Reiniciar sesi\u00f3n o cargar de nuevo el <code>~/.bashrc</code> con:</p> <pre><code>$ source ~/.bashrc\n</code></pre> </li> </ol>"},{"location":"desarrollo/python.html#utilizacion","title":"Utilizaci\u00f3n","text":"<p>Antes de activar un entorno:</p> <ul> <li><code>workon</code> y <code>lsvirtualenv</code>: Muestran lista de entornos creados.</li> <li><code>mkvirtualenv nombre</code>: Crea y activa entorno virtual de nombre <code>nombre</code></li> <li><code>mkvirtualenv --python=/usr/bin/python nombre</code>: Crea y activa el entorno virtual <code>nombre</code> basado en el int\u00e9rprete de Python pasado como argumento.</li> <li><code>workon nombre</code>: Activa el entorno virtual <code>nombre</code>.</li> <li><code>mktmpenv</code>: Crea y activa un entorno virtual temporal (se borra cuando se desactiva).</li> <li><code>rmvirtualenv nombre</code>: Borra entorno virtual <code>nombre</code>.</li> <li><code>cpvirtualenv nombre nombre2</code>: Copia el entorno virtual <code>nombre</code> a <code>nombre2</code>.</li> <li><code>allvirtualenv command with arguments</code>: Ejecuta un comando en todos los entornos virtuales. Por ejemplo: <code>allvirtualenv pip install -U pip</code></li> <li><code>setvirtualenvproject virtualenv_path project_path</code>: Asocia un entorno virtual con un proyecto.</li> </ul> <p>Despu\u00e9s de activar un entorno:</p> <ul> <li><code>deactivate</code>: Desactiva el entorno virtual activo.</li> <li><code>cdvirtualenv</code>: Cambia al directorio del entorno virtual activo.</li> <li><code>cdsitepackages</code>: Cambia al directorio <code>site-packages</code> del entorno virtual activo.</li> <li><code>lssitepackages</code>: Lista el directorio <code>site-packages</code> del entorno virtual activo.</li> <li><code>cdproject</code>: Cambia al directorio del proyecto del entorno virtual activo.</li> <li><code>wipeenv</code>: Elimina todos los paquetes de terceros instalados en el entorno virtual actual.</li> </ul>"},{"location":"desarrollo/python.html#operativa","title":"Operativa","text":"<p>Dentro del entorno virtual gestionar los paquetes con pip y resolver las dependencias como buenamente se pueda. Una vez que el entorno virtual sea operativo, obtener el fichero de dependencias con el siguiente comando:</p> <pre><code>$ pip freeze &gt; requirements.txt\n</code></pre> <p>Incluir el fichero <code>requirements.txt</code> en el control de versiones. A la hora de desplegar en producci\u00f3n una revisi\u00f3n que incluya cambios en los paquetes requeridos, ejecutar el siguiente comando una vez que se haya instalado la versi\u00f3n actualizada de <code>requirements.txt</code>:</p> <pre><code>$ pip install -r requirements.txt\n</code></pre>"},{"location":"desarrollo/python.html#ejemplo-de-creacion-de-entorno-django-desde-cero-con-virtualenvwrapperpip","title":"Ejemplo de creaci\u00f3n de entorno Django desde cero con virtualenvwrapper+pip","text":"<p>Creamos repositorio git (por ejemplo <code>remote_james</code>) y lo sincronizamos (por ejemplo con <code>/home/edumoreno/git/remote_james</code>).</p> <p>Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina):</p> <pre><code>$ cd ~/git/remote_james\n$ mkvirtualenv remote_james --python=/home/edumoreno/Python-3.6.5/bin/python3\n$ workon remote_james\n$ setvirtualenvproject $VIRTUAL_ENV .\n$ pip install django\n$ django-admin startproject remote_james .\n$ python manage.py startapp james\n$ pip freeze &gt; requirements.txt\n</code></pre> <p>Incorporamos nueva app en fichero <code>settings.py</code>:</p> <pre><code>INSTALLED_APPS = [\n    'james.apps.JamesConfig',\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre> <p>Ejecutamos:</p> <pre><code>$ python manage.py makemigrations\n$ python manage.py migrate\n$ python manage.py createsuperuser\n$ python manage.py runserver 0.0.0.0:8000\n</code></pre>"},{"location":"desarrollo/python.html#anadir-campo-a-modelo-intermedio-manytomany","title":"A\u00f1adir campo a modelo intermedio ManyToMany","text":"<ol> <li>Partimos por ejemplo de:     <pre><code># Taller\nclass Taller(models.Model):\n    nombre = models.CharField(max_length=100, blank=False)\n    tema = models.CharField(max_length=100, blank=False)\n    descripcion = models.TextField(_('descripci\u00f3n'), blank=False)\n    unidades = models.ManyToManyField('Unidad', blank=True)\n\n    def __str__(self):\n        return self.nombre\n\n    class Meta:\n        verbose_name_plural = _(\"talleres\")\n        ordering = [\"nombre\"]\n</code></pre></li> <li>Primero averiguamos el nombre de la tabla intermedia que se cre\u00f3 autom\u00e1ticamente cuando se a\u00f1adi\u00f3 el campo <code>unidades</code> al modelo <code>Taller</code>. En este caso era: <code>lms_taller_unidades</code>. Hacemos backup:     <pre><code>$ mysqldump --opt -h localhost --user=usuario --password=contrase\u00f1a database lms_taller_unidades &gt; backup_lms_taller_unidades.sql\n</code></pre></li> <li>Borramos o mejor comentamos el campo <code>unidades</code> de <code>Taller</code> y generamos migraciones y las aplicamos, lo que borrar\u00e1 la tabla.</li> <li>Creamos el objeto intermedio:     <pre><code># TallerUnidades\nclass TallerUnidades(models.Model):\n    taller = models.ForeignKey('Taller', on_delete=models.CASCADE)\n    unidad = models.ForeignKey('Unidad', on_delete=models.CASCADE)\n    position = models.PositiveSmallIntegerField(null=True)\n\n    class Meta:\n        db_table = 'lms_taller_unidades'\n        ordering = [\"position\"]\n        verbose_name = \"unidad\"\n        verbose_name_plural = \"unidades\"\n        unique_together = ((\"taller\", \"unidad\"),)\n</code></pre></li> <li>Reestablecemos la relaci\u00f3n ManyToMany a trav\u00e9s del objeto intermedio:     <pre><code># Taller\nclass Taller(models.Model):\n    nombre = models.CharField(max_length=100, blank=False)\n    tema = models.CharField(max_length=100, blank=False)\n    descripcion = models.TextField(_('descripci\u00f3n'), blank=False)\n    unidades = models.ManyToManyField('Unidad', through='TallerUnidades')\n\n    def __str__(self):\n        return self.nombre\n\n    class Meta:\n        verbose_name_plural = _(\"talleres\")\n        ordering = [\"nombre\"]\n</code></pre></li> <li>Creamos migraciones y las aplicamos.</li> <li>Cargamos el backup de la tabla:     <pre><code>$ mysql -h localhost --user=usuario --password=contrase\u00f1a database &lt; backup_lms_taller_unidades.sql\n</code></pre></li> </ol> <p>Si hemos utilizado el campo ManyToMany en el objeto Admin del modelo principal veremos errores como los siguientes:</p> <pre><code>ERRORS:\n&lt;class 'lms.admin.TallerAdmin'&gt;: (admin.E013) The value of 'fields' cannot include the ManyToManyField 'unidades', because that field manually specifies a relationship model.\n</code></pre> <p>No habr\u00e1 m\u00e1s remedio que dejar de mostrar el campo directamente con los widgets ManyToMany y pasar a utilizar Inlines.</p>"},{"location":"desarrollo/python.html#personalizacion-del-modelo-user","title":"Personalizaci\u00f3n del modelo User","text":"<p>Es recomendable cuando se empieza un proyecto, sustituir la gesti\u00f3n del modelo User por uno propio, ya que si se quiere hacer m\u00e1s adelante con la aplicaci\u00f3n ya en marcha, es muy complicada la migraci\u00f3n entre tablas. Un par de buenos art\u00edculos sobre el tema son:</p> <ul> <li>Extending User Model Using a Custom Model Extending AbstractUser</li> <li>How to Implement Multiple User Types with Django</li> </ul> <p>Creamos el modelo as\u00ed:</p> <pre><code>from django.contrib.auth.models import AbstractUser\n\nclass User(AbstractUser):\n    pass\n</code></pre> <p>Y lo activamos definiendo la siguiente propiedad en el fichero <code>settings.py</code>:</p> <pre><code>AUTH_USER_MODEL = 'app01.User'\n</code></pre> <p>Si no queremos perder los formularios especiales de la aplicaci\u00f3n <code>admin</code> para el modelo original, adem\u00e1s hay que personalizar la clase <code>UserAdmin</code> de la siguiente forma:</p> <pre><code>from django.contrib.auth.admin import UserAdmin\n\nclass MyUserAdmin(UserAdmin):\n    model = User\n\nadmin.site.register(User, MyUserAdmin)\n</code></pre>"},{"location":"desarrollo/python.html#gestion-de-migraciones","title":"Gesti\u00f3n de migraciones","text":"<p>Una vez generadas las migraciones, si queremos obtener el c\u00f3digo SQL a que equivalen hay que ejecutar el comando (en el ejemploo solicitamos el c\u00f3digo correspondiente a la migraci\u00f3n <code>0008</code>):</p> <pre><code>(djangodev) $ python manage.py sqlmigrate app01 0008\n</code></pre> <p>Para situarnos en un punto concreto de la serie de migraciones (deshaciendo por tanto las posteriores cuyos ficheros se podr\u00e1n borrar):</p> <pre><code>(djangodev) $ python manage.py migrate app01 0010\n</code></pre> <p>Para mostrar los nombres de todas las migraciones (si no ponemos el nombre al final se muestran las de todo el sitio):</p> <pre><code>(djangodev) $ python manage.py showmigrations app01\n</code></pre> <p>Para deshacer todas las migraciones:</p> <pre><code>(djangodev) $ python manage.py migrate app01 zero\n</code></pre> <p>Para crear una migraci\u00f3n vac\u00eda que podremos utilizar para hacer transferencias de datos (ver ejemplo aqu\u00ed):</p> <pre><code>(djangodev) $ python manage.py makemigrations app01 --empty\n</code></pre> <p>Para saber c\u00f3mo gestionar las migraciones en diferentes ramas del desarrollo y evitar/solucionar conflictos, leer este art\u00edculo.</p>"},{"location":"desarrollo/python.html#formateo-de-cadenas","title":"Formateo de cadenas","text":"<ul> <li> <p>Con tuplas (no se puede cambiar el orden de los par\u00e1metros):</p> <pre><code>\"%s parte de %s la cadena\" % (var1, var2)\n</code></pre> </li> <li> <p>Con diccionario (se puede cambiar el orden de los par\u00e1metros):</p> <pre><code>\"%(par1)s parte de %(par2)s la cadena\" % {'par1': var1, 'par2': var2}\n</code></pre> </li> </ul>"},{"location":"desarrollo/python.html#directorio-instalacion-django","title":"Directorio instalaci\u00f3n Django","text":"<p>Para averiguar d\u00f3nde est\u00e1n los ficheros de Django, ejecutar el siguiente comando:</p> <pre><code>(djangodev) $ python -c \"import django; print(django.__path__)\"\n</code></pre>"},{"location":"desarrollo/python.html#tutorial-django","title":"Tutorial Django","text":"<ul> <li>Escribiendo una view:<ul> <li>Escribiendo directamente la HTTP Response</li> <li>Renderizando una plantilla</li> <li>Gesti\u00f3n de URL's</li> <li>Formulario manual</li> <li>Formulario con vistas gen\u00e9ricas</li> </ul> </li> <li>Creando modelos</li> <li>Manipulaci\u00f3n del modelo de datos por CLI</li> <li>Tests</li> <li>Ficheros est\u00e1ticos: Inserci\u00f3n de CSS en las vistas.</li> <li>Modificaci\u00f3n representaci\u00f3n detalle modelos: fields, fieldsets</li> <li>Objetos relacionados en detalle modelos: Inlines</li> <li>Modificaci\u00f3n representaci\u00f3n lista modelos: list_display, list_filter, search_fields</li> <li>Sustituci\u00f3n de templates en el sitio admin</li> <li>Empaquetado de aplicaciones</li> <li>Env\u00edo de mails</li> </ul>"},{"location":"desarrollo/python.html#tutorial-django-de-mozilla-developer-network","title":"Tutorial Django de Mozilla Developer Network","text":"<ul> <li>Using models - Searching for records</li> <li>Utilizando las listas gen\u00e9ricas y vistas de detalle</li> <li>Personalizaci\u00f3n del subsistema de autenticaci\u00f3n: P\u00e1ginas de login, logout, cambio de password, etc.</li> <li>Propiedad calculada en modelo: Sin correspondencia en base de datos.</li> <li>Formularios:<ul> <li>Usando Form y view funci\u00f3n</li> <li>Usando ModelForm y CRUD Views</li> </ul> </li> </ul>"},{"location":"desarrollo/python.html#referencia-django","title":"Referencia Django","text":"<ul> <li>Directorio</li> <li>Admin actions: Creaci\u00f3n de actions, p\u00e1ginas intermedias al ejecutar actions, gesti\u00f3n de actions.</li> <li>Autenticaci\u00f3n</li> <li>Model field</li> </ul>"},{"location":"desarrollo/python.html#temas-interesantes","title":"Temas interesantes","text":"<ul> <li>filter, list comprehension y generators. Para filtrar por ejemplo una lista de objetos se pueden utilizar estos tres elementos. Hay que tener en cuenta que <code>filter</code> devuelve un iterator. Si por eejemplo s\u00f3lo queremos el n\u00famero de elementos habr\u00e1 que generar una lista o set con \u00e9l.</li> <li>How to Extend Django User Model. Este art\u00edculo es un ejemplo del caso 4.</li> </ul>"},{"location":"desarrollo/python.html#uso-de-class-views","title":"Uso de Class Views","text":""},{"location":"desarrollo/python.html#basicas","title":"B\u00e1sicas","text":"<p>Documentadas aqu\u00ed.</p>"},{"location":"desarrollo/python.html#templateview","title":"TemplateView","text":"<p>La m\u00e1s sencilla. S\u00f3lo necesita definir la propiedad <code>template_name</code> apuntando a la plantilla. Para a\u00f1adir datos al contexto (esto funciona en todas las view classes) se puede definir la funci\u00f3n <code>get_context_data</code> (ver ejemplo e apartado <code>Passing variables to the template</code> aqu\u00ed)</p>"},{"location":"desarrollo/python.html#redirectview","title":"RedirectView","text":"<p>Se puede usar tal cual para definir redirecciones en los ficheros <code>url.py</code>. Por ejemplo:</p> <pre><code>urlpatterns = [\n    url(r'^$', RedirectView.as_view(url=reverse_lazy('admin:index'))),\n    ...\n]\n</code></pre> <p>Pero tambi\u00e9n se puede heredar de ella para por ejemplo hacer una vista \"proxy\" para actualizar un contador de visitas a otra vista, como el ejemplo que hay aqu\u00ed.</p>"},{"location":"desarrollo/python.html#genericas-para-visualizacion-de-modelos","title":"Gen\u00e9ricas para visualizaci\u00f3n de modelos","text":"<p>Son las dise\u00f1adas para generar listados y vistas de detalle de un modelo. Son m\u00e1s adecuadas para visualizaci\u00f3n, como la que se har\u00eda por ejemplo en un blog. Documentadas aqu\u00ed.</p> <p>En las dos clases de este tipo, s\u00f3lo se necesita definir la propiedad <code>model</code>.</p>"},{"location":"desarrollo/python.html#detailview","title":"DetailView","text":"<p>La plantilla se define por convenci\u00f3n a\u00f1adiendo <code>_detail.html</code> al nombre del modelo. Dentro de la plantilla, el objeto que se quiere representar aparece en la variable de contexto <code>object</code>.</p>"},{"location":"desarrollo/python.html#listview","title":"ListView","text":"<p>La plantilla se define por convenci\u00f3n a\u00f1adiendo <code>_list.html</code> al nombre del modelo. Dentro de la plantilla, la colecci\u00f3n de objetos que se quiere representar aparece en la variable de contexto <code>object_list</code>.</p>"},{"location":"desarrollo/python.html#genericas-para-edicion-de-modelos","title":"Gen\u00e9ricas para edici\u00f3n de modelos","text":"<p>Permiten personalizar las vistas t\u00edpicas del mantenimiento de un modelo (creaci\u00f3n, actualizaci\u00f3n y borrado). Documentadas aqu\u00ed.</p> <p>En cualquiera de las cuatro siguientes clases, en la plantilla incluiremos los tags HTML para el formulario (no se generan autom\u00e1ticamente porque la p\u00e1gina podr\u00eda contener varios formularios o por si no estamos generando HTML). Se suele hacer algo as\u00ed:</p> <pre><code>&lt;form action=\"\" method=\"post\"&gt;{{ \"{% csrf_token \" }}%}\n    {{ \"{{ form \" }}}}\n    &lt;input type=\"submit\" value=\"Save\" /&gt;\n&lt;/form&gt;\n</code></pre> <p>El tag para el formulario tiene tres variantes:</p> <ul> <li><code>{{ \"{{ form.as_p \" }}}}</code>: Cada campo del formulario se genera como un <code>&lt;p&gt;</code>.</li> <li><code>{{ \"{{ form.as_table \" }}}}</code>: Cada campo del formulario se genera como una fila de una tabla.</li> <li><code>{{ \"{{ form.as_ul \" }}}}</code>: Cada campo del formulario se genera como una lista sin numerar.</li> </ul> <p>Para m\u00e1ximo control siempre podemos generar cada campo del formulario por separado o incluso escribir el formulario completo a mano (ver documentaci\u00f3n Working with forms).</p>"},{"location":"desarrollo/python.html#formview","title":"FormView","text":"<p>Gestiona la vista con un formulario gen\u00e9rico. Si se produce error en la validaci\u00f3n, vuelve a cargar la misma URL con los campos rellenos e informaci\u00f3n sobre los errores; Si se supera la validaci\u00f3n se redirije a otra URL. En el contexto de la plantilla tendremos el formulario bajo la variable <code>form</code>.</p> <p>Necesita definir las propiedades siguientes:</p> <ul> <li><code>form_class</code>: Clase formulario.</li> <li><code>success_url</code>: URL a la que se redirije en caso de superar la validaci\u00f3n.</li> <li><code>template_name</code>: Plantilla.</li> </ul> <p>Tambi\u00e9n es interesante definir el m\u00e9todo siguiente:</p> <ul> <li><code>form_valid</code>: Se ejecutar\u00e1 cuando el formulario se valide correctamente. Obtendremos los datos del formulario del diccionario <code>self.form.cleaned_data</code>.</li> </ul> <p>Ver ejemplos aqu\u00ed y en apartado <code>Now for a FormView</code> de aqu\u00ed.</p>"},{"location":"desarrollo/python.html#createview","title":"CreateView","text":"<p>Para la creaci\u00f3n de un modelo.</p>"},{"location":"desarrollo/python.html#updateview","title":"UpdateView","text":"<p>Para la actualizaci\u00f3n de un modelo.</p>"},{"location":"desarrollo/python.html#deleteview","title":"DeleteView","text":"<p>Para el borrado de un modelo.</p>"},{"location":"desarrollo/python.html#empaquetadas","title":"Empaquetadas","text":""},{"location":"desarrollo/python.html#filterview","title":"FilterView","text":"<p>Es una especie de ListView con filtros. Ver documentaci\u00f3n aqu\u00ed.</p>"},{"location":"desarrollo/python.html#idioms","title":"Idioms","text":"<ul> <li>Retorno seguro del primer elemento de una lista: <code>return (get_list()[:1] or [None])[0]</code></li> <li>Valor predeterminado en caso de que <code>variable</code> sea None: <code>return variable or 0</code></li> <li>Acceso seguro al atributo de un objeto: <code>getattr(object, name[, default])</code> La funci\u00f3n getattr nos permite indicar un valor predeterminado si un objeto no tiene el atributo que buscamos. Funciona tambi\u00e9n si el objeto es None, lo que nos permite acceder de forma segura a un objeto cuando no sabemos si existe.</li> <li>Suma de una propiedad de una lista de objetos: <code>suma = sum(logro.puntos for logro in logros_totales)</code></li> <li>Suma de una propiedad de una lista de objetos: <code>suma = sum(list(map(lambda x: x.puntos, logros_totales)))</code></li> <li>Operador ternario: <code>valor_cuando_true if condici\u00f3n else valor_cuando_false</code></li> <li>List comprehensions: <code>new_list = [expression(i) for i in old_list if filter(i)]</code></li> <li>Set comprehension 2D: <code>new_set = {(x, y) for x in range(0, 2) for y in range(0, 3)}</code></li> <li>Filtro de los elementos de una lista que contienen un fragmento de cadena, por ejemplo las constantes de <code>pygame</code> que empiezan por <code>K_</code>: <code>filter(lambda x:'K_' in x, dir(pygame))</code></li> <li>Switch/case: Se suele utilizar un diccionario como se explica aqu\u00ed.</li> <li>Intercambiar variables: <code>var_1, var_2 = var_2, var_1</code></li> </ul>"},{"location":"desarrollo/python.html#ejecucion-de-codigo-en-modulo","title":"Ejecuci\u00f3n de c\u00f3digo en m\u00f3dulo","text":"<p>Tal y como se explica muy bien aqu\u00ed, el c\u00f3digo a ejecutar en un m\u00f3dulo actuando como programa principal, conviene que lo vinculemos a la comprobaci\u00f3n de si la propiedad <code>__name__</code> tiene el valor <code>__main__</code>, por ejemplo:</p> <pre><code>def hacer_algo():\n    print(\"algo\")\n\nif __name__ == \"__main__\":\n    hacer_algo()\n</code></pre> <p>en lugar de:</p> <pre><code>def hacer_algo():\n    print(\"algo\")\n\nhacer_algo()\n</code></pre> <p>De esta forma podremos importar este m\u00f3dulo en otros programas sin que se ejecute c\u00f3digo incontroladamente.</p>"},{"location":"desarrollo/python.html#template-filters","title":"Template filters","text":"<ul> <li><code>{{ variable|default_if_none:\"\" }}</code>: Muestra el texto pasado como argumento si <code>variable</code> vale <code>None</code>.</li> <li><code>{{ variable|default:\"\" }}</code>: Muestra el texto pasado como argumento si <code>variable</code> es evaluada como False (cadena vac\u00eda, lista vac\u00eda, etc.).</li> <li><code>{{ variable_date|date:\"Y-m-d\" }}</code>: Formatea una variable de tipo <code>date</code>. Lista de opciones de formato aqu\u00ed.</li> <li><code>{{ variable_list_string|join:\", \" }}</code>: Concatena una lista de strings.</li> <li><code>{{ variable_string|urlencode }}</code>: Codifica una string para que sea segura en una URL.</li> <li><code>{{ variable_string|unicode_decode }}</code>: Decodifica un string en unicode.</li> <li><code>{{ variable_string|safe }}</code>: Genera los caracteres para poder interpretar el string como HTML en lugar de escaparlos como se har\u00eda normalmente.</li> <li><code>{{ variable_list|length }}</code>: N\u00famero de elementos de la lista.</li> <li><code>{{ variable_int|add:1 }}</code>: A\u00f1ade 1 a la variable entera.</li> </ul>"},{"location":"desarrollo/python.html#snippets-python","title":"Snippets Python","text":"<ul> <li>Servidor HTTP en el directorio actual con Python2: <code>python -m SimpleHTTPServer</code></li> <li>Servidor HTTP en el directorio actual con Python3: <code>python3 -m http.server</code></li> <li>Conseguir una URL p\u00fablica para el servidor HTTP anterior con ngrok</li> <li>Convertir un set en un list ordenado: <code>una_lista = sorted(un_set, key=lambda x: x.position)</code></li> <li>Agregar elementos a un diccionario de listas creando las claves si no existen (fuente):<code>dic.setdefault(key,[]).append(value)</code></li> <li>Formateo de fechas:<ul> <li>Predeterminado: la funci\u00f3n de conversi\u00f3n a cadena devuelve la fecha en formato ISO: <code>str(datetime.datetime(2008, 11, 22, 19, 53, 42))</code> devuelve <code>2008-11-22 19:53:42</code></li> <li>Funci\u00f3n de impresi\u00f3n con formato: para el resto de formatos utilizar <code>strftime()</code>. Consultar aqu\u00ed los c\u00f3digos de formato.</li> </ul> </li> </ul>"},{"location":"desarrollo/python.html#snippets-django","title":"Snippets Django","text":"<ul> <li>Colecci\u00f3n completa de objetos de un modelo: <code>Unidad.objects.all()</code></li> <li>Colecci\u00f3n completa de objetos de un modelo ordenada: <code>Unidad.objects.all().order_by('nombre')</code></li> <li>Colecci\u00f3n filtrada de objetos de un modelo: <code>Actividad.objects.filter(fecha__year=2017)</code></li> <li>Filtro OR (es necesario hacer <code>from django.db.models import Q</code>): <code>GrupoUnidades.objects.filter(Q(pausada=True) | Q(fecha_fin__isnull=False))</code></li> <li>Instancia concreta de un objeto: <code>Unidad.objects.get(pk=3)</code></li> <li>Uni\u00f3n de recordsets y distinct:     <pre><code>grupos = Grupo.objects.none()\nfor curso in obj.curso_set.all():\n    grupos = grupos | curso.grupo_set.all()\ngrupos = grupos.distinct()\n</code></pre></li> </ul>"},{"location":"desarrollo/python.html#filtro-en-listview","title":"Filtro en ListView","text":"<pre><code># urls.py\nfrom django.conf.urls import url\nfrom . import views\n\napp_name = 'lms'\nurlpatterns = [\n    url(r'^asistencia/(?P&lt;pk&gt;\\d+)/grupo/(?P&lt;admin&gt;\\w+)/$', views.AsistenciaGrupoView.as_view(), name='asistencia_grupo')\n]\n\n\n# views.py\nclass AsistenciaGrupoView(generic.ListView):\n    template_name = 'lms/asistencia_grupo.html'\n\n    def get_queryset(self):\n        semanas = int(self.request.GET.get('semanas', '12'))\n        return Jornada.objects.filter(grupo__id=self.kwargs['pk'], fecha__gte=datetime.today() - timedelta(weeks=semanas)).order_by('fecha')\n\n    def get_context_data(self, **kwargs):\n        context = super(AsistenciaGrupoView, self).get_context_data(**kwargs)\n        # Lista de semanas que mostraremos en el combo para filtrar\n        context['lista_semanas'] = [(4, 1),\n                                    (8, 2)]\n        # Par\u00e1metro de filtrado del querystring (12 semanas como valor predeterminado)\n        context['semanas'] = int(self.request.GET.get('semanas', '12'))\n        # Valor del PK del grupo recogido de la URL\n        context['pk'] = self.kwargs['pk']\n\n        return context\n\n\n# template\n    &lt;form method=\"get\" action=\"{{ \"{% url 'lms:asistencia_grupo' pk \" }}%}\"&gt;\n        &lt;label for=\"semanas_id\"&gt;Meses&lt;/label&gt;\n        &lt;select class=\"form-control\" name=\"semanas\" id=\"semanas_id\" onchange='if(this.value != 0) { this.form.submit(); }'&gt;\n            {{ \"{% for v, d in lista_semanas \" }}%}\n            &lt;option value=\"{{ \"{{ v \" }}}}\"{{ \"{% if semanas == v \" }}%} selected='selected'{{ \"{% endif \" }}%}&gt;{{ \"{{ d \" }}}}&lt;/option&gt;\n            {{ \"{% endfor \" }}%}\n        &lt;/select&gt;\n    &lt;/form&gt;\n</code></pre>"},{"location":"desarrollo/python.html#instrospeccion","title":"Instrospecci\u00f3n","text":""},{"location":"desarrollo/python.html#lista-de-atributos","title":"Lista de atributos","text":"<p>Podemos obtenerlos de dos maneras:</p> <ul> <li><code>objeto.__dict__</code></li> <li><code>vars(objeto)</code></li> </ul>"},{"location":"desarrollo/python.html#lista-de-atributos-y-metodos","title":"Lista de atributos y m\u00e9todos","text":"<ul> <li><code>dir(objeto)</code></li> </ul>"},{"location":"desarrollo/python.html#logging","title":"Logging","text":""},{"location":"desarrollo/python.html#log-a-fichero","title":"Log a fichero","text":"<p>Configurar un logger en el fichero de settings correspondiente a\u00f1adiendo esto:</p> <pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'handlers': {\n        'file': {\n            'level': 'DEBUG',\n            'class': 'logging.FileHandler',\n            'filename': 'debug.log',\n        },\n    },\n    'loggers': {\n        'log': {\n            'handlers': ['file'],\n            'level': 'DEBUG',\n            'propagate': True,\n        },\n    },\n}\n</code></pre> <p>En el m\u00f3dulo donde queramos obtener log, a\u00f1adir al principio lo siguiente:</p> <pre><code>import logging\n\nlogger = logging.getLogger('log')\n</code></pre> <p>Y dentro de la funci\u00f3n donde queramos emitir algo al log:</p> <pre><code>logger.debug('lo que sea')\n</code></pre>"},{"location":"desarrollo/python.html#log-a-consola","title":"Log a consola","text":"<p>Si s\u00f3lo queremos imprimir en consola una traza r\u00e1pida, es m\u00e1s f\u00e1cil escribiendo simplemente:</p> <pre><code>print('lo que sea', file=sys.stderr)\n</code></pre>"},{"location":"desarrollo/python.html#traza-de-queries-a-consola","title":"Traza de queries a consola","text":"<p>Configurar el siguiente logger en el fichero de settings correspondiente:</p> <pre><code>LOGGING = {\n    'version': 1,\n    'filters': {\n        'require_debug_true': {\n            '()': 'django.utils.log.RequireDebugTrue',\n        }\n    },\n    'handlers': {\n        'console': {\n            'level': 'DEBUG',\n            'filters': ['require_debug_true'],\n            'class': 'logging.StreamHandler',\n        }\n    },\n    'loggers': {\n        'django.db.backends': {\n            'level': 'DEBUG',\n            'handlers': ['console'],\n        }\n    }\n}\n</code></pre>"},{"location":"desarrollo/python.html#pip","title":"pip","text":""},{"location":"desarrollo/python.html#instalacion-version-especifica-de-un-paquete","title":"Instalaci\u00f3n versi\u00f3n espec\u00edfica de un paquete","text":"<pre><code>$ pip install Django==1.11.6\n</code></pre>"},{"location":"desarrollo/python.html#usando-webpack-para-construir-el-frontend","title":"Usando Webpack para construir el frontend","text":""},{"location":"desarrollo/python.html#enlaces_3","title":"Enlaces:","text":"<ul> <li>Django + webpack + Vue.js - setting up a new project that's easy to develop and deploy (part 1)</li> <li>Using Webpack transparently with Django + hot reloading React components as a bonus</li> <li>webpack-bundle-tracker</li> <li>django-webpack-loader</li> <li>django-vue-webpack: A boilerplate of using Django as backend framework, Vue js and webpack as the frontend setup.</li> <li>Building Modern Applications with Django, Vue.js and Auth0: Part 2</li> </ul>"},{"location":"desarrollo/python.html#procedimiento","title":"Procedimiento","text":"<ol> <li>Instalamos Vue-CLI en la m\u00e1quina de desarrollo:     <pre><code>sudo npm install -g @vue/cli\nsudo npm install -g @vue/cli-init\n</code></pre></li> <li>Generamos el scaffolding para vue y webpack ejecutando lo siguiente desde el directorio que queremos que contenga el proyecto (en el ejemplo lo llamaremos <code>vue_test</code>):     <pre><code>vue init webpack vue_test\n</code></pre></li> <li>Durante la generaci\u00f3n del proyecto se nos hacen las siguientes preguntas:<ol> <li>Vue build: Elegimos <code>Runtime + Compiler</code></li> <li>Install vue-router?: Elegimos <code>Y</code></li> <li>Use ESLint to lint your code?: n</li> <li>Set up unit tests: n</li> <li>Setup e2e tests with Nightwatch?: n</li> <li>Should we run <code>npm install</code> for you after the project has been created?: Yes, use NPM</li> </ol> </li> <li>Generamos el scaffolding para Django:     <pre><code>cd vue_test/\ndjango-admin startproject vue_test .\n</code></pre></li> <li>Instalamos el plugin de webpack <code>webpack-bundle-tracker</code> y el m\u00f3dulo Django <code>django-webpack-loader</code> (con pipenv):     <pre><code>npm install --save-dev webpack-bundle-tracker\npipenv install django-webpack-loader\n</code></pre></li> <li>A\u00f1adimos <code>webpack_loader</code> a las aplicaciones Django:     <pre><code># ./vue_test/settings.py\nINSTALLED_APPS = [\n'webpack_loader',\n#...\n]\n</code></pre></li> <li>Configurar webpack para que use <code>BundleTracker</code>:     <pre><code>// build/webpack.base.conf.js\nlet BundleTracker = require('webpack-bundle-tracker')\nmodule.exports = {\n  // ...\n  plugins: [\n    new BundleTracker({filename: './webpack-stats.json'}),\n  ],\n}\n</code></pre></li> <li>Definir las rutas est\u00e1ticas:<ul> <li>Configuraci\u00f3n webpack:     <pre><code>// ./config/index.js\nmodule.exports = {\n  build: {\n    assetsRoot: path.resolve(__dirname, '../dist/'),\n    assetsSubDirectory: '',\n    assetsPublicPath: '/static/',\n    // ...\n  },\n  dev: {\n    assetsPublicPath: 'http://localhost:8080/',\n    // ...\n  }\n}\n</code></pre></li> <li>Configuraci\u00f3n Django:     <pre><code># ./vue_test/settings.py\nSTATICFILES_DIRS = (\n    os.path.join(BASE_DIR, 'dist'),\n    os.path.join(BASE_DIR, 'static'),\n)\nSTATIC_ROOT = os.path.join(BASE_DIR, 'public')\nSTATIC_URL = '/static/'\n\nWEBPACK_LOADER = {\n    'DEFAULT': {\n        'BUNDLE_DIR_NAME': '',\n        'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats.json'),\n    }\n}\n</code></pre></li> </ul> </li> <li>Configuraci\u00f3n webpack para que resuelva los ficheros est\u00e1ticos desde <code>/static</code>:     <pre><code>// build/webpack.base.conf.js\nmodule.exports = {\n  resolve: {\n    alias: {\n      // ...\n      '__STATIC__': resolve('static'),\n    },\n}\n</code></pre></li> <li>Configuraci\u00f3n del Hot Reload:     <pre><code>// build/webpack.dev.conf.js\ndevServer: {\n  headers: {\n    \"Access-Control-Allow-Origin\":\"\\*\"\n  },\n  // ...\n}\n</code></pre></li> </ol> <p>Los contenidos est\u00e1ticos se servir\u00e1n desde uno y otro entorno de la siguiente forma:</p> <pre><code>&lt;!-- in a Django template --&gt;\n&lt;img src=\"{{ \"{% static 'logo.png' \" }}%}\"&gt;\n\n&lt;!-- in a Vue component --&gt;\n&lt;img src=\"~__STATIC__/logo.png\"&gt;\n</code></pre> <p>Finalmente, para servir los contenidos cliente en desarrollo hay que ejecutar:</p> <pre><code>cd vue-test\nnpm run dev\n</code></pre> <p>Y para servir los contenidos del backend:</p> <pre><code>cd vue-test\npipenv shell\npython manage.py runserver\n</code></pre> <p>Cuando hagamos <code>npm run build</code> todo lo gestionado por webpack se compilar\u00e1 dentro del directorio <code>dist</code>.</p> <p>La documentaci\u00f3n de webpack se encuentra aqu\u00ed.</p>"},{"location":"desarrollo/python.html#instalacion-de-jupyterhub","title":"Instalaci\u00f3n de JupyterHub","text":""},{"location":"desarrollo/python.html#enlaces_4","title":"Enlaces","text":"<ul> <li>jupyterhub-deploy-docker</li> <li>Docker for Data Science: Running a Dockerized Jupyter Server</li> <li>28 Jupyter Notebook tips, tricks, and shortcuts</li> <li>Jupyter Notebook for Beginners: A Tutorial</li> <li>nbgrader</li> </ul>"},{"location":"desarrollo/python.html#niveles-de-instalacion","title":"Niveles de instalaci\u00f3n","text":"<ul> <li>Peque\u00f1a - Paquetes sistema</li> <li>Media - Docker</li> <li>Grande - Kubernetes</li> </ul>"},{"location":"desarrollo/python.html#instalacion-the-littlest-jupyterhub","title":"Instalaci\u00f3n The Littlest JupyterHub","text":"<ol> <li> <p>Instalaci\u00f3n de dependencias y JupyterHub:</p> <pre><code>$ sudo apt-get install python3 git curl\n$ curl https://raw.githubusercontent.com/jupyterhub/the-littlest-jupyterhub/master/bootstrap/bootstrap.py | sudo -E python3 - --admin niubit\n</code></pre> </li> <li> <p>Configuraci\u00f3n de puerto de Traefik en:</p> <pre><code>/opt/tljh/state/traefik.toml\n</code></pre> </li> <li> <p>Reinicio de <code>traefik</code>:</p> <pre><code>$ sudo systemctl restart traefik.service\n</code></pre> </li> <li> <p>Si queremos detener el servicio hay que desactivar los dos siguientes:</p> <pre><code>$ sudo systemctl disable jupyterhub.service\n$ sudo systemctl disable traefik.service\n</code></pre> </li> </ol>"},{"location":"desarrollo/python.html#configuracion-de-fichero-de-log","title":"Configuraci\u00f3n de fichero de log","text":"<ol> <li> <p>A\u00f1adimos lo siguiente al final del fichero <code>/opt/tljh/hub/lib/python3.6/site-packages/tljh/jupyterhub_config.py</code>:</p> <pre><code>c.JupyterHub.extra_log_file = '/var/log/jupyterhub.log'\n</code></pre> </li> <li> <p>Reiniciamos el servicio:</p> <pre><code>$ sudo systemctl restart jupyterhub.service\n</code></pre> </li> </ol>"},{"location":"desarrollo/python.html#anadiendo-modulos-python-al-sistema","title":"A\u00f1adiendo m\u00f3dulos Python al sistema","text":"<ol> <li>Abrir una terminal en Jupyter con un usuario admin.</li> <li> <p>Ejecutar:</p> <pre><code>$ sudo -E pip install &lt;paquete&gt;\n</code></pre> </li> </ol>"},{"location":"desarrollo/python.html#visualizacion-de-jupyter-notebooks","title":"Visualizaci\u00f3n de Jupyter Notebooks","text":"<p>En este art\u00edculo mencionan las siguientes opciones:</p> <ul> <li>Share your notebook file with gists or on github, both of which render the notebooks. See this example.</li> <li>If you upload your notebook to a github repository, you can use the handy mybinder service to allow someone half an hour of interactive Jupyter access to your repository.</li> <li>Store your notebook e.g. in dropbox and put the link to nbviewer. nbviewer will render the notebook from whichever source you host it.</li> </ul>"},{"location":"desarrollo/python.html#impresion-con-formato","title":"Impresi\u00f3n con formato","text":"<p>Si queremos que la salida por consola tenga formato, hay que utilizar la codificaci\u00f3n de tipo Set Graphics Mode que se lista en esta p\u00e1gina con el c\u00f3digo <code>\\033</code> como secuencia de Esc.</p> <p>Por ejemplo si queremos destacar en negrita la primera palabra de la siguiente frase lo haremos as\u00ed:</p> <pre><code>print(\"\\033[1m;ERROR\\033[0m Algo ha salido mal.\")\n</code></pre>"},{"location":"desarrollo/python.html#queries-complejas","title":"Queries complejas","text":"<p>Los par\u00e1metros que aplicamos al m\u00e9todo filter se aplican con un <code>and</code> entre ellos a la query resultante. Para hacer queries m\u00e1s complejas (con <code>and</code> y <code>or</code> con prioridades establecidas con par\u00e9ntesis) hay que utilizar los objetos Q.</p>"},{"location":"desarrollo/python.html#localizacion-de-site-packages","title":"Localizaci\u00f3n de site-packages","text":"<ul> <li>Ruta general: <code>python -c 'import site; print(site.getsitepackages())'</code></li> <li>Ruta de usuario: <code>python -m site --user-site</code></li> </ul>"},{"location":"desarrollo/ror.html","title":"Ruby on Rails","text":""},{"location":"desarrollo/ror.html#enlaces","title":"Enlaces","text":"<ul> <li>Ruby on Rails Tutorial</li> <li>Programming Ruby: The Pragmatic Programmer's Guide</li> <li>Why's (Poignant) Guide to Ruby</li> <li>Ruby User's Guide</li> <li>Try Ruby</li> <li>Aptana Studio (IDE)</li> <li>Ruby on Rails Screencasts :exclamation:</li> <li>Ruby on Rails Guides :exclamation:</li> <li>Ruby Tutorial</li> <li>Rails 3 para Windows y Linux Ubuntu (libro en espa\u00f1ol)</li> <li>Rails Examples and Tutorials</li> <li>Ruby QuickRef</li> <li>Rails Tutorial Sublime Text setup</li> <li>Metaprogramming in Ruby: It\u2019s All About the Self</li> <li>Comprobaci\u00f3n de entorno de ejecuci\u00f3n en c\u00f3digo :exclamation:</li> </ul>"},{"location":"desarrollo/ror.html#performance-tunning","title":"Performance Tunning","text":"<ul> <li>Performance Tuning for Phusion Passenger (an Introduction) :exclamation:</li> <li>Phusion Corporate Blog - Tuning Phusion Passenger\u2019s concurrency settings</li> <li>Production Rails Tuning with Passenger: PassengerMaxProcesses</li> <li>Passenger tuning for rails application</li> <li>Phusion Passenger users guide, Apache version - Resource control and optimization options</li> </ul>"},{"location":"desarrollo/ror.html#el-lio-del-respond_with","title":"El l\u00edo del respond_with","text":"<ul> <li>Bringing Merb's provides/display into Rails 3</li> <li>Embracing REST with mind, body and soul</li> <li>What's New in Edge Rails: Cleaner RESTful Controllers w/ respond_with</li> <li>Respond With An Explanation</li> </ul>"},{"location":"desarrollo/ror.html#modulos-interesantes","title":"M\u00f3dulos interesantes","text":"<ul> <li>Devise: Engine de autenticaci\u00f3n/autorizaci\u00f3n</li> <li>Forem: Engine para implementar un foro</li> <li>carmen-rails: Seed con datos de los pa\u00edses y las regiones del mundo.</li> <li>RailsCasts #328 Twitter Bootstrap Basics</li> <li>Twitter Bootstrap Gem</li> <li>FasterCSV: Carga y generaci\u00f3n de ficheros CSV hacia y desde tablas. Ejemplo de uso.</li> <li>Entity-Relationship Diagrams for Ruby on Rails: Obtiene el esquema de relaci\u00f3n entre entidades de una aplicaci\u00f3n en base al an\u00e1lisis de sus modelos.</li> </ul>"},{"location":"desarrollo/ror.html#instalacion-en-ubuntu","title":"Instalaci\u00f3n en Ubuntu","text":""},{"location":"desarrollo/ror.html#algunas-guias","title":"Algunas gu\u00edas","text":"<ul> <li>How to install Ruby on Rails in Ubuntu 12.04 LTS</li> <li>Buena gu\u00eda de <code>railsapps</code> sobre instalaci\u00f3n de Ruby/Rails</li> <li>Otra gu\u00eda de <code>railsapps</code> sobre actualizaci\u00f3n</li> </ul>"},{"location":"desarrollo/ror.html#procedimiento-ubuntu-1304","title":"Procedimiento Ubuntu &lt;=13.04","text":"<ol> <li>Instalar los paquetes:<ul> <li><code>ruby</code></li> <li><code>ruby-dev</code></li> <li><code>libsqlite3-dev</code></li> <li><code>libmysqlclient-dev</code></li> <li><code>nodejs</code></li> <li><code>nodejs-dev</code></li> </ul> </li> <li>Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina.</li> <li>Instalar Bundler:     <pre><code>sudo gem install bundler\n</code></pre></li> <li>Instalaci\u00f3n de Rails:     <pre><code>sudo gem install rails\n</code></pre></li> <li>Instalar passenger (el propio instalador da instrucciones sobre los paquetes necesarios):     <pre><code>sudo gem install passenger\n</code></pre></li> <li>Instalar el m\u00f3dulo en Apache:     <pre><code>sudo passenger-install-apache2-module\n</code></pre></li> <li>Tal y como indica la salida del comando anterior, hay que habilitar el m\u00f3dulo reci\u00e9n instalado por medio de la configuraci\u00f3n de Apache. Se puede hacer a\u00f1adiendo los dos siguientes ficheros:</li> </ol> <pre><code>#/etc/apache2/mods-available/passenger.load\nLoadModule passenger_module /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so\n</code></pre> <pre><code>#/etc/apache2/mods-available/passenger.conf\nPassengerRoot /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19\nPassengerRuby /usr/bin/ruby1.9.1\n</code></pre> <p>(las rutas contenidas en los ficheros anteriores depender\u00e1n de la instalaci\u00f3n; la salida del comando que instala el m\u00f3dulo nos indica los valores correctos).</p> <p>Finalmente hay que habilitar el m\u00f3dulo:</p> <pre><code>$ sudo a2enmod passenger\n</code></pre> <p>Y reiniciamos Apache:</p> <pre><code>$ sudo service apache2 restart\n</code></pre>"},{"location":"desarrollo/ror.html#procedimiento-ubuntu-1310","title":"Procedimiento Ubuntu &gt;=13.10","text":"<ol> <li>Instalar los paquetes:<ul> <li><code>ruby</code></li> <li><code>ruby-dev</code></li> <li><code>libsqlite3-dev</code></li> <li><code>libmysqlclient-dev</code></li> <li><code>nodejs</code></li> <li><code>nodejs-dev</code></li> </ul> </li> <li>Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina.</li> <li>Instalar Bundler:     <pre><code>sudo gem install bundler\n</code></pre></li> <li>Instalaci\u00f3n de Rails:     <pre><code>sudo gem install rails\n</code></pre></li> <li>Instalar passenger siguiendo esta gu\u00eda. Recomienda instalarlo con los paquetes de la distribuci\u00f3n. A continuaci\u00f3n se indica un resumen de los pasos.</li> <li>Instalar la clave PGP del repositorio que vamos a a\u00f1adir:     <pre><code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 561F9B9CAC40B2F7\n</code></pre></li> <li>Instalar el siguiente paquete:<ul> <li><code>apt-transport-https</code></li> </ul> </li> <li>Crear el fichero <code>/etc/apt/sources.list.d/passenger.list</code> con el siguiente contenido:     <pre><code>deb https://oss-binaries.phusionpassenger.com/apt/passenger saucy main\n</code></pre></li> <li>Actualizar el repositorio e instalar el siguiente paquete:<ul> <li><code>libapache2-mod-passenger</code></li> </ul> </li> </ol>"},{"location":"desarrollo/ror.html#buenas-practicas","title":"Buenas pr\u00e1cticas","text":"<ul> <li>Skinny Controller, Fat Model</li> <li>Nesting resources: Resources should never be nested more than 1 level deep.</li> </ul>"},{"location":"desarrollo/ror.html#tips","title":"Tips","text":""},{"location":"desarrollo/ror.html#visibilidad-de-helpers","title":"Visibilidad de Helpers","text":"<p>Los m\u00e9todos definidos en los m\u00f3dulos Helper (<code>app/helpers/&lt;controller&gt;_helper.rb</code>) son visibles en las vistas por defecto. Para que est\u00e9n disponibles en los controllers hay que hacer un <code>include</code>. Si lo hacemos en el controller base (<code>ApplicationController</code>) estar\u00e1 disponibles en todos los controllers dado que \u00e9stos heredan de <code>ApplicationController</code>.</p>"},{"location":"desarrollo/ror.html#mejora-en-rendimiento-en-desarrollo","title":"Mejora en rendimiento en Desarrollo","text":"<p>Rails 3.1 introdujo el concepto del asset pipeline. Desafortunadamente esto causa problemas de rendimiento en el entorno de desarrollo. Para mejorarlo se puede utilizar la tarea de precompilador siguiente:</p> <pre><code>$ bundle exec rake assets:precompile:nondigest\n</code></pre> <p>Esto provoca que los cambios en los ficheros asset no sean incluidos autom\u00e1ticamente cuando recargamos la p\u00e1gina. Para forzar su refresco hay que volver a ejecutar el comando anterior.</p>"},{"location":"desarrollo/ror.html#borrado-de-assets","title":"Borrado de assets","text":"<p>Rails proporciona la siguiente tarea de precompilador que borrar\u00e1 el directorio <code>public/assets</code>, cosa que puede resultar \u00fatil antes de un commit.</p> <pre><code>$ bundle exec rake assets:clean\n</code></pre> <p>Esta orden puede solucionar el problema con el <code>font-awesome</code>, que en ocasiones se dibuja mal.</p> <p>Tambi\u00e9n puede merecer la pena incluir el directorio <code>public/assets</code> en el fichero <code>.gitignore</code>.</p>"},{"location":"desarrollo/ror.html#actualizacion-de-paquetes","title":"Actualizaci\u00f3n de paquetes","text":"<p>Comandos interesantes relacionados con las versiones de los paquetes y su gesti\u00f3n:</p> <ul> <li><code>bundle outdated</code>: Informe de paquetes desactualizados.</li> <li><code>bundle outdated &lt;paquete&gt;</code>: Informa sobre el nivel de actualizaci\u00f3n de un paquete.</li> <li><code>bundle update</code>: Actualiza todos los paquetes.</li> <li><code>bundle update &lt;paquete&gt;</code>: Actualiza el paquete.</li> </ul>"},{"location":"desarrollo/ror.html#muestra-el-mapa-de-rutas","title":"Muestra el mapa de rutas","text":"<pre><code>$ bundle exec rake routes\n</code></pre>"},{"location":"desarrollo/ror.html#muestra-todas-las-tareas","title":"Muestra todas las tareas","text":"<pre><code>$ bundle exec rake -T\n</code></pre>"},{"location":"desarrollo/ror.html#instalacion-de-gem","title":"Instalaci\u00f3n de gem","text":"<p>Tras la instalaci\u00f3n de un gem generalmente hay que instalar y ejecutar las migraciones de base de datos con los siguientes comandos:</p> <pre><code>$ rake railties:install:migrations\n$ rake db:migrate\n</code></pre> <p>Para instalar una versi\u00f3n espec\u00edfica de una gem hay que a\u00f1adir el argumento <code>--version</code>, como por ejemplo:</p> <pre><code>$ gem install --version '3.0.13' passenger\n</code></pre>"},{"location":"desarrollo/ror.html#activar-modo-debug","title":"Activar modo debug","text":"<p>Instalar primero la gem <code>debugger</code>:</p> <pre><code>$ sudo gem install debugger\n</code></pre> <p>A\u00f1adir al Gemfile lo siguiente (probablemente s\u00f3lo sea necesario en el entorno de desarrollo):</p> <pre><code>group :development do\n  gem 'debugger'\nend\n</code></pre> <p>Insertar en el c\u00f3digo una llamada a <code>debugger</code> en el punto del c\u00f3digo donde queramos que se detenga la ejecuci\u00f3n.</p> <p>Finalmente para arrancar el servidor en modo debug:</p> <pre><code>$ bundle exec rails s --debugger\n</code></pre> <p>Lo anterior sirve para depurar sobre Webrick. Para hacerlo bajo Passenger seguir las instrucciones de este post (con la ayuda de este otro). De forma resumida consiste en ejecutar:</p> <pre><code>$ cd &lt;app_root&gt;\n$ sudo gem install ruby-debug19\n</code></pre> <p>Generar un task con:</p> <pre><code>$ bundle exec rails g task myapplication restart\n</code></pre> <p>A\u00f1adir lo siguiente al final del fichero <code>config/environments/development.rb</code>:</p> <pre><code>if File.exists?(File.join(RAILS_ROOT,'tmp', 'debug.txt'))\n  require 'ruby-debug'\n  Debugger.wait_connection = true\n  Debugger.start_remote\n  File.delete(File.join(RAILS_ROOT,'tmp', 'debug.txt'))\nend\n</code></pre> <p>Ejecutar:</p> <pre><code>$ bundle exec rake myapplication:restart DEBUG=true\n</code></pre> <p>Y una vez que hagamos una request para que se reinicie la aplicaci\u00f3n ejecutar:</p> <pre><code>$ rdebug -c\n</code></pre>"},{"location":"desarrollo/ror.html#generacion-de-un-modelo","title":"Generaci\u00f3n de un modelo","text":"<p>El siguiente comando crear\u00e1 un modelo para una entidad adem\u00e1s de la migration correspondiente en la base de datos:</p> <pre><code>$ bundle exec rails g model spree/product_layout name:string view:string description:text\n</code></pre>"},{"location":"desarrollo/ror.html#path-helpers","title":"Path Helpers","text":"<p>Dada la siguiente definici\u00f3n de resources anidados:</p> <pre><code>resources :magazines do\n  resources :ads\nend\n</code></pre> <p>Alternativamente al uso de los path helpers habituales, cuando se pasa como argumento un objeto se puede dejar a Rails que decida autom\u00e1ticamente el path helper necesario, es decir las siguientes l\u00edneas ser\u00e1n equivalentes:</p> <pre><code>&lt;%= link_to \"Ad details\", magazine_ad_path(@magazine, @ad) %&gt;\n&lt;%= link_to \"Ad details\", url_for([@magazine, @ad]) %&gt;\n</code></pre> <p>En helpers como <code>link_to</code> podemos indicar simplemente los objetos:</p> <pre><code>&lt;%= link_to \"Ad details\", [@magazine, @ad] %&gt;\n</code></pre> <p>O si queremos enlazar directamente a la <code>magazine</code> en lugar de un array pasaremos directamente el objeto padre:</p> <pre><code>&lt;%= link_to \"Magazine details\", @magazine %&gt;\n</code></pre>"},{"location":"desarrollo/ror.html#tareas-en-base-de-datos","title":"Tareas en base de datos","text":"<ul> <li><code>db:create</code>: creates the database for the current env</li> <li><code>db:create:all</code>: creates the databases for all envs</li> <li><code>db:drop</code>: drops the database for the current env</li> <li><code>db:drop:all</code>: drops the databases for all envs</li> <li><code>db:migrate</code>: runs migrations for the current env that have not run yet</li> <li><code>db:migrate:up</code>: runs one specific migration</li> <li><code>db:migrate:down</code>: rolls back one specific migration</li> <li><code>db:migrate:status</code>: shows current migration status</li> <li><code>db:migrate:rollback</code>: rolls back the last migration</li> <li><code>db:migrate:redo</code>: runs (<code>db:migrate:down</code> <code>db:migrate:up</code>) or (<code>db:migrate:rollback</code> <code>db:migrate</code>) depending on the specified migration</li> <li><code>db:migrate:reset</code>: runs <code>db:drop</code> <code>db:create</code> <code>db:migrate</code></li> <li><code>db:forward</code>: advances the current schema version to the next one</li> <li><code>db:seed</code>: (only) runs the db/seed.rb file</li> <li><code>db:schema:load</code>: loads the schema into the current env's database</li> <li><code>db:schema:dump</code>: dumps the current env's schema (and seems to create the db aswell)</li> <li><code>db:setup</code>: runs <code>db:schema:load</code> <code>db:seed</code></li> <li><code>db:reset</code>: runs <code>db:drop</code> <code>db:setup</code></li> </ul>"},{"location":"desarrollo/ror.html#gestion-del-pluralsingular","title":"Gesti\u00f3n del plural/singular","text":"<p>Cuando un modelo/recurso tenga un plural irregular, se puede gestionar manualmente por medio de un <code>Inflector</code>. Consultar esta gu\u00eda.</p>"},{"location":"desarrollo/ror.html#relacion-entre-modelos","title":"Relaci\u00f3n entre modelos","text":"<p>Estos ser\u00edan los pasos para establecer una relaci\u00f3n 1:n entre dos modelos preexistentes. Se basa en este apartado de las Rails Guides.</p> <p>Partimos de los modelos <code>Spree::Product</code> de la gem <code>spree_core</code> y el modelo <code>Spree::ProductLayout</code> propio de nuestra aplicaci\u00f3n. La relaci\u00f3n ser\u00e1 un <code>belongs_to</code> de Product a ProductLayout, es decir un n:1. Empezamos a\u00f1adiendo la relaci\u00f3n al modelo Product. Como es una entidad de una gem lo haremos con un fichero decorator:</p> <pre><code>#app/models/spree/product_decorator.rb\nSpree::Product.class_eval do\n  belongs_to :product_layout\nend\n</code></pre> <p>A continuaci\u00f3n generamos un migration para a\u00f1adir el campo que establece la relaci\u00f3n en la tabla que mantiene el modelo Product:</p> <pre><code>$ bundle exec rails g migration AddProductLayoutRelationToProducts\n</code></pre> <p>Ahora lo editamos para incorporar el campo:</p> <pre><code>#db/migrate/20130228153926_add_product_layout_relation_to_products.rb\nclass AddProductLayoutRelationToProducts &lt; ActiveRecord::Migration\n  def change\n    change_table :spree_products do |t|\n      t.references :product_layout\n    end\n  end\nend\n</code></pre> <p>Finalmente ejecutamos el migrate:</p> <pre><code>$ bundle exec rake db:migrate\n</code></pre>"},{"location":"desarrollo/ror.html#inspeccionar-la-definicion-de-un-metodo","title":"Inspeccionar la definici\u00f3n de un m\u00e9todo","text":"<p>Si queremos averiguar en qu\u00e9 m\u00f3dulo se encuentra definido un m\u00e9todo ejecutamos en consola IRB lo siguiente:</p> <pre><code>puts Objeto.new.method(:metodo).source_location\n</code></pre> <p>o</p> <pre><code>puts Objeto.instance_method(:metodo).source_location\n</code></pre> <p>Sustituyendo \"Objeto\" y \"metodo\" por lo que corresponda. Fuente.</p> <p>Si se trata de un helper partimos de <code>helper</code>, por ejemplo:</p> <pre><code>helper.method(:tab).source_location\n</code></pre>"},{"location":"desarrollo/ror.html#listar-gems-instalados","title":"Listar gems instalados","text":"<pre><code>$ gem list --local\n</code></pre> <p>Si queremos s\u00f3lo las versiones de una gem, de <code>rails</code> por ejemplo:</p> <pre><code>$ gem list --local rails\n</code></pre>"},{"location":"desarrollo/ror.html#generar-el-api-de-rails","title":"Generar el API de rails","text":"<p>Para tener en local la versi\u00f3n actualizada del API de rails:</p> <pre><code>$ rails new dummy_app\n$ cd dummy_app\n$ bundle exec rake doc:rails\n</code></pre> <p>Luego mover el subdirectorio <code>doc/api/index.html</code> a donde nos interese y borrar la dummy_app.</p>"},{"location":"desarrollo/ror.html#rubygems-documentation","title":"RubyGems Documentation","text":"<p>Para visualizar la documentaci\u00f3n de todas las gems instaladas en el sistema ejecutar:</p> <pre><code>$ gem server\n</code></pre> <p>Y abrir la direcci\u00f3n: http://localhost:8808</p>"},{"location":"desarrollo/ror.html#problema-con-el-encoding-de-algunas-fuentes-en-utf-8","title":"Problema con el encoding de algunas fuentes en UTF-8","text":"<p>Al incorporar el gem spree_sermepa se produjo el problema descrito aqu\u00ed.</p> <p>Hay varias formas de solucionarlo. Una es a\u00f1adir:</p> <pre><code>if RUBY_VERSION =~ /1.9/\n  Encoding.default_external = Encoding::UTF_8\n  Encoding.default_internal = Encoding::UTF_8\nend\n</code></pre> <p>en la parte superior del Gemfile.</p> <p>Si se utiliza Passenger para servir la aplicaci\u00f3n, otra opci\u00f3n es sustituir la siguiente variable del fichero <code>/etc/apache2/envvars</code>:</p> <pre><code>export LANG=C\n</code></pre> <p>por:</p> <pre><code>export LANG=es_ES.UTF-8\n</code></pre>"},{"location":"desarrollo/ror.html#downgrade-de-rubygems","title":"Downgrade de Rubygems","text":"<p>Tras actualizar a la versi\u00f3n 2.0.3 de Rubygems empec\u00e9 a tener problemas a la hora de hacer <code>bundle install</code>. Aunque me ped\u00eda el password de root luego se produc\u00edan errores de permisos en los directorios donde se almacenan las gems. La soluci\u00f3n fue volver a una versi\u00f3n anterior de Rubygems. En concreto la misma que hab\u00eda en ese momento en el servidor de DinaHosting, es decir la 1.8.23. Se hizo con el siguiente comando:</p> <pre><code>$ sudo gem update --system 1.8.23\n</code></pre>"},{"location":"desarrollo/ror.html#solucion-a-error-could-not-find-rake-1004-in-any-of-the-sources-con-passenger","title":"Soluci\u00f3n a error \"Could not find rake-10.0.4 in any of the sources\" con Passenger","text":"<p>En el alojamiento de DinaHosting, al ejecutar por primera vez una aplicaci\u00f3n Ruby ejecutada con Passport, se produce el error siguiente:</p> <pre><code>Could not find rake-10.0.4 in any of the sources\n</code></pre> <p>Instalando las gemas en el home del usuario se soluciona el error:</p> <pre><code>$ bundle install --deployment\n</code></pre> <p>Esto instala las gem's en el directorio <code>vendor/bundle</code>.</p>"},{"location":"desarrollo/ror.html#especificar-entorno","title":"Especificar entorno","text":"<p>Para especificar el entorno en una tarea <code>rake</code> a\u00f1adir al final de la orden <code>RAILS_ENV=&lt;entorno&gt;</code>. Por ejemplo para desarrollo:</p> <pre><code>$ bundle exec rake routes RAILS_ENV=development\n</code></pre> <p>Con el script <code>rails</code>, depende. Si se quiere arrancar la consola a\u00f1adir al final el entorno sin m\u00e1s. Por ejemplo para desarrollo:</p> <pre><code>$ bundle exec rails c development\n</code></pre> <p>Si se quiere arrancar el servidor Webrick a\u00f1adir el entorno por medio de la opci\u00f3n <code>-e</code>. Por ejemplo para desarrollo:</p> <pre><code>$ bundle exec rails s -e development\n</code></pre>"},{"location":"desarrollo/ror.html#desinstalacion-de-todas-las-gems","title":"Desinstalaci\u00f3n de todas las gems","text":"<p>Con el siguiente comando:</p> <pre><code>$ gem list | cut -d\" \" -f1 | xargs gem uninstall -aIx\n</code></pre> <p>Posteriormente habr\u00e1 que volver a instalar Bundler y el resto de gems. Para ello:</p> <pre><code>$ sudo gem install bundler\n$ cd &lt;proyecto&gt;\n$ bundle install\n</code></pre>"},{"location":"desarrollo/ror.html#pluralessingulares-de-resources","title":"Plurales/Singulares de resources","text":"<p>Recurso de tipo colecci\u00f3n dentro de un namespace:</p> Elemento Plural/Singular Ejemplo Tabla en base de datos Plural spree_posts Clase del modelo Singular Spree::Post Fichero del modelo Singular spree/post.rb Clase del controlador Plural Spree::PostsController Fichero del controlador Plural spree/posts_controller.rb rails generator Singular rails g resource spree/post title:string body:text Ruta en config/routes.rb Plural resources :posts Directorio en views Plural spree/posts"},{"location":"desarrollo/ror.html#ejecutar-una-version-concreta-de-rails","title":"Ejecutar una versi\u00f3n concreta de rails","text":"<p>Si tenemos instaladas varias versiones del gem de rails, para forzar que se utilice el script <code>rails</code> de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma:</p> <pre><code>$ rails _3.2.13_ -v\n</code></pre> <p>De forma que si por ejemplo queremos generar un nuevo proyecto con la versi\u00f3n 3.2.13 haremos:</p> <pre><code>$ rails _3.2.13_ new nueva_app\n</code></pre>"},{"location":"desarrollo/ror.html#ejecutar-una-version-concreta-de-spree","title":"Ejecutar una versi\u00f3n concreta de spree","text":"<p>Si tenemos instaladas varias versiones del gem de spree, para forzar que se utilice el script <code>spree</code> de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma:</p> <pre><code>$ spree _1.3.3_ -v\n</code></pre> <p>De forma que si por ejemplo queremos hacer la instalaci\u00f3n dentro de una aplicaci\u00f3n rails nueva con la versi\u00f3n 1.3.3 de Spree haremos:</p> <pre><code>$ spree _1.3.3_ install\n</code></pre>"},{"location":"desarrollo/ror.html#diagramas-erd","title":"Diagramas ERD","text":"<p>A continuaci\u00f3n se indica el comando para obtener una serie de diagramas ERD interesantes. La documentaci\u00f3n de todos los par\u00e1metros de ERD est\u00e1 aqu\u00ed.</p> <p>Modelado de producto en Spree:</p> <pre><code>$ bundle exec rake erd attributes=foreign_keys only=\"Spree::Product,Spree::OptionType,Spree::OptionValue,Spree::Variant,Spree::ProductOptionType\" title='Productos'\n</code></pre>"},{"location":"desarrollo/spree.html","title":"Spree","text":""},{"location":"desarrollo/spree.html#enlaces","title":"Enlaces","text":"<ul> <li>Getting Started with Spree</li> <li>Spree 1.1 Deployment on Heroku</li> <li>How To: Add A Custom Model to Your Spree App</li> <li>The Spree API Documentation :exclamation:</li> <li>How to Optimize Your Spree Store for Search Engines</li> <li>Crear extensi\u00f3n Spree</li> <li>Tracking E-commerce With Google Analytics :exclamation:</li> </ul>"},{"location":"desarrollo/spree.html#hilos-interesantes-google-group","title":"Hilos interesantes Google Group","text":"<ul> <li>Add custom admin controller and use custom code inside controller</li> <li>Do something when state order change to completed</li> <li>Changing /products path and linking to individual products</li> <li>Upgrading Extensions to Spree 2</li> <li>Rich text in product description: Instalaci\u00f3n de CKEditor para que se use en todos los texarea de la administraci\u00f3n de Spree.</li> <li>Remove /t/ from uri</li> </ul>"},{"location":"desarrollo/spree.html#extensiones-interesantes","title":"Extensiones interesantes","text":"<ul> <li>Static Content: Content management of static pages for Spree. Para p\u00e1ginas como About, T\u00e9rminos legales, etc. (en Github) :exclamation:</li> <li>Related Products: This extension provides a generic way for you to define different types of relationships between your products, by defining a RelationType for each type of relationship you\u2019d like to maintain. (en Github) :exclamation:</li> <li>Spree Variant Options: Spree Variant Options replaces the radio-button variant selection with groups of option types and values. (en Github) :exclamation:</li> <li>SpreeEditor: This extension provides an inline rich-text editor for Spree.</li> <li>Spree Simple Blog: Adds a simple blog to Spree which works much like Toto.</li> <li>Spree Reviews: Straightforward review/rating facility.</li> <li>Spree Wishlist: The Spree Wishlist extension enables multiple wishlists per user, as well as managing those as public (sharable) and private. It also includes the ability to notify a friend via email of a recommended product. :exclamation:</li> <li>Spree Email to Friend: The Spree Email to Friend extension enables you to send the product reference to your friend via email. :exclamation:</li> <li>Google Checkout: Users can place order through Google Checkout.</li> <li>Spree Sitemaps: This extension creates sitemaps in .html, .txt, and .xml (google sitemap) formats.</li> <li>Spree_Videos: Display YouTube video(s) on your product page. (en Github)</li> <li>SpreeProductZoom: A Spree extension that adds lightbox zoom functionality for product images powered by fancyBox. (en Github)</li> <li>Sitemap Generator: Spree sitemap generator is a sitemap generator based on the sitemap_generator gem. It adheres to the Sitemap 0.9 protocol specification. (en Github)</li> <li>Spree Google Merchant: This extension provides a product feed for Google Merchant rather than a file that you have to upload. (en Github)</li> <li>spree-magiczoomplus: Adds MagicZoomPlus to Spree store. (en Github)</li> <li>Spree Social Bookmarks: This extension allows you to add social bookmarking to your products so your customers can share pages. (en Github)</li> <li>Spree Volume Pricing: This extension uses predefined ranges of quantities to determine the price for a particular product variant. (en Github)</li> <li>Active Shipping: Spree calculator that interfaces with USPS, UPS and FedEx via the popular active_shipping plugin. (en Github)</li> <li>Payment Methods With Range: This extensions allow declaring payment methods only available for a certain order amount. (en Github)</li> <li>Print Invoice: Generaci\u00f3n de facturas en PDF en el backend. (en Github)</li> <li>Product Assembly: Create a product which is composed of other products.</li> <li>SpreeBootstrap: This project aims to replace the spree_frontend's use of the skeleton css framework in favor of Twitter Bootstrap.</li> <li>SpreeContactUs: A Rails 3+ Engine providing a basic contact form as a Spree Extension.</li> </ul>"},{"location":"desarrollo/spree.html#instalacion-en-ubuntu","title":"Instalaci\u00f3n en Ubuntu","text":"<p>A los paquetes necesarios para la instalaci\u00f3n de Rails hay que a\u00f1adir:</p> <ul> <li><code>libxml2-dev</code></li> <li><code>libxslt1-dev</code></li> <li><code>git</code></li> </ul>"},{"location":"desarrollo/spree.html#tips","title":"Tips","text":""},{"location":"desarrollo/spree.html#override-de-preferencias","title":"Override de preferencias","text":"<p>Crear el fichero <code>config/initializers/spree_config.rb</code> y hacer un set de las propiedades. Por ejemplo:</p> <pre><code>#encoding: utf-8\nSpree::Config.set(logo: \"store/myapp_logo.png\")\nSpree::Config.set(site_name: 'MyApp')\nSpree::Config.set(currency: 'EUR')\nSpree::Config.set(currency_symbol_position: 'after')\nSpree::Config.set(default_meta_description: 'MyApp')\nSpree::Config.set(default_meta_keywords: 'mis palabras clave')\n</code></pre> <p>Todas las preferencias posibles est\u00e1n definidas en el fichero <code>core/app/models/spree/app_configuration.rb</code>.</p> <p>Las preferencias ajustadas de esta forma acaban en la base de datos en la tabla <code>spree_preferences</code>. Si se quita alguna de las lineas anteriores, hay que eliminar el registro correspondiente para que deje de hacer efecto. En ocasiones no es suficiente con esto, ya que tambi\u00e9n puede influir el hecho de que algunas queries son cacheadas. En ese caso hay que borrar el directorio <code>tmp/cache</code>.</p>"},{"location":"desarrollo/spree.html#actualizacion-de-version","title":"Actualizaci\u00f3n de versi\u00f3n","text":"<p>Cuando aparezca una nueva versi\u00f3n de Spree y se quiera actualizar hay que proceder como sigue:</p> <pre><code>$ bundle update spree\n$ bundle exec rake railties:install:migrations\n$ bundle exec rake db:migrate\n</code></pre>"},{"location":"desarrollo/spree.html#tareas-rake","title":"Tareas \"rake\"","text":"<ul> <li><code>bundle exec rake assets:precompile:nondigest</code>: Mejora el rendimiento en el entorno de desarrollo a costa de no refrescar en tiempo real los cambios en los assets.</li> <li><code>bundle exec rake assets:clean</code>: Borra el directorio <code>public/assets</code>.</li> <li><code>bundle exec rake assets:precompile</code>: Reconstruye el directorio <code>public/assets</code>.</li> <li><code>bundle exec rake spree_auth:admin:create</code>: Crea un usuario administrador.</li> <li><code>bundle exec rake spree_sample:load</code>: Cargar los datos de ejemplo. Exige ejecutar previamente <code>bundle exec rake db:seed</code></li> </ul>"},{"location":"desarrollo/spree.html#instalacion-de-version-20","title":"Instalaci\u00f3n de versi\u00f3n 2.0","text":"<p>El instalador de las \u00faltimas versiones no es del todo redondo (al menos en el momento de escribir esto) y da algunos errores. Para superarlos hay que proceder como sigue.</p> <p>Ejecutar en consola lo siguiente:</p> <pre><code>$ rails new spapp\n</code></pre> <p>Modificamos la linea de la gem <code>jquery-rails</code> poniendo:</p> <pre><code>gem 'jquery-rails', '~&gt; 2.2.1'\n</code></pre> <p>Ejecutamos:</p> <pre><code>$ cd spapp\n$ spree install\n</code></pre> <p>Decimos \"yes\" a todas las preguntas. Cuando termine volvemos a modificar Gemfile sustituyendo las versiones de las gems de Spree que ha a\u00f1adido el script por las siguientes:</p> <pre><code>gem 'spree', :github =&gt; 'spree/spree', :branch =&gt; '2-0-stable'\ngem 'spree_gateway', :github =&gt; 'spree/spree_gateway', :branch =&gt; '2-0-stable'\ngem 'spree_auth_devise', :github =&gt; 'spree/spree_auth_devise', :branch =&gt; '2-0-stable'\n</code></pre> <p>Finalmente de nuevo ejecutamos:</p> <pre><code>$ bundle install\n</code></pre>"},{"location":"desarrollo/spree.html#configuracion-para-enviar-correos","title":"Configuraci\u00f3n para enviar correos","text":"<p>Hay dos formas:</p> <ol> <li>Configurando directamente el ActionMailer por c\u00f3digo</li> <li>Usando el override que permite configurar el ActionMailer en el backend</li> </ol> <p>Para el primer tipo empezamos poniendo las siguientes preferencias en el fichero <code>config/initializers/spree.rb</code>:</p> <pre><code>config.override_actionmailer_config = false\nconfig.mails_from = \"origen@mail.com\"\n</code></pre> <p>Luego a\u00f1adimos lo siguiente en el fichero de configuraci\u00f3n del entorno, por ejemplo en development ser\u00eda <code>config/environments/development.rb</code>:</p> <pre><code>config.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\n  address:              'smtp.gmail.com',\n  port:                 587,\n  domain:               'gmail.com',\n  user_name:            'user_id',  # No es necesario poner @gmail.com\n  password:             'password',\n  authentication:       'plain',\n  enable_starttls_auto: true  }\n</code></pre> <p>En teor\u00eda con esto ser\u00eda suficiente, pero en las primeras pruebas hechas, s\u00f3lo funcion\u00f3 con la versi\u00f3n 2.5.3 de la gem <code>mail</code>, por lo que hubo que especificarla en el Gemfile:</p> <pre><code>gem 'mail', '2.5.3'\n</code></pre> <p>La \u00faltima versi\u00f3n de <code>mail</code> es la 2.5.4 que ser\u00e1 la que normalmente est\u00e9 instalada. Para hacer el downgrade hay que ejecutar desde el directorio de nuestro proyecto:</p> <pre><code>$ bundle update mail\n</code></pre> <p>En posteriores versiones de las gemas ya funcionaba con la versi\u00f3n 2.5.4 de <code>mail</code> por lo que dej\u00f3 de ser necesario hacer este apa\u00f1o.</p> <p>Para el segundo tipo de configuraci\u00f3n empezamos poniendo las siguientes preferencias en el fichero <code>config/initializers/spree.rb</code>:</p> <pre><code>config.override_actionmailer_config = true\nconfig.mails_from = \"origen@mail.com\"\n</code></pre> <p>Como siempre que se tocan las preferencias, hay que vigilar si ya existe versi\u00f3n de la misma en la tabla <code>spree_preferences</code> y si est\u00e1 la consulta a esta tabla cacheada, por lo que habr\u00e1 que borrar el directorio <code>tmp/cache</code>.</p> <p>Luego deberemos acudir en el backend a la siguiente ruta: \"Configuraciones / Preferencias m\u00e9todos de email\". Hay que tener en cuenta que este grupo de opciones s\u00f3lo aparece si la opci\u00f3n <code>override_actionmailer_config</code> tiene el valor true. A continuaci\u00f3n se muestran pantallazos de un par de configuraciones que se ha probado que funcionan:</p> <p></p> <p></p>"},{"location":"desarrollo/spree.html#configuracion-segun-entorno","title":"Configuraci\u00f3n seg\u00fan entorno","text":"<p>Si queremos ajustar algunas preferencias en el initializer <code>config/initializers/spree.rb</code> de manera que su valor dependa del environment, podemos hacer lo siguiente:</p> <pre><code>Spree.config do |config|\n  if Rails.env.production?\n    config.mail_port = 1025\n    # other configs ..\n  else\n    config.mail_port = 25\n    # other configs ..\n  end\nend\n</code></pre>"},{"location":"desarrollo/spree.html#resetear-base-de-datos","title":"Resetear base de datos","text":"<p>Si queremos comenzar de nuevo en lo que respecta a la base de datos, se puede hacer f\u00e1cilmente con el siguiente comando:</p> <pre><code>$ bundle exec rake db:reset\n</code></pre> <p>A nivel de ficheros habr\u00e1 que hacer la limpieza a mano. En el Spree b\u00e1sico, como m\u00ednimo habr\u00eda que borrar el directorio <code>rails_root/public/spree/products</code>.</p>"},{"location":"desarrollo/subl.html","title":"Sublime Text 2","text":""},{"location":"desarrollo/subl.html#ajustes","title":"Ajustes","text":""},{"location":"desarrollo/subl.html#indentado-con-2-espacios","title":"Indentado con 2 espacios","text":"<p>A\u00f1adir las siguientes dos l\u00edneas al <code>Preferences / Settings - User</code> (fichero <code>~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings</code>):</p> <pre><code>{\n...\n  \"tab_size\": 2,\n  \"translate_tabs_to_spaces\": true\n...\n}\n</code></pre>"},{"location":"desarrollo/subl.html#ocultar-el-minimap","title":"Ocultar el MiniMap","text":"<p>A\u00f1adir la siguiente l\u00ednea al <code>Preferences / Settings - User</code> (fichero <code>~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings</code>):</p> <pre><code>{\n...\n  \"show_minimap\": false\n...\n}\n</code></pre>"},{"location":"desarrollo/subl.html#extensiones","title":"Extensiones","text":"<ul> <li>EncodingHelper</li> </ul>"},{"location":"desarrollo/svn.html","title":"SVN","text":""},{"location":"desarrollo/svn.html#diferencia-entre-dos-revisiones-distintas-n-y-m-del-mismo-fichero-con-ruta-path","title":"Diferencia entre dos revisiones distintas (N y M) del mismo fichero (con ruta <code>Path</code>)","text":"<pre><code>$ svn diff -r N:M Path\n</code></pre>"},{"location":"desarrollo/svn.html#limpiar-meta-informacion-svn-en-una-copia-de-trabajo","title":"Limpiar meta-informaci\u00f3n SVN en una copia de trabajo","text":"<pre><code>$ rm -rf `find . -type d -name .svn`\n</code></pre> <p>En algunos sistemas lo anterior no funciona bien si los directorios tienen espacios en el nombre. Usar en este caso:</p> <pre><code>$ find . -type d -name .svn -exec rm -rf '{}' \\;\n</code></pre>"},{"location":"desarrollo/svn.html#informacion-sobre-la-copia-de-trabajo","title":"Informaci\u00f3n sobre la copia de trabajo","text":"<pre><code>$ svn info\n</code></pre>"},{"location":"desarrollo/svn.html#redireccionar-una-copia-de-trabajo-tras-movimiento-de-repositorio","title":"Redireccionar una copia de trabajo tras movimiento de repositorio","text":"<pre><code>$ svn switch --relocate FROM TO [Path copia trabajo]\n</code></pre> <p>Por ejemplo:</p> <pre><code>edumoreno@walqa347:~/NetBeansProjects/MobileDesktopDemo$ svn switch --relocate svn+ssh://eduardo.moreno@172.22.1.63/var/lib/subversion/ims/MobileDesktopDemo  svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/MobileDesktopDemo .\n</code></pre>"},{"location":"desarrollo/svn.html#creacion-de-un-proyecto-nuevo-en-un-repositorio","title":"Creaci\u00f3n de un proyecto nuevo en un repositorio","text":"<p>Vamos a mostrarlo con el ejemplo del proyecto <code>CCM</code> dentro de la ruta <code>svn.servidor.com/var/lib/subversion/ims</code>, siendo la ruta de la copia de trabajo <code>/home/edumoreno/NetBeansProjects/CCM</code>.</p> <pre><code>$ svn mkdir svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Creaci\u00f3n directorio.\"\n</code></pre> <p>Antes de hacer el import ser\u00eda interesante eliminar o mover los directorios o ficheros que no se desea que se sincronicen con el repositorio. Por ejemplo, en el caso de un proyecto NetBeans, \u00e9stos son:</p> <ul> <li><code>CCM/build</code></li> <li><code>CCM/dist</code></li> <li><code>CCM/nbproject/private</code></li> </ul> <p>Una vez eliminados o movidos hacemos el import:</p> <pre><code>$ cd /home/edumoreno/NetBeansProjects/CCM\n$ svn import . svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Import inicial.\"\n</code></pre> <p>Ahora habr\u00eda que hacer un checkout de lo que se ha subido para obtener la meta-informaci\u00f3n del repositorio:</p> <pre><code>$ cd /home/edumoreno/NetBeansProjects\n$ rm -rf CCM\n$ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/\n</code></pre> <p>Finalmente hay que hacer ajustes para que se ignoren los siguientes directorios del nuevo repositorio:</p> <ul> <li>build</li> <li>dist</li> <li>nbproject/private</li> </ul> <p>Esto en teor\u00eda se puede hacer con los siguientes comandos, pero aun no se ha probado:</p> <pre><code>$ cd /home/edumoreno/NetBeansProjects/CCM\n$ svn propset svn:ignore 'build\ndist' .\n$ svn propset svn:ignore 'private' nbproject/\n$ svn commit -m \"Ignoramos una serie de directorios del proyecto.\"\n</code></pre> <p>(Nota: El retorno de carro que hay al final del primer comando <code>svn propset</code> es intencionado)</p> <p>Si por alg\u00fan motivo los directorios hubieran entrado por descuido en el repositorio, habr\u00eda que borrarlos tanto en el servidor como en local, ya que aunque se haya establecido la propiedad svn:ignore, se seguir\u00edan sincronizando:</p> <pre><code>$ svn delete build\n$ svn delete dist\n$ svn delete nbproject/private\n$ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/build\n$ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/dist\n$ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/nbproject/private\n$ svn commit -m \"Eliminamos una serie de directorios del proyecto.\"\n</code></pre>"},{"location":"desarrollo/svn.html#creacion-de-un-branch","title":"Creaci\u00f3n de un branch","text":"<p>Para crear el branch simplemente hay que hacer una copia del trunk sin salir del repositorio. Para ello utilizar el siguiente comando:</p> <pre><code>$ svn copy -m \"Creaci\u00f3n de branch b1_svg.\" svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/trunk/ svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/\n</code></pre> <p>Luego si se desea trabajar en el branch reci\u00e9n creado habr\u00e1 que bajar una copia de trabajo con el comando siguiente:</p> <pre><code>edumoreno@walqa347:~$ cd ~/NetBeansProjects/\nedumoreno@walqa347:~/NetBeansProjects$ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ CCM_b1_svg\n</code></pre>"},{"location":"desarrollo/svn.html#merge-con-el-trunk","title":"Merge con el trunk","text":"<p>Cuando llegue el momento de hacer el merge, habr\u00e1 que proceder de la siguiente forma. Como punto de partida necesitaremos una copia de trabajo del trunk:</p> <p>Averiguamos la revisi\u00f3n en que construimos el branch. Esto se puede conseguir haciendo un log con la opci\u00f3n <code>--stop-on-copy</code> (que detiene la salida del comando en cuanto se detecta que la rama fue copiada o renombrada). As\u00ed, la entrada m\u00e1s antigua muestra lo que buscamos:</p> <pre><code>$ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/|tail\n</code></pre> <p>Averiguamos la \u00faltima revisi\u00f3n que contiene cambios en el branch:</p> <pre><code>$ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/|head\n</code></pre> <p>Nos situamos en el directorio de la copia de trabajo correspondiente al trunk y hacemos <code>update</code>:</p> <pre><code>edumoreno@walqa347:~$ cd ~/NetBeansProjects/CCM\nedumoreno@walqa347:~/NetBeansProjects/CCM$ svn update\n</code></pre> <p>Antes de hacer el <code>merge</code> se puede simular, es decir, lanzarlo sin que aplique los cambios y que s\u00f3lo muestre lo que va a hacer, incorporando la opci\u00f3n <code>--dry-run</code>. El comando ser\u00eda:</p> <pre><code>$ svn merge --dry-run -r 549:634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/\n</code></pre> <p>Una vez que estemos seguros hacemos el <code>merge</code> indicando la release inicial del branch como origen del intervalo de releases:</p> <pre><code>$ svn merge -r 549:634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/\n</code></pre> <p>Resolvemos manualmente los conflictos que inevitablemente existir\u00e1n.</p> <p>Hacemos el commit en el trunk de los cambios del branch reci\u00e9n incorporados:</p> <pre><code>$ svn commit -m \"Merge de los cambios r549:634 del branch 'b1_svg' sobre el trunk.\"\n</code></pre>"},{"location":"desarrollo/svn.html#analisis-de-diferencias-ante-un-conflicto","title":"An\u00e1lisis de diferencias ante un conflicto","text":"<p>Para listar los ficheros que tienen conflictos:</p> <pre><code>$ svn status|grep \"^C\"\n</code></pre> <p>Para listar los ficheros diferenciales de un conflicto:</p> <pre><code>$ ls -l &lt;fichero_base&gt;*\n</code></pre> <p>La interpretaci\u00f3n de los sufijos que se a\u00f1aden a los ficheros es (siendo MMMM la release de creaci\u00f3n del branch y NNNN la del momento del merge):</p> <ul> <li><code>&lt;fichero_base&gt;</code>: Fichero de merge</li> <li><code>&lt;fichero_base&gt;.copia-de-trabajo</code>: \u00daltima versi\u00f3n de la copia destino del merge (normalmente el trunk)</li> <li><code>&lt;fichero_base&gt;.derecha-fusion.rNNNN</code>: \u00daltima versi\u00f3n de la copia origen del merge (normalmente el branch)</li> <li><code>&lt;fichero_base&gt;.izquierda-fusion.rMMMM</code>: Versi\u00f3n com\u00fan a ambas ramas, es decir, el punto del tiempo en que empezaron a diferenciarse</li> </ul> <p>Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama destino (normalmente el trunk):</p> <pre><code>$ diff &lt;fichero_base&gt;.izquierda-fusion.rMMMM &lt;fichero_base&gt;.copia-de-trabajo\n</code></pre> <p>Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama origen (normalmente el branch):</p> <pre><code>$ diff &lt;fichero_base&gt;.izquierda-fusion.rMMMM &lt;fichero_base&gt;.derecha-fusion.rNNNN\n</code></pre>"},{"location":"desarrollo/svn.html#borrado-de-la-rama","title":"Borrado de la rama","text":"<p>Si una vez hecho el merge no se va a continuar trabajando en el branch, se puede considerar su borrado. Esto se hace con la simple orden siguiente:</p> <pre><code>$ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/\n</code></pre>"},{"location":"desarrollo/vagrant.html","title":"Vagrant","text":""},{"location":"desarrollo/vagrant.html#instalacion","title":"Instalaci\u00f3n","text":"<p>Instalar VirtualBox de la distribuci\u00f3n (<code>virtualbox</code> en Ubuntu) y bajar el instalable de Vagrant de su sitio web.</p>"},{"location":"desarrollo/vagrant.html#creacion-de-entorno","title":"Creaci\u00f3n de entorno","text":"<p>Desde el directorio ra\u00edz de nuestro proyecto de desarrollo, ejecutar:</p> <pre><code>$ vagrant init\n</code></pre> <p>Esto crea el fichero <code>Vagrantfile</code> que mantendr\u00e1 la configuraci\u00f3n de nuestro entorno. Este fichero conviene incluirlo en el control de versiones.</p> <p>Modificamos el fichero <code>Vagrantfile</code> para que use la m\u00e1quina que nos interesa. En el ejemplo vamos a usar <code>ubuntu/xenial64</code> (consultar aqu\u00ed el cat\u00e1logo completo de m\u00e1quinas).</p> <pre><code>Vagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/xenial64\"\nend\n</code></pre> <p>Cuando se levante por primera el entorno configurado en el <code>Vagrantfile</code> se bajar\u00e1 la m\u00e1quina. Si queremos adelantar este proceso podemos bajar la m\u00e1quina con el siguiente comando:</p> <pre><code>$ vagrant box add ubuntu/xenial64\n</code></pre> <p>Ahora ya podemos levantar el entorno y conectar con \u00e9l:</p> <pre><code>$ vagrant up\n$ vagrant ssh\n</code></pre> <p>El comando <code>vagrant ssh</code> automatiza una conexi\u00f3n ssh cuyos par\u00e1metros manuales se pueden obtener ejecutando el comando <code>vagrant ssh-config</code>. Por ejemplo, una conexi\u00f3n manual podr\u00eda lograrse a partir de los siguientes resultados as\u00ed:</p> <pre><code>$ vagrant ssh-config\nHost default\n  HostName 127.0.0.1\n  User ubuntu\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile /home/edumoreno/git/django_test/.vagrant/machines/default/virtualbox/private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n$ ssh -i /home/edumoreno/git/django_test/.vagrant/machines/default/virtualbox/private_key -p 2222 ubuntu@127.0.0.1\n</code></pre> <p>Tal y como se indica en el log del arranque de la m\u00e1quina (durante el <code>vagrant up</code>), el directorio del proyecto de la m\u00e1quina host se monta sobre <code>/vagrant</code> de la m\u00e1quina guest:</p> <pre><code>==&gt; default: Mounting shared folders...\n    default: /vagrant =&gt; /home/edumoreno/git/niubit_lms\n</code></pre>"},{"location":"desarrollo/vagrant.html#provision-de-componentes","title":"Provisi\u00f3n de componentes","text":"<p>Por ejemplo vamos a configurar la instalaci\u00f3n de un entorno Python3/Django. La m\u00e1quina que hemos instalado (<code>ubuntu/xenial64</code>) viene con Python3 preinstalado. Vamos a instalar Django de forma controlada con Vagrant para que pueda reproducir esa instalaci\u00f3n de forma autom\u00e1tica si creamos este entorno en otro lugar. Para ello escribimos un script que luego integramos en el <code>Vagrantfile</code> de la siguiente forma:</p> <pre><code>Vagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/xenial64\"\n  config.vm.provision \"shell\", inline: &lt;&lt;-SHELL\n    #!/usr/bin/env bash\n    apt-get update\n    apt-get install -y python3-pip\n    pip3 install Django\n  SHELL\nend\n</code></pre> <p>Si no hab\u00edamos arrancado la m\u00e1quina todav\u00eda, el script se ejecutar\u00e1 en el primer arranque. Si ya lo hab\u00edamos hecho habr\u00e1 que decirle a Vagrant que ejecute la configuraci\u00f3n de provisioning:</p> <pre><code>$ vagrant reload --provision\n</code></pre> <p>En caso de tener que ejecutar muchos scripts o ser muy grandes, tal vez sea mejor escribirlos en archivos separados que luego se pueden referenciar en el <code>Vagrantfile</code> de esta forma (tal y como est\u00e1 en el ejemplo, el script <code>script.sh</code> deber\u00e1 estar en la misma ruta que el <code>Vagrantfile</code>):</p> <pre><code>Vagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/xenial64\"\n  config.vm.provision :shell, path: \"script.sh\"\nend\n</code></pre>"},{"location":"desarrollo/vagrant.html#redireccion-de-puertos","title":"Redirecci\u00f3n de puertos","text":"<p>Aparte del acceso SSH que se consigue f\u00e1cilmente a trav\u00e9s del comando <code>vagrant ssh</code> como hemos visto, ser\u00e1 habitual que necesitemos otro tipo de accesos por red hacia la m\u00e1quina virtual. Por ejemplo en el caso de que estemos desarrollando una aplicaci\u00f3n web necesitaremos redireccionar el puerto que sirva la m\u00e1quina virtual. Por ejemplo, si queremos redireccionar el puerto 8000 de la m\u00e1quina virtual hacia la host, deberemos a\u00f1adir la siguiente l\u00ednea al bloque de configuraciones del <code>Vagrantfile</code>:</p> <pre><code>  config.vm.network :forwarded_port, guest: 8000, host: 8000\n</code></pre> <p>Tras ello hay que ejecutar <code>vagrant reload</code> o <code>vagrant up</code> dependiendo de si la m\u00e1quina virtual est\u00e1 arrancada o parada. En Vagrant hay muchas m\u00e1s posibilidades para configurar la red adem\u00e1s del nat que acabamos de hacer. Todas estas posibilidades se describen aqu\u00ed.</p> <p>Para Python/Django</p> <p>En caso de querer acceder al miniservidor que se ejecuta con <code>python manage.py runserver</code>, adem\u00e1s de la redirecci\u00f3n del puerto (precisamente se usa el 8000 de forma predeterminada), tal y como se explica aqu\u00ed, hay que lanzar el miniservidor especificando que se escucha cualquier interfaz de la m\u00e1quina (por defecto se escucha s\u00f3lo el interfaz de loopback) ejecutando as\u00ed:</p> <pre><code>python manage.py runserver 0.0.0.0:8000\n</code></pre>"},{"location":"desarrollo/vr.html","title":"VR","text":""},{"location":"desarrollo/vr.html#enlaces","title":"Enlaces","text":"<ul> <li>Documentaci\u00f3n, APIs:<ul> <li>three.js</li> <li>The Immersive Web Working Group/Community Group</li> <li>OpenXR</li> </ul> </li> <li>Tutoriales:<ul> <li>Getting Started With WebXR</li> </ul> </li> </ul>"},{"location":"desarrollo/vr.html#web-apps","title":"Web Apps","text":"<ul> <li>Moonrider: Similar a Beat Saber.</li> </ul>"},{"location":"desarrollo/vscode.html","title":"VSCode / VSCodium","text":""},{"location":"desarrollo/vscode.html#preferencias","title":"Preferencias","text":"<ul> <li><code>explorer.autoReveal</code>: false  # No resaltar el archivo en el explorador al abrirlo.</li> <li><code>editor.tabSize</code>: 4  # Tama\u00f1o de tabulaci\u00f3n.</li> <li><code>editor.fontFamily</code>: \"'IntelOne Mono', 'Droid Sans Mono', 'monospace', monospace\"  # Instalar antes intel-one-mono.</li> <li><code>files.trimTrailingWhitespace</code>: true  # Eliminar espacios en blanco al final de las l\u00edneas.</li> </ul>"},{"location":"desarrollo/yii.html","title":"Yii Framework","text":""},{"location":"desarrollo/yii.html#enlaces","title":"Enlaces","text":"<ul> <li>A probar cuando tenga un error :exclamation:</li> <li>Creating a dependent dropdown</li> <li>Search() &amp; Filter of a relations field through CGridView</li> <li>Handling Related Models in Yii Forms</li> <li>Learning Yii Framework Series</li> <li>Yii for beginners</li> <li>How to Change datetime format displayed on the View</li> <li>Tabla Master Detail en Yii GridView de Yii Framework</li> <li>Dynamic parent and child CGridCiew on single view. Using $.ajax to update child gridview via controller (with MANY_MANY relation), after row in parent gridview was clicked</li> <li>Search CGridView, related tables, dates and datepicker</li> <li>Yii Framework en Espa\u00f1ol - Foro</li> <li>Multimodelform dropdown con Ajax Ejecutar acci\u00f3n en multimodelform con dropdown</li> <li>Usando Ajax en Yii, Facil</li> <li>Class Level Methods vs Static Methods</li> <li>Accessing data in a join table with the related models (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional)</li> <li>Selecting join table with mant to many? (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional)</li> <li>Special $variables in CGridView and CListView</li> <li>Custom Page Size for CGridView</li> <li>Using CButtonColumn to customize buttons in CGridView</li> <li>Understanding Virtual Attributes and get/set methods :exclamation:</li> <li>Using standard filters in CGridView custom fields</li> <li>Searching and sorting by related model in CGridView :exclamation:</li> <li>Reference: Model rules validation :exclamation:</li> <li>Displaying, sorting and filtering HasMany &amp; ManyMany relations in CGridView :exclamation:</li> <li>Tutorial Yii Framework<ul> <li>1. INSTALANDO YII Y PRIMERA APLICACI\u00d3N</li> <li>2. CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS</li> <li>3. LENGUAJE Y VISTA POR DEFECTO</li> <li>4. MODIFICANDO EL MEN\u00da</li> <li>5. AUTENTICACI\u00d3N DE USUARIOS</li> <li>6. CLAVES FOR\u00c1NEAS EN VISTAS</li> <li>7. VALIDANDO LOS FORMULARIOS</li> <li>8. ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID</li> <li>9. FECHAS CON CJUIDATEPICKER</li> <li>10. B\u00daSQUEDAS POR FECHAS CON SYDATECOLUMN</li> <li>11. EXPORTAR DEL CGRIDVIEW A PDF</li> <li>12. REPORTES A PARTIR DE UNA B\u00daSQUEDA EN EL GRID</li> <li>13. COMBOS DEPENDIENTES</li> <li>14. CAMPO CON AUTOCOMPLETAR</li> <li>15. NO MOSTRAR INDEX.PHP EN LAS URL</li> <li>16. GUARDAR AUTOM\u00c1TICAMENTE USUARIO Y FECHA DE CREACI\u00d3N Y MODIFICACI\u00d3N</li> <li>17. HACER FORMULARIO PARA MULTIPLES MODELOS</li> <li>18. CAMPOS ENMASCARADOS EN FORMULARIO</li> </ul> </li> </ul>"},{"location":"desarrollo/yii.html#extensiones","title":"Extensiones","text":"<ul> <li>bootstrap: Bootstrap brings together Yii and Bootstrap, Twitter's HTML, CSS and JavaScript toolkit.</li> <li>eupdatedialog: EUpdateDialog is an extension for Yii framework that allows to run controller actions using jQuery UI dialog.</li> <li>multimodelform: This extension allows to work with multiple records and different models in a edit form.</li> <li>enexmo: ENexmo Library allows Yii programmers to use the Restful API offered by Mobile Messaging provider Nexmo.</li> <li>ejuitimepicker: This extension is a wrapper for Timepicker addon which adds a timepicker to jQuery UI Datepicker.</li> <li>datetimepicker: Datetime picker input widget, based on Jui-timepicker-addon.</li> <li>Envio email con Emailer</li> <li>A module to build dependents dropdown</li> <li>save-relations-ar-behavior: Save HasMany and ManyMany relational active records along with the main model.</li> </ul>"},{"location":"desarrollo/yii.html#know-how","title":"Know How","text":""},{"location":"desarrollo/yii.html#instalacion","title":"Instalaci\u00f3n","text":""},{"location":"desarrollo/yii.html#apache","title":"Apache","text":"<p>Para ocultar el script de inicio (<code>index.php</code>) de la URL se puede configurar un fichero <code>.htaccess</code> como sigue:</p> <pre><code>RewriteEngine on\n\n# if a directory or a file exists, use it directly\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\n# otherwise forward it to index.php\nRewriteRule . index.php\n</code></pre>"},{"location":"desarrollo/yii.html#fundamentos","title":"Fundamentos","text":""},{"location":"desarrollo/yii.html#development-mode","title":"Development mode","text":"<p>En el fichero index.php el modo DEBUG se ajusta en la linea siguiente:</p> <pre><code>&lt;?php\ndefined('YII_DEBUG') or define('YII_DEBUG',true);\n</code></pre> <p>Ponerlo a <code>false</code> en Producci\u00f3n (fuente).</p> <p>El componente <code>log</code> admite como una de las rutas de log la clase <code>CWebLogRoute</code> que muestra un log detallado de la ejecuci\u00f3n de la p\u00e1gina en la parte inferior de la misma. Para activarlo incluir la clase en el array de <code>routes</code> del componente <code>log</code>, por ejemplo:</p> <pre><code>&lt;?php\n'log'=&gt;array(\n        'class'=&gt;'CLogRouter',\n        'routes'=&gt;array(\n                array(\n                        'class'=&gt;'CFileLogRoute',\n                        'levels'=&gt;'error, warning',\n                ),\n                array(\n                        'class'=&gt;'CWebLogRoute',\n                ),\n        ),\n),\n</code></pre> <p>Cuando el desarrollo est\u00e9 avanzado o al menos en una fase en la que no se esperen muchos cambios en el esquema de base de datos, se puede mejorar la velocidad del componente <code>db</code> dando un valor mayor que 0 a la propiedad <code>CDbConnection::schemaCachingDuration</code> (fuente).</p> <p>Desactivar el m\u00f3dulo <code>gii</code> en el fichero de configuraci\u00f3n cuando la aplicaci\u00f3n est\u00e9 en Producci\u00f3n.</p> <p>Poner a <code>false</code> el par\u00e1metro <code>enableParamLogging</code> del componente <code>db</code> en el fichero de configuraci\u00f3n de la aplicaci\u00f3n.</p>"},{"location":"desarrollo/yii.html#application","title":"Application","text":"<p>Si no se especifica, el controlador predeterminado de una aplicaci\u00f3n se llama \"site\" (SiteController), pero se puede especificar as\u00ed en el fichero de configuraci\u00f3n de la aplicaci\u00f3n (fuente):</p> <pre><code>&lt;?php\narray(\n    'defaultController'=&gt;'site',\n)\n</code></pre> <p>Los componentes de aplicaci\u00f3n se activan por defecto si son definidos en el fichero de configuraci\u00f3n de la aplicaci\u00f3n, pero pueden ser desactivados asignando <code>false</code> al atributo <code>enabled</code> (fuente). Los componentes de aplicaci\u00f3n se suelen incorporar de un paquete incluido con la instalaci\u00f3n de Yii. La lista completa de componentes de aplicaci\u00f3n de Yii puede consultarse aqu\u00ed.</p> <p>La aplicaci\u00f3n genera un log en <code>&lt;AppRoot&gt;/protected/runtime/application.log</code>.</p>"},{"location":"desarrollo/yii.html#controller","title":"Controller","text":"<p>Si no se especifica la acci\u00f3n a ejecutar de un controller, se ejecuta la acci\u00f3n predeterminada que es <code>index</code>. Puede cambiarse ajustando la variable de instancia p\u00fablica <code>CController:defaultAction</code> (fuente).</p> <p>La ruta de los controllers es relativa al directorio <code>&lt;AppRoot&gt;/protected/controllers</code> (fuente).</p> <p>Si la aplicaci\u00f3n est\u00e1 organizada en m\u00f3dulos, la ruta completa de las acciones ser\u00e1 del estilo <code>moduleID/controllerID/actionID</code> (fuente).</p> <p>La instanciaci\u00f3n de controllers sigue esta secuencia (fuente):</p> <ul> <li>Si se ha especificado <code>CWebApplication::catchAllRequest</code> (se usa normalmente para poner la aplicaci\u00f3n en modo mantenimiento).</li> <li>Si el ID del controller se encuentra en el mapa definido en <code>CWebApplication::controllerMap</code>.</li> <li>Finalmente se utiliza la convenci\u00f3n comentada anteriormente que enlaza el ID del controller con las clases del directorio <code>&lt;AppRoot&gt;/protected/controllers</code>.</li> </ul> <p>Las acciones se pueden escribir como clases aut\u00f3nomas en lugar de como m\u00e9todos de un controller (fuente).</p> <p>Los filtros se pueden definir como m\u00e9todos de los controllers en cuyo caso deben empezar por <code>filter</code> o como clases independientes descendientes de CFilter (fuente).</p> <p>Los filtros se pueden mapear en la funci\u00f3n <code>filters()</code> de los controllers. Se pueden definir listas negras y listas blancas de acciones sobre las que se aplicar\u00e1 la lista de filtros (fuente).</p>"},{"location":"desarrollo/yii.html#view","title":"View","text":"<p>La ruta de las vistas es relativa al directorio <code>&lt;AppRoot&gt;/protected/views</code> (fuente).</p> <p>Dentro de las vistas se puede acceder al controller mediante <code>$this</code>. Adicionalmente se pueden pasar variables concretas desde el controller al invocar la vista de la siguiente manera:</p> <pre><code>&lt;?php\n$this-&gt;render('edit', array(\n    'var1'=&gt;$value1,\n    'var2'=&gt;$value2,\n));\n</code></pre> <p>Por defecto se aplica a las vistas el layout definido en <code>&lt;AppRoot&gt;/protected/views/layouts/main.php</code>. Esto puede cambiarse a nivel de aplicaci\u00f3n en <code>CWebApplication::layout</code> o a nivel de controller en <code>CController::layout</code>. Si se quiere renderizar una vista sin aplicar layout, en lugar del m\u00e9todo <code>CController::render()</code> hay que invocar <code>CController:renderPartial()</code> (fuente).</p>"},{"location":"desarrollo/yii.html#component","title":"Component","text":"<p>Los componentes se utilizan para encapsular funcionalidad. Soportan propiedades, eventos y behaviors. Estos \u00faltimos se utilizan para implementar herencia m\u00faltiple (fuente).</p>"},{"location":"desarrollo/yii.html#module","title":"Module","text":"<p>Un m\u00f3dulo es una unidad de c\u00f3digo autocontenida que engloba modelos, vistas, controllers y componentes. Es en cierto modo una aplicaci\u00f3n, s\u00f3lo que no puede ser desplegada por separado. Los m\u00f3dulos se pueden anidar en varios niveles. De la misma forma que una aplicaci\u00f3n puede contener m\u00f3dulos, \u00e9stos pueden contener a su vez otros m\u00f3dulos. Se configuran de la misma forma con el fichero de configuraci\u00f3n de la aplicaci\u00f3n, indicando la propiedad <code>modules</code> en el m\u00f3dulo contenedor.</p>"},{"location":"desarrollo/yii.html#path-alias-e-importacion-de-clases","title":"Path Alias e importaci\u00f3n de clases","text":"<p>De forma predeterminada est\u00e1n definidos los siguientes path alias:</p> <ul> <li>system: <code>&lt;YiiRoot&gt;/framework</code></li> <li>zii: <code>&lt;YiiRoot&gt;/framework/zii</code></li> <li>application: <code>&lt;AppRoot&gt;/protected</code></li> <li>webroot: <code>&lt;AppRoot&gt;</code></li> <li>ext: <code>&lt;AppRoot&gt;/protected/extensions</code></li> </ul> <p>Para importar clases mejor utilizar <code>Yii:import('path_alias_de_la_clase')</code> que el <code>include</code>, <code>require</code> o <code>require_once</code> de PHP (fuente). Se pueden importar todas las clases de un directorio en bloque con una orden del estilo <code>Yii:import('path_alias_del_directorio.*')</code>. Las clases del propio framework est\u00e1n pre-importadas, por lo que no es necesario hacerlo.</p>"},{"location":"desarrollo/yii.html#convenciones","title":"Convenciones","text":""},{"location":"desarrollo/yii.html#del-framework","title":"Del framework","text":"<ul> <li>Si no se especifica en la URL el ID del action se ejecutar\u00e1 el action predeterminada. Si no se cambia (con <code>CController::defaultAction</code>) se ejecutar\u00e1 el action <code>index</code>.</li> <li>Si no se especifica en la URL el ID del controller se ejecutar\u00e1 el controller predeterminado. Si no se cambia (con <code>CWebApplication::defaultController</code>) se ejecutar\u00e1 el controller <code>site</code>.</li> </ul>"},{"location":"desarrollo/yii.html#nomenclatura-para-codigo","title":"Nomenclatura para c\u00f3digo","text":"<ul> <li>Utilizar notaci\u00f3n camelCase.</li> <li>Comenzar las clases con una letra may\u00fascula. La letra <code>C</code> se usa en las clases del framework =&gt; Se recomienda utilizar otra (<code>T</code> por ejemplo).</li> <li>Comenzar las variables privadas de clase con underscore.</li> <li>Terminar las clases controller con <code>Controller</code>.</li> <li>Dentro de una clase controller, los m\u00e9todos de action comenzarlos con <code>action</code>.</li> <li>Terminar las clases de action con <code>Action</code>.</li> </ul>"},{"location":"desarrollo/yii.html#nomenclatura-para-bases-de-datos","title":"Nomenclatura para bases de datos","text":"<ul> <li>Nombres de tablas y campos en min\u00fasculas.</li> <li>Palabras separadas con underscore (por ejemplo: direccion_cliente).</li> <li>Nombres de tablas en singular.</li> <li>Nombres de tablas con prefijo propio de la aplicaci\u00f3n (por ejemplo: gestoo_clientes).</li> </ul>"},{"location":"desarrollo/yii.html#formularios","title":"Formularios","text":""},{"location":"desarrollo/yii.html#creando-el-modelo","title":"Creando el Modelo","text":""},{"location":"desarrollo/yii.html#validacion","title":"Validaci\u00f3n","text":"<p>Las reglas de validaci\u00f3n se definen en la funci\u00f3n <code>rules()</code> del Model componiendo un array en el que cada elemento se define como sigue:</p> <pre><code>&lt;?php\narray('ListaAtributos', 'Validador', 'on'=&gt;'ListaEscenarios', ...opciones adicionales)\n</code></pre> <p>donde <code>ListaAtributos</code> es una lista separada por comas de nombres de atributos del Model; <code>Validador</code> especifica el tipo de validaci\u00f3n; el par\u00e1metro <code>on</code> es opcional y especifica la lista de escenarios en las que se aplica la regla; las opciones adicionales son pares clave-valor para inicializar propiedades de los validadores usados.</p> <p>Hay tres tipos de validadores:</p> <ul> <li><code>Validador</code> puede ser el nombre de un m\u00e9todo de la clase Modelo. El m\u00e9todo tiene que tener la siguiente forma:</li> </ul> <pre><code>&lt;?php\n/**\n * @param string $attribute the name of the attribute to be validated\n * @param array $params options specified in the validation rule\n */\npublic function ValidatorName($attribute,$params) { ... }\n</code></pre> <ul> <li><code>Validador</code> puede ser el nombre de una clase de validaci\u00f3n. En este caso cuando la regla es aplicada, una instancia de la clase de validaci\u00f3n se crea y se inicializa con las opciones adicionales. La clase de validaci\u00f3n debe extender de CValidator.</li> <li><code>Validador</code> puede ser una de las clases de validaci\u00f3n predefinidas en Yii (lista).</li> </ul>"},{"location":"desarrollo/yii.html#asignacion-de-atributos","title":"Asignaci\u00f3n de atributos","text":"<p>Las asignaciones de atributos entre formulario y modelo se pueden hacer en bloque por medio de la funci\u00f3n de PHP <code>$_POST[&lt;clase_modelo&gt;]</code>. S\u00f3lo se asignan los atributos considerados seguros, es decir los que tienen asociada una regla de validaci\u00f3n. Hay que tener en cuenta que las reglas de validaci\u00f3n se pueden asociar a escenarios por lo que se asignar\u00e1n unos atributos u otros seg\u00fan el escenario declarado al instanciar el modelo. Por ejemplo:</p> <pre><code>&lt;?php\n// en escenario login\n$model=new User('login');\nif(isset($_POST['User']))\n    $model-&gt;attributes=$_POST['User'];\n\n// en escenario register\n$model=new User('register');\nif(isset($_POST['User']))\n    $model-&gt;attributes=$_POST['User'];\n</code></pre> <p>Es importante recordar que las reglas de validaci\u00f3n se usan para chequear los datos introducidos por los usuarios y no los datos generados por c\u00f3digo (timestamps o primary keys). Por lo tanto no hay que definir reglas de validaci\u00f3n en los atributos que no esperamos que sean introducidos por el usuario. Por ejemplo, si marcamos como seguro el atributo <code>id</code> de un modelo (por medio del validador <code>safe</code> por ejemplo), aunque inicialmente no incluyamos el campo en el formulario, un atacante podr\u00eda enviarlo y la asignaci\u00f3n en bloque sobre el modelo lo incluir\u00eda y podr\u00eda permitir cambiar el ID del registro en base de datos.</p>"},{"location":"desarrollo/yii.html#provocando-la-validacion","title":"Provocando la validaci\u00f3n","text":"<p>Una vez que el modelo recibe los atributos (normalmente procedentes del usuario por medio de un formulario) la validaci\u00f3n se puede desencadenar invocando el m\u00e9todo <code>CModel::validate()</code>. Retornar\u00e1 <code>true</code> o <code>false</code> en funci\u00f3n del resultado. En los modelos tipo <code>CActiveRecord</code> de forma predeterminada se desencadena tambi\u00e9n al invocar el m\u00e9todo <code>save()</code>. Antes de invocar la validaci\u00f3n se puede indicar el escenario (ajustando la propiedad <code>scenario</code> del modelo) para elegir el conjunto de reglas de validaci\u00f3n que se desean.</p> <p>Una vez que la validaci\u00f3n se ha hecho, los posibles errores se almacenan en el propio modelo. Se pueden obtener con las funciones <code>CModel::getErrors()</code> (devuelve todos los errores) y <code>CModel::getError()</code> (devuelve s\u00f3lo el primero).</p>"},{"location":"desarrollo/yii.html#recogiendo-varios-modelos-a-la-vez","title":"Recogiendo varios modelos a la vez","text":"<p>Para recoger varios modelos o registros de un tipo simult\u00e1neamente (o entrada tabular) necesitamos crear o rellenar un array de instancias del modelo, dependiendo de si queremos insertar o modificar registros. Luego recogeremos los datos de entrada del usuario de la variable <code>$_POST</code> y los asignaremos a cada modelo. Cuando recog\u00edamos un solo modelo hac\u00edamos <code>$_POST[&lt;clase_modelo&gt;]</code>, ahora haremos <code>$_POST[&lt;clase_modelo&gt;][$i]</code>. El action de modificaci\u00f3n tendr\u00e1 el siguiente aspecto:</p> <pre><code>&lt;?php\npublic function actionBatchUpdate() {\n    // retrieve items to be updated in a batch mode\n    // assuming each item is of model class 'Item'\n    $items=$this-&gt;getItemsToUpdate();\n    if(isset($_POST['Item'])) {\n        $valid=true;\n        foreach($items as $i=&gt;$item) {\n            if(isset($_POST['Item'][$i]))\n                $item-&gt;attributes=$_POST['Item'][$i];\n            $valid=$item-&gt;validate() &amp;&amp; $valid;\n        }\n        if($valid)  // all items are valid\n            // ...do something here\n    }\n    // displays the view to collect tabular input\n    $this-&gt;render('batchUpdate',array('items'=&gt;$items));\n}\n</code></pre> <p>y la vista incluir\u00e1 algo como:</p> <pre><code>&lt;div class=\"form\"&gt;\n&lt;?php echo CHtml::beginForm(); ?&gt;\n&lt;table&gt;\n&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Price&lt;/th&gt;&lt;th&gt;Count&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;/tr&gt;\n&lt;?php foreach($items as $i=&gt;$item): ?&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;?php echo CHtml::activeTextField($item,\"[$i]name\"); ?&gt;&lt;/td&gt;\n&lt;td&gt;&lt;?php echo CHtml::activeTextField($item,\"[$i]price\"); ?&gt;&lt;/td&gt;\n&lt;td&gt;&lt;?php echo CHtml::activeTextField($item,\"[$i]count\"); ?&gt;&lt;/td&gt;\n&lt;td&gt;&lt;?php echo CHtml::activeTextArea($item,\"[$i]description\"); ?&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;?php endforeach; ?&gt;\n&lt;/table&gt;\n\n&lt;?php echo CHtml::submitButton('Save'); ?&gt;\n&lt;?php echo CHtml::endForm(); ?&gt;\n&lt;/div&gt;&lt;!-- form --&gt;\n</code></pre>"},{"location":"desarrollo/yii.html#form-builder","title":"Form Builder","text":"<p>Yii incluye un sistema de generaci\u00f3n de formularios din\u00e1mico. Se basa en el objeto CForm. El uso se basa en crear el objeto, pasarle un array de configuraci\u00f3n (se suele mantener en un fichero aparte) y renderizarlo desde una vista.</p> <p>Si se definen formularios anidados (como se ve en la documentaci\u00f3n), el formulario renderizado contendr\u00e1 \u00fanicamente una etiqueta <code>form</code> HTML dentro de la cual los campos se identificar\u00e1n con nombres tipo <code>Model[atributo]</code>, donde Model se corresponder\u00e1 con uno de los modelos asociados a uno de los sub-forms.</p> <p>Cuando se utiliza el Form Builder la asignaci\u00f3n de atributos del formulario al modelo se puede gestionar desde el propio objeto CForm. Para ello existe el m\u00e9todo <code>loadData()</code>. Esta carga se hace autom\u00e1ticamente cuando es necesario, como por ejemplo si invocamos el m\u00e9todo <code>validate()</code> de CForm que valida los modelos asociados.</p> <p>Documentaci\u00f3n completa aqu\u00ed.</p>"},{"location":"desarrollo/yii.html#base-de-datos","title":"Base de Datos","text":""},{"location":"desarrollo/yii.html#objetos-dao","title":"Objetos DAO","text":"<p>El modelo de acceso a bases de datos de Yii se basa en los siguientes objetos:</p> <ul> <li>CDbConnection: Representa una conexi\u00f3n a una base de datos. Normalmente se configura como componente de la aplicaci\u00f3n. Es interesante aprovechar la funcionalidad de prefijo de tablas por medio de la propiedad <code>CDbConnection::tablePrefix</code>. Si se utiliza, luego en las consultas hay que indicar las tablas sin el prefijo (que queda configurado en esta propiedad) y entre dobles llaves (por ejemplo: {{usuario}}).</li> <li>CDbCommand: Representa una sentencia SQL para ejecutar contra una base de datos. Se puede crear mediante el m\u00e9todo <code>createCommand()</code> del objeto CDbConnection. Se ejecuta con los m\u00e9todos <code>query()</code> para selects y <code>execute()</code> para el resto. <code>query()</code> devuelve un <code>CDbDataReader</code>. Existen cuatro variantes de <code>query()</code> que devuelven datos directamente:<ul> <li>queryAll(): Devuelve un array con todos los registros del resultado de la consulta.</li> <li>queryRow(): Devuelve el primer registro del resultado de la consulta.</li> <li>queryColumn(): Devuelve un array con el valor de la primera columna del resultado de la consulta.</li> <li>queryScalar(): Devuelve el primer campo del primer registro del resultado de la consulta. \u00datil para una consulta tipo count.</li> </ul> </li> <li>CDbDataReader: Representa un conjunto de registros que se lee s\u00f3lo hacia adelante resultado de una consulta. Normalmente el objeto se recorre ejecutando sucesivamente el m\u00e9todo <code>read()</code> hasta que devuelve <code>false</code>. A continuaci\u00f3n se muestran tres formas de extraer los datos de CDbDataReader:     <pre><code>&lt;?php\n$dataReader=$command-&gt;query();\n// calling read() repeatedly until it returns false\nwhile(($row=$dataReader-&gt;read())!==false) { ... }\n// using foreach to traverse through every row of data\nforeach($dataReader as $row) { ... }\n// retrieving all rows at once in a single array\n$rows=$dataReader-&gt;readAll();\n</code></pre></li> <li>CDbTransaction: Representa una transacci\u00f3n en la base de datos. A continuaci\u00f3n se muestra una estructura t\u00edpica transaccional con este objeto:     <pre><code>&lt;?php\n$transaction=$connection-&gt;beginTransaction();\ntry {\n    $connection-&gt;createCommand($sql1)-&gt;execute();\n    $connection-&gt;createCommand($sql2)-&gt;execute();\n    //.... other SQL executions\n    $transaction-&gt;commit();\n}\ncatch(Exception $e) { // an exception is raised if a query fails\n    $transaction-&gt;rollBack();\n}\n</code></pre></li> </ul>"},{"location":"desarrollo/yii.html#binding-de-parametros","title":"Binding de par\u00e1metros","text":"<p>Para evitar ataques de inyecci\u00f3n de SQL y para mejorar el rendimiento de consultas que se repiten habitualmente, se recomienda parametrizar las consultas con los m\u00e9todos <code>CDbCommand::bindParam()</code> y <code>CDbCommand::bindValue()</code>. Ejemplo:</p> <pre><code>&lt;?php\n// una query con dos placeholders \":username\" and \":email\"\n$sql=\"INSERT INTO tbl_user (username, email) VALUES(:username,:email)\";\n$command=$connection-&gt;createCommand($sql);\n$command-&gt;bindParam(\":username\",$username,PDO::PARAM_STR);  // reemplaza el placeholder \":username\" con el valor de la variable $username\n$command-&gt;bindParam(\":email\",$email,PDO::PARAM_STR);        // reemplaza el placeholder \":email\" con el valor de la variable $email\n$command-&gt;execute();\n// inserta otra fila con un nuevo conjunto de valores\n$command-&gt;bindParam(\":username\",$username2,PDO::PARAM_STR);\n$command-&gt;bindParam(\":email\",$email2,PDO::PARAM_STR);\n$command-&gt;execute();\n</code></pre>"},{"location":"desarrollo/yii.html#binding-de-variables","title":"Binding de variables","text":"<p>Se pueden asociar variables PHP a columnas de una query de manera que tomen valor autom\u00e1ticamente cada vez que leamos el siguiente registro. Por ejemplo:</p> <pre><code>&lt;?php\n$sql=\"SELECT username, email FROM tbl_user\";\n$dataReader=$connection-&gt;createCommand($sql)-&gt;query();\n$dataReader-&gt;bindColumn(1,$username);  // asocia la primera columna (username) con la variable $username\n$dataReader-&gt;bindColumn(2,$email);     // asocia la segunda columna (email) con la variable $email\nwhile($dataReader-&gt;read()!==false)\n{\n    // $username y $email contienen los valores correspondientes a la fila en curso\n}\n</code></pre>"},{"location":"desarrollo/yii.html#query-builder","title":"Query Builder","text":"<p>Existe un conjunto de herramientas para construir sentencias SQL de una manera orientada a objeto. Como ventajas, permite construir sentencias de forma program\u00e1tica, evita problemas de sintaxis o ambig\u00fcedades, previene ataques de inyecci\u00f3n de SQL al usar binding de par\u00e1metros y ofrece abstracci\u00f3n de base de datos lo que facilitar\u00eda una migraci\u00f3n m\u00e1s adelante.</p> <p>Consultar la documentaci\u00f3n completa aqu\u00ed.</p>"},{"location":"desarrollo/yii.html#active-record","title":"Active Record","text":"<p>Active Record (AR) es una popular t\u00e9cnica de mapeo Objeto-Relacional (ORM) que permite manipular una tabla de manera orientada a objeto. De forma din\u00e1mica se genera una entidad modelo a partir de una tabla con pr\u00e1cticamente nada de c\u00f3digo. Se recomienda que todos los nombres de los campos de las tablas est\u00e9n en min\u00fasculas para no tener problemas con el cambio de gestor de base de datos, ya que algunos son sensibles a may\u00fasculas y otros no.</p>"},{"location":"desarrollo/yii.html#creando-registros","title":"Creando registros","text":"<p>Simplemente creando un objeto AR, asignando valores a sus propiedades y llamando al m\u00e9todo <code>CActiveRecord::save()</code>.</p> <p>Para asignar expresiones SQL a algunos de los campos o propiedades de los objetos AR, hay que utilizar el objero <code>CDbExpression</code>, por ejemplo:</p> <pre><code>&lt;?php\n$post=new Post;\n$post-&gt;create_time=new CDbExpression('NOW()');  // $post-&gt;create_time='NOW()'; no funcionar\u00eda porque 'NOW()' ser\u00eda tratado como cadena\n$post-&gt;save();\n</code></pre>"},{"location":"desarrollo/yii.html#recuperando-registros","title":"Recuperando registros","text":"<p>Para recuperar un solo registro tenemos los m\u00e9todos:</p> <pre><code>&lt;?php\n$post=Post::model()-&gt;find($condition,$params);                          // encuentra la primera fila que satisface la condici\u00f3n especificada\n$post=Post::model()-&gt;findByPk($postID,$condition,$params);              // encuentra la fila con el primary key especificado\n$post=Post::model()-&gt;findByAttributes($attributes,$condition,$params);  // encuentra la fila con los valores de los atributos especificados\n$post=Post::model()-&gt;findBySql($sql,$params);                           // encuentra la primera fila usando la SQL especificada\n</code></pre> <p>Si no se encuentra ning\u00fan registro, el resultado ser\u00e1 <code>null</code>.</p> <p>Para recuperar varios registros tenemos los m\u00e9todos:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;findAll($condition,$params);                          // encuentra todas las filas que satisfacen la condici\u00f3n especificada\n$posts=Post::model()-&gt;findAllByPk($postIDs,$condition,$params);             // encuentra todas las filas con el primary key especificado\n$posts=Post::model()-&gt;findAllByAttributes($attributes,$condition,$params);  // encuentra todas las filas con los valores de los atributos especificados\n$posts=Post::model()-&gt;findAllBySql($sql,$params);                           // encuentra todas las filas usando la SQL especificada\n</code></pre> <p>Adicionalmente existen los siguientes m\u00e9todos:</p> <pre><code>&lt;?php\n$n=Post::model()-&gt;count($condition,$params);        // obtiene el n\u00famero de filas que satisfacen la condici\u00f3n especificada\n$n=Post::model()-&gt;countBySql($sql,$params);         // obtiene el n\u00famero de filas que se obtendr\u00edan con las SQL especificada\n$exists=Post::model()-&gt;exists($condition,$params);  // comprueba si existe al menos una fila que satisface la condici\u00f3n especificada\n</code></pre> <p>En todos los casos, en lugar de la pareja de strings <code>$condition</code> y <code>$params</code>, podemos entregar un objeto de tipo <code>CDbCriteria</code> m\u00e1s cosas adem\u00e1s de una cl\u00e1usula WHERE. Alternativamente a pasar un <code>CDbCriteria</code> podemos pasar un array con las propiedades de permitan construir este objeto din\u00e1micamente.</p>"},{"location":"desarrollo/yii.html#actualizando-registros","title":"Actualizando registros","text":"<p>Modificando un AR reci\u00e9n obtenido y guardando se producir\u00e1 una actualizaci\u00f3n en base de datos:</p> <pre><code>&lt;?php\n$post=Post::model()-&gt;findByPk(10);\n$post-&gt;title='new post title';\n$post-&gt;save(); // guarda el cambio en la base de datos\n</code></pre> <p>Cuando se guarda (m\u00e9todo <code>save()</code>) se invoca autom\u00e1ticamente la validaci\u00f3n (a no ser que se pase el argumento false).</p> <p>Si el registro es nuevo se har\u00e1 un insert en lugar de un update. Se puede interrogar al modelo si estamos en uno u otro caso por medio del m\u00e9todo <code>CActiveRecord::isNewRecord()</code>.</p> <p>Se puede actualizar un AR que no se haya cargado previamente con los siguientes m\u00e9todos:</p> <pre><code>&lt;?php\nPost::model()-&gt;updateAll($attributes,$condition,$params);       // actualiza las filas que satisfacen la condici\u00f3n especificada\nPost::model()-&gt;updateByPk($pk,$attributes,$condition,$params);  // actualiza las filas que satisfacen la condici\u00f3n y la primary key especificadas\nPost::model()-&gt;updateCounters($counters,$condition,$params);    // actualiza las columnas tipo counter en las filas que satisfacen la condici\u00f3n especificada\n</code></pre>"},{"location":"desarrollo/yii.html#borrando-registros","title":"Borrando registros","text":"<p>Para borrar un solo registro utilizar el m\u00e9todo <code>delete()</code> sobre una instancia AR obtenida previamente:</p> <pre><code>&lt;?php\n$post=Post::model()-&gt;findByPk(10); // localizamos el registro\n$post-&gt;delete(); // lo borramos. El objeto $post seguir\u00e1 existiendo, pero el registro en base de datos no\n</code></pre> <p>Tambi\u00e9n se pueden borrar registros sin cargarlos previamente con los siguientes m\u00e9todos:</p> <pre><code>&lt;?php\nPost::model()-&gt;deleteAll($condition,$params);       // borra las filas que se ajusten a la condici\u00f3n especificada\nPost::model()-&gt;deleteByPk($pk,$condition,$params);  // borra las filas que se ajusten a la condici\u00f3n especificada y a la primary key\n</code></pre>"},{"location":"desarrollo/yii.html#comparando-registros","title":"Comparando registros","text":"<p>Usar el m\u00e9todo <code>CActiveRecord::equals()</code>.</p>"},{"location":"desarrollo/yii.html#adaptacion-de-datos","title":"Adaptaci\u00f3n de datos","text":"<p><code>CActiveRecord</code> proporciona los siguientes m\u00e9todos para adaptar los datos que se intercambian entre modelo y base de datos en uno y otro sentido:</p> <ul> <li>beforeValidate y afterValidate: invocados antes y despu\u00e9s de que se efect\u00fae la validaci\u00f3n.</li> <li>beforeSave y afterSave: invocados antes y despu\u00e9s de que se guarde una instancia AR.</li> <li>beforeDelete y afterDelete: invocados antes y despu\u00e9s de que se borre una instancia AR.</li> <li>afterConstruct: invocado en cada instancia AR creada con el operador <code>new</code>.</li> <li>beforeFind: invocado antes de que un m\u00e9todo de b\u00fasqueda de AR se use para efectuar una consulta (por ejemplo find(), findAll()).</li> <li>afterFind: invocado despu\u00e9s de que cada instancia AR es creada como resultado de una b\u00fasqueda.</li> </ul>"},{"location":"desarrollo/yii.html#usando-transacciones","title":"Usando transacciones","text":"<p>Cada instancia AR contiene una propiedad llamada <code>dbConnection</code> que soporta transacciones de la siguiente forma:</p> <pre><code>&lt;?php\n$model=Post::model();\n$transaction=$model-&gt;dbConnection-&gt;beginTransaction();\ntry {\n    // find y save son dos pasos entre los que puede interferir otra petici\u00f3n\n    // encerraremos el intervalo entre ambas \u00f3rdenes en una transacci\u00f3n para asegurar consistencia e integridad\n    $post=$model-&gt;findByPk(10);\n    $post-&gt;title='new post title';\n    $post-&gt;save();\n    $transaction-&gt;commit();\n}\ncatch(Exception $e) {\n    $transaction-&gt;rollBack();\n}\n</code></pre>"},{"location":"desarrollo/yii.html#named-scopes","title":"Named scopes","text":"<p>Un named scope representa un criterio de b\u00fasqueda al que le asignamos un nombre y que puede ser combinado con otros named scopes para refinar una b\u00fasqueda de AR's. Se declaran en el m\u00e9todo <code>CActiveRecord::scopes()</code> como pares nombre-criterio de filtrado. Por ejemplo:</p> <pre><code>&lt;?php\nclass Post extends CActiveRecord {\n    //......\n    public function scopes() {\n        return array(\n            'published'=&gt;array(\n                'condition'=&gt;'status=1',\n            ),\n            'recently'=&gt;array(\n                'order'=&gt;'create_time DESC',\n                'limit'=&gt;5,\n            ),\n        );\n    }\n}\n</code></pre> <p>La declaraci\u00f3n de cada named scope se corresponde con un array que sirve para inicializar un objeto CDbCriteria. Una vez definidos se pueden combinar en las sentencias de b\u00fasqueda como por ejemplo:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;published()-&gt;recently()-&gt;findAll();\n</code></pre> <p>Deben usarse siempre sobre m\u00e9todos class-level, es decir partiendo de <code>ModelName::model()-&gt;</code>, no directamente de <code>ModelName::</code>. Si se quieren parametrizar hay que definirlos como m\u00e9todos class-level aut\u00f3nomos en lugar de configurarlos en el array de <code>CActiveRecord::scopes</code>. Por ejemplo para parametrizar el named scope <code>recently</code> definido previamente se har\u00eda:</p> <pre><code>&lt;?php\npublic function recently($limit=5) {\n    $this-&gt;getDbCriteria()-&gt;mergeWith(array(\n        'order'=&gt;'create_time DESC',\n        'limit'=&gt;$limit,\n    ));\n    return $this;\n}\n</code></pre> <p>Luego podr\u00edamos llamar:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;published()-&gt;recently(3)-&gt;findAll();\n</code></pre> <p>Se puede definir un named scope predeterminado. De esta forma ser\u00e1 aplicado autom\u00e1ticamente en todas las consultas. Para ello se define en el m\u00e9todo <code>CActiveRecord::defaultScope</code> sin darle nombre como s\u00ed hab\u00eda que hacer en <code>CActiveRecord::scopes</code>. Por ejemplo:</p> <pre><code>&lt;?php\npublic function defaultScope() {\n    return array(\n        'condition'=&gt;\"language='\".Yii::app()-&gt;language.\"'\",\n    );\n}\n</code></pre>"},{"location":"desarrollo/yii.html#activerecord-relacional","title":"ActiveRecord relacional","text":""},{"location":"desarrollo/yii.html#declaracion-de-relaciones","title":"Declaraci\u00f3n de relaciones","text":"<p>Para ilustrar los ejemplos de esta secci\u00f3n se utilizar\u00e1 el siguiente modelo de datos: </p> <p>Las relaciones entre dos clases AR tienen que ver con la relaci\u00f3n entre las tablas en base de datos. En base de datos tendremos las relaciones:</p> <ul> <li>one-to-many: entre tbl_user y tbl_post por ejemplo.</li> <li>ono-to-one: entre tbl_user y tbl_profile por ejemplo.</li> <li>many-to-many: entre tbl_category y tbl_post por ejemplo.</li> </ul> <p>En el lado AR hay cuatro tipos posibles:</p> <ul> <li>BELONGS_TO: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces B belongs_to A. En el ejemplo A=tbl_user y B=tbl_post.</li> <li>HAS_MANY: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces A has_many B. En el ejemplo A=tbl_user y B=tbl_post.</li> <li>HAS_ONE: Si la relaci\u00f3n entre las tablas A y B es ono-to-one. Es un caso especial de HAS_MANY en el que A tiene al menos un B. En el ejemplo A=tbl_user y B=tbl_profile.</li> <li>MANY_MANY: Si la relaci\u00f3n entre las tablas A y B es many-to-many. Se necesita una tabla intermedia que descomponga la relaci\u00f3n en dos relaciones 1:n con la tabla intermedia (C). En el ejemplo A=tbl_post, B=tbl_category y C=tbl_post_category.</li> </ul> <p>Estas relaciones se declaran en el m\u00e9todo <code>CActiveRecord::relations()</code> definiendo un array en el que cada elemento representa una relaci\u00f3n de la siguiente forma:</p> <pre><code>&lt;?php\n'VarName'=&gt;array('RelationType', 'ClassName', 'ForeignKey', ...opciones adicionales)\n</code></pre> <p>donde <code>VarName</code> es el nombre de la relaci\u00f3n, <code>RelationType</code> indica el tipo de relaci\u00f3n (se pueden aprovechar las siguientes constantes: <code>self::BELONGS_TO</code>, <code>self::HAS_ONE</code>, <code>self::HAS_MANY</code> y <code>self::MANY_MANY</code>), <code>ClassName</code> es el nombre de la clase AR con que se est\u00e1 estableciendo la relaci\u00f3n y <code>ForeignKey</code> indica la foreign key implicada en la relaci\u00f3n. Las opciones adicionales se explicar\u00e1n en la secci\u00f3n Opciones de consultas relacionales.</p> <p>A continuaci\u00f3n se definen las relaciones en los modelos User y Post:</p> <pre><code>&lt;?php\nclass Post extends CActiveRecord {\n    //......\n\n    public function relations() {\n        return array(\n            'author'=&gt;array(self::BELONGS_TO, 'User', 'author_id'),\n            'categories'=&gt;array(self::MANY_MANY, 'Category',\n                'tbl_post_category(post_id, category_id)'),\n        );\n    }\n}\n\nclass User extends CActiveRecord {\n    //......\n\n    public function relations() {\n        return array(\n            'posts'=&gt;array(self::HAS_MANY, 'Post', 'author_id'),\n            'profile'=&gt;array(self::HAS_ONE, 'Profile', 'owner_id'),\n        );\n    }\n}\n</code></pre>"},{"location":"desarrollo/yii.html#consultas-relacionales","title":"Consultas relacionales","text":"<p>Por defecto se aplica el sistema lazy loading en los campos de un modelo que se refieren a una relaci\u00f3n. Para forzar un eager loading hay que preceder los m\u00e9todos de b\u00fasqueda con el m\u00e9todo <code>with()</code>. Por ejemplo:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;with('author')-&gt;findAll();\n</code></pre> <p>Se pueden especificar varios nombres de relaciones separados por comas en el m\u00e9todo <code>with()</code> o pasarle un <code>CDbCriteria::with</code> al m\u00e9todo de b\u00fasqueda. Por ejemplo:</p> <pre><code>&lt;?php\n$criteria=new CDbCriteria;\n$criteria-&gt;with=array(\n    'author.profile',\n    'author.posts',\n    'categories',\n);\n$posts=Post::model()-&gt;findAll($criteria);\n</code></pre>"},{"location":"desarrollo/yii.html#consultas-relacionales-sin-obtener-los-modelos-relacionados","title":"Consultas relacionales sin obtener los modelos relacionados","text":"<p>En ocasiones nos interesa hacer una consulta usando una relaci\u00f3n pero no queremos los datos de los propios modelos relacionados. Por ejemplo si quisi\u00e9ramos los usuarios que tienen post's en estado published=1, pero no los post's en s\u00ed, podr\u00edamos hacer lo siguiente:</p> <pre><code>&lt;?php\n$users=User::model()-&gt;with(array(\n    'posts'=&gt;array(\n        'select'=&gt;false,\n        'joinType'=&gt;'INNER JOIN',\n        'condition'=&gt;'posts.published=1',\n    ),\n))-&gt;findAll();\n</code></pre>"},{"location":"desarrollo/yii.html#opciones-de-consultas-relacionales","title":"Opciones de consultas relacionales","text":"<p>Las opciones adicionales que se pueden indicar cuando se definen las relaciones que se mencionaban en el apartado Declaraci\u00f3n de relaciones son las siguientes (consultar su funcionamiento en la documentaci\u00f3n oficial):</p> <ul> <li>select</li> <li>condition</li> <li>params</li> <li>on</li> <li>order</li> <li>with</li> <li>joinType</li> <li>alias</li> <li>together</li> <li>join</li> <li>group</li> <li>having</li> <li>index</li> <li>scopes</li> </ul> <p>Adicionalmente las siguientes opciones est\u00e1n disponibles para ciertas relaciones durante el lazy loading (consultar su funcionamiento en la documentaci\u00f3n oficial):</p> <ul> <li>limit</li> <li>offset</li> <li>through</li> </ul> <p>Ejemplo de uso:</p> <pre><code>&lt;?php\nclass User extends CActiveRecord {\n    public function relations() {\n        return array(\n            'posts'=&gt;array(self::HAS_MANY, 'Post', 'author_id',\n                            'order'=&gt;'posts.create_time DESC',\n                            'with'=&gt;'categories'),\n            'profile'=&gt;array(self::HAS_ONE, 'Profile', 'owner_id'),\n        );\n    }\n}\n</code></pre>"},{"location":"desarrollo/yii.html#desambiguacion-de-columnas","title":"Desambiguaci\u00f3n de columnas","text":"<p>En una consulta relacional con AR, el alias para la tabla primaria es <code>t</code>, mientras que el alias de la tabla relacionada se corresponde con el nombre de la relaci\u00f3n. Por ejemplo:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;with('comments')-&gt;findAll(array(\n    'order'=&gt;'t.create_time, comments.create_time'\n));\n</code></pre>"},{"location":"desarrollo/yii.html#opciones-dinamicas-en-consultas-relacionales","title":"Opciones din\u00e1micas en consultas relacionales","text":"<p>Se pueden sobreescribir las opciones que se definen en las relaciones indicando otras mediante el m\u00e9todo <code>with()</code> o con la opci\u00f3n adicional <code>with</code>.</p>"},{"location":"desarrollo/yii.html#rendimiento-de-consultas-relacionales","title":"Rendimiento de consultas relacionales","text":"<p>Existe una opci\u00f3n que permite elegir entre dos m\u00e9todos para realizar consultas eager loading. Se trata de la opci\u00f3n <code>together</code> que determina si se realizar\u00e1 una \u00fanica consulta con el join de las tablas relacionadas (m\u00e1s rendimiento) o una consulta por cada tabla (menos informaci\u00f3n redundante). Consultar documentaci\u00f3n completa.</p>"},{"location":"desarrollo/yii.html#consulta-estadistica","title":"Consulta estad\u00edstica","text":"<p>Existe un tipo de relaci\u00f3n especializado en obtener datos estad\u00edsticos entre tablas. S\u00f3lo se puede aplicar sobre tablas relacionadas con <code>HAS_MANY</code> y <code>MANY_MANY</code> y el tipo de relaci\u00f3n se designa con <code>self::STAT</code>. Por ejemplo:</p> <pre><code>&lt;?php\nclass Post extends CActiveRecord {\n    public function relations() {\n        return array(\n            'commentCount'=&gt;array(self::STAT, 'Comment', 'post_id'),\n            'categoryCount'=&gt;array(\n                self::STAT, 'Category', 'post_category(post_id, category_id)'\n            ),\n        );\n    }\n}\n</code></pre> <p>Por defecto la consulta estad\u00edstica consistir\u00e1 en un <code>COUNT</code>, pero podemos realizar ajustes con las siguientes opciones adicionales al definir la relaci\u00f3n:</p> <ul> <li><code>select</code>: la expresi\u00f3n estad\u00edstica. Por defecto es <code>COUNT(*)</code>, lo que realiza un conteo de los objetos hijos.</li> <li><code>defaultValue</code>: el valor que se asignar\u00e1 a los registros que no reciban un resultado de la consulta estad\u00edstica. Por ejemplo, si un post no tiene comentarios, <code>commentCount</code> recibir\u00e1 este valor. Por defecto vale 0.</li> <li><code>condition</code>: la cl\u00e1usula WHERE. Su valor por defecto es vac\u00edo.</li> <li><code>params</code>: los par\u00e1metros a asociar a la sentencia SQL generada. Debe ser un array de parejas clave-valor.</li> <li><code>order</code>: la cl\u00e1usula ORDER. Su valor por defecto es vac\u00edo.</li> <li><code>group</code>: la cl\u00e1usula GROUP BY. Su valor por defecto es vac\u00edo.</li> <li><code>having</code>: la cl\u00e1usula HAVING. Su valor por defecto es vac\u00edo.</li> </ul>"},{"location":"desarrollo/yii.html#consulta-relacional-con-named-scopes","title":"Consulta relacional con named scopes","text":"<p>Se pueden combinar las consultas relacionales con los named scopes aplicando estos \u00faltimos tanto sobre la tabla principal como sobre las relacionadas. En el primer caso se har\u00eda combinando named scopes y consulta relacional en cadena de la siguiente forma:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;published()-&gt;recently()-&gt;with('comments')-&gt;findAll();\n</code></pre> <p>Aplicar named scopes a los modelos relacionados se hace indicandolos detr\u00e1s de la relaci\u00f3n separ\u00e1ndolos con \":\". Por ejemplo:</p> <pre><code>&lt;?php\n$posts=Post::model()-&gt;with('comments:recently:approved')-&gt;findAll();\n</code></pre> <p>Los named scopes pueden forzarse en la propia declaraci\u00f3n de la relaci\u00f3n del siguiente modo:</p> <pre><code>&lt;?php\nclass User extends CActiveRecord {\n    public function relations() {\n        return array(\n            'posts'=&gt;array(self::HAS_MANY, 'Post', 'author_id',\n                'with'=&gt;'comments:approved'),\n        );\n    }\n}\n</code></pre> <p>Si los named scopes del objeto relacionados admiten par\u00e1metros, pueden pasarse en la consulta relacional de la siguiente forma:</p> <pre><code>&lt;?php\n$users=User::model()-&gt;findAll(array(\n    'with'=&gt;array(\n        'posts'=&gt;array(\n            'scopes'=&gt;array(\n                'rated'=&gt;5,\n            ),\n        ),\n    ),\n));\n</code></pre>"},{"location":"desarrollo/yii.html#consulta-relacional-con-through","title":"Consulta relacional con through","text":"<p>Se definen as\u00ed:</p> <pre><code>&lt;?php\n'comments'=&gt;array(self::HAS_MANY,'Comment',array('key1'=&gt;'key2'),'through'=&gt;'posts')\n</code></pre> <p>donde en array('key1'=&gt;'key2'):</p> <ul> <li>key1 es una clave definida en la relaci\u00f3n especificada en <code>through</code> (<code>posts</code> en este caso)</li> <li>key2 es una clave definida en el modelo al que esta relaci\u00f3n apunta (<code>Comment</code> en este caso)</li> </ul> <p><code>through</code> puede utilizarse en relaciones <code>HAS_ONE</code> y <code>HAS_MANY</code>.</p> <p>Para ilustrar el caso HAS_MANY se utilizar\u00e1 el siguiente modelo de datos: </p> <p>Por ejemplo, para obtener los usuarios de un grupo en concreto:</p> <pre><code>&lt;?php\nclass Group extends CActiveRecord {\n    //...\n    public function relations() {\n        return array(\n            'roles'=&gt;array(self::HAS_MANY, 'Role', 'group_id'),\n            'users'=&gt;array(self::HAS_MANY, 'User', array('user_id'=&gt;'id'), 'through'=&gt;'roles'\n            ),\n        );\n    }\n}\n</code></pre> <p>Un caso m\u00e1s complicado ser\u00eda obtener todos los comentarios de todos los usuarios de un grupo en concreto. Se lograr\u00eda a\u00f1adiendo a las relaciones anteriores la siguiente:</p> <pre><code>&lt;?php\n'comments'=&gt;array(\n    self::HAS_MANY, 'Comment', array('id'=&gt;'user_id'), 'through'=&gt;'users'\n),\n</code></pre> <p>Una variante del <code>HAS_MANY through</code> es cuando el modelo origen y destino es el mismo. Por ejemplo, dado el siguiente modelo de datos: </p> <p>Podr\u00edamos definir las siguientes relaciones:</p> <pre><code>&lt;?php\nclass User extends CActiveRecord {\n    //...\n    public function relations() {\n        return array(\n            'mentorships'=&gt;array(\n                self::HAS_MANY,'Mentorship','teacher_id','joinType'=&gt;'INNER JOIN'\n            ),\n            'students'=&gt;array(\n                self::HAS_MANY,'User',array('student_id'=&gt;'id'),\n                    'through'=&gt;'mentorships','joinType'=&gt;'INNER JOIN'\n            ),\n        );\n    }\n}\n</code></pre> <p>De manera que podr\u00edamos obtener los alumnos que son ense\u00f1ados por un profesor (alumnos y profesor son ambos usuarios):</p> <pre><code>&lt;?php\n$teacher=User::model()-&gt;findByPk(1);\n$students=$teacher-&gt;students;\n</code></pre> <p>Para ilustrar el caso de <code>HAS_ONE through</code> nos basaremos en: </p> <p>Por ejemplo, obtener la direcci\u00f3n de un usuario cuando \u00e9sta est\u00e1 relacionada con el usuario por medio de un profile:</p> <pre><code>&lt;?php\nclass User extends CActiveRecord {\n    //...\n    public function relations() {\n        return array(\n            'profile'=&gt;array(self::HAS_ONE, 'Profile', 'user_id'),\n            'address'=&gt;array(self::HAS_ONE, 'Address', array('id'=&gt;'profile_id'), 'through'=&gt;'profile'\n            ),\n        );\n    }\n}\n</code></pre>"},{"location":"desarrollo/yii.html#tabla-de-relacion-many_many-con-datos-adicionales","title":"Tabla de relaci\u00f3n MANY_MANY con datos adicionales","text":"<p>Para el caso en que la tabla intermedia que desarrolla una relaci\u00f3n MANY_MANY entre otras dos tablas contenga campos con informaci\u00f3n adicional a los dos foreign keys que apuntan a las dos tablas, seguir este art\u00edculo del wiki y \u00e9ste del foro (ignorar las respuestas m\u00e1s viejas que son de cuando no exist\u00eda el mecanismo <code>through</code>).</p>"},{"location":"desarrollo/yii.html#cosas-interesantes","title":"Cosas interesantes","text":""},{"location":"desarrollo/yii.html#application-singleton","title":"Application Singleton","text":"<p><code>Yii:app()</code> Sirve como almac\u00e9n central de ajustes de configuraci\u00f3n a nivel de aplicaci\u00f3n (fuente).</p>"},{"location":"desarrollo/yii.html#anadir-jquery","title":"A\u00f1adir jQuery","text":"<p>A\u00f1adir jQuery a una p\u00e1gina. C\u00f3digo visto en un action, pero tambi\u00e9n se podr\u00eda insertar directamente en la vista en que vaya a ser necesario:</p> <pre><code>&lt;?php\n// Adding jQuery to the view page.\nYii::app()-&gt;getClientScript()-&gt;registerCoreScript('jquery');\n</code></pre>"},{"location":"desarrollo/yii.html#filtrado-referido-en-bootgridview-o-cgridview","title":"Filtrado referido en BootGridView o CGridView","text":"<p>Imaginemos el modelo empleado asociado en n:1 al modelo departamento. En el listado de empleados queremos mostrar el departamento al que pertenece y poder filtrar por el nombre del mismo (no por el ID de departamento como ocurrir\u00eda si indic\u00e1ramos el campo departamento_id que pertenece a empleado). Ver ejemplo en el filtrado del campo xproduct.product en <code>admin.php</code> del modelo Product en R135 del repositorio <code>svn+ssh://edumoreno@192.168.2.250/var/lib/subversion/gestoo/trunk</code>.</p>"},{"location":"ingenieria/3d_printing.html","title":"3D Printing","text":""},{"location":"ingenieria/3d_printing.html#nombres-alternativos-de-anet-a8","title":"Nombres alternativos de Anet A8","text":"<ul> <li>Infitary M505</li> <li>Alunar M505</li> <li>Omni m505</li> </ul>"},{"location":"ingenieria/3d_printing.html#enlaces","title":"Enlaces","text":"<ul> <li>G-code/es: Instrucciones G-code.</li> <li>Lista de v\u00eddeos en canal Dron3D 8A sobre \"Anet A8\"</li> <li>Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Conceptos y ayuda\"</li> <li>Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Software\"</li> <li>Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Tipos de Material\"</li> <li>Anet A8 3DPrint.wiki</li> <li>Trello de \"Comunidad 3D [ES]\"</li> <li>Instalaci\u00f3n de 2 MosFET: Post y STLs</li> <li>Como calibrar el control de temperatura PID de la impresora 3D</li> <li>Calibraci\u00f3n de pasos del motor del extrusor. Instrucciones para realizarlo en Anet A8 aqu\u00ed.</li> <li>Calibraci\u00f3n del Extrusion Multiplier \u2013 Anchura de impresi\u00f3n</li> <li>C\u00f3mo montar Hot End sin romperlo</li> <li>C\u00f3mo modificar home en XY (ajustar extrusor offset). Y el m\u00e1ximo recorrido</li> <li>Actualizar el firmware a partir de un fichero HEX</li> <li>Montura para extrusor E3D</li> <li>Anet A8 - POST DEFINITIVO - Recopilatorio de temas</li> <li>ShapeWays: Servicio de impresi\u00f3n.</li> <li>Piezas interesantes:<ul> <li>Filament clip</li> <li>USB to Dupont adapter for power supply 5V</li> </ul> </li> <li>Mods:<ul> <li>AM8</li> <li>BLV mgn12</li> </ul> </li> </ul>"},{"location":"ingenieria/3d_printing.html#filamento","title":"Filamento","text":"<ul> <li>FlexiSMART</li> <li>SmartMaterials3D: ABS con aditivos para evitar warping y cracking.</li> <li>Sakata3D PLA Ingeo 3D870: Similares caracter\u00edsticas al ABS sin sus inconvenientes (An\u00e1lisis).</li> </ul>"},{"location":"ingenieria/3d_printing.html#hardware-componentes-repuestos","title":"Hardware / Componentes / Repuestos","text":"<ul> <li>Repuestos Anet A8</li> <li>Placa base</li> <li>Rodamiento lineal</li> <li>Rodamiento lineal sin bolas</li> <li>Rodamiento lineal largo</li> <li>Enchufe de corriente de entrada</li> <li>Alargador lector microSD</li> <li>Conectores r\u00e1pidos JST</li> <li>M\u00f3dulo MOSFET</li> <li>M\u00f3dulo MOSFET</li> <li>Sensor de posici\u00f3n inductivo</li> <li>Sensor de posici\u00f3n capacitivo (mejor si se pone cristal a la cama)</li> <li>Cinta de carrocero especial impresoras: Amazon, Banggood</li> <li>Nozzles en medidas 0.2, 0.3 y 0.4 mm. Tambi\u00e9n sueltos: 0.2mm, 0.3 y 0.4.</li> <li>N\u00facleo calentador extrusor</li> <li>Bloque de aluminio soporte del extrusor, el n\u00facleo calentador y el termistor</li> <li>Termistor</li> <li>Tubo conductor filamento al extrusor con tefl\u00f3n</li> <li>Engranaje impulsor filamento</li> <li>Ventilador de capa</li> <li>Ventilador de extrusor</li> <li>Correa ejes X e Y</li> <li>Cristal para cama caliente</li> <li>Motor paso a paso</li> </ul>"},{"location":"ingenieria/3d_printing.html#mejoras-anet-a8","title":"Mejoras Anet A8","text":"<ul> <li>Mejoras sobre montaje original</li> <li>Soporte para las herramientas</li> <li>Conectores en ventiladores</li> <li>Alargador lector microSD</li> <li>MOSFET exterior</li> <li>Soldar conector cama caliente</li> <li>Refuerzos eje X: v1 y v2.</li> <li>Interruptor y ventilador de fuente</li> <li>Ventilador de placa base</li> <li>Soporte para bobina de filamento: Barras 1 o Barras 2 y Eje.</li> <li>Final de carrera Z ajustable</li> <li>Mejoras en tornillos nivelado de cama</li> <li>Base para doble MOSFET: Gu\u00eda de montaje.</li> <li>Acceso r\u00e1pido a engranaje motor extrusor</li> <li>Tensor eje X</li> <li>Tensor eje Y: v1 o v2</li> </ul>"},{"location":"ingenieria/3d_printing.html#piezas-de-la-propia-impresora","title":"Piezas de la propia impresora","text":"<ul> <li>X Motor mount</li> </ul>"},{"location":"ingenieria/3d_printing.html#octoprint","title":"Octoprint","text":"<ul> <li>Control your Anet A8 3D Printer using Octoprint on Raspberry Pi Zero W, direct UART connection</li> <li>Control remoto para tu impresora 3D con Raspberry Pi: Parte 1 y Parte 2.</li> <li>Setup on a Raspberry Pi running Raspbian</li> </ul>"},{"location":"ingenieria/3d_printing.html#parametros-impresion-anet-a8","title":"Par\u00e1metros impresi\u00f3n Anet A8","text":""},{"location":"ingenieria/3d_printing.html#general","title":"General","text":"<ul> <li>X (Width): 220mm</li> <li>Y (Depth): 220mm</li> <li>Z (Height): 240mm</li> <li>Build plate shape: Rectangular</li> <li>Heated bed: Checked</li> <li>Bed center is 0,0,0: Unchecked</li> <li>Material diameter: 1.75mm</li> <li>Nozzle size: 0.4mm</li> </ul>"},{"location":"ingenieria/3d_printing.html#cura-34","title":"Cura 3.4","text":"<p>Los ficheros de preferencias de las distintas versiones se encuentran en la ruta (Linux) <code>~/.config/cura</code> y los de settings en <code>~/.local/share/cura</code>. (Fuente)</p> <ul> <li><code>Quality &gt; Layer Height</code>: 0.2 mm [0.1-0.3] Altura de Capa.</li> <li><code>Quality &gt; Initial Layer Height</code>: 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama.</li> <li><code>Quality &gt; Initial Layer Line Width</code>: 100 %. Permite aumentar ligeramente la anchura de las l\u00edneas de la primera capa para aumentar la adherencia a la cama. B\u00e1sicamente inyecta un poco m\u00e1s de material.</li> <li><code>Shell &gt; Wall Thickness</code>: 1.2 mm [0.8-2.0] Grosor de la piel. Debe ser m\u00faltiplo de <code>Layer Height</code>.</li> <li><code>Shell &gt; Top/Bottom Thickness</code>: 1.2 mm [0.8-2.0] Grosor de la piel superior e inferior. Cuando la densidad de relleno es menor que 20%, se puede producir ca\u00edda de la capa superior. En ese caso se recomienda un m\u00ednimo de 1.2mm.</li> <li><code>Shell &gt; Horizontal Expansion</code>: 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces.</li> <li><code>Infill &gt; Infill Density</code>: 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%.</li> <li><code>Material &gt; Printing Temperature</code>: 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material.</li> <li><code>Material &gt; Build Plate Temperature</code>: 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente.</li> <li><code>Material &gt; Diameter</code>: 1.75 mm. Di\u00e1metro de la entrada del extrusor.</li> <li><code>Material &gt; Flow</code>: 100 %. Sirve para aportar m\u00e1s o menos material si observamos que en las impresiones aparecen bultos o huecos entre las l\u00edneas o capas.</li> <li><code>Material &gt; Enable Retraction</code>: Marcado. Retrae el hilo cuando el cabezal se tiene que desplazar sin imprimir.</li> <li><code>Material &gt; Retraction Distance</code>: 4.5mm. Cantidad de material recogido durante la retracci\u00f3n.</li> <li><code>Material &gt; Retraction Speed</code>: 40 mm/s. Velocidad de la retracci\u00f3n.</li> <li><code>Material &gt; Retraction Minimum Travel</code>: 1.5 mm. Distancia m\u00ednima de desplazamiento del extrusor a partir de la que se aplica retracci\u00f3n.</li> <li><code>Speed &gt; Print Speed</code>: 30 mm/s [10-120] Velocidad de impresi\u00f3n. A menor velocidad m\u00e1s precisi\u00f3n de impresi\u00f3n. No se recomienda pasar de 40-60.</li> <li><code>Speed &gt; Infill Speed</code>: 40 [10-120] Velocidad de impresi\u00f3n del relleno.</li> <li><code>Speed &gt; Outer Wall Speed</code>: 20 [10-120] Velocidad de impresi\u00f3n de las caras externas.</li> <li><code>Speed &gt; Inner Wall Speed</code>: 30 [10-120] Velocidad de impresi\u00f3n de las caras internas. Suele ser un valor intermedio entre <code>Infill Speed</code> y <code>Outer Wall Speed</code>.</li> <li><code>Travel &gt; Combing Mode</code>: Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor.<ul> <li><code>Off</code>: Desplazamientos en l\u00ednea recta.</li> <li><code>All</code>: Desplaza siempre por zonas impresas.</li> <li><code>No Skin</code>: Desplaza por el interior de las piezas, evitando la superficie.</li> </ul> </li> <li><code>Travel &gt; Z Hop When Retracted</code>: Desmarcado. Levanta un poco el extrusor cuando se inicia un desplazamiento para evitar colisiones con las partes ya impresas. Tras probarlo compruebo que en la Anet A8 deja muchos hilos.</li> <li><code>Cooling &gt; Enable Print Cooling</code>: Activa el ventilador de la boquilla del extrusor.<ul> <li>Marcado: En PLA.</li> <li>Desmarcado: En ABS.</li> </ul> </li> <li><code>Cooling &gt; Regular Fan Speed</code>: 30 %. La velocidad del ventilador antes de alcanzar el tiempo m\u00ednimo de impresi\u00f3n de la capa, momento en que se acelera hasta alcanzar la velocidad m\u00e1xima.</li> <li><code>Cooling &gt; Maximum Fan Speed</code>: 70 %. Velocidad m\u00e1xima del ventilador cuando se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa.</li> <li><code>Cooling &gt; Initial Fan Speed</code>: 0 %. Velocidad del ventilador al comienzo de la impresi\u00f3n.</li> <li><code>Cooling &gt; Regular Fan Speed at Height</code>: 0.5 mm. Altura de capa a partir de la cual el ventilador empezar\u00e1 a girar a la velocidad <code>Regular</code>. Este retraso en el encendido del ventilador sirve para mejorar la adhesi\u00f3n de la pieza a la cama.</li> <li><code>Cooling &gt; Minimum Layer Time</code>: 10 seg. Tiempo m\u00ednimo de impresi\u00f3n de una capa. Si no se alcanza antes de empezar una nueva la impresora esperar\u00e1.</li> <li><code>Cooling &gt; Lift Head</code>: Desmarcado. Aparta la cabeza cuando no se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa para evitar que el extrusor gotee sobre la misma. Es mejor bajar la velocidad de impresi\u00f3n en este tipo de piezas peque\u00f1as en las que no se alcance el tiempo m\u00ednimo de impresi\u00f3n de capa.</li> <li><code>Support &gt; Generate Support</code>: Marcado. Generar soporte para partes en voladizo.</li> <li><code>Support &gt; Support Placement</code>: Everywhere<ul> <li><code>Touching Builplate</code>: S\u00f3lo hace soportes en las partes en voladizo sobre la cama.</li> <li><code>Everywhere</code>: Hace soportes en todas las partes que lo necesiten.</li> </ul> </li> <li><code>Build Plate Adhesion Type</code>: Skirt<ul> <li><code>Skirt</code>: Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor.</li> <li><code>Brim</code>: Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama.</li> <li><code>Raft</code>: Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar.</li> </ul> </li> <li><code>Special Modes</code>: All at Once. Usar siempre esta opci\u00f3n.</li> <li><code>Experimental &gt; Tree Support</code>: Hace soportes ramificados.</li> </ul>"},{"location":"ingenieria/3d_printing.html#mas-habituales","title":"M\u00e1s habituales","text":"<p>Los par\u00e1metros que casi siempre merece la pena revisar entre distintas impresiones son:</p> <ul> <li><code>Quality &gt; Layer Height</code>: 0.2 mm [0.1-0.3] Altura de Capa.</li> <li><code>Quality &gt; Initial Layer Height</code>: 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama.</li> <li><code>Shell &gt; Horizontal Expansion</code>: 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces.</li> <li><code>Infill &gt; Infill Density</code>: 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%.</li> <li><code>Material &gt; Printing Temperature</code>: 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material.</li> <li><code>Material &gt; Build Plate Temperature</code>: 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente.</li> <li><code>Travel &gt; Combing Mode</code>: Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor.<ul> <li><code>Off</code>: Desplazamientos en l\u00ednea recta.</li> <li><code>All</code>: Desplaza siempre por zonas impresas.</li> <li><code>No Skin</code>: Desplaza por el interior de las piezas, evitando la superficie.</li> </ul> </li> <li><code>Cooling &gt; Enable Print Cooling</code>: Activa el ventilador de la boquilla del extrusor.<ul> <li>Marcado: En PLA.</li> <li>Desmarcado: En ABS.</li> </ul> </li> <li><code>Support &gt; Generate Support</code>: Marcado. Generar soporte para partes en voladizo.</li> <li><code>Support &gt; Support Placement</code>: Everywhere<ul> <li><code>Touching Builplate</code>: S\u00f3lo hace soportes en las partes en voladizo sobre la cama.</li> <li><code>Everywhere</code>: Hace soportes en todas las partes que lo necesiten.</li> </ul> </li> <li><code>Build Plate Adhesion</code>: Skirt<ul> <li><code>Skirt</code>: Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor.</li> <li><code>Brim</code>: Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama.</li> <li><code>Raft</code>: Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar.</li> </ul> </li> <li><code>Experimental &gt; Tree Support</code>: Hace soportes ramificados.</li> </ul>"},{"location":"ingenieria/3d_printing.html#flasheo-de-firmware-en-anet-a8","title":"Flasheo de firmware en Anet A8","text":"<ol> <li>Copiar el directorio <code>anet</code> de este proyecto al directorio <code>hardware</code> de la instalaci\u00f3n de Arduino IDE.</li> <li>Descargar la \u00faltima versi\u00f3n de Marlin de su repositorio.</li> <li>Descargar la \u00faltima versi\u00f3n de los ficheros de configuraci\u00f3n de las distintas impresoras de su repositorio.</li> <li>Sustituir los ficheros de configuraci\u00f3n adaptados a la Anet A8 que hay en la ruta <code>config/examples/Anet/A8</code> del repositorio de configuraciones por los que hay en <code>Marlin</code> (junto al <code>.ino</code>) del repositorio de Marlin.</li> <li>Seleccionar la placa <code>Anet V1.0</code> y el puerto que corresponda.</li> <li>Compilar y flashear.</li> <li>En el primer arranque es posible que aparezca en pantalla el error <code>Err: EEPROM version</code>. En ese caso:<ol> <li>Conectar el cable USB (si se ha desconectado el puente entre el puerto serie del microcontrolador y el adaptador USB descrito [aqu\u00ed], seleccionar el puerto con los jumpers).</li> <li>Abrir conexi\u00f3n serie ejecutando lo siguiente en terminal:     <pre><code>$ sudo screen /dev/ttyUSB0 115200 8N1\n</code></pre></li> <li>Escribir los siguientes comandos en la consola. Hacerlo uno a uno y con un caracter retorno al final de cada uno. Lo mejor es escribirlos en un editor de texto, copiar cada linea (incluyendo el retorno) y pegarla en la consola. De esta forma se consigue que el comando sea le\u00eddo como un todo y no que se vayan interpretando sus caracteres sueltos conforme vamos escribiendo:     <pre><code>M502\nM500\nM501\n</code></pre></li> </ol> </li> </ol>"},{"location":"ingenieria/arduino.html","title":"Arduino","text":""},{"location":"ingenieria/arduino.html#enlaces","title":"Enlaces","text":"<ul> <li>Parallax Propeller</li> </ul>"},{"location":"ingenieria/arduino.html#adaptador-serie","title":"Adaptador serie","text":"<p>Se puede utilizar muy f\u00e1cilmente un Arduino como adaptador USB-UART sin m\u00e1s que puentear el pin de reset (RST) a GND. En ese caso conectar los pines RX, TX (sin cruzar) y GND hacia el dispositivo que queramos conectar.</p> <p>En caso de que el dispositivo con el que conectemos trabaje a 3.3V (como Raspberry Pi por ejemplo), es necesario montar un divisor de tensi\u00f3n en la l\u00ednea RX tal y como se ve en este art\u00edculo (en el art\u00edculo las l\u00edneas RX/TX s\u00ed que est\u00e1n cruzadas porque se conecta el puerto UART al microcontrolador Atmel, no al adaptador USB):</p> <p></p>"},{"location":"ingenieria/arduino.html#programacion-de-attiny85","title":"Programaci\u00f3n de ATtiny85","text":"<p>El MC ATtiny85 no lleva el bootloader de Arduino que escucha por el puerto serie adaptado a USB ya que ni tiene puerto serie hardware ni suele estar acompa\u00f1ado por el adaptador USB. La \u00fanica forma de programarlo es por ISP o mediante un programador de MC adecuado de los que existen varios. Vamos a ver un par de ellos.</p> <p>Antes de empezar necesitamos cargar en el Arduino IDE las definiciones de placa para soportar ATtiny85 (y algunos de sus hermanos peque\u00f1os). Para ello proceder como sigue (fuente):</p> <ol> <li>Abrimos el Arduino IDE y nos vamos a la ventana de Preferencias (<code>Archivo &gt; Preferencias</code>).</li> <li>En la ventana que aparece introducimos la siguiente URL en el campo <code>Gestor de URLs Adicionales de Tarjetas</code>: https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json</li> <li>Pulsamos <code>OK</code>.</li> <li>Abrimos el Gestor de tarjetas (<code>Herramientas &gt; Placa &gt; Gestor de tarjetas...</code>).</li> <li>Localizamos el m\u00f3dulo <code>attiny by David A. Mellis</code> y lo instalamos.</li> </ol>"},{"location":"ingenieria/arduino.html#programacion-con-arduino","title":"Programaci\u00f3n con Arduino","text":"<p>Podemos utilizar como programador un Arduino (basado en ATmega328p como el UNO) con el sketch \"Arduino ISP\" cargado. Los pasos para programar de esta forma son los siguientes:</p> <ol> <li>Cargamos en el Arduino el sketch \"Arduino ISP\" que hay en ejemplos.</li> <li>Colocamos un condensador de 10\u03bcF entre el pin RESET del Arduino y GND.</li> <li>Cableamos entre el ATtiny85 y el Arduino de la siguiente manera:      </li> <li>Configuramos el Arduino IDE con los siguientes par\u00e1metros:<ul> <li>Placa: <code>ATtiny25/45/85</code></li> <li>Procesador: <code>ATtiny85</code></li> <li>Clock: <code>Internal 8 MHz</code></li> <li>Programador: <code>Arduino as ISP</code></li> </ul> </li> </ol>"},{"location":"ingenieria/arduino.html#programacion-con-buspirate","title":"Programaci\u00f3n con BusPirate","text":"<p>En este caso vamos a utilizar un BusPirate 3.6 como programador y un m\u00f3dulo Digispark para cablear m\u00e1s f\u00e1cilmente la conexi\u00f3n ISP:</p> <ol> <li> <p>Insertar en m\u00f3dulo Digispark. A la tira de pines de 2x4 del m\u00f3dulo le habremos recortado los pines que corresponden a los pines P3 y P4 del ATtiny85, ya que de esta forma la tira de pines se convierte en un conector ISP de 6 pines est\u00e1ndar.</p> <p></p> </li> <li> <p>Conectar el cable ISP entre BusPirate y m\u00f3dulo Digispark cableando como sigue (aunque el ATtiny85 funciona a 5V, parece que soporta sin problemas ser programado a 3.3V):</p> Pin ISP Se\u00f1al Pin BusPirate 1 MISO Negro:MISO 2 +3.3V Rojo:+3.3V 3 SCK Morado:CLK 4 MOSI Gris:MOSI 5 CS Blanco:CS 6 GND Marr\u00f3n:GND <p> </p> </li> <li> <p>Configuramos el Arduino IDE con los siguientes par\u00e1metros:</p> <ul> <li>Placa: <code>ATtiny25/45/85</code></li> <li>Procesador: <code>ATtiny85</code></li> <li>Clock: <code>Internal 8 MHz</code></li> <li>Programador: <code>BusPirate as ISP</code></li> </ul> </li> </ol> <p>Alternativamente podemos programar con el comando <code>avrdude</code> con el argumento <code>-c buspirate</code>. Por ejemplo para obtener el estado de los Fuse bits:</p> <pre><code>$ avrdude -c buspirate -P /dev/ttyUSB0 -p attiny85 -v\n</code></pre> <p>A partir de aqu\u00ed hay varias cosas que podemos hacer.</p>"},{"location":"ingenieria/arduino.html#programacion-con-minipro-tl866xx-desde-linux","title":"Programaci\u00f3n con MiniPRO TL866xx desde Linux","text":"<p>Teniendo el programa minipro instalado, montar el ATtiny85 en el socket ZIP y conectar el cable USB. Interesa antes de empezar, asegurarnos de que el MC es identificado correctamente, lo que nos servir\u00e1 adem\u00e1s para comprobar que las conexiones son correctas, para lo que ejecutamos:</p> <pre><code>edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 --read_id\nFound TL866II+ 04.2.125 (0x27d)\nChip ID OK: 0x1E930B\n</code></pre> <p>Una vez que vemos que la comunicaci\u00f3n se establece sin problemas, grabamos el MC con el siguiente comando:</p> <pre><code>edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 -w PROGRAMA.hex -c code\nFound TL866II+ 04.2.125 (0x27d)\nChip ID OK: 0x1E930B\nFound Intel hex file.\nErasing... 0.01Sec OK\nWriting Code...  1.10Sec  OK\nReading Code...  0.49Sec  OK\nVerification OK\n</code></pre> <p>Para los fuse bits, escribiremos un fichero de texto con el siguiente contenido (los valores de los fusebits que se muestran a continuaci\u00f3n son los predeterminados, pero habr\u00e1 que sustituirlos por los que nos interesen; esta calculadora es muy \u00fatil):</p> <pre><code>fuses_lo = 0x62\nfuses_hi = 0xdf\nfuses_ext = 0xff\nlock_byte = 0xff\n</code></pre> <p>Una vez creado el fichero, cargaremos sus valores en el MC con el siguiente comando:</p> <pre><code>edumoreno@eduardo-HP-Folio-13:~$ minipro -p ATTINY85 -w PROGRAMA.fuses.conf -c config\nFound TL866II+ 04.2.125 (0x27d)\nChip ID OK: 0x1E930B\nWriting fuses... 0.02Sec  OK\n</code></pre>"},{"location":"ingenieria/arduino.html#cambiar-el-reloj","title":"Cambiar el reloj","text":"<p>El ajuste del reloj que va a utilizar el MC es muy importante. Necesitamos conocerla para que el MC responda cuando queramos comunicarnos con \u00e9l para cargarle un programa. Si en alg\u00fan momento lo configuramos para que utilice reloj externo, tendremos que conectar uno entre los pines PB3 y PB4 siguiendo el datasheet. El ajuste del reloj se hace cambiando los fuse bits de 3 bytes especiales del MC. Esto desde el Arduino IDE se hace con el comando \"Quemar Bootloader\" que no hace otra cosa que cambiar estos fuse bits. En caso de cometer alg\u00fan error configurando los fuse bits y tener problemas para comunicar con el MC, se puede usar un programador de alto voltaje para forzar el cambio de los fusebits.</p>"},{"location":"ingenieria/arduino.html#cargar-un-sketch","title":"Cargar un sketch","text":"<p>Simplemente utilizaremos el bot\u00f3n para subir el sketch que tengamos abierto en el Arduino IDE.</p>"},{"location":"ingenieria/freecad.html","title":"FreeCAD","text":""},{"location":"ingenieria/freecad.html#freecad","title":"FreeCAD","text":""},{"location":"ingenieria/freecad.html#enlaces","title":"Enlaces","text":"<ul> <li>Tutoriales de ObiJuan: Temporada 1, Temporada 2</li> <li>Manuales FreeCAD oficiales</li> <li>Wiki oficial</li> <li>KiCAD StepUp cheat sheet</li> <li>Repositorio de Addons</li> <li>Tutorials</li> <li>Learn FreeCAD: Tutoriales en v\u00eddeo.</li> </ul>"},{"location":"ingenieria/freecad.html#importacion-modelo-3d-kicad","title":"Importaci\u00f3n modelo 3D KiCad","text":"<p>KiCad StepUp Cheat Sheeet.</p> <ol> <li>Instalar <code>kicadStepUpMod</code> desde <code>Addon manager</code> en FreeCAD.</li> <li>Conviene que en KiCad est\u00e9 instalado el paquete <code>kicad-packages3d</code> para que adem\u00e1s de la PCB se exporten los vol\u00famenes 3D de los componentes.</li> <li>Comprobar que se corresponde la ruta del par\u00e1metro KISYS3DMOD en ambos programas (<code>Preferences...</code> en FreeCAD y <code>Configure Paths...</code> en KiCad). Para que aparezcan los ajustes de <code>kicadStepUpGui</code> en las preferencias de FreeCAD hay que cargar antes el workbench, ya que para preservar recursos, los workbench no se cargan hasta ser utilizados. Esto puede forzarse por medio de <code>Preferences &gt; Workbenches</code>, seleccionando el m\u00f3dulo y pulsando <code>Load Selected</code>.</li> <li>Cambiar al workbench <code>kicadStepUp</code>.</li> <li>Pulsar el bot\u00f3n  para importar el dise\u00f1o 3D de la PCB.</li> <li>Tras importarlo puede convenir agrupar todos los componentes y la PCB para que queden como un objeto \u00fanico. Para ello utilizar la siguiente herramienta del workbench <code>Draft</code>: </li> </ol>"},{"location":"ingenieria/freecad.html#cheat-sheet","title":"Cheat sheet","text":"<ul> <li>Configuraci\u00f3n recomendada:<ul> <li>Preferences...<ul> <li>General:<ul> <li><code>Document &gt; Save thumbnail into project file when saving document</code>: ON</li> <li><code>Document &gt; Authoring and License &gt; Author name</code>: Nuestro nombre</li> <li><code>Document &gt; Authoring and License &gt; Default license</code>: CreativeCommons Attribution-ShareAlike</li> <li><code>Output window &gt; Redirect internal Python output to report view</code>: ON</li> <li><code>Output window &gt; Redirect internal Python errors to report view</code>: ON</li> </ul> </li> <li>Display:<ul> <li><code>3D View &gt; 3D Navigation</code>: Gesture</li> </ul> </li> <li>(Workbench <code>Part</code>) Part design:<ul> <li><code>General &gt; Model settings &gt; Automatically check model after boolean operation</code>: ON</li> <li><code>General &gt; Model settings &gt; Automatically refine model after boolean operation</code>: ON</li> <li><code>General &gt; Model settings &gt; Automatically refine model after sketch-based operation</code>: ON</li> </ul> </li> </ul> </li> <li>Tipo de navegaci\u00f3n:<ul> <li><code>Right click &gt; Navigation styles</code>: Gesture</li> </ul> </li> </ul> </li> <li>Men\u00fas y Especialidades:<ul> <li><code>File &gt; Import...</code>: Permite importar ficheros STEP para hacer modificaciones.</li> <li><code>Edit &gt; Aligment...</code>: Permite situar un s\u00f3lido sobre un plano.</li> <li><code>Tools &gt; Dependency graph</code>: \u00c1rbol de dependencias entre objetos.</li> <li>Duplicado de objetos (Copias totales, copias simples y piezas clonadas)<ul> <li>Copia total (copiando dependencias): <code>Edit &gt; Copy/Paste</code>. La pieza resultante es param\u00e9trica y no depende de la original.</li> <li>Copia simple (se pierden dependencias): <code>Part &gt; Create simple copy</code>. La pieza resultante no es param\u00e9trica y no depende de la original. En el arbol de dependencias aparece como una pieza aislada.</li> <li>Clones (referenciando las dependencias de la original): <code>Draft &gt; Modification &gt; Clone</code>. La pieza resultante es param\u00e9trica por medio de la original.</li> </ul> </li> <li>Dise\u00f1o de vol\u00famenes a partir de puntos, aristas y caras</li> <li>Restricciones en lineas</li> <li>Redondeando trayectorias: Tuber\u00edas, tubos y cables</li> <li>L\u00edneas: Intersecci\u00f3n, paralelas, perpendiculares y extensi\u00f3n</li> <li>Curvas, elipses y pol\u00edgonos</li> <li>Desplegando objetos</li> <li>Materiales y agrupaciones</li> <li>Generando Planos 2D con cotas y dibujos</li> <li>Haciendo engranajes</li> <li>Bibliotecas de piezas de FreeCAD. La librer\u00eda se encuentra aqu\u00ed.</li> <li>Ensamblaje de Zowi</li> </ul> </li> <li>Workbench:<ul> <li><code>Draft</code>:<ul> <li><code>Working plane</code></li> <li></li> <li><code>Tools</code>:  </li> <li><code>Move</code>: </li> <li><code>Rotate</code>: </li> <li><code>Offsets</code>: </li> <li><code>Trim or extend</code>: </li> <li><code>Joins</code> &amp; <code>Explodes</code>:  </li> <li><code>Edit</code>: </li> <li><code>Converts between Wire and B-spline</code>: </li> <li><code>Creates shape 2D</code>: </li> <li><code>Convert between Draft and Sketch</code>: </li> <li><code>Array</code>:  Multiplicaci\u00f3n de objetos en 1, 2 o 3 dimensiones. Lineal, Axial</li> <li><code>Clone</code>:  Duplicado de objetos vinculados al original con opci\u00f3n de escalado.</li> <li><code>Put objects in Drawing sheet</code>: </li> <li><code>Snap tools</code>:  </li> </ul> </li> <li><code>Drawing</code>:<ul> <li><code>New drawing</code>:  Crear plano de dise\u00f1o.</li> <li><code>Insert projection</code>:  Insertar proyecci\u00f3n en plano de dise\u00f1o.</li> <li><code>Export to SVG</code>:  Exportar a SVG.</li> </ul> </li> <li><code>Part Design</code>:<ul> <li><code>Create sketch</code>:  Crear boceto (plano) de un objeto.</li> <li><code>Pad</code>:  Extruir el boceto de un objeto linealmente.</li> <li><code>Revolve</code>:  Extruir el boceto de un objeto axialmente.</li> <li><code>Pocket</code>:  Vaciar boceto de un objeto.</li> <li><code>Mirror</code>:  Simetr\u00eda de espejo.</li> <li><code>Linear Pattern</code>:  Multiplicaci\u00f3n lineal de una operaci\u00f3n.</li> <li><code>Polar Pattern</code>:  Multiplicaci\u00f3n polar de una operaci\u00f3n.</li> </ul> </li> <li><code>Part</code>: Dise\u00f1o de vol\u00famenes 3D. Algunas de sus herramientas:<ul> <li><code>Tools</code>:  </li> <li><code>Parametrized geometric primitives</code>:  H\u00e9lices, espirales, cu\u00f1as, prismas, localizaci\u00f3n en un plano...</li> <li><code>Shapes</code>:  Piezas a partir de aristas y caras.</li> <li><code>Extrude</code>:  Extrusi\u00f3n de trayectorias. Calcado de dibujos con Inkscape. Extrusi\u00f3n de texto con Inkscape. Importar SVG y convertir a Sketch. Extrusi\u00f3n en diagonal de polil\u00edneas</li> <li><code>Mirror</code>:  Simetr\u00eda de espejo.</li> <li><code>Fillet</code>:  Redondeo de aristas.</li> <li><code>Chamfer</code>:  Chafl\u00e1n en aristas.</li> <li><code>Loft</code>:  Interpolaci\u00f3n entre dos bocetos de objetos.</li> <li><code>Sweep</code>:  Extruir el boceto de un objeto a lo largo de una trayectoria. Puede hacerse con torsi\u00f3n si la trayectoria es una h\u00e9lice.</li> <li><code>Offset</code>:  Offset de objetos.</li> <li><code>Thickness</code>:  Carcasas o recipientes a partir de objetos.</li> <li><code>Fusion</code>:  Uni\u00f3n de vol\u00famenes. Si se ha activado el autorefine se mantendr\u00e1 la relaci\u00f3n entre el volumen fusionado y los constituyentes de manera que podremos modificar sus par\u00e1metros.</li> <li><code>Cut</code>:  Sustracci\u00f3n de vol\u00famenes. Si se ha activado el autorefine se mantendr\u00e1 la relaci\u00f3n entre el volumen fusionado y los constituyentes de manera que podremos modificar sus par\u00e1metros.</li> <li><code>Create shape from mesh</code>: Crear objetos a partir de mallas 3D. El resumen del procedimiento ser\u00eda:<ul> <li>Importar STL</li> <li>En este punto, opcionalmente, a veces ayuda utilizar <code>Meshes &gt; Split by components</code> del banco de trabajo <code>Mesh Design</code>. Tambi\u00e9n <code>Analyze &gt; Evaluate and repair mesh</code> del mismo banco de trabajo.</li> <li>Pasar al banco de trabajo <code>Part</code></li> <li><code>Part &gt; Create shape from mesh</code></li> <li><code>Part &gt; Convert to solid</code></li> <li><code>Part &gt; Refine shape</code></li> </ul> </li> <li><code>Create simple copy</code></li> <li><code>Measure</code>:  </li> </ul> </li> <li><code>Sketcher</code>:<ul> <li><code>Tools</code>:  </li> <li><code>Fillet</code>:  Redondea un v\u00e9rtice de un plano.</li> <li><code>Trim</code>:  Recorta las l\u00edneas sobrantes de un plano.</li> <li><code>Create edge</code>:  Crea linea de referencia en base a una arista de un objeto externo al sketch.</li> <li><code>Toggles to/from construction mode</code>:  Alterna un objeto entre el modo normal y el auxiliar.</li> <li><code>Constraints</code>:  </li> </ul> </li> </ul> </li> </ul>"},{"location":"ingenieria/herramientas.html","title":"Herramientas","text":""},{"location":"ingenieria/herramientas.html#bus-pirate","title":"Bus Pirate","text":""},{"location":"ingenieria/herramientas.html#enlaces","title":"Enlaces","text":"<ul> <li>Bus Pirate - Documentaci\u00f3n oficial</li> <li>BusPirate oscilloscope python script</li> <li>Bus Pirate AVR Programming</li> </ul>"},{"location":"ingenieria/herramientas.html#referencia","title":"Referencia","text":"<pre><code>General                                 Protocol interaction\n---------------------------------------------------------------------------\n?       This help                       (0)     List current macros\n=X/|X   Converts X/reverse X            (x)     Macro x\n~       Selftest                        [       Start\n#       Reset                           ]       Stop\n$       Jump to bootloader              {       Start with read\n&amp;/%     Delay 1 us/ms                   }       Stop\na/A/@   AUXPIN (low/HI/READ)            \"abc\"   Send string\nb       Set baudrate                    123\nc/C     AUX assignment (aux/CS)         0x123\nd/D     Measure ADC (once/CONT.)        0b110   Send value\nf       Measure frequency               r       Read\ng/S     Generate PWM/Servo              /       CLK hi\nh       Commandhistory                  \\       CLK lo\ni       Versioninfo/statusinfo          ^       CLK tick\nl/L     Bitorder (msb/LSB)              -       DAT hi\nm       Change mode                     _       DAT lo\no       Set output type                 .       DAT read\np/P     Pullup resistors (off/ON)       !       Bit read\ns       Script engine                   :       Repeat e.g. r:10\nv       Show volts/states               .       Bits to read/write e.g. 0x55.2\nw/W     PSU (off/ON)            &lt;x&gt;/&lt;x= &gt;/&lt;0&gt;   Usermacro x/assign x/list all\n</code></pre>"},{"location":"ingenieria/herramientas.html#conexion","title":"Conexi\u00f3n","text":"<pre><code>$ screen /dev/buspirate 115200 8N1\n</code></pre>"},{"location":"ingenieria/herramientas.html#adaptador-usb-uart-modo-bridge","title":"Adaptador USB-UART (modo bridge)","text":"<p>Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia:</p> <pre><code>HiZ&gt;m3\nSet serial port speed: (bps)\n 1. 300\n 2. 1200\n 3. 2400\n 4. 4800\n 5. 9600\n 6. 19200\n 7. 38400\n 8. 57600\n 9. 115200\n10. BRG raw value\n\n(1)&gt;5\nData bits and parity:\n 1. 8, NONE *default\n 2. 8, EVEN\n 3. 8, ODD\n 4. 9, NONE\n(1)&gt;1\nStop bits:\n 1. 1 *default\n 2. 2\n(1)&gt;1\nReceive polarity:\n 1. Idle 1 *default\n 2. Idle 0\n(1)&gt;1\nSelect output type:\n 1. Open drain (H=Hi-Z, L=GND)\n 2. Normal (H=3.3V, L=GND)\n\n(1)&gt;2\nReady\nUART&gt;(0)\n 0.Macro menu\n 1.Transparent bridge\n 2. Live monitor\n 3.Bridge with flow control\nUART&gt;(1)\nUART bridge\nReset to exit\nAre you sure? y\n</code></pre>"},{"location":"ingenieria/herramientas.html#adaptador-usb-uart-modo-debug","title":"Adaptador USB-UART (modo debug)","text":"<p>Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed, s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando <code>r</code>) se nos mostrar\u00e1 el error:</p> <pre><code>READ: 0x40 *Bytes dropped*&lt;&lt;&lt;bytes dropped error\n</code></pre> <p>En esas situaciones usar el modo transparente o usar el comando 'start' (<code>[</code>).</p>"},{"location":"ingenieria/herramientas.html#logic-analizer","title":"Logic Analizer","text":""},{"location":"ingenieria/herramientas.html#enlaces_1","title":"Enlaces","text":"<ul> <li>sigrok: Portable, cross-platform, Free/Libre/Open-Source signal analysis software suite that supports various device types (e.g. logic analyzers, oscilloscopes, and many more).</li> <li>Getting started with a logic analyzer</li> <li>Using the USB Logic Analyzer with sigrok PulseView</li> </ul>"},{"location":"ingenieria/herramientas.html#m328-transistor-tester","title":"M328 Transistor Tester","text":""},{"location":"ingenieria/herramientas.html#enlaces_2","title":"Enlaces","text":"<ul> <li>2016 DIY KITS ATMEAG328P M328 Transistor Tester LCR Diode Capacitance ESR meter PWM Square wave Signal Generator with case: ~12\u20ac</li> <li>M328 Transistor Tester manual</li> </ul>"},{"location":"ingenieria/herramientas.html#enumeracion-funciones","title":"Enumeraci\u00f3n funciones","text":"<p>Firmware 1.12k</p> <ul> <li>Transistor: Medidor de transistores.</li> <li>Frecuency: Medidor de frecuencias. Conectar las puntas en la entrada PWM (superior).</li> <li>f-Generator: Generador de frecuencias. Conectar las puntas en la salida PWM (inferior).</li> <li>10-bit PWM: Generador de se\u00f1al PWM. Conectar las puntas en la salida PWM (inferior).</li> <li>C+ESR@TP1:3: Capac\u00edmetro con posibilidad de medir en placa ya que genera tensiones de ~300mV. Aunque es recomendable medir antes con un oscilosc\u00f3pio si es as\u00ed (mi unidad aplicaba 5V igual que el capac\u00edmetro normal). Conectar un par de puntas en las entradas 1 y 3.</li> <li>Medidor de inductancias:</li> <li>Capac\u00edmetro: No sirve para medir en placa ya que genera tensiones de 5V. Descargar los condensadores antes de aplicarlos al medidor.</li> <li>DS18B20:</li> <li>C(uF)-correction: Calibraci\u00f3n del capac\u00edmetro.</li> <li>IR_Decoder: Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un receptor IR en las entradas 1, 2 y 3.</li> <li>IR_Encoder: Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un LED emisor de IR en la salida PWM (inferior).</li> <li>DHT11:</li> <li>Selftest: Calibraci\u00f3n del tester.</li> <li>Voltage: Volt\u00edmetro. Conectar las puntas en la entrada de volt\u00edmetro (inferior).</li> <li>FrontColor: Color RGB de los caracteres.</li> <li>BackColor: Color RGB del fondo.</li> <li>Show data: Muestra los datos de calibraci\u00f3n y el juego de gr\u00e1ficos y caracteres.</li> <li>Switch off: Apagado.</li> </ul>"},{"location":"ingenieria/herramientas.html#firmware","title":"Firmware","text":"<p>El repositorio SVN del proyecto se baja con:</p> <pre><code>$ svn checkout svn://mikrocontroller.net/transistortester\n</code></pre> <p>Para actualizarlo a la \u00faltima versi\u00f3n una vez bajado, ejecutar desde el propio directorio:</p> <pre><code>$ svn update\n</code></pre> <p>Tambi\u00e9n se puede explorar el repositorio en esta URL.</p> <p>La configuraci\u00f3n del modelo enlazado arriba es la mega328_color_kit.</p> <p>Instrucciones sobre la carga del firmware en este hilo del foro EEVBlog.</p>"},{"location":"ingenieria/herramientas.html#minipro-tl866xx","title":"MiniPRO TL866xx","text":""},{"location":"ingenieria/herramientas.html#enlaces_3","title":"Enlaces","text":"<ul> <li>XGecu T56 Universal programmer</li> <li>minipro: An open source program for controlling the MiniPRO TL866xx series of chip programmers. Instalaci\u00f3n en Linux</li> </ul>"},{"location":"ingenieria/herramientas.html#firmware_1","title":"Firmware","text":"<ol> <li>Descargar el \u00faltimo paquete del fabricante desde este enlace, que incluye la utilidad de interfaz de usuario para Windows y el fichero <code>.dat</code> con el firmware.</li> <li>Descomprimir el .exe que lleva dentro. Ese exe a su vez es un paquete autodescomprimible, por lo que se puede abrir con un descompresor como WinRAR o el Gestor de archivadores de Linux. Extraer de \u00e9l el fichero <code>updateII.dat</code>. Por alg\u00fan motivo da error con el Gestor de archivadores de Linux. Se puede descomprimir con Archive Extractor Online.</li> <li> <p>Flashear el fichero <code>updateII.dat</code> con la utilidad minipro:</p> <pre><code>edumoreno@eduardo-HP-Folio-13:~$ minipro -F updateII.dat\nFound TL866II+ 04.2.86 (0x256)\nWarning: Firmware is out of date.\n  Expected  04.2.123 (0x27b)\n  Found     04.2.86 (0x256)\nupdateII.dat contains firmware version 4.2.125 (newer)\n\nDo you want to continue with firmware update? y/n:y\nSwitching to bootloader... OK\nErasing... OK\nReflashing... 100%\nResetting device... OK\nReflash... OK\n</code></pre> </li> </ol>"},{"location":"ingenieria/herramientas.html#uso-de-utilidad-minipro-de-linea-de-comando","title":"Uso de utilidad minipro de linea de comando","text":"<ul> <li>Versi\u00f3n firmware y utilidad: <code>minipro -V</code></li> <li>Testeo dispositivo: <code>minipro -t</code></li> <li>B\u00fasqueda de integrados compatibles: <code>minipro -L &lt;search&gt;</code></li> <li>Indicar modelo de programador <code>TL866II+</code> en comandos: <code>minipro -q tl866ii</code></li> <li>Programar integrado (ejemplo con ATTiny85): <code>minipro -p ATTINY85 -w &lt;filename&gt;</code></li> <li>Leer integrado (ejemplo con ATTiny85; adem\u00e1s del volcado de la flash, genera un par de ficheros adicionales, uno con el volcado de la EEPROM y otro con la configuraci\u00f3n de fuse bits): <code>minipro -p ATTINY85 -r &lt;filename&gt;</code></li> <li>Leer tipo de memoria concreta (posibles valores: code, data, config) en integrado (ejemplo con ATTiny855): <code>minipro -p ATTINY85 -r &lt;filename&gt; -c &lt;type&gt;</code></li> </ul>"},{"location":"ingenieria/herramientas.html#pinecil","title":"Pinecil","text":""},{"location":"ingenieria/herramientas.html#enlaces_4","title":"Enlaces","text":"<ul> <li>Carcasas transporte<ul> <li>Rugged Multipart Pinecil/TS100/TS80 Case (V2)</li> </ul> </li> <li>Firmware<ul> <li>Wiki oficial</li> <li>IronOS - Flexible Soldering iron control Firmware</li> </ul> </li> </ul>"},{"location":"ingenieria/herramientas.html#menu-cheatsheet","title":"Menu cheatsheet","text":"<p>Correspondiente a IronOS v2.16:</p> <ul> <li>Soldering mode<ul> <li><code>+</code> short press: Short temperature increment</li> <li><code>+</code> long press: Long temperature increment</li> <li><code>-</code> short press: Short temperature decrement</li> <li><code>-</code> long press: Long temperature decrement</li> <li><code>+/-</code> same time press: Exit soldering mode</li> <li><code>-</code> long press: Exit soldering mode</li> <li><code>+</code> long press: Boost mode (if enabled)</li> </ul> </li> <li>Power settings<ul> <li>Power source: Sets cutoff voltage. (DC 10V) (S 3.3V per cell, disable power limit) # Default: DC</li> <li>QC voltage: Max QC voltage the iron should negotiate for # Default: 9.0</li> <li>PD timeout: PD negotiation timeout in 100ms steps for compatibility with some QC chargers # Default: 20</li> </ul> </li> <li>Soldering settings<ul> <li>Boost temp: Temperature used in \"boost mode\" # Default: 420</li> <li>Heat on power up: O=off | S=soldering temp | Z=standby at sleep temp until moved | R=standby without heating until moved # Default: O</li> <li>Temp change short: Temperature-change-increment on short button press # Default: 1</li> <li>Temp change long: Temperature-change-increment on long button press # Default: 10</li> <li>Allow locking buttons: While soldering, hold down both buttons to toggle locking them (D=disable | B=boost mode only | F=full locking) # Default: D</li> </ul> </li> <li>Sleep mode<ul> <li>Motion sensitivity: 0=off | 1=least sensitive | ... | 9=most sensitive # Default: 7</li> <li>Sleep temp: Tip temperature while in \"sleep mode\" # Default: 150</li> <li>Sleep timeout: Interval before \\\"sleep mode\\\" kicks in (S=seconds | M=minutes) # Default: 50S</li> <li>Shutdown timeout: Interval before the iron shuts down (M=minutes) # Default: 10M</li> <li>Hall sensor sensitivity: Sensitivity of the Hall effect sensor to detect sleep (O=off | L=low | M=medium | H=high) # Default: L</li> </ul> </li> <li>User interface<ul> <li>Temperature unit: C=Celsius | F=Fahrenheit # Default: C</li> <li>Display orientation: R=right-handed | L=left-handed | A=automatic # Default: R</li> <li>Cooldown blink: Flash the temperature reading after heating was halted while the tip is still hot # Default: False</li> <li>Scrolling speed: Speed info text scrolls past at (S=slow | F=fast) # Default: S</li> <li>Reverse + - keys: Reverse assignment of buttons for temperature adjustment # Default: False</li> <li>Anim. speed: Pace of icon animations in menu (O=off | S=slow | M=medium | F=fast) # Default: M</li> <li>Anim. loop: Loop icon animations in main menu # Default: True</li> <li>Brightness: Adjust the brightness of the OLED screen # Default: 4</li> <li>Invert: Invert the colours of the OLED screen # Default: False</li> <li>Detailed idle screen: Display detailed information in a smaller font on the idle screen # Default: False</li> <li>Detailed solder screen: Display detailed information in a smaller font on soldering screen # Default: False</li> </ul> </li> <li>Advanced settings<ul> <li>Power limit: Maximum power the iron can use (W=watt) # Default: Off</li> <li>Factory reset?: Reset settings to default</li> <li>Calibrate temperature?: Start tip temperature offset calibration</li> <li>Calibrate input voltage?: Start VIN calibration (long press to exit)</li> <li>Power pulse: Intensity of power of keep-awake-pulse (watt) # Default: Off</li> </ul> </li> </ul>"},{"location":"ingenieria/kicad.html","title":"KiCad","text":""},{"location":"ingenieria/kicad.html#enlaces","title":"Enlaces","text":"<ul> <li>Creating A PCB In Everything: KiCad: Part 1, Part 2 y Part 3</li> <li>KiCad Best Practices: Library Management</li> <li>Desing Rules recomendadas para minimizar problemas en fabricaci\u00f3n PCB's</li> <li>KiCad Templates for new projects: Plantillas con ajustes adecuados para distintos fabricantes de PCBs.</li> <li>Sizing Logos in KiCAD</li> <li>Librer\u00eda de componentes de JLCPCB para Assembly Service</li> <li>Calculadoras de conversi\u00f3n en l\u00ednea por DigiKey</li> <li>Svg2Shenzhen: Inkscape extension for exporting drawings into a KiCad PCB.</li> <li>Descarga de footprints y modelos 3D:<ul> <li>SnapEDA</li> <li>PARTcommunity</li> </ul> </li> <li>Interactive HTML BOM plugin for KiCad</li> <li>Herramientas de Jan Mr\u00e1zek:<ul> <li>KiKit: Automation for KiCAD: panelization, automatic DRC check, generating assembly data.</li> <li>PcbDraw, Pinion: Making nice pinout diagrams for your boards</li> <li>JLCPars: Parametric search for electronics components</li> <li>YSpurGear, YBevelGear: Parametric generators for gears in Fusion 360 which allow you to edit the gear parameters in history.</li> </ul> </li> <li>Uso de etiquetas en KiCad para la conexi\u00f3n de componentes</li> <li>Best practices and considerations when designing your PCB</li> <li>Solder-stencil.me: Aplicaci\u00f3n/servicio para generar STLs a partir de los Gerber para imprimir stencils con una impresora 3D.</li> </ul>"},{"location":"ingenieria/kicad.html#gestion-de-librerias","title":"Gesti\u00f3n de librer\u00edas","text":"<ol> <li> <p>Crear la siguiente estructura de directorios al crear un nuevo proyecto:</p> <pre><code>mi_proyecto\n \u21b33d_models     // .STEP and .WRL model files for all footprints\n \u21b3datasheets    // data sheets for components used\n \u21b3gerber        // final production files\n \u21b3images        // SVG images and 3D board renders\n \u21b3lib_sch       // schematic symbols\n \u21b3lib_fp.pretty // footprints\n \u21b3pdf           // schematics, board layouts, dimension drawings\n</code></pre> </li> <li> <p>Conforme se va editando un esquem\u00e1tico, KiCad va incorporando todos los s\u00edmbolos utilizados (procedentes de las librer\u00edas de la aplicaci\u00f3n y de las creadas para el proyecto) a una librer\u00eda de backup llamada \"mi_proyecto-cache.lib\". Una vez que el esquem\u00e1tico est\u00e9 completo, copiar dicha librer\u00eda al directorio <code>lib_sch</code>, renombr\u00e1ndola para quitar el sufijo <code>-cache</code> del nombre, es decir quedando <code>lib_sch/mi_proyecto.lib</code>.</p> </li> <li> <p>En el editor del esquem\u00e1tico abrir el comando de men\u00fa <code>Preferencias &gt; Administrar librer\u00edas de s\u00edmbolos...</code>, seleccionar la pesta\u00f1a <code>Librer\u00edas espec\u00edficas del proyecto</code> y a\u00f1adir la librer\u00eda que hemos copiado en el paso anterior por medio del bot\u00f3n con forma de carpeta (<code>Add existing library to table</code>). De esta forma nunca perderemos los s\u00edmbolos utilizados durante la creaci\u00f3n del esquema (se podr\u00edan modificar al actualizar las librer\u00edas del programa):</p> <p></p> </li> </ol> <p>Una alternativa a la forma de trabajar anterior es recoger todos los s\u00edmbolos y footprints generados en una librer\u00eda independiente que se pueda a\u00f1adir a todos los proyectos, una especie de repositorio personal. La incorporaremos como un subm\u00f3dulo git. Para ello seguir estos pasos:</p> <ol> <li> <p>Inicializar un repositorio git para el proyecto:</p> <pre><code>$ cd mi_proyecto\n$ git init\n</code></pre> </li> <li> <p>Instalar la librer\u00eda como un subm\u00f3dulo git en un directorio llamado <code>lib</code>:</p> <pre><code>$ git submodule add git@github.com:eduardofilo/kicad_footprints.git lib\n</code></pre> </li> <li> <p>A\u00f1adir la librer\u00eda de s\u00edmbolos desde <code>Preferences &gt; Manage Symbol Libraries... &gt; Project Specific Libraries</code>:</p> <p></p> </li> <li> <p>Y la librer\u00eda de footprints desde <code>Preferences &gt; Manage Footprint Libraries... &gt; Project Specific Libraries</code>:</p> <p></p> </li> </ol>"},{"location":"ingenieria/kicad.html#workflow","title":"Workflow","text":"<p>En general KiCad se utiliza con atajos de teclado. Para obtener los atajos de teclado que sirven en una de las aplicaciones, pulsar <code>Ctrl+F1</code>.</p> <ol> <li>Crear proyecto:<ol> <li>Desde la ventana principal del programa, <code>File &gt; FNew &gt; Project...</code></li> </ol> </li> <li>Dise\u00f1ar s\u00edmbolo:<ol> <li>Abrir el programa <code>Symbol Editor</code>. </li> <li>Para mantener los ficheros del nuevo s\u00edmbolo, escoger uno de estos caminos en funci\u00f3n de si se quiere mantener el s\u00edmbolo exclusivamente dentro del proyecto o de forma global:<ul> <li>Crear una nueva librer\u00eda con el comando <code>File &gt; New Library...</code> en el directorio <code>lib_sch</code>. En el popup <code>Add To Library Table</code> que aparece seleccionar la opci\u00f3n <code>Project</code>.</li> <li>Instalar a nivel global (<code>Preferences &gt; Manage Symbol Libraries...</code>) las que se mantienen en este repositorio.</li> </ul> </li> <li>Seleccionar la librer\u00eda recien creada o importada y pulsar el bot\u00f3n <code>Create new symbol</code>. </li> <li>Se nos preguntar\u00e1 por la librer\u00eda donde incorporarlo. Seleccionar la que acabamos de crear (aparecer\u00e1 al final).</li> <li>Rellenar el cuadro <code>Symbol Properties</code>. Fundamentalmente tenemos que dar un nombre para el componente.</li> <li>Crear el s\u00edmbolo del componente utilizando fundamentalmente los siguientes atajos de teclado:<ul> <li><code>M</code>: Mover objeto.</li> <li><code>P</code>: Crear pin. El c\u00edrculo al final de la l\u00ednea representa el punto donde se har\u00e1 la conexi\u00f3n. </li> <li><code>Supr</code>: Eliminar objeto.</li> </ul> </li> <li>Decorar el s\u00edmbolo con las herramientas de dibujo.</li> <li>Guardar los cambios. </li> </ol> </li> <li>Dise\u00f1ar esquem\u00e1tico:<ol> <li>Abrir el programa <code>Schematic Layout Editor (eeschema)</code>. </li> <li>A\u00f1adir los s\u00edmbolos que van a componer el esquem\u00e1tico con la ayuda de los siguientes atajos:<ul> <li><code>A</code>: A\u00f1adir s\u00edmbolo. </li> <li><code>P</code>: A\u00f1adir fuente de alimentaci\u00f3n o masa. </li> <li><code>C</code>: Copiar s\u00edmbolo.</li> </ul> </li> <li>Una vez que tengamos todos los s\u00edmbolos a la vista los reorganizaremos y cablearemos con los siguientes atajos de teclado:<ul> <li><code>M</code>: Mover objeto (rompe las conexiones).</li> <li><code>G</code>: Arrastrar objeto (mantiene las conexiones).</li> <li><code>R</code>: Rotar objeto.</li> <li><code>E</code>: Editar propiedades del objeto como Referencia (<code>U</code>), Valor (<code>V</code>) o Footprint (<code>F</code>).</li> <li><code>W</code>: Conexi\u00f3n entre s\u00edmbolos. </li> <li><code>K</code>: Terminar el trazado de una conexi\u00f3n.</li> <li><code>Q</code>: A\u00f1adir no conexi\u00f3n.</li> <li><code>L</code>: A\u00f1adir etiqueta de red. </li> <li><code>I</code>: A\u00f1adir polil\u00ednea. </li> <li><code>T</code>: A\u00f1adir texto.</li> </ul> </li> <li>Dar valores a los componentes que lo necesiten (Resistencias, Condesadores, Diodos, etc.) con el atajo <code>V</code> o <code>E</code>.</li> <li>Dar nombre a los componentes. Se puede hacer autom\u00e1ticamente con la herramienta de anotaci\u00f3n a la que se accede con el bot\u00f3n  de la barra superior.</li> </ol> </li> <li>Asociar s\u00edmbolos del esquem\u00e1tico con huellas PCB ejecutando CvPCB. . Aprovechar los botones de filtrado, sobre todo <code>Filter footprint list using a partial name or a pattern</code>.</li> <li>Dise\u00f1ar las huellas que no se encuentren en la librer\u00eda:<ol> <li>Abrir el programa <code>Footprint Editor</code>. </li> <li>Para mantener los ficheros de la nueva huella, escoger uno de estos caminos en funci\u00f3n de si se quiere mantener exclusivamente dentro del proyecto o de forma global:<ul> <li>Crear una nueva librer\u00eda con el comando <code>File &gt; New Library...</code> en el directorio <code>lib_fp.pretty</code>. En el popup <code>Select Library Table</code> que aparece seleccionar la opci\u00f3n <code>Project</code>.</li> <li>Instalar a nivel global (<code>Preferences &gt; Manage Footprint Libraries...</code>) las que se mantienen en este repositorio en el directorio <code>eduardofilo_footprints.pretty</code>.</li> </ul> </li> <li>Seleccionar en la lista de librer\u00edas la que acabamos de crear o incorporar en el paso anterior. De esta forma la nueva huella que vamos a crear se crear\u00e1 dentro de esta librer\u00eda.</li> <li>Pulsar el bot\u00f3n <code>New footprint</code>. </li> <li>Darle nombre en el popup que aparece.</li> <li>Crear la huella utilizando fundamentalmente los siguientes atajos de teclado:<ul> <li><code>M</code>: Mover objeto.</li> <li><code>R</code>: Rotar objeto.</li> <li>Add pad: </li> <li><code>E</code>: Editar propiedad de objeto. Cuando se aplica sobre los pads es importante asignar correctamente el valor del <code>Pad number</code> ya que es como se enlazan los s\u00edmbolos con las huellas.</li> </ul> </li> <li>Decorar la huella con las herramientas de dibujo.</li> <li>Guardar los cambios. </li> </ol> </li> <li>Dise\u00f1ar la PCB:<ol> <li>En <code>Schematic Layout Editor (eeschema)</code> pulsar el bot\u00f3n <code>Generate netlist</code>. </li> <li>En el popup que aparece pulsar el bot\u00f3n <code>Generate Netlist</code>.</li> <li>Guardar el fichero que genera en la ra\u00edz del proyecto.</li> <li>Abrir el programa <code>PCB Layout Editor (pcbnew)</code>. </li> <li>Importar el netlist utilizando el bot\u00f3n <code>Load netlist</code>. </li> <li>En el popup que aparece seleccionar el fichero que hemos generado en el punto 3 anterior.</li> <li>Pulsar el bot\u00f3n <code>Update PCB</code>.</li> <li>Cerrar el popup y hacer clic sobre la PCB para colocar las huellas.</li> <li>Utilizando los atajos <code>M</code> y <code>R</code> recolocar todos los componentes como m\u00e1s convenga.</li> <li>Ocultar las etiquetas que no interesen, pulsando <code>E</code> sobre ellas y desmarcando el check <code>Visible</code>.</li> <li>Dibujar el perfil de la PCB con las herramientas de dibujo en la capa <code>Edge.Cuts</code>.</li> <li>Rutear haciendo uso de los siguientes atajos de teclado:<ul> <li><code>X</code>: A\u00f1adir pista.</li> <li><code>V</code>: A\u00f1adir v\u00eda.</li> <li><code>M</code>: Mover componente.</li> <li><code>R</code>: Rotar componente.</li> <li><code>D</code>: Arrastrar pista.</li> </ul> </li> <li>Crear las zonas rellenas de cobre (normalmente para las nets +5V y GND):<ol> <li>Seleccionar la capa donde queremos crear la zona rellena de cobre (<code>F.Cu</code> o <code>B.Cu</code> normalmente).</li> <li>Seleccionar la herramienta <code>Add filled zones</code>. </li> <li>Delimitar una superficie que englobe la parte de la PCB que queremos rellenar de cobre. Al pinchar el primer v\u00e9rtice aparecer\u00e1 una ventana en la que tendremos que indicar las propiedades de la zona a rellenar donde indicaremos la net y la capa de cobre.</li> <li>En caso de modificar las pistas m\u00e1s adelante, pulsar <code>B</code> para recalcular las zonas rellenas de cobre.</li> </ol> </li> <li>Ejecutar las DRC pulsando el bot\u00f3n <code>Perform design rules check</code>. </li> </ol> </li> <li>Exportar Gerber:<ol> <li>Pulsar el bot\u00f3n <code>Plot (HPGL, Postscript, or GERBER format)</code>. </li> <li>En la ventana que aparece, seleccionar las capas que queremos incluir y las opciones que se ven a continuaci\u00f3n e indicar el directorio <code>gerber</code> del proyecto (en esta p\u00e1gina se muestran las opciones m\u00e1s recomendables para JLCPCB).     </li> <li>Pulsar el bot\u00f3n <code>Plot</code>.</li> <li>Pulsar el bot\u00f3n <code>Generate Drill Files</code> y en la nueva ventana que aparece encima pulsar el bot\u00f3n <code>Generate Drill File</code>.</li> </ol> </li> <li>Exportar BOM:<ol> <li>Pulsar el bot\u00f3n <code>Generate bill of materials</code>. </li> <li>De la lista <code>BOM plugins</code> que aparece seleccionar <code>bom2grouped_csv</code> y pulsar <code>Generate</code>.</li> </ol> </li> <li>Cambios en esquem\u00e1tico y propagaci\u00f3n:<ol> <li>Hacer el cambio en <code>Schematic Layout Editor (eeschema)</code>.</li> <li>Dar nombre a los nuevos componentes. Se puede hacer autom\u00e1ticamente con la herramienta de anotaci\u00f3n a la que se accede con el bot\u00f3n  de la barra superior.</li> <li>Volver a <code>PCB Layout Editor (pcbnew)</code> y pulsar el bot\u00f3n <code>Update PCB from schematic</code>. </li> <li>En el popup que aparece pulsar el bot\u00f3n <code>Update PCB</code>. Nos har\u00e1 un informe de los cambios. En caso de que los cambios impliquen componentes nuevos, cuando lo cerremos se nos cargar\u00e1n en el cursor para incorporarlos al PCB.</li> </ol> </li> </ol> <p>Las capas m\u00e1s importantes son:</p> <ul> <li><code>F.Cu</code>: Capa superior de cobre. Atajo de teclado: <code>RePag</code>.</li> <li><code>B.Cu</code>: Capa inferior de cobre. Atajo de teclado: <code>AvPag</code>.</li> <li><code>Edge.Cuts</code>: Perfil de corte de la PCB.</li> <li><code>F.SilkS</code>: Silkscreen superior o capa donde se representan los s\u00edmbolos y textos de los componentes habitualmente en blanco.</li> <li><code>B.SilkS</code>: Silkscreen inferior.</li> <li><code>F.Mask</code>: M\u00e1scara de soldado superior, habitualmente en verde.</li> <li><code>B.Mask</code>: M\u00e1scara de soldado inferior.</li> </ul>"},{"location":"ingenieria/kicad.html#generacion-modelo-3d-de-la-placa","title":"Generaci\u00f3n modelo 3D de la placa","text":"<p>Es recomendable instalar los paquetes recomendados con apt cuando se instala KiCad. Se puede hacer con la siguiente opci\u00f3n en el comando de instalaci\u00f3n:</p> <pre><code>$ sudo apt install --install-recommends kicad\n</code></pre> <p>En caso de no tener las librer\u00edas de paquetes 3D o querer forzar el tener la \u00faltima versi\u00f3n de Github, se puede proceder como sigue:</p> <ol> <li> <p>Bajar el repositorio con los modelos de los componentes:</p> <pre><code>cd ~/git\ngit clone git@gitlab.com:kicad/libraries/kicad-packages3D.git\n</code></pre> </li> <li> <p>Abrir el men\u00fa `Preferencias &gt; Configure Paths...\".</p> </li> <li> <p>Configurar el repositorio recien bajado como la nueva ruta de la librer\u00eda <code>KISYS3DMOD</code> (originalmente la ruta es <code>/usr/share/kicad/modules/packages3d/</code>):</p> <p>)</p> </li> <li> <p>En Pcbnew editar las propiedades de las huellas y en la solapa <code>Opciones 3D</code> a\u00f1adir la ruta del modelo 3D o ajustarla si es que existe.</p> <p>)</p> </li> <li> <p>Abrir el men\u00fa <code>Ver &gt; Visor 3D</code>.</p> </li> </ol>"},{"location":"ingenieria/kicad.html#designacion-de-componentes","title":"Designaci\u00f3n de componentes","text":"<p>Fuente</p> Referencia Tipo de componente A Separable assembly or sub-assembly (e.g. printed circuit assembly) AT Attenuator or isolator BR Bridge Rectifier BT Battery C Capacitor CN Capacitor network D Diode (including zeners, thyristors and LEDs) DL Delay line DS Display F Fuse FB or FEB Ferrite bead FD Fiducial FL Filter G Generator or oscillator GN General network H Hardware HY Circulator or directional coupler J Jack (least-movable connector of a connector pair) | Jack connector (connector may have \"male\" pin contacts and/or \"female\" socket contacts) JP Link (Jumper) K Relay or contactor L Inductor or coil or ferrite bead LS Loudspeaker or buzzer M Motor MK Microphone MP Mechanical part (including screws and fasteners) P Plug (most-movable connector of a connector pair) | Plug connector (connector may have \"male\" pin contacts and/or \"female\" socket contacts) PS Power supply Q Transistor (all types) R Resistor RN Resistor network RT Thermistor RV Varistor S Switch (all types, including push-buttons) T Transformer TC Thermocouple TUN Tuner TP Test point U Inseparable assembly (e.g., integrated circuit) V Vacuum Tube VR Variable Resistor (potentiometer or rheostat) X Socket connector for another item not P or J, paired with the letter symbol for that item (XV for vacuum tube socket, XF for fuse holder, XA for printed circuit assembly connector, XU for integrated circuit connector, XDS for light socket, etc.) Y Crystal or oscillator Z Zener Diode"},{"location":"ingenieria/kicad.html#componentes","title":"Componentes","text":""},{"location":"ingenieria/kicad.html#tiendas","title":"Tiendas","text":"<ul> <li>LCSC</li> <li>Viinko Electronics HK Ltd: Acepta pedidos BOM.</li> </ul>"},{"location":"ingenieria/kicad.html#componentes-interesantes-simbolos-y-footprints-propios-kicad","title":"Componentes interesantes, S\u00edmbolos y footprints propios KiCad","text":"<p>En este repositorio.</p> <p>Antes de crear los s\u00edmbolos o los footprints, tratar de buscarlos en sitios como SnapEDA.</p> Componente Symbol Footprint Compra Observaciones Resistencia 1/4W P=10,16mm <code>Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal</code> Resistencia convencional Condensador cer\u00e1mico 100nF P=2,54mm <code>Capacitors_ThroughHole:C_Disc_D3.0mm_W1.6mm_P2.50mm</code> Bypass capacitor convencional LED D=5mm <code>LED_THT:LED_D5.0mm</code> LED convencional 5mm USB micro-B <code>Connect:USB_Micro-B</code> LCSC Conector microUSB con terminales SMD y 4 agujeros para chasis Lector microSD <code>Connector_Card:microSD_HC_Hirose_DM3AT-SD-PEJMS</code> LCSC Ranura microSD inserci\u00f3n lateral Lector microSD <code>Connector_Card:microSD_HC_Wuerth_693072010801</code> LCSC Ranura microSD inserci\u00f3n con portezuela superior Lector microSD LCSC Ranura microSD inserci\u00f3n deslizante para interior Transistor TO-92 <code>Package_TO_SOT_THT:TO-92L_Inline_Wide</code> o <code>Package_TO_SOT_THT:TO-92L_HandSolder</code> Transistor convencional, como NPN 2N3904 Tactile button 6mm <code>Buttons_Switches_ThroughHole:SW_PUSH_6mm</code> LCSC Tactile switch 6mm convencional AY-8760 eduardofilo_symbols.kicad_sym/AY-3-8760 <code>Package_DIP:DIP-28_W15.24mm_Socket_LongPads</code> Portapilas 2xAA eduardofilo_symbols.kicad_sym/Battery_Holder eduardofilo_footprints.pretty/BatteryHolder_Keystone_1013.kicad_mod LCSC Keystone 1013 Portapilas CR2032 eduardofilo_symbols.kicad_sym/BS-7 eduardofilo_footprints.pretty/BAT_BS-7.kicad_mod LCSC Portapilas LR44 <code>Device:Battery_Cell</code> eduardofilo_footprints.pretty/BatteryHolder_Keystone_2997_1x12mm.kicad_mod Digikey Keystone 2997 Cargador bater\u00eda Li y regulador de tensi\u00f3n eduardofilo_symbols.kicad_sym/DD05CVSA eduardofilo_footprints.pretty/DD05CVSA.kicad_mod Aliexpress MicroSD holder eduardofilo_symbols.kicad_sym/Micro_SD_Cd eduardofilo_footprints.pretty/Micro_SD_Cd.kicad_mod Aliexpress; LCSC Pantalla OLED SSD1306-I2C eduardofilo_symbols.kicad_sym/OLED-SSD1306-I2C eduardofilo_footprints.pretty/OLED-SSD1306-I2C.kicad_mod Aliexpress Pantalla OLED SSD1306-SPI eduardofilo_symbols.kicad_sym/OLED-SSD1306-SPI eduardofilo_footprints.pretty/OLED-SSD1306-SPI.kicad_mod Aliexpress 0,96\"; Aliexpress 1,54\" Potenci\u00f3metro <code>Device:R_POT</code> eduardofilo_footprints.pretty/Potentiometer_Alpha_RD901F-40-00D_Single_Vertical_mod.kicad_mod LCSC Raspberry Pi Pico eduardofilo_symbols.kicad_sym/raspberrypi-pico-module eduardofilo_footprints.pretty/raspberrypi-pico-module.kicad_mod Raspberry Pi Pico S\u00edmbolo de ncarandini Footprint de ncarandini SCART conector <code>Connector:SCART-F</code> eduardofilo_symbols.kicad_sym/SCART.kicad_mod Aliexpress SNES conector eduardofilo_symbols.kicad_sym/SNES_Connector eduardofilo_symbols.kicad_sym/SNES.kicad_mod Aliexpress Switch horizontal eduardofilo_symbols.kicad_sym/SK12D07VG4 <code>Button_Switch_THT:SW_CuK_OS102011MA1QN1_SPDT_Angled</code> LCSC Interruptor horizontal SPDT con 2mm de pitch Switch horizontal eduardofilo_symbols.kicad_sym/SS-12F44-G5 eduardofilo_footprints.pretty/SS-12F44-G5.kicad_mod LCSC Interruptor vertical SPDT con 3mm de pitch Switch horizontal <code>Switch:SW_SPDT</code> eduardofilo_footprints.pretty/SW_SPDT_Angled.kicad_mod LCSC Interruptor horizontal SPDT con 2,5mm de pitch sin terminales de chasis Switch horizontal <code>Switch:SW_DPDT_x2</code> <code>Button_Switch_THT:SW_E-Switch_EG1271_DPDT</code> Digikey, Digikey, Digikey, Digikey Interruptor horizontal DPDT con 2,5 de pitch sin terminales de chasis Switch tactile goma 8mm <code>Switch:SW_Push</code> eduardofilo_footprints.pretty/SW_PUSH_8mm_2pin.kicad_mod Aliexpress Logo Niubit eduardofilo_footprints.pretty/NiubitLogo.kicad_mod Vibrador <code>Motor:Motor_DC</code> eduardofilo_footprints.pretty/Vibrator_Seeed_316040005.kicad_mod Digikey Barrel jack 2.3mm <code>Connector:Jack-DC</code> eduardofilo_footprints.pretty/Barrel_jack_PJ1-023.kicad_mod Digikey Tambi\u00e9n compatible con PJ1-022 Barrel jack 5.5mm <code>Connector:Jack-DC</code> <code>Connector_BarrelJack:BarrelJack_Wuerth_6941xx301002</code> LCSC Z\u00f3calo 8 pin (ATtiny85) <code>Housings_DIP:DIP-8_W7.62mm</code> Z\u00f3calo DIP-8 convencional <p></p>"},{"location":"ingenieria/kicad.html#valores-habituales-de-resistencias","title":"Valores habituales de resistencias","text":"<p>A pesar de que se fabrican resistencias de pr\u00e1cticamente cualquier valor, como tienen una tolerancia de fabricaci\u00f3n amplia (lo normal es utilizar resistencias de en torno al 1-5% de tolerancia), lo habitual es utilizar valores nominales que comiencen con los siguientes valores: 1.0, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2</p> <p>Aqu\u00ed puede verse una tabla donde se ven los valores normalizados en funci\u00f3n de la tolerancia (a menor tolerancia mayor n\u00famero de valores normalizados).</p> <p></p>"},{"location":"ingenieria/kicad.html#panelizacion","title":"Panelizaci\u00f3n","text":"<p>Despu\u00e9s de una mala experiencia con GerberTools descrita en este post, se encuentra el pack de utilidades KiKit que funciona mucho mejor.</p> <p>En cuanto a la instalaci\u00f3n, sobre la versi\u00f3n 1.7.10 de KiCad, no aparecia el plugin <code>panelize</code> en el men\u00fa <code>Tools &gt; External Plugins...</code>, por lo que instalo la versi\u00f3n unstable:</p> <pre><code>$ pip3 install git+https://github.com/yaqwsx/KiKit@master\n$ kikit-plugin enable --all\n$ kikit-plugin registerlib\n</code></pre> <p>Aunque se puede parametrizar desde la utilidad que hay en el men\u00fa mencionado antes, es mejor utilizar directamente la utilidad de l\u00ednea de comando, para lo que conviene consultar los siguientes documentos:</p> <ul> <li>Panelization CLI</li> <li>Examples</li> </ul> <p>Un ejemplo ser\u00eda:</p> <pre><code>kikit panelize \\\n    --layout 'rows: 1; cols: 2; rotation: 180deg; alternation: cols;' \\\n    --source 'tolerance: 50mm;' \\\n    --post 'millradius: 0.5mm' \\\n    --cuts vcuts \\\n    --tabs 'type: fixed; hcount: 2; hwidth: 3mm;' \\\n    vibrabot.kicad_pcb panel.kicad_pcb\n</code></pre>"},{"location":"ingenieria/modulos.html","title":"M\u00f3dulos","text":""},{"location":"ingenieria/modulos.html#si5351-clock-generator","title":"SI5351 Clock Generator","text":"<p>Generador de se\u00f1al de reloj entre 8KHz y 160MHz configurable por I2C. Compatible con 5V y 3.3V. Los niveles de se\u00f1al se adec\u00faan al de alimentaci\u00f3n, por tanto para utilizar la misma tensi\u00f3n de alimentaci\u00f3n que luego queremos que se utilice en la comunicaci\u00f3n I2C. El reloj de salida es de 3V.</p>"},{"location":"ingenieria/modulos.html#enlaces","title":"Enlaces","text":"<ul> <li>Adafruit Si5351 Clock Generator Breakout</li> </ul>"},{"location":"ingenieria/modulos.html#conexion","title":"Conexi\u00f3n","text":""},{"location":"ingenieria/modulos.html#programacion","title":"Programaci\u00f3n","text":"<ol> <li>Bajar librer\u00eda Adafruit_Si5351_Library.</li> <li>Volcar todo su contenido a un directorio llamado <code>Adafruit_Si5351</code>.</li> <li>Copiar el directorio anterior a <code>arduinosketchfolder/libraries/</code>.</li> <li>Reiniciar el IDE.</li> </ol> <p>Una vez preparado el entorno cargar un programa como el siguiente:</p> <pre><code>#include &lt;Adafruit_SI5351.h&gt;\n#include &lt;errors.h&gt;\n#include &lt;asserts.h&gt;\n#include &lt;Wire.h&gt;\n\nAdafruit_SI5351 clockgen = Adafruit_SI5351();\n\nvoid setup(void) {\n  if (clockgen.begin() != ERROR_NONE) {\n    // There was a problem detecting the IC ... check your connections\n    while(1);\n  }\n\n  // INTEGER ONLY MODE --&gt; most accurate output\n  // Setup PLLA to integer only mode @ 900MHz (must be 600..900MHz)\n  // Set Multisynth 0 to 112.5MHz using integer only mode (div by 4/6/8)\n  // 25MHz * 36 = 900 MHz, then 900 MHz / 8 = 112.5 MHz\n  clockgen.setupPLLInt(SI5351_PLL_A, 36);\n  clockgen.setupMultisynthInt(0, SI5351_PLL_A, SI5351_MULTISYNTH_DIV_8);\n\n  // FRACTIONAL MODE --&gt; More flexible but introduce clock jitter\n  // Setup PLLB to fractional mode @616.66667MHz (XTAL * (24+2/3))\n  // Setup Multisynth 1 to 13.55311MHz (PLLB/(45+1/2))\n  clockgen.setupPLL(SI5351_PLL_B, 24, 2, 3);\n  clockgen.setupMultisynth(1, SI5351_PLL_B, 45, 1, 2);\n\n  // Multisynth 2 is not yet used and won't be enabled, but can be\n  // Use PLLB @ 616.66667MHz, then divide by (900+0/1) -&gt; 685.185 KHz\n  // then divide by 64 for 10.706 KHz\n  // configured using either PLL in either integer or fractional mode\n  clockgen.setupMultisynth(2, SI5351_PLL_B, 900, 0, 1);\n  clockgen.setupRdiv(2, SI5351_R_DIV_64);\n\n  clockgen.enableOutputs(true);\n}\n\nvoid loop(void) {\n}\n</code></pre> <p>A continuaci\u00f3n vemos algunos ejemplos.</p>"},{"location":"ingenieria/modulos.html#8mhz","title":"8MHz","text":"<pre><code>clockgen.setupPLL(SI5351_PLL_A, 24, 0, 1);\nclockgen.setupMultisynth(0, SI5351_PLL_A, 75, 0, 1);\n</code></pre>"},{"location":"ingenieria/modulos.html#1mhz","title":"1MHz","text":"<pre><code>clockgen.setupPLL(SI5351_PLL_A, 24, 0, 1);\nclockgen.setupMultisynth(0, SI5351_PLL_A, 75, 0, 1);\nclockgen.setupRdiv(0, SI5351_R_DIV_8);\n</code></pre>"},{"location":"ingenieria/modulos.html#attiny-high-voltage-programmer","title":"ATtiny high voltage programmer","text":""},{"location":"ingenieria/modulos.html#enlaces_1","title":"Enlaces","text":"<ul> <li>Recover Bricked ATtiny Using Arduino as high voltage programmer</li> <li>Simple and Cheap Fuse Doctor for Attiny</li> <li>Calculadora de fuse bits</li> <li>HV Rescue Shield 2</li> </ul>"},{"location":"ingenieria/modulos.html#montaje","title":"Montaje","text":"<p>Esquem\u00e1tico y montaje sobre stripboad hecho con Fritzing.</p>"},{"location":"ingenieria/modulos.html#conexion_1","title":"Conexi\u00f3n","text":"<p>La conexi\u00f3n del m\u00f3dulo a un Arduino UNO es como sigue:</p> <p></p>"},{"location":"ingenieria/modulos.html#programacion_1","title":"Programaci\u00f3n","text":"<p>El programa a cargar en el Arduino UNO es \u00e9ste.</p> <p>Abrir el puerto serie de Arduino a 19200 baudios y seguir las indicaciones que aparecen en consola.</p>"},{"location":"ingenieria/modulos.html#digispark","title":"Digispark","text":""},{"location":"ingenieria/modulos.html#enlaces_2","title":"Enlaces","text":"<ul> <li>Digispark wiki</li> <li>Conexi\u00f3n y programaci\u00f3n</li> <li>micronucleus - Github</li> </ul>"},{"location":"ingenieria/radio.html","title":"Radio","text":""},{"location":"ingenieria/radio.html#enlaces","title":"Enlaces","text":""},{"location":"ingenieria/radio.html#conceptos","title":"Conceptos","text":"<ul> <li>La modulaci\u00f3n y sus modos</li> <li>Comprendiendo la banda lateral \u00fanica (SSB)</li> </ul>"},{"location":"ingenieria/radio.html#frecuencias","title":"Frecuencias","text":"<ul> <li>Listado de frecuencias EIBI/AOKI/HFCC</li> <li>Tabla de frecuencias de la banda de 11 metros (27 MHz - CB)</li> <li>Balizas de navegaci\u00f3n a\u00e9rea. NDBs encontradas:<ul> <li>Desde Zaragoza:<ul> <li>335: TON - Torralba de Arag\u00f3n</li> <li>389: ZRZ - Zaragoza</li> <li>404: LRD - L\u00e9rida</li> </ul> </li> </ul> </li> </ul>"},{"location":"ingenieria/stm32.html","title":"STM 32","text":""},{"location":"ingenieria/stm32.html#placa-de-pruebas-stm32-vl-discovery","title":"Placa de pruebas STM32 VL Discovery","text":""},{"location":"ingenieria/stm32.html#enlaces","title":"Enlaces","text":"<ul> <li>STM32VLDISCOVERY: Discovery kit with STM32F100RB MCU.</li> <li>Atollic TrueSTUDIO: Free to download and free to use. No code size limits! A commercial-quality tool developed and maintained by Atollic, a professional tools company with years of experience in tools for embedded development. Linux and Mac OS X support is scheduled for later 2016.</li> <li>STM32-Template</li> <li>Open source version of the STMicroelectronics Stlink Tools</li> <li>STM32VLDISCOVERY programming tutorial</li> <li>Programming STM32VLDISCOVERY with Codesourcery and Eclipse</li> </ul>"},{"location":"ingenieria/stm32.html#preparacion-entorno-desarrollo","title":"Preparaci\u00f3n entorno desarrollo","text":"<p>Desarrollado en este post.</p>"},{"location":"ingenieria/stm32.html#utilizacion-como-programador-st-link-v1","title":"Utilizaci\u00f3n como programador ST-Link v1","text":"<p>Tal y como describe la p\u00e1gina 10 del manual, retirando los dos jumpers del conector CN3, se puede utilizar el programador ST-Link v1 que hay en la parte superior de la placa, para programar cualquier STM32 externo, utilizando el conector CN2 con el siguiente patillaje:</p> Pin CN2 Designaci\u00f3n 1 VDD_TARGET VDD 2 SWCLK SWD Clock 3 GND GND 4 SWDIO SWD data input/output"},{"location":"proyectos/dicom.html","title":"Impresi\u00f3n 3D de ecograf\u00edas","text":""},{"location":"proyectos/dicom.html#enlaces","title":"Enlaces","text":"<ul> <li>DCMTK - DICOM Toolkit</li> <li>Storage SCP Emulator</li> <li>DICOM Tutorial</li> <li>RUBY DICOM. En GitHub.</li> </ul>"},{"location":"proyectos/dicom.html#instalacion-ruby","title":"Instalaci\u00f3n Ruby","text":"<p>Descargar el paquete de RubyInstaller.</p>"},{"location":"proyectos/headsetcomm.html","title":"Headset Commander","text":""},{"location":"proyectos/headsetcomm.html#enlaces","title":"Enlaces","text":"<ul> <li>How to detect Bluetooth headset key press</li> <li>headset button</li> <li>Using Android Headset Buttons (Earphone Buttons)</li> </ul>"},{"location":"proyectos/headsetcomm.html#logcat-playpause","title":"Logcat play/pause","text":"<pre><code>#### Google Music\n01-25 18:54:23.960  1226  1226 I AwesomePlayer: play_l\n01-25 18:54:24.007 19228 19232 I dalvikvm: Jit: resizing JitTable from 4096 to 8192\n01-25 18:54:25.038 19653 19663 D MediaPlaybackService: Event logging MUSIC_PAUSE_PLAYBACK_REQUESTED: [299, DEFAULT]/c10a328e-25f5-36a5-bb2b-8642bc8a8f76\n01-25 18:54:25.053  1226  1779 I AwesomePlayer: pause_l 0\n01-25 18:54:25.061  1373  1388 D NotificationService: turn off LED due to Dock full charging\n01-25 18:54:25.085  1373  1384 D BluetoothA2dpService: received playstatechanged Action\n01-25 18:54:25.085  1373  1384 D BluetoothA2dpService: Received Meta Data Details Track = Fool (If You Think It's Over) Artist = Chris Rea Album = The Best Of Chris Rea Trackno = null no.of track = null TrackDuration = null TrackPosition = null\n01-25 18:54:25.085  1373  1384 D BluetoothA2dpService: received playstatechanged Action\n01-25 18:54:25.249  1226  1367 D AudioHardwareMot: AudioStreamOutMot::setParameters() fm_attenuate=0;fm_mute=0\n\n#### Pocket Cast\n01-17 19:41:48.420 12280 12298 I AwesomePlayer: play_l\n01-17 19:41:49.561 12280 12298 I AwesomePlayer: pause_l 0\n\n#### M\u00fasica\n01-25 19:03:54.350  1226  1369 I AwesomePlayer: play_l\n01-25 19:03:54.382 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: &lt;unknown&gt;:WhatsApp Audio\n01-25 19:03:54.421 19958 19958 E TuneWiki: Sending AVRCP command with action: com.android.music.metachanged\n01-25 19:03:54.428  1373  1384 D BluetoothA2dpService: received metachanged Action New Build\n01-25 19:03:54.428  1373  1384 D BluetoothA2dpService: Received Meta Data Details Track = AUD-20110917-WA0004 Artist = Artista desconocido Album = WhatsApp Audio Trackno = 1 no.of track = 144 TrackDuration = 17040 TrackPosition = 9540\n01-25 19:03:54.428 19958 19958 V TuneWiki: MPD - Status Changed: 0\n01-25 19:03:54.483 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: &lt;unknown&gt;:WhatsApp Audio\n01-25 19:03:54.522 19958 19958 D FMControllerService: Starting FMSControllerService, action: tunewiki.intent.action.SWITCH_MPD\n01-25 19:03:55.249 19958 19958 E TuneWiki: Starting TunWikiMPD, action: tunewiki.intent.action.HEADSET_SINGLE_CLICK\n01-25 19:03:55.249 19958 19958 V TuneWiki: MPD - pause() called\n01-25 19:03:55.249 19958 19958 V TuneWiki: MPD - currently playing, so pausing\n01-25 19:03:55.257  1226 15028 I AwesomePlayer: pause_l 0\n01-25 19:03:55.272  1373  1388 D NotificationService: turn off LED due to Dock full charging\n01-25 19:03:55.296 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: &lt;unknown&gt;:WhatsApp Audio\n01-25 19:03:55.311 19958 19958 E TuneWiki: Sending AVRCP command with action: com.android.music.playerpaused\n01-25 19:03:55.311  1373  1384 D BluetoothA2dpService: received paused Action\n01-25 19:03:55.311 19958 19958 V TuneWiki: MPD - Status Changed: 1\n01-25 19:03:55.327 19958 19958 D DEBUGDEBUG: ALBUM ART WAS NOT FOUND: &lt;unknown&gt;:WhatsApp Audio\n01-25 19:03:55.455  1226  1367 D AudioHardwareMot: AudioStreamOutMot::setParameters() fm_attenuate=0;fm_mute=0\n</code></pre>"},{"location":"proyectos/minecraft.html","title":"Minecraft","text":""},{"location":"proyectos/minecraft.html#enlaces","title":"Enlaces","text":""},{"location":"proyectos/minecraft.html#varios","title":"Varios","text":"<ul> <li>How to Create A Minecraft Server Like Mine on your Raspberry Pi</li> <li>Tutorials/Setting up a server</li> <li>Server Commands</li> <li>Minecraft Server Manager</li> <li>How to Run Low-Cost Minecraft on a Raspberry Pi for Block Building on the Cheap :exclamation:</li> <li>MineCraftPi - A Raspberry Pi MineCraft Server Image!: Minecraft se arranca autom\u00e1ticamente desde <code>/etc/rc.local</code>.</li> <li>How to 3D print what you build in Minecraft \u2026 TUTORIAL WITH VIDEO!</li> <li>Minecraft Projects</li> <li>Gu\u00eda / Manual del juego Minecraft</li> <li>Minecraft Crafting y Gu\u00eda de Referencia - La elaboraci\u00f3n de recetas, los valores de datos &amp; Pociones :exclamation:</li> <li>Gu\u00eda de crafteo :exclamation:</li> <li>Mineplex: Servidores de juego con reglas adaptadas (Survival con protecci\u00f3n de terreno y normas \u00e9ticas).</li> <li>Minecraft sobre ARM: Compilaci\u00f3n de librer\u00edas LWJGL y OpenAL para lanzar Minecraft (completo, no Pocket edition) sobre ARM.</li> <li>MineOS: Minecraft hosting improved</li> <li>How to setup Minecraft 1.8.9 on RaspPi2</li> <li>OptiFine: Mod para tunear Minecraft en placas poco potentes. Instrucciones aqu\u00ed.</li> <li>Debian/Ubuntu repository for Games/Emulators/Kernel: Repositorio con versi\u00f3n de Minecraft modificada para funcionar en ARM. Instrucciones aqu\u00ed.</li> </ul>"},{"location":"proyectos/minecraft.html#educacion","title":"Educaci\u00f3n","text":"<ul> <li>Video de educador que usa Minecraft</li> <li>Minecraft Edu</li> <li>Minecraft Edu Wiki</li> <li>Teaching with MinecraftEdu</li> <li>MinecraftEdu World Library</li> <li>Logic Gates: Mundo MinecraftEdu que explica las puertas l\u00f3gicas b\u00e1sicas.</li> <li>Paleontology: Mundo MinecraftEdu en el que hay un esqueleto de dinosaurio enterrado.</li> <li>Obstacle Course: Yincana.</li> <li>Escape from Everest</li> <li>Tutorial World</li> <li>Recursos educativos para Minecraft</li> <li>Opciones:</li> <li>Mecanismos Redstone</li> <li>Construcci\u00f3n con recursos limitados (como lo que hace Joel Levin)</li> <li>Yincana (tipo Obstacle Course)</li> <li>Aventura (tipo Escape from Everest)</li> <li>Descubrimiento (tipo Paleontology o mundos tipo museo)</li> <li>Construcci\u00f3n de un modelo que luego se imprimir\u00e1 con la impresora 3D gracias a Printbot.</li> <li>La caza del tesoro. Por ejemplo esconder un objeto valioso en una gruta profunda y complicada. Dar pistas en carteles en forma de acertijos.</li> </ul>"},{"location":"proyectos/minecraft.html#mecanismos","title":"Mecanismos","text":"<ul> <li>Tutoriales/Mecanismos</li> <li>Introduction to Redstone</li> </ul>"},{"location":"proyectos/minecraft.html#servidores","title":"Servidores","text":"<ul> <li>MCServer</li> <li>Mineserver</li> <li>Descarga servidor oficial</li> <li>Mirror de Bukkit y Spigot para sortear DMCA</li> </ul>"},{"location":"proyectos/minecraft.html#configuraciones","title":"Configuraciones","text":"<ul> <li>server.properties</li> <li>Bukkit.yml fichero de configuraci\u00f3n de Craftbukkit y Spigot</li> <li>spigot.yml fichero de configuraci\u00f3n de Spigot</li> </ul>"},{"location":"proyectos/minecraft.html#plugins-interesantes","title":"Plugins interesantes","text":"<ul> <li>NoSpawnChunks: Prevents spawn chunks being loaded into memory for all worlds on the server.</li> <li>WorldBorder</li> <li>ClearLagg</li> <li>Dynmap: Mapa 2D din\u00e1mico.</li> <li>WorldEdit: Editor de mundos. Comandos aqu\u00ed. Documentaci\u00f3n aqu\u00ed.</li> <li>StopRain: Desactiva la lluvia.</li> <li>Essentials</li> <li>Printbot: Impresi\u00f3n 3D de partes de un mundo. Tiene dependencias con los plugins WorldGuard y con WorldEdit. Hay bastante sensibilidad con las versiones. Una combinaci\u00f3n que se ha probado que funciona es:<ul> <li>WorldEdit v5.5.8</li> <li>WorldGuard v5.9</li> <li>Printbot v1.5.0</li> </ul> </li> </ul>"},{"location":"proyectos/minecraft.html#ejecucion-servidor-en-raspberry-pi-yo-odroid-c1","title":"Ejecuci\u00f3n Servidor en Raspberry Pi y/o ODROID-C1","text":""},{"location":"proyectos/minecraft.html#comandos-para-arrancarlo","title":"Comandos para arrancarlo","text":""},{"location":"proyectos/minecraft.html#raspberry-pi","title":"Raspberry Pi","text":"<pre><code>$ sudo java -Xms256M -Xmx496M -jar /home/mine/spigot/spigot.jar nogui\n</code></pre>"},{"location":"proyectos/minecraft.html#raspberry-pi-2-o-odroid-c1","title":"Raspberry Pi 2 o ODROID-C1","text":"<pre><code>$ sudo java -Xms512M -Xmx768M -jar /home/mine/spigot/spigot.jar nogui\n</code></pre>"},{"location":"proyectos/minecraft.html#settings-aconsejadas","title":"Settings aconsejadas","text":"<p>(Fuente)</p> <p>server.properties</p> <pre><code>#Minecraft server properties\n#Thu Jan 03 16:16:28 WET 2013\n\nlevel-name=world #Determina la carpeta donde se almacena el mundo. Por tanto sirve para cambiar de mundo\nlevel-type=DEFAULT\nserver-name=Niubit Server\nmotd=Raspberry Pi Minecraft server\nmax-players=6 #M\u00e1ximo de jugadores admitidos\nonline-mode=false\nspawn-monsters=false #No se generan monstruos\nspawn-npcs=false #No se generan vecinos (villagers)\nspawn-animals=true #Se generan animales\nspawn-protection=16\ngenerate-structures=true #Determina si se generan estructuras (como ciudades)\ngamemode=1 #Creative\ndifficulty=0 #Peaceful\npvp=false #No se permiten da\u00f1os entre jugadores\nview-distance=4 #Es una medida del radio de visi\u00f3n que tienen los jugadores. Influye en el rendimiento del servidor\nallow-flight=true #En modo Creative creo que se permite siempre\nallow-nether=false\nwhite-list=false #Si se activa s\u00f3lo se permitir\u00e1 la incorporaci\u00f3n a la partida de determinados jugadores\nlevel-seed=\nserver-ip=\nenable-query=false #Si se permite obtener informaci\u00f3n del servidor mediante el protocolo GameSpy4\nhardcore=false\nenable-rcon=false\ngenerator-settings=\nserver-port=25565\nmax-build-height=256 #Altura m\u00e1xima permitida para construir, aunque el terreno generado puede superarla\nsnooper-enabled=false #Si se env\u00edan peri\u00f3dicamente datos a snoop.minecraft.net\nop-permission-level=4 #Nivel m\u00e1ximo de permisos de op\nannounce-player-achievements=true #Se anuncian los logros obtenidos por los jugadores\ndebug=false\nforce-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador\nresource-pack=\nenable-command-block=false\nplayer-idle-timeout=0\n</code></pre> <p>bukkit.yml</p> <pre><code>settings:\n  allow-end: false #Desactiva el End (http://minecraft.gamepedia.com/The_End)\n</code></pre> <p>spigot.yml</p> <pre><code>world-settings:\n  default:\n    view-distance: 4\n</code></pre> <p>plugins/WorldBorder/config.yml</p> <pre><code>cfg-version: 11\nmessage: Has alcanzado el l\u00edmite de este mundo.\nround-border: false\ndebug-mode: false\nwhoosh-effect: true\nportal-redirection: true\nknock-back-dist: 3.0\ntimer-delay-ticks: 5\nremount-delay-ticks: 0\ndynmap-border-enabled: true\ndynmap-border-message: Has alcanzado el l\u00edmite de este mundo.\nplayer-killed-bad-spawn: false\ndeny-enderpearl: true\nfill-autosave-frequency: 30\nbypass-list-uuids: []\nfill-memory-tolerance: 500\nworlds:\n  taller1:  # Nombre del mundo a limitar\n    x: 0\n    z: 0\n    radiusX: 80\n    radiusZ: 80\n    wrapping: false\n</code></pre>"},{"location":"proyectos/minecraft.html#comandos-utiles","title":"Comandos \u00fatiles","text":""},{"location":"proyectos/minecraft.html#terminal-linux","title":"Terminal Linux","text":"<ul> <li><code>sudo chown -R usuario:grupo directorio</code>: Asigna el usuario y el grupo recursivamente a partir del directorio indicado.</li> <li><code>sudo poweroff</code>: Apagar la m\u00e1quina.</li> <li><code>sudo reboot</code>: Reiniciar la m\u00e1quina.</li> <li><code>ifconfig eth0</code>: Datos de TCP/IP del adaptador de red <code>eth0</code> (tarjeta de red ethernet; los adaptadores wifi suelen llamarse <code>wlan0</code>).</li> <li><code>sudo nmap -sP 192.168.1.0/24</code>: Escanea la red local 192.168.1.0 para encontrar m\u00e1quinas conectadas a ella.</li> </ul>"},{"location":"proyectos/minecraft.html#servidor-minecraft","title":"Servidor Minecraft","text":"<ul> <li><code>gamerule doDaylightCycle false</code>: Paramos el reloj.</li> <li><code>time set 6000</code>: Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda.</li> <li><code>tp &lt;jugador&gt; [&lt;x&gt; &lt;y&gt; &lt;z&gt;]</code>: Teleporta a un jugador a una posici\u00f3n.</li> <li><code>setworldspawn &lt;x&gt; &lt;y&gt; &lt;z&gt;</code>: Definimos el punto de spawn del mundo.</li> <li><code>toggledownfall</code>: Activa/desactiva la lluvia.</li> <li><code>weather rain &lt;segundos&gt;</code>: Activa la lluvia durante los segundos indicados.</li> <li><code>weather clear &lt;segundos&gt;</code>: Desactiva la lluvia/nieve durante los segundos indicados.</li> <li><code>gamerule doFireTick false</code>: Evita que se propague el fuego.</li> <li><code>gamerule doMobSpawning false</code>: Evita que se generen Mobs (pasivos y enemigos). Util para evitar distracciones.</li> <li><code>gamerule keepInventory true</code>: Evita que los jugadores pierdan su inventario al morir.</li> <li><code>give &lt;jugador&gt; &lt;elemento&gt; [cantidad] [data] [dataTag]</code>: Dar un elemento a un jugador.</li> <li><code>gamemode &lt;modo&gt; [jugador]</code>: Asigna el modo de juego a uno o a todos los jugadores de entre los siguientes posibles: <code>adventure</code>, <code>creative</code>, <code>survival</code></li> <li><code>kick &lt;jugador&gt;</code>: Expulsar a un jugador de la partida.</li> <li><code>ban &lt;player&gt;</code>: Expulsar a un jugador del servidor.</li> </ul>"},{"location":"proyectos/minecraft.html#plugins","title":"Plugins","text":""},{"location":"proyectos/minecraft.html#worldborder","title":"WorldBorder","text":"<ul> <li><code>wb shape square</code>: Ajustamos el tipo de borde a cuadrado.</li> <li><code>wb &lt;nombre_mundo&gt; set 100 spawn</code>: Ajustamos el radio del borde del mundo.</li> <li><code>wb &lt;nombre_mundo&gt; fill</code>: Forzamos la generaci\u00f3n del mundo dentro del l\u00edmite.</li> <li><code>wb &lt;nombre_mundo&gt; trim</code>: Eliminamos el mapeado del mundo que queda fuera del l\u00edmite.</li> <li><code>wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\"</code>: Ajustamos el mensaje que ven los jugadores al alcanzar el l\u00edmite.</li> </ul>"},{"location":"proyectos/minecraft.html#dynmap","title":"Dynmap","text":"<ul> <li><code>dynmap fullrender &lt;world-name&gt;</code>: Genera el mapa que inicialmente aparece en negro.</li> </ul>"},{"location":"proyectos/minecraft.html#worldedit","title":"WorldEdit","text":"<p>Los comandos de WorldEdit s\u00f3lo se pueden lanzar desde la consola que hay dentro del juego (tecla <code>T</code>). Por ese motivo llevan la <code>/</code> delante, aunque curiosamente la mayor\u00eda de los comandos de WorldEdit llevan una doble <code>/</code> en realidad. Para poder utilizar WorldEdit el jugador debe ser operador (comando <code>op &lt;jugador&gt;</code> desde consola. Hay que acordarse de quitar el permiso de operador a todos los jugadores para no tener problemas de bloqueo de bloques alrededor del punto de spawn.</p> <ul> <li><code>//wand</code>: Te otorga la herramienta para definir regiones c\u00fabicas o planas.</li> <li><code>//walls &lt;material&gt;</code>: Construye las 4 paredes del paralelep\u00edpedo definido por la selecci\u00f3n (dejando el suelo y techo sin construir).</li> <li><code>//faces &lt;material&gt;</code>: Construye las 6 paredes del paralelep\u00edpedo definido por la selecci\u00f3n.</li> <li><code>//set &lt;material&gt;</code>: Rellena todo el paralelep\u00edpedo definido por la selecci\u00f3n.</li> </ul> <p>La documentaci\u00f3n de WorldEdit est\u00e1 aqu\u00ed. Versi\u00f3n imprimible aqu\u00ed.</p>"},{"location":"proyectos/minecraft.html#printbot","title":"Printbot","text":"<p>Para poder utilizar este plugin, necesitamos tener instalados los plugins de WorldEdit y WorldGuard. Los comandos de Printbot s\u00f3lo se pueden lanzar siendo op.</p> <ul> <li><code>/printselection</code>: Previamente deberemos haber hecho una selecci\u00f3n por medio de WorldEdit. Este comando env\u00eda informaci\u00f3n sobre lo que contenga la selecci\u00f3n a los servidores de Printbot y tras un periodo de proceso aparece en la consola del juego una URL que nos permitir\u00e1 descargar el fichero STL que podremos imprimir con la impresora 3D.</li> </ul>"},{"location":"proyectos/minecraft.html#montaje-de-un-mundo-plano-para-talleres","title":"Montaje de un mundo plano para talleres","text":"<p>Antes de empezar paramos el servidor. Generamos un mundo nuevo cambiando lo siguiente en <code>server.properties</code>:</p> <pre><code>level-type=FLAT\nlevel-name=taller1\nallow-nether=false\ngamemode=1 #Creative\ndifficulty=0 #Peaceful\ngenerate-structures=false #No se generan estructuras (como ciudades)\nspawn-npcs=false #No se generan vecinos (villagers)\nonline-mode=false\nspawn-animals=false #No se generan animales\nforce-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador\n</code></pre> <p>Instalamos los siguientes plugins:</p> <ul> <li>StopRain: Desactiva la lluvia.</li> <li>WorldEdit: Editor de mundos. Comandos aqu\u00ed. Documentaci\u00f3n aqu\u00ed.</li> <li>NoSpawnChunks: Prevents spawn chunks being loaded into memory for all worlds on the server.</li> <li>WorldBorder</li> </ul> <p>Arrancamos el servidor. Por medio de comandos lo modelamos:</p> <pre><code>setworldspawn 0 20 0\nwb shape square\nwb taller1 set 80 spawn # Lo limitamos a un cuadrado de 160x160 en torno al punto de spawn\nwb taller1 fill # Generamos el mundo\nwb fill confirm\nwb taller1 trim # Eliminamos lo que sobra\nwb trim confirm\nwb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" # Ajustamos mensajes\ngamerule doDaylightCycle false # Paramos el reloj\ntime set 6000 # Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda\n</code></pre>"},{"location":"proyectos/minecraft.html#bloques","title":"Bloques","text":"<p>Es \u00fatil tener a mano esta gu\u00eda, aunque tiene el inconveniente de que est\u00e1 en ingl\u00e9s y que parece de una versi\u00f3n distinta a la que solemos usar, porque hay elementos de esta lista que no aparecen en nuestro servidor.</p> <p>Indico el nombre del elemento en ingl\u00e9s, luego su c\u00f3digo y finalmente el nombre del elemento en espa\u00f1ol:</p> <ul> <li>LEASH - 420 - Riendas</li> <li>IRON_BARDING - 417 - Armadura de caballo de hierro</li> <li>BOW - 261 - Arco</li> <li>ARROW - 262 - Flechas</li> <li>SADDLE - 329 - Silla de montar</li> <li>FENCE - 85 - Valla</li> <li>DIRT - 3 - Tierra</li> <li>BEDROCK - 7 - Piedra base</li> </ul> <p>Otras gu\u00edas en formato gr\u00e1fico se han sacado de esta p\u00e1gina:</p> <p></p> <p></p>"},{"location":"proyectos/minecraft.html#instalacion-mineos-en-odroid-c1","title":"Instalaci\u00f3n MineOS en ODROID-C1","text":"<p>Como requerimiento previo, tendremos que tener instalado el JDK de Java, preferiblemente a partir de la versi\u00f3n 8. Aparte de eso, ejecutar los siguientes comandos:</p> <pre><code>$ sudo apt-get update\n$ sudo apt-get -y install screen python-cherrypy3 rdiff-backup git\n$ sudo mkdir -p /usr/games\n$ cd /usr/games\n$ sudo git clone git://github.com/hexparrot/mineos minecraft\n$ cd minecraft\n$ sudo git config core.filemode false\n$ sudo chmod +x server.py mineos_console.py generate-sslcert.sh\n$ sudo ln -s /usr/games/minecraft/mineos_console.py /usr/local/bin/mineos\n$ sudo cp /usr/games/minecraft/init/mineos /etc/init.d/\n$ sudo chmod 744 /etc/init.d/mineos\n$ sudo update-rc.d mineos defaults\n$ sudo cp /usr/games/minecraft/init/minecraft /etc/init.d/\n$ sudo chmod 744 /etc/init.d/minecraft\n$ sudo update-rc.d minecraft defaults\n$ sudo cp /usr/games/minecraft/mineos.conf /etc/\n$ cd /usr/games/minecraft\n$ sudo ./generate-sslcert.sh\n$ sudo service mineos start\n</code></pre> <p>A partir de ahora accederemos a la consola web en la direcci\u00f3n: https://ODROID_IP:8080</p>"},{"location":"retro-emulacion/c64.html","title":"Commodore 64","text":""},{"location":"retro-emulacion/c64.html#enlaces","title":"Enlaces","text":"<ul> <li>SAMS Computerfacts Commodore 64 (CC4)</li> <li>SAMS Computerfacts Commodore 128D (CSCS25)</li> <li>KU-14194HB board replica</li> <li>Carcasa C64c. Vista en este v\u00eddeo</li> <li>Can you build a brand new Commodore 64 from (nearly) 100% new parts?</li> <li>SIDKick pico: Reemplazo de SID basado en Raspberry Pi Pico.</li> </ul>"},{"location":"retro-emulacion/fpga.html","title":"FPGA","text":""},{"location":"retro-emulacion/fpga.html#enlaces","title":"Enlaces","text":"<ul> <li>SiDi-FPGA<ul> <li>Wiki</li> <li>ForoFPGA</li> </ul> </li> </ul>"},{"location":"retro-emulacion/funkey-s.html","title":"FunKey S","text":""},{"location":"retro-emulacion/funkey-s.html#enlaces","title":"Enlaces","text":"<ul> <li>Super Mario 64 DOS Port</li> </ul>"},{"location":"retro-emulacion/funkey-s.html#instalacion-toolchain","title":"Instalaci\u00f3n toolchain","text":"<p>Prerrequisitos:</p> <pre><code>$ sudo apt install bash bc binutils build-essential bzip2 ca-certificates cpio cvs expect file g++ gcc git gzip liblscp-dev libncurses5-dev locales make mercurial openssh-client patch perl procps python3 python3-dev python3-distutils python3-setuptools rsync rsync sed subversion sudo tar unzip wget xxd\n</code></pre> <p>Se descarga de aqu\u00ed.</p> <p>Una vez descomprimido, ejecutar desde el directorio donde haya quedado (por ejemplo <code>/home/usuario/funkey/FunKey-sdk-2.3.0</code>):</p> <pre><code>$ ./relocate-sdk.sh\n$ . environment-setup\n$ sudo ln -s /home/usuario/funkey/FunKey-sdk-2.3.0 /opt/FunKey-sdk\n</code></pre>"},{"location":"retro-emulacion/funkey-s.html#compilacion-sdlretro","title":"Compilaci\u00f3n sdlretro","text":"<p>Se descarga de aqu\u00ed.</p> <p>Una vez bajado el c\u00f3digo se compila siguiendo los pasos (o ejecutando directamente) del script <code>package</code>.</p> <p>El OPK resultante es <code>libretro_funkey-s.opk</code>. Copiarlo a la carpeta app de la consola, crear el directorio <code>/mnt/FunKey/.sdlretro/cores</code> y poner all\u00ed los cores.</p>"},{"location":"retro-emulacion/funkey-s.html#compilacion-cores-retroarch","title":"Compilaci\u00f3n cores RetroArch","text":""},{"location":"retro-emulacion/funkey-s.html#mgba","title":"mgba","text":"<p>Se descarga de aqu\u00ed. Se compila directamente con <code>make</code>.</p>"},{"location":"retro-emulacion/funkey-s.html#retro8","title":"retro8","text":"<p>Se descarga de aqu\u00ed. Se compila directamente con <code>make</code>.</p>"},{"location":"retro-emulacion/general.html","title":"General","text":""},{"location":"retro-emulacion/general.html#enlaces","title":"Enlaces","text":"<ul> <li>Emuladores en OpenELEC</li> <li>Configuraci\u00f3n PiGRRL-2</li> <li>Managing ROMs</li> <li>MAME FAQ: Resuelve dudas sobre peculiaridades de algunos juegos. Por ejemplo sobre el arranque de Joust.</li> <li>ZXBaremulator: Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI.</li> <li>BEST of the BEST: arcade/consolas/microPCs para Raspberry y Windows portable VOL2</li> <li>500 Juegos de ZX Spectrum listos para jugar. Raspberry y Windows portable</li> <li>RGBtoHDMI: The RGBtoHDMI interface converts the \"digital\" RGB video signal from vintage computers to HDMI or DVI compatible with most modern TVs/Monitors. Viene a ser como la versi\u00f3n open de RetroTink.</li> </ul>"},{"location":"retro-emulacion/general.html#empaquetado-de-roms-mame","title":"Empaquetado de ROMs MAME","text":"<p>Primero hay que localizar los ficheros que componen la ROM. Hay varios tipos (explicados aqu\u00ed). Una forma de ir a lo seguro es localizar sus piezas gracias a los hash SHA1 que se pueden encontrar en los ficheros .DAT y luego hacer un paquete ZIP sin compresi\u00f3n.</p> <p>Para generar un archivo ZIP con compresi\u00f3n nula en Linux, se consigue por ejemplo con el siguiente comando lanzado desde el directorio donde se encuentren los ficheros que queremos empaquetar:</p> <pre><code>zip -0 rom.zip *\n</code></pre> <p>El nombre del archivo (en el ejemplo <code>rom.zip</code>) es importante para que el emulador reconozca la ROM. Tambi\u00e9n lo obtendremos del fichero <code>.DAT</code>.</p>"},{"location":"retro-emulacion/general.html#conexion-de-mando-sixaxis-en-recalbox","title":"Conexi\u00f3n de mando SixAxis en Recalbox","text":"<p>Para que funcione por USB en lugar de por Bluetooth que es como est\u00e1 previsto por defecto, hay que editar el fichero <code>/recalbox/share/system/recalbox.conf</code> y cambiar la siguiente propiedad a 0:</p> <pre><code>controllers.ps3.enabled=0\n</code></pre> <p>Se puede editar entrando por SSH, para lo cual las credenciales predeterminadas son:</p> <ul> <li>user: root</li> <li>password: recalboxroot</li> </ul> <p>Si se hace montando la SD en el ordenador, el fichero se encuentra en la partici\u00f3n <code>/dev/mmcblk0p8</code> que se monta en Ubuntu como <code>share0</code> en la ruta <code>./system/recalbox.conf</code>.</p>"},{"location":"retro-emulacion/general.html#backup-juego-psx","title":"Backup juego PSX","text":"<ol> <li>Introducir el disco en la unidad de CD-ROM.</li> <li> <p>Localizar el dispositivo del CD-ROM:</p> <pre><code>sudo cdrdao scanbus\n</code></pre> </li> <li> <p>Desmontar el dispositivo sin expulsar el disco (suponemos que el comando anterior indica que el dispositivo es <code>/dev/sr0</code>):</p> <pre><code>sudo umount /dev/sr0\n</code></pre> </li> <li> <p>Hacer el backup:</p> <pre><code>cdrdao read-cd --device /dev/sr0 --driver generic-mmc-raw --read-raw --datafile nombre_juego.bin nombre_juego.toc\n</code></pre> </li> </ol> <p>Con esto obtendremos dos ficheros. En algunas ocasiones nos puede interesar m\u00e1s el fichero <code>cue</code> equivalente al <code>toc</code>. En ese caso convertirlo as\u00ed:</p> <pre><code>toc2cue nombre_juego.toc nombre_juego.cue\n</code></pre>"},{"location":"retro-emulacion/juegos.html","title":"Juegos destacados","text":""},{"location":"retro-emulacion/juegos.html#zx-spectrum","title":"ZX Spectrum","text":"<ul> <li>Flying Shark</li> <li>Alter ego</li> <li>Old Tower: Vidas infinitas: <code>POKE 35492,201</code></li> <li>Return to Holy Tower</li> <li>Mighty Final Fight</li> <li>Genesis: dawn of a new day</li> <li>Los amores de Brunilda</li> <li>The Sword of Ianna: 1 y 2</li> <li>Ninja Gaiden Shadow Warriors</li> <li>Bonnie and Clyde</li> <li>The Curse of Trasmoz</li> </ul>"},{"location":"retro-emulacion/juegos.html#amstrad-cpc","title":"Amstrad CPC","text":"<ul> <li>Psycho Pig UXB</li> </ul>"},{"location":"retro-emulacion/juegos.html#commodore-64","title":"Commodore 64","text":"<ul> <li>Donkey Kong</li> </ul>"},{"location":"retro-emulacion/juegos.html#msx","title":"MSX","text":"<ul> <li>Westen House (MSX) by Santiago Onta\u00f1\u00f3n Villar</li> </ul>"},{"location":"retro-emulacion/juegos.html#nes","title":"NES","text":"<ul> <li>Faxanadu</li> <li>Castlevania III: Dracula's Curse</li> </ul>"},{"location":"retro-emulacion/juegos.html#snes","title":"SNES","text":"<ul> <li>Do-Re-Mi Fantasy</li> <li>Chrono Trigger</li> <li>The Legend of Zelda: A Link to the Past</li> <li>Super Castlevania IV</li> </ul>"},{"location":"retro-emulacion/juegos.html#master-system","title":"Master System","text":"<ul> <li>Sonic</li> </ul>"},{"location":"retro-emulacion/juegos.html#neogeo-pocket-color","title":"NeoGeo Pocket Color","text":"<ul> <li>Dark Arms</li> </ul>"},{"location":"retro-emulacion/juegos.html#mame","title":"MAME","text":"<ul> <li>Truxton 2</li> </ul>"},{"location":"retro-emulacion/juegos.html#game-boy","title":"Game Boy","text":"<ul> <li>Super Mario Land 2</li> <li>The Legend of Zelda: Link's Awakening</li> <li>Donkey Kong</li> <li>Kirby's Dream Land 2</li> <li>Metal Gear Solid</li> <li>Catrap</li> </ul>"},{"location":"retro-emulacion/juegos.html#gameboy-advance","title":"GameBoy Advance","text":"<ul> <li>Drill Dozer</li> <li>Fire Emblem The Sacred Stones</li> <li>Golden Sun</li> <li>Dragon Ball Advance</li> <li>Castlevania: Aria of Sorrow</li> </ul>"},{"location":"retro-emulacion/juegos.html#playstation","title":"PlayStation","text":"<ul> <li>Harmful Park</li> <li>R-Type Delta</li> <li>Team Buddies</li> <li>Syphon Filter</li> <li>Einhander</li> <li>Chrono Cross</li> <li>Xenogears</li> </ul>"},{"location":"retro-emulacion/juegos.html#android","title":"Android","text":"<ul> <li>Mekorama</li> </ul>"},{"location":"retro-emulacion/microconsolas.html","title":"Micro consolas","text":""},{"location":"retro-emulacion/microconsolas.html#enlaces","title":"Enlaces","text":"<ul> <li>uChip Simple VGA Console (uSVC)</li> <li>Arduboy</li> <li>Hackvision</li> <li>Uzebox</li> <li>AttinyArcade:<ul> <li>Sitio oficial</li> <li>V\u00eddeo de  ELECTRONOOBS</li> <li>Repositorio oficial</li> <li>Repositorio de juegos</li> </ul> </li> <li>TinyJoypad</li> <li>Pocket Arcade</li> </ul>"},{"location":"retro-emulacion/microconsolas.html#uzebox","title":"Uzebox","text":""},{"location":"retro-emulacion/microconsolas.html#enlaces_1","title":"Enlaces","text":"<ul> <li>Home del proyecto</li> <li>EdUzebox</li> <li>Getting Started with the Uzebox Video Game Console: parte 1; parte 2</li> <li>ROMs. Pack</li> <li>Foro. Algunos posts importantes:<ul> <li>Uzebox Quick Start</li> <li>Uzebox SD Gameloader V0.4.5: Bootloader con el cargador de juegos desde SD.</li> </ul> </li> <li>ATMEGA644 ISP - Uzebox: Instrucciones para flasheo con avrdude en post inicial.</li> </ul>"},{"location":"retro-emulacion/microconsolas.html#instalacion-de-atmega644-en-arduino-ide","title":"Instalaci\u00f3n de ATmega644 en Arduino IDE","text":"<p>Para que la placa aparezca en el Arduino IDE, instalar las que proporciona el proyecto MightyCore que incluye el ATmega644:</p> <ol> <li>Abrir Arduino IDE.</li> <li>Abrir el men\u00fa <code>File &gt; Preferences</code>.</li> <li> <p>Introducir la siguiente URL en <code>Additional Boards Manager URLs</code>:</p> <pre><code>https://mcudude.github.io/MightyCore/package_MCUdude_MightyCore_index.json\n</code></pre> </li> <li> <p>Abrir el men\u00fa <code>Tools &gt; Board &gt; Boards Manager...</code>.</p> </li> <li>Buscar la entrada correspondiente a MightyCore e instalarla.</li> </ol>"},{"location":"retro-emulacion/miyoo-mini.html","title":"Miyoo Mini","text":""},{"location":"retro-emulacion/miyoo-mini.html#enlaces","title":"Enlaces","text":""},{"location":"retro-emulacion/miyoo-mini.html#emuladores-ports-y-aplicaciones","title":"Emuladores, Ports y Aplicaciones","text":"<ul> <li>Ports de steward-fu</li> <li>Ports y compilaciones de Eggs</li> </ul>"},{"location":"retro-emulacion/miyoo-mini.html#sistema","title":"Sistema","text":"<ul> <li>Firmware:<ul> <li>20220419 para Mini v1 y v2</li> <li>Community Firmware para Mini v3</li> <li>20230326 para Mini+</li> <li>Gu\u00eda de desbriqueo</li> </ul> </li> <li>Toolchain:<ul> <li>MiyooMini</li> <li>Shauniman</li> <li>OnionUI</li> </ul> </li> <li>Frontends:<ul> <li>Koriki</li> <li>Onion</li> <li>MiniUI</li> </ul> </li> </ul>"},{"location":"retro-emulacion/miyoo-mini.html#hardware","title":"Hardware","text":"<ul> <li>Tienda oficial en Aliexpress</li> <li>Extracci\u00f3n UART:<ul> <li>steward-fu</li> <li>eduardofilo</li> </ul> </li> <li>Teardown</li> <li>Para imprimir:<ul> <li>Gatillos m\u00e1s accesibles: V1, V2</li> </ul> </li> <li>Repuestos componentes</li> </ul>"},{"location":"retro-emulacion/miyoo-mini.html#montaje-de-rootfs-del-firmware","title":"Montaje de rootfs del firmware","text":"<ol> <li>Descargar el fichero que se utiliza para actualizar el firmware de la consola del sitio oficial.</li> <li>Localizar dentro del ZIP el fichero <code>.img</code>. En el caso de la actualizaci\u00f3n de 2022-04-19 el fichero se encuentra en el directorio <code>The firmware0419</code> y se llama <code>miyoo283_fw.img</code>.</li> <li> <p>Abrir el fichero con un editor hexadecimal para leer el inicio del mismo que contiene informaci\u00f3n en forma de texto con los bloques que hay dentro de la imagen y d\u00f3nde se flashean en la NAND. En concreto nos interesa la secci\u00f3n que describe la partici\u00f3n <code>rootfs</code> que contiene la siguiente informaci\u00f3n:</p> <pre><code># File Partition: rootfs\nmxp r.info rootfs\nsf probe 0\nsf erase ${sf_part_start} ${sf_part_size}\nfatload mmc 0 0x21000000 $(SdUpgradeImage) 0x1ae000 0x22b000\nsf write 0x21000000 ${sf_part_start} 0x1AE000\n</code></pre> </li> <li> <p>Seg\u00fan la documentaci\u00f3n del comando <code>fatload</code> de U-boot, los dos \u00faltimos par\u00e1metros en hexadecimal son el tama\u00f1o y la posici\u00f3n de la partici\u00f3n rootfs dentro del fichero <code>.img</code>.</p> </li> <li> <p>Crear un directorio (por ejemplo <code>mnt</code>) y ejecutar el siguiente comando para montar el rootfs del firmware en \u00e9l:</p> <pre><code>sudo mount -o loop,sizelimit=0x1ae000,offset=0x22b000,ro,noexec miyoo283_fw.img mnt\n</code></pre> </li> </ol> <p>Utilizando el mismo m\u00e9todo se pueden montar tambi\u00e9n las particiones <code>miservice</code> y <code>customer</code>:</p> <pre><code>sudo mount -o loop,sizelimit=0x32f000,offset=0x3d9000,ro,noexec miyoo283_fw.img mnt2\nsudo mount -o loop,sizelimit=0x6c5000,offset=0x708000,ro,noexec miyoo283_fw.img mnt3\n</code></pre>"},{"location":"retro-emulacion/miyoo-mini.html#cheatsheets","title":"Cheatsheets","text":""},{"location":"retro-emulacion/miyoo-mini.html#directoriosficheros-interesantes-del-firmware","title":"Directorios/Ficheros interesantes del firmware","text":"Directorio Contenido <code>/mnt/SDCARD</code> Punto de montaje de la SD <code>/customer/main</code> Script principal de arranque del frontend. Es el que invoca <code>.tmp_update/updater</code> en caso de existir que es el punto de arranque de los UIs como Onion o MiniUI <code>/sys/devices/gpiochip0/gpio/gpio59/value</code> Flag indicador de si la m\u00e1quina se est\u00e1 cargando <code>/sys/class/pwm/pwmchip0/pwm0/duty_cycle</code> Brillo de pantalla (de 0 a 100) <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_available_governors</code> Governors aceptados por el procesador (<code>userspace</code>, <code>powersave</code>, <code>ondemand</code>, <code>performance</code>) <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_governor</code> Governor actual <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_available_frequencies</code> Frecuencias aceptadas por el procesador (<code>400000</code>, <code>600000</code>, <code>800000</code>, <code>1000000</code>, <code>1100000</code>, <code>1200000</code>) <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_min_freq</code> M\u00ednima frecuencia del procesador <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq</code> M\u00e1xima frecuencia del procesador <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_cur_freq</code> Frecuencia actual del procesador <code>/appconfigs/system.json</code> Ajustes generales del sistema (corresponde al men\u00fa Settings)"},{"location":"retro-emulacion/miyoo-mini.html#directoriosficheros-interesantes-onionui","title":"Directorios/Ficheros interesantes OnionUI","text":"Directorio Contenido <code>/mnt/SDCARD/Saves/CurrentProfile/saves/playActivity.db</code> Base de datos de Play Activity. Para resetear las estad\u00edsticas se puede simplemente borrar el fichero <code>/mnt/SDCARD/Saves/CurrentProfile/saves/PlayActivityBackup/</code> Directorio que contiene backups del fichero <code>playActivity.db</code> anterior. Aparentemente no se purga este directorio, por lo que habr\u00e1 que hacerlo a mano de vez en cuando. <code>/mnt/SDCARD/Roms/recentlist.json</code> Lista <code>Recent</code> <code>/mnt/SDCARD/.tmp_update/romScreens/</code> Screenshots <code>/mnt/SDCARD/.tmp_update/.disableMenu</code> Desactiva el Game Switcher asociado a la tecla Menu"},{"location":"retro-emulacion/miyoo-mini.html#gpios","title":"GPIOs","text":"<pre><code>/ # cat /sys/kernel/debug/gpio\ngpiochip0: GPIOs 0-90, gpio:\n gpio-1   (                    |GPIO Key Up         ) in  hi\n gpio-5   (                    |GPIO Key Right      ) in  hi\n gpio-6   (                    |GPIO Key B          ) in  hi\n gpio-7   (                    |GPIO Key Y          ) in  hi\n gpio-8   (                    |GPIO Key A          ) in  hi\n gpio-9   (                    |GPIO Key X          ) in  hi\n gpio-10  (                    |GPIO Key START      ) in  hi\n gpio-11  (                    |GPIO Key SELECT     ) in  hi\n gpio-12  (                    |GPIO Key MENU       ) in  hi\n gpio-13  (                    |GPIO Key L          ) in  hi\n gpio-14  (                    |GPIO Key L2         ) in  hi\n gpio-47  (                    |GPIO Key R2         ) in  hi\n gpio-59  (                    |sysfs               ) in  lo\n gpio-69  (                    |GPIO Key Down       ) in  hi\n gpio-70  (                    |GPIO Key Left       ) in  hi\n gpio-72  (                    |                    ) out lo\n gpio-86  (                    |GPIO Key POWER      ) in  lo\n gpio-90  (                    |GPIO Key R          ) in  hi\n</code></pre>"},{"location":"retro-emulacion/miyoo-mini.html#teclas","title":"Teclas","text":"Tecla GPIO Valor SDL Descriptor SDL Arriba 1 273 SDLK_UP Abajo 69 274 SDLK_DOWN Izquierda 70 276 SDLK_LEFT Derecha 5 275 SDLK_RIGHT Menu 12 27 SDLK_ESCAPE A 8 32 SDLK_SPACE B 6 306 SDLK_LCTRL X 9 304 SDLK_LSHIFT Y 7 308 SDLK_LALT Select 11 305 SDLK_RCTRL Start 10 13 SDLK_RETURN L1 13 101 SDLK_e L2 14 9 SDLK_TAB R1 90 116 SDLK_t R2 47 8 SDLK_BACKSPACE"},{"location":"retro-emulacion/miyoo-mini.html#framebuffer","title":"Framebuffer","text":"<pre><code>/ # fbset\n\nmode \"640x480-100\"\n        # D: 45.455 MHz, H: 54.633 kHz, V: 100.060 Hz\n        geometry 640 480 640 1440 32\n        timings 22000 64 64 32 32 64 2\n        accel false\n        rgba 8/16,8/8,8/0,8/24\nendmode\n</code></pre> <p>El frambuffer (<code>/dev/fb0</code>) contiene 3 im\u00e1genes (640x1440) y est\u00e1 rotado 180\u00ba. Cada pixel ocupa 4 bytes codificados en el siguiente orden: <code>BBGGRRAA</code> donde <code>AA</code> (alpha) vale siempre <code>FF</code>.</p>"},{"location":"retro-emulacion/retroarch.html","title":"RetroArch","text":""},{"location":"retro-emulacion/retroarch.html#enlaces","title":"Enlaces","text":"<ul> <li>Instalaci\u00f3n/configuraci\u00f3n de RetroArch</li> <li>Cheats RetroArch</li> <li>Using Content, Folder, and Core Overrides for Custom Settings</li> </ul>"},{"location":"retro-emulacion/rg-350.html","title":"RG350/RG280","text":""},{"location":"retro-emulacion/rg-350.html#enlaces","title":"Enlaces","text":""},{"location":"retro-emulacion/rg-350.html#general","title":"General","text":"<ul> <li>Dingoonity Wiki</li> <li>Anbernic RG-350 Wiki</li> <li>Documentaci\u00f3n SOC, HDMI y drivers Windows</li> <li>How to make an OPK</li> <li>RG 350 Tips, Emulators and Resources - Wagner's TechTalk</li> <li>RGHandhelds device info</li> <li>Writing Software for the RG350M Gaming Handheld</li> </ul>"},{"location":"retro-emulacion/rg-350.html#blogs-foros","title":"Blogs, Foros","text":"<ul> <li>Foro en elotrolado.net. Algunos posts escogidos:<ul> <li>XMAME EN LA SD EXTERNA</li> </ul> </li> <li>Foro en Dingoonity.org. Algunos hilos escogidos:<ul> <li>HOW-TO: PCSX4ALL Cheats</li> <li>[DEVELOPMENT] How to compile for RG350? (Help needed)</li> </ul> </li> <li>RG350 Subreddit</li> <li>Blog de pcercuei</li> </ul>"},{"location":"retro-emulacion/rg-350.html#emuladores-ports-y-aplicaciones","title":"Emuladores, Ports y Aplicaciones","text":"<ul> <li>Repositorios:<ul> <li>RG350_APPREPOSITORY de Rafa Vico</li> <li>OpenDingux Software list</li> <li>RG-350 &amp; Pocket Go 2 - Application Repo</li> <li>rs97.bitgala.xyz</li> </ul> </li> <li>Ports y Emuladores de Gameblabla:<ul> <li>En Dingoonity</li> <li>En su sitio</li> <li>Para el nuevo OD Beta</li> </ul> </li> <li>Ficheros SBI</li> <li>UniBIOS for Neo Geo</li> <li>Scrapers:<ul> <li>ScreenScrapper</li> <li>ARRM</li> </ul> </li> <li>Romcenter (ROM Manager)</li> <li>Conversi\u00f3n de ISOs PlayStation a PBP</li> <li>Mods de emuladores:<ul> <li>ReGBA 1.45.5 sin bezel</li> <li>FBA con doble launcher (UX y Explorer)</li> <li>MAME4All con doble launcher (UX y Explorer)</li> <li>DOSBox que permite personalizar el <code>dosbox.conf</code> en cada juego incluy\u00e9ndolo en su directorio. Descripci\u00f3n m\u00e1s detallada aqu\u00ed</li> <li>A5200 permite seleccionar ROM por lo que se integra bien con launchers</li> </ul> </li> <li>Repositorio de c\u00f3digo de juegos/clones Open Source</li> <li>Testeo colaborativo de juegos FBA/MAME promovido por @cejudin</li> <li>Retro Game Corps Arcade Guide</li> <li>Retro Game Corps Ports Guide</li> </ul>"},{"location":"retro-emulacion/rg-350.html#sistema","title":"Sistema","text":"<ul> <li>Retro Game Handhelds</li> <li>CFW de Ninoh-FOX</li> <li>Buildroot:<ul> <li>OpenDingux: Parece el repositorio upstream del Buildroot para dispositivos basados en opendingux.</li> <li>Tonyjih</li> <li>Ninoh-FOX</li> <li>gokr</li> <li>soarquin</li> <li>od-contrib</li> <li>glebm</li> </ul> </li> <li>Toolchain:<ul> <li>GCW Zero Toolchain</li> <li>WerWolv</li> <li>\u00daltima versi\u00f3n de pcercuei</li> </ul> </li> <li>Linux kernel:<ul> <li>OpenDingux: Parece el repositorio upstream del kernel para dispositivos basados en OpenDingux. Incluye los experimentos de pcercuei.</li> <li>Tonyjih</li> <li>Ninoh-FOX</li> </ul> </li> <li>OpenDingux nightly builds</li> <li>State of OpenDingux Beta</li> <li>Frontends:<ul> <li>GMenu2X: Documentaci\u00f3n. Themes:<ul> <li>gmenu2x-theme</li> </ul> </li> <li>PyMenu: Monogr\u00e1fico</li> <li>SimpleMenu: Monogr\u00e1fico. Themes:<ul> <li>Lazarus</li> <li>GBZ35 Remix</li> <li>Megapixels</li> <li>ComicBook</li> <li>RG FAMILY</li> <li>0A</li> <li>BigCody</li> <li>Unified</li> <li>SimUI</li> </ul> </li> <li>EmulationStation: Monogr\u00e1fico. Themes:<ul> <li>es-theme-pixel</li> </ul> </li> </ul> </li> </ul>"},{"location":"retro-emulacion/rg-350.html#hardware","title":"Hardware","text":"<ul> <li>Teardown</li> <li>Placas de RG350M y RG350P</li> <li>Para imprimir:<ul> <li>Stick de perfil bajo</li> <li>Cruceta</li> <li>Botones ABXY</li> <li>Botones L1-R1</li> <li>Botones L2-R2</li> <li>Grips laterales</li> <li>Carcasa</li> </ul> </li> <li>Repuestos componentes:<ul> <li>Repuestos oficiales en Aliexpress</li> <li>Pantalla 240p (HP350S001):<ul> <li>Compra</li> <li>Tutorial de instalaci\u00f3n</li> </ul> </li> <li>Pantalla 480p (JT035IPS02-V0):<ul> <li>Compra</li> <li>Tutorial de instalaci\u00f3n</li> </ul> </li> <li>Cristal pantalla</li> <li>Protector de pantalla:<ul> <li>Amazon</li> <li>Aliexpress</li> </ul> </li> <li>Carcasa silicona</li> <li>Stick anal\u00f3gico modelo original RG350:<ul> <li>eBay</li> <li>Aliexpress</li> </ul> </li> <li>Kit conversi\u00f3n stick plano</li> <li>Botones cristal</li> <li>Pack botones SNES y sticks de perfil bajo</li> <li>Conductice Rubber Pad:<ul> <li>ebay</li> <li>myretrogamecase</li> </ul> </li> <li>Sticks de perfil bajo:<ul> <li>Compra</li> <li>Tutorial de instalaci\u00f3n (espa\u00f1ol)</li> <li>Tutorial de instalaci\u00f3n (ingl\u00e9s)</li> </ul> </li> <li>Bater\u00edas (ver detalles al final del apartado Bater\u00eda):<ul> <li>Bater\u00eda 3,7V 4900mAh: 30,17\u20ac Incluye conector JST. Se anuncia como repuesto para RG350/M.</li> </ul> </li> </ul> </li> <li>Adaptadores WiFi compatibles con BASE y ROGUE (listados en directorio <code>/lib/modules/3.12.0-dingux\\+/kernel/drivers/net/wireless/</code>):<ul> <li><code>Realtek RTL8188EU</code> 150Mb/s (BASE y ROGUE)</li> <li><code>Realtek RTL8188FU</code> 150Mb/s (s\u00f3lo ROGUE)</li> <li><code>Realtek RTL8192CU</code> 300Mb/s (BASE y ROGUE)</li> <li>Por ejemplo \u00e9ste para el que necesitaremos adem\u00e1s un adaptador para USB tipo C.</li> </ul> </li> <li>Adaptadores WiFi compatibles con OD beta (listados en directorio <code>/lib/modules/5.15.0-rc6-opendingux/kernel/drivers/net/wireless/</code>):<ul> <li><code>Realtek RTL8192CU</code></li> <li><code>Mediatek MT7601U</code></li> </ul> </li> </ul>"},{"location":"retro-emulacion/rg-350.html#conceptos","title":"Conceptos","text":""},{"location":"retro-emulacion/rg-350.html#emuladores-juegos-ports-aplicaciones","title":"Emuladores / Juegos / Ports / Aplicaciones","text":"<p>Cada elemento que aparece en el lanzador, en las distintas secciones, es una especie de acceso directo. Algunos llevan a comandos o ejecutables que hay en el sistema (fundamentalmente los de la secci\u00f3n Settings) pero normalmente nosotros s\u00f3lo vamos a tratar con los que provengan de OPKs.</p> <p>Los OPKs son paquetes (una especie de ZIP) que podemos asimilar a una aplicaci\u00f3n de m\u00f3vil. Un OPK o aplicaci\u00f3n puede ser un emulador, un juego o port, una utilidad, etc. Dentro del OPK en un fichero se le dice al lanzador en qu\u00e9 categor\u00eda debe aparecer. B\u00e1sicamente las secciones que se ven y que se recorren con L1 y R1:</p> <ul> <li>Applications</li> <li>Emulators</li> <li>Games</li> <li>Settings</li> </ul> <p>Los ports son los que aparecen en Games. Nada impide que un emulador aparezca dentro de Games, pero todo el mundo pone las cosas siguiendo esta organizaci\u00f3n. Un port es una aplicaci\u00f3n que ejecuta un juego concreto, normalmente un cl\u00e1sico, del que se dispone del c\u00f3digo y que alguien ha compilado para OpenDingux que es el sistema de la RG-350. Tambi\u00e9n en Games est\u00e1n los remakes hechos por aficionados o homebrew.</p> <p>Un emulador es una aplicaci\u00f3n, normalmente tambi\u00e9n de c\u00f3digo abierto, que alguien ha compilado para OpenDingux. El emulador no contiene el c\u00f3digo de ning\u00fan juego en concreto ni la BIOS de la m\u00e1quina que emula. En teor\u00eda esto permite la libre distribuci\u00f3n de los emuladores. Un emulador simula por software (virtualiza) un sistema que normalmente puede ejecutar c\u00f3digos de juegos distintos que ven\u00edan en cartucho, CD, un chip de memoria, tarjeta de memoria, etc. Son las ROMs.</p> <p>En resumen:</p> <ul> <li>Port o juego: Un juego concreto normalmente un cl\u00e1sico de PC, un remake, juego indie o homebrew. En la RG350 tendr\u00e1n forma de OPK.</li> <li>Emulador: Virtualiza una m\u00e1quina que puede ejecutar varios juegos/ROMS. En cualquier m\u00e1quina emuladora como la RG-350 tendr\u00e1n distintas formas (.bin, .zip, .iso, .pbp, .smc, .nes, .sms, hasta el infinito). Tambi\u00e9n suelen venir en forma de OPK.</li> </ul>"},{"location":"retro-emulacion/rg-350.html#las-roms-y-su-organizacion","title":"Las ROMs y su organizaci\u00f3n","text":"<p>Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el c\u00f3digo y los datos (sonidos por ejemplo) del juego en la m\u00e1quina original. En viejas recreativas y en m\u00e1quinas de cartucho, este soporte sol\u00edan ser chips de memoria no vol\u00e1til. En las m\u00e1quinas m\u00e1s modernas normalmente son CDs, DVDs, Bluray's. Las ROMs en la RG350 se suelen colocar en la tarjeta microSD externa. Pueden ir en la interna pero suele complicar el proceso de actualizaci\u00f3n del firmware. En cuanto a la estructura de carpetas, puede ser cualquiera ya que los emuladores normalmente al abrirlos, presentan una especie de explorador de archivos para seleccionar la ruta y archivo de la ROM a ejecutar.</p> <p>A pesar de que las ROMs puedan estar en cualquier lugar, todo el mundo tiende a utilizar una estructura similar en la que los distintos sistemas se meten dentro de una carpeta llamada <code>roms</code> en la ra\u00edz de la tarjeta. Cada sistema a su vez suele ser otra carpeta con el acr\u00f3nimo de la m\u00e1quina como nombre. M\u00e1s o menos se utilizan los siguientes acr\u00f3nimos:</p> <ul> <li>FBA: Final Burn Alpha</li> <li>FC: NES (por Famicom)</li> <li>GB: Gameboy</li> <li>GBA: Gameboy Advance</li> <li>GBC: Gameboy Color</li> <li>GG: SEGA GameGear</li> <li>MD: SEGA Megadrive</li> <li>NGP: NeoGeo Pocket</li> <li>PCE: PC Engine / TurboGrafx-16</li> <li>PS: Sony PlayStation</li> <li>SFC: SuperNES (por Super Famicom)</li> <li>SMS: SEGA MasterSystem</li> <li>WSC: WonderSwan</li> </ul>"},{"location":"retro-emulacion/rg-350.html#la-importancia-de-las-bios","title":"La importancia de las BIOS","text":"<p>Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de \u00e9stas est\u00e1n siempre presentes en la m\u00e1quina. Es decir, as\u00ed como las ROMs son c\u00f3digo particular de cada juego, que digamos entra y sale de la m\u00e1quina (cuando cambias el CD o cartucho), la BIOS tambi\u00e9n es c\u00f3digo pero permanente de la m\u00e1quina. Est\u00e1 guardado en un chip y contiene el c\u00f3digo que se ejecuta cuando arranca la m\u00e1quina (los men\u00fas de lanzamiento de juegos por ejemplo en consolas avanzadas) y librer\u00edas que utilizan los desarrolladores para hacer los juegos m\u00e1s f\u00e1ciles de programar.</p> <p>Los emuladores o bien incorporan una reimplementaci\u00f3n de la BIOS (como el HLE de Pcsx4all) o bien es necesario que la pongamos nosotros. A\u00fan en ese primer caso es conveniente utilizar la BIOS original. Si no la incluyen los emuladores es porque son c\u00f3digo propietario del fabricante de la m\u00e1quina, lo que impedir\u00eda la libre distribuci\u00f3n del emulador. Lo mismo que sucede con las ROMs.</p> <p>M\u00e1s adelante se incluye un listado de d\u00f3nde buscan las BIOS los distintos emuladores.</p>"},{"location":"retro-emulacion/rg-350.html#bios-de-playstation","title":"BIOS de PlayStation","text":"<p>Siguiendo con el ejemplo de la BIOS HLE del emulador Pcsx4all, no es la real que puso Sony en sus m\u00e1quinas, sino una BIOS que alguien preparar\u00f3 haciendo ingenier\u00eda inversa por lo que nunca queda igual que la original. Esto se hace para poder distribuir el emulador y que sea funcional desde un principio. Porque si se incluye la BIOS original se comete un delito de propiedad intelectual y si no se incluye ning\u00fan tipo de BIOS el emulador ni siquiera arranca. Entonces se pone algo para salir del paso pero luego se le pide a los usuarios que busquen por su cuenta la BIOS original y la incorporen al emulador.</p> <p>Para pasar de usar la BIOS emulada (HLE) a una original, primero hay que colocarla en el directorio <code>/media/data/local/home/.pcsx4all/bios/</code>, despu\u00e9s arrancar el emulador, entrar en las opciones (tecla <code>Power</code>), abrir la secci\u00f3n <code>Core settings</code> y all\u00ed desactivar <code>HLE emulated BIOS</code> y seleccionar en <code>Set BIOS file</code> una de las que hayamos situado en el directorio indicado anteriormente. Por ejemplo:</p> <p></p>"},{"location":"retro-emulacion/rg-350.html#sistemas-de-archivo","title":"Sistemas de archivo","text":"<p>OpenDingux, el sistema que utiliza la RG350, es una distribuci\u00f3n Linux. Por tanto es un sistema UNIX. En UNIX no existe el concepto de las unidades (como las t\u00edpicas C:, D:, etc en Windows). Todo forma parte de un \u00e1rbol de directorios cuya ra\u00edz es la <code>/</code> o root. Esto no quiere decir que un UNIX s\u00f3lo pueda tener una unidad de almacenamiento. Lo que ocurre es que las distintas unidades se \"montan\" en distintos puntos del \u00e1rbol de directorios.</p> <p>El \u00e1rbol de directorios base sobre el que se montan las unidades es ese archivo <code>rootfs.squashfs</code> (el nombre quiere decir \"sistema de archivos ra\u00edz\") que puede verse al pinchar la tarjeta interna en el PC poco antes de flashearla con otro firmware. Ah\u00ed comprimido est\u00e1 todo el sistema menos lo que se monta desde las tarjetas de memoria.</p> <p>La tarjeta interna tiene dos particiones. La primera contiene el \u00e1rbol root como hemos comentado, el kernel (del que no vamos a hablar, aunque es muy importante) y es de tipo FAT32, por eso se puede ver en Windows. B\u00e1sicamente contiene el sistema. La segunda partici\u00f3n se monta en <code>/media/data</code> y est\u00e1 dedicada a contener la informaci\u00f3n de soporte a las aplicaciones, es decir configuraciones, librer\u00edas, archivos de datos (savestates por ejemplo) y las propias aplicaciones instaladas en la tarjeta interna. El formato de esta partici\u00f3n es EXT3, propio de Linux y por eso no se monta en Windows.</p> <p>La tarjeta externa funciona de forma parecida a la segunda partici\u00f3n de la interna, es decir, sirve para contener aplicaciones y archivos de usuario, por ejemplo es donde se suelen colocar las ROMs. La \u00fanica partici\u00f3n de esta tarjeta se monta en <code>/media/sdcard</code>. Esta tarjeta externa puede estar en formatos FAT32 o los propios de Linux (ext2, ext3, ext4). ROGUE soporta adem\u00e1s exFAT, lo que permite aprovechar mejor las tarjetas de gran capacidad. En esta tarjeta lo \u00fanico importante en cuanto a la estructura de carpetas es que exista en la ra\u00edz de la misma un directorio llamado <code>apps</code> (si est\u00e1 en formato FAT32 o exFAT ser\u00e1 indiferente si est\u00e1 en may\u00fasculas, ya que estos sistemas de archivos no distinguen may\u00fasculas y min\u00fasculas). El resto de cosas que pongamos en esta tarjeta (fundamentalmente ROMs) podr\u00e1n organizarse como queramos (ver apartado Las ROMs y su organizaci\u00f3n).</p> <p>Existe cierta confusi\u00f3n sobre si hay que formatear la tarjeta interna. En realidad la imagen que se graba o flashea (como se suele decir) incluye el formato. Flashear una tarjeta microSD es reconstruir el formato y el contenido de otra tarjeta, es decir clonarla. La imagen es un volcado bit a bit de la tarjeta original (forma y contenido). Entonces, \u00bfpor qu\u00e9 sugieren muchos videos y procedimientos formatear la microSD a la que luego se le va a flashear una imagen? Sospecho que es para hacer desaparecer las dos particiones de la tarjeta con el firmware que vamos a sobreescribir, para que luego no haya dudas de lo que hay que seleccionar en el programa de flasheo. Eso en Windows. En Linux se puede hacer muy f\u00e1cilmente referencia a la tarjeta en s\u00ed, adem\u00e1s de a las particiones, por lo que el formateo previo es redundante. En resumen, que en teor\u00eda da igual el formato en que est\u00e1 la tarjeta antes de flashear la imagen. El flasheo \"construye\" el formato a la vez que le da contenido. Es como estampar un vinilo a partir de un molde master.</p>"},{"location":"retro-emulacion/rg-350.html#conexion-de-red","title":"Conexi\u00f3n de red","text":"<p>El puerto USB2 cuando se conecta al PC se monta como una tarjeta de red adicional. Por ejemplo en una m\u00e1quina Linux aparece este adaptador al conectar el cable:</p> <pre><code>enp0s29u1u2: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.1.1.1  netmask 255.255.255.252  broadcast 10.1.1.3\n        inet6 fe80::f721:afcb:94:3078  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether a6:7b:58:c5:fe:30  txqueuelen 1000  (Ethernet)\n        RX packets 13  bytes 2786 (2.7 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 24  bytes 4097 (4.0 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <p>Ah\u00ed puede verse que se define una red con un rango de IPs muy reducido (s\u00f3lo 2 bits). El PC toma la IP <code>10.1.1.1</code> y la consola la <code>10.1.1.2</code>.</p> <p>Si hacemos una detecci\u00f3n de puertos abiertos en la m\u00e1quina a trav\u00e9s de este adaptador de red veremos que se encuentran abiertos los puertos correspondientes a FTP, SSH (lo que nos permite hacer transmisiones SCP y SFTP) y Telnet:</p> <pre><code>PORT   STATE SERVICE\n21/tcp open  ftp\n22/tcp open  ssh\n23/tcp open  telnet\n</code></pre> <p>Por defecto el sistema de red est\u00e1 configurado para utilizar password. Se desactiva abriendo la aplicaci\u00f3n Network que hay en la secci\u00f3n Settings</p> <p></p> <p>Como el enrutado del adaptador \u00e9ste no da salida a internet no hay problema de inseguridad por quitar el password. El programa anterior s\u00f3lo es se utiliza para cambiar esos ajustes, no es necesario que est\u00e9 abierto para que funcione la conectividad.</p> <p>En Windows un buen programa para transferir archivos por FTP a la consola es WinSCP. A partir del minuto 3:45 de este v\u00eddeo (en ingl\u00e9s) se ve c\u00f3mo se usa. Este otro v\u00eddeo (en espa\u00f1ol) tambi\u00e9n muestra el proceso.</p> <p>En Linux no es necesario, pero en Windows, dependiendo de la versi\u00f3n hay que instalar un driver. En el post inicial de este foro lo comentan. Tambi\u00e9n se describe a partir del minuto 19:42 de este v\u00eddeo.</p>"},{"location":"retro-emulacion/rg-350.html#cambio-de-iconos-a-las-aplicaciones","title":"Cambio de iconos a las aplicaciones","text":"<p>Los iconos de los OPKs que muestra Gmenu2x (ya sean emuladores, juegos, ports o utilidades) se pueden cambiar muy f\u00e1cilmente. Algo que se suele hacer es cambiar el icono de los emuladores para que representen a la m\u00e1quina emulada.</p> <p>Para cambiarlos hay dos opciones:</p> <ol> <li> <p>Copiar el fichero (.PNG por ejemplo) en cualquier lugar de alguna de las tarjetas (un buen sitio puede ser el mismo directorio <code>apps</code>), editar el OPK (pulsando Select) y cambiarlo en el campo <code>Icon</code> (esta opci\u00f3n s\u00f3lo est\u00e1 disponible en ROGUE):</p> <p> </p> </li> <li> <p>Desempaquetar los OPKs de los emuladores, cambiar el icono y volver a empaquetar. Para desempaquetar/reempaquetar ver la secci\u00f3n Gesti\u00f3n de OPKs m\u00e1s adelante.</p> </li> </ol> <p>En la opci\u00f3n 1, en el pantallazo, puede verse que el icono lo est\u00e1 cogiendo de dentro del OPK del propio emulador (el paso al interior es con el <code>#</code>). Pero se puede elegir cualquier ruta del sistema de ficheros.</p>"},{"location":"retro-emulacion/rg-350.html#bateria","title":"Bater\u00eda","text":"<p>El puerto de carga de la RG350 es el etiquetado como USB2. Es un conector USB tipo C.</p> <p>Los cargadores USB tipo C son m\u00e1s complejos que los microUSB. Con las nuevas tecnolog\u00edas de carga r\u00e1pida de los m\u00f3viles, el cargador no se limita a enviar corriente al dispositivo, sino que hay una negociaci\u00f3n previa, una especie de protocolo. Fue famoso el problema de la Raspberry Pi 4 por el cual no se pod\u00eda alimentar con algunos alimentadores tipo C porque identificaban a la Raspberry de forma incorrecta y luego se negaban a darle corriente. Adem\u00e1s de todo esto, da la impresi\u00f3n de que la RG350 tiene una circuiter\u00eda de carga muy elemental (por los distintos comportamientos que tiene el LED de carga entre los distintos usuarios).</p> <p>Por todos estos motivos, si hay que elegir un cargador, mejor optar por uno sencillo, no uno preparado para gestionar carga r\u00e1pida por USB-C. Escoger uno de s\u00f3lo 5 Voltios (los de carga r\u00e1pida tienen tensi\u00f3n variable de hasta 12V) y entre 1 y 1.5 Amperios.</p> <p>Una buena opci\u00f3n es cargar conectandola a un PC. Los puertos USB de un PC est\u00e1n limitados a 500mA, lo que se puede considerar una carga lenta, lo que en realidad es saludable para la bater\u00eda.</p> <p>La bater\u00eda de la RG350 es de 3,7V y 2.5Ah. Los alimentadores USB son de 5V. Considerando la diferencia de 3,7 a 5 como la p\u00e9rdida de rendimiento que hay en el proceso (aproximaci\u00f3n burda), se pueden echar las cuentas m\u00e1s f\u00e1cilmente. Estos ser\u00edan los tiempos con cargadores de distintas intensidades:</p> Intensidad de carga Tiempo para carga completa 2,5A 1 hora 1A 2,5 horas 500mA (PC) 5 horas <p>Todos estos tiempos son en el peor de los casos cuando la carga necesaria sea completa.</p> <p>El LED de la consola informa de varios aspectos de la bater\u00eda de la siguiente manera:</p> Estado LED Significado Verde fijo Consola encendida con bater\u00eda con buen nivel de carga. Tambi\u00e9n indica carga completada cuando cargamos la bater\u00eda con la consola encendida, al pasar de rojo a verde Parpadeo en verde Bater\u00eda baja Rojo fijo Cargando (tanto con consola encendida como apagada) Apagado Carga completada (con la consola apagada) <p>Algunos usuarios comentan que no llegan a ver apagarse nunca el LED rojo cuando la cargan con la consola apagada. Esto parece indicar que el circuito de carga no es muy avanzado y en ocasiones no es capaz de determinar correctamente el final de la carga. Es evidente que el firmware no gestiona el nivel de carga con estad\u00edsticas como hacen los modernos smartphones por lo que el mismo se debe calcular casi directamente en funci\u00f3n de la tensi\u00f3n medida en la bater\u00eda, que puede diferir entre las distintas unidades o incluso factores externos como la temperatura. En esos casos, tener en cuenta los tiempos de carga indicados m\u00e1s arriba en funci\u00f3n de la intensidad del cargador utilizado, para desconectar el cargador cuando haya pasado dicho tiempo.</p> <p>En cuanto al reemplazo de la bater\u00eda original, un usuario al que se le hinch\u00f3 la suya, le quit\u00f3 la cinta que la envuelve y pega a la tapa trasera y encontr\u00f3 que la bater\u00eda era \u00e9sta:</p> <p></p> <p>Esta bater\u00eda tiene un conector de cinta como el siguiente:</p> <p></p> <p>al que se le ha soldado el cable:</p> <p></p> <p>El modelo oficial parece ser el siguiente:</p> <p></p> <p>De dimensiones: 68.60 x 48.70 x 5.54mm</p> <p>Al final del cable soldado al conector de cinta, se encuentra un conector Micro JST 1.25mm 2-Pin:</p> <p></p> <p>Algunas medidas tomadas con pol\u00edmetro sobre la bater\u00eda en operaci\u00f3n y carga:</p> <ul> <li>Intensidad de descarga: 385mA (GMenu2X) - 480mA (Tekken3)</li> <li>Tensi\u00f3n de descarga: 4,10V (casi llena)</li> <li>Tensi\u00f3n de carga: 4,20V</li> <li>Tensi\u00f3n de bater\u00eda: 4,18V (casi llena)</li> </ul> <p>Otra incidencia que se ha observado varias veces es la de las bater\u00edas que parecen no querer cargarse m\u00e1s. En estos casos, adem\u00e1s de hacer los evidentes cambios del material de carga (cargador y/o cable), puede intentarse hacer un \"power cycle\" de la siguiente forma:</p> <ol> <li>Abrir la consola y desconectar la bater\u00eda del conector.</li> <li>Mantener pulsado el bot\u00f3n Power durante 30 segundos.</li> <li>Volver a conectar la bater\u00eda, cerrar la consola e intentar cargar de nuevo.</li> </ol>"},{"location":"retro-emulacion/rg-350.html#faq","title":"FAQ","text":""},{"location":"retro-emulacion/rg-350.html#que-maquinas-puedo-emular","title":"\u00bfQu\u00e9 m\u00e1quinas puedo emular?","text":"<p>En general la PlayStation original (o PS1) marca el techo. Incluso en esta m\u00e1quina hay juegos particularmente exigentes que hacen sudar al procesador de la RG350 que se nota sobre todo en el sonido y la fluidez de las animaciones. Otras m\u00e1quinas de potencia parecida que por tanto podr\u00edan dar problemas con emuladores poco eficientes son la Game Boy Advance o incluso la SuperNintendo en los juegos que inclu\u00edan chips especiales en el cartucho. Con m\u00e1quinas m\u00e1s complejas como N64, Dreamcast o PSP podemos llegar a encontrar emuladores, pero eso no significa que vayan a resultar jugables.</p>"},{"location":"retro-emulacion/rg-350.html#que-es-un-romset","title":"\u00bfQu\u00e9 es un romset?","text":"<p>Romset = set de ROMs, es decir un conjunto cerrado y definido de ROMs. En los emuladores de m\u00e1quinas arcade suele manejarse el t\u00e9rmino m\u00e1s que con el resto de emuladores, aunque tambi\u00e9n aplica. Por ejemplo, cuando decimos que xMAME soporta el romset 84, quiere decir que es capaz de emular todas las ROMs contenidas en ese set. Los sets se definen con unos ficheros XML llamados DATs que se pueden consultar aqu\u00ed. De hecho la forma de verificar si una ROM est\u00e1 correctamente definida para ser ejecutada en xMAME, FBA o MAME4all es echar mano de estos DATs revisando los nombres tanto de la ROM como de los ficheros que la constituyen, as\u00ed como sus hashes. Los romsets soportados por xMAME, MAME4All y FBA son los siguientes:</p> <ul> <li>xMAME:<ul> <li>0.37b16, tambi\u00e9n conocido como 0.52</li> <li>0.69</li> <li>0.84</li> </ul> </li> <li>MAME4All: 0.37b5, tambi\u00e9n conocido como 0.41</li> <li>FBA: 0.2.97.44</li> <li>RetroArch core MAME2003: v0.78</li> <li>RetroArch core MAME2003+: v0.78</li> </ul> <p>En este documento se listan todos los romsets que se manejan habitualmente en RG350.</p> <p>Este art\u00edculo es un buen tutorial sobre c\u00f3mo podemos gestionar y solucionar los problemas que tengamos al montar un romset.</p>"},{"location":"retro-emulacion/rg-350.html#como-se-activan-los-sticks-analogicos-en-los-juegos-de-ps","title":"\u00bfC\u00f3mo se activan los sticks anal\u00f3gicos en los juegos de PS?","text":"<p>Depende del juego. Es decir, hay juegos que no los soportan porque son anteriores a la aparici\u00f3n del Dual Analog o del Dual Shock (mediados y finales de 1997, respectivamente). Hay por tanto que probar en cada juego todas las opciones que aparecen en <code>Core settings &gt; Analog Mode</code>:</p> <p> </p> <p>No es lo mismo (porque no deja de ser digital), pero siempre existe la opci\u00f3n de usar la emulaci\u00f3n de la cruceta con el stick izquierdo pulsando Power + B.</p>"},{"location":"retro-emulacion/rg-350.html#en-los-juegos-de-playstation-en-formato-cuebin-que-archivos-tengo-que-copiar-a-la-consola","title":"En los juegos de PlayStation en formato CUE+BIN \u00bfqu\u00e9 archivos tengo que copiar a la consola?","text":"<p>El <code>cue</code> no es necesario si el <code>bin</code> es \u00fanico. Es decir si hay un <code>bin</code> y un <code>cue</code> con copiar el <code>bin</code> a la consola es suficiente. Si hay un <code>cue</code> y por ejemplo 8 <code>bin</code> (esto puede ocurrir en los juegos que ten\u00edan pistas de audio en el CD seg\u00fan c\u00f3mo se haya hecho el dump) entonces s\u00ed interesa copiar el <code>cue</code> y lanza el juego desde \u00e9l. En esos casos lo m\u00e1s recomendable es empaquetar todas las pistas en <code>pbp</code> que ocupa menos y es un s\u00f3lo archivo. Si se utilizan los <code>cue+bin</code> en los lanzadores aparece varias veces el mismo nombre del juego repetido tantas como ficheros <code>cue</code> y <code>bin</code> tengamos (en el ejemplo anterior 1+8=9 veces).</p> <p>El <code>cue</code> es una especie de directorio de las pistas que conten\u00eda el disco. De hecho es un fichero de texto que se puede leer. Si se le da s\u00f3lo un <code>bin</code> el emulador se adapta y entiende que es la \u00fanica pista que tiene que usar y que lo contiene todo. Como curiosidad, si el juego es de los de varias pistas y se copia s\u00f3lo el primer <code>bin</code> (que sol\u00eda ser la pista que conten\u00eda el c\u00f3digo del juego) tambi\u00e9n funciona, pero entonces el juego se ejecuta sin pistas de audio.</p>"},{"location":"retro-emulacion/rg-350.html#por-que-salen-los-juegos-de-gbc-en-blanco-y-negro-en-gambatte","title":"\u00bfPor qu\u00e9 salen los juegos de GBC en blanco y negro en Gambatte?","text":"<p>Algunos cartuchos de Game Boy eran mixtos, es decir serv\u00edan tanto para la Game Boy original como la Color. Cuando el juego se insertaba en la consola correspondiente mostraba los gr\u00e1ficos adecuados. En Gambatte, al ser un mismo emulador para las dos m\u00e1quinas, hay que seleccionar el tipo de m\u00e1quina con que queremos ejecutar la ROM mixta. El ajuste est\u00e1 en <code>Settings &gt; System</code>. <code>Priority DMG</code> se corresponde con la Game Boy original y <code>Priority GBC</code> con la Game Boy Color. As\u00ed pues lo m\u00e1s recomendable es ajustar el segundo valor. As\u00ed los juegos de la Game Boy original (extensi\u00f3n <code>.gb</code> normalmente) se ejecutar\u00e1n en blanco y negro y los de la Game Boy Color (extensi\u00f3n <code>.gbc</code> normalmente) en color:</p> <p> </p> <p>Como tras hacer este cambio tenemos que reiniciar el emulador, hay que hacer que el nuevo valor sea el predeterminado seleccionando <code>Save as default</code> y luego confirmando:</p> <p> </p>"},{"location":"retro-emulacion/rg-350.html#que-formato-hay-que-dar-a-la-tarjeta-interna-antes-de-flashear-el-firmware","title":"\u00bfQu\u00e9 formato hay que dar a la tarjeta interna antes de flashear el firmware?","text":"<p>La interna no es necesario formatearla antes de flashear la imagen, a pesar de todo lo que se lee por ah\u00ed. El flasheo es formateo+instalaci\u00f3n de datos, as\u00ed que el formato previo se sobreescribe.</p>"},{"location":"retro-emulacion/rg-350.html#que-tamano-es-recomendable-que-tenga-la-tarjeta-interna","title":"\u00bfQu\u00e9 tama\u00f1o es recomendable que tenga la tarjeta interna?","text":"<p>Si s\u00f3lo es para alojar el sistema, hasta con una de 4GB ser\u00eda suficiente. Si se quiere meter adem\u00e1s emuladores y ROMs, entonces hay que subir el tama\u00f1o lo que se considere que se va a necesitar. En el debate sobre qu\u00e9 tarjeta poner m\u00e1s grande (si la interna o la externa), hay que tener en cuenta que pasar cosas por cable a la interna es muy lento. Lo m\u00e1s r\u00e1pido para incorporar contenidos es copiarlos a la externa directamente en el ordenador. Tambi\u00e9n hay considerar que mantener muchos contenidos en la interna dificulta los cambios de firmware en el futuro (no las actualizaciones) ya que se sustituye completamente el contenido de esta tarjeta. En esa situaci\u00f3n habr\u00eda que rescatar los contenidos previamente por cable, lo que como hemos dicho ya es lento. Una opci\u00f3n m\u00e1s r\u00e1pida ser\u00eda copiar de la interna a la externa por medio de DinguxCmdr, pero esto demuestra que antes de llegar a esa situaci\u00f3n ser\u00eda mejor idea mantener esos ficheros directamente en la tarjeta externa.</p>"},{"location":"retro-emulacion/rg-350.html#como-se-soluciona-el-petardeo-de-sonido-en-las-ultimas-versiones-de-rogue","title":"\u00bfC\u00f3mo se soluciona el petardeo de sonido en las \u00faltimas versiones de ROGUE?","text":"<ol> <li>Abrir la aplicaci\u00f3n <code>Sound Mixer</code> de la secci\u00f3n <code>Settings</code> en GMenu2X</li> <li>Poner el volumen PCM y el master a 0%</li> <li>Reiniciar</li> <li>Poner el volumen PCM sobre 80% y el MASTER a 100%</li> <li>Reiniciar</li> </ol> <p>(Fuente)</p>"},{"location":"retro-emulacion/rg-350.html#opciones-para-actualizar-el-firmware-rg350-rogue-cfw","title":"Opciones para actualizar el firmware RG350-ROGUE-CFW","text":"<p>Entre los assets de cada release encontramos tres opciones:</p> Tipo Descarga Descripci\u00f3n Update RG350RG350M Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque dependiendo de la versi\u00f3n del sistema de partida puede no quedar del todo fino. Se recomienda utilizar esta opci\u00f3n s\u00f3lo para actualizar entre versiones de ROGUE, es decir si se parte de BASE, hay que utilizar una de las dos siguientes (preferentemente la \u00faltima). Flasher RG350 Es una aplicaci\u00f3n OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien. En este video se ilustra todo el procedimiento. sd_image.bin RG350RG350M Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opci\u00f3n 2 y la \u00fanica que sirve si se parte de un sistema que no arranca. La imagen ocupa m\u00e1s porque es un volcado de todo lo que contiene la SD (incluidos los espacios vac\u00edos de la tarjeta). El proceso incorpora la complejidad adicional de tener que utilizar algunas utilidades poco habituales, y en el modelo normal de la consola, adem\u00e1s el tener que abrirla para extraer la microSD interna. En este video (en ingl\u00e9s) se ilustra todo el procedimiento. La primera parte de este otro v\u00eddeo tambi\u00e9n muestra el proceso, esta vez en espa\u00f1ol. <p>As\u00ed pues, para la primera actualizaci\u00f3n (y posteriores) se puede utilizar cualquier m\u00e9todo. Dependiendo de la situaci\u00f3n es m\u00e1s recomendable uno que otro. En general empezar por la opci\u00f3n 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el m\u00e9todo 3.</p>"},{"location":"retro-emulacion/rg-350.html#flash-de-sd-interna","title":"Flash de SD interna","text":"<p>De los procesos de actualizaci\u00f3n descritos en el apartado anterior, el que m\u00e1s dudas y temores plantea es el tercero. Sin embargo es el m\u00e1s recomendable ya que nos permite cambiar la tarjeta por una de m\u00e1s calidad, lo que a la larga es beneficioso.</p> <p>Los pasos para realizar el flasheo de la tarjeta interna son los siguientes:</p> <ol> <li>En el modelo de RG350 original, abrir la consola (en los modelos RG350P y M no es necesario al estar accesible la tarjeta INT desde el exterior). El tornillo inferior izquierdo tiene encima un sello que no se puede despegar entero; se desintegra. S\u00f3lo hay que tener cuidado con no partir el cable de la bater\u00eda por darle un tir\u00f3n. Es perfectamente normal que se descuelguen los gatillos L y R. No pasa nada, nos ocuparemos de ello justo antes de cerrar.</li> <li>Sacar la SD rompiendo un nuevo sello que no se puede despegar de una pieza. Sale a cachos. Si no se ha flasheado anteriormente la tarjeta interna por otros medios, se recomienda apartarla, es decir guardarla como est\u00e1 y flashear otra tarjeta. Las recomendaciones para la tarjeta son que tenga 16GB class 10. Ser\u00eda suficiente con una tarjeta de 4GB, ya que el sistema ocupa menos de 1GB, pero tarjetas de esa capacidad ya no se suelen encontrar y de hacerlo, lo m\u00e1s probable es que sea una tarjeta vieja y lenta.</li> <li>Bajar la im\u00e1gen que queremos flashear. Existen dos ramas (para el caso de ROGUE consultar el apartado anterior):<ul> <li>BASE: https://rs97.bitgala.xyz/RG-350/Latest%20Firmware/</li> <li>ROGUE: https://github.com/Ninoh-FOX/RG350-ROGUE-CFW/releases</li> </ul> </li> <li>Instalar uno de estos programas:<ul> <li>WinDisk 32 Imager</li> <li>Balena Etcher</li> </ul> </li> <li>Montar la tarjeta elegida para flashear en el PC con un adaptador o lector.</li> <li>Utilizando el programa del punto 4 flashear la imagen (hay quien recomienda formatear antes pero considero que confunde el proceso m\u00e1s que otra cosa). En este documento de la fundaci\u00f3n Raspberry Pi se detallan los pasos para flashear una imagen de sistema para esta placa. El proceso es id\u00e9ntico en RG350 (cambiando la imagen naturalmente).</li> <li>Expulsar la SD del ordenador.</li> <li>Pinchar en la RG y cerrarla cuidando de que encajen bien los gatillos L/R.</li> </ol> <p>Desde Linux el paso 6 de la lista anterior se puede hacer con este comando desde consola (adaptando el nombre del dispositivo si en nuestro sistema es distinto):</p> <pre><code>$ sudo dd if=sd_image.bin of=/dev/mmcblk0 bs=2M\n</code></pre>"},{"location":"retro-emulacion/rg-350.html#gestion-de-opks","title":"Gesti\u00f3n de OPKs","text":"<p>Este art\u00edculo del viejo wiki de la GCW Zero (que afortunadamente se conserva en archive.org), documenta muy bien c\u00f3mo construir un OPK y algunos de los par\u00e1metros que contienen sus ficheros.</p> <p>En Linux se puede hacer y deshacer un OPK muy f\u00e1cilmente con los siguientes comandos:</p> <ul> <li>Descompresi\u00f3n: <code>unsquashfs fichero.opk</code></li> <li>Compresi\u00f3n: <code>mksquashfs directorio fichero.opk -all-root -noappend -no-exports -no-xattrs</code></li> </ul>"},{"location":"retro-emulacion/rg-350.html#cheatsheets","title":"Cheatsheets","text":""},{"location":"retro-emulacion/rg-350.html#versiones-del-firmware-base","title":"Versiones del firmware BASE","text":"<p>En BASE no se muestra la versi\u00f3n del firmware (como s\u00ed hace ROGUE), por lo que hay que adivinar la versi\u00f3n en base a la fecha de creaci\u00f3n:</p> Fecha Versi\u00f3n 2019-10-10 1.4 2019-10-18 1.5 2019-10-27 1.5.1 2019-11-10 (build date) 1.6 2019-11-17 (build date) 1.7"},{"location":"retro-emulacion/rg-350.html#flags-de-rogue","title":"Flags de ROGUE","text":"<p>Existen 5 ficheros ocultos en el directorio <code>/media/data</code> que sirven para activar varias tareas de mantenimiento/instalaci\u00f3n inicial durante el arranque. Para reactivarlos s\u00f3lo hay que borrar el fichero correspondiente que se crea al finalizar la operaci\u00f3n:</p> Fichero Operaci\u00f3n <code>.clean</code> Comprobaci\u00f3n del sistema de ficheros. <code>.linker</code> Instala los links para GMenu2X de los programas preinstalados. Se comprueba durante el script de arranque <code>/usr/sbin/frontend_start</code> <code>.partition_resized</code> Redimensiona la partici\u00f3n data de la SD interna para aprovechar todo el espacio disponible en la tarjeta ejecutando este script. <code>.reconfig</code> Borra algunos ficheros residuales SSH, de otros programas y de estado (como el volumen y brillo) ejecutando este script. <code>.swapon</code> Crea el fichero para la memoria SWAP ejecutando este script."},{"location":"retro-emulacion/rg-350.html#controles-stockrogue","title":"Controles stock/ROGUE","text":"Funci\u00f3n Shortcut Ajuste de nitidez (hardware scaling) <code>Power + Up/Down</code> Emulaci\u00f3n de crucerta con stick izquierdo <code>Power + B</code> Ajuste de brillo <code>Power + Volumen+/Volumen-</code> Fuerza el escalado de la pantalla <code>Power + A</code> Pantallazo (se guarda en <code>/media/data/local/home/screenshots</code>) <code>Power + X</code> Emulaci\u00f3n de rat\u00f3n con stick derecho (los botones son L2/R2) <code>Power + R1</code> Fuerza la salida al frontend (normalmente GMenu2X) <code>Power + Select</code> Reset <code>Power + Start</code> or <code>Reset</code> button Forzar apagado <code>Power</code> mantenido 4 segundos Salvapantallas en GMenu2X <code>Power</code>"},{"location":"retro-emulacion/rg-350.html#controles-odbeta","title":"Controles ODbeta","text":"Funci\u00f3n Shortcut Apagar el sistema Mantener POWER Reinicio del sistema Power + Start + Select Forzar cierre de aplicaci\u00f3n actual Power + Select Subir volumen sonido Power + UP Bajar volumen sonido Power + DOWN Subir brillo pantalla Power + RIGHT Bajar brillo pantalla Power + LEFT Modo de relaci\u00f3n de aspecto en el escalado por hardware Power + A Activa/desactiva el modo rat\u00f3n (anteriormente POWER + L1) Power + B Suspender sistema (pulsar POWER para despertar) Power + Y Captura de pantalla (en <code>~/screenshots</code>) Power + X Muestra la salida de los scripts de arranque en lugar del logo de boot A (durante el arranque) Boot mode del sistema. Luego seguir esta gu\u00eda para flashear por USB Select (durante el arranque) <p>Estos controles est\u00e1n definidos en el fichero <code>/etc/pwswd.conf</code>. Si se quieren cambiar, hay que copiar dicho fichero a <code>/media/data/local/etc/pwswd.conf</code> con los cambios deseados.</p>"},{"location":"retro-emulacion/rg-350.html#controles-emuladores","title":"Controles emuladores","text":"Emulador/Aplicaci\u00f3n Funci\u00f3n Shortcut SimpleMenu Todos Listado FBA (CPS/NeoGeo) Todos Listado FBA (CPS/NeoGeo) Salir <code>L1+R1+Start &gt; Exit</code> o <code>Power &gt; Exit</code> FBA RetroArch con UniBIOS Entrar en ajustes UniBIOS <code>A+B+Y</code> ScummVM Todos Listado ScummVM Salir <code>Start</code> xMAME Todos Listado xMAME Salir <code>Select + L1 + R1</code> Daphne Todos Listado Daphne Salir <code>Select</code> OpenBOR Todos Listado OpenBOR Salir Salir primero del juego (normalmente con Quit) y luego pulsar Y en el interfaz de OpenBOR (a pesar de que en la leyenda pone X) MAME4All Todos Listado MAME4All Salir <code>Power</code> Gambatte (GB/GBC) Salir <code>Power &gt; QUIT</code> o <code>R1 &gt; QUIT</code> ReGBA (GBA) Salir <code>Power &gt; Exit</code> o <code>Select + Start &gt; Exit</code> Game &amp; Watch Salir <code>Select</code> FCEUX (NES) Salir <code>Power &gt; Exit</code> PocketSNES (SNES) Salir <code>Select + Start &gt; Exit</code> Genesis Plus GX (GG/SMS) Salir <code>Power &gt; Quit</code> o <code>Select + Start &gt; Exit</code> Genesis Plus GX (GG/SMS) Save state <code>Select + L1</code> Genesis Plus GX (GG/SMS) Load state <code>Select + R1</code> Picodrive (MD) Salir <code>Select &gt; Exit</code> PCSX4All (PS) Salir <code>Power &gt; Quit</code> Temper (PCE) Salir <code>Power &gt; Exit Temper</code> NGPCEmu (NGP) Salir <code>Power &gt; Quit</code> Race (NGP) Salir <code>Select + Start &gt; Exit</code> SwanEmu (WS) Salir <code>Power &gt; Quit</code> Stella (A2600) Salir <code>Start &gt; Exit Game</code> (desplazando cursor con stick izquierdo y confirmando con A) A5200 Salir <code>Select+Start &gt; Exit</code> ProSystem (A7800) Salir <code>Select+Start &gt; Exit</code> Handy (LYNX) Salir <code>Power</code> JzIntv (Intellivision) <code>Select &gt; Quit to rom chooser</code> o <code>Power</code> ColecoD (ColecoVision) Salir <code>Select+Start &gt; Exit</code> Retro8 (PICO8) Salir <code>Select</code> DOSBox Salir Hay que localizar la opci\u00f3n del juego en ejecuci\u00f3n para salir a DOS"},{"location":"retro-emulacion/rg-350.html#puntos-de-montaje-de-las-tarjetas","title":"Puntos de montaje de las tarjetas","text":"Directorio Elemento montado <code>/media/system</code> Primera partici\u00f3n de la SD interna <code>/media/data</code> Segunda partici\u00f3n de la SD interna <code>/media/sdcard</code> Primera partici\u00f3n de la SD externa"},{"location":"retro-emulacion/rg-350.html#directoriosficheros-interesantes-stockrogue","title":"Directorios/Ficheros interesantes stock/ROGUE","text":"<p>En este documento se indican rutas importantes de varios emuladores y ports populares.</p> Directorio Contenido <code>/media/data/local/home/</code> Configuraciones de emuladores, ports y aplicaciones en general. Es el llamado Home del sistema. Enlace simb\u00f3lico desde <code>/media/home</code> <code>/media/data/apps/</code> Aplicaciones (<code>.opk</code>) instaladas en la tarjeta interna <code>/media/sdcard/apps/</code> Aplicaciones (<code>.opk</code>) instaladas en la tarjeta externa <code>/usr/share/gmenu2x/sections/</code> Lanzadores de las aplicaciones y settings preinstaladas en el sistema y que se unen a las instaladas por el usuario en <code>/media/data/local/home/.gmenu2x/sections/</code> <code>/var/log/messages</code> Logs del sistema <code>/var/log/gmenu2x.log</code> Log de GMenu2X <code>/proc/</code> Ficheros asociados a procesos en ejecuci\u00f3n como <code>cpuinfo</code> que muestra informaci\u00f3n sobre el procesador <code>/media/data/local/home/.gmenu2x/skins</code> Themes de GMenu2X <code>/media/data/local/home/.gmenu2x/skins/&lt;tema&gt;/wallpapers/</code> Wallpapers <code>/usr/sbin/frontend_start</code> Lanzador de frontend predeterminado <code>/media/data/local/sbin/frontend_start</code> Lanzador de frontend personalizado <code>/media/home</code> Enlace simb\u00f3lico de <code>/media/data/local/home</code> <code>/usr/local</code> Enlace simb\u00f3lico de <code>/media/data/local</code> <code>/usr/share/scriptrunner/scripts</code> Scripts preinstalados en ScriptRunner <code>/sys/class/power_supply/battery/</code> Ficheros de control de bater\u00eda; <code>voltage_now</code> da el voltaje actual de la bater\u00eda <code>/sys/class/graphics/fb0/</code> Ficheros de control de la pantalla; <code>bits_per_pixel</code> da la profundidad de color <code>/usr/share/gmenu2x/sections/</code> Lanzadores de aplicaciones preinstaladas en rootfs <code>/usr/share/gcwconnect/gcwzero.ttf</code> Tipo de letra de GCWZero <code>/proc/cmdline</code> Permite conocer el modelo de consola (argumento <code>hwvariant</code>) <code>/sys/devices/platform/jz-lcd.0/graphics/fb0/modes</code> o <code>/sys/class/graphics/fb0/modes</code> Permiten conocer la resoluci\u00f3n de la pantalla en Stock/ROGUE"},{"location":"retro-emulacion/rg-350.html#directoriosficheros-interesantes-opendingux-beta","title":"Directorios/Ficheros interesantes OpenDingux beta","text":"Directorio Contenido <code>/sys/devices/platform/13050000.lcd-controller/graphics/fb0/modes</code> Permite conocer la resoluci\u00f3n de la pantalla <code>/sys/class/graphics/fb0/virtual_size</code> Modo del framebuffer <code>/media/data/local/share/opendingux/loading.png</code> Pantalla mostrada durante las transiciones de modo <code>~/.autostart</code> Script para lanzar el frontend. Si no existe se lanza GMenu2X por defecto <code>/sys/kernel/debug/gpio</code> Estado de los GPIOs del procesador y correspondencia con controles <code>/sys/class/power_supply/jz-battery/voltage_max_design</code> Voltaje de bater\u00eda considerado como carga m\u00e1xima (4,2V actualmente) <code>/sys/class/power_supply/jz-battery/voltage_min_design</code> Voltaje de bater\u00eda considerado como carga m\u00ednima (3,4V actualmente) <code>/sys/class/power_supply/jz-battery/voltage_now</code> Voltaje actual de la bater\u00eda <code>/sys/class/power_supply/usb-charger/online</code> Sensor del puerto de carga (0:Desconectado, 1:Conectado). No indica si la consola se est\u00e1 cargando, s\u00f3lo si hay un cable conectado <code>/etc/pwswd.conf</code> Atajos predeterminados de pwswd <code>/media/data/local/etc/pwswd.conf</code> Atajos de pwswd personalizados por usuario"},{"location":"retro-emulacion/rg-350.html#directorios-de-savestates","title":"Directorios de savestates","text":"Sistema Emulador Directorio Atari 2600 Stella <code>/media/data/local/home/.stella/state</code> Atari 7800 ProSystem Mismo directorio de las ROMs Capcom System I, II, III y Neo Geo FBA <code>/media/data/local/home/.fba/saves</code> NES FCEUX <code>/media/data/local/home/.fceux/fcs</code> Game Boy y Game Boy Color Gambatte <code>/media/data/local/home/.gambatte/saves</code> Game Boy Advance ReGBA <code>/media/data/local/home/.gpsp</code> Game Gear y MasterSystem SMS Plus <code>/media/data/local/home/.smsplus/state</code> Game Gear y MasterSystem Genesis Plus <code>/media/data/local/home/.genplus/saves</code> Atari Lynx Handy <code>/media/data/local/home/.handy</code> Mega Drive PicoDrive <code>/media/data/local/home/.picodrive/mds</code> Neo Geo Pocket NGPCEmu <code>/media/data/local/home/.ngpcemu/sstates</code> PC Engine Temper <code>/media/data/local/home/.temper/save_states</code> PlayStation PCSX4All <code>/media/data/local/home/.pcsx4all/sstates</code> y <code>/media/data/local/home/.pcsx4all/memcards</code> SNES PocketSNES <code>/media/data/local/home/.pocketsnes</code> WonderSwan SwanEmu <code>/media/data/local/home/.swanemu/sstates</code> Arcade xMAME <code>/media/data/local/share/xmame/xmame52/sta</code>, <code>/media/data/local/share/xmame/xmame69/sta</code> y <code>/media/data/local/share/xmame/xmame84/sta</code> ScummVM ScummVM <code>/media/data/local/home/.local/share/scummvm/saves</code> OpenBOR OpenBOR <code>/media/data/local/home/.OpenBOR/Saves</code> Port Cave Story <code>/media/data/local/home/.nxengine</code> Port VVVVVV <code>/media/data/local/home/.local/share/VVVVVV/saves</code> Port Super Methane Bros. <code>/media/data/local/home/.methane</code> Port SORR <code>/media/data/local/home/.sorrv5/savegame</code>"},{"location":"retro-emulacion/rg-350.html#bios","title":"BIOS","text":"Sistema Emulador Directorio Fichero Atari 5200 A5200 <code>/media/data/local/home</code> <code>5200.rom</code> Atari Lynx Handy <code>/media/data/local/home/.handy</code> <code>lynxboot.img</code> Gameboy Gambatte <code>/media/data/local/home/.gambatte/bios/</code> <code>gb_bios.bin</code> Gameboy Color Gambatte <code>/media/data/local/home/.gambatte/bios/</code> <code>gbc_bios.bin</code> Gameboy Advance Gpsp <code>/media/data/local/home/.gpsp/</code> <code>gba_bios.bin</code> MegaCD Picodrive <code>/media/data/local/home/.picodrive/</code> <code>bios_CD_E.bin</code>; <code>bios_CD_J.bin</code>; <code>bios_CD_U.bin</code> NeoGeo Mismo directorio de las ROMs <code>neogeo.zip/uni-bios.rom</code> PC-Engine CD Temper <code>/media/data/local/home/.Temper/syscards/</code> <code>syscard3.pce</code> PlayStation Pcsx4all <code>/media/data/local/home/.pcsx4all/bios/</code> <code>psxonpsp660.bin</code>; <code>scph1001.bin</code>; <code>scph5500.bin</code>; <code>scph5501.bin</code>; <code>scph5502.bin</code>"},{"location":"retro-emulacion/rg-350.html#gpios","title":"GPIOs","text":"<pre><code>rg280v:~ $ sudo cat /sys/kernel/debug/gpio\nPassword:\ngpiochip0: GPIOs 0-31, parent: platform/10010000.pin-controller, GPIOA:\n gpio-30  (                    |Power button        ) in  hi IRQ ACTIVE LOW\n\ngpiochip1: GPIOs 32-63, parent: platform/10010000.pin-controller, GPIOB:\n gpio-34  (                    |cd                  ) in  lo IRQ ACTIVE LOW\n gpio-37  (                    |vbus                ) in  hi IRQ\n gpio-42  (                    |Left shoulder button) in  hi IRQ ACTIVE LOW\n gpio-43  (                    |R2 shoulder button  ) in  hi IRQ ACTIVE LOW\n gpio-44  (                    |Volume+ button      ) in  hi IRQ ACTIVE LOW\n gpio-45  (                    |Volume- button      ) in  hi IRQ ACTIVE LOW\n gpio-52  (                    |L2 shoulder button  ) in  hi IRQ ACTIVE LOW\n gpio-53  (                    |Start button        ) in  hi IRQ ACTIVE LOW\n gpio-62  (                    |power               ) out lo ACTIVE LOW\n\ngpiochip2: GPIOs 64-95, parent: platform/10010000.pin-controller, GPIOC:\n\ngpiochip3: GPIOs 96-127, parent: platform/10010000.pin-controller, GPIOD:\n gpio-114 (                    |Select button       ) in  lo IRQ\n\ngpiochip4: GPIOs 128-159, parent: platform/10010000.pin-controller, GPIOE:\n gpio-130 (                    |reset               ) out hi ACTIVE LOW\n gpio-137 (                    |regulator@1         ) out lo ACTIVE LOW\n gpio-143 (                    |sck                 ) out lo\n gpio-144 (                    |spi0 CS0            ) out hi ACTIVE LOW\n gpio-145 (                    |mosi                ) out lo\n gpio-148 (                    |Button B            ) in  hi IRQ ACTIVE LOW\n gpio-149 (                    |D-pad up            ) in  hi IRQ ACTIVE LOW\n gpio-151 (                    |D-pad left          ) in  hi IRQ ACTIVE LOW\n gpio-152 (                    |D-pad right         ) in  hi IRQ ACTIVE LOW\n gpio-153 (                    |D-pad down          ) in  hi IRQ ACTIVE LOW\n gpio-154 (                    |Right shoulder butto) in  hi IRQ ACTIVE LOW\n gpio-155 (                    |Button X            ) in  hi IRQ ACTIVE LOW\n gpio-156 (                    |Button Y            ) in  hi IRQ ACTIVE LOW\n gpio-157 (                    |Button A            ) in  hi IRQ ACTIVE LOW\n\ngpiochip5: GPIOs 160-191, parent: platform/10010000.pin-controller, GPIOF:\n gpio-163 (                    |enable              ) out hi ACTIVE LOW\n gpio-180 (                    |enable              ) out lo\n gpio-181 (                    |Headphone detection ) in  hi IRQ\n</code></pre>"},{"location":"retro-emulacion/rg-350.html#codigos-teclas-para-mappers-dosbox","title":"C\u00f3digos teclas para mappers DOSBOX","text":"Control C\u00f3digo Tecla de PC en mapper predeterminado A 306 key_lctrl B 308 key_lalt X 32 key_space Y 304 key_lshift L1 9 key_tab L2 280 key_pageup R1 8 key_bspace R2 281 key_pagedown UP 273 key_up DOWN 274 key_down LEFT 276 key_left RIGHT 275 key_right START 13 key_enter SELECT 27 key_esc POWER 278 key_home"},{"location":"retro-emulacion/rg-350.html#codigos-teclas-en-opendingux-beta","title":"C\u00f3digos teclas en OpenDingux Beta","text":"<p>Los c\u00f3digos de las teclas cambian en el nuevo firmware beta:</p> Control C\u00f3digo A 285 B 312 X 57 Y 42 L1 15 L2 73 R1 14 R2 81 UP 72 DOWN 80 LEFT 75 RIGHT 77 START ?? SELECT ?? POWER ??"},{"location":"retro-emulacion/rg-350.html#solucion-de-problemas","title":"Soluci\u00f3n de problemas","text":""},{"location":"retro-emulacion/rg-350.html#corrupcion-de-lanzador","title":"Corrupci\u00f3n de lanzador","text":"<p>En ocasiones no se muestra correctamente el icono de una aplicaci\u00f3n, o no apunta a donde deber\u00eda. Puede suceder cuando hay dos OPK's con el mismo nombre en la SD interna y externa, y se borra uno de ellos por ejemplo. Para resetear la informaci\u00f3n, entrar en la secci\u00f3n donde est\u00e9 el problema dentro de el directorio <code>/media/data/local/home/.gmenu2x/sections</code> y borrar el nombre de la aplicaci\u00f3n problem\u00e1tica. Lo que hay all\u00ed no es la aplicaci\u00f3n en s\u00ed sino un fichero tipo <code>.desktop</code> con metainformaci\u00f3n (icono, descripci\u00f3n, etc.).</p>"},{"location":"retro-emulacion/rg-350.html#colocar-lanzadores-en-secciones-nuevas-de-gmenu2x","title":"Colocar lanzadores en secciones nuevas de GMenu2X","text":"<p>GMenu2X permite crear nuevas secciones y codificar en los <code>.desktop</code> que hay dentro de los OPKs que los lanzadores se muestren en esas secciones. Por alg\u00fan motivo el mecanismo no fnunciona del todo bien y si la secci\u00f3n no es de las tradicionales (<code>applications</code>, <code>emulators</code>, <code>settings</code>, <code>games</code>), al editar el lanzador no se persisten los cambios ya que no se generan los ficheros de enlace en <code>~/.gmenu2x/sections</code>. Podemos enga\u00f1ar a GMenu2X para que genere estos ficheros siguiendo estos pasos:</p> <ol> <li>Crear el OPK con el <code>.desktop</code> apuntando a una secci\u00f3n de las que no dan problemas, por ejemplo <code>emulators</code>.</li> <li>Transferir el OPK a la consola y editar el lanzador haciendo un cambio menor, como por ejemplo el filtro de extensiones, para que se genere el fichero de link en <code>~/.gmenu2x/sections/emulators</code>.</li> <li>Cambiar el par\u00e1metro <code>Categories</code> (es decir la secci\u00f3n) en el <code>.desktop</code> del OPK poniendo la que interese en lugar de <code>emulators</code>, por ejemplo <code>doom</code>.</li> <li>Transferir el nuevo OPK a la consola.</li> <li>Reiniciar GMenu2X para asegurarnos de que se lean todos los cambios.</li> </ol> <p>A partir de entonces aparece el lanzador en su secci\u00f3n (<code>doom</code> en el ejemplo) y si se edita se persisten los cambios sin problemas.</p> <p>Como dato adicional, para que la nueva secci\u00f3n tenga icono propio, hay que colocar un icono png de 32x32 con el mismo nombre de la secci\u00f3n creada (<code>doom.png</code> en el ejemplo) en la ruta: <code>/media/data/local/home/.gmenu2x/skins/&lt;theme&gt;/sections</code> donde <code>&lt;theme&gt;</code> se corresponde con el skin que estemos usando.</p>"},{"location":"retro-emulacion/rg-350.html#programas-que-se-cierran","title":"Programas que se cierran","text":"<p>En ocasiones los emuladores, aplicaciones o frontends (EmulationStation, PyMenu, SimpleMenu, etc.) cuando no est\u00e1n bien configurados se cierran sin dar m\u00e1s explicaciones al abrirlos o durante su manipulaci\u00f3n. Para tener algo que analizar, si los hemos lanzado desde GMenu2X, podemos activar un log que nos ofrecer\u00e1 la salida de error en la invocaci\u00f3n de estos programas. Para activarla hay que entrar en los ajustes de GMenu2X y poner a ON el par\u00e1metro <code>Output logs</code> (<code>Archivos de registro de sucesos</code> si tenemos el interfaz en espa\u00f1ol):</p> <p> </p> <p>Una vez que en el log haya algo que mostrar aparecer\u00e1 un lanzador nuevo de nombre <code>Log Viewer</code> (<code>Lector de Registros de sucesos</code> si tenemos el interfaz en espa\u00f1ol) donde podremos consultar la salida de error del proceso que se ha cerrado y con suerte obtener alguna pista sobre el motivo del cierre:</p> <p></p>"},{"location":"retro-emulacion/rg-350.html#particularidades-juegos","title":"Particularidades juegos","text":"<ul> <li>Metal Gear Solid (PS): Desactivar HLE en el emulador y seleccionar BIOS <code>scph1001.bin</code> (instrucciones aqu\u00ed). Realmente este ajuste, aunque imprescindible para MGS y otros, es recomendable en general.</li> <li>Metal Gear Solid (PS): En un momento dado del juego (alerta Spoiler) hay que superar un boss cambiando el mando de puerto en la consola original. Como con la RG esto no se puede hacer, hay un truco que consiste en llamar mucho al coronel, entonces se puede quitarles las vendas a los bustos que hay detras, y el boss se desconcierta haciendo que cueste menos derrotarle. Otra opci\u00f3n es descargar todo el cargador contra \u00e9l, que alguna vez le dar\u00e1s.</li> <li>Final Fantasy VIII, IX y algunos juegos europeos (PS): Necesitan parche anticopy o poner el archivo <code>.sbi</code> correspondiente a cada cd en el mismo directorio y con el mismo nombre. Ficheros SBI</li> <li>Harry Potter y la C\u00e1mara secreta, Vagrant Story, Ape Escape y Bugs Bunny &amp; Taz - Time Busters (PS): Estos juegos se quedan atascado en los videos introductorios. La soluci\u00f3n es cambiar la opci\u00f3n <code>Core settings &gt; Emulation core</code> de <code>rec</code> a <code>int</code>. El emulador es m\u00e1s lento pero m\u00e1s preciso y se puede superar ese punto. En ese momento grabar un savestate, volver a poner <code>rec</code> en <code>Core settings &gt; Emulation core</code> y finalmente cargar el savestate. En el Vagrant Story el <code>Analog Mode</code> que soporta este juego es <code>DualShock</code>. Recordar adem\u00e1s que este juego es de los que necesita SBI. Aqu\u00ed se ofrece otra soluci\u00f3n para los casos en que cambiar de modo de emulaci\u00f3n sea demasiado engorroso (por tener que estar haci\u00e9ndolo continuamente).</li> <li>Dragon Ball Z: The Legacy of Goku (GBA): Este juego al poco de empezar a jugar en algunos emuladores muestra el error <code>Este juego no funcionar\u00e1 con el hardware encontrado</code>. Intentar el truco que comentan en este comentario.</li> <li>VVVVVV (port): Si hay problemas durante el arranque (pantalla en negro), borrar el directorio de settings <code>/usr/local/home/.local/share/VVVVVV/</code>. Si no existe la ruta previa al directorio <code>VVVVVV</code>, es decir <code>/usr/local/home/.local/share/</code> el juego abrir\u00e1 pero no guardar\u00e1 los estados. En ese caso crear manualmente la ruta desde terminal o DinguxCmdr.</li> <li>Run and Gun (XMAME): Para saltar el Memory Check, enchufar un teclado al puerto USB1/OTG y pulsar F7. Otra opci\u00f3n es mapear L2 a F2 (<code>Service mode</code> en <code>Input (this game)</code>) y R2 a F3 (<code>Reset game</code> en <code>Input (general)</code>) y pulsarlos a la vez.</li> <li> <p>Parasite Eve 2 y Vandal Hearts 1/2 (PS): Estos juegos tienen un fix espec\u00edfico para ellos en las opciones del emulador:</p> <p></p> </li> <li> <p>InuYasha Sengoku Battle (PS): Este juego tiene un fix espec\u00edfico para ellos en las opciones del emulador:</p> <p></p> </li> <li> <p>Full Throttle (ScummVM): En la lucha contra los moteros se hace muy dif\u00edcil pasar por falta de potencia de la m\u00e1quina. No cambia de arma y a veces s\u00ed lo hace pero demasiado lento. Para mejorar la situaci\u00f3n hacer estos ajustes temporales para pasar esa parte:</p> <p> </p> </li> </ul>"},{"location":"retro-emulacion/rg-350.html#particularidades-emuladores","title":"Particularidades emuladores","text":"<ul> <li>A5200 (Atari 5200): Hay que colocar la BIOS en <code>/media/data/local/home/5200.rom</code>. Las ROMs pueden estar en cualquier lugar porque el emulador permite seleccionarlas al abrirlo mediante un explorador de ficheros, pero deben estar descomprimidas y con extensi\u00f3n <code>.a52</code>.</li> <li>ReGBA: La resoluci\u00f3n de pantalla de Game Boy Advance es de 240x160, lo que hace que si se quiere aprovechar bien la pantalla de la RG350 haya que utilizar alg\u00fan tipo de escalado. Los siguientes son los m\u00e1s recomendados (se ajustan en <code>Display settings &gt; Image scaling</code> en ReGBA):<ul> <li><code>None</code>: Encaja la resoluci\u00f3n de GBA pixel a pixel en la pantalla de la RG. Tiene el inconveniente de que la pantalla queda un poco peque\u00f1a. Si se utiliza la versi\u00f3n modificada sin bezel que se puede bajar aqu\u00ed no se ver\u00e1 el marco con aspecto de GBA SP que trae la aplicaci\u00f3n original.</li> <li><code>Aspect, bilinear</code>: Scaling recomendado por muchos usuarios.</li> <li><code>Hardware</code>: Nos permitir\u00e1 ajustar el enfoque manualmente, a continuaci\u00f3n se describe el proceso. Empezamos pulsando <code>Power+A</code> hasta poner las bandas negras arriba y abajo. Luego pulsamos <code>Power+Abajo</code> varias veces hasta alcanzar el m\u00ednimo, momento en el que se pierde toda la difuminaci\u00f3n del escalado. Ahora ejecutamos un juego que tenga varios elementos cr\u00edticos en pantalla como texto y/o sprites detallados. Pulsando <code>Power+Arriba</code> iremos aumentando el grado de interpolaci\u00f3n de los gr\u00e1ficos. Si lo llevamos hasta el extremo (pulsando <code>Power+Arriba</code> muchas veces) veremos c\u00f3mo la imagen termina por coger mucho ruido. Se trata pues de localizar el equilibrio en un buen nivel de interpolaci\u00f3n sin que llegue a aparecer ruido.</li> </ul> </li> <li> <p>Pcsx4all (PS): Algunos juegos de PS superan la resoluci\u00f3n de la pantalla de la RG350 (320x240). En esos juegos los textos pueden llegar a leerse mal. En esos casos configurar el par\u00e1metro <code>Video scaling</code> de <code>GPU settings</code> al valor <code>hardware</code> y luego durante el juego utilizar la combinaci\u00f3n de teclas <code>Power+A</code> para conmutar entre los distintos modos de scaling. Tambi\u00e9n podremos ajustar el grado de interpolaci\u00f3n del scaling pulsando <code>Power+Arriba</code> y <code>Power+Abajo</code> de la misma forma que se ha descrito en el caso de ReGBA.</p> <p></p> </li> </ul>"},{"location":"retro-emulacion/rg-350.html#modos-de-arranque-seguro","title":"Modos de arranque seguro","text":"<p>Durante el arranque se puede modificar la forma de iniciar el sistema pulsando algunas teclas:</p> <ul> <li><code>Y</code>: Carga el \u00faltimo kernel que funcion\u00f3 correctamente.</li> <li><code>X</code>: Carga el \u00faltimo sistema de archivos (rootfs) que funcion\u00f3 correctamente.</li> <li><code>X+Y</code>: Carga el \u00faltimo sistema (kernel+rootfs) que funcion\u00f3 correctamente.</li> </ul>"},{"location":"retro-emulacion/rg-350.html#corrupcion-de-archivos-de-texto","title":"Corrupci\u00f3n de archivos de texto","text":"<p>Linux y Windows utilizan distintos sistemas para codificar los retornos de carro de los ficheros de texto. Si creamos o editamos uno de estos ficheros y luego lo transferimos a la RG350, dependiendo del uso que vaya a tener ese fichero podr\u00eda no funcionar. Unos ficheros especialmente sensibles son los scripts como el que determina el lanzador de aplicacione predeterminado, es decir <code>/media/data/local/sbin/frontend_start</code>. Para reconvertir los ficheros de texto del formato de Windows al de Linux existe una peque\u00f1a utilidad llamada <code>dos2unix</code>. Para utilizarla tenemos que conectar con la RG350 por SSH para tener acceso a una terminal o utilizar la aplicaci\u00f3n de terminal <code>ST-SDL</code>. Desde uno de estos terminales ejecutaremos:</p> <pre><code>RG350:/media/data/local/home # dos2unix fichero_a_convertir.txt\n</code></pre>"},{"location":"retro-emulacion/rg-350.html#backup-de-home","title":"Backup de home","text":"<p>El directorio <code>/home/data/local/home</code> pertenece a la tarjeta interna y es de los m\u00e1s importantes puesto que es donde la mayor\u00eda (por no decir todos) los programas (emuladores, ports, aplicaciones) guardan sus ajustes (como los savestates de los emuladores o las memory cards de pcsx4all). Cuando flasheamos la tarjeta interna (con las opciones 2 y 3 del apartado Opciones para actualizar el firmware RG350-ROGUE-CFW) el contenido de este directorio se pierde. Una idea ser\u00eda hacer un respaldo del mismo en la tarjeta externa (que no se altera durante el flasheo) y luego restaurarlo.</p> <p>Podemos hacer el backup lanzando un comando de terminal ya sea conectando por SSH o utilizando una aplicaci\u00f3n de terminal (como <code>ST-SDL</code>). El comando para realizar el backup es:</p> <pre><code>tar -cf /media/sdcard/home_backup.tar -C /media/data/local home\n</code></pre> <p>En caso de querer excluir alg\u00fan directorio concreto que ocupe mucho y que tengamos respaldado por otro lado (por ejemplo si tuvi\u00e9ramos las ROMs all\u00ed), utilizar el par\u00e1metro <code>--exclude</code>. Vamos a ver c\u00f3mo se excluir\u00edan por ejemplo las im\u00e1genes de previsualizaci\u00f3n de FBA:</p> <pre><code>tar -cf /media/sdcard/home_backup.tar -C /media/data/local --exclude=home/.fba/previews home\n</code></pre> <p>Para restaurar:</p> <pre><code>tar -xf /media/sdcard/home_backup.tar -C /media/data/local\n</code></pre> <p>El comando no es sensible a la ruta, es decir puede lanzarse desde cualquier directorio y genera el fichero <code>home_backup.tar</code> en la ra\u00edz de la tarjeta externa (ruta <code>/media/sdcard/</code> en el sistema de la consola).</p> <p>Aqu\u00ed puede leerse un monogr\u00e1fico sobre el tema.</p>"},{"location":"retro-emulacion/rg-350.html#monograficos-en-blog","title":"Monogr\u00e1ficos en blog","text":"<ul> <li>Primeros pasos con la consola RG350</li> <li>Instalaci\u00f3n y configuraci\u00f3n de FBA</li> <li>Instalaci\u00f3n y configuraci\u00f3n de xMAME</li> <li>Instalaci\u00f3n y configuraci\u00f3n de MAME4All</li> <li>Instalaci\u00f3n y configuraci\u00f3n de ScummVM</li> <li>Integraci\u00f3n de ScummVM en lanzadores con selecci\u00f3n de ROMs como SimpleMenu</li> <li>Instalaci\u00f3n y configuraci\u00f3n de Daphne</li> <li>Instalaci\u00f3n y configuraci\u00f3n de OpenBOR</li> <li>Instalaci\u00f3n y configuraci\u00f3n de DOSBox</li> <li>Generaci\u00f3n de previews de las roms instaladas</li> <li>Instalaci\u00f3n y configuraci\u00f3n de launcher SimpleMenu</li> <li>Instalaci\u00f3n y configuraci\u00f3n de launcher PyMenu</li> <li>Instalaci\u00f3n y configuraci\u00f3n de launcher EmulationStation</li> <li>Conexi\u00f3n a internet a trav\u00e9s de cable USB</li> <li>C\u00f3mo hacer backup para no perder savestates y configuraciones de emuladores</li> <li>Py Backup. Aplicaci\u00f3n para gestionar backups</li> <li>Compilaci\u00f3n de Buildroot con toolchain en un contenedor Docker</li> <li>Ejemplos de compilaci\u00f3n de algunas aplicaciones por medio del toolchain en Docker</li> <li>Procedimiento para generar una imagen de tarjeta SD flasheable</li> <li>Integraci\u00f3n en frontends y mejora en la gesti\u00f3n del modo vertical en FBA</li> <li>Interfaz de ajustes para las ROMs de xMAME lanzadas desde SimpleMenu</li> <li>Sustituci\u00f3n de pantalla por la del modelo M</li> <li>Instalador RetroArch</li> </ul>"},{"location":"retro-emulacion/rg-351.html","title":"RG351","text":""},{"location":"retro-emulacion/rg-351.html#enlaces","title":"Enlaces","text":""},{"location":"retro-emulacion/rg-351.html#documentacion","title":"Documentaci\u00f3n","text":"<ul> <li>FAQs ArkOS</li> <li>Using Content, Folder, and Core Overrides for Custom Settings</li> <li>Restaurar config BOBELEC</li> </ul>"},{"location":"retro-emulacion/rg-351.html#emuladores-ports-y-aplicaciones","title":"Emuladores, Ports y Aplicaciones","text":"<ul> <li>PSP game settings for RG351P by jserodio</li> </ul>"},{"location":"retro-emulacion/rg-351.html#sistema","title":"Sistema","text":"<ul> <li>Distribuciones:<ul> <li>351ELEC</li> <li>Batocera</li> <li>ArkOS</li> <li>Lakka</li> </ul> </li> <li>Buildroot:<ul> <li>Gameblabla</li> </ul> </li> </ul>"},{"location":"retro-emulacion/rg-351.html#hardware","title":"Hardware","text":"<ul> <li>Extracci\u00f3n UART</li> <li>Teardown</li> <li>Soluci\u00f3n ruido Wifi: Colocar un condensador de 0.1uF a tierra en el terminal negativo del altavoz derecho.</li> <li>Programaci\u00f3n de STM32F103</li> <li>Repuestos componentes:<ul> <li>Repuestos oficiales en Aliexpress</li> <li>Funda protectora</li> <li>M\u00f3dulo Wifi MT7601 original: No est\u00e1 ya disponible; se mantiene por la referencia del factor forma correcto.</li> <li>M\u00f3dulo Wifi Mtk7601un compatible + Antena externa (opcional)</li> <li>Dongle Wifi MT7601 compatible</li> <li>Funda compatible</li> </ul> </li> </ul>"},{"location":"retro-emulacion/rg-351.html#cheatsheets","title":"Cheatsheets","text":""},{"location":"retro-emulacion/rg-351.html#logs-completos-del-sistema","title":"Logs completos del sistema","text":"<p>En EmuELEC hay montado un sistema para subir un log muy detallado de todo el sistema a internet. La consola tiene que estar conectada a internet para que esto funcione, no s\u00f3lo a la red, porque sube todo el log a un sitio. Lo que hay que hacer es:</p> <ol> <li>Conectar la consola a internet.</li> <li>Iniciar un terminal por SSH.</li> <li>Ejecutar el comando <code>emueleclogs.sh</code>.</li> <li>El comando anterior devuelve una URL del dominio <code>ix.io</code>.</li> <li>Abrir la URL que devuelve con el navegador.</li> </ol>"},{"location":"retro-emulacion/rg-351.html#controles-bob-fat-edition","title":"Controles BOB FAT edition","text":"Situaci\u00f3n Funci\u00f3n Shortcut Emulador Pausa <code>Select + A</code> Emulador Reset <code>Select + B</code> Emulador Men\u00fa RetroArch <code>Select + X</code> Emulador Avance r\u00e1pido <code>Select + Y</code> Emulador Guardar savestate <code>Select + R1</code> Emulador Cargar savestate <code>Select + L1</code> Emulador Cambiar disco <code>Select + R2</code> Emulador Abrir bandeja CD <code>Select + L2</code> Emulador Cerrar juego <code>Select + Start</code> Emulador Cambiar slot savestate <code>Select + \u2190\u2192</code> Emulador Cambiar volumen <code>Select + \u2191\u2193</code> Nintendo DS Alternar pantalla <code>L2 y R2</code> Nintendo DS Mover puntero <code>Stick derecho</code> Nintendo DS Click puntero <code>R3</code> (click stick derecho) FBA con UniBIOS Entrar en ajustes UniBIOS <code>A+B+Y</code>"},{"location":"retro-emulacion/rg-351.html#controles-firmware-stock","title":"Controles firmware stock","text":"Situaci\u00f3n Funci\u00f3n Shortcut Emulador Men\u00fa RetroArch <code>L3 + R3</code>"},{"location":"retro-emulacion/rg-351.html#controles-arkos","title":"Controles ArkOS","text":"Situaci\u00f3n Funci\u00f3n Shortcut Emulador Men\u00fa RetroArch <code>Select + X</code> Emulador Cerrar juego <code>Select + Start</code> Emulador Screenshot de aplicaciones lanzadas con rg351p-js2xbox <code>L3</code>"},{"location":"retro-emulacion/rg-351.html#menus-interesantes-emulationstation","title":"Men\u00fas interesantes EmulationStation","text":"Men\u00fa Funci\u00f3n Imagen UI Settings &gt; Show filenames in lists Alterna entre mostrar los nombres de los ficheros o el nombre del juego extra\u00eddo de los metadatos Game Settings &gt; Per System advanced configuration Ajustes de cada sistema (como core con que emular) Main Menu &gt; Games Settings &gt; System Settings &gt; Netplay Settings &gt; Enable Netplay Activa el sistema Netplay integrado en ES. Ver caja <code>Netplay</code> al final de esta tabla 351ELEC <p>Netplay</p> <p>Una vez activado Netplay, se escanear\u00e1n todas las ROMs con capacidad Netplay. Pulsando <code>X</code> desde el men\u00fa de elecci\u00f3n de sistemas de ES aparecer\u00e1 el men\u00fa <code>Connect to Netplay</code> que mostrar\u00e1 las partidas disponibles. Pulsando <code>X</code> desde el men\u00fa de elecci\u00f3n de ROMs, en el men\u00fa que aparece se nos dar\u00e1 la opci\u00f3n <code>Start Netplay Host</code> con el que podremos hospedar una partida.</p>"},{"location":"retro-emulacion/rg-351.html#menus-interesantes-retroarch","title":"Men\u00fas interesantes RetroArch","text":"Men\u00fa Situaci\u00f3n Funci\u00f3n Quick Menu &gt; Options &gt; Use BIOS Core PCSX-ReARMed Poner a <code>auto</code> para cargar la BIOS original. No usar HLE Quick Menu &gt; Controls &gt; Save Core Remap File Guarda los ajustes de controles como predeterminados para el sistema Quick Menu &gt; Controls &gt; Save Game Remap File Guarda los ajustes de controles como particulares para el juego en ejecuci\u00f3n Quick Menu &gt; On-Screen Overlay &gt; Display Overlay Gambatte Poner a OFF ya que el overlay se amontona sobre la pantalla del juego en este emulador con los sistemas GB y GBC (usar <code>Overrides &gt; Save Core Overrides</code> a continuaci\u00f3n para guardar) Quick Menu &gt; Overrides &gt; Save Core Overrides Convierte la configuraci\u00f3n actual en predeterminada para el core en ejecuci\u00f3n"},{"location":"retro-emulacion/rg-351.html#directoriosficheros-interesantes","title":"Directorios/Ficheros interesantes","text":"Sistema Directorio Contenido EmuELEC/351ELEC <code>/storage/.config/emulationstation</code> Configuraci\u00f3n EmulationStation EmuELEC/351ELEC <code>/storage/.config/retroarch</code> Configuraci\u00f3n RetroArch EmuELEC/351ELEC <code>/storage/.config/emuelec/scripts</code> Scripts de sistema como: Control de brillo, Lanzar emulador, Explorador de archivos, Mostrar splash, Mostrar di\u00e1logo. Se copian durante el arranque de <code>/usr/config/emuelec/scripts/</code> EmuELEC/351ELEC <code>/storage/.brightness</code> Nivel de brillo en el arranque EmuELEC/351ELEC <code>/usr/lib/coreelec/fs-resize</code> Script que prepara la tercera partici\u00f3n para las ROMs (expandi\u00e9ndola para que ocupe el espacio libre de la tarjeta). Se lanza desde el servicio definido en <code>/usr/lib/systemd/system/fs-resize.service</code> EmuELEC/351ELEC <code>/emuelec/logs/emuelec.log</code> Log del \u00faltimo juego ejecutado. ArkOS <code>/home/ark/.emulationstation</code> Configuraci\u00f3n EmulationStation ArkOS <code>/home/ark/.config/retroarch</code> Configuraci\u00f3n RetroArch64 ArkOS <code>/opt/system</code> Scripts de sistema como: Enable/Disable Wifi, Enable/Disable remote services, Fix ExFAT Partition, Set clock, Network Info, Update OS ArkOS <code>/opt/asciis/launch.txt</code> ASCII art que aparece al lanzar los emuladores ArkOS <code>/home/ark</code> Screenshots ArkOS <code>/boot/firstboot.sh</code> Script de primer arranque, lanzado desde servicio <code>/etc/systemd/system/firstboot.service</code> que se desactiva y borra el propio script al terminar su trabajo ArkOS <code>/boor/expandtoexfat.sh</code> Script de expansi\u00f3n de tercera partici\u00f3n llamado desde <code>/boot/firstboot.sh</code> si no existe el flag <code>/boot/doneit</code>"},{"location":"retro-emulacion/rg-351.html#usuarios-sistemas","title":"Usuarios sistemas","text":"Sistema Usuario Password EmuELEC/BOB FAT Edition root emuelec ArkOS ark ark 351ELEC/BOBElec root 351elec"},{"location":"retro-emulacion/rg-351.html#codigos-teclas","title":"C\u00f3digos teclas","text":""},{"location":"retro-emulacion/rg-351.html#solucion-de-problemas","title":"Soluci\u00f3n de problemas","text":""},{"location":"retro-emulacion/rg-351.html#escalado-de-pantalla","title":"Escalado de pantalla","text":"<p>Una de las pocas cosas pol\u00e9micas que tiene esta consola es la resoluci\u00f3n de pantalla. La mayor\u00eda de los sistemas retro de 8 y 16 bit encajan muy mal en la resoluci\u00f3n de 480x320. En estos sistemas es casi obligado activar alg\u00fan tipo de filtrado. El m\u00e1s recomendable es el RGA. Para ello seguir los siguientes pasos:</p> <ol> <li>Iniciar RetroArch de forma aislada, no accediendo una vez abierta una ROM. Esto depender\u00e1 de la distribuci\u00f3n que tengamos instalada. En la BOB FAT edition por ejemplo se hace desde el men\u00fa que aparece al pulsar <code>Select</code> en el listado de sistemas de EmulationStation.</li> <li>Seguir la siguiente ruta de men\u00fas: <code>Main Menu &gt; Settings &gt; Video &gt; RGA Scaling &gt; ON</code></li> <li>Seguir la siguiente ruta para guardar los cambios: <code>Main Menu &gt; Configuration File &gt; Save Current Configuration</code></li> </ol>"},{"location":"retro-emulacion/rg-351.html#ajustes-video-en-gbgbc","title":"Ajustes video en GB/GBC","text":"<p>Por defecto la paleta de colores que utiliza Gambatte, el emulador de GB/GBC, no es muy afortunada. La imagen tiene un tono amarillo poco atractivo o parecido a los tonos de la pantalla de la Game Boy. Adem\u00e1s coloca un overlay que se superpone a la pantalla del juego. Se recomienda hacer los siguientes ajustes:</p> <ol> <li><code>Quick Menu &gt; Options &gt; GB Colorization</code>: <code>Internal</code></li> <li><code>Quick Menu &gt; Options &gt; Internal Palette</code>: <code>GB - DMG</code></li> <li><code>Quick Menu &gt; On-Screen Overlay</code>: <code>OFF</code></li> <li><code>Main Menu &gt; Settings &gt; Video &gt; Bilinear Filtering</code>: <code>OFF</code></li> <li><code>Main Menu &gt; Settings &gt; Video &gt; RGA Scaling</code>: <code>OFF</code></li> <li><code>Quick Menu &gt; Overrides &gt; Save Core Overrides</code>: Para convertir los ajustes anteriores en predeterminados para el core de GB/GBC.</li> </ol>"},{"location":"retro-emulacion/rg-351.html#jugar-juegos-verticales-en-horizontal","title":"Jugar juegos verticales en horizontal","text":"<p>Esto sirve en BOB FAT Edition.</p> <ol> <li>Explorar de alguna forma los archivos de la consola (por SSH, WinSCP, con alg\u00fan explorador de archivos en la propia consola o montando la tarjeta en un Linux) y desplazarnos hasta la ruta <code>/storage/.config/retroarch/config</code>.</li> <li>Borrar (o renombrar si queremos poder revertir el cambio m\u00e1s adelante) los directorios <code>FinalBurn Neo</code> y <code>MAME 2003-Plus</code>.</li> <li>Renombrar <code>FinalBurn Neo no vertical</code> a <code>FinalBurn Neo</code>.</li> <li>Renombrar <code>MAME 2003-Plus no vertical</code> a <code>MAME 2003-Plus</code>.</li> </ol>"},{"location":"retro-emulacion/rg-351.html#configuracion-sensibilidad-de-sticks-analogicos-para-mejorar-diagonales","title":"Configuraci\u00f3n sensibilidad de sticks anal\u00f3gicos para mejorar diagonales","text":"<ol> <li>Iniciar RetroArch de forma aislada, no accediendo una vez abierta una ROM. Esto depender\u00e1 de la distribuci\u00f3n que tengamos instalada. En la BOB FAT edition por ejemplo se hace desde el men\u00fa que aparece al pulsar <code>Select</code> en el listado de sistemas de EmulationStation.</li> <li>Hacer los siguientes ajustes:<ul> <li><code>Main Menu &gt; Settings &gt; Input &gt; Input Button Axis Threshold</code>: <code>0.250</code></li> <li><code>Main Menu &gt; Settings &gt; Input &gt; Analog Deadzone</code>: <code>0.5</code></li> <li><code>Main Menu &gt; Settings &gt; Input &gt; Analog Sensitivity</code>: <code>5.0</code></li> </ul> </li> <li>Seguir la siguiente ruta para guardar los cambios: <code>Main Menu &gt; Configuration File &gt; Save Current Configuration</code></li> </ol>"},{"location":"retro-emulacion/rg-351.html#cambio-de-disco-en-playstation","title":"Cambio de disco en PlayStation","text":"<p>Para cambiar de disco es necesario una vez lo pida, entrar en el <code>men\u00fa de RetroArch &gt; Quick menu &gt; Disk control</code>. Aqu\u00ed veremos dos opciones, una de ellas es para abrir la bandeja <code>Cycle Disk Try Status</code> (cd virtual metido en el lector) y otra para insertar el disco <code>Disk append</code>. Por tanto cuando pida el CD 2 hay que abrir bandeja, a\u00f1adir el CD 2 al lector y proceder a cerrar bandeja. Una vez hecho esto, volvemos para atr\u00e1s hasta la opci\u00f3n reset y le damos. Cargar\u00e1 el segundo CD y podremos seguir la partida.</p> <p>Todo esto se puede automatizar entrando previamente en <code>men\u00fa de RetroArch &gt; Controls &gt; Hotkeys</code> y asignando un bot\u00f3n para abrir bandeja y otro para cambiar de disco.</p>"},{"location":"retro-emulacion/rg-351.html#monograficos-en-blog","title":"Monogr\u00e1ficos en blog","text":"<ul> <li>Instalaci\u00f3n de m\u00f3dulo Wifi interno en RG351P</li> </ul>"},{"location":"retro-emulacion/rg-503.html","title":"RG503","text":""},{"location":"retro-emulacion/rg-503.html#enlaces","title":"Enlaces","text":"<ul> <li>ROCKNIX: Evoluci\u00f3n de JELOS. Distribuci\u00f3n.</li> <li>PortMaster: Your Ultimate Handheld Linux Port Manager for various linux handheld devices with a great community and features.</li> </ul>"},{"location":"retro-emulacion/rgb2hdmi.html","title":"RGBtoHDMI","text":""},{"location":"retro-emulacion/rgb2hdmi.html#enlaces","title":"Enlaces","text":"<ul> <li>Quick Start Guide</li> <li>Ordenadores Soportados y Cables</li> <li>Tutorial on Adding a New Profile</li> </ul>"},{"location":"retro-emulacion/rgb2hdmi.html#controles","title":"Controles","text":"Bot\u00f3n Situaci\u00f3n Pulsaci\u00f3n Descripci\u00f3n SW1 Corta Men\u00fa SW1 Larga Alternar scanlines SW1 Men\u00fa Corta Seleccionar opci\u00f3n o entra en el modo edici\u00f3n del par\u00e1metro seleccionado SW1 Arranque Larga Desactiva soporte 50Hz del monitor (hay monitores que no lo soportan aunque declaran que s\u00ed lo hacen a trav\u00e9s de EDID) SW2 Corta Captura de pantalla SW2 Larga Alternar artefactos de color NTSC SW2 Men\u00fa Corta Cursor abajo o incrementa el par\u00e1metro seleccionado SW3 Artefactos de color NTSC activados Corta Cicla a trav\u00e9s de las 4 fases de artefactos NTSC SW3 Conjunto de timings activados Corta Cicla a trav\u00e9s de los conjuntos 1 y 2 SW3 Corta Activa (si estaba desactivado) o refresca el genlock SW3 Larga Calibra la posici\u00f3n de muestreo SW3 Men\u00fa Corta Cursor arriba o decrementa el par\u00e1metro seleccionado SW2 y SW3 Men\u00fa Corta Captura de pantalla incluyendo el men\u00fa RST Corta Reset"},{"location":"retro-emulacion/rgb2hdmi.html#perfiles","title":"Perfiles","text":""},{"location":"retro-emulacion/rgb2hdmi.html#zx-spectrum-2","title":"ZX Spectrum +2","text":"<p>La conexi\u00f3n entre el DIN8 del Spectrum +2 y el IDC de 12 pines de RGBtoHDMI (P2) es (documentaci\u00f3n oficial):</p> DIN8 RGBtoHDMI 12 way IDC(P2) Descripci\u00f3n 1 Composite PAL (75 Ohm, 1.2 V pk-pk) 2 3 GND 3 4 Bright output (TTL) 4 8 Composite sync (TTL) 5 Vertical sync (TTL) 6 9 Green (TTL) 7 7 Red (TTL) 8 11 Blue (TTL) <p></p> <ul> <li>CPLD firmware: 6-12_BIT_RGB_Analog</li> <li>Palette Menu:<ul> <li>Palette: RGBrgb (Amstrad)</li> </ul> </li> <li>Profile: Spectrum +2 (Grey)</li> </ul>"},{"location":"retro-emulacion/rgb2hdmi.html#zx-harlequin-128","title":"ZX Harlequin 128","text":"<p>La conexi\u00f3n entre el miniDIN8 del Harlequin 128 y el IDC de 6 pines de la Analog board es (documentaci\u00f3n oficial):</p> miniDIN8(socket) RGBtoHDMI 6 way IDC (Analog board) Descripci\u00f3n 1 1 GND 2 Video switching (12V) 3 Fast switching RGB (75 Ohm, 1 V) 4 4 Green (75 Ohm, 0.7 V pk-pk) 5 Audio (mono) 6 5 Red (75 Ohm, 0.7 V pk-pk) 7 3 Blue (75 Ohm, 0.7 V pk-pk) 8 2 Composite sync <p></p> <ul> <li>CPLD firmware: 3-12_BIT_BBC_Analog</li> <li>Palette Menu:<ul> <li>Palette: RGBrgb (Spectrum)</li> </ul> </li> <li>Profile: ZX-Harlequin-Nuvo</li> </ul> <p> </p>"},{"location":"retro-emulacion/rgb2hdmi.html#soporte-50hz-y-resolucion","title":"Soporte 50Hz y resoluci\u00f3n","text":"<p>Muchos monitores declaran en el EDID no soportar el modo 50Hz aunque lo hagan. Si el monitor no conmuta a 50Hz cuando se alimenta con una se\u00f1al de v\u00eddeo de esta frecuencia, hacer el test con la entrada de men\u00fa <code>Test Monitor for 50Hz Support</code> siguiendo la documentaci\u00f3n. Si el resultado del test es positivo, cambiar el ajuste <code>Refresh</code> a <code>Force 50Hz-60Hz</code> para que adopte la frecuencia de la se\u00f1al de entrada ignorando lo que el EDID declara.</p> <p>Tal y como se comenta en la nota final del apartado Configuring the Refresh setting de la documentaci\u00f3n oficial, algunos monitores peque\u00f1os declaran en el EDID soportar una resoluci\u00f3n mucho m\u00e1s alta de la que tienen realmente. En esos casos conviene ajustar manualmente la resoluci\u00f3n en el ajuste <code>Resolution</code> para obtener una visualizaci\u00f3n \u00f3pitma. Es el caso de mi monitor de 10.1\" que declara soportar 1366x768 pero que en realidad tiene una resoluci\u00f3n de 1024x600.</p>"},{"location":"retro-emulacion/steam-deck.html","title":"Steam Deck","text":""},{"location":"retro-emulacion/steam-deck.html#enlaces","title":"Enlaces","text":"<ul> <li>Steam Deck Recovery Instructions</li> <li>Proton DB: Lista los juegos compatibles con Steam Deck y ofrece soluciones para los que no lo son.</li> <li>NonSteamLaunchers: Instalaci\u00f3n de launchers alternativos a Steam. Requiere instalar el navegador Chrome desde Discover para que luego se puedan lanzar algunas de las tiendas instaladas.</li> <li>Dual boot menus:<ul> <li>SteamDeck_rEFInd</li> <li>SteamDeck-Clover-dualboot </li> </ul> </li> <li>Instalaci\u00f3n de Arch Linux</li> </ul>"},{"location":"retro-emulacion/steam-deck.html#modos-arranque","title":"Modos arranque","text":"Combinaci\u00f3n teclas Descripci\u00f3n <code>Power</code> Arranque normal. <code>Power</code> + <code>Volume+</code> Arranque en modo BIOS. <code>Power</code> + <code>Volume-</code> Boot men\u00fa. <code>Power</code> + <code>\u22ef</code> Bootloader men\u00fa. <code>Power</code> + <code>Volume- + \u22ef</code> Reset de ajustes UEFI. Mantener pulsados los dos botones <code>Volume- + \u22ef</code> tras el primer parpadeo del LED. El LED parpadear\u00e1 durante la operaci\u00f3n y se detendr\u00e1 una vez finalizada, entonces soltar los botones"},{"location":"retro-emulacion/steam-deck.html#backup-de-la-bios","title":"Backup de la BIOS","text":"<p>La Steam Deck no tiene los ajustes de la BIOS en una memoria CMOS mantenida con una pila, sino en una flash Winbond que si se corrompe, la m\u00e1quina no arrancar\u00e1. Interesa hacer un backup cuanto antes por si hubiera problemas en el futuro. El backup puede hacerse con el siguiente comando desde un terminal en el modo escritorio:</p> <pre><code>sudo /usr/share/jupiter_bios_updater/h2offt /home/deck/biosbkp.fd -O\n</code></pre> <p>Extraeremos el fichero resultante en <code>/home/deck/biosbkp.fd</code> y lo guardaremos en un lugar seguro. El fichero contiene elementos particulares de cada consola, por lo que no sirve el backup de otra consola. Por eso es importante hacer backup en nuestra unidad.</p>"},{"location":"retro-emulacion/steam-deck.html#rutas-interesantes-sistema-de-archivos","title":"Rutas interesantes sistema de archivos","text":"Ruta Descripci\u00f3n <code>/run/media/</code> Punto de montaje de las tarjetas SD. <code>/home/deck/.steam/steam/</code> Directorio de Steam. <code>/home/deck/.steam/steam/steamapps/compatdata</code> Directorio de los juegos/aplicaciones instalados donde se crea el sandbox con la estructura de ficheros de Windows para ellos. <code>/home/deck/.steam/steam/steamapps/common</code> Directorio de los juegos instalados."},{"location":"retro-emulacion/steam-deck.html#aplicaciones-interesantes","title":"Aplicaciones interesantes","text":""},{"location":"retro-emulacion/steam-deck.html#steam-store","title":"Steam Store","text":"<ul> <li><code>Proton BattlEye Runtime</code>: Hace accesible el sistema BattlEye que utilizan algunos juegos a Linux.</li> <li><code>Proton Easy Anti-Cheat Runtime</code>: Hace accesible el sistema Easy Anti-Cheat de Epic a juegos Linux.</li> <li><code>Proton Experimental</code>: \u00daltima versi\u00f3n (no estable) de Proton.</li> </ul>"},{"location":"retro-emulacion/steam-deck.html#discover","title":"Discover","text":"<ul> <li><code>ProtonUp-Qt</code>: Para instalar distintas versiones de Proton GE.</li> <li><code>Heroic Games Launcher</code>: Alternativa opensource a la tienda de Epic Games, GOG y Amazon Prime Games Launcher.</li> <li><code>Lutris</code>: Instalador de juegos retro y emuladores.</li> <li><code>Mount Unmount ISO</code>: Monta y desmonta im\u00e1genes ISO desde el explorador de archivos Dolphin.</li> <li><code>PeaZip</code>: Compresor y descompresor de archivos.</li> </ul>"},{"location":"retro-emulacion/steam-deck.html#plugins-interesantes","title":"Plugins interesantes","text":"<p>Necesitamos tener instalado Decky.</p> <ul> <li><code>AutoFlatpaks</code>: Notifica y permite actualizar paquetes que normalmente se actualizan desde el modo escritorio.</li> <li><code>Bluetooth</code>: Gesti\u00f3n de disposivos Bluetooth que normalmente se har\u00eda desde el modo escritorio.</li> <li><code>Battery Tracker</code>: Informaci\u00f3n sobre las bater\u00edas tanto de Steam Deck como de los controladores vinculados.</li> <li><code>CSS Loader</code>: Cambiar themes en Steam UI.</li> <li><code>EmuDecky</code>: Plugin oficial de EmuDeck para hacer ajustes r\u00e1pidos en los emuladores.</li> <li><code>Fantastic</code>: Cambiar la curva del ventilador.</li> <li><code>Free Loader</code>: Muestra cuando aparecen juegos gratuitos en algunas de las tiendas.</li> <li><code>Game Theme Music</code>: Permite escuchar la m\u00fasica de los juegos en la ficha del juego de la biblioteca de Steam.</li> <li><code>HLTB for Deck</code>: Muestra la duraci\u00f3n de los juegos.</li> <li><code>PlayTime</code>: Muestra el tiempo jugado en juegos que no son de Steam.</li> <li><code>ProtonDB Badges</code>: Muestra la compatibilidad de los juegos con Steam Deck seg\u00fan ProtonDB.</li> <li><code>SteamGridDB</code>: Para poder cambiar las portadas y el arte de los juegos en la biblioteca de Steam.</li> <li><code>Storage Cleaner</code>: Limpieza de archivos residuales.</li> </ul>"},{"location":"retro-emulacion/steam-deck.html#activar-ssh","title":"Activar SSH","text":"<ol> <li>Abrir <code>Konsole</code> en modo escritorio.</li> <li> <p>Cambiar la contrase\u00f1a del usuario <code>deck</code>:</p> <pre><code>passwd\n</code></pre> </li> <li> <p>Habilitar SSHD:</p> <pre><code>sudo systemctl start sshd\n</code></pre> </li> <li> <p>Habilitar SSHD en el arranque:</p> <pre><code>sudo systemctl enable sshd\n</code></pre> </li> </ol>"},{"location":"retro-emulacion/steam-deck.html#instalar-cualquier-aplicacion-windows","title":"Instalar cualquier aplicaci\u00f3n Windows","text":"<p>Una vez que tengamos el instalador (.exe o .msi):</p> <ol> <li>Abrir la aplicaci\u00f3n de Steam desde el modo escritorio.</li> <li>Pulsar el bot\u00f3n <code>+ A\u00f1adir un producto</code> en la parte inferior izquierda.</li> <li>Seleccionar <code>A\u00f1adir un programa que no es de Steam...</code>.</li> <li>Pulsar <code>Buscar...</code> abajo a la izquierda en la ventana que aparece.</li> <li>Seleccionar el ejecutable del programa que se quiere instalar (si el ejecutable no es <code>.exe</code> cambiar el filtro a <code>Todos los archivos</code>).</li> <li>Pulsar <code>A\u00f1adir seleccionados</code>.</li> <li>Seleccionar el programa en la biblioteca de Steam (en <code>Sin categor\u00eda</code>), pulsar el icono de rueda dentada (<code>Administrar</code>) y seleccionar <code>Propiedades...</code> en el desplegable.</li> <li>Seleccionar el grupo de opciones <code>Compatibilidad</code> y forzar el uso de la \u00faltima versi\u00f3n de Proton GE que tengamos disponible (para ello previamente deberemos haber instalado <code>ProtonUp-Qt</code> desde la tienda <code>Discover</code> y haber instalado alguna versi\u00f3n de Proton GE).</li> <li>Pulsar <code>Jugar</code>.</li> <li>Arrancar\u00e1 el instalador cuyo asistente seguiremos como si nos encontr\u00e1ramos en Windows.</li> <li>Cuando termine y se cierre el instalador, veremos que vuelve a activarse el bot\u00f3n <code>Jugar</code> en Steam.</li> <li>Borramos el ejecutable de la ruta donde lo tuvi\u00e9ramos.</li> <li>Lo que acabamos de instalar habr\u00e1 terminado en el mismo sandbox que se ha creado con los pasos 1 a 8. Si elimin\u00e1ramos la entrada en la biblioteca, se perder\u00eda todo, por tanto debemos modificar el lanzador del instalador para que se comporte como el lanzador de lo que hemos instalado. Para ello abrir el explorador de archivos y acudir a la ruta <code>/home/deck/.steam/steam/steamapps/compatdata</code>. All\u00ed encontraremos las carpetas de los juegos/aplicaciones instalados. Averiguamos la carpeta con el identificador correspondiente a la instalaci\u00f3n que acabamos de hacer (por ejemplo ayud\u00e1ndonos de las fechas de creaci\u00f3n de las carpetas). Dentro de dicha carpeta buscaremos el lanzado de lo que acabamos de instalar (puede ser un <code>.exe</code> o un <code>.lnk</code> que aparezca en el escritorio de Windows o en el men\u00fa inicio).</li> <li>Deber\u00edamos seguir teniendo delante la entrada correspondiente al instalador en la biblioteca de Steam, si no seleccionarla.</li> <li>Pulsar el icono de rueda dentada (<code>Administrar</code>) y seleccionar <code>Propiedades...</code> en el desplegable.</li> <li>Cambiar el nombre del Acceso directo y las entradas <code>Destino</code> y <code>Iniciar en</code> por las rutas que hemos averiguado en el paso 13.</li> <li>Cambiar el arte del juego para que tenga un mejor aspecto en la biblioteca de Steam (para ello deberemos tener instalado <code>Decky</code> y el plugin <code>SteamGridDB</code>)</li> </ol>"},{"location":"retro-emulacion/steam-deck.html#solucion-de-dependencias-en-juegos-windows-con-proton","title":"Soluci\u00f3n de dependencias en juegos Windows con Proton","text":"<p>Si un juego no arranca por falta de alguna dependencia, podemos instalarla y luego vincularla al lanzador del juego de la siguiente forma. Vamos a verlo por ejemplo con el <code>Microsoft Windows C++ Runtime</code>:</p> <ol> <li>Buscar la dependencia. En el caso del <code>Micrsoft Windows C++ Runtime</code> podemos descargarlo de esta p\u00e1gina.</li> <li>Creamos un lanzador en Steam para el instalador de la dependencia utilizando los pasos 1 a 8 del apartado anterior (no olvidar seleccionar ProtonGE como herramienta de compatibilidad).</li> <li>Abrimos el lanzador para instalar la dependencia.</li> <li>Averiguamos la carpeta con el identificador correspondiente a la instalaci\u00f3n que acabamos de hacer dentro del directorio <code>/home/deck/.steam/steam/steamapps/compatdata</code> (por ejemplo ayud\u00e1ndonos de las fechas de creaci\u00f3n de las carpetas). Imaginamos para el ejemplo que la ruta donde ha terminado instalada la dependencia es <code>/home/deck/.steam/steam/steamapps/compatdata/12345678/</code></li> <li>Borrar el lanzador creado en el paso 2.</li> <li>Seleccionar el juego en la biblioteca de Steam que requiera la dependencia, pulsar el icono de rueda dentada (<code>Administrar</code>) y seleccionar <code>Propiedades...</code> en el desplegable.</li> <li> <p>En la secci\u00f3n <code>Acceso directo</code>, en el campo <code>Par\u00e1metros de lanzamiento</code>, introducir lo siguiente (cambiando la ruta por la que corresponda):</p> <pre><code>STEAM_COMPAT_DATA_PATH=\"/home/deck/.steam/steam/steamapps/compatdata/12345678\" %command%\n</code></pre> </li> <li> <p>Cerrar la ventana de Propiedades y pulsar <code>Jugar</code>.</p> </li> </ol> <p>En caso de que un juego requiriera varias dependencias, podemos incorporar tantas entradas <code>STEAM_COMPAT_DATA_PATH</code> como sean necesarias separadas por un espacio.</p> <p>Tutorial en v\u00eddeo de @Hooandee</p>"},{"location":"retro-emulacion/steam-deck.html#emudeck","title":"EmuDeck","text":""},{"location":"retro-emulacion/steam-deck.html#enlaces_1","title":"Enlaces","text":"<ul> <li>EmuDeck</li> <li>EmuDeck Wiki</li> <li>BIOS and ROMs Cheat Sheet</li> <li>Tutorial v\u00eddeo instalaci\u00f3n de @Hooandee</li> </ul>"},{"location":"retro-emulacion/steam-deck.html#videotutorial-general-de-hooandee","title":"Videotutorial general de @Hooandee","text":""},{"location":"retro-emulacion/z80-computer.html","title":"Z80 Computer","text":""},{"location":"retro-emulacion/z80-computer.html#enlaces","title":"Enlaces","text":"<ul> <li>El art\u00edculo fundacional de Grant Searle</li> <li>Projects, Hardware, Software, Homemade Z80 systems</li> <li>Z80 part numbers</li> <li>Collapse OS</li> <li>Serie de art\u00edculos de BreakIntoProgram: part 1, part 2, part 3, part 4, part 5, part 6</li> <li>Serie de art\u00edculos en Maker Pro:<ul> <li>Part 1: The CPU</li> <li>Part 2: Memory</li> <li>Part 3: EEPROM Programmer</li> <li>Part 4: Basic IO and Writing Your First Program</li> </ul> </li> <li>Serie de art\u00edculos de Mike Sutton</li> <li>Lista de v\u00eddeos de Ben Eater</li> <li>Lista de v\u00eddeos de Doctor Volt</li> <li>LM80C. Repositorio</li> <li>MBC: v1; v2</li> <li>ZX2020: S\u00f3lo CPU y RAM est\u00e1tica. Ejecuta CP/M. Art\u00edculo en Hackster.</li> <li>RC2014 bus o RC40:<ul> <li>SC114 \u2013 Z80 Motherboard</li> </ul> </li> <li>BP80 bus:<ul> <li>SC126 \u2013 Z180 MOTHERBOARD</li> </ul> </li> <li>Z50Bus:<ul> <li>LiNC80 SBC1</li> <li>SC118 \u2013 Z80 PROCESSOR CARD</li> </ul> </li> <li>MicroBeast</li> <li>TEC-1G: Z80 based single board computer.</li> </ul>"},{"location":"retro-emulacion/z80-computer.html#rc2014","title":"RC2014","text":"<ul> <li>An\u00e1lisis modelos:<ul> <li>Small Computer Central</li> <li>Z80.no</li> </ul> </li> <li>Tarjetas:<ul> <li>Oficiales en Tindie</li> <li>Game Boards for RC2014</li> <li>https://easyeda.com/search?wd=rc2014</li> <li>VT132</li> </ul> </li> <li>Repositorio de documentaci\u00f3n</li> <li>Repositorio oficial</li> <li>Serie de art\u00edculos de Scott M. Baker:<ul> <li>Intro to Z80 Retrocomputing</li> <li>Z80 Retrocomputing 2 \u2013 Real Time Clock for the RC2014</li> <li>Z80 Retrocomputing 3 \u2013 Bus Monitor Board</li> <li>Z80 Retrocomputing 4 \u2013 Bus Supervisor</li> <li>Z80 Retrocomputing 5 \u2013 Single Stepper for RC2014</li> <li>Z80 Retrocomputing 6 \u2013 RC2014 TIL311 Front Panel Board</li> <li>Z80 Retrocomputing 7 \u2013 RC2014 DAC (Digital To Analog Converter)</li> <li>Z80 Retrocomputing 8 \u2013 Speech Synthesizer for RC2014</li> <li>Z80 Retrocomputing 9 \u2013 CTC and dual serial ports for RC2014</li> <li>Z80 Retrocomputing 10 \u2013 RC2014 CompactFlash board</li> <li>Z80 retrocomputing 11 \u2013 CP/M on the RC2014</li> <li>Z80 Retrocomputing 12 \u2013 Talking Nixie Tube Clock</li> <li>Z80 Retrocomputing 13 \u2013 RC2014 VFD Display Board</li> <li>Z80 Retrocomputing Part 14 \u2013 RC2014 Floppy Controller Boards</li> <li>Z80 Retrocomputing 15 \u2013 CP/M on RC2014 Revisted, Using RomWBW</li> <li>Z80 Retrocomputing 16 \u2013 Unix on RC2014</li> <li>Z80 Retrocomputing 17: Enhanced Z80 CPU Board for RC2014</li> <li>Z80 Retrocomputing 18 \u2013 Z180 CPU Board for RC2014</li> </ul> </li> </ul>"},{"location":"retro-emulacion/zx-spectrum-next.html","title":"ZX Spectrum Next / N-GO","text":""},{"location":"retro-emulacion/zx-spectrum-next.html#enlaces","title":"Enlaces","text":"<ul> <li>ZX Spectrum Next</li> <li>N-GO</li> <li>Spectrum Next Stuff - YouTube list</li> <li>Las listas maestras nextreg y port se mantienen actualizadas y describen completamente el hardware Next para desarrolladores.</li> <li>La lista pinouts contiene informaci\u00f3n detallada sobre los conectores.</li> <li>El registro de cambios de NextZXOS detalla las novedades y correcciones de cada versi\u00f3n de NextZXOS/NextBASIC.</li> <li>Los cuatro NextZXOS PDFs tienen informaci\u00f3n detallada sobre las APIs de NextZXOS y esxDOS, las sysvars de NextBASIC, y la sintaxis de NextBASIC.</li> <li>Las ZX Spectrum Next Programming Notes de varmfskii son un intento de consolidar la interfaz de programaci\u00f3n Next en un \u00fanico lugar.</li> <li>Myopian API spreadsheet resume los puntos de entrada de NextZXOS/IDEDOS junto con las condiciones de llamada.</li> <li>Myopian dot command summary recoge la ayuda y el texto readme para los comandos punto de NextZXOS en un lugar pr\u00e1ctico.</li> <li>Tomaz's ZX Spectrum Next Assembly Developer Guide es casi como un \"manual de usuario\" para desarrolladores de ensamblador.</li> <li>Luzie/Rat Mal's Almost (In-) Complete List of esxDOS DOT-Commands intenta listar comandos dot para varios sistemas, incluyendo el Next. Algunos de los comandos no espec\u00edficos del Next pueden funcionar en el Next, y algunos pueden funcionar s\u00f3lo en otros sistemas FPGA/divMMC.</li> <li>Beeper: Instalaci\u00f3n de beeper interno.</li> </ul>"},{"location":"retro-emulacion/zx-spectrum-next.html#cheatsheet","title":"Cheatsheet","text":""},{"location":"retro-emulacion/zx-spectrum-next.html#atajos-teclado","title":"Atajos teclado","text":"Combinaci\u00f3n Acci\u00f3n Notas F1 / Reset (pulsaci\u00f3n larga) Hard Reset Resets CPU and Peripherals, reloads the FW and loads the hardware settings anew but doesn't clear the RAM F2 Scandoubler Doubles the output resolution. Must be off for older monitors and SCART cables F3 50Hz/60Hz Vertical Frequency Changes the display's vertical frequency from 50 to 60Hz and vice-versa F4 / Reset (pulsaci\u00f3n corta) Soft Reset Resets CPU and Peripherals and reloads the Operating System. Used with Caps Shift it forces a rescan of drives and a reload of the boot screen under esxDOS F5 Not Used F6 Not Used F7 Scanlines Cyclically toggles scan line emulation in 4 steps/intensities: 0%, 25%, 50%, 75%. This emulates the older CRT monitors F8 Turbo modes Cyclically toggles CPU speed (3.5MHz, 7MHz, 14MHz, 28Mhz) F9 NMI (Multiface) Simulates pressing the NMI button F10 divMMC NMI (Drive) Simulates pressing the Drive button (divMMC NMI \u2013 used with esxDOS). Used with Caps Shift it forces a rescan of drives and a reload of the boot screen under esxDOS NMI +  Simula teclas de funci\u00f3n teclado PS/2"},{"location":"retro-emulacion/zx-spectrum-next.html#ficheros-importantes","title":"Ficheros importantes","text":"Fichero Descripci\u00f3n <code>machines/next/CONFIG.INI</code> Ajustes del core principal del Next (scanlines, scandoubler, frecuencia refresco pantalla, modos ULAPlus, etc.). Selecciona el modo predeterminado de los definidos en <code>machines/next/menu.def</code>"},{"location":"retro-emulacion/zx-spectrum-next.html#modos","title":"Modos","text":"Modo Selecci\u00f3n Descripci\u00f3n <code>ZX Spectrum Next (standard)</code> Espacio durante hard boot/reset NextZXOS normal <code>ZX Spectrum Next (LG 48K ROM)</code> Espacio durante hard boot/reset <code>ZX Spectrum 48K</code> Espacio durante hard boot/reset y p\u00e1gina <code>more...</code> de men\u00fa NextZXOS <code>ZX Spectrum 128k</code> Espacio durante hard boot/reset y p\u00e1gina <code>more...</code> de men\u00fa NextZXOS <code>ZX Spectrum +2</code> Espacio durante hard boot/reset <code>ZX Spectrum +2A/+3</code> Espacio durante hard boot/reset <code>ZX Spectrum +3e</code> Espacio durante hard boot/reset <code>ZX80 Emulator (c) Paul Farrow</code> Espacio durante hard boot/reset y p\u00e1gina <code>more...</code> de men\u00fa NextZXOS <code>ZX81 Emulator (c) Paul Farrow</code> Espacio durante hard boot/reset y p\u00e1gina <code>more...</code> de men\u00fa NextZXOS <code>48K Gosh Wonderful ROM v3.3</code> Espacio durante hard boot/reset <code>48K Looking Glass ROM v1.07</code> Espacio durante hard boot/reset Modo 48K con comandos tecla a tecla y correcci\u00f3n de bugs <code>48K Looking Glass ROM v1.07-altfont-</code> Espacio durante hard boot/reset Modo 48K con comandos tecla a tecla y correcci\u00f3n de bugs. Tiene un tipo de letra m\u00e1s grueso <code>Timex Sinclair TC2048</code> Espacio durante hard boot/reset <code>Investronica Spectrum 128K</code> Espacio durante hard boot/reset <code>Pentagon 128K</code> Espacio durante hard boot/reset"},{"location":"retro-emulacion/zx-spectrum-next.html#modos-de-cursor-nextbasic","title":"Modos de cursor NextBASIC","text":"32 columnas (Color) 64/85 columnas (Forma) Funci\u00f3n Blue Barra horizontal en la mitad inferior del car\u00e1cter Introducci\u00f3n normal de texto Cyan Barra horizontal en la mitad superior del car\u00e1cter Bloq May\u00fas activado (conmutar con la tecla CAPS LOCK) Magenta Barra Vertical Modo GR\u00c1FICO (Conmutar con la tecla GRAPHICS) Green Rayas horizontales Modo EXTEND (Conmutar con la tecla EXTEND) Red Contorno rectangular Marcador de error: Hay un error en la l\u00ednea que hay que corregir"},{"location":"retro-emulacion/zx-spectrum-next.html#conexiones-cassette","title":"Conexiones cassette","text":""},{"location":"retro-emulacion/zx-spectrum.html","title":"ZX Spectrum","text":""},{"location":"retro-emulacion/zx-spectrum.html#enlaces","title":"Enlaces","text":"<ul> <li>ZX Design Info: A site dedicated to the reverse engineering of the ZX Spectrum and related projects.</li> <li>TK90X v3 ROM (ZX Spectrum compatible). An\u00e1lisis.</li> <li>WORKBENCH +3e: Workbench +3e es un entorno gr\u00e1fico de ventanas para ZX Spectrum dise\u00f1ado para facilitar el acceso a los programas almacenados en el disco duro. Permite organizar el software instalado de una forma l\u00f3gica y ordenada y su posterior carga proporcionando un entorno sencillo e intuitivo.</li> <li>Tiendas:<ul> <li>RetroRadionics</li> <li>ByteDelight</li> <li>ZX Renew</li> <li>Retroleum.</li> <li>RetroRevival.</li> </ul> </li> <li>Clones/recreaciones:<ul> <li>Superfo Harlequin 48K</li> <li>Superfo Harlequin 128K: Kit ByteDelight</li> <li>Humble48</li> <li>Sizif-128: Easy-to-build minimalistic ZX Spectrum clone.</li> <li>Sizif-512: Another CPLD-based ZX Spectrum clone for 48K rubber case with some sweet features.</li> <li>ZX Spectrum Next / N-GO</li> <li>ZX Spectrum 48 Issue 3B Redrawn. ZX Spectrum 48K Issue 3B: Bill of Material</li> </ul> </li> <li>Emulaci\u00f3n:<ul> <li>ZXBaremulator: Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI.</li> <li>ZX-ESPectrum: An emulation of the ZX-Spectrum computer on an Lilygo TTGo VGA32.</li> <li>pico-zxspectrum: Emulador sobre Raspberry Pi Pico.</li> <li>MCUME: Emulador sobre Raspberry Pi Pico (varias m\u00e1quinas).</li> </ul> </li> <li>Montajes:<ul> <li>PICOmputer</li> <li>PICOZX</li> <li>ZX Spectrum 128k micro laptop</li> <li>The Mechtrum - Mechanical Keyboard Zx Spectrum case</li> <li>4keyboard: Pegatinas para teclado con el layout del ZX Spectrum.</li> <li>WASD Keyboards: Teclados y keycaps personalizados.</li> </ul> </li> <li>Test/Reparaciones/Restauraci\u00f3n:<ul> <li>ZX Spectrum (48K &amp; 16K) Initial Tests</li> <li>ZX Spectrum +2 (grey) - Test voltajes y reparaci\u00f3n memoria</li> <li>ZX Spectrum +2 (grey) - Servicio del datassette</li> <li>ZX Spectrum +2 (grey) - Servicio del teclado</li> <li>ZX Spectrum +2 (grey) - Mods y mejoras</li> <li>Sinclair ZX Spectrum 128k+2 (Grey) Restoration</li> <li>Video fixes and video cables for all ZX Spectrum 128K models</li> <li>Servicing the Sinclair ZX Spectrum +2 Cassette Drive</li> </ul> </li> <li>Hardware casero:<ul> <li>Bloqueo/separador del conector de borde/edge del ZX Spectrum</li> </ul> </li> <li>Componentes / Repuestos:<ul> <li>M\u00f3dulo de memoria baja</li> <li>Regulador de conmutaci\u00f3n Traco Power, entrada 6.5 \u2192 36V dc, Salida 5V, 1A, 5W: Apto para los Spectrum 48K.</li> <li>Regulador de conmutaci\u00f3n Traco Power, entrada 6.5 \u2192 36V dc, Salida 5V, 2A, 10W: Apto para el Spectrum +2 (gris).</li> <li>ZX8401 o AMSTRAD 40058: Sustituto para el chip propietario que se monta a partir de las issue5 hasta el +2 (gris).</li> </ul> </li> </ul>"},{"location":"retro-emulacion/zx-spectrum.html#carga-de-audio","title":"Carga de audio","text":"<ul> <li>Amplificador sonido entrada EAR</li> <li>Loading ZX Spectrum tape audio in a post-cassette world</li> <li>z802tzx: Conversor de TAP a TZX (tambi\u00e9n en modo turbo).</li> <li>Variantes TZXDuino:<ul> <li>Proyecto original</li> <li>MEGADuino:<ul> <li>Placa</li> <li>Firmware</li> <li>Carcasa v2</li> <li>Tutorial programaci\u00f3n firmware</li> <li>Probando el TZXDuino</li> <li>Probando el TSXDuino MEGA</li> <li>Tirada MegaDuino</li> <li>Tutorial programaci\u00f3n</li> <li>Fix en v2 para cargar mejor CDTs en Amstrad</li> </ul> </li> </ul> </li> </ul>"},{"location":"retro-emulacion/zx-spectrum.html#megaduino","title":"MegaDuino","text":""},{"location":"retro-emulacion/zx-spectrum.html#flash-de-megaduino","title":"Flash de MegaDuino","text":"<ol> <li>Bajar librer\u00eda LiquidCrystal_I2C</li> <li>Copiar el contenido del repositorio anterior a un directorio de nombre <code>LiquidCrystal_I2C</code> y colocarlo dentro del directorio <code>libraries</code> del directorio de sketches de Arduino IDE.</li> <li>Instalar mediante el Gestor de Librer\u00edas la librer\u00eda <code>SdFat</code> de Bill Greiman.</li> <li>Bajar c\u00f3digo de repositorio</li> <li>Abrir el sketch <code>MaxDuino_1.54M.ino</code></li> <li>Editar la linea 178 del sketch anterior para corregir el nombre del fichero de cabecera <code>userMAXconfig.h</code> (originalmente pone <code>userMaxconfig.h</code>).</li> <li> <p>Editar el fichero <code>userMAXconfig.h</code> y descomentar las l\u00edneas siguientes:</p> <pre><code>#define OLED_SETCONTRAS   0xcf      // Override default value inside Diplay.ino, bigger to increase output current per segment\n#define OLED1306                      // Set if you are using OLED 1306 display\n#define OLED1306_128_64         // 128x64 resolution with 8 rows\n#define OLED1106_1_3            // Use this line as well if you have a 1.3\" OLED screen\n</code></pre> </li> <li> <p>Seleccionar en el Arduino IDE:</p> <ul> <li>Placa: <code>Arduino Mega or Mega 2560</code></li> <li>Procesador: <code>ATmega2560 (Mega 2560)</code></li> <li>Puerto: El que corresponda</li> </ul> </li> <li> <p>Pulsar el bot\u00f3n <code>Subir</code>.</p> </li> </ol>"},{"location":"retro-emulacion/zx-spectrum.html#opciones-megaduino","title":"Opciones MegaDuino","text":"<ul> <li>Baud: Velocidad de reproducci\u00f3n de los archivos <code>CAS</code> y <code>TSX</code> de MSX.</li> <li>Motor: Indica si el control de motor est\u00e1 activado/desactivado. S\u00f3lo \u00fatil para plataformas que permiten control del datasette como Amstrad, MSX y BBC Micro. En el resto de equipos nos permitir\u00e1 seleccionar manualmente los bloques para programas multicarga por ejemplo.</li> <li>TSXCzx: Indica si la opci\u00f3n TSXCzxpUEFSW est\u00e1 activada/desactivada. Sirve para tres cosas:<ul> <li>Activar la carga turbo (bloques 4B) de los archivos <code>CAS</code> y <code>TSX</code> de MSX.</li> <li>Cambiar la polaridad de la se\u00f1al de audio de los archivos de Spactrum y Amstrad.</li> <li>Cambiar la polaridad de la se\u00f1al de audio de los archivos <code>UEF</code> de Acorn Electron y BBC Micro.</li> </ul> </li> <li>Skip2A: ???</li> </ul>"},{"location":"retro-emulacion/zx-spectrum.html#tzxtools","title":"tzxtools","text":""},{"location":"retro-emulacion/zx-spectrum.html#instalacion-tzxtools","title":"Instalaci\u00f3n tzxtools","text":"<pre><code>$ mkvirtualenv tzxtools\n(tzxtools) $ pip install tzxtools\n</code></pre>"},{"location":"retro-emulacion/zx-spectrum.html#conversion-tzx-a-tap","title":"Conversi\u00f3n tzx a tap","text":"<pre><code>(tzxtools) $ tzxtap -o Commando.tap Commando.tzx\n</code></pre>"},{"location":"retro-emulacion/zx-spectrum.html#listado-bloques","title":"Listado bloques","text":"<pre><code>(tzxtools) $ tzxls Commando.tzx\n</code></pre>"},{"location":"retro-emulacion/zx-spectrum.html#reproduccion-audio-tzx","title":"Reproducci\u00f3n audio tzx","text":"<pre><code>(tzxtools) $ tzxplay Commando.tzx\n</code></pre>"},{"location":"retro-emulacion/zx-spectrum.html#extraccion-pantalla-presentacion","title":"Extracci\u00f3n pantalla presentaci\u00f3n","text":"<p>Incluso de un tzx corrupto.</p> <pre><code>(tzxtools) $ tzxls Commando.tzx\n  0  Standard Speed Data Block   18 bytes of bogus header, CRC ERROR!\n  1  Standard Speed Data Block   199 bytes of data, CRC ERROR!\n  2  Standard Speed Data Block   18 bytes of bogus header, CRC ERROR!\n  3  Standard Speed Data Block   6913 bytes of data, CRC ERROR!\n  4  Turbo Speed Data Block      489 bytes of data, CRC ERROR!\n  5  Turbo Speed Data Block      39938 bytes of data, CRC ERROR!\n(tzxtools) $ tzxcat -b 3 -l 6912 -S -o Commando.png Commando.tzx\n</code></pre>"},{"location":"retro-emulacion/zx-spectrum.html#conversion-wav-a-tzx","title":"Conversi\u00f3n wav a tzx","text":"<pre><code>(tzxtools) $ tzxwav -o Commando.tzx Commando.wav\n</code></pre>"},{"location":"retro-emulacion/zx-spectrum.html#dandanator","title":"Dandanator","text":""},{"location":"retro-emulacion/zx-spectrum.html#carga-de-fichero-rom-con-minipro","title":"Carga de fichero rom con minipro","text":"<ol> <li>Instalar el software minipro.</li> <li> <p>Extraer el chip EEPROM SST39SF040 del Dandanator y montarlo sobre el adaptador PLCC32:</p> <p></p> </li> <li> <p>Cargar el fichero rom con el siguiente comando: <code>minipro -p SST39SF040@PLCC32 -w ianna-dan.rom</code></p> </li> </ol>"},{"location":"retro-emulacion/zx-uno.html","title":"ZX-Uno","text":""},{"location":"retro-emulacion/zx-uno.html#enlaces","title":"Enlaces","text":"<ul> <li>ZX-Uno [Clon de ordenador ZX Spectrum basado en FPGA]</li> <li>Verkami: ZX-UNO</li> <li>Verkami: ZX-box</li> <li>ZX-Uno case, a Sinclair ZX Spectrum clone: Carcasa de Mejias3D para ZX-Uno oficial.</li> <li>ZX-Uno FAQ by @uto_dev</li> <li>INSTRUCCIONES PARA ACTUALIZAR LOS ZX-UNO DEL CROWDFUNDING CON ROMS DE SPECTRUM</li> <li>I am newbie. Where to start? / Soy novato, \u00bfpor d\u00f3nde empezar?</li> <li>Manual de esxDOS: Parte 1 y Parte 2</li> <li>ZX-Uno FAQ</li> <li>ZX-Uno Wiki: Contiene el diagrama de bloques del sistema, la lista de registros, descripci\u00f3n de los modos gr\u00e1ficos disponibles, etc.</li> <li>Sinclair FAQ Wiki</li> <li>ZX-UNO (XL) ISSUE2: Versi\u00f3n de ZX-Uno para integrar en carcasa de Spectrum original.</li> <li>RetroRadionics: Carcasas y repuestos para Spectrum original.</li> <li>Distribuci\u00f3n para ZX-Uno - Summer of '22 Edition</li> </ul>"},{"location":"retro-emulacion/zx-uno.html#comandos","title":"Comandos","text":"<ul> <li>NMI - EsxDOS: Ctrl-Alt-F5</li> <li>Soft Reset: Ctrl-Alt-Supr</li> <li>Hard Reset: Ctrl-Alt-Del</li> <li>Configuraci\u00f3n: Hard Reset + F2 (Edit)</li> <li>Cambio de Core durante arranque: Caps Lock</li> <li>Cambio de modo de v\u00eddeo: Scroll Lock</li> <li>Huevo de pascua: Pulsar <code>:</code> (o SYMBOL SHIFT+Z) durante los 2 primeros segundos tras el arranque o tras hacer master reset (Ctrl-Alt-BkSpace).</li> </ul>"},{"location":"retro-emulacion/zx-uno.html#pokes","title":"POKEs","text":"<p>(Fuente)</p> <ol> <li>Arrancar con la ROM \"cargandoleches\".</li> <li> <p>Con esa ROM no se pueden cargar juegos con el men\u00fa de NMI as\u00ed que hay que usar comandos de ESXDOS, despu\u00e9s de hacer BREAK al arracar la ROM. Para cargar taps hay que acceder al directorio donde est\u00e9n usando as\u00ed:</p> <pre><code>.cd &lt;directorio&gt;\n</code></pre> </li> <li> <p>Luego cargar el juego as\u00ed:</p> <pre><code>.tapein &lt;nombre del fichero tap&gt;\nLOAD \"\"\n</code></pre> </li> <li> <p>Una vez cargado el juego, pulsar NMI. Saldr\u00e1 arriba a la izquierda un recuadro donde primero hay que escribir la direcci\u00f3n del POKE (lo que va antes de la coma), pulsar enter, y despu\u00e9s teclear el valor del POKE (lo que va detr\u00e1s de la coma). Para terminar simplemente pulsar enter en lugar de escribir la direcci\u00f3n y volver\u00e1 al juego ya pokeado.</p> </li> </ol>"},{"location":"sistemas/android_system.html","title":"Android","text":""},{"location":"sistemas/android_system.html#enlaces","title":"Enlaces","text":"<ul> <li>Mount a filesystem read-write</li> <li>HTC Super Tool</li> <li>Unlock Root</li> <li>Link2SD</li> <li>Como Desrootear tu terminal</li> <li>Simple ADB Backup - Full backup without root</li> <li>Desbloquea el bootloader de tu HTC f\u00e1cilmente con Firewater S-Off</li> <li>Los m\u00f3viles perfectos a los que instalar CyanogenMod y que te duren muchos a\u00f1os</li> </ul>"},{"location":"sistemas/android_system.html#aplicaciones-interesantes","title":"Aplicaciones interesantes","text":"<ul> <li>KK Easy Launcher(Big Launcher)</li> <li>Files Go: Ayuda a limpiar el sistema.</li> <li>SD Maid: Ayuda a limpiar el sistema.</li> </ul>"},{"location":"sistemas/android_system.html#dispositivos","title":"Dispositivos","text":""},{"location":"sistemas/android_system.html#oneplus-5","title":"OnePlus 5","text":""},{"location":"sistemas/android_system.html#enlaces_1","title":"Enlaces","text":"<ul> <li>C\u00f3mo evitar que OnePlus recopile informaci\u00f3n del usuario sin conocimiento</li> <li>C\u00f3mo instalar Android Oreo 8.0 en el OnePlus 5</li> </ul>"},{"location":"sistemas/android_system.html#eliminacion-servicio-oneplus-system-service","title":"Eliminaci\u00f3n servicio <code>OnePlus System Service</code>","text":"<p>Este servicio recopila informaci\u00f3n privada como ha reconocido la propia OnePlus. La forma de desinstalarlo es abriendo una shell por ADB y ejecutando un comando:</p> <pre><code>$ ./adb shell\nOnePlus5:/ $ pm uninstall -k --user 0 net.oneplus.odm\nSuccess\n</code></pre> <p>Previamente se recomienda hacer un backup de este paquete por si tras desinstalarlo el sistema queda inestable. Esto lo podemos hacer localizando el directorio del apk con App Inspector y lanzando el siguiente comando:</p> <pre><code>$ ./adb pull &lt;ruta&gt;\n</code></pre>"},{"location":"sistemas/android_system.html#oneplus-one","title":"OnePlus One","text":""},{"location":"sistemas/android_system.html#enlaces_2","title":"Enlaces","text":"<ul> <li>How to Unlock Bootloader, Install Custom Recovery and Root</li> <li>OxygenOS is here [Installation Guide]</li> <li>OnePlus One Update: Manually Install CyanogenMod OS 12 CM12 [TUTORIAL]</li> <li>Mirrors for official Cyanogen roms and OTA updates</li> <li>TWRP for bacon</li> <li>Cyanogem Support: Im\u00e1genes de f\u00e1brica para Oneplus One y el resto de dispositivos que tienen soporte de Cyanogen.</li> <li>Plasma Mobile on Oneplus One</li> </ul>"},{"location":"sistemas/android_system.html#modos-arranque","title":"Modos arranque","text":"<ul> <li>Recovery: <code>V-</code> + <code>Power</code></li> <li>Fastboot: <code>V+</code> + <code>Power</code></li> </ul>"},{"location":"sistemas/android_system.html#flasheo-de-rom","title":"Flasheo de ROM","text":"<p>Cuando el m\u00f3vil avise de la disponibilidad de una nueva actualizaci\u00f3n, si est\u00e1 rooteado se producir\u00e1 un error durante el arranque al aplicarla. En ese caso hay que obtener la rom completa (no sirven los parches incrementales) e instalar manualmente desde recovery siguiendo estos pasos (fuente):</p> <ol> <li>Download the required ROM (full ROM) file for your device from the download section.</li> <li>Now transfer the ROM into your device\u2019s internal storage. Place the file where you can easily locate it.</li> <li>Now reboot into TWRP. To boot into TWRP, power off your phone and press and hold volume down button and power button at the same time.</li> <li>It is highly recommended that you perform a nandroid backup. To backup your ROM, tap on the backup option and select the following elements: System, Data, Boot, Recovery, EFS and swipe the confirmation action to backup.</li> <li>You can skip this step, but if after the installation system doesn\u2019t boot, try this step. After performing the ROM backup, return to the TWRP main menu and tap the Wipe button and select Advanced Wipe. Then wipe Dalvik Cache, System, and Cache. (If after the complete process system does not boot, try wiping the Data as well. But its will remove all your data)</li> <li>Go back to the TWRP main menu again and tap on Install option. Navigate to the ROM file and select it.</li> <li>Swipe the confirmation button to proceed with the installation. The ROM will be installed.</li> <li>Once installed, reboot to system.</li> </ol>"},{"location":"sistemas/android_system.html#reseteo-de-estadisticas-de-bateria-desde-twrp","title":"Reseteo de estad\u00edsticas de bater\u00eda desde TWRP","text":"<ol> <li>Cargar la bater\u00eda hasta el 100%</li> <li>Arrancar el TWRP recovery</li> <li>Seguir la ruta: Advanced / File Manager</li> <li>Ir a la ruta: /data/system/</li> <li>Pulsar sobre el fichero batterystats.bin</li> <li>Pulsar Delete</li> <li>Reiniciar el sistema</li> <li>Descargar la bater\u00eda hasta el 2 - 5 %</li> <li>Volver a cargar la bater\u00eda hasta el 100%</li> </ol>"},{"location":"sistemas/android_system.html#instalacion-lineageos","title":"Instalaci\u00f3n LineageOS","text":"<p>(Fuente)</p> <ol> <li>Si no est\u00e1 ya, instalar el recovery TWRP siguiendo estas instrucciones.</li> <li>Descargar de aqu\u00ed.<ul> <li>Opcionalmente bajar las GApps en edici\u00f3n ARM.</li> </ul> </li> <li>Copiar los ficheros al directorio <code>/sdcard</code> (en caso de haber perdido la partici\u00f3n de almacenamiento interno por haber instalado UBPorts por ejemplo, copiar los ficheros a un pendrive y pincharlo con un adaptador OTG; el pendrive se ver\u00e1 como <code>/sdcard</code> desde el Recovery).</li> <li>Arrancar en modo Recovery (<code>V-</code> + <code>Power</code>).</li> <li>Seleccionar <code>Wipe</code> y despu\u00e9s <code>Advanced Wipe</code>.</li> <li>Seleccionar las particiones <code>Cache</code>, <code>System</code> y <code>Data</code> y despu\u00e9s <code>Swipe to Wipe</code>.</li> <li>Vuelve al men\u00fa principal y selecciona <code>Install</code>.</li> <li>Navega a <code>/sdcard</code> y seleciona el .zip de LineageOS.</li> <li>Sigue las instrucciones en pantalla.</li> <li>(Opcional) Instala el resto de paquetes. Si se van a instalar las GApps, hay que hacerlo antes del primer arranque.</li> <li>Vuelve al men\u00fa principal y selecciona <code>Reboot</code>, y despu\u00e9s <code>System</code>.</li> </ol>"},{"location":"sistemas/android_system.html#motorola-moto-e-xt1021","title":"Motorola Moto E (XT1021)","text":""},{"location":"sistemas/android_system.html#enlaces_3","title":"Enlaces","text":"<ul> <li>Info Cyanogenmod</li> <li>Downloads Cyanogenmod</li> </ul>"},{"location":"sistemas/android_system.html#modos-arranque_1","title":"Modos arranque","text":"<ul> <li>Recovery: Apagado pulsar <code>Power</code> mientras se pulsa <code>Volume-</code>. Cuando salga el logo de Android tumbado con el tri\u00e1ngulo rojo pulsar <code>Volume+</code> mientras se mantiene pulsado <code>Power</code>.</li> </ul>"},{"location":"sistemas/android_system.html#geeksphone-one","title":"Geeksphone One","text":""},{"location":"sistemas/android_system.html#enlaces_4","title":"Enlaces","text":"<ul> <li>Reset manual</li> <li>Tutorial ROM y Google Apps</li> </ul>"},{"location":"sistemas/android_system.html#roms","title":"ROMs","text":"<ul> <li>SuperAosp 8.6, Rom Basada en Android Open Source Gingerbread</li> <li>CyanogenMod</li> <li>RCMod 3.0.4</li> <li>RCMod 4.0.0</li> </ul>"},{"location":"sistemas/android_system.html#configuracion-a-gps","title":"Configuraci\u00f3n A-GPS","text":"<p>Te\u00f3ricamente, el server es: <code>h-slp.mncXXX.mccYYY.pub.3gppnetwork.org</code> En el puerto: 3425 XXX lo cambias por el MNC de tu operador, e YYY por el MCC. En el caso de Simyo MCC=214 y MNC=19</p>"},{"location":"sistemas/android_system.html#nvsbl-p4d-sirius","title":"NVSBL P4D Sirius","text":""},{"location":"sistemas/android_system.html#enlaces_5","title":"Enlaces","text":"<ul> <li>SuperOSR ICS v1.4.6 para P4D Sirius</li> </ul>"},{"location":"sistemas/android_system.html#samsung-galaxy-mini2-gt-s6500d","title":"Samsung Galaxy mini2 (GT-S6500D)","text":""},{"location":"sistemas/android_system.html#enlaces_6","title":"Enlaces","text":"<ul> <li>Backup EFS folder without rooting</li> <li>Samsung Galaxy mini2 Blog</li> <li>Root y unroot Galaxy Mini 2</li> <li>HOW TO CHANGE CSC CODE ON SAMSUNG GALAXY GRAND DUOS I9082/I9082L</li> <li>Liberar Galacy Mini 2</li> <li>Cambiar CSC (Country Specific Code)</li> <li>StockRoms S6500/D/L/T para flashear por CWM</li> <li>CyanogenMod 10 Thewhisp</li> <li>XDA - Galaxy Mini II Android Development</li> <li>XDA - Galaxy Mini II Q&amp;A, Help &amp; Troubleshooting</li> </ul>"},{"location":"sistemas/android_system.html#modos-arranque_2","title":"Modos arranque","text":"<ul> <li>Recovery: V+ V- Home Power</li> <li>Download: V- Home Power</li> </ul>"},{"location":"sistemas/android_system.html#htc-desire","title":"HTC Desire","text":"<p>Los datos originales del HBOOT de un Desire sin manipular eran:</p> <pre><code>BRAVO PVT4 SHIP S-ON\nHBOOT-0.93.0001\nMICROP-051d\nRADIO-5.11.05.14\nAug 10 2010,17:52:18\n</code></pre>"},{"location":"sistemas/android_system.html#modos-de-arranque","title":"Modos de arranque","text":"<ul> <li>Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power.</li> </ul>"},{"location":"sistemas/android_system.html#enlaces_7","title":"Enlaces","text":"<ul> <li>C\u00f3mo rootear HTC Desire</li> <li>Unlock Bootloader (HTC oficial)</li> <li>MIUI-XJ 2.1.6 Gingerbread 2.3.7 para HTC Desire</li> <li>Ice Cream Sandwich con toques de CyanogenMod para HTC Desire</li> <li>Las mejores ROMs para HTC Desire</li> <li>Las mejores Roms para HTC Desire</li> <li>ICS for Desire</li> <li>Chromium</li> <li>AOKP for Bravo - Beta 3! - Stock HBOOT only</li> <li>C\u00f3mo flashear un Recovery en HTC Desire</li> </ul>"},{"location":"sistemas/android_system.html#proceso-de-instalacion-de-rom","title":"Proceso de instalaci\u00f3n de ROM","text":"<ol> <li>Hacer S-OFF con revolutionary (ejecutarlo con sudo).</li> <li>Hacer root siguiendo los pasos de El Androide Libre.</li> <li>Instalar el HBOOT Bravo CM7 r2 de AlphaRev. Se hace descargando el fichero de la columna \"PB99IMG\", renombr\u00e1ndolo a \u201cPB99IMG.zip\u201d, copi\u00e1ndolo a la ra\u00edz de la SD y reiniciando en modo HBOOT.</li> <li>Borrar cach\u00e9, Data y Dalvik.</li> <li>Formatear SD desde Recoveery con 1024MB para la ext y 0MB para el swap.</li> <li>Instalar InsertCoin de tipo CM7: http://insertcoin-roms.org/</li> </ol>"},{"location":"sistemas/android_system.html#samsung-galaxy-note-ii","title":"Samsung Galaxy Note II","text":""},{"location":"sistemas/android_system.html#enlaces_8","title":"Enlaces","text":"<ul> <li>DN4 (Ditto Note 4) ROM from E-team</li> <li>Electron Team (creadores de DN3 y DN4)</li> </ul>"},{"location":"sistemas/android_system.html#sony-xperia-t","title":"Sony Xperia T","text":""},{"location":"sistemas/android_system.html#menu-de-servicio","title":"Men\u00fa de servicio","text":"<pre><code>*#*#7378423#*#*\n</code></pre>"},{"location":"sistemas/android_system.html#modos-de-reset","title":"Modos de Reset","text":"<ul> <li>Volume Up + POWER (for 10 seconds) -&gt; Battery reset [Device will vibrate once]</li> <li>Volume Up + POWER (for 15 seconds) -&gt; Hard reset [Device will vibrate three times]</li> </ul>"},{"location":"sistemas/android_system.html#dispositivos-de-almacenamiento-40","title":"Dispositivos de almacenamiento 4.0","text":"<ul> <li>/mnt/sdcard: Memoria interna (16GB)</li> <li>/mnt/ext_card: Tarjeta SD</li> </ul>"},{"location":"sistemas/android_system.html#dispositivos-de-almacenamiento-41","title":"Dispositivos de almacenamiento 4.1","text":"<ul> <li>/mnt/int_storage        10.9G     2.6G     8.3G   4096</li> <li>/storage/sdcard0        10.9G     2.6G     8.3G   4096</li> <li>/storage/sdcard1        29.7G     2.7G    27.0G   32768</li> </ul>"},{"location":"sistemas/android_system.html#historial-firmware","title":"Historial firmware","text":"Fecha Versi\u00f3n 2013-07-02 9.1.A.1.141 2014-04 9.2.A.1.199"},{"location":"sistemas/android_system.html#enlaces_9","title":"Enlaces","text":"<ul> <li>Unlock your boot loader</li> <li>Full rooting guide for xperia t lt30p build 7.0.A.3.195</li> <li>Xperia Roms</li> <li>Creacion de perfiles completos con Smart Tags + NFC Task Launcker + Tasker</li> <li>\u00bfA cuantos os ha fallado el Xperia T? y soluciones.</li> <li>Servicio T\u00e9cnico</li> <li>Flash tool for Xperia\u2122 devices</li> <li>Lista de Firmwares certificados</li> <li>Xperia T software updates</li> <li>TWRP 2.7 - Sony Xperia T page</li> <li>[4.4 ROM Flash] bypass set_metadata_xxx fails</li> <li>Disable Fast dormancy on sony smarthphones</li> <li>[MOD] Speakerphone whistle fix + volume boost</li> <li>Charging a dead Xperia T</li> </ul>"},{"location":"sistemas/android_system.html#roms_1","title":"ROMs","text":"<ul> <li>CyanogenMod</li> <li>FreeXperia Project</li> <li>OmniROM</li> <li>ROM(Unlocked)(KITKAT) Plain AOSP for Xperia T</li> <li>ROM(4.4.4)(T/TX) Carbon Rom KK Unofficial</li> <li>ROM(T)(4.3) Ultimate PureXT v4.5  (**)</li> <li>ROM(4.3)(T)(LB/UB) OMeGa v2.2  (**)</li> <li>DooMKernel {JB}(v12)(20140604)</li> <li>Stock ROMs para el Xperia T: HTCMania - XDA</li> <li>GAPPS(4.4.x) OFFICIAL Up-to-Date PA-GOOGLE APPS (All ROM's) (2014-08-18)</li> </ul>"},{"location":"sistemas/android_system.html#repuestos","title":"Repuestos","text":"<ul> <li>Tapa posterior</li> </ul>"},{"location":"sistemas/android_system.html#instrucciones-de-instalacion-de-roms","title":"Instrucciones de instalaci\u00f3n de ROMs","text":"<ol> <li>power off the phone:</li> <li>hold vol+ and plug usb to boot into fastboot (blu led)</li> <li>fastboot flash boot boot.img (from cm10 zip)</li> <li>fastboot reboot</li> <li>enter recovery, on boot led will be violet for 3'', during this period press vol+</li> <li>flash rom zip</li> <li>flash gapps zip</li> <li>wipe</li> <li>reboot</li> </ol>"},{"location":"sistemas/android_system.html#desactivar-fast-dormancy-pepephone-mcc-214-mnc-06","title":"Desactivar fast-dormancy (pepephone MCC= 214, MNC= 06)","text":"<p>In /system/etc/fast-dormancy/fd_custm_conf.txt replace the 0s with your MNC and MCC from your APN setting.</p>"},{"location":"sistemas/android_system.html#solucion-al-problema-de-permisos-de-la-memoria-interna-fuente","title":"Solucion al problema de permisos de la memoria interna (fuente)","text":"<pre><code>$ su\n# cd /mnt/media_rw\n# busybox chown -R 2800:2800 sdcard0\n# chmod 0770 sdcard0\n</code></pre>"},{"location":"sistemas/android_system.html#sony-xperia-u","title":"Sony Xperia U","text":""},{"location":"sistemas/android_system.html#menu-de-servicio_1","title":"Men\u00fa de servicio","text":"<pre><code>*#*#7378423#*#*\n</code></pre>"},{"location":"sistemas/android_system.html#enlaces_10","title":"Enlaces","text":"<ul> <li>Unlock your boot loader</li> <li>DESBLOQUEAR COMPLETAMENTE tu Xperia y poder ROOTEARLO\u2605Aplicar MODS\u2605ROMS</li> <li>Sobre el Bootloader</li> </ul>"},{"location":"sistemas/android_system.html#roms_2","title":"ROMS","text":"<ul> <li>XDA-Developers Rom List</li> <li>(ROM)(UB)(4.4.4)(W37-S4)(XperiaSTE Team) CyanogenMod 11.0</li> </ul>"},{"location":"sistemas/android_system.html#rikomagic-mk802-iiis","title":"Rikomagic MK802-IIIs","text":""},{"location":"sistemas/android_system.html#enlaces_11","title":"Enlaces","text":"<ul> <li>PicUntu</li> <li>MK802 Ubuntu Images with optional Droidmote</li> <li>MK802 IIIs en AndroidPC.es</li> <li>ROMS no oficiales funcionando al 100% para meter en los MK802IIIs</li> <li>Foro MK802-IIIS Rikomagic en AndroidPC.es</li> <li>Las mejores tiendas de aplicaciones alternativas a Google Play</li> <li>Configuraciones para mandos y m\u00e9todo para cambiar funciones de las teclas</li> </ul>"},{"location":"sistemas/android_system.html#roms_3","title":"ROMs","text":"<ul> <li>NEOTV</li> <li>Rom Finless 1.5 para MK802-IIIs</li> <li>Finless rom 1.8 para MK802-III y UG802</li> <li>Rom Finless 2.0 con Android 4.2.2 para MX1/MX2 y MK802-IIIS con BT</li> </ul>"},{"location":"sistemas/android_system.html#software","title":"Software","text":"<ul> <li>RetroArch, el Todo-en-1 de emuladores: Playstation, SNES, GBA y muchos m\u00e1s</li> <li>Sopcast</li> <li>Null Input Method</li> </ul>"},{"location":"sistemas/android_system.html#tdt","title":"TDT","text":"<ul> <li>Televisi\u00f3n conectando un USB-TDT en tu AndroidPC con chip RK3066</li> </ul>"},{"location":"sistemas/android_system.html#hardware","title":"Hardware","text":"<ul> <li>Adaptador USB LAN + USB HUB</li> </ul>"},{"location":"sistemas/android_system.html#flasheo-de-firmware-oficial","title":"Flasheo de Firmware oficial","text":"<ol> <li>Bajar la \u00faltima versi\u00f3n de la p\u00e1gina oficial.</li> <li>En el paquete recien bajado (en el directorio 0121-IIIS8B\\0121-IIIS8B\\RKBatchTool1.5en\\Driver) se encuentran los drivers de modo Flashboot para Windows. Para Windows8 se pueden encontrar aqu\u00ed.</li> <li>Conectar un cable microUSB-USB a la ranura OTG. El otro extremo (USB) lo introducimos en un puerto libre del ordenador mientras a la vez con un palillo o clip desenrollado pulsamos el bot\u00f3n de reset que se adivina por una de las rejillas de ventilaci\u00f3n. Si Windows muestra un bocadillo pidiendo drivers, le damos a elegir la ruta en disco y apuntas al directorio comentado anteriormente que contenga la versi\u00f3n de los drivers que nos interese. Si Windows no reacciona habr\u00e1 que entrar en el Administrador de dispositivos y forzar la actualizaci\u00f3n sobre alguno de los \"Dispositivos desconocidos\" que veamos. En el directorio \"0121-IIIS8B\\0121-IIIS8B\" del paquete con el firmware viene una explicaci\u00f3n detallada (incluye fotos) del proceso de instalaci\u00f3n de los drivers y de la conexi\u00f3n al ordenador por el puerto OTG mientras se pulsa el reset.</li> <li>Una vez instalados los drivers lo mejor ser\u00e1 reiniciar Windows.</li> <li>Volvemos a conectar el MK802 por el puerto OTG mientras mantenemos pulsado el bot\u00f3n de reset como en el paso 3.</li> <li>Abrimos la aplicaci\u00f3n de flasheo (RKBatchTool). Deber\u00edamos ver en azul el cuadrado inferior izquierdo marcado con un 1. Si no es as\u00ed es que el proceso de instalaci\u00f3n de drivers y/o conexi\u00f3n del MK802 al PC no ha ido bien.</li> <li>Seleccionamos el fichero con la imagen de la ROM (extensi\u00f3n .img).</li> <li>Pulsamos el bot\u00f3n \"Upgrade\".</li> <li>Esperamos a que el proceso termine satisfactoriamente. Puede tardar entre 1 y 3 minutos.</li> </ol>"},{"location":"sistemas/android_system.html#flasheo-rom-finless","title":"Flasheo ROM Finless","text":"<ol> <li>Bajar el paquete de aqu\u00ed.</li> <li>Instalar los drivers Windows (ver pasos en instalaci\u00f3n ROM oficial).</li> <li>Descomprimir el paquete con la ROM.</li> <li>Conectar el Rikomagic al PC por USB como comentamos en el otro procedimiento, es decir conectando al puerto OTG y mientras se mantiene presionado el microbot\u00f3n de reset oculto entre las rendijas de ventilaci\u00f3n.</li> <li>Abrir el programa \"ROM Flash Tool.exe\" que hay en el primer nivel de directorios del paquete que hemos descomprimido.</li> <li>En la ventana que aparece se ve una serie de ficheros que se toman del subdirectorio \"FinlessROM\". Dentro de ese directorio hay varias opciones para los ficheros \"parameter\", \"kernel\" y \"boot\". El primero yo lo dejar\u00eda como viene por defecto. Los ficheros \"kernel\" y \"boot\" tienen que ir parejos. Hay dos versiones de cada, una para 720p y otra para 1080p. Recomiendan la 720p y por la potencia del Rikomagic (que va justito para los 1080p) yo tambi\u00e9n creo que no merece la pena el 1080p. Como por defecto viene seleccionado el 1080p, hay que cambiarlo. Para ello hay que hacer click en la fila correspondiente de la \u00faltima columna, la que tiene el r\u00f3tulo \"...\".</li> <li>Antes de empezar a flashear hay que comprobar que el programa se comunica con el Rikomagic. Para ello tiene que indicar abajo del todo en letra grande \"Found RKAndroid...\". Si pone \"No Found RKAndroid rock usb\" es que hay alg\u00fan problema con la conexi\u00f3n o los drivers. Simplemente volver a intentar la conexi\u00f3n (pulsando el botoncito).</li> <li>Le damos al bot\u00f3n \"Erase NAND (IDB)\" y luego cuando ese proceso termine le damos a \"Flash ROM\".</li> </ol>"},{"location":"sistemas/android_system.html#zte-skate-orange-montecarlo","title":"ZTE Skate / Orange Montecarlo","text":""},{"location":"sistemas/android_system.html#enlaces_12","title":"Enlaces","text":"<ul> <li>Backup original ROM?</li> <li>How to Install CyanogenMod on ZTE Skate (\"skate\")</li> <li>Tutorial Como instalar ClockWorkMod Recovery,Rootear e instalar roms en ZTE skate/OMC</li> <li>[ROM][ZTE Skate] H3 Holo (Dolby Audio + Linaro optimized kernel + frandom + ROW I/O scheduler)</li> </ul>"},{"location":"sistemas/android_system.html#htc-wildfire","title":"HTC Wildfire","text":""},{"location":"sistemas/android_system.html#modos-de-arranque_1","title":"Modos de arranque","text":"<ul> <li>Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power.</li> </ul>"},{"location":"sistemas/android_system.html#enlaces_13","title":"Enlaces","text":"<ul> <li>Las mejores ROMs para HTC Wildfire</li> <li>S-OFF y rootear para instalar Rom</li> <li>HTC Wildfire: Full Update Guide</li> <li>Nuestras 4 ROM favoritas del 2011 para la HTC Desire</li> <li>Unlock Bootloader (HTC oficial)</li> </ul>"},{"location":"sistemas/android_system.html#htc-wildfire-s","title":"HTC Wildfire S","text":""},{"location":"sistemas/android_system.html#enlaces_14","title":"Enlaces","text":"<ul> <li>Unlock Bootloader (HTC oficial)</li> <li>HTC Wildfire S ROMs</li> <li>CM9-marvel-KANG</li> <li>MIUI V4 |CM9|ICS 4.0.3|</li> <li>Nuevo m\u00e9todo para conseguir ROOT en el HTC Wildfire S y algunas ROMs</li> <li>CyanogenMod 9.0.0-RC0-Marvel-Alpha2</li> </ul>"},{"location":"sistemas/android_system.html#motorola-milestone-2","title":"Motorola Milestone 2","text":""},{"location":"sistemas/android_system.html#modos-de-arranque_2","title":"Modos de arranque","text":"<ul> <li>Se arranca en Recovery encendiendo mientras se mantiene pulsada la tecla X del teclado f\u00edsico. Luego, en Froyo hay que pulsar @. En Gingerbread las dos teclas de volumen a la vez.</li> <li>Se arranca en HBOOT encendiendo mientras se mantiene pulsada la tecla de cursor \"Arriba\" del teclado f\u00edsico.</li> </ul>"},{"location":"sistemas/android_system.html#basebands","title":"Basebands","text":"<ul> <li>Tel\u00e9fono original: EPU93_U_00.60.00</li> <li>ICS 4.0.4 2012-08-15: EPU93ST2_U_03.0C.01</li> </ul>"},{"location":"sistemas/android_system.html#kernels","title":"Kernels","text":"<ul> <li>2.3.4: 2.6.32.9-g7d2667a</li> <li>ICS 4.0.4 2012-08-15: 2.6.32.9-g7d2667a</li> <li>Recomendado por Tezet para JB 4.1.1:<ul> <li>2.6.32.9-g5db7937</li> <li>a17140@zch68lnxdroid63 #1</li> <li>Fri Sep 16 17:57:00 CST 2011</li> </ul> </li> </ul>"},{"location":"sistemas/android_system.html#enlaces_15","title":"Enlaces","text":"<ul> <li>sbf_flash: Utilidad Linux/Mac para flashear una ROM</li> <li>Motorola Android Software Upgrade News</li> <li>Miledropedia</li> <li>SBF Files</li> <li>Milestone2 en XDA-developers</li> <li>Milestone 2 Actualizacion Gingerbread, CyanogenMOD y MIUI</li> <li>Rootear Motorola Milestone 2</li> <li>CWM: Clockworkmod Recovery - Droid 2 Bootstrapper</li> <li>Hacer backup s\u00f3lo de System</li> <li>Cyanogenmod 7.1 for Motorola Milestone 2</li> <li>Cyanogenmod 7.1 for Motorola Milestone 2</li> <li>Cyanogenmod 9 for Motorola Milestone 2</li> <li>MOTO Milestone 2 \u00bb ROM MIUI 1.12.9</li> <li>The Noob Handbook for Bricked Phones</li> <li>Instalaci\u00f3n verificada de CM7</li> <li>HOW TO install CyanogenMod/MIUI to your phone</li> <li>ROM Argen2Stone 2.7 RE (Based on Ms2Ginger 2.0)</li> <li>How to install Argen2Stone?</li> <li>Titanium Backup, The Easy Way!</li> <li>MIUI 2.5.25 GB 2.3.7 + ICS Multilanguage for Milestone 2!</li> <li>CyanogenMod 10 for Motorola Milestone 2 (Android 4.1.1) !!!</li> <li>CyanogenMod 9 for Motorola Milestone 2 (Android 4.0.4)</li> <li>MIUI v4 2.7.27</li> <li>Baseband switcher</li> <li>Please come in,if your ms2 can't contect the GSM</li> <li>Kernel downgrade method for EU/BR/AR Gingerbread (only for BL=3)</li> <li>Multipack (alternativa a gapps)</li> </ul>"},{"location":"sistemas/android_system.html#instalacion-sbf","title":"Instalaci\u00f3n SBF","text":"<ol> <li>Bajar el SBF de aqu\u00ed.</li> <li>Aplicarlo con: <code>sudo sbf_flash rom.sbf</code></li> <li>Rootear con DoomLoRD.</li> <li>Instalar bootmenu con droid2bootstrap sacado de aqu\u00ed.</li> </ol>"},{"location":"sistemas/android_system.html#instalacion-de-rom-jb-411-de-tezet","title":"Instalaci\u00f3n de ROM JB 4.1.1 de tezet","text":"<ul> <li>Hacer el downgrade del kernel flasheando el sbf que hay aqu\u00ed</li> <li>Al reiniciar deber\u00eda entrar en CWM</li> <li>Hacer wipe de cah\u00e9</li> <li>Hacer wipe de Dalvik</li> <li>Instalar el Kernel CH GB que indica tezet aqu\u00ed</li> <li>Instalar la ROM</li> <li>Hacer wipe de cah\u00e9</li> <li>Hacer wipe de Dalvik</li> </ul>"},{"location":"sistemas/android_system.html#sony-ericsson-xperia-x8","title":"Sony Ericsson Xperia X8","text":""},{"location":"sistemas/android_system.html#enlaces_16","title":"Enlaces","text":"<ul> <li>Root Sony Ericsson Xperia X8 With SuperOneClick</li> <li>How To Install Latest xRecovery to Sony Ericsson Xperia X10</li> <li>CM7.1.0 FXP043 - FreeXperia Project</li> <li>Tutorial para reparar/desbrickear terminales Sony Ericsson</li> <li>How to install GingerXperiaV8 on Sony Ericsson X8</li> <li>GingerDX para Xperia X8</li> <li>GingerDX</li> <li>Como instalar un Rom a un Xperia X8</li> <li>Las mejores ROMs para Sony Ericsson Xperia X8</li> <li>How to rescue our bricked phone</li> <li>Hard brick warning - read before boot loader unlock</li> <li>SE Tweaker Tool v4.0 (16/2/12) Unlock Bootloader+Kernel Guide</li> <li>Bootloader and kernel guide</li> <li>Desbloquear el Bootloader para Novatos X8</li> <li>Unlocking the boot loader (Oficial)</li> </ul>"},{"location":"sistemas/android_system.html#debrick","title":"Debrick","text":"<ul> <li>Phone-lab Barcelona</li> <li>Movical Santiago de Compostela</li> <li>Liberar.es</li> <li>http://forum.xda-developers.com/showthread.php?t=1292705&amp;page=2</li> <li>http://forum.xda-developers.com/showthread.php?t=1399381&amp;page=2</li> <li>http://support.setool.net/showthread.php?3-UPDATES-AND-NEWS/page23</li> <li>http://forum.xda-developers.com/showthread.php?t=986697&amp;highlight=flash+tool</li> <li> Problem unlocking X8 with new bootloader [Solved]</li> <li>Soluci\u00f3n en el hilo de XDA \"Hard brick warning - read before boot loader unlock\"</li> <li>Xperia testpoint instructions and pictures</li> <li>Unlock Bootloader.Test Point</li> <li>Libera BOOTLOADER POR 15\u20ac OMNIUS O S1TOOL GRATIS</li> </ul>"},{"location":"sistemas/android_system.html#tecnicas-varias","title":"T\u00e9cnicas varias","text":""},{"location":"sistemas/android_system.html#conectar-el-mando-de-la-ps3","title":"Conectar el mando de la PS3","text":"<p>(Fuente)</p>"},{"location":"sistemas/android_system.html#requisitos","title":"Requisitos","text":"<ul> <li>Nuestro dispositivo Android</li> <li>Deberemos ser Root</li> <li>Dualshock 3 (Sixaxis)</li> <li>Sixaxis Compatibility Checker</li> <li>Sixaxis Controller</li> <li>SixaxisPairTool, que puedes descargarlo desde aqu\u00ed.</li> </ul>"},{"location":"sistemas/android_system.html#configuracion","title":"Configuraci\u00f3n","text":"<ol> <li>Abrimos el Sixaxis Compatibility Checker</li> <li>Nos aparecer\u00e1 un mensaje y pulsaremos sobre OK</li> <li>Pulsaremos sobre Start y le daremos permisos de Superusuario</li> <li>Si nuestro dispositivo es compatible recibiremos un mensaje dici\u00e9ndonos si nuestro dispositivo es compatible. En caso que de que as\u00ed sea pulsamos sobre Stop y salimos de la aplicaci\u00f3n.</li> <li>En caso de no recibir el mensaje de compatibilidad podemos para aqu\u00ed o seguir y probar suerte ;-)</li> <li>Ahora abrimos Sixaxis Controller App y clicamos sobre start. Le daremos permisos de superusuario al igual que a la otra aplicaci\u00f3n. Entonces obtendremos una direcci\u00f3n de Bluetooth local.</li> <li>Abriremos en nuestro ordenador el Sixaxis Pair Tool y la instalaremos. Despu\u00e9s la abriremos como administrador (bot\u00f3n derecho sobre el icono).</li> <li>Con el programa abierto enchufaremos el Sixaxis en nuestro PC mediante el cable USB.</li> <li>En el Sixaxis Pair Tool veremos una caja vac\u00eda. Ah\u00ed escribiremos la direcci\u00f3n Bluetooth Local que hab\u00edamos obtenido antes.</li> <li>Cuando esto est\u00e9 hecho pulsaremos sobre Update y veremos como la direcci\u00f3n se ha actualizado.</li> <li>Desconectaremos el Sixaxis de nuestro PC.</li> <li>Pulsaremos sobre el bot\u00f3n PS y veremos que ocurre\u2026</li> <li>Nuestro Sixaxis ya deber\u00eda estar emparejado con nuestro dispositivo Android.</li> </ol>"},{"location":"sistemas/android_system.html#adb-en-linux-y-arrancar-settings","title":"ADB en Linux y arrancar settings","text":"<ol> <li>Instalar el SDK.</li> <li>Sacar id de fabricante de lsusb (http://bradchow.wordpress.com/2009/02/16/adb-on-windows-and-ubuntu-linux/) y crear rule udev.</li> <li>Reiniciar adb server:</li> <li><code>adb kill-server</code></li> <li><code>sudo adb start-server</code></li> <li><code>adb devices</code></li> <li>Ejecutar:</li> <li><code>sudo adb shell</code></li> <li><code>am start -a android.intent.action.MAIN -n com.android.settings/.Settings</code></li> </ol>"},{"location":"sistemas/android_system.html#montar-system-en-rw","title":"Montar system en rw:","text":"<pre><code># mount -o remount,rw /system\n# cd /system/app\n# mount -o remount,ro /system\n# reboot recovery\n</code></pre>"},{"location":"sistemas/android_system.html#desinstalar-aplicaciones-de-sistema-sin-root","title":"Desinstalar aplicaciones de sistema sin root","text":"<p>Fuente</p> <ol> <li>Activa el modo de depuraci\u00f3n en tu Android.</li> <li>Conecta tu Android al ordenador por USB y acepta la clave RSA.</li> <li>Abre una ventana de comandos y escribe <code>adb devices</code> sin las comillas. Tu dispositivo deber\u00eda detectarse apareciendo a modo de c\u00f3digo.</li> <li>Una vez conectado escribe <code>adb shell</code>.</li> <li>Ahora necesitas eliminar una a una las aplicaciones que desees. Utiliza App Inspector para saber el nombre del paquete.</li> <li>Pega este c\u00f3digo en la ventana de comandos: <code>pm uninstall -k -user 0 nombre.del.paquete</code>. Sin las comillas y cambiando \u201cnombre.del.paquete\u201d por el de la aplicaci\u00f3n que deseas (Google Chrome es <code>com.android.chrome</code>, por ejemplo).</li> <li>Acepta el comando y si el ordenador te devuelve un <code>Success</code> es que se ha eliminado de manera satisfactoria.</li> </ol>"},{"location":"sistemas/appletv.html","title":"AppleTV","text":""},{"location":"sistemas/appletv.html#enlaces","title":"Enlaces","text":"<ul> <li>Backup del disco duro</li> </ul>"},{"location":"sistemas/appletv.html#tvheadend","title":"TVHeadEnd","text":""},{"location":"sistemas/appletv.html#trucos","title":"Trucos","text":"<p>Comando para escanear frecuencias:</p> <pre><code>$ sudo apt-get install w-scan\n$ sudo w_scan -f a -c ES -X\n</code></pre>"},{"location":"sistemas/appletv.html#enlaces_1","title":"Enlaces","text":"<ul> <li>Instalaci\u00f3n en Ubuntu/Debian</li> </ul>"},{"location":"sistemas/archlinux.html","title":"Arch Linux","text":""},{"location":"sistemas/archlinux.html#enlaces","title":"Enlaces","text":"<ul> <li>Chaotic-AUR: Compilaci\u00f3n autom\u00e1tica de paquetes AUR.</li> </ul>"},{"location":"sistemas/archlinux.html#comandos-utiles","title":"Comandos \u00fatiles","text":"<ul> <li><code>sudo pacman -Syy</code>: Actualizar la base de datos de paquetes. Equivalente a <code>apt update</code>.</li> <li><code>sudo pacman -Syu</code>: Actualizar el sistema. Equivalente a <code>apt upgrade</code>.</li> <li><code>sudo pacman -S &lt;paquete&gt;</code>: Instalar un paquete. Equivalente a <code>apt install</code>.</li> <li><code>sudo pacman -R &lt;paquete&gt;</code>: Desinstalar un paquete dejando sus dependencia. Equivalente a <code>apt remove</code>.</li> <li><code>sudo pacman -Rs &lt;paquete&gt;</code>: Desinstalar un paquete y sus dependencias.</li> <li><code>sudo pacman -Rns &lt;paquete&gt;</code>: Desinstalar un paquete, sus dependencias y archivos de configuraci\u00f3n. Equivalente a <code>apt purge</code>.</li> <li><code>pacman -Qdt</code>: Listar paquetes hu\u00e9rfanos. Equivalente a <code>apt autoremove</code>.</li> <li><code>sudo pacman -Rns $(pacman -Qdtq)</code>: Eliminar paquetes hu\u00e9rfanos. Equivalente a <code>apt autoremove</code>.</li> <li><code>pacman -Q &lt;paquete&gt;</code>: Comprobar si un paquete est\u00e1 instalado. Equivalente a <code>dpkg -l | grep &lt;paquete&gt;</code>.</li> <li><code>pacman -Ql &lt;paquete&gt;</code>: Listar los archivos de un paquete. Equivalente a <code>dpkg -L &lt;paquete&gt;</code>.</li> <li><code>pacman -Qo &lt;archivo&gt;</code>: Comprobar a qu\u00e9 paquete pertenece un archivo. Equivalente a <code>dpkg -S &lt;archivo&gt;</code>.</li> <li><code>pacman -Ss &lt;paquete&gt;</code>: Buscar un paquete. Equivalente a <code>apt search</code>.</li> <li><code>pacman -Qm</code>: Listar paquetes instalados desde AUR. Equivalente a <code>apt list --installed | grep -v /</code>.</li> <li><code>yay -Syu</code>: Actualizar el sistema, incluyendo paquetes de AUR. Equivalente a <code>apt upgrade</code>.</li> <li><code>yay -S &lt;paquete&gt;</code>: Instalar un paquete desde AUR. Equivalente a <code>apt install</code>.</li> <li><code>sudo pacman -R &lt;paquete&gt;</code>: Desinstalar un paquete de AUR dejando sus dependencia. Equivalente a <code>apt remove</code>.</li> <li><code>sudo pacman -Rs &lt;paquete&gt;</code>: Desinstalar un paquete de AUR y sus dependencias.</li> <li><code>yay -Rns &lt;paquete&gt;</code>: Desinstalar un paquete de AUR, sus dependencias y archivos de configuraci\u00f3n. Equivalente a <code>apt purge</code>.</li> </ul>"},{"location":"sistemas/buildroot.html","title":"Buildroot","text":""},{"location":"sistemas/buildroot.html#enlaces","title":"Enlaces","text":"<ul> <li>Manual</li> <li>Mastering Embedded Linux: 1. 2, 3, 4 y 5</li> </ul>"},{"location":"sistemas/buildroot.html#secciones-interesantes-del-manual","title":"Secciones interesantes del manual","text":"<ul> <li>Detalle de los subtargets que tiene cada package</li> <li>Uso de Buildroot durante el desarrollo</li> <li>Estructura de directorios</li> </ul>"},{"location":"sistemas/buildroot.html#comandos-interesantes","title":"Comandos interesantes","text":"Comando Efecto <code>make list-defconfigs</code> Muestra una lista de todos los defconfig que hay disponibles en la distribuci\u00f3n Buildroot. <code>make rg350_defconfig BR2_EXTERNAL=board/opendingux</code> Carga un defconfig como la configuraci\u00f3n actual (.config). <code>make menuconfig</code> Configuraci\u00f3n detallada de toda la distribuci\u00f3n Buildroot. <code>make savedefconfig</code> Graba la configuraci\u00f3n actual (<code>.config</code>) en el directorio <code>configs</code>. <code>make BR2_DEFCONFIG=configs/raspi_defconfig savedefconfig</code> Graba la configuraci\u00f3n actual (<code>.config</code>) en el directorio <code>configs</code> forzando el nombre del fichero. <code>make busybox-menuconfig</code> Configuraci\u00f3n detallada de BusyBox. Debe estar activado previamente en <code>System configuration &gt; Init system</code>. El fichero que se edita es <code>output/build/busybox-&lt;version&gt;/.config</code> <code>make uclibc-menuconfig</code> Configuraci\u00f3n detallada de uClibc. Debe estar seleccionada como librer\u00eda C en <code>Toolchain &gt; C library</code>. El fichero que se edita es <code>output/build/uclibc-&lt;version&gt;/.config</code> <code>make linux-menuconfig</code> Configuraci\u00f3n detallada del kernel Linux. El fichero que se edita es <code>output/build/linux-&lt;version&gt;/.config</code> <code>make linux-savedefconfig</code> Graba la configuraci\u00f3n hecha del kernel Linux. <code>make barebox-menuconfig</code> Configuraci\u00f3n detallada del bootloader Barebox. Debe estar seleccionado como bootloader en <code>Bootloaders</code>. <code>make barebox-savedefconfig</code> Graba la configuraci\u00f3n hecha del bootloader Barebox. <code>make uboot-menuconfig</code> Configuraci\u00f3n detallada del bootloader U-Boot. Debe estar seleccionado como bootloader en <code>Bootloaders</code>. <code>make uboot-savedefconfig</code> Graba la configuraci\u00f3n hecha del bootloader U-Boot. <code>make source</code> Descarga todo lo necesario para luego poder hacer una compilaci\u00f3n offline. <code>make toolchain</code> Compila el toolchain. Aparece en el directorio <code>output/host/bin/</code>. Conviene a\u00f1adir esta ruta al PATH si queremos usar el toolchain para compilar programas para el dispositivo target que est\u00e9n fuera de Buildroot. <code>make</code> Compila toda la distribuci\u00f3n Buildroot. <code>make V=1</code> Compila toda la distribuci\u00f3n Buildroot en modo verbose. <code>make help</code> Muestra una lista de todos los targets. <code>make &lt;package&gt;</code> Compila un paquete. <code>make &lt;package&gt;-rebuild</code> Fuerza la recompilaci\u00f3n del paquete. No implica la recreaci\u00f3n de la imagen ni el root filesystem. Para hacerlo ejecutar <code>make</code>. <code>make &lt;package&gt;-reconfigure</code> Fuerza la reconfiguraci\u00f3n y recompilaci\u00f3n del paquete. No implica la recreaci\u00f3n de la imagen ni el root filesystem. Para hacerlo ejecutar <code>make</code>. <code>make &lt;package&gt;-dirclean</code> Borra el directorio <code>output/build/&lt;package&gt;</code> forzando a compilar el paquete en pr\u00f3ximas invocaciones de <code>make</code>. No borra los ficheros copiados al rootfs en <code>output/target</code>. Al forzar la recompilaci\u00f3n se sobreescribir\u00e1n de nuevo, pero si en la nueva compilaci\u00f3n alg\u00fan fichero copiado la primera vez ya no debe ser incluido, permanecer\u00e1, por lo que en esos casos conviene borrar <code>output/target</code> previamente. <code>make clean</code> Borra todo lo compilado anteriormente (incluyendo directorios build, host, staging y target, las im\u00e1genes y el toolchain). Para saber cu\u00e1ndo merece la pena hacer un rebuild, consultar el apartado Understanding when a full rebuild is necessary. <code>make distclean</code> Borra todo lo que no sean fuentes (incluyendo .config). \u00datil cuando se quiere cambiar de placa. <p>Los comandos siguientes se ven afectados por la variable de entorno <code>BR2_GRAPH_OUT</code> que permite ajustar el formato de salida de los gr\u00e1ficos generados a uno de los siguientes valores: ps, pdf, svg, png, gif, jpg.</p> Comando Efecto <code>make graph-depends</code> Genera un gr\u00e1fico del \u00e1rbol de dependencias de toda la distribuci\u00f3n Buildroot. Aparece en <code>output/graphs/graph-depends.pdf</code>. <code>make &lt;package&gt;-graph-depends</code> Genera un gr\u00e1fico del \u00e1rbol de dependencias del paquete. Aparece en <code>output/graph/&lt;pkg&gt;-graph-depends.pdf</code>. <code>make graph-build</code> Genera gr\u00e1ficos de tiempos de compilaci\u00f3n de toda la distribuci\u00f3n Buildroot. Aparecen en <code>output/graphs</code>. <code>make graph-size</code> Genera gr\u00e1ficos de ocupaci\u00f3n en el filesystem de toda la distribuci\u00f3n Buildroot. Aparecen en <code>output/graphs</code>. <p>Aviso</p> <p>Si <code>ccache</code> est\u00e1 activado, <code>make clean</code> o <code>make distclean</code> no borra la cach\u00e9 de compilaci\u00f3n usada por Buildroot. Para borrarla, consultar la secci\u00f3n 8.13.3 de Using ccache in Buildroot.</p>"},{"location":"sistemas/buildroot.html#stamp-files","title":"Stamp files","text":"<p>Cada vez que se compila un package, se generan unos ficheros ocultos que marcan las distintas fases de la compilaci\u00f3n en el directorio <code>output/build/&lt;package&gt;-&lt;version&gt;</code>. Se pueden borrar para provocar la repetici\u00f3n de esas fases, aunque lo habitual es utilizar los comandos <code>make &lt;package&gt;-rebuild</code> o <code>make &lt;package&gt;-reconfigure</code> (de hecho estos comandos precisamente lo que hacen es eliminar estos ficheros stamp). Por ejemplo estos son los ficheros generados en la compilaci\u00f3n del paquete <code>sdl_image</code>:</p> <pre><code>root@04084426cffe:~/git/buildroot-rg350-old-kernel/output/build/sdl2_image-2.0.2# ls -ltra .stamp*\n-rw-r--r-- 1 root root 0 Jun  1 18:50 .stamp_downloaded\n-rw-r--r-- 1 root root 0 Jun  1 18:50 .stamp_extracted\n-rw-r--r-- 1 root root 0 Jun  1 18:50 .stamp_patched\n-rw-r--r-- 1 root root 0 Jun  1 18:50 .stamp_configured\n-rw-r--r-- 1 root root 0 Jun  1 18:50 .stamp_built\n-rw-r--r-- 1 root root 0 Jun  1 18:51 .stamp_staging_installed\n-rw-r--r-- 1 root root 0 Jun  1 18:51 .stamp_target_installed\n</code></pre>"},{"location":"sistemas/buildroot.html#parametros-importantes-del-menuconfig","title":"Par\u00e1metros importantes del menuconfig","text":"<ul> <li><code>Target options</code><ul> <li><code>Target Architecture</code></li> <li><code>Target Architecture Variant</code></li> <li><code>Target ABI</code></li> </ul> </li> <li><code>Build options</code><ul> <li><code>[*] Enable compiler cache</code></li> <li><code>($(HOME)/git/.buildroot-ccache) Compiler cache location</code></li> <li><code>(board/&lt;company&gt;/&lt;model&gt;/patches) global patch directories</code></li> </ul> </li> <li><code>Toolchain</code><ul> <li><code>Toolchain type (Buildroot toolchain)</code></li> <li><code>C library (uClibc-ng)</code><ul> <li><code>Kernel Headers ()</code>: Seleccionar una versi\u00f3n igual o inferior a la del Kernel seleccionado m\u00e1s adelante (lo mejor es que sean iguales para no desaprovechar caracter\u00edsticas del Kernel que se instalar\u00e1)</li> </ul> </li> <li><code>GCC compiler Version ()</code></li> </ul> </li> <li><code>System configuration</code><ul> <li><code>(&lt;hostname&gt;) System hostname</code>: S\u00f3lo con <code>Root FS skeleton (default target skeleton)</code></li> <li><code>(Welcome to &lt;hostname&gt;) System banner</code>: S\u00f3lo con <code>Root FS skeleton (default target skeleton)</code></li> <li><code>/dev management</code>: Documentaci\u00f3n</li> <li><code>Init system</code>: Documentaci\u00f3n</li> <li><code>(&lt;directorio con los ficheros a sustituir&gt;) Root filesystem overlay directories</code></li> <li><code>(&lt;script&gt;) Custom scripts to run before creating filesystem images</code></li> </ul> </li> <li><code>Kernel</code><ul> <li><code>[*] Linux Kernel</code></li> <li><code>Kernel version ()</code></li> <li><code>(&lt;defconfig_name&gt;) Defconfig name</code></li> <li><code>[ ]   Build a Device Tree Blob (DTB)</code>: En RG350 no, en Raspi S\u00ed.</li> </ul> </li> <li><code>Target packages</code><ul> <li><code>-*- BusyBox</code></li> </ul> </li> <li><code>Filesystem images</code><ul> <li><code>[*] ext2/3/4 root filesystem</code></li> <li><code>ext2/3/4 variant (ext4)</code></li> </ul> </li> <li><code>Bootloaders</code>: En RG350 y Raspi no seleccionar ninguno.</li> </ul>"},{"location":"sistemas/buildroot.html#monograficos","title":"Monogr\u00e1ficos","text":""},{"location":"sistemas/buildroot.html#compilacion-de-buildroot-con-toolchain-de-rg350-en-un-contenedor-docker","title":"Compilaci\u00f3n de Buildroot con toolchain de RG350 en un contenedor Docker","text":""},{"location":"sistemas/buildroot.html#ejemplos-de-compilacion-de-algunas-aplicaciones-para-rg350-por-medio-del-toolchain-en-docker","title":"Ejemplos de compilaci\u00f3n de algunas aplicaciones para RG350 por medio del toolchain en Docker","text":""},{"location":"sistemas/docker.html","title":"Docker","text":""},{"location":"sistemas/docker.html#enlaces","title":"Enlaces","text":"<ul> <li>Tutorial</li> <li>Instalaci\u00f3n en Raspberry seg\u00fan uGeek</li> <li>Instalaci\u00f3n en Ubuntu de versi\u00f3n Community Edition</li> <li>JDownloader 2: Download the Internet with Docker!</li> </ul>"},{"location":"sistemas/docker.html#instalacion","title":"Instalaci\u00f3n","text":""},{"location":"sistemas/docker.html#instalacion-de-docker-ce","title":"Instalaci\u00f3n de Docker CE","text":"<pre><code>$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n$ echo \"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n$ sudo apt-get update\n$ sudo apt-get install docker-ce docker-ce-cli containerd.io\n$ sudo systemctl enable docker\n$ sudo systemctl start docker\n$ sudo groupadd docker\n$ sudo usermod -aG docker $USER\n</code></pre> <p>Hay que reiniciar el sistema para que tenga efecto el \u00faltimo comando que a\u00f1ade el usuario al grupo <code>docker</code>.</p>"},{"location":"sistemas/docker.html#instalacion-de-docker-compose","title":"Instalaci\u00f3n de Docker compose","text":"<p>Sustituir la versi\u00f3n por el \u00faltimo tag encontrado en la p\u00e1gina de releases del repositorio. En el momento de escribir esto era la <code>v2.17.1</code>.</p> <pre><code>$ mkdir -p $HOME/.docker/cli-plugins\n$ sudo curl -L \"https://github.com/docker/compose/releases/download/v2.17.1/docker-compose-$(uname -s)-$(uname -m)\" -o $HOME/.docker/cli-plugins/docker-compose\n$ sudo chmod +x $HOME/.docker/cli-plugins/docker-compose\n</code></pre>"},{"location":"sistemas/docker.html#instalacion-portainer","title":"Instalaci\u00f3n Portainer","text":"<p>Cerrar y volver a abrir la consola para que se aplique el \u00faltimo cambio del bloque anterior.</p> <ol> <li> <p>Crear un directorio para almacenar la configuraci\u00f3n:     <pre><code>$ sudo mkdir /etc/config/portainer\n</code></pre></p> </li> <li> <p>Ejecutar el comando:     <pre><code>$ docker run -d --name=Portainer --restart=always -p 9000:9000 -v /etc/config/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n</code></pre></p> </li> </ol>"},{"location":"sistemas/docker.html#comandos","title":"Comandos","text":""},{"location":"sistemas/docker.html#list-docker-cli-commands","title":"List Docker CLI commands","text":"<pre><code>$ docker\n$ docker container --help\n</code></pre>"},{"location":"sistemas/docker.html#display-docker-version-and-info","title":"Display Docker version and info","text":"<pre><code>$ docker --version\n$ docker version\n$ docker info\n</code></pre>"},{"location":"sistemas/docker.html#execute-docker-image","title":"Execute Docker image","text":"<pre><code>$ docker run hello-world\n$ docker run --name mi-couchdb -p 5984:5984 apache/couchdb                       # Ejecuci\u00f3n con log\n$ docker run --name mi-couchdb -d -p 5984:5984 apache/couchdb                    # Ejecuci\u00f3n sin log (modo detached)\n$ docker run --name mi-couchdb --restart=always -d -p 5984:5984 apache/couchdb   # Ejecuci\u00f3n con reinicio si se para o reinicia el servidor\n</code></pre>"},{"location":"sistemas/docker.html#list-docker-images","title":"List Docker images","text":"<pre><code>$ docker image ls\n</code></pre>"},{"location":"sistemas/docker.html#list-docker-containers-running-all-all-in-quiet-mode","title":"List Docker containers (running, all, all in quiet mode)","text":"<pre><code>$ docker container ls\n$ docker container ls --all\n$ docker container ls -aq\n</code></pre>"},{"location":"sistemas/docker.html#varios","title":"Varios","text":"<pre><code>$ docker build -t friendlyhello .                     # Create image using this directory's Dockerfile\n$ docker run -p 4000:80 friendlyhello                 # Run \"friendlyname\" mapping port 4000 to 80\n$ docker run -d -p 4000:80 friendlyhello              # Same thing, but in detached mode\n$ docker container ls                                 # List all running containers\n$ docker container ls -a                              # List all containers, even those not running\n$ docker container logs &lt;hash&gt;                        # Logs\n$ docker container logs -f &lt;hash&gt;                     # Logs en tiempo real\n$ docker container start &lt;hash&gt;                       # Arranca un contenedor\n$ docker container stop &lt;hash&gt;                        # Gracefully stop the specified container\n$ docker container kill &lt;hash&gt;                        # Force shutdown of the specified container\n$ docker container rm &lt;hash&gt;                          # Remove specified container from this machine\n$ docker container rm $(docker container ls -a -q)    # Remove all containers\n$ docker image ls -a                                  # List all images on this machine\n$ docker image rm &lt;image id&gt;                          # Remove specified image from this machine\n$ docker image rm $(docker image ls -a -q)            # Remove all images from this machine\n$ docker login                                        # Log in this CLI session using your Docker credentials\n$ docker tag &lt;image&gt; username/repository:tag          # Tag &lt;image&gt; for upload to registry\n$ docker push username/repository:tag                 # Upload tagged image to registry\n$ docker run username/repository:tag                  # Run image from a registry\n$ docker run -it username/repository:tag              # Run image from a registry in interactive mode\n$ docker exec -it &lt;hash&gt; bash                         # Shell en un contenedor\n$ docker update --restart=always &lt;hash&gt;               # A\u00f1adir opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado\n$ docker update --restart=no &lt;hash&gt;                   # Quitar opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado\n$ docker port &lt;hash&gt;                                  # Muestra el mapeo de puertos del contenedor\n$ docker inspect &lt;hash&gt;                               # Muestra todo el JSON con la configuraci\u00f3n del contenedor\n$ docker volume prune                                 # Borra vol\u00famenes sin uso\n$ docker builder prune                                # Borra build cach\u00e9 de im\u00e1genes\n$ docker system prune -a                              # Borra contenedores parados, networks no usadas, im\u00e1genes no usadas y build cach\u00e9\n</code></pre>"},{"location":"sistemas/docker.html#diferencias-entre-create-start-run-y-exec","title":"Diferencias entre create, start, run y exec","text":"<ul> <li><code>create</code> se ejecuta sobre una imagen. Crea pero no arranca un contenedor en base a una imagen.</li> <li><code>run</code> se ejecuta sobre una imagen. Crea y arranca un contenedor en base a una imagen.</li> <li><code>start</code> se ejecuta sobre un contenedor parado. Arranca el contenedor.</li> <li><code>exec</code> se ejecuta sobre un contenedor arrancado. Ejecuta un proceso en el contenedor.</li> </ul> <p>Algunos ejemplos:</p> <ul> <li><code>docker create --name test-ubuntu ubuntu</code>: Crea un contenedor con una imagen de ubuntu y la nombra <code>test-ubuntu</code>.</li> <li><code>docker run -it --name test-ubuntu ubuntu</code>: Crea un contenedor con una imagen de ubuntu, lo nombra <code>test-ubuntu</code> y la arranca en modo interactivo (devuelve prompt).</li> <li><code>docker run -it --rm --name test-ubuntu ubuntu</code>: Igual que el anterior pero borrando el contenedor al terminar la sesi\u00f3n interactiva.</li> <li><code>docker start -i test-ubuntu</code>: Arranca el contenedor de nombre <code>test-ubuntu</code> en modo interactivo (devuelve prompt). El contenedor debe existir previamente y debe estar parado.</li> <li><code>docker exec -it test-ubuntu /bin/bash</code>: Ejecuta el proceso bash en el contenedor de nombre <code>test-ubuntu</code> que debe estar previamente arrancado.</li> </ul>"},{"location":"sistemas/docker.html#crear-volume-para-persistir-informacion","title":"Crear volume para persistir informaci\u00f3n","text":"<p>Para poder recrear el contenedor sin perder la informaci\u00f3n que haya podido generar, conviene montar los distintos directorios que queremos conservar en vol\u00famenes.</p> <ol> <li> <p>Crear volumen:     <pre><code>$ docker volume create mi_volumen\n</code></pre></p> </li> <li> <p>Posteriormente incluir en el comando de arranque del contenedor <code>-v mi_volumen:ruta_en_contenedor</code> donde <code>ruta_en_contenedor</code> ser\u00e1 la ruta dentro del contenedor que queremos \"delegar\" al volumen.</p> </li> </ol>"},{"location":"sistemas/docker.html#montar-un-contenedor-ubuntu-para-aislar-aplicaciones","title":"Montar un contenedor Ubuntu para aislar aplicaciones","text":"<ol> <li> <p>Creaci\u00f3n contenedor:</p> <pre><code>docker run -it --name test-ubuntu ubuntu\n</code></pre> </li> <li> <p>Arrancar y abrir shell:</p> <pre><code>docker start test-ubuntu\ndocker exec -it test-ubuntu /bin/bash\n</code></pre> </li> <li> <p>Instalar paquetes m\u00ednimos:</p> <pre><code>apt-get update\napt-get install vim sudo\n</code></pre> </li> </ol>"},{"location":"sistemas/docker.html#crear-contenedor-y-subirlo-a-docker-hub","title":"Crear contenedor y subirlo a Docker Hub","text":"<ol> <li>Crear Dockerfile</li> <li>Crear repositorio en Docker hub</li> <li> <p>Iniciar sesi\u00f3n en docker</p> <pre><code>$ docker login\n</code></pre> </li> <li> <p>Compilar imagen y etiquetarla</p> <pre><code>$ docker build -t eduardofilo/rg350_buildroot .\n</code></pre> </li> <li> <p>Subir imagen a repositorio</p> <pre><code>$ docker push eduardofilo/rg350_buildroot\n</code></pre> </li> </ol>"},{"location":"sistemas/docker.html#imagenes-recomendables","title":"Im\u00e1genes recomendables","text":"<ul> <li><code>phusion/baseimage</code>: Para im\u00e1genes basadas en Ubuntu. Documentaci\u00f3n</li> <li>Passenger-docker. Varias im\u00e1genes para servidores de aplicaci\u00f3n Ruby, Python o NodeJS. Consultar documentaci\u00f3n</li> </ul>"},{"location":"sistemas/docker.html#distrobox","title":"Distrobox","text":"<p>Para encapsular sesiones de terminal en distintas distribuciones de Linux, se puede utilizar distrobox. Utiliza por debajo Docker o podman.</p> <p>Se puede instalar desde el gestor de paquetes de la mayor\u00eda de distribuciones de Linux, aunque tambi\u00e9n se puede instalar manualmente.</p> <p>Una vez instalado, para obtener una terminal en una distribuci\u00f3n concreta, se puede ejecutar:</p> <pre><code>$ distrobox create -i ubuntu:20.04\n$ distrobox enter ubuntu-20-04\n</code></pre> <p>Otros comandos \u00fatiles:</p> <ul> <li><code>distrobox list</code>: Listar las sesiones activas.</li> <li><code>distrobox stop ubuntu-20-04</code>: Parar una sesi\u00f3n.</li> <li><code>distrobox start ubuntu-20-04</code>: Arrancar una sesi\u00f3n.</li> <li><code>distrobox rermmove ubuntu-20-04</code>: Eliminar una sesi\u00f3n.</li> </ul>"},{"location":"sistemas/email.html","title":"e-mail","text":""},{"location":"sistemas/email.html#enlaces","title":"Enlaces","text":"<ul> <li>Message header analyzer</li> </ul>"},{"location":"sistemas/email.html#chequeo-de-listas-negras","title":"Chequeo de listas negras","text":"<ul> <li>SPAMHAUS</li> <li>Tren Micro Email Reputation Services</li> <li>MXToolbox</li> <li>multiRBL</li> <li>BlacklistAlert</li> <li>SpamCop</li> <li>WhatIsMyIPAddress</li> </ul>"},{"location":"sistemas/impresoras.html","title":"Impresoras","text":""},{"location":"sistemas/impresoras.html#tipos-de-controladores-impresora","title":"Tipos de controladores impresora","text":"<ul> <li>PS: El controlador de impresora PS resulta id\u00f3neo para imprimir desde software de Adobe Systems y ofrece un rendimiento \u00f3ptimo para imprimir texto y gr\u00e1ficos de alta calidad.</li> <li>PCL: Los controladores de impresora PCL5c, PCL5e y PCL6 se pueden utilizar con la mayor\u00eda de los tipos de software de aplicaciones empresariales. El controlador de impresora PCL5c es para impresoras en color, mientras que los controladores de impresora PCL5e y PCL6 son para impresora en blanco y negro. PCL6 es una versi\u00f3n mejorada de PCL5r y ofrece mayor calidad de impresi\u00f3n y velocidad. Los controladores PCL5e y PCL6 se proporcionan como controladores est\u00e1ndar con las impresoras en blanco y negro.</li> <li>UFR II: Con el controlador de impresora UFR II, las distintas tareas de procesamiento de datos que habitualmente se ejecutan en la impresora se distribuyen de la forma m\u00e1s conveniente entre el PC host y la impresora para reducir considerablemente el tiempo total de impresi\u00f3n. La carga de trabajo se puede delegar para que coincida con los datos de salida, lo que permite un aumento importante en la velocidad mediante esta optimizaci\u00f3n.</li> </ul>"},{"location":"sistemas/iot.html","title":"IOT","text":""},{"location":"sistemas/iot.html#enlaces","title":"Enlaces","text":"<ul> <li>Contiki</li> </ul>"},{"location":"sistemas/kodi.html","title":"Kodi/OpenELEC","text":""},{"location":"sistemas/kodi.html#desactivar-un-canal-de-pelisalacarta","title":"Desactivar un canal de PelisALaCarta","text":"<p>Si durante las b\u00fasquedas, alguno de los canales bloquea el progreso, seguramente habr\u00e1 habido alg\u00fan cambio en el c\u00f3digo del sitio que el plugin no es capaz de interpretar. Habr\u00e1 que esperar a que salga una nueva versi\u00f3n del plugin, pero mientras tanto se puede desactivar ese canal acudiendo a la ruta siguiente:</p> <pre><code>/storage/.kodi/addons/plugin.video.pelisalacarta/channels\n</code></pre> <p>All\u00ed localizamos el archivo .xml correspondiente al canal, lo editamos y ponemos a <code>false</code> la propiedad <code>active</code>.</p>"},{"location":"sistemas/kodi.html#mapeo-de-teclas-del-mando-a-distancia","title":"Mapeo de teclas del mando a distancia","text":"<p>En ocasiones alguna de las teclas del mando deja de funcionar. A mi me ha ocurrido varias veces con la tecla Back. Con el tiempo se soluciona solo (algunas veces reiniciar ayuda pero no siempre). Desconozco el mecanismo que estropea el mapeo de esta tecla, pero la soluci\u00f3n es modificar el fichero <code>/storage/.kodi/userdata/keymaps/remote.xml</code>. En \u00e9l, dentro de la secci\u00f3n <code>&lt;keymap&gt;&lt;global&gt;&lt;remote&gt;</code>, cuando deja de funcionar la tecla back me encuentro:</p> <pre><code>&lt;back&gt;RunScript(special://userdata/keymaps/test.py)&lt;/back&gt;\n</code></pre> <p>La soluci\u00f3n es reponer el valor:</p> <pre><code>&lt;back&gt;Back&lt;/back&gt;\n</code></pre>"},{"location":"sistemas/kodi.html#scrap-manual-de-una-serie","title":"Scrap manual de una serie","text":"<p>Si al intentar forzar el contenido de una carpeta con una serie, no nos localiza la serie y \u00e9sta est\u00e1 dada de alta en TheTVDB (me ocurri\u00f3 por ejemplo con Ram\u00f3n y Cajal), incluir un fichero en la ra\u00edz del directorio de la serie con el nombre <code>tvshow.nfo</code> y el siguiente contenido (fuente):</p> <pre><code>http://thetvdb.com/index.php?tab=series&amp;id=290587\n</code></pre>"},{"location":"sistemas/kodi.html#script-autoarranque-para-reproducir-una-lista","title":"Script autoarranque para reproducir una lista","text":"<p>Situar en la ruta <code>.kodi/userdata/</code> un fichero con el nombre <code>autoexec.py</code>. All\u00ed insertar el c\u00f3digo:</p> <pre><code>import xbmc\n\nplaylist = xbmc.PlayList(xbmc.PLAYLIST_VIDEO)\nplaylist.load('/storage/.kodi/userdata/playlists/video/Africa.m3u')\nxbmc.Player().play(item=playlist)\n</code></pre>"},{"location":"sistemas/kodi.html#emulacion-de-juegos-en-kodi-18","title":"Emulaci\u00f3n de juegos en Kodi 18","text":"<p>Seguir esta gu\u00eda.</p>"},{"location":"sistemas/macosx.html","title":"Mac OS X","text":""},{"location":"sistemas/macosx.html#comandos-utiles","title":"Comandos \u00fatiles","text":"<ul> <li><code>sudo lsof -i -P | grep -i \"listen\"</code>: Puertos abiertos.</li> </ul>"},{"location":"sistemas/mysql.html","title":"MySQL","text":""},{"location":"sistemas/mysql.html#recomendaciones","title":"Recomendaciones","text":"<ul> <li>Utilizar siempre el tipo de dato DOUBLE para los reales (pag. 125 de libro \"Desarrollo Web con PHP 6 y MySQL 5.1\")</li> </ul>"},{"location":"sistemas/mysql.html#instalacion","title":"Instalaci\u00f3n","text":"<p>Instalamos el paquete <code>mysql-server</code>:</p> <pre><code>$ apt-get install mysql-server\n</code></pre> <p>En caso de no haberlo configurado durante la instalaci\u00f3n del paquete, ajustar el password de root con el comando:</p> <pre><code>$ mysql -u root\nmysql&gt; SET PASSWORD FOR 'root'@'localhost\" = PASSWORD('new_password');\n</code></pre> <p>Por defecto s\u00f3lo podemos entrar con el usuario root en local. Para permitir el acceso remoto ejecutar el siguiente comando:</p> <pre><code>$ mysql -u root -p\nmysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION;\nmysql&gt; FLUSH PRIVILEGES;\nmysql&gt; exit\n</code></pre> <p>Tambi\u00e9n hay que permitir las conexiones remotas a nivel de red comentando la siguiente linea del fichero de configuraci\u00f3n <code>/etc/mysql/my.cnf</code>:</p> <pre><code>bind-address = 127.0.0.1\n</code></pre>"},{"location":"sistemas/mysql.html#conexion","title":"Conexi\u00f3n","text":""},{"location":"sistemas/mysql.html#mysql-client","title":"MySQL Client","text":"<pre><code>mysql -u &lt;usuario&gt; -h &lt;host&gt; -P &lt;puerto&gt; &lt;database&gt; -p\n</code></pre> <pre><code>$ mysql -u root -p\nEnter password:\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 89 to server version: 4.1.11-Debian_4-log\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the buffer.\n\nmysql&gt;  \n</code></pre>"},{"location":"sistemas/mysql.html#trabajando-con-bases-de-datos","title":"Trabajando con Bases de Datos","text":""},{"location":"sistemas/mysql.html#creacion-de-bbdd","title":"Creaci\u00f3n de BBDD","text":"<pre><code>mysql&gt; CREATE DATABASE irontec_db;\nQuery OK, 1 row affected (0.03 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#seleccion-de-bbdd","title":"Selecci\u00f3n de BBDD","text":"<p>Cambiar o elegir base de datos a utilizar:</p> <pre><code>mysql&gt; USE irontec_db;\nDatabase changed\n</code></pre> <p>Ver la base de datos seleccionada:</p> <pre><code>mysql&gt; SELECT DATABASE();\n+------------+\n| database() |\n+------------+\n| irontec_db |\n+------------+\n1 row in set (0.00 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#eliminacion-de-bbdd","title":"Eliminaci\u00f3n de BBDD","text":"<pre><code>mysql&gt; DROP DATABASE irontec_db;\nQuery OK, 0 rows affected (0.60 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#eliminacion-de-todas-las-tablas-de-una-bbdd","title":"Eliminaci\u00f3n de todas las tablas de una BBDD","text":"<pre><code>mysqldump -uUSUARIO -pPASSWORD --add-drop-table --no-data BBDD | grep -e '^DROP \\| FOREIGN_KEY_CHECKS' | mysql -uUSUARIO -pPASSWORD BBDD\n</code></pre>"},{"location":"sistemas/mysql.html#trabajando-con-usuarios-privilegios","title":"Trabajando con Usuarios / Privilegios","text":""},{"location":"sistemas/mysql.html#creacion-de-usuarios","title":"Creaci\u00f3n de Usuarios","text":"<p>Primero creamos el usuario:</p> <pre><code>mysql&gt; CREATE USER 'irontec_user_allpriv'@'localhost' IDENTIFIED BY 'irontec_pass';\n</code></pre> <p>Luego otorgamos privilegios:</p> <ul> <li> <p>Con todos los privilegios:</p> <pre><code>mysql&gt; GRANT ALL PRIVILEGES ON irontec_db.* TO irontec_user_allpriv@localhost;\nQuery OK, 0 rows affected (0.14 sec)\n</code></pre> </li> <li> <p>Con privilegios de solo lectura en registros:</p> <pre><code>mysql&gt; GRANT SELECT ON irontec_db.* TO irontec_user_ro@localhost;\nQuery OK, 0 rows affected (0.02 sec)\n</code></pre> </li> <li> <p>Con privilegios de solo inserci\u00f3n o modificaci\u00f3n de registros:</p> <pre><code>mysql&gt; GRANT INSERT,UPDATE on irontec_db.* TO irontec_user_wo@localhost;\nQuery OK, 0 rows affected (0.01 sec)\n</code></pre> </li> </ul>"},{"location":"sistemas/mysql.html#seleccion-de-usuarios","title":"Selecci\u00f3n de Usuarios","text":"<p>Ver el usuario con el que se est\u00e1 trabajando:</p> <pre><code>mysql&gt; SELECT user();\n+------------------------+\n| user()                 |\n+------------------------+\n| irontec_user@localhost |\n+------------------------+\n1 row in set (0.00 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#visualizacion-de-privilegios-de-usuarios","title":"Visualizaci\u00f3n de Privilegios de Usuarios","text":"<pre><code>mysql&gt; show grants for 'irontec_user_allpriv'@'localhost';\n+------------------------------------------------------------------------------------------------+\n| Grants for irontec_user_allpriv@localhost                                                      |\n+------------------------------------------------------------------------------------------------+\n| GRANT USAGE ON *.* TO 'irontec_user_allpriv'@'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' |\n| GRANT ALL PRIVILEGES ON `irontec_db`.* TO 'irontec_user_allpriv'@'localhost'                   |\n+------------------------------------------------------------------------------------------------+\n2 rows in set (0.00 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#eliminacion-de-usuarios","title":"Eliminaci\u00f3n de Usuarios","text":"<pre><code>mysql&gt; REVOKE ALL PRIVILEGES ON irontec_db.* from 'irontec_user_allpriv'@'localhost';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; show grants for 'irontec_user_allpriv'@'localhost';\n+------------------------------------------------------------------------------------------------+\n| Grants for irontec_user_allpriv@localhost                                                      |\n+------------------------------------------------------------------------------------------------+\n| GRANT USAGE ON *.* TO 'irontec_user_allpriv'@'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' |\n+------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nmysql&gt; revoke usage on *.* from 'irontec_user_allpriv'@'localhost';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; drop user 'irontec_user_allpriv'@'localhost';\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#trabajando-con-tablas","title":"Trabajando con Tablas","text":""},{"location":"sistemas/mysql.html#tipos-de-tablas-y-motores-de-almacenamiento","title":"Tipos de Tablas y Motores de Almacenamiento","text":"<p>Referencia manual MySQL</p>"},{"location":"sistemas/mysql.html#tipos-de-campos","title":"Tipos de Campos","text":"<p>Referencia manual MySQL</p>"},{"location":"sistemas/mysql.html#creacion-tablas","title":"Creaci\u00f3n Tablas","text":""},{"location":"sistemas/mysql.html#myisam","title":"MyISAM","text":"<pre><code>mysql&gt; CREATE TABLE clientes (\n  -&gt; id_cliente INT(8) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  -&gt; razon_social VARCHAR (50) NOT NULL,\n  -&gt; domicilio VARCHAR (100) NOT NULL,\n  -&gt; nif VARCHAR (9) NOT NULL,\n  -&gt; contacto VARCHAR (40)\n  -&gt; ) ENGINE=MyISAM;\nQuery OK, 0 rows affected (0.05 sec)\n\nmysql&gt; CREATE TABLE presupuestos (\n  -&gt; id_presupuesto INT(8) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  -&gt; empresa INT(8) NOT NULL,\n  -&gt; asunto VARCHAR (60),\n  -&gt; precio FLOAT DEFAULT 0.0,\n  -&gt; fecha DATE,\n  -&gt; ) ENGINE=MyISAM;\nQuery OK, 0 rows affected (0.20 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#innodb","title":"InnoDB","text":"<pre><code>mysql&gt; CREATE TABLE clientes (\n  -&gt; id_cliente INT(8) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  -&gt; razon_social VARCHAR (50) NOT NULL,\n  -&gt; domicilio VARCHAR (100) NOT NULL,\n  -&gt; nif VARCHAR(9) NOT NULL,\n  -&gt; contacto VARCHAR(40)\n  -&gt; ) ENGINE=InnoDB;\nQuery OK, 0 rows affected (0.10 sec)\n\nmysql&gt; CREATE TABLE presupuestos (\n  -&gt; id_presupuesto INT(8) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  -&gt; empresa INT(8) NOT NULL,\n  -&gt; asunto VARCHAR (60),\n  -&gt; precio FLOAT DEFAULT 0.0,\n  -&gt; fecha DATE,\n  -&gt; index (empresa),\n  -&gt; FOREIGN KEY (empresa) REFERENCES clientes(id_cliente) ON DELETE CASCADE ON UPDATE CASCADE\n  -&gt; ) ENGINE=InnoDB;\nQuery OK, 0 rows affected (0.06 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#visualizacion-tablas","title":"Visualizaci\u00f3n Tablas","text":"<p>Tablas contenidas en una Base de Datos:</p> <pre><code>mysql&gt; show tables;\n+------------------+\n| Tables_in_prueba |\n+------------------+\n| clientes         |\n| presupuestos     |\n+------------------+\n2 rows in set (0.00 sec)\n</code></pre> <p>Estructura de una tabla:</p> <pre><code>mysql&gt; DESC presupuestos;\n+----------------+-------------+------+-----+---------+----------------+\n| Field          | Type        | Null | Key | Default | Extra          |\n+----------------+-------------+------+-----+---------+----------------+\n| id_presupuesto | int(8)      |      | PRI | NULL    | auto_increment |\n| empresa        | varchar(50) |      |     |         |                |\n| asunto         | varchar(60) | YES  |     | NULL    |                |\n| precio         | float       | YES  |     | 0       |                |\n| fecha          | date        | YES  |     | NULL    |                |\n+----------------+-------------+------+-----+---------+----------------+\n5 rows in set (0.01 sec)\n</code></pre> <p>Estado de todas las tablas:</p> <pre><code>mysql&gt; show table status;\n</code></pre>"},{"location":"sistemas/mysql.html#modificacion-tablas","title":"Modificaci\u00f3n Tablas","text":"<p>Referencia manual MySQL</p>"},{"location":"sistemas/mysql.html#anadir-un-nuevo-campo","title":"A\u00f1adir un nuevo campo","text":"<pre><code>mysql&gt; ALTER TABLE [database.]tabla ADD campo_nuevo tipo AFTER campo_viejo;\n</code></pre> <pre><code>mysql&gt; ALTER TABLE presupuestos ADD adjunto BLOB AFTER fecha ;\nQuery OK, 0 rows affected (0.06 sec)\nRegistros: 0  Duplicados: 0  Peligros: 0\n</code></pre>"},{"location":"sistemas/mysql.html#cambiar-el-nombre-de-una-tabla","title":"Cambiar el nombre de una tabla","text":"<pre><code>mysql&gt; ALTER TABLE [database.]tabla RENAME tabla_nueva;\n</code></pre> <pre><code>mysql&gt; ALTER TABLE presupuestos RENAME proyectos;\nQuery OK, 0 rows affected (0.03 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#cambiar-el-tipo-de-dato-de-un-campo","title":"Cambiar el tipo de dato de un campo","text":"<pre><code>mysql&gt; ALTER TABLE [database.]tabla CHANGE campo campo nuevo_tipo;\n</code></pre> <pre><code>mysql&gt; ALTER TABLE presupuestos CHANGE asunto asunto VARCHAR(100);\nQuery OK, 0 rows affected (0.23 sec)\nRegistros: 0  Duplicados: 0  Peligros: 0\n</code></pre>"},{"location":"sistemas/mysql.html#eliminar-un-campo-existente","title":"Eliminar un campo existente","text":"<pre><code>mysql&gt; ALTER TABLE [database.]tabla DROP campo;\n</code></pre> <pre><code>mysql&gt; ALTER TABLE presupuestos DROP adjunto;\nQuery OK, 0 rows affected (0.05 sec)\nRegistros: 0  Duplicados: 0  Peligros: 0\n</code></pre>"},{"location":"sistemas/mysql.html#eliminacion-tablas","title":"Eliminaci\u00f3n Tablas","text":"<pre><code>mysql&gt; DROP TABLE [database.]tabla;\n</code></pre> <pre><code>mysql&gt; DROP TABLE presupuestos;\nQuery OK, 0 rows affected (0.44 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#trabajando-con-registros","title":"Trabajando con Registros","text":"<p>Nota: Si no se indica la Base de Datos a la que una tabla hace referencia, es necesario seleccionar previamente dicha BBDD (<code>use database</code>).</p>"},{"location":"sistemas/mysql.html#consultas","title":"Consultas","text":"<pre><code>mysql&gt; SELECT campo1,campo2,.. FROM [database.]tabla;\n</code></pre> <pre><code>mysql&gt; SELECT * FROM proyectos;\nEmpty set (0.10 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#insercion-de-datos","title":"Inserci\u00f3n de datos","text":"<pre><code>mysql&gt; INSERT INTO [database.]tabla (campo1,campo2,..) VALUES ('valor_campo1','valor_campo2',..);\n</code></pre> <pre><code>mysql&gt; INSERT INTO presupuestos (empresa,asunto,precio,fecha) VALUES ('UPV','Formaci\u00f3n GNU/Linux','600','2005-07-01');\nQuery OK, 1 row affected (0.00 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#modificacion-de-datos","title":"Modificaci\u00f3n de datos","text":"<pre><code>mysql&gt; UPDATE [database.]tabla SET campo1='valor_nuevo_campo1',campo2='valor_nuevo_campo2' WHERE condici\u00f3n;\n</code></pre> <pre><code>mysql&gt; UPDATE presupuestos SET empresa='UPV/EHU' WHERE empresa='UPV';\n</code></pre>"},{"location":"sistemas/mysql.html#eliminacion-de-datos","title":"Eliminaci\u00f3n de datos","text":"<pre><code>mysql&gt; DELETE FROM [database.]tabla WHERE condici\u00f3n;\n</code></pre> <pre><code>mysql&gt; DELETE FROM presupuestos WHERE id='1';\nQuery OK, 1 row affected (0.04 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#trabajando-con-mysql","title":"Trabajando con MySQL","text":""},{"location":"sistemas/mysql.html#variables-de-sistema","title":"Variables de Sistema","text":"<p>Ver variables de sistema:</p> <pre><code>mysql&gt; SHOW VARIABLES;\n+---------------------------------+----------------------------------------------------------+\n| Variable_name                   | Value                                                    |\n+---------------------------------+----------------------------------------------------------+\n| back_log                        | 50                                                       |\n| basedir                         | /usr/                                                    |\n| bdb_cache_size                  | 8388600                                                  |\n| bdb_home                        | /var/lib/mysql/                                          |\n| bdb_log_buffer_size             | 32768                                                    |\n| bdb_logdir                      |                                                          |\n| bdb_max_lock                    | 10000                                                    |\n| bdb_shared_data                 | OFF                                                      |\n| bdb_tmpdir                      | /tmp/                                                    |\n| binlog_cache_size               | 32768                                                    |\n..............................................................................................\n| version                         | 4.1.11-Debian_4-log                                      |\n| version_bdb                     | Sleepycat Software: Berkeley DB 4.1.24: (April  1, 2005) |\n| version_comment                 | Source distribution                                      |\n| version_compile_machine         | i386                                                     |\n| version_compile_os              | pc-linux-gnu                                             |\n| wait_timeout                    | 28800                                                    |\n+---------------------------------+----------------------------------------------------------+\n196 rows in set (0.01 sec)\n</code></pre>"},{"location":"sistemas/mysql.html#configuracion","title":"Configuraci\u00f3n","text":"<p><code>/etc/mysql/my.cnf</code></p>"},{"location":"sistemas/mysql.html#tablas-innodb-por-defecto","title":"Tablas InnoDB por defecto","text":"<pre><code>[mysqld]\ndefault-table-type=innodb\n</code></pre>"},{"location":"sistemas/mysql.html#localizacion","title":"Localizaci\u00f3n","text":"<pre><code>[mysqld]\nlanguage  = /usr/share/mysql/spanish\n</code></pre>"},{"location":"sistemas/mysql.html#utf8-por-defecto","title":"UTF8 por defecto","text":"<p>Como cabrea tener bases de datos en latin1 y cosas as\u00ed que siempre dan problemas al cambiarlas de servidor o de versi\u00f3n de BDD, o con los programas. Cuando aprendes eso empiezas a configurar todo en UTF8, el apache, el mysql, las locales del sistema, etc...</p> <p>Y cada vez que creas una BDD en mysql este se empe\u00f1a en ponerte \"latin1\" o \"unicode_swedish_ci\" \u00bfSwedish? \u00bfQue es esto? \u00bfUn rollo chovinista?</p> <p>Despu\u00e9s para cada tabla, incomprensiblemente, tambi\u00e9n tienes que especificar que es \"utf8_unicode_ci\".</p> <p>Para evitar esto lo que podemos hacer es configurar mysql a\u00f1adiendo estas l\u00edneas en la secci\u00f3n [mysqld] de <code>/etc/mysql/my.cnf</code>:</p> <pre><code># UTF8:\nskip-character-set-client-handshake\ncollation_server=utf8_unicode_ci\ncharacter_set_server=utf8\n</code></pre> <p>Si despu\u00e9s pedimos un status:</p> <pre><code>mysql&gt; status\n--------------\nmysql  Ver 14.12 Distrib 5.0.51a, for debian-linux-gnu (x86_64) using readline 5.2\n\nConnection id:          31\nCurrent database:\nCurrent user:           root@localhost\nSSL:                    Not in use\nCurrent pager:          stdout\nUsing outfile:          `\nUsing delimiter:        ;\nServer version:         5.0.51a-24+lenny2 (Debian)\nProtocol version:       10\nConnection:             Localhost via UNIX socket\nServer characterset:    utf8\nDb     characterset:    utf8\nClient characterset:    utf8\nConn.  characterset:    utf8\nUNIX socket:            /var/run/mysqld/mysqld.sock\nUptime:                 11 min 21 sec\n\nThreads: 1  Questions: 86  Slow queries: 0  Opens: 23  Flush tables: 1  Open tables: 17  Queries per second avg: 0.126\n--------------\n</code></pre> <p>Ahora si, ya podemos dormir tranquilos.</p>"},{"location":"sistemas/mysql.html#backups","title":"Backups","text":""},{"location":"sistemas/mysql.html#mysqldump","title":"mysqldump","text":"<p>Programa inclu\u00eddo en el paquete <code>mysql-client</code></p> <p>Referencia manual MySQL</p> <p>Backup de todas las bases de datos:</p> <pre><code>$ mysqldump --opt -d -h host --all-databases --user=root --password=contrase\u00f1a &gt; backup_irontec_mysql.sql\n</code></pre> <p>Para cargar un backup hecho previamente:</p> <pre><code>$ mysql -h host --user=root --password=contrase\u00f1a &lt; backup_irontec_mysql.sql\n</code></pre> <p>Backup de una base de datos (<code>database</code>):</p> <pre><code>$ mysqldump --opt -d -h host --user=root --password=contrase\u00f1a database &gt; backup_irontec_mysql.sql\n</code></pre> <p>Backup de una lista de tablas (<code>t1</code>, <code>t2</code>) de una base de datos (<code>database</code>):</p> <pre><code>$ mysqldump --opt -d -h host --user=root --password=contrase\u00f1a database t1 t2 &gt; backup_irontec_mysql.sql\n</code></pre> <p>Para cargar un backup hecho previamente sobre una base de datos concreta:</p> <pre><code>$ mysql -h host --user=root --password=contrase\u00f1a database &lt; backup_irontec_mysql.sql\n</code></pre> <p>Si se quita la opci\u00f3n <code>-d</code> en el volcado se incluir\u00e1n los datos que contengan las tablas. Para tablas muy grandes, para evitar los bloqueos que se producen durante su respaldo, a\u00f1adir la opci\u00f3n <code>--single-transaction</code>.</p>"},{"location":"sistemas/mysql.html#bcps","title":"BCPs","text":"<p>El comando equivalente al <code>bcp</code> de otros gestores es <code>mysqlimport</code>. Aqu\u00ed est\u00e1 la p\u00e1gina de ayuda del comando.</p> <p>Un ejemplo de uso ser\u00eda:</p> <pre><code>$ mysqlimport -h localhost -u adw -p -v -L --delete adw keywords.csv\n</code></pre> <p>Para que no de errores hay que guardar el fichero en formato UTF8 (revisar con el comando <code>od -c fichero.csv</code> si no hay caracteres extra\u00f1os al principio). Por defecto se espera el car\u00e1cter TAB como separador de columnas y el retorno de carro como separador de registros. El fichero ser\u00e1 un CSV con las columnas en el mismo orden que la tabla en que se desea cargar los datos. El nombre del fichero sin extensi\u00f3n se debe corresponder con el nombre de la tabla. En el ejemplo anterior, la tabla ser\u00eda <code>keywords</code>.</p> <p>Para indicar un separador de campos y registros diferentes se pueden usar las opciones siguientes (ver man):</p> <pre><code>--fields-terminated-by=..., --fields-enclosed-by=..., --fields-optionally-enclosed-by=..., --fields-escaped-by=..\n</code></pre> <p>El mismo efecto se consigue con la siguiente query:</p> <pre><code>LOAD DATA LOCAL INFILE 'keywords_clean.csv'\nINTO TABLE keywords\nFIELDS\n  TERMINATED BY ','\n  ENCLOSED BY '\\\"';\n</code></pre> <p>Para que el cliente acepte la opci\u00f3n <code>LOCAL</code> debe ser ejecutado con la opci\u00f3n <code>--local-infile</code>, por ejemplo:</p> <pre><code>$ mysql -h localhost --local-infile -u adw -p adw\n</code></pre>"},{"location":"sistemas/mysql.html#otras-herramientas","title":"Otras Herramientas","text":""},{"location":"sistemas/mysql.html#mysqladmin","title":"mysqladmin","text":"<p>Para cambiar la contrase\u00f1a del usuario root:</p> <pre><code>$ mysqladmin -u root password `&lt;nueva_password&gt;`\n</code></pre> <p>Muestra las variables del gestor:</p> <pre><code>$ mysqladmin -u root -p variables\n</code></pre>"},{"location":"sistemas/mysql.html#solucion-de-problemas","title":"Soluci\u00f3n de problemas","text":""},{"location":"sistemas/mysql.html#tabla-de-schrodinger","title":"Tabla de Schr\u00f6dinger","text":"<p>La \u00fanica forma de solucionar un caso de tablas de Schr\u00f6dingers fue purgando la instalaci\u00f3n de MySQL y borrando el directorio de datos:</p> <pre><code>$ sudo dpkg --purge mysql-server-5.5 mysql-server-core-5.5 mysql-server\n$ sudo mv /var/lib/mysql /var/lib/mysql.bak\n$ sudo apt-get install mysql-server-5.5 mysql-server-core-5.5 mysql-server\n</code></pre> <p>Otra forma menos agresiva fue encontrada aqu\u00ed y consiste en borrar los ficheros siguientes con el servidor parado y luego arrancarlo:</p> <pre><code>$ sudo service mysql stop\n$ sudo rm /var/lib/mysql/ibdata1\n$ sudo rm /var/lib/mysql/ib_logfile0\n$ sudo rm /var/lib/mysql/ib_logfile1\n$ sudo service mysql start\n</code></pre> <p>La \u00faltima vez que sucedi\u00f3 borr\u00e9 todas las tablas. Ver si borrando estos ficheros en cuanto ocurre se restituyen todas las tablas.</p>"},{"location":"sistemas/mysql.html#informacion-en-error","title":"Informaci\u00f3n en error","text":"<p>Para tener m\u00e1s informaci\u00f3n de un error, si es sobre tablas InnoDB, se puede lanzar el siguiente comando:</p> <pre><code>SHOW ENGINE INNODB STATUS;\n</code></pre> <p>Concretamente la secci\u00f3n <code>LATEST FOREIGN KEY ERROR</code> muestra m\u00e1s detalle en los errores relacionados con foreign keys.</p>"},{"location":"sistemas/nas.html","title":"NAS","text":""},{"location":"sistemas/nas.html#enlaces","title":"Enlaces","text":"<ul> <li>Instalaci\u00f3n de Dokuwiki en ReadyNAS Duo</li> <li>Montaje de los discos del ReadyNAS Duo con Linux</li> </ul>"},{"location":"sistemas/oculus.html","title":"Oculus Quest 2","text":""},{"location":"sistemas/oculus.html#enlaces","title":"Enlaces","text":"<ul> <li>BMBF - Beat Saber Modding Group</li> <li>Lentes graduadas: Alrededor de 27\u20ac</li> </ul>"},{"location":"sistemas/odroid.html","title":"ODROID","text":""},{"location":"sistemas/odroid.html#enlaces","title":"Enlaces","text":""},{"location":"sistemas/odroid.html#varios","title":"Varios","text":"<ul> <li>ODROID Magazine</li> <li>ODROID Wiki</li> <li>ODROID.in: Im\u00e1genes de distintos sistemas.</li> </ul>"},{"location":"sistemas/odroid.html#hardware","title":"Hardware","text":"<ul> <li>2.5 mm x 0.8 mm USB Charger Universal Cable Main Power Supply</li> <li>Generic PB20517 - Cargador (2 A, Negro)</li> <li>NorthPad Universal 2,5x0,8mm Europa Adaptador AC Cargador 5V 3A</li> <li>HDMI Femenino Enchufe A Micro HDMI Masculino Clavija Adaptador Para HDMI Cables</li> </ul>"},{"location":"sistemas/odroid.html#comandos-utiles","title":"Comandos \u00fatiles","text":""},{"location":"sistemas/odroid.html#utilidad-de-configuracion","title":"Utilidad de configuraci\u00f3n","text":"<pre><code>$ sudo odroid-utility.sh\n</code></pre>"},{"location":"sistemas/odroid.html#flasheo-de-imagen-ubuntu-oficial","title":"Flasheo de imagen Ubuntu oficial","text":"<pre><code>$ xzcat ubuntu-14.04.1lts-lubuntu-odroid-c1-20141211.img.xz | sudo dd of=/dev/mmcblk0 bs=2M\n</code></pre>"},{"location":"sistemas/odroid.html#backup-de-la-sd-comprimiendo-al-vuelo","title":"Backup de la SD (comprimiendo al vuelo)","text":"<pre><code>$ #Backup:\n$ sudo dd if=/dev/mmcblk0 bs=2M | gzip -9 - &gt; odroid_8gb_backup.img.gz\n$ #Restauraci\u00f3n:\n$ gunzip odroid_8gb_backup.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M\n</code></pre>"},{"location":"sistemas/odroid.html#control-de-progreso-durante-flasheo","title":"Control de progreso durante flasheo","text":"<pre><code>$ sudo pkill -USR1 -n -x dd\n</code></pre>"},{"location":"sistemas/office.html","title":"Trucos sobre Office","text":""},{"location":"sistemas/office.html#interpolar-una-tabla-de-valores","title":"Interpolar una tabla de valores","text":"<p>Existen varias formas para poder interpolar, una de ellas es utilizando el polinomio de Lagrange, debes buscarlo en un buen libro de m\u00e9todos num\u00e9ricos, incluso puede que encuentres algun programa que interpole en el mismo libro. La soluci\u00f3n mas f\u00e1cil es que utilizar Excel o algun programa de hojas de calculo. Una vez que tengas tu tabla de datos, haz click en el asistente de gr\u00e1ficos y elige el modo de dispersi\u00f3n, despu\u00e9s sigue los pasos. Cuando ya tengas la gr\u00e1fica da un click secundario en la curva que obtuviste y elige \"agregar linea de tendencia\" aqui elige la opci\u00f3n de gr\u00e1fica que quieras ajustar y con esta podr\u00e1s interpolar muy facilmente ya que te da la ecuacion si tu quieres, o puedes interpolar directamente con la curva que obtuviste, de hecho es la manera mas r\u00e1pida de interpolar, a trav\u00e9s de una curva.</p>"},{"location":"sistemas/office.html#modulo-de-compatibilidad-de-office-2010","title":"M\u00f3dulo de compatibilidad de Office 2010","text":"<p>Para poder abrir/editar documentos OpenXML en Office 2007 y anteriores, instalar el m\u00f3dulo de compatibilidad de Office 2007.</p>"},{"location":"sistemas/raspi.html","title":"Raspberry Pi","text":""},{"location":"sistemas/raspi.html#enlaces","title":"Enlaces","text":""},{"location":"sistemas/raspi.html#varios","title":"Varios","text":"<ul> <li>Gesti\u00f3n usuarios</li> <li>IP Est\u00e1tica</li> <li>Instalaci\u00f3n cliente NO-IP</li> <li>Ultimate Raspberry Pi Configuration Guide</li> <li>GitPi: A Private Git Server on Raspberry Pi</li> <li>PiKISS para Raspberry Pi: Un pu\u00f1ado de scripts con men\u00fa para hacerte la vida m\u00e1s f\u00e1cil</li> <li>Java JDK para ARM</li> <li>Cylon.js para Raspberry Pi</li> <li>BerryBoot: Men\u00fa de arranque que permite arrancar varios sistemas instalados en la propia SD, en un disco duro/pendrive externo o en un almacenamiento en red (NAS).</li> <li>An A to Z Beginners Guide to Installing RetroPie on a Raspberry Pi</li> <li>How to install Oracle Java 8 in Debian via repository (JDK8)</li> <li>Adafruit - Learn Raspberry Pi</li> <li>Tutorials - The MagPi MagazineThe MagPi Magazine</li> <li>Read-Only Raspberry Pi</li> <li>Read-only Raspberry PI with Jessie</li> <li>Raspberry Pi Turnkey: Sistema para gestionar la conexi\u00f3n a un punto de acceso cuando no hay posibilidad de conectar por SSH o consola (pantalla+teclado) para modificar el <code>wpa_supplicant</code>.</li> <li>Im\u00e1genes berryboot</li> <li>Im\u00e1genes Raspbian:<ul> <li>Normal</li> <li>Lite</li> </ul> </li> </ul>"},{"location":"sistemas/raspi.html#distribuciones","title":"Distribuciones","text":"<ul> <li>Binary Emotions Slideshow: Slideshow de im\u00e1genes/v\u00eddeos.</li> <li>Binary Emotions Digital Signage: Slideshow de p\u00e1ginas web.</li> <li>DietPi - Lightweight justice for your SBC</li> <li>Flint OS: Versi\u00f3n de ChromeOS con soporte Android.</li> <li>PiMAME: Raspbian con un frontend para lanzar emuladores.</li> <li>Lakka: Lakka is a lightweight Linux distribution that transforms a credit card sized computer into a full blown emulation console.</li> <li>RetroPie</li> <li>batocera.linux: Para construir Recalbox.</li> </ul>"},{"location":"sistemas/raspi.html#software","title":"Software","text":"<ul> <li>Pi-Hole: DNS que filtra dominios marcados por la comunidad como \"molestos\" y conseguiremos una navegaci\u00f3n mas limpia y r\u00e1pida.</li> <li>PiVPN</li> </ul>"},{"location":"sistemas/raspi.html#hardware","title":"Hardware","text":"<ul> <li>Lista de hardware verificado</li> <li>Lista de compatibilidad de SDs</li> <li>Quick2Wire</li> <li>ESP8266 Serial Esp- 01: M\u00f3dulo Wifi por 2,25\u20ac recomendado por Fernando. Listado de recursos. Tutorial conexi\u00f3n a Raspi.</li> <li>TK2050 50W+50W Dual Channel Class T HIFI Stereo Audio Amplifier Board DC12V 24V: Recomendado por Fernando Oroquieta.</li> <li>Using a Console Cable</li> <li>Adaptador Wifi (RTL8188CUS)</li> <li>Adaptador TDT Conceptronic C08-096 (RTL2832)</li> <li>Receptor infrarrojos</li> <li>TP4056 DIY 1A Micro USB Li-Ion Battery Charging Board Charger Module: Cargador de bater\u00eda.</li> <li>PowerBoost 500 Charger - Rechargeable 5V Lipo USB Boost: Alimentaci\u00f3n ininterrumpida con bater\u00eda y gestor de carga.</li> <li>UA0053 ADAPTADOR LOGILINK USB 2.0 AUDIO 5.1: Adaptador audio USB.</li> <li>2-Channel 3W PAM8403 Audio Amplifier Board: Amplificador audio 3W.</li> <li>Stereo 2.8W Class D Audio Amplifier - I2C Control AGC: Amplificador audio 2.8W con control I2C.</li> <li>Raspberry Pi Pinout: The comprehensive GPIO Pinout guide for the Raspberry Pi.</li> </ul>"},{"location":"sistemas/raspi.html#comandos-utiles","title":"Comandos \u00fatiles","text":""},{"location":"sistemas/raspi.html#comprobar-asignaciones-de-cliente-no-ip","title":"Comprobar asignaciones de cliente No-IP","text":"<p>Las asignaciones dejan marca en el log <code>syslog</code>:</p> <pre><code>edumoreno@raspi-git /var/log $ sudo fgrep noip syslog\nOct 16 12:18:57 raspi-git noip2[2165]: v2.1.9 daemon ended.\nOct 16 12:19:19 raspi-git noip2[2186]: v2.1.9 daemon started with NAT enabled\nOct 16 12:19:35 raspi-git noip2[2186]: eduardofilo.no-ip.biz set to 88.19.216.95\nOct 16 12:53:06 raspi-git noip2[2186]: v2.1.9 daemon ended.\nOct 16 13:15:23 raspi-git noip2[2217]: v2.1.9 daemon started with NAT enabled\nOct 16 13:15:25 raspi-git noip2[2217]: eduardofilo.no-ip.biz was already set to 88.19.216.95.\n</code></pre>"},{"location":"sistemas/raspi.html#utilidad-de-configuracion","title":"Utilidad de configuraci\u00f3n","text":"<pre><code>$ sudo raspi-config\n</code></pre>"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo","title":"Backup de la SD (comprimiendo al vuelo)","text":"<pre><code>$ #Backup:\n$ sudo dd if=/dev/mmcblk0 bs=2M status=progress | gzip -9 - &gt; Rpi_8gb_backup.img.gz\n$ #Backup s\u00f3lo de 4GB (si por ejemplo la tarjeta es m\u00e1s grande pero no aprovecha toda la superficie)\n$ sudo dd if=/dev/mmcblk0 bs=2M count=2048 | pv -s 4g | gzip -9 - &gt; Rpi_4gb_backup.img.gz\n$ #Restauraci\u00f3n (comprimido con gzip):\n$ gunzip Rpi_8gb_backup.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n$ #Restauraci\u00f3n (comprimido con xz):\n$ xzcat Rpi_8gb_backup.img.xz | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n$ #Restauraci\u00f3n (comprimido con zip):\n$ unzip -p Rpi_8gb_backup.zip | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n$ #Restauraci\u00f3n (comprimido con 7z):\n$ 7z e -so Rpi_8gb_backup.7z | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n$ #Restauraci\u00f3n (comprimido con rar):\n$ rar p Rpi_8gb_backup.rar -idq | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n</code></pre> <p>Para hacer un backup parcial los c\u00e1lculos se har\u00edan as\u00ed. Primero sacamos los datos de la estructura de la tarjeta con <code>fdisk</code>:</p> <pre><code>$ sudo fdisk -l /dev/mmcblk0\nDisco /dev/mmcblk0: 14,4 GiB, 15502147584 bytes, 30277632 sectores\nUnidades: sectores de 1 * 512 = 512 bytes\nTama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes\nTama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes\nTipo de etiqueta de disco: dos\nIdentificador del disco: 0xa125a0dc\n\nDispositivo    Inicio Comienzo    Final Sectores Tama\u00f1o Id Tipo\n/dev/mmcblk0p1            8192    96663    88472  43,2M  c W95 FAT32 (LBA)\n/dev/mmcblk0p2           98304 15550463 15452160   7,4G 83 Linux\n</code></pre> <p>Aqu\u00ed vemos que cada sector ocupa 512 bytes. Nos fijamos en el \u00faltimo sector utilizado que en este caso es 15550463. Multiplicando este sector por el tama\u00f1o del sector (y sumando 1 al n\u00famero de sectores por si empiezan a contar en 0) obtendremos el n\u00famero de bytes que tendremos que copiar. Como el block size que vamos a utilizar es 2MB tendremos que truncar por lo alto (tambi\u00e9n servir\u00e1 de medida de seguidad). Los c\u00e1lculos en este caso resultar\u00edan:</p> <pre><code>(15550463 + 1) (sector) * 512 (Byte/sector) / 1024 (Byte/KB) / 1024 (KB/MB) / 2 (MB/bloque) = 3796,5 bloques\n</code></pre> <p>Por tanto en este caso copiaremos 3797 bloques para cubrir esos 15550464 sectores.</p>"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-con-gzip-y-diviendo-en-trozos-el-fichero-resultante","title":"Backup de la SD (comprimiendo al vuelo con gzip y diviendo en trozos el fichero resultante)","text":"<pre><code>$ #Backup:\n$ sudo dd if=/dev/mmcblk0 bs=2M status=progress | gzip -9 - | split --bytes=2G - Rpi_8gb_backup.img.gz.part_\n$ #Restauraci\u00f3n:\n$ cat Rpi_8gb_backup.img.gz.part_* | gunzip -c | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n</code></pre>"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-con-7z-y-diviendo-en-trozos-el-fichero-resultante","title":"Backup de la SD (comprimiendo al vuelo con 7z y diviendo en trozos el fichero resultante)","text":"<pre><code>$ #Backup:\n$ sudo dd if=/dev/mmcblk0 bs=2M count=7350 status=progress | 7z -si -v1400m a Rpi_8gb_backup.img.7z\n$ #Restauraci\u00f3n:\n$ 7z e -so Rpi_8gb_backup.7z.001 | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n</code></pre>"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-con-rar-y-diviendo-en-trozos-el-fichero-resultante","title":"Backup de la SD (comprimiendo al vuelo con rar y diviendo en trozos el fichero resultante)","text":"<pre><code>$ #Backup:\n$ sudo dd if=/dev/mmcblk0 bs=2M count=7350 status=progress | rar a -m5 -sRpi_8gb_backup.img -v1400000k Rpi_8gb_backup.img.rar\n$ #Restauraci\u00f3n:\n$ rar p Rpi_8gb_backup.img.part1.rar -idq | sudo dd of=/dev/mmcblk0 bs=2M status=progress conv=fsync\n</code></pre>"},{"location":"sistemas/raspi.html#control-de-progreso-durante-flasheo","title":"Control de progreso durante flasheo","text":"<pre><code>$ sudo pkill -USR1 -n -x dd\n</code></pre> <p>Como alternativa se puede instalar el comando <code>dcfldd</code> para sustituir a <code>dd</code>, con lo que obtendremos una indicaci\u00f3n del progreso de la copia. <code>dcfldd</code> informa cada 256 bloques escritos por defecto. Para que lo haga con m\u00e1s frecuencia hay que pasarle la opci\u00f3n <code>statusinterval</code> de esta forma:</p> <pre><code>$ #Backup:\n$ sudo dcfldd statusinterval=10 if=/dev/mmcblk0 bs=2M | gzip -9 - &gt; Rpi_8gb_backup.img.gz\n</code></pre>"},{"location":"sistemas/raspi.html#redimensionar-particiones-en-imagen","title":"Redimensionar particiones en imagen","text":"<p>Fuente: Apartado Resizing a partition within an image file en Shrinking Raspberry Pi SD Card Images.</p> <ol> <li> <p>Obtenemos los par\u00e1metros de las particiones de la imagen:</p> <pre><code>$ sudo fdisk -l Octoprint_niubit.img\nDisco Octoprint_niubit.img: 7,5 GiB, 8010072064 bytes, 15644672 sectores\nUnidades: sectores de 1 * 512 = 512 bytes\nTama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes\nTama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes\nTipo de etiqueta de disco: dos\nIdentificador del disco: 0x15f1d664\n\nDispositivo           Inicio Comienzo    Final Sectores Tama\u00f1o Id Tipo\nOctoprint_niubit.img1            8192    98045    89854  43,9M  c W95 FAT32 (LBA)\nOctoprint_niubit.img2           98304 15644671 15546368   7,4G 83 Linux\n</code></pre> </li> <li> <p>Localizamos el primer dispositivo loop libre:</p> <pre><code>$ ls -l /dev/loop*\n</code></pre> </li> <li> <p>Conectamos la partici\u00f3n que queremos redimensionar con el primer dispositivo loop libre aplicando un offset en base al sector de comienzo de la partici\u00f3n que queremos encoger (<code>98304</code> en este ejemplo):</p> <pre><code>$ sudo losetup /dev/loop12 Octoprint_niubit.img -o $((98304*512))\n</code></pre> </li> <li> <p>Montamos la partici\u00f3n en el sistema de archivos para hacer limpieza (por ejemplo <code>/var/cache/apt/archives</code>) y desmontamos al final.</p> </li> <li> <p>Editamos la partici\u00f3n con <code>gparted</code> y la encogemos todo lo posible:</p> <pre><code>$ sudo gparted /dev/loop12\n</code></pre> </li> <li> <p>Aunque hemos encogido la partici\u00f3n, en la tabla de asignaci\u00f3n de la imagen continuar\u00e1 con el antiguo tama\u00f1o, motivo por el que <code>gparted</code> muestra un icono de aviso. Lo solucionaremos a continuaci\u00f3n. Tomamos nota del tama\u00f1o final en KB que se ha dado a la partici\u00f3n fij\u00e1ndonos en el comando <code>resize2fs</code> que <code>gparted</code> ha ejecutado mirando los detalles al finalizar la operaci\u00f3n anterior. Por ejemplo:</p> <pre><code>resize2fs -p '/dev/loop12' 3250176K\n</code></pre> </li> <li> <p>Eliminar el dispositivo loop que hemos estado utilizando:</p> <pre><code>$ sudo losetup -d /dev/loop12\n</code></pre> </li> <li> <p>Conectar ahora la imagen completa de nuevo al dispositivo loop:</p> <pre><code>$ sudo losetup /dev/loop12 Octoprint_niubit.img\n</code></pre> </li> <li> <p>Editamos con <code>fdisk</code> la imagen:</p> <pre><code>sudo fdisk /dev/loop12\n</code></pre> </li> <li> <p>Borramos la partici\u00f3n que hemos redimensionado pulsando <code>d 2</code>.</p> </li> <li>Creamos de nuevo la partici\u00f3n pulsando <code>n p 2</code>. Nos pedir\u00e1 el primer sector. Introduciremos el obtenido en el paso 1 (<code>98304</code> en este ejemplo). A continuaci\u00f3n nos pedir\u00e1 el tama\u00f1o. Introduciremos el obtenido en el paso 6 con un <code>+</code> delante (<code>+3250176K</code> en este ejemplo). Si nos pregunta en ese momento <code>\u00bfDesea eliminar la firma?</code> respondemos <code>No</code>. Finalmente pulsamos <code>w</code> para registrar los cambios.</li> <li> <p>Volvemos a obtener los par\u00e1metros de las particiones de la imagen:</p> <pre><code>$ sudo fdisk -l Octoprint_niubit.img\nDisco Octoprint_niubit.img: 7,5 GiB, 8010072064 bytes, 15644672 sectores\nUnidades: sectores de 1 * 512 = 512 bytes\nTama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes\nTama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes\nTipo de etiqueta de disco: dos\nIdentificador del disco: 0x15f1d664\n\nDispositivo           Inicio Comienzo   Final Sectores Tama\u00f1o Id Tipo\nOctoprint_niubit.img1            8192   98045    89854  43,9M  c W95 FAT32 (LBA)\nOctoprint_niubit.img2           98304 6598655  6500352   3,1G 83 Linux\n</code></pre> </li> <li> <p>Tomamos nota del sector final de la segunda partici\u00f3n (<code>6598655</code> en este ejemplo).</p> </li> <li> <p>Eliminamos el dispositivo loop que hemos utilizado:</p> <pre><code>$ sudo losetup -d /dev/loop12\n</code></pre> </li> <li> <p>Truncamos la imagen para retirar la parte que ya no est\u00e1 cubierta por la partici\u00f3n que hemos encogido:</p> <pre><code>$ truncate -s $(((6598655+1)*512)) Octoprint_niubit.img\n</code></pre> </li> <li> <p>Ya habr\u00edamos terminado, pero todav\u00eda se puede mejorar la imagen rellenando con ceros los sectores no utilizados. Para ello proceder como sigue (sustituyendo el sector de comienzo <code>98304</code> del ejemplo por el que corresponda):</p> <pre><code>$ sudo losetup /dev/loop12 Octoprint_niubit.img -o $((98304*512))\n$ sudo mkdir -p /mnt/imageroot\n$ sudo mount /dev/loop12 /mnt/imageroot\n$ sudo dd if=/dev/zero of=/mnt/imageroot/zero.txt status=progress\n$ sudo rm /mnt/imageroot/zero.txt\n$ sudo umount /mnt/imageroot\n$ sudo rmdir /mnt/imageroot\n$ sudo losetup -d /dev/loop12\n</code></pre> </li> </ol> <p>Ya tenemos lista la imagen para poderla flashear sobre tarjetas. Si la comprimimos con <code>gzip</code> se comprimir\u00e1 mejor si hemos realizado el paso final.</p> <p>Existen estas dos utilidades para automatizar este proceso:</p> <ul> <li>PiShrink</li> <li>cotswoldjam</li> </ul>"},{"location":"sistemas/raspi.html#gestion-de-la-swap","title":"Gesti\u00f3n de la SWAP","text":"<p>Para redimensionar la Swap predeterminada (fichero de 100MB en <code>/var/swap</code>):</p> <pre><code>$ sudo nano /etc/dphys-swapfile\n$ sudo dphys-swapfile setup\n$ sudo dphys-swapfile swapon\n</code></pre> <p>Para consultar el estado de la swap:</p> <pre><code>$ swapon -s\n</code></pre> <p>Para dejar de usar swap:</p> <pre><code>$ sudo swapoff -a\n</code></pre> <p>Para activar la swap tal y como est\u00e1 definida en ''/etc/fstab'':</p> <pre><code>$ sudo swapon -a\n</code></pre> <p>Para activar swap con un fichero en concreto:</p> <pre><code>$ sudo swapon /var/swap\n</code></pre>"},{"location":"sistemas/raspi.html#escaneo-de-raspberry-pis-en-red","title":"Escaneo de Raspberry Pi's en red","text":"<pre><code>$ arp -a | grep b8:27:eb\n$ sudo nmap -PR -sP 192.168.1.0/24 | fgrep -B 2 \"Raspberry\"\n</code></pre>"},{"location":"sistemas/raspi.html#pulsador-encendidoapagado","title":"Pulsador encendido/apagado","text":"<p>Existe una configuraci\u00f3n accesible mediante un Device Tree overlay que permite arrancar y parar el sistema controladamente con un pulsador entre los pines #5 (GPIO03 o SCL) y GND. Para que funcione hay que a\u00f1adir lo siguiente al fichero <code>/boot/config.txt</code>:</p> <pre><code>dtoverlay=gpio-shutdown\n</code></pre> <p>Aqu\u00ed se documenta en profundidad.</p>"},{"location":"sistemas/raspi.html#pi-top","title":"Pi-top","text":""},{"location":"sistemas/raspi.html#enlaces_1","title":"Enlaces","text":"<ul> <li>pi-top-install: Scripts para controlar el hardware del Pi-top (teclas brillo pantalla, power off, etc.) sobre Raspbian oficial.</li> <li>pi-top-battery-status: Muestra el estado de la bater\u00eda del Pi-top en Raspbian.</li> <li>Pi-Top battery firmware / battery issues</li> </ul>"},{"location":"sistemas/raspi.html#articulos-interesantes-de-themagpi","title":"Art\u00edculos interesantes de TheMagPi","text":"<ul> <li>Librer\u00eda Python para controlar un puerto USB: P\u00e1gina 14 de #3 de TheMagPi</li> <li>Buffer de dispositivos controlados con el GPIO de RPi: P\u00e1gina 19 de #4 de TheMagPi</li> <li>Librer\u00eda wiringPi: Sirve para comandar y leer el GPIO desde bash. P\u00e1gina 14 de #6 de TheMagPi</li> <li>Comunicaci\u00f3n entre RaspPi y Arduino: P\u00e1gina 4 de #7 de TheMagPi</li> <li>Uso de interrupciones para chequear GPIO sin bucles: P\u00e1gina 12 de #7 de TheMagPi</li> <li>Librer\u00eda Nanpy para comunicar RaspPi y Arduino por USB: P\u00e1gina 10 de #8 de TheMagPi</li> <li>WebIOPi - Framework REST para controlar el GPIO: P\u00e1gina 8 de #9 de TheMagPi</li> </ul>"},{"location":"sistemas/raspi.html#ajustes-primer-arranque","title":"Ajustes primer arranque","text":""},{"location":"sistemas/raspi.html#configuracion-headless","title":"Configuraci\u00f3n headless","text":""},{"location":"sistemas/raspi.html#activacion-de-ssh","title":"Activaci\u00f3n de SSH","text":"<p>Crear un fichero vac\u00edo con nombre <code>ssh</code> en partici\u00f3n boot.</p>"},{"location":"sistemas/raspi.html#conexion-a-punto-de-acceso-wifi","title":"Conexi\u00f3n a punto de acceso Wifi","text":"<p>Crear un fichero con nombre <code>wpa_supplicant.conf</code> en partici\u00f3n boot con el siguiente contenido:</p> <pre><code>country=ES\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\n\nnetwork={\n    ssid=\"&lt;el_ssid&gt;\"\n    psk=\"&lt;el_pwd&gt;\"\n    key_mgmt=WPA-PSK\n}\n</code></pre>"},{"location":"sistemas/raspi.html#ip-estatica","title":"IP est\u00e1tica","text":"<p>Primero averiguamos el nombre del interfaz al que queremos poner la IP est\u00e1tica consultando <code>ifconfig</code>. Luego editamos <code>/etc/dhcpcd.conf</code> y al final a\u00f1adimos:</p> <pre><code>interface &lt;nombre_interfaz&gt;\nstatic ip_address=&lt;ip&gt;/24\nstatic routers=&lt;gateway&gt;\nstatic domain_name_servers=&lt;dns separadas por espacios&gt;\n</code></pre>"},{"location":"sistemas/raspi.html#raspi-config","title":"raspi-config","text":"<ul> <li>Network Options &gt; Hostname</li> <li>Boot Options &gt; Wait for Network at Boot</li> <li>Localisation Options &gt; Change Locale</li> <li>Localisation Options &gt; Change Timezone</li> </ul>"},{"location":"sistemas/raspi.html#ajustes-usuario","title":"Ajustes usuario","text":"<ul> <li> <p>Crear una nueva cuenta:</p> <pre><code>$ sudo adduser usuario\n$ sudo adduser usuario adm\n$ sudo adduser usuario dialout\n$ sudo adduser usuario cdrom\n$ sudo adduser usuario sudo\n$ sudo adduser usuario audio\n$ sudo adduser usuario video\n$ sudo adduser usuario plugdev\n$ sudo adduser usuario games\n$ sudo adduser usuario users\n$ sudo adduser usuario input\n$ sudo adduser usuario netdev\n$ sudo adduser usuario gpio\n$ sudo adduser usuario i2c\n$ sudo adduser usuario spi\n</code></pre> </li> <li> <p>Cambiar UID de usuario edumoreno para que coincida con el del NAS:</p> <pre><code>sudo usermod -u 1002 usuario\n</code></pre> </li> <li> <p>Borrar la cuenta <code>pi</code> desde la nueva:</p> <pre><code>$ sudo deluser -remove-home pi\n</code></pre> </li> <li> <p>Copia de clave p\u00fablica para SSH autom\u00e1tico (desde m\u00e1quina host):</p> <pre><code>$ ssh-copy-id -i ~/.ssh/id_rsa.pub usuario@IP_RASPBERRY\n</code></pre> </li> </ul>"},{"location":"sistemas/raspi.html#instalacion-de-paquetes","title":"Instalaci\u00f3n de paquetes","text":"<ul> <li>Instalar paquetes:<ul> <li><code>fail2ban</code></li> <li><code>nfs-common</code></li> <li><code>transmission-daemon</code></li> <li><code>amule-daemon</code></li> </ul> </li> <li>Desinstalar paquete <code>wolfram-engine</code> que ocupa mucho y no se suele usar (en la versi\u00f3n lite no viene).</li> </ul>"},{"location":"sistemas/raspi.html#montaje-nas","title":"Montaje NAS","text":"<p>A\u00f1adir lo siguiente a <code>/etc/fstab</code>:</p> <pre><code>192.168.1.200:/c/carpeta_compartida /home/usuario/carpeta_compartida nfs4 defaults,user,exec 0 0\n</code></pre>"},{"location":"sistemas/raspi.html#ssh","title":"SSH","text":"<p>Editar el fichero <code>/etc/ssh/sshd_config</code> y modificar/a\u00f1adir las siguientes l\u00edneas (fuente):</p> <pre><code>PermitRootLogin no\nMaxAuthTries 3\nMaxStartups 5\nAllowUsers edumoreno\n</code></pre> <p>Medidas de protecci\u00f3n:</p> <ul> <li>Top 20 OpenSSH Server Best Security Practices</li> <li>Protege tu servidor casero de ataques externos</li> <li>Protegiendo el servidor SSH con fail2ban</li> <li>Pasos para asegurar tu Raspberry Pi frente a posibles amenazas</li> </ul>"},{"location":"sistemas/raspi.html#raspad","title":"Raspad","text":""},{"location":"sistemas/raspi.html#enlaces_2","title":"Enlaces","text":"<ul> <li> <p>SunFounder Wiki</p> <ul> <li>Replace HDMI cable tutorial</li> <li>Replace power USB cable tutorial</li> <li>The touch screen does not work properly FAQ</li> <li>Install the fan for Raspad: STL's alternativos.</li> </ul> </li> <li> <p>Instalaci\u00f3n de Android</p> <ul> <li>Install Android on his Raspberry Pi</li> </ul> </li> <li> <p>Calibraci\u00f3n de pantalla</p> <ul> <li>https://www.facebook.com/groups/192987478051513/permalink/233950007288593/</li> </ul> </li> <li> <p>Clic derecho</p> <ul> <li>Raspberry Ri Touch Screen setup right click with twofing \u2013 Raspbian Jessie</li> </ul> </li> </ul>"},{"location":"sistemas/raspi.html#configuracion","title":"Configuraci\u00f3n","text":""},{"location":"sistemas/raspi.html#sistema-base","title":"Sistema base","text":"<p>Raspbian</p>"},{"location":"sistemas/raspi.html#digitalizador-de-pantalla","title":"Digitalizador de pantalla","text":"<p>El equipo reci\u00e9n instalado lleva un firmware bastante deficiente en el digitalizador t\u00e1ctil de la pantalla. Hay que actualizarlo siguiendo los pasos del siguiente art\u00edculo del wiki de SunFounder: The touch screen does not work properly FAQ</p>"},{"location":"sistemas/raspi.html#teclado-en-pantalla","title":"Teclado en pantalla","text":"<p>Instalar el paquete: <code>matchbox-keyboard</code></p>"},{"location":"sistemas/raspi.html#clic-secundario","title":"Clic secundario","text":"<p>Para conseguir emular el clic derecho del rat\u00f3n procedemos como sigue (fuentes: 1 y 2):</p> <ol> <li>Instalamos los siguientes paquetes:     <pre><code>$ sudo apt-get update &amp;&amp; sudo apt-get install build-essential libx11-dev libxtst-dev libxi-dev x11proto-randr-dev libxrandr-dev xserver-xorg-input-evdev xinput-calibrator\n</code></pre></li> <li>Descargamos el c\u00f3digo de twofing y lo extraemos:     <pre><code>$ wget http://plippo.de/dwl/twofing/twofing-0.1.2.tar.gz\n$ tar -xvzf twofing-0.1.2.tar.gz\n$ cd twofing-0.1.2\n</code></pre></li> <li>Compilamos:     <pre><code>$ make &amp;&amp; sudo make install\n</code></pre></li> <li>Creamos el fichero <code>/etc/udev/rules.d/70-touchscreen-ilitek.rules</code> con el siguiente contenido:     <pre><code>SUBSYSTEMS==\"usb\",ACTION==\"add\",KERNEL==\"event*\",ATTRS{idVendor}==\"222a\",ATTRS{idProduct}==\"0001\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\"\nKERNEL==\"event*\",ATTRS{name}==\"ILITEK Multi-Touch-V3000\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\"\n</code></pre></li> <li>Creamos el fichero <code>/usr/share/X11/xorg.conf.d/90-touchinput.conf</code> con el siguiente contenido:     <pre><code>Section \"InputClass\"\nIdentifier \"calibration\"\nDriver \"evdev\"\nMatchProduct \"ILITEK ILITEK-TP\"\nMatchDevicePath \"/dev/input/event*\"\nOption \"Emulate3Buttons\" \"True\"\nOption \"EmulateThirdButton\" \"1\"\nOption \"EmulateThirdButtonTimeout\" \"750\"\nOption \"EmulateThirdButtonMoveThreshold\" \"30\"\nEndSection\n</code></pre></li> <li>Creamos el fichero <code>/etc/udev/rules.d/ 99-input-tagging.rules</code> con el siguiente contenido:     <pre><code>ACTION==\"add\", KERNEL==\"event*\", SUBSYSTEM==\"input\", TAG+=\"systemd\", , ENV{SYSTEMD_ALIAS}+=\"/sys/subsystem/input/devices/$env{ID_SERIAL}\"\n</code></pre></li> <li>Creamos el fichero <code>~/.config/autostart/twofing.desktop</code> con el siguiente contenido:     <pre><code>[Desktop Entry]\nType=Application\nName=Twofing\nExec=twofing\nStartupNotify=false\n</code></pre></li> </ol>"},{"location":"sistemas/raspi.html#raspi-camera","title":"Raspi Camera","text":"<p>La documentaci\u00f3n de la librer\u00eda picamera en Python est\u00e1 aqu\u00ed. Concretamente las recetas para hacer la foto est\u00e1n aqu\u00ed.</p> <p>Por ejemplo, para hacer fotos que luego vayan a formar parte de un timelapse:</p> <pre><code>import time\nimport picamera\nimport datetime as dt\n\nwith picamera.PiCamera() as camera:\n    camera.resolution = (1280, 720)\n    camera.framerate = 30\n    # calentamiento/enfoque de la camara\n    time.sleep(2)\n    # fijamos valores para que salga mejor el timelapse\n    camera.shutter_speed = camera.exposure_speed\n    camera.exposure_mode = 'off'\n    g = camera.awb_gains\n    camera.awb_mode = 'off'\n    camera.awb_gains = g\n    camera.annotate_background = picamera.Color('black')\n    camera.annotate_text = dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S')\n    filename = time.strftime(\"%Y-%m-%d_%H%M.jpg\")\n    camera.capture(filename)\n</code></pre>"},{"location":"sistemas/raspi.html#activar-consola-en-puerto-serie","title":"Activar consola en puerto serie","text":"<p>Las Raspberry Pi Zero W, Pi 3 y Pi 4 traen un adaptador Bluetooth que en Raspbian est\u00e1 conectado precisamente a los pines #08 y #10 donde tradicionalmente se encontraba el puerto serie. En este documento se explican los cambios en estas versiones. En este otro art\u00edculo se dan opciones para modificar este comportamiento. Lo que sigue es una versi\u00f3n personal.</p> <p>Para liberar esta conexi\u00f3n debemos editar el fichero <code>config.txt</code> que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente:</p> <pre><code>dtoverlay=pi3-disable-bt\n</code></pre> <p>Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos:</p> <p>sudo raspi-config</p> <p>All\u00ed acudiremos a la secci\u00f3n Interfacing options &gt; Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1:</p> <pre><code>Would you like a login shell to be accessible over serial? -&gt; Yes\nWould you like the serial port hardware to be enabled? -&gt; Yes\n</code></pre> <p>Reiniciaremos y ya podremos conectar a la consola a trav\u00e9s del puerto serie.</p>"},{"location":"sistemas/raspi.html#crankshaft","title":"Crankshaft","text":""},{"location":"sistemas/raspi.html#actualizacion-distribucion","title":"Actualizaci\u00f3n distribuci\u00f3n","text":"<ol> <li>Descargar la \u00faltima versi\u00f3n de la p\u00e1gina de descarga.</li> <li>Copiar el zip o mejor el contenido (.img y .md5) a la ra\u00edz de un pendrive con formato FAT32.</li> <li>Conectar el pendrive a la Raspberry antes de arrancar.</li> <li>El proceso de actualizaci\u00f3n (descrito en esta p\u00e1gina) es lento y requiere varios reinicios. Esperar pues hasta terminar de ver el sistema correctamente arrancado.</li> <li> <p>Instalar el script del Mausberry Car Switch:</p> <ol> <li> <p>Copiar el siguiente script en la ruta <code>/etc/switch.sh</code>:</p> <pre><code>#!/bin/bash\n\n#this is the GPIO pin connected to the lead on switch labeled OUT\nGPIOpin1=23\n\n#this is the GPIO pin connected to the lead on switch labeled IN\nGPIOpin2=24\n\n#Enter the shutdown delay in minutes\ndelay=0\n\necho \"$GPIOpin1\" &gt; /sys/class/gpio/export\necho \"in\" &gt; /sys/class/gpio/gpio$GPIOpin1/direction\necho \"$GPIOpin2\" &gt; /sys/class/gpio/export\necho \"out\" &gt; /sys/class/gpio/gpio$GPIOpin2/direction\necho \"1\" &gt; /sys/class/gpio/gpio$GPIOpin2/value\nlet minute=$delay*60\nSD=0\nSS=0\nSS2=0\nwhile [ 1 = 1 ]; do\npower=$(cat /sys/class/gpio/gpio$GPIOpin1/value)\nuptime=$(&lt;/proc/uptime)\nuptime=${uptime%%.*}\ncurrent=$uptime\nif [ $power = 1 ] &amp;&amp; [ $SD = 0 ]\nthen\nSD=1\nSS=${uptime%%.*}\nfi\n\nif [ $power = 1 ] &amp;&amp; [ $SD = 1 ]\nthen\nSS2=${uptime%%.*}\nfi\n\nif [ \"$((uptime - SS))\" -gt \"$minute\" ] &amp;&amp; [ $SD = 1 ] &amp;&amp; [ $power = 1 ]\nthen\npoweroff\nSD=3\nfi\n\nif [ \"$((uptime - SS2))\" -gt 20 ] &amp;&amp; [ $SD = 1 ]\nthen\nSD=0\nfi\n\nsleep 1\ndone\n</code></pre> </li> <li> <p>Darle permisos de ejecuci\u00f3n.</p> </li> <li> <p>A\u00f1adir lo siguiente al final del fichero <code>/etc/rc.local</code> (justo antes del <code>exit 0</code>) para que se ejecute en el arranque:</p> <pre><code>/etc/switch.sh &amp;\n</code></pre> </li> </ol> </li> </ol>"},{"location":"sistemas/raspi_pico.html","title":"Raspberry Pi Pico","text":""},{"location":"sistemas/raspi_pico.html#enlaces","title":"Enlaces","text":"<ul> <li>Emuladores:<ul> <li>B-Em: Emulador de BBC Micro.</li> <li>ZX Spectrum: Emulador de ZX Spectrum.</li> </ul> </li> <li>Montajes:<ul> <li>Raspberry Pi Pico 200Khz Digital Oscilloscope</li> </ul> </li> <li>CircuitPython:<ul> <li>CircuitPython Essentials</li> <li>Getting Started with Raspberry Pi Pico and CircuitPython</li> <li>An Introduction to RP2040 PIO with CircuitPython</li> <li>Librer\u00edas:<ul> <li>Adafruit Sponsored Libraries and Drivers on GitHub</li> <li>Adafruit CircuitPython API Reference</li> <li>Adafruit CircuitPython Library Bundle</li> </ul> </li> </ul> </li> </ul>"},{"location":"sistemas/raspi_pico.html#circuitpython","title":"CircuitPython","text":""},{"location":"sistemas/raspi_pico.html#pines","title":"Pines","text":"<p>Obtenidos con este programa.</p> <pre><code>board.A0 board.GP26 board.GP26_A0\nboard.A1 board.GP27 board.GP27_A1\nboard.A2 board.GP28 board.GP28_A2\nboard.A3 board.VOLTAGE_MONITOR\nboard.GP0\nboard.GP1\nboard.GP10\nboard.GP11\nboard.GP12\nboard.GP13\nboard.GP14\nboard.GP15\nboard.GP16\nboard.GP17\nboard.GP18\nboard.GP19\nboard.GP2\nboard.GP20\nboard.GP21\nboard.GP22\nboard.GP25 board.LED\nboard.GP3\nboard.GP4\nboard.GP5\nboard.GP6\nboard.GP7\nboard.GP8\nboard.GP9\nboard.SMPS_MODE\n</code></pre>"},{"location":"sistemas/raspi_pico.html#librerias-soportadas","title":"Librer\u00edas soportadas","text":"<pre><code>_bleio, _pixelbuf, adafruit_bus_device, analogio, audiobusio, audiocore, audiomp3,\naudiopwmio, binascii, bitbangio, bitmaptools, bitops, board, busio, countio,\ndigitalio, displayio, errno, fontio, framebufferio, gamepad, json, math,\nmicrocontroller, msgpack, neopixel_write, nvm, os, pulseio, pwmio, random, re,\nrgbmatrix, rotaryio, rtc, sdcardio, sharpdisplay, storage, struct, supervisor,\nterminalio, time, touchio, ulab, usb_hid, usb_midi, vectorio, watchdog\n</code></pre>"},{"location":"sistemas/redes.html","title":"Redes","text":""},{"location":"sistemas/redes.html#enlaces","title":"Enlaces","text":"<ul> <li>Email blacklist check</li> <li>Email blacklist check: Poner la IP directamente en la URL tras ip=</li> <li>Email blacklist check</li> <li>NSLookup online</li> <li>IP-Lookup: Servicio de resoluci\u00f3n inversa de IP recomendado por Google.</li> <li>\u00bfQu\u00e9 navegador estoy utilizando?: Chequea e informa sobre el navegador utilizado y da sugerencias sobre si merece la pena cambiar/actualizar.</li> <li>Message header analyzer: An\u00e1lisis de cabeceras de un correo. Indica los saltos que ha hecho el mensaje entre los distintos servidores SMTP que ha atravesado hasta su destino.</li> </ul>"},{"location":"sistemas/redes.html#glosario","title":"Glosario","text":"<ul> <li>OID: Basicamente, un OID, o Identificador de Objeto, es una secuencia de n\u00fameros que se asignan jer\u00e1rquicamente y que permite identificar objetos en la red, siendo usados con gran cantidad de protocolos. (Definici\u00f3n en RedIRIS)</li> </ul>"},{"location":"sistemas/router_xiaomi.html","title":"Router Xiaomi MiWiFi 3G","text":""},{"location":"sistemas/router_xiaomi.html#enlaces","title":"Enlaces","text":"<ul> <li>Serie de art\u00edculos de Carlos Monge sobre OpenWRT instalado en Xiaomi MiWiFi 3G</li> <li>P\u00e1gina del router en OpenWRT: Incluye instrucciones para debrick.</li> <li>Xiaomi WiFi Router 3G: Hilo del foro OpenWRT sobre el Xiaomi MiWiFi 3G router.</li> <li>Xiaomi Wifi Router 3G - 18.06.X / feedback and help: Hilo del foro OpenWRT sobre el firmware 18.06 en el Xiaomi MiWiFi 3G router.</li> <li>Things to do after installing Linux LEDE 17.01</li> </ul>"},{"location":"sistemas/router_xiaomi.html#configuracion-desde-cero","title":"Configuraci\u00f3n desde cero","text":"<ol> <li> <p>Instalar Luci:</p> <pre><code># opkg update\n# opkg install luci\n# opkg install luci-ssl\n# /etc/init.d/uhttpd start\n# /etc/init.d/uhttpd enable\n</code></pre> </li> <li> <p>Descarga de paquetes por HTTPS:</p> <ol> <li> <p>Instalar:</p> <pre><code># opkg update\n# opkg install ca-certificates\n</code></pre> </li> <li> <p>Editar el fichero <code>/etc/opkg/distfeeds.conf</code> y cambiar http por https.</p> </li> </ol> </li> <li> <p>Crear usuario normal y permitirle usar sudo:</p> <ol> <li> <p>Ejecutar:</p> <pre><code># opkg update\n# opkg install shadow-useradd\n# useradd miusuario\n# passwd miusuario\n# mkdir /home\n# mkdir /home/miusuario\n# chown miusuario:miusuario /home/miusuario\n# opkg install sudo\n</code></pre> </li> <li> <p>Editar el fichero <code>/etc/passwd</code> y poner shell al usuario nuevo:</p> <pre><code>miusuario:x:1000:1000::/home/miusuario:/bin/ash\n</code></pre> </li> <li> <p>Ejecutar el comando <code>visudo</code> y a\u00f1adir la siguiente l\u00ednea bajo la correspondiente a root:</p> <pre><code>miusuario ALL=(ALL) ALL\n</code></pre> </li> </ol> </li> <li> <p>Desactivar ping:</p> <ol> <li>En Luci ir a la ruta <code>Network &gt; Firewall</code></li> <li>Abrir la solapa <code>Traffic Rules</code></li> <li>Desactivar las reglas (desmarcando el check) <code>Allow-Ping</code>, <code>Allow-ICMPv6-Input</code> y <code>Allow-ICMPv6-Forward</code></li> <li>Pulsar el bot\u00f3n <code>Save &amp; Apply</code> abajo a la derecha</li> </ol> </li> <li> <p>Bloquear la publicidad desde el fichero hosts:</p> <ol> <li>Iniciar sesi\u00f3n SSH.</li> <li> <p>Hacer backup de fichero hosts:</p> <pre><code>$ sudo cp /etc/hosts /etc/hosts.bkp\n</code></pre> </li> <li> <p>Editar crontab de root con comando <code>sudo crontab -e</code> y a\u00f1adir la siguiente l\u00ednea:</p> <pre><code>0 */12 * * * wget -O /etc/hosts https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews/hosts; cat /etc/hosts.bkp &gt;&gt; /etc/hosts\n</code></pre> </li> <li> <p>Hay varias configuraciones posibles para el fichero hosts descritas aqu\u00ed.</p> </li> </ol> </li> </ol>"},{"location":"sistemas/router_xiaomi.html#configuracion-de-protonvpn","title":"Configuraci\u00f3n de ProtonVPN","text":"<p>Siguiendo esta gu\u00eda.</p> <p>Antes de empezar es recomendable hacer un backup de la configuraci\u00f3n del router por si es necesario volver a empezar.</p> <ol> <li> <p>Instalaci\u00f3n de paquetes (el comando siguiente instala adem\u00e1s los siguientes paquetes dependientes <code>kmod-tun liblzo zlib libopenssl</code>):</p> <pre><code>$ sudo opkg install luci-app-openvpn openvpn-openssl\n</code></pre> </li> <li> <p>Creamos un nuevo interface para lo que en Luci vamos a <code>Network &gt; Interfaces</code>.</p> </li> <li>Pulsamos el bot\u00f3n <code>Add new interface...</code>.</li> <li> <p>En el formulario que aparece rellenamos los siguientes campos:</p> <ul> <li><code>Name of the new interface</code>: openvpn</li> <li><code>Protocol of the new interface</code>: Unmanaged</li> <li><code>Cover the following interface</code>: Custom Interface: \"tun0\"</li> </ul> </li> <li> <p>Pulsar el bot\u00f3n <code>Submit</code>.</p> </li> <li>Seleccionar la pesta\u00f1a <code>Advanced Settings</code>.</li> <li>Marcar la opci\u00f3n <code>Bring up on boot</code>.</li> <li>Seleccionar la pesta\u00f1a <code>Firewall Settings</code>.</li> <li>En el desplegable <code>Create / Assign firewall-zone</code> crear una zona con nombre <code>vpn</code>.</li> <li>Pulsar el bot\u00f3n <code>Save &amp; Apply</code>.</li> <li>Ir a la secci\u00f3n <code>Network &gt; Firewall</code>.</li> <li> <p>Los siguientes cambios son muy sensibles, por lo que muestro un pantallazo del estado de las zonas antes de los cambios:</p> <p></p> </li> <li> <p>En la zona <code>wan</code> cambiar <code>Input</code> y <code>Forward</code> a <code>drop</code> y desmarcar los checks <code>Masquerading</code> y <code>MSS clamping</code>.</p> </li> <li>En la zona <code>vpn</code> cambiar <code>Input</code> y <code>Forward</code> a <code>drop</code> y marcar los checks <code>Masquerading</code> y <code>MSS clamping</code>.</li> <li>Pulsar el bot\u00f3n <code>Save &amp; Apply</code>.</li> <li>Pulsar el bot\u00f3n <code>Edit</code> de la zona <code>lan</code>.</li> <li> <p>En la secci\u00f3n <code>Inter-Zone Forwarding</code> abrir el desplegable <code>Allow forward to destination zones</code> y marcar la secci\u00f3n <code>vpn</code> y desmarcar <code>wan</code>.</p> <p></p> </li> <li> <p>Pulsar el bot\u00f3n <code>Save &amp; Apply</code></p> </li> <li> <p>Pantallazo de c\u00f3mo deber\u00edan de quedar las zonas:</p> <p></p> </li> <li> <p>Descargar el perfil <code>.ovpn</code> deseado de la secci\u00f3n \"Downloads\" de nuestro perfil en ProtonVPN seleccionando como plataforma <code>Router</code> y protocolo <code>UDP</code>. Vamos a suponer que el fichero se llama <code>is-es-01.protonvpn.com.udp.ovpn</code>.</p> </li> <li> <p>Editar el fichero y modificar la l\u00ednea que contiene el par\u00e1metro <code>auth-user-pass</code> dej\u00e1ndola como sigue:</p> <pre><code>auth-user-pass '/etc/openvpn/protonvpn/auth'\n</code></pre> </li> <li> <p>Transferir el fichero descargado al router y situarlo en la ruta <code>/etc/openvpn/protonvpn</code> (habr\u00e1 que crear el directorio <code>protonvpn</code>).</p> </li> <li>Ir a la secci\u00f3n \"Account\" de nuestro perfil en ProtonVPN y tomar nota de los valores de \"OpenVPN/IKEv2 Username\" y \"OpenVPN/IKEv2 Password\".</li> <li>Crear en el router el fichero <code>/etc/openvpn/protonvpn/auth</code>, editarlo y escribir en la primera l\u00ednea el username anterior y en la segunda el password.</li> <li> <p>Editar en el router el fichero <code>/etc/config/openvpn</code> y a\u00f1adir las siguientes l\u00edneas:</p> <pre><code>config openvpn 'protonvpn'\n    option config '/etc/openvpn/protonvpn/is-es-01.protonvpn.com.udp.ovpn'\n    option enabled '1'\n</code></pre> </li> <li> <p>Reiniciar el servicio openvpn en el router:</p> <pre><code>$ sudo /etc/init.d/openvpn restart\n</code></pre> </li> <li> <p>Ir a <code>Network &gt; Interfaces &gt; LAN</code> y en el par\u00e1metro <code>Use custom DNS servers</code> dejar \u00fanicamente la IP <code>10.8.8.1</code> (en caso de utilizar OpenVPN por protocolo TCP usar <code>10.7.7.1</code> en su lugar).</p> </li> <li>Pulsar el bot\u00f3n <code>Save &amp; Apply</code>.</li> </ol> <p>Para mantener acceso desde el exterior de la red, estudiar este art\u00edculo.</p>"},{"location":"sistemas/router_xiaomi.html#actualizacion-firmware","title":"Actualizaci\u00f3n firmware","text":"<p>Siguiendo este art\u00edculo:</p> <ol> <li>Bajar el paquete pinchando uno de los enlaces siguientes seg\u00fan si se desea la versi\u00f3n de desarrollo o la estable de la p\u00e1gina de soporte del router en OpenWRT:<ul> <li>Estable: Firmware OpenWrt Upgrade URL</li> <li>Desarrollo: Firmware OpenWrt snapshot Upgrade URL</li> </ul> </li> <li>En el interfaz web (Luci) acudir a la ruta <code>System &gt; Backup / Flash Firmware</code>.</li> <li>En la secci\u00f3n <code>Flash new firmware image</code> pulsar el bot\u00f3n <code>Examinar...</code> y seleccionar el fichero .tar bajado en el punto anterior.</li> <li>Pulsar el bot\u00f3n <code>Flash image...</code>.</li> <li>En la siguiente p\u00e1gina confirmar el flasheo comprobando si se quiere los checksums.</li> <li>Cuando termine el proceso habremos perdido los paquetes adicionales. Tambi\u00e9n los ajustes hechos al usuario adicional (como el directorio home) por lo que seguramente habr\u00e1 que repasar la mayor\u00eda de los ajustes hechos durante la configuraci\u00f3n desde cero.</li> </ol>"},{"location":"sistemas/router_xiaomi.html#desactivacion-vpn","title":"Desactivaci\u00f3n VPN","text":"<p>Para poder salir directamente a trav\u00e9s de la conexi\u00f3n WAN sin atravesar el VPN:</p> <ol> <li>Desmontar unidades NAS, apagar Raspis y NAS.</li> <li> <p>Ir a <code>Network &gt; Interfaces</code> y detener el interfaz <code>OPENVPN</code> pulsando el bot\u00f3n <code>Stop</code>:</p> <p></p> </li> <li> <p>Ir a <code>Network &gt; Interfaces &gt; LAN</code> y en el par\u00e1metro <code>Use custom DNS servers</code> poner las IPs de OpenDNS: <code>208.67.222.222</code> y <code>208.67.220.220</code>.</p> </li> <li> <p>Ir a <code>Network &gt; Firewall</code> y editar la zona <code>lan</code> para que haga forward a la zona <code>wan</code> y no a la <code>vpn</code>:</p> <p></p> </li> <li> <p>En el listado de zonas firewall activar <code>Masquerading</code> y <code>MSS clamping</code> en la zona <code>wan</code> de manera que quede as\u00ed:</p> <p></p> </li> <li> <p>Reiniciar router.</p> </li> </ol> <p>Para volver a utilizar el VPN</p> <ol> <li> <p>Ir a <code>Network &gt; Interfaces</code> y conectar el interfaz <code>OPENVPN</code> pulsando el bot\u00f3n <code>Connect</code>:</p> <p></p> </li> <li> <p>Ir a <code>Network &gt; Interfaces &gt; LAN</code> y en el par\u00e1metro <code>Use custom DNS servers</code> dejar \u00fanicamente la IP: <code>10.8.8.1</code>.</p> </li> <li> <p>Ir a <code>Network &gt; Firewall</code> y editar la zona <code>lan</code> para que haga forward a la zona <code>vpn</code> y no a la <code>wan</code>:</p> <p></p> </li> <li> <p>En el listado de zonas firewall desactivar <code>Masquerading</code> y <code>MSS clamping</code> en la zona <code>wan</code> de manera que quede as\u00ed:</p> <p></p> </li> <li> <p>Reiniciar router.</p> </li> </ol>"},{"location":"sistemas/router_xiaomi.html#cambio-de-perfil-protonvpn","title":"Cambio de perfil ProtonVPN","text":"<p>En el router hay instalados un par de perfiles (se descargan de aqu\u00ed), los correspondientes a Suiza (ch) y a Islandia (is). Los perfiles est\u00e1n aqu\u00ed:</p> <pre><code>edumoreno@OpenWrt:~$ cd /etc/openvpn/protonvpn\nedumoreno@OpenWrt:/etc/openvpn/protonvpn$ ls -l\n-rw-r--r--    1 root     root            24 Nov 24  2018 auth\n-rw-r--r--    1 edumoren edumoren      4479 Jan 25 15:16 ch-es-01.protonvpn.com.udp.ovpn\n-rw-r--r--    1 root     root          4609 Nov 24  2018 is-es-01.protonvpn.com.udp.ovpn\n</code></pre> <p>Y se configuran al principio del fichero <code>/etc/config/openvpn</code>:</p> <pre><code>config openvpn 'protonvpn'\n        option config '/etc/openvpn/protonvpn/ch-es-01.protonvpn.com.udp.ovpn'\n        option enabled '1'\n</code></pre>"},{"location":"sistemas/soft_imprescindible.html","title":"Aplicaciones interesantes","text":""},{"location":"sistemas/soft_imprescindible.html#web","title":"Web","text":"<ul> <li>Web Developer Checklist</li> <li>Html Validator</li> </ul>"},{"location":"sistemas/soft_imprescindible.html#multi-os","title":"Multi OS","text":"<ul> <li>EICAR: Virus de laboratorio para poner a prueba scanners antivirus.</li> <li>MPV: Media Player.</li> <li>VSCodium: Free/Libre Open Source Software Binaries of VSCode.</li> <li>LosslessCut</li> <li>Ardour: Edici\u00f3n de audio.</li> <li>GPXSee: Visor de tracks GPS.</li> </ul>"},{"location":"sistemas/soft_imprescindible.html#linux","title":"Linux","text":"<ul> <li>GNU Screen</li> <li>Shotcut: Editor de v\u00eddeo.</li> <li>SMPlayer: Frontend para MPlayer. Soporta YouTube.</li> <li>Stacer: Alternativa a CCleaner de Windows.</li> <li>Disk Usage Analyzer (also known as baobab): An\u00e1lisis de ocupaci\u00f3n de disco (similar a WinDirStat).</li> <li>Shutter: Edici\u00f3n r\u00e1pida y marcado de im\u00e1genes.</li> <li>AppImageLauncher: Integrate AppImages to your application launcher with one click, and manage, update and remove them from there.</li> <li>FSArchiver: FSArchiver is a system tool that allows you to save the contents of a file-system to a compressed archive file. The file-system can be restored on a partition which has a different size and it can be restored on a different file-system.</li> <li>SystemRescue: SystemRescue (also known as SystemRescueCd) is a Linux system rescue toolkit available as a bootable medium for administrating or repairing your system and data after a crash. It aims to provide an easy way to carry out admin tasks on your computer, such as creating and editing the hard disk partitions. It comes with a lot of Linux system utilities such as GParted, fsarchiver, filesystem tools and basic tools (editors, midnight commander, network tools).</li> <li>TestDisk: Recuperaci\u00f3n de particiones estropeadas y de ficheros.</li> <li>BleachBit: With BleachBit you can free cache, delete cookies, clear Internet history, shred temporary files, delete logs, and discard junk you didn't know was there.</li> <li>gucharmap: Mapa de caracteres.</li> <li>mosh: Alternativa al cliente de SSH. Mejora la persistencia de la conexi\u00f3n, es decir es tolerante a desconexiones o latencias altas.</li> <li>batcat: Reemplazo mejorado de <code>cat</code>.</li> <li>ncdu: Reemplazo mejorado de <code>du</code>.</li> <li>tldr: Alternativa a <code>man</code>, centrada en mostrar ejemplos de uso de los distintos comandos.</li> <li>blanket: Generador de ruido/sonido ambiente para ayudar a concentrarse.</li> </ul>"},{"location":"sistemas/soft_imprescindible.html#windows","title":"Windows","text":"<ul> <li>CNet Windows Vista Test: Test online de requerimientos de Vista.</li> <li>Colossus: Gestor de contrase\u00f1as.</li> <li>KeePass: Gestor de contrase\u00f1as.</li> <li>WHosIP: Utilidad de linea de comando que muestra toda la informaci\u00f3n disponible sobre una IP (propietario, pais, rango de IP's, informaci\u00f3n de contacto, etc.</li> <li>ShelExec: Para crear un CD/DVD de autoarranque.</li> <li>SharpKeys: Mapeo del teclado (tambi\u00e9n sirve para desactivar alguna tecla).</li> <li>Wink: Creaci\u00f3n tutoriales animados.</li> <li>The Regex Coach: Editor de expresiones regulares.</li> <li>SoftPerfect Network Scanner: Scanner de red. Lista los adaptadores de red conectados a la red.</li> <li>SIW: Auditor de sistemas en un dispositivo USB.</li> <li>Virtual CloneDrive: Para montar ISOs.</li> <li>CCleaner: Optimizaci\u00f3n del sistema y limpieza de archivos de aplicaciones no utilizadas (an\u00e1lisis aqu\u00ed).</li> <li>Cleanmgr+: Alternativa a CCleaner.</li> <li>ConEmu: Consola mejorada.</li> <li>HDD Raw Copy Tool: Para hacer y cargar im\u00e1genes de disco.</li> <li>DiskGenius: Equivalente a gparted.</li> <li>H2testw: Test de stress para tarjetas SD y pendrives.</li> </ul>"},{"location":"sistemas/soft_imprescindible.html#gestion-de-red","title":"Gesti\u00f3n de red","text":"<ul> <li>SpiceWorks</li> <li>OpManager</li> <li>Zenoss</li> <li>Zabbix</li> <li>MRTG</li> <li>GroudWork</li> </ul>"},{"location":"sistemas/trucos_windows.html","title":"Trucos Windows","text":""},{"location":"sistemas/trucos_windows.html#acelerar-la-exploracion-de-equipos-en-red-e-incrementar-el-rendimiento-general","title":"Acelerar la exploraci\u00f3n de equipos en red e incrementar el rendimiento general","text":"<p>Borrar la clave siguiente (fuente):</p> <pre><code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RemoteComputer\\NameSpace\\{D6277990-4C6A-11CF-8D87-00AA0060F5BF}\n</code></pre>"},{"location":"sistemas/trucos_windows.html#cambiar-la-clave-de-producto-en-windows-xp","title":"Cambiar la clave de producto en Windows XP","text":"<p>Proceder como sigue (fuente):</p> <ol> <li>Ejecutar regedit y buscar la clave <code>HKEY_LOCAL_MACHINE\\Software\\Microsoft\\WindowsNT\\CurrentVersion\\WPAEvents</code></li> <li>Abrir la clave oobetimer, borrar el valor hexadecimal CA, y cerrar regedit</li> <li>Ir a Inicio, Ejecutar y escribir %systemroot%\\system32\\oobe\\msoobe.exe /a</li> <li>Nos aparecer\u00e1 la pantalla de activaci\u00f3n de Windows XP, seleccionar activaci\u00f3n por tel\u00e9fono, pulsar en Cambiar clave del producto e introducir la nueva clave y pulsar actualizar. (Las claves que comienzan por F o D han sido baneadas por Microsoft en el SP1)</li> <li>Ejecutar de nuevo %systemroot%\\system32\\oobe\\msoobe.exe /a, y con esto finalizar\u00e1 el proceso de activaci\u00f3n</li> </ol>"},{"location":"sistemas/trucos_windows.html#averiguar-la-clave-de-producto","title":"Averiguar la clave de producto","text":"<p>Por medio de alguno de estos programas:</p> <ul> <li>Magical Jelly Bean Keyfinder</li> <li>CD Key Reader</li> </ul>"},{"location":"sistemas/trucos_windows.html#sustituir-archivos-en-uso-en-windows-xp","title":"Sustituir archivos en uso en Windows XP","text":"<p>\"inuse.exe\u201d es una herramienta que anta\u00f1o formaba parte del kit de recursos de Windows 2000, y que con la liberaci\u00f3n de Windows XP Microsoft ha decidido ponerla a disposici\u00f3n de forma gratuita. Su cometido es permitir la sustituci\u00f3n de archivos que est\u00e9n en uso por parte del Sistema Operativo y que de otra manera no podr\u00edan ser sustituidos. Su sintaxis es:</p> <pre><code>INUSE origen destino /y\n</code></pre> <ul> <li>origen: especifica el nombre del archivo actualizado</li> <li>destino: especifica el nombre del archivo existente que ser\u00e1 reemplazado</li> <li>/y elimina la petici\u00f3n de confirmaci\u00f3n para reemplazar el archivo.</li> </ul> <p>Nota: los cambios no surtir\u00e1n efecto hasta que reiniciemos el ordenador. Esta utilidad junto a todas las del kit de recursos de Windows 2000 se puede obtener de Windows 2000 Resource Kit Tools. (Fuente)</p>"},{"location":"sistemas/trucos_windows.html#evitar-la-activacion-de-windows-xp","title":"Evitar la activaci\u00f3n de Windows XP","text":"<p>Como es bien sabido Windows XP debe ser activado despu\u00e9s de su instalaci\u00f3n, porque de lo contrario dejar\u00e1 de funcionar a los 30 d\u00edas. Hasta este punto todo correcto, se instala Windows XP, se activa y listo, pero el problema viene una vez que por cualquier circunstancia hay que formatear el PC o reinstalar Windows, que nuevamente tenemos que activarlo, para evitar esto debemos hacer lo siguiente (fuente):</p> <ol> <li>Una vez que se activa Windows XP por primera vez, se guarda un archivo en nuestro PC, este archivo debemos copiarlo y guardarlo muy bien para la siguiente vez que borremos el disco duro y as\u00ed evitaremos la activaci\u00f3n nuevamente.</li> <li>Sigue estos pasos para buscar y guardar el archivo que guarda las configuraciones del hardware y la activaci\u00f3n de tu copia de Windows XP.</li> <li>Haces clic con el bot\u00f3n Inicio y a continuaci\u00f3n en Ejecutar.</li> <li>Escribe wpa.dbl y pulsa el boton Aceptar, despu\u00e9s de unos segundos aparecer\u00e1 el archivo en el cuadro buscar.</li> <li>Ahora fijate bien donde est\u00e1 el archivo (normalmente estar\u00e1 en el directorio C:\\Windows\\System32), copia este archivo en un disquete o en cualquier otro lugar del disco duro donde est\u00e9 a salvo de errores y lo puedas conservar hasta que lo necesites.</li> <li>La pr\u00f3xima vez que formatees el disco duro, o por cualquier otra causa necesites activar tu copia de Windows XP simplemente copia el archivo que acabas de guardar al directorio Windows, reinicias y listo ya est\u00e1 activada nuevamente tu copia de Windows XP</li> </ol>"},{"location":"sistemas/trucos_windows.html#evitar-colapsos-de-conexion-de-red","title":"Evitar colapsos de conexi\u00f3n de red","text":"<p>Activar el servicio \"Programador de paquetes QoS\". Se puede configurar el valor de reserva de ancho de banda con:</p> <pre><code>gpedit.msc / Configuraci\u00f3n del equipo / Plantillas administrativas /\nRed / Programador de paquetes QoS / Limitar ancho de banda reservado\n</code></pre>"},{"location":"sistemas/trucos_windows.html#reparar-registro-de-windows","title":"Reparar registro de Windows","text":"<p>(Fuente)</p> <ul> <li>Arrancar con la consola de reparaci\u00f3n del CD de instalaci\u00f3n.</li> <li>Copiar los archivos del registro de la versi\u00f3n de instalaci\u00f3n:</li> </ul> <pre><code>copy c:\\windows\\repair\\system c:\\windows\\system32\\config\\system\ncopy c:\\windows\\repair\\software c:\\windows\\system32\\config\\software\ncopy c:\\windows\\repair\\sam c:\\windows\\system32\\config\\sam\ncopy c:\\windows\\repair\\security c:\\windows\\system32\\config\\security\ncopy c:\\windows\\repair\\default c:\\windows\\system32\\config\\default\n</code></pre> <ul> <li>Con esta configuraci\u00f3n se puede arrancar en Modo a Prueba de Fallos. Elegir un conjunto de archivos de un punto de restauraci\u00f3n en la ruta:</li> </ul> <pre><code>C:\\System Volume Information\\_restore{27BBF476-A824-438F-93A9-39BC37483C34}\\RPn\\Snapshot\n(el ClassID y el n de RPn son variables)\n</code></pre> <ul> <li>Copiar los siguientes ficheros a una carpeta accesible como C:\\Windows\\tmp renombr\u00e1ndolos como se indica:</li> </ul> <pre><code>_REGISTRY_USER_.DEFAULT -&gt; default\n_REGISTRY_MACHINE_SECURITY -&gt; security\n_REGISTRY_MACHINE_SOFTWARE -&gt; software\n_REGISTRY_MACHINE_SYSTEM -&gt; system\n_REGISTRY_MACHINE_SAM -&gt; sam\n</code></pre> <ul> <li>Volver a arrancar con la consola de reparaci\u00f3n y sustituir los ficheros de C:\\Windows\\tmp a c:\\windows\\system32\\config.</li> </ul>"},{"location":"sistemas/trucos_windows.html#clonado-de-equipos","title":"Clonado de equipos","text":"<ol> <li>Instalar un equipo el cual servira de modelo, una vez instalado el sistema operativo y sus parches vamos al paso 2.</li> <li>Extraer el archivo DEPLOY.CAB de [CD_WIN]:\\support\\tools\\ en directorio C:\\sysprep</li> <li>Ejecutar sysprep.exe para crear el sysprep.inf. Existen unos botones al ejecutar sysprep. Darle a Factory.</li> <li>Instalar los programas y todo lo que utilizaran los PCs, una vez terminado esta parte le damos en la opcion de Sellar equipo en sysprep.</li> <li>Hacemos la imagen con Ghost, g4u o similar.</li> <li>Volcamos esta imagen en los demas PCs y sin poner el disquete de sysprep, alli vuelve a pedir los datos del Key de Windows, Nombre de PC y todo lo demas, dejando los programas listos e incluso con sus acesos directos y con el escritorio como en la imagen.</li> </ol>"},{"location":"sistemas/trucos_windows.html#enlaces","title":"Enlaces:","text":"<ul> <li>Gu\u00eda r\u00e1pida a la preinstalaci\u00f3n de Windows</li> </ul>"},{"location":"sistemas/trucos_windows.html#comandos-utiles","title":"Comandos \u00fatiles","text":"<ul> <li>Mostrar lista de procesos con servicios asociados:</li> </ul> <pre><code>tasklist /svc\n</code></pre> <ul> <li>Lista de conexiones con PID de procesos asociados:</li> </ul> <pre><code>netstat -aon\n</code></pre> <ul> <li>Eliminar unidades de red:</li> </ul> <pre><code>net use /d A:\n</code></pre> <ul> <li>A\u00f1adir unidades de red:</li> </ul> <pre><code>net use A: \\\\Servidor\\Directorio\n</code></pre> <ul> <li>Muestra la diferencia de hora del sistema con un servidor NTP externo:</li> </ul> <pre><code>w32tm /stripchart /computer:es.pool.ntp.org /samples:3 /dataonly\n</code></pre> <ul> <li>Utilidad de configuraci\u00f3n del sistema (WinXP):</li> </ul> <pre><code>msconfig\n</code></pre>"},{"location":"sistemas/trucos_windows.html#bloqueo-y-desbloqueo-del-registro","title":"Bloqueo y desbloqueo del Registro","text":"<p>Para deshabilitarlo, accedemos al registro, nos situamos en HKEY_CURENT_USER/Software/Microsoft/Windows/CurrentVersion/Policies/System. En la parte de la derecha creamos un nuevo valor DWORD y le damos el nombre DisableRegistryTools, otorg\u00e1ndole el 1 para deshabilitar las funciones de edici\u00f3n del Registro. Una vez realizada esta operaci\u00f3n, nadie podr\u00e1 acceder a \u00e9l hasta que no lo volvamos a activar. Para habilitarlo, abrimos un editor de texto y escribimos:</p> <pre><code>Windows Registry Editor Version 5.00\n[HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\system] \"DisableRegistryTools\"=dword:00000000\n</code></pre> <p>Ahora, guardamos el archivo con el nombre unlock.reg y, a partir de ese momento, cuando queramos activar el Registro de Windows, despu\u00e9s de haberlo deshabilitado, s\u00f3lo tendremos que hacer doble clic sobre el archivo que acabamos de crear.</p>"},{"location":"sistemas/trucos_windows.html#escritorio-remoto-editar-registro-con-comandos","title":"Escritorio Remoto / Editar registro con comandos","text":"<p>La funcionalidad \"Escritorio Remoto\" se encuentra desactivada por defecto. Se puede activar editando el registro del ordenador que nos interese. Esto se puede hacer remotamente por medio del siguiente comando:</p> <pre><code>reg add \\\\[NombreEquipo]\\HKLM\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent /V EnableRemoteMgmt /T REG_DWORD /F /D 1\n</code></pre>"},{"location":"sistemas/trucos_windows.html#edicion-ficheros-bks-de-la-utilidad-copia-de-seguridad","title":"Edici\u00f3n ficheros BKS de la utilidad Copia de Seguridad","text":"<p>En estos ficheros se almacena la selecci\u00f3n de directorios/ficheros que entran en el backup. Hay que respetar el formato que les da la utilidad cuando los genera. Es texto Unicode, pero si se edita con Notepad no queda exactamente en el formato esperado y luego aparece en el log el error \"No se encontr\u00f3 el archivo de selecci\u00f3n...\". Una forma de conseguirlo es editando con Notepad, guardando en formato \"Codificaci\u00f3n: Unicode\" y luego usar un editor hexadecimal para eliminar los dos primeros bytes que se incluyen con este formato.</p>"},{"location":"sistemas/trucos_windows.html#procesos-de-inicio","title":"Procesos de inicio","text":"<p>En las siguientes rutas del registro:</p> <pre><code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce\n\nHKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run\nHKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices\nHKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce\n</code></pre> <p>En el caso de Windows 98 y Windows ME ser\u00e1 necesario revisar tambi\u00e9n en los 2 archivos:</p> <pre><code>WIN.INI\n</code></pre> <p>Son las entradas que inician con \"run=\" o \"load=\"</p> <pre><code>SYSTEM.INI\n</code></pre> <p>Son las entradas que inician con \"shell=\" . Hay que tener en cuenta que la \u00fanica entrada legal es shell=Explorer.exe y que alg\u00fan virus podr\u00eda agregar una l\u00ednea del tipo shell=Explorer.exe %Windows% ombredelviruse.exe</p> <p>Otro lugar donde se deber\u00eda revisar son las carpetas de los programas de inicio que por ejemplo en Windows XP ser\u00e1n:</p> <pre><code>C:\\Documents and Settings\\tucuenta\\Men\u00fa Inicio\\Programas\\Inicio\n\nC:\\Documents and Settings\\All Users\\Men\u00fa Inicio\\Programas\\Inicio\n</code></pre> <p>y en Windows 98 ser\u00e1:</p> <pre><code>C:\\Windows\\Men\u00fa Inicio\\Programas\\Inicio\n</code></pre> <p>(Fuente)</p>"},{"location":"sistemas/trucos_windows.html#ajustes-tras-instalacion-windows-10","title":"Ajustes tras instalaci\u00f3n Windows 10","text":"<p>Recien instalado, Windows 10 trae preconfiguradas unas cuantas cosas que estar\u00edan mejor desactivadas. Aqu\u00ed tenemos una lista de ajustes a efectuar tras la instalaci\u00f3n o actualizaci\u00f3n.</p>"},{"location":"sistemas/ubuntu.html","title":"Ubuntu","text":""},{"location":"sistemas/ubuntu.html#enlaces","title":"Enlaces","text":"<ul> <li>Soluci\u00f3n a warning apt-key is deprecated</li> <li>UEFI:<ul> <li>How to get GRUB to be the default bootloader instead of Windows Boot Manager on a UEFI laptop?</li> <li>UEFI boot: how does that actually work, then?</li> </ul> </li> </ul>"},{"location":"sistemas/ubuntu.html#ficheros-interesantes","title":"Ficheros interesantes","text":"Fichero Utilidad <code>/usr/lib/os-release</code> Informaci\u00f3n sobre la distribuci\u00f3n"},{"location":"sistemas/ubuntu.html#aplicaciones-interesantes","title":"Aplicaciones interesantes","text":"<ul> <li>ReText: Editor Markdown.</li> <li>Franz: Configuraci\u00f3n de icono en GNome.</li> <li>App Grid: Repositorio de aplicaciones.</li> <li>OpenWeather Shell Extension: Informaci\u00f3n del tiempo meteorol\u00f3gico en la barra de men\u00fa.</li> </ul>"},{"location":"sistemas/ubuntu.html#paquetes-a-instalar-en-xubuntu","title":"Paquetes a instalar en Xubuntu","text":"<ul> <li><code>font-viewer</code>: Visor/instalador de tipos de letra.</li> <li><code>python3-pip</code>: PIP instalado desde los repositorios (facilita la instalaci\u00f3n de virtualenvwrapper).</li> <li><code>python-is-python3</code>: Abre Python3 ejecutando <code>python</code>.</li> <li><code>android-file-transfer</code>: Para transferir ficheros por MTP (hacia Android o las Oculus Quest).</li> <li><code>qpdfview</code>: Visor PDF.</li> <li><code>thunar-archive-plugin</code>: Crear archivadores y descomprimir desde Thunar.</li> <li><code>gvfs gvfs-common gvfs-backends gvfs-fuse thunar-volman</code>: Soporte MTP para Android.</li> </ul>"},{"location":"sistemas/ubuntu.html#servicios-interesantes","title":"Servicios interesantes","text":"<ul> <li>KodExplorer</li> <li>Gitea</li> </ul>"},{"location":"sistemas/ubuntu.html#problema-con-aplicaciones-root-en-wayland","title":"Problema con aplicaciones root en Wayland","text":"<p>Hay que ejecutar el comando:</p> <pre><code>xhost si:localuser:root\n</code></pre> <p>Se puede automatizar en el arranque a\u00f1adiendo el comando en las <code>Aplicaciones al incio</code> (fuente).</p>"},{"location":"sistemas/ubuntu.html#configuracion-de-opcion-predeterminada-en-grub","title":"Configuraci\u00f3n de opci\u00f3n predeterminada en GRUB","text":"<p>Fuente</p> <ol> <li>Editar fichero <code>/etc/default/grub</code> y modificar el par\u00e1metro <code>GRUB_DEFAULT</code> dando el valor <code>saved</code> en lugar del valor num\u00e9rico que encontraremos.</li> <li>Ejecutar <code>sudo update-grub</code>.</li> <li>Ejecutar <code>sudo grub-set-default N</code> siendo N la posici\u00f3n de la entrada del men\u00fa de GRUB que queremos que act\u00fae como predeterminada (contando desde 0).</li> </ol>"},{"location":"sistemas/ubuntu.html#problemas-con-grub","title":"Problemas con GRUB","text":"<p>Reinstalar GRUB 2</p>"},{"location":"sistemas/ubuntu.html#solucion-problemas-wifi-en-1104-y-1110","title":"Soluci\u00f3n problemas wifi en 11.04 y 11.10","text":"<p>Help with Ubuntu: Fix slow WiFi in Ubuntu 11.04</p>"},{"location":"sistemas/ubuntu.html#solucion-problema-wireshark-en-trusty-y-utopic","title":"Soluci\u00f3n problema Wireshark en trusty y utopic","text":"<p>liboverlay-scrollbar hangs Wireshark</p>"},{"location":"sistemas/ubuntu.html#actualizacion-de-intrepid-a-jaunty","title":"Actualizaci\u00f3n de Intrepid a Jaunty","text":"<p>Tras actualizar de Intrepid a Jaunty se observa un empobrecimiento del rendimiento gr\u00e1fico en equipos con gr\u00e1ficas integradas Intel 945. En las siguientes p\u00e1ginas explican como hacer downgrade al controlador Intel que hab\u00eda en Intrepid:</p> <ul> <li>https://wiki.ubuntu.com/ReinhardTartler/X/RevertingIntelDriverTo2.4</li> <li>http://www.astaroth.glufca.com/?p=346</li> </ul> <p>Otro truco que tambi\u00e9n funcion\u00f3 sin necesidad de hacer lo anterior fue reconfigurar xorg a la configuraci\u00f3n por defecto y luego en la composici\u00f3n de m\u00faltiples monitores, situar uno debajo del otro en lugar de uno al lado del otro.</p>"},{"location":"sistemas/ubuntu.html#actualizacion-de-raring-a-saucy","title":"Actualizaci\u00f3n de raring a saucy","text":"<p>Apache cambia de versi\u00f3n de 2.2 a 2.4. Aqu\u00ed encontr\u00e9 soluci\u00f3n a los problemas que eso supuso.</p>"},{"location":"sistemas/ubuntu.html#recursos-graficos","title":"Recursos gr\u00e1ficos","text":"<pre><code>/usr/share/icons\n/usr/share/app-install/icons\n/usr/share/pixmaps\n/usr/share/icons/gnome\n/usr/share/icons/hicolor\n/usr/share/icons/Human\n/usr/share/icons/Humanity        &lt;---\n/usr/share/icons/oxygen\n/usr/share/icons/default.kde4    &lt;---\n</code></pre>"},{"location":"sistemas/ubuntu.html#convertir-un-video-a-formato-3gp-h263aac","title":"Convertir un video a formato 3GP (H263+AAC)","text":"<ul> <li>Instalar un repositorio no oficial que contiene los codecs:</li> </ul> <pre><code>$ sudo -E wget --output-document=/etc/apt/sources.list.d/medibuntu.list http://www.medibuntu.org/sources.list.d/$(lsb_release -cs).list &amp;&amp; sudo apt-get --quiet update &amp;&amp; sudo apt-get --yes --quiet --allow-unauthenticated install medibuntu-keyring &amp;&amp; sudo apt-get --quiet update\n</code></pre> <ul> <li>Instalar el codificador y los codecs:</li> </ul> <pre><code>$ sudo aptitude install ffmpeg libavcodec-extra-53\n</code></pre> <ul> <li>Codificar el video:</li> </ul> <pre><code>$ ffmpeg -i EspacioMudejar.wmv -s qcif -vcodec h263 -acodec libfaac -ac 1 -ar 8000 -r 25 -ab 32 -strict experimental -y EspacioMudejar.3gp\n</code></pre> <p>Las opciones m\u00e1s importantes son:</p> <ul> <li>ar: Frecuencia de audio</li> <li>r: framerate</li> <li>ab: Audio bitrate en kbps</li> </ul>"},{"location":"sistemas/ubuntu.html#convertir-ape-a-wav","title":"Convertir APE a WAV","text":"<p>Los ficheros .ape con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .ape se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete <code>ffmpeg</code> y ejecutando el siguiente comando:</p> <pre><code>$ ffmpeg -i fichero.ape fichero.wav\n</code></pre> <p>Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .ape por el nuevo .wav.</p>"},{"location":"sistemas/ubuntu.html#convertir-flac-a-wav","title":"Convertir FLAC a WAV","text":"<p>Los ficheros .flac con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .flac se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete <code>flac</code> y ejecutando el siguiente comando:</p> <pre><code>$ flac -d fichero.flac\n</code></pre> <p>Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .flac por el nuevo .wav.</p>"},{"location":"sistemas/ubuntu.html#restaurar-panel-gnome","title":"Restaurar panel Gnome","text":"<p>(fuente 1; fuente 2)</p> <pre><code>$ gconftool --recursive-unset /apps/panel\n$ rm -rf ~/.gconf/apps/panel\n$ pkill gnome-panel\n</code></pre>"},{"location":"sistemas/ubuntu.html#concatenar-pdfs","title":"Concatenar PDF's","text":"<p>Con <code>pdftk</code> programa en linea de comando para procesar ficheros PDF. Est\u00e1 para casi todas las plataformas.</p> <pre><code>$ sudo aptitude search pdftk\ni pdftk - A useful tool for manipulating PDF documents\n\n$ sudo aptitude install pdftk\n</code></pre> <p>Concatenar todos los archivos facilmente que tengas en una carpeta:</p> <pre><code>$ pdftk carpeta_con_todos_ficheros/*.pdf cat output fichero_concatenado.pdf\n</code></pre> <p>Tiene muchas mas funcionalidades consultables con \u2013help, pero si quieres, puedes echarle un vistazo a un articulo de Linux-Magazine \u201cPDF a tope\u201d.</p>"},{"location":"sistemas/ubuntu.html#apod","title":"APOD","text":"<p>Programa para descargar y ajustar como fondo de escritorio la imagen astron\u00f3mica del d\u00eda de la web APOD. Es necesario que se encuentre Python instalado en el sistema.</p> <p>Instalar el siguiente script en alg\u00fan lugar:</p> <pre><code>#!/usr/bin/python\n\n#APOD in the GNOME desktop\n#Author: Rodrigo Rivas Costa.\n#Mail:  rodrigorivascosta@gmail.com\n#Web:   http://rodrigo.dualnot.com/\n\n# This program is in public domain, so do whatever you wish with it,\n# although it'd be nice if you keep the above notice.\n# Just don't blame me if it blows your computer.\n\nimport urllib\nimport gconf\nimport os\n\ndir = os.getenv('HOME') + '/.apod'\ntry:\n    os.mkdir(dir)\nexcept:\n    pass\n\ntry:\n    execfile(dir + '/options.py')\nexcept:\n    pass\n\ndef DoAPOD():\n    u = urllib.urlopen('http://apod.nasa.gov/apod/')\n    KEY1 = 'href=\"'\n    KEY2 = '\"'\n    image = None\n    for line in u.readlines():\n        pos1 = line.find(KEY1)\n        if pos1 == -1:\n            continue\n        pos1 += len(KEY1)\n        pos2 = line.find(KEY2, pos1)\n        if pos2 == -1:\n            continue\n        href = line[pos1:pos2]\n        hrefl = href.lower()\n        if hrefl.endswith('.jpg') or hrefl.endswith('.png'):\n            image = href\n            break\n    u.close()\n\n    if not image:\n        return\n\n    image_base = os.path.split(image)[-1]\n    image_base_ext = os.path.splitext(image_base)\n    image_base = 'apod' + image_base_ext[-1]\n\n    if not (image.startswith('http:') or image.startswith('ftp:')):\n        if not image.startswith('/'):\n            image = '/apod.nasa.gov/apod/' + image\n        image = 'http:/' + image\n\n    img = urllib.urlopen(image)\n    d = img.read()\n    img.close()\n\n    try:\n        os.unlink('apod.jpg')\n    except:\n        pass\n    try:\n        os.unlink('apod.png')\n    except:\n        pass\n\n    name = dir + '/' + image_base\n    f = file(name, 'wb')\n    f.write(d)\n    f.close()\n\n    cli = gconf.client_get_default()\n    cli.set_string('/desktop/gnome/background/picture_filename', name)\n    cli.set_string('/desktop/gnome/background/picture_options', 'zoom')\n\nif __name__ == '__main__':\n    DoAPOD()\n</code></pre> <p>Por \u00faltimo programar una tarea en cron para ejecutar el script con el usuario al que queramos que se aplique el fondo de escritorio. Por ejemplo introduciendo la siguiente l\u00ednea en <code>/etc/crontab</code> para que se ejecute a las 10 de la ma\u00f1ana:</p> <pre><code>00 10   * * *   edumoreno       /home/edumoreno/.apod/apod\n</code></pre> <p>En el ejemplo se ha puesto como ejemplo el usuario <code>edumoreno</code> as\u00ed como su home.</p>"},{"location":"sistemas/ubuntu.html#instalar-oracle-java","title":"Instalar Oracle Java","text":"<p>(Fuentes: 1 y 2)</p> <p>Movemos la carpeta creada despu\u00e9s de la instalaci\u00f3n (llamada <code>jre1.7.0_05</code> en este ejemplo) a una ruta m\u00e1s apropiada:</p> <pre><code>$ sudo mv jre1.7.0_05 /usr/lib/jvm\n</code></pre> <p>Establecemos el nuevo Java como una de las \"alternativas de java\":</p> <pre><code>$ sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jre1.7.0_05/bin/java\" 1\n</code></pre> <p>Ahora establecemos la \"nueva alternativa\" como la real de Java. Este paso hace que la versi\u00f3n de Oracle sea la usada por defecto:</p> <pre><code>$ sudo update-alternatives --set java /usr/lib/jvm/jre1.7.0_05/bin/java\n</code></pre> <p>Para comprobar si tenemos la versi\u00f3n 1.7.0, tecleamos en la terminal:</p> <pre><code>$ java -version\njava version \"1.7.0_05\"\nJava(TM) SE Runtime Environment (build 1.7.0_05-b05)\nJava HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode)\n</code></pre> <p>Para ver c\u00f3mo ha quedado el estado de las alternativas:</p> <pre><code>$ update-alternatives --config java\n</code></pre> <p>Para ver f\u00edsicamente c\u00f3mo han quedado las alternativas relativas a <code>java</code>:</p> <pre><code>$ ls -l /etc/alternatives/java*\n</code></pre> <p>Si nos interesa borrar alguna de las alternativas (por ejemplo una para <code>java</code>):</p> <pre><code>$ sudo update-alternatives --remove java /usr/lib/jvm/jdk1.8.0_20/bin/java\n</code></pre> <p>Hay un PPA para poder instalar el JDK m\u00e1s f\u00e1cilmente. Se pueden ver las instrucciones aqu\u00ed. Desafortunadamente dej\u00f3 de funcionar a mediados de abril de 2019 por cambios en la pol\u00edtica de distribuci\u00f3n de Java por parte de Oracle. A partir de ahora instalar manualmente siguiendo estas instrucciones o instalar el JDK que se distribuye en forma de .deb.</p>"},{"location":"sistemas/ubuntu.html#reparacion-del-sistema-de-archivos-cuando-se-pone-en-modo-solo-lectura","title":"Reparaci\u00f3n del sistema de archivos cuando se pone en modo \"s\u00f3lo lectura\"","text":"<pre><code>$ sudo fsck\n</code></pre>"},{"location":"sistemas/ubuntu.html#descarga-de-un-video-incrustado-en-un-reproductor-flash","title":"Descarga de un v\u00eddeo incrustado en un reproductor Flash","text":"<p>Fuente</p> <p>Hacer captura Wireshark. Filtrar los paquetes RTMP con el filtro: \"rtmpt\". Localizar en los paquetes RTMP los comandos Handshake o Invoke la base de la url, lo que est\u00e1 en una propiedad llamada \"tcUrl\". Por ejemplo en un v\u00eddeo de Antena3 de F1 esta propiedad val\u00eda:</p> <pre><code>rtmp://antena3tvfs.fplive.net/antena3mediateca\n</code></pre> <p>Luego localizar el fichero en concreto. Suele estar en otro paquete y est\u00e1 relacionado con el comando \"play\". En el caso del ejemplo anterior sal\u00eda:</p> <pre><code>mp4:mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\n</code></pre> <p>Unir las dos piezas para construir la URL completa:</p> <pre><code>rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\n</code></pre> <p>Descargar el stream con el comando \"rtmpdump\":</p> <pre><code>$ rtmpdump -r \"rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\" -o archivo.mp4\n</code></pre> <p>En ocasiones se produce el error siguiente:</p> <pre><code>WARNING: Received FLV packet before play()! Ignoring.\n</code></pre> <p>En estos casos utilizar el siguiente comando que separa las dos porciones de la URL:</p> <pre><code>$ rtmpdump -r \"rtmp://alacarta.aragontelevision.es/vod\" -y \"mp4:/_archivos/videos/web/15288/15288.mp4\" -o archivo.flv\n</code></pre> <p>Para v\u00eddeos de emisiones en vivo hay que a\u00f1adir la opci\u00f3n <code>-v</code>. Por ejemplo, en una emisi\u00f3n de Arag\u00f3nTV, en la captura Wireshark se localizaron los siguientes elementos:</p> <ul> <li>Paquete Handshake S2 =&gt; tcUrl = rtmp://aragontvlivefs.fplive.net/aragontvlive-live</li> <li>Paquete play =&gt; valor = stream_normal_abt</li> </ul> <p>As\u00ed pues la URL final ser\u00e1: <code>rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt</code> y el comando de descarga:</p> <pre><code>$ rtmpdump -v -r \"rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt\" -o archivo.mp4\n</code></pre> <p>Para descargar v\u00eddeos desde YouTube, last.fm, Google video, Dailymotion y Vimeo se puede utilizar el comando <code>clive</code>. Aqu\u00ed comentan c\u00f3mo se usa.</p>"},{"location":"sistemas/ubuntu.html#descarga-video-de-a3player","title":"Descarga v\u00eddeo de A3Player","text":""},{"location":"sistemas/ubuntu.html#enlaces_1","title":"Enlaces","text":"<ul> <li>C\u00f3mo descargar v\u00eddeos en formato M3U8 (o HLS)</li> <li>http live streaming player</li> </ul> <p>Las carreras de Formula1 \u00faltimamente son emitidas en el formato HLS. Para descargar una carrera empezar haciendo una captura con Wireshark desde el momento en que se le da al Play hasta que se empieza a ver parte del v\u00eddeo (esperando que terminen los anuncios). Luego filtrar en Wireshark con la siguiente expresi\u00f3n:</p> <pre><code>http.request.uri contains \"playlist.m3u8\"\n</code></pre> <p>Localizar la URL de descarga del fichero playlist.m3u8. Por ejemplo podr\u00eda ser:</p> <pre><code>http://geodeswowa3player.antena3.com/vcg/_definst_/mp4:assets3/2013/10/26/E6941C5D-2A9F-414B-B3FF-01FAC33073C4/sigra.mp4/playlist.m3u8?pulse=assets3%2F2013%2F10%2F26%2FE6941C5D-2A9F-414B-B3FF-01FAC33073C4%2F%7C1382835190%7Cb23df1201096fc1cc490427e05307f70\n</code></pre>"},{"location":"sistemas/ubuntu.html#compresion-batch-de-videos","title":"Compresi\u00f3n batch de v\u00eddeos","text":"<p>Instalar el cliente de linea de comando de Handbrake.</p> <p>Dependiendo de la extensi\u00f3n habr\u00e1 que cambiar el <code>ls</code> inicial. Los v\u00eddeos de salida son MP4, por lo que si la extensi\u00f3n inicial no es esa, habr\u00e1 que cambiarla en los ficheros finales.</p> <pre><code>$ mkdir comp\n$ ls *.mp4 | awk '{print \"HandBrakeCLI -Z Normal -i \"$0\" -o comp/\"$0}' | sh\n</code></pre>"},{"location":"sistemas/ubuntu.html#resampleado-de-video-con-handbrake","title":"Resampleado de video con HandBrake","text":"<p>(Fuente)</p> <p>On the Video tab use Avg Bitrate and use 2500 to 3000 depending if a big action movie(3000) or if less fast action/movement in the movie(2500). Make sure to click on 2-Pass Encoding and Turbo first pass.</p>"},{"location":"sistemas/ubuntu.html#split-de-videos","title":"Split de v\u00eddeos","text":"<p>(Fuente)</p> <p>Con el siguiente comando:</p> <pre><code>$ ffmpeg -i archivo_original.mp4 -codec copy -ss 00:00:00 -t 00:04:09 archivo_recortado.mp4\n</code></pre> <p>Donde el valor de la opci\u00f3n -ss es el instante de inicio en hh:mm:ss y el valor de -t es la longitud en hh:mm:ss</p> <p>Es importante respetar el orden de las opciones, sobre todo poner al principio la opci\u00f3n <code>-i</code> que indica el fichero de entrada. De no hacerlo as\u00ed (se explica aqu\u00ed) las opciones de codec no saben localizar bien los codecs del fichero de entrada.</p> <p>Durante un tiempo en Ubuntu, <code>ffmpeg</code> no estuvo disponible. Su sustituto fue <code>avconv</code>, compatible la mayor\u00eda de las veces. No admit\u00eda sin embargo la opci\u00f3n de copiar el codec de audio y v\u00eddeo. Hab\u00eda que especificarlo. Una lista de encoders soportados se puede obtener ejecutando:</p> <pre><code>$ avconv -encoders\n</code></pre> <p>Un par de codecs comprobados que suelen dar buen resultados son h264 y aac:</p> <pre><code>ffmpeg -i archivo_original.mp4 -acodec aac -vcodec h264 -ss 01:07:38 -t 00:01:14 archivo_recortado.mp4\n</code></pre>"},{"location":"sistemas/ubuntu.html#crop-en-video","title":"Crop en video","text":"<pre><code>$ ffmpeg -i input.mp4 -filter:v \"crop=w:h:x:y\" output.mp4\n</code></pre> <p>donde:</p> <ul> <li>w: ancho final</li> <li>h: alto final</li> <li>x: coordenada x del punto superior izquierdo del recuadro</li> <li>y: coordenada y del punto superior izquierdo del recuadro</li> </ul>"},{"location":"sistemas/ubuntu.html#extraer-frame-de-video","title":"Extraer frame de video","text":"<pre><code>$ ffmpeg -i input.mp4 -ss 00:01:00 -frames:v 1 frame.png\n</code></pre> <p>donde el argumento -ss marca el instante del frame en hh:mm:ss</p>"},{"location":"sistemas/ubuntu.html#redimensionado-de-imagenes-en-lote","title":"Redimensionado de im\u00e1genes en lote","text":"<p>Por ejemplo a 1080 de alto manteniendo el ratio dentro de un directorio llamado resized:</p> <pre><code>$ convert '*.jpg[x1080]' resized/%03d.jpg\n</code></pre> <p>En ocasiones, si hay varios miles de fotos, se puede llenar la memoria. En este caso hacer la conversi\u00f3n con el siguiente comando, que trata las im\u00e1genes una a una:</p> <pre><code>a=1\nfor i in *.jpg; do\n  new=$(printf \"%04d.jpg\" ${a})\n  convert ${i}[x1080] resized/${new}\n  let a=a+1\ndone\n</code></pre>"},{"location":"sistemas/ubuntu.html#crop-y-resize-de-imagenes-en-lote","title":"Crop y resize de im\u00e1genes en lote","text":"<pre><code>a=1\nfor i in *.jpg; do\n  new=$(printf \"%04d.jpg\" ${a})\n  convert ${i} -crop wxh+x+y -resize wsxhs -gravity Center ${new}\n  let a=a+1\ndone\n</code></pre> <p>donde:</p> <ul> <li>w: ancho del crop</li> <li>h: alto del crop</li> <li>x: posici\u00f3n horizontal esquina superior derecha del crop</li> <li>y: posici\u00f3n vertical esquina superior derecha del crop</li> <li>ws: ancho del reescalado final</li> <li>hs: alto del reescalado final</li> </ul>"},{"location":"sistemas/ubuntu.html#conversion-de-formato-en-lote","title":"Conversi\u00f3n de formato en lote","text":"<pre><code>for file in *.jpg; do\n  filename=$(basename \"$file\")\n  fileid=${filename%%.*}\n  convert ${filename} ${fileid}.png\ndone\n</code></pre>"},{"location":"sistemas/ubuntu.html#renombrado-de-archivos-en-lote","title":"Renombrado de archivos en lote","text":"<p>Por ejemplo una serie de archivos jpg:</p> <pre><code>a=1\nfor i in *.jpg; do\n  new=$(printf \"%04d.jpg\" ${a})\n  mv ${i} ${new}\n  let a=a+1\ndone\n</code></pre>"},{"location":"sistemas/ubuntu.html#compresion-de-ficheros-en-lote","title":"Compresi\u00f3n de ficheros en lote","text":"<pre><code>for file in *.col; do\n  filename=$(basename \"${file}\")\n  fileid=${filename%%.*}\n  7z a \"${fileid}.7z\" \"${filename}\"\ndone\n</code></pre>"},{"location":"sistemas/ubuntu.html#sustitucion-de-cadena-en-ficheros-en-lote","title":"Sustituci\u00f3n de cadena en ficheros en lote","text":"<pre><code>for file in *.cfg; do\n  filename=$(basename \"${file}\")\n  fileid=${filename%%.*}\n  sed -i 's/ShowFps 1/ShowFps 0/' \"${file}\"\ndone\n</code></pre>"},{"location":"sistemas/ubuntu.html#montaje-de-video-stopmotion-a-partir-de-imagenes","title":"Montaje de v\u00eddeo StopMotion a partir de im\u00e1genes","text":"<p>A 10fps por ejemplo (Fuente):</p> <pre><code>$ ffmpeg -f image2 -r 10 -i %04d.jpg -vf scale=1440:1080 -r:v 10 -c:v libx264 -qp 0 -preset veryslow -an \"video.mkv\"\n</code></pre>"},{"location":"sistemas/ubuntu.html#montaje-de-gif-a-partir-de-imagenes","title":"Montaje de gif a partir de im\u00e1genes","text":"<pre><code>convert -delay n -loop 0 *.jpg output.gif\n</code></pre> <p>donde:</p> <ul> <li>n: milisegundos entre cada frame.</li> </ul>"},{"location":"sistemas/ubuntu.html#configurar-wireshark-para-poder-capturar-con-usuarios-no-root","title":"Configurar Wireshark para poder capturar con usuarios no-root","text":"<p>Ejecutar lo siguiente:</p> <pre><code>$ sudo dpkg-reconfigure wireshark-common\n$ sudo usermod -a -G wireshark &lt;usuario&gt;\n</code></pre> <p>Reiniciar la sesi\u00f3n.</p>"},{"location":"sistemas/ubuntu.html#solucionar-el-problema-con-wireshark-en-las-ultimas-versiones-de-ubuntu","title":"Solucionar el problema con Wireshark en las \u00faltimas versiones de Ubuntu","text":"<p>Cuando se inicia una captura, se cuelga Wireshark, emitiendo una serie infinita de errores de GTK en consola. En esta p\u00e1gina comentan varios workarrounds. Por ejemplo editando el fichero <code>/usr/share/applications/wireshark.desktop</code> y cambiando la l\u00ednea de ejecuci\u00f3n por:</p> <pre><code>Exec=env LIBOVERLAY_SCROLLBAR=0 wireshark %f\n</code></pre>"},{"location":"sistemas/ubuntu.html#ficheros-implicados-en-arranque","title":"Ficheros implicados en arranque","text":"<ul> <li><code>/etc/rc.local</code>: This script is executed at the end of each multiuser runlevel.</li> </ul>"},{"location":"sistemas/ubuntu.html#montar-imagen-de-disco-o-particion","title":"Montar imagen de disco o partici\u00f3n","text":"<p>(Fuente)</p> <ol> <li> <p>Averiguar la estructura de las particiones:</p> <pre><code>$ fdisk -l Rpi_8gb_wheezy_backup.img\nDisco Rpi_8gb_wheezy_backup.img: 7,5 GiB, 8068792320 bytes, 15759360 sectores\nUnidades: sectores de 1 * 512 = 512 bytes\nTama\u00f1o de sector (l\u00f3gico/f\u00edsico): 512 bytes / 512 bytes\nTama\u00f1o de E/S (m\u00ednimo/\u00f3ptimo): 512 bytes / 512 bytes\nTipo de etiqueta de disco: dos\nIdentificador del disco: 0x000981cb\n\nDispositivo                Inicio Comienzo    Final Sectores Tama\u00f1o Id Tipo\nRpi_8gb_wheezy_backup.img1            8192   122879   114688    56M  c W95 FAT32 (LBA)\nRpi_8gb_wheezy_backup.img2          122880 15759359 15636480   7,5G 83 Linux\n</code></pre> </li> <li> <p>Calcular el offset multiplicando el sector de comienzo de la partici\u00f3n por el tama\u00f1o del sector:</p> <pre><code>122880 * 512 = 62914560\n</code></pre> </li> <li> <p>Montar:</p> <pre><code>$ sudo mount -t ext4 -o loop,offset=62914560,ro,noexec Rpi_8gb_wheezy_backup.img mnt\n</code></pre> </li> </ol>"},{"location":"sistemas/ubuntu.html#screencast","title":"Screencast","text":"<pre><code>$ avconv -f x11grab -r 25 -s 910x550 -i :0.0 -vcodec huffyuv screencast.avi\n</code></pre>"},{"location":"sistemas/ubuntu.html#gestion-de-modulos","title":"Gesti\u00f3n de m\u00f3dulos","text":""},{"location":"sistemas/ubuntu.html#anadir-un-modulo-al-kernel","title":"A\u00f1adir un m\u00f3dulo al kernel","text":"<pre><code>$ sudo modprobe &lt;modulo&gt;\n</code></pre> <p>Si se quiere a\u00f1adir de forma permanente, es decir, de forma autom\u00e1tica en el arranque, se incorpora el nombre del m\u00f3dulo al fichero <code>/etc/modules</code>.</p> <p>Cuando el m\u00f3dulo que se carga es un driver de un dispositivo, el kernel env\u00eda un evento al subsistema <code>udev</code>. La monitorizaci\u00f3n de estos mensajes se puede hacer teniendo abierto un terminal con el siguiente comando lanzado (fuente):</p> <pre><code>$ udevadm monitor --property\n</code></pre>"},{"location":"sistemas/ubuntu.html#listado-de-modulos","title":"Listado de m\u00f3dulos","text":"<pre><code>$ lsmod\n</code></pre>"},{"location":"sistemas/ubuntu.html#informacion-de-un-modulo","title":"Informaci\u00f3n de un m\u00f3dulo","text":"<pre><code>$ modinfo &lt;modulo&gt;\n</code></pre>"},{"location":"sistemas/ubuntu.html#ficheros-definicion-variables-de-entorno","title":"Ficheros definici\u00f3n variables de entorno","text":"<p>Si se necesita definir una variable global se podr\u00e1 hacer en los ficheros:</p> <ul> <li><code>/etc/environment</code></li> <li><code>/etc/profile</code></li> <li><code>/etc/profile.d</code></li> <li><code>/etc/bashrc</code> o <code>/etc/bash.bashrc</code></li> </ul> <p>Si es a nivel de usuario se har\u00e1 en:</p> <ul> <li><code>~/.bashrc</code></li> <li><code>~/.bash_profile</code></li> </ul>"},{"location":"sistemas/ubuntu.html#poner-barras-de-scroll-normales","title":"Poner barras de scroll normales","text":"<pre><code>gsettings set com.canonical.desktop.interface scrollbar-mode normal\n</code></pre>"},{"location":"sistemas/ubuntu.html#skype-en-tray","title":"Skype en tray","text":"<p>Instalar los paquetes <code>sni-qt</code> y <code>sni-qt:i386</code>.</p>"},{"location":"sistemas/ubuntu.html#workrave-en-tray","title":"Workrave en tray","text":"<p>Fuente</p> <pre><code>gsettings set com.canonical.Unity.Panel systray-whitelist \"['all']\"\n</code></pre>"},{"location":"sistemas/ubuntu.html#localizacion-de-ficheros-desktop","title":"Localizaci\u00f3n de ficheros .desktop","text":"<ul> <li>Los del usuario se encuentran en: <code>~/.local/share/applications</code></li> <li>Los del sistema en: <code>/usr/share/applications</code></li> </ul>"},{"location":"sistemas/ubuntu.html#configuracion-de-gedit","title":"Configuraci\u00f3n de gedit","text":"<p>Al menos las \u00faltimas versiones de gedit no tienen un panel de ajustes para las opciones predeterminadas. Cada vez que arranca aparecen preajustados 8 espacios como anchura del tabulador y no sustituye por espacios. Puede sacarse una lista de todos los ajustes que se pueden cambiar con el siguiente comando:</p> <pre><code>gsettings list-recursively | grep -i gedit.preferences.editor\n</code></pre> <p>Los ajustes del tabulador mencionados antes, para pasar a 4 espacios, ejecutar:</p> <pre><code>gsettings set org.gnome.gedit.preferences.editor insert-spaces true\ngsettings set org.gnome.gedit.preferences.editor tabs-size 4\n</code></pre> <p>Otro ajuste interesante es el del wrap mode. Se puede hacer con (puede valer 'none', 'word', 'char', o 'word-char'):</p> <pre><code>gsettings set org.gnome.gedit.preferences.editor wrap-mode 'word'\n</code></pre>"},{"location":"sistemas/ubuntu.html#localizar-paquete-que-contiene-un-fichero","title":"Localizar paquete que contiene un fichero","text":"<p>(Fuente)</p> <ol> <li> <p>Instalar <code>apt-file</code>:</p> <pre><code>$ sudo apt-get install apt-file\n</code></pre> </li> <li> <p>Actualizar su base de datos:</p> <pre><code>$ sudo apt-file update\n</code></pre> </li> <li> <p>Hacer la b\u00fasqueda:</p> <pre><code>$ apt-file search &lt;fichero_con_ruta&gt;\n</code></pre> </li> </ol>"},{"location":"sistemas/ubuntu.html#configuracion-de-idiomas-del-sistema-locales","title":"Configuraci\u00f3n de idiomas del sistema (locales)","text":"<pre><code>$ sudo dpkg-reconfigure locales\n</code></pre>"},{"location":"sistemas/ubuntu.html#configuracion-de-swap-en-disco-ssd","title":"Configuraci\u00f3n de SWAP en disco SSD","text":"<p>Siguiendo [esta p\u00e1gina], a\u00f1ado lo siguiente al fichero <code>/etc/sysctl.conf</code> para bajar el 60% que usa Ubuntu por defecto a 10%:</p> <pre><code>vm.swappiness=10\n</code></pre>"},{"location":"sistemas/ubuntu.html#buscar-paquetes-y-ficheros-de-los-mismos","title":"Buscar paquetes y ficheros de los mismos","text":"<p>Fuente</p> <ul> <li>Encontrar un paquete por su nombre: <code>apt-cache search 'cadena'</code></li> <li>Encontrar un paquete ya instalado que contiene un fichero: <code>dpkg -S 'fichero'</code></li> <li>Encontrar un paquete no instalado que contiene un fichero: <code>apt-file search 'fichero'</code></li> <li>Localizar el repositorio del que procede un paquete: <code>apt-cache policy 'paquete'</code></li> <li>Listar los ficheros que contiene un paquete ya instalado: <code>dpkg -L paquete</code></li> <li>Listar los ficheros que contiene un paquete no instalado: <code>apt-file list paquete</code> (antes hay que hacer <code>apt-file update</code>)</li> <li>Listar los ficheros de un fichero .deb: <code>dpkg -c paquete.deb</code></li> </ul>"},{"location":"sistemas/ubuntu.html#limpieza-de-paquetes-snap","title":"Limpieza de paquetes snap","text":"<p>Localizar los paquetes desactivados con:</p> <pre><code>$ snap list --all|fgrep desactivado\n</code></pre> <p>Y luego borrarlos con:</p> <pre><code>$ snap remove --revision XXX NOMBRE\n</code></pre> <p>Por ejemplo:</p> <pre><code>edumoreno@eduardo-HP-Folio-13:~$ snap list --all|fgrep desactivado\ncanonical-livepatch   9.7.3                       105    latest/stable    canonical*  desactivado\nchromium              94.0.4606.81                1781   latest/stable    canonical*  desactivado\nedumoreno@eduardo-HP-Folio-13:~$ snap remove --revision 105 canonical-livepatch\ncanonical-livepatch (revisi\u00f3n 105) eliminado\nedumoreno@eduardo-HP-Folio-13:~$ snap remove --revision 1781 chromium\nchromium (revisi\u00f3n 1781) eliminado\n</code></pre>"},{"location":"sistemas/ubuntu.html#montar-ext4-para-usuario","title":"Montar ext4 para usuario","text":"<p>Normalmente al automontar una partici\u00f3n ext4 se respetar\u00e1n los ID's de los propietarios:grupos de los ficheros. Para montar temporalmente con permisos ajustados para un usuario, utilizar <code>bindfs</code> de esta forma:</p> <pre><code># El punto de partida es una partici\u00f3n automontada de esta forma:\n# /dev/sdb1                                   306616440      64348   290907216   1% /media/edumoreno/47acea17-841f-42d3-85f2-886543f056db\nsudo bindfs -u $(id -u) -g $(id -g) /media/edumoreno/47acea17-841f-42d3-85f2-886543f056db /home/edumoreno/mnt/\n</code></pre>"},{"location":"sistemas/ubuntu.html#cambiar-id-de-usuario","title":"Cambiar ID de usuario","text":"<p>Por ejemplo para sincronizar con los IDs de un sistema de archivos montado por NFS y as\u00ed no tener problemas de permisos. En el siguiente ejemplo se cambia el ID del usuario edumoreno a 1002:</p> <pre><code>sudo usermod -u 1002 edumoreno\n</code></pre>"},{"location":"sistemas/ubuntu_phone.html","title":"Ubuntu Phone","text":""},{"location":"sistemas/ubuntu_phone.html#enlaces","title":"Enlaces","text":"<ul> <li>Installing Ubuntu</li> <li>Install Android On BQ Aquaris Ubuntu Phone In Linux</li> </ul>"},{"location":"sistemas/ubuntu_phone.html#activar-ssh","title":"Activar SSH","text":"<pre><code>sudo service ssh start\nsudo setprop persist.service.ssh true\nsudo reboot\n</code></pre>"},{"location":"sistemas/ubuntu_phone.html#permitir-cambios-en","title":"Permitir cambios en /","text":"<pre><code>sudo mount -o remount,rw /\n</code></pre>"},{"location":"sistemas/ubuntu_phone.html#ejecutar-en-modo-desktop","title":"Ejecutar en modo desktop","text":"<pre><code>gsettings set com.canonical.Unity8 usage-mode Windowed\n</code></pre>"},{"location":"sistemas/ubuntu_phone.html#retornar-a-interfaz-telefono","title":"Retornar a interfaz tel\u00e9fono","text":"<pre><code>gsettings set com.canonical.Unity8 usage-mode Staged\n</code></pre>"},{"location":"sistemas/unix.html","title":"UNIX","text":""},{"location":"sistemas/unix.html#cheat-sheets","title":"Cheat sheets","text":"<ul> <li>Colecci\u00f3n de Carlos Fenollosa</li> <li>Tricks de Carlos Fenollosa</li> <li>Bash Cheat Sheet</li> <li>Programar en Bash, peque\u00f1o manual de referencia</li> <li>How To Use Linux Screen</li> <li>Bash Conditional Expressions</li> <li>Linux Command Library</li> </ul>"},{"location":"sistemas/unix.html#comandos-utiles","title":"Comandos \u00fatiles","text":"<ul> <li><code>strace -e file [command]</code>: runs <code>command</code>, printing out any time a file is opened or checked.</li> <li><code>strace -e file,network,process [command]</code>: the same as above, but also printing network process and subcommands run.</li> <li><code>strace -e file,process -f [command]</code>: the -f parameter follows forks -- in case it's not main command but a subshell that you're interested in.</li> <li><code>strace -p [PID]</code>: Connect to pid PID and start tracing.</li> <li><code>route -n</code>: Tabla de rutas del sistema.</li> <li><code>du -h --max-depth=1 .</code>: Tama\u00f1o de un directorio y sus subdirectorios directos.</li> <li><code>find [directorio] ! -user [usuario] -ls</code>: Lista los ficheros que NO pertenecen a un usuario.</li> <li><code>badblocks -swv /dev/sda</code>: Bloquear sectores defectuosos (sustituir <code>/dev/sda</code> por el dispositivo que corresponda.</li> <li><code>dpkg --configure -a</code>: Soluciona problemas con paquetes mal instalados.</li> <li><code>mkdosfs -F 32 -v -n \"\" /dev/sdc1</code>: Formato de partici\u00f3n en FAT32.</li> <li><code>du -sh */ | sort -h</code>: Muestra los directorios del directorio actual ordenados por tama\u00f1o (en formato humano) indicando su tama\u00f1o.</li> <li><code>cat fichero.txt | awk '{print $5}'</code>: Imprime la quinta columna (separando por espacios) de cada linea del fichero.</li> <li><code>cat fichero.txt | cut -d' ' -f5</code>: Imprime la quinta columna (separando por espacios) de cada linea del fichero.</li> <li><code>cat fichero.txt | sed -e 's/ /\\n/g'</code>: Sustituye todos los espacios del fichero por retornos de carro.</li> <li><code>netstat -nr</code>: Tabla de rutas del sistema.</li> <li><code>netstat -ntu|grep :80|wc -l</code>: n\u00famero de conexiones al servidor HTTP.</li> <li><code>netstat -ntu|grep :21|wc -l</code>: n\u00famero de conexiones al servidor FTP.</li> <li><code>netstat -tulanp</code>: Lista los puertos TCP/UDP abiertos (tanto de servidores como de clientes).</li> <li><code>netstat -tlnp</code>: Lista los puertos TCP abiertos de los servicios.</li> <li><code>crontab -e</code>: A\u00f1adir un job a cron.</li> <li><code>sudo badblocks /dev/sda &gt; badblocks.txt; sudo fsck -l badblocks.txt /dev/sda</code>: Bloqueo de sectores defectuosos del disco duro (fuente).</li> <li><code>sudo blkid</code>: Lista los dispositivos de bloques (discos) disponibles en el sistema.</li> <li><code>sudo nmap -sP 192.168.1.0/24</code>: Descubrir todos los equipos presentes en la red <code>192.168.1.0</code>.</li> <li><code>sudo netstat -lp --inet</code>: Puertos de red abiertos y procesos asociados.</li> <li><code>sudo dd if=/dev/zero of=/dev/mmcblk0</code>: Formateo de una tarjeta de memoria (en realidad vale para cualquier dispositivo de almacenamiento).</li> <li><code>sudo tcpdump -s 0 -i ppp0 -w trafico.pcap</code>: Captura de tr\u00e1fico por el interfaz ppp0.</li> <li><code>iptables -L -n</code>: Listar reglas iptables en formato num\u00e9rico (muestra IPs en lugar de hostnames).</li> <li><code>iptables -t nat -L</code>: Listar reglas iptables de tabla NAT.</li> <li><code>wget -q -O - url</code>: Hace la request de la URL sin emitir trazas (-q = no verbose) y redireccionando la response a la salida est\u00e1ndar (-O -).</li> <li><code>route -n</code>: Muestra la tabla de rutas con IP's en lugar de con nombres.</li> <li><code>cat /etc/resolv.conf</code>: Muestra el gateway en uso.</li> <li><code>nmcli dev show &lt;adaptador_red&gt;</code>: Muestra los par\u00e1metros de la conexi\u00f3n de red (IP, gateway, DNS's, etc.).</li> <li><code>ldd &lt;binario&gt;</code>: Indica las librer\u00edas que usa el binario.</li> <li><code>exiftool -AllDates='2010:08:08 15:35:33' -overwrite_original photo.jpg</code>: Actualiza todas las fechas dentro de la metainformaci\u00f3n de un JPG.</li> <li><code>exiftool -all= photo.jpg</code>: Borrar toda la metainformaci\u00f3n de una foto (por cuestiones de privacidad antes de subirla a un sitio por ejemplo).</li> <li><code>mplayer -vo caca MovieName.avi</code>: Reproduce un v\u00eddeo en consola con ascii. Para verlo en blanco y negro sustituir <code>caca</code> por <code>aa</code>.</li> <li><code>sudo traceroute -4T -p 22 192.168.1.203</code>: Comprobar la traza hasta alcanzar un determinado puerto en una determinada m\u00e1quina.</li> <li><code>dig @8.8.8.8 -t any eduardofilo.es</code>: Query DNS de los registros de cualquier tipo a trav\u00e9s del servidor <code>8.8.8.8</code> al dominio <code>eduardofilo.es</code>.</li> <li>Gesti\u00f3n de usuarios:<ul> <li><code>sudo adduser userName</code>: A\u00f1ade usuario creando home.</li> <li><code>sudo usermod -a -G groupName userName</code>: A\u00f1ade el usuario userName ya existente al grupo groupName ya existente.</li> <li><code>sudo userdel -r userName</code>: Borra el usuario eliminando su home.</li> </ul> </li> <li><code>sudo stat /proc/1/exe</code>: Nos da pistas de si el sistema funciona sobre SysV, Upstart o Systemd (fuente).</li> <li><code>stty &lt; /dev/port</code>: (sustituir <code>port</code> por lo que corresponda) Interroga el puerto para encontrar sus par\u00e1metros de conexi\u00f3n.</li> <li><code>recode ISO-8859-15/CR-LF..UTF8 fichero.txt</code>: Recodifica un fichero de texto del formato habitual en Windows a UTF-8.</li> <li><code>find . ! -type d -name \"*.txt\" -exec recode ISO-8859-15/CR-LF..UTF8 {} \\;</code>: Recodifica todos los ficheros de texto de un directorio del formato habitual en Windows a UTF-8.</li> <li><code>zenity</code>: Para dotar de cuadros de di\u00e1logo a los scripts bash. Documentaci\u00f3n</li> </ul>"},{"location":"sistemas/unix.html#alias-ssh","title":"Alias SSH","text":"<p>Para asimilar un identificador a una pareja user@host, editar el fichero <code>~/.ssh/config</code> y a\u00f1adir un bloque como el siguiente (fuente):</p> <pre><code>Host example\n  HostName example.com\n  User exampleuser\n</code></pre>"},{"location":"sistemas/unix.html#tunel-de-un-puerto-remoto-por-ssh","title":"Tunel de un puerto remoto por SSH","text":"<p>(Fuente) Para conducir el tr\u00e1fico hasta un host:puerto remoto canaliz\u00e1ndolo por un tunel seguro, se puede utilizar el comando <code>ssh</code>. Por ejemplo, vamos a tunelizar una conexi\u00f3n contra el puerto telnet de la m\u00e1quina remota <code>telnet.example.com</code> por medio del usuario <code>ssh-user</code> para tenerlo disponible en el puerto 2000 local de nuestra m\u00e1quina:</p> <pre><code>ssh -f ssh-user@telnet.example.com -L 2000:telnet.example.com:23 -N\n</code></pre> <p>A partir de ahora podremos conectarnos al telnet conectando con <code>localhost:2000</code>.</p>"},{"location":"sistemas/unix.html#uso-basico-de-screen","title":"Uso b\u00e1sico de <code>screen</code>","text":"<p>En esta cheat sheet se re\u00fanen bastantes comandos \u00fatiles. A continuaci\u00f3n indico el uso t\u00edpico:</p> <ol> <li> <p>Arrancamos una sesi\u00f3n:</p> <pre><code>shell ~$ screen\n</code></pre> </li> <li> <p>Aparece una splashscreen que cerramos pulsando enter y ya podemos trabajar</p> </li> <li> <p>Lanzamos un comando:</p> <pre><code>screenshell_1 ~$ top\n</code></pre> </li> <li> <p>Para cerrar la sesi\u00f3n screen que acabamos de abrir, tan s\u00f3lo hay que lanzar el comando <code>exit</code> (en este ejemplo, parando previamente el comando <code>top</code> que hab\u00edamos lanzado). Ahora sin embargo pretendemos dejarla abierta, con el comando <code>top</code> en ejecuci\u00f3n, para volver a ella m\u00e1s adelante. Es lo que se llama un detach (sirve para recordar la tecla que se pulsa al final de la combinaci\u00f3n de teclas). Para ello pulsamos la combinaci\u00f3n de teclas:</p> <pre><code>\"Ctrl-a\" \"d\"\n</code></pre> </li> <li> <p>Habremos vuelto a nuestro bash inicial. Cuando en cualquier momento queramos recuperar la sesi\u00f3n screen, lo haremos con el comando:</p> <pre><code>shell ~$ screen -r\n</code></pre> </li> <li> <p>Ahora estaremos viendo de nuevo la salida del comando top que hab\u00edamos dejado arrancado dentro de la sesi\u00f3n screen. Volvemos a abandonar la sesi\u00f3n sin cerrarla procediendo por tanto como en el paso 4:</p> <pre><code>\"Ctrl-a\" \"d\"\n</code></pre> </li> <li> <p>De vuelta al bash inicial, vamos a abrir una segunda sesi\u00f3n screen para ver c\u00f3mo podemos movernos a una u a otra. Arrancamos la sesi\u00f3n como hicimos con la primera:</p> <pre><code>shell ~$ screen\n</code></pre> </li> <li> <p>Cerramos la splashscreen y ejecutamos alg\u00fan comando para reconocer la sesi\u00f3n cuando volvamos a ella. Por ejemplo:</p> <pre><code>screenshell_2 ~$ ping 8.8.8.8\n</code></pre> </li> <li> <p>Abandonamos la sesi\u00f3n dej\u00e1ndola abierta:</p> <pre><code>\"Ctrl-a\" \"d\"\n</code></pre> </li> <li> <p>De vuelta al bash inicial ahora tenemos dos sesiones screen lanzadas. Ahora el comando <code>screen -r</code> no se puede lanzar sin especificar el identificador de la sesi\u00f3n tras la opci\u00f3n <code>-r</code>. Obtenemos la lista de sesiones con el siguiente comando:</p> <pre><code>shell ~$ screen -list\nThere are screens on:\n    12629.pts-7.eduardo-HP-Folio-13 (04/04/15 13:55:03) (Detached)\n    12609.pts-7.eduardo-HP-Folio-13 (04/04/15 13:54:51) (Detached)\n2 Sockets in /var/run/screen/S-edumoreno.\n</code></pre> </li> <li> <p>Ahora, para recuperar una de ella, por ejemplo la m\u00e1s vieja que conten\u00eda lanzado el comando <code>top</code> incorporaremos el identificador de la sesi\u00f3n tras la opci\u00f3n <code>-r</code>:</p> <pre><code>shell ~$ screen -r 12609.pts-7.eduardo-HP-Folio-13\n</code></pre> </li> <li> <p>Como se comentaba en el punto 4, para cerrar las sesiones simplemente saldremos con <code>exit</code>, aunque tambi\u00e9n, y sobre todo en caso de que la sesi\u00f3n se quedara bloqueada con alg\u00fan comando que no se pudiera cerrar, se puede matar la sesi\u00f3n con la siguiente combinaci\u00f3n de teclas:</p> <pre><code>\"Ctrl-a\" \"k\"\n</code></pre> </li> </ol>"},{"location":"sistemas/unix.html#buqueda-de-ficheros-que-contienen-una-cadena","title":"B\u00faqueda de ficheros que contienen una cadena","text":"<pre><code>#!/bin/bash\nSAVEIFS=$IFS\nIFS=$(echo -en \"\\n\\b\")\nfor file in `find .`\ndo\nfgrep \"[cadena a buscar]\" $file &gt; /dev/null 2&gt;&amp;1\nif [ $? -eq 0 ]; then\necho $file\nfi\ndone\nIFS=$SAVEIFS\n</code></pre> <p>En realidad el script anterior hace lo mismo que el simple comando siguiente:</p> <pre><code>$ fgrep -rl \"[cadena a buscar]\" .\n</code></pre>"},{"location":"sistemas/unix.html#ajustes-de-permisos-a-ficheros-y-directorios-por-separado","title":"Ajustes de permisos a ficheros y directorios por separado","text":"<pre><code>$ #Para los ficheros:\n$ find . ! -type d -exec chmod 664 {} \\;\n$ #Para los directorios:\n$ find . -type d -exec chmod 775 {} \\;\n</code></pre>"},{"location":"sistemas/unix.html#renombrado-de-ficheros-de-mayusculas-a-minusculas","title":"Renombrado de ficheros de may\u00fasculas a min\u00fasculas","text":"<p>(Fuente)</p> <pre><code>#!/bin/sh\nfor f in *; do\ng=`expr \"xxx$f\" : 'xxx\\(.*\\)' | tr '[A-Z]' '[a-z]'`\nmv \"$f\" \"$g\"\ndone\n</code></pre>"},{"location":"sistemas/unix.html#comprimir-uno-a-uno-los-ficheros-de-un-directorio","title":"Comprimir uno a uno los ficheros de un directorio","text":"<p>Por ejemplo ficheros de extensi\u00f3n <code>.gba</code>:</p> <pre><code>for f in *.gba; do\nfile=$(basename \"$f\" .gba)\nzip \"${file}.zip\" \"${file}.gba\"\ndone\n</code></pre>"},{"location":"sistemas/unix.html#quitar-los-primeros-5-caracteres-de-los-ficheros-de-un-directorio","title":"Quitar los primeros 5 caracteres de los ficheros de un directorio","text":"<pre><code>for f in *.gba; do\nmv \"$f\" \"${f:5:${#f}}\"\ndone\n</code></pre>"},{"location":"sistemas/unix.html#redireccion-de-salidas-en-bash","title":"Redirecci\u00f3n de salidas en bash","text":"<p>Para redirigir ambas salidas de un programa (estandar y error) hacer lo siguiente:</p> <pre><code>$ COMANDO&gt;FICHERO_O_DISPOSITIVO 2&gt;&amp;1\n</code></pre> <p>Para redirigir la salida de error a un fichero o dispositivo:</p> <pre><code>$ COMANDO 2&gt;FICHERO_O_DISPOSITIVO\n</code></pre> <p>En esta p\u00e1gina se documenta con m\u00e1s detalle este tema.</p>"},{"location":"sistemas/unix.html#ejecucion-remota-de-aplicaciones-xwindow","title":"Ejecuci\u00f3n remota de aplicaciones XWindow","text":"<ol> <li>Abrir el servidor X (Cygwin)</li> <li>Iniciar sesi\u00f3n remota: ssh -X [usuario]@[m\u00e1quina]</li> <li>Ejecutar la aplicaci\u00f3n</li> </ol>"},{"location":"sistemas/unix.html#mysql","title":"MySQL","text":"<ul> <li>Acceso: <code>mysql -u root -p</code></li> <li>Listar bases de datos: <code>show databases;</code></li> <li>Abrir una base de datos: <code>use [NombreBBDD];</code></li> <li>Listar tablas: <code>show tables;</code></li> </ul>"},{"location":"sistemas/unix.html#ficheros-de-configuracion-importantes","title":"Ficheros de configuraci\u00f3n importantes","text":"<ul> <li><code>/etc/security/limits.conf</code>: Configuration file for the pam_limits module. Permite limitar el n\u00famero de ficheros abiertos por el sistema, el n\u00famero de procesos, etc.</li> </ul>"},{"location":"sistemas/unix.html#solucion-al-problema-de-los-alias-alternatives-de-java6-en-ubuntu","title":"Soluci\u00f3n al problema de los alias (alternatives) de Java6 en Ubuntu","text":"<p>Los paquetes de Java 6 (1.6) en Ubuntu tienen problemas a la hora de ajustar los alias en /etc/alternatives cuando antes ha estado instalada otra versi\u00f3n (1.5 por ejemplo). Se puede forzar la generaci\u00f3n de los alias mediante las siguientes ordenes:</p> <pre><code>$ update-java-alternatives --list\n$ sudo update-java-alternatives --set [elegir el identificador de la lista que muestra el comando anterior]\n</code></pre>"},{"location":"sistemas/unix.html#bits-suid-sgid-y-sticky","title":"Bits SUID, SGID y sticky","text":"<p>Manual de LuCAS</p>"},{"location":"sistemas/unix.html#autentificacion-automatica-por-ssh","title":"Autentificaci\u00f3n autom\u00e1tica por SSH","text":"<p>Conseguiremos que la autentificaci\u00f3n del cliente se haga por medio de una pareja de claves privada/p\u00fablica en lugar de con identificador de usuario/password. Primero generamos la pareja de claves p\u00fablica-privada ejecutando en el cliente <code>ssh-keygen</code>:</p> <pre><code>$ ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/user/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/user/.ssh/id_rsa.\nYour public key has been saved in /home/user/.ssh/id_rsa.pub.\nThe key fingerprint is:\nxx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx user@machine\n</code></pre> <p>Las claves se almacenan por defecto en <code>~/.ssh/</code>, quedando el directorio as\u00ed:</p> <pre><code>$ ls -l\ntotal 12\n-rw-------  1 user user  883 2005-08-13 14:16 id_rsa\n-rw-r--r--  1 user user  223 2005-08-13 14:16 id_rsa.pub\n-rw-r--r--  1 user user 1344 2005-08-04 02:14 known_hosts\n</code></pre> <p>Los ficheros <code>id_rsa</code> e <code>id_rsa.pub</code> contienen respectivamente las claves privada y p\u00fablica. El fichero <code>known_hosts</code> contiene la lista de las claves p\u00fablicas de las m\u00e1quinas reconocidas.</p> <p>Ahora se debe copiar la clave p\u00fablica al servidor, al fichero <code>~/.ssh/authorized_keys</code>. Para ello se utiliza el comando ssh-copy-id:</p> <pre><code>$ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine1\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine2\n</code></pre> <p><code>ssh-copy-id</code> es un script que se conecta a la m\u00e1quina y copia el archivo (indicado por la opci\u00f3n <code>-i</code>) en <code>~/.ssh/authorized_keys</code>, y ajusta los permisos a los valores adecuados.</p> <p>Si no se dispone del programa <code>ssh-copy-id</code> se puede realizar una copia manual a la m\u00e1quina remota del fichero conteniendo la clave p\u00fablica (por ejemplo usando <code>scp</code> o <code>sftp</code>) y a\u00f1adir su contenido al fichero <code>~/.ssh/authorized_keys</code>.</p> <p>Ahora la conexi\u00f3n deber\u00eda funcionar sin necesidad de introducir la clave. Si no es as\u00ed es posible que sea un problema de permisos en los ficheros. Los permisos correctos deben ser similares a estos:</p> <pre><code>$ chmod go-w ~ ~/.ssh\n$ chmod 600 ~/.ssh/authorized_keys\n</code></pre> <p>La conexi\u00f3n SSH se realizar\u00e1 indicando el fichero con la clave privada como argumento de la siguiente forma:</p> <pre><code>$ ssh -i ~/.ssh/id_rsa user@machine\n</code></pre> <p>(Si el nombre del fichero con la clave privada es precisamente el del ejemplo, es decir <code>id_rsa</code>, creo que no es necesario indicarlo con la opci\u00f3n <code>-i</code>).</p>"},{"location":"sistemas/unix.html#configuracion-de-firefox-para-ejecucion-de-applets-java","title":"Configuraci\u00f3n de Firefox para ejecuci\u00f3n de applets Java","text":"<p>(Fuente)</p> <ul> <li>Vaya al subdirectorio de complementos, situado dentro del directorio de instalaci\u00f3n de Mozilla.</li> </ul> <pre><code>$ cd `&lt;directorio de instalaci\u00f3n de Mozilla&gt;`/plugins  # Normalmente /usr/lib/firefox/plugins\n</code></pre> <p>o</p> <pre><code>$ cd `&lt;home del usuario&gt;`/.mozilla/plugins\n</code></pre> <ul> <li>En el directorio actual, cree un v\u00ednculo simb\u00f3lico al archivo del JRE ns7/libjavaplugin_oji.so. Escriba:</li> </ul> <pre><code>$ ln -s `&lt;directorio de instalaci\u00f3n del JRE&gt;`/plugin/i386/ns7/libjavaplugin_oji.so\n</code></pre> <ul> <li>Inicie el navegador Mozilla o rein\u00edcielo si ya se estaba ejecutando. Tenga en cuenta que, si se est\u00e1 ejecutando alg\u00fan otro componente de Mozilla (como Messenger, Composer, etc.) deber\u00e1 tambi\u00e9n reiniciarlo.</li> <li>Vaya a Editar &gt; Preferencias. En la categor\u00eda Avanzadas, seleccione Activar Java.</li> </ul>"},{"location":"sistemas/unix.html#organizacion-de-menus-cuando-se-mezclan-aplicaciones-kde-y-gnome","title":"Organizaci\u00f3n de men\u00fas cuando se mezclan aplicaciones KDE y Gnome","text":"<p>GNU/Linux nos permite tener varios sistemas de escritorio diferentes instalados y funcionando, pero inevitablemente nos encontramos con una mezcla de opciones y programas de cada entorno en los men\u00fas principales. Existen aplicaciones precisamente para limpiar autom\u00e1ticamente las entradas del men\u00fa que no corresponden a tu sistema de escritorio habitual, y dejarlas apartadas y ordenadas de alguna manera. Con Gnome y KDE instalados a la vez, hay dos programas para aquellos Gnomeros que han querido probar KDE y para los KDEeros que han querido probar Gnome.</p> <ul> <li>Gnome Menu Extended es el propio men\u00fa normal de Gnome, pero incluye una carpeta donde se guardan todas las aplicaciones y opciones de KDE. Se instala f\u00e1cilmente descargando el paquete para cualquier distribuci\u00f3n: Debian (y Ubuntu), Slackware o directamente el c\u00f3digo fuente para compilarlo. Una vez instalado, se activa yendo a Preferencias -&gt; Add KDE Menu. Y si quieres recuperar el men\u00fa como estaba, tambi\u00e9n tiene la opci\u00f3n de restaurarlo.</li> <li>K Menu Gnome es un men\u00fa exactamente igual que el KMenu original, pero incluye una carpeta donde residen todas las aplicaciones de Gnome, en sistemas que tienen ambos escritorios instalados. Est\u00e1 disponible para Debian (y Ubuntu), Slackware, Fedora y el c\u00f3digo fuente para compilarlo en cualquier sistema.</li> </ul>"},{"location":"sistemas/unix.html#error-error-while-loading-shared-libraries","title":"Error \"error while loading shared libraries: ...\"","text":"<p>Runtime error. The linker hasn't found your libraries. Either they are not installed properly or the linker doesn't know where they are (most probably in <code>/usr/local/lib</code>). To get your linker to update its list of libraries type:</p> <pre><code>$ ldconfig /usr/local/lib\n</code></pre> <p>or as a temporary measure:</p> <pre><code>$ export LD_LIBRARY_PATH=\"/usr/local/lib\"\n</code></pre> <p>En este documento se dan m\u00e1s detalles.</p>"},{"location":"sistemas/unix.html#compartir-ficheros-con-samba","title":"Compartir ficheros con Samba","text":"<p>Aparte de instalar y configurar Samba (fichero <code>/etc/samba/smb.conf</code>) hay que dar de alta los usuarios UNIX que se usar\u00e1n a trav\u00e9s de Samba y asignarles un password para el acceso por el mismo. Esto se hace con el comando:</p> <pre><code>$ sudo smbpasswd -a usuario\n</code></pre>"},{"location":"sistemas/unix.html#migracion-masiva-de-usuarios","title":"Migraci\u00f3n masiva de usuarios","text":"<p>(Fuente)</p> <p>Para los casos en los que sea necesario replicar los usuarios de un servidor Linux a otro o en los que se vaya a migrar a un servidor con m\u00e1s recursos, el siguiente procedimiento puede ser de utilidad.</p> <p>Los escenarios son varios, desde los servidores que ejecutan alg\u00fan tipo de base de datos, los que tienen ciertas aplicaciones, los que alojan p\u00e1ginas Web, etc\u00e9tera. Para fines de la demostraci\u00f3n pensaremos que el servidor est\u00e1 dedicado como servidor de archivos, mismos que se almacenan en el home de cada uno de los usuarios. NOTA: El presente procedimiento da por hecho que se hayan realizado las configuraciones necesarias en el nuevo servidor.</p> <p>Primero, lo que debe respaldarse es la lista de usuarios con su respectiva contrase\u00f1a. El archivo <code>/etc/passwd</code> contiene las cuentas de los usuarios en el sistema bajo el siguiente formato de ejemplo:</p> <pre><code>root:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/\nnologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nnitsuga:x:500:500::/home/nitsuga:/bin/bash\nnitsuga2:x:501:501::/home/nitsuga2:/bin/bash\nnitsuga3:x:502:502::/home/nitsuga3:/bin/bash\n</code></pre> <p>Como se observa, el segundo campo respectivo al hash de la contrase\u00f1a no se muestra. La contrase\u00f1a se encuentra en el archivo <code>/etc/shadow</code></p> <pre><code>root:$1$/7zmwgAa$Jd5ja7nsC4nTm\nO3s0.Z1j1:13445:0:99999:7:::\nbin:*:13445:0:99999:7:::\ndaemon:*:13445:0:99999:7:::\nadm:*:13445:0:99999:7:::\nnitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:13498:2:1:1:::\nnitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7:::\nnitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7:::\n</code></pre> <p>Se proceder\u00e1 a unir el usuario con su contrase\u00f1a utilizando el comando <code>pwunconv</code> para \u201cdesactivar\u201d el shadow, quedando as\u00ed las contrase\u00f1as en el archivo passwd.</p> <pre><code>root:$1$/7zmwgAa$Jd5ja7nsC4n\nTmO3s0.Z1j1:0:0:root:/root:/bin/bash\nbin:*:1:1:bin:/bin:/sbin/nologin\ndaemon:*:2:2:daemon:/sbin:/sbin/\nnologin\nadm:*:3:4:adm:/var/adm:/sbin/nologin\nnitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/\nnitsuga:/bin/bash\nnitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash\nnitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga3:/bin/bash\n</code></pre>"},{"location":"sistemas/unix.html#depuracion-de-etcpasswd","title":"Depuraci\u00f3n de /etc/passwd","text":"<p>Se copiar\u00e1 el archivo <code>/etc/passwd</code> a uno de trabajo <code>/etc/passwd.migracion</code>. Ahora se editar\u00e1 el archivo y se quitar\u00e1n todos los usuarios propios del sistema (root, usuarios de demonios, etc\u00e9tera) dejando s\u00f3lo los usuarios que van a ser autenticados.</p> <pre><code>nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/nitsuga:/bin/bash\nnitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash\nnitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga2:/bin/bash\n</code></pre> <p>Tambi\u00e9n se copiar\u00e1 el archivo <code>/etc/group</code> a <code>/etc/group.migracion</code></p> <pre><code>root:x:0:root\nbin:x:1:root,bin,daemon\ndaemon:x:2:root,bin,daemon\nsys:x:3:root,bin,adm\nadm:x:4:root,adm,daemon\nnitsuga:x:500:\nnitsuga2:x:501:\nnitsuga3:x:502:\nnitsuga8:x:507:\n</code></pre> <p>Y se editar\u00e1 para dejar s\u00f3lo los grupos de los usuarios:</p> <pre><code>nitsuga:x:500:\nnitsuga2:x:501:\nnitsuga3:x:502:\n</code></pre> <p>Ahora se respaldar\u00e1 el home de los usuarios, suponiendo que se encuentra bajo el directorio/home, se har\u00e1 lo siguiente desde ra\u00edz (/):</p> <pre><code>[root@localhost /]# tar -cpzvf home.tgz home/\n</code></pre> <p>En el que las banderas:</p> <ul> <li>c = crea el archivo</li> <li>p = preserva los permisos</li> <li>z = comprime el archivo .tar generado</li> <li>v = da salida detallada</li> <li>f = especifica el archivo a crear (para este caso home.tgz)</li> </ul> <p>Ahora bien, se realizar\u00e1 la transferencia de los archivos home.tgz, passwd.migracion y group.migracion al nuevo servidor:</p> <pre><code>[root@localhost /]# scp /home.tgz root@nuevoservidor\n\n[root@localhost /]# scp /etc/passwd.migracion root@nuevoservidor\n\n[root@localhost /]# scp /etc/group.migracion root@nuevoservidor\n</code></pre> <p>Una vez en el nuevo servidor se deber\u00e1 verificar que no se repitan tanto los UID como los GID entre los dos servidores. Se realizar\u00e1:</p> <pre><code>[root@localhost /]# cp \u2013p home.tgz / ; tar \u2013zxvf home.tgz\n\n[root@localhost /]# cp \u2013p passwd.migracion /etc ; pwunconv ; cat passwd.migracion &gt;&gt; passwd; pwconv\n\n[root@localhost /]# cp \u2013p group.migracion /etc ; cat group.migracion &gt;&gt; group\n</code></pre>"},{"location":"sistemas/unix.html#eliminar-peticion-password-en-sudo","title":"Eliminar petici\u00f3n password en sudo","text":"<p>Es necesario reconfigurar el fichero <code>/etc/sudoers</code> para que no se solicite el password del usuario a la hora de hacer sudo, dado que necesitamos que se haga sudo desde un proceso que no tendr\u00e1 interacci\u00f3n con el usuario. Para conseguir esto hay que hacer dos cosas:</p> <ol> <li>Incorporar el usuario que nos interesa al grupo <code>sudo</code> del sistema</li> <li>Situar al final del fichero de configuraci\u00f3n <code>/etc/sudoers</code> lo siguiente:</li> </ol> <pre><code>%sudo ALL=NOPASSWD: ALL\n</code></pre> <p>Hay que fijarse que la linea anterior normalmente ya aparece en el fichero pero comentada con una almohadilla. Se puede aprovechar la linea quitando el car\u00e1cter almohadilla del principio, pero hay que tener en cuenta que no es suficiente con eso. Hay que mover la linea al final del fichero ya que las lineas siguientes pueden sobreescribir su efecto.</p> <p>Importante: La edici\u00f3n del fichero <code>/etc/sudoers</code> s\u00f3lo se puede hacer con el comando <code>visudo</code>. Este comando hay que lanzarlo con <code>sudo</code> a su vez, por lo que se har\u00e1 de la siguiente forma:</p> <pre><code>$ sudo visudo\n</code></pre>"},{"location":"sistemas/unix.html#proxy-http-en-consola","title":"Proxy HTTP en consola","text":"<p>Setting up proxy at Firefox do not have effects at console, which means your wget, ssh, apt-get, yum etc do not access through the proxy you set at Firfox browser. To setup http proxy at console, you can do as bellow, assume the proxy IP is 219.93.2.113 and port 3128:</p> <pre><code>$ export http_proxy='http://219.93.2.113:3128/'\n</code></pre> <p>Remember, you have to specified http://, and to know more about export, check out HERE. To clear your http proxy and use back yours, do this:</p> <pre><code>$ export http_proxy=''\n</code></pre>"},{"location":"sistemas/unix.html#convertir-nombres-de-ficheros-de-iso-a-utf-8","title":"Convertir nombres de ficheros de ISO a UTF-8","text":"<p>Al migrar una web, o al copiar un sistema de archivos, te puedes encontrar con nombres de ficheros en otras codificaciones de caracteres. Mediante el siguiente comando transformar\u00edamos los nombres de ficheros desde ISO-8869-1 a UTF-8:</p> <pre><code>$ convmv -r -f ISO-8859-1 -t UTF-8  --notest *\n</code></pre>"},{"location":"sistemas/unix.html#backup-de-un-filesystem","title":"Backup de un FileSystem","text":"<p>Backup:</p> <pre><code>$ dd if=/dev/hdx | gzip &gt; /path/to/image.gz\n</code></pre> <p>Restauraci\u00f3n:</p> <pre><code>$ gzip -dc /path/to/image.gz | dd of=/dev/hdx\n</code></pre>"},{"location":"sistemas/unix.html#montar-un-fichero-img","title":"Montar un fichero .img","text":"<p>(Fuente). Primero hay que averiguar el offset de la partici\u00f3n que queremos montar:</p> <pre><code>fdisk -l /ruta/fichero.img\n</code></pre> <p>Esto nos mostrar\u00e1 el tama\u00f1o del bloque y el bloque de comienzo de la partici\u00f3n. Por ejemplo:</p> <pre><code>edumoreno@eduardo-HP-Folio-13:~/Descargas$ fdisk -l RetroPie.img\nDisk RetroPie.img: 3,7 GiB, 3965190144 bytes, 7744512 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0xb847d94e\n\nDisposit.     Inicio  Start   Final Sectores  Size Id Tipo\nRetroPie.img1 *        8192  124927   116736   57M  e W95 FAT16 (LBA)\nRetroPie.img2        124928 7744511  7619584  3,6G 83 Linux\n</code></pre> <p>El offset se calcular\u00e1 multiplicando el bloque de comienzo por el tama\u00f1o de bloque. En el ejemplo, para la segunda partici\u00f3n:</p> <p>offset = 124928 * 512 = 63963136</p> <p>Por tanto el comando para montar ser\u00e1:</p> <pre><code>sudo mount -o loop,offset=63963136 RetroPie.img /mnt/tmp\n</code></pre>"},{"location":"sistemas/unix.html#manipulacion-de-pdfs","title":"Manipulaci\u00f3n de PDFs","text":"<p>Divisi\u00f3n en m\u00faltiples ficheros (uno por p\u00e1gina):</p> <pre><code>$ pdftk largepdfile.pdf burst\n</code></pre> <p>Fusi\u00f3n de varios ficheros en uno:</p> <pre><code>$ pdftk *.pdf cat output onelargepdfile.pdf\n</code></pre>"},{"location":"sistemas/unix.html#obtener-hash-md5-de-una-cadena","title":"Obtener hash MD5 de una cadena","text":"<pre><code>$ echo -n \"&lt;cadena&gt;\"|md5sum\n</code></pre>"},{"location":"sistemas/unix.html#system-mysql-backup-script","title":"System + MySQL backup script","text":"<pre><code>#!/bin/bash\n# System + MySQL backup script\n# Full backup day - Sun (rest of the day do incremental backup)\n# Copyright (c) 2005-2006 nixCraft `&lt;http://www.cyberciti.biz/fb/&gt;`\n# This script is licensed under GNU GPL version 2.0 or above\n# Automatically generated by http://bash.cyberciti.biz/backup/wizard-ftp-script.php\n# ---------------------------------------------------------------------\n\n### System Setup ###\nDIRS=\"/var/spool/sms /var/log/smstools /root\"\nBACKUP=/tmp/backup.$$\nNOW=$(date +\"%d-%m-%Y\")\nINCFILE=\"/var/tar-inc-backup.dat\"\nDAY=$(date +\"%a\")\n# echo $DAY &gt;&gt; /root/dates\nFULLBACKUP=\"Sun\"\n\n### MySQL Setup ###\nMUSER=\"mysqluser\"\nMPASS=\"mysqlpwd\"\nMHOST=\"localhost\"\nMYSQL=\"$(which mysql)\"\nMYSQLDUMP=\"$(which mysqldump)\"\nGZIP=\"$(which gzip)\"\n\n### FTP server Setup ###\nFTPD=\"//incremental\"\nFTPU=\"ftpuser\"\nFTPP=\"ftppwd\"\nFTPS=\"ftphost\"\nNCFTP=\"$(which ncftpput)\"\n\n### Other stuff ###\nEMAILID=\"user@domain.com\"\n\n### Start Backup for file system ###\n[ ! -d $BACKUP ] &amp;&amp; mkdir -p $BACKUP || :\n\n### See if we want to make a full backup ###\nif [ \"$DAY\" == \"$FULLBACKUP\" ]; then\n  FTPD=\"//full\"\n  FILE=\"fs-full-$NOW.tar.gz\"\n  tar -zcvf $BACKUP/$FILE $DIRS\nelse\n  i=$(date +\"%Hh%Mm%Ss\")\n  FILE=\"fs-i-$NOW-$i.tar.gz\"\n  tar -g $INCFILE -zcvf $BACKUP/$FILE $DIRS\nfi\n\n### Start MySQL Backup ###\n# Get all databases name\nDBS=\"$($MYSQL -u $MUSER -h $MHOST -p$MPASS -Bse 'show databases')\"\nfor db in $DBS\ndo\n FILE=$BACKUP/mysql-$db.$NOW-$(date +\"%T\").gz\n $MYSQLDUMP -u $MUSER -h $MHOST -p$MPASS $db | $GZIP -9 &gt; $FILE\ndone\n\n### Dump backup using FTP ###\n#Start FTP backup using ncftp\nncftp -u\"$FTPU\" -p\"$FTPP\" $FTPS&lt;&lt;EOF\nmkdir $FTPD\nmkdir $FTPD/$NOW\ncd $FTPD/$NOW\nlcd $BACKUP\nmput *\nquit\nEOF\n\n### Find out if ftp backup failed or not ###\nif [ \"$?\" == \"0\" ]; then\n rm -f $BACKUP/*\nelse\n T=/tmp/backup.fail\n echo \"Date: $(date)\"&gt;$T\n echo \"Hostname: $(hostname)\" &gt;&gt;$T\n echo \"Backup failed\" &gt;&gt;$T\n mail  -s \"BACKUP FAILED\" \"$EMAILID\" &lt;$T\n rm -f $T\nfi\n</code></pre>"},{"location":"sistemas/unix.html#recuperacion-de-pendrive-o-tarjeta-de-memoria-corrupta","title":"Recuperaci\u00f3n de pendrive o tarjeta de memoria corrupta","text":"<p>Con TestDisk/Photorec.</p>"},{"location":"sistemas/unix.html#enlaces","title":"Enlaces","text":"<ul> <li>TestDisk Paso A Paso</li> <li>How to Recover Data from Corrupt / formatted USB Flash using Photorec</li> </ul>"},{"location":"sistemas/unix.html#instalaciondesinstalacion-de-scripts-sysvupstart","title":"Instalaci\u00f3n/desinstalaci\u00f3n de scripts SysV/Upstart","text":"<p>Los scripts del serivicio deber\u00e1n tener una cabecera especial que indique c\u00f3mo deben comportarse en cada nivel de ejecuci\u00f3n. Por ejemplo \u00e9ste es el que tiene MySQL:</p> <pre><code>#!/bin/bash\n#\n### BEGIN INIT INFO\n# Provides:          mysql\n# Required-Start:    $remote_fs $syslog\n# Required-Stop:     $remote_fs $syslog\n# Should-Start:      $network $time\n# Should-Stop:       $network $time\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start and stop the mysql database server daemon\n# Description:       Controls the main MySQL database server daemon \"mysqld\"\n#                    and its wrapper script \"mysqld_safe\".\n### END INIT INFO\n#\n</code></pre> <ul> <li>Instalar: <code>sudo update-rc.d SERVICE defaults</code></li> <li>Desinstalar: <code>sudo update-rc.d -f SERVICE remove</code></li> </ul>"},{"location":"sistemas/unix.html#creacion-de-servicios-systemd","title":"Creaci\u00f3n de servicios Systemd","text":"<ol> <li>Crear un archivo en <code>/etc/systemd/system/</code> con el nombre del servicio y la extensi\u00f3n <code>.service</code>.</li> <li> <p>Insertar el siguiente contenido:</p> <pre><code>[Unit]\nDescription=Nombre del servicio\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=simple\nExecStart=/bin/bash /home/usuario/script_arranque.sh\nRestart=on-abort\nUser=usuario\nGroup=usuario\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> </li> <li> <p>Activar el nuevo servicio:</p> <pre><code>$ sudo systemctl enable mi_servicio.service\n</code></pre> </li> <li> <p>Para no esperar al reinicio, arrancar manualmente el servicio:</p> <pre><code>$ sudo systemctl start mi_servicio.service\n</code></pre> </li> <li> <p>Para comprobar si el servicio se inicia correctamente:</p> <pre><code>$ sudo systemctl status mi_servicio.service\n</code></pre> </li> </ol>"},{"location":"sistemas/unix.html#gestion-de-servicios-systemd","title":"Gesti\u00f3n de servicios Systemd","text":"<ul> <li><code>systemctl start SERVICE</code> - Use it to start a service. Does not persist after reboot</li> <li><code>systemctl stop SERVICE</code> - Use it to stop a service. Does not persist after reboot</li> <li><code>systemctl restart SERVICE</code> - Use it to restart a service</li> <li><code>systemctl reload SERVICE</code> - If the service supports it, it will reload the config files related to it without interrupting any process that is using the service.</li> <li><code>systemctl status SERVICE</code> - Shows the status of a service. Tells whether a service is currently running.</li> <li><code>systemctl enable SERVICE</code> - Turns the service on, on the next reboot or on the next start event. It persists after reboot.</li> <li><code>systemctl disable SERVICE</code> - Turns the service off on the next reboot or on the next stop event. It persists after reboot.</li> <li><code>systemctl is-enabled SERVICE</code> - Check if a service is currently configured to start or not on the next reboot.</li> <li><code>systemctl is-active SERVICE</code> - Check if a service is currently active.</li> <li><code>systemctl show SERVICE</code> - Show all the information about the service.</li> <li><code>systemctl mask SERVICE</code> - Completely disable a service by linking it to <code>/dev/null</code>; you cannot start the service manually or enable the service.</li> <li><code>systemctl unmask SERVICE</code> - Removes the link to <code>/dev/null</code> and restores the ability to enable and or manually start the service.</li> </ul>"},{"location":"sistemas/unix.html#montaje-de-carpeta-compartida-samba-en-etcfstab","title":"Montaje de carpeta compartida samba en /etc/fstab","text":"<p>Crear un fichero <code>/home/usuario/.smbcredentials</code> con el siguiente contenido:</p> <pre><code>user=usuario\npassword=password\n</code></pre> <p>A\u00f1adir la siguiente l\u00ednea a <code>/etc/fstab</code>:</p> <pre><code>192.168.1.100/carpeta_compartida /home/usuario/punto_montaje cifs uid=usuario,gid=usuario,credentials=/home/usuario/.smbcredentials,iocharset=utf8,sec=ntlmv2,file_mode=0664,dir_mode=0775 0 0\n</code></pre>"},{"location":"sistemas/unix.html#mini-servidor-http","title":"Mini servidor HTTP","text":"<p>Web oficial</p> <pre><code>$ wget http://www.acme.com/software/thttpd/thttpd-2.29.tar.gz\n$ tar xzvf thttpd-2.29.tar.gz\n$ cd thttpd-2.29/\n$ ./configure\n$ make\n$ sudo ./thttpd -d &lt;directorio_root&gt;\n</code></pre>"},{"location":"sistemas/unix.html#montado-de-unidades-de-red-con-autofs","title":"Montado de unidades de red con autofs","text":""},{"location":"sistemas/unix.html#nfs","title":"NFS","text":"<p>(Fuente)</p> <ol> <li> <p>Instalar paquetes:</p> <pre><code>$ sudo apt-get install autofs nfs-common\n</code></pre> </li> <li> <p>A\u00f1adir lo siguiente al final del fichero <code>/etc/auto.master</code>:</p> <pre><code>/home/usuario/red   /etc/auto.red\n</code></pre> </li> <li> <p>Crear fichero <code>/etc/auto.red</code> con el siguiente contenido (cambiar rw por ro si se desea acceso de s\u00f3lo lectura):</p> <pre><code>montaje  -fstype=nfs4,rw 192.168.1.100:/path/directory\n</code></pre> </li> <li> <p>Crear enlaces a los directorios montados con autofs:</p> <pre><code>$ cd ~\n$ ln -s /home/usuario/red/montaje montaje\n</code></pre> </li> </ol>"},{"location":"sistemas/unix.html#smbcifs","title":"SMB/CIFS","text":"<p>(Fuente)</p> <ol> <li> <p>Instalar paquetes:</p> <pre><code>$ sudo apt-get install autofs smbclient cifs-utils\n</code></pre> </li> <li> <p>A\u00f1adir lo siguiente al final del fichero <code>/etc/auto.master</code>:</p> <pre><code>/home/usuario/red /etc/auto.red --timeout=600\n</code></pre> </li> <li> <p>Crear fichero <code>/etc/auto.red</code> con el siguiente contenido:</p> <pre><code>montaje  -fstype=cifs,rw,noperm,netbiosname=${HOST},credentials=/home/usuario/.smbcredentials  ://192.168.1.100/carpeta_compartida\n</code></pre> </li> <li> <p>Crear fichero <code>/home/usuario/.smbcredentials</code> con el siguiente contenido:</p> <p><code>username=&lt;usuario&gt;    password=&lt;password&gt;</code></p> </li> <li> <p>Proteger el fichero:</p> <pre><code>$ chmod 600 /home/usuario/.smbcredentials\n</code></pre> </li> <li> <p>Crear enlaces a los directorios montados con autofs:</p> <pre><code>$ cd ~\n$ ln -s /home/usuario/red/montaje montaje\n</code></pre> </li> </ol>"},{"location":"varios/bici.html","title":"Bicicleta","text":""},{"location":"varios/bici.html#brompton","title":"Brompton","text":""},{"location":"varios/bici.html#enlaces","title":"Enlaces","text":"<ul> <li>Lubricaci\u00f3n</li> </ul>"},{"location":"varios/bici.html#repuestos","title":"Repuestos","text":"<ul> <li>Cadena 96 eslabones 3/32\"</li> <li>Plato 44 dientes</li> <li>Pi\u00f1\u00f3n 13 dientes</li> </ul>"},{"location":"varios/bici.html#hub-bwr-3","title":"Hub BWR-3","text":"<ul> <li>Servicing Sturmey-Archer 3-Speed Hubs</li> <li>Brompton Sturmey Archer Internal Gear Hub Re-grease Maintenance - V\u00eddeo</li> </ul>"},{"location":"varios/corsa_d.html","title":"Corsa D","text":""},{"location":"varios/corsa_d.html#reset-de-mensaje-insp","title":"Reset de mensaje InSP","text":"<p>(Fuente) Para borrar el mensaje de inspecci\u00f3n en caso de que el taller olvide hacerlo (a mi me ha sucedido una vez):</p> <ol> <li>Pisar y mantener el pedal del freno.</li> <li>Pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial para que se ilumine el mismo.</li> <li>Volver a pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial y mantenerlo esta vez.</li> <li>Dar contacto (no es necesario arrancar).</li> <li>Seguir manteniendo pulsado el bot\u00f3n de reset del cuentakil\u00f3metros parcial hasta que desaparezca el mensaje InSP.</li> </ol> <p></p>"},{"location":"varios/corsa_d.html#menu-oculto-de-diagnostico","title":"Men\u00fa oculto de diagn\u00f3stico","text":"<p>(Fuente) Muestra algunas estad\u00edsticas y valores instant\u00e1neos que no se muestran en el display normalmente (como la temperatura del motor o los litros exactos que quedan de combustible):</p> <ol> <li>Dar contacto (no es necesario arrancar).</li> <li>Pulsar tres veces la tecla de reset del ordenador de a bordo o del cuentakil\u00f3metros parcial.</li> <li>Pulsar una cuarta vez y mantener 10 segundos la tecla anterior.</li> <li>Por medio de la misma tecla iremos alternando entre las siguientes visualizaciones en pantalla:<ol> <li>Versi\u00f3n del modelo y fecha de fabricaci\u00f3n</li> <li>Versi\u00f3n del software y fecha de producci\u00f3n</li> <li>??? (00 / 000072)</li> <li>Velocidad y revoluciones</li> <li>Voltaje de la bater\u00eda y ??? (24).</li> <li>Varios:<ol> <li>Nivel de brillo del display</li> <li>Temperatura del l\u00edquido refrigerante</li> </ol> </li> <li>??? (100 / L2 129)</li> <li>??? (100 / S2 337)</li> <li>??? (100 / P2 353)</li> <li>??? (100 / t2 463)</li> <li>Combustible:<ol> <li>Nivel en litros</li> <li>Lecturas del sensor del dep\u00f3sito??</li> </ol> </li> <li>Consumos:<ol> <li>Flujo</li> <li>Consumo instant\u00e1neo</li> </ol> </li> <li>\u00daltima revisi\u00f3n (en realidad desde que se resetea el mensaje Insp):<ol> <li>N\u00famero de d\u00edas desde la \u00faltima revisi\u00f3n</li> <li>Kil\u00f3metros desde la \u00faltima revisi\u00f3n</li> </ol> </li> <li>Salida</li> </ol> </li> </ol> <p></p>"},{"location":"varios/corsa_d.html#opciones-ocultas","title":"Opciones ocultas","text":"<ol> <li>Meter la llave pero no girarla, es decir, no dar contacto.</li> <li>Tirar de las dos palancas laterales (luces y lavaluneta) hacia atr\u00e1s, es decir hacia nosotros, durante 3 segundos hasta que se oiga un tono.</li> <li>Usar la palanca izquierda (luces) arriba y abajo para cambiar de opci\u00f3n y la palanca derecha (lavaluneta) tambi\u00e9n arriba y abajo para cambiar el valor.</li> </ol> <p>Las opciones disponibles son las siguientes (en mi modelo de 3 puertas no aparece la opci\u00f3n 5):</p> <ul> <li>P1: Luces de bienvenida: on/off. Enciende las luces delanteras cuando al abrir el coche con el mando pulsamos el bot\u00f3n de abrir una segunda vez.</li> <li>P2: Lavaluneta trasera autom\u00e1tico: on/off. Se enciende autom\u00e1ticamente cuando el lavaluneta delantero est\u00e1 activo y se pone la marcha atr\u00e1s.</li> <li>P3: Intermitentes con un toque: on/off. Para se\u00f1alizar c\u00f3modamente el cambio de carril (esta opci\u00f3n est\u00e1 activada por defecto).</li> <li>P4: Cierre autom\u00e1tico de puertas: on/off. Al pasar de 20 km/h aproximadamente.</li> <li>P5: Cierre separado de puerta de conductor: on/off.</li> <li>P6: Aviso al superar una velocidad determinada en el ajuste: on/off.</li> <li>P7: Volumen de los tonos de aviso: 1-5.</li> </ul> <p>Para aceptar los nuevos ajustes tirar de nuevo de ambas palancas como al principio hasta que se escuche un tono.</p> <p>Si no se hacen cambios durante 10 segundos se cancelar\u00e1n los ajustes.</p> <p>Se supone que estos ajustes se asocian a la llave con que fueron hechos.</p> <p></p>"},{"location":"varios/corsa_d.html#leer-los-dtc-diagnostic-trouble-codes","title":"Leer los DTC (diagnostic trouble codes)","text":"<ol> <li>Pisar los pedales de freno y acelerador.</li> <li>Dar contacto (sin arrancar).</li> <li>Esperar a que el s\u00edmbolo del motor se apague.</li> <li>A partir de ese momento empezar\u00e1 a parpadear indic\u00e1ndonos el c\u00f3digo de error. Hay que contar los parpadeos. El c\u00f3digo consta de 4 d\u00edgitos. El d\u00edgito 0 se representa con 10 parpadeos.</li> </ol>"},{"location":"varios/corsa_d.html#cambio-de-bombillas-fundidas-en-el-display-central","title":"Cambio de bombillas fundidas en el display central","text":""},{"location":"varios/english.html","title":"Ingl\u00e9s","text":"<p>Acr\u00f3nimos:</p> <ul> <li>i.e. = \"id est\". Viene del lat\u00edn y significa \"es decir\" (Fuente)</li> <li>e.g. = \"exempli gratia\". Viene del lat\u00edn y significa \"por ejemplo\" (Fuente)</li> <li>AFAICS = As far as I can see</li> <li>AFAIK = As far as I know</li> <li>AKA = Also known as</li> <li>ASAP = As soon as possible</li> <li>BTW = By the way</li> <li>DM = \"Dignum memoria\". Viene del lat\u00edn y significa \"merece la pena recordarse\" (Fuente)</li> <li>FUD = Fear, Uncertainty, and Doubt</li> <li>FYI = For your information</li> <li>GOTY = Game Of The Year</li> <li>IANAL = I am not a lawyer (but)</li> <li>IDK = I don't know</li> <li>IIRC = If I remember correctly</li> <li>IMHO = In my humble opinion</li> <li>IMO = In my opinion</li> <li>IOW = In other words</li> <li>IRL = In real life</li> <li>JFYTK = Just For You To Know</li> <li>KISS = Keep it simple stupid</li> <li>LOL = Laughing out loud</li> <li>NB = \"Nota Bene\". Viene del lat\u00edn y significa \"nota\" (Fuente)</li> <li>NVM = Never mind</li> <li>OMG = Oh my God</li> <li>OTOH = On the other hand</li> <li>PITA = Pain in the Ass</li> <li>QOL = Quality of life</li> <li>ROTFL = Rolling on the floor laughing</li> <li>RTFM = Read The Fine Manual</li> <li>TBH = To be honest</li> <li>TIA = Thanks in advance</li> <li>TIL = Today I learned</li> <li>TL;DR = Too Long; Didn't Read</li> <li>TOC = Table of Contents</li> <li>WTF? = What the f***?</li> <li>WYSIWYG = What You See Is What You Get</li> <li>YMMV = Your mileage may vary</li> </ul>"},{"location":"varios/excursionismo.html","title":"Excursionismo","text":""},{"location":"varios/excursionismo.html#herramientas","title":"Herramientas","text":"<ul> <li>Mapas de Espa\u00f1a</li> <li>Descargar mapa topogr\u00e1fico IGN en Oruxmaps: La descripci\u00f3n se corresponde con el interfaz de OruxMaps, pero se puede seguir dentro de la aplicaci\u00f3n del IGN.</li> <li>Manual de Usuario - Mapas de Espa\u00f1a v.1.0</li> </ul>"},{"location":"varios/excursionismo.html#rutas","title":"Rutas","text":""},{"location":"varios/excursionismo.html#ordesa","title":"Ordesa","text":"<p>Fuente</p> <ul> <li>Faja de las Flores con Tozal del Mallo: Hecho.</li> <li>Faja Rac\u00f3n: Hecho.</li> <li>Broto - Ermita de Morillo</li> <li>Mondarruego por la faja de las Flores oeste</li> <li>Pradera - Cotatuero - G\u00f3riz</li> <li>Torla - Punta Acuta: Hecho.</li> <li>Pradera - Cotatuero - Brecha Rolando - Taill\u00f3n</li> <li>Bolta\u00f1a - J\u00e1novas</li> </ul>"},{"location":"varios/excursionismo.html#canfranc","title":"Canfranc","text":"<ul> <li>Ib\u00f3n de IP-Collarada</li> </ul>"},{"location":"varios/excursionismo.html#moncayo","title":"Moncayo","text":"<ul> <li>Los tres dosmiles principales del macizo del Moncayo por Collado Bellido: Pico Lobera, Moncayo y Pe\u00f1a Negrilla</li> <li>Circular a los hayedos de Pe\u00f1a Roya (S1), y Pe\u00f1arrajada (PRC-SO79), desde la Fuente del Sacrist\u00e1n</li> <li>Moncayo (desde Cueva de \u00c1greda)</li> <li>CUEVA DE \u00c1GREDA-LAS SIETE CIMAS DE M\u00c1S DE 2000 METROS-MAJADA ALTA-LOBERA-MORCA-SAN JUAN-MONCAYO-PE\u00d1A NEGRILLA SUR Y NORTE</li> <li>Agramonte-(GR-90)-Santuaruio Nuestra Se\u00f1ora del Moncayo-Hoya de San Miguel-Moncayo-Restos avi\u00f3n militar-Bco. Castilla: Hecho.</li> <li>Circular a las Pe\u00f1as de Herrera, desde Purujosa (Ascensi\u00f3n por barranco Valcongosto, descenso por barranco Cuart\u00fan)</li> </ul>"},{"location":"varios/hogar.html","title":"Hogar","text":""},{"location":"varios/hogar.html#quitar-olor-a-humedad-de-ropa","title":"Quitar olor a humedad de ropa","text":"<p>El olor se produce porque la ropa ha acumulado esporas de moho. Se pueden eliminar con alguno o varios de los siguientes productos:</p> <ul> <li>Vinagre blanco</li> <li>Bicarbonato de sodio</li> <li>Borax</li> </ul> <p>Introduciremos uno o varios de estos productos durante el lavado.</p> <ul> <li>Lo mejor es usar agua caliente para asegurar la eliminaci\u00f3n de las esporas de moho.</li> <li>Si no puede usarse agua caliente, seguramente habr\u00e1 que repetir el proceso entre varios lavados.</li> <li>Lo mejor es esperar a que la cuba est\u00e9 llena de agua para aportar el producto o productos directamente sobre ella, pero si la lavadora no lo permite (la mayor\u00eda), mezclar con 1 taza de agua caliente y usa el dispensador de detergente l\u00edquido.</li> </ul> <p>Varias opciones:</p> <ul> <li>Utilizar una taza de uno de los tres productos listados al principio.</li> <li>Si la ropa tiene un fuerte olor a humedad, mezclar 1/3 de taza de bicarbonato de sodio en 1 taza de vinagre blanco.</li> </ul> <p>Secar la ropa preferiblemente al sol. Repetir el procedimiento hasta que desaparezca el olor a humedad.</p> <p>Si en pocos d\u00edas, el olor a humedad vuelve a aparecer dejar la prenda en remojo durante 30 minutos en agua tibia con vinagre o con media taza de bicarbonato de sodio.</p>"},{"location":"varios/hogar.html#usos-del-bicarbonato-de-sodio-para-desodorizar","title":"Usos del bicarbonato de sodio para desodorizar","text":"<ul> <li>Refrigerador: Coloque un bol con 3 o 4 cucharadas de Bicarbonato de Sodio en la parte trasera de la nevera o del congelador para neutralizar olores. Dejar actuar y cambiar el bicarbonato cada dos meses.</li> <li>Cubos de basura: Para eliminar manchas, incrustaciones y malos olores solo es necesario espolvorear 2 o 3 cucharadas soperas de Bicarbonato de Sodio en el cubo y dejarlo actuar durante toda la noche. A la ma\u00f1ana siguiente enjuague el cubo y s\u00e9quelo bien.</li> <li>Pa\u00f1os de cocina: Deje en remojo los pa\u00f1os toda la noche en un litro de agua caliente con 3 o 4 cucharadas de Bicarbonato de Sodio. Por la ma\u00f1ana, enju\u00e1guelos bien y p\u00f3ngalos a secar.</li> <li>Desag\u00fces: Desodorice los lavabos y desag\u00fces vertiendo \u00bd taza de Bicarbonato de Sodio por el desag\u00fce mientras corre el agua tibia y consiga una correcta neutralizaci\u00f3n de olores.</li> <li>Tuppers: Elimine los olores de los alimentos de tuppers y envases espolvoreando Bicarbonato de Sodio en el interior de los mismos y consiga una desodorizaci\u00f3n eficaz.</li> <li>Esponjas: Para eliminar los malos olores de las esponjas, rem\u00f3jelas en una soluci\u00f3n de 4 cucharadas de Bicarbonato de Sodio disuelto en 1 litro de agua tibia.</li> <li>Guantes de fregar: A\u00f1ada un poco de Bicarbonato de Sodio en el interior de los guantes (si lo cree necesario puede guardarlos con bicarbonato en contacto con el exterior). Deje actuar durante unas horas. Despu\u00e9s, saque el bicarbonato y dele la vuelta a los guantes para eliminar bien los restos de polvo del interior. Puede repetir la operaci\u00f3n cada vez que sea necesario.</li> <li>Ropa de cama: A\u00f1ada \u00bd taza de Bicarbonato de Sodio al ciclo de enjuague para conseguir unas s\u00e1banas y toallas m\u00e1s frescas y suaves.</li> <li>Armarios: Coloque un recipiente abierto con 3 o 4 cucharadas de Bicarbonato de Sodio en un estante de su armario para mantener un olor fresco.</li> <li>Naftalina: Para eliminar el olor a naftalina de la ropa a\u00f1ada \u00bd taza de Bicarbonato de Sodio durante el proceso de lavado, es decir,  cuando la lavadora est\u00e9 llena de agua.</li> <li>Cesta de ropa sucia: Para evitar los malos olores procedentes de la ropa sucia espolvoree el cesto de lavander\u00eda con un poco de Bicarbonato de Sodio cada d\u00eda.</li> <li>Ropa deportiva: Para eliminar los malos olores de la bolsa de deporte, zapatillas, ropa deportiva, solo es necesario espolvorear con Bicarbonato de Sodio. Deje actuar toda la noche y a la ma\u00f1ana siguiente l\u00e1velos con normalidad.</li> <li>Zapatos: Desodorice de manera natural sus zapatos espolvoreando Bicarbonato de Sodio sobre ellos y consiga eliminar el mal olor a pies.</li> <li>Coche: Coloque un recipiente peque\u00f1o con 2 o 3 cucharadas de Bicarbonato de Sodio en el interior de su coche y deje actuar. Cambie el bicarbonato cada semana o cada 10 d\u00edas para asegurar la absorci\u00f3n de los malos olores de su coche.</li> <li>Maletas: Espolvoree Bicarbonato de Sodio en el interior del equipaje para quitar el mal olor de las maletas cerradas y guardadas durante largo tiempo.</li> </ul>"},{"location":"varios/hogar.html#otros-usos-del-bicarbonato-de-sodio","title":"Otros usos del bicarbonato de sodio","text":"<ul> <li>Limpieza de tapicer\u00edas: Espolvoree el sof\u00e1 o sill\u00f3n con Bicarbonato de Sodio, d\u00e9jelo actuar durante 30 minutos y cep\u00edllelos despu\u00e9s. Si lo prefiere, tambi\u00e9n puede disolver el bicarbonato en agua tibia y frotar suavemente con un trapo o esponja para eliminar las manchas, finalmente enjuague bien y deje secar.</li> <li>Colchones: Limpie su colch\u00f3n en profundidad, neutral\u00edcelo de malos olores y prot\u00e9jalo de posibles \u00e1caros y g\u00e9rmenes que se adhieran entre sus tejidos espolvoreando Bicarbonato de Sodio sobre el colch\u00f3n. Deje reposar durante dos o tres horas y retire el bicarbonato con ayuda de un aspirador, o en su defecto, con un trapo seco.</li> <li>Legumbre: Deje en remojo las legumbres durante toda la noche en una soluci\u00f3n de 1 cucharada de Bicarbonato de Sodio especial Alimentaci\u00f3n por litro de agua. A la ma\u00f1ana siguiente, tire el agua del remojo y a\u00f1ada una cucharadita de bicarbonato al agua de cocci\u00f3n para hacer que las legumbres se ablanden antes y se hagan m\u00e1s digeribles.</li> <li>Mal olor cocci\u00f3n col: Para evitar el mal olor al cocer alimentos como la coliflor, solo es necesario a\u00f1adir una cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua de cocci\u00f3n.</li> <li>Huevos duros: Agregue media cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua en la que hierva los huevos para poder pelarlos posteriormente con mayor facilidad.</li> <li>Prevenci\u00f3n mal aliento y caries: Disuelva una cucharadita de Bicarbonato de Sodio en un vaso de agua tibia o fr\u00eda. Haga enjuagues con ella, haciendo g\u00e1rgaras y escupiendo el agua. Finalmente, enjuague su boca con agua fresca.</li> <li>Desodorante: A\u00f1ada una pizca de Bicarbonato de Sodio mezclado con agua para conseguir una pasta desodorante natural y eficaz.</li> <li>Verrugas: Mezcle 1 cucharada sopera de Bicarbonato de Sodio en 1/3 de cucharada sopera de agua. Aplique la pasta sobre la verruga y cubra con una tirita, renovando la aplicaci\u00f3n por lo menos 2 veces al d\u00eda, durante 1 semana.</li> <li>Hongos, mal olor y pies cansados: En una palangana, echar 1 litro de agua caliente o tibia. Disuelva un vasito (aproximadamente 5 o 6 cucharadas soperas) de Bicarbonato de Sodio. A continuaci\u00f3n ponga los pies en remojo durante 10 o15 minutos.</li> </ul>"},{"location":"varios/links.html","title":"Enlaces","text":""},{"location":"varios/links.html#tutoriales","title":"Tutoriales","text":"<ul> <li>Eclipse And Java For Total Beginners :exclamation:</li> <li>UNIX</li> <li>Redirecci\u00f3n de salidas en UNIX</li> <li>Variables en UNIX</li> <li>Variables importantes en UNIX</li> <li>Configuraci\u00f3n de terminales en UNIX</li> <li>Subversion</li> </ul>"},{"location":"varios/links.html#cheat-sheets","title":"Cheat Sheets","text":"<ul> <li>Cheat Sheets</li> <li>Cheat Sheets</li> <li>Cheat Sheets</li> <li>Subversion</li> <li>Markdown</li> </ul>"},{"location":"varios/links.html#utiles","title":"\u00datiles","text":"<ul> <li>Copy Paste Character: Para copiar al portapapeles caracteres que no aparecen en nuestro teclado.</li> <li>Pastebin: Para pegar logs y trozos grandes de texto que luego linkar en foros o para pasar a otras personas.</li> <li>JSFiddle: Prototipado HTML/CSS/JS.</li> <li>Debuggex: Editor de expresiones regulares (recomendado por Carlos Fenollosa).</li> <li>RegExr: Learn, Build &amp; Test RegEx.</li> </ul>"},{"location":"varios/links.html#ebooks","title":"eBooks","text":"<ul> <li>Looking for free Kobo books? Here are 9 great sites to explore</li> <li>Project Gutenberg</li> <li>Smashwords</li> <li>Internet Archive</li> <li>Open Library</li> <li>Feedbooks</li> <li>Goodreads</li> <li>ManyBooks</li> <li>DigiLibraries</li> </ul>"},{"location":"varios/links.html#internet-radio","title":"Internet radio","text":"<ul> <li>Parsonica</li> <li>Movie Ticket Radio</li> </ul>"},{"location":"varios/recetas.html","title":"Recetas","text":""},{"location":"varios/recetas.html#snack","title":"Snack","text":"<ul> <li>Barritas de coco veganas</li> <li>Apple mug cake in 1 minute</li> <li>Galletas de avena y zanahoria</li> </ul>"},{"location":"varios/recetas.html#primeros","title":"Primeros","text":"<ul> <li>Col rizada con ajos y patata</li> </ul>"},{"location":"varios/recetas.html#segundos","title":"Segundos","text":"<ul> <li>Empanadillas de at\u00fan de Karlos Argui\u00f1ano</li> </ul>"},{"location":"varios/recetas.html#higado","title":"H\u00edgado","text":"<p>Fuente</p> <p>El multivitam\u00ednico de la naturaleza. Es el alimento con m\u00e1s aporte de vitamina A, rico adem\u00e1s en B12, B6, biotina y folato.</p> <p>Algunas ideas para los no iniciados:</p> <ul> <li>Rem\u00f3jalo durante unas horas en agua (la m\u00ednima necesaria para cubrirlo) y a\u00f1ade un \u00e1cido, como jugo de lim\u00f3n, yogur o un poco de vinagre. Suavizar\u00e1s su sabor para aplicar despu\u00e9s cualquier receta. Sumergirlo en leche tambi\u00e9n le dar\u00e1 una textura menos arisca.</li> <li>Coc\u00ednalo con cebolla, a\u00f1adiendo otras especias si es necesario.</li> <li>Prepara un buen pat\u00e9 (receta).</li> <li>Comb\u00ednalo con carne picada, en forma de hamburguesa o alb\u00f3ndigas. En la proporci\u00f3n adecuada el h\u00edgado pasar\u00e1 desapercibido.</li> <li>Trit\u00faralo con la batidora hasta convertirlo en pasta (agrega un poco de agua si prefieres), amasa peque\u00f1os trozos (como si fueran p\u00edldoras grandes) y almac\u00e9nalos en el congelador. Utiliza estas pastillas para potenciar caldos, sopas o cualquier otro plato.</li> </ul> <p>Si te preocupa la acumulaci\u00f3n de toxinas debes entender que la analog\u00eda del h\u00edgado como filtro es poco acertada. M\u00e1s que un filtro es una compleja planta de tratamiento. Neutraliza los posibles compuestos t\u00f3xicos y los expulsa, no los almacena. Pero s\u00ed almacena el conjunto de nutrientes que requiere para realizar su alquimia qu\u00edmica, de ah\u00ed su valor nutritivo (m\u00e1s detalle).</p> <p>Aunque el h\u00edgado acumula m\u00e1s metales pesados que el m\u00fasculo (las toxinas tienen m\u00e1s afinidad por la grasa), los niveles son bajos y seguros (estudio, estudio, estudio, estudio), aunque es recomendable priorizar producci\u00f3n ecol\u00f3gica.</p>"},{"location":"varios/recetas.html#galletas-avena","title":"Galletas avena","text":"<p>Receta original</p> <p>Receta adaptada (b\u00e1sicamente la mitad de cantidad):</p> <ul> <li>115gr Copos avena</li> <li>50gr Harina integral</li> <li>30gr Azucar morena</li> <li>1/4 Cucharadita levadura qu\u00edmica</li> <li>1/2 Pizca de sal</li> <li>1 Huevo</li> <li>69gr Aceite oliva</li> <li> <p>1/2 Cucharadita esencia vainilla</p> </li> <li> <p>Mezclar la avena, harina, azucar, levadura y sal en un bol.</p> </li> <li>Batir el huevo, aceite y esencia vainilla en otro bol.</li> <li>Mezclar el contenido de ambos boles.</li> <li>Moldear con la tapa de un tarro de yogur de yogurtera.</li> <li>Hornear a 180\u00baC durante 12 minutos o hasta que empiecen a dorarse las galletas por la base.</li> </ul>"},{"location":"varios/viajes.html","title":"Viajes","text":""},{"location":"varios/viajes.html#comunicaciones","title":"Comunicaciones","text":"<ul> <li>Prepaid SIM Cards With Data For Travelers: Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a.</li> <li>Cheap mobile internet and calls abroad with Holiday Phone: Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a.</li> </ul>"},{"location":"varios/viajes.html#salud","title":"Salud","text":"<ul> <li>World Nomads Travel Insurance: Seguro de salud para viajes recomendado por \u00c1ngel Alegre.</li> </ul>"},{"location":"en/index.html","title":"Blog","text":"<p>ZX Mechtrum</p> <p> <code>2024-09-09 12:00</code></p> <p>Building a ZX Mechtrum Harlequin, that is, a ZX Spectrum with the Harlequin 128 board and a mechanical keyboard.</p> <p>Installing Arch Linux on Steam Deck</p> <p> <code>2024-09-04 15:30</code></p> <p>A complete guide to installing Arch Linux alongside SteamOS with dual boot on the Steam Deck.</p> <p>Zaragoza - Campus routes by bike</p> <p> <code>2024-05-31 08:00</code></p> <p>Access routes from Zaragoza to the Aula Dei Campus by bicycle.</p> <p>Podcast Linux Interview</p> <p> <code>2022-10-05 07:00</code></p> <p>Podcast Linux interview about the Adam image for RG350/280.</p> <p>Miyoo Mini UART</p> <p> <code>2022-08-08 17:00</code></p> <p>UART port extraction to access the system terminal.</p> <p>Aventuras en VR</p> <p> <code>2022-04-17 23:00</code></p> <p>Introducci\u00f3n al mundo VR con Oculus Quest 2.</p> <p>Raspberry Pi Zero 2 W upgrade</p> <p> <code>2021-10-30 17:40</code></p> <p>Actualizaci\u00f3n de Raspberry Pi Zero al modelo 2 para OctoPrint.</p> <p>RG350/RG280 Imagen</p> <p> <code>2021-04-03 20:00</code></p> <p>Imagen para las consolas RG350 y RG280 con emuladores, ports y frontends.</p> <p>FUZIX en Raspberry Pi Pico</p> <p> <code>2021-02-28 20:00</code></p> <p>Montaje e instalaci\u00f3n de FUZIX (variante UNIX) en Raspberry Pi Pico.</p> <p>Retroconsolas</p> <p> <code>2021-01-19 21:20</code></p> <p>Dudas frecuentes sobre los distintos modelos de retroconsolas.</p> <p>RG350 Instalador RA</p> <p> <code>2021-01-16 21:20</code></p> <p>Instalador RetroArch para RG350/RG280.</p> <p>RG351P Wifi mod</p> <p> <code>2020-12-13 14:45</code></p> <p>Instalaci\u00f3n de m\u00f3dulo Wifi interno en RG351P.</p> <p>RG350 Interfaz xMAME SimpleMenu</p> <p> <code>2020-09-27 02:30</code></p> <p>Interfaz de ajustes para las ROMs de xMAME lanzadas desde SimpleMenu.</p> <p>La canci\u00f3n que merece la pena escuchar</p> <p> <code>2020-08-31 19:00</code></p> <p>This Guy's in Love with You de Herb Alpert.</p> <p>RG350 ScummVM en lanzadores</p> <p> <code>2020-08-15 17:20</code></p> <p>Integraci\u00f3n de ScummVM en lanzadores con selecci\u00f3n de ROMs como SimpleMenu.</p> <p>RG350 Py Backup</p> <p> <code>2020-08-12 22:20</code></p> <p>Aplicaci\u00f3n para gestionar backups en RG350.</p> <p>RG350 Sustituci\u00f3n de pantalla 480p</p> <p> <code>2020-07-12 14:30</code></p> <p>Sustituci\u00f3n de pantalla en RG350 por la del modelo M.</p> <p>RG350 RG350 FBA mod</p> <p> <code>2020-07-09 17:00</code></p> <p>Integraci\u00f3n en frontends y mejora en la gesti\u00f3n del modo vertical en FBA.</p> <p>RG350 Primeros pasos</p> <p> <code>2020-07-02 23:00</code></p> <p>Primeros pasos con la consola RG350.</p> <p>RG350 Raspi Imagen</p> <p> <code>2020-06-04 04:00</code></p> <p>Procedimiento para generar una imagen de tarjeta SD flasheable para RG350, Raspberry Pi y otras.</p> <p>RG350 Compilar aplicaciones</p> <p> <code>2020-05-31 00:40</code></p> <p>Ejemplos de compilaci\u00f3n de algunas aplicaciones para RG350 por medio del toolchain en Docker.</p> <p>RG350 Docker Buildroot</p> <p> <code>2020-05-25 17:00</code></p> <p>Compilaci\u00f3n de Buildroot con toolchain de RG350 en un contenedor Docker.</p> <p>RG350 MAME4All</p> <p> <code>2020-05-14 11:00</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de MAME4All en RG350.</p> <p>RG350 DOSBox</p> <p> <code>2020-05-08 00:30</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de DOSBox en RG350.</p> <p>RG350 OpenBOR</p> <p> <code>2020-05-06 12:30</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de OpenBOR en RG350.</p> <p>RG350 Daphne</p> <p> <code>2020-05-04 16:15</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de Daphne en RG350.</p> <p>RG350 xMAME</p> <p> <code>2020-04-15 12:00</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de xMAME en RG350.</p> <p>RG350 ScummVM</p> <p> <code>2020-04-14 09:50</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de ScummVM en RG350.</p> <p>RG350 PyMenu</p> <p> <code>2020-03-28 21:20</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de PyMenu en RG350.</p> <p>RG350 Backup</p> <p> <code>2020-03-19 23:00</code></p> <p>C\u00f3mo hacer backup de la RG350 para no perder savestates y configuraciones de emuladores.</p> <p>Panelizar PCB</p> <p> <code>2020-02-16 19:04</code></p> <p>Panelizaci\u00f3n de varias PCBs para hacer un pedido m\u00e1s econ\u00f3mico a JLCPCB.</p> <p>RG350 EmulationStation</p> <p> <code>2020-02-13 00:00</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de EmulationStation en RG350.</p> <p>RG350 Conexi\u00f3n a internet</p> <p><code>2020-02-09 01:48</code></p> <p>Conexi\u00f3n a internet en RG350 a trav\u00e9s de cable USB.</p> <p>EdUzebox</p> <p> <code>2020-02-08 19:55</code></p> <p>Creaci\u00f3n de un clon de Uzebox con salida de video por Euroconector.</p> <p>RG350 FBA</p> <p> <code>2020-01-31 22:28</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de FBA en RG350.</p> <p>RG350 SimpleMenu</p> <p> <code>2020-01-25 17:25</code></p> <p>Instalaci\u00f3n y configuraci\u00f3n de SimpleMenu en RG350.</p> <p>RG350 Scraper</p> <p> <code>2020-01-11 17:50</code></p> <p>Generaci\u00f3n de previews de las roms instaladas en RG350.</p> <p>Creaci\u00f3n de un sitio Django desde cero</p> <p> <code>2019-08-06 16:30</code></p> <p>Procedimiento de creaci\u00f3n de un entorno de desarrollo y producci\u00f3n para un sitio Django.</p> <p>Compilaci\u00f3n OpenAuto para solucionar touch screen</p> <p> <code>2019-07-07 21:45</code></p> <p>Compilaci\u00f3n de OpenAuto tras dejar de funcionar la pantalla t\u00e1ctil por actualizaci\u00f3n de Google Play Services.</p> <p>Composite mod en consola Pong</p> <p> <code>2019-04-20 16:00</code></p> <p>Composite mod en vieja consola Pong basada en chip AY-3-8500.</p> <p>Bloqueo de llamadas entrantes en Telsome</p> <p> <code>2019-01-29 19:20</code></p> <p>Bloqueo de llamadas entrantes en proveedor de VoIP Telsome.</p> <p>Conversi\u00f3n del sitio de Apuntes a MkDocs</p> <p><code>2019-01-26 19:00</code></p> <p>Migraci\u00f3n del motor de apuntes de Rubi/Jekyll a Python/MkDocs.</p> <p>Octoprint en Anet A8</p> <p> <code>2018-10-20 21:30</code></p> <p>Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint.</p> <p>Crankshaft - AndroidAuto sobre Raspberry Pi</p> <p> <code>2018-10-18 22:30</code></p> <p>Montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D.</p> <p>Otto DIY</p> <p><code>2018-05-05 17:25</code></p> <p>Montaje de robot Otto.</p> <p>Raspberry Pi 3 + KODI 16 + Tvheadend</p> <p> <code>2017-01-14 12:00</code></p> <p>Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi3 (actualizaci\u00f3n de art\u00edculo anterior).</p> <p>Raspberry Pi 3 + KODI</p> <p> <code>2016-12-06 15:32</code></p> <p>Instalaci\u00f3n de Kodi sobre Raspberry Pi3.</p> <p>Interruputor de encendido para Raspberry Pi</p> <p> <code>2016-10-17 20:00</code></p> <p>Instalaci\u00f3n de un pulsador de reset/encendido en Raspberry Pi.</p> <p>El mundo de ayer - Stefan Zweig</p> <p> <code>2016-08-17 21:00</code></p> <p>Rese\u00f1a del libro 'El mundo de ayer' de Stefan Zweig.</p> <p>Entorno desarrollo STM32 VL Discovery sobre Linux</p> <p> <code>2016-08-02 08:30</code></p> <p>Configuraci\u00f3n de entorno de desarrollo para STM332 VL Discovery con herramientas libres sobre Linux.</p> <p>Configuraci\u00f3n PiGRRL-2</p> <p> <code>2016-07-21 09:30</code></p> <p>Instalaci\u00f3n RetroPie desde cero sobre Adafruit PiGRRL-2.</p> <p>Wild - Cheryl Strayed</p> <p> <code>2016-07-10 16:30</code></p> <p>Rese\u00f1a del libro 'Wild' de Cheryl Strayed.</p> <p>Alertas por supuestos virus en Android</p> <p><code>2016-07-02 16:30</code></p> <p>T\u00e9cnicas para combatir los mensajes que aparecen en Android alert\u00e1ndonos de supuestos virus en el sistema.</p> <p>Un antrop\u00f3logo en Marte - Oliver Sacks</p> <p> <code>2016-04-10 16:30</code></p> <p>Rese\u00f1a del libro 'Un antrop\u00f3logo en Marte' de Oliver Sacks.</p> <p>Los Innovadores - Walter Isaacson</p> <p> <code>2016-02-25 22:30</code></p> <p>Rese\u00f1a del libro 'Los Innovadores' de Walter Isaacson.</p> <p>Raspberry Pi 2 + KODI + Tvheadend</p> <p> <code>2015-03-14 15:04</code></p> <p>Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi.</p> <p>M\u00f3viles recomendables</p> <p> <code>2015-01-09 20:08</code></p> <p>Listado de m\u00f3viles recomendables.</p> <p>Jekyll+GitHub Pages</p> <p> <code>2015-01-08 15:08</code></p> <p>Creaci\u00f3n de sitio en GitHub Pages con Jekyll.</p> <p>Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS</p> <p> <code>2014-12-20 12:52</code></p> <p>Instalaci\u00f3n de Dokuwiki sobre Raspberry Pi con ficheros alojados en NAS.</p> <p>Micro placas</p> <p> <code>2014-12-20 12:52</code></p> <p>Listado de micro placas tipo Raspberry Pi.</p> <p>Presentaci\u00f3n</p> <p><code>2014-12-15 18:25</code></p> <p>Presentaci\u00f3n del blog.</p>"},{"location":"en/2022-08-08_mmiyoo_uart.html","title":"Miyoo Mini UART","text":"<p>In this article we are going to see a modification of the Miyoo Mini emulation retro console to extract the UART port that exists on the PCB and thus be able to access it without opening the case. This UART port is also connected to a system terminal, which will help us a lot during the development or customization of the console system.</p> <p>Before starting with the procedure, it should be noted that the modification is not simple. Being such a small machine, there is little space to pass cables or place the external connector.</p>"},{"location":"en/2022-08-08_mmiyoo_uart.html#procedure","title":"Procedure","text":"<ol> <li> <p>We open the console. We will find the UART port pads under the screen flex cable.</p> <p></p> </li> <li> <p>We are looking for a place where we can put some kind of connector with 3 or 4 pins. Actually 3 is enough, but since we are doing the modification, we will try to route the 4 pins of the full port. We found that there is a space (in Miyoo Mini v2) in the battery compartment where you can place half a 2x4 socket resulting a mini female 4 pin socket. Traditional female pin sockets are too tall so you would not be able to close the battery cover. Here we see the socket before and after cutting it in half (actually in the left picture it was already cut, but I have supported the two halves so you can see where the piece came from).</p> <p></p> </li> <li> <p>The mini female pin socket we have manufactured fits perfectly in the position shown in the picture.</p> <p></p> </li> <li> <p>We glue the mini pin socket with epoxy resin.</p> <p></p> </li> <li> <p>On the inside of the case we have to bend the socket pins so that they do not collide with the PCB (as we mentioned at the beginning, the inside of the device is very well used).</p> <p></p> </li> <li> <p>The most complicated phase of the process begins. As we have already mentioned, there is very little free space inside the device. For example, the case to which we have just glued the mini socket is completely supported on the PCB along the entire surface of the hole where the battery is housed. We are going to route the connections around this hole. Even so the space is limited, so we chose to use varnished cables instead of wires with traditional PVC insulation. The varnished cable is also a single wire, which will help us to route it, since once deformed, it retains its shape. We look for the varnished cable for example in an old broken laptop power supply. It is sure that at least it will contain varnished cable in the transformer, but when we open it we find the three coils that we point out in the picture (the transformer is the one on the right).</p> <p></p> </li> <li> <p>Finally we choose the coil that has an intermediate wire thickness (I didn't disassemble the transformer, but I'm sure it would have had thinner wire). From it we extract 4 fragments of about 12cm. It is necessary to remember that being varnished cable, it will be necessary to scrape or to dissolve somehow the varnish in the ends so that we can solder. The scraping can be done with a blade or with sandpaper.</p> <p></p> </li> <li> <p>Now begins the most laborious part. We start by soldering the four wires to the socket pins. We bend the wires with the form of the bent pins of the socket so that there is more contact surface for the soldering. In the picture it does not appear because it was installed at the end, but it is very convenient to cover the solder joints with insulating tape or better Kapton tape (which is thinner), to prevent them from scratching the PCB and end up causing a short. It is easier to place the tape over the PCB, but in that case we will have to estimate by eye the area to cover, although there is no problem to put more tape than necessary to ensure the operation.</p> <p></p> </li> <li> <p>Now we patiently route the wires, shaping them with tweezers or fine pliers and fixing them from time to time with hot glue for example.</p> <p></p> </li> <li> <p>When we approach the final position of the wires, we will cut them staggered (finding out which one is which with respect to the soldering of the socket with the multimeter in continuity mode). We will also make a small bend that will be the one that we will introduce in the pads of the port on the PCB. It is necessary to remember that again we will have to remove the varnish of this end of the wires, what we will do preferably before making the fold.</p> <p></p> </li> <li> <p>Now we solder the cables to the PCB.</p> <p></p> </li> <li> <p>We can now close the console. Keep an eye on the cables that run near the lip between the two halves of the case to avoid catching any of them. Now we have our UART port in sight.</p> <p></p> </li> </ol>"},{"location":"en/2022-08-08_mmiyoo_uart.html#connection","title":"Connection","text":"<p>To connect to the UART port just exposed, we use the typical UART-USB adapter. In my case I use this one which has quite a lot of possibilities. As client I use <code>screen</code> in Linux launched as follows since the port speed is 115200bps:</p> <pre><code>sudo screen /dev/ttyUSB0 115200 8N1\n</code></pre> <p>We will only use the GND, RX and TX pins, crossing the last two with those of the UART-USB adapter, that is to say wiring the RX of the device to the TX of the adapter and vice versa. Although we do not use the power supply line (2.8V in this device), we will configure the UART-USB adapter to 3.3V so that the signal levels that travel by RX/TX are as similar as possible.</p> <p>An example:</p>"},{"location":"en/2022-10-05_entrevista_podcast_linux.html","title":"Podcast Linux Interview","text":"<p>A few weeks ago Juan Febles, creator of Podcast Linux, was kind enough to invite me to chat with him on his show. We mainly talked about the Adam image for portable retro-emulation consoles. We also talked about my beginnings and journey with Linux and free software, an operating system and philosophy that both Juan and I are passionate about.</p> <p>I would like to thank Juan again for having noticed the Adam project and considering it as interesting content for his podcast, which by the way I encourage you to follow if its subject matter is among your interests.</p> <p>If you would like to listen to the conversation (in spanish) you can do so right here:</p> <p> </p> <p>The link to the interview on the podcast site is this one.</p> <p>Finally, here are some addresses to find Juan's podcast:</p> <ul> <li>Web</li> <li>iVoox</li> <li>Telegram</li> <li>Twitter</li> </ul>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html","title":"Zaragoza - Campus routes by bike","text":"<p> Photo by Javier Rodrigo</p> <p>Currently, I work at the Aula Dei Campus, about 15 km from Zaragoza. Although there are several options for getting to the campus by bus, in my particular case, the combination of routes and schedules is not favorable, so from the beginning, I chose to go by bike. After a few days of testing, I adjusted the route and equipment to make it more convenient and safe. In this post, I list the different options I have come to know and describe, in my opinion, their pros and cons.</p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#problems-and-solutions","title":"Problems and solutions","text":"<p>It should be noted from the beginning that unfortunately, access to the campus by bike is not very favorable. On one hand, there are natural barriers such as the Urd\u00e1n canal and especially the G\u00e1llego river, for which there are very few crossings. If we don't consider the road bridges, there are only the pedestrian walkways of Santa Isabel and the one near San Juan de Mozarrifar, as indicated on the following map. The photo below the map is of the second walkway.</p> <p></p> <p></p> <p>On the other hand, the access road to the campus (A-123) lacks a shoulder for most of its route, has a speed limit of 70 km/h, many entry and exit points, and considerable traffic from tractors, trucks, and buses (especially at the start and end of the workday), which makes it unsuitable for cyclists in my opinion. However, avoiding the roads brings some drawbacks that we are going to analyze.</p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#bike-dirt-accumulation","title":"Bike dirt accumulation","text":"<p>The paths are very dusty in summer and become muddy with puddles in winter. Both situations dirty the bike, especially the dust in summer, which affects the transmission (chain, chainrings, and cogs), hubs and pedal axle. For mud and puddles, the best solution is to have fenders on the bike, although in my particular case, I cannot (nor do I want to) install them.</p> <p>Considering both problems, I have still chosen to use the rural paths and clean the bike as often as needed. However, there are certain times, after several days of rain for example, when it\u2019s useful to have an asphalt alternative. For this situation, and in my particular case, I use the road that connects San Gregorio with San Juan de Mozarrifar, which ends at the Cogullada road, another good alternative if accessing from an area northwest of Zaragoza. Both road sections have little traffic and a speed limit of 50 km/h. From the Cogullada road, you can access the walkway near San Juan by heading towards the San Juan football field.</p> <p>In any case, in terms of minimizing cleaning and bike maintenance, the best route in my opinion is the one shown to me by my colleague Mag\u00ed, which uses the Santa Isabel walkway to cross the G\u00e1llego river and follows asphalt up to above Monta\u00f1anesa. It's called <code>Azud - Campus (left bank of G\u00e1llego, asphalt)</code> in the final route table. Shortly before reaching the Urd\u00e1n canal (at this point), we have the options of finishing on rural paths to the left or turning right to exit in front of Monta\u00f1anesa onto the Monta\u00f1ana road, which we will follow for a short distance before taking the Camino el Soaso to reach the campus entirely on asphalt and on low-traffic roads. The reason I don't personally use this route is because I have to make a bit of a detour to access it and because I enjoy riding on rural paths with the mountain bike.</p> <p>Another route, slightly longer but entirely on asphalt and minimizing traffic on the Monta\u00f1ana road, is the one my colleague Ricardo showed me. From Santa Isabel, it runs entirely on roads parallel to the Monta\u00f1ana road. It is listed as <code>Azud - Campus (all asphalt 3)</code> in the final route table.</p> <p>As for cleaning the bike itself, I\u2019ve come to the compromise of focusing exclusively on the drivetrain (chain, chainrings, and cogs). I ended up using a wax-based lubricant, which has the downside of needing to be reapplied every few days (3 or 4), but in return, the chain doesn\u2019t accumulate the typical grime mix of grease and dust. I use the X-sauce brand (it costs half as much in local stores as it does on Amazon).</p> <p>Once a month, I take the bike to a car wash. I start by cleaning the chain with a chain cleaner tool, which I fill with biodegradable degreaser (the BLUB brand, in particular, works excellently for me). After that, I remove the brake pads to prevent contamination and hose down the bike. At home, I dry it, apply WD-40 to the derailleur joints, and lubricate the chain with the previously mentioned product.</p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#puddles-and-mud","title":"Puddles and mud","text":"<p>The issue of puddles may seem minor, but at least during the last cold season (2023/2024), from October to April, there were three difficult-to-pass areas at various points on my usual route, meaning the problem goes beyond just getting the bike dirty. One of these points is the railroad bridge that accesses Monta\u00f1anesa as it crosses the path running along the right bank of the G\u00e1llego. Fortunately, I discovered that shortly before that point, a path branches off to the right, allowing you to pass under the bridge through one of its smaller arches further ahead.</p> <p></p> <p>Another even worse crossing, given that there is no alternative once you are there (it is between a fence and a field that is sometimes non-cyclable), is at a point on the path very close to the previously mentioned bridge. Throughout these cold months, there were ponds whose edges remained permanently muddy due to the water displaced by passing vehicles. In the worst moments, the alternative was to take a slight detour up the Cogullada road to access the path that runs on the other side of the railway and thereby avoid the bridge.</p> <p></p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#cold-and-night","title":"Cold and Night","text":"<p>In winter, the main enemies are cold hands and lighting. For the former, I\u2019ve tried many models of gloves, both heated and non-heated, and it wasn\u2019t until I purchased the latest ones that I managed to solve the problem. Unfortunately, at the time of writing this article, they are not available for sale, although this might be due to the winter season not yet starting. They are the \"HEAT CONCEPT BIKE\" model from the brand Ekoi.</p> <p>As for lighting, some time ago I bought a powerful light (similar to this one) for summer night rides. I started having problems with the battery, but from what I\u2019ve seen, the battery format is quite standard or popular (8.4V), so I was able to easily find a replacement.</p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#increased-risk-of-punctures","title":"Increased risk of punctures","text":"<p>Here, I can only offer the natural recommendation to carry a pump with you, at least to be able to inflate the tire in case of a puncture until reaching your destination. In my case, I have my tires set up tubeless, which I recommend despite the inconveniences it has (it requires maintenance and it's much more cumbersome to remove the tire). Thanks to this, I have been able to forget about punctures for years (except for a couple of dramatic episodes where the tire would have been destroyed regardless of the tire type).</p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#longer-travel-times","title":"Longer travel times","text":"<p>Using rural paths takes more time, partly due to the slower travel speed and partly due to detours required to connect tracks. Although, as can be seen on the final map with the routes, most are quite direct.</p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#initial-orientation","title":"Initial orientation","text":"<p>Related to the previous point, there's the possibility of getting lost, at least during the first few days, especially when using rural paths, as there's no signage and the paths/fields look similar. The first day I attempted to bike to the campus was a disaster. I had to improvise near the campus because the route I had pre-mapped with Google Maps led me to a blocked fence. That day I spent an extra hour circling through wild terrain between the G\u00e1llego river and the campus area, and later on, crossing some waterlogged fields that seemed like a good shortcut option \ud83e\udd26.</p> <p></p> <p>To avoid this problem, on one hand, it's advisable to use the appropriate tool to plan the route, which is not Google Maps as my colleague Miguel taught me, but another based on OpenStreetMap like GraphHopper where the campus perimeter is correctly mapped. On the other hand, it's advisable to carry a GPS device that allows us to follow the route without having to stop and check the map. In my case, I started using an old Garmin Edge 305. Now that I know all the different options by heart, I can lend it to other people who are encouraged to bike to the campus so they can learn the route. If you have a handlebar mount for a smartphone, you can also use a navigation app like OsmAnd with preloaded tracks.</p> <p></p>"},{"location":"en/2024-05-31_campus_aula_dei_en_bici.html#routes","title":"Routes","text":"<p>Below is the collection of routes I have selected. One of the objectives of the selection has been to cover different starting points scattered throughout the northeast of Zaragoza. Another objective is to have options that run entirely on asphalt, either for days when the paths are muddy or for people who only have road bikes. The estimated time shown in the table is an approximation that may vary depending on physical fitness, bike type, and weather conditions (hello Zaragoza wind!). The observations column indicates any problematic points or factors to consider on each route. Finally, the first column contains a link to download the GPX tracks so they can be installed in applications such as the mentioned OsmAnd.</p> Route Distance Estimated time Observations Juslibol/Actur - Campus (by San Gregorio) 14,38 km 40m-1h You have to cross the Huesca road, but it can be done via an overpass. \ud83d\udea7 Arrabal/Picarral - Campus (by Corbera Alta) 13,05 km 35m-55m \ud83d\udea7 Cogullada - Campus (Cogullada road) 9,95 km 30m-45m Low traffic. \ud83d\udea7 Azud - Campus (right bank of G\u00e1llego) 13,00 km 35m-55m The most fun. \ud83d\udea7 Azud - Campus (left bank of G\u00e1llego, asphalt) 12,05 km 35m-50m In my opinion the best option, offers a good balance between speed, few cars, bike cleanliness, and the possibility to finish entirely on asphalt. Azud - Campus (left bank of G\u00e1llego, rural paths) 11,73 km 35m-50m Parallel to the previous one, without cars but it dirties the bike more. \ud83d\udea7 Azud - Campus (all asphalt) 13,08 km 35m-55m It has a section shared with road traffic from Monta\u00f1anesa to the entrance of Camino el Saso. Azud - Campus (all asphalt 2) 12,12 km 35m-50m It has a section shared with road traffic from Santa Isabel to Monta\u00f1ana. Azud - Campus (all asphalt 3) 13,02 km 35m-55m There is only a small section along the Monta\u00f1ana road but have  a shoulder. <p>The emoji \ud83d\udea7 in the observations of some routes in the table means that you have to cross the aqueduct over the Urd\u00e1n canal. This is the aqueduct in the photo. It can be a bit tricky to pass with the bike, especially when it's carrying water or wet, as it becomes slippery and it is narrow. If it's not clear, you can cross to the other side of the canal via a level crossing further ahead, about 400m away.</p> <p></p> <p>Full screen view</p>"},{"location":"en/2024-09-04_steam_deck_arch.html","title":"Installing Arch Linux on Steam Deck","text":"<p>In July 2024, the 512GB LCD model of the Steam Deck was available for under \u20ac400 for a few weeks. This price was very appealing for a decent machine with an AMD processor based on x86 (AMD64) architecture, 16GB of RAM, an NVMe SSD of the mentioned capacity, a touchscreen, and integrated gaming controls. Essentially, it's a handheld PC, but still a PC. What makes this machine especially attractive to me is its full Linux support, making it an ideal platform for tinkering with Linux distributions or using it as a secondary portable PC. Of course, this is in addition to its conventional use for gaming and emulating video games.</p> <p>SteamOS, the default operating system, is based on Arch Linux, and in desktop mode, it can be used almost like a regular Arch Linux system. The main restriction is that it's built in immutable mode. While this type of system configuration has its virtues and it's understandable why Valve chose it for their machine, I still prefer a normal (mutable) system. So, I decided to install a regular Arch Linux and learn how to install this distribution. According to the Arch wiki, the hardware of the Steam Deck LCD model is 100% supported by Arch.</p> <p>The following is the complete procedure I used.</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#keyboardmouse","title":"Keyboard/Mouse","text":"<p>Although most operations can be performed using the Steam Deck's touchscreen and trackpads, it's highly recommended to connect a keyboard and mouse to the console to facilitate the installation, especially during the terminal session where we'll install the base system. The Steam Deck only has one USB-C port, so the most practical solution is to use a dock. It may also suffice (especially if we run live systems from a microSD) to use a wireless keyboard/mouse dongle connected with a USB&lt;-&gt;USB-C adapter, though in that case, it's advisable to ensure the Steam Deck is fully charged.</p> <p>In my case, I used a Dell DA310z dock.</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#disk-repartitioning","title":"Disk repartitioning","text":"<p>The Steam Deck's SSD I purchased is 512GB and of the NVMe type. This is the minimum size if we want to install another system alongside SteamOS.</p> <p>Before starting the installation, we need to make space by shrinking the main partition (number 8). For this, we can use almost any live Linux distribution that we boot from a removable drive (USB or microSD) since all of them come with some partition management program. I used a <code>gparted</code> ISO.</p> <p>The complete procedure can be seen below:</p> <ol> <li>Download the gparted ISO. Specifically, I used this version.</li> <li>Install the ISO on a USB drive or, even better, on a microSD (since the Steam Deck has a slot for these). You can use a program like Balena Etcher or the <code>dd</code> command in Linux if you know how to use it.</li> <li>Boot the Steam Deck with the USB drive or microSD inserted by holding down the volume- button until you hear the power-up tones. This causes the console to boot into the <code>Boot Manager</code> menu.</li> <li>Select the option to boot from the removable device, which will appear in the menu as <code>EFI USB Device (USB)</code> or <code>EFI SD/MMC Card (XX XXXX XXXX)</code> depending on whether you used a USB drive or a microSD respectively.</li> <li> <p>A configuration screen appears where we make the following selections:</p> <ul> <li>Policy for handling keymaps =&gt; Don't touch keymap</li> <li>Which language do you prefer? =&gt; 25</li> <li>Which mode do you prefer? =&gt; 0</li> </ul> </li> <li> <p>After accepting the last option, the <code>gparted</code> program will start in graphical mode (with the screen rotated, though). We will make changes until the partitions look like the screenshot. Essentially, we'll shrink partition #8 by about 100GB, create #9 with 4GB for swap, and #10 with the remaining space for the Arch root system:</p> <p></p> </li> </ol> <p>Note, when looking at the partitions used by SteamOS, that it uses an A/B partition system, common in Android, where most of the system partitions (except the user space one) are duplicated. This system is designed to facilitate updates, or rather to roll back in case of problems during them.</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#base-installation","title":"Base installation","text":"<p>For the base system installation, I opted for the conventional method following the instructions in the installation guide on the Arch wiki. This installation uses an Arch system ISO that we can boot from a removable drive (USB or microSD) to install the basic packages needed for a bootable and very basic system.</p> <p>Before starting, note that due to the dynamic nature of the Arch Linux distribution, it's very likely that this guide will become outdated soon. Therefore, I recommend checking the official guide if something doesn't go as expected.</p> <p>Below is the step-by-step installation process:</p> <ol> <li>Download the Arch Linux ISO. Specifically, I used this version.</li> <li>Install the ISO on a USB drive or, even better, on a microSD to use the slot on the Steam Deck. You can use a program like Balena Etcher or the <code>dd</code> command in Linux if you know how to use it.</li> <li>Boot the Steam Deck with the USB drive or microSD inserted by holding down the volume- button until you hear the power-up tones. This causes the console to boot into the <code>Boot Manager</code> menu.</li> <li>Select the option to boot from the removable device, which will appear in the menu as <code>EFI USB Device (USB)</code> or <code>EFI SD/MMC Card (XX XXXX XXXX)</code> depending on whether you used a USB drive or a microSD respectively.</li> <li> <p>Once the Arch live installation system finishes booting, run the following commands in order (in the <code>iwctl</code> session, replace <code>&lt;SSID&gt;</code> with your own and enter the password when prompted; also replace the user identifier <code>&lt;USER&gt;</code> with the one you want to use):</p> <pre><code># loadkeys en\n# iwctl\n[iwd]# station wlan0 scan\n[iwd]# station wlan0 get-networks\n[iwd]# station wlan0 connect &lt;SSID&gt;\n[iwd]# exit\n# mkfs.ext4 /dev/nvme0n1p10\n# mkswap /dev/nvme0n1p9\n# mount /dev/nvme0n1p10 /mnt\n# mount --mkdir /dev/nvme0n1p1 /mnt/boot/efi\n# swapon /dev/nvme0n1p9\n# pacstrap -K /mnt base base-devel linux linux-firmware sudo vi ntfs-3g networkmanager amd-ucode grub efibootmgr git cmake qt5-wayland\n# genfstab -U /mnt &gt;&gt; /mnt/etc/fstab\n# arch-chroot /mnt\n# ln -sf /usr/share/zoneinfo/Europe/Madrid /etc/localtime\n# hwclock --systohc\n# vi /etc/locale.gen    # uncomment 'en_US.UTF-8 UTF-8'\n# locale-gen\n# echo \"LANG=en_US.UTF-8\" &gt; /etc/locale.conf\n# echo \"KEYMAP=en\" &gt; /etc/vconsole.conf\n# echo \"deck\" &gt; /etc/hostname\n# echo -e \"\\n127.0.0.1    localhost\\n::1    localhost\\n127.0.1.1    deck\" &gt;&gt; /etc/hosts\n# passwd\n# grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=Arch\n# grub-mkconfig -o /boot/grub/grub.cfg\n# systemctl enable NetworkManager\n# useradd -m -G wheel &lt;USER&gt;\n# passwd &lt;USER&gt;\n# chmod u+w /etc/sudoers\n# vi /etc/sudoers       # Uncomment '%wheel ALL=(ALL) ALL'\n# chmod u-w /etc/sudoers\n# pacman -Syy\n# pacman -S xorg-server xf86-video-amdgpu maliit-keyboard qt5-wayland\n# su - &lt;USER&gt;\n</code></pre> </li> </ol> <p>The password you choose when running the <code>passwd &lt;USER&gt;</code> command should be numeric if you want to use Plasma Mobile, as the unlock screen only allows you to enter a PIN.</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#graphical-environment-installation","title":"Graphical environment installation","text":"<p>Continuing from where we left off, that is, in the chroot session from the Arch Linux live installation system. We will now do this as a normal user (not root), so from now on, we will frequently use <code>sudo</code>.</p> <p>Now we are going to install the graphical environments. I say this in plural because we will install two: Plasma and Plasma Mobile. I do this because, depending on whether we will use the Steam Deck with Arch in desktop mode (with keyboard/mouse and possibly a screen) or portable mode (without keyboard/mouse), one system or the other will be more convenient, as Plasma Mobile has an interface designed to be operated with a touchscreen (tablet-style).</p> <p>Really, it's not necessary to install both desktops, so their installation steps are separated. You can install one, the other, or both.</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#plasma","title":"Plasma","text":"<pre><code>$ sudo pacman -S plasma-meta\n</code></pre> <p>During the installation of the above package, you will be asked several questions. On the third question, answer <code>2) noto-fonts</code>. For the rest, provide the default answer (by pressing enter).</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#plasma-mobile","title":"Plasma Mobile","text":"<p>Plasma Mobile is not yet available in the official repositories. We have to use AUR:</p> <ol> <li> <p>Start by installing some dependencies:</p> <pre><code>$ sudo pacman -S plasma-workspace kcontacts kirigami2 kpeople libphonenumber\n</code></pre> </li> <li> <p>Install the AUR packages <code>plasma-nano</code>, <code>plasma-settings</code>, and <code>plasma-mobile</code> in this order:</p> <pre><code>$ cd ~\n$ git clone https://aur.archlinux.org/plasma-nano.git\n$ cd plasma-nano\n$ makepkg -si\n$ cd ~\n$ git clone https://aur.archlinux.org/plasma-settings.git\n$ cd plasma-settings\n$ makepkg -si\n$ cd ~\n$ git clone https://aur.archlinux.org/plasma-mobile.git\n$ cd plasma-mobile\n$ makepkg -si\n</code></pre> </li> </ol>"},{"location":"en/2024-09-04_steam_deck_arch.html#end-of-graphical-environment-installation","title":"End of graphical environment installation","text":"<ol> <li> <p>Install the SDDM session manager and some applications, which we'll need to finish the installation from the graphical mode:</p> <pre><code>$ sudo pacman -S sddm konsole dolphin kwrite partitionmanager htop power-profiles-daemon\n$ sudo systemctl enable sddm\n$ exit\n</code></pre> </li> <li> <p>Close the chroot session, unmount the partitions, and reboot the system:</p> <pre><code># exit\n# umount -R /mnt\n# reboot\n</code></pre> </li> </ol>"},{"location":"en/2024-09-04_steam_deck_arch.html#basic-configuration","title":"Basic configuration","text":"<p>After rebooting, you should see the SDDM session manager, initially with the screen rotated and without the ability to use the on-screen keyboard, so we'll still be using the external keyboard and mouse.</p> <p>Once we have logged into Plasma or Plasma Mobile, the first thing we need to do is configure the internet connection. To do this, click on the corresponding icon in the system tray at the bottom right in Plasma or at the top right in Plasma Mobile.</p> <p>Once connected, open the Konsole application and run the following commands to install the basic KDE application package, Firefox browser and the SSH server:</p> <pre><code>$ sudo pacman -S firefox kde-applications-meta openssh usbutils lshw man-db\n$ sudo systemctl start sshd\n$ sudo systemctl enable sshd\n</code></pre> <p>Finally, we make the following configurations:</p> <ul> <li><code>Preferences &gt; System Preferences &gt; Input &amp; Output &gt; Display &amp; Monitor &gt; Scale</code>: Set the screen scale to 110%.</li> <li><code>Preferences &gt; System Preferences &gt; Input &amp; Output &gt; Keyboard &gt; Layouts &gt; Configure Layouts &gt; Add</code>: Add the English keyboard layout.</li> <li><code>Preferences &gt; System Preferences &gt; Language &amp; Time &gt; Date &amp; Time &gt; Time Zone</code>: Select your city.</li> <li><code>Preferences &gt; System Preferences &gt; Appearance &amp; Style &gt; Text &amp; Fonts &gt; Fonts</code>. Set this values:<ul> <li><code>General</code>: <code>Noto Sans 11pt</code></li> <li><code>Fixed width</code>: <code>Hack 10pt</code></li> <li><code>Small</code>: <code>Noto Sans 9pt</code></li> <li><code>Toolbar</code>: <code>Noto Sans 11pt</code></li> <li><code>Menu</code>: <code>Noto Sans 11pt</code></li> <li><code>Window title</code>: <code>Noto Sans 10pt</code></li> </ul> </li> <li>Right-click (L2) on the taskbar and select <code>Show panel settings</code>. In <code>Panel Preferences &gt; Panel Height</code> increase the height to 54px.</li> <li>Right-click (L2) on the icon used to show hidden icons in the system tray and select <code>Configure System Tray</code>. In <code>General</code> select these values:<ul> <li><code>Panel icon size</code>: <code>Scale to panel height</code></li> <li><code>Spacing between panel icons</code>: <code>Normal</code></li> </ul> </li> <li>Right-click (L2) on the icon used to show hidden icons in the system tray and select <code>Show panel settings</code>. You will see a small clock that was not visible before, right-click (L2) on it. Select <code>Show alternatives</code> and from the alternative graphics that appear, choose <code>Digital clock</code>.</li> </ul>"},{"location":"en/2024-09-04_steam_deck_arch.html#sddm-configuration","title":"SDDM configuration","text":"<p>Finally, we'll improve the SDDM session manager configuration to enable the on-screen keyboard, enhance the appearance, and display the screen in the correct orientation:</p> <ol> <li> <p>Create the file <code>/etc/sddm.conf.d/10-wayland.conf</code> with the following content:</p> <pre><code>[General]\nDisplayServer=wayland\nGreeterEnvironment=QT_WAYLAND_SHELL_INTEGRATION=layer-shell\n\n[Wayland]\nCompositorCommand=kwin_wayland --drm --no-lockscreen --no-global-shortcuts --locale1 --inputmethod maliit-keyboard\n</code></pre> </li> <li> <p>Open <code>Preferences &gt; Login Screen (SDDM)</code>, select Breeze as the theme, and click the <code>Apply Plasma settings...</code> button in the top right corner.</p> </li> </ol>"},{"location":"en/2024-09-04_steam_deck_arch.html#sound-configuration","title":"Sound configuration","text":"<p>As the Arch wiki mentions, the default volume on the Steam Deck is very low. To fix this, you need to install the <code>alsa-utils</code> package and run the <code>alsamixer</code> command to adjust the volume of some of the channels.</p> <pre><code>$ sudo pacman -S alsa-utils\n$ alsamixer\n</code></pre> <p>To access them, once in <code>alsamixer</code>, press <code>F6</code> to select the <code>acp5x</code> audio device, as by default the selected device is 0, which is associated with the HDMI output of the graphics chip:</p> <p></p> <p>Once the correct device is selected, you will see all its channels, which are quite numerous. Locate the ones mentioned in the wiki and adjust them to the following values:</p> Channel Value Analog PCM 85% Digital 86% Digital PCM 85% Left Analog PCM 85% Left Digital PCM 85% Right Analog PCM 85% Right Digital PCM 85%"},{"location":"en/2024-09-04_steam_deck_arch.html#dual-boot-manager-installation","title":"Dual Boot manager installation","text":"<p>The Arch system is now ready and can be booted by starting the console in Boot Manager mode (holding down the volume- key) and selecting the <code>Arch</code> option. But to make it easier to boot SteamOS, we'll install a dual boot manager called rEFInd.</p> <ol> <li>Boot SteamOS (with Volume- + Power).</li> <li> <p>From a terminal in desktop mode, run:</p> <pre><code>cd $HOME &amp;&amp; rm -rf $HOME/SteamDeck_rEFInd/ &amp;&amp; git clone https://github.com/jlobue10/SteamDeck_rEFInd &amp;&amp; cd SteamDeck_rEFInd &amp;&amp; chmod +x install-GUI.sh &amp;&amp; ./install-GUI.sh\n</code></pre> </li> <li> <p>Download or create an Arch Linux icon of 128x128px.</p> </li> <li>Open the desktop launcher found on the desktop.</li> <li> <p>Configure it as follows (select the icon downloaded or created earlier in the <code>Boot Option #2 Icon</code> field):</p> <p></p> </li> <li> <p>Click the <code>Create Config</code> button.</p> </li> <li> <p>Edit the file found at <code>~/.local/SteamDeck_rEFInd/GUI/refind.conf</code> and modify the last entry as follows:</p> <pre><code>menuentry \"Arch\" {\n    icon /EFI/refind/os_icon2.png\n    loader /EFI/Arch/grubx64.efi\n    graphics on\n}\n</code></pre> </li> <li> <p>Click the <code>Install rEFInd</code> button.</p> </li> <li>Click the <code>Install Config</code> button.</li> </ol> <p>The path <code>/EFI/Arch/grubx64.efi</code> in step 6 may change if you chose a different identifier than <code>Arch</code> during the <code>grub-install</code> command executed during the base system installation. In that case, you'll need to adapt the path.</p>"},{"location":"en/2024-09-04_steam_deck_arch.html#conclusion","title":"Conclusion","text":"<p>And that's it. Now we have an Arch Linux system on our Steam Deck with a dual boot manager that allows us to boot into SteamOS as well. From here, we have a machine with a dual nature, one (SteamOS) for gaming and another (Arch) to be used as a PC (Plasma) or tablet PC (Plasma Mobile).</p> <p>To choose between the normal Plasma or Plasma Mobile graphical environment, use the dropdown menu that appears at the bottom left in the SDDM login manager.</p> <p>Some interesting links consulted during the creation of this guide:</p> <ul> <li>The Arch Linux Handbook \u2013 Learn Arch Linux for Beginners</li> <li>Instalando Arch Linux con KDE en Steam Deck</li> <li>Steam Deck - ArchWiki</li> </ul>"},{"location":"en/2024-09-09_zx_mechtrum.html","title":"ZX Mechtrum","text":"<p>For a while, I\u2019ve wanted to assemble a ZX Spectrum Harlequin 128 kit. It\u2019s the perfect Spectrum (128KB, supports all models/ROMs from the various versions produced by Sinclair and Amstrad, and with components that can still be acquired today, including the ULA, which has been replaced by discrete logic). However, the option of purchasing a replica case of the original 48K (rubber keys) didn\u2019t really excite me.</p> <p>A few months ago, I came across Lee Smith\u2019s ZX Mechtrum project, a case for 48KB-format boards with a mechanical keyboard, and it seemed like the perfect complement for the Harlequin. In fact, in the video from the More Fun Making It channel, through which I learned of its existence, its creator mentions that he plans to install a Harlequin 128 in one of these cases soon.</p> <p>Since there are already several videos and guides for both the Harlequin kit and the ZX Mechtrum case, I won\u2019t detail the assembly process but will instead describe it generally and mention some peculiarities and problems I encountered.</p>"},{"location":"en/2024-09-09_zx_mechtrum.html#mechtrum","title":"Mechtrum","text":"<p>Since the Harlequin 128 kit is distributed by Byte Delight, its availability is quite stable, so the most critical point of the plan was acquiring the Mechtrum from Lee Smith, as selling products is not his main activity. In fact, I managed to get the last unit from a batch he made in late 2023. As of writing this (September 2024), it\u2019s back on sale, but it\u2019s not expected to remain available for long. In any case, I was able to acquire a unit that arrived pre-assembled. My unit came with 3 faceplates, one for the 48K, another for the Sifzif 512, and one for the Harlequin 128.</p> <p></p>"},{"location":"en/2024-09-09_zx_mechtrum.html#harlequin-128","title":"Harlequin 128","text":"<p>The Harlequin 128 is a design by Don Superfo, and the PCB can be purchased through the links provided in the project\u2019s base repository. The repository also contains the BOM (Bill Of Materials) for the different versions with all the necessary components. However, by far the easiest option is to purchase one of the kits distributed by Ben Versteeg from Byte Delight. The kit comes with an issue 2D version PCB and all the necessary components to assemble it, conveniently sorted into bags along with a manual that makes it almost impossible to get lost. There are times when it\u2019s not available in his store, but it\u2019s just a matter of staying alert or subscribing to availability notifications. In my case, I had to wait a couple of months for it to become available again.</p> <p></p> <p>The only problem I encountered during assembly was that, according to the manual, the R61 resistor array is optional if you\u2019re not going to install the joystick interface. However, these resistors, in addition to serving the joystick port, also act as pullups for the ROM bank selection microswitches, so without them, selecting ROM banks higher than 0 was unstable. After installing the R61 array, everything worked correctly.</p> <p></p>"},{"location":"en/2024-09-09_zx_mechtrum.html#resultado","title":"Resultado","text":"<p>The result is a dream come true: a 128K Spectrum with a mechanical keyboard and reliable components. And it\u2019s a beauty. \ud83e\udd29</p> <p></p>"},{"location":"en/retro-emulacion/funkey-s.html#links","title":"Links","text":"<ul> <li>Super Mario 64 DOS Port</li> </ul>"},{"location":"en/retro-emulacion/funkey-s.html#toolchain-installation","title":"Toolchain installation","text":"<p>Prerequisites:</p> <pre><code>$ sudo apt install bash bc binutils build-essential bzip2 ca-certificates cpio cvs expect file g++ gcc git gzip liblscp-dev libncurses5-dev locales make mercurial openssh-client patch perl procps python3 python3-dev python3-distutils python3-setuptools rsync rsync sed subversion sudo tar unzip wget xxd\n</code></pre> <p>Download from here.</p> <p>Once uncompressed, run from the directory where installed (for example <code>/home/user/funkey/FunKey-sdk-2.3.0</code>):</p> <pre><code>$ ./relocate-sdk.sh\n$ . environment-setup\n$ sudo ln -s /home/user/funkey/FunKey-sdk-2.3.0 /opt/FunKey-sdk\n</code></pre>"},{"location":"en/retro-emulacion/funkey-s.html#sdlretro-build","title":"sdlretro build","text":"<p>Download from here.</p> <p>Once the code is downloaded, it is compiled by following the steps (or by executing directly) of the <code>package</code> script.</p> <p>The built OPK is <code>libretro_funkey-s.opk</code>. Copy <code>libretro_funkey-s.opk</code> to app folder, create <code>/mnt/FunKey/.sdlretro/cores</code> and put core files in the directory.</p>"},{"location":"en/retro-emulacion/funkey-s.html#retroarch-cores-build","title":"RetroArch cores build","text":""},{"location":"en/retro-emulacion/funkey-s.html#mgba","title":"mgba","text":"<p>Download from here. Built directly with <code>make</code>.</p>"},{"location":"en/retro-emulacion/funkey-s.html#retro8","title":"retro8","text":"<p>Download from here. Built directly with <code>make</code>.</p>"},{"location":"en/retro-emulacion/miyoo-mini.html#links","title":"Links","text":""},{"location":"en/retro-emulacion/miyoo-mini.html#emulators-ports-and-applications","title":"Emulators, Ports and Applications","text":"<ul> <li>Ports by steward-fu</li> <li>Ports and builds by Eggs</li> </ul>"},{"location":"en/retro-emulacion/miyoo-mini.html#system","title":"System","text":"<ul> <li>Firmware:<ul> <li>20220419 for Mini v1 and v2</li> <li>Community Firmware for Mini v3</li> <li>20230326 for Mini+</li> <li>Unbrick Guide</li> </ul> </li> <li>Toolchain:<ul> <li>MiyooMini</li> <li>Shauniman</li> <li>OnionUI</li> </ul> </li> <li>Frontends:<ul> <li>Koriki</li> <li>Onion</li> <li>MiniUI</li> </ul> </li> </ul>"},{"location":"en/retro-emulacion/miyoo-mini.html#hardware","title":"Hardware","text":"<ul> <li>Official store in Aliexpress</li> <li>UART mod:<ul> <li>steward-fu</li> <li>eduardofilo</li> </ul> </li> <li>Teardown</li> <li>3D Print:<ul> <li>More accessible triggers: V1, V2</li> </ul> </li> <li>Spare parts</li> </ul>"},{"location":"en/retro-emulacion/miyoo-mini.html#firmwares-rootfs-mounting","title":"Firmware's rootfs mounting","text":"<ol> <li>Download the file used to update the console firmware from official site.</li> <li>Locate inside the ZIP the <code>.img</code> file. In the case of the 2022-04-19 update the file is located in <code>The firmware0419</code> directory and is named <code>myoo283_fw.img</code>.</li> <li> <p>Open the file with an hex editor to read the beginning of it which contains information in text form with the blocks inside the image and where they are flashed on the NAND. In particular we are interested in the section describing the <code>rootfs</code> partition which contains the following information:</p> <pre><code># File Partition: rootfs\nmxp r.info rootfs\nsf probe 0\nsf erase ${sf_part_start} ${sf_part_size}\nfatload mmc 0 0x21000000 $(SdUpgradeImage) 0x1ae000 0x22b000\nsf write 0x21000000 ${sf_part_start} 0x1AE000\n</code></pre> </li> <li> <p>According to the U-boot <code>fatload</code> command documentation, the last two parameters in hexadecimal are the size and the position of the rootfs partition inside the <code>.img</code> file.</p> </li> <li> <p>Create a directory (for example <code>mnt</code>) and run the following command to mount the firmware rootfs in it:</p> <pre><code>sudo mount -o loop,sizelimit=0x1ae000,offset=0x22b000,ro,noexec miyoo283_fw.img mnt\n</code></pre> </li> </ol> <p>Using the same method you can also mount the <code>miservice</code> and <code>customer</code> partitions:</p> <pre><code>sudo mount -o loop,sizelimit=0x32f000,offset=0x3d9000,ro,noexec miyoo283_fw.img mnt2\nsudo mount -o loop,sizelimit=0x6c5000,offset=0x708000,ro,noexec miyoo283_fw.img mnt3\n</code></pre>"},{"location":"en/retro-emulacion/miyoo-mini.html#interesting-firmware-directoriesfiles","title":"Interesting firmware directories/files","text":"Directory Content <code>/mnt/SDCARD</code> SD mounting point <code>/customer/main</code> Main frontend startup script. It is the one that invokes <code>.tmp_update/updater</code> in case it exists which is the starting point of UIs like Onion or MiniUI <code>/sys/devices/gpiochip0/gpio/gpio59/value</code> Flag indicating if the machine is being charged <code>/sys/class/pwm/pwmchip0/pwm0/duty_cycle</code> Screen brightness (from 0 to 100) <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_available_governors</code> Available governors for processor (<code>userspace</code>, <code>powersave</code>, <code>ondemand</code>, <code>performance</code>) <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_governor</code> Current governor <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_available_frequencies</code> Available frequencies for processor (<code>400000</code>, <code>600000</code>, <code>800000</code>, <code>1000000</code>, <code>1100000</code>, <code>1200000</code>) <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_min_freq</code> Minimum frequency for processor <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq</code> Maximum frecuency for processor <code>/sys/devices/system/cpu/cpufreq/policy0/scaling_cur_freq</code> Current frecuency <code>/appconfigs/system.json</code> System general settings (corresponds to Settings menu)"},{"location":"en/retro-emulacion/miyoo-mini.html#interesting-onionui-directoriesfiles","title":"Interesting OnionUI directories/files","text":"Directory Content <code>/mnt/SDCARD/Saves/CurrentProfile/saves/playActivity.db</code> Play Activity database. To reset the statistics, you can simply delete the file <code>/mnt/SDCARD/Saves/CurrentProfile/saves/PlayActivityBackup/</code> Directory containing backups of the previous <code>playActivity.db</code> file. Apparently this directory is not purged, so you will have to do it by hand from time to time. <code>/mnt/SDCARD/Roms/recentlist.json</code> <code>Recent</code> list <code>/mnt/SDCARD/.tmp_update/romScreens/</code> Screenshots <code>/mnt/SDCARD/.tmp_update/.disableMenu</code> Disables the Game Switcher associated with the Menu key"},{"location":"en/retro-emulacion/miyoo-mini.html#keys","title":"Keys","text":"Key GPIO SDL value SDL descriptor Up 1 273 SDLK_UP Down 69 274 SDLK_DOWN Left 70 276 SDLK_LEFT Right 5 275 SDLK_RIGHT Menu 12 27 SDLK_ESCAPE A 8 32 SDLK_SPACE B 6 306 SDLK_LCTRL X 9 304 SDLK_LSHIFT Y 7 308 SDLK_LALT Select 11 305 SDLK_RCTRL Start 10 13 SDLK_RETURN L1 13 101 SDLK_e L2 14 9 SDLK_TAB R1 90 116 SDLK_t R2 47 8 SDLK_BACKSPACE"},{"location":"en/retro-emulacion/miyoo-mini.html#framebuffer","title":"Framebuffer","text":"<pre><code>/ # fbset\n\nmode \"640x480-100\"\n        # D: 45.455 MHz, H: 54.633 kHz, V: 100.060 Hz\n        geometry 640 480 640 1440 32\n        timings 22000 64 64 32 32 64 2\n        accel false\n        rgba 8/16,8/8,8/0,8/24\nendmode\n</code></pre> <p>The frambuffer (<code>/dev/fb0</code>) contains 3 images (640x1440) and is rotated 180\u00ba. Each pixel occupies 4 bytes encoded in the following order: <code>BBGGRRAA</code> where <code>AA</code> (alpha) is always <code>FF</code>.</p>"},{"location":"en/retro-emulacion/rgb2hdmi.html#links","title":"Links","text":"<ul> <li>Quick Start Guide</li> <li>Supported Computers and Cables</li> <li>Tutorial on Adding a New Profile</li> </ul>"},{"location":"en/retro-emulacion/rgb2hdmi.html#controls","title":"Controls","text":"Button Situation Pulsation Description SW1 Short Menu SW1 Long Toggle scanlines SW1 Menu Short Select menu option or enter editing mode for the selected parameter SW1 Boot Long Disable 50Hz support of the monitor (there are monitors that do not support it although they state that they do through EDID). SW2 Short Screen capture SW2 Long oggle NTSC artifact colours SW2 Menu Short Cursor Down or increase selected parameter SW3 NTSC artifacts enabled Short Cycles though the four NTSC artifact phases SW3 Manual timing sets enabled Short Switches between set 1 and set 2 SW3 Short Enables (if disabled) or refreshes the genlock SW3 Long Calibrate sampling position SW3 Menu Short Cursor Up of decrease selected parameter SW2 y SW3 Menu Short Screencap with the menu on screen RST Short Reset"},{"location":"en/retro-emulacion/rgb2hdmi.html#profiles","title":"Profiles","text":""},{"location":"en/retro-emulacion/rgb2hdmi.html#zx-spectrum-2","title":"ZX Spectrum +2","text":"<p>The connection between the DIN8 of the Spectrum +2 and the 12-pin IDC of RGBtoHDMI (P2) is (official documentation):</p> DIN8 RGBtoHDMI 12 way IDC(P2) Description 1 Composite PAL (75 Ohm, 1.2 V pk-pk) 2 3 GND 3 4 Bright output (TTL) 4 8 Composite sync (TTL) 5 Vertical sync (TTL) 6 9 Green (TTL) 7 7 Red (TTL) 8 11 Blue (TTL) <p></p> <ul> <li>CPLD firmware: 6-12_BIT_RGB_Analog</li> <li>Palette Menu:<ul> <li>Palette: RGBrgb (Amstrad)</li> </ul> </li> <li>Profile: Spectrum +2 (Grey)</li> </ul>"},{"location":"en/retro-emulacion/rgb2hdmi.html#zx-harlequin-128","title":"ZX Harlequin 128","text":"<p>The connection between the miniDIN8 of the Harlequin 128 and the 6-pin IDC of the Analog board is (official documentation):</p> miniDIN8(socket) RGBtoHDMI 6 way IDC (Analog board) Description 1 1 GND 2 Video switching (12V) 3 Fast switching RGB (75 Ohm, 1 V) 4 4 Green (75 Ohm, 0.7 V pk-pk) 5 Audio (mono) 6 5 Red (75 Ohm, 0.7 V pk-pk) 7 3 Blue (75 Ohm, 0.7 V pk-pk) 8 2 Composite sync <p></p> <ul> <li>CPLD firmware: 3-12_BIT_BBC_Analog</li> <li>Palette Menu:<ul> <li>Palette: RGBrgb (Spectrum)</li> </ul> </li> <li>Profile: ZX-Harlequin-Nuvo</li> </ul> <p> </p>"},{"location":"en/retro-emulacion/rgb2hdmi.html#50hz-support-and-resolution","title":"50Hz support and resolution","text":"<p>Many monitors declare in the EDID that they don't support the 50Hz mode, even though they do. If the monitor doesn't switch to 50Hz when it receives a video signal at this frequency, run the test using the menu option <code>Test Monitor for 50Hz Support</code> following the documentation. If the test result is positive, change the <code>Refresh</code> setting to <code>Force 50Hz-60Hz</code> so that it adopts the input signal frequency, ignoring what the EDID declares.</p> <p>As mentioned in the final note of the section Configuring the Refresh setting in the official documentation, some small monitors declare in the EDID that they support a much higher resolution than they actually have. In such cases, it is advisable to manually adjust the resolution in the <code>Resolution</code> setting to achieve optimal display. This is the case with my 10.1\" monitor, which declares support for 1366x768 but actually has a resolution of 1024x600.</p>"},{"location":"en/retro-emulacion/steam-deck.html#links","title":"Links","text":"<ul> <li>Steam Deck Recovery Instructions</li> <li>Proton DB: Lists Steam Deck compatible games and offers solutions for those that are not.</li> <li>NonSteamLaunchers: Installation of alternative launchers to Steam. Requires installing the Chrome browser from Discover so that some of the installed stores can be launched.</li> <li>Dual boot menus:<ul> <li>SteamDeck_rEFInd</li> <li>SteamDeck-Clover-dualboot </li> </ul> </li> <li>Installing Arch Linux</li> </ul>"},{"location":"en/retro-emulacion/steam-deck.html#boot-modes","title":"Boot modes","text":"Key combination Description <code>Power</code> Normal boot. <code>Power</code> + <code>Volume+</code> BIOS menu. <code>Power</code> + <code>Volume-</code> Boot menu. <code>Power</code> + <code>\u22ef</code> Bootloader menu. <code>Power</code> + <code>Volume- + \u22ef</code> Reset UEFI settings. Press and hold both <code>Volume- + \u22ef</code> buttons after the first blinking of the LED. The LED will blink during the operation and stop after it is finished, then release the buttons."},{"location":"en/retro-emulacion/steam-deck.html#bios-backup","title":"BIOS backup","text":"<p>The Steam Deck does not have the BIOS settings in a CMOS memory maintained with a battery, but in a Winbond flash that if corrupted, the machine will not boot. It is important to make a backup as soon as possible in case there are problems in the future. The backup can be done with the following command from a terminal in desktop mode:</p> <pre><code>sudo /usr/share/jupiter_bios_updater/h2offt /home/deck/biosbkp.fd -O\n</code></pre> <p>Extract the resulting file to <code>/home/deck/biosbkp.fd</code> and save it in a safe place. The file contains elements particular to each console, so it is not useful to backup another console. That is why it is important to backup our unit.</p>"},{"location":"en/retro-emulacion/steam-deck.html#interesting-file-system-paths","title":"Interesting file system paths","text":"Path Description <code>/run/media/</code> SD card mounting point. <code>/home/deck/.steam/steam/</code> Steam directory. <code>/home/deck/.steam/steam/steamapps/compatdata</code> Directory of the installed games/applications where the sandbox is created with the Windows file structure for them. <code>/home/deck/.steam/steam/steamapps/common</code> Directory of installed games."},{"location":"en/retro-emulacion/steam-deck.html#interesting-applications","title":"Interesting applications","text":""},{"location":"en/retro-emulacion/steam-deck.html#steam-store","title":"Steam Store","text":"<ul> <li><code>Proton BattlEye Runtime</code>: Makes the BattlEye system used by some games accessible to Linux.</li> <li><code>Proton Easy Anti-Cheat Runtime</code>: Makes Epic's Easy Anti-Cheat system accessible to Linux games.</li> <li><code>Proton Experimental</code>: Latest (non-stable) version of Proton.</li> </ul>"},{"location":"en/retro-emulacion/steam-deck.html#discover","title":"Discover","text":"<ul> <li><code>ProtonUp-Qt</code>: To install different versions of Proton GE.</li> <li><code>Heroic Games Launcher</code>: Opensource alternative to Epic Games store, GOG and Amazon Prime Games Launcher.</li> <li><code>Lutris</code>: Retro games and emulators installer.</li> <li><code>Mount Unmount ISO</code>: Mount and unmount ISO images from Dolphin file explorer.</li> <li><code>PeaZip</code>: File compressor and decompressor.</li> </ul>"},{"location":"en/retro-emulacion/steam-deck.html#interesting-plugins","title":"Interesting plugins","text":"<p>We need to have Decky installed.</p> <ul> <li><code>AutoFlatpaks</code>: Notifies and allows you to update packages that are normally updated from desktop mode.</li> <li><code>Bluetooth</code>: Bluetooth device management that would normally be done from desktop mode.</li> <li><code>Battery Tracker</code>: Battery information for both Steam Deck and linked controllers.</li> <li><code>CSS Loader</code>: Change themes in Steam UI.</li> <li><code>EmuDecky</code>: Official EmuDeck plugin to make quick adjustments to emulators.</li> <li><code>Fantastic</code>: Change the fan curve.</li> <li><code>Free Loader</code>: Displays when free games appear in some of the stores.</li> <li><code>Game Theme Music</code>: Allows you to listen to the music of the games in the game tab of the Steam library.</li> <li><code>HLTB for Deck</code>: Displays the duration of the games.</li> <li><code>PlayTime</code>: Displays the time played in non-Steam games.</li> <li><code>ProtonDB Badges</code>: Shows the compatibility of games with Steam Deck according to ProtonDB.</li> <li><code>SteamGridDB</code>: To be able to change the covers and artwork of games in the Steam library.</li> <li><code>Storage Cleaner</code>: Cleaning of residual files.</li> </ul>"},{"location":"en/retro-emulacion/steam-deck.html#enable-ssh","title":"Enable SSH","text":"<ol> <li>Open <code>Konsole</code> in desktop mode.</li> <li> <p>Change the password of the <code>deck</code> user:</p> <pre><code>passwd\n</code></pre> </li> <li> <p>Enable SSHD:</p> <pre><code>sudo systemctl start sshd\n</code></pre> </li> <li> <p>Enable SSHD at startup:</p> <pre><code>sudo systemctl enable sshd\n</code></pre> </li> </ol>"},{"location":"en/retro-emulacion/steam-deck.html#install-any-windows-application","title":"Install any Windows application","text":"<p>Once we have the installer (.exe or .msi):</p> <ol> <li>Open Steam application from desktop mode.</li> <li>Click the <code>+ Add a product</code> button at the bottom left.</li> <li>Select <code>Add a non-Steam program...</code>.</li> <li>Click <code>Search...</code> at the bottom left in the window that appears.</li> <li>Select the executable of the program you want to install (if the executable is not <code>.exe</code> change the filter to <code>All files</code>).</li> <li>Click <code>Add selected</code>.</li> <li>Select the program in the Steam library (under <code>Uncategorized</code>), click the gear icon (<code>Manage</code>) and select <code>Properties...</code> from the dropdown.</li> <li>Select the <code>Compatibility</code> group of options and force the use of the last version of Proton GE that we have available (for this we must have previously installed <code>ProtonUp-Qt</code> from the <code>Discover</code> store and have installed some version of Proton GE).</li> <li>Click on <code>Play</code>.</li> <li>It will start the installer whose assistant we will follow as if we were in Windows.</li> <li>When it finishes and the installer closes, we will see that the <code>Play</code> button in Steam is activated again.</li> <li>We erase the executable of the route where we had it.</li> <li>What we have just installed will have finished in the same sandbox that has been created with the steps 1 to 8. If we eliminated the entry in the library, everything would be lost, therefore we must modify the launcher of the installer so that it behaves like the launcher of what we have installed. To do this open the file explorer and go to the path <code>/home/deck/.steam/steam/steamapps/compatdata</code>. There we will find the folders of the installed games/applications. We find out the folder with the identifier corresponding to the installation that we have just done (for example helping us with the dates of creation of the folders). Inside this folder we will look for the launching of what we have just installed (it can be a <code>.exe</code> or a <code>.lnk</code> that appears in the Windows desktop or in the start menu).</li> <li>We should still have in front the entry corresponding to the installer in the Steam library, if not select it.</li> <li>Click the gear icon (<code>Manage</code>) and select <code>Properties...</code> from the drop-down menu.</li> <li>Change the Shortcut name and the <code>Destination</code> and <code>Start at</code> entries to the paths we found out in step 13.</li> <li>Change the game art to look better in the Steam library (for this we must have installed <code>Decky</code> and the <code>SteamGridDB</code> plugin).</li> </ol>"},{"location":"en/retro-emulacion/steam-deck.html#dependency-solution-in-windows-games-with-proton","title":"Dependency solution in Windows games with Proton","text":"<p>If a game does not start because of a missing dependency, we can install it and then link it to the game launcher in the following way. We are going to see it for example with the <code>Microsoft Windows C++ Runtime</code>:</p> <ol> <li>Search for the dependency. In the case of the <code>Micrsoft Windows C++ Runtime</code> we can download it from this page.</li> <li>We create a launcher in Steam for the installer of the dependency using steps 1 to 8 of previous section (do not forget to select ProtonGE as compatibility tool).</li> <li>We open the launcher to install the dependency.</li> <li>We find out the folder with the identifier corresponding to the installation that we have just made inside the directory <code>/home/deck/.steam/steam/steamapps/compatdata</code> (for example helping us with the dates of creation of the folders). We imagine for the example that the path where the dependency has ended up installed is <code>/home/deck/.steam/steam/steam/steamapps/compatdata/12345678/</code>.</li> <li>Delete the launcher created in step 2.</li> <li>Select the game in the Steam library that requires the dependency, click the gear icon (<code>Manage</code>) and select <code>Properties...</code> from the drop-down.</li> <li> <p>In the <code>Direct Access</code> section, in the <code>Launch Parameters</code> field, enter the following (changing the path to the appropriate path):</p> <pre><code>STEAM_COMPAT_DATA_PATH=\"/home/deck/.steam/steam/steamapps/compatdata/12345678\" %command%\n</code></pre> </li> <li> <p>Close the Properties window and click <code>Play</code>.</p> </li> </ol> <p>In case a game requires several dependencies, we can incorporate as many <code>STEAM_COMPAT_DATA_PATH</code> entries as needed separated by a space.</p>"},{"location":"en/retro-emulacion/steam-deck.html#links_1","title":"Links","text":"<ul> <li>EmuDeck</li> <li>EmuDeck Wiki</li> <li>BIOS and ROMs Cheat Sheet</li> </ul>"},{"location":"en/retro-emulacion/zx-spectrum-next.html#links","title":"Links","text":"<ul> <li>ZX Spectrum Next</li> <li>N-GO</li> <li>Spectrum Next Stuff - YouTube list</li> <li>The master nextreg and port lists are kept up to date, and fully describe the Next hardware for developers.</li> <li>The pinouts list has detailed information on connectors.</li> <li>The NextZXOS change log details what was new and fixed in each version of NextZXOS/NextBASIC.</li> <li>The four NextZXOS PDFs have detailed information on the NextZXOS and esxDOS APIs, NextBASIC sysvars, and NextBASIC syntax.</li> <li>varmfskii's ZX Spectrum Next Programming Notes are an attempt to consolidate the Next programming interface into a single location.</li> <li>Myopian's API spreadsheet summarises NextZXOS/IDEDOS entry points along with calling conditions.</li> <li>Myopian's dot command summary collects together help and readme text for NextZXOS dot commands in one handy place.</li> <li>Tomaz's ZX Spectrum Next Assembly Developer Guide is almost like \"User manual\" for Assembly developers.</li> <li>Luzie/Rat Mal's Almost (In-) Complete List of esxDOS DOT-Commands attempts to list dot commands for several systems, including the Next. Some of the non-Next-specific commands may work on the Next, and some may only work on other FPGA/divMMC systems.</li> <li>Beeper: Installation of internal beeper.</li> </ul>"},{"location":"en/retro-emulacion/zx-spectrum-next.html#keyboard-shortcuts","title":"Keyboard shortcuts","text":"Shortcut Used for Notes F1 / Reset (long press) Hard Reset Resets CPU and Peripherals, reloads the FW and loads the hardware settings anew but doesn't clear the RAM F2 Scandoubler Doubles the output resolution. Must be off for older monitors and SCART cables F3 50Hz/60Hz Vertical Frequency Changes the display's vertical frequency from 50 to 60Hz and vice-versa F4 / Reset (short press) Soft Reset Resets CPU and Peripherals and reloads the Operating System. Used with Caps Shift it forces a rescan of drives and a reload of the boot screen under esxDOS F5 Not Used F6 Not Used F7 Scanlines Cyclically toggles scan line emulation in 4 steps/intensities: 0%, 25%, 50%, 75%. This emulates the older CRT monitors F8 Turbo modes Cyclically toggles CPU speed (3.5MHz, 7MHz, 14MHz, 28Mhz) F9 NMI (Multiface) Simulates pressing the NMI button F10 divMMC NMI (Drive) Simulates pressing the Drive button (divMMC NMI \u2013 used with esxDOS). Used with Caps Shift it forces a rescan of drives and a reload of the boot screen under esxDOS NMI +  Simulates PS/2 keyboard function keys"},{"location":"en/retro-emulacion/zx-spectrum-next.html#key-files","title":"Key files","text":"File Description <code>machines/next/CONFIG.INI</code> Next main core settings (scanlines, scandoubler, screen refresh rate, ULAPlus modes, etc.). Select the default mode from those defined in <code>machines/next/menu.def</code>."},{"location":"en/retro-emulacion/zx-spectrum-next.html#modes","title":"Modes","text":"Mode Selection Description <code>ZX Spectrum Next (standard)</code> Space on hard boot/reset Normal NextZXOS <code>ZX Spectrum Next (LG 48K ROM)</code> Space on hard boot/reset <code>ZX Spectrum 48K</code> Space on hard boot/reset and <code>more...</code> page in NextZXOS menu <code>ZX Spectrum 128k</code> Space on hard boot/reset and <code>more...</code> page in NextZXOS menu <code>ZX Spectrum +2</code> Space on hard boot/reset <code>ZX Spectrum +2A/+3</code> Space on hard boot/reset <code>ZX Spectrum +3e</code> Space on hard boot/reset <code>ZX80 Emulator (c) Paul Farrow</code> Space on hard boot/reset and <code>more...</code> page in NextZXOS menu <code>ZX81 Emulator (c) Paul Farrow</code> Space on hard boot/reset and <code>more...</code> page in NextZXOS menu <code>48K Gosh Wonderful ROM v3.3</code> Space on hard boot/reset <code>48K Looking Glass ROM v1.07</code> Space on hard boot/reset 48K mode with key-to-key commands and bug fixes <code>48K Looking Glass ROM v1.07-altfont-</code> Space on hard boot/reset 48K mode with key-to-key commands and bug fixes. It has a bold font <code>Timex Sinclair TC2048</code> Space on hard boot/reset <code>Investronica Spectrum 128K</code> Space on hard boot/reset <code>Pentagon 128K</code> Space on hard boot/reset"},{"location":"en/retro-emulacion/zx-spectrum-next.html#nextbasic-cursor-modes","title":"NextBASIC cursor modes","text":"32 columns (Colour) 64/85 columns (Shape) Function Blue Horizontal Bar in lower half of character Normal Text Entry Cyan Horizontal Bar in upper half of character CAPS LOCK on (Toggle with CAPS LOCK key) Magenta Vertical Bar GRAPHICS mode (Toggle with GRAPHICS key) Green Horizontal Stripes EXTEND mode (Toggle with EXTEND key) Red Rectangular Outline Error Marker: There's an error in the line that needs correcting"},{"location":"en/retro-emulacion/zx-spectrum-next.html#cassette-connections","title":"Cassette connections","text":""}]}