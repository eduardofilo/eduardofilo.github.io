{"config":{"lang":["es"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"Compilaci\u00f3n OpenAuto para solucionar touch screen 2019-07-07 21:45 Compilaci\u00f3n de OpenAuto tras dejar de funcionar la pantalla t\u00e1ctil por actualizaci\u00f3n de Google Play Services. Composite mod en consola Pong 2019-04-20 16:00 Composite mod en vieja consola Pong basada en chip AY-3-8500. Bloqueo de llamadas entrantes en Telsome 2019-01-29 19:20 Bloqueo de llamadas entrantes en proveedor de VoIP Telsome. Conversi\u00f3n del sitio de Apuntes a MkDocs 2019-01-26 19:00 Migraci\u00f3n del motor de apuntes de Rubi/Jekyll a Python/MkDocs. Octoprint en Anet A8 2018-10-20 21:30 Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint. Crankshaft - AndroidAuto sobre Raspberry Pi 2018-10-18 22:30 Montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D. Otto DIY 2018-05-05 17:25 Montaje de robot Otto. Raspberry Pi 3 + KODI 16 + Tvheadend 2017-01-14 12:00 Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi3 (actualizaci\u00f3n de art\u00edculo anterior). Raspberry Pi 3 + KODI 2016-12-06 15:32 Instalaci\u00f3n de Kodi sobre Raspberry Pi3. Interruputor de encendido para Raspberry Pi 2016-10-17 20:00 Instalaci\u00f3n de un pulsador de reset/encendido en Raspberry Pi. El mundo de ayer - Stefan Zweig 2016-08-17 21:00 Rese\u00f1a del libro 'El mundo de ayer' de Stefan Zweig. Entorno desarrollo STM32 VL Discovery sobre Linux 2016-08-02 08:30 Configuraci\u00f3n de entorno de desarrollo para STM332 VL Discovery con herramientas libres sobre Linux. Configuraci\u00f3n PiGRRL-2 2016-07-21 09:30 Instalaci\u00f3n RetroPie desde cero sobre Adafruit PiGRRL-2. Wild - Cheryl Strayed 2016-07-10 16:30 Rese\u00f1a del libro 'Wild' de Cheryl Strayed. Alertas por supuestos virus en Android 2016-07-02 16:30 T\u00e9cnicas para combatir los mensajes que aparecen en Android alert\u00e1ndonos de supuestos virus en el sistema. Un antrop\u00f3logo en Marte - Oliver Sacks 2016-04-10 16:30 Rese\u00f1a del libro 'Un antrop\u00f3logo en Marte' de Oliver Sacks. Los Innovadores - Walter Isaacson 2016-02-25 22:30 Rese\u00f1a del libro 'Los Innovadores' de Walter Isaacson. Raspberry Pi 2 + KODI + Tvheadend 2015-03-14 15:04 Instalaci\u00f3n de Kodi y Tvheadend sobre Raspberry Pi. M\u00f3viles recomendables 2015-01-09 20:08 Listado de m\u00f3viles recomendables. Jekyll+GitHub Pages 2015-01-08 15:08 Creaci\u00f3n de sitio en GitHub Pages con Jekyll. Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS 2014-12-20 12:52 Instalaci\u00f3n de Dokuwiki sobre Raspberry Pi con ficheros alojados en NAS. Micro placas 2014-12-20 12:52 Listado de micro placas tipo Raspberry Pi. Presentaci\u00f3n 2014-12-15 18:25 Presentaci\u00f3n del blog.","title":"Blog"},{"location":"2014-12-15-presentacion.html","text":"Hola. Me llamo Eduardo Moreno y en esta p\u00e1gina pretendo colgar p\u00edldoras de conocimiento sobre los temas que me interesan y ocupan. Los campos a tratar y la frecuencia de publicaci\u00f3n depender\u00e1n del orden y la oportunidad en que sean encontradas, puesto que el sitio pretende ser una especie de cuaderno de apuntes p\u00fablico. Entrar\u00e1n por tanto todos los temas que me interesan, que fundamentalmente son: Ciencia en general con Psicolog\u00eda, Matem\u00e1ticas, Geolog\u00eda en particular. Astron\u00e1utica Programaci\u00f3n o Desarrollo Sistemas inform\u00e1ticos. Linux, Raspberry Pi Cine M\u00fasica F1 Puedes seguirme en las siguientes redes: Twitter GitHub Linkedin Tumblr YouTube","title":"2014-12-15 Presentaci\u00f3n"},{"location":"2014-12-19-minecraft_server.html","text":"You\u2019ll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run jekyll serve --watch , which launches a web server and auto-regenerates your site when a file is updated. To add new posts, simply add a file in the _posts directory that follows the convention YYYY-MM-DD-name-of-post.ext and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works. Jekyll also offers powerful support for code snippets: {% highlight ruby %} def print_hi(name) puts \"Hi, #{name}\" end print_hi('Tom') => prints 'Hi, Tom' to STDOUT. \u00b6 {% endhighlight %} Check out the Jekyll docs for more info on how to get the most out of Jekyll. File all bugs/feature requests at Jekyll\u2019s GitHub repo . If you have questions, you can ask them on Jekyll\u2019s dedicated Help repository .","title":"Servidor Minecraft sobre Raspberry Pi"},{"location":"2014-12-19-minecraft_server.html#prints-hi-tom-to-stdout","text":"{% endhighlight %} Check out the Jekyll docs for more info on how to get the most out of Jekyll. File all bugs/feature requests at Jekyll\u2019s GitHub repo . If you have questions, you can ask them on Jekyll\u2019s dedicated Help repository .","title":"=&gt; prints 'Hi, Tom' to STDOUT."},{"location":"2014-12-20-micro-placas.html","text":"Llevo un tiempo pendiente del relativamente nuevo mundo de las micro placas (o SBC's de Single Board Computer), popularizadas gracias a Arduino y Raspberry Pi. De entre las dos anteriores me quedo con la segunda al ser una persona m\u00e1s de soft que de hard y tener Raspberry Pi m\u00e1s potencial en este sentido. Adem\u00e1s siendo que la diferencia de precio es peque\u00f1a, por qu\u00e9 resistirse a tener un Linux completo corriendo en la placa. Est\u00e1 claro que esto tiene repercusiones en cuanto a estabilidad, seguridad y sobre todo autonom\u00eda energ\u00e9tica, pero como digo, en mi caso es m\u00e1s habitual que esto pese menos que las ventajas que me aporta construir sobre Linux. A continuaci\u00f3n una lista con algunas de las placas de este tipo que se pueden encontrar: Raspberry Pi : Revista Banana Pi y Banana Pro Hummingboard BeagleBoard pdDuino Cubieboard UDOO ODROID : Revista Up y Up core Orange Pi C.H.I.P. LattePanda Asus Tinker Board HiKey 960 Rock64 Media Board Computer NanoPi K2 NanoPi NEO4 Khadas VIM La Frite Le Potato RockPi Atomic Pi Un par de listados alternativos: Raspberry Pi : rivales y alternativas Best Raspberry Pi Alternatives 2019 Hasta ahora los \u00fanicos proyectos que he puesto en marcha han sido de computaci\u00f3n, es decir, sin componente hardware, que es otro de los usos importantes que se les suelen dar. Han servido para delegar un par de funciones que antes ejecutaba directamente sobre mi PC principal. Concretamente: Gestor de descargas. Servidor git para proyectos personales privados que no quiera publicar en GitHub . Media center con Kodi. Consola port\u00e1til . Raspi consume 3.5W como m\u00e1ximo, as\u00ed que con ella se puede uno permitir que estos servicios funcionen las 24 horas del d\u00eda. Ya no s\u00f3lo por las ventajas que tiene de cara a la factura el\u00e9ctrica, sino tambi\u00e9n por evitar \"quemar\" un caro PC en tareas de proceso puntual pero que requieren alta disponibilidad (se ve muy claro en el caso del servidor git ). Tambi\u00e9n vienen muy bien estas placas para adosarlas a los televisores modernos y montar cosas como media centers (por ejemplo con XBMC-Kodi ) y consolas de videojuegos retro por emulaci\u00f3n (con distribuciones como Lakka ), sin ruidos de ventiladores, ocupando muy poco espacio y consumiendo poca energ\u00eda. A partir de mayo de 2015 tengo el plan de utilizar este tipo de placas como procesadores principales de prop\u00f3sito general, es decir sustituyendo a mi actual port\u00e1til. Y es que he financiado el proyecto Pi-Top por el cual recibir\u00e9 las piezas en esa fecha para montar mi propio port\u00e1til. Y para construir/mejorar todos los que quiera desde entonces, ya que el kit incluye los planos/archivos para poder imprimir la carcasa en una impresora 3D, y el resto de componentes son tan accesibles/asequibles como las propias micro placas. La \u00faltima versi\u00f3n de Pi-Top est\u00e1 anunciado que soporte de serie al menos UDOO, BeagleBone, ODROID y Banana Pi, aparte por supuesto de Raspberry Pi. La placa que m\u00e1s me gusta en la actualidad (y que seguramente mueva las entra\u00f1as del Pi-Top inicial) es la ODROID-C1 . 4 cores ARMv7 a 1.5GHz, Mali450, 1GB de RAM DDR3, Gigabit Ethernet, z\u00f3calo eMMC y 4 puertos USB por 37\u20ac .","title":"2014-12-20 Micro placas"},{"location":"2014-12-26-dokuwiki-raspi.html","text":"Tengo desde hace a\u00f1os un Dokuwiki corriendo en el NAS, pero el que utilizo tiene un procesador muy poco potente y funcionaba muy lento. Sin embargo me gustaba que estuviera en el NAS por ser el sitio m\u00e1s seguro para tener la importante informaci\u00f3n que en el Dokuwiki mantengo. La forma de tener la informaci\u00f3n asegurada y disponible permanentemente es combinar el almacenamiento en el NAS con la ejecuci\u00f3n de los procesos en una de las Raspberry Pi que tengo en marcha permanentemente. Describo a continuaci\u00f3n c\u00f3mo ha sido el proceso en mi caso. Antes de empezar, un comentario. Voy a utilizar el paquete dokuwiki de la distribuci\u00f3n porque de Dokuwiki salen continuas ediciones y parches. De esta forma la actualizaci\u00f3n se har\u00e1 con un simple apt-get upgrade . Dokuwiki , en su versi\u00f3n empaquetada para Raspbian , puede correr sobre Apache o sobre Lighttpd . Si instalo directamente dokuwiki , el paquete prioriza la dependencia con Apache, pero prefiero utilizar Lighttpd en la Raspberry. As\u00ed pues la instalaci\u00f3n la hago por etapas para forzar la dependencia con Lighttpd . En otro caso hubiera sido tan sencillo como hacer apt-get install dokuwiki . Instalo Lighttpd : 1 sudo apt-get install lighttpd Instalo PHP: 1 sudo apt-get install php5-common php5-cgi php5 Activo el m\u00f3dulo PHP en Lighttpd y recargo la configuraci\u00f3n de este \u00faltimo: 1 2 sudo lighty-enable-mod fastcgi-php sudo service lighttpd force-reload Ahora s\u00ed instalo Dokuwiki : 1 sudo apt-get install dokuwiki Durante la instalaci\u00f3n del paquete aparece un di\u00e1logo de configuraci\u00f3n en el que, aparte de solicitar el password del usuario admin para Dokuwiki , pregunta sobre qu\u00e9 servidores HTTP de los dos soportados, queremos que se haga una configuraci\u00f3n autom\u00e1tica. De nuevo prioriza Apache, es decir, este servidor sale preseleccionado y Lighttpd desactivado. Invierto la situaci\u00f3n. Doy de alta un recurso compartido en el NAS. No muestro el proceso de esto puesto que es muy distinto en cada NAS. Comparto el recurso por medio del protocolo NFS. La instalaci\u00f3n predeterminada de Dokuwiki en Raspbian mantiene los ficheros en el directorio /var/lib/dokuwiki/data , as\u00ed que ser\u00e1 esto lo que habr\u00e1 que mantener en el NAS. Me fijo en los permisos de los ficheros de este directorio, puesto que tendremos que respetarlos para que Dokuwiki pueda trabajar. Veo esto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 edumoreno@raspi-git /var/lib/dokuwiki/data $ ls -l total 208 drwx------ 2 www-data root 16384 dic 26 11:58 attic drwx------ 11 www-data root 16384 dic 26 11:39 cache -rw-r--r-- 1 www-data root 7180 dic 26 11:39 deleted.files -rw-r--r-- 1 www-data root 0 dic 26 11:38 _dummy drwx------ 2 www-data root 16384 dic 26 11:58 index drwx------ 2 www-data root 16384 dic 26 11:58 locks drwx------ 3 www-data root 16384 dic 26 11:39 media drwxr-xr-x 2 www-data root 16384 dic 26 11:39 media_attic drwxr-xr-x 2 www-data root 16384 dic 26 11:39 media_meta drwx------ 2 www-data root 16384 dic 26 11:58 meta drwx------ 4 www-data root 16384 dic 26 11:42 pages -rw-r--r-- 1 www-data root 7917 dic 26 11:39 security.png -rw-r--r-- 1 www-data root 12093 dic 26 11:39 security.xcf drwx------ 2 www-data root 16384 dic 26 11:39 tmp Antes de hacer el montaje del directorio remoto del NAS hacia la Raspberry, transfiero al primero todos los ficheros que ha dejado la instalaci\u00f3n en Raspberry. En mi caso, como tengo habilitado el acceso SSH en el NAS, lo hago as\u00ed (desde la Raspberry): 1 scp -r /var/lib/dokuwiki/data/* 192.168.1.200:/c/dokuwiki Ahora configuro en Raspberry el montaje del recurso compartido en el NAS, lo que hago insertando la siguiente l\u00ednea en el fichero /etc/fstab : 1 192.168.1.200:/c/dokuwiki /var/lib/dokuwiki/data nfs rw 0 0 Como veo que los permisos est\u00e1n muy orientados al acceso por usuario, y no por grupo, averiguo el UID del usuario www-data para ajustar ese valor en los ficheros en el NAS. Lo hago ejecutando sobre Raspberry: 1 2 edumoreno@raspi-git ~ $ id www-data uid=33(www-data) gid=33(www-data) grupos=33(www-data) Ahora inicio sesi\u00f3n por SSH en el NAS, me voy al directorio que voy a montar en la Raspberry y ajusto el UID de los ficheros que he copiado en el paso 7: 1 chown -R 33 /c/dokuwiki/* Finalmente vuelvo a Raspberry Pi y monto el nuevo directorio: 1 sudo mount -a A partir de entonces, el directorio /var/lib/dokuwiki/data de la Raspberry se encuentra en realidad en el NAS y por tanto, toda la actividad de Dokuwiki se registrar\u00e1 donde m\u00e1s conviene. Ya puedo acceder a Dokuwiki en: http://192.168.1.204/dokuwiki","title":"2014-12-26 Dokuwiki en Raspberry Pi manteniendo los ficheros en NAS"},{"location":"2015-01-08-jekyll.html","text":"Este sitio est\u00e1 creado con la tecnolog\u00eda de GitHub Pages . Trat\u00e1ndose de GitHub, est\u00e1 basado en Ruby, en concreto en el gem Jekyll . Tras estudiarlo un poco me gust\u00f3 mucho por distintos motivos y me anim\u00e9 a poner en marcha el proyecto. Llevo a\u00f1os acumulando informaci\u00f3n en un Dokuwiki , que me sigue encantando, pero me gusta mucho m\u00e1s el formato Markdown que casi se puede considerar un est\u00e1ndar ya. Adem\u00e1s hace tiempo que ten\u00eda la intenci\u00f3n de hacer p\u00fablica la mayor\u00eda de la informaci\u00f3n que en Dokuwiki manten\u00eda. El haber encontrado Jekyll ha desencadenado el proceso de migraci\u00f3n/publicaci\u00f3n de estos apuntes. El sitio se genera simplemente creando un nuevo repositorio dentro de la cuenta GitHub teniendo el nombre un formato determinado, concretamente username.github.io , siendo username nuestro identificador de usuario en GitHub. As\u00ed de sencillo. A partir de entonces todo lo que el repositorio contenga ser\u00e1 servido con base a la URL http://username.github.io Al ser un repositorio git ( gu\u00eda sencilla para git ), los cambios en la p\u00e1gina se hacen mediante commits en el propio repositorio. GitHub Pages soporta adem\u00e1s el mencionado Jekyll , lo que nos permitir\u00e1 dar estructura al sitio, gestionando los men\u00fas, las p\u00e1ginas y los posts del blog. Los documentos escritos en Markdown (existe la opci\u00f3n de trabajar tambi\u00e9n en Textile y HTML) resultan con un estilo homog\u00e9neo y f\u00e1cil de mantener. Con Jekyll tenemos tres de las cosas que m\u00e1s me gustaban de Dokuwiki , como son que se incluye un sistema de remarcado de sintaxis en los listados de c\u00f3digo incrustados en los documentos (cosa que es habitual en la clase de documentaci\u00f3n que manejo), evitamos utilizar una base de datos y finalmente el c\u00f3digo de los documentos no resulta alterado por editores WYSIWYG. Como novedad frente a Dokuwiki , el sitio resultante es est\u00e1tico, es decir, todo se termina compilando en HTML puro, con lo que obtenemos velocidad y seguridad. Las instrucciones oficiales con detalle para montar el sitio en GitHub Pages con soporte Jekyll est\u00e1n aqu\u00ed . El proceso paso a paso en mi caso fue como sigue: Los requerimientos previos son tener instalado Ruby 1.9.3 como m\u00ednimo (yo utilic\u00e9 el que viene empaquetado en Ubuntu, es decir sudo apt-get install ruby ), RubyGems y Bundler (lo instalamos con RubyGems, es decir sudo gem install bundler ). Creamos el repositorio en GitHub. Como hemos dicho el nombre tendr\u00e1 que ser nuestro identificador de usuario m\u00e1s el sufijo .github.io . No s\u00f3lo eso, si estamos haciendo una p\u00e1gina de usuario (tambi\u00e9n existe la posibilidad de crear una p\u00e1gina de proyecto), tendremos que trabajar obligatoriamente con el branch master . A partir de ahora voy a indicar mi nombre de usuario, es decir eduardofilo en lugar de username para hacerlo m\u00e1s realista. Clonamos el repositorio en nuestra m\u00e1quina para trabajar en local y seleccionamos el branch mencionado (aunque en realidad no es necesario porque es el predeterminado): 1 2 3 $ cd ~/git $ git clone https://github.com/eduardofilo/eduardofilo.github.io.git $ git checkout master Instalamos Jekyll. Bueno, en realidad instalamos github-pages que lo lleva incluido como dependencia: 1 $ gem install github-pages Generamos la estructura del sitio con Jekyll. En este paso el directorio donde vamos a generar la estructura deber\u00e1 estar vac\u00edo o se producir\u00e1 un error. Si exist\u00edan ficheros (como el README.md que suele generar GitHub), tendremos que sacar temporalmente esos ficheros del directorio y devolverlos posteriormente: 1 2 $ cd ~/git/eduardofilo.github.io $ jekyll new . Creamos el fichero Gemfile que gestionar\u00e1 las dependencias del proyecto: 1 2 3 # ~/git/eduardofilo.github.io/Gemfile source 'https://rubygems.org' gem 'github-pages' Generamos un fichero .gitignore para que no ser carguen en GitHub un fichero y un par de directorios que se generan din\u00e1micamente a partir del resto: 1 2 3 4 # ~/git/eduardofilo.github.io/.gitignore _site .sass-cache Gemfile.lock Ejecutamos el siguiente comando para que encajen todas las dependencias: 1 2 $ cd ~/git/eduardofilo.github.io $ bundle install Levantamos el servidor web de desarrollo para ir observando los cambios en el sitio mientras generamos o modificamos los ficheros, por defecto estar\u00e1 accesible a trav\u00e9s de la URL: http://localhost:4000 1 2 $ cd ~/git/eduardofilo.github.io $ bundle exec jekyll serve Y ya est\u00e1. A partir de ahora tocar\u00e1 retocar el sitio para dejarlo a nuestro gusto. En mi caso he creado directorios para las distintas secciones de documentaci\u00f3n que manejo (Desarrollo, Sistemas, Proyectos y Varios). Dentro de estos directorios mantengo documentos en Markdown que luego enlazo desde el fichero que se sirve de forma predeterminada ( index.md aunque tambi\u00e9n puede ser el m\u00e1s clasico index.html ). La funci\u00f3n m\u00e1s habitual de Jekyll es la de gestionar una estructura de Blog. Tambi\u00e9n la he aprovechado, manteniendo los ficheros en el subdirectorio _posts . En este caso los ficheros tienen que tener una nomenclatura especial, ya que de su nombre sale la fecha del post y su URL. En ambos tipos de documentos, es importante el sistema de metainformaci\u00f3n llamado FrontMatter. Todos los documentos llevan una peque\u00f1a secci\u00f3n al comienzo delimitada por dos l\u00edneas de tres guiones en formato YML. Es recomendable leer la documentaci\u00f3n sobre su uso ya que tiene m\u00faltiples efectos sobre el funcionamiento de Jekyll. De hecho los documentos que no lleven esta cabecera YML no ser\u00e1n procesados por Jekyll (esto puede servir para dejar de lado algunos ficheros como por ejemplo el README.md en mi caso). Para no tener problemas, conviene ajustarse a las versiones de los componentes que utiliza GitHub, pero al menos en mi caso, sin haberlo hecho (ya de partida uso Ruby 1.9.3 en mi ordenador) no he observado diferencias entre el servidor en desarrollo y lo servido finalmente por GitHub. Si se tienen problemas o se quiere ser m\u00e1s riguroso, estas son las versiones que hay que tener en cuenta: https://pages.github.com/versions/ Como curiosidad decir que el directorio _site que hemos ignorado en git (al incluirlo en .gitignore ) es donde Jekyll genera todo el contenido est\u00e1tico que termina sirviendo (lo que de hecho sirve GitHub). Por \u00faltimo dejar aqu\u00ed la gu\u00eda de GitHub sobre la variante de Markdown concreta que ellos soportan. Directamente no es la que trae Jekyll de serie, aunque en mi sitio he ido haciendo ajustes para que se parezca lo m\u00e1s posible. Para ver y seguir c\u00f3mo se he hecho el proceso en este sitio, el c\u00f3digo de todo se encuentra en: https://github.com/eduardofilo/eduardofilo.jekyll","title":"2015-01-08 Jekyll+GitHub Pages"},{"location":"2015-01-09-moviles.html","text":"Es habitual que me hagan la pregunta de \u00bfqu\u00e9 movil comprar?. Responder es muy complicado. Por una parte por la gran oferta actual y por otra por ser un tema tan en boca de todos actualmente. El caso es que hace tiempo que, para responder m\u00e1s r\u00e1pidamente a la pregunta, mantengo una lista de m\u00f3viles que me parecen recomendables y que voy actualizando conforme encuentro alguna opci\u00f3n interesante en los blogs que sigo. He pensado hacer p\u00fablica la lista en forma de post que ir\u00e9 actualizando como hac\u00eda antes en privado. Intentar\u00e9 marcar las recomendaciones con fechas para que se autodescarten las opciones por antig\u00fcedad (de vez en cuando aprovechar\u00e9 estas mismas fechas para hacer limpieza, pero mientras llega esa limpieza la fecha puede servir como indicador de vigencia). La mayor\u00eda de los m\u00f3viles ser\u00e1n Android, en otro caso lo indicar\u00e9. Por \u00faltimo, la lista se detiene en poco m\u00e1s de los 400\u20ac porque considero que cuando alguien est\u00e1 dispuesto a gastar m\u00e1s en un m\u00f3vil normalmente ya sabe lo que quiere. Fecha Terminal Procesador RAM Almac. Pantalla Precio 2017-05-01 Motorola Moto E 4G Qualcomm 410 1,2GHz 1GB 8GB 4,5\u201d 540p 90\u20ac 2017-05-24 Vernee Thor E MediaTek MT6753 1,3GHz 3GB 16GB 5\u201d 720p 91\u20ac 2017-05-01 Umidigi C Note MediaTek MT6737T 1,5GHz 3GB 32GB 5,5\u201d 1080p 118\u20ac 2018-01-30 Xiaomi Redmi 5 Qualcomm 450 1,8GHz 3GB 32GB 5,7\u201d 720p 133\u20ac 2017-05-01 Huawei P8 Lite Kirin 620 1,2GHz 2GB 16GB 5\u201d 720p 153\u20ac 2017-05-01 Motorola Moto G4 Qualcomm 617 1,5GHz 2GB 16GB 5,5\u201d 1080p 166\u20ac 2017-11-17 Meizu M6 Note Qualcomm 625 2,0GHz 3GB 16GB 5,5\u201d 1080p 170\u20ac 2018-01-27 Xiaomi Mi A1 Qualcomm 625 2,0GHz 4GB 64GB 5,5\u201d 1080p 183\u20ac 2017-08-19 Motorola Moto G5 Qualcomm 430 1,4GHz 3GB 16GB 5\u201d 1080p 199\u20ac 2017-05-01 Huawei P9 Lite Kirin 650 2GHz 3GB 16GB 5,2\u201d 1080p 239\u20ac 2017-06-29 BQ Aquaris X Qualcomm 626 2,2GHz 3GB 32GB 5,2\u201d 1080p 279\u20ac 2017-05-01 OnePlus 3T Qualcomm 821 2,35GHz 6GB 64GB 5,5\u201d 1080p 439\u20ac Incluyo algunos enlaces de tiendas o art\u00edculos de donde han podido salir estas recomendaciones: Serie \u201ccazando gangas\u201d de Xatakandroid 2016-11-21 - Los mejores m\u00f3viles por menos de 100 euros (2016) 2016-11-28 - Los mejores m\u00f3viles por menos de 150 euros (2016) 2017-07-31 - Los mejores m\u00f3viles por menos de 200 euros (2017) 2017-06-27 - Los mejores m\u00f3viles por menos de 350 euros (2017) 2016-05-22 - Buscando el mejor m\u00f3vil barato: Alternativas al Moto G4 2016-05-26 - UMI Super, el m\u00f3vil ultrabarato con 4GB RAM ya se puede reservar 2017-06-02 - Nuestro Cazando Gangas no espera a las rebajas de verano: las mejores ofertas en m\u00f3viles Android 2017-06-27 - Este es el mejor m\u00f3vil de gama media que puedes comprar ahora mismo, y no es un Xiaomi 2017-08-13 - El m\u00f3vil Android barato con buena c\u00e1mara que recomendar\u00e9 a partir de ahora","title":"2015-01-09 M\u00f3viles recomendables"},{"location":"2015-02-06-odroid-kodi-tvheadend.html","text":"Activamos repositorio multiverse (desde Synaptic) para tener acceso a los firmwares no libres. Actualizamos la base de datos del repositorio e instalamos el paquete linux-firmware-nonfree : 1 2 $ sudo apt-get update $ sudo apt-get install linux-firmware-nonfree Con esto conseguimos instalar el firmware xc3028-v27.fw en /lib/firmware . Como alternativa dejamos descrito el siguiente procedimiento : 1 2 3 4 5 6 $ wget http://www.steventoth.net/linux/xc5000/HVR-12x0-14x0-17x0_1_25_25271_WHQL.zip $ unzip -j HVR-12x0-14x0-17x0_1_25_25271_WHQL.zip Driver85/hcw85bda.sys $ wget http://linuxtv.org/hg/v4l-dvb/raw-file/3919b17dc88e/linux/Documentation/video4linux/extract_xc3028.pl $ perl extract_xc3028.pl $ sudo cp xc3028-v27.fw /lib/firmware $ rm extract_xc3028.pl hcw85bda.sys HVR-12x0-14x0-17x0_1_25_25271_WHQL.zip xc3028-v27.fw Tambi\u00e9n se puede localizar aqu\u00ed el binario Parece que mi stick \"Pinnacle Systems, Inc. PCTV 330e\" necesita un par de ficheros de firmware m\u00e1s que no est\u00e1n incluidos en el paquete linux-firmware-nonfree . Se trata de los ficheros drxd-a2-1.1.fw y drxd-b1-1.1.fw que podemos obtener de aqu\u00ed . Copiamos pues esos dos ficheros a /lib/firmware . Instalamos Tvheadend: 1 2 3 4 $ curl http://apt.tvheadend.org/repo.gpg.key | sudo apt-key add - $ sudo echo \"deb http://apt.tvheadend.org/stable wheezy main\" >> /etc/apt/sources.list $ sudo apt-get update $ sudo apt-get install tvheadend Elegimos username: odroid Elegimos password: ... http://localhost:9981 Configuration / DVB Inputs / TV Adapters (seleccionamos Micronas DRXD DVB-T) / General / Adapter configuration / Enabled / Save Configuration / DVB Inputs / TV Adapters (seleccionamos Micronas DRXD DVB-T) / General / Tools / Add DVB Network by location... / Spain / es_Zaragoza No funciona el adaptador TDT hasta que actualizo el kernel que hab\u00eda quedado en estado kept back. Los paquetes en esa situaci\u00f3n se actualizan con sudo apt-get dist-upgrade .","title":"2015-02-06 KODI + Tvheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html","text":"(\u00daltima actualizaci\u00f3n: 2016-03-25 16:00) Actualizaci\u00f3n: A partir de la versi\u00f3n 3 de Raspberry Pi la placa incluye un adaptador Wifi, por lo que no ser\u00e1 necesario disponerlo. Si adem\u00e1s optamos por no instalar el decodificador TDT tambi\u00e9n podremos prescindir del concentrador USB. En este post se detallan las instrucciones para esta versi\u00f3n m\u00e1s simplificada del sistema, as\u00ed como se complementan con una configuraci\u00f3n m\u00e1s detallada del propio Kodi. Nota: Si est\u00e1s usando la versi\u00f3n 7 de OpenELEC que incluye la versi\u00f3n 16 de Kodi, utiliza este otro post . A continuaci\u00f3n se describe el montaje de un media center ejecut\u00e1ndose sobre Raspberry Pi 2 basado en la distribuci\u00f3n OpenELEC que implementa de forma muy ligera el software media center Kodi (anteriormente llamado XBMC). Se incorpora un decodificador TDT gestionado con el software Tvheadend . En la instalaci\u00f3n se incluye un adaptador Wifi que no ser\u00e1 necesario en caso de tener el router cerca y poder llevar un cable ethernet hasta la Raspberry Pi. De hecho es lo m\u00e1s recomendable ya que ser\u00e1 habitual consumir contenidos pesados por red. Si se puede prescindir del adaptador Wifi, seguramente tampoco ser\u00e1 necesario el concentrador USB que se coloc\u00f3 por precauci\u00f3n al ver como la Raspberry Pi se quejaba de deficiencias en la alimentaci\u00f3n (aparece en pantalla un cuadro de colores arriba a la derecha) al conectar directamente el adaptador Wifi y el TDT. Para el airmouse o teclado/rat\u00f3n inal\u00e1mbrico tambi\u00e9n hay alternativas: Aplicaciones para el m\u00f3vil: Kore o Yatse Mando a distancia del TV: Si nuestro TV soporta el protocolo CEC , puede comandar Kodi a trav\u00e9s del cable HDMI Elementos necesarios \u00b6 Empezamos con la lista de piezas que vamos a necesitar. Hardware \u00b6 Raspberry Pi 2: En Raspipc.es o en Cooking-Hacks.com Tarjeta microSD: En Raspipc.es o en Amazon.es Dongle Wifi Hub USB alimentado: En Raspipc.es o en Pccomponentes.com Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es Software \u00b6 OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT. Instalaci\u00f3n \u00b6 A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques. Instalaci\u00f3n OpenELEC \u00b6 Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-6.0.3.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta: 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync Conexi\u00f3n de piezas \u00b6 Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT y el adaptador Wifi al concentrador USB. Alimentamos el concentrador y enlazamos la entrada del concentrador con una de las entradas USB de la Raspberry. Finalmente alimentamos la Raspberry con un cable USB - microUSB desde el concentrador hacia la Raspberry. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. En la foto s\u00f3lo vemos el adaptador Wifi y el decodificador TDT, directamente conectados a la Raspberry. Esta configuraci\u00f3n se termin\u00f3 descartando porque la Raspberry ten\u00eda problemas de alimentaci\u00f3n, a\u00fan utilizando un alimentador de 2 Amperios. El elemento que m\u00e1s pico de corriente exige es el decodificador TDT. Los problemas se detectan por un cuadrado de colores que aparece en la esquina superior derecha de la pantalla. Normalmente el sistema no es capaz de arrancar en esta situaci\u00f3n (aparecen unos errores en la consola) y lo que es peor se termina corrompiendo el sistema de archivos de la microSD. Con el concentrador USB alimentado se evitan estos problemas. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas. Configuraci\u00f3n Kodi \u00b6 El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Una vez terminado el asistente acudimos a la siguiente ruta de los men\u00fas para activar el adaptador Wifi: 1 Sistema / OpenELEC / Red / Redes inal\u00e1mbricas / Activo Una vez activo conectamos a nuestro punto de acceso siguiendo esta secuencia de men\u00fas: 1 Sistema / OpenELEC / Conexiones / engancho mi AP Instalaci\u00f3n de TVheadend \u00b6 Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 5 6 Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / Add-ons / Mis add-ons / Clientes PVR / Tvheadend HTSP Client / Configurar / OK Sistema / Ajustes / Add-ons / Mis add-ons / Clientes PVR / Tvheadend HTSP Client / Activar Sistema / Ajustes / TV en directo / General / Activado Configuraci\u00f3n de Tvheadend \u00b6 Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 Configuration / General / Language settings / Available / Spanish; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create Configuration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save . Instalaci\u00f3n licencia MPEG-2 \u00b6 Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"2015-03-14 Raspberry Pi 2 + KODI + Tvheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#elementos-necesarios","text":"Empezamos con la lista de piezas que vamos a necesitar.","title":"Elementos necesarios"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#hardware","text":"Raspberry Pi 2: En Raspipc.es o en Cooking-Hacks.com Tarjeta microSD: En Raspipc.es o en Amazon.es Dongle Wifi Hub USB alimentado: En Raspipc.es o en Pccomponentes.com Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es","title":"Hardware"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#software","text":"OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT.","title":"Software"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion","text":"A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques.","title":"Instalaci\u00f3n"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-openelec","text":"Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-6.0.3.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta: 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync","title":"Instalaci\u00f3n OpenELEC"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#conexion-de-piezas","text":"Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT y el adaptador Wifi al concentrador USB. Alimentamos el concentrador y enlazamos la entrada del concentrador con una de las entradas USB de la Raspberry. Finalmente alimentamos la Raspberry con un cable USB - microUSB desde el concentrador hacia la Raspberry. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. En la foto s\u00f3lo vemos el adaptador Wifi y el decodificador TDT, directamente conectados a la Raspberry. Esta configuraci\u00f3n se termin\u00f3 descartando porque la Raspberry ten\u00eda problemas de alimentaci\u00f3n, a\u00fan utilizando un alimentador de 2 Amperios. El elemento que m\u00e1s pico de corriente exige es el decodificador TDT. Los problemas se detectan por un cuadrado de colores que aparece en la esquina superior derecha de la pantalla. Normalmente el sistema no es capaz de arrancar en esta situaci\u00f3n (aparecen unos errores en la consola) y lo que es peor se termina corrompiendo el sistema de archivos de la microSD. Con el concentrador USB alimentado se evitan estos problemas. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas.","title":"Conexi\u00f3n de piezas"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#configuracion-kodi","text":"El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Una vez terminado el asistente acudimos a la siguiente ruta de los men\u00fas para activar el adaptador Wifi: 1 Sistema / OpenELEC / Red / Redes inal\u00e1mbricas / Activo Una vez activo conectamos a nuestro punto de acceso siguiendo esta secuencia de men\u00fas: 1 Sistema / OpenELEC / Conexiones / engancho mi AP","title":"Configuraci\u00f3n Kodi"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-de-tvheadend","text":"Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 5 6 Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / Add-ons / Mis add-ons / Clientes PVR / Tvheadend HTSP Client / Configurar / OK Sistema / Ajustes / Add-ons / Mis add-ons / Clientes PVR / Tvheadend HTSP Client / Activar Sistema / Ajustes / TV en directo / General / Activado","title":"Instalaci\u00f3n de TVheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#configuracion-de-tvheadend","text":"Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 Configuration / General / Language settings / Available / Spanish; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create Configuration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save .","title":"Configuraci\u00f3n de Tvheadend"},{"location":"2015-03-14-raspi2-kodi-tvheadend.html#instalacion-licencia-mpeg-2","text":"Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"Instalaci\u00f3n licencia MPEG-2"},{"location":"2016-02-25-los-innovadores.html","text":"Quer\u00eda recomendar el \u00faltimo libro que he le\u00eddo. Los innovadores de Walter Isaacson, el mismo autor que escribi\u00f3 magistralmente las biograf\u00edas de Albert Einstein y Steve Jobs (que tambi\u00e9n recomiendo). Relata la historia de la cascada de descubrimientos e innovaciones que se produjeron desde mediados del siglo XIX y que nos trajeron la era digital (los ordenadores y dispositivos personales e Internet). Me he dado cuenta de que conoc\u00eda aproximadamente un 10% de la historia y que se me escapaba el reconocimiento a personajes esenciales como John Bardeen y Walter Brattain (inventores del transistor), Robert Noyce y Gordon Moore en Intel y en paralelo Jack Kilby y Patrick Haggerty en Texas Instruments (microchips y microprocesadores), Douglas Engelbart y J.C.R. Licklider (como te\u00f3ricos de la interacci\u00f3n hombre-m\u00e1quina; el primero realiz\u00f3 en 1968 \"La madre de todas las demos\" en que ya mostraba un interfaz gr\u00e1fico de usuario con rat\u00f3n y todo) y sobre todo los m\u00e1s pioneros de todos, Charles Babbage y Ada Byron, que especularon con casi todo lo que vino despu\u00e9s 100 a\u00f1os antes que todos los dem\u00e1s. Otra cosa que muestra el libro insistentemente es algo en lo que creo desde hace tiempo, y es que gran parte de las innovaciones surgieron de la tensi\u00f3n creativa que se produce al combinar habilidades humanas contrapuestas. Introvertidos y extrovertidos, pr\u00e1cticos y te\u00f3ricos, personas pragm\u00e1ticas capaces de encontrar salida comercial a los descubrimientos y otras que no se conformaban hasta dominar a fondo la teor\u00eda subyacente. Todas las parejas de nombres mencionadas anteriormente ilustran este fen\u00f3meno, as\u00ed como otras m\u00e1s conocidas que aparecieron posteriormente como Steve Wozniak y Steve Jobs o Larry Page y Sergu\u00e9i Brin. Os dejo con un documento impresionante. La madre de todas las demos:","title":"2016-02-25 Los Innovadores - Walter Isaacson"},{"location":"2016-04-10-un-antropologo-en-marte.html","text":"Leer este libro del recientemente fallecido neur\u00f3logo Oliver Sacks hace pensar sobre el concepto de \"realidad\". El libro relata varios casos a los que hizo seguimiento a lo largo de su carrera. Casos como el del pintor que perdi\u00f3 la percepci\u00f3n del color a ra\u00edz de un accidente y que se vio forzado a sustituir su realidad anterior por otra distinta a la que no hubiera renunciado de haber podido tras haberse adaptado, pues le permit\u00eda percibir cosas en el mundo que antes no pod\u00eda. U otro caso que se podr\u00eda considerar opuesto, como fue el de una persona ciega desde la infancia a la que una operaci\u00f3n le devolvi\u00f3 la vista en la cuarentena y que poco a poco termin\u00f3 renunciando al nuevo don ya que sus estructuras neuronales hab\u00edan construido una realidad v\u00e1lida partiendo de lo que ten\u00eda, haciendo que la visi\u00f3n la modificara hasta un grado insoportable. Describe tambi\u00e9n varios casos del desconcertante s\u00edndrome de Tourette . En mis tiempos de instituto conviv\u00ed con un muchacho que seguramente correspond\u00eda con este s\u00edndrome. Como suele ser habitual en estos casos, y m\u00e1s en un ambiente adolescente, era objeto de numerosas burlas. Personalmente nunca llegu\u00e9 a burlarme de \u00e9l, pero s\u00ed me desconcertaba. Ahora creo que ese muchacho era un valiente cuando menos. El libro en general dibuja la casi imposibilidad de comprensi\u00f3n hacia los casos que m\u00e1s se alejan de la normalidad. En igual grado a ambos lados del espacio que separa las distintas realidades que viven unos (sus pacientes) y otro (Sacks). Pero a la vez es un ejercicio de tolerancia y escepticismo hacia lo diferente, siendo muy consiciente del poder que encierran estas personas al vivir otra realidad, en algunos aspectos aumentada y en otros reducida, no mejor ni peor sino m\u00e1s o menos v\u00e1lida para la suerte que les toque vivir. De la misma forma que un perro no elige vivir en un mundo \"tan\" olfativo pero construye su mundo en \u00e9l y nos puede ayudar en ocasiones, personas con sistemas nerviosos diferentes como los autistas, pueden ayudarnos tambi\u00e9n, como Temple Grandin ilustra muy bien.","title":"2016-04-10 Un antrop\u00f3logo en Marte - Oliver Sacks"},{"location":"2016-07-02-virus-android.html","text":"En este v\u00eddeo veremos un par de t\u00e9cnicas para combatir los mensajes que aparecen en algunos tel\u00e9fonos Android alert\u00e1ndonos de supuestos virus en el sistema. Dado el dise\u00f1o de Android y la forma en que los distintos fabricantes lo distribuyen y modifican, es muy poco rentable t\u00e9cnicamente escribir virus para este sistema, por tanto lo que hay detr\u00e1s de estos mensajes suele ser otro tipo de problemas. Son simples enga\u00f1os emitidos por aplicaciones que nosotros mismos hemos instalado. El objetivo ser\u00e1 pues localizar dichas aplicaciones y desinstalarlas. En el v\u00eddeo se muestra la forma de localizar qu\u00e9 aplicaci\u00f3n ha emitido una notificaci\u00f3n. Como consejo general se recomienda minimizar o mejor a\u00fan evitar completamente la instalaci\u00f3n de aplicaciones de dudosa procedencia, a\u00fan estando en el propio Google Play. Otra situaci\u00f3n (como la del caso que se ilustra al principio del v\u00eddeo) es que la alerta aparezca mediante una p\u00e1gina web en el navegador. Con el dise\u00f1o minimalista de los navegadores web Android (el que se ve en el v\u00eddeo es Chrome), a veces cuesta reconocer que estamos ante una simple p\u00e1gina web y no delante de una pantalla del sistema. Esto es lo que parece pretender el dise\u00f1o del mensaje que se muestra en el v\u00eddeo al incluir dise\u00f1os y logotipos propios de Google. En este caso lo que tendremos que hacer es borrar los datos del navegador, ya que la p\u00e1gina de la alerta puede haberse \"instalado\" (modificando la p\u00e1gina de inicio por ejemplo) al haber navegado por algunos sitios (normalmente poco recomendables, otra cosa que conviene minimizar o evitar; en caso de hacerlo se recomienda usar el modo inc\u00f3gnito que incorporan ahora la mayor\u00eda de los navegadores). Enlaces: El Androide Libre - C\u00f3mo eliminar ese \"virus\" que ha aparecido en tu m\u00f3vil","title":"2016-07-02 Alertas por supuestos virus en Android"},{"location":"2016-07-10-wild.html","text":"Instructivo relato sobre el recorrido que realiz\u00f3 su autora en 1995 de parte del Pacific Crest Trail , una especie de Transpiren\u00e1ica pero de una escala superior (como suele ocurrir cuando hablamos del continente americano) que recorre las crestas de la cadena de cordilleras que existen en el oeste del continente norteamericano en disposici\u00f3n vertical a unos pocos centenares de km de la costa. El PCT tiene m\u00e1s de 4000 km, aunque Cheryl \"s\u00f3lo\" recorri\u00f3 alrededor de 1700 en unos 100 d\u00edas, partiendo desde el desierto de Mojave en California y terminando en El puente de los dioses en la frontera entre los estados de Oreg\u00f3n y Whashington. Durante su periplo, hace balance de su vida y trata de reencontrarse. En ese momento ten\u00eda 26 a\u00f1os y tras una infancia complicada y haber perdido a su madre recientemente, se encuentra metida en una espiral de autodestrucci\u00f3n. Cheryl consigue transmitir con muy buena prosa, tanto su estado mental como los peligros y problemas que tiene que enfrentar en su viaje, la mayor parte de las veces con una soledad autoimpuesta. De manera parecida a la historia de Christopher McCandless (de la que tambi\u00e9n hay pel\u00edcula y libro , aunque en esta ocasi\u00f3n escrito obligatoriamente por un tercero), la aventura de Cheryl es una temeridad analizada posteriormente. Se lanz\u00f3 a la aventura sin experiencia ni preparaci\u00f3n suficientes, como ella misma reconoce, arrastrando una mochila que pesaba aproximadamente la mitad que ella. A pesar de ello no puedo dejar de sentir admiraci\u00f3n por la fuerza de esta mujer. Os dejo con el trailer de la pel\u00edcula que se hizo en 2014 basada en el libro que no le hace justicia, aunque sirve para acceder a algunos de los espectaculares paisajes que Cheryl atraves\u00f3.","title":"2016-07-10 Wild - Cheryl Strayed"},{"location":"2016-07-21-PIGRRL-2.html","text":"Hace unos meses mont\u00e9 un PiGRRL-2 . La imagen de tarjeta microSD que Adafruit ofrece para el sistema, viene preconfigurada con todo lo necesario, pero hab\u00eda cosas que no funcionaban a mi gusto (como los emuladores de ZX Spectrum) y quer\u00eda conocer m\u00e1s de cerca todas las posibilidades de RetroPie . Lo que sigue son los pasos que he seguido para montar una microSD con RetroPie para la PiGRRL-2 desde cero. Instalaci\u00f3n de Raspbian \u00b6 Comenzamos haciendo una instalaci\u00f3n limpia del sistema base. He elegido Raspbian Lite puesto que no necesitamos entorno de escritorio ni las aplicaciones que lleva la instalaci\u00f3n normal. Bajamos Rasbian Lite: https://www.raspberrypi.org/downloads/raspbian/ Instalamos: 1 2 unzip -p 2016-05-27-raspbian-jessie-lite.zip | sudo dd of=/dev/mmcblk0 bs=2M sudo sync Pinchamos la tarjeta en la Raspberry Pi y conectamos un cable de red para poder acceder por SSH (user: pi; pwd: raspberry). Actualizamos la distribuci\u00f3n: 1 2 sudo apt-get update sudo apt-get upgrade Hacemos algunos ajustes generales: 1 sudo raspi-config Extendemos la partici\u00f3n a toda la SD (opci\u00f3n: 1 Expand Filesystem ). Ajustar el Timezone (opci\u00f3n 5 Internationalisation Options > I2 Change Timezone ). Realmente no es necesario, pero me gusta ver fechas coherentes cuando manipulo el sistema. Ajustar los locales (opci\u00f3n 5 Internationalisation Options > I1 Change Locale ). Yo por ejemplo elijo en_GB.UTF-8 . Es importante que todas las variables que aparecen al ejecutar el comando locale tengan valor correcto e igual en todas ellas. Tras hacer los ajustes es necesario reiniciar, ya que se gestionan mediante variables de entorno de sesi\u00f3n. Tras hacerlo volver a comprobar con el comando locale . Si alguna de las variables sigue con un valor incorrecto (suele ocurrir en LANG, LANGUAGE y LC_ALL), usar el siguiente comando e ir comprobando con sucesivos reinicios hasta que todas las variables tengan el mismo locale: 1 sudo update-locale LC_ALL = \"en_GB.UTF-8\" Desactivamos el Overscan (opci\u00f3n 9 Advanced Options > A1 Overscan , respondiendo \"No\"). Forzamos el audio a trav\u00e9s del jack 3,5mm (opci\u00f3n 9 Advanced Options > A8 Audio , respondiendo \"1 Force 3.5mm\"). Instalaci\u00f3n de RetroPie-Setup \u00b6 Instalamos unos paquetes necesarios: 1 sudo apt-get install git dialog xmlstarlet Bajamos el c\u00f3digo de RetroPie-Setup: 1 2 cd ~ git clone --depth=1 https://github.com/RetroPie/RetroPie-Setup.git Ejecutamos RetroPie-Setup: 1 2 cd RetroPie-Setup sudo ./retropie_setup.sh Cerramos el cuadro de advertencia que aparece y acudimos a la siguiente ruta: Manage Packages > Quick Install Respondemos \"Yes\". A continuaci\u00f3n se desencadenar\u00e1 una secuencia de descargas, compilaciones y configuraciones autom\u00e1ticas de todas las herramientas que integran RetroPie. En mi caso el proceso en una Raspberry Pi 2 tard\u00f3 unos 13 minutos. Al terminar volvemos a la misma ventana. Pulsamos los botones \"Back\" y \"Exit\". Instalaci\u00f3n de PiTFT \u00b6 Instalaci\u00f3n de fbcp \u00b6 La PiTFT de Adafruit funciona haciendo framebuffer de la memoria de v\u00eddeo de la Raspberry Pi hacia la peque\u00f1a pantalla por SPI (explicado aqu\u00ed ). Para que esto funcione hay que instalar un peque\u00f1o programa. Bajamos, compilamos e instalamos: 1 2 3 4 5 6 7 8 9 cd ~ sudo apt-get install cmake git clone https://github.com/tasanakorn/rpi-fbcp cd rpi-fbcp/ mkdir build cd build/ cmake .. make sudo install fbcp /usr/local/bin/fbcp Configuramos el sistema para que autoarranque el programa que acabamos de instalar. Para ello editar /etc/rc.local y a\u00f1adir lo siguiente justo antes de la \u00faltima l\u00ednea ( exit 0 ): 1 /usr/local/bin/fbcp & Reconfiguramos la consola para que se vea bien en la peque\u00f1a PiTFT (Elegimos las opciones UTF-8 , Guess optimal character set , Terminus y 6x12 (framebuffer only). ): 1 sudo dpkg-reconfigure console-setup Configuraci\u00f3n de PiTFT \u00b6 Adem\u00e1s de instalar fbcp habr\u00e1 que hacer una serie de ajustes en el sistema para que se adapte a la resoluci\u00f3n tan especial y modo de trabajo de esta pantalla. Instalamos un repositorio de Adafruit y un par de paquetes: 1 2 3 cd ~ curl -SLs https://apt.adafruit.com/add-pin | sudo bash sudo apt-get install raspberrypi-bootloader adafruit-pitft-helper Ejecutamos el aistente para configurar PiTFT: 1 sudo adafruit-pitft-helper -t 28r Responder n a la primera pregunta y y a la segunda. Con esto \u00faltimo asociaremos la tecla vinculada al GPIO23 (la segunda empezando por arriba de las cuatro que tiene la pantalla a la izquierda) a un apagado/encendido de la consola que nos servir\u00e1 para reiniciarla limpiamente si en alg\u00fan momento perdemos el control en alguno de los emuladores. Editar el fichero /boot/config.txt y cambiar los valores de la l\u00ednea que empieza con dtoverlay para dejarla como sigue: 1 dtoverlay=pitft28-resistive,rotate=270,speed=80000000,fps=60 En el mismo fichero /boot/config.txt a\u00f1adir las siguientes l\u00edneas (si ya existen comentarlas): 1 2 3 4 hdmi_force_hotplug=1 hdmi_group=2 hdmi_mode=87 hdmi_cvt=320 240 60 1 0 0 0 Configurar EmuleStation \u00b6 Vamos a hacer que EmuleStation arranque autom\u00e1ticamente con el sistema. A\u00f1adir lo siguiente al final del fichero /etc/profile : 1 [ -n \" ${ SSH_CONNECTION } \" ] || emulationstation Configurar con raspi-config el autologin en consola. Para ello seguir la ruta 3 Boot Options > B1 Desktop / CLI > B2 Console Autologin . Instalaci\u00f3n de Retrogame \u00b6 El pad que incorpora PiGRRL-2 enlaza cada bot\u00f3n con un GPIO determinado. Para que las se\u00f1ales en estos GPIO's se conviertan en pulsaciones de teclas normales hay que instalar y configurar un software que nos proporciona Adafruit, mediante los siguientes pasos: Bajamos el c\u00f3digo: 1 2 3 cd ~ git clone https://github.com/adafruit/Adafruit-Retrogame.git cd Adafruit-Retrogame Editamos el fichero ~/Adafruit-Retrogame/retrogame.c y sustituimos la estructura ioStandard que hay a partir de la l\u00ednea 111 por lo que sigue. Esto har\u00e1 corresponder algunas de las teclas importantes para manejar los emuladores y el propio EmuleStation con el mapeo de pulsadores del gamepad de PiGRRL 2: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ioStandard[] = { // This pin/key table is used when the PiTFT isn't found // (using HDMI or composite instead), as with our original // retro gaming guide. // Input Output (from /usr/include/linux/input.h) { 17, KEY_RIGHTSHIFT }, // PiTFT 17 { 22, KEY_RIGHTCTRL }, // PiTFT 22 { 27, KEY_ESC }, // PiTFT 27 { 4, KEY_LEFT }, // Left { 16, KEY_UP }, // Up { 19, KEY_RIGHT }, // Right { 26, KEY_DOWN }, // Down { 5, KEY_SPACE }, // Select { 6, KEY_ENTER }, // Start { 14, KEY_LEFTCTRL }, // A Button { 15, KEY_LEFTALT }, // B Button { 20, KEY_Z }, // X Button { 18, KEY_X }, // Y Button { 12, KEY_A }, // L Shoulder { 13, KEY_S }, // R Shoulder // For credit/start/etc., use USB keyboard or add more buttons. { -1, -1 } }; // END OF LIST, DO NOT CHANGE Dentro del mismo fichero ~/Adafruit-Retrogame/retrogame.c acudir a la l\u00ednea 300 (tras el cambio anterior) y sustituir: 1 2 3 // Select io[] table for Cupcade (TFT) or 'normal' project. io = (access(\"/etc/modprobe.d/adafruit.conf\", F_OK) || access(\"/dev/fb1\", F_OK)) ? ioStandard : ioTFT; por: 1 io = ioStandard; Compilamos e instalamos: 1 2 make retrogame sudo mv retrogame /usr/local/bin Crear el fichero /etc/udev/rules.d/10-retrogame.rules con el siguiente contenido: 1 SUBSYSTEM==\"input\", ATTRS{name}==\"retrogame\", ENV{ID_INPUT_KEYBOARD}=\"1\" A\u00f1adir lo siguiente al final de /etc/rc.local : 1 /usr/local/bin/retrogame & A\u00f1adir los siguientes m\u00f3dulos al fichero /etc/modules : 1 2 3 uinput joydev snd-bcm2835 Sustituir el contenido del fichero /opt/retropie/configs/all/emulationstation/es_input.cfg por: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 <?xml version=\"1.0\"?> <inputList> <inputAction type= \"onfinish\" > <command> /opt/retropie/supplementary/emulationstation/scripts/inputconfiguration.sh </command> </inputAction> <inputConfig type= \"keyboard\" deviceName= \"Keyboard\" deviceGUID= \"-1\" > <input name= \"a\" type= \"key\" id= \"1073742048\" value= \"1\" /> <input name= \"b\" type= \"key\" id= \"1073742050\" value= \"1\" /> <input name= \"down\" type= \"key\" id= \"1073741905\" value= \"1\" /> <input name= \"left\" type= \"key\" id= \"1073741904\" value= \"1\" /> <input name= \"pagedown\" type= \"key\" id= \"120\" value= \"1\" /> <input name= \"pageup\" type= \"key\" id= \"122\" value= \"1\" /> <input name= \"right\" type= \"key\" id= \"1073741903\" value= \"1\" /> <input name= \"select\" type= \"key\" id= \"32\" value= \"1\" /> <input name= \"start\" type= \"key\" id= \"13\" value= \"1\" /> <input name= \"up\" type= \"key\" id= \"1073741906\" value= \"1\" /> </inputConfig> </inputList> FIN \u00b6 S\u00f3lo queda copiar algunas roms a los directorios correspondientes a cada emulador dentro de la ruta /home/pi/RetroPie/roms . Hasta que no lo hagamos no aparecer\u00e1 la entrada correspondiente al emulador en EmuleStation. Si a\u00f1adimos las roms mientras \u00e9ste est\u00e1 en marcha (conect\u00e1ndonos por sFTP por ejemplo) habr\u00e1 que reiniciarlo para que las encuentre. Enlaces: \u00b6 Running OpenGL-based Games & Emulators on Adafruit PiTFT Displays Adafruit PiTFT - 2.8\" Touchscreen Display for Raspberry Pi Adafruit-PiTFT-Helper : A script for configuring Adafruit's PiTFT displays on a Raspberry Pi. Tactile switch as power button Adafruit-Retrogame : Librer\u00eda para mapear GPIO's a teclas. Retro Gaming with Raspberry Pi Retroarch Controls","title":"2016-07-21 Configuraci\u00f3n PiGRRL-2"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-raspbian","text":"Comenzamos haciendo una instalaci\u00f3n limpia del sistema base. He elegido Raspbian Lite puesto que no necesitamos entorno de escritorio ni las aplicaciones que lleva la instalaci\u00f3n normal. Bajamos Rasbian Lite: https://www.raspberrypi.org/downloads/raspbian/ Instalamos: 1 2 unzip -p 2016-05-27-raspbian-jessie-lite.zip | sudo dd of=/dev/mmcblk0 bs=2M sudo sync Pinchamos la tarjeta en la Raspberry Pi y conectamos un cable de red para poder acceder por SSH (user: pi; pwd: raspberry). Actualizamos la distribuci\u00f3n: 1 2 sudo apt-get update sudo apt-get upgrade Hacemos algunos ajustes generales: 1 sudo raspi-config Extendemos la partici\u00f3n a toda la SD (opci\u00f3n: 1 Expand Filesystem ). Ajustar el Timezone (opci\u00f3n 5 Internationalisation Options > I2 Change Timezone ). Realmente no es necesario, pero me gusta ver fechas coherentes cuando manipulo el sistema. Ajustar los locales (opci\u00f3n 5 Internationalisation Options > I1 Change Locale ). Yo por ejemplo elijo en_GB.UTF-8 . Es importante que todas las variables que aparecen al ejecutar el comando locale tengan valor correcto e igual en todas ellas. Tras hacer los ajustes es necesario reiniciar, ya que se gestionan mediante variables de entorno de sesi\u00f3n. Tras hacerlo volver a comprobar con el comando locale . Si alguna de las variables sigue con un valor incorrecto (suele ocurrir en LANG, LANGUAGE y LC_ALL), usar el siguiente comando e ir comprobando con sucesivos reinicios hasta que todas las variables tengan el mismo locale: 1 sudo update-locale LC_ALL = \"en_GB.UTF-8\" Desactivamos el Overscan (opci\u00f3n 9 Advanced Options > A1 Overscan , respondiendo \"No\"). Forzamos el audio a trav\u00e9s del jack 3,5mm (opci\u00f3n 9 Advanced Options > A8 Audio , respondiendo \"1 Force 3.5mm\").","title":"Instalaci\u00f3n de Raspbian"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-retropie-setup","text":"Instalamos unos paquetes necesarios: 1 sudo apt-get install git dialog xmlstarlet Bajamos el c\u00f3digo de RetroPie-Setup: 1 2 cd ~ git clone --depth=1 https://github.com/RetroPie/RetroPie-Setup.git Ejecutamos RetroPie-Setup: 1 2 cd RetroPie-Setup sudo ./retropie_setup.sh Cerramos el cuadro de advertencia que aparece y acudimos a la siguiente ruta: Manage Packages > Quick Install Respondemos \"Yes\". A continuaci\u00f3n se desencadenar\u00e1 una secuencia de descargas, compilaciones y configuraciones autom\u00e1ticas de todas las herramientas que integran RetroPie. En mi caso el proceso en una Raspberry Pi 2 tard\u00f3 unos 13 minutos. Al terminar volvemos a la misma ventana. Pulsamos los botones \"Back\" y \"Exit\".","title":"Instalaci\u00f3n de RetroPie-Setup"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-pitft","text":"","title":"Instalaci\u00f3n de PiTFT"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-fbcp","text":"La PiTFT de Adafruit funciona haciendo framebuffer de la memoria de v\u00eddeo de la Raspberry Pi hacia la peque\u00f1a pantalla por SPI (explicado aqu\u00ed ). Para que esto funcione hay que instalar un peque\u00f1o programa. Bajamos, compilamos e instalamos: 1 2 3 4 5 6 7 8 9 cd ~ sudo apt-get install cmake git clone https://github.com/tasanakorn/rpi-fbcp cd rpi-fbcp/ mkdir build cd build/ cmake .. make sudo install fbcp /usr/local/bin/fbcp Configuramos el sistema para que autoarranque el programa que acabamos de instalar. Para ello editar /etc/rc.local y a\u00f1adir lo siguiente justo antes de la \u00faltima l\u00ednea ( exit 0 ): 1 /usr/local/bin/fbcp & Reconfiguramos la consola para que se vea bien en la peque\u00f1a PiTFT (Elegimos las opciones UTF-8 , Guess optimal character set , Terminus y 6x12 (framebuffer only). ): 1 sudo dpkg-reconfigure console-setup","title":"Instalaci\u00f3n de fbcp"},{"location":"2016-07-21-PIGRRL-2.html#configuracion-de-pitft","text":"Adem\u00e1s de instalar fbcp habr\u00e1 que hacer una serie de ajustes en el sistema para que se adapte a la resoluci\u00f3n tan especial y modo de trabajo de esta pantalla. Instalamos un repositorio de Adafruit y un par de paquetes: 1 2 3 cd ~ curl -SLs https://apt.adafruit.com/add-pin | sudo bash sudo apt-get install raspberrypi-bootloader adafruit-pitft-helper Ejecutamos el aistente para configurar PiTFT: 1 sudo adafruit-pitft-helper -t 28r Responder n a la primera pregunta y y a la segunda. Con esto \u00faltimo asociaremos la tecla vinculada al GPIO23 (la segunda empezando por arriba de las cuatro que tiene la pantalla a la izquierda) a un apagado/encendido de la consola que nos servir\u00e1 para reiniciarla limpiamente si en alg\u00fan momento perdemos el control en alguno de los emuladores. Editar el fichero /boot/config.txt y cambiar los valores de la l\u00ednea que empieza con dtoverlay para dejarla como sigue: 1 dtoverlay=pitft28-resistive,rotate=270,speed=80000000,fps=60 En el mismo fichero /boot/config.txt a\u00f1adir las siguientes l\u00edneas (si ya existen comentarlas): 1 2 3 4 hdmi_force_hotplug=1 hdmi_group=2 hdmi_mode=87 hdmi_cvt=320 240 60 1 0 0 0","title":"Configuraci\u00f3n de PiTFT"},{"location":"2016-07-21-PIGRRL-2.html#configurar-emulestation","text":"Vamos a hacer que EmuleStation arranque autom\u00e1ticamente con el sistema. A\u00f1adir lo siguiente al final del fichero /etc/profile : 1 [ -n \" ${ SSH_CONNECTION } \" ] || emulationstation Configurar con raspi-config el autologin en consola. Para ello seguir la ruta 3 Boot Options > B1 Desktop / CLI > B2 Console Autologin .","title":"Configurar EmuleStation"},{"location":"2016-07-21-PIGRRL-2.html#instalacion-de-retrogame","text":"El pad que incorpora PiGRRL-2 enlaza cada bot\u00f3n con un GPIO determinado. Para que las se\u00f1ales en estos GPIO's se conviertan en pulsaciones de teclas normales hay que instalar y configurar un software que nos proporciona Adafruit, mediante los siguientes pasos: Bajamos el c\u00f3digo: 1 2 3 cd ~ git clone https://github.com/adafruit/Adafruit-Retrogame.git cd Adafruit-Retrogame Editamos el fichero ~/Adafruit-Retrogame/retrogame.c y sustituimos la estructura ioStandard que hay a partir de la l\u00ednea 111 por lo que sigue. Esto har\u00e1 corresponder algunas de las teclas importantes para manejar los emuladores y el propio EmuleStation con el mapeo de pulsadores del gamepad de PiGRRL 2: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ioStandard[] = { // This pin/key table is used when the PiTFT isn't found // (using HDMI or composite instead), as with our original // retro gaming guide. // Input Output (from /usr/include/linux/input.h) { 17, KEY_RIGHTSHIFT }, // PiTFT 17 { 22, KEY_RIGHTCTRL }, // PiTFT 22 { 27, KEY_ESC }, // PiTFT 27 { 4, KEY_LEFT }, // Left { 16, KEY_UP }, // Up { 19, KEY_RIGHT }, // Right { 26, KEY_DOWN }, // Down { 5, KEY_SPACE }, // Select { 6, KEY_ENTER }, // Start { 14, KEY_LEFTCTRL }, // A Button { 15, KEY_LEFTALT }, // B Button { 20, KEY_Z }, // X Button { 18, KEY_X }, // Y Button { 12, KEY_A }, // L Shoulder { 13, KEY_S }, // R Shoulder // For credit/start/etc., use USB keyboard or add more buttons. { -1, -1 } }; // END OF LIST, DO NOT CHANGE Dentro del mismo fichero ~/Adafruit-Retrogame/retrogame.c acudir a la l\u00ednea 300 (tras el cambio anterior) y sustituir: 1 2 3 // Select io[] table for Cupcade (TFT) or 'normal' project. io = (access(\"/etc/modprobe.d/adafruit.conf\", F_OK) || access(\"/dev/fb1\", F_OK)) ? ioStandard : ioTFT; por: 1 io = ioStandard; Compilamos e instalamos: 1 2 make retrogame sudo mv retrogame /usr/local/bin Crear el fichero /etc/udev/rules.d/10-retrogame.rules con el siguiente contenido: 1 SUBSYSTEM==\"input\", ATTRS{name}==\"retrogame\", ENV{ID_INPUT_KEYBOARD}=\"1\" A\u00f1adir lo siguiente al final de /etc/rc.local : 1 /usr/local/bin/retrogame & A\u00f1adir los siguientes m\u00f3dulos al fichero /etc/modules : 1 2 3 uinput joydev snd-bcm2835 Sustituir el contenido del fichero /opt/retropie/configs/all/emulationstation/es_input.cfg por: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 <?xml version=\"1.0\"?> <inputList> <inputAction type= \"onfinish\" > <command> /opt/retropie/supplementary/emulationstation/scripts/inputconfiguration.sh </command> </inputAction> <inputConfig type= \"keyboard\" deviceName= \"Keyboard\" deviceGUID= \"-1\" > <input name= \"a\" type= \"key\" id= \"1073742048\" value= \"1\" /> <input name= \"b\" type= \"key\" id= \"1073742050\" value= \"1\" /> <input name= \"down\" type= \"key\" id= \"1073741905\" value= \"1\" /> <input name= \"left\" type= \"key\" id= \"1073741904\" value= \"1\" /> <input name= \"pagedown\" type= \"key\" id= \"120\" value= \"1\" /> <input name= \"pageup\" type= \"key\" id= \"122\" value= \"1\" /> <input name= \"right\" type= \"key\" id= \"1073741903\" value= \"1\" /> <input name= \"select\" type= \"key\" id= \"32\" value= \"1\" /> <input name= \"start\" type= \"key\" id= \"13\" value= \"1\" /> <input name= \"up\" type= \"key\" id= \"1073741906\" value= \"1\" /> </inputConfig> </inputList>","title":"Instalaci\u00f3n de Retrogame"},{"location":"2016-07-21-PIGRRL-2.html#fin","text":"S\u00f3lo queda copiar algunas roms a los directorios correspondientes a cada emulador dentro de la ruta /home/pi/RetroPie/roms . Hasta que no lo hagamos no aparecer\u00e1 la entrada correspondiente al emulador en EmuleStation. Si a\u00f1adimos las roms mientras \u00e9ste est\u00e1 en marcha (conect\u00e1ndonos por sFTP por ejemplo) habr\u00e1 que reiniciarlo para que las encuentre.","title":"FIN"},{"location":"2016-07-21-PIGRRL-2.html#enlaces","text":"Running OpenGL-based Games & Emulators on Adafruit PiTFT Displays Adafruit PiTFT - 2.8\" Touchscreen Display for Raspberry Pi Adafruit-PiTFT-Helper : A script for configuring Adafruit's PiTFT displays on a Raspberry Pi. Tactile switch as power button Adafruit-Retrogame : Librer\u00eda para mapear GPIO's a teclas. Retro Gaming with Raspberry Pi Retroarch Controls","title":"Enlaces:"},{"location":"2016-08-02-stm32-vl-discovery.html","text":"ST propone varios entornos de desarrollo para trabajar sobre su placa STM32 VL Discovery , pero en todos los casos sobre Windows. Vamos a ver aqu\u00ed c\u00f3mo montar el toolkit de desarrollo sobre Ubuntu 16.04. Instalaci\u00f3n de \u00faltima versi\u00f3n de GCC ARM Embedded siguiendo estas instrucciones . B\u00e1sicamente consiste en bajar este archivo y descomprimirlo en /usr/local del siguiente modo: 1 2 $ cd /usr/local $ sudo tar xjvf ~/Descargas/gcc-arm-none-eabi-5_4-2016q2-20160622-linux.tar.bz2 Introducir en la variable PATH del sistema la ruta del directorio bin del compilador GCC ARM reci\u00e9n instalado incorporando al final del fichero ~/.profile: 1 PATH=\"/usr/local/gcc-arm-none-eabi-5_4-2016q2/bin:$PATH\" Descargamos la STM32 Firmware Library de aqu\u00ed . Descomprimimos y dejamos en la ruta ~/STM32F10x_StdPeriph_Lib_V3.5.0 . Descargamos plantilla para los proyectos de c\u00f3digo por ejemplo en ~/git/ : 1 2 $ cd ~/git $ git clone git://github.com/geoffreymbrown/STM32-Template.git La compilaci\u00f3n del c\u00f3digo se har\u00eda as\u00ed: 1 2 $ cd ~/git/STM32-Template/Demo $ make Modificamos el fichero ~/git/STM32-Template/Makefile.common ajustando las variables TOOLROOT y LIBROOT de la siguiente forma: 1 2 TOOLROOT=/usr/local/gcc-arm-none-eabi-5_4-2016q2/bin LIBROOT=~/STM32F10x_StdPeriph_Lib_V3.5.0 Instalamos el software que nos permitir\u00e1 hacer uso del interfaz STLink para programar el MCU: 1 2 $ cd ~/git $ git clone git://github.com/texane/stlink.git Instalamos una serie de paquetes necesarios: 1 $ sudo apt-get install pkg-config intltool build-essential cmake libusb-1.0 libgtk-3-dev Tal y como se explica en el README del proyecto descargado en el paso 7, el interfaz STLINKv1 que utiliza la STM32VLDISCOVERY, tiene ciertos problemas que para evitar hay que reconfigurar el m\u00f3dulo usb-storage . Para ello ejecutar lo siguiente al principio de una sesi\u00f3n en la que se quiera trabajar con \u00e9l: 1 $ sudo modprobe -r usb-storage && sudo modprobe usb-storage quirks = 0483 :3744:i Si se quiere hacer permanente el cambio en su lugar, crear el fichero /etc/modprobe.d/usb-storage.conf con el siguiente contenido: 1 2 # stlink/v1 ignore mass storage options usb-storage quirks=0483:3744:i Compilamos: 1 2 3 4 5 6 7 $ cd ~/git/stlink $ ./autogen.sh $ ./configure --with-gtk-gui $ make $ mkdir build && cd build $ cmake -DCMAKE_BUILD_TYPE = Debug .. $ make Conectar la placa por USB al ordenador. Arrancamos gdbserver: 1 2 $ cd ~/git/stlink/build $ sudo ./st-util -1 Conectamos con \u00e9l desde el directorio donde est\u00e9 el binario que queremos depurar o ejecutar: 1 2 3 4 5 $ cd ~/git/STM32-Template/Demo $ arm-none-eabi-gdb Demo.elf ( gdb ) target extended-remote localhost:4242 ( gdb ) load ( gdb ) quit","title":"2016-08-02 Entorno desarrollo STM32 VL Discovery sobre Linux"},{"location":"2016-08-13-mcus.html","text":"Parallax Propeller","title":"2016-08-13 MCUs"},{"location":"2016-08-17-el-mundo-de-ayer.html","text":"He pasado el \u00faltimo mes viviendo a principios del siglo XX gracias a la descripci\u00f3n que hace Stefan Zweig de la Europa de ese tiempo. A pesar de que siempre he intuido que mi cultura tiene una nacionalidad m\u00e1s amplia que la espa\u00f1ola, yo cre\u00eda que Europa era un invento de Miterrand y Francia en general como forma de domesticar a Alemania tras las dos guerras mundiales. Zweig me ha ense\u00f1ado que la conciencia europea es algo m\u00e1s antiguo y poderoso de lo que sospechaba. A pesar de que en su tiempo fue uno de los escritores m\u00e1s populares del mundo, yo no lo conoc\u00eda. Tras descubrirlo, he investigado y descubierto que fue un excelente testigo de las situaciones que condujeron a nuestro continente a las guerras mundiales. Por cierto que en los dos casos Zweig parece apuntar a intereses de poderes f\u00e1cticos en la sombra que no necesariamente representaban la opini\u00f3n del pueblo, pero que supieron coaccionarlo. La coyuntura anterior a la Primera Guerra Mundial tambi\u00e9n era una de mis carencias en materia de historia que este libro me ha ayudado a paliar m\u00e1s que ning\u00fan otro hasta ahora. El relato es una autobiograf\u00eda que escribi\u00f3 en el exilio. Era jud\u00edo austriaco y naturalmente tuvo que abandonar su pa\u00eds y le convirtieron en ap\u00e1trida (le retiraron la nacionalidad en su pa\u00eds y prohibieron todas sus obras) hasta que en 1942 no pudo soportar la crueldad de su tiempo y poco despu\u00e9s de escribir el libro se suicid\u00f3 a los 60 a\u00f1os junto a su esposa. Zweig fue un intelectual con may\u00fasculas, cuyas obras y esfuerzo humanista seguramente nos influyen hoy en d\u00eda. Su nombre tengo la impresi\u00f3n de que ha quedado un poco olvidado por c\u00f3mo se desenvolvieron los \u00faltimos a\u00f1os de su vida. Por mi parte voy a tratar de acercarme al resto de su obra. Como ejemplo, Wes Anderson reconoci\u00f3 que su pel\u00edcula El Gran Hotel Budapest se inspira en las obras de Stefan Zweig.","title":"2016-08-17 El mundo de ayer - Stefan Zweig"},{"location":"2016-10-17-raspi-switch.html","text":"Una de las carencias de Raspberry Pi es la falta de bot\u00f3n de encendido o apagado. Algo que no es grave, s\u00ed resulta inc\u00f3modo por ejemplo cuando se utiliza como media center con Kodi ya que puede no resultar sencillo quitar y poner el cable de encendido a la Raspberry estando \u00e9sta detr\u00e1s del televisor enterrada en cables y aparatos. La opci\u00f3n l\u00f3gica ser\u00eda alimentar la Raspberry a trav\u00e9s de una regleta de conexiones con interruptor, pero cuando no es posible/conveniente, hay alternativas. La comunidad ha desarrollado numerosos accesorios (como \u00e9ste ), pero existe una opci\u00f3n mucho m\u00e1s simplificada y barata que paso a describir. Se trata de conectar un pulsador a los pines de reset que existen en todas las versiones de Raspberry Pi. En la placa se se\u00f1alan con la etiqueta Run y seg\u00fan la versi\u00f3n se encuentran en uno u otro lugar. Por ejemplo en las versiones B+ y 2 est\u00e1 en el borde izquierdo justo debajo de los LEDs de actividad y encendido: En la versi\u00f3n 3 est\u00e1 desplazado a la derecha del GPIO: Pues bien, s\u00f3lo hay que soldar un par de pines a esas dos conexiones: En esos pines lo ideal ser\u00eda enchufar un conector de pin hembra doble como \u00e9ste: Hasta que me haga con \u00e9l he improvisado la conexi\u00f3n con unos terminales de empalme aplastados: En el otro extremo de los cables se puede conectar cualquier tipo de interruptor o mejor un pulsador. Por ejemplo utilic\u00e9 un tactile switch que me sobr\u00f3 del montaje de la PiGRRL 2 : Se puede situar en la caja haciendo un agujero en un lugar que no interfiera con los componentes altos de la Raspberry y pegarlo con cola caliente: Desde fuera el resultado final es el que puede verse en la imagen de cabecera del post. El pulsador en realidad es un Reset. De hecho viene bien tambi\u00e9n en caso de un bloqueo de Kodi. As\u00ed, el apagado de la Raspberry tendremos que hacerlo de forma l\u00f3gica. Para ello se puede utilizar el men\u00fa \"Apagar\" de Kodi (abajo a la izquierda en la pantalla principal). En mi caso incluso se apaga el televisor ya que Kodi debe enviar la orden a trav\u00e9s del HDMI. Con esto la Raspberry queda apagada. S\u00f3lo queda el consumo residual del alimentador microUSB, pero supongo que si es medianamente inteligente ser\u00e1 despreciable. Luego a la hora de encender s\u00f3lo tengo que pulsar el switch. Tambi\u00e9n en mi caso se enciende autom\u00e1ticamente el televisor a los 2 \u00f3 3 segundos de haber pulsado el switch y aparece el interfaz Kodi en pantalla (en una Raspberry Pi 2).","title":"2016-10-17 Interruputor de encendido para Raspberry Pi"},{"location":"2016-12-06-raspi3-kodi.html","text":"Lo que sigue es una versi\u00f3n simplificada del montaje de Kodi sobre Raspberry Pi descrito en un post anterior . Dado que la versi\u00f3n 3 de Raspberry Pi incluye un adaptador Wifi, no ser\u00e1 necesario a\u00f1adirlo. Prescindiendo tambi\u00e9n del decodificador TDT, el concentrador USB deja de ser necesario, resultando en conjunto una instalaci\u00f3n m\u00e1s sencilla y econ\u00f3mica. En el post anterior hac\u00eda m\u00e1s hincapi\u00e9 en la configuraci\u00f3n del decodificador TDT. Aqu\u00ed nos centraremos m\u00e1s en el propio Kodi. Elementos necesarios \u00b6 Raspberry Pi 3: En Raspipc.es o en PCComponentes Tarjeta de memoria, recomendable m\u00ednimo 16GB. Aunque servir\u00eda una de 4GB, al ser un media center, podr\u00eda ser necesaria cierto espacio libre para cachear contenidos. Lo que s\u00ed es importante es que la tarjeta sea lo m\u00e1s r\u00e1pida posible. Class 10 como m\u00ednimo. Mando si nuestra tele no soporta el protocolo CEC . Mando o control remoto \u00b6 Normalmente los televisores de hasta 8 a\u00f1os soportan el protocolo CEC que permite comandar dispositivos conectados por HDMI desde el mismo mando. En mi caso (un Sony KDL 40U4000) para que empezara a funcionar tuve que pulsar una tecla del mando llamada \"SYNC MENU\". En otras marcas me consta que se llama de otra forma. Si nuestro televisor no lo soporta, se puede utilizar un rat\u00f3n/teclado inal\u00e1mbricos o adquirir un mando de los muchos que hay previstos para esta funci\u00f3n ( ejemplo ). Por \u00faltimo est\u00e1 la opci\u00f3n de utilizar algunas aplicaciones m\u00f3viles como: Yatse, the Kodi Remote Kore, Official Remote for Kodi Instalaci\u00f3n \u00b6 El proceso para la instalaci\u00f3n de Kodi ser\u00eda: Bajar OpenELEC de aqu\u00ed Instalar con una utilidad de flasheo de tarjetas como por ejemplo Etcher . Desde Linux puede hacerse con el siguiente comando (sustituyendo el /dev por el que corresponda; en el post anterior hay m\u00e1s detalles sobre esto): 1 gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M Pinchar en Raspberry y conectar. El primer arranque es m\u00e1s lento ya que se redimensiona la partici\u00f3n principal de la tarjeta de memoria para aprovechar toda su superficie. En la actualidad (2016-12-06) aparece un mensaje de error al principio indicando que el Add-on \"TheAudioDB\" es incompatible o est\u00e1 roto en el repositorio. De momento responderemos que no a la pregunta de desactivarlo, ya que al lograr conectividad a la red muchos de los add-ons se actualizar\u00e1n, pudiendo solucionarse el problema por si mismo. Aparece un asistente de configuraci\u00f3n. Los pasos m\u00e1s importantes son: Networking: Si vamos a conectar por Wifi habr\u00e1 que seleccionar y configurar el punto de acceso. Sharing and Remote Access: Aunque esto ser\u00e1 m\u00e1s \u00fatil para los que se desenvuelvan bien en Linux, se recomienda activar el servicio SSH. Nos permitir\u00e1 por ejemplo explorar el sistema de archivos de la Raspberry con clientes como Filezilla. Configuraci\u00f3n \u00b6 Una vez finalizado el asistente, el sistema ya es funcional, pero vamos a repasar algunos ajustes: Acudimos a la ruta: System > Settings > Appearance > International y cambiamos lo siguiente: Language : Spanish (a partir de ahora las indicaciones de rutas de men\u00fa cambian consecuentemente del ingl\u00e9s al espa\u00f1ol) Regi\u00f3n : Espa\u00f1a (24 horas) Distribuciones de teclado : Spanish QWERTY (hay que deseleccionar el English QWERTY adem\u00e1s) Pa\u00eds del huso horario : Spain Acudimos a la ruta: Sistema > OpenELEC > Sistema y cambiamos lo siguiente: Teclado > Disposici\u00f3n de teclas : es Or\u00edgenes de datos \u00b6 Si tenemos fuentes de archivos en casa, como pueda ser un NAS o un ordenador en la misma red, hay que crear accesos para dichas fuentes en las distintas secciones que hay para los contenidos (M\u00fasica, V\u00eddeos e Im\u00e1genes). Kodi permite adem\u00e1s sincronizar los metadatos de esos archivos con varias bases de datos en internet, de manera que podremos ver sinopsis, car\u00e1tulas y en general informaci\u00f3n enriquecida asociada a los contenidos. Por ejemplo as\u00ed se har\u00eda para una carpeta compartida que contuviera pel\u00edculas: Entramos en la secci\u00f3n V\u00eddeos > Archivos . Seleccionamos la opci\u00f3n A\u00f1adir v\u00eddeos... . Aparece el cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo en el que pulsamos el bot\u00f3n Buscar . Emerge por la derecha de la pantalla un listado que nos permite explorar el propio sistema de archivos de la Raspberry (opci\u00f3n Directorio de inicio ) y los distintos protocolos de descubrimiento de red que Kodi soporta. El m\u00e1s habitual ser\u00e1 Red Windows (SMB) , aunque si tenemos un NAS o equipo con Linux, puede ser m\u00e1s conveniente el Network File System (NFS) por ejemplo. Seleccionamos lo que corresponda. Dependiendo del protocolo elegido y de la configuraci\u00f3n del mismo que tengamos en el origen de datos, nos aparecer\u00e1 la fuente o tendremos que introducirla a mano. Tambi\u00e9n podr\u00e1 o no requerirnos credenciales de acceso a la fuente. Una vez seleccionada la fuente volveremos al cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo donde daremos nombre a la fuente en la parte inferior y pulsaremos el bot\u00f3n OK . Aparecer\u00e1 otro cuadro de di\u00e1logo con el t\u00edtulo Establecer el contenido . En \u00e9l lo que tenemos que hacer es seleccionar el tipo de contenido arriba a la izquierda por medio de las peque\u00f1as flechas. Las opciones son: Videoclips : Para v\u00eddeos musicales. Series Pel\u00edculas Para cada uno de ellos se selecciona a la derecha un scraper que es una base de datos en internet con metainformaci\u00f3n. Por defecto s\u00f3lo contamos con uno, aunque se pueden activar m\u00e1s por medio de add-ons. Al terminar esta configuraci\u00f3n, veremos una nueva secci\u00f3n dedicada a las pel\u00edculas en el men\u00fa principal de Kodi. Para sacar verdadero provecho de Kodi, hay que conocer e instalar extensiones o add-ons. No es el prop\u00f3sito de esta gu\u00eda y hay sitios enteros dedicados a enumerarlos y a proporcionar instrucciones detalladas de instalaci\u00f3n como los siguientes: https://howtomediacenter.com/es http://mundokodi.com/ http://kodiaddonstv.com/","title":"2016-12-06 Raspberry Pi 3 + KODI"},{"location":"2016-12-06-raspi3-kodi.html#elementos-necesarios","text":"Raspberry Pi 3: En Raspipc.es o en PCComponentes Tarjeta de memoria, recomendable m\u00ednimo 16GB. Aunque servir\u00eda una de 4GB, al ser un media center, podr\u00eda ser necesaria cierto espacio libre para cachear contenidos. Lo que s\u00ed es importante es que la tarjeta sea lo m\u00e1s r\u00e1pida posible. Class 10 como m\u00ednimo. Mando si nuestra tele no soporta el protocolo CEC .","title":"Elementos necesarios"},{"location":"2016-12-06-raspi3-kodi.html#mando-o-control-remoto","text":"Normalmente los televisores de hasta 8 a\u00f1os soportan el protocolo CEC que permite comandar dispositivos conectados por HDMI desde el mismo mando. En mi caso (un Sony KDL 40U4000) para que empezara a funcionar tuve que pulsar una tecla del mando llamada \"SYNC MENU\". En otras marcas me consta que se llama de otra forma. Si nuestro televisor no lo soporta, se puede utilizar un rat\u00f3n/teclado inal\u00e1mbricos o adquirir un mando de los muchos que hay previstos para esta funci\u00f3n ( ejemplo ). Por \u00faltimo est\u00e1 la opci\u00f3n de utilizar algunas aplicaciones m\u00f3viles como: Yatse, the Kodi Remote Kore, Official Remote for Kodi","title":"Mando o control remoto"},{"location":"2016-12-06-raspi3-kodi.html#instalacion","text":"El proceso para la instalaci\u00f3n de Kodi ser\u00eda: Bajar OpenELEC de aqu\u00ed Instalar con una utilidad de flasheo de tarjetas como por ejemplo Etcher . Desde Linux puede hacerse con el siguiente comando (sustituyendo el /dev por el que corresponda; en el post anterior hay m\u00e1s detalles sobre esto): 1 gunzip OpenELEC-RPi2.arm-6.0.3.img.gz -c | sudo dd of=/dev/mmcblk0 bs=2M Pinchar en Raspberry y conectar. El primer arranque es m\u00e1s lento ya que se redimensiona la partici\u00f3n principal de la tarjeta de memoria para aprovechar toda su superficie. En la actualidad (2016-12-06) aparece un mensaje de error al principio indicando que el Add-on \"TheAudioDB\" es incompatible o est\u00e1 roto en el repositorio. De momento responderemos que no a la pregunta de desactivarlo, ya que al lograr conectividad a la red muchos de los add-ons se actualizar\u00e1n, pudiendo solucionarse el problema por si mismo. Aparece un asistente de configuraci\u00f3n. Los pasos m\u00e1s importantes son: Networking: Si vamos a conectar por Wifi habr\u00e1 que seleccionar y configurar el punto de acceso. Sharing and Remote Access: Aunque esto ser\u00e1 m\u00e1s \u00fatil para los que se desenvuelvan bien en Linux, se recomienda activar el servicio SSH. Nos permitir\u00e1 por ejemplo explorar el sistema de archivos de la Raspberry con clientes como Filezilla.","title":"Instalaci\u00f3n"},{"location":"2016-12-06-raspi3-kodi.html#configuracion","text":"Una vez finalizado el asistente, el sistema ya es funcional, pero vamos a repasar algunos ajustes: Acudimos a la ruta: System > Settings > Appearance > International y cambiamos lo siguiente: Language : Spanish (a partir de ahora las indicaciones de rutas de men\u00fa cambian consecuentemente del ingl\u00e9s al espa\u00f1ol) Regi\u00f3n : Espa\u00f1a (24 horas) Distribuciones de teclado : Spanish QWERTY (hay que deseleccionar el English QWERTY adem\u00e1s) Pa\u00eds del huso horario : Spain Acudimos a la ruta: Sistema > OpenELEC > Sistema y cambiamos lo siguiente: Teclado > Disposici\u00f3n de teclas : es","title":"Configuraci\u00f3n"},{"location":"2016-12-06-raspi3-kodi.html#origenes-de-datos","text":"Si tenemos fuentes de archivos en casa, como pueda ser un NAS o un ordenador en la misma red, hay que crear accesos para dichas fuentes en las distintas secciones que hay para los contenidos (M\u00fasica, V\u00eddeos e Im\u00e1genes). Kodi permite adem\u00e1s sincronizar los metadatos de esos archivos con varias bases de datos en internet, de manera que podremos ver sinopsis, car\u00e1tulas y en general informaci\u00f3n enriquecida asociada a los contenidos. Por ejemplo as\u00ed se har\u00eda para una carpeta compartida que contuviera pel\u00edculas: Entramos en la secci\u00f3n V\u00eddeos > Archivos . Seleccionamos la opci\u00f3n A\u00f1adir v\u00eddeos... . Aparece el cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo en el que pulsamos el bot\u00f3n Buscar . Emerge por la derecha de la pantalla un listado que nos permite explorar el propio sistema de archivos de la Raspberry (opci\u00f3n Directorio de inicio ) y los distintos protocolos de descubrimiento de red que Kodi soporta. El m\u00e1s habitual ser\u00e1 Red Windows (SMB) , aunque si tenemos un NAS o equipo con Linux, puede ser m\u00e1s conveniente el Network File System (NFS) por ejemplo. Seleccionamos lo que corresponda. Dependiendo del protocolo elegido y de la configuraci\u00f3n del mismo que tengamos en el origen de datos, nos aparecer\u00e1 la fuente o tendremos que introducirla a mano. Tambi\u00e9n podr\u00e1 o no requerirnos credenciales de acceso a la fuente. Una vez seleccionada la fuente volveremos al cuadro de di\u00e1logo titulado A\u00f1adir fuente de v\u00eddeo donde daremos nombre a la fuente en la parte inferior y pulsaremos el bot\u00f3n OK . Aparecer\u00e1 otro cuadro de di\u00e1logo con el t\u00edtulo Establecer el contenido . En \u00e9l lo que tenemos que hacer es seleccionar el tipo de contenido arriba a la izquierda por medio de las peque\u00f1as flechas. Las opciones son: Videoclips : Para v\u00eddeos musicales. Series Pel\u00edculas Para cada uno de ellos se selecciona a la derecha un scraper que es una base de datos en internet con metainformaci\u00f3n. Por defecto s\u00f3lo contamos con uno, aunque se pueden activar m\u00e1s por medio de add-ons. Al terminar esta configuraci\u00f3n, veremos una nueva secci\u00f3n dedicada a las pel\u00edculas en el men\u00fa principal de Kodi. Para sacar verdadero provecho de Kodi, hay que conocer e instalar extensiones o add-ons. No es el prop\u00f3sito de esta gu\u00eda y hay sitios enteros dedicados a enumerarlos y a proporcionar instrucciones detalladas de instalaci\u00f3n como los siguientes: https://howtomediacenter.com/es http://mundokodi.com/ http://kodiaddonstv.com/","title":"Or\u00edgenes de datos"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html","text":"Nota: Este post es una especie de actualizaci\u00f3n de este otro que correspond\u00eda a la versi\u00f3n 6.0.3 de OpenELEC (Kodi 15). Si est\u00e1s usando esa versi\u00f3n, utiliza el post anterior en lugar de \u00e9ste. A continuaci\u00f3n se describe el montaje de un media center ejecut\u00e1ndose sobre Raspberry Pi 3 basado en la distribuci\u00f3n OpenELEC que implementa de forma muy ligera el software media center Kodi (anteriormente llamado XBMC). Se incorpora un decodificador TDT gestionado con el software Tvheadend . En caso de tener el router cerca y poder llevar un cable ethernet hasta la Raspberry Pi se recomienda, ya que ser\u00e1 habitual consumir contenidos pesados por red. Para el airmouse o teclado/rat\u00f3n inal\u00e1mbrico hay alternativas: Aplicaciones para el m\u00f3vil: Kore o Yatse Mando a distancia del TV: Si nuestro TV soporta el protocolo CEC , puede comandar Kodi a trav\u00e9s del cable HDMI Elementos necesarios \u00b6 Empezamos con la lista de piezas que vamos a necesitar. Hardware \u00b6 Raspberry Pi 3: En Raspipc.es o en Pccomponentes.com Tarjeta microSD: En Raspipc.es o en Amazon.es Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es Software \u00b6 OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT. Instalaci\u00f3n \u00b6 A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques. Instalaci\u00f3n OpenELEC \u00b6 Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-7.0.1.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta (en el ejemplo son dos, pero en una tarjeta nueva lo normal es que s\u00f3lo sea una): 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-7.0.1.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync Conexi\u00f3n de piezas \u00b6 Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT a uno de los puertos USB de la Raspberry Pi y el cable de antena al propio adaptador. Finalmente alimentamos la Raspberry el t\u00edpico alimentador microUSB. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas. Configuraci\u00f3n Kodi \u00b6 El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Si vamos a conectar por Wifi y no lo hemos hecho durante el asistente inicial, hay que acudir a la siguiente ruta para conectar a nuestro punto de acceso: 1 Sistema / OpenELEC / Conexiones / engancho mi AP Instalaci\u00f3n de TVheadend \u00b6 Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / TV / General / Activado Configuraci\u00f3n de Tvheadend \u00b6 Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 6 7 Configuration / General / Language settings / Available / Spanish; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create Configuration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save Configuration / DVB Inputs / Networks / TDT / Force Scan Configuration / DVB Inputs / Muxes (observar evoluci\u00f3n del escaneo) Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save . Instalaci\u00f3n licencia MPEG-2 \u00b6 Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"2017-01-14 Raspberry Pi 3 + KODI 16 + Tvheadend"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#elementos-necesarios","text":"Empezamos con la lista de piezas que vamos a necesitar.","title":"Elementos necesarios"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#hardware","text":"Raspberry Pi 3: En Raspipc.es o en Pccomponentes.com Tarjeta microSD: En Raspipc.es o en Amazon.es Sintonizador TDT USB: En Pccomponentes.com o en Amazon.es Cable HDMI . Vamos a suponer que el televisor donde se va a instalar posee una entrada HDMI de tama\u00f1o est\u00e1ndar. En caso contrario necesitaremos el adaptador correspondiente. Airmouse o teclado/rat\u00f3n inal\u00e1mbricos: En Amazon.es","title":"Hardware"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#software","text":"OpenELEC para Raspberry Pi 2 Licencia MPEG-2 : Necesaria para reproducir la se\u00f1al TDT.","title":"Software"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion","text":"A continuaci\u00f3n se indica el proceso de montaje paso a paso. Vamos a dividirlo en cuatro bloques.","title":"Instalaci\u00f3n"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-openelec","text":"Las instrucciones que siguen se corresponden con una instalaci\u00f3n desde un equipo con Linux. En caso de utilizar Windows o MacOSX habr\u00e1 que buscar las alternativas. Por ejemplo en las instrucciones oficiales de instalaci\u00f3n de OpenELEC s\u00ed que se dan instrucciones espec\u00edficas para cada sistema. La web oficial de Raspberry Pi tambi\u00e9n tiene una gu\u00eda bastante buena . Abrimos un terminal. Bajamos la imagen de OpenELEC para Raspberry Pi 2: 1 $ wget http://releases.openelec.tv/OpenELEC-RPi2.arm-7.0.1.img.gz Insertamos la tarjeta microSD en el lector de tarjetas del ordenador. Averiguamos la ruta del dispositivo de la tarjeta: 1 2 3 4 5 6 7 8 9 10 11 $ df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en /dev/sda3 61G 44G 14G 76 % / none 4 ,0K 0 4 ,0K 0 % /sys/fs/cgroup udev 1 ,9G 12K 1 ,9G 1 % /dev tmpfs 390M 1 ,3M 389M 1 % /run none 5 ,0M 0 5 ,0M 0 % /run/lock none 2 ,0G 27M 1 ,9G 2 % /run/shm none 100M 84K 100M 1 % /run/user /dev/mmcblk0p2 3 ,4G 1 ,6M 3 ,4G 1 % /media/edumoreno/3f46971c-8bb7-4f8a-9095-2862537e6191 /dev/mmcblk0p1 256M 104M 153M 41 % /media/edumoreno/1765-7DD1 La mejor forma de averiguar los dispositivos correctos es ejecutar df -h antes y despu\u00e9s de insertar la tarjeta. En mi caso aparecen dos particiones sobre el dispositivo /dev/mmcblk0 (p1 y p2 son el sufijo de las particiones; en algunos lectores de tarjetas nos podr\u00eda aparecer /dev/sdb1 y /dev/sdb2 por ejemplo, lo que indicar\u00eda que el dispositivo es /dev/sdb ). Desmontamos las particiones montadas de la tarjeta (en el ejemplo son dos, pero en una tarjeta nueva lo normal es que s\u00f3lo sea una): 1 2 $ sudo umount /dev/mmcblk0p1 $ sudo umount /dev/mmcblk0p2 Copiamos a la tarjeta la imagen de OpenELEC bajada en el paso 2: 1 2 $ gunzip OpenELEC-RPi2.arm-7.0.1.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M $ sudo sync","title":"Instalaci\u00f3n OpenELEC"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#conexion-de-piezas","text":"Cuando termine el \u00faltimo punto de la secci\u00f3n anterior (tardar\u00e1 m\u00e1s o menos dependiendo de la velocidad de la tarjeta), sacaremos la tarjeta microSD del lector y la insertaremos en la ranura de la Raspberry. Conectamos el cable HDMI entre el televisor y la Raspberry. Conectamos el adaptador TDT a uno de los puertos USB de la Raspberry Pi y el cable de antena al propio adaptador. Finalmente alimentamos la Raspberry el t\u00edpico alimentador microUSB. El primer arranque de OpenELEC sirve para redimensionar las particiones de la tarjeta microSD para aprovechar toda su capacidad. Al terminar el proceso se reiniciar\u00e1 autom\u00e1ticamente y esta vez s\u00ed, terminar\u00e1 apareciendo el interfaz de Kodi. A partir de ahora trabajaremos con Kodi para configurar una serie de cosas.","title":"Conexi\u00f3n de piezas"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#configuracion-kodi","text":"El primer arranque muestra un asistente en el que entre otras cosas se selecciona el idioma de los men\u00fas, la conexi\u00f3n a internet y si queremos activar los servicios SSH y Samba. Necesitamos activar el primero para poder averiguar m\u00e1s adelante el n\u00famero de serie de la Raspberry para contratar la licencia MPEG-2. Si vamos a conectar por Wifi y no lo hemos hecho durante el asistente inicial, hay que acudir a la siguiente ruta para conectar a nuestro punto de acceso: 1 Sistema / OpenELEC / Conexiones / engancho mi AP","title":"Configuraci\u00f3n Kodi"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-de-tvheadend","text":"Lo siguientes pasos nos permiten activar el sistema de gesti\u00f3n del TDT: 1 2 3 4 Sistema / Ajustes / Add-ons / Instalar desde repositorio / OpenELEC Add-ons (official) / Repositorio de Add-ons / OpenELEC Add-ons (unofficial) / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Servicios / tvheadend / Instalar Sistema / Ajustes / Add-ons / Instalar desde repositorio / Todos los repositorios / Clientes PVR / Tvheadend HTSP Client / Instalar Sistema / Ajustes / TV / General / Activado","title":"Instalaci\u00f3n de TVheadend"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#configuracion-de-tvheadend","text":"Tvheadend tiene arquitectura cliente/servidor. Lo que manipulamos a trav\u00e9s de Kodi es la parte cliente. El servicio se sirve por TCP/IP a trav\u00e9s de los puertos 9981 y 9982. El segundo puerto ofrece una API que utilizan los clientes gr\u00e1ficos como el de Kodi o las aplicaciones para dispositivos m\u00f3viles. As\u00ed pues en las configuraciones de estos programas habr\u00e1 que indicar el puerto 9982. El primero ofrece un interfaz web al que podemos pues entrar con un navegador accediendo a la direcci\u00f3n http://ip-de-raspberry:9981 La IP de la raspberry la podremos averiguar acudiendo a la ruta: 1 Sistema / OpenELEC / Conexiones Por cierto que ya que estamos en esta ruta, se recomienda editar la conexi\u00f3n y poner una IP fija en el apartado IPv4, ya que como veremos, el interfaz web de Tvheadend es muy potente y nos convendr\u00e1 utilizarlo para algunas tareas. Tambi\u00e9n nos conviene tener una IP fija si vamos a consumir el servicio de televisor desde otros dispositivos como un ordenador (en ese caso utilizaremos el interfaz web) o un dispositivo m\u00f3vil. Antes de continuar, comentar que me he encontrado con varios chips dentro del mismo adaptador Conceptronic. En concreto los dos siguientes identificadores: Realtek RTL2832 Siano Mobile Digital MDTV Receiver El primero funcion\u00f3 directamente, pero en el segundo fue necesario modificar un par\u00e1metro de uno de los m\u00f3dulos que lo controlan. Para ello tuve que a\u00f1adir el fichero /etc/modprobe.d/smsmdtv.conf con el siguiente contenido: 1 options smsmdtv default_mode=4 Una vez dentro de la consola web de Tvheadend seguimos los siguientes pasos para activar el decodificador de TDT y a\u00f1adir los canales: 1 2 3 4 5 6 7 Configuration / General / Language settings / Available / Spanish; Castilian -> Selected / Save configuration Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Enabled / Save Configuration / DVB Inputs / Networks / Add / Type: DVB-T Network / Network Name: TDT / Create Configuration / DVB Inputs / Muxes / Add (ver lista m\u00e1s adelante) Configuration / DVB Inputs / TV Adapters / Realtek RTL2832 / Parameters / Basic Settings / Networks / (seleccionamos TDT) / Save Configuration / DVB Inputs / Networks / TDT / Force Scan Configuration / DVB Inputs / Muxes (observar evoluci\u00f3n del escaneo) Los muxes o multiplexes son las frecuencias sobre las que viajan empaquetadas los canales y una serie de par\u00e1metros de codificaci\u00f3n. La tecnolog\u00eda TDT (o DVB-T m\u00e1s propiamente) permite codificar varios canales en una misma frecuencia. Algunos decodificadores de TDT permiten sintonizaci\u00f3n autom\u00e1tica como hacen los televisores, pero el que he elegido para este montaje no. As\u00ed, hay que introducir la lista de muxes manualmente. Las frecuencias dependen de la provincia en la que nos encontremos. Aqu\u00ed por ejemplo podemos encontrarlas. Los muxes que utilizo en Zaragoza son los siguientes: Todos ellos se han introducido con los siguientes par\u00e1metros: Bandwidth: 8MHz Constellation: QAM/64 Transmission Mode: 8k Resto de par\u00e1metros: AUTO Una vez introducidos los muxes, hay que esperar a que el sistema los escanee. El proceso suele tardar un buen rato y se observa su evoluci\u00f3n en las columnas Scan Status y Scan Result del pantallazo anterior. Una vez que veamos que todos los muxes han sido analizados, tenemos que indicar a Tvheadend que mapee los servicios encontrados con canales. Esto lo haremos pulsando el bot\u00f3n Map All que se encuentra en la ruta: 1 Configuration / DVB Inputs / Services / Map All / Check availability / Map Para ordenar la lista de canales, hay que acudir a la siguiente ruta y asignar n\u00fameros correlativos a la columna Number : 1 Configuration / Channel/EPG / Channels Cuando hayamos terminado de numerar los canales pulsaremos el bot\u00f3n Save .","title":"Configuraci\u00f3n de Tvheadend"},{"location":"2017-01-14-raspi2-kodi-16-tvheadend.html#instalacion-licencia-mpeg-2","text":"Aunque por la arquitectura cliente/servidor de Tvheadend podremos visualizar la se\u00f1al TDT desde otros dispositivos que tengamos en la misma red (como por ejemplo con nuestro tel\u00e9fono Android con esta aplicaci\u00f3n instalada), si queremos ver la televisi\u00f3n en el propio Kodi, vamos a necesitar adquirir la licencia para utilizar el hardware de decodificaci\u00f3n MPEG-2 que hay incluido en el procesador Broadcom 2836 de la Raspberry Pi 2. La licencia tiene un coste de \u00a32.40 Para ello necesitamos primero averiguar el n\u00famero de serie de la Raspberry siguiendo estos pasos: Conectamos por SSH con la Raspberry (password = openelec ): 1 $ ssh root@ip-de-raspberry Obtenemos el n\u00famero de serie: 1 2 OpenELEC:~ # cat /proc/cpuinfo | fgrep Serial Serial : 0000000029bcaeeb Adquirimos la licencia acudiendo a la Raspberry Pi Store . Aproximadamente un d\u00eda despu\u00e9s recibiremos por correo un c\u00f3digo que ahora tendremos que instalar en la Raspberry. Apagamos Kodi/OpenELEC desde men\u00fa. Cuando se termine de apagar la Raspberry, quitamos la alimentaci\u00f3n y sacamos la tarjeta microSD. Insertamos la tarjeta en el lector del ordenador. Se montar\u00e1n las dos nuevas particiones que contiene la distribuci\u00f3n OpenELEC. La partici\u00f3n m\u00e1s peque\u00f1a es la de arranque donde est\u00e1 el kernel Linux y una serie de ficheros de configuraci\u00f3n de Raspberry Pi que act\u00faan a modo de BIOS. Entre esos ficheros vamos a modificar el config.txt . Casi al final hay una serie de claves que comienzan por decode_ . La primera de ellas es decode_MPG2 . Descomentaremos la l\u00ednea quitando la almohadilla que hay al principio y sustituiremos el valor por el que hemos obtenido por correo al adquirir la licencia. Guardamos el fichero, extraemos la tarjeta microSD y la volvemos a insertar en la Raspberry. FIN","title":"Instalaci\u00f3n licencia MPEG-2"},{"location":"2018-05-05-otto.html","text":"En este art\u00edculo se detallan las piezas hardware, software e informaci\u00f3n conveniente para montar y poner en marcha el robot Otto . Enlaces \u00b6 OttoDIY: OttoDIY/DIY - Github OttoDIY/DIY - Instructables OttoDIY/DIY - Thingiverse OttoDIY+: OttoDIY/PLUS - Github OttoDIY/PLUS - Instructables OttoDIY/PLUS - Thingiverse Componentes \u00b6 OttoDIY \u00b6 Cable de pin hembra-hembra Pulsador ON/OFF Portapilas AAx4 Shield Arduino Nano M\u00f3dulo sensor Ultrasonidos HC-SR04 Servo SG90 : 4 unidades Zumbador 5V Arduino Nano 328p OttoDIY+ \u00b6 Pulsaodor t\u00e1ctil TTP223B : 3 unidades M\u00f3dulo Bluetooth HC-05 Matriz LED MAX7219 Montaje \u00b6 Los STLs de las piezas impresas se encuentran en el repositorio GitHub dentro del directorio 3D print . Para el montaje seguir el PDF incluido en la ra\u00edz del repositorio GitHub (en el momento de escribir este art\u00edculo era la versi\u00f3n 07 ). Calibraci\u00f3n \u00b6 Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 //----------------------------------------------------------------- //-- Easy calibration for Otto DIY //-- CC BY SA (http://ottodiy.com) //-- Javier Isabel, 02/06/2015 //-- VERY IMPORTANT only calibrate ONE TIME per board!to avoid damage EEPROM memory //----------------------------------------------------------------- #include <Otto.h> #include <Servo.h> #include <Oscillator.h> #include <EEPROM.h> //-- First step: Configure the pins where the servos are attached /* --------------- | O O | |---------------| YR 3==> | | <== YL 2 --------------- || || || || RR 5==> ----- ------ <== RL 4 |----- ------| */ #define PIN_YL 2 #define PIN_YR 3 #define PIN_RL 4 #define PIN_RR 5 #define TRIM_YL 3 #define TRIM_YR 9 #define TRIM_RL -3 #define TRIM_RR 6 Otto Otto ; void setup () { Otto . init ( PIN_YL , PIN_YR , PIN_RL , PIN_RR , false ); Otto . setTrims ( TRIM_YL , TRIM_YR , TRIM_RL , TRIM_RR ); //change Trim \"offset values\" gradually until Otto is completely straight (90\u00ba) // Otto.saveTrimsOnEEPROM(); //use only after completely straight(90\u00ba), delete this line after for further programming } void loop () { //test comparing before & after function Otto . home (); } Por medio de ensayo/error identificar los valores de TRIM_RR , TRIM_RL , TRIM_YR y TRIM_YL que hacen que las cuatro articulaciones queden perfectamente cuadradas. Cuando se consiga, descomentar la l\u00ednea que contiene el comando Otto.saveTrimsOnEEPROM(); y ejecutar una vez m\u00e1s para que se almacenen los valores en la EEPROM. A partir de entonces, todos los sketches que utilicen la librer\u00eda Otto y que inicialicen ese objeto por medio de la funci\u00f3n init poniendo true en el quinto argumento, cargar\u00e1n estos valores de la calibraci\u00f3n de la EEPROM y por tanto comenzar\u00e1n con el robot bien encuadrado. En el repositorio hay sketches que no se basan en la librer\u00eda Otto sino que gestionan los servos directamente. En estos casos la gesti\u00f3n del trim tambi\u00e9n se har\u00e1 directamente, ya que desafortunadamente las posiciones de los trim en la EEPROM no coinciden con los que hace la librer\u00eda Otto, para evitar tener que regrabar sus valores en la EEPROM cada vez que pasemos de un tipo a otro de sketch. Por ejemplo en el sketch Otto_smooth_criminal, que no utiliza la librer\u00eda Otto, los trim se leen de la EEPROM en orden inverso. Por tanto, ser\u00e1 mejor desactivar su lectura y escribir los valores de trim directamente en el c\u00f3digo. As\u00ed: 1 2 3 4 5 6 #define EEPROM_TRIM false // Activate to take callibration data from internal memory #define TRIM_RR 6 #define TRIM_RL -3 #define TRIM_YR 9 #define TRIM_YL 3 Programaci\u00f3n \u00b6 De entre los varios sketches de ejemplo que vienen en el repositorio, el m\u00e1s pr\u00e1ctico para empezar a hacer una programaci\u00f3n personalizada de Otto es el Otto_BASIC . En los comentarios que hay al principio se describen las funciones b\u00e1sicas de la librer\u00eda Otto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /*SOUNDS****************** * S_connection S_disconnection S_buttonPushed S_mode1 S_mode2 S_mode3 S_surprise S_OhOoh S_OhOoh2 S_cuddly * S_sleeping S_happy S_superHappy S_happy_short S_sad S_confused S_fart1 S_fart2 S_fart3 */ /*MOVEMENTS LIST************** * dir=1---> FORWARD/LEFT * dir=-1---> BACKWARD/RIGTH * T : amount of movement. HIGHER VALUE SLOWER MOVEMENT usually 1000 (from 600 to 1400) * h: height of mov. around 20 jump(steps=1, int T = 2000); walk(steps, T, dir); turn(steps, T, dir); bend (steps, T, dir); //usually steps =1, T=2000 shakeLeg (steps, T, dir); updown(steps, T, HEIGHT); swing(steps, T, HEIGHT); tiptoeSwing(steps, T, HEIGHT); jitter(steps, T, HEIGHT); (small T) ascendingTurn(steps, T, HEIGHT); moonwalker(steps, T, HEIGHT,dir); crusaito(steps, T, HEIGHT,dir); flapping(steps, T, HEIGHT,dir); /*GESTURES LIST*************** OttoHappy OttoSuperHappy OttoSad OttoSleeping OttoFart OttoConfused OttoLove OttoAngry OttoFretful OttoMagic OttoWave OttoVictory OttoFail*/ En setup se hace una inicializaci\u00f3n b\u00e1sica de la librer\u00eda Otto y se emite un sonido por el buzzer. Luego en el loop se ha programado una sencilla funci\u00f3n para que Otto camine hacia delante hasta que localice un obst\u00e1culo a menos de 15cm y d\u00e9 unos pasos hacia atr\u00e1s y gire. 1 2 3 4 5 6 7 8 9 10 11 12 13 //-- Function to avoid obstacles void obstacleMode (){ distance = Otto . getDistance (); if ( distance < 15 ){ Otto . sing ( S_surprise ); Otto . walk ( 2 , 1300 , - 1 ); Otto . turn ( 3 , 1000 , - 1 ); delay ( 50 ); } else { Otto . walk ( 2 , 1000 , 1 ); } } Es \u00fatil aprovechar la funcionalidad del sensor de distancia para disparar el comportamiento de Otto que queremos programar. En otro caso todo lo que programemos dentro de la funci\u00f3n loop se ejecutar\u00e1 sin parar. As\u00ed por ejemplo, imitando la funci\u00f3n obstacleMode , un ejemplo de loop en el que haremos que cuando pongamos la mano delante, Otto avance un par de pasos, haga el moonwalk hacia la derecha, d\u00e9 un peque\u00f1o salto y se detenga ejecutando el gesto de victoria ser\u00eda: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void loop () { distance = Otto . getDistance (); if ( distance < 15 ){ Otto . walk ( 2 , 1000 , 1 ); Otto . home (); Otto . moonwalker ( 3 , 1000 , 25 , - 1 ); Otto . home (); Otto . jump ( 1 , 1000 ); Otto . home (); Otto . playGesture ( OttoVictory ); Otto . home (); } else { Otto . home (); } }","title":"2018-05-05 Otto DIY"},{"location":"2018-05-05-otto.html#enlaces","text":"OttoDIY: OttoDIY/DIY - Github OttoDIY/DIY - Instructables OttoDIY/DIY - Thingiverse OttoDIY+: OttoDIY/PLUS - Github OttoDIY/PLUS - Instructables OttoDIY/PLUS - Thingiverse","title":"Enlaces"},{"location":"2018-05-05-otto.html#componentes","text":"","title":"Componentes"},{"location":"2018-05-05-otto.html#ottodiy","text":"Cable de pin hembra-hembra Pulsador ON/OFF Portapilas AAx4 Shield Arduino Nano M\u00f3dulo sensor Ultrasonidos HC-SR04 Servo SG90 : 4 unidades Zumbador 5V Arduino Nano 328p","title":"OttoDIY"},{"location":"2018-05-05-otto.html#ottodiy_1","text":"Pulsaodor t\u00e1ctil TTP223B : 3 unidades M\u00f3dulo Bluetooth HC-05 Matriz LED MAX7219","title":"OttoDIY+"},{"location":"2018-05-05-otto.html#montaje","text":"Los STLs de las piezas impresas se encuentran en el repositorio GitHub dentro del directorio 3D print . Para el montaje seguir el PDF incluido en la ra\u00edz del repositorio GitHub (en el momento de escribir este art\u00edculo era la versi\u00f3n 07 ).","title":"Montaje"},{"location":"2018-05-05-otto.html#calibracion","text":"Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 //----------------------------------------------------------------- //-- Easy calibration for Otto DIY //-- CC BY SA (http://ottodiy.com) //-- Javier Isabel, 02/06/2015 //-- VERY IMPORTANT only calibrate ONE TIME per board!to avoid damage EEPROM memory //----------------------------------------------------------------- #include <Otto.h> #include <Servo.h> #include <Oscillator.h> #include <EEPROM.h> //-- First step: Configure the pins where the servos are attached /* --------------- | O O | |---------------| YR 3==> | | <== YL 2 --------------- || || || || RR 5==> ----- ------ <== RL 4 |----- ------| */ #define PIN_YL 2 #define PIN_YR 3 #define PIN_RL 4 #define PIN_RR 5 #define TRIM_YL 3 #define TRIM_YR 9 #define TRIM_RL -3 #define TRIM_RR 6 Otto Otto ; void setup () { Otto . init ( PIN_YL , PIN_YR , PIN_RL , PIN_RR , false ); Otto . setTrims ( TRIM_YL , TRIM_YR , TRIM_RL , TRIM_RR ); //change Trim \"offset values\" gradually until Otto is completely straight (90\u00ba) // Otto.saveTrimsOnEEPROM(); //use only after completely straight(90\u00ba), delete this line after for further programming } void loop () { //test comparing before & after function Otto . home (); } Por medio de ensayo/error identificar los valores de TRIM_RR , TRIM_RL , TRIM_YR y TRIM_YL que hacen que las cuatro articulaciones queden perfectamente cuadradas. Cuando se consiga, descomentar la l\u00ednea que contiene el comando Otto.saveTrimsOnEEPROM(); y ejecutar una vez m\u00e1s para que se almacenen los valores en la EEPROM. A partir de entonces, todos los sketches que utilicen la librer\u00eda Otto y que inicialicen ese objeto por medio de la funci\u00f3n init poniendo true en el quinto argumento, cargar\u00e1n estos valores de la calibraci\u00f3n de la EEPROM y por tanto comenzar\u00e1n con el robot bien encuadrado. En el repositorio hay sketches que no se basan en la librer\u00eda Otto sino que gestionan los servos directamente. En estos casos la gesti\u00f3n del trim tambi\u00e9n se har\u00e1 directamente, ya que desafortunadamente las posiciones de los trim en la EEPROM no coinciden con los que hace la librer\u00eda Otto, para evitar tener que regrabar sus valores en la EEPROM cada vez que pasemos de un tipo a otro de sketch. Por ejemplo en el sketch Otto_smooth_criminal, que no utiliza la librer\u00eda Otto, los trim se leen de la EEPROM en orden inverso. Por tanto, ser\u00e1 mejor desactivar su lectura y escribir los valores de trim directamente en el c\u00f3digo. As\u00ed: 1 2 3 4 5 6 #define EEPROM_TRIM false // Activate to take callibration data from internal memory #define TRIM_RR 6 #define TRIM_RL -3 #define TRIM_YR 9 #define TRIM_YL 3","title":"Calibraci\u00f3n"},{"location":"2018-05-05-otto.html#programacion","text":"De entre los varios sketches de ejemplo que vienen en el repositorio, el m\u00e1s pr\u00e1ctico para empezar a hacer una programaci\u00f3n personalizada de Otto es el Otto_BASIC . En los comentarios que hay al principio se describen las funciones b\u00e1sicas de la librer\u00eda Otto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /*SOUNDS****************** * S_connection S_disconnection S_buttonPushed S_mode1 S_mode2 S_mode3 S_surprise S_OhOoh S_OhOoh2 S_cuddly * S_sleeping S_happy S_superHappy S_happy_short S_sad S_confused S_fart1 S_fart2 S_fart3 */ /*MOVEMENTS LIST************** * dir=1---> FORWARD/LEFT * dir=-1---> BACKWARD/RIGTH * T : amount of movement. HIGHER VALUE SLOWER MOVEMENT usually 1000 (from 600 to 1400) * h: height of mov. around 20 jump(steps=1, int T = 2000); walk(steps, T, dir); turn(steps, T, dir); bend (steps, T, dir); //usually steps =1, T=2000 shakeLeg (steps, T, dir); updown(steps, T, HEIGHT); swing(steps, T, HEIGHT); tiptoeSwing(steps, T, HEIGHT); jitter(steps, T, HEIGHT); (small T) ascendingTurn(steps, T, HEIGHT); moonwalker(steps, T, HEIGHT,dir); crusaito(steps, T, HEIGHT,dir); flapping(steps, T, HEIGHT,dir); /*GESTURES LIST*************** OttoHappy OttoSuperHappy OttoSad OttoSleeping OttoFart OttoConfused OttoLove OttoAngry OttoFretful OttoMagic OttoWave OttoVictory OttoFail*/ En setup se hace una inicializaci\u00f3n b\u00e1sica de la librer\u00eda Otto y se emite un sonido por el buzzer. Luego en el loop se ha programado una sencilla funci\u00f3n para que Otto camine hacia delante hasta que localice un obst\u00e1culo a menos de 15cm y d\u00e9 unos pasos hacia atr\u00e1s y gire. 1 2 3 4 5 6 7 8 9 10 11 12 13 //-- Function to avoid obstacles void obstacleMode (){ distance = Otto . getDistance (); if ( distance < 15 ){ Otto . sing ( S_surprise ); Otto . walk ( 2 , 1300 , - 1 ); Otto . turn ( 3 , 1000 , - 1 ); delay ( 50 ); } else { Otto . walk ( 2 , 1000 , 1 ); } } Es \u00fatil aprovechar la funcionalidad del sensor de distancia para disparar el comportamiento de Otto que queremos programar. En otro caso todo lo que programemos dentro de la funci\u00f3n loop se ejecutar\u00e1 sin parar. As\u00ed por ejemplo, imitando la funci\u00f3n obstacleMode , un ejemplo de loop en el que haremos que cuando pongamos la mano delante, Otto avance un par de pasos, haga el moonwalk hacia la derecha, d\u00e9 un peque\u00f1o salto y se detenga ejecutando el gesto de victoria ser\u00eda: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void loop () { distance = Otto . getDistance (); if ( distance < 15 ){ Otto . walk ( 2 , 1000 , 1 ); Otto . home (); Otto . moonwalker ( 3 , 1000 , 25 , - 1 ); Otto . home (); Otto . jump ( 1 , 1000 ); Otto . home (); Otto . playGesture ( OttoVictory ); Otto . home (); } else { Otto . home (); } }","title":"Programaci\u00f3n"},{"location":"2018-06-13-crankshaft.html","text":"Se describe a continuaci\u00f3n el montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D (2012), en sustituci\u00f3n del radio CD que llevaba de serie, para ser utilizada como terminal compatible de AndroidAuto. La pantalla consiste en la oficial t\u00e1ctil de 7\" de la fundaci\u00f3n Raspberry Pi que tiene aproximadamente las medidas del hueco 2DIN que deja el radio CD del coche. Para su sujecci\u00f3n en el hueco de la radio se crean un par de piezas que se fabrican con una impresora 3D. Componentes \u00b6 Extractor radio Raspberry Pi 3 Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi Micr\u00f3fono USB Circuito de alimentaci\u00f3n Tarjeta microSD LED Resistencia 220\u2126 4x Tornillo M3x10 Cable con conector JST Cables de pin hembra-hembra Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D Preparaci\u00f3n sistema \u00b6 El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed . Transferimos la imagen a la microSD con un programa como Etcher . Retirando el radio CD \u00b6 Esto es lo que vamos a perder: Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar. Circuito de alimentaci\u00f3n \u00b6 La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente. Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo). Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n. Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro ) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas. Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD: GND (cable negro) +12V constantes (cable amarillo) +12V contacto (cable rojo) Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os. En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST ) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo. Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry. El resultado final es \u00e9ste: Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja. Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen. Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup . Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta /etc/switch.sh , d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: 1 /etc/switch.sh & El script es \u00e9ste: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo). Montaje de Raspberry Pi sobre pantalla \u00b6 La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto: El pineado es como sigue: Pantalla: 5V <-> PIN#02 :Raspberry Pantalla: GND <-> PIN#06 :Raspberry Pantalla: SCL <-> PIN#05 :Raspberry Pantalla: SDA <-> PIN#03 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch). Cableado \u00b6 Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente: Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente: Toma 12V constantes Toma 12V contacto Toma de masa Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry Conector JST de alimentaci\u00f3n de Raspberry Pi. Micr\u00f3fono USB conectado a Raspberry Pi. Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. (Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. Sujecci\u00f3n pantalla a consola coche \u00b6 Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente: https://www.thingiverse.com/thing:3162930 B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar. Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed: Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte. A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED. La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita. El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona). Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol. La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado. Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.","title":"2018-10-19 Crankshaft - AndroidAuto sobre Raspberry Pi"},{"location":"2018-06-13-crankshaft.html#componentes","text":"Extractor radio Raspberry Pi 3 Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi Micr\u00f3fono USB Circuito de alimentaci\u00f3n Tarjeta microSD LED Resistencia 220\u2126 4x Tornillo M3x10 Cable con conector JST Cables de pin hembra-hembra Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D","title":"Componentes"},{"location":"2018-06-13-crankshaft.html#preparacion-sistema","text":"El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed . Transferimos la imagen a la microSD con un programa como Etcher .","title":"Preparaci\u00f3n sistema"},{"location":"2018-06-13-crankshaft.html#retirando-el-radio-cd","text":"Esto es lo que vamos a perder: Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar.","title":"Retirando el radio CD"},{"location":"2018-06-13-crankshaft.html#circuito-de-alimentacion","text":"La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente. Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo). Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n. Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro ) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas. Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD: GND (cable negro) +12V constantes (cable amarillo) +12V contacto (cable rojo) Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os. En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST ) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo. Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry. El resultado final es \u00e9ste: Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja. Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen. Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup . Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta /etc/switch.sh , d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: 1 /etc/switch.sh & El script es \u00e9ste: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo).","title":"Circuito de alimentaci\u00f3n"},{"location":"2018-06-13-crankshaft.html#montaje-de-raspberry-pi-sobre-pantalla","text":"La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto: El pineado es como sigue: Pantalla: 5V <-> PIN#02 :Raspberry Pantalla: GND <-> PIN#06 :Raspberry Pantalla: SCL <-> PIN#05 :Raspberry Pantalla: SDA <-> PIN#03 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch).","title":"Montaje de Raspberry Pi sobre pantalla"},{"location":"2018-06-13-crankshaft.html#cableado","text":"Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente: Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente: Toma 12V constantes Toma 12V contacto Toma de masa Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry Conector JST de alimentaci\u00f3n de Raspberry Pi. Micr\u00f3fono USB conectado a Raspberry Pi. Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. (Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas.","title":"Cableado"},{"location":"2018-06-13-crankshaft.html#sujeccion-pantalla-a-consola-coche","text":"Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente: https://www.thingiverse.com/thing:3162930 B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar. Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed: Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte. A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED. La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita. El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona). Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol. La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado. Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.","title":"Sujecci\u00f3n pantalla a consola coche"},{"location":"2018-10-19-crankshaft.html","text":"Se describe a continuaci\u00f3n el montaje de una Raspberry Pi con pantalla t\u00e1ctil de 7\" en la consola de un Opel Corsa modelo D (2012), en sustituci\u00f3n del radio CD que llevaba de serie, para ser utilizada como terminal compatible de AndroidAuto. La pantalla consiste en la oficial t\u00e1ctil de 7\" de la fundaci\u00f3n Raspberry Pi que tiene aproximadamente las medidas del hueco 2DIN que deja el radio CD del coche. Para su sujecci\u00f3n en el hueco de la radio se crean un par de piezas que se fabrican con una impresora 3D. Componentes \u00b6 Extractor radio Raspberry Pi 3 Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi Micr\u00f3fono USB Circuito de alimentaci\u00f3n Tarjeta microSD LED Resistencia 220\u2126 4x Tornillo M3x10 Cable con conector JST Cables de pin hembra-hembra Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D Preparaci\u00f3n sistema \u00b6 El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed . Transferimos la imagen a la microSD con un programa como Etcher . Retirando el radio CD \u00b6 Esto es lo que vamos a perder: Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar. Circuito de alimentaci\u00f3n \u00b6 La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente. Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo). Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n. Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro ) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas. Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD: GND (cable negro) +12V constantes (cable amarillo) +12V contacto (cable rojo) Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os. En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST ) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo. Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry. El resultado final es \u00e9ste: Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja. Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen. Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup . Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta /etc/switch.sh , d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: 1 /etc/switch.sh & El script es \u00e9ste: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo). La instalaci\u00f3n del script se hizo desde un ordenador con Linux montando la tarjeta en el sistema. Para hacerlo sobre el propio Crankshaft en ejecuci\u00f3n hay que tener en cuenta que en las \u00faltimas versiones la microSD est\u00e1 montada en modo de s\u00f3lo lectura para evitar corrupciones de la misma durante apagados repentinos. Para montar en modo escritura hay que ejecutar uno de estos dos comandos en funci\u00f3n de la partici\u00f3n que queramos modificar: 1 2 crankshaft filesystem boot unlock crankshaft filesystem system unlock Montaje de Raspberry Pi sobre pantalla \u00b6 La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto: El pineado es como sigue: Pantalla: 5V <-> PIN#02 :Raspberry Pantalla: GND <-> PIN#06 :Raspberry Pantalla: SCL <-> PIN#05 :Raspberry Pantalla: SDA <-> PIN#03 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch). Cableado \u00b6 Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente: Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente: Toma 12V constantes Toma 12V contacto Toma de masa Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry Conector JST de alimentaci\u00f3n de Raspberry Pi. Micr\u00f3fono USB conectado a Raspberry Pi. Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. (Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. Sujecci\u00f3n pantalla a consola coche \u00b6 Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente: https://www.thingiverse.com/thing:3162930 B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar. Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed: Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte. A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED. La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita. El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona). Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol. La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado. Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.","title":"2018-10-18 Crankshaft - AndroidAuto sobre Raspberry Pi"},{"location":"2018-10-19-crankshaft.html#componentes","text":"Extractor radio Raspberry Pi 3 Pantalla de 7\" t\u00e1ctil oficial Raspberry Pi Micr\u00f3fono USB Circuito de alimentaci\u00f3n Tarjeta microSD LED Resistencia 220\u2126 4x Tornillo M3x10 Cable con conector JST Cables de pin hembra-hembra Piezas pl\u00e1sticas de sujecci\u00f3n impresas en 3D","title":"Componentes"},{"location":"2018-10-19-crankshaft.html#preparacion-sistema","text":"El sistema que cargaremos en la tarjeta microSD va a ser una versi\u00f3n especial de Raspbian con el paquete OpenAuto preinstalado que se llama Crankshaft y cuya im\u00e1gen puede descargarse de aqu\u00ed . Transferimos la imagen a la microSD con un programa como Etcher .","title":"Preparaci\u00f3n sistema"},{"location":"2018-10-19-crankshaft.html#retirando-el-radio-cd","text":"Esto es lo que vamos a perder: Para extraerlo necesitamos la herramienta que se incluye en la lista de componentes, que se introduce por los agujeros que hay a ambos lados (en la foto, los del lado izquierdo est\u00e1n tapados por el control remoto del manos libres y el tag NFC). El radio CD saldr\u00e1 limpiamente salvo por los cables de la antena y el conector principal que tendremos que desconectar.","title":"Retirando el radio CD"},{"location":"2018-10-19-crankshaft.html#circuito-de-alimentacion","text":"La correcta alimentaci\u00f3n de la Raspberry Pi a partir de la bater\u00eda del coche supone uno de los problemas m\u00e1s complejos de resolver en este proyecto. M\u00e1s adelante planteamos los puntos conflictivos. Empezaremos localizando en el conector del radio CD los terminales de masa (GND), +12V constantes y de +12V asociados al contacto. Para empezar el terminal de +12V asociados al contacto no parece estar presente. Seguramente el coche informa al Radio CD de que el contacto se ha quitado por medio del CAN bus. Afortunadamente mi coche tra\u00eda montado de serie un manos libres Parrot en cuya instalaci\u00f3n se hizo una conexi\u00f3n con los 12V asociados al contacto en el mazo de cables del veh\u00edculo. En otro caso tocar\u00e1 empalmar un cable en alg\u00fan lugar donde sepamos que existe esa se\u00f1al (en el conector de mechero por ejemplo). Una vez localizados los tres cables indicados, podemos plantear la alimentaci\u00f3n de muchas formas. Incialmente opt\u00e9 por la v\u00eda simple y compr\u00e9 un peque\u00f1o y barato circuito conversor de 12V a 5V (en realidad la salida es regulable entre 0.8V y 20V) y lo conect\u00e9 directamente al cable de contacto. De esta forma al dar contacto en el coche, la Raspberry Pi se encend\u00eda y al quitarlo se apagaba. Funcion\u00f3 muy bien, pero este montaje tiene el inconveniente de que si no se apaga previamente la Raspberry desde los men\u00fas, se corre el riesgo de que el sistema instalado en la microSD se corrompa. Pens\u00e9 que recordar\u00eda hacerlo cada vez que fuera a parar el coche, pero la realidad fue que aproximadamente la mitad de las veces olvidaba hacerlo, as\u00ed que pas\u00e9 a un sistema m\u00e1s sofisticado. Creo que las \u00faltimas versiones de Crankshaft montan la tarjeta microSD en modo s\u00f3lo lectura, por lo que las desconexiones abruptas puede que en realidad no sean un problema, pero me quedo m\u00e1s tranquilo con el montaje que adopt\u00e9 posteriormente y que describo a continuaci\u00f3n. Me hice con el circuito de Mausberry Circuits que hay en la lista de componentes. Decir que se agota f\u00e1cilmente. De hecho cuando fui a comprarlo no estaba disponible, pero me apunt\u00e9 a la notificaci\u00f3n por mail que informa cuando vuelve a haber stock y aproximadamente en un mes pude adquirirlo. Hay varios circuitos alternativos (como \u00e9ste otro ) pero el de Mausberry Circuits me gusta m\u00e1s porque tiene un doble canal de comunicaci\u00f3n con la Raspberry de manera que no s\u00f3lo avisa a \u00e9sta de que debe apagarse controladamente, sino que cuando se da cuenta de que ya lo ha hecho, corta la alimentaci\u00f3n completamente. Otros circuitos mantienen la alimentaci\u00f3n, lo que produce un consumo de standby que en mis mediciones ronda los 50mA, lo que puede drenar la bater\u00eda en alrededor de 4 semanas. Las conexiones de entrada al Car Switch de Mausberry Circuits ser\u00e1n pues las 3 mencionadas antes, que debemos localizar en el hueco de la consola que deja el radio CD: GND (cable negro) +12V constantes (cable amarillo) +12V contacto (cable rojo) Comentar en este punto que es muy recomendable situar un fusible en la toma o tomas de 12V que utilicemos del coche. Afortunadamente contaba con varios cables con fusible integrado de viejas instalaciones de manos libres que he acumulado con los a\u00f1os. En cuanto a las salidas, los 5V que necesitamos para la Raspberry los podemos coger de uno de los dos puertos USB pero yo prefer\u00ed soldar cables tanto en el Car Switch como en la Raspberry. Primero para evitar la aparatosidad de un cable microUSB en el interior del salpicadero y segundo para evitar que se produzcan desconexiones con las vibraciones del coche. As\u00ed pues sold\u00e9 un cable con conector r\u00e1pido (de tipo JST ) a las salidas 5V y GND que se ven en la parte inferior derecha de la foto del Car Switch. Sold\u00e9 tambi\u00e9n en paralelo en estos mismos pines un LED con su correspondiente resistencia de protecci\u00f3n (la resistencia de 220\u2126 que se indicaba en la lista de componentes) para as\u00ed tener indicaci\u00f3n visual de si el Car Switch ha cortado definitivamente la alimentaci\u00f3n y poder abandonar el coche tranquilo. Por \u00faltimo colocamos dos cables en los pines IN y OUT de la parte superior derecha que m\u00e1s adelante conectaremos el GPIO de la Raspberry. El resultado final es \u00e9ste: Una de las piezas dise\u00f1adas para imprimir en 3D que enlazo m\u00e1s adelante, es una caja para proteger el conjunto del Car Switch y sus conexiones. La caja tiene una peque\u00f1a ventana que queda a la altura de uno de los dos puertos USB. Conectando un alargador USB (hembra-macho) a trav\u00e9s de ese hueco, aseguramos que el circuito no se mueva del interior de la caja. Este cable alargador lo pas\u00e9 hacia la parte baja junto con el cable USB normal donde conectaremos el tel\u00e9fono, para as\u00ed tener un puerto de carga USB normal \"para invitados\" o para cualquier otra necesidad (por ejemplo carga r\u00e1pida del m\u00f3vil, ya que el Car Switch es capaz de dar 3A). En caso de no situar este cable alargador, se recomienda utilizar alg\u00fan tipo de cinta para evitar que el Car Switch se salga de la caja. Por \u00faltimo, el otro extremo del conector de alimentaci\u00f3n (JST) se suelda en la Raspberry Pi en los puntos designados con PP2 (+5V; en la foto el r\u00f3tulo est\u00e1 tapado por el propio cable) y PP5 (GND). Las siguientes fotos corresponden a la Raspberry Pi 3 Model B. En el Model B+ he podido comprobar que los puntos est\u00e1n en la misma posici\u00f3n. En este art\u00edculo se puede consultar el esquem\u00e1tico que detalla los varios puntos de alimentaci\u00f3n que existen. Para que el circuito Car Switch y la Raspberry Pi se comuniquen, adem\u00e1s de situar los dos cables de pin, hay que instalar un script en el sistema de la Raspberry para que monitorice el pin que le informa del estado del contacto del coche. El sistema que instalamos en uno de los primeros apartados (Crankshaft) est\u00e1 basado en Raspbian, as\u00ed que se puede instalar el script siguiendo las instrucciones correspondientes a este sistema en la secci\u00f3n \"Installing the script\" de la p\u00e1gina Car Setup . Tambi\u00e9n se puede instalar manualmente copiando el script en la ruta /etc/switch.sh , d\u00e1ndole permisos de ejecuci\u00f3n y a\u00f1adiendo lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: 1 /etc/switch.sh & El script es \u00e9ste: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done En el script podemos ver los pines del GPIO que utilizaremos y al que por tanto conectaremos los dos cables de pin que vienen del Car Switch: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su nombre, no con su n\u00famero (una confusi\u00f3n muy habitual). En la siguiente im\u00e1gen los nombres est\u00e1n en el exterior del rect\u00e1ngulo rojo y los n\u00fameros en el interior (rodeados a su vez por un c\u00edrculo). La instalaci\u00f3n del script se hizo desde un ordenador con Linux montando la tarjeta en el sistema. Para hacerlo sobre el propio Crankshaft en ejecuci\u00f3n hay que tener en cuenta que en las \u00faltimas versiones la microSD est\u00e1 montada en modo de s\u00f3lo lectura para evitar corrupciones de la misma durante apagados repentinos. Para montar en modo escritura hay que ejecutar uno de estos dos comandos en funci\u00f3n de la partici\u00f3n que queramos modificar: 1 2 crankshaft filesystem boot unlock crankshaft filesystem system unlock","title":"Circuito de alimentaci\u00f3n"},{"location":"2018-10-19-crankshaft.html#montaje-de-raspberry-pi-sobre-pantalla","text":"La pantalla que utilizaremos tiene un soporte para la Raspberry Pi en la parte trasera. Atornillaremos los separadores y colocaremos el cable de cinta que une la pantalla con el conector Display de la Raspberry. Falta colocar unos cables de pin para alimentar y comunicar la pantalla con la Raspberry, cosa que se puede hacer con simples cables de pin hembra-hembra (que de hecho vienen con la pantalla). Para evitar desconexiones por las vibraciones de la marcha del coche, en lugar de utilizar los cables de pin prepar\u00e9 un peque\u00f1o cable con un par de tiras de pin hembra (una simple para el lado de la pantalla y otra doble para el lado de la Raspberry). El resultado es m\u00e1s compacto y seguro y tiene este aspecto: El pineado es como sigue: Pantalla: 5V <-> PIN#02 :Raspberry Pantalla: GND <-> PIN#06 :Raspberry Pantalla: SCL <-> PIN#05 :Raspberry Pantalla: SDA <-> PIN#03 :Raspberry En el listado anterior hemos indicado los pines del GPIO de Raspberry con su n\u00famero, no con su nombre (al contrario de cuando hemos descrito los cables de pin que comunican con Car Switch).","title":"Montaje de Raspberry Pi sobre pantalla"},{"location":"2018-10-19-crankshaft.html#cableado","text":"Se describe a continuaci\u00f3n el conjunto de conexiones que haremos entre todos los componentes justo antes de hacer la sujecci\u00f3n final de la pantalla que se describe en el apartado siguiente: Conexi\u00f3n del Car Switch a las tomas de alimentaci\u00f3n del coche tal y como hemos comentado en el apartado correspondiente: Toma 12V constantes Toma 12V contacto Toma de masa Conexi\u00f3n de pines entre Car Switch y Raspberry Pi tambi\u00e9n descrito antes: Car Switch: IN <-> GPIO24 :Raspberry Car Switch: OUT <-> GPIO23 :Raspberry Conector JST de alimentaci\u00f3n de Raspberry Pi. Micr\u00f3fono USB conectado a Raspberry Pi. Cable micro USB (o type-C en mi caso) conectado a Raspberry Pi y que pasaremos por el interior de la consola para poder conectar el m\u00f3vil en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas. (Opcional) Cable alargador USB (macho-hembra) conectado a Car Switch y que pasaremos por el interior de la consola para tener un puerto de carga r\u00e1pido en la zona de la bandeja sujeta vasos que hay delante de la palanca de marchas.","title":"Cableado"},{"location":"2018-10-19-crankshaft.html#sujeccion-pantalla-a-consola-coche","text":"Para fijar el conjunto pantalla-Raspberry al hueco de la consola dejado por el radio CD, utilizaremos unas piezas impresas en 3D. El enlace para descargar los STL's (y scad por si se quieren modificar) es el siguiente: https://www.thingiverse.com/thing:3162930 B\u00e1sicamente son dos piezas, la que fija la pantalla al hueco y un marco para esconder los huecos que quedan alrededor de la pantalla y para que el conjunto se integre est\u00e9ticamente en la consola del coche. Hay dos versiones de la pieza que fija la pantalla, una completa y otra dividida en varias para facilitar su impresi\u00f3n sin necesidad de soportes. En caso de imprimir la versi\u00f3n dividida en varias piezas (se recomienda), no es necesario pegar las parte ya que por su disposici\u00f3n se apoyan unas a otras sin que ocurra pr\u00e1cticamente desplazamiento. Una aclaraci\u00f3n sobre una pieza que puede parecer extra\u00f1a, me refiero a una estrecha y sobre todo fina l\u00e1mina de unos 10cm de largo. Sirve para equilibrar el apoyo de la pantalla, que en el lado opuesto a donde se coloca esta pieza (el izquierdo mir\u00e1ndola de frente), tiene una l\u00e1mina (creo que tiene que ver con el digitalizador t\u00e1ctil) que sobresale por este lado. Al ser una l\u00e1mina tan fina, si se prefiere se puede obviar. Una vez aplicada la pieza o piezas a la pantalla, queda as\u00ed: Los tornillos utilizados son M3x10. La pieza soporte queda fija en el hueco por las 3 leng\u00fcetas superiores y la inferior m\u00e1s larga. La forma de extraer el conjunto es introducir una esp\u00e1tula como las que se utilizan para untar la mantequilla por el hueco que hay cerca de la leng\u00fceta inferior. Haciendo palanca de manera que la leng\u00fceta se desenganche, y haciendo bascular el conjunto desde abajo, deber\u00eda ser posible sacar la pantalla y su soporte. A ambos lados del soporte y cerca del borde superior, quedan dos huecos por los que podremos sacar los cables del micr\u00f3fono y el LED. La electr\u00f3nica del micr\u00f3fono comprado est\u00e1 en el conector USB, lo que lo hace aparatoso y grande. Para evitar que el cable chocase con la pared interior del hueco, se modific\u00f3 la salida del cable para hacerla acodada. Adem\u00e1s se cort\u00f3 el cable que s\u00f3lo necesitamos que tenga unos 20cm y se aprovech\u00f3 para retirar el chasis del micr\u00f3fono (el peque\u00f1o cilindro met\u00e1lico que se ve en la foto) que no se necesita. El resultado de la primera versi\u00f3n del marco (todav\u00eda sin el LED que incorpor\u00e9 al cambiar el circuito de alimentaci\u00f3n) puede verse a continuaci\u00f3n. Es conveniente imprimir a 0,1mm de capa debido al \u00e1ngulo tan peque\u00f1o que tienen las capas superiores del marco (por la extra\u00f1a forma de la consola del Corsa en esa zona). Por \u00faltimo, comentar que la primera versi\u00f3n del marco impresa en PLA se derriti\u00f3 una tarde que el coche qued\u00f3 aparcado al sol. La soluci\u00f3n consisti\u00f3 en imprimir las piezas en ABS. Fue mucho m\u00e1s dif\u00edcil de imprimir, pero ciertamente este material tiene ventajas como poder lijar la pieza (y as\u00ed hacer desaparecer el estriado del cambio de capa) y por supuesto resistir sin problemas el calor que se acumula al exponer el coche al sol durante horas. El resultado de la segunda versi\u00f3n en ABS lijado. Se ofrecen dos versiones del marco, una en una pieza y otra en dos que luego habr\u00e1 que pegar, ya que es una pieza ancha que puede no entrar en muchas camas de impresoras 3D (como fue mi caso). La sujecci\u00f3n del marco se har\u00e1 por medio de unos pocos puntos de cinta de doble cara.","title":"Sujecci\u00f3n pantalla a consola coche"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html","text":"Instalaci\u00f3n de Raspberry Pi sobre impresora 3D Anet A8 para ejecutar Octoprint. Im\u00e1gen de sistema \u00b6 Aunque es posible instalar manualmente Octoprint sobre una instalaci\u00f3n Raspbian est\u00e1ndar, existe una im\u00e1gen para grabar directamente sobre la tarjeta microSD llamada OctoPi . Dado que la Raspberry Pi y por tanto su sistema se va dedicar exclusivamente para esta funci\u00f3n, se prefiere esta alternativa. Modelo de Raspberry Pi elegido \u00b6 A pesar de que la utilizaci\u00f3n de una Raspberry Pi Zero no est\u00e1 recomendada por problemas de rendimiento que pueden terminar afectando a las impresiones, en mi experiencia no he sufrido ning\u00fan percance y la forma y bajo consumo de la Raspberry Pi Zero (que permite alimentarla desde la misma fuente de la impresora) resulta perfecta para esta instalaci\u00f3n. Sospecho que los posibles problemas est\u00e1n relacionados con el uso de la webcam. Eligiendo la c\u00e1mara adecuada (que soporte MJPG de forma nativa) y no abusando del v\u00eddeo en streaming creo que se deja un margen de seguridad adecuado para poder aprovechar las ventajas de la versi\u00f3n Zero W de la Raspberry Pi. Conexi\u00f3n serie entre Anet A8 y Raspberry Pi \u00b6 Octoprint se comunica con la impresora por medio de una conexi\u00f3n serie. Esta conexi\u00f3n puede f\u00e1cilmente establecerse a trav\u00e9s de USB. De hecho el puerto serie del microcontrolador Atmel que gobierna la impresora est\u00e1 puenteado a un adaptador serie/USB que hay sobre la placa (CH340G). Utilizar esta conexi\u00f3n USB resulta muy aparatoso por el tipo de conectores que implica, as\u00ed que se ha preferido liberar el puerto serie del microcontrolador para poder utilizarlo directamente. Estudiando el esquem\u00e1tico de la placa se ve que las siguientes secciones son las implicadas en este asunto (se han marcado en azul las zonas de m\u00e1s inter\u00e9s): Podemos ver c\u00f3mo el puerto serie del microcontrolador (pines AOFI y AIFO ) est\u00e1 puenteado al chip CH340G (U6) por medio de un par de resistencias de 0\u2126 que act\u00faan como puente. Tendremos que retirar de la placa dichas resistencias R52 y R53. Una vez hecho, soldaremos unos pines en la ubicaci\u00f3n J8 de la placa (al menos la m\u00eda ven\u00eda con los agujeros en la PCB sin los pines soldados). En esta foto de alta resoluci\u00f3n de la placa podemos ver bien tanto la ubicaci\u00f3n de los puentes J8 como las resistencias que hay que retirar: S\u00f3lo queda poner un par de jumpers entre los pines siguientes de J8: 3-5 4-6 Con esto conseguimos que el puerto serie del microcontrolador aparezca disponible en el conector J3. Si antes utiliz\u00e1bamos el puerto USB de la PCB para alg\u00fan cometido, hay que entender que al realizar esta modificaci\u00f3n deja de estar disponible, pero tenemos la opci\u00f3n de reactivarlo cambiando los jumpers a la siguiente disposici\u00f3n: 1-3 2-4 Como la orientaci\u00f3n de la PCB en la impresora es distinta a la del esquem\u00e1tico, se muestra ahora con claridad el resultado final, es decir c\u00f3mo deben disponerse los dos jumpers para que el puerto serie aparezca en el conector J3 y el hueco dejado por las resistencias R52 y R53: Como vemos los puentes deben apuntar hacia el r\u00f3tulo BLE. Seguramente se designa as\u00ed porque la sustituci\u00f3n habitual del puerto USB ser\u00eda un adaptador Bluetooth que podr\u00eda adaptarse al conector J3. S\u00f3lo queda localizar en el conector J3 los pines del puerto serie del microcontrolador recien redirijidos y los de alimentaci\u00f3n (5V y GND). En este punto podr\u00edamos conectar la Raspberry Pi con simples cables de pin, pero dada la cercan\u00eda en el GPIO de la Raspberry Pi del puerto serie y de los terminales de alimentaci\u00f3n, me decid\u00ed a preparar una peque\u00f1a placa adaptadora para el conector J3 de la PCB de la impresora. El conector J3 de la impresora seg\u00fan el esquem\u00e1tico tiene el siguiente pineado: De nuevo es necesario orientar el conector correctamente para interpretar el esquem\u00e1tico. Para evitar confusiones se indica a continuaci\u00f3n la numeraci\u00f3n de los pines sobre el conector: La conexi\u00f3n de estos pines con los del GPIO de la Raspberry Pi ser\u00e1 as\u00ed: J3: 1 (J3_TX) <-> PIN#08 (GPIO14 UART0_TXD) :Raspberry J3: 2 (J3_RX) <-> PIN#10 (GPIO15 UART0_RXD) :Raspberry J3: 4 (+5V) <-> PIN#04 (5V) :Raspberry J3: 8 (GND) <-> PIN#06 (Ground) :Raspberry Puede generar confusi\u00f3n ver que las conexiones entre ambos conectores son TX-TX y RX-RX, cuando las conexiones TX y RX deben cruzarse. La confusi\u00f3n viene de que en el conector J3 lo que se indica es a d\u00f3nde se debe conectar y no el terminal del puerto serie del microcontrolador. Si tiramos del hilo en el esquem\u00e1tico vemos que por ejemplo el pin 1 del conector J3 sigue la secuencia: 1 J3_TX - AIFO - RXD0 Por tanto en realidad s\u00ed estamos cruzando las se\u00f1ales. El adaptador realizado es el siguiente: A continuaci\u00f3n se puede ver soldado sobre la Raspberry: Finalmente montado sobre la PCB de la impresora queda as\u00ed: Desactivaci\u00f3n de BT y activaci\u00f3n de puerto serie \u00b6 La Raspberry Pi Zero W (en Raspberry Pi 3 sucede lo mismo) trae un adaptador Bluetooth que tanto en la distribuci\u00f3n Raspbian como en la im\u00e1gen OctoPi utilizada est\u00e1 conectado precisamente a los pines #08 y #10 a los que hemos conectado el puerto serie de la impresora. Antes de continuar necesitamos liberar esta conexi\u00f3n. Para ello debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: 1 dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: 1 sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: Would you like a login shell to be accessible over serial? -> No Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos pasar a trabajar sobre la consola web de Octoprint a la que accederemos abriendo en un navegador la IP de la Raspberry. Configuraci\u00f3n conexi\u00f3n en Octoprint \u00b6 Por defecto Octoprint espera encontrar la impresora en un puerto USB de la Raspberry. Al haber cambiado a un puerto serie convencional, tenemos que ayudarle a encontrarlo. Para ello acudimos a Settings (llave inglesa) de Octoprint y en la secci\u00f3n Serial Connection a\u00f1adimos lo siguiente en el cuadro Additional serial ports : 1 /dev/ttyAMA0 Tras esto podremos volver a la ventana principal y seleccionar dicho puerto en el apartado Connection: Tras pulsar el bot\u00f3n Connect oiremos c\u00f3mo la impresora reacciona (al menos en la m\u00eda el ventilador de capa se revoluciona unos segundos, aunque tambi\u00e9n puede suceder por el firmware que tengo instalado) y ya podremos empezar a utilizar Octoprint. Webcam \u00b6 Un complemento muy bueno para Octoprint es una webcam para poder hacer un mejor seguimiento de las impresiones. Tras haber probado con una webcam convencional conectada por USB (aqu\u00ed se ve una de las ventajas de haberlo dejado libre al conectar la Raspberry a la impresora), me di cuenta de que la c\u00e1mara oficial de Raspberry se puede encontrar barata (4\u20ac) y resulta m\u00e1s adecuada. Adquiriendo dicha c\u00e1mara junto con la versi\u00f3n del cable especial para Raspberry Pi Zero , se puede montar f\u00e1cilmente al chasis de la impresora. En concreto para la Anet A8 se dise\u00f1a esta peque\u00f1a pieza: https://www.thingiverse.com/thing:3142521","title":"2018-10-20 Octoprint en Anet A8"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#imagen-de-sistema","text":"Aunque es posible instalar manualmente Octoprint sobre una instalaci\u00f3n Raspbian est\u00e1ndar, existe una im\u00e1gen para grabar directamente sobre la tarjeta microSD llamada OctoPi . Dado que la Raspberry Pi y por tanto su sistema se va dedicar exclusivamente para esta funci\u00f3n, se prefiere esta alternativa.","title":"Im\u00e1gen de sistema"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#modelo-de-raspberry-pi-elegido","text":"A pesar de que la utilizaci\u00f3n de una Raspberry Pi Zero no est\u00e1 recomendada por problemas de rendimiento que pueden terminar afectando a las impresiones, en mi experiencia no he sufrido ning\u00fan percance y la forma y bajo consumo de la Raspberry Pi Zero (que permite alimentarla desde la misma fuente de la impresora) resulta perfecta para esta instalaci\u00f3n. Sospecho que los posibles problemas est\u00e1n relacionados con el uso de la webcam. Eligiendo la c\u00e1mara adecuada (que soporte MJPG de forma nativa) y no abusando del v\u00eddeo en streaming creo que se deja un margen de seguridad adecuado para poder aprovechar las ventajas de la versi\u00f3n Zero W de la Raspberry Pi.","title":"Modelo de Raspberry Pi elegido"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#conexion-serie-entre-anet-a8-y-raspberry-pi","text":"Octoprint se comunica con la impresora por medio de una conexi\u00f3n serie. Esta conexi\u00f3n puede f\u00e1cilmente establecerse a trav\u00e9s de USB. De hecho el puerto serie del microcontrolador Atmel que gobierna la impresora est\u00e1 puenteado a un adaptador serie/USB que hay sobre la placa (CH340G). Utilizar esta conexi\u00f3n USB resulta muy aparatoso por el tipo de conectores que implica, as\u00ed que se ha preferido liberar el puerto serie del microcontrolador para poder utilizarlo directamente. Estudiando el esquem\u00e1tico de la placa se ve que las siguientes secciones son las implicadas en este asunto (se han marcado en azul las zonas de m\u00e1s inter\u00e9s): Podemos ver c\u00f3mo el puerto serie del microcontrolador (pines AOFI y AIFO ) est\u00e1 puenteado al chip CH340G (U6) por medio de un par de resistencias de 0\u2126 que act\u00faan como puente. Tendremos que retirar de la placa dichas resistencias R52 y R53. Una vez hecho, soldaremos unos pines en la ubicaci\u00f3n J8 de la placa (al menos la m\u00eda ven\u00eda con los agujeros en la PCB sin los pines soldados). En esta foto de alta resoluci\u00f3n de la placa podemos ver bien tanto la ubicaci\u00f3n de los puentes J8 como las resistencias que hay que retirar: S\u00f3lo queda poner un par de jumpers entre los pines siguientes de J8: 3-5 4-6 Con esto conseguimos que el puerto serie del microcontrolador aparezca disponible en el conector J3. Si antes utiliz\u00e1bamos el puerto USB de la PCB para alg\u00fan cometido, hay que entender que al realizar esta modificaci\u00f3n deja de estar disponible, pero tenemos la opci\u00f3n de reactivarlo cambiando los jumpers a la siguiente disposici\u00f3n: 1-3 2-4 Como la orientaci\u00f3n de la PCB en la impresora es distinta a la del esquem\u00e1tico, se muestra ahora con claridad el resultado final, es decir c\u00f3mo deben disponerse los dos jumpers para que el puerto serie aparezca en el conector J3 y el hueco dejado por las resistencias R52 y R53: Como vemos los puentes deben apuntar hacia el r\u00f3tulo BLE. Seguramente se designa as\u00ed porque la sustituci\u00f3n habitual del puerto USB ser\u00eda un adaptador Bluetooth que podr\u00eda adaptarse al conector J3. S\u00f3lo queda localizar en el conector J3 los pines del puerto serie del microcontrolador recien redirijidos y los de alimentaci\u00f3n (5V y GND). En este punto podr\u00edamos conectar la Raspberry Pi con simples cables de pin, pero dada la cercan\u00eda en el GPIO de la Raspberry Pi del puerto serie y de los terminales de alimentaci\u00f3n, me decid\u00ed a preparar una peque\u00f1a placa adaptadora para el conector J3 de la PCB de la impresora. El conector J3 de la impresora seg\u00fan el esquem\u00e1tico tiene el siguiente pineado: De nuevo es necesario orientar el conector correctamente para interpretar el esquem\u00e1tico. Para evitar confusiones se indica a continuaci\u00f3n la numeraci\u00f3n de los pines sobre el conector: La conexi\u00f3n de estos pines con los del GPIO de la Raspberry Pi ser\u00e1 as\u00ed: J3: 1 (J3_TX) <-> PIN#08 (GPIO14 UART0_TXD) :Raspberry J3: 2 (J3_RX) <-> PIN#10 (GPIO15 UART0_RXD) :Raspberry J3: 4 (+5V) <-> PIN#04 (5V) :Raspberry J3: 8 (GND) <-> PIN#06 (Ground) :Raspberry Puede generar confusi\u00f3n ver que las conexiones entre ambos conectores son TX-TX y RX-RX, cuando las conexiones TX y RX deben cruzarse. La confusi\u00f3n viene de que en el conector J3 lo que se indica es a d\u00f3nde se debe conectar y no el terminal del puerto serie del microcontrolador. Si tiramos del hilo en el esquem\u00e1tico vemos que por ejemplo el pin 1 del conector J3 sigue la secuencia: 1 J3_TX - AIFO - RXD0 Por tanto en realidad s\u00ed estamos cruzando las se\u00f1ales. El adaptador realizado es el siguiente: A continuaci\u00f3n se puede ver soldado sobre la Raspberry: Finalmente montado sobre la PCB de la impresora queda as\u00ed:","title":"Conexi\u00f3n serie entre Anet A8 y Raspberry Pi"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#desactivacion-de-bt-y-activacion-de-puerto-serie","text":"La Raspberry Pi Zero W (en Raspberry Pi 3 sucede lo mismo) trae un adaptador Bluetooth que tanto en la distribuci\u00f3n Raspbian como en la im\u00e1gen OctoPi utilizada est\u00e1 conectado precisamente a los pines #08 y #10 a los que hemos conectado el puerto serie de la impresora. Antes de continuar necesitamos liberar esta conexi\u00f3n. Para ello debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: 1 dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: 1 sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: Would you like a login shell to be accessible over serial? -> No Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos pasar a trabajar sobre la consola web de Octoprint a la que accederemos abriendo en un navegador la IP de la Raspberry.","title":"Desactivaci\u00f3n de BT y activaci\u00f3n de puerto serie"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#configuracion-conexion-en-octoprint","text":"Por defecto Octoprint espera encontrar la impresora en un puerto USB de la Raspberry. Al haber cambiado a un puerto serie convencional, tenemos que ayudarle a encontrarlo. Para ello acudimos a Settings (llave inglesa) de Octoprint y en la secci\u00f3n Serial Connection a\u00f1adimos lo siguiente en el cuadro Additional serial ports : 1 /dev/ttyAMA0 Tras esto podremos volver a la ventana principal y seleccionar dicho puerto en el apartado Connection: Tras pulsar el bot\u00f3n Connect oiremos c\u00f3mo la impresora reacciona (al menos en la m\u00eda el ventilador de capa se revoluciona unos segundos, aunque tambi\u00e9n puede suceder por el firmware que tengo instalado) y ya podremos empezar a utilizar Octoprint.","title":"Configuraci\u00f3n conexi\u00f3n en Octoprint"},{"location":"2018-10-20-Octoprint-en-Anet-A8.html#webcam","text":"Un complemento muy bueno para Octoprint es una webcam para poder hacer un mejor seguimiento de las impresiones. Tras haber probado con una webcam convencional conectada por USB (aqu\u00ed se ve una de las ventajas de haberlo dejado libre al conectar la Raspberry a la impresora), me di cuenta de que la c\u00e1mara oficial de Raspberry se puede encontrar barata (4\u20ac) y resulta m\u00e1s adecuada. Adquiriendo dicha c\u00e1mara junto con la versi\u00f3n del cable especial para Raspberry Pi Zero , se puede montar f\u00e1cilmente al chasis de la impresora. En concreto para la Anet A8 se dise\u00f1a esta peque\u00f1a pieza: https://www.thingiverse.com/thing:3142521","title":"Webcam"},{"location":"2018-11-03-cambio_router_lowi.html","text":"Sustituci\u00f3n de router Lowi por Xiaomi MiWiFi 3G con OpenWRT. Enlaces \u00b6 Cambiar Router Lowi H 500-S por otro Como conseguir admin del router Sercomm H500-s de Vodafone despu\u00e9s de la telecarga Procedimiento \u00b6 Apagar el ONT. Resetear el router manteniendo el bot\u00f3n de reset durante 20 segundos. Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: l033i-h500s Acceder a la pesta\u00f1a Staus & Support y dentro de ella seleccionar la secci\u00f3n Port Mirroring (abajo del todo). Introducir el comando -i ppp1 y pulsar Start . Conectamos el PC a la boca 1 del router, abrimos Wireshark y empezamos a caputurar el interfaz Ethernet ( eth0 normalmente). Encendemos el ONT y esperamos a tener salida a internet. Detenemos la captura y la guardamos. Buscamos un paquete de tipo HTTP/XML 200 OK que contenga la cadena InternetGatewayDevice.X_Management.LoginAccount.1.Password . \u00c9ste ser\u00e1 el nuevo password del usuario admin del router (en lugar del predeterminado l033i-h500s ). Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: El obtenido del par\u00e1metro InternetGatewayDevice.X_Management.LoginAccount.1.Password de la captura. Ir al men\u00fa Configuraci\u00f3n > WAN > WAN FIBER > FTTh-Data_NEBA y pinchar en el l\u00e1piz para editar. En la p\u00e1gina que aparece tenemos los par\u00e1metros de nuestra conexi\u00f3n. El \u00fanico dato que no podemos obtener de aqu\u00ed es el password ya que est\u00e1 encriptado. Hay que obtenerlo de la captura Wireshark, concretamente el par\u00e1metro con el identificador InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password . El resto de par\u00e1metros son: Description: FTTH-Data_NEBA Used For: Data only NAT: S\u00ed Firewall: S\u00ed 802.1P Priority [0-7]: 0 802.1Q VLAN ID [0-4094]: 24 Connection Type: PPPoE Username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. Password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. Service Name: Authentication Method: AUTO Connection Trigger: AlwaysOn LCP Echo request interval (sec): 10 LCP Echo retry times: 5 MTU [68-1500]: 1492 Idle Time (sec): 0 Obtain DNS Servers automatically: S\u00ed En el nuevo router introducimos estos datos. En un OpenWRT ser\u00eda en la secci\u00f3n Network > Interfaces > WAN > Edit . Introducimos los siguientes valores: Protocol: PPPeE PAP/CHAP username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. PAP/CHAP password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. A partir de aqu\u00ed los par\u00e1metros est\u00e1n en Advanced Settings . LCP echo failure threshold: 5 LCP echo interval: 10 Override MTU: 1492 Finalmente acudir a la secci\u00f3n Network > Switch para poner el VLAN ID 24 necesario para la conexi\u00f3n. Concretamente dejar la tabla que all\u00ed vemos de la siguiente forma: VLAN ID CPU (eth0) LAN 1 LAN 2 WAN 1 tagged untagged untagged off 24 tagged off off tagged","title":"2018-11-03 Cambio de router con Lowi"},{"location":"2018-11-03-cambio_router_lowi.html#enlaces","text":"Cambiar Router Lowi H 500-S por otro Como conseguir admin del router Sercomm H500-s de Vodafone despu\u00e9s de la telecarga","title":"Enlaces"},{"location":"2018-11-03-cambio_router_lowi.html#procedimiento","text":"Apagar el ONT. Resetear el router manteniendo el bot\u00f3n de reset durante 20 segundos. Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: l033i-h500s Acceder a la pesta\u00f1a Staus & Support y dentro de ella seleccionar la secci\u00f3n Port Mirroring (abajo del todo). Introducir el comando -i ppp1 y pulsar Start . Conectamos el PC a la boca 1 del router, abrimos Wireshark y empezamos a caputurar el interfaz Ethernet ( eth0 normalmente). Encendemos el ONT y esperamos a tener salida a internet. Detenemos la captura y la guardamos. Buscamos un paquete de tipo HTTP/XML 200 OK que contenga la cadena InternetGatewayDevice.X_Management.LoginAccount.1.Password . \u00c9ste ser\u00e1 el nuevo password del usuario admin del router (en lugar del predeterminado l033i-h500s ). Conectar con el router (http://192.168.0.1) y entrar con el usuario: user: admin pwd: El obtenido del par\u00e1metro InternetGatewayDevice.X_Management.LoginAccount.1.Password de la captura. Ir al men\u00fa Configuraci\u00f3n > WAN > WAN FIBER > FTTh-Data_NEBA y pinchar en el l\u00e1piz para editar. En la p\u00e1gina que aparece tenemos los par\u00e1metros de nuestra conexi\u00f3n. El \u00fanico dato que no podemos obtener de aqu\u00ed es el password ya que est\u00e1 encriptado. Hay que obtenerlo de la captura Wireshark, concretamente el par\u00e1metro con el identificador InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password . El resto de par\u00e1metros son: Description: FTTH-Data_NEBA Used For: Data only NAT: S\u00ed Firewall: S\u00ed 802.1P Priority [0-7]: 0 802.1Q VLAN ID [0-4094]: 24 Connection Type: PPPoE Username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. Password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. Service Name: Authentication Method: AUTO Connection Trigger: AlwaysOn LCP Echo request interval (sec): 10 LCP Echo retry times: 5 MTU [68-1500]: 1492 Idle Time (sec): 0 Obtain DNS Servers automatically: S\u00ed En el nuevo router introducimos estos datos. En un OpenWRT ser\u00eda en la secci\u00f3n Network > Interfaces > WAN > Edit . Introducimos los siguientes valores: Protocol: PPPeE PAP/CHAP username: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Username de la captura. PAP/CHAP password: El obtenido del par\u00e1metro InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.2.Password de la captura. A partir de aqu\u00ed los par\u00e1metros est\u00e1n en Advanced Settings . LCP echo failure threshold: 5 LCP echo interval: 10 Override MTU: 1492 Finalmente acudir a la secci\u00f3n Network > Switch para poner el VLAN ID 24 necesario para la conexi\u00f3n. Concretamente dejar la tabla que all\u00ed vemos de la siguiente forma: VLAN ID CPU (eth0) LAN 1 LAN 2 WAN 1 tagged untagged untagged off 24 tagged off off tagged","title":"Procedimiento"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html","text":"Migraci\u00f3n del motor de apuntes de Rubi/Jekyll a Python/MkDocs. Procedimiento \u00b6 Renombro el antiguo repositorio construido con Jekyll de eduardofilo.github.io a eduardofilo.jekyll para dejar libre el repositorio que contendr\u00e1 el nuevo sitio. Creo directorio: 1 2 $ mkdir ~/git/eduardofilo.mkdocs $ cd ~/git/eduardofilo.mkdocs Creo entorno Python3 con pipenv: 1 $ pipenv install --three Instalo mkdocs, el tema Material y algunas extensiones : 1 $ pipenv install mkdocs pygments mkdocs-material Instalo versi\u00f3n beta de m\u00f3dulo pyyaml por un aviso de seguridad que da GitHub sobre la versi\u00f3n 3.13 que se instala normalmente. Para ello a\u00f1ado lo siguiente al fichero Pipfile en la secci\u00f3n [packages] . Tras ello ejecuto pipenv install : 1 pyyaml = \">=4.2b1\" Arranco shell en el entorno: 1 $ pipenv shell Creo el proyecto mkdocs desde el directorio anterior: 1 2 3 $ cd .. $ mkdocs new eduardofilo.mkdocs $ cd eduardofilo.mkdocs Copio los directorios con los contenidos del sitio Jekyll ( cursos , desarrollo , images , proyectos , sistemas y varios ) al directorio docs . Configuro el fichero mkdocs.yml con el siguiente contenido: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 # Project information site_name: Apuntes de eduardofilo site_description: Apuntes varios sobre algunas de las cosas que necesito recordar, principalmente sobre Desarrollo y Sistemas. site_author: Eduardo Moreno Lamana # Repository repo_name: 'eduardofilo.mkdocs' repo_url: https://github.com/eduardofilo/eduardofilo.mkdocs # Configuration use_directory_urls: false plugins: - search: lang: ['es'] theme: name: material logo: 'images/eduardofilo.png' language: es feature: tabs: true palette: primary: 'deep orange' accent: 'amber' # Customization extra: social: - type: github-alt link: https://github.com/eduardofilo - type: twitter link: https://twitter.com/eduardofilo - type: linkedin link: https://linkedin.com/in/edumoreno/ - type: tumblr link: https://eduardofilo.es - type: youtube link: https://www.youtube.com/c/EduardoMorenoLamana search: language: 'es' manifest: 'manifest.webmanifest' # Extensions markdown_extensions: - codehilite: linenums: true - toc: permalink: True - admonition Copio todos los ficheros del directorio _posts de Jekyll al directorio docs . Modifico cada uno de los posts que all\u00ed hay de la siguiente manera: Retiro los delimitadores del YAML, es decir los tres guiones que hay al principio y al final del bloque. Retiro las propiedad layout y published y a\u00f1ado una llamada summary . Genero estructura de navegaci\u00f3n en bloque nav: al final de mkdocs.yml Creo fichero CNAME dentro del directorio docs con el nombre del dominio personalizado. Creo repositorio en GitHub con nombre eduardofilo.github.io . Creo copia de trabajo del repsitorio anterior: 1 2 $ cd ~/git $ git clone git@github.com:eduardofilo/eduardofilo.github.io.git Finalmente publico el sitio ejecutando el siguiente comando desde el directorio de trabajo del repositorio anterior (hay que recordar que para que funcione el comando mkdocs hay que haber iniciado el entorno virtual antes con pipenv shell desde el directorio ~/git/eduardofilo.mkdocs ): 1 2 $ cd ~/git/eduardofilo.github.io $ mkdocs gh-deploy --config-file ../eduardofilo.mkdocs/mkdocs.yml --remote-branch master Falta crear un RSS con el feed que generaba Jekyll antiguamente. Enlaces documentaci\u00f3n \u00b6 Extensiones de Material for MkDocs Extensiones de MyMdonw","title":"2019-01-26 Conversi\u00f3n del sitio de Apuntes a MkDocs"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html#procedimiento","text":"Renombro el antiguo repositorio construido con Jekyll de eduardofilo.github.io a eduardofilo.jekyll para dejar libre el repositorio que contendr\u00e1 el nuevo sitio. Creo directorio: 1 2 $ mkdir ~/git/eduardofilo.mkdocs $ cd ~/git/eduardofilo.mkdocs Creo entorno Python3 con pipenv: 1 $ pipenv install --three Instalo mkdocs, el tema Material y algunas extensiones : 1 $ pipenv install mkdocs pygments mkdocs-material Instalo versi\u00f3n beta de m\u00f3dulo pyyaml por un aviso de seguridad que da GitHub sobre la versi\u00f3n 3.13 que se instala normalmente. Para ello a\u00f1ado lo siguiente al fichero Pipfile en la secci\u00f3n [packages] . Tras ello ejecuto pipenv install : 1 pyyaml = \">=4.2b1\" Arranco shell en el entorno: 1 $ pipenv shell Creo el proyecto mkdocs desde el directorio anterior: 1 2 3 $ cd .. $ mkdocs new eduardofilo.mkdocs $ cd eduardofilo.mkdocs Copio los directorios con los contenidos del sitio Jekyll ( cursos , desarrollo , images , proyectos , sistemas y varios ) al directorio docs . Configuro el fichero mkdocs.yml con el siguiente contenido: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 # Project information site_name: Apuntes de eduardofilo site_description: Apuntes varios sobre algunas de las cosas que necesito recordar, principalmente sobre Desarrollo y Sistemas. site_author: Eduardo Moreno Lamana # Repository repo_name: 'eduardofilo.mkdocs' repo_url: https://github.com/eduardofilo/eduardofilo.mkdocs # Configuration use_directory_urls: false plugins: - search: lang: ['es'] theme: name: material logo: 'images/eduardofilo.png' language: es feature: tabs: true palette: primary: 'deep orange' accent: 'amber' # Customization extra: social: - type: github-alt link: https://github.com/eduardofilo - type: twitter link: https://twitter.com/eduardofilo - type: linkedin link: https://linkedin.com/in/edumoreno/ - type: tumblr link: https://eduardofilo.es - type: youtube link: https://www.youtube.com/c/EduardoMorenoLamana search: language: 'es' manifest: 'manifest.webmanifest' # Extensions markdown_extensions: - codehilite: linenums: true - toc: permalink: True - admonition Copio todos los ficheros del directorio _posts de Jekyll al directorio docs . Modifico cada uno de los posts que all\u00ed hay de la siguiente manera: Retiro los delimitadores del YAML, es decir los tres guiones que hay al principio y al final del bloque. Retiro las propiedad layout y published y a\u00f1ado una llamada summary . Genero estructura de navegaci\u00f3n en bloque nav: al final de mkdocs.yml Creo fichero CNAME dentro del directorio docs con el nombre del dominio personalizado. Creo repositorio en GitHub con nombre eduardofilo.github.io . Creo copia de trabajo del repsitorio anterior: 1 2 $ cd ~/git $ git clone git@github.com:eduardofilo/eduardofilo.github.io.git Finalmente publico el sitio ejecutando el siguiente comando desde el directorio de trabajo del repositorio anterior (hay que recordar que para que funcione el comando mkdocs hay que haber iniciado el entorno virtual antes con pipenv shell desde el directorio ~/git/eduardofilo.mkdocs ): 1 2 $ cd ~/git/eduardofilo.github.io $ mkdocs gh-deploy --config-file ../eduardofilo.mkdocs/mkdocs.yml --remote-branch master Falta crear un RSS con el feed que generaba Jekyll antiguamente.","title":"Procedimiento"},{"location":"2019-01-26-conversion_apuntes_mkdocs.html#enlaces-documentacion","text":"Extensiones de Material for MkDocs Extensiones de MyMdonw","title":"Enlaces documentaci\u00f3n"},{"location":"2019-01-29-bloqueo_telsome.html","text":"Enlaces \u00b6 C\u00f3mo bloquear llamadas de determinados n\u00fameros Informe detallado de llamadas \u2013 CDR Procedimiento \u00b6 Vamos a describir c\u00f3mo impedir que se produzca la entrada de una llamada desde un n\u00famero determinado en el servicio de VoIP Telsome. T\u00edpicamente nos interesar\u00e1 esto para bloquear las llamadas comerciales SPAM. Necesitamos el n\u00famero que queremos bloquear. Si no lo recordamos o no tenemos registro de llamadas en el terminal, se puede consultar en la informaci\u00f3n detallada de las llamadas recibidas a trav\u00e9s del servicio. Para ello iniciar sesi\u00f3n en la cuenta Telsome con nuestras credenciales. Una vez dentro, navegar siguiendo la siguiente ruta: 1 Configuraci\u00f3n avanzada > Enlaces r\u00e1pidos > Costos de llamada All\u00ed encontraremos el detalle de todas las llamadas emitidas y recibidas. Una vez localizado el n\u00famero que queremos bloquear, navegaremos siguiendo la ruta: 1 2 Configuraci\u00f3n avanzada > Extensiones > (clic sobre nuestra extensi\u00f3n) > Telefon\u00eda > Reglas de llamadas entrantes All\u00ed rellenaremos el peque\u00f1o formulario con el r\u00f3tulo Agregar desv\u00edos sustituyendo el n\u00famero del ejemplo (999888777) por el que nos interese: En el formulario, el primer desplegable nos permite elegir el efecto que observar\u00e1 el llamante. En el ejemplo he seleccionado reproductor ocupado , pero tambi\u00e9n servir\u00edan las opciones reproductor congestionado o colgar . Una vez que pulsemos el bot\u00f3n OK se incorporar\u00e1 a la lista inferior y pasar\u00e1 a ser efectiva.","title":"2019-01-29 Bloqueo de llamadas entrantes en Telsome"},{"location":"2019-01-29-bloqueo_telsome.html#enlaces","text":"C\u00f3mo bloquear llamadas de determinados n\u00fameros Informe detallado de llamadas \u2013 CDR","title":"Enlaces"},{"location":"2019-01-29-bloqueo_telsome.html#procedimiento","text":"Vamos a describir c\u00f3mo impedir que se produzca la entrada de una llamada desde un n\u00famero determinado en el servicio de VoIP Telsome. T\u00edpicamente nos interesar\u00e1 esto para bloquear las llamadas comerciales SPAM. Necesitamos el n\u00famero que queremos bloquear. Si no lo recordamos o no tenemos registro de llamadas en el terminal, se puede consultar en la informaci\u00f3n detallada de las llamadas recibidas a trav\u00e9s del servicio. Para ello iniciar sesi\u00f3n en la cuenta Telsome con nuestras credenciales. Una vez dentro, navegar siguiendo la siguiente ruta: 1 Configuraci\u00f3n avanzada > Enlaces r\u00e1pidos > Costos de llamada All\u00ed encontraremos el detalle de todas las llamadas emitidas y recibidas. Una vez localizado el n\u00famero que queremos bloquear, navegaremos siguiendo la ruta: 1 2 Configuraci\u00f3n avanzada > Extensiones > (clic sobre nuestra extensi\u00f3n) > Telefon\u00eda > Reglas de llamadas entrantes All\u00ed rellenaremos el peque\u00f1o formulario con el r\u00f3tulo Agregar desv\u00edos sustituyendo el n\u00famero del ejemplo (999888777) por el que nos interese: En el formulario, el primer desplegable nos permite elegir el efecto que observar\u00e1 el llamante. En el ejemplo he seleccionado reproductor ocupado , pero tambi\u00e9n servir\u00edan las opciones reproductor congestionado o colgar . Una vez que pulsemos el bot\u00f3n OK se incorporar\u00e1 a la lista inferior y pasar\u00e1 a ser efectiva.","title":"Procedimiento"},{"location":"2019-04-20-pong_composite_mod.html","text":"Uno de los mejores recuerdos de la ni\u00f1ez fue recibir esta peque\u00f1a consola como regalo de mi abuela tra\u00edda de un viaje a Canarias a finales de los 70. Nunca dej\u00f3 de funcionar del todo, pero acumul\u00f3 desperfectos como los l\u00f3gicos problemas en los potenci\u00f3metros que contienen los mandos y sobre todo la incomodidad de tener \u00fanicamente una salida de RF o antena para conectar al televisor. La unidad que tengo, por lo que he podido averiguar, fue un modelo que apareci\u00f3 bajo diversas denominaciones. La m\u00eda presenta la marca REGINA y seg\u00fan la caja es el modelo T-338 . Investigando la modificaci\u00f3n para conseguir una salida de v\u00eddeo compuesto encontr\u00e9 que la consola est\u00e1 basada en el chip AY-3-8500 de General Instruments: Este chip tiene una historia interesante. Fue todo un \u00e9xito en la \u00e9poca y es pr\u00e1cticamente seguro encontrar uno de estos chips, sus clones o alguna de sus evoluciones en cualquier consola de juegos tipo Pong de finales de los 70. El fabricante produjo tantas unidades que, aunque no se fabrica desde entonces, a\u00fan hoy es posible encontrarlo nuevo. He conseguido un par para montar alguna unidad desde cero dado que el esquem\u00e1tico es extremadamente sencillo y aparece en la documentaci\u00f3n del integrado . La se\u00f1al de v\u00eddeo en el patillaje del chip aparece descompuesta en los siguientes 5 pines: 6: Ball output 9: Right player output 10: Left player output 16: Sync output 24: Score and field output Esto es as\u00ed porque exist\u00eda la opci\u00f3n de incorporar un coprocesador de video que permit\u00eda colorear los distintos componentes de la salida (los jugadores, la bola y el resto del campo). El esquem\u00e1tico anterior corresponde a la versi\u00f3n sin este coprocesador y por tanto se limita a sumar las cuatro salidas (sin contar la se\u00f1al de sync) con una puerta l\u00f3gica OR de cuatro entradas ( 4072 ). La placa de mi unidad sin embargo difiere del esquem\u00e1tico oficial. Observo que no existe el integrado 4072 con las puertas OR de cuatro entradas: En su lugar se utilizan los cuatro diodos que marco en la segunda foto. Realmente los diodos son equivalentes a la puerta OR. Una vez localizadas las se\u00f1ales implicadas, era cuesti\u00f3n de encontrar el circuito que las llevara hasta una se\u00f1al de v\u00eddeo compuesto est\u00e1ndar. Hay poco m\u00e1s que hacer que sumarlas y normalizarlas hasta los niveles que se esperan en una se\u00f1al de este tipo. Al haber tantas consolas en el mercado es f\u00e1cil encontrar varias versiones del circuito necesario realizados por otros aficionados. Pongo algunos enlaces a continuaci\u00f3n: Breathing New (Composite) Life Into a Binatone Pong Console Binatone TV Master MK 4 Composite Video Mod AV modding a pong unit...even possible? Hacking Composite Video into a 1977 Pong Console Casi todos los art\u00edculos le\u00eddos hacen referencia al mismo esquema de una p\u00e1gina que ya no existe , pero que afortunadamente todo el mundo ha reproducido en sus sitios, cosa que yo hago aqu\u00ed tambi\u00e9n: As\u00ed pues, para realizar este circuito necesitaremos los siguientes componentes: 1x 9V \u2013 5V Regulador de tensi\u00f3n 7805 2x Resistencia 75\u2126 1x Resistencia 750\u2126 1x Transistor 2N3904 1x Diodo 1N914 1x Condensador electrol\u00edtico 100\u03bcF / 16V 1x Conector RCA Utilizaremos una porci\u00f3n de stripboard para montarlo. Lo que sigue es la simulaci\u00f3n del circuito con Fritzing: Realmente a la hora de soldar se puede compactar m\u00e1s, pero he ahuecado los componentes para que no se solapen en la visualizaci\u00f3n. Podemos comprobar en la vista esquem\u00e1tica de Fritzing que el circuito es correcto: Adjunto el fichero Fritzing por si ayuda con el montaje. \u00c9ste es el resultado en la realidad: Lo siguiente es localizar sobre la placa de mi consola los puntos de entrada al circuito. Estudiando un poco las pistas llego a la conclusi\u00f3n de que en mi caso son los siguientes: El punto 2 es donde se reunen las cuatro se\u00f1ales y se suman con los diodos como coment\u00e1bamos antes. Ya s\u00f3lo queda alojar el peque\u00f1o circuito en el interior de la caja. Encuentro hueco en la parte inferior y sujeto la peque\u00f1a placa con cola caliente: Para la salida retiro los espadines que sujetaban el viejo cable de antena que sal\u00eda por la parte superior, para hacer hueco a un conector RCA que sujeto agrandando el agujero del cable RF: Ya s\u00f3lo queda hacer las conexiones entre todas las piezas y cerrar el conjunto: Adem\u00e1s de los componentes para el circuito de modificaci\u00f3n, adquir\u00ed tambi\u00e9n potenci\u00f3metros de 1M\u2126 para sustituir los que llevan los mandos. El resultado: Al conocer el proyecto un amigo me ha pasado su consola de aquella \u00e9poca para realizar una modificaci\u00f3n equivalente. Abri\u00e9ndola encuentro que efectivamente est\u00e1 basada en el mismo integrado, aunque \u00e9sta parece montada con mejores componentes y s\u00ed incluye el integrado con las puertas OR para el sumado de las salidas de v\u00eddeo del chip:","title":"2019-04-20 Composite mod en consola Pong"},{"location":"2019-07-07-crankshaft-build.html","text":"Tras una reciente actualizaci\u00f3n de los Google Play Services de Android, ha dejado de funcionar el touch screen en Crankshaft . Parece ser que el problema tiene que ver con el uso de la librer\u00eda Protocol Buffers , que ha pasado a ser m\u00e1s estricto en esta \u00faltima versi\u00f3n de los Play Services y parece que no se hab\u00eda implementado de forma rigurosa en OpenAuto. En este hilo de los foros de Crankshaft se habla sobre el tema. La soluci\u00f3n pasa por compilar un fork de OpenAuto que uno de los usuarios ha preparado. A continuaci\u00f3n se describe el paso a paso para hacer la compilaci\u00f3n. El punto de partida es una instalaci\u00f3n de la \u00faltima versi\u00f3n de Crankshaft en el momento de escribir esto (la NG Alpha-5 2019-06-08 ). Activamos modo DEV (necesario por lo menos para que el sistema se monte en modo lectura/escritura) montando la SD en el ordenador y cambiando el par\u00e1metro DEV_MODE a 1 ( DEV_MODE=1 ) en el fichero /boot/crankshaft/crankshaft_env.sh . ( fuente ) Monto la microSD, arranco, averiguo la IP (con Fing por ejemplo) y conecto por SSH (user: pi; pwd: raspberry). Actualizo la librer\u00eda de paquetes e instalo algunos necesarios: 1 2 $ sudo apt-get update $ sudo apt-get install -y libboost-all-dev libusb-1.0.0-dev libssl-dev cmake libprotobuf-dev protobuf-c-compiler protobuf-compiler Bajo el fork de aasdk de abraha2d y compilo: 1 2 3 4 5 6 7 8 $ cd ~ $ wget --no-check-certificate https://github.com/abraha2d/aasdk/archive/development.zip $ unzip development.zip $ mv aasdk-development/ aasdk $ mkdir aasdk_build $ cd aasdk_build $ cmake -DCMAKE_BUILD_TYPE = Release ../aasdk $ make Instalo algunos paquetes necesarios para compilar ilclient : 1 2 3 4 5 $ sudo apt-get install -y libqt5multimedia5 libqt5multimedia5-plugins libqt5multimediawidgets5 qtmultimedia5-dev libqt5bluetooth5 libqt5bluetooth5-bin qtconnectivity5-dev pulseaudio librtaudio-dev librtaudio5a Instalo paquetes libraspberrypi sque contiene c\u00f3digo de ilclient $ sudo apt-get install libraspberrypi-doc libraspberrypi-dev $ cd /opt/vc/src/hello_pi/libs/ilclient $ make Bajo el fork de openauto de abraha2d y compilo: 1 2 3 4 5 6 7 8 9 $ cd ~ $ wget --no-check-certificate https://github.com/abraha2d/openauto/archive/crankshaft-ng.zip $ unzip crankshaft-ng.zip $ mv openauto-crankshaft-ng/ openauto $ mkdir openauto_build $ cd openauto_build $ sudo apt-get install libtag1-dev libblkid-dev $ cmake -DCMAKE_BUILD_TYPE = Release -DRPI3_BUILD = TRUE -DAASDK_INCLUDE_DIRS = \"/home/pi/aasdk/include\" -DAASDK_LIBRARIES = \"/home/pi/aasdk/lib/libaasdk.so\" -DAASDK_PROTO_INCLUDE_DIRS = \"/home/pi/aasdk_build\" -DAASDK_PROTO_LIBRARIES = \"/home/pi/aasdk/lib/libaasdk_proto.so\" ../openauto $ make Sustituyo el binario compilado por el de la distribuci\u00f3n Crankshaft: 1 $ sudo cp /home/pi/openauto/bin/autoapp /usr/local/bin/autoapp","title":"2019-04-20 Compilaci\u00f3n OpenAuto para solucionar touch screen"},{"location":"2014/12/20/micro-placas.html","text":"","title":"Micro placas"},{"location":"2014/12/26/dokuwiki-raspi.html","text":"","title":"Dokuwiki raspi"},{"location":"2015/01/08/jekyll.html","text":"","title":"Jekyll"},{"location":"2015/01/09/moviles.html","text":"","title":"Moviles"},{"location":"2015/03/14/raspi2-kodi-tvheadend.html","text":"","title":"Raspi2 kodi tvheadend"},{"location":"2016/02/25/los-innovadores.html","text":"","title":"Los innovadores"},{"location":"2016/04/10/un-antropologo-en-marte.html","text":"","title":"Un antropologo en marte"},{"location":"2016/07/02/virus-android.html","text":"","title":"Virus android"},{"location":"2016/07/10/wild.html","text":"","title":"Wild"},{"location":"2016/07/21/PIGRRL-2.html","text":"","title":"PIGRRL 2"},{"location":"2016/08/02/stm32-vl-discovery.html","text":"","title":"Stm32 vl discovery"},{"location":"2016/08/17/el-mundo-de-ayer.html","text":"","title":"El mundo de ayer"},{"location":"2016/10/17/raspi-switch.html","text":"","title":"Raspi switch"},{"location":"2016/12/06/raspi3-kodi.html","text":"","title":"Raspi3 kodi"},{"location":"2017/01/14/raspi2-kodi-16-tvheadend.html","text":"","title":"Raspi2 kodi 16 tvheadend"},{"location":"2018/05/05/otto.html","text":"","title":"Otto"},{"location":"2018/10/19/crankshaft.html","text":"","title":"Crankshaft"},{"location":"2018/10/20/Octoprint-en-Anet-A8.html","text":"","title":"Octoprint en Anet A8"},{"location":"cursos/phonegap.html","text":"Apuntes Curso Phonegap \u00b6 Profesor: @ciberado D\u00edas 1 a 5: 18/11/2014 -> 24/11/2014 \u00b6 Enlaces \u00b6 Presentaci\u00f3n sobre Phonegap Freelance Corner : Listas de distribuci\u00f3n de proyectos para freelancers. Socrative : Gestor de aula (tests de profesor a alumnos). Brackets : Editor de c\u00f3digo. 10 trucos para mejorar la terminal de Windows JSLint :Chequeador sintaxis JS. Cursos MongoDB Microjs : Microjs: Fantastic Micro-Frameworks and Micro-Libraries for Fun and Profit! Leaflet : An Open-Source JavaScript Library for Mobile-Friendly Interactive Maps. V\u00eddeos de Douglas Crockford (evangelizador JavaScript). Emmet : Plugin para Brackets. Macros para crear documentos f\u00e1cilmente. Beautify : Plugin para Brackets para formatear la indentaci\u00f3n autom\u00e1ticamente. Mockable : Para construir mocks de web services. Proveedores de WebServices: Digital Ocean AWS : Una m\u00e1quina micro (estilo Raspberry Pi) gratis durante un a\u00f1o. AWS Lambda Google AppEngine : Gratis hasta un umbral. Especial sobre AppEngine de We.Developers. DonDominio.com : Proveedor de dominios recomendado por alumno curso. json.org : Definici\u00f3n/documentaci\u00f3n de JSON. Firefox REST Easy addon : Cliente de servicios REST para testeos. jQuery : Librer\u00eda Javascript. Angular : Framework Javascript. CanIUse : Indica las tecnolog\u00edas soportadas por los distintos navegadores. W3C TRs : Listado de est\u00e1ndares y borradores del W3C. Mozilla Developer Network : Alternativa al W3C para consultar la documentaci\u00f3n de HTML. DevDocs : Filtrado de la documentaci\u00f3n MDN. Jade y HAML : Alternativas a HTML. JSFiddle : Prototipos HTML/CSS/JS. Transit : Plugin jQuery para animaciones. Adobe Color CC : Ruedas crom\u00e1ticas. Express : Fast, unopinionated, minimalist web framework for Node.js Heroku : Cloud Application Platform con soporte a Node.js Instalaci\u00f3n entorno \u00b6 M\u00f3dulos necesarios: JDK (instalado en C:\\jdk1.8 ) Poner en el PATH: C:\\jdk1.8\\bin Ant (instalado en C:\\ant ) Poner en el PATH: C:\\ant\\bin Android SDK (instalado en C:\\android-sdk ) Definir variable de entorno ANDROID_HOME con: C:\\android-sdk Node ( en Ubuntu ) Phonegap: npm install -g phonegap Genymotion : Emulador Android (muy r\u00e1pido). Vagrant (opcional): Empaquetador de entornos de desarrollo Creaci\u00f3n de proyecto Phonegap \u00b6 1 $ phonegap create 00HolaMundo --name HolaMundo --id es.eduardofilo.hm Compilaci\u00f3n y ejecuci\u00f3n de proyecto Phonegap \u00b6 1 2 3 $ cd 00HolaMundo $ phonegap build android $ phonegap run android En realidad la tarea run hace build . Inspeccionar dispositivos externos en Chrome \u00b6 1 about : inspect REST WebServices \u00b6 Servidor mock ( mockable ): demo0034470.mockable.io url : http://demo0034470.mockable.io/votaciones/38/yes type : POST dataType : json Respuesta: 1 2 3 4 5 6 { \"votosTotal\" : 6000 , \"votosPositivos\" : 3500 , \"votosNegativos\" : 2500 , \"fecha\" : \"2013-04-17T12:32:12\" } jQuery \u00b6 Hay una convenci\u00f3n por la cual cuando invocamos jQuery ($) para localizar un elemento del DOM, la variable donde se carga se pone con el prefijo $. Por ejemplo: 1 var $paragrafos = $ ( 'p' ); Ejemplo1 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var $paragraphs = $ ( 'p' ); for ( var i = 0 ; i < $paragraphs . length ; i ++ ) { console . log ( i , $paragraphs [ i ]); } $paragraphs . css ( 'color' , 'red' ); $paragraphs . css ( 'background-color' , 'green' ); $paragraphs . css ({ 'color' : 'blue' , 'background-color' : 'yellow' }); console . log ( $paragraphs . css ( 'color' )); $firstp = $ ( 'p:first' ); //$firstp = $('p').first(); //$firstp = $('p').eq(0); $firstp . addClass ( 'importante' ); Ejemplo2 \u00b6 1 2 3 4 5 6 7 8 9 10 var $firstp = $ ( 'p:first' ); var texto = $firstp . text (); $firstp . text ( texto . toUpperCase ()); //var $strong = $('<strong>'); //$strong.text('contenido'); //$firstp.prepend($strong); $ ( '<strong>' ) . text ( 'contenido' ) . prependTo ( $firstp ); Ejemplo3 \u00b6 1 2 3 4 5 6 7 var colores = [ 'Rojo' , 'Verde' , 'Azul' ]; var $ol = $ ( 'ol' ); $ol . empty (); for ( var i = 0 ; i < colores . length ; i ++ ) { $ol . append ( $ ( '<li>' ). text ( colores [ i ])); //$('<li>').text(colores[i]).appendTo($ol); } Ejemplo4 \u00b6 1 2 3 4 $ ( 'p' ). on ( 'click' , function ( evt ) { evt . preventDefault (); $ ( this ). css ( 'background-color' , 'green' ); }); Ejemplo5 \u00b6 1 2 3 4 5 6 $ ( 'p' ). on ( 'click' , function ( evt ) { $ ( this ). fadeOut ( function () { $ ( this ). text ( $ ( this ). text (). toUpperCase ()); $ ( this ). fadeIn (); }); }); D\u00eda 6: Martes 25/11/2014 \u00b6 Enlaces \u00b6 Git SourceTree : GUI de Git. La par\u00e1bola de git : V\u00eddeo interesante. gitflow : Patr\u00f3n de uso de git. Yeoman : Plantillas/Scaffolding. Webapp : Plantilla de Yeoman para webapps. Grunt : Gestor de tareas. Gulp : Gestor de tareas. Equivalente a Grunt. Est\u00e1 de moda ahora. Bower : Gestor de librer\u00edas (como npm pero a nivel de librer\u00edas JS, tipo leaflet o bootstrap). Depende de git. Montaje de entorno y workflow \u00b6 Bajamos el instalador de git y lo instalamos. Durante la instalaci\u00f3n, en una p\u00e1gina del asistente, marcamos la tercera opci\u00f3n que lleva una leyenda en rojo. Inicializamos el proyecto local: 1 2 3 mkdir 06YesNoGit cd 06YesNoGit git init Entramos con nuestra cuenta (o creamos una) en GitHub y creamos un repositorio con el mismo nombre que el local ( 06YesNoGit ). Creamos un \"remote\" desde el git local hacia GitHub: 1 git remote add origin https://github.com/eduardofilo/06YesNoGit.git Sincronizamos: 1 git pull origin master Modificamos un fichero en local (.gitignore), lo commiteamos en local y sincronizamos con GitHub: 1 2 3 git add .gitignore git commit -m \"Primer commit\" git push origin master Inicializamos gitflow en SourceTree (pulsando el bot\u00f3n de la toolbar). Instalamos Bower (la opci\u00f3n g lo instala en global, es decir accesible desde todos los proyectos): 1 npm install -g bower Grunt no se suele instalar de forma global porque cambia mucho de versi\u00f3n. Vamos a instalar algo que ejecuta el grunt local del proyecto: 1 npm install -g grunt-cli Instalamos Yeoman: 1 npm install -g yo Si falla la descarga de alg\u00fan paquete, es mejor no reejecutar yeoman. Se habr\u00e1 generado un fichero package.json que contiene los paquetes npm que necesitamos. Ejecutando lo siguiente se bajar\u00e1 lo que falte: 1 npm install Si npm install nos da warnings se puede solucionar inicializando npm (que genera el fichero package.json ): 1 npm init Instalamos la plantilla webapp de Yeoman: 1 npm install -g generator-webapp En este punto tenemos todas las herramientas instaladas. \u201cStart New Feature\u201d en gitflow@SourceTree. Le damos el nombre \u201cInicializarConYeoman\u201d. Generamos un proyecto con la plantilla webapp de Yeoman: yo Instalamos \u201cwebapp\u201d Incluimos las librer\u00edas Bootstrap y Modernizr Hacemos overwrite de .gitignore Lanzamos los tests para probar Grunt: 1 grunt test Compilamos con Grunt: 1 grunt build Aparece el directorio dist con la versi\u00f3n final (lista para desplegar) de nuestro proyecto. Arrancamos un servidor web para probar el proyecto: 1 grunt serve D\u00eda 7: Mi\u00e9rcoles 26/11/2014 \u00b6 Enlaces \u00b6 Phonegap developer app : Sincroniza la app desplegada por Phonegap en el tel\u00e9fono o en Genymotion para pasar los cambios directamente sin necesidad de volver a desplegar. Genymotion with Google Play Services : Instalaci\u00f3n de Google Play Services en Genymotion. Bower \u00b6 La diferencia con npm es que \u00e9ste instala cosas en m\u00e1quina; Bower a\u00f1ade librer\u00edas al proyecto. Lo vamos a manejar con los siguientes comandos por terminal: bower search leaflet : Busca las librer\u00edas que contienen \u201cleaflet\u201d. bower install --save leaflet : Instala la librer\u00eda leaflet. La opci\u00f3n --save hace que se apunte en un fichero de referencia de librer\u00edas ( bower.json ) para luego no tener que subir las librer\u00edas al control de versiones (evitar\u00edamos subir el directorio bower_components , que es donde se almacenan las librer\u00edas instaladas y sus dependencias). Es parecido al package.json de npm. grunt wiredep : Conecta las dependencias. Por ejemplo vincula los ficheros CSS de las librer\u00edas en la posici\u00f3n del comentario <!-- bower:css --> del fichero index.html . Los CSS de las librer\u00edas que hab\u00eda instaladas previamente (bootstrap y modernizr) se hab\u00edan conectado cuando instalamos la plantilla webapp con yeoman. Esta tarea est\u00e1 incluida en la tarea build . bower uninstall --save leaflet : Desinstala la librer\u00eda leaflet. Grunt \u00b6 El fichero de configuraci\u00f3n tiene forma de script Javascript. Es el fichero Gruntfile.js . git \u00b6 Vamos a hacer el merge de la feature que creamos ayer en la rama develop: SourceTree / Commit / Marcamos \u201cUnstage all\u201d para pasar a stage todos los ficheros modificados / Incluimos el comentario del commit en la caja de abajo. SourceTree / Gitflow / Finish Feature (marcamos Delete branch) SourceTree / Push (marcamos las dos ramas: develop y master) Phonegap app developer \u00b6 Se instala en el emulador o dispositivo la aplicaci\u00f3n. Se abre la aplicaci\u00f3n \u201cPhoneGap\u201d en el dispositivo o emulador. Se configura poniendo la URL que aparece al arrancar el servidor phonegap en la m\u00e1quina de desarrollo: 1 phonegap serve D\u00eda 8: Jueves 27/11/2014 \u00b6 Enlaces \u00b6 Fundation : Framework CSS basado en em. Bootstrap est\u00e1 basado en px. QuirksMode : Peter Paul Koch. Buscar sus conferencias sobre display. Media Queries : Cat\u00e1logo de sitios responsive. Swwweet : Estudio de Barcelona con buena filosof\u00eda web. CSS Zen garden : Juego para modificar con CSS un HTML fijado desde hace a\u00f1os. Pedro Arilla : Especialista en tipograf\u00eda de Zaragoza. Fontsinuse : Galer\u00eda de sitios con tipograf\u00eda interesante. Unos tipos duros : Teor\u00eda y pr\u00e1ctica de la tipograf\u00eda. Font Awesome : 479 iconos vectorizados. Recomendado por Merche. CSS \u00b6 Siguiendo la lecci\u00f3n sobre CSS del curso de HTML5 de Javier . Unidades de medida \u00b6 em es una de las m\u00e1s interesantes. Procede del mundo de la tipograf\u00eda y es la anchura de la M may\u00fascula en un tama\u00f1o que se considera legible con facilidad por un usuario normal. Las em se basan en el tama\u00f1o de letra del elemento y son relativas entre elementos que se contienen, es decir, si un elemento tiene 2em pero est\u00e1 afectado por un contenedor en el que se aplica 2em , el tama\u00f1o resultante ser\u00e1 equivalente a 6em . Para evitar la acumulaci\u00f3n est\u00e1 la unidad rem (=root em). Preferencias \u00b6 Hay un orden de prioridad entre los selectores de CSS. Algunos detalles: Prioridades generales de menos a m\u00e1s: Reglas definidas por el navegador (useragent stylesheet rules) -> Reglas que seleccionan elementos -> Reglas que seleccionan atributos ( id o class ). id prioriza sobre class . !important se salta las prioridades, es decir se aplica siempre. Position \u00b6 top y left no aplican si position es static . El position: absolute toma el origen de coordenadas del primer contenedor que no es static . Display \u00b6 El display de un div por defecto (useragent stylesheet rules) es block . El de span es inline . Se puede modificar tanto un caso como el otro. Por ejemplo si ponemos display: inline a un div , pasa a comportarse como un span . El display: inline hace que se ignore el width . Con display: inline-block s\u00ed que se tiene en cuenta el width . Hay un truco para conservar la indentaci\u00f3n en el c\u00f3digo HTML mientras se evita que se introduzca un car\u00e1cter espacio que ocupa sitio y descoloca la maquetaci\u00f3n y es introducir un comentario entre l\u00edneas de esta forma: 1 2 3 4 5 6 < section > \u2026 </ section > <!-- --> < section > \u2026 </ section > Float \u00b6 La propiedad clear s\u00f3lo funciona si el display no es inline . Se usa mucho el apa\u00f1o del clearfix para solucionar la p\u00e9rdida de dimensi\u00f3n vertical de un contenedor cuando todo su contenido m\u00e1s alto flota. El selector :after selecciona despu\u00e9s del contenido al que se aplica el estilo, no el contenido del siguiente elemento en el DOM. El clearfix favorito de Javier es: 1 2 3 4 5 6 7 . clearfix : after { content : \".\" ; visibility : hidden ; display : block ; height : 0 ; clear : both ; } viewport \u00b6 Diferencia entre layout-viewport y display-viewport. La relaci\u00f3n entre ambos es el nivel de zoom. El layout-viewport predeterminado es 960px. Se defini\u00f3 pixel-ratio cuando apareci\u00f3 iPhone 4, inicialmente con un valor de 2 (pantalla retina de 640px de ancho por los 320px del iPhone original). Terminales con pantallas QuadHD tienen un pixel-ratio de alrededor de 4. Tiene el inconveniente de que hace que las im\u00e1genes se redimensionen, lo que en terminales con mucha densidad de pixel produce desenfoque. La soluci\u00f3n es enviar la imagen adecuada a cada dispositivo. De momento se hace con condiciones en CSS. mediaqueries \u00b6 Permite hacer condiciones en CSS. @media es un if. En las mediaqueries los em son siempre rem es decir son absolutos, no relativos. M\u00e1s que hablar de resoluciones debemos pensar en tama\u00f1os. Se suelen considerar cuatro tama\u00f1os: M\u00f3vil: 360 px CSS Tablet: 768 px CSS Desktop: 1200 px CSS TV Tipograf\u00eda \u00b6 La tipograf\u00eda cada vez tiene m\u00e1s importancia. Para pantalla, Javier no recomienda Helvetica. Existen muchos tipos buenos, muy legibles y gratuitos, como: Mozilla Fira Ubuntu Google OpenSans Javier recomienda no descartar las fuentes de pago. La inversi\u00f3n puede tener un impacto muy importante en el proyecto. Algunas foundries: Typekit : Foundry de Adobe. Google Fonts : Foundry de Google. Nos describe el uso de Google Fonts usando el sitio para definir un paquete con dos fuentes. Frameworks \u00b6 Algunos framewoks: Bootstrap : es el m\u00e1s importante ahora mismo. El favorito de Javier, sobre todo por su ecosistema. Bootsnipp : Componentes para bootstrap. Foundation Skeleton Ionic : Perfecto para pantallas peque\u00f1as. Ratchet : Tambi\u00e9n para m\u00f3viles. Sencha Touch : Para m\u00f3viles. No recomendado por Javier. jQuery Mobile : No recomendado por Javier. D\u00eda 9: Viernes 28/11/2014 \u00b6 Enlaces \u00b6 UI Bootstrap : Bootstrap adaptado a Angular. Bootsnipp : Galer\u00eda de elementos para Bootstrap. Couchbase Mobile : Plugin Phonegap para tener una base de datos noSQL local con opci\u00f3n de sincronizar con el servidor. Bootstrap \u00b6 En Customize se puede compilar una versi\u00f3n personalizada (s\u00f3lo con los componentes que vayamos a utilizar, lo que adem\u00e1s hace m\u00e1s peque\u00f1a la librer\u00eda). Dentro de este Customize se pueden cambiar por ejemplo los Media queries breakpoints que son los que hacen que el dise\u00f1o cambie entre los distintos tama\u00f1os de pantalla. Es recomendable instalarlo con Bower si se va a integrar en Phonegap (para tenerlo en local y minimizar la latencia que supondr\u00eda el descargarlo). El men\u00fa superior del sitio de Bootstrap est\u00e1 bien estructurado en cuanto a la dificultad de menor a mayor de izquierda a derecha. Conviene leer por lo menos la secci\u00f3n Getting Started . Bootstrap utiliza CDN para minimizar la latencia. Si vamos a utilizar Angular, en lugar de poner bootstrap normal hay que integrar UI Bootstrap que no utiliza jQuery. Es importante meter en la cabecera lo siguiente (aparece en Basic Template ): 1 2 3 < meta charset = \"utf-8\" > < meta http-equiv = \"X-UA-Compatible\" content = \"IE=edge\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1\" > Importante leer todo el documento sobre CSS , sobre todo lo relativo al Grid System y a los Forms . Los componentes que no encontremos en Bootstrap buscarlos en Bootsnipp . Si utilizamos la parte de JS de Bootstrap hay que integrar jQuery. Buenas pr\u00e1cticas con Bootstrap \u00b6 Interesa poner siempre un label en los campos de formulario por accesibilidad, pero en pantallas peque\u00f1as se suele usar un placeholder, lo que es redundante. Para evitarlo se oculta a\u00f1adiendo la clase sr-only (sr de Screen Reader), lo que mantiene el label en el c\u00f3digo pero no lo muestra. JavaScript \u00b6 Almacenamiento de un conjunto de variables en localStorage: 1 2 3 4 5 var l1 = [ \"Alice\" , \"Bob\" , \"Charly\" ]; var l2 = [ 1 , 2 , 3 ] var listas = { listaPrincipal : l1 , listaSecundaria : l2 }; var listasComoCadena = JSON . stringify ( listas ); localStorage . setItem ( 'listas' , listasComoCadena ); Deberes para el fin de semana \u00b6 Landing page con tres zonas y call for action superior (= jumbotron). Qu\u00e9 hacemos Por qu\u00e9 somos buenos Pasta Repasar Closures de JS . D\u00eda 10: Lunes 1/12/2014 \u00b6 Enlaces \u00b6 famo.us : Free, open source JavaScript framework that helps you create smooth, complex UIs for any screen. EggHead : Screencasts. Proyecto \u00b6 Vamos a montar el proyecto poni\u00e9ndolo todo junto desde cero: Creamos el proyecto dentro del directorio \\curso: 1 2 cd \\c urso phonegap create 10Votaciones --name Votaciones --id es.eduardofilo.yesno Nos metemos en el directorio y lanzamos Yeoman para instalar la plantilla web: 1 2 cd 10Votaciones yo Durante la configuraci\u00f3n de Yeoman indicamos que incluya Bootstrap. Configuramos en Gruntile.js (l\u00ednea 21 del fichero que la carpeta de la aplicaci\u00f3n es www en lugar de app que es la que viene por defecto. Movemos carpeta 10Votaciones\\www\\res a 10Votaciones\\res , es decir un nivel hacia arriba. Esta carpeta contiene los recursos que utilizar\u00e1 Phonegap (por ejemplo el icono de escritorio que ajustar\u00e1 en las distintas plataformas). No tiene mucho sentido que est\u00e9 dentro de www ya que Phonegap duplicar\u00e1 hacia el directorio dist los recursos correspondientes a la plataforma con la que estemos trabajando. Si est\u00e1 en www es porque cuando utilizamos el servidor de compilaci\u00f3n de Adobe para montar las aplicaciones nativas, s\u00f3lo pasamos el directorio www y el que contenga res es una forma de enviar todo de una vez. Configuramos en config.xml el movimiento del directorio res que acabamos de hacer. Para ello sustituimos las rutas de los recursos, es decir www/res por res . Borramos el contenido de www y lo sustituimos por el de app . Borramos la carpeta app que ha quedado vac\u00eda. Movemos la carpeta bower_components al interior de www . Cambiamos la configuraci\u00f3n de Bower en el fichero .bowerrc poniendo www/bower_components donde s\u00f3lo pon\u00eda bower_components . Finalmente lanzamos la tarea que inyectar\u00e1 las dependencias entre los ficheros de c\u00f3digo: 1 grunt wiredep Con esto ya tendr\u00edamos la base. Vamos a utilizar el patr\u00f3n MVC. Pondremos tanto el modelo como el controlador en el mismo fichero main.js , aunque ser\u00eda m\u00e1s correcto separarlo. Vamos a hacer una Single Page Application. Cada p\u00e1gina \u201cvirtual\u201d de la app lo vamos a codificar mediante un div de clase pagina . Ese div tendr\u00e1 un atributo personalizado \u201cdata-title\u201d que contendr\u00e1 el t\u00edtulo de la p\u00e1gina. El controlador s\u00f3lo va a hacer: Reacciona a la pantalla Modifica la pantalla Todo lo que no tenga que ver con esto ir\u00e1 al modelo/servicio. D\u00eda 11: Martes 2/12/2014 \u00b6 Enlaces \u00b6 history.js Proyecto \u00b6 Vamos a programar el env\u00edo del voto al servidor (mockable) en un POST. El voto va en la URL por lo que aunque utilicemos https no ocultamos la informaci\u00f3n. Ser\u00eda m\u00e1s correcto enviar el voto en el cuerpo del POST, por ejemplo: 1 2 var url = this . URL_POST_NUEVO_VOTO . replace ( '{value}' , tipoDeVoto ); var promesa = $ . post ( url , { value : \u2018 yes \u2019 }); En segundo lugar programamos la gesti\u00f3n de la navegaci\u00f3n, es decir c\u00f3mo cambia la aplicaci\u00f3n de pantalla, ya sea hacia delante o hacia atr\u00e1s (incluyendo por ejemplo el evento \u201cBack\u201d del dispositivo que equivale al bot\u00f3n \u201cAtr\u00e1s\u201d del navegador). Javier nos comenta el truco de a\u00f1adir anchors (#) a la URL. Con esto se consigue que no se recargue el documento y que s\u00ed afecte al historial. Como nuestra app es SPA nos viene muy bien este truco. En Phonegap, la tecla \u201cAtr\u00e1s\u201d de los dispositivos equivale al Back del WebView. La gesti\u00f3n del historial la vamos a hacer con history.js . Buscamos/instalamos history.js con Bower ( --save actualiza el fichero bower.json con lo que hacemos que la inclusi\u00f3n de este componente sea persistente, es decir, si luego borramos los componentes, para no subirlos al control de versiones por ejemplo, lo podremos recuperar f\u00e1cilmente): 1 2 bower search history bower install --save history.js Inyectamos dependencias ( grunt wiredep no funciona => hay que mirar en la documentaci\u00f3n). Elegimos la librer\u00eda que nos conviene consultando la documentaci\u00f3n. En index.html incluimos la referencia en el bloque scripts/main.js del build.js final: 1 < script src = \"bower_components/history.js/scripts/bundled/html4+html5/native.history.js\" ></ script > Con history.js manejamos el historial del navegador/webview por medio del objeto History . El objeto history ser\u00eda la parte nativa del navegador. En muchas ocasiones se comportan igual. Los par\u00e1metros de la funci\u00f3n pushState tanto de history como de History son: 1 2 3 history . pushState ({ id : idDestino }, $ ( '#' + idDestion ). attr ( 'data-title' ), idDestion ); Objeto arbitrario en el que podemos almacenar datos Descripci\u00f3n o T\u00edtulo de esa entrada en el historial Direcci\u00f3n/URL D\u00eda 12: Mi\u00e9rcoles 3/12/2014 \u00b6 Enlaces \u00b6 Using Location Hash To Enable BACK/FORWARD Navigation Web Fundamentals : C\u00f3mo adaptar experiencias web a dispositivos de distintos tama\u00f1os. seen.js : Render 3D scenes into SVG or HTML5 Canvas. jQuery-Color : Animaciones con colores. Removing the 300ms tap delay in Chrome 32 : Se hace con la librer\u00eda fastclick . QuoJS : Librer\u00eda de gestures. HammerJS : Librer\u00eda de gestures. TouchSwipe-Jquery-Plugin : Librer\u00eda de swipes. iScroll : Librer\u00eda para gestionar listas y los eventos f\u00edsicos de arrastre. CancelBubble : Cuenta de Twitter que comenta muchas librer\u00edas buenas. r/javascript : Subreddit de Javascript en el que comentan tambi\u00e9n librer\u00edas. Q : Librer\u00eda js para la gesti\u00f3n de promesas. Proyecto \u00b6 document recibe todos los eventos. Implementamos un cartel \u201cCargando\u2026\u201d que aparece/desaparece cuando hay peticiones AJAX mientras se espera la respuesta del servidor. Se gestiona mediante los eventos ajaxStart y ajaxStop . Instalamos jQuery-Color para hacer un efecto de transici\u00f3n al jumbotron: Buscamos/instalamos: 1 2 bower search jquery-color bower install --save jquery-color Inyectamos la librer\u00eda a mano al final del index.html ya que Bower no puede: 1 < script src = \"bower_components/jquery-color/jquery.color.js\" ></ script > Hasta ahora hab\u00eda algo mal en el proyecto. No esper\u00e1bamos a que cargara el DOM ni jQuery. Para conseguirlo envolvemos la funci\u00f3n de inicializaci\u00f3n de la siguiente forma: 1 2 3 $ ( document ). ready ( function () { controlador . inicializar (); }); Vemos una forma de desactivar el highlight en el tap que hace el sistema operativo en WindowsPhone. Se consigue a\u00f1adiendo la siguiente etiqueta meta en el head del HTML: 1 < meta name = \"msapplication-tap-highlight\" content = \"no\" /> Vamos a programar un gesto para volver a la pantalla de votaciones desde resultados. Instalamos TouchSwipe-Jquery-Plugin : Buscamos/instalamos: 1 2 bower search touchswipe bower install --save jquery-touchswipe Sustituimos el servicio votar para que guarde en local. Hay que generar promesa. Se puede hacer con la librer\u00eda Q o con jQuery . Lo hacemos as\u00ed: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var servicioPreguntas = { //... votar : function ( tipoDeVoto ) { localStorage . setItem ( 'voto' , tipoDeVoto ); var deferred = $ . Deferred (); var promesa = deferred . promise (); deferred . resolve ({ total : 0 , positives : 0 , negatives : 0 }); return promesa ; } }; D\u00eda 13: Jueves 4/12/2014 \u00b6 Enlaces \u00b6 Documentaci\u00f3n Phonegap Command Line Documentaci\u00f3n Phonegap Plugins API Repositorio de Cordova Plugins La estafa de la linterna molona que ilumina m\u00e1s en Android InfoTelefonoPlugin : Plugin de Javier para obtener datos de identificaci\u00f3n del tel\u00e9fono. Proyecto Plugins \u00b6 Vamos a hacer una peque\u00f1a aplicaci\u00f3n para consultar la geolocalizaci\u00f3n: Creamos el proyecto: 1 2 cd \\c urso ` phonegap create 13GeoDemo --name GeoDemo --id es.eduardofilo.geodemo A\u00f1adimos el plugin de geolocalizaci\u00f3n: 1 2 cd 13GeoDemo phonegap plugin add org.apache.cordova.geolocation Buscar el c\u00f3digo nativo para Android en git . Javier no recomienda getCurrentPosition porque da timeout r\u00e1pidamente si est\u00e1s en HighAccuracy. Mejor con watchPosition. Vamos a ver c\u00f3mo se crear\u00eda un plugin. Para ello instalamos un plugin hecho por Javier y estudiamos detenidamente su sencillo c\u00f3digo: Creamos el proyecto: 1 2 cd \\c urso phonegap create 13 .1DatosTelefono --name DatosTelefono --id es.eduardofilo.datostfn A\u00f1adimos el plugin de Javier : 1 2 cd 13 .1DatosTelefono phonegap plugin add https://github.com/ciberado/domina-phonegap-infotelefonoplugin.git D\u00eda 14: Viernes 5/12/2014 \u00b6 Enlaces \u00b6 Cordova Device Motion Plugin MakeAppIcon Web2Splash Pastebin de Javier Adobe PhoneGap Build c9 : IDE web. Proyecto Plugins \u00b6 Continuamos con el proyecto de ayer: Comprobamos la instalaci\u00f3n: 1 phonegap plugin list Proyecto Aceler\u00f3metro \u00b6 Vamos a hacer un peque\u00f1o proyecto que controlar\u00e1 un peque\u00f1o cuadrado por pantalla con los aceler\u00f3metros del tel\u00e9fono. En el proyecto haremos uso del plugin oficial de Phonegap que se encarga de acceder al dispositivo. Creamos el proyecto: 1 phonegap create 14DemoAcelerometro --name DemoAcelerometro --id es.eduardofilo.demoaccel Instalamos plugin: 1 phonegap plugin add org.apache.cordova.device-motion Por defecto watchAcceleration llama al callback cada 10 segundos: 1 2 3 4 var watchID = navigator . accelerometer . watchAcceleration ( accelerometerSuccess , accelerometerError , accelerometerOptions ); accelerometerOptions : An object with the following optional keys: period : requested period of calls to accelerometerSuccess with acceleration data in Milliseconds.(Number) (Default: 10000) Para conseguir que la aplicaci\u00f3n sea m\u00e1s \"responsiva\", se puede cambiar el periodo de consulta pasando un objeto con un par\u00e1metro de clave frecuency en su interior (aunque la documentaci\u00f3n menciona period , es frecuency ). Hubiera funcionado cada segundo por ejemplo llamando al watchAcceleration as\u00ed: 1 2 var options = { frequency : 1000 }; var watchID = navigator . accelerometer . watchAcceleration ( onSuccess , onError , options ); Subir a Google Play \u00b6 Para generar un certificado con que firmar las aplicaciones: 1 $ keytool -genkey -alias demoiconos -keyalg RSA -validity 20000 -keystore demoiconos.keystore Compilar en Adobe PhoneGap Build \u00b6 Para delegar la construcci\u00f3n del proyecto en el servicio de compilaci\u00f3n de Adobe en la nube : 1 $ phonegap remote build android Se puede firmar la aplicaci\u00f3n desde Adobe subiendo el fichero keystore que hemos creado antes. Inicializaci\u00f3n del controlador \u00b6 Si usamos jQuery: 1 2 3 4 5 $ ( document ). ready ( function () { document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); }); }); Si no usamos jQuery: 1 2 3 document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); }); Pendiente de preguntar \u00b6 JSONP vs CORS Workspaces en Chrome.","title":"Phonegap"},{"location":"cursos/phonegap.html#apuntes-curso-phonegap","text":"Profesor: @ciberado","title":"Apuntes Curso Phonegap"},{"location":"cursos/phonegap.html#dias-1-a-5-18112014-24112014","text":"","title":"D\u00edas 1 a 5: 18/11/2014 -&gt; 24/11/2014"},{"location":"cursos/phonegap.html#enlaces","text":"Presentaci\u00f3n sobre Phonegap Freelance Corner : Listas de distribuci\u00f3n de proyectos para freelancers. Socrative : Gestor de aula (tests de profesor a alumnos). Brackets : Editor de c\u00f3digo. 10 trucos para mejorar la terminal de Windows JSLint :Chequeador sintaxis JS. Cursos MongoDB Microjs : Microjs: Fantastic Micro-Frameworks and Micro-Libraries for Fun and Profit! Leaflet : An Open-Source JavaScript Library for Mobile-Friendly Interactive Maps. V\u00eddeos de Douglas Crockford (evangelizador JavaScript). Emmet : Plugin para Brackets. Macros para crear documentos f\u00e1cilmente. Beautify : Plugin para Brackets para formatear la indentaci\u00f3n autom\u00e1ticamente. Mockable : Para construir mocks de web services. Proveedores de WebServices: Digital Ocean AWS : Una m\u00e1quina micro (estilo Raspberry Pi) gratis durante un a\u00f1o. AWS Lambda Google AppEngine : Gratis hasta un umbral. Especial sobre AppEngine de We.Developers. DonDominio.com : Proveedor de dominios recomendado por alumno curso. json.org : Definici\u00f3n/documentaci\u00f3n de JSON. Firefox REST Easy addon : Cliente de servicios REST para testeos. jQuery : Librer\u00eda Javascript. Angular : Framework Javascript. CanIUse : Indica las tecnolog\u00edas soportadas por los distintos navegadores. W3C TRs : Listado de est\u00e1ndares y borradores del W3C. Mozilla Developer Network : Alternativa al W3C para consultar la documentaci\u00f3n de HTML. DevDocs : Filtrado de la documentaci\u00f3n MDN. Jade y HAML : Alternativas a HTML. JSFiddle : Prototipos HTML/CSS/JS. Transit : Plugin jQuery para animaciones. Adobe Color CC : Ruedas crom\u00e1ticas. Express : Fast, unopinionated, minimalist web framework for Node.js Heroku : Cloud Application Platform con soporte a Node.js","title":"Enlaces"},{"location":"cursos/phonegap.html#instalacion-entorno","text":"M\u00f3dulos necesarios: JDK (instalado en C:\\jdk1.8 ) Poner en el PATH: C:\\jdk1.8\\bin Ant (instalado en C:\\ant ) Poner en el PATH: C:\\ant\\bin Android SDK (instalado en C:\\android-sdk ) Definir variable de entorno ANDROID_HOME con: C:\\android-sdk Node ( en Ubuntu ) Phonegap: npm install -g phonegap Genymotion : Emulador Android (muy r\u00e1pido). Vagrant (opcional): Empaquetador de entornos de desarrollo","title":"Instalaci\u00f3n entorno"},{"location":"cursos/phonegap.html#creacion-de-proyecto-phonegap","text":"1 $ phonegap create 00HolaMundo --name HolaMundo --id es.eduardofilo.hm","title":"Creaci\u00f3n de proyecto Phonegap"},{"location":"cursos/phonegap.html#compilacion-y-ejecucion-de-proyecto-phonegap","text":"1 2 3 $ cd 00HolaMundo $ phonegap build android $ phonegap run android En realidad la tarea run hace build .","title":"Compilaci\u00f3n y ejecuci\u00f3n de proyecto Phonegap"},{"location":"cursos/phonegap.html#inspeccionar-dispositivos-externos-en-chrome","text":"1 about : inspect","title":"Inspeccionar dispositivos externos en Chrome"},{"location":"cursos/phonegap.html#rest-webservices","text":"Servidor mock ( mockable ): demo0034470.mockable.io url : http://demo0034470.mockable.io/votaciones/38/yes type : POST dataType : json Respuesta: 1 2 3 4 5 6 { \"votosTotal\" : 6000 , \"votosPositivos\" : 3500 , \"votosNegativos\" : 2500 , \"fecha\" : \"2013-04-17T12:32:12\" }","title":"REST WebServices"},{"location":"cursos/phonegap.html#jquery","text":"Hay una convenci\u00f3n por la cual cuando invocamos jQuery ($) para localizar un elemento del DOM, la variable donde se carga se pone con el prefijo $. Por ejemplo: 1 var $paragrafos = $ ( 'p' );","title":"jQuery"},{"location":"cursos/phonegap.html#ejemplo1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var $paragraphs = $ ( 'p' ); for ( var i = 0 ; i < $paragraphs . length ; i ++ ) { console . log ( i , $paragraphs [ i ]); } $paragraphs . css ( 'color' , 'red' ); $paragraphs . css ( 'background-color' , 'green' ); $paragraphs . css ({ 'color' : 'blue' , 'background-color' : 'yellow' }); console . log ( $paragraphs . css ( 'color' )); $firstp = $ ( 'p:first' ); //$firstp = $('p').first(); //$firstp = $('p').eq(0); $firstp . addClass ( 'importante' );","title":"Ejemplo1"},{"location":"cursos/phonegap.html#ejemplo2","text":"1 2 3 4 5 6 7 8 9 10 var $firstp = $ ( 'p:first' ); var texto = $firstp . text (); $firstp . text ( texto . toUpperCase ()); //var $strong = $('<strong>'); //$strong.text('contenido'); //$firstp.prepend($strong); $ ( '<strong>' ) . text ( 'contenido' ) . prependTo ( $firstp );","title":"Ejemplo2"},{"location":"cursos/phonegap.html#ejemplo3","text":"1 2 3 4 5 6 7 var colores = [ 'Rojo' , 'Verde' , 'Azul' ]; var $ol = $ ( 'ol' ); $ol . empty (); for ( var i = 0 ; i < colores . length ; i ++ ) { $ol . append ( $ ( '<li>' ). text ( colores [ i ])); //$('<li>').text(colores[i]).appendTo($ol); }","title":"Ejemplo3"},{"location":"cursos/phonegap.html#ejemplo4","text":"1 2 3 4 $ ( 'p' ). on ( 'click' , function ( evt ) { evt . preventDefault (); $ ( this ). css ( 'background-color' , 'green' ); });","title":"Ejemplo4"},{"location":"cursos/phonegap.html#ejemplo5","text":"1 2 3 4 5 6 $ ( 'p' ). on ( 'click' , function ( evt ) { $ ( this ). fadeOut ( function () { $ ( this ). text ( $ ( this ). text (). toUpperCase ()); $ ( this ). fadeIn (); }); });","title":"Ejemplo5"},{"location":"cursos/phonegap.html#dia-6-martes-25112014","text":"","title":"D\u00eda 6: Martes 25/11/2014"},{"location":"cursos/phonegap.html#enlaces_1","text":"Git SourceTree : GUI de Git. La par\u00e1bola de git : V\u00eddeo interesante. gitflow : Patr\u00f3n de uso de git. Yeoman : Plantillas/Scaffolding. Webapp : Plantilla de Yeoman para webapps. Grunt : Gestor de tareas. Gulp : Gestor de tareas. Equivalente a Grunt. Est\u00e1 de moda ahora. Bower : Gestor de librer\u00edas (como npm pero a nivel de librer\u00edas JS, tipo leaflet o bootstrap). Depende de git.","title":"Enlaces"},{"location":"cursos/phonegap.html#montaje-de-entorno-y-workflow","text":"Bajamos el instalador de git y lo instalamos. Durante la instalaci\u00f3n, en una p\u00e1gina del asistente, marcamos la tercera opci\u00f3n que lleva una leyenda en rojo. Inicializamos el proyecto local: 1 2 3 mkdir 06YesNoGit cd 06YesNoGit git init Entramos con nuestra cuenta (o creamos una) en GitHub y creamos un repositorio con el mismo nombre que el local ( 06YesNoGit ). Creamos un \"remote\" desde el git local hacia GitHub: 1 git remote add origin https://github.com/eduardofilo/06YesNoGit.git Sincronizamos: 1 git pull origin master Modificamos un fichero en local (.gitignore), lo commiteamos en local y sincronizamos con GitHub: 1 2 3 git add .gitignore git commit -m \"Primer commit\" git push origin master Inicializamos gitflow en SourceTree (pulsando el bot\u00f3n de la toolbar). Instalamos Bower (la opci\u00f3n g lo instala en global, es decir accesible desde todos los proyectos): 1 npm install -g bower Grunt no se suele instalar de forma global porque cambia mucho de versi\u00f3n. Vamos a instalar algo que ejecuta el grunt local del proyecto: 1 npm install -g grunt-cli Instalamos Yeoman: 1 npm install -g yo Si falla la descarga de alg\u00fan paquete, es mejor no reejecutar yeoman. Se habr\u00e1 generado un fichero package.json que contiene los paquetes npm que necesitamos. Ejecutando lo siguiente se bajar\u00e1 lo que falte: 1 npm install Si npm install nos da warnings se puede solucionar inicializando npm (que genera el fichero package.json ): 1 npm init Instalamos la plantilla webapp de Yeoman: 1 npm install -g generator-webapp En este punto tenemos todas las herramientas instaladas. \u201cStart New Feature\u201d en gitflow@SourceTree. Le damos el nombre \u201cInicializarConYeoman\u201d. Generamos un proyecto con la plantilla webapp de Yeoman: yo Instalamos \u201cwebapp\u201d Incluimos las librer\u00edas Bootstrap y Modernizr Hacemos overwrite de .gitignore Lanzamos los tests para probar Grunt: 1 grunt test Compilamos con Grunt: 1 grunt build Aparece el directorio dist con la versi\u00f3n final (lista para desplegar) de nuestro proyecto. Arrancamos un servidor web para probar el proyecto: 1 grunt serve","title":"Montaje de entorno y workflow"},{"location":"cursos/phonegap.html#dia-7-miercoles-26112014","text":"","title":"D\u00eda 7: Mi\u00e9rcoles 26/11/2014"},{"location":"cursos/phonegap.html#enlaces_2","text":"Phonegap developer app : Sincroniza la app desplegada por Phonegap en el tel\u00e9fono o en Genymotion para pasar los cambios directamente sin necesidad de volver a desplegar. Genymotion with Google Play Services : Instalaci\u00f3n de Google Play Services en Genymotion.","title":"Enlaces"},{"location":"cursos/phonegap.html#bower","text":"La diferencia con npm es que \u00e9ste instala cosas en m\u00e1quina; Bower a\u00f1ade librer\u00edas al proyecto. Lo vamos a manejar con los siguientes comandos por terminal: bower search leaflet : Busca las librer\u00edas que contienen \u201cleaflet\u201d. bower install --save leaflet : Instala la librer\u00eda leaflet. La opci\u00f3n --save hace que se apunte en un fichero de referencia de librer\u00edas ( bower.json ) para luego no tener que subir las librer\u00edas al control de versiones (evitar\u00edamos subir el directorio bower_components , que es donde se almacenan las librer\u00edas instaladas y sus dependencias). Es parecido al package.json de npm. grunt wiredep : Conecta las dependencias. Por ejemplo vincula los ficheros CSS de las librer\u00edas en la posici\u00f3n del comentario <!-- bower:css --> del fichero index.html . Los CSS de las librer\u00edas que hab\u00eda instaladas previamente (bootstrap y modernizr) se hab\u00edan conectado cuando instalamos la plantilla webapp con yeoman. Esta tarea est\u00e1 incluida en la tarea build . bower uninstall --save leaflet : Desinstala la librer\u00eda leaflet.","title":"Bower"},{"location":"cursos/phonegap.html#grunt","text":"El fichero de configuraci\u00f3n tiene forma de script Javascript. Es el fichero Gruntfile.js .","title":"Grunt"},{"location":"cursos/phonegap.html#git","text":"Vamos a hacer el merge de la feature que creamos ayer en la rama develop: SourceTree / Commit / Marcamos \u201cUnstage all\u201d para pasar a stage todos los ficheros modificados / Incluimos el comentario del commit en la caja de abajo. SourceTree / Gitflow / Finish Feature (marcamos Delete branch) SourceTree / Push (marcamos las dos ramas: develop y master)","title":"git"},{"location":"cursos/phonegap.html#phonegap-app-developer","text":"Se instala en el emulador o dispositivo la aplicaci\u00f3n. Se abre la aplicaci\u00f3n \u201cPhoneGap\u201d en el dispositivo o emulador. Se configura poniendo la URL que aparece al arrancar el servidor phonegap en la m\u00e1quina de desarrollo: 1 phonegap serve","title":"Phonegap app developer"},{"location":"cursos/phonegap.html#dia-8-jueves-27112014","text":"","title":"D\u00eda 8: Jueves 27/11/2014"},{"location":"cursos/phonegap.html#enlaces_3","text":"Fundation : Framework CSS basado en em. Bootstrap est\u00e1 basado en px. QuirksMode : Peter Paul Koch. Buscar sus conferencias sobre display. Media Queries : Cat\u00e1logo de sitios responsive. Swwweet : Estudio de Barcelona con buena filosof\u00eda web. CSS Zen garden : Juego para modificar con CSS un HTML fijado desde hace a\u00f1os. Pedro Arilla : Especialista en tipograf\u00eda de Zaragoza. Fontsinuse : Galer\u00eda de sitios con tipograf\u00eda interesante. Unos tipos duros : Teor\u00eda y pr\u00e1ctica de la tipograf\u00eda. Font Awesome : 479 iconos vectorizados. Recomendado por Merche.","title":"Enlaces"},{"location":"cursos/phonegap.html#css","text":"Siguiendo la lecci\u00f3n sobre CSS del curso de HTML5 de Javier .","title":"CSS"},{"location":"cursos/phonegap.html#unidades-de-medida","text":"em es una de las m\u00e1s interesantes. Procede del mundo de la tipograf\u00eda y es la anchura de la M may\u00fascula en un tama\u00f1o que se considera legible con facilidad por un usuario normal. Las em se basan en el tama\u00f1o de letra del elemento y son relativas entre elementos que se contienen, es decir, si un elemento tiene 2em pero est\u00e1 afectado por un contenedor en el que se aplica 2em , el tama\u00f1o resultante ser\u00e1 equivalente a 6em . Para evitar la acumulaci\u00f3n est\u00e1 la unidad rem (=root em).","title":"Unidades de medida"},{"location":"cursos/phonegap.html#preferencias","text":"Hay un orden de prioridad entre los selectores de CSS. Algunos detalles: Prioridades generales de menos a m\u00e1s: Reglas definidas por el navegador (useragent stylesheet rules) -> Reglas que seleccionan elementos -> Reglas que seleccionan atributos ( id o class ). id prioriza sobre class . !important se salta las prioridades, es decir se aplica siempre.","title":"Preferencias"},{"location":"cursos/phonegap.html#position","text":"top y left no aplican si position es static . El position: absolute toma el origen de coordenadas del primer contenedor que no es static .","title":"Position"},{"location":"cursos/phonegap.html#display","text":"El display de un div por defecto (useragent stylesheet rules) es block . El de span es inline . Se puede modificar tanto un caso como el otro. Por ejemplo si ponemos display: inline a un div , pasa a comportarse como un span . El display: inline hace que se ignore el width . Con display: inline-block s\u00ed que se tiene en cuenta el width . Hay un truco para conservar la indentaci\u00f3n en el c\u00f3digo HTML mientras se evita que se introduzca un car\u00e1cter espacio que ocupa sitio y descoloca la maquetaci\u00f3n y es introducir un comentario entre l\u00edneas de esta forma: 1 2 3 4 5 6 < section > \u2026 </ section > <!-- --> < section > \u2026 </ section >","title":"Display"},{"location":"cursos/phonegap.html#float","text":"La propiedad clear s\u00f3lo funciona si el display no es inline . Se usa mucho el apa\u00f1o del clearfix para solucionar la p\u00e9rdida de dimensi\u00f3n vertical de un contenedor cuando todo su contenido m\u00e1s alto flota. El selector :after selecciona despu\u00e9s del contenido al que se aplica el estilo, no el contenido del siguiente elemento en el DOM. El clearfix favorito de Javier es: 1 2 3 4 5 6 7 . clearfix : after { content : \".\" ; visibility : hidden ; display : block ; height : 0 ; clear : both ; }","title":"Float"},{"location":"cursos/phonegap.html#viewport","text":"Diferencia entre layout-viewport y display-viewport. La relaci\u00f3n entre ambos es el nivel de zoom. El layout-viewport predeterminado es 960px. Se defini\u00f3 pixel-ratio cuando apareci\u00f3 iPhone 4, inicialmente con un valor de 2 (pantalla retina de 640px de ancho por los 320px del iPhone original). Terminales con pantallas QuadHD tienen un pixel-ratio de alrededor de 4. Tiene el inconveniente de que hace que las im\u00e1genes se redimensionen, lo que en terminales con mucha densidad de pixel produce desenfoque. La soluci\u00f3n es enviar la imagen adecuada a cada dispositivo. De momento se hace con condiciones en CSS.","title":"viewport"},{"location":"cursos/phonegap.html#mediaqueries","text":"Permite hacer condiciones en CSS. @media es un if. En las mediaqueries los em son siempre rem es decir son absolutos, no relativos. M\u00e1s que hablar de resoluciones debemos pensar en tama\u00f1os. Se suelen considerar cuatro tama\u00f1os: M\u00f3vil: 360 px CSS Tablet: 768 px CSS Desktop: 1200 px CSS TV","title":"mediaqueries"},{"location":"cursos/phonegap.html#tipografia","text":"La tipograf\u00eda cada vez tiene m\u00e1s importancia. Para pantalla, Javier no recomienda Helvetica. Existen muchos tipos buenos, muy legibles y gratuitos, como: Mozilla Fira Ubuntu Google OpenSans Javier recomienda no descartar las fuentes de pago. La inversi\u00f3n puede tener un impacto muy importante en el proyecto. Algunas foundries: Typekit : Foundry de Adobe. Google Fonts : Foundry de Google. Nos describe el uso de Google Fonts usando el sitio para definir un paquete con dos fuentes.","title":"Tipograf\u00eda"},{"location":"cursos/phonegap.html#frameworks","text":"Algunos framewoks: Bootstrap : es el m\u00e1s importante ahora mismo. El favorito de Javier, sobre todo por su ecosistema. Bootsnipp : Componentes para bootstrap. Foundation Skeleton Ionic : Perfecto para pantallas peque\u00f1as. Ratchet : Tambi\u00e9n para m\u00f3viles. Sencha Touch : Para m\u00f3viles. No recomendado por Javier. jQuery Mobile : No recomendado por Javier.","title":"Frameworks"},{"location":"cursos/phonegap.html#dia-9-viernes-28112014","text":"","title":"D\u00eda 9: Viernes 28/11/2014"},{"location":"cursos/phonegap.html#enlaces_4","text":"UI Bootstrap : Bootstrap adaptado a Angular. Bootsnipp : Galer\u00eda de elementos para Bootstrap. Couchbase Mobile : Plugin Phonegap para tener una base de datos noSQL local con opci\u00f3n de sincronizar con el servidor.","title":"Enlaces"},{"location":"cursos/phonegap.html#bootstrap","text":"En Customize se puede compilar una versi\u00f3n personalizada (s\u00f3lo con los componentes que vayamos a utilizar, lo que adem\u00e1s hace m\u00e1s peque\u00f1a la librer\u00eda). Dentro de este Customize se pueden cambiar por ejemplo los Media queries breakpoints que son los que hacen que el dise\u00f1o cambie entre los distintos tama\u00f1os de pantalla. Es recomendable instalarlo con Bower si se va a integrar en Phonegap (para tenerlo en local y minimizar la latencia que supondr\u00eda el descargarlo). El men\u00fa superior del sitio de Bootstrap est\u00e1 bien estructurado en cuanto a la dificultad de menor a mayor de izquierda a derecha. Conviene leer por lo menos la secci\u00f3n Getting Started . Bootstrap utiliza CDN para minimizar la latencia. Si vamos a utilizar Angular, en lugar de poner bootstrap normal hay que integrar UI Bootstrap que no utiliza jQuery. Es importante meter en la cabecera lo siguiente (aparece en Basic Template ): 1 2 3 < meta charset = \"utf-8\" > < meta http-equiv = \"X-UA-Compatible\" content = \"IE=edge\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1\" > Importante leer todo el documento sobre CSS , sobre todo lo relativo al Grid System y a los Forms . Los componentes que no encontremos en Bootstrap buscarlos en Bootsnipp . Si utilizamos la parte de JS de Bootstrap hay que integrar jQuery.","title":"Bootstrap"},{"location":"cursos/phonegap.html#buenas-practicas-con-bootstrap","text":"Interesa poner siempre un label en los campos de formulario por accesibilidad, pero en pantallas peque\u00f1as se suele usar un placeholder, lo que es redundante. Para evitarlo se oculta a\u00f1adiendo la clase sr-only (sr de Screen Reader), lo que mantiene el label en el c\u00f3digo pero no lo muestra.","title":"Buenas pr\u00e1cticas con Bootstrap"},{"location":"cursos/phonegap.html#javascript","text":"Almacenamiento de un conjunto de variables en localStorage: 1 2 3 4 5 var l1 = [ \"Alice\" , \"Bob\" , \"Charly\" ]; var l2 = [ 1 , 2 , 3 ] var listas = { listaPrincipal : l1 , listaSecundaria : l2 }; var listasComoCadena = JSON . stringify ( listas ); localStorage . setItem ( 'listas' , listasComoCadena );","title":"JavaScript"},{"location":"cursos/phonegap.html#deberes-para-el-fin-de-semana","text":"Landing page con tres zonas y call for action superior (= jumbotron). Qu\u00e9 hacemos Por qu\u00e9 somos buenos Pasta Repasar Closures de JS .","title":"Deberes para el fin de semana"},{"location":"cursos/phonegap.html#dia-10-lunes-1122014","text":"","title":"D\u00eda 10: Lunes 1/12/2014"},{"location":"cursos/phonegap.html#enlaces_5","text":"famo.us : Free, open source JavaScript framework that helps you create smooth, complex UIs for any screen. EggHead : Screencasts.","title":"Enlaces"},{"location":"cursos/phonegap.html#proyecto","text":"Vamos a montar el proyecto poni\u00e9ndolo todo junto desde cero: Creamos el proyecto dentro del directorio \\curso: 1 2 cd \\c urso phonegap create 10Votaciones --name Votaciones --id es.eduardofilo.yesno Nos metemos en el directorio y lanzamos Yeoman para instalar la plantilla web: 1 2 cd 10Votaciones yo Durante la configuraci\u00f3n de Yeoman indicamos que incluya Bootstrap. Configuramos en Gruntile.js (l\u00ednea 21 del fichero que la carpeta de la aplicaci\u00f3n es www en lugar de app que es la que viene por defecto. Movemos carpeta 10Votaciones\\www\\res a 10Votaciones\\res , es decir un nivel hacia arriba. Esta carpeta contiene los recursos que utilizar\u00e1 Phonegap (por ejemplo el icono de escritorio que ajustar\u00e1 en las distintas plataformas). No tiene mucho sentido que est\u00e9 dentro de www ya que Phonegap duplicar\u00e1 hacia el directorio dist los recursos correspondientes a la plataforma con la que estemos trabajando. Si est\u00e1 en www es porque cuando utilizamos el servidor de compilaci\u00f3n de Adobe para montar las aplicaciones nativas, s\u00f3lo pasamos el directorio www y el que contenga res es una forma de enviar todo de una vez. Configuramos en config.xml el movimiento del directorio res que acabamos de hacer. Para ello sustituimos las rutas de los recursos, es decir www/res por res . Borramos el contenido de www y lo sustituimos por el de app . Borramos la carpeta app que ha quedado vac\u00eda. Movemos la carpeta bower_components al interior de www . Cambiamos la configuraci\u00f3n de Bower en el fichero .bowerrc poniendo www/bower_components donde s\u00f3lo pon\u00eda bower_components . Finalmente lanzamos la tarea que inyectar\u00e1 las dependencias entre los ficheros de c\u00f3digo: 1 grunt wiredep Con esto ya tendr\u00edamos la base. Vamos a utilizar el patr\u00f3n MVC. Pondremos tanto el modelo como el controlador en el mismo fichero main.js , aunque ser\u00eda m\u00e1s correcto separarlo. Vamos a hacer una Single Page Application. Cada p\u00e1gina \u201cvirtual\u201d de la app lo vamos a codificar mediante un div de clase pagina . Ese div tendr\u00e1 un atributo personalizado \u201cdata-title\u201d que contendr\u00e1 el t\u00edtulo de la p\u00e1gina. El controlador s\u00f3lo va a hacer: Reacciona a la pantalla Modifica la pantalla Todo lo que no tenga que ver con esto ir\u00e1 al modelo/servicio.","title":"Proyecto"},{"location":"cursos/phonegap.html#dia-11-martes-2122014","text":"","title":"D\u00eda 11: Martes 2/12/2014"},{"location":"cursos/phonegap.html#enlaces_6","text":"history.js","title":"Enlaces"},{"location":"cursos/phonegap.html#proyecto_1","text":"Vamos a programar el env\u00edo del voto al servidor (mockable) en un POST. El voto va en la URL por lo que aunque utilicemos https no ocultamos la informaci\u00f3n. Ser\u00eda m\u00e1s correcto enviar el voto en el cuerpo del POST, por ejemplo: 1 2 var url = this . URL_POST_NUEVO_VOTO . replace ( '{value}' , tipoDeVoto ); var promesa = $ . post ( url , { value : \u2018 yes \u2019 }); En segundo lugar programamos la gesti\u00f3n de la navegaci\u00f3n, es decir c\u00f3mo cambia la aplicaci\u00f3n de pantalla, ya sea hacia delante o hacia atr\u00e1s (incluyendo por ejemplo el evento \u201cBack\u201d del dispositivo que equivale al bot\u00f3n \u201cAtr\u00e1s\u201d del navegador). Javier nos comenta el truco de a\u00f1adir anchors (#) a la URL. Con esto se consigue que no se recargue el documento y que s\u00ed afecte al historial. Como nuestra app es SPA nos viene muy bien este truco. En Phonegap, la tecla \u201cAtr\u00e1s\u201d de los dispositivos equivale al Back del WebView. La gesti\u00f3n del historial la vamos a hacer con history.js . Buscamos/instalamos history.js con Bower ( --save actualiza el fichero bower.json con lo que hacemos que la inclusi\u00f3n de este componente sea persistente, es decir, si luego borramos los componentes, para no subirlos al control de versiones por ejemplo, lo podremos recuperar f\u00e1cilmente): 1 2 bower search history bower install --save history.js Inyectamos dependencias ( grunt wiredep no funciona => hay que mirar en la documentaci\u00f3n). Elegimos la librer\u00eda que nos conviene consultando la documentaci\u00f3n. En index.html incluimos la referencia en el bloque scripts/main.js del build.js final: 1 < script src = \"bower_components/history.js/scripts/bundled/html4+html5/native.history.js\" ></ script > Con history.js manejamos el historial del navegador/webview por medio del objeto History . El objeto history ser\u00eda la parte nativa del navegador. En muchas ocasiones se comportan igual. Los par\u00e1metros de la funci\u00f3n pushState tanto de history como de History son: 1 2 3 history . pushState ({ id : idDestino }, $ ( '#' + idDestion ). attr ( 'data-title' ), idDestion ); Objeto arbitrario en el que podemos almacenar datos Descripci\u00f3n o T\u00edtulo de esa entrada en el historial Direcci\u00f3n/URL","title":"Proyecto"},{"location":"cursos/phonegap.html#dia-12-miercoles-3122014","text":"","title":"D\u00eda 12: Mi\u00e9rcoles 3/12/2014"},{"location":"cursos/phonegap.html#enlaces_7","text":"Using Location Hash To Enable BACK/FORWARD Navigation Web Fundamentals : C\u00f3mo adaptar experiencias web a dispositivos de distintos tama\u00f1os. seen.js : Render 3D scenes into SVG or HTML5 Canvas. jQuery-Color : Animaciones con colores. Removing the 300ms tap delay in Chrome 32 : Se hace con la librer\u00eda fastclick . QuoJS : Librer\u00eda de gestures. HammerJS : Librer\u00eda de gestures. TouchSwipe-Jquery-Plugin : Librer\u00eda de swipes. iScroll : Librer\u00eda para gestionar listas y los eventos f\u00edsicos de arrastre. CancelBubble : Cuenta de Twitter que comenta muchas librer\u00edas buenas. r/javascript : Subreddit de Javascript en el que comentan tambi\u00e9n librer\u00edas. Q : Librer\u00eda js para la gesti\u00f3n de promesas.","title":"Enlaces"},{"location":"cursos/phonegap.html#proyecto_2","text":"document recibe todos los eventos. Implementamos un cartel \u201cCargando\u2026\u201d que aparece/desaparece cuando hay peticiones AJAX mientras se espera la respuesta del servidor. Se gestiona mediante los eventos ajaxStart y ajaxStop . Instalamos jQuery-Color para hacer un efecto de transici\u00f3n al jumbotron: Buscamos/instalamos: 1 2 bower search jquery-color bower install --save jquery-color Inyectamos la librer\u00eda a mano al final del index.html ya que Bower no puede: 1 < script src = \"bower_components/jquery-color/jquery.color.js\" ></ script > Hasta ahora hab\u00eda algo mal en el proyecto. No esper\u00e1bamos a que cargara el DOM ni jQuery. Para conseguirlo envolvemos la funci\u00f3n de inicializaci\u00f3n de la siguiente forma: 1 2 3 $ ( document ). ready ( function () { controlador . inicializar (); }); Vemos una forma de desactivar el highlight en el tap que hace el sistema operativo en WindowsPhone. Se consigue a\u00f1adiendo la siguiente etiqueta meta en el head del HTML: 1 < meta name = \"msapplication-tap-highlight\" content = \"no\" /> Vamos a programar un gesto para volver a la pantalla de votaciones desde resultados. Instalamos TouchSwipe-Jquery-Plugin : Buscamos/instalamos: 1 2 bower search touchswipe bower install --save jquery-touchswipe Sustituimos el servicio votar para que guarde en local. Hay que generar promesa. Se puede hacer con la librer\u00eda Q o con jQuery . Lo hacemos as\u00ed: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var servicioPreguntas = { //... votar : function ( tipoDeVoto ) { localStorage . setItem ( 'voto' , tipoDeVoto ); var deferred = $ . Deferred (); var promesa = deferred . promise (); deferred . resolve ({ total : 0 , positives : 0 , negatives : 0 }); return promesa ; } };","title":"Proyecto"},{"location":"cursos/phonegap.html#dia-13-jueves-4122014","text":"","title":"D\u00eda 13: Jueves 4/12/2014"},{"location":"cursos/phonegap.html#enlaces_8","text":"Documentaci\u00f3n Phonegap Command Line Documentaci\u00f3n Phonegap Plugins API Repositorio de Cordova Plugins La estafa de la linterna molona que ilumina m\u00e1s en Android InfoTelefonoPlugin : Plugin de Javier para obtener datos de identificaci\u00f3n del tel\u00e9fono.","title":"Enlaces"},{"location":"cursos/phonegap.html#proyecto-plugins","text":"Vamos a hacer una peque\u00f1a aplicaci\u00f3n para consultar la geolocalizaci\u00f3n: Creamos el proyecto: 1 2 cd \\c urso ` phonegap create 13GeoDemo --name GeoDemo --id es.eduardofilo.geodemo A\u00f1adimos el plugin de geolocalizaci\u00f3n: 1 2 cd 13GeoDemo phonegap plugin add org.apache.cordova.geolocation Buscar el c\u00f3digo nativo para Android en git . Javier no recomienda getCurrentPosition porque da timeout r\u00e1pidamente si est\u00e1s en HighAccuracy. Mejor con watchPosition. Vamos a ver c\u00f3mo se crear\u00eda un plugin. Para ello instalamos un plugin hecho por Javier y estudiamos detenidamente su sencillo c\u00f3digo: Creamos el proyecto: 1 2 cd \\c urso phonegap create 13 .1DatosTelefono --name DatosTelefono --id es.eduardofilo.datostfn A\u00f1adimos el plugin de Javier : 1 2 cd 13 .1DatosTelefono phonegap plugin add https://github.com/ciberado/domina-phonegap-infotelefonoplugin.git","title":"Proyecto Plugins"},{"location":"cursos/phonegap.html#dia-14-viernes-5122014","text":"","title":"D\u00eda 14: Viernes 5/12/2014"},{"location":"cursos/phonegap.html#enlaces_9","text":"Cordova Device Motion Plugin MakeAppIcon Web2Splash Pastebin de Javier Adobe PhoneGap Build c9 : IDE web.","title":"Enlaces"},{"location":"cursos/phonegap.html#proyecto-plugins_1","text":"Continuamos con el proyecto de ayer: Comprobamos la instalaci\u00f3n: 1 phonegap plugin list","title":"Proyecto Plugins"},{"location":"cursos/phonegap.html#proyecto-acelerometro","text":"Vamos a hacer un peque\u00f1o proyecto que controlar\u00e1 un peque\u00f1o cuadrado por pantalla con los aceler\u00f3metros del tel\u00e9fono. En el proyecto haremos uso del plugin oficial de Phonegap que se encarga de acceder al dispositivo. Creamos el proyecto: 1 phonegap create 14DemoAcelerometro --name DemoAcelerometro --id es.eduardofilo.demoaccel Instalamos plugin: 1 phonegap plugin add org.apache.cordova.device-motion Por defecto watchAcceleration llama al callback cada 10 segundos: 1 2 3 4 var watchID = navigator . accelerometer . watchAcceleration ( accelerometerSuccess , accelerometerError , accelerometerOptions ); accelerometerOptions : An object with the following optional keys: period : requested period of calls to accelerometerSuccess with acceleration data in Milliseconds.(Number) (Default: 10000) Para conseguir que la aplicaci\u00f3n sea m\u00e1s \"responsiva\", se puede cambiar el periodo de consulta pasando un objeto con un par\u00e1metro de clave frecuency en su interior (aunque la documentaci\u00f3n menciona period , es frecuency ). Hubiera funcionado cada segundo por ejemplo llamando al watchAcceleration as\u00ed: 1 2 var options = { frequency : 1000 }; var watchID = navigator . accelerometer . watchAcceleration ( onSuccess , onError , options );","title":"Proyecto Aceler\u00f3metro"},{"location":"cursos/phonegap.html#subir-a-google-play","text":"Para generar un certificado con que firmar las aplicaciones: 1 $ keytool -genkey -alias demoiconos -keyalg RSA -validity 20000 -keystore demoiconos.keystore","title":"Subir a Google Play"},{"location":"cursos/phonegap.html#compilar-en-adobe-phonegap-build","text":"Para delegar la construcci\u00f3n del proyecto en el servicio de compilaci\u00f3n de Adobe en la nube : 1 $ phonegap remote build android Se puede firmar la aplicaci\u00f3n desde Adobe subiendo el fichero keystore que hemos creado antes.","title":"Compilar en Adobe PhoneGap Build"},{"location":"cursos/phonegap.html#inicializacion-del-controlador","text":"Si usamos jQuery: 1 2 3 4 5 $ ( document ). ready ( function () { document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); }); }); Si no usamos jQuery: 1 2 3 document . addEventListener ( 'deviceready' , function () { controlador . inicializar (); });","title":"Inicializaci\u00f3n del controlador"},{"location":"cursos/phonegap.html#pendiente-de-preguntar","text":"JSONP vs CORS Workspaces en Chrome.","title":"Pendiente de preguntar"},{"location":"desarrollo/android.html","text":"Android \u00b6 Entorno \u00b6 Todos los drivers para instalar ADB en Windows sin morir en el intento Compilaci\u00f3n AOSP \u00b6 Getting Started: Building Android From Source How to Build an Android ROM Documentaci\u00f3n clave \u00b6 ID's de los View's Tips varios \u00b6 Activity restart on rotation Android Lint, eliminando la pelusa de nuestras aplicaciones Librer\u00edas \u00b6 RoboGuice la librer\u00eda que exprime nuestro c\u00f3digo OrmLite - Lightweight Object Relational Mapping (ORM) Java Package Mobile Framework that uses the actual features of #HTML5, #CSS3 and #JavaScript Tutoriales \u00b6 Android Development Tutorial (Lars Vogel) Android ListView and ListActivity (Lars Vogel) Pasando informaci\u00f3n entre Actividades (Activity) en Android Avoid memory leaks on Android Snippets \u00b6 WikiDroid Categor\u00eda Android en WikiCode Androcode Android Snippets Estructuras de datos \u00b6 Android DataFramework, creando la estructura de la Base de Datos Usando Android DataFramework en nuestro proyecto Sobre Dise\u00f1o \u00b6 Hello, Views Common Layout Objects Android Interaction Desing Patterns :!: Icon Design Guidelines Widget Design Guidelines Android App Developers GUI Kits, Icons, Fonts and Tools Android R Drawable Explorer 20 herramientas \u00fatiles para Desarrolladores Android Android Design El cambio de tendencia en la UI de Android: el Men\u00fa Lateral Mapas \u00b6 Obtener APIKey Tu clave es: 1 0V21y2J7NRVSVKA...5C9Ag Esta clave es v\u00e1lida para todas las aplicaciones firmadas con el certificado cuya huella dactilar sea: 1 C2 : EC : 22 : 8 F :...: 56 : 39 Incluimos un dise\u00f1o xml de ejemplo para que puedas iniciarte por los senderos de la creaci\u00f3n de mapas: 1 2 3 4 5 <com.google.android.maps.MapView android:layout_width= \"fill_parent\" android:layout_height= \"fill_parent\" android:apiKey= \"0V21y2J7NRVSVKA...5C9Ag\" /> Depurar \u00b6 A\u00f1adir el atributo siguiente al bloque \"application\": 1 android : debuggable = \"true\" Solicitar el permiso siguiente: 1 <uses-permission android:name=\"android.permission.SET_DEBUG_APP\" /> Logcat filtrado \u00b6 Ejemplo de una expresi\u00f3n de filtrado que suprime (silencia) todos los mensajes de log excepto los que tienen el tag \"ActivityManager\" con una prioridad Info o superior, y los que tienen el tag \"MyApp\" con una prioridad Debug o superior: 1 $ adb logcat ActivityManager:I MyApp:D *:S Las prioridades de log son: V \u2014 Verbose (lowest priority) D \u2014 Debug I \u2014 Info W \u2014 Warning E \u2014 Error F \u2014 Fatal S \u2014 Silent (highest priority, on which nothing is ever printed) Dumpsys y Dumpstate \u00b6 Hace un volcado de los datos del sistema. Viene bien para encontrar componentes instalados (Aplicaciones, ContentProvider's, etc.): 1 $ adb shell dumpsys 1 $ adb shell dumpstate Buscar CallerID \u00b6 1 2 3 4 5 6 import android.database.Cursor ; import android.net.Uri ; import android.provider.ContactsContract ; Uri uri = Uri . withAppendedPath ( ContactsContract . PhoneLookup . CONTENT_FILTER_URI , Uri . encode ( \"+34976010101\" )); Cursor c = getContentResolver (). query ( uri , new String []{ ContactsContract . PhoneLookup . DISPLAY_NAME }, null , null , null ); Manejo de URI's de contactos \u00b6 La API de Contacts de Android es muy potente y compleja. Los conceptos b\u00e1sicos se describen aqu\u00ed . Se manejan dos tipos de URI's: URI's de tipo tabla: Apuntan por ejemplo a una tabla completa como puede ser la de RawContacts. URI's de tipo item: Apuntan a un registro concreto de una tabla, por ejemplo un RawContact. URI de la tabla ra\u00edz Contacts \u00b6 1 2 3 import android.net.Uri ; import android.provider.ContactsContract ; Uri contactsUri = ContactsContract . Contacts . CONTENT_URI ; URI de la subtabla RawContacts \u00b6 1 2 3 import android.net.Uri ; import android.provider.ContactsContract ; Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ; URI de la subtabla Data \u00b6 1 2 3 import android.net.Uri ; import android.provider.ContactsContract ; Uri datasUri = ContactsContract . Data . CONTENT_URI ; URI de la subtabla Data s\u00f3lo con los registros de un RawContact concreto \u00b6 1 2 3 4 import android.net.Uri ; import android.provider.ContactsContract ; // Tenemos en rawContactUri el URI de un RawContact. Ser\u00e1 del tipo content://com.android.contacts/raw_contacts/_id Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY ); Obtener ID a partir de una URI de tipo item \u00b6 Por ejemplo el m\u00e9todo para insertar un RawContact devuelve una URI de tipo item (no tabla). Para obtener el ID de dicho elemento podemos usar algunas funciones que hay en la clase ''android.content.ContentUris''. 1 2 import android.content.ContentUris ; long rawContactId = ContentUris . parseId ( rawContactUri ); Obtener la URI de tipo item de un elemento concreto a partir de la tabla \u00b6 Por ejemplo tenemos el ID de un elemento y queremos una URI para \u00e9l. 1 2 3 4 import android.net.Uri ; import android.provider.ContactsContract ; import android.content.ContentUris ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Resumiendo: Significado URI (string) URI (constant) URI de toda la tabla RawContacts content://com.android.contacts/raw_contacts Uri rawContactsUri = android.provider.ContactsContract.RawContacts.CONTENT_URI URI de un registro concreto de RawContacts content://com.android.contacts/raw_contacts/<_id> Uri rawContactUri = ContentUris.withAppendedId(android.provider.ContactsContract.RawContacts.CONTENT_URI, rawContactId); URI de una subtabla (subdirectorio lo llaman en la documentaci\u00f3n) con los Datas asociados a un RawContact concreto content://com.android.contacts/raw_contacts/<_id>/entity Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY); Obtener el ID de un recurso en el ContentProvider de audio externo \u00b6 1 2 3 4 5 6 7 8 9 10 11 String outText = \"\" ; Uri externalMediaUri = android . provider . MediaStore . Audio . Media . EXTERNAL_CONTENT_URI ; String [] projection = new String [] { android . provider . BaseColumns . _ID }; String where = android . provider . MediaStore . MediaColumns . TITLE + \"=?\" ; String [] whereArgs = new String [] { \"Space Oddity\" }; Cursor c = managedQuery ( externalMediaUri , projection , where , whereArgs , null ); while ( c . moveToNext ()) { for ( int i = 0 ; i < c . getColumnCount (); i ++) { outText += c . getColumnName ( i ) + \"= \" + c . getString ( i ) + \"\\n\" ; } } Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\" \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation >(); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Felipito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Photo . CONTENT_ITEM_TYPE ); ByteArrayOutputStream stream = new ByteArrayOutputStream (); bitmap . compress ( Bitmap . CompressFormat . JPEG , 75 , stream ); builder . withValue ( CommonDataKinds . Photo . PHOTO , stream . toByteArray ()); builder . withValue ( RawContacts . Data . IS_SUPER_PRIMARY , 1 ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); } Extraer el nombre, el n\u00famero y la foto de los Contacts de tipo \"vnd.sec.contact.phone\" \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ; String [] projection = new String [] { ContactsContract . RawContacts . _ID }; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=? AND \" + ContactsContract . RawContacts . ACCOUNT_NAME + \"=? AND \" + ContactsContract . RawContacts . DELETED + \"=?\" ; String [] whereArgs = new String [] { \"vnd.sec.contact.phone\" , \"vnd.sec.contact.phone\" , \"0\" }; String sortOrder = \"display_name ASC\" ; Cursor c = managedQuery ( rawContactsUri , projection , where , whereArgs , sortOrder ); outText += rawContactsUri . toString () + \"\\n\" ; outText += c . getCount () + \"\\n\" ; while ( c . moveToNext ()) { int colPos = c . getColumnIndex ( ContactsContract . RawContacts . _ID ); long rawContactId = Long . parseLong ( c . getString ( colPos )); Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY ); String name = \"\" ; String number = \"\" ; Bitmap bitmap = null ; String [] projection1 = new String [] { CommonDataKinds . StructuredName . DISPLAY_NAME }; String where1 = Data . MIMETYPE + \"=?\" ; String [] whereArgs1 = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE }; Cursor c1 = managedQuery ( datasUri , projection1 , where1 , whereArgs1 , null ); if ( c1 . moveToNext ()) { name = c1 . getString ( c1 . getColumnIndex ( CommonDataKinds . StructuredName . DISPLAY_NAME )); c1 . close (); } String [] projection2 = new String [] { CommonDataKinds . Phone . NUMBER }; String where2 = Data . MIMETYPE + \"=?\" ; String [] whereArgs2 = new String [] { CommonDataKinds . Phone . CONTENT_ITEM_TYPE }; Cursor c2 = managedQuery ( datasUri , projection2 , where2 , whereArgs2 , null ); if ( c2 . moveToNext ()) { number = c2 . getString ( c2 . getColumnIndex ( CommonDataKinds . Phone . NUMBER )); c2 . close (); } String [] projection3 = new String [] { CommonDataKinds . Photo . PHOTO }; String where3 = Data . MIMETYPE + \"=?\" ; String [] whereArgs3 = new String [] { CommonDataKinds . Photo . CONTENT_ITEM_TYPE }; Cursor c3 = managedQuery ( datasUri , projection3 , where3 , whereArgs3 , null ); if ( c3 . moveToNext ()) { byte [] photo = c3 . getBlob ( c3 . getColumnIndex ( CommonDataKinds . Photo . PHOTO )); bitmap = BitmapFactory . decodeByteArray ( photo , 0 , photo . length ); c3 . close (); } outText += \"ID= \" + rawContactId + \"; Nombre= \" + name + \"; N\u00famero= \" + number ; if ( bitmap != null ) { outText += \"; Ancho foto= \" + bitmap . getWidth () + \"; Alto foto= \" + bitmap . getHeight (); } outText += \"\\n\" ; } c . close (); Borrado de los contactos de un tipo \u00b6 1 2 3 4 Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=?\" ; String [] whereArgs = new String [] { \"es.eduardofilo.app\" }; getContentResolver (). delete ( rawContacts , where , whereArgs ); Borrado de un contacto \u00b6 1 2 3 Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , 13 ); getContentResolver (). delete ( rawContactUri , null , null ); Actualizar el nombre de un contacto \u00b6 1 2 3 4 5 6 7 long rawContactId = 14 ; Uri data = ContactsContract . Data . CONTENT_URI ; ContentValues values = new ContentValues (); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Jorgito\" ); String where = Data . MIMETYPE + \"=? AND \" + ContactsContract . Data . RAW_CONTACT_ID + \"=?\" ; String [] whereArgs = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE , Long . toString ( rawContactId ) }; getContentResolver (). update ( data , values , where , whereArgs ); Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\" \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ContentValues values = new ContentValues (); values . put ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); values . put ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); Uri rawContactUri = getContentResolver (). insert ( RawContacts . CONTENT_URI , values ); long rawContactId = ContentUris . parseId ( rawContactUri ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Pepito\" ); Uri data1Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); values . put ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); Uri data2Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values ); Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\" \u00b6 Igual que antes pero hecho con el sistema de operaciones por lotes de los ContentProvider's. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation >(); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Debianito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); } Localizar un Launcher que no sea el nuestro \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 PackageManager pm = getPackageManager (); Intent intent = new Intent ( Intent . ACTION_MAIN ); intent . addCategory ( Intent . CATEGORY_HOME ); List < ResolveInfo > launchers = pm . queryIntentActivities ( intent , 0 ); String packageName = null ; String name = null ; for ( ResolveInfo ri : launchers ) { if (! ri . activityInfo . name . equals ( \"es.eduardofilo.app.mobile.IdentificarTerminal\" )) { name = ri . activityInfo . name ; packageName = ri . activityInfo . packageName ; break ; } } Intent myIntent = new Intent (); myIntent . setClassName ( packageName , name ); startActivity ( myIntent ); Obtener un authToken de un Account \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mAccountManager = AccountManager . get ( this ); Account [] accounts = mAccountManager . getAccountsByType ( ACCOUNT_TYPE ); for ( Account account : accounts ) { outText += account . toString () + \"\\n\" ; AccountManagerFuture < Bundle > accountManagerFuture = mAccountManager . getAuthToken ( account , \"es.eduardofilo.app\" , true , null , null ); Bundle authTokenBundle ; String token = null ; try { authTokenBundle = accountManagerFuture . getResult (); token = authTokenBundle . get ( AccountManager . KEY_AUTHTOKEN ). toString (); } catch ( OperationCanceledException e ) { e . printStackTrace (); } catch ( AuthenticatorException e ) { e . printStackTrace (); } catch ( IOException e ) { e . printStackTrace (); } if (! TextUtils . isEmpty ( token )) { outText += token + \"\\n\" ; } }","title":"Android"},{"location":"desarrollo/android.html#android","text":"","title":"Android"},{"location":"desarrollo/android.html#entorno","text":"Todos los drivers para instalar ADB en Windows sin morir en el intento","title":"Entorno"},{"location":"desarrollo/android.html#compilacion-aosp","text":"Getting Started: Building Android From Source How to Build an Android ROM","title":"Compilaci\u00f3n AOSP"},{"location":"desarrollo/android.html#documentacion-clave","text":"ID's de los View's","title":"Documentaci\u00f3n clave"},{"location":"desarrollo/android.html#tips-varios","text":"Activity restart on rotation Android Lint, eliminando la pelusa de nuestras aplicaciones","title":"Tips varios"},{"location":"desarrollo/android.html#librerias","text":"RoboGuice la librer\u00eda que exprime nuestro c\u00f3digo OrmLite - Lightweight Object Relational Mapping (ORM) Java Package Mobile Framework that uses the actual features of #HTML5, #CSS3 and #JavaScript","title":"Librer\u00edas"},{"location":"desarrollo/android.html#tutoriales","text":"Android Development Tutorial (Lars Vogel) Android ListView and ListActivity (Lars Vogel) Pasando informaci\u00f3n entre Actividades (Activity) en Android Avoid memory leaks on Android","title":"Tutoriales"},{"location":"desarrollo/android.html#snippets","text":"WikiDroid Categor\u00eda Android en WikiCode Androcode Android Snippets","title":"Snippets"},{"location":"desarrollo/android.html#estructuras-de-datos","text":"Android DataFramework, creando la estructura de la Base de Datos Usando Android DataFramework en nuestro proyecto","title":"Estructuras de datos"},{"location":"desarrollo/android.html#sobre-diseno","text":"Hello, Views Common Layout Objects Android Interaction Desing Patterns :!: Icon Design Guidelines Widget Design Guidelines Android App Developers GUI Kits, Icons, Fonts and Tools Android R Drawable Explorer 20 herramientas \u00fatiles para Desarrolladores Android Android Design El cambio de tendencia en la UI de Android: el Men\u00fa Lateral","title":"Sobre Dise\u00f1o"},{"location":"desarrollo/android.html#mapas","text":"Obtener APIKey Tu clave es: 1 0V21y2J7NRVSVKA...5C9Ag Esta clave es v\u00e1lida para todas las aplicaciones firmadas con el certificado cuya huella dactilar sea: 1 C2 : EC : 22 : 8 F :...: 56 : 39 Incluimos un dise\u00f1o xml de ejemplo para que puedas iniciarte por los senderos de la creaci\u00f3n de mapas: 1 2 3 4 5 <com.google.android.maps.MapView android:layout_width= \"fill_parent\" android:layout_height= \"fill_parent\" android:apiKey= \"0V21y2J7NRVSVKA...5C9Ag\" />","title":"Mapas"},{"location":"desarrollo/android.html#depurar","text":"A\u00f1adir el atributo siguiente al bloque \"application\": 1 android : debuggable = \"true\" Solicitar el permiso siguiente: 1 <uses-permission android:name=\"android.permission.SET_DEBUG_APP\" />","title":"Depurar"},{"location":"desarrollo/android.html#logcat-filtrado","text":"Ejemplo de una expresi\u00f3n de filtrado que suprime (silencia) todos los mensajes de log excepto los que tienen el tag \"ActivityManager\" con una prioridad Info o superior, y los que tienen el tag \"MyApp\" con una prioridad Debug o superior: 1 $ adb logcat ActivityManager:I MyApp:D *:S Las prioridades de log son: V \u2014 Verbose (lowest priority) D \u2014 Debug I \u2014 Info W \u2014 Warning E \u2014 Error F \u2014 Fatal S \u2014 Silent (highest priority, on which nothing is ever printed)","title":"Logcat filtrado"},{"location":"desarrollo/android.html#dumpsys-y-dumpstate","text":"Hace un volcado de los datos del sistema. Viene bien para encontrar componentes instalados (Aplicaciones, ContentProvider's, etc.): 1 $ adb shell dumpsys 1 $ adb shell dumpstate","title":"Dumpsys y Dumpstate"},{"location":"desarrollo/android.html#buscar-callerid","text":"1 2 3 4 5 6 import android.database.Cursor ; import android.net.Uri ; import android.provider.ContactsContract ; Uri uri = Uri . withAppendedPath ( ContactsContract . PhoneLookup . CONTENT_FILTER_URI , Uri . encode ( \"+34976010101\" )); Cursor c = getContentResolver (). query ( uri , new String []{ ContactsContract . PhoneLookup . DISPLAY_NAME }, null , null , null );","title":"Buscar CallerID"},{"location":"desarrollo/android.html#manejo-de-uris-de-contactos","text":"La API de Contacts de Android es muy potente y compleja. Los conceptos b\u00e1sicos se describen aqu\u00ed . Se manejan dos tipos de URI's: URI's de tipo tabla: Apuntan por ejemplo a una tabla completa como puede ser la de RawContacts. URI's de tipo item: Apuntan a un registro concreto de una tabla, por ejemplo un RawContact.","title":"Manejo de URI's de contactos"},{"location":"desarrollo/android.html#uri-de-la-tabla-raiz-contacts","text":"1 2 3 import android.net.Uri ; import android.provider.ContactsContract ; Uri contactsUri = ContactsContract . Contacts . CONTENT_URI ;","title":"URI de la tabla ra\u00edz Contacts"},{"location":"desarrollo/android.html#uri-de-la-subtabla-rawcontacts","text":"1 2 3 import android.net.Uri ; import android.provider.ContactsContract ; Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ;","title":"URI de la subtabla RawContacts"},{"location":"desarrollo/android.html#uri-de-la-subtabla-data","text":"1 2 3 import android.net.Uri ; import android.provider.ContactsContract ; Uri datasUri = ContactsContract . Data . CONTENT_URI ;","title":"URI de la subtabla Data"},{"location":"desarrollo/android.html#uri-de-la-subtabla-data-solo-con-los-registros-de-un-rawcontact-concreto","text":"1 2 3 4 import android.net.Uri ; import android.provider.ContactsContract ; // Tenemos en rawContactUri el URI de un RawContact. Ser\u00e1 del tipo content://com.android.contacts/raw_contacts/_id Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY );","title":"URI de la subtabla Data s\u00f3lo con los registros de un RawContact concreto"},{"location":"desarrollo/android.html#obtener-id-a-partir-de-una-uri-de-tipo-item","text":"Por ejemplo el m\u00e9todo para insertar un RawContact devuelve una URI de tipo item (no tabla). Para obtener el ID de dicho elemento podemos usar algunas funciones que hay en la clase ''android.content.ContentUris''. 1 2 import android.content.ContentUris ; long rawContactId = ContentUris . parseId ( rawContactUri );","title":"Obtener ID a partir de una URI de tipo item"},{"location":"desarrollo/android.html#obtener-la-uri-de-tipo-item-de-un-elemento-concreto-a-partir-de-la-tabla","text":"Por ejemplo tenemos el ID de un elemento y queremos una URI para \u00e9l. 1 2 3 4 import android.net.Uri ; import android.provider.ContactsContract ; import android.content.ContentUris ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Resumiendo: Significado URI (string) URI (constant) URI de toda la tabla RawContacts content://com.android.contacts/raw_contacts Uri rawContactsUri = android.provider.ContactsContract.RawContacts.CONTENT_URI URI de un registro concreto de RawContacts content://com.android.contacts/raw_contacts/<_id> Uri rawContactUri = ContentUris.withAppendedId(android.provider.ContactsContract.RawContacts.CONTENT_URI, rawContactId); URI de una subtabla (subdirectorio lo llaman en la documentaci\u00f3n) con los Datas asociados a un RawContact concreto content://com.android.contacts/raw_contacts/<_id>/entity Uri datasUri = Uri.withAppendedPath(rawContactUri, RawContacts.Entity.CONTENT_DIRECTORY);","title":"Obtener la URI de tipo item de un elemento concreto a partir de la tabla"},{"location":"desarrollo/android.html#obtener-el-id-de-un-recurso-en-el-contentprovider-de-audio-externo","text":"1 2 3 4 5 6 7 8 9 10 11 String outText = \"\" ; Uri externalMediaUri = android . provider . MediaStore . Audio . Media . EXTERNAL_CONTENT_URI ; String [] projection = new String [] { android . provider . BaseColumns . _ID }; String where = android . provider . MediaStore . MediaColumns . TITLE + \"=?\" ; String [] whereArgs = new String [] { \"Space Oddity\" }; Cursor c = managedQuery ( externalMediaUri , projection , where , whereArgs , null ); while ( c . moveToNext ()) { for ( int i = 0 ; i < c . getColumnCount (); i ++) { outText += c . getColumnName ( i ) + \"= \" + c . getString ( i ) + \"\\n\" ; } }","title":"Obtener el ID de un recurso en el ContentProvider de audio externo"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation >(); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Felipito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Photo . CONTENT_ITEM_TYPE ); ByteArrayOutputStream stream = new ByteArrayOutputStream (); bitmap . compress ( Bitmap . CompressFormat . JPEG , 75 , stream ); builder . withValue ( CommonDataKinds . Photo . PHOTO , stream . toByteArray ()); builder . withValue ( RawContacts . Data . IS_SUPER_PRIMARY , 1 ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); }","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#extraer-el-nombre-el-numero-y-la-foto-de-los-contacts-de-tipo-vndseccontactphone","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 Uri rawContactsUri = ContactsContract . RawContacts . CONTENT_URI ; String [] projection = new String [] { ContactsContract . RawContacts . _ID }; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=? AND \" + ContactsContract . RawContacts . ACCOUNT_NAME + \"=? AND \" + ContactsContract . RawContacts . DELETED + \"=?\" ; String [] whereArgs = new String [] { \"vnd.sec.contact.phone\" , \"vnd.sec.contact.phone\" , \"0\" }; String sortOrder = \"display_name ASC\" ; Cursor c = managedQuery ( rawContactsUri , projection , where , whereArgs , sortOrder ); outText += rawContactsUri . toString () + \"\\n\" ; outText += c . getCount () + \"\\n\" ; while ( c . moveToNext ()) { int colPos = c . getColumnIndex ( ContactsContract . RawContacts . _ID ); long rawContactId = Long . parseLong ( c . getString ( colPos )); Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , rawContactId ); Uri datasUri = Uri . withAppendedPath ( rawContactUri , RawContacts . Entity . CONTENT_DIRECTORY ); String name = \"\" ; String number = \"\" ; Bitmap bitmap = null ; String [] projection1 = new String [] { CommonDataKinds . StructuredName . DISPLAY_NAME }; String where1 = Data . MIMETYPE + \"=?\" ; String [] whereArgs1 = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE }; Cursor c1 = managedQuery ( datasUri , projection1 , where1 , whereArgs1 , null ); if ( c1 . moveToNext ()) { name = c1 . getString ( c1 . getColumnIndex ( CommonDataKinds . StructuredName . DISPLAY_NAME )); c1 . close (); } String [] projection2 = new String [] { CommonDataKinds . Phone . NUMBER }; String where2 = Data . MIMETYPE + \"=?\" ; String [] whereArgs2 = new String [] { CommonDataKinds . Phone . CONTENT_ITEM_TYPE }; Cursor c2 = managedQuery ( datasUri , projection2 , where2 , whereArgs2 , null ); if ( c2 . moveToNext ()) { number = c2 . getString ( c2 . getColumnIndex ( CommonDataKinds . Phone . NUMBER )); c2 . close (); } String [] projection3 = new String [] { CommonDataKinds . Photo . PHOTO }; String where3 = Data . MIMETYPE + \"=?\" ; String [] whereArgs3 = new String [] { CommonDataKinds . Photo . CONTENT_ITEM_TYPE }; Cursor c3 = managedQuery ( datasUri , projection3 , where3 , whereArgs3 , null ); if ( c3 . moveToNext ()) { byte [] photo = c3 . getBlob ( c3 . getColumnIndex ( CommonDataKinds . Photo . PHOTO )); bitmap = BitmapFactory . decodeByteArray ( photo , 0 , photo . length ); c3 . close (); } outText += \"ID= \" + rawContactId + \"; Nombre= \" + name + \"; N\u00famero= \" + number ; if ( bitmap != null ) { outText += \"; Ancho foto= \" + bitmap . getWidth () + \"; Alto foto= \" + bitmap . getHeight (); } outText += \"\\n\" ; } c . close ();","title":"Extraer el nombre, el n\u00famero y la foto de los Contacts de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#borrado-de-los-contactos-de-un-tipo","text":"1 2 3 4 Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; String where = ContactsContract . RawContacts . ACCOUNT_TYPE + \"=?\" ; String [] whereArgs = new String [] { \"es.eduardofilo.app\" }; getContentResolver (). delete ( rawContacts , where , whereArgs );","title":"Borrado de los contactos de un tipo"},{"location":"desarrollo/android.html#borrado-de-un-contacto","text":"1 2 3 Uri rawContacts = ContactsContract . RawContacts . CONTENT_URI ; Uri rawContactUri = ContentUris . withAppendedId ( ContactsContract . RawContacts . CONTENT_URI , 13 ); getContentResolver (). delete ( rawContactUri , null , null );","title":"Borrado de un contacto"},{"location":"desarrollo/android.html#actualizar-el-nombre-de-un-contacto","text":"1 2 3 4 5 6 7 long rawContactId = 14 ; Uri data = ContactsContract . Data . CONTENT_URI ; ContentValues values = new ContentValues (); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Jorgito\" ); String where = Data . MIMETYPE + \"=? AND \" + ContactsContract . Data . RAW_CONTACT_ID + \"=?\" ; String [] whereArgs = new String [] { CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE , Long . toString ( rawContactId ) }; getContentResolver (). update ( data , values , where , whereArgs );","title":"Actualizar el nombre de un contacto"},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ContentValues values = new ContentValues (); values . put ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); values . put ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); Uri rawContactUri = getContentResolver (). insert ( RawContacts . CONTENT_URI , values ); long rawContactId = ContentUris . parseId ( rawContactUri ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . StructuredName . DISPLAY_NAME , \"Pepito\" ); Uri data1Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values ); values . clear (); values . put ( Data . RAW_CONTACT_ID , rawContactId ); values . put ( Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); values . put ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); values . put ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); Uri data2Uri = getContentResolver (). insert ( ContactsContract . Data . CONTENT_URI , values );","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#insercion-de-un-rawcontact-de-tipo-vndseccontactphone_2","text":"Igual que antes pero hecho con el sistema de operaciones por lotes de los ContentProvider's. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ArrayList < ContentProviderOperation > operationList = new ArrayList < ContentProviderOperation >(); Builder builder = ContentProviderOperation . newInsert ( RawContacts . CONTENT_URI ); builder . withValue ( RawContacts . ACCOUNT_NAME , \"vnd.sec.contact.phone\" ); builder . withValue ( RawContacts . ACCOUNT_TYPE , \"vnd.sec.contact.phone\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , ContactsContract . CommonDataKinds . StructuredName . CONTENT_ITEM_TYPE ); builder . withValue ( ContactsContract . CommonDataKinds . StructuredName . DISPLAY_NAME , \"Debianito\" ); operationList . add ( builder . build ()); builder = ContentProviderOperation . newInsert ( ContactsContract . Data . CONTENT_URI ); builder . withValueBackReference ( ContactsContract . Data . RAW_CONTACT_ID , 0 ); builder . withValue ( ContactsContract . Data . MIMETYPE , CommonDataKinds . Phone . CONTENT_ITEM_TYPE ); builder . withValue ( CommonDataKinds . Phone . TYPE , CommonDataKinds . Phone . TYPE_MAIN ); builder . withValue ( CommonDataKinds . Phone . NUMBER , \"976010101\" ); operationList . add ( builder . build ()); try { getContentResolver (). applyBatch ( ContactsContract . AUTHORITY , operationList ); } catch ( RemoteException e ) { e . printStackTrace (); } catch ( OperationApplicationException e ) { e . printStackTrace (); }","title":"Inserci\u00f3n de un RawContact de tipo \"vnd.sec.contact.phone\""},{"location":"desarrollo/android.html#localizar-un-launcher-que-no-sea-el-nuestro","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 PackageManager pm = getPackageManager (); Intent intent = new Intent ( Intent . ACTION_MAIN ); intent . addCategory ( Intent . CATEGORY_HOME ); List < ResolveInfo > launchers = pm . queryIntentActivities ( intent , 0 ); String packageName = null ; String name = null ; for ( ResolveInfo ri : launchers ) { if (! ri . activityInfo . name . equals ( \"es.eduardofilo.app.mobile.IdentificarTerminal\" )) { name = ri . activityInfo . name ; packageName = ri . activityInfo . packageName ; break ; } } Intent myIntent = new Intent (); myIntent . setClassName ( packageName , name ); startActivity ( myIntent );","title":"Localizar un Launcher que no sea el nuestro"},{"location":"desarrollo/android.html#obtener-un-authtoken-de-un-account","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mAccountManager = AccountManager . get ( this ); Account [] accounts = mAccountManager . getAccountsByType ( ACCOUNT_TYPE ); for ( Account account : accounts ) { outText += account . toString () + \"\\n\" ; AccountManagerFuture < Bundle > accountManagerFuture = mAccountManager . getAuthToken ( account , \"es.eduardofilo.app\" , true , null , null ); Bundle authTokenBundle ; String token = null ; try { authTokenBundle = accountManagerFuture . getResult (); token = authTokenBundle . get ( AccountManager . KEY_AUTHTOKEN ). toString (); } catch ( OperationCanceledException e ) { e . printStackTrace (); } catch ( AuthenticatorException e ) { e . printStackTrace (); } catch ( IOException e ) { e . printStackTrace (); } if (! TextUtils . isEmpty ( token )) { outText += token + \"\\n\" ; } }","title":"Obtener un authToken de un Account"},{"location":"desarrollo/db.html","text":"Bases de Datos \u00b6 Enlaces \u00b6 What's the difference between identifying and non-identifying relationships? Join Cheat sheet \u00b6","title":"Bases de Datos"},{"location":"desarrollo/db.html#bases-de-datos","text":"","title":"Bases de Datos"},{"location":"desarrollo/db.html#enlaces","text":"What's the difference between identifying and non-identifying relationships?","title":"Enlaces"},{"location":"desarrollo/db.html#join-cheat-sheet","text":"","title":"Join Cheat sheet"},{"location":"desarrollo/diseno.html","text":"Dise\u00f1o \u00b6 Colecciones iconos \u00b6 Crystal Clear FamFamFam Free icons search engine - iconlet Icon Finder :exclamation: ICONS etc Colecci\u00f3n fondos \u00b6 Backgrounds ETC Buscador im\u00e1genes \u00b6 freepik Colecci\u00f3n de im\u00e1genes \u00b6 stock.xchng Colores \u00b6 Colour Scheme Calculator : Calculadora de colores complementarios a uno dado.","title":"Dise\u00f1o"},{"location":"desarrollo/diseno.html#diseno","text":"","title":"Dise\u00f1o"},{"location":"desarrollo/diseno.html#colecciones-iconos","text":"Crystal Clear FamFamFam Free icons search engine - iconlet Icon Finder :exclamation: ICONS etc","title":"Colecciones iconos"},{"location":"desarrollo/diseno.html#coleccion-fondos","text":"Backgrounds ETC","title":"Colecci\u00f3n fondos"},{"location":"desarrollo/diseno.html#buscador-imagenes","text":"freepik","title":"Buscador im\u00e1genes"},{"location":"desarrollo/diseno.html#coleccion-de-imagenes","text":"stock.xchng","title":"Colecci\u00f3n de im\u00e1genes"},{"location":"desarrollo/diseno.html#colores","text":"Colour Scheme Calculator : Calculadora de colores complementarios a uno dado.","title":"Colores"},{"location":"desarrollo/dokuwiki.html","text":"Dokuwiki \u00b6 Thumbnail's autom\u00e1ticos de im\u00e1genes \u00b6 Para ello basta con instalar en el servidor PHP que ejecute DokuWiki el m\u00f3dulo GD para PHP. En Ubuntu el paquete se llama php5-gd . Template Monobook \u00b6 Hay un template que proporciona el mismo interfaz que el de MediaWiki (Wikipedia) a DokuWiki. Se trata de Monobook . Instalaci\u00f3n \u00b6 Adem\u00e1s de instalar la plantilla y configurarla, es necesario instalar el plugin Display Wiki Page . Cambios recientes \u00b6 Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"Cambios recientes\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : 1 2 3 $monobook['defaulttoolbox']['recent']['href'] = DOKU_BASE.\"doku.php?do=recent\"; $monobook['defaulttoolbox']['recent']['text'] = $lang['monobook_recent']; $monobook['defaulttoolbox']['recent']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): 1 $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : 1 $lang['monobook_recent'] = \"Cambios recientes\"; \u00cdndice \u00b6 Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"\u00cdndice\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : 1 2 3 $monobook['defaulttoolbox']['index']['href'] = DOKU_BASE.\"doku.php?do=index\"; $monobook['defaulttoolbox']['index']['text'] = $lang['monobook_index']; $monobook['defaulttoolbox']['index']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): 1 $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : 1 $lang['monobook_index'] = \"\u00cdndice\"; Logo \u00b6 El logo que aparece arriba a la izquierda es el fichero logo.png que se encuentra en el directorio $DOKU_BASE/lib/tpl/monobook/user . El icono que aparece en la barra de direcci\u00f3n del navegador es el fichero favicon.ico del mismo directorio. Backup autom\u00e1tico \u00b6 Programar diariamente el script siguiente: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #!/bin/bash # Backup de IMSWiki. # Creamos un identificador con la fecha para diferenciar los backups fecha = ` date +%m%d ` # Si el fichero ya existe no repetimos el backup if [ -f $HOME .backupWiki/backupWiki $fecha .tgz ] ; then echo \"El backup ya existe\" exit fi # Hacemos el backup sobre el servidor ssh aire@192.168.11.3 tar -czvf /tmp/backupWiki $fecha .tgz /var/www/data/ # Lo copiamos a nuestra m\u00e1quina scp aire@192.168.11.3:/tmp/backupWiki $fecha .tgz $HOME /.backupWiki # Borramos el bote recien creado y que ya ha sido transmitido a nuestra m\u00e1quina ssh aire@192.168.11.3 rm /tmp/backupWiki $fecha .tgz # Purgamos los backups de hace m\u00e1s de un mes en nuestra m\u00e1quina find $HOME /.backupWiki -name 'backupWiki*.tgz' -mtime +30 -type f | xargs rm -rf El script anterior tal y como est\u00e1 dise\u00f1ado deposita el backup sobre el directorio $HOME/.backupWiki por lo que deber\u00e1 existir dicho directorio. La programaci\u00f3n se puede hacer de muchas maneras (por ejemplo en Gnome a\u00f1adiendo una entrada al panel de control Sesiones, solapa \"Programas de inicio\").","title":"Dokuwiki"},{"location":"desarrollo/dokuwiki.html#dokuwiki","text":"","title":"Dokuwiki"},{"location":"desarrollo/dokuwiki.html#thumbnails-automaticos-de-imagenes","text":"Para ello basta con instalar en el servidor PHP que ejecute DokuWiki el m\u00f3dulo GD para PHP. En Ubuntu el paquete se llama php5-gd .","title":"Thumbnail's autom\u00e1ticos de im\u00e1genes"},{"location":"desarrollo/dokuwiki.html#template-monobook","text":"Hay un template que proporciona el mismo interfaz que el de MediaWiki (Wikipedia) a DokuWiki. Se trata de Monobook .","title":"Template Monobook"},{"location":"desarrollo/dokuwiki.html#instalacion","text":"Adem\u00e1s de instalar la plantilla y configurarla, es necesario instalar el plugin Display Wiki Page .","title":"Instalaci\u00f3n"},{"location":"desarrollo/dokuwiki.html#cambios-recientes","text":"Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"Cambios recientes\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : 1 2 3 $monobook['defaulttoolbox']['recent']['href'] = DOKU_BASE.\"doku.php?do=recent\"; $monobook['defaulttoolbox']['recent']['text'] = $lang['monobook_recent']; $monobook['defaulttoolbox']['recent']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): 1 $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : 1 $lang['monobook_recent'] = \"Cambios recientes\";","title":"Cambios recientes"},{"location":"desarrollo/dokuwiki.html#indice","text":"Se puede a\u00f1adir al men\u00fa de herramientas el enlace \"\u00cdndice\" haciendo lo siguiente: A\u00f1adir las siguientes lineas al fichero $DOKU_BASE/lib/tpl/monobook/context.php : 1 2 3 $monobook['defaulttoolbox']['index']['href'] = DOKU_BASE.\"doku.php?do=index\"; $monobook['defaulttoolbox']['index']['text'] = $lang['monobook_index']; $monobook['defaulttoolbox']['index']['rel'] = \"nofollow\"; Inmediatamente antes de la linea (en la versi\u00f3n de 2007-10-03 es la linea #354): 1 $monobook['defaulttoolbox']['whatlinkshere']['href'] = DOKU_BASE.\"doku.php?id=\".$ID.\"&amp;do=backlink\"; A\u00f1adir la linea siguiente al fichero $DOKU_BASE/lib/tpl/monobook/lang/es/lang.php : 1 $lang['monobook_index'] = \"\u00cdndice\";","title":"\u00cdndice"},{"location":"desarrollo/dokuwiki.html#logo","text":"El logo que aparece arriba a la izquierda es el fichero logo.png que se encuentra en el directorio $DOKU_BASE/lib/tpl/monobook/user . El icono que aparece en la barra de direcci\u00f3n del navegador es el fichero favicon.ico del mismo directorio.","title":"Logo"},{"location":"desarrollo/dokuwiki.html#backup-automatico","text":"Programar diariamente el script siguiente: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #!/bin/bash # Backup de IMSWiki. # Creamos un identificador con la fecha para diferenciar los backups fecha = ` date +%m%d ` # Si el fichero ya existe no repetimos el backup if [ -f $HOME .backupWiki/backupWiki $fecha .tgz ] ; then echo \"El backup ya existe\" exit fi # Hacemos el backup sobre el servidor ssh aire@192.168.11.3 tar -czvf /tmp/backupWiki $fecha .tgz /var/www/data/ # Lo copiamos a nuestra m\u00e1quina scp aire@192.168.11.3:/tmp/backupWiki $fecha .tgz $HOME /.backupWiki # Borramos el bote recien creado y que ya ha sido transmitido a nuestra m\u00e1quina ssh aire@192.168.11.3 rm /tmp/backupWiki $fecha .tgz # Purgamos los backups de hace m\u00e1s de un mes en nuestra m\u00e1quina find $HOME /.backupWiki -name 'backupWiki*.tgz' -mtime +30 -type f | xargs rm -rf El script anterior tal y como est\u00e1 dise\u00f1ado deposita el backup sobre el directorio $HOME/.backupWiki por lo que deber\u00e1 existir dicho directorio. La programaci\u00f3n se puede hacer de muchas maneras (por ejemplo en Gnome a\u00f1adiendo una entrada al panel de control Sesiones, solapa \"Programas de inicio\").","title":"Backup autom\u00e1tico"},{"location":"desarrollo/eclipse.html","text":"Eclipse \u00b6 Cambio de tipo de letra del editor \u00b6 Acceder al siguiente elemento de las preferencias: \"General / Appearence / Colors and Fonts\". Desplegar el lenguaje que se est\u00e9 utilizando en el proyecto (Java por ejemplo). Seleccionar el elemento \"Java Editor Text Font\" y pulsar el bot\u00f3n \"Change\". Atributos de ficheros XML uno por linea \u00b6 Fuente Acceder al siguiente elemento de las preferencias: \"XML / XML FIles / Editor\". Seleccionar el elemento \"Split multiple attributes each on a new line\". Columnas admitidas por el indentador autom\u00e1tico \u00b6 Por defecto Eclipse admite 80 columnas de texto cuando se aplica el formateador autom\u00e1tico (Comando/Ctrl + Shift + F). Para cambiar este valor hay que acudir a la siguiente ruta en Preferencias: 1 Java / Code Style / Formatter Aqu\u00ed hay que crear un profile nuevo que podamos editar (dado que los predeterminados son de s\u00f3lo lectura). Una vez creado (nos podemos basar en el predeterminado de nombre \"Eclipse [built-in]\") iremos a: 1 Edit... / Line Wrapping / General settings / Maximun line width Y le daremos el valor deseado (120 en mi caso). Para reforzar la situaci\u00f3n de ese l\u00edmite, podemos cambiar el siguiente ajuste en preferencias y darle el mismo valor (120 en mi caso): 1 General / Editors / Text Editors / Print margin column (previamente hay que activar \"Show print margin\")","title":"Eclipse"},{"location":"desarrollo/eclipse.html#eclipse","text":"","title":"Eclipse"},{"location":"desarrollo/eclipse.html#cambio-de-tipo-de-letra-del-editor","text":"Acceder al siguiente elemento de las preferencias: \"General / Appearence / Colors and Fonts\". Desplegar el lenguaje que se est\u00e9 utilizando en el proyecto (Java por ejemplo). Seleccionar el elemento \"Java Editor Text Font\" y pulsar el bot\u00f3n \"Change\".","title":"Cambio de tipo de letra del editor"},{"location":"desarrollo/eclipse.html#atributos-de-ficheros-xml-uno-por-linea","text":"Fuente Acceder al siguiente elemento de las preferencias: \"XML / XML FIles / Editor\". Seleccionar el elemento \"Split multiple attributes each on a new line\".","title":"Atributos de ficheros XML uno por linea"},{"location":"desarrollo/eclipse.html#columnas-admitidas-por-el-indentador-automatico","text":"Por defecto Eclipse admite 80 columnas de texto cuando se aplica el formateador autom\u00e1tico (Comando/Ctrl + Shift + F). Para cambiar este valor hay que acudir a la siguiente ruta en Preferencias: 1 Java / Code Style / Formatter Aqu\u00ed hay que crear un profile nuevo que podamos editar (dado que los predeterminados son de s\u00f3lo lectura). Una vez creado (nos podemos basar en el predeterminado de nombre \"Eclipse [built-in]\") iremos a: 1 Edit... / Line Wrapping / General settings / Maximun line width Y le daremos el valor deseado (120 en mi caso). Para reforzar la situaci\u00f3n de ese l\u00edmite, podemos cambiar el siguiente ajuste en preferencias y darle el mismo valor (120 en mi caso): 1 General / Editors / Text Editors / Print margin column (previamente hay que activar \"Show print margin\")","title":"Columnas admitidas por el indentador autom\u00e1tico"},{"location":"desarrollo/git.html","text":"Git \u00b6 Enlaces \u00b6 Libro Pro Git en espa\u00f1ol Cheat Sheat git - la gu\u00eda sencilla :exclamation: Git Tutorials & Training by Atlassian :exclamation: Detached HEAD en Git Github git tutorial La Par\u00e1bola de Git @ CAPSiDE HQ Lleva Git al pr\u00f3ximo nivel con Git Flow git-flow cheatsheet Comandos b\u00e1sicos \u00b6 Config: 1 2 3 4 5 6 $ git config --global user.name \"Eduardo Moreno\" $ git config --global user.email user@dominio.com $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global core.editor \"subl -w\" Alternativamente se pueden hacer todos los cambios simult\u00e1neamente editando el fichero ~/.gitconfig . Una configuraci\u00f3n podr\u00eda ser: 1 2 3 4 5 6 7 8 9 [user] name = Eduardo Moreno email = user@dominio.com [alias] co = checkout ci = commit st = status [core] editor = subl -w Creaci\u00f3n repositorio (local; crea el subdirectorio .git ): 1 2 $ cd first_app $ git init Add ( fuente ): 1 2 3 4 5 6 # stages All $ git add -A # stages new and modified, without deleted $ git add . # stages modified and deleted, without new $ git add -u Commit: 1 $ git commit Commit general de cambios: 1 $ git commit -a Status: 1 $ git status Restituir ficheros borrados: 1 $ git checkout -f Log: 1 $ git log Log indicando los ficheros modificados: 1 2 $ git log --name-status $ git log --stat Log indicando los commits que afectan a un fichero ( fuente ): 1 $ git log --follow filename Localizar el commit inicial de la rama branch_name surgida de master ( fuente ): 1 $ git log master..branch_name --oneline | tail -1 Rename: 1 $ git mv fichero.txt fichero.log Preparar un servidor: 1 2 3 $ cd first_app/.. $ git clone --bare first_app first_app.git $ scp -r first_app.git usuario@dominio.com:git Conectar la copia de trabajo con un servidor: 1 2 $ cd first_app $ git remote add origin usuario@dominio.com:git/first_app.git ( origin es el nombre de la conexi\u00f3n; puede ser cualquier cosa, aunque si se pone otra cosa habr\u00e1 que especificar el nombre al hacer push , ya que origin es el nombre de destino predeterminado) Mostrar la lista de conexiones de la copia de trabajo con servidores: 1 $ git remote -v Desconectar la copia de trabajo con un servidor: 1 $ git remote rm origin ( origin es el nombre de la conexi\u00f3n; puede ser cualquier otro) Checkout (remoto): 1 $ git clone usuario@dominio.com:git/first_app.git Sincronizar con el servidor remoto: 1 $ git push [ origin master ] Info (parecido a svn info): 1 $ cat .git/config Crear un tag 1 2 $ git tag -a tag_id -m \"Creaci\u00f3n de tag tag_id.\" $ git push --follow-tags Eliminaci\u00f3n de un tag 1 2 $ git tag -d tag_id $ git push origin :refs/tags/tag_id Eliminaci\u00f3n de \u00faltimo commit ( fuente ) 1 $ git reset --hard HEAD~1 Si el commit ya ha subido al repositorio hacer adem\u00e1s: 1 $ git push origin HEAD --force Para olvidar cambios (incluso commits) hechos en local ( fuente ): 1 $ git reset --hard origin/master Diff's \u00b6 Distintos tipos de diff's: working vs staging: git diff staging vs snapshot: git diff --staged working vs snapshot: git diff HEAD snapshot vs snapshot: git diff <from_SHA1> <to_SHA1> Ficheros modificados entre dos commits: 1 2 3 $ git diff --name-only SHA1 SHA2 $ #o $ git diff --stat SHA1 SHA2 Diferencias en un fichero entre dos commits: 1 $ git diff SHA1 SHA2 FICHERO Muestra la versi\u00f3n de un fichero en un determinado commit: 1 $ git show SHA:FILE Branches \u00b6 Creaci\u00f3n: 1 $ git checkout -b alta-usuarios Listado de branches: 1 $ git branch Listado de branches locales y remotos: 1 $ git branch -a Seleccionar un branch: 1 $ git checkout alta-usuarios Sincronizar con el servidor remoto: 1 $ git push origin alta-usuarios Seleccionar trunk: 1 $ git checkout master Merge: 1 2 3 $ git checkout master $ git merge alta-usuarios $ git branch -d alta-usuarios Abandonar y borrar un branch local: 1 2 $ git checkout master $ git branch -D alta-usuarios Borrar un branch remoto. Si despu\u00e9s de hacer lo anterior hacemos un git pull la rama local volver\u00e1 a crearse, ya que segu\u00eda estando en el servidor. Esto podemos arreglarlo de la siguiente manera: 1 $ git push origin :alta-usuarios #suponiendo que la rama en el servidor se llama igual que nuestra ex-rama local o 1 $ git push origin --delete alta-usuarios Seleccionar un branch remoto ( fuente ): 1 $ git checkout -b fix#3413 origin/fix#3413 Stash \u00b6 Borrado de la lista: 1 $ git stash clear Guardar y recuperar con nombre ( fuente ): 1 2 3 4 5 6 7 8 9 # Guardar git stash save nombre # Listar git stash list stash@ { 0 } : On branch: nombre # Aplicar git stash apply stash@ { 0 } # Borrar git stash drop stash@ { 0 } Ver los cambios que contiene un stash ( fuente ): 1 2 3 4 # Para ver el contenido del stash m\u00e1s reciente git stash show -p # Para ver el contenido de un stash en concreto git stash show -p stash@ { 1 } Ignorar cambios de un fichero incluido en el repositorio \u00b6 ( Fuente ) No se trata de la t\u00edpica entrada en .gitignore dado que los ficheros all\u00ed listados se supone que ni siquiera forman parte del repositorio. Se trata de tener una versi\u00f3n del fichero en el repositorio pero luego no queremos actualizarlo. Para ello ejecutar: 1 git update-index --assume-unchanged <file> Para averiguar los ficheros que estamos ignorando de esta forma: 1 git ls-files -v | grep '^h' Y si en alg\u00fan momento queremos recuperar la detecci\u00f3n de cambios en el fichero: 1 git update-index --no-assume-unchanged <file> Salir de estado \"HEAD detached at\" \u00b6 En este estado b\u00e1sicamente es que HEAD deja de apuntar al final de una rama (secuencia de commits) para apuntar a un commit concreto directamente. La forma de salir es o volver a hacer checkout de cualquier branch si no se quieren conservar los cambios hechos tras recuperar ese commit, o bien crear un branch temporal para commitear esos cambios y ya luego si se desea incorporarlos a la rama de la que nos hab\u00edamos descolgado. A continuaci\u00f3n se describen las dos opciones: Si no nos importa perder los cambios 1 git checkout <branch> Si hay cambios tras hacer el checkout del commit: 1 2 3 git checkout -b temp git checkout <branch> git merge temp En la fuente de estas ideas se describe un procedimiento m\u00e1s elaborado para reapuntar el <branch> ( master en el ejemplo que ponen) a este nuevo branch temporal. Cambiar el message del \u00faltimo commit \u00b6 ( Fuente ) Esto sirve si a\u00fan no hemos propagado el commit hacia otros repositorios remotos: 1 git commit --amend gitbook \u00b6 La utilidad de l\u00ednea de comando para compilar los libros a epub por ejemplo se instala con npm : 1 2 sudo npm install gitbook-cli -g sudo npm install svgexport -g Una vez disponible, entraremos en el directorio del repositorio que contenga un gitbook y generaremos un epub: 1 2 3 4 $ cd git/ $ git clone https://github.com/DjangoGirls/tutorial.git $ cd tutorial/es/ $ gitbook epub ./ ./tutorial.epub Borrar \u00faltimo commit \u00b6 Para borrar el \u00faltimo commit cuando a\u00fan no lo hemos publicado (push) hacer lo siguiente ( fuente ): 1 $ git reset --hard HEAD~1 Con esto conseguimos que el puntero del branch apunte al commit anterior al HEAD actual. Es importante que el commit que vayamos a borrar s\u00f3lo est\u00e9 en nuestro repositorio. Si ya ha sido propagado a otros repositorios, ser\u00e1 mejor deshacer los cambios mediante otro commit.","title":"Git"},{"location":"desarrollo/git.html#git","text":"","title":"Git"},{"location":"desarrollo/git.html#enlaces","text":"Libro Pro Git en espa\u00f1ol Cheat Sheat git - la gu\u00eda sencilla :exclamation: Git Tutorials & Training by Atlassian :exclamation: Detached HEAD en Git Github git tutorial La Par\u00e1bola de Git @ CAPSiDE HQ Lleva Git al pr\u00f3ximo nivel con Git Flow git-flow cheatsheet","title":"Enlaces"},{"location":"desarrollo/git.html#comandos-basicos","text":"Config: 1 2 3 4 5 6 $ git config --global user.name \"Eduardo Moreno\" $ git config --global user.email user@dominio.com $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global core.editor \"subl -w\" Alternativamente se pueden hacer todos los cambios simult\u00e1neamente editando el fichero ~/.gitconfig . Una configuraci\u00f3n podr\u00eda ser: 1 2 3 4 5 6 7 8 9 [user] name = Eduardo Moreno email = user@dominio.com [alias] co = checkout ci = commit st = status [core] editor = subl -w Creaci\u00f3n repositorio (local; crea el subdirectorio .git ): 1 2 $ cd first_app $ git init Add ( fuente ): 1 2 3 4 5 6 # stages All $ git add -A # stages new and modified, without deleted $ git add . # stages modified and deleted, without new $ git add -u Commit: 1 $ git commit Commit general de cambios: 1 $ git commit -a Status: 1 $ git status Restituir ficheros borrados: 1 $ git checkout -f Log: 1 $ git log Log indicando los ficheros modificados: 1 2 $ git log --name-status $ git log --stat Log indicando los commits que afectan a un fichero ( fuente ): 1 $ git log --follow filename Localizar el commit inicial de la rama branch_name surgida de master ( fuente ): 1 $ git log master..branch_name --oneline | tail -1 Rename: 1 $ git mv fichero.txt fichero.log Preparar un servidor: 1 2 3 $ cd first_app/.. $ git clone --bare first_app first_app.git $ scp -r first_app.git usuario@dominio.com:git Conectar la copia de trabajo con un servidor: 1 2 $ cd first_app $ git remote add origin usuario@dominio.com:git/first_app.git ( origin es el nombre de la conexi\u00f3n; puede ser cualquier cosa, aunque si se pone otra cosa habr\u00e1 que especificar el nombre al hacer push , ya que origin es el nombre de destino predeterminado) Mostrar la lista de conexiones de la copia de trabajo con servidores: 1 $ git remote -v Desconectar la copia de trabajo con un servidor: 1 $ git remote rm origin ( origin es el nombre de la conexi\u00f3n; puede ser cualquier otro) Checkout (remoto): 1 $ git clone usuario@dominio.com:git/first_app.git Sincronizar con el servidor remoto: 1 $ git push [ origin master ] Info (parecido a svn info): 1 $ cat .git/config Crear un tag 1 2 $ git tag -a tag_id -m \"Creaci\u00f3n de tag tag_id.\" $ git push --follow-tags Eliminaci\u00f3n de un tag 1 2 $ git tag -d tag_id $ git push origin :refs/tags/tag_id Eliminaci\u00f3n de \u00faltimo commit ( fuente ) 1 $ git reset --hard HEAD~1 Si el commit ya ha subido al repositorio hacer adem\u00e1s: 1 $ git push origin HEAD --force Para olvidar cambios (incluso commits) hechos en local ( fuente ): 1 $ git reset --hard origin/master","title":"Comandos b\u00e1sicos"},{"location":"desarrollo/git.html#diffs","text":"Distintos tipos de diff's: working vs staging: git diff staging vs snapshot: git diff --staged working vs snapshot: git diff HEAD snapshot vs snapshot: git diff <from_SHA1> <to_SHA1> Ficheros modificados entre dos commits: 1 2 3 $ git diff --name-only SHA1 SHA2 $ #o $ git diff --stat SHA1 SHA2 Diferencias en un fichero entre dos commits: 1 $ git diff SHA1 SHA2 FICHERO Muestra la versi\u00f3n de un fichero en un determinado commit: 1 $ git show SHA:FILE","title":"Diff's"},{"location":"desarrollo/git.html#branches","text":"Creaci\u00f3n: 1 $ git checkout -b alta-usuarios Listado de branches: 1 $ git branch Listado de branches locales y remotos: 1 $ git branch -a Seleccionar un branch: 1 $ git checkout alta-usuarios Sincronizar con el servidor remoto: 1 $ git push origin alta-usuarios Seleccionar trunk: 1 $ git checkout master Merge: 1 2 3 $ git checkout master $ git merge alta-usuarios $ git branch -d alta-usuarios Abandonar y borrar un branch local: 1 2 $ git checkout master $ git branch -D alta-usuarios Borrar un branch remoto. Si despu\u00e9s de hacer lo anterior hacemos un git pull la rama local volver\u00e1 a crearse, ya que segu\u00eda estando en el servidor. Esto podemos arreglarlo de la siguiente manera: 1 $ git push origin :alta-usuarios #suponiendo que la rama en el servidor se llama igual que nuestra ex-rama local o 1 $ git push origin --delete alta-usuarios Seleccionar un branch remoto ( fuente ): 1 $ git checkout -b fix#3413 origin/fix#3413","title":"Branches"},{"location":"desarrollo/git.html#stash","text":"Borrado de la lista: 1 $ git stash clear Guardar y recuperar con nombre ( fuente ): 1 2 3 4 5 6 7 8 9 # Guardar git stash save nombre # Listar git stash list stash@ { 0 } : On branch: nombre # Aplicar git stash apply stash@ { 0 } # Borrar git stash drop stash@ { 0 } Ver los cambios que contiene un stash ( fuente ): 1 2 3 4 # Para ver el contenido del stash m\u00e1s reciente git stash show -p # Para ver el contenido de un stash en concreto git stash show -p stash@ { 1 }","title":"Stash"},{"location":"desarrollo/git.html#ignorar-cambios-de-un-fichero-incluido-en-el-repositorio","text":"( Fuente ) No se trata de la t\u00edpica entrada en .gitignore dado que los ficheros all\u00ed listados se supone que ni siquiera forman parte del repositorio. Se trata de tener una versi\u00f3n del fichero en el repositorio pero luego no queremos actualizarlo. Para ello ejecutar: 1 git update-index --assume-unchanged <file> Para averiguar los ficheros que estamos ignorando de esta forma: 1 git ls-files -v | grep '^h' Y si en alg\u00fan momento queremos recuperar la detecci\u00f3n de cambios en el fichero: 1 git update-index --no-assume-unchanged <file>","title":"Ignorar cambios de un fichero incluido en el repositorio"},{"location":"desarrollo/git.html#salir-de-estado-head-detached-at","text":"En este estado b\u00e1sicamente es que HEAD deja de apuntar al final de una rama (secuencia de commits) para apuntar a un commit concreto directamente. La forma de salir es o volver a hacer checkout de cualquier branch si no se quieren conservar los cambios hechos tras recuperar ese commit, o bien crear un branch temporal para commitear esos cambios y ya luego si se desea incorporarlos a la rama de la que nos hab\u00edamos descolgado. A continuaci\u00f3n se describen las dos opciones: Si no nos importa perder los cambios 1 git checkout <branch> Si hay cambios tras hacer el checkout del commit: 1 2 3 git checkout -b temp git checkout <branch> git merge temp En la fuente de estas ideas se describe un procedimiento m\u00e1s elaborado para reapuntar el <branch> ( master en el ejemplo que ponen) a este nuevo branch temporal.","title":"Salir de estado \"HEAD detached at\""},{"location":"desarrollo/git.html#cambiar-el-message-del-ultimo-commit","text":"( Fuente ) Esto sirve si a\u00fan no hemos propagado el commit hacia otros repositorios remotos: 1 git commit --amend","title":"Cambiar el message del \u00faltimo commit"},{"location":"desarrollo/git.html#gitbook","text":"La utilidad de l\u00ednea de comando para compilar los libros a epub por ejemplo se instala con npm : 1 2 sudo npm install gitbook-cli -g sudo npm install svgexport -g Una vez disponible, entraremos en el directorio del repositorio que contenga un gitbook y generaremos un epub: 1 2 3 4 $ cd git/ $ git clone https://github.com/DjangoGirls/tutorial.git $ cd tutorial/es/ $ gitbook epub ./ ./tutorial.epub","title":"gitbook"},{"location":"desarrollo/git.html#borrar-ultimo-commit","text":"Para borrar el \u00faltimo commit cuando a\u00fan no lo hemos publicado (push) hacer lo siguiente ( fuente ): 1 $ git reset --hard HEAD~1 Con esto conseguimos que el puntero del branch apunte al commit anterior al HEAD actual. Es importante que el commit que vayamos a borrar s\u00f3lo est\u00e9 en nuestro repositorio. Si ya ha sido propagado a otros repositorios, ser\u00e1 mejor deshacer los cambios mediante otro commit.","title":"Borrar \u00faltimo commit"},{"location":"desarrollo/html.html","text":"HTML+CSS \u00b6 Enlaces \u00b6 Varios \u00b6 Google Video Player Web App C\u00f3mo reescribir correctamente una URL desde el servidor Herramientas que no te pueden faltar como desarrollador web : 5 herramientas para testear la calidad del c\u00f3digo desde el punto de vista de SEO, velocidad, etc. jsFiddle : Para testear c\u00f3digo HTML+JS+CSS. NetRenderer : Renderiza una p\u00e1gina con distintas versiones del motor de Internet Explorer. An\u00e1lisis de UserAgent All About Floats : Explica el concepto de Clearfix. TheCodePlayer : Video style walkthroughs showing cool stuff being created from scratch :exclamation: Componentes \u00b6 Menucool Horizontal menu Wifeo Creative Code SEO \u00b6 Gu\u00eda de consejos de posicionamiento en Google Formatos de imagen: Gu\u00eda de optimizaci\u00f3n Fonts \u00b6 Web Safe Fonts Preview FontJazz - Embed fonts on web pages How to Embed Font in HTML Webpage \u2013 Custom Web Fonts Font Squirrel Google WebFonts Font Awesome : The iconic font designed for use with Twitter Bootstrap. Post que explica c\u00f3mo se usa. Frameworks \u00b6 Bootstrap by Twitter Scaffolding Componentes LESS Centurion IVORY Rendimiento \u00b6 Using Page Speed for Google Chrome HTML5 \u00b6 Seis sencillas \"buenas pr\u00e1cticas\" cuando usemos HTML5 HTML5 Cheat Sheet Con IndexedDB puedes almacenar offline una base de datos en un navegador CSS \u00b6 Most Practical CSS Cheat Sheet Yet Recopilaci\u00f3n de siete tutoriales sorprendentes de CSS3 CSS-Tricks CSS contents and browser compatibility Responsive Design \u00b6 Recommendations for building smartphone-optimized websites Skeleton Descripci\u00f3n de RD en Xitrus Screenqueries : Simular el funcionamiento de una p\u00e1gina en las pantallas de los dispositivos m\u00f3viles o en cualquier tama\u00f1o de pantalla. :exclamation: Media Queries : Recopilaci\u00f3n de responsive designs.","title":"HTML+CSS"},{"location":"desarrollo/html.html#htmlcss","text":"","title":"HTML+CSS"},{"location":"desarrollo/html.html#enlaces","text":"","title":"Enlaces"},{"location":"desarrollo/html.html#varios","text":"Google Video Player Web App C\u00f3mo reescribir correctamente una URL desde el servidor Herramientas que no te pueden faltar como desarrollador web : 5 herramientas para testear la calidad del c\u00f3digo desde el punto de vista de SEO, velocidad, etc. jsFiddle : Para testear c\u00f3digo HTML+JS+CSS. NetRenderer : Renderiza una p\u00e1gina con distintas versiones del motor de Internet Explorer. An\u00e1lisis de UserAgent All About Floats : Explica el concepto de Clearfix. TheCodePlayer : Video style walkthroughs showing cool stuff being created from scratch :exclamation:","title":"Varios"},{"location":"desarrollo/html.html#componentes","text":"Menucool Horizontal menu Wifeo Creative Code","title":"Componentes"},{"location":"desarrollo/html.html#seo","text":"Gu\u00eda de consejos de posicionamiento en Google Formatos de imagen: Gu\u00eda de optimizaci\u00f3n","title":"SEO"},{"location":"desarrollo/html.html#fonts","text":"Web Safe Fonts Preview FontJazz - Embed fonts on web pages How to Embed Font in HTML Webpage \u2013 Custom Web Fonts Font Squirrel Google WebFonts Font Awesome : The iconic font designed for use with Twitter Bootstrap. Post que explica c\u00f3mo se usa.","title":"Fonts"},{"location":"desarrollo/html.html#frameworks","text":"Bootstrap by Twitter Scaffolding Componentes LESS Centurion IVORY","title":"Frameworks"},{"location":"desarrollo/html.html#rendimiento","text":"Using Page Speed for Google Chrome","title":"Rendimiento"},{"location":"desarrollo/html.html#html5","text":"Seis sencillas \"buenas pr\u00e1cticas\" cuando usemos HTML5 HTML5 Cheat Sheet Con IndexedDB puedes almacenar offline una base de datos en un navegador","title":"HTML5"},{"location":"desarrollo/html.html#css","text":"Most Practical CSS Cheat Sheet Yet Recopilaci\u00f3n de siete tutoriales sorprendentes de CSS3 CSS-Tricks CSS contents and browser compatibility","title":"CSS"},{"location":"desarrollo/html.html#responsive-design","text":"Recommendations for building smartphone-optimized websites Skeleton Descripci\u00f3n de RD en Xitrus Screenqueries : Simular el funcionamiento de una p\u00e1gina en las pantallas de los dispositivos m\u00f3viles o en cualquier tama\u00f1o de pantalla. :exclamation: Media Queries : Recopilaci\u00f3n de responsive designs.","title":"Responsive Design"},{"location":"desarrollo/java.html","text":"Java \u00b6 Enlaces \u00b6 Java Decompiler Project Lombok Reempaquetar un jar \u00b6 Para re-enlatar un jar que hemos explotado para retocar su contendido, hay que ejecutar el siguiente comando desde el directorio ra\u00edz donde descomprimimos el jar original: 1 $ jar cvf nombre.jar * Contar lineas \u00b6 Para contar las lineas de un proyecto, lanzar desde la ra\u00edz del proyecto ( el directorio src/java de un proyecto NetBeans, por ejemplo): 1 $ find . -name \"*.java\" | xargs wc -l Imprimir callstack \u00b6 Para averiguar la pila de llamadas de funciones que nos permiten llegar a la ejecuci\u00f3n del punto que estamos revisando. Viene muy bien cuando la ejecuci\u00f3n implica llamadas JNI ya que esa parte del c\u00f3digo suele quedar oculta en una librer\u00eda nativa (.so o .dll). 1 2 3 for ( StackTraceElement ste : Thread . currentThread (). getStackTrace ()) { Log . w ( TAG , ste ); } Iterar un Map \u00b6 Para el caso de un Map<String, String> : 1 2 3 4 5 6 7 Iterator it = mapa . entrySet (). iterator (); while ( it . hasNext ()) { Map . Entry e = ( Map . Entry ) it . next (); String name = ( String ) e . getKey (); String value = ( String ) e . getValue (); //... } log4j \u00b6 ( Fuente ) El proyecto FHoSS utiliza la librer\u00eda log4j como casi todos los proyectos Java actuales. Log4j es una librer\u00eda open source desarrollada en Java por la Apache Software Foundation que permite a los desarrolladores de software elegir la salida y el nivel de granularidad de los mensajes o \u201clogs\u201d a tiempo de ejecuci\u00f3n y no a tiempo de compilaci\u00f3n como es com\u00fanmente realizado. La configuraci\u00f3n de salida y granularidad de los mensajes es realizada a tiempo de ejecuci\u00f3n mediante el uso de archivos de configuraci\u00f3n externos. Log4J ha sido implementado en otros lenguajes como: C , C++ , C# , Perl , Python , Ruby y Eiffel . Conceptos \u00b6 Niveles de prioridad de los mensajes \u00b6 Por defecto Log4J tiene 6 niveles de prioridad para los mensajes (debug, info, warn, error, fatal, trace). Adem\u00e1s existen otros dos niveles extras (all y off): DEBUG: se utiliza para escribir mensajes de depuraci\u00f3n, este log no debe estar activado cuando la aplicaci\u00f3n se encuentre en producci\u00f3n. INFO: se utiliza para mensajes similares al modo \"verbose\" en otras aplicaciones. WARN: se utiliza para mensajes de alerta sobre eventos que se desea mantener constancia, pero que no afectan el correcto funcionamiento del programa. ERROR: se utiliza en mensajes de error de la aplicaci\u00f3n que se desea guardar, estos eventos afectan al programa pero lo dejan seguir funcionando, como por ejemplo que alg\u00fan par\u00e1metro de configuraci\u00f3n no es correcto y se carga el par\u00e1metro por defecto. FATAL: se utiliza para mensajes cr\u00edticos del sistema, generalmente luego de guardar el mensaje el programa abortar\u00e1. TRACE: se utiliza para mostrar mensajes con un mayor nivel de detalle que debug. ALL: este es el nivel m\u00e1s bajo posible, habilita todos los logs. OFF: este es el nivel m\u00e1s alto posible, deshabilita todos los logs. Appenders \u00b6 En Log4J los mensajes son enviados a una (o varias) salida de destino, lo que se denomina un appender . Existen varios appenders disponibles y configurados, aunque tambi\u00e9n podemos crear y configurar nuestros propios appenders. T\u00edpicamente la salida de los mensajes es redirigida a un fichero de texto .log ( FileAppender , RollingFileAppender ), a un servidor remoto donde almacenar registros ( SocketAppender ), a una direcci\u00f3n de correo electr\u00f3nico ( SMTPAppender ), e incluso en una base de datos ( JDBCAppender ). Casi nunca es utilizado en un entorno de producci\u00f3n la salida a la consola ( ConsoleAppender ) ya que perder\u00eda gran parte de la utilidad de Log4J. Layouts \u00b6 Es el responsable de dar un formato de presentaci\u00f3n a los mensajes. Permite presentar el mensaje con el formato necesario para almacenarlo simplemente en un archivo de texto .log ( SimpleLayout y PatternLayout ), en una tabla HTML ( HTMLLayout ), o en un archivo XML ( XMLLayout ). Adem\u00e1s podemos a\u00f1adir informaci\u00f3n extra al mensaje, como la fecha en que se gener\u00f3, la clase que lo gener\u00f3, el nivel que posee... Configuraci\u00f3n \u00b6 La API es totalmente configurable, ya que se realiza mediante un archivo en formato XML o en formato Java Properties (clave=valor), generalmente llamado log4j.properties . En el siguiente ejemplo implementamos un fichero properties de configuraci\u00f3n, y configuramos dos registros. CONSOLE imprimir\u00e1 los mensajes en la consola por l\u00edneas (%m%n). LOGFILE a\u00f1adir\u00e1 (append) los mensajes a un fichero (aplicacion.log), reservando los primeros 4 caracteres para los milisegundos en que se gener\u00f3 el mensaje (%-4r), entre corchetes qui\u00e9n gener\u00f3 el mensaje ( [%t]), cinco espacios para la prioridad del mensaje (%-5p), la categor\u00eda del mensaje (%c) y finalmente el propio mensaje junto con un retorno de carro (%m%n). 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 ################################################################ ### Configuraci\u00f3n para LOCAL ### ### Nivel de trazas m\u00e1ximo ### ### Salida por consola y fichero ### ################################################################ #log4j.rootCategory=DEBUG, LOGFILE, CONSOLE #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout #log4j.appender.CONSOLE.layout.ConversionPattern=%-5p %c %x - %m%n ################################################################ ### Configuraci\u00f3n para DESARROLLO, PREPRODUCCION, PRODUCCION ### ### S\u00f3lo nos interesa el nivel de ERROR ### ### No hay salida de consola ### ################################################################ log4j.rootCategory=ERROR, LOGFILE log4j.appender.LOGFILE=org.apache.log4j.DailyRollingFileAppender log4j.appender.LOGFILE.file= ${ catalina . base } /logs/aplicacion.log log4j.appender.LOGFILE.append=true log4j.appender.LOGFILE.DatePattern='.'yyyy-MM-dd log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout log4j.appender.LOGFILE.layout.ConversionPattern=%-4r [%t] %-5p %c - %m%n Para el caso de utilizar PatternLayout, la definici\u00f3n de las piezas de informaci\u00f3n que se pueden incorporar al patr\u00f3n se encuentra en esta p\u00e1gina . Si se desea \u00fanicamente log de las clases pertenecientes a un paquete (es una forma de evitar los logs del servidor de aplicaci\u00f3n en una aplicaci\u00f3n J2EE), se indica de a\u00f1adiendo esta l\u00ednea: 1 log4j . logger .< paquete >=< nivel_de_trazas > por ejemplo: 1 log4j . logger . es . eduardofilo . ccm = DEBUG","title":"Java"},{"location":"desarrollo/java.html#java","text":"","title":"Java"},{"location":"desarrollo/java.html#enlaces","text":"Java Decompiler Project Lombok","title":"Enlaces"},{"location":"desarrollo/java.html#reempaquetar-un-jar","text":"Para re-enlatar un jar que hemos explotado para retocar su contendido, hay que ejecutar el siguiente comando desde el directorio ra\u00edz donde descomprimimos el jar original: 1 $ jar cvf nombre.jar *","title":"Reempaquetar un jar"},{"location":"desarrollo/java.html#contar-lineas","text":"Para contar las lineas de un proyecto, lanzar desde la ra\u00edz del proyecto ( el directorio src/java de un proyecto NetBeans, por ejemplo): 1 $ find . -name \"*.java\" | xargs wc -l","title":"Contar lineas"},{"location":"desarrollo/java.html#imprimir-callstack","text":"Para averiguar la pila de llamadas de funciones que nos permiten llegar a la ejecuci\u00f3n del punto que estamos revisando. Viene muy bien cuando la ejecuci\u00f3n implica llamadas JNI ya que esa parte del c\u00f3digo suele quedar oculta en una librer\u00eda nativa (.so o .dll). 1 2 3 for ( StackTraceElement ste : Thread . currentThread (). getStackTrace ()) { Log . w ( TAG , ste ); }","title":"Imprimir callstack"},{"location":"desarrollo/java.html#iterar-un-map","text":"Para el caso de un Map<String, String> : 1 2 3 4 5 6 7 Iterator it = mapa . entrySet (). iterator (); while ( it . hasNext ()) { Map . Entry e = ( Map . Entry ) it . next (); String name = ( String ) e . getKey (); String value = ( String ) e . getValue (); //... }","title":"Iterar un Map"},{"location":"desarrollo/java.html#log4j","text":"( Fuente ) El proyecto FHoSS utiliza la librer\u00eda log4j como casi todos los proyectos Java actuales. Log4j es una librer\u00eda open source desarrollada en Java por la Apache Software Foundation que permite a los desarrolladores de software elegir la salida y el nivel de granularidad de los mensajes o \u201clogs\u201d a tiempo de ejecuci\u00f3n y no a tiempo de compilaci\u00f3n como es com\u00fanmente realizado. La configuraci\u00f3n de salida y granularidad de los mensajes es realizada a tiempo de ejecuci\u00f3n mediante el uso de archivos de configuraci\u00f3n externos. Log4J ha sido implementado en otros lenguajes como: C , C++ , C# , Perl , Python , Ruby y Eiffel .","title":"log4j"},{"location":"desarrollo/java.html#conceptos","text":"","title":"Conceptos"},{"location":"desarrollo/java.html#niveles-de-prioridad-de-los-mensajes","text":"Por defecto Log4J tiene 6 niveles de prioridad para los mensajes (debug, info, warn, error, fatal, trace). Adem\u00e1s existen otros dos niveles extras (all y off): DEBUG: se utiliza para escribir mensajes de depuraci\u00f3n, este log no debe estar activado cuando la aplicaci\u00f3n se encuentre en producci\u00f3n. INFO: se utiliza para mensajes similares al modo \"verbose\" en otras aplicaciones. WARN: se utiliza para mensajes de alerta sobre eventos que se desea mantener constancia, pero que no afectan el correcto funcionamiento del programa. ERROR: se utiliza en mensajes de error de la aplicaci\u00f3n que se desea guardar, estos eventos afectan al programa pero lo dejan seguir funcionando, como por ejemplo que alg\u00fan par\u00e1metro de configuraci\u00f3n no es correcto y se carga el par\u00e1metro por defecto. FATAL: se utiliza para mensajes cr\u00edticos del sistema, generalmente luego de guardar el mensaje el programa abortar\u00e1. TRACE: se utiliza para mostrar mensajes con un mayor nivel de detalle que debug. ALL: este es el nivel m\u00e1s bajo posible, habilita todos los logs. OFF: este es el nivel m\u00e1s alto posible, deshabilita todos los logs.","title":"Niveles de prioridad de los mensajes"},{"location":"desarrollo/java.html#appenders","text":"En Log4J los mensajes son enviados a una (o varias) salida de destino, lo que se denomina un appender . Existen varios appenders disponibles y configurados, aunque tambi\u00e9n podemos crear y configurar nuestros propios appenders. T\u00edpicamente la salida de los mensajes es redirigida a un fichero de texto .log ( FileAppender , RollingFileAppender ), a un servidor remoto donde almacenar registros ( SocketAppender ), a una direcci\u00f3n de correo electr\u00f3nico ( SMTPAppender ), e incluso en una base de datos ( JDBCAppender ). Casi nunca es utilizado en un entorno de producci\u00f3n la salida a la consola ( ConsoleAppender ) ya que perder\u00eda gran parte de la utilidad de Log4J.","title":"Appenders"},{"location":"desarrollo/java.html#layouts","text":"Es el responsable de dar un formato de presentaci\u00f3n a los mensajes. Permite presentar el mensaje con el formato necesario para almacenarlo simplemente en un archivo de texto .log ( SimpleLayout y PatternLayout ), en una tabla HTML ( HTMLLayout ), o en un archivo XML ( XMLLayout ). Adem\u00e1s podemos a\u00f1adir informaci\u00f3n extra al mensaje, como la fecha en que se gener\u00f3, la clase que lo gener\u00f3, el nivel que posee...","title":"Layouts"},{"location":"desarrollo/java.html#configuracion","text":"La API es totalmente configurable, ya que se realiza mediante un archivo en formato XML o en formato Java Properties (clave=valor), generalmente llamado log4j.properties . En el siguiente ejemplo implementamos un fichero properties de configuraci\u00f3n, y configuramos dos registros. CONSOLE imprimir\u00e1 los mensajes en la consola por l\u00edneas (%m%n). LOGFILE a\u00f1adir\u00e1 (append) los mensajes a un fichero (aplicacion.log), reservando los primeros 4 caracteres para los milisegundos en que se gener\u00f3 el mensaje (%-4r), entre corchetes qui\u00e9n gener\u00f3 el mensaje ( [%t]), cinco espacios para la prioridad del mensaje (%-5p), la categor\u00eda del mensaje (%c) y finalmente el propio mensaje junto con un retorno de carro (%m%n). 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 ################################################################ ### Configuraci\u00f3n para LOCAL ### ### Nivel de trazas m\u00e1ximo ### ### Salida por consola y fichero ### ################################################################ #log4j.rootCategory=DEBUG, LOGFILE, CONSOLE #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender #log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout #log4j.appender.CONSOLE.layout.ConversionPattern=%-5p %c %x - %m%n ################################################################ ### Configuraci\u00f3n para DESARROLLO, PREPRODUCCION, PRODUCCION ### ### S\u00f3lo nos interesa el nivel de ERROR ### ### No hay salida de consola ### ################################################################ log4j.rootCategory=ERROR, LOGFILE log4j.appender.LOGFILE=org.apache.log4j.DailyRollingFileAppender log4j.appender.LOGFILE.file= ${ catalina . base } /logs/aplicacion.log log4j.appender.LOGFILE.append=true log4j.appender.LOGFILE.DatePattern='.'yyyy-MM-dd log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout log4j.appender.LOGFILE.layout.ConversionPattern=%-4r [%t] %-5p %c - %m%n Para el caso de utilizar PatternLayout, la definici\u00f3n de las piezas de informaci\u00f3n que se pueden incorporar al patr\u00f3n se encuentra en esta p\u00e1gina . Si se desea \u00fanicamente log de las clases pertenecientes a un paquete (es una forma de evitar los logs del servidor de aplicaci\u00f3n en una aplicaci\u00f3n J2EE), se indica de a\u00f1adiendo esta l\u00ednea: 1 log4j . logger .< paquete >=< nivel_de_trazas > por ejemplo: 1 log4j . logger . es . eduardofilo . ccm = DEBUG","title":"Configuraci\u00f3n"},{"location":"desarrollo/javaee.html","text":"JavaEE \u00b6 DisplayTag & Struts2 \u00b6 Subtabla en base a lista anidada \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 <display:table name= \"platformList\" id= \"platform\" pagesize= \"0\" requestURI= \"\" class= \"displaytag\" > <display:column property= \"name\" title= \"Platform\" /> <s:set name= \"formats\" value= \"#attr.platform.formats\" /> <display:column title= \"Formats\" > <display:table name= \"formats\" id= \"format\" class= \"simple sublist\" > <s:set name= \"screenRes\" value= \"#attr.format.screenWidth + 'x' + #attr.format.screenHeight\" /> <s:set name= \"wpRes\" value= \"#attr.format.wallpaperWidth + 'x' + #attr.format.wallpaperHeight\" /> <display:column title= \"Screen Resolution\" ><s:property value= \"screenRes\" /></display:column> <display:column title= \"Wallpaper Resolution\" ><s:property value= \"wpRes\" /></display:column> <display:column title= \"File\" ><s:file name= \"pic\" label= \"Pic\" theme= \"simple\" /></display:column> </display:table> </display:column> </display:table> SessionID en Action \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 public class MyActionClass extends ActionSupport implements ServletRequestAware { //... // Objeto HttpServletRequest asociado a la request. Inyectado por el interceptor servletConfig private HttpServletRequest servletRequest ; /** * Implementaci\u00f3n de interfaz ServletRequestAware * @param servletRequest Objeto HttpServletRequest asociado a la request */ @Override public void setServletRequest ( HttpServletRequest servletRequest ) { this . servletRequest = servletRequest ; } public HttpServletRequest getServletRequest () { return this . servletRequest ; } //... @Override public String execute () throws Exception { //... // Obtenemos el ID de la sesi\u00f3n String sessionID = this . servletRequest . getSession (). getId (); //... } } Mapa de Session \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 public class MyActionClass extends ActionSupport implements SessionAware { //... // Mapa de par\u00e1metros de la sesi\u00f3n. Inyectado por el interceptor servletConfig private Map < String , Object > session ; /** * Implementaci\u00f3n de interfaz SessionAware * @param session El mapa de session Servlet */ @Override public void setSession ( Map < String , Object > session ) { this . session = session ; } public Map < String , Object > getSession () { return this . session ; } //... @Override public String execute () throws Exception { //... // Ponemos y cogemos datos de la sessi\u00f3n getSession (). put ( \"objeto\" , objeto ); objeto = getSession (). get ( \"objeto\" ); //... } } JSP \u00b6 Prepoblado de combo desde el propio JSP \u00b6 1 <s:select label= \"Priority\" name= \"wallpaper_priority\" list= \"#{-2:'Very Low',-1:'Low',0:'Normal',1:'High',2:'Very High'}\" /> Inyectar cabecera HTTP en JSP \u00b6 1 <% response . setHeader ( \"P3P\" , \"CP=\\\"HONK\\\"\" ); %>","title":"JavaEE"},{"location":"desarrollo/javaee.html#javaee","text":"","title":"JavaEE"},{"location":"desarrollo/javaee.html#displaytag-struts2","text":"","title":"DisplayTag &amp; Struts2"},{"location":"desarrollo/javaee.html#subtabla-en-base-a-lista-anidada","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 <display:table name= \"platformList\" id= \"platform\" pagesize= \"0\" requestURI= \"\" class= \"displaytag\" > <display:column property= \"name\" title= \"Platform\" /> <s:set name= \"formats\" value= \"#attr.platform.formats\" /> <display:column title= \"Formats\" > <display:table name= \"formats\" id= \"format\" class= \"simple sublist\" > <s:set name= \"screenRes\" value= \"#attr.format.screenWidth + 'x' + #attr.format.screenHeight\" /> <s:set name= \"wpRes\" value= \"#attr.format.wallpaperWidth + 'x' + #attr.format.wallpaperHeight\" /> <display:column title= \"Screen Resolution\" ><s:property value= \"screenRes\" /></display:column> <display:column title= \"Wallpaper Resolution\" ><s:property value= \"wpRes\" /></display:column> <display:column title= \"File\" ><s:file name= \"pic\" label= \"Pic\" theme= \"simple\" /></display:column> </display:table> </display:column> </display:table>","title":"Subtabla en base a lista anidada"},{"location":"desarrollo/javaee.html#sessionid-en-action","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 public class MyActionClass extends ActionSupport implements ServletRequestAware { //... // Objeto HttpServletRequest asociado a la request. Inyectado por el interceptor servletConfig private HttpServletRequest servletRequest ; /** * Implementaci\u00f3n de interfaz ServletRequestAware * @param servletRequest Objeto HttpServletRequest asociado a la request */ @Override public void setServletRequest ( HttpServletRequest servletRequest ) { this . servletRequest = servletRequest ; } public HttpServletRequest getServletRequest () { return this . servletRequest ; } //... @Override public String execute () throws Exception { //... // Obtenemos el ID de la sesi\u00f3n String sessionID = this . servletRequest . getSession (). getId (); //... } }","title":"SessionID en Action"},{"location":"desarrollo/javaee.html#mapa-de-session","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 public class MyActionClass extends ActionSupport implements SessionAware { //... // Mapa de par\u00e1metros de la sesi\u00f3n. Inyectado por el interceptor servletConfig private Map < String , Object > session ; /** * Implementaci\u00f3n de interfaz SessionAware * @param session El mapa de session Servlet */ @Override public void setSession ( Map < String , Object > session ) { this . session = session ; } public Map < String , Object > getSession () { return this . session ; } //... @Override public String execute () throws Exception { //... // Ponemos y cogemos datos de la sessi\u00f3n getSession (). put ( \"objeto\" , objeto ); objeto = getSession (). get ( \"objeto\" ); //... } }","title":"Mapa de Session"},{"location":"desarrollo/javaee.html#jsp","text":"","title":"JSP"},{"location":"desarrollo/javaee.html#prepoblado-de-combo-desde-el-propio-jsp","text":"1 <s:select label= \"Priority\" name= \"wallpaper_priority\" list= \"#{-2:'Very Low',-1:'Low',0:'Normal',1:'High',2:'Very High'}\" />","title":"Prepoblado de combo desde el propio JSP"},{"location":"desarrollo/javaee.html#inyectar-cabecera-http-en-jsp","text":"1 <% response . setHeader ( \"P3P\" , \"CP=\\\"HONK\\\"\" ); %>","title":"Inyectar cabecera HTTP en JSP"},{"location":"desarrollo/javascript.html","text":"JavaScript \u00b6 JSON \u00b6 La siguiente sentencia serializa en forma de JSON cualquier objeto. Es muy \u00fatil para analizar un objeto: 1 alert ( JSON . stringify ( object )); Es m\u00e1s limpio escribir en la consola del navegador. Aqu\u00ed por ejemplo se muestra el objeto data de una instancia Vue.js: 1 console . log ( JSON . stringify ( vm . _data )); NPM \u00b6 Uso b\u00e1sico del gestor de paquetes de Node.js . Para gestionar las dependencias de paquetes en un proyecto hay que generar un fichero de seguimiento llamado package.json . Se genera con el comando (si a\u00f1adimos la opci\u00f3n -y dar\u00e1 todos los valores predeterminados autom\u00e1ticamente, incluso recoger\u00e1 los datos del repositorio git si \u00e9ste ya est\u00e1 inicializado): 1 npm init Para descargar un paquete (por ejemplo lodash ) e incorporarlo al fichero package.json ejecutar: 1 npm install lodash --save Encontraremos que el paquete se ha descargado en un subdirectorio llamado node_modules e incorporado a la secci\u00f3n dependencies de packages.json (si no hubi\u00e9ramos puesto la opci\u00f3n --save s\u00f3lo se habr\u00eda descargado). Si la dependencia la queremos s\u00f3lo para el entorno de desarrollo (t\u00edpico por ejemplo en los paquetes de testing), en lugar de --save pondremos --save-dev . Algunos comandos \u00fatiles de npm son: npm install : Descarga todos los paquetes indicados en package.json . npm install -g grunt-cli : Descarga e instala el paquete indicado en global. Es lo habitual en herramientas de tipo CLI como Grunt . npm ls : Muestra los paquetes instalados. npm outdated : Muestra cu\u00e1les de los paquetes instalados est\u00e1n desactualizados, es decir, existen nuevas versiones. npm update : Descarga las ultimas versiones de los paquetes instalados. npm show [package]@* version : Muestra las versiones disponibles (en el repositorio npm) del paquete indicado. Por ejemplo: npm show lodash@* version . npm uninstall lodash : Desinstala el paquete (lo elimina de node_modules ). Si adem\u00e1s queremos que desaparezca de package.json hay que a\u00f1adir la opci\u00f3n --save","title":"JavaScript"},{"location":"desarrollo/javascript.html#javascript","text":"","title":"JavaScript"},{"location":"desarrollo/javascript.html#json","text":"La siguiente sentencia serializa en forma de JSON cualquier objeto. Es muy \u00fatil para analizar un objeto: 1 alert ( JSON . stringify ( object )); Es m\u00e1s limpio escribir en la consola del navegador. Aqu\u00ed por ejemplo se muestra el objeto data de una instancia Vue.js: 1 console . log ( JSON . stringify ( vm . _data ));","title":"JSON"},{"location":"desarrollo/javascript.html#npm","text":"Uso b\u00e1sico del gestor de paquetes de Node.js . Para gestionar las dependencias de paquetes en un proyecto hay que generar un fichero de seguimiento llamado package.json . Se genera con el comando (si a\u00f1adimos la opci\u00f3n -y dar\u00e1 todos los valores predeterminados autom\u00e1ticamente, incluso recoger\u00e1 los datos del repositorio git si \u00e9ste ya est\u00e1 inicializado): 1 npm init Para descargar un paquete (por ejemplo lodash ) e incorporarlo al fichero package.json ejecutar: 1 npm install lodash --save Encontraremos que el paquete se ha descargado en un subdirectorio llamado node_modules e incorporado a la secci\u00f3n dependencies de packages.json (si no hubi\u00e9ramos puesto la opci\u00f3n --save s\u00f3lo se habr\u00eda descargado). Si la dependencia la queremos s\u00f3lo para el entorno de desarrollo (t\u00edpico por ejemplo en los paquetes de testing), en lugar de --save pondremos --save-dev . Algunos comandos \u00fatiles de npm son: npm install : Descarga todos los paquetes indicados en package.json . npm install -g grunt-cli : Descarga e instala el paquete indicado en global. Es lo habitual en herramientas de tipo CLI como Grunt . npm ls : Muestra los paquetes instalados. npm outdated : Muestra cu\u00e1les de los paquetes instalados est\u00e1n desactualizados, es decir, existen nuevas versiones. npm update : Descarga las ultimas versiones de los paquetes instalados. npm show [package]@* version : Muestra las versiones disponibles (en el repositorio npm) del paquete indicado. Por ejemplo: npm show lodash@* version . npm uninstall lodash : Desinstala el paquete (lo elimina de node_modules ). Si adem\u00e1s queremos que desaparezca de package.json hay que a\u00f1adir la opci\u00f3n --save","title":"NPM"},{"location":"desarrollo/joomla.html","text":"Joomla \u00b6 Enlaces \u00b6 Env\u00edo de mail desde FacileForms (Joomla) Codificaci\u00f3n de la p\u00e1gina \u00b6 La codificaci\u00f3n de caracteres que se usa para enviar la p\u00e1gina al navegador se ajusta en el fichero globals.php a\u00f1adiendo la siguiente linea: 1 header( 'Content-Type: text/html; charset=UTF-8'); La codificaci\u00f3n que se informa en la secci\u00f3n header del c\u00f3digo fuente html de la p\u00e1gina se ajusta en el fichero language/spanish.php en la linea que dice: 1 DEFINE('_ISO','charset=utf-8'); Ver comentario de Mitsurugi en este foro . allow_url_fopen desactivado \u00b6 Para el problema del eWeather del tipo ( fuente ): 1 Warning : file_get_contents (): URL file - access is disabled in the server configuration in /(lo que sea)/includes/domit/x ml_domit_parser . php on line 1645 El problema es seguramente del servidor, ya que el archivo php.ini tiene el par\u00e1metro allow_url_fopen deshabilitado. La soluci\u00f3n es utilizar la librer\u00eda cURL para evitar el uso de la funci\u00f3n file_get_contents(). Localizar el archivo que est\u00e1 en la carpeta donde est\u00e9 alojado el Joomla en la siguiente ruta: /includes/domit/xml_domit_parser.php Editarlo e ir a la linea 1645 En esa linea pone: return file_get_contents($filename); Eliminamos la l\u00ednea y ponemos esto en su lugar: 1 2 3 4 5 6 7 $ch = curl_init(); $timeout = 5; curl_setopt ($ch, CURLOPT_URL, $filename); curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout); return curl_exec($ch); curl_close($ch); Guardamos el archivo y lo subimos al servidor sustituyendo al antiguo.","title":"Joomla"},{"location":"desarrollo/joomla.html#joomla","text":"","title":"Joomla"},{"location":"desarrollo/joomla.html#enlaces","text":"Env\u00edo de mail desde FacileForms (Joomla)","title":"Enlaces"},{"location":"desarrollo/joomla.html#codificacion-de-la-pagina","text":"La codificaci\u00f3n de caracteres que se usa para enviar la p\u00e1gina al navegador se ajusta en el fichero globals.php a\u00f1adiendo la siguiente linea: 1 header( 'Content-Type: text/html; charset=UTF-8'); La codificaci\u00f3n que se informa en la secci\u00f3n header del c\u00f3digo fuente html de la p\u00e1gina se ajusta en el fichero language/spanish.php en la linea que dice: 1 DEFINE('_ISO','charset=utf-8'); Ver comentario de Mitsurugi en este foro .","title":"Codificaci\u00f3n de la p\u00e1gina"},{"location":"desarrollo/joomla.html#allow_url_fopen-desactivado","text":"Para el problema del eWeather del tipo ( fuente ): 1 Warning : file_get_contents (): URL file - access is disabled in the server configuration in /(lo que sea)/includes/domit/x ml_domit_parser . php on line 1645 El problema es seguramente del servidor, ya que el archivo php.ini tiene el par\u00e1metro allow_url_fopen deshabilitado. La soluci\u00f3n es utilizar la librer\u00eda cURL para evitar el uso de la funci\u00f3n file_get_contents(). Localizar el archivo que est\u00e1 en la carpeta donde est\u00e9 alojado el Joomla en la siguiente ruta: /includes/domit/xml_domit_parser.php Editarlo e ir a la linea 1645 En esa linea pone: return file_get_contents($filename); Eliminamos la l\u00ednea y ponemos esto en su lugar: 1 2 3 4 5 6 7 $ch = curl_init(); $timeout = 5; curl_setopt ($ch, CURLOPT_URL, $filename); curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout); return curl_exec($ch); curl_close($ch); Guardamos el archivo y lo subimos al servidor sustituyendo al antiguo.","title":"allow_url_fopen desactivado"},{"location":"desarrollo/php.html","text":"PHP \u00b6 Configuraci\u00f3n \u00b6 Se pueden cambiar los ajustes de PHP para el sitio por medio del fichero de configuraci\u00f3n de Apache. Ver p\u00e1gina 244 del libro \"Desarrollo Web con PHP 6 y MySQL 5.1\". Cadenas \u00b6 Se pueden definir de tres formas: Con comillas simples \u00b6 1 2 <?php $cadena = 'Esto es una cadena.' ; Para incluir el caracter comilla simple hay que escaparlo: 1 2 <?php $cadena = 'Esto es una comilla: \\'.' ; Con comillas dobles \u00b6 Permiten incluir variables: 1 2 3 <?php $i = 12 ; $cadena = \"Un a\u00f1o tiene $i meses.\" ; Tambi\u00e9n permite escapar una serie de caracteres como: \\\": Comilla doble \\n: Retorno de carro \\t: Tabulador \\$: S\u00edmbolo de dolar En bloque \u00b6 Ejemplo: 1 2 3 4 5 6 7 8 9 <?php $i = 12 ; $cadena = <<< CADENA Esto es una cadena definida en bloque. Podemos utilizar variables como en las cadenas de comillas dobles. Esto es un ejemplo: $i. CADENA ; Volcado de variables \u00b6 var_dump($var); : Para variables normales print_r($array); : Para arrays CVarDumper::dump($param, 10, true); : S\u00f3lo en Yii Comparadores \u00b6 Debido a la flexibilidad de PHP con los tipos de datos, los comparadores normales ( == por ejemplo) pueden producir resultados err\u00f3neos si no forzamos que adem\u00e1s del valor se compare el tipo. Por ejemplo la funci\u00f3n strpos() devuelve 0 si se encuentra la subcadena al principio y FALSE si no lo encuentra, pero en PHP, ambos tienen el mismo significado. El operador == compara si la expresi\u00f3n de la izquierda y la derecha tienen el mismo valor, mientras que === compara adem\u00e1s que sean del mismo tipo. As\u00ed se distingue 0 (entero) de FALSE (l\u00f3gico). Aqu\u00ed se encuentra la documentaci\u00f3n completa de los operadores de comparaci\u00f3n.","title":"PHP"},{"location":"desarrollo/php.html#php","text":"","title":"PHP"},{"location":"desarrollo/php.html#configuracion","text":"Se pueden cambiar los ajustes de PHP para el sitio por medio del fichero de configuraci\u00f3n de Apache. Ver p\u00e1gina 244 del libro \"Desarrollo Web con PHP 6 y MySQL 5.1\".","title":"Configuraci\u00f3n"},{"location":"desarrollo/php.html#cadenas","text":"Se pueden definir de tres formas:","title":"Cadenas"},{"location":"desarrollo/php.html#con-comillas-simples","text":"1 2 <?php $cadena = 'Esto es una cadena.' ; Para incluir el caracter comilla simple hay que escaparlo: 1 2 <?php $cadena = 'Esto es una comilla: \\'.' ;","title":"Con comillas simples"},{"location":"desarrollo/php.html#con-comillas-dobles","text":"Permiten incluir variables: 1 2 3 <?php $i = 12 ; $cadena = \"Un a\u00f1o tiene $i meses.\" ; Tambi\u00e9n permite escapar una serie de caracteres como: \\\": Comilla doble \\n: Retorno de carro \\t: Tabulador \\$: S\u00edmbolo de dolar","title":"Con comillas dobles"},{"location":"desarrollo/php.html#en-bloque","text":"Ejemplo: 1 2 3 4 5 6 7 8 9 <?php $i = 12 ; $cadena = <<< CADENA Esto es una cadena definida en bloque. Podemos utilizar variables como en las cadenas de comillas dobles. Esto es un ejemplo: $i. CADENA ;","title":"En bloque"},{"location":"desarrollo/php.html#volcado-de-variables","text":"var_dump($var); : Para variables normales print_r($array); : Para arrays CVarDumper::dump($param, 10, true); : S\u00f3lo en Yii","title":"Volcado de variables"},{"location":"desarrollo/php.html#comparadores","text":"Debido a la flexibilidad de PHP con los tipos de datos, los comparadores normales ( == por ejemplo) pueden producir resultados err\u00f3neos si no forzamos que adem\u00e1s del valor se compare el tipo. Por ejemplo la funci\u00f3n strpos() devuelve 0 si se encuentra la subcadena al principio y FALSE si no lo encuentra, pero en PHP, ambos tienen el mismo significado. El operador == compara si la expresi\u00f3n de la izquierda y la derecha tienen el mismo valor, mientras que === compara adem\u00e1s que sean del mismo tipo. As\u00ed se distingue 0 (entero) de FALSE (l\u00f3gico). Aqu\u00ed se encuentra la documentaci\u00f3n completa de los operadores de comparaci\u00f3n.","title":"Comparadores"},{"location":"desarrollo/projects.html","text":"Gesti\u00f3n de Proyectos \u00b6 Enlaces \u00b6 Redmine : Recomendado por Carlos Fenollosa. Swagger : Documentaci\u00f3n de APIs REST y sandbox para probarlas. Comentario en GenbetaDev . Web Developer Checklist : Listas de control para desarrollos web. Comentario en GenbetaDev .","title":"Gesti\u00f3n de Proyectos"},{"location":"desarrollo/projects.html#gestion-de-proyectos","text":"","title":"Gesti\u00f3n de Proyectos"},{"location":"desarrollo/projects.html#enlaces","text":"Redmine : Recomendado por Carlos Fenollosa. Swagger : Documentaci\u00f3n de APIs REST y sandbox para probarlas. Comentario en GenbetaDev . Web Developer Checklist : Listas de control para desarrollos web. Comentario en GenbetaDev .","title":"Enlaces"},{"location":"desarrollo/python.html","text":"Python/Django \u00b6 Enlaces \u00b6 Cheatsheet \u00b6 Classy Class-Based Views : Detailed descriptions, with full methods and attributes, for each of Django's class-based generic views. Aprendizaje \u00b6 The Hitchhiker's Guide to Python How to Reset Migrations Django Admin Cookbook Django data migration when changing a field to ManyToMany : Cuando queremos cambiar de un modelo ForeignKey a ManyToMany. Alter model to add \u201cthrough\u201d relationship to order a ManytoMany field : Cuando queremos cambiar la tabla intermedia autom\u00e1tica a una gestionada con un modelo propio. Django Inline formsets example Django Migrations and How to Manage Conflicts M\u00f3dulos interesantes \u00b6 django-tinymce django-autocomplete-light wesome Django : A curated list of awesome Django apps, projects and resources. Entorno Django \u00b6 Para tener un entorno aislado (sin depender con los paquetes y versiones del sistema), instalar primero pip de Python3. Se puede hacer instalando el paquete python3-pip de Ubuntu, pero dado que interesa actualizar a la \u00faltima versi\u00f3n, es mejor instalarlo de forma independiente bajando el script get-pip.py de aqu\u00ed ejecut\u00e1ndolo as\u00ed: 1 $ sudo python3 get-pip.py Despu\u00e9s ejecutar en terminal: 1 2 3 4 $ sudo pip3 install virtualenv $ virtualenv --python = ` which python3 ` djangodev $ source djangodev/bin/activate ( djangodev ) $ pip install Django Cada vez que se quiera adaptar el entorno de la sesi\u00f3n del terminal a este entorno aislado, hay que ejecutar el pen\u00faltimo comando anterior ( source ). Entorno Django en Synology NAS \u00b6 Instalo m\u00f3dulo Python3 desde el Centro de Paquetes. Instalo pip en Python3: 1 2 3 4 $ wget -nd https://bootstrap.pypa.io/get-pip.py $ python get-pip.py $ cd /usr/local/bin $ sudo ln -s /volume1/@appstore/py3k/usr/local/bin/pip3 Instalo virtualenv: 1 2 $ sudo pip3 install virtualenv $ python3 /volume1/@appstore/py3k/usr/local/lib/python3.5/site-packages/virtualenv.py --python = ` which python3 ` djangodev Arranco el entorno virtual e instalo Django: 1 2 $ source djangodev/bin/activate ( djangodev ) $ pip install Django Creaci\u00f3n de proyecto Django \u00b6 Desde el directorio donde queremos que se cree ejecutamos: 1 (djangodev) $ django-admin startproject project01 Creaci\u00f3n de aplicaci\u00f3n Django \u00b6 Desde el directorio del proyecto (donde se encuentre el fichero manage.py ) ejecutamos: 1 (djangodev) $ python manage.py startapp app01 Para incorporar los modelos de la nueva aplicaci\u00f3n al mantenimiento autom\u00e1tico que proporciona el m\u00f3dulo admin de Django, hay que incorporar al fichero project01/settings.py lo siguiente en la secci\u00f3n INSTALLED_APPS : 1 2 3 4 5 6 7 8 9 INSTALLED_APPS = [ 'app01.apps.App01Config', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Luego ejecutamos el siguiente comando para generar las migraciones a partir de los modelos definidos en la app: 1 (djangodev) $ python manage.py makemigrations app01 Finalmente ejecutamos las migraciones propiamente dichas: 1 (djangodev) $ python manage.py migrate Para poder utilizar el m\u00f3dulo admin de Django, hay que crear al menos un usuario: 1 (djangodev) $ python manage.py createsuperuser Pienv \u00b6 Enlaces \u00b6 How to manage your Python projects with Pipenv Instalaci\u00f3n \u00b6 1 $ sudo -H pip install pipenv Creaci\u00f3n de entorno para Python3 \u00b6 1 2 $ pipenv install --three $ pipenv shell Creaci\u00f3n de entorno con versi\u00f3n espec\u00edfica de Python y de paquetes \u00b6 Instalar algunos paquetes necesarios: 1 2 $ sudo apt-get install build-essential checkinstall $ sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev Bajamos la versi\u00f3n source de aqu\u00ed . Descomprimimos: 1 $ tar -xzvf Python-3.6.6.tgz Renombramos el directorio de las fuentes para no confundirlo con el de los binarios: 1 $ mv Python-3.6.5 Python-3.6.5_src Creamos el directorio para los binarios: 1 $ mkdir Python-3.6.5 Entramos en el directorio de las fuentes y compilamos: 1 2 3 4 5 $ cd /home/usuario/Python-3.6.5_src $ ./configure --disable-ipv6 --prefix = /home/usuario/Python-3.6.5 $ make $ make test $ make install Creamos el entorno: 1 2 3 4 5 $ cd directorio_proyecto $ pipenv install --python /home/usuario/Python-3.6.5/bin/python3 $ pipenv install Django == 1 .11.12 $ pipenv install _resto_de_paquetes_ $ pipenv shell Ejemplo de creaci\u00f3n de entorno Django desde cero \u00b6 Creamos repositorio git (por ejemplo remote_james ) y lo sincronizamos (por ejemplo con /home/edumoreno/git/remote_james ). Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina): 1 2 3 4 5 6 $ cd ~/git/remote_james $ pipenv install --python /home/edumoreno/Python-3.6.5/bin/python3 $ pipenv shell $ pipenv install django $ django-admin startproject remote_james . $ python manage.py startapp james Incorporamos nueva app en fichero settings.py : 1 2 3 4 5 6 7 8 9 INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecutamos: 1 2 3 4 $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0 .0.0.0:8000 A\u00f1adir campo a modelo intermedio ManyToMany \u00b6 Partimos por ejemplo de: 1 2 3 4 5 6 7 8 9 10 11 12 13 # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , blank = True ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Primero averiguamos el nombre de la tabla intermedia que se cre\u00f3 autom\u00e1ticamente cuando se a\u00f1adi\u00f3 el campo unidades al modelo Taller . En este caso era: lms_taller_unidades . Hacemos backup: 1 $ mysqldump --opt -h localhost --user = usuario --password = contrase\u00f1a database lms_taller_unidades > backup_lms_taller_unidades.sql Borramos o mejor comentamos el campo unidades de Taller y generamos migraciones y las aplicamos, lo que borrar\u00e1 la tabla. Creamos el objeto intermedio: 1 2 3 4 5 6 7 8 9 10 11 12 # TallerUnidades class TallerUnidades ( models . Model ): taller = models . ForeignKey ( 'Taller' , on_delete = models . CASCADE ) unidad = models . ForeignKey ( 'Unidad' , on_delete = models . CASCADE ) position = models . PositiveSmallIntegerField ( null = True ) class Meta : db_table = 'lms_taller_unidades' ordering = [ \"position\" ] verbose_name = \"unidad\" verbose_name_plural = \"unidades\" unique_together = (( \"taller\" , \"unidad\" ),) Reestablecemos la relaci\u00f3n ManyToMany a trav\u00e9s del objeto intermedio: 1 2 3 4 5 6 7 8 9 10 11 12 13 # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , through = 'TallerUnidades' ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Creamos migraciones y las aplicamos. Cargamos el backup de la tabla: 1 $ mysql -h localhost --user = usuario --password = contrase\u00f1a database < backup_lms_taller_unidades.sql Si hemos utilizado el campo ManyToMany en el objeto Admin del modelo principal veremos errores como los siguientes: 1 2 ERRORS: <class 'lms.admin.TallerAdmin'>: (admin.E013) The value of 'fields' cannot include the ManyToManyField 'unidades', because that field manually specifies a relationship model. No habr\u00e1 m\u00e1s remedio que dejar de mostrar el campo directamente con los widgets ManyToMany y pasar a utilizar Inlines. Personalizaci\u00f3n del modelo User \u00b6 Es recomendable cuando se empieza un proyecto, sustituir la gesti\u00f3n del modelo User por uno propio, ya que si se quiere hacer m\u00e1s adelante con la aplicaci\u00f3n ya en marcha, es muy complicada la migraci\u00f3n entre tablas. Un par de buenos art\u00edculos sobre el tema son: Extending User Model Using a Custom Model Extending AbstractUser How to Implement Multiple User Types with Django Creamos el modelo as\u00ed: 1 2 3 4 from django.contrib.auth.models import AbstractUser class User ( AbstractUser ): pass Y lo activamos definiendo la siguiente propiedad en el fichero settings.py : 1 AUTH_USER_MODEL = 'app01.User' Si no queremos perder los formularios especiales de la aplicaci\u00f3n admin para el modelo original, adem\u00e1s hay que personalizar la clase UserAdmin de la siguiente forma: 1 2 3 4 5 6 from django.contrib.auth.admin import UserAdmin class MyUserAdmin ( UserAdmin ): model = User admin . site . register ( User , MyUserAdmin ) Gesti\u00f3n de migraciones \u00b6 Una vez generadas las migraciones, si queremos obtener el c\u00f3digo SQL a que equivalen hay que ejecutar el comando (en el ejemploo solicitamos el c\u00f3digo correspondiente a la migraci\u00f3n 0008 ): 1 (djangodev) $ python manage.py sqlmigrate app01 0008 Para situarnos en un punto concreto de la serie de migraciones (deshaciendo por tanto las posteriores cuyos ficheros se podr\u00e1n borrar): 1 (djangodev) $ python manage.py migrate app01 0010 Para mostrar los nombres de todas las migraciones (si no ponemos el nombre al final se muestran las de todo el sitio): 1 (djangodev) $ python manage.py showmigrations app01 Para deshacer todas las migraciones: 1 (djangodev) $ python manage.py migrate app01 zero Para crear una migraci\u00f3n vac\u00eda que podremos utilizar para hacer transferencias de datos (ver ejemplo aqu\u00ed ): 1 (djangodev) $ python manage.py makemigrations app01 --empty Para saber c\u00f3mo gestionar las migraciones en diferentes ramas del desarrollo y evitar/solucionar conflictos, leer este art\u00edculo . Formateo de cadenas \u00b6 Con tuplas (no se puede cambiar el orden de los par\u00e1metros): 1 \" %s parte de %s la cadena\" % ( var1 , var2 ) Con diccionario (se puede cambiar el orden de los par\u00e1metros): 1 \" %(par1)s parte de %(par2)s la cadena\" % { 'par1' : var1 , 'par2' : var2 } Directorio instalaci\u00f3n Django \u00b6 Para averiguar d\u00f3nde est\u00e1n los ficheros de Django, ejecutar el siguiente comando: 1 ( djangodev ) $ python - c \"import django; print(django.__path__)\" Tutorial Django \u00b6 Escribiendo una view: Escribiendo directamente la HTTP Response Renderizando una plantilla Gesti\u00f3n de URL's Formulario manual Formulario con vistas gen\u00e9ricas Creando modelos Manipulaci\u00f3n del modelo de datos por CLI Tests Ficheros est\u00e1ticos : Inserci\u00f3n de CSS en las vistas. Modificaci\u00f3n representaci\u00f3n detalle modelos : fields, fieldsets Objetos relacionados en detalle modelos : Inlines Modificaci\u00f3n representaci\u00f3n lista modelos : list_display, list_filter, search_fields Sustituci\u00f3n de templates en el sitio admin Empaquetado de aplicaciones Env\u00edo de mails Tutorial Django de Mozilla Developer Network \u00b6 Using models - Searching for records Utilizando las listas gen\u00e9ricas y vistas de detalle Personalizaci\u00f3n del subsistema de autenticaci\u00f3n : P\u00e1ginas de login, logout, cambio de password, etc. Propiedad calculada en modelo : Sin correspondencia en base de datos. Formularios: Usando Form y view funci\u00f3n Usando ModelForm y CRUD Views Referencia Django \u00b6 Directorio Admin actions : Creaci\u00f3n de actions, p\u00e1ginas intermedias al ejecutar actions, gesti\u00f3n de actions. Autenticaci\u00f3n Temas interesantes \u00b6 filter, list comprehension y generators . Para filtrar por ejemplo una lista de objetos se pueden utilizar estos tres elementos. Hay que tener en cuenta que filter devuelve un iterator. Si por eejemplo s\u00f3lo queremos el n\u00famero de elementos habr\u00e1 que generar una lista o set con \u00e9l. How to Extend Django User Model . Este art\u00edculo es un ejemplo del caso 4. Uso de Class Views \u00b6 B\u00e1sicas \u00b6 Documentadas aqu\u00ed . TemplateView \u00b6 La m\u00e1s sencilla. S\u00f3lo necesita definir la propiedad template_name apuntando a la plantilla. Para a\u00f1adir datos al contexto (esto funciona en todas las view classes) se puede definir la funci\u00f3n get_context_data (ver ejemplo e apartado Passing variables to the template aqu\u00ed ) RedirectView \u00b6 Se puede usar tal cual para definir redirecciones en los ficheros url.py . Por ejemplo: 1 2 3 4 urlpatterns = [ url ( r '^$' , RedirectView . as_view ( url = reverse_lazy ( 'admin:index' ))), ... ] Pero tambi\u00e9n se puede heredar de ella para por ejemplo hacer una vista \"proxy\" para actualizar un contador de visitas a otra vista, como el ejemplo que hay aqu\u00ed . Gen\u00e9ricas para visualizaci\u00f3n de modelos \u00b6 Son las dise\u00f1adas para generar listados y vistas de detalle de un modelo. Son m\u00e1s adecuadas para visualizaci\u00f3n, como la que se har\u00eda por ejemplo en un blog. Documentadas aqu\u00ed . En las dos clases de este tipo, s\u00f3lo se necesita definir la propiedad model . DetailView \u00b6 La plantilla se define por convenci\u00f3n a\u00f1adiendo _detail.html al nombre del modelo. Dentro de la plantilla, el objeto que se quiere representar aparece en la variable de contexto object . ListView \u00b6 La plantilla se define por convenci\u00f3n a\u00f1adiendo _list.html al nombre del modelo. Dentro de la plantilla, la colecci\u00f3n de objetos que se quiere representar aparece en la variable de contexto object_list . Gen\u00e9ricas para edici\u00f3n de modelos \u00b6 Permiten personalizar las vistas t\u00edpicas del mantenimiento de un modelo (creaci\u00f3n, actualizaci\u00f3n y borrado). Documentadas aqu\u00ed . En cualquiera de las cuatro siguientes clases, en la plantilla incluiremos los tags HTML para el formulario (no se generan autom\u00e1ticamente porque la p\u00e1gina podr\u00eda contener varios formularios o por si no estamos generando HTML). Se suele hacer algo as\u00ed: 1 2 3 4 <form action= \"\" method= \"post\" > {{ \"{% csrf_token \" }} %} {{ \"{{ form \" }} }} <input type= \"submit\" value= \"Save\" /> </form> El tag para el formulario tiene tres variantes: {{ \"{{ form.as_p \" }}}} : Cada campo del formulario se genera como un <p> . {{ \"{{ form.as_table \" }}}} : Cada campo del formulario se genera como una fila de una tabla. {{ \"{{ form.as_ul \" }}}} : Cada campo del formulario se genera como una lista sin numerar. Para m\u00e1ximo control siempre podemos generar cada campo del formulario por separado o incluso escribir el formulario completo a mano (ver documentaci\u00f3n Working with forms ). FormView \u00b6 Gestiona la vista con un formulario gen\u00e9rico. Si se produce error en la validaci\u00f3n, vuelve a cargar la misma URL con los campos rellenos e informaci\u00f3n sobre los errores; Si se supera la validaci\u00f3n se redirije a otra URL. En el contexto de la plantilla tendremos el formulario bajo la variable form . Necesita definir las propiedades siguientes: form_class : Clase formulario. success_url : URL a la que se redirije en caso de superar la validaci\u00f3n. template_name : Plantilla. Tambi\u00e9n es interesante definir el m\u00e9todo siguiente: form_valid : Se ejecutar\u00e1 cuando el formulario se valide correctamente. Obtendremos los datos del formulario del diccionario self.form.cleaned_data . Ver ejemplos aqu\u00ed y en apartado Now for a FormView de aqu\u00ed . CreateView \u00b6 Para la creaci\u00f3n de un modelo. UpdateView \u00b6 Para la actualizaci\u00f3n de un modelo. DeleteView \u00b6 Para el borrado de un modelo. Empaquetadas \u00b6 FilterView \u00b6 Es una especie de ListView con filtros. Ver documentaci\u00f3n aqu\u00ed . Idioms \u00b6 Retorno seguro del primer elemento de una lista: return (get_list()[:1] or [None])[0] Valor predeterminado en caso de que variable sea None: return variable or 0 Acceso seguro al atributo de un objeto: getattr(object, name[, default]) La funci\u00f3n getattr nos permite indicar un valor predeterminado si un objeto no tiene el atributo que buscamos. Funciona tambi\u00e9n si el objeto es None, lo que nos permite acceder de forma segura a un objeto cuando no sabemos si existe. Suma de una propiedad de una lista de objetos: suma = sum(logro.puntos for logro in logros_totales) Suma de una propiedad de una lista de objetos: suma = sum(list(map(lambda x: x.puntos, logros_totales))) Operador ternario: valor_cuando_true if condici\u00f3n else valor_cuando_false List comprehensions : new_list = [expression(i) for i in old_list if filter(i)] Filtro de los elementos de una lista que contienen un fragmento de cadena, por ejemplo las constantes de pygame que empiezan por K_ : filter(lambda x:'K_' in x, dir(pygame)) Switch/case: Se suele utilizar un diccionario como se explica aqu\u00ed . Template filters \u00b6 {{ variable|default_if_none:\"\" }} : Muestra el texto pasado como argumento si variable vale None . {{ variable|default:\"\" }} : Muestra el texto pasado como argumento si variable es evaluada como False (cadena vac\u00eda, lista vac\u00eda, etc.). {{ variable_date|date:\"Y-m-d\" }} : Formatea una variable de tipo date . Lista de opciones de formato aqu\u00ed . {{ variable_list_string|join:\", \" }} : Concatena una lista de strings. {{ variable_string|urlencode }} : Codifica una string para que sea segura en una URL. {{ variable_string|unicode_decode }} : Decodifica un string en unicode. {{ variable_string|safe }} : Genera los caracteres para poder interpretar el string como HTML en lugar de escaparlos como se har\u00eda normalmente. {{ variable_list|length }} : N\u00famero de elementos de la lista. {{ variable_int|add:1 }} : A\u00f1ade 1 a la variable entera. Snippets Python \u00b6 Servidor HTTP en el directorio actual: python -m SimpleHTTPServer 8080 Convertir un set en un list ordenado: una_lista = sorted(un_set, key=lambda x: x.position) Agregar elementos a un diccionario de listas creando las claves si no existen ( fuente ): dic.setdefault(key,[]).append(value) Formateo de fechas : Predeterminado: la funci\u00f3n de conversi\u00f3n a cadena devuelve la fecha en formato ISO: str(datetime.datetime(2008, 11, 22, 19, 53, 42)) devuelve 2008-11-22 19:53:42 Funci\u00f3n de impresi\u00f3n con formato: para el resto de formatos utilizar strftime() . Consultar aqu\u00ed los c\u00f3digos de formato. Snippets Django \u00b6 Colecci\u00f3n completa de objetos de un modelo: Unidad.objects.all() Colecci\u00f3n completa de objetos de un modelo ordenada: Unidad.objects.all().order_by('nombre') Colecci\u00f3n filtrada de objetos de un modelo: Actividad.objects.filter(fecha__year=2017) Filtro OR (es necesario hacer from django.db.models import Q ): GrupoUnidades.objects.filter(Q(pausada=True) | Q(fecha_fin__isnull=False)) Instancia concreta de un objeto: Unidad.objects.get(pk=3) Uni\u00f3n de recordsets y distinct: 1 2 3 4 grupos = Grupo . objects . none () for curso in obj . curso_set . all (): grupos = grupos | curso . grupo_set . all () grupos = grupos . distinct () Filtro en ListView \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 # urls.py from django.conf.urls import url from . import views app_name = 'lms' urlpatterns = [ url ( r '^asistencia/(?P<pk>\\d+)/grupo/(?P<admin>\\w+)/$' , views . AsistenciaGrupoView . as_view (), name = 'asistencia_grupo' ) ] # views.py class AsistenciaGrupoView ( generic . ListView ): template_name = 'lms/asistencia_grupo.html' def get_queryset ( self ): semanas = int ( self . request . GET . get ( 'semanas' , '12' )) return Jornada . objects . filter ( grupo__id = self . kwargs [ 'pk' ], fecha__gte = datetime . today () - timedelta ( weeks = semanas )) . order_by ( 'fecha' ) def get_context_data ( self , ** kwargs ): context = super ( AsistenciaGrupoView , self ) . get_context_data ( ** kwargs ) # Lista de semanas que mostraremos en el combo para filtrar context [ 'lista_semanas' ] = [( 4 , 1 ), ( 8 , 2 )] # Par\u00e1metro de filtrado del querystring (12 semanas como valor predeterminado) context [ 'semanas' ] = int ( self . request . GET . get ( 'semanas' , '12' )) # Valor del PK del grupo recogido de la URL context [ 'pk' ] = self . kwargs [ 'pk' ] return context # template < form method = \"get\" action = \"{{ \" { % url 'lms:asistencia_grupo' pk \" }}%}\" > < label for = \"semanas_id\" > Meses </ label > < select class = \"form-control\" name = \"semanas\" id = \"semanas_id\" onchange = 'if(this.value != 0) { this.form.submit(); }' > {{ \"{ % f or v, d in lista_semanas \" }} % } < option value = \"{{ \" {{ v \" }}}}\" {{ \"{ % i f semanas == v \" }} % } selected = 'selected' {{ \"{ % e ndif \" }} % } > {{ \"{{ d \" }}}} </ option > {{ \"{ % e ndfor \" }} % } </ select > </ form > Instrospecci\u00f3n \u00b6 Lista de atributos \u00b6 Podemos obtenerlos de dos maneras: objeto.__dict__ vars(objeto) Lista de atributos y m\u00e9todos \u00b6 dir(objeto) Logging \u00b6 Log a fichero \u00b6 Configurar un logger en el fichero de settings correspondiente a\u00f1adiendo esto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'handlers': { 'file': { 'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': 'debug.log', }, }, 'loggers': { 'log': { 'handlers': ['file'], 'level': 'DEBUG', 'propagate': True, }, }, } En el m\u00f3dulo donde queramos obtener log, a\u00f1adir al principio lo siguiente: 1 2 3 import logging logger = logging . getLogger ( 'log' ) Y dentro de la funci\u00f3n donde queramos emitir algo al log: 1 logger . debug ( 'lo que sea' ) Log a consola \u00b6 Si s\u00f3lo queremos imprimir en consola una traza r\u00e1pida, es m\u00e1s f\u00e1cil escribiendo simplemente: 1 print ( 'lo que sea' , file = sys . stderr ) Traza de queries a consola \u00b6 Configurar el siguiente logger en el fichero de settings correspondiente: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 LOGGING = { 'version': 1, 'filters': { 'require_debug_true': { '()': 'django.utils.log.RequireDebugTrue', } }, 'handlers': { 'console': { 'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', } }, 'loggers': { 'django.db.backends': { 'level': 'DEBUG', 'handlers': ['console'], } } } pip \u00b6 Instalaci\u00f3n versi\u00f3n espec\u00edfica de un paquete \u00b6 1 $ pip install Django == 1 .11.6 Usando Webpack para construir el frontend \u00b6 Enlaces: \u00b6 Django + webpack + Vue.js - setting up a new project that's easy to develop and deploy (part 1) Using Webpack transparently with Django + hot reloading React components as a bonus webpack-bundle-tracker django-webpack-loader django-vue-webpack : A boilerplate of using Django as backend framework, Vue js and webpack as the frontend setup. Building Modern Applications with Django, Vue.js and Auth0: Part 2 Procedimiento \u00b6 Instalamos Vue-CLI en la m\u00e1quina de desarrollo: 1 2 sudo npm install -g @vue/cli sudo npm install -g @vue/cli-init Generamos el scaffolding para vue y webpack ejecutando lo siguiente desde el directorio que queremos que contenga el proyecto (en el ejemplo lo llamaremos vue_test ): 1 vue init webpack vue_test Durante la generaci\u00f3n del proyecto se nos hacen las siguientes preguntas: Vue build: Elegimos Runtime + Compiler Install vue-router?: Elegimos Y Use ESLint to lint your code?: n Set up unit tests: n Setup e2e tests with Nightwatch?: n Should we run npm install for you after the project has been created?: Yes, use NPM Generamos el scaffolding para Django: 1 2 cd vue_test/ django-admin startproject vue_test . Instalamos el plugin de webpack webpack-bundle-tracker y el m\u00f3dulo Django django-webpack-loader (con pipenv): 1 2 npm install --save-dev webpack-bundle-tracker pipenv install django-webpack-loader A\u00f1adimos webpack_loader a las aplicaciones Django: 1 2 3 4 5 # ./vue_test/settings.py INSTALLED_APPS = [ 'webpack_loader', #... ] Configurar webpack para que use BundleTracker : 1 2 3 4 5 6 7 8 // build/webpack.base.conf.js let BundleTracker = require('webpack-bundle-tracker') module.exports = { // ... plugins: [ new BundleTracker({filename: './webpack-stats.json'}), ], } Definir las rutas est\u00e1ticas: Configuraci\u00f3n webpack: 1 2 3 4 5 6 7 8 9 10 11 12 13 // ./config/index.js module.exports = { build: { assetsRoot: path.resolve(__dirname, '../dist/'), assetsSubDirectory: '', assetsPublicPath: '/static/', // ... }, dev: { assetsPublicPath: 'http://localhost:8080/', // ... } } Configuraci\u00f3n Django: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # ./vue_test/settings.py STATICFILES_DIRS = ( os.path.join(BASE_DIR, 'dist'), os.path.join(BASE_DIR, 'static'), ) STATIC_ROOT = os.path.join(BASE_DIR, 'public') STATIC_URL = '/static/' WEBPACK_LOADER = { 'DEFAULT': { 'BUNDLE_DIR_NAME': '', 'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats.json'), } } Configuraci\u00f3n webpack para que resuelva los ficheros est\u00e1ticos desde /static : 1 2 3 4 5 6 7 8 // build/webpack.base.conf.js module.exports = { resolve: { alias: { // ... '__STATIC__': resolve('static'), }, } Configuraci\u00f3n del Hot Reload: 1 2 3 4 5 6 7 // build/webpack.dev.conf.js devServer: { headers: { \"Access-Control-Allow-Origin\":\"\\*\" }, // ... } Los contenidos est\u00e1ticos se servir\u00e1n desde uno y otro entorno de la siguiente forma: 1 2 3 4 5 <!-- in a Django template --> < img src = \"{{ \" {% static ' logo . png ' \" }}%}\" > <!-- in a Vue component --> < img src = \"~__STATIC__/logo.png\" > Finalmente, para servir los contenidos cliente en desarrollo hay que ejecutar: 1 2 cd vue-test npm run dev Y para servir los contenidos del backend: 1 2 3 cd vue-test pipenv shell python manage.py runserver Cuando hagamos npm run build todo lo gestionado por webpack se compilar\u00e1 dentro del directorio dist . La documentaci\u00f3n de webpack se encuentra aqu\u00ed . Instalaci\u00f3n de JupyterHub \u00b6 Enlaces \u00b6 jupyterhub-deploy-docker Docker for Data Science: Running a Dockerized Jupyter Server 28 Jupyter Notebook tips, tricks, and shortcuts Jupyter Notebook for Beginners: A Tutorial nbgrader Niveles de instalaci\u00f3n \u00b6 Peque\u00f1a - Paquetes sistema Media - Docker Grande - Kubernetes Instalaci\u00f3n The Littlest JupyterHub \u00b6 Instalaci\u00f3n de dependencias y JupyterHub: 1 2 $ sudo apt-get install python3 git curl $ curl https://raw.githubusercontent.com/jupyterhub/the-littlest-jupyterhub/master/bootstrap/bootstrap.py | sudo -E python3 - --admin niubit Configuraci\u00f3n de puerto de Traefik en: 1 /opt/tljh/state/traefik.toml Reinicio de traefik : 1 $ sudo systemctl restart traefik.service Si queremos detener el servicio hay que desactivar los dos siguientes: 1 2 $ sudo systemctl disable jupyterhub.service $ sudo systemctl disable traefik.service Configuraci\u00f3n de fichero de log \u00b6 A\u00f1adimos lo siguiente al final del fichero /opt/tljh/hub/lib/python3.6/site-packages/tljh/jupyterhub_config.py : 1 c.JupyterHub.extra_log_file = '/var/log/jupyterhub.log' Reiniciamos el servicio: 1 $ sudo systemctl restart jupyterhub.service A\u00f1adiendo m\u00f3dulos Python al sistema \u00b6 Abrir una terminal en Jupyter con un usuario admin. Ejecutar: 1 $ sudo -E pip install <paquete> Visualizaci\u00f3n de Jupyter Notebooks \u00b6 En este art\u00edculo mencionan las siguientes opciones: Share your notebook file with gists or on github, both of which render the notebooks. See this example . If you upload your notebook to a github repository, you can use the handy mybinder service to allow someone half an hour of interactive Jupyter access to your repository. Store your notebook e.g. in dropbox and put the link to nbviewer . nbviewer will render the notebook from whichever source you host it. Impresi\u00f3n con formato \u00b6 Si queremos que la salida por consola tenga formato, hay que utilizar la codificaci\u00f3n de tipo Set Graphics Mode que se lista en esta p\u00e1gina con el c\u00f3digo \\033 como secuencia de Esc. Por ejemplo si queremos destacar en negrita la primera palabra de la siguiente frase lo haremos as\u00ed: 1 print ( \" \\033 [1m;ERROR \\033 [0m Algo ha salido mal.\" ) Queries complejas \u00b6 Los par\u00e1metros que aplicamos al m\u00e9todo filter se aplican con un and entre ellos a la query resultante. Para hacer queries m\u00e1s complejas (con and y or con prioridades establecidas con par\u00e9ntesis) hay que utilizar los objetos Q .","title":"Python/Django"},{"location":"desarrollo/python.html#pythondjango","text":"","title":"Python/Django"},{"location":"desarrollo/python.html#enlaces","text":"","title":"Enlaces"},{"location":"desarrollo/python.html#cheatsheet","text":"Classy Class-Based Views : Detailed descriptions, with full methods and attributes, for each of Django's class-based generic views.","title":"Cheatsheet"},{"location":"desarrollo/python.html#aprendizaje","text":"The Hitchhiker's Guide to Python How to Reset Migrations Django Admin Cookbook Django data migration when changing a field to ManyToMany : Cuando queremos cambiar de un modelo ForeignKey a ManyToMany. Alter model to add \u201cthrough\u201d relationship to order a ManytoMany field : Cuando queremos cambiar la tabla intermedia autom\u00e1tica a una gestionada con un modelo propio. Django Inline formsets example Django Migrations and How to Manage Conflicts","title":"Aprendizaje"},{"location":"desarrollo/python.html#modulos-interesantes","text":"django-tinymce django-autocomplete-light wesome Django : A curated list of awesome Django apps, projects and resources.","title":"M\u00f3dulos interesantes"},{"location":"desarrollo/python.html#entorno-django","text":"Para tener un entorno aislado (sin depender con los paquetes y versiones del sistema), instalar primero pip de Python3. Se puede hacer instalando el paquete python3-pip de Ubuntu, pero dado que interesa actualizar a la \u00faltima versi\u00f3n, es mejor instalarlo de forma independiente bajando el script get-pip.py de aqu\u00ed ejecut\u00e1ndolo as\u00ed: 1 $ sudo python3 get-pip.py Despu\u00e9s ejecutar en terminal: 1 2 3 4 $ sudo pip3 install virtualenv $ virtualenv --python = ` which python3 ` djangodev $ source djangodev/bin/activate ( djangodev ) $ pip install Django Cada vez que se quiera adaptar el entorno de la sesi\u00f3n del terminal a este entorno aislado, hay que ejecutar el pen\u00faltimo comando anterior ( source ).","title":"Entorno Django"},{"location":"desarrollo/python.html#entorno-django-en-synology-nas","text":"Instalo m\u00f3dulo Python3 desde el Centro de Paquetes. Instalo pip en Python3: 1 2 3 4 $ wget -nd https://bootstrap.pypa.io/get-pip.py $ python get-pip.py $ cd /usr/local/bin $ sudo ln -s /volume1/@appstore/py3k/usr/local/bin/pip3 Instalo virtualenv: 1 2 $ sudo pip3 install virtualenv $ python3 /volume1/@appstore/py3k/usr/local/lib/python3.5/site-packages/virtualenv.py --python = ` which python3 ` djangodev Arranco el entorno virtual e instalo Django: 1 2 $ source djangodev/bin/activate ( djangodev ) $ pip install Django","title":"Entorno Django en Synology NAS"},{"location":"desarrollo/python.html#creacion-de-proyecto-django","text":"Desde el directorio donde queremos que se cree ejecutamos: 1 (djangodev) $ django-admin startproject project01","title":"Creaci\u00f3n de proyecto Django"},{"location":"desarrollo/python.html#creacion-de-aplicacion-django","text":"Desde el directorio del proyecto (donde se encuentre el fichero manage.py ) ejecutamos: 1 (djangodev) $ python manage.py startapp app01 Para incorporar los modelos de la nueva aplicaci\u00f3n al mantenimiento autom\u00e1tico que proporciona el m\u00f3dulo admin de Django, hay que incorporar al fichero project01/settings.py lo siguiente en la secci\u00f3n INSTALLED_APPS : 1 2 3 4 5 6 7 8 9 INSTALLED_APPS = [ 'app01.apps.App01Config', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Luego ejecutamos el siguiente comando para generar las migraciones a partir de los modelos definidos en la app: 1 (djangodev) $ python manage.py makemigrations app01 Finalmente ejecutamos las migraciones propiamente dichas: 1 (djangodev) $ python manage.py migrate Para poder utilizar el m\u00f3dulo admin de Django, hay que crear al menos un usuario: 1 (djangodev) $ python manage.py createsuperuser","title":"Creaci\u00f3n de aplicaci\u00f3n Django"},{"location":"desarrollo/python.html#pienv","text":"","title":"Pienv"},{"location":"desarrollo/python.html#enlaces_1","text":"How to manage your Python projects with Pipenv","title":"Enlaces"},{"location":"desarrollo/python.html#instalacion","text":"1 $ sudo -H pip install pipenv","title":"Instalaci\u00f3n"},{"location":"desarrollo/python.html#creacion-de-entorno-para-python3","text":"1 2 $ pipenv install --three $ pipenv shell","title":"Creaci\u00f3n de entorno para Python3"},{"location":"desarrollo/python.html#creacion-de-entorno-con-version-especifica-de-python-y-de-paquetes","text":"Instalar algunos paquetes necesarios: 1 2 $ sudo apt-get install build-essential checkinstall $ sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev Bajamos la versi\u00f3n source de aqu\u00ed . Descomprimimos: 1 $ tar -xzvf Python-3.6.6.tgz Renombramos el directorio de las fuentes para no confundirlo con el de los binarios: 1 $ mv Python-3.6.5 Python-3.6.5_src Creamos el directorio para los binarios: 1 $ mkdir Python-3.6.5 Entramos en el directorio de las fuentes y compilamos: 1 2 3 4 5 $ cd /home/usuario/Python-3.6.5_src $ ./configure --disable-ipv6 --prefix = /home/usuario/Python-3.6.5 $ make $ make test $ make install Creamos el entorno: 1 2 3 4 5 $ cd directorio_proyecto $ pipenv install --python /home/usuario/Python-3.6.5/bin/python3 $ pipenv install Django == 1 .11.12 $ pipenv install _resto_de_paquetes_ $ pipenv shell","title":"Creaci\u00f3n de entorno con versi\u00f3n espec\u00edfica de Python y de paquetes"},{"location":"desarrollo/python.html#ejemplo-de-creacion-de-entorno-django-desde-cero","text":"Creamos repositorio git (por ejemplo remote_james ) y lo sincronizamos (por ejemplo con /home/edumoreno/git/remote_james ). Ejecutamos (en el ejemplo se usa una versi\u00f3n de Python espec\u00edfica compilada anteriormente en la m\u00e1quina): 1 2 3 4 5 6 $ cd ~/git/remote_james $ pipenv install --python /home/edumoreno/Python-3.6.5/bin/python3 $ pipenv shell $ pipenv install django $ django-admin startproject remote_james . $ python manage.py startapp james Incorporamos nueva app en fichero settings.py : 1 2 3 4 5 6 7 8 9 INSTALLED_APPS = [ 'james.apps.JamesConfig', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] Ejecutamos: 1 2 3 4 $ python manage.py makemigrations $ python manage.py migrate $ python manage.py createsuperuser $ python manage.py runserver 0 .0.0.0:8000","title":"Ejemplo de creaci\u00f3n de entorno Django desde cero"},{"location":"desarrollo/python.html#anadir-campo-a-modelo-intermedio-manytomany","text":"Partimos por ejemplo de: 1 2 3 4 5 6 7 8 9 10 11 12 13 # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , blank = True ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Primero averiguamos el nombre de la tabla intermedia que se cre\u00f3 autom\u00e1ticamente cuando se a\u00f1adi\u00f3 el campo unidades al modelo Taller . En este caso era: lms_taller_unidades . Hacemos backup: 1 $ mysqldump --opt -h localhost --user = usuario --password = contrase\u00f1a database lms_taller_unidades > backup_lms_taller_unidades.sql Borramos o mejor comentamos el campo unidades de Taller y generamos migraciones y las aplicamos, lo que borrar\u00e1 la tabla. Creamos el objeto intermedio: 1 2 3 4 5 6 7 8 9 10 11 12 # TallerUnidades class TallerUnidades ( models . Model ): taller = models . ForeignKey ( 'Taller' , on_delete = models . CASCADE ) unidad = models . ForeignKey ( 'Unidad' , on_delete = models . CASCADE ) position = models . PositiveSmallIntegerField ( null = True ) class Meta : db_table = 'lms_taller_unidades' ordering = [ \"position\" ] verbose_name = \"unidad\" verbose_name_plural = \"unidades\" unique_together = (( \"taller\" , \"unidad\" ),) Reestablecemos la relaci\u00f3n ManyToMany a trav\u00e9s del objeto intermedio: 1 2 3 4 5 6 7 8 9 10 11 12 13 # Taller class Taller ( models . Model ): nombre = models . CharField ( max_length = 100 , blank = False ) tema = models . CharField ( max_length = 100 , blank = False ) descripcion = models . TextField ( _ ( 'descripci\u00f3n' ), blank = False ) unidades = models . ManyToManyField ( 'Unidad' , through = 'TallerUnidades' ) def __str__ ( self ): return self . nombre class Meta : verbose_name_plural = _ ( \"talleres\" ) ordering = [ \"nombre\" ] Creamos migraciones y las aplicamos. Cargamos el backup de la tabla: 1 $ mysql -h localhost --user = usuario --password = contrase\u00f1a database < backup_lms_taller_unidades.sql Si hemos utilizado el campo ManyToMany en el objeto Admin del modelo principal veremos errores como los siguientes: 1 2 ERRORS: <class 'lms.admin.TallerAdmin'>: (admin.E013) The value of 'fields' cannot include the ManyToManyField 'unidades', because that field manually specifies a relationship model. No habr\u00e1 m\u00e1s remedio que dejar de mostrar el campo directamente con los widgets ManyToMany y pasar a utilizar Inlines.","title":"A\u00f1adir campo a modelo intermedio ManyToMany"},{"location":"desarrollo/python.html#personalizacion-del-modelo-user","text":"Es recomendable cuando se empieza un proyecto, sustituir la gesti\u00f3n del modelo User por uno propio, ya que si se quiere hacer m\u00e1s adelante con la aplicaci\u00f3n ya en marcha, es muy complicada la migraci\u00f3n entre tablas. Un par de buenos art\u00edculos sobre el tema son: Extending User Model Using a Custom Model Extending AbstractUser How to Implement Multiple User Types with Django Creamos el modelo as\u00ed: 1 2 3 4 from django.contrib.auth.models import AbstractUser class User ( AbstractUser ): pass Y lo activamos definiendo la siguiente propiedad en el fichero settings.py : 1 AUTH_USER_MODEL = 'app01.User' Si no queremos perder los formularios especiales de la aplicaci\u00f3n admin para el modelo original, adem\u00e1s hay que personalizar la clase UserAdmin de la siguiente forma: 1 2 3 4 5 6 from django.contrib.auth.admin import UserAdmin class MyUserAdmin ( UserAdmin ): model = User admin . site . register ( User , MyUserAdmin )","title":"Personalizaci\u00f3n del modelo User"},{"location":"desarrollo/python.html#gestion-de-migraciones","text":"Una vez generadas las migraciones, si queremos obtener el c\u00f3digo SQL a que equivalen hay que ejecutar el comando (en el ejemploo solicitamos el c\u00f3digo correspondiente a la migraci\u00f3n 0008 ): 1 (djangodev) $ python manage.py sqlmigrate app01 0008 Para situarnos en un punto concreto de la serie de migraciones (deshaciendo por tanto las posteriores cuyos ficheros se podr\u00e1n borrar): 1 (djangodev) $ python manage.py migrate app01 0010 Para mostrar los nombres de todas las migraciones (si no ponemos el nombre al final se muestran las de todo el sitio): 1 (djangodev) $ python manage.py showmigrations app01 Para deshacer todas las migraciones: 1 (djangodev) $ python manage.py migrate app01 zero Para crear una migraci\u00f3n vac\u00eda que podremos utilizar para hacer transferencias de datos (ver ejemplo aqu\u00ed ): 1 (djangodev) $ python manage.py makemigrations app01 --empty Para saber c\u00f3mo gestionar las migraciones en diferentes ramas del desarrollo y evitar/solucionar conflictos, leer este art\u00edculo .","title":"Gesti\u00f3n de migraciones"},{"location":"desarrollo/python.html#formateo-de-cadenas","text":"Con tuplas (no se puede cambiar el orden de los par\u00e1metros): 1 \" %s parte de %s la cadena\" % ( var1 , var2 ) Con diccionario (se puede cambiar el orden de los par\u00e1metros): 1 \" %(par1)s parte de %(par2)s la cadena\" % { 'par1' : var1 , 'par2' : var2 }","title":"Formateo de cadenas"},{"location":"desarrollo/python.html#directorio-instalacion-django","text":"Para averiguar d\u00f3nde est\u00e1n los ficheros de Django, ejecutar el siguiente comando: 1 ( djangodev ) $ python - c \"import django; print(django.__path__)\"","title":"Directorio instalaci\u00f3n Django"},{"location":"desarrollo/python.html#tutorial-django","text":"Escribiendo una view: Escribiendo directamente la HTTP Response Renderizando una plantilla Gesti\u00f3n de URL's Formulario manual Formulario con vistas gen\u00e9ricas Creando modelos Manipulaci\u00f3n del modelo de datos por CLI Tests Ficheros est\u00e1ticos : Inserci\u00f3n de CSS en las vistas. Modificaci\u00f3n representaci\u00f3n detalle modelos : fields, fieldsets Objetos relacionados en detalle modelos : Inlines Modificaci\u00f3n representaci\u00f3n lista modelos : list_display, list_filter, search_fields Sustituci\u00f3n de templates en el sitio admin Empaquetado de aplicaciones Env\u00edo de mails","title":"Tutorial Django"},{"location":"desarrollo/python.html#tutorial-django-de-mozilla-developer-network","text":"Using models - Searching for records Utilizando las listas gen\u00e9ricas y vistas de detalle Personalizaci\u00f3n del subsistema de autenticaci\u00f3n : P\u00e1ginas de login, logout, cambio de password, etc. Propiedad calculada en modelo : Sin correspondencia en base de datos. Formularios: Usando Form y view funci\u00f3n Usando ModelForm y CRUD Views","title":"Tutorial Django de Mozilla Developer Network"},{"location":"desarrollo/python.html#referencia-django","text":"Directorio Admin actions : Creaci\u00f3n de actions, p\u00e1ginas intermedias al ejecutar actions, gesti\u00f3n de actions. Autenticaci\u00f3n","title":"Referencia Django"},{"location":"desarrollo/python.html#temas-interesantes","text":"filter, list comprehension y generators . Para filtrar por ejemplo una lista de objetos se pueden utilizar estos tres elementos. Hay que tener en cuenta que filter devuelve un iterator. Si por eejemplo s\u00f3lo queremos el n\u00famero de elementos habr\u00e1 que generar una lista o set con \u00e9l. How to Extend Django User Model . Este art\u00edculo es un ejemplo del caso 4.","title":"Temas interesantes"},{"location":"desarrollo/python.html#uso-de-class-views","text":"","title":"Uso de Class Views"},{"location":"desarrollo/python.html#basicas","text":"Documentadas aqu\u00ed .","title":"B\u00e1sicas"},{"location":"desarrollo/python.html#templateview","text":"La m\u00e1s sencilla. S\u00f3lo necesita definir la propiedad template_name apuntando a la plantilla. Para a\u00f1adir datos al contexto (esto funciona en todas las view classes) se puede definir la funci\u00f3n get_context_data (ver ejemplo e apartado Passing variables to the template aqu\u00ed )","title":"TemplateView"},{"location":"desarrollo/python.html#redirectview","text":"Se puede usar tal cual para definir redirecciones en los ficheros url.py . Por ejemplo: 1 2 3 4 urlpatterns = [ url ( r '^$' , RedirectView . as_view ( url = reverse_lazy ( 'admin:index' ))), ... ] Pero tambi\u00e9n se puede heredar de ella para por ejemplo hacer una vista \"proxy\" para actualizar un contador de visitas a otra vista, como el ejemplo que hay aqu\u00ed .","title":"RedirectView"},{"location":"desarrollo/python.html#genericas-para-visualizacion-de-modelos","text":"Son las dise\u00f1adas para generar listados y vistas de detalle de un modelo. Son m\u00e1s adecuadas para visualizaci\u00f3n, como la que se har\u00eda por ejemplo en un blog. Documentadas aqu\u00ed . En las dos clases de este tipo, s\u00f3lo se necesita definir la propiedad model .","title":"Gen\u00e9ricas para visualizaci\u00f3n de modelos"},{"location":"desarrollo/python.html#detailview","text":"La plantilla se define por convenci\u00f3n a\u00f1adiendo _detail.html al nombre del modelo. Dentro de la plantilla, el objeto que se quiere representar aparece en la variable de contexto object .","title":"DetailView"},{"location":"desarrollo/python.html#listview","text":"La plantilla se define por convenci\u00f3n a\u00f1adiendo _list.html al nombre del modelo. Dentro de la plantilla, la colecci\u00f3n de objetos que se quiere representar aparece en la variable de contexto object_list .","title":"ListView"},{"location":"desarrollo/python.html#genericas-para-edicion-de-modelos","text":"Permiten personalizar las vistas t\u00edpicas del mantenimiento de un modelo (creaci\u00f3n, actualizaci\u00f3n y borrado). Documentadas aqu\u00ed . En cualquiera de las cuatro siguientes clases, en la plantilla incluiremos los tags HTML para el formulario (no se generan autom\u00e1ticamente porque la p\u00e1gina podr\u00eda contener varios formularios o por si no estamos generando HTML). Se suele hacer algo as\u00ed: 1 2 3 4 <form action= \"\" method= \"post\" > {{ \"{% csrf_token \" }} %} {{ \"{{ form \" }} }} <input type= \"submit\" value= \"Save\" /> </form> El tag para el formulario tiene tres variantes: {{ \"{{ form.as_p \" }}}} : Cada campo del formulario se genera como un <p> . {{ \"{{ form.as_table \" }}}} : Cada campo del formulario se genera como una fila de una tabla. {{ \"{{ form.as_ul \" }}}} : Cada campo del formulario se genera como una lista sin numerar. Para m\u00e1ximo control siempre podemos generar cada campo del formulario por separado o incluso escribir el formulario completo a mano (ver documentaci\u00f3n Working with forms ).","title":"Gen\u00e9ricas para edici\u00f3n de modelos"},{"location":"desarrollo/python.html#formview","text":"Gestiona la vista con un formulario gen\u00e9rico. Si se produce error en la validaci\u00f3n, vuelve a cargar la misma URL con los campos rellenos e informaci\u00f3n sobre los errores; Si se supera la validaci\u00f3n se redirije a otra URL. En el contexto de la plantilla tendremos el formulario bajo la variable form . Necesita definir las propiedades siguientes: form_class : Clase formulario. success_url : URL a la que se redirije en caso de superar la validaci\u00f3n. template_name : Plantilla. Tambi\u00e9n es interesante definir el m\u00e9todo siguiente: form_valid : Se ejecutar\u00e1 cuando el formulario se valide correctamente. Obtendremos los datos del formulario del diccionario self.form.cleaned_data . Ver ejemplos aqu\u00ed y en apartado Now for a FormView de aqu\u00ed .","title":"FormView"},{"location":"desarrollo/python.html#createview","text":"Para la creaci\u00f3n de un modelo.","title":"CreateView"},{"location":"desarrollo/python.html#updateview","text":"Para la actualizaci\u00f3n de un modelo.","title":"UpdateView"},{"location":"desarrollo/python.html#deleteview","text":"Para el borrado de un modelo.","title":"DeleteView"},{"location":"desarrollo/python.html#empaquetadas","text":"","title":"Empaquetadas"},{"location":"desarrollo/python.html#filterview","text":"Es una especie de ListView con filtros. Ver documentaci\u00f3n aqu\u00ed .","title":"FilterView"},{"location":"desarrollo/python.html#idioms","text":"Retorno seguro del primer elemento de una lista: return (get_list()[:1] or [None])[0] Valor predeterminado en caso de que variable sea None: return variable or 0 Acceso seguro al atributo de un objeto: getattr(object, name[, default]) La funci\u00f3n getattr nos permite indicar un valor predeterminado si un objeto no tiene el atributo que buscamos. Funciona tambi\u00e9n si el objeto es None, lo que nos permite acceder de forma segura a un objeto cuando no sabemos si existe. Suma de una propiedad de una lista de objetos: suma = sum(logro.puntos for logro in logros_totales) Suma de una propiedad de una lista de objetos: suma = sum(list(map(lambda x: x.puntos, logros_totales))) Operador ternario: valor_cuando_true if condici\u00f3n else valor_cuando_false List comprehensions : new_list = [expression(i) for i in old_list if filter(i)] Filtro de los elementos de una lista que contienen un fragmento de cadena, por ejemplo las constantes de pygame que empiezan por K_ : filter(lambda x:'K_' in x, dir(pygame)) Switch/case: Se suele utilizar un diccionario como se explica aqu\u00ed .","title":"Idioms"},{"location":"desarrollo/python.html#template-filters","text":"{{ variable|default_if_none:\"\" }} : Muestra el texto pasado como argumento si variable vale None . {{ variable|default:\"\" }} : Muestra el texto pasado como argumento si variable es evaluada como False (cadena vac\u00eda, lista vac\u00eda, etc.). {{ variable_date|date:\"Y-m-d\" }} : Formatea una variable de tipo date . Lista de opciones de formato aqu\u00ed . {{ variable_list_string|join:\", \" }} : Concatena una lista de strings. {{ variable_string|urlencode }} : Codifica una string para que sea segura en una URL. {{ variable_string|unicode_decode }} : Decodifica un string en unicode. {{ variable_string|safe }} : Genera los caracteres para poder interpretar el string como HTML en lugar de escaparlos como se har\u00eda normalmente. {{ variable_list|length }} : N\u00famero de elementos de la lista. {{ variable_int|add:1 }} : A\u00f1ade 1 a la variable entera.","title":"Template filters"},{"location":"desarrollo/python.html#snippets-python","text":"Servidor HTTP en el directorio actual: python -m SimpleHTTPServer 8080 Convertir un set en un list ordenado: una_lista = sorted(un_set, key=lambda x: x.position) Agregar elementos a un diccionario de listas creando las claves si no existen ( fuente ): dic.setdefault(key,[]).append(value) Formateo de fechas : Predeterminado: la funci\u00f3n de conversi\u00f3n a cadena devuelve la fecha en formato ISO: str(datetime.datetime(2008, 11, 22, 19, 53, 42)) devuelve 2008-11-22 19:53:42 Funci\u00f3n de impresi\u00f3n con formato: para el resto de formatos utilizar strftime() . Consultar aqu\u00ed los c\u00f3digos de formato.","title":"Snippets Python"},{"location":"desarrollo/python.html#snippets-django","text":"Colecci\u00f3n completa de objetos de un modelo: Unidad.objects.all() Colecci\u00f3n completa de objetos de un modelo ordenada: Unidad.objects.all().order_by('nombre') Colecci\u00f3n filtrada de objetos de un modelo: Actividad.objects.filter(fecha__year=2017) Filtro OR (es necesario hacer from django.db.models import Q ): GrupoUnidades.objects.filter(Q(pausada=True) | Q(fecha_fin__isnull=False)) Instancia concreta de un objeto: Unidad.objects.get(pk=3) Uni\u00f3n de recordsets y distinct: 1 2 3 4 grupos = Grupo . objects . none () for curso in obj . curso_set . all (): grupos = grupos | curso . grupo_set . all () grupos = grupos . distinct ()","title":"Snippets Django"},{"location":"desarrollo/python.html#filtro-en-listview","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 # urls.py from django.conf.urls import url from . import views app_name = 'lms' urlpatterns = [ url ( r '^asistencia/(?P<pk>\\d+)/grupo/(?P<admin>\\w+)/$' , views . AsistenciaGrupoView . as_view (), name = 'asistencia_grupo' ) ] # views.py class AsistenciaGrupoView ( generic . ListView ): template_name = 'lms/asistencia_grupo.html' def get_queryset ( self ): semanas = int ( self . request . GET . get ( 'semanas' , '12' )) return Jornada . objects . filter ( grupo__id = self . kwargs [ 'pk' ], fecha__gte = datetime . today () - timedelta ( weeks = semanas )) . order_by ( 'fecha' ) def get_context_data ( self , ** kwargs ): context = super ( AsistenciaGrupoView , self ) . get_context_data ( ** kwargs ) # Lista de semanas que mostraremos en el combo para filtrar context [ 'lista_semanas' ] = [( 4 , 1 ), ( 8 , 2 )] # Par\u00e1metro de filtrado del querystring (12 semanas como valor predeterminado) context [ 'semanas' ] = int ( self . request . GET . get ( 'semanas' , '12' )) # Valor del PK del grupo recogido de la URL context [ 'pk' ] = self . kwargs [ 'pk' ] return context # template < form method = \"get\" action = \"{{ \" { % url 'lms:asistencia_grupo' pk \" }}%}\" > < label for = \"semanas_id\" > Meses </ label > < select class = \"form-control\" name = \"semanas\" id = \"semanas_id\" onchange = 'if(this.value != 0) { this.form.submit(); }' > {{ \"{ % f or v, d in lista_semanas \" }} % } < option value = \"{{ \" {{ v \" }}}}\" {{ \"{ % i f semanas == v \" }} % } selected = 'selected' {{ \"{ % e ndif \" }} % } > {{ \"{{ d \" }}}} </ option > {{ \"{ % e ndfor \" }} % } </ select > </ form >","title":"Filtro en ListView"},{"location":"desarrollo/python.html#instrospeccion","text":"","title":"Instrospecci\u00f3n"},{"location":"desarrollo/python.html#lista-de-atributos","text":"Podemos obtenerlos de dos maneras: objeto.__dict__ vars(objeto)","title":"Lista de atributos"},{"location":"desarrollo/python.html#lista-de-atributos-y-metodos","text":"dir(objeto)","title":"Lista de atributos y m\u00e9todos"},{"location":"desarrollo/python.html#logging","text":"","title":"Logging"},{"location":"desarrollo/python.html#log-a-fichero","text":"Configurar un logger en el fichero de settings correspondiente a\u00f1adiendo esto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'handlers': { 'file': { 'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': 'debug.log', }, }, 'loggers': { 'log': { 'handlers': ['file'], 'level': 'DEBUG', 'propagate': True, }, }, } En el m\u00f3dulo donde queramos obtener log, a\u00f1adir al principio lo siguiente: 1 2 3 import logging logger = logging . getLogger ( 'log' ) Y dentro de la funci\u00f3n donde queramos emitir algo al log: 1 logger . debug ( 'lo que sea' )","title":"Log a fichero"},{"location":"desarrollo/python.html#log-a-consola","text":"Si s\u00f3lo queremos imprimir en consola una traza r\u00e1pida, es m\u00e1s f\u00e1cil escribiendo simplemente: 1 print ( 'lo que sea' , file = sys . stderr )","title":"Log a consola"},{"location":"desarrollo/python.html#traza-de-queries-a-consola","text":"Configurar el siguiente logger en el fichero de settings correspondiente: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 LOGGING = { 'version': 1, 'filters': { 'require_debug_true': { '()': 'django.utils.log.RequireDebugTrue', } }, 'handlers': { 'console': { 'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', } }, 'loggers': { 'django.db.backends': { 'level': 'DEBUG', 'handlers': ['console'], } } }","title":"Traza de queries a consola"},{"location":"desarrollo/python.html#pip","text":"","title":"pip"},{"location":"desarrollo/python.html#instalacion-version-especifica-de-un-paquete","text":"1 $ pip install Django == 1 .11.6","title":"Instalaci\u00f3n versi\u00f3n espec\u00edfica de un paquete"},{"location":"desarrollo/python.html#usando-webpack-para-construir-el-frontend","text":"","title":"Usando Webpack para construir el frontend"},{"location":"desarrollo/python.html#enlaces_2","text":"Django + webpack + Vue.js - setting up a new project that's easy to develop and deploy (part 1) Using Webpack transparently with Django + hot reloading React components as a bonus webpack-bundle-tracker django-webpack-loader django-vue-webpack : A boilerplate of using Django as backend framework, Vue js and webpack as the frontend setup. Building Modern Applications with Django, Vue.js and Auth0: Part 2","title":"Enlaces:"},{"location":"desarrollo/python.html#procedimiento","text":"Instalamos Vue-CLI en la m\u00e1quina de desarrollo: 1 2 sudo npm install -g @vue/cli sudo npm install -g @vue/cli-init Generamos el scaffolding para vue y webpack ejecutando lo siguiente desde el directorio que queremos que contenga el proyecto (en el ejemplo lo llamaremos vue_test ): 1 vue init webpack vue_test Durante la generaci\u00f3n del proyecto se nos hacen las siguientes preguntas: Vue build: Elegimos Runtime + Compiler Install vue-router?: Elegimos Y Use ESLint to lint your code?: n Set up unit tests: n Setup e2e tests with Nightwatch?: n Should we run npm install for you after the project has been created?: Yes, use NPM Generamos el scaffolding para Django: 1 2 cd vue_test/ django-admin startproject vue_test . Instalamos el plugin de webpack webpack-bundle-tracker y el m\u00f3dulo Django django-webpack-loader (con pipenv): 1 2 npm install --save-dev webpack-bundle-tracker pipenv install django-webpack-loader A\u00f1adimos webpack_loader a las aplicaciones Django: 1 2 3 4 5 # ./vue_test/settings.py INSTALLED_APPS = [ 'webpack_loader', #... ] Configurar webpack para que use BundleTracker : 1 2 3 4 5 6 7 8 // build/webpack.base.conf.js let BundleTracker = require('webpack-bundle-tracker') module.exports = { // ... plugins: [ new BundleTracker({filename: './webpack-stats.json'}), ], } Definir las rutas est\u00e1ticas: Configuraci\u00f3n webpack: 1 2 3 4 5 6 7 8 9 10 11 12 13 // ./config/index.js module.exports = { build: { assetsRoot: path.resolve(__dirname, '../dist/'), assetsSubDirectory: '', assetsPublicPath: '/static/', // ... }, dev: { assetsPublicPath: 'http://localhost:8080/', // ... } } Configuraci\u00f3n Django: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # ./vue_test/settings.py STATICFILES_DIRS = ( os.path.join(BASE_DIR, 'dist'), os.path.join(BASE_DIR, 'static'), ) STATIC_ROOT = os.path.join(BASE_DIR, 'public') STATIC_URL = '/static/' WEBPACK_LOADER = { 'DEFAULT': { 'BUNDLE_DIR_NAME': '', 'STATS_FILE': os.path.join(BASE_DIR, 'webpack-stats.json'), } } Configuraci\u00f3n webpack para que resuelva los ficheros est\u00e1ticos desde /static : 1 2 3 4 5 6 7 8 // build/webpack.base.conf.js module.exports = { resolve: { alias: { // ... '__STATIC__': resolve('static'), }, } Configuraci\u00f3n del Hot Reload: 1 2 3 4 5 6 7 // build/webpack.dev.conf.js devServer: { headers: { \"Access-Control-Allow-Origin\":\"\\*\" }, // ... } Los contenidos est\u00e1ticos se servir\u00e1n desde uno y otro entorno de la siguiente forma: 1 2 3 4 5 <!-- in a Django template --> < img src = \"{{ \" {% static ' logo . png ' \" }}%}\" > <!-- in a Vue component --> < img src = \"~__STATIC__/logo.png\" > Finalmente, para servir los contenidos cliente en desarrollo hay que ejecutar: 1 2 cd vue-test npm run dev Y para servir los contenidos del backend: 1 2 3 cd vue-test pipenv shell python manage.py runserver Cuando hagamos npm run build todo lo gestionado por webpack se compilar\u00e1 dentro del directorio dist . La documentaci\u00f3n de webpack se encuentra aqu\u00ed .","title":"Procedimiento"},{"location":"desarrollo/python.html#instalacion-de-jupyterhub","text":"","title":"Instalaci\u00f3n de JupyterHub"},{"location":"desarrollo/python.html#enlaces_3","text":"jupyterhub-deploy-docker Docker for Data Science: Running a Dockerized Jupyter Server 28 Jupyter Notebook tips, tricks, and shortcuts Jupyter Notebook for Beginners: A Tutorial nbgrader","title":"Enlaces"},{"location":"desarrollo/python.html#niveles-de-instalacion","text":"Peque\u00f1a - Paquetes sistema Media - Docker Grande - Kubernetes","title":"Niveles de instalaci\u00f3n"},{"location":"desarrollo/python.html#instalacion-the-littlest-jupyterhub","text":"Instalaci\u00f3n de dependencias y JupyterHub: 1 2 $ sudo apt-get install python3 git curl $ curl https://raw.githubusercontent.com/jupyterhub/the-littlest-jupyterhub/master/bootstrap/bootstrap.py | sudo -E python3 - --admin niubit Configuraci\u00f3n de puerto de Traefik en: 1 /opt/tljh/state/traefik.toml Reinicio de traefik : 1 $ sudo systemctl restart traefik.service Si queremos detener el servicio hay que desactivar los dos siguientes: 1 2 $ sudo systemctl disable jupyterhub.service $ sudo systemctl disable traefik.service","title":"Instalaci\u00f3n The Littlest JupyterHub"},{"location":"desarrollo/python.html#configuracion-de-fichero-de-log","text":"A\u00f1adimos lo siguiente al final del fichero /opt/tljh/hub/lib/python3.6/site-packages/tljh/jupyterhub_config.py : 1 c.JupyterHub.extra_log_file = '/var/log/jupyterhub.log' Reiniciamos el servicio: 1 $ sudo systemctl restart jupyterhub.service","title":"Configuraci\u00f3n de fichero de log"},{"location":"desarrollo/python.html#anadiendo-modulos-python-al-sistema","text":"Abrir una terminal en Jupyter con un usuario admin. Ejecutar: 1 $ sudo -E pip install <paquete>","title":"A\u00f1adiendo m\u00f3dulos Python al sistema"},{"location":"desarrollo/python.html#visualizacion-de-jupyter-notebooks","text":"En este art\u00edculo mencionan las siguientes opciones: Share your notebook file with gists or on github, both of which render the notebooks. See this example . If you upload your notebook to a github repository, you can use the handy mybinder service to allow someone half an hour of interactive Jupyter access to your repository. Store your notebook e.g. in dropbox and put the link to nbviewer . nbviewer will render the notebook from whichever source you host it.","title":"Visualizaci\u00f3n de Jupyter Notebooks"},{"location":"desarrollo/python.html#impresion-con-formato","text":"Si queremos que la salida por consola tenga formato, hay que utilizar la codificaci\u00f3n de tipo Set Graphics Mode que se lista en esta p\u00e1gina con el c\u00f3digo \\033 como secuencia de Esc. Por ejemplo si queremos destacar en negrita la primera palabra de la siguiente frase lo haremos as\u00ed: 1 print ( \" \\033 [1m;ERROR \\033 [0m Algo ha salido mal.\" )","title":"Impresi\u00f3n con formato"},{"location":"desarrollo/python.html#queries-complejas","text":"Los par\u00e1metros que aplicamos al m\u00e9todo filter se aplican con un and entre ellos a la query resultante. Para hacer queries m\u00e1s complejas (con and y or con prioridades establecidas con par\u00e9ntesis) hay que utilizar los objetos Q .","title":"Queries complejas"},{"location":"desarrollo/ror.html","text":"Ruby on Rails \u00b6 Enlaces \u00b6 Ruby on Rails Tutorial Programming Ruby: The Pragmatic Programmer's Guide Why's (Poignant) Guide to Ruby Ruby User's Guide Try Ruby Aptana Studio (IDE) Ruby on Rails Screencasts :exclamation: Ruby on Rails Guides :exclamation: Ruby Tutorial Rails 3 para Windows y Linux Ubuntu (libro en espa\u00f1ol) Rails Examples and Tutorials Ruby QuickRef Rails Tutorial Sublime Text setup Metaprogramming in Ruby: It\u2019s All About the Self Comprobaci\u00f3n de entorno de ejecuci\u00f3n en c\u00f3digo :exclamation: Performance Tunning \u00b6 Performance Tuning for Phusion Passenger (an Introduction) :exclamation: Phusion Corporate Blog - Tuning Phusion Passenger\u2019s concurrency settings Production Rails Tuning with Passenger: PassengerMaxProcesses Passenger tuning for rails application Phusion Passenger users guide, Apache version - Resource control and optimization options El l\u00edo del respond_with \u00b6 Bringing Merb's provides/display into Rails 3 Embracing REST with mind, body and soul What's New in Edge Rails: Cleaner RESTful Controllers w/ respond_with Respond With An Explanation M\u00f3dulos interesantes \u00b6 Devise: Engine de autenticaci\u00f3n/autorizaci\u00f3n Forem: Engine para implementar un foro carmen-rails : Seed con datos de los pa\u00edses y las regiones del mundo. RailsCasts #328 Twitter Bootstrap Basics Twitter Bootstrap Gem FasterCSV : Carga y generaci\u00f3n de ficheros CSV hacia y desde tablas. Ejemplo de uso . Entity-Relationship Diagrams for Ruby on Rails : Obtiene el esquema de relaci\u00f3n entre entidades de una aplicaci\u00f3n en base al an\u00e1lisis de sus modelos. Instalaci\u00f3n en Ubuntu \u00b6 Algunas gu\u00edas \u00b6 How to install Ruby on Rails in Ubuntu 12.04 LTS Buena gu\u00eda de railsapps sobre instalaci\u00f3n de Ruby/Rails Otra gu\u00eda de railsapps sobre actualizaci\u00f3n Procedimiento Ubuntu <=13.04 \u00b6 Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: 1 sudo gem install bundler Instalaci\u00f3n de Rails: 1 sudo gem install rails Instalar passenger (el propio instalador da instrucciones sobre los paquetes necesarios): 1 sudo gem install passenger Instalar el m\u00f3dulo en Apache: 1 sudo passenger-install-apache2-module Tal y como indica la salida del comando anterior, hay que habilitar el m\u00f3dulo reci\u00e9n instalado por medio de la configuraci\u00f3n de Apache. Se puede hacer a\u00f1adiendo los dos siguientes ficheros: 1 2 #/etc/apache2/mods-available/passenger.load LoadModule passenger_module /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so 1 2 3 #/etc/apache2/mods-available/passenger.conf PassengerRoot /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19 PassengerRuby /usr/bin/ruby1.9.1 (las rutas contenidas en los ficheros anteriores depender\u00e1n de la instalaci\u00f3n; la salida del comando que instala el m\u00f3dulo nos indica los valores correctos). Finalmente hay que habilitar el m\u00f3dulo: 1 $ sudo a2enmod passenger Y reiniciamos Apache: 1 $ sudo service apache2 restart Procedimiento Ubuntu >=13.10 \u00b6 Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: 1 sudo gem install bundler Instalaci\u00f3n de Rails: 1 sudo gem install rails Instalar passenger siguiendo esta gu\u00eda . Recomienda instalarlo con los paquetes de la distribuci\u00f3n. A continuaci\u00f3n se indica un resumen de los pasos. Instalar la clave PGP del repositorio que vamos a a\u00f1adir: 1 sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 561F9B9CAC40B2F7 Instalar el siguiente paquete: apt-transport-https Crear el fichero /etc/apt/sources.list.d/passenger.list con el siguiente contenido: 1 deb https://oss-binaries.phusionpassenger.com/apt/passenger saucy main Actualizar el repositorio e instalar el siguiente paquete: libapache2-mod-passenger Buenas pr\u00e1cticas \u00b6 Skinny Controller, Fat Model Nesting resources : Resources should never be nested more than 1 level deep. Tips \u00b6 Visibilidad de Helpers \u00b6 Los m\u00e9todos definidos en los m\u00f3dulos Helper ( app/helpers/<controller>_helper.rb ) son visibles en las vistas por defecto. Para que est\u00e9n disponibles en los controllers hay que hacer un include . Si lo hacemos en el controller base ( ApplicationController ) estar\u00e1 disponibles en todos los controllers dado que \u00e9stos heredan de ApplicationController . Mejora en rendimiento en Desarrollo \u00b6 Rails 3.1 introdujo el concepto del asset pipeline . Desafortunadamente esto causa problemas de rendimiento en el entorno de desarrollo. Para mejorarlo se puede utilizar la tarea de precompilador siguiente: 1 $ bundle exec rake assets:precompile:nondigest Esto provoca que los cambios en los ficheros asset no sean incluidos autom\u00e1ticamente cuando recargamos la p\u00e1gina. Para forzar su refresco hay que volver a ejecutar el comando anterior. Borrado de assets \u00b6 Rails proporciona la siguiente tarea de precompilador que borrar\u00e1 el directorio public/assets , cosa que puede resultar \u00fatil antes de un commit. 1 $ bundle exec rake assets:clean Esta orden puede solucionar el problema con el font-awesome , que en ocasiones se dibuja mal. Tambi\u00e9n puede merecer la pena incluir el directorio public/assets en el fichero .gitignore . Actualizaci\u00f3n de paquetes \u00b6 Comandos interesantes relacionados con las versiones de los paquetes y su gesti\u00f3n: bundle outdated : Informe de paquetes desactualizados. bundle outdated <paquete> : Informa sobre el nivel de actualizaci\u00f3n de un paquete. bundle update : Actualiza todos los paquetes. bundle update <paquete> : Actualiza el paquete. Muestra el mapa de rutas \u00b6 1 $ bundle exec rake routes Muestra todas las tareas \u00b6 1 $ bundle exec rake -T Instalaci\u00f3n de gem \u00b6 Tras la instalaci\u00f3n de un gem generalmente hay que instalar y ejecutar las migraciones de base de datos con los siguientes comandos: 1 2 $ rake railties:install:migrations $ rake db:migrate Para instalar una versi\u00f3n espec\u00edfica de una gem hay que a\u00f1adir el argumento --version , como por ejemplo: 1 $ gem install --version '3.0.13' passenger Activar modo debug \u00b6 Instalar primero la gem debugger : 1 $ sudo gem install debugger A\u00f1adir al Gemfile lo siguiente (probablemente s\u00f3lo sea necesario en el entorno de desarrollo): 1 2 3 group : development do gem 'debugger' end Insertar en el c\u00f3digo una llamada a debugger en el punto del c\u00f3digo donde queramos que se detenga la ejecuci\u00f3n. Finalmente para arrancar el servidor en modo debug: 1 $ bundle exec rails s --debugger Lo anterior sirve para depurar sobre Webrick. Para hacerlo bajo Passenger seguir las instrucciones de este post (con la ayuda de este otro ). De forma resumida consiste en ejecutar: 1 2 $ cd <app_root> $ sudo gem install ruby-debug19 Generar un task con: 1 $ bundle exec rails g task myapplication restart A\u00f1adir lo siguiente al final del fichero config/environments/development.rb : 1 2 3 4 5 6 if File . exists? ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) require 'ruby-debug' Debugger . wait_connection = true Debugger . start_remote File . delete ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) end Ejecutar: 1 $ bundle exec rake myapplication:restart DEBUG = true Y una vez que hagamos una request para que se reinicie la aplicaci\u00f3n ejecutar: 1 $ rdebug -c Generaci\u00f3n de un modelo \u00b6 El siguiente comando crear\u00e1 un modelo para una entidad adem\u00e1s de la migration correspondiente en la base de datos: 1 $ bundle exec rails g model spree/product_layout name:string view:string description:text Path Helpers \u00b6 Dada la siguiente definici\u00f3n de resources anidados: 1 2 3 resources :magazines do resources :ads end Alternativamente al uso de los path helpers habituales, cuando se pasa como argumento un objeto se puede dejar a Rails que decida autom\u00e1ticamente el path helper necesario, es decir las siguientes l\u00edneas ser\u00e1n equivalentes: 1 2 < %= link_to \"Ad details\", magazine_ad_path(@magazine, @ad) %> <%= link_to \"Ad details\" , url_for ( [ @magazine , @ad ] ) %> En helpers como link_to podemos indicar simplemente los objetos: 1 <%= link_to \"Ad details\" , [ @magazine , @ad ] %> O si queremos enlazar directamente a la magazine en lugar de un array pasaremos directamente el objeto padre: 1 <%= link_to \"Magazine details\" , @magazine %> Tareas en base de datos \u00b6 db:create : creates the database for the current env db:create:all : creates the databases for all envs db:drop : drops the database for the current env db:drop:all : drops the databases for all envs db:migrate : runs migrations for the current env that have not run yet db:migrate:up : runs one specific migration db:migrate:down : rolls back one specific migration db:migrate:status : shows current migration status db:migrate:rollback : rolls back the last migration db:migrate:redo : runs ( db:migrate:down db:migrate:up ) or ( db:migrate:rollback db:migrate ) depending on the specified migration db:migrate:reset : runs db:drop db:create db:migrate db:forward : advances the current schema version to the next one db:seed : (only) runs the db/seed.rb file db:schema:load : loads the schema into the current env's database db:schema:dump : dumps the current env's schema (and seems to create the db aswell) db:setup : runs db:schema:load db:seed db:reset : runs db:drop db:setup Gesti\u00f3n del plural/singular \u00b6 Cuando un modelo/recurso tenga un plural irregular, se puede gestionar manualmente por medio de un Inflector . Consultar esta gu\u00eda . Relaci\u00f3n entre modelos \u00b6 Estos ser\u00edan los pasos para establecer una relaci\u00f3n 1:n entre dos modelos preexistentes. Se basa en este apartado de las Rails Guides. Partimos de los modelos Spree::Product de la gem spree_core y el modelo Spree::ProductLayout propio de nuestra aplicaci\u00f3n. La relaci\u00f3n ser\u00e1 un belongs_to de Product a ProductLayout, es decir un n:1. Empezamos a\u00f1adiendo la relaci\u00f3n al modelo Product. Como es una entidad de una gem lo haremos con un fichero decorator: 1 2 3 4 #app/models/spree/product_decorator.rb Spree :: Product . class_eval do belongs_to :product_layout end A continuaci\u00f3n generamos un migration para a\u00f1adir el campo que establece la relaci\u00f3n en la tabla que mantiene el modelo Product: 1 $ bundle exec rails g migration AddProductLayoutRelationToProducts Ahora lo editamos para incorporar el campo: 1 2 3 4 5 6 7 8 #db/migrate/20130228153926_add_product_layout_relation_to_products.rb class AddProductLayoutRelationToProducts < ActiveRecord :: Migration def change change_table :spree_products do | t | t . references :product_layout end end end Finalmente ejecutamos el migrate: 1 $ bundle exec rake db:migrate Inspeccionar la definici\u00f3n de un m\u00e9todo \u00b6 Si queremos averiguar en qu\u00e9 m\u00f3dulo se encuentra definido un m\u00e9todo ejecutamos en consola IRB lo siguiente: 1 puts Objeto . new . method ( :metodo ) . source_location o 1 puts Objeto . instance_method ( :metodo ) . source_location Sustituyendo \"Objeto\" y \"metodo\" por lo que corresponda. Fuente . Si se trata de un helper partimos de helper , por ejemplo: 1 helper . method ( :tab ) . source_location Listar gems instalados \u00b6 1 $ gem list --local Si queremos s\u00f3lo las versiones de una gem, de rails por ejemplo: 1 $ gem list --local rails Generar el API de rails \u00b6 Para tener en local la versi\u00f3n actualizada del API de rails: 1 2 3 $ rails new dummy_app $ cd dummy_app $ bundle exec rake doc:rails Luego mover el subdirectorio doc/api/index.html a donde nos interese y borrar la dummy_app. RubyGems Documentation \u00b6 Para visualizar la documentaci\u00f3n de todas las gems instaladas en el sistema ejecutar: 1 $ gem server Y abrir la direcci\u00f3n: http://localhost:8808 Problema con el encoding de algunas fuentes en UTF-8 \u00b6 Al incorporar el gem spree_sermepa se produjo el problema descrito aqu\u00ed . Hay varias formas de solucionarlo. Una es a\u00f1adir: 1 2 3 4 if RUBY_VERSION =~ /1.9/ Encoding . default_external = Encoding :: UTF_8 Encoding . default_internal = Encoding :: UTF_8 end en la parte superior del Gemfile. Si se utiliza Passenger para servir la aplicaci\u00f3n, otra opci\u00f3n es sustituir la siguiente variable del fichero /etc/apache2/envvars : 1 export LANG=C por: 1 export LANG=es_ES.UTF-8 Downgrade de Rubygems \u00b6 Tras actualizar a la versi\u00f3n 2.0.3 de Rubygems empec\u00e9 a tener problemas a la hora de hacer bundle install . Aunque me ped\u00eda el password de root luego se produc\u00edan errores de permisos en los directorios donde se almacenan las gems. La soluci\u00f3n fue volver a una versi\u00f3n anterior de Rubygems. En concreto la misma que hab\u00eda en ese momento en el servidor de DinaHosting, es decir la 1.8.23. Se hizo con el siguiente comando: 1 $ sudo gem update --system 1 .8.23 Soluci\u00f3n a error \"Could not find rake-10.0.4 in any of the sources\" con Passenger \u00b6 En el alojamiento de DinaHosting, al ejecutar por primera vez una aplicaci\u00f3n Ruby ejecutada con Passport, se produce el error siguiente: 1 Could not find rake-10.0.4 in any of the sources Instalando las gemas en el home del usuario se soluciona el error: 1 $ bundle install --deployment Esto instala las gem's en el directorio vendor/bundle . Especificar entorno \u00b6 Para especificar el entorno en una tarea rake a\u00f1adir al final de la orden RAILS_ENV=<entorno> . Por ejemplo para desarrollo: 1 $ bundle exec rake routes RAILS_ENV = development Con el script rails , depende. Si se quiere arrancar la consola a\u00f1adir al final el entorno sin m\u00e1s. Por ejemplo para desarrollo: 1 $ bundle exec rails c development Si se quiere arrancar el servidor Webrick a\u00f1adir el entorno por medio de la opci\u00f3n -e . Por ejemplo para desarrollo: 1 $ bundle exec rails s -e development Desinstalaci\u00f3n de todas las gems \u00b6 Con el siguiente comando: 1 $ gem list | cut -d \" \" -f1 | xargs gem uninstall -aIx Posteriormente habr\u00e1 que volver a instalar Bundler y el resto de gems. Para ello: 1 2 3 $ sudo gem install bundler $ cd <proyecto> $ bundle install Plurales/Singulares de resources \u00b6 Recurso de tipo colecci\u00f3n dentro de un namespace: Elemento Plural/Singular Ejemplo Tabla en base de datos Plural spree_posts Clase del modelo Singular Spree::Post Fichero del modelo Singular spree/post.rb Clase del controlador Plural Spree::PostsController Fichero del controlador Plural spree/posts_controller.rb rails generator Singular rails g resource spree/post title:string body:text Ruta en config/routes.rb Plural resources :posts Directorio en views Plural spree/posts Ejecutar una versi\u00f3n concreta de rails \u00b6 Si tenemos instaladas varias versiones del gem de rails, para forzar que se utilice el script rails de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: 1 $ rails _3.2.13_ -v De forma que si por ejemplo queremos generar un nuevo proyecto con la versi\u00f3n 3.2.13 haremos: 1 $ rails _3.2.13_ new nueva_app Ejecutar una versi\u00f3n concreta de spree \u00b6 Si tenemos instaladas varias versiones del gem de spree, para forzar que se utilice el script spree de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: 1 $ spree _1.3.3_ -v De forma que si por ejemplo queremos hacer la instalaci\u00f3n dentro de una aplicaci\u00f3n rails nueva con la versi\u00f3n 1.3.3 de Spree haremos: 1 $ spree _1.3.3_ install Diagramas ERD \u00b6 A continuaci\u00f3n se indica el comando para obtener una serie de diagramas ERD interesantes. La documentaci\u00f3n de todos los par\u00e1metros de ERD est\u00e1 aqu\u00ed . Modelado de producto en Spree: 1 $ bundle exec rake erd attributes = foreign_keys only = \"Spree::Product,Spree::OptionType,Spree::OptionValue,Spree::Variant,Spree::ProductOptionType\" title = 'Productos'","title":"Ruby on Rails"},{"location":"desarrollo/ror.html#ruby-on-rails","text":"","title":"Ruby on Rails"},{"location":"desarrollo/ror.html#enlaces","text":"Ruby on Rails Tutorial Programming Ruby: The Pragmatic Programmer's Guide Why's (Poignant) Guide to Ruby Ruby User's Guide Try Ruby Aptana Studio (IDE) Ruby on Rails Screencasts :exclamation: Ruby on Rails Guides :exclamation: Ruby Tutorial Rails 3 para Windows y Linux Ubuntu (libro en espa\u00f1ol) Rails Examples and Tutorials Ruby QuickRef Rails Tutorial Sublime Text setup Metaprogramming in Ruby: It\u2019s All About the Self Comprobaci\u00f3n de entorno de ejecuci\u00f3n en c\u00f3digo :exclamation:","title":"Enlaces"},{"location":"desarrollo/ror.html#performance-tunning","text":"Performance Tuning for Phusion Passenger (an Introduction) :exclamation: Phusion Corporate Blog - Tuning Phusion Passenger\u2019s concurrency settings Production Rails Tuning with Passenger: PassengerMaxProcesses Passenger tuning for rails application Phusion Passenger users guide, Apache version - Resource control and optimization options","title":"Performance Tunning"},{"location":"desarrollo/ror.html#el-lio-del-respond_with","text":"Bringing Merb's provides/display into Rails 3 Embracing REST with mind, body and soul What's New in Edge Rails: Cleaner RESTful Controllers w/ respond_with Respond With An Explanation","title":"El l\u00edo del respond_with"},{"location":"desarrollo/ror.html#modulos-interesantes","text":"Devise: Engine de autenticaci\u00f3n/autorizaci\u00f3n Forem: Engine para implementar un foro carmen-rails : Seed con datos de los pa\u00edses y las regiones del mundo. RailsCasts #328 Twitter Bootstrap Basics Twitter Bootstrap Gem FasterCSV : Carga y generaci\u00f3n de ficheros CSV hacia y desde tablas. Ejemplo de uso . Entity-Relationship Diagrams for Ruby on Rails : Obtiene el esquema de relaci\u00f3n entre entidades de una aplicaci\u00f3n en base al an\u00e1lisis de sus modelos.","title":"M\u00f3dulos interesantes"},{"location":"desarrollo/ror.html#instalacion-en-ubuntu","text":"","title":"Instalaci\u00f3n en Ubuntu"},{"location":"desarrollo/ror.html#algunas-guias","text":"How to install Ruby on Rails in Ubuntu 12.04 LTS Buena gu\u00eda de railsapps sobre instalaci\u00f3n de Ruby/Rails Otra gu\u00eda de railsapps sobre actualizaci\u00f3n","title":"Algunas gu\u00edas"},{"location":"desarrollo/ror.html#procedimiento-ubuntu-1304","text":"Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: 1 sudo gem install bundler Instalaci\u00f3n de Rails: 1 sudo gem install rails Instalar passenger (el propio instalador da instrucciones sobre los paquetes necesarios): 1 sudo gem install passenger Instalar el m\u00f3dulo en Apache: 1 sudo passenger-install-apache2-module Tal y como indica la salida del comando anterior, hay que habilitar el m\u00f3dulo reci\u00e9n instalado por medio de la configuraci\u00f3n de Apache. Se puede hacer a\u00f1adiendo los dos siguientes ficheros: 1 2 #/etc/apache2/mods-available/passenger.load LoadModule passenger_module /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so 1 2 3 #/etc/apache2/mods-available/passenger.conf PassengerRoot /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19 PassengerRuby /usr/bin/ruby1.9.1 (las rutas contenidas en los ficheros anteriores depender\u00e1n de la instalaci\u00f3n; la salida del comando que instala el m\u00f3dulo nos indica los valores correctos). Finalmente hay que habilitar el m\u00f3dulo: 1 $ sudo a2enmod passenger Y reiniciamos Apache: 1 $ sudo service apache2 restart","title":"Procedimiento Ubuntu &lt;=13.04"},{"location":"desarrollo/ror.html#procedimiento-ubuntu-1310","text":"Instalar los paquetes: ruby ruby-dev libsqlite3-dev libmysqlclient-dev nodejs nodejs-dev Instalar RubyGems baj\u00e1ndolo de aqu\u00ed y siguiendo las instrucciones de instalaci\u00f3n de esa misma p\u00e1gina. Instalar Bundler: 1 sudo gem install bundler Instalaci\u00f3n de Rails: 1 sudo gem install rails Instalar passenger siguiendo esta gu\u00eda . Recomienda instalarlo con los paquetes de la distribuci\u00f3n. A continuaci\u00f3n se indica un resumen de los pasos. Instalar la clave PGP del repositorio que vamos a a\u00f1adir: 1 sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 561F9B9CAC40B2F7 Instalar el siguiente paquete: apt-transport-https Crear el fichero /etc/apt/sources.list.d/passenger.list con el siguiente contenido: 1 deb https://oss-binaries.phusionpassenger.com/apt/passenger saucy main Actualizar el repositorio e instalar el siguiente paquete: libapache2-mod-passenger","title":"Procedimiento Ubuntu &gt;=13.10"},{"location":"desarrollo/ror.html#buenas-practicas","text":"Skinny Controller, Fat Model Nesting resources : Resources should never be nested more than 1 level deep.","title":"Buenas pr\u00e1cticas"},{"location":"desarrollo/ror.html#tips","text":"","title":"Tips"},{"location":"desarrollo/ror.html#visibilidad-de-helpers","text":"Los m\u00e9todos definidos en los m\u00f3dulos Helper ( app/helpers/<controller>_helper.rb ) son visibles en las vistas por defecto. Para que est\u00e9n disponibles en los controllers hay que hacer un include . Si lo hacemos en el controller base ( ApplicationController ) estar\u00e1 disponibles en todos los controllers dado que \u00e9stos heredan de ApplicationController .","title":"Visibilidad de Helpers"},{"location":"desarrollo/ror.html#mejora-en-rendimiento-en-desarrollo","text":"Rails 3.1 introdujo el concepto del asset pipeline . Desafortunadamente esto causa problemas de rendimiento en el entorno de desarrollo. Para mejorarlo se puede utilizar la tarea de precompilador siguiente: 1 $ bundle exec rake assets:precompile:nondigest Esto provoca que los cambios en los ficheros asset no sean incluidos autom\u00e1ticamente cuando recargamos la p\u00e1gina. Para forzar su refresco hay que volver a ejecutar el comando anterior.","title":"Mejora en rendimiento en Desarrollo"},{"location":"desarrollo/ror.html#borrado-de-assets","text":"Rails proporciona la siguiente tarea de precompilador que borrar\u00e1 el directorio public/assets , cosa que puede resultar \u00fatil antes de un commit. 1 $ bundle exec rake assets:clean Esta orden puede solucionar el problema con el font-awesome , que en ocasiones se dibuja mal. Tambi\u00e9n puede merecer la pena incluir el directorio public/assets en el fichero .gitignore .","title":"Borrado de assets"},{"location":"desarrollo/ror.html#actualizacion-de-paquetes","text":"Comandos interesantes relacionados con las versiones de los paquetes y su gesti\u00f3n: bundle outdated : Informe de paquetes desactualizados. bundle outdated <paquete> : Informa sobre el nivel de actualizaci\u00f3n de un paquete. bundle update : Actualiza todos los paquetes. bundle update <paquete> : Actualiza el paquete.","title":"Actualizaci\u00f3n de paquetes"},{"location":"desarrollo/ror.html#muestra-el-mapa-de-rutas","text":"1 $ bundle exec rake routes","title":"Muestra el mapa de rutas"},{"location":"desarrollo/ror.html#muestra-todas-las-tareas","text":"1 $ bundle exec rake -T","title":"Muestra todas las tareas"},{"location":"desarrollo/ror.html#instalacion-de-gem","text":"Tras la instalaci\u00f3n de un gem generalmente hay que instalar y ejecutar las migraciones de base de datos con los siguientes comandos: 1 2 $ rake railties:install:migrations $ rake db:migrate Para instalar una versi\u00f3n espec\u00edfica de una gem hay que a\u00f1adir el argumento --version , como por ejemplo: 1 $ gem install --version '3.0.13' passenger","title":"Instalaci\u00f3n de gem"},{"location":"desarrollo/ror.html#activar-modo-debug","text":"Instalar primero la gem debugger : 1 $ sudo gem install debugger A\u00f1adir al Gemfile lo siguiente (probablemente s\u00f3lo sea necesario en el entorno de desarrollo): 1 2 3 group : development do gem 'debugger' end Insertar en el c\u00f3digo una llamada a debugger en el punto del c\u00f3digo donde queramos que se detenga la ejecuci\u00f3n. Finalmente para arrancar el servidor en modo debug: 1 $ bundle exec rails s --debugger Lo anterior sirve para depurar sobre Webrick. Para hacerlo bajo Passenger seguir las instrucciones de este post (con la ayuda de este otro ). De forma resumida consiste en ejecutar: 1 2 $ cd <app_root> $ sudo gem install ruby-debug19 Generar un task con: 1 $ bundle exec rails g task myapplication restart A\u00f1adir lo siguiente al final del fichero config/environments/development.rb : 1 2 3 4 5 6 if File . exists? ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) require 'ruby-debug' Debugger . wait_connection = true Debugger . start_remote File . delete ( File . join ( RAILS_ROOT , 'tmp' , 'debug.txt' )) end Ejecutar: 1 $ bundle exec rake myapplication:restart DEBUG = true Y una vez que hagamos una request para que se reinicie la aplicaci\u00f3n ejecutar: 1 $ rdebug -c","title":"Activar modo debug"},{"location":"desarrollo/ror.html#generacion-de-un-modelo","text":"El siguiente comando crear\u00e1 un modelo para una entidad adem\u00e1s de la migration correspondiente en la base de datos: 1 $ bundle exec rails g model spree/product_layout name:string view:string description:text","title":"Generaci\u00f3n de un modelo"},{"location":"desarrollo/ror.html#path-helpers","text":"Dada la siguiente definici\u00f3n de resources anidados: 1 2 3 resources :magazines do resources :ads end Alternativamente al uso de los path helpers habituales, cuando se pasa como argumento un objeto se puede dejar a Rails que decida autom\u00e1ticamente el path helper necesario, es decir las siguientes l\u00edneas ser\u00e1n equivalentes: 1 2 < %= link_to \"Ad details\", magazine_ad_path(@magazine, @ad) %> <%= link_to \"Ad details\" , url_for ( [ @magazine , @ad ] ) %> En helpers como link_to podemos indicar simplemente los objetos: 1 <%= link_to \"Ad details\" , [ @magazine , @ad ] %> O si queremos enlazar directamente a la magazine en lugar de un array pasaremos directamente el objeto padre: 1 <%= link_to \"Magazine details\" , @magazine %>","title":"Path Helpers"},{"location":"desarrollo/ror.html#tareas-en-base-de-datos","text":"db:create : creates the database for the current env db:create:all : creates the databases for all envs db:drop : drops the database for the current env db:drop:all : drops the databases for all envs db:migrate : runs migrations for the current env that have not run yet db:migrate:up : runs one specific migration db:migrate:down : rolls back one specific migration db:migrate:status : shows current migration status db:migrate:rollback : rolls back the last migration db:migrate:redo : runs ( db:migrate:down db:migrate:up ) or ( db:migrate:rollback db:migrate ) depending on the specified migration db:migrate:reset : runs db:drop db:create db:migrate db:forward : advances the current schema version to the next one db:seed : (only) runs the db/seed.rb file db:schema:load : loads the schema into the current env's database db:schema:dump : dumps the current env's schema (and seems to create the db aswell) db:setup : runs db:schema:load db:seed db:reset : runs db:drop db:setup","title":"Tareas en base de datos"},{"location":"desarrollo/ror.html#gestion-del-pluralsingular","text":"Cuando un modelo/recurso tenga un plural irregular, se puede gestionar manualmente por medio de un Inflector . Consultar esta gu\u00eda .","title":"Gesti\u00f3n del plural/singular"},{"location":"desarrollo/ror.html#relacion-entre-modelos","text":"Estos ser\u00edan los pasos para establecer una relaci\u00f3n 1:n entre dos modelos preexistentes. Se basa en este apartado de las Rails Guides. Partimos de los modelos Spree::Product de la gem spree_core y el modelo Spree::ProductLayout propio de nuestra aplicaci\u00f3n. La relaci\u00f3n ser\u00e1 un belongs_to de Product a ProductLayout, es decir un n:1. Empezamos a\u00f1adiendo la relaci\u00f3n al modelo Product. Como es una entidad de una gem lo haremos con un fichero decorator: 1 2 3 4 #app/models/spree/product_decorator.rb Spree :: Product . class_eval do belongs_to :product_layout end A continuaci\u00f3n generamos un migration para a\u00f1adir el campo que establece la relaci\u00f3n en la tabla que mantiene el modelo Product: 1 $ bundle exec rails g migration AddProductLayoutRelationToProducts Ahora lo editamos para incorporar el campo: 1 2 3 4 5 6 7 8 #db/migrate/20130228153926_add_product_layout_relation_to_products.rb class AddProductLayoutRelationToProducts < ActiveRecord :: Migration def change change_table :spree_products do | t | t . references :product_layout end end end Finalmente ejecutamos el migrate: 1 $ bundle exec rake db:migrate","title":"Relaci\u00f3n entre modelos"},{"location":"desarrollo/ror.html#inspeccionar-la-definicion-de-un-metodo","text":"Si queremos averiguar en qu\u00e9 m\u00f3dulo se encuentra definido un m\u00e9todo ejecutamos en consola IRB lo siguiente: 1 puts Objeto . new . method ( :metodo ) . source_location o 1 puts Objeto . instance_method ( :metodo ) . source_location Sustituyendo \"Objeto\" y \"metodo\" por lo que corresponda. Fuente . Si se trata de un helper partimos de helper , por ejemplo: 1 helper . method ( :tab ) . source_location","title":"Inspeccionar la definici\u00f3n de un m\u00e9todo"},{"location":"desarrollo/ror.html#listar-gems-instalados","text":"1 $ gem list --local Si queremos s\u00f3lo las versiones de una gem, de rails por ejemplo: 1 $ gem list --local rails","title":"Listar gems instalados"},{"location":"desarrollo/ror.html#generar-el-api-de-rails","text":"Para tener en local la versi\u00f3n actualizada del API de rails: 1 2 3 $ rails new dummy_app $ cd dummy_app $ bundle exec rake doc:rails Luego mover el subdirectorio doc/api/index.html a donde nos interese y borrar la dummy_app.","title":"Generar el API de rails"},{"location":"desarrollo/ror.html#rubygems-documentation","text":"Para visualizar la documentaci\u00f3n de todas las gems instaladas en el sistema ejecutar: 1 $ gem server Y abrir la direcci\u00f3n: http://localhost:8808","title":"RubyGems Documentation"},{"location":"desarrollo/ror.html#problema-con-el-encoding-de-algunas-fuentes-en-utf-8","text":"Al incorporar el gem spree_sermepa se produjo el problema descrito aqu\u00ed . Hay varias formas de solucionarlo. Una es a\u00f1adir: 1 2 3 4 if RUBY_VERSION =~ /1.9/ Encoding . default_external = Encoding :: UTF_8 Encoding . default_internal = Encoding :: UTF_8 end en la parte superior del Gemfile. Si se utiliza Passenger para servir la aplicaci\u00f3n, otra opci\u00f3n es sustituir la siguiente variable del fichero /etc/apache2/envvars : 1 export LANG=C por: 1 export LANG=es_ES.UTF-8","title":"Problema con el encoding de algunas fuentes en UTF-8"},{"location":"desarrollo/ror.html#downgrade-de-rubygems","text":"Tras actualizar a la versi\u00f3n 2.0.3 de Rubygems empec\u00e9 a tener problemas a la hora de hacer bundle install . Aunque me ped\u00eda el password de root luego se produc\u00edan errores de permisos en los directorios donde se almacenan las gems. La soluci\u00f3n fue volver a una versi\u00f3n anterior de Rubygems. En concreto la misma que hab\u00eda en ese momento en el servidor de DinaHosting, es decir la 1.8.23. Se hizo con el siguiente comando: 1 $ sudo gem update --system 1 .8.23","title":"Downgrade de Rubygems"},{"location":"desarrollo/ror.html#solucion-a-error-could-not-find-rake-1004-in-any-of-the-sources-con-passenger","text":"En el alojamiento de DinaHosting, al ejecutar por primera vez una aplicaci\u00f3n Ruby ejecutada con Passport, se produce el error siguiente: 1 Could not find rake-10.0.4 in any of the sources Instalando las gemas en el home del usuario se soluciona el error: 1 $ bundle install --deployment Esto instala las gem's en el directorio vendor/bundle .","title":"Soluci\u00f3n a error \"Could not find rake-10.0.4 in any of the sources\" con Passenger"},{"location":"desarrollo/ror.html#especificar-entorno","text":"Para especificar el entorno en una tarea rake a\u00f1adir al final de la orden RAILS_ENV=<entorno> . Por ejemplo para desarrollo: 1 $ bundle exec rake routes RAILS_ENV = development Con el script rails , depende. Si se quiere arrancar la consola a\u00f1adir al final el entorno sin m\u00e1s. Por ejemplo para desarrollo: 1 $ bundle exec rails c development Si se quiere arrancar el servidor Webrick a\u00f1adir el entorno por medio de la opci\u00f3n -e . Por ejemplo para desarrollo: 1 $ bundle exec rails s -e development","title":"Especificar entorno"},{"location":"desarrollo/ror.html#desinstalacion-de-todas-las-gems","text":"Con el siguiente comando: 1 $ gem list | cut -d \" \" -f1 | xargs gem uninstall -aIx Posteriormente habr\u00e1 que volver a instalar Bundler y el resto de gems. Para ello: 1 2 3 $ sudo gem install bundler $ cd <proyecto> $ bundle install","title":"Desinstalaci\u00f3n de todas las gems"},{"location":"desarrollo/ror.html#pluralessingulares-de-resources","text":"Recurso de tipo colecci\u00f3n dentro de un namespace: Elemento Plural/Singular Ejemplo Tabla en base de datos Plural spree_posts Clase del modelo Singular Spree::Post Fichero del modelo Singular spree/post.rb Clase del controlador Plural Spree::PostsController Fichero del controlador Plural spree/posts_controller.rb rails generator Singular rails g resource spree/post title:string body:text Ruta en config/routes.rb Plural resources :posts Directorio en views Plural spree/posts","title":"Plurales/Singulares de resources"},{"location":"desarrollo/ror.html#ejecutar-una-version-concreta-de-rails","text":"Si tenemos instaladas varias versiones del gem de rails, para forzar que se utilice el script rails de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: 1 $ rails _3.2.13_ -v De forma que si por ejemplo queremos generar un nuevo proyecto con la versi\u00f3n 3.2.13 haremos: 1 $ rails _3.2.13_ new nueva_app","title":"Ejecutar una versi\u00f3n concreta de rails"},{"location":"desarrollo/ror.html#ejecutar-una-version-concreta-de-spree","text":"Si tenemos instaladas varias versiones del gem de spree, para forzar que se utilice el script spree de una versi\u00f3n concreta, pondremos la versi\u00f3n de la siguiente forma: 1 $ spree _1.3.3_ -v De forma que si por ejemplo queremos hacer la instalaci\u00f3n dentro de una aplicaci\u00f3n rails nueva con la versi\u00f3n 1.3.3 de Spree haremos: 1 $ spree _1.3.3_ install","title":"Ejecutar una versi\u00f3n concreta de spree"},{"location":"desarrollo/ror.html#diagramas-erd","text":"A continuaci\u00f3n se indica el comando para obtener una serie de diagramas ERD interesantes. La documentaci\u00f3n de todos los par\u00e1metros de ERD est\u00e1 aqu\u00ed . Modelado de producto en Spree: 1 $ bundle exec rake erd attributes = foreign_keys only = \"Spree::Product,Spree::OptionType,Spree::OptionValue,Spree::Variant,Spree::ProductOptionType\" title = 'Productos'","title":"Diagramas ERD"},{"location":"desarrollo/spree.html","text":"Spree \u00b6 Enlaces \u00b6 Getting Started with Spree Spree 1.1 Deployment on Heroku How To: Add A Custom Model to Your Spree App The Spree API Documentation :exclamation: How to Optimize Your Spree Store for Search Engines Crear extensi\u00f3n Spree Tracking E-commerce With Google Analytics :exclamation: Hilos interesantes Google Group \u00b6 Add custom admin controller and use custom code inside controller Do something when state order change to completed Changing /products path and linking to individual products Upgrading Extensions to Spree 2 Rich text in product description : Instalaci\u00f3n de CKEditor para que se use en todos los texarea de la administraci\u00f3n de Spree. Remove /t/ from uri Extensiones interesantes \u00b6 Static Content : Content management of static pages for Spree. Para p\u00e1ginas como About, T\u00e9rminos legales, etc. (en Github ) :exclamation: Related Products : This extension provides a generic way for you to define different types of relationships between your products, by defining a RelationType for each type of relationship you\u2019d like to maintain. (en Github ) :exclamation: Spree Variant Options : Spree Variant Options replaces the radio-button variant selection with groups of option types and values. (en Github ) :exclamation: SpreeEditor : This extension provides an inline rich-text editor for Spree. Spree Simple Blog : Adds a simple blog to Spree which works much like Toto . Spree Reviews : Straightforward review/rating facility. Spree Wishlist : The Spree Wishlist extension enables multiple wishlists per user, as well as managing those as public (sharable) and private. It also includes the ability to notify a friend via email of a recommended product. :exclamation: Spree Email to Friend : The Spree Email to Friend extension enables you to send the product reference to your friend via email. :exclamation: Google Checkout : Users can place order through Google Checkout. Spree Sitemaps : This extension creates sitemaps in .html, .txt, and .xml (google sitemap) formats. Spree_Videos : Display YouTube video(s) on your product page. (en Github ) SpreeProductZoom : A Spree extension that adds lightbox zoom functionality for product images powered by fancyBox . (en Github ) Sitemap Generator : Spree sitemap generator is a sitemap generator based on the sitemap_generator gem. It adheres to the Sitemap 0.9 protocol specification. (en Github ) Spree Google Merchant : This extension provides a product feed for Google Merchant rather than a file that you have to upload. (en Github ) spree-magiczoomplus : Adds MagicZoomPlus to Spree store. (en Github ) Spree Social Bookmarks : This extension allows you to add social bookmarking to your products so your customers can share pages. (en Github ) Spree Volume Pricing : This extension uses predefined ranges of quantities to determine the price for a particular product variant. (en Github ) Active Shipping : Spree calculator that interfaces with USPS, UPS and FedEx via the popular active_shipping plugin. (en Github ) Payment Methods With Range : This extensions allow declaring payment methods only available for a certain order amount. (en Github ) Print Invoice : Generaci\u00f3n de facturas en PDF en el backend. (en Github ) Product Assembly : Create a product which is composed of other products. SpreeBootstrap : This project aims to replace the spree_frontend's use of the skeleton css framework in favor of Twitter Bootstrap. SpreeContactUs : A Rails 3+ Engine providing a basic contact form as a Spree Extension. Instalaci\u00f3n en Ubuntu \u00b6 A los paquetes necesarios para la instalaci\u00f3n de Rails hay que a\u00f1adir: libxml2-dev libxslt1-dev git Tips \u00b6 Override de preferencias \u00b6 Crear el fichero config/initializers/spree_config.rb y hacer un set de las propiedades. Por ejemplo: 1 2 3 4 5 6 7 #encoding: utf-8 Spree :: Config . set ( logo : \"store/myapp_logo.png\" ) Spree :: Config . set ( site_name : 'MyApp' ) Spree :: Config . set ( currency : 'EUR' ) Spree :: Config . set ( currency_symbol_position : 'after' ) Spree :: Config . set ( default_meta_description : 'MyApp' ) Spree :: Config . set ( default_meta_keywords : 'mis palabras clave' ) Todas las preferencias posibles est\u00e1n definidas en el fichero core/app/models/spree/app_configuration.rb . Las preferencias ajustadas de esta forma acaban en la base de datos en la tabla spree_preferences . Si se quita alguna de las lineas anteriores, hay que eliminar el registro correspondiente para que deje de hacer efecto. En ocasiones no es suficiente con esto, ya que tambi\u00e9n puede influir el hecho de que algunas queries son cacheadas. En ese caso hay que borrar el directorio tmp/cache . Actualizaci\u00f3n de versi\u00f3n \u00b6 Cuando aparezca una nueva versi\u00f3n de Spree y se quiera actualizar hay que proceder como sigue: 1 2 3 $ bundle update spree $ bundle exec rake railties:install:migrations $ bundle exec rake db:migrate Tareas \"rake\" \u00b6 bundle exec rake assets:precompile:nondigest : Mejora el rendimiento en el entorno de desarrollo a costa de no refrescar en tiempo real los cambios en los assets. bundle exec rake assets:clean : Borra el directorio public/assets . bundle exec rake assets:precompile : Reconstruye el directorio public/assets . bundle exec rake spree_auth:admin:create : Crea un usuario administrador. bundle exec rake spree_sample:load : Cargar los datos de ejemplo. Exige ejecutar previamente bundle exec rake db:seed Instalaci\u00f3n de versi\u00f3n 2.0 \u00b6 El instalador de las \u00faltimas versiones no es del todo redondo (al menos en el momento de escribir esto) y da algunos errores. Para superarlos hay que proceder como sigue. Ejecutar en consola lo siguiente: 1 $ rails new spapp Modificamos la linea de la gem jquery-rails poniendo: 1 gem 'jquery-rails', '~> 2.2.1' Ejecutamos: 1 2 $ cd spapp $ spree install Decimos \"yes\" a todas las preguntas. Cuando termine volvemos a modificar Gemfile sustituyendo las versiones de las gems de Spree que ha a\u00f1adido el script por las siguientes: 1 2 3 gem 'spree', :github => 'spree/spree', :branch => '2-0-stable' gem 'spree_gateway', :github => 'spree/spree_gateway', :branch => '2-0-stable' gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '2-0-stable' Finalmente de nuevo ejecutamos: 1 $ bundle install Configuraci\u00f3n para enviar correos \u00b6 Hay dos formas: Configurando directamente el ActionMailer por c\u00f3digo Usando el override que permite configurar el ActionMailer en el backend Para el primer tipo empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : 1 2 config . override_actionmailer_config = false config . mails_from = \"origen@mail.com\" Luego a\u00f1adimos lo siguiente en el fichero de configuraci\u00f3n del entorno, por ejemplo en development ser\u00eda config/environments/development.rb : 1 2 3 4 5 6 7 8 9 config . action_mailer . delivery_method = :smtp config . action_mailer . smtp_settings = { address : 'smtp.gmail.com' , port : 587 , domain : 'gmail.com' , user_name : 'user_id' , # No es necesario poner @gmail.com password : 'password' , authentication : 'plain' , enable_starttls_auto : true } En teor\u00eda con esto ser\u00eda suficiente, pero en las primeras pruebas hechas, s\u00f3lo funcion\u00f3 con la versi\u00f3n 2.5.3 de la gem mail , por lo que hubo que especificarla en el Gemfile: 1 gem 'mail' , '2.5.3' La \u00faltima versi\u00f3n de mail es la 2.5.4 que ser\u00e1 la que normalmente est\u00e9 instalada. Para hacer el downgrade hay que ejecutar desde el directorio de nuestro proyecto: 1 $ bundle update mail En posteriores versiones de las gemas ya funcionaba con la versi\u00f3n 2.5.4 de mail por lo que dej\u00f3 de ser necesario hacer este apa\u00f1o. Para el segundo tipo de configuraci\u00f3n empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : 1 2 config . override_actionmailer_config = true config . mails_from = \"origen@mail.com\" Como siempre que se tocan las preferencias, hay que vigilar si ya existe versi\u00f3n de la misma en la tabla spree_preferences y si est\u00e1 la consulta a esta tabla cacheada, por lo que habr\u00e1 que borrar el directorio tmp/cache . Luego deberemos acudir en el backend a la siguiente ruta: \"Configuraciones / Preferencias m\u00e9todos de email\". Hay que tener en cuenta que este grupo de opciones s\u00f3lo aparece si la opci\u00f3n override_actionmailer_config tiene el valor true. A continuaci\u00f3n se muestran pantallazos de un par de configuraciones que se ha probado que funcionan: Configuraci\u00f3n seg\u00fan entorno \u00b6 Si queremos ajustar algunas preferencias en el initializer config/initializers/spree.rb de manera que su valor dependa del environment, podemos hacer lo siguiente: 1 2 3 4 5 6 7 8 9 Spree . config do | config | if Rails . env . production? config . mail_port = 1025 # other configs .. else config . mail_port = 25 # other configs .. end end Resetear base de datos \u00b6 Si queremos comenzar de nuevo en lo que respecta a la base de datos, se puede hacer f\u00e1cilmente con el siguiente comando: 1 $ bundle exec rake db:reset A nivel de ficheros habr\u00e1 que hacer la limpieza a mano. En el Spree b\u00e1sico, como m\u00ednimo habr\u00eda que borrar el directorio rails_root/public/spree/products .","title":"Spree"},{"location":"desarrollo/spree.html#spree","text":"","title":"Spree"},{"location":"desarrollo/spree.html#enlaces","text":"Getting Started with Spree Spree 1.1 Deployment on Heroku How To: Add A Custom Model to Your Spree App The Spree API Documentation :exclamation: How to Optimize Your Spree Store for Search Engines Crear extensi\u00f3n Spree Tracking E-commerce With Google Analytics :exclamation:","title":"Enlaces"},{"location":"desarrollo/spree.html#hilos-interesantes-google-group","text":"Add custom admin controller and use custom code inside controller Do something when state order change to completed Changing /products path and linking to individual products Upgrading Extensions to Spree 2 Rich text in product description : Instalaci\u00f3n de CKEditor para que se use en todos los texarea de la administraci\u00f3n de Spree. Remove /t/ from uri","title":"Hilos interesantes Google Group"},{"location":"desarrollo/spree.html#extensiones-interesantes","text":"Static Content : Content management of static pages for Spree. Para p\u00e1ginas como About, T\u00e9rminos legales, etc. (en Github ) :exclamation: Related Products : This extension provides a generic way for you to define different types of relationships between your products, by defining a RelationType for each type of relationship you\u2019d like to maintain. (en Github ) :exclamation: Spree Variant Options : Spree Variant Options replaces the radio-button variant selection with groups of option types and values. (en Github ) :exclamation: SpreeEditor : This extension provides an inline rich-text editor for Spree. Spree Simple Blog : Adds a simple blog to Spree which works much like Toto . Spree Reviews : Straightforward review/rating facility. Spree Wishlist : The Spree Wishlist extension enables multiple wishlists per user, as well as managing those as public (sharable) and private. It also includes the ability to notify a friend via email of a recommended product. :exclamation: Spree Email to Friend : The Spree Email to Friend extension enables you to send the product reference to your friend via email. :exclamation: Google Checkout : Users can place order through Google Checkout. Spree Sitemaps : This extension creates sitemaps in .html, .txt, and .xml (google sitemap) formats. Spree_Videos : Display YouTube video(s) on your product page. (en Github ) SpreeProductZoom : A Spree extension that adds lightbox zoom functionality for product images powered by fancyBox . (en Github ) Sitemap Generator : Spree sitemap generator is a sitemap generator based on the sitemap_generator gem. It adheres to the Sitemap 0.9 protocol specification. (en Github ) Spree Google Merchant : This extension provides a product feed for Google Merchant rather than a file that you have to upload. (en Github ) spree-magiczoomplus : Adds MagicZoomPlus to Spree store. (en Github ) Spree Social Bookmarks : This extension allows you to add social bookmarking to your products so your customers can share pages. (en Github ) Spree Volume Pricing : This extension uses predefined ranges of quantities to determine the price for a particular product variant. (en Github ) Active Shipping : Spree calculator that interfaces with USPS, UPS and FedEx via the popular active_shipping plugin. (en Github ) Payment Methods With Range : This extensions allow declaring payment methods only available for a certain order amount. (en Github ) Print Invoice : Generaci\u00f3n de facturas en PDF en el backend. (en Github ) Product Assembly : Create a product which is composed of other products. SpreeBootstrap : This project aims to replace the spree_frontend's use of the skeleton css framework in favor of Twitter Bootstrap. SpreeContactUs : A Rails 3+ Engine providing a basic contact form as a Spree Extension.","title":"Extensiones interesantes"},{"location":"desarrollo/spree.html#instalacion-en-ubuntu","text":"A los paquetes necesarios para la instalaci\u00f3n de Rails hay que a\u00f1adir: libxml2-dev libxslt1-dev git","title":"Instalaci\u00f3n en Ubuntu"},{"location":"desarrollo/spree.html#tips","text":"","title":"Tips"},{"location":"desarrollo/spree.html#override-de-preferencias","text":"Crear el fichero config/initializers/spree_config.rb y hacer un set de las propiedades. Por ejemplo: 1 2 3 4 5 6 7 #encoding: utf-8 Spree :: Config . set ( logo : \"store/myapp_logo.png\" ) Spree :: Config . set ( site_name : 'MyApp' ) Spree :: Config . set ( currency : 'EUR' ) Spree :: Config . set ( currency_symbol_position : 'after' ) Spree :: Config . set ( default_meta_description : 'MyApp' ) Spree :: Config . set ( default_meta_keywords : 'mis palabras clave' ) Todas las preferencias posibles est\u00e1n definidas en el fichero core/app/models/spree/app_configuration.rb . Las preferencias ajustadas de esta forma acaban en la base de datos en la tabla spree_preferences . Si se quita alguna de las lineas anteriores, hay que eliminar el registro correspondiente para que deje de hacer efecto. En ocasiones no es suficiente con esto, ya que tambi\u00e9n puede influir el hecho de que algunas queries son cacheadas. En ese caso hay que borrar el directorio tmp/cache .","title":"Override de preferencias"},{"location":"desarrollo/spree.html#actualizacion-de-version","text":"Cuando aparezca una nueva versi\u00f3n de Spree y se quiera actualizar hay que proceder como sigue: 1 2 3 $ bundle update spree $ bundle exec rake railties:install:migrations $ bundle exec rake db:migrate","title":"Actualizaci\u00f3n de versi\u00f3n"},{"location":"desarrollo/spree.html#tareas-rake","text":"bundle exec rake assets:precompile:nondigest : Mejora el rendimiento en el entorno de desarrollo a costa de no refrescar en tiempo real los cambios en los assets. bundle exec rake assets:clean : Borra el directorio public/assets . bundle exec rake assets:precompile : Reconstruye el directorio public/assets . bundle exec rake spree_auth:admin:create : Crea un usuario administrador. bundle exec rake spree_sample:load : Cargar los datos de ejemplo. Exige ejecutar previamente bundle exec rake db:seed","title":"Tareas \"rake\""},{"location":"desarrollo/spree.html#instalacion-de-version-20","text":"El instalador de las \u00faltimas versiones no es del todo redondo (al menos en el momento de escribir esto) y da algunos errores. Para superarlos hay que proceder como sigue. Ejecutar en consola lo siguiente: 1 $ rails new spapp Modificamos la linea de la gem jquery-rails poniendo: 1 gem 'jquery-rails', '~> 2.2.1' Ejecutamos: 1 2 $ cd spapp $ spree install Decimos \"yes\" a todas las preguntas. Cuando termine volvemos a modificar Gemfile sustituyendo las versiones de las gems de Spree que ha a\u00f1adido el script por las siguientes: 1 2 3 gem 'spree', :github => 'spree/spree', :branch => '2-0-stable' gem 'spree_gateway', :github => 'spree/spree_gateway', :branch => '2-0-stable' gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '2-0-stable' Finalmente de nuevo ejecutamos: 1 $ bundle install","title":"Instalaci\u00f3n de versi\u00f3n 2.0"},{"location":"desarrollo/spree.html#configuracion-para-enviar-correos","text":"Hay dos formas: Configurando directamente el ActionMailer por c\u00f3digo Usando el override que permite configurar el ActionMailer en el backend Para el primer tipo empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : 1 2 config . override_actionmailer_config = false config . mails_from = \"origen@mail.com\" Luego a\u00f1adimos lo siguiente en el fichero de configuraci\u00f3n del entorno, por ejemplo en development ser\u00eda config/environments/development.rb : 1 2 3 4 5 6 7 8 9 config . action_mailer . delivery_method = :smtp config . action_mailer . smtp_settings = { address : 'smtp.gmail.com' , port : 587 , domain : 'gmail.com' , user_name : 'user_id' , # No es necesario poner @gmail.com password : 'password' , authentication : 'plain' , enable_starttls_auto : true } En teor\u00eda con esto ser\u00eda suficiente, pero en las primeras pruebas hechas, s\u00f3lo funcion\u00f3 con la versi\u00f3n 2.5.3 de la gem mail , por lo que hubo que especificarla en el Gemfile: 1 gem 'mail' , '2.5.3' La \u00faltima versi\u00f3n de mail es la 2.5.4 que ser\u00e1 la que normalmente est\u00e9 instalada. Para hacer el downgrade hay que ejecutar desde el directorio de nuestro proyecto: 1 $ bundle update mail En posteriores versiones de las gemas ya funcionaba con la versi\u00f3n 2.5.4 de mail por lo que dej\u00f3 de ser necesario hacer este apa\u00f1o. Para el segundo tipo de configuraci\u00f3n empezamos poniendo las siguientes preferencias en el fichero config/initializers/spree.rb : 1 2 config . override_actionmailer_config = true config . mails_from = \"origen@mail.com\" Como siempre que se tocan las preferencias, hay que vigilar si ya existe versi\u00f3n de la misma en la tabla spree_preferences y si est\u00e1 la consulta a esta tabla cacheada, por lo que habr\u00e1 que borrar el directorio tmp/cache . Luego deberemos acudir en el backend a la siguiente ruta: \"Configuraciones / Preferencias m\u00e9todos de email\". Hay que tener en cuenta que este grupo de opciones s\u00f3lo aparece si la opci\u00f3n override_actionmailer_config tiene el valor true. A continuaci\u00f3n se muestran pantallazos de un par de configuraciones que se ha probado que funcionan:","title":"Configuraci\u00f3n para enviar correos"},{"location":"desarrollo/spree.html#configuracion-segun-entorno","text":"Si queremos ajustar algunas preferencias en el initializer config/initializers/spree.rb de manera que su valor dependa del environment, podemos hacer lo siguiente: 1 2 3 4 5 6 7 8 9 Spree . config do | config | if Rails . env . production? config . mail_port = 1025 # other configs .. else config . mail_port = 25 # other configs .. end end","title":"Configuraci\u00f3n seg\u00fan entorno"},{"location":"desarrollo/spree.html#resetear-base-de-datos","text":"Si queremos comenzar de nuevo en lo que respecta a la base de datos, se puede hacer f\u00e1cilmente con el siguiente comando: 1 $ bundle exec rake db:reset A nivel de ficheros habr\u00e1 que hacer la limpieza a mano. En el Spree b\u00e1sico, como m\u00ednimo habr\u00eda que borrar el directorio rails_root/public/spree/products .","title":"Resetear base de datos"},{"location":"desarrollo/subl.html","text":"Sublime Text 2 \u00b6 Ajustes \u00b6 Indentado con 2 espacios \u00b6 A\u00f1adir las siguientes dos l\u00edneas al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 6 { ... \"tab_size\": 2, \"translate_tabs_to_spaces\": true ... } Ocultar el MiniMap \u00b6 A\u00f1adir la siguiente l\u00ednea al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 { ... \"show_minimap\": false ... } Extensiones \u00b6 EncodingHelper","title":"Sublime Text 2"},{"location":"desarrollo/subl.html#sublime-text-2","text":"","title":"Sublime Text 2"},{"location":"desarrollo/subl.html#ajustes","text":"","title":"Ajustes"},{"location":"desarrollo/subl.html#indentado-con-2-espacios","text":"A\u00f1adir las siguientes dos l\u00edneas al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 6 { ... \"tab_size\": 2, \"translate_tabs_to_spaces\": true ... }","title":"Indentado con 2 espacios"},{"location":"desarrollo/subl.html#ocultar-el-minimap","text":"A\u00f1adir la siguiente l\u00ednea al Preferences / Settings - User (fichero ~/.config/sublime-text-2/Packages/User/Preferences.sublime-settings ): 1 2 3 4 5 { ... \"show_minimap\": false ... }","title":"Ocultar el MiniMap"},{"location":"desarrollo/subl.html#extensiones","text":"EncodingHelper","title":"Extensiones"},{"location":"desarrollo/svn.html","text":"SVN \u00b6 Diferencia entre dos revisiones distintas (N y M) del mismo fichero (con ruta Path ) \u00b6 1 $ svn diff -r N:M Path Limpiar meta-informaci\u00f3n SVN en una copia de trabajo \u00b6 1 $ rm -rf ` find . -type d -name .svn ` En algunos sistemas lo anterior no funciona bien si los directorios tienen espacios en el nombre. Usar en este caso: 1 $ find . -type d -name .svn -exec rm -rf '{}' \\; Informaci\u00f3n sobre la copia de trabajo \u00b6 1 $ svn info Redireccionar una copia de trabajo tras movimiento de repositorio \u00b6 1 $ svn switch --relocate FROM TO [ Path copia trabajo ] Por ejemplo: 1 edumoreno@walqa347:~/NetBeansProjects/MobileDesktopDemo$ svn switch --relocate svn+ssh://eduardo.moreno@172.22.1.63/var/lib/subversion/ims/MobileDesktopDemo svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/MobileDesktopDemo . Creaci\u00f3n de un proyecto nuevo en un repositorio \u00b6 Vamos a mostrarlo con el ejemplo del proyecto CCM dentro de la ruta svn.servidor.com/var/lib/subversion/ims , siendo la ruta de la copia de trabajo /home/edumoreno/NetBeansProjects/CCM . 1 $ svn mkdir svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Creaci\u00f3n directorio.\" Antes de hacer el import ser\u00eda interesante eliminar o mover los directorios o ficheros que no se desea que se sincronicen con el repositorio. Por ejemplo, en el caso de un proyecto NetBeans, \u00e9stos son: CCM/build CCM/dist CCM/nbproject/private Una vez eliminados o movidos hacemos el import: 1 2 $ cd /home/edumoreno/NetBeansProjects/CCM $ svn import . svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Import inicial.\" Ahora habr\u00eda que hacer un checkout de lo que se ha subido para obtener la meta-informaci\u00f3n del repositorio: 1 2 3 $ cd /home/edumoreno/NetBeansProjects $ rm -rf CCM $ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/ Finalmente hay que hacer ajustes para que se ignoren los siguientes directorios del nuevo repositorio: build dist nbproject/private Esto en teor\u00eda se puede hacer con los siguientes comandos, pero aun no se ha probado: 1 2 3 4 5 $ cd /home/edumoreno/NetBeansProjects/CCM $ svn propset svn:ignore 'build dist' . $ svn propset svn:ignore 'private' nbproject/ $ svn commit -m \"Ignoramos una serie de directorios del proyecto.\" (Nota: El retorno de carro que hay al final del primer comando svn propset es intencionado) Si por alg\u00fan motivo los directorios hubieran entrado por descuido en el repositorio, habr\u00eda que borrarlos tanto en el servidor como en local, ya que aunque se haya establecido la propiedad svn:ignore, se seguir\u00edan sincronizando: 1 2 3 4 5 6 7 $ svn delete build $ svn delete dist $ svn delete nbproject/private $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/build $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/dist $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/nbproject/private $ svn commit -m \"Eliminamos una serie de directorios del proyecto.\" Creaci\u00f3n de un branch \u00b6 Para crear el branch simplemente hay que hacer una copia del trunk sin salir del repositorio. Para ello utilizar el siguiente comando: 1 $ svn copy -m \"Creaci\u00f3n de branch b1_svg.\" svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/trunk/ svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Luego si se desea trabajar en el branch reci\u00e9n creado habr\u00e1 que bajar una copia de trabajo con el comando siguiente: 1 2 edumoreno@walqa347:~$ cd ~/NetBeansProjects/ edumoreno@walqa347:~/NetBeansProjects$ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ CCM_b1_svg Merge con el trunk \u00b6 Cuando llegue el momento de hacer el merge, habr\u00e1 que proceder de la siguiente forma. Como punto de partida necesitaremos una copia de trabajo del trunk: Averiguamos la revisi\u00f3n en que construimos el branch. Esto se puede conseguir haciendo un log con la opci\u00f3n --stop-on-copy (que detiene la salida del comando en cuanto se detecta que la rama fue copiada o renombrada). As\u00ed, la entrada m\u00e1s antigua muestra lo que buscamos: 1 $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | tail Averiguamos la \u00faltima revisi\u00f3n que contiene cambios en el branch: 1 $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | head Nos situamos en el directorio de la copia de trabajo correspondiente al trunk y hacemos update : 1 2 edumoreno@walqa347:~$ cd ~/NetBeansProjects/CCM edumoreno@walqa347:~/NetBeansProjects/CCM$ svn update Antes de hacer el merge se puede simular, es decir, lanzarlo sin que aplique los cambios y que s\u00f3lo muestre lo que va a hacer, incorporando la opci\u00f3n --dry-run . El comando ser\u00eda: 1 $ svn merge --dry-run -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Una vez que estemos seguros hacemos el merge indicando la release inicial del branch como origen del intervalo de releases: 1 $ svn merge -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Resolvemos manualmente los conflictos que inevitablemente existir\u00e1n. Hacemos el commit en el trunk de los cambios del branch reci\u00e9n incorporados: 1 $ svn commit -m \"Merge de los cambios r549:634 del branch 'b1_svg' sobre el trunk.\" An\u00e1lisis de diferencias ante un conflicto \u00b6 Para listar los ficheros que tienen conflictos: 1 $ svn status | grep \"^C\" Para listar los ficheros diferenciales de un conflicto: 1 $ ls -l <fichero_base>* La interpretaci\u00f3n de los sufijos que se a\u00f1aden a los ficheros es (siendo MMMM la release de creaci\u00f3n del branch y NNNN la del momento del merge): <fichero_base> : Fichero de merge <fichero_base>.copia-de-trabajo : \u00daltima versi\u00f3n de la copia destino del merge (normalmente el trunk) <fichero_base>.derecha-fusion.rNNNN : \u00daltima versi\u00f3n de la copia origen del merge (normalmente el branch) <fichero_base>.izquierda-fusion.rMMMM : Versi\u00f3n com\u00fan a ambas ramas, es decir, el punto del tiempo en que empezaron a diferenciarse Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama destino (normalmente el trunk): 1 $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.copia-de-trabajo Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama origen (normalmente el branch): 1 $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.derecha-fusion.rNNNN Borrado de la rama \u00b6 Si una vez hecho el merge no se va a continuar trabajando en el branch, se puede considerar su borrado. Esto se hace con la simple orden siguiente: 1 $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/","title":"SVN"},{"location":"desarrollo/svn.html#svn","text":"","title":"SVN"},{"location":"desarrollo/svn.html#diferencia-entre-dos-revisiones-distintas-n-y-m-del-mismo-fichero-con-ruta-path","text":"1 $ svn diff -r N:M Path","title":"Diferencia entre dos revisiones distintas (N y M) del mismo fichero (con ruta Path)"},{"location":"desarrollo/svn.html#limpiar-meta-informacion-svn-en-una-copia-de-trabajo","text":"1 $ rm -rf ` find . -type d -name .svn ` En algunos sistemas lo anterior no funciona bien si los directorios tienen espacios en el nombre. Usar en este caso: 1 $ find . -type d -name .svn -exec rm -rf '{}' \\;","title":"Limpiar meta-informaci\u00f3n SVN en una copia de trabajo"},{"location":"desarrollo/svn.html#informacion-sobre-la-copia-de-trabajo","text":"1 $ svn info","title":"Informaci\u00f3n sobre la copia de trabajo"},{"location":"desarrollo/svn.html#redireccionar-una-copia-de-trabajo-tras-movimiento-de-repositorio","text":"1 $ svn switch --relocate FROM TO [ Path copia trabajo ] Por ejemplo: 1 edumoreno@walqa347:~/NetBeansProjects/MobileDesktopDemo$ svn switch --relocate svn+ssh://eduardo.moreno@172.22.1.63/var/lib/subversion/ims/MobileDesktopDemo svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/MobileDesktopDemo .","title":"Redireccionar una copia de trabajo tras movimiento de repositorio"},{"location":"desarrollo/svn.html#creacion-de-un-proyecto-nuevo-en-un-repositorio","text":"Vamos a mostrarlo con el ejemplo del proyecto CCM dentro de la ruta svn.servidor.com/var/lib/subversion/ims , siendo la ruta de la copia de trabajo /home/edumoreno/NetBeansProjects/CCM . 1 $ svn mkdir svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Creaci\u00f3n directorio.\" Antes de hacer el import ser\u00eda interesante eliminar o mover los directorios o ficheros que no se desea que se sincronicen con el repositorio. Por ejemplo, en el caso de un proyecto NetBeans, \u00e9stos son: CCM/build CCM/dist CCM/nbproject/private Una vez eliminados o movidos hacemos el import: 1 2 $ cd /home/edumoreno/NetBeansProjects/CCM $ svn import . svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM -m \"Import inicial.\" Ahora habr\u00eda que hacer un checkout de lo que se ha subido para obtener la meta-informaci\u00f3n del repositorio: 1 2 3 $ cd /home/edumoreno/NetBeansProjects $ rm -rf CCM $ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/ Finalmente hay que hacer ajustes para que se ignoren los siguientes directorios del nuevo repositorio: build dist nbproject/private Esto en teor\u00eda se puede hacer con los siguientes comandos, pero aun no se ha probado: 1 2 3 4 5 $ cd /home/edumoreno/NetBeansProjects/CCM $ svn propset svn:ignore 'build dist' . $ svn propset svn:ignore 'private' nbproject/ $ svn commit -m \"Ignoramos una serie de directorios del proyecto.\" (Nota: El retorno de carro que hay al final del primer comando svn propset es intencionado) Si por alg\u00fan motivo los directorios hubieran entrado por descuido en el repositorio, habr\u00eda que borrarlos tanto en el servidor como en local, ya que aunque se haya establecido la propiedad svn:ignore, se seguir\u00edan sincronizando: 1 2 3 4 5 6 7 $ svn delete build $ svn delete dist $ svn delete nbproject/private $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/build $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/dist $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/nbproject/private $ svn commit -m \"Eliminamos una serie de directorios del proyecto.\"","title":"Creaci\u00f3n de un proyecto nuevo en un repositorio"},{"location":"desarrollo/svn.html#creacion-de-un-branch","text":"Para crear el branch simplemente hay que hacer una copia del trunk sin salir del repositorio. Para ello utilizar el siguiente comando: 1 $ svn copy -m \"Creaci\u00f3n de branch b1_svg.\" svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/trunk/ svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Luego si se desea trabajar en el branch reci\u00e9n creado habr\u00e1 que bajar una copia de trabajo con el comando siguiente: 1 2 edumoreno@walqa347:~$ cd ~/NetBeansProjects/ edumoreno@walqa347:~/NetBeansProjects$ svn checkout svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ CCM_b1_svg","title":"Creaci\u00f3n de un branch"},{"location":"desarrollo/svn.html#merge-con-el-trunk","text":"Cuando llegue el momento de hacer el merge, habr\u00e1 que proceder de la siguiente forma. Como punto de partida necesitaremos una copia de trabajo del trunk: Averiguamos la revisi\u00f3n en que construimos el branch. Esto se puede conseguir haciendo un log con la opci\u00f3n --stop-on-copy (que detiene la salida del comando en cuanto se detecta que la rama fue copiada o renombrada). As\u00ed, la entrada m\u00e1s antigua muestra lo que buscamos: 1 $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | tail Averiguamos la \u00faltima revisi\u00f3n que contiene cambios en el branch: 1 $ svn log -v --stop-on-copy svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ | head Nos situamos en el directorio de la copia de trabajo correspondiente al trunk y hacemos update : 1 2 edumoreno@walqa347:~$ cd ~/NetBeansProjects/CCM edumoreno@walqa347:~/NetBeansProjects/CCM$ svn update Antes de hacer el merge se puede simular, es decir, lanzarlo sin que aplique los cambios y que s\u00f3lo muestre lo que va a hacer, incorporando la opci\u00f3n --dry-run . El comando ser\u00eda: 1 $ svn merge --dry-run -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Una vez que estemos seguros hacemos el merge indicando la release inicial del branch como origen del intervalo de releases: 1 $ svn merge -r 549 :634 svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/ Resolvemos manualmente los conflictos que inevitablemente existir\u00e1n. Hacemos el commit en el trunk de los cambios del branch reci\u00e9n incorporados: 1 $ svn commit -m \"Merge de los cambios r549:634 del branch 'b1_svg' sobre el trunk.\"","title":"Merge con el trunk"},{"location":"desarrollo/svn.html#analisis-de-diferencias-ante-un-conflicto","text":"Para listar los ficheros que tienen conflictos: 1 $ svn status | grep \"^C\" Para listar los ficheros diferenciales de un conflicto: 1 $ ls -l <fichero_base>* La interpretaci\u00f3n de los sufijos que se a\u00f1aden a los ficheros es (siendo MMMM la release de creaci\u00f3n del branch y NNNN la del momento del merge): <fichero_base> : Fichero de merge <fichero_base>.copia-de-trabajo : \u00daltima versi\u00f3n de la copia destino del merge (normalmente el trunk) <fichero_base>.derecha-fusion.rNNNN : \u00daltima versi\u00f3n de la copia origen del merge (normalmente el branch) <fichero_base>.izquierda-fusion.rMMMM : Versi\u00f3n com\u00fan a ambas ramas, es decir, el punto del tiempo en que empezaron a diferenciarse Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama destino (normalmente el trunk): 1 $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.copia-de-trabajo Para obtener una descripci\u00f3n de las diferencias habidas sobre la rama origen (normalmente el branch): 1 $ diff <fichero_base>.izquierda-fusion.rMMMM <fichero_base>.derecha-fusion.rNNNN","title":"An\u00e1lisis de diferencias ante un conflicto"},{"location":"desarrollo/svn.html#borrado-de-la-rama","text":"Si una vez hecho el merge no se va a continuar trabajando en el branch, se puede considerar su borrado. Esto se hace con la simple orden siguiente: 1 $ svn delete svn+ssh://eduardo.moreno@svn.servidor.com/var/lib/subversion/ims/CCM/branches/b1_svg/","title":"Borrado de la rama"},{"location":"desarrollo/vagrant.html","text":"Vagrant \u00b6 Instalaci\u00f3n \u00b6 Instalar VirtualBox de la distribuci\u00f3n ( virtualbox en Ubuntu) y bajar el instalable de Vagrant de su sitio web . Creaci\u00f3n de entorno \u00b6 Desde el directorio ra\u00edz de nuestro proyecto de desarrollo, ejecutar: 1 $ vagrant init Esto crea el fichero Vagrantfile que mantendr\u00e1 la configuraci\u00f3n de nuestro entorno. Este fichero conviene incluirlo en el control de versiones. Modificamos el fichero Vagrantfile para que use la m\u00e1quina que nos interesa. En el ejemplo vamos a usar ubuntu/xenial64 (consultar aqu\u00ed el cat\u00e1logo completo de m\u00e1quinas). 1 2 3 Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" end Cuando se levante por primera el entorno configurado en el Vagrantfile se bajar\u00e1 la m\u00e1quina. Si queremos adelantar este proceso podemos bajar la m\u00e1quina con el siguiente comando: 1 $ vagrant box add ubuntu/xenial64 Ahora ya podemos levantar el entorno y conectar con \u00e9l: 1 2 $ vagrant up $ vagrant ssh El comando vagrant ssh automatiza una conexi\u00f3n ssh cuyos par\u00e1metros manuales se pueden obtener ejecutando el comando vagrant ssh-config . Por ejemplo, una conexi\u00f3n manual podr\u00eda lograrse a partir de los siguientes resultados as\u00ed: 1 2 3 4 5 6 7 8 9 10 11 12 $ vagrant ssh - config Host default HostName 127.0.0.1 User ubuntu Port 2222 UserKnownHostsFile / dev / null StrictHostKeyChecking no PasswordAuthentication no IdentityFile / home / edumoreno / git / django_test / . vagrant / machines / default / virtualbox / private_key IdentitiesOnly yes LogLevel FATAL $ ssh - i / home / edumoreno / git / django_test / . vagrant / machines / default / virtualbox / private_key - p 2222 ubuntu @127.0.0.1 Tal y como se indica en el log del arranque de la m\u00e1quina (durante el vagrant up ), el directorio del proyecto de la m\u00e1quina host se monta sobre /vagrant de la m\u00e1quina guest: 1 2 ==> default: Mounting shared folders... default: /vagrant => /home/edumoreno/git/niubit_lms Provisi\u00f3n de componentes \u00b6 Por ejemplo vamos a configurar la instalaci\u00f3n de un entorno Python3/Django. La m\u00e1quina que hemos instalado ( ubuntu/xenial64 ) viene con Python3 preinstalado. Vamos a instalar Django de forma controlada con Vagrant para que pueda reproducir esa instalaci\u00f3n de forma autom\u00e1tica si creamos este entorno en otro lugar. Para ello escribimos un script que luego integramos en el Vagrantfile de la siguiente forma: 1 2 3 4 5 6 7 8 9 Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision \"shell\", inline: <<-SHELL #!/usr/bin/env bash apt-get update apt-get install -y python3-pip pip3 install Django SHELL end Si no hab\u00edamos arrancado la m\u00e1quina todav\u00eda, el script se ejecutar\u00e1 en el primer arranque. Si ya lo hab\u00edamos hecho habr\u00e1 que decirle a Vagrant que ejecute la configuraci\u00f3n de provisioning: 1 $ vagrant reload --provision En caso de tener que ejecutar muchos scripts o ser muy grandes, tal vez sea mejor escribirlos en archivos separados que luego se pueden referenciar en el Vagrantfile de esta forma (tal y como est\u00e1 en el ejemplo, el script script.sh deber\u00e1 estar en la misma ruta que el Vagrantfile ): 1 2 3 4 Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision :shell, path: \"script.sh\" end Redirecci\u00f3n de puertos \u00b6 Aparte del acceso SSH que se consigue f\u00e1cilmente a trav\u00e9s del comando vagrant ssh como hemos visto, ser\u00e1 habitual que necesitemos otro tipo de accesos por red hacia la m\u00e1quina virtual. Por ejemplo en el caso de que estemos desarrollando una aplicaci\u00f3n web necesitaremos redireccionar el puerto que sirva la m\u00e1quina virtual. Por ejemplo, si queremos redireccionar el puerto 8000 de la m\u00e1quina virtual hacia la host, deberemos a\u00f1adir la siguiente l\u00ednea al bloque de configuraciones del Vagrantfile : 1 config.vm.network :forwarded_port, guest: 8000, host: 8000 Tras ello hay que ejecutar vagrant reload o vagrant up dependiendo de si la m\u00e1quina virtual est\u00e1 arrancada o parada. En Vagrant hay muchas m\u00e1s posibilidades para configurar la red adem\u00e1s del nat que acabamos de hacer. Todas estas posibilidades se describen aqu\u00ed . Para Python/Django En caso de querer acceder al miniservidor que se ejecuta con python manage.py runserver , adem\u00e1s de la redirecci\u00f3n del puerto (precisamente se usa el 8000 de forma predeterminada), tal y como se explica aqu\u00ed , hay que lanzar el miniservidor especificando que se escucha cualquier interfaz de la m\u00e1quina (por defecto se escucha s\u00f3lo el interfaz de loopback) ejecutando as\u00ed: 1 python manage.py runserver 0.0.0.0:8000","title":"Vagrant"},{"location":"desarrollo/vagrant.html#vagrant","text":"","title":"Vagrant"},{"location":"desarrollo/vagrant.html#instalacion","text":"Instalar VirtualBox de la distribuci\u00f3n ( virtualbox en Ubuntu) y bajar el instalable de Vagrant de su sitio web .","title":"Instalaci\u00f3n"},{"location":"desarrollo/vagrant.html#creacion-de-entorno","text":"Desde el directorio ra\u00edz de nuestro proyecto de desarrollo, ejecutar: 1 $ vagrant init Esto crea el fichero Vagrantfile que mantendr\u00e1 la configuraci\u00f3n de nuestro entorno. Este fichero conviene incluirlo en el control de versiones. Modificamos el fichero Vagrantfile para que use la m\u00e1quina que nos interesa. En el ejemplo vamos a usar ubuntu/xenial64 (consultar aqu\u00ed el cat\u00e1logo completo de m\u00e1quinas). 1 2 3 Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" end Cuando se levante por primera el entorno configurado en el Vagrantfile se bajar\u00e1 la m\u00e1quina. Si queremos adelantar este proceso podemos bajar la m\u00e1quina con el siguiente comando: 1 $ vagrant box add ubuntu/xenial64 Ahora ya podemos levantar el entorno y conectar con \u00e9l: 1 2 $ vagrant up $ vagrant ssh El comando vagrant ssh automatiza una conexi\u00f3n ssh cuyos par\u00e1metros manuales se pueden obtener ejecutando el comando vagrant ssh-config . Por ejemplo, una conexi\u00f3n manual podr\u00eda lograrse a partir de los siguientes resultados as\u00ed: 1 2 3 4 5 6 7 8 9 10 11 12 $ vagrant ssh - config Host default HostName 127.0.0.1 User ubuntu Port 2222 UserKnownHostsFile / dev / null StrictHostKeyChecking no PasswordAuthentication no IdentityFile / home / edumoreno / git / django_test / . vagrant / machines / default / virtualbox / private_key IdentitiesOnly yes LogLevel FATAL $ ssh - i / home / edumoreno / git / django_test / . vagrant / machines / default / virtualbox / private_key - p 2222 ubuntu @127.0.0.1 Tal y como se indica en el log del arranque de la m\u00e1quina (durante el vagrant up ), el directorio del proyecto de la m\u00e1quina host se monta sobre /vagrant de la m\u00e1quina guest: 1 2 ==> default: Mounting shared folders... default: /vagrant => /home/edumoreno/git/niubit_lms","title":"Creaci\u00f3n de entorno"},{"location":"desarrollo/vagrant.html#provision-de-componentes","text":"Por ejemplo vamos a configurar la instalaci\u00f3n de un entorno Python3/Django. La m\u00e1quina que hemos instalado ( ubuntu/xenial64 ) viene con Python3 preinstalado. Vamos a instalar Django de forma controlada con Vagrant para que pueda reproducir esa instalaci\u00f3n de forma autom\u00e1tica si creamos este entorno en otro lugar. Para ello escribimos un script que luego integramos en el Vagrantfile de la siguiente forma: 1 2 3 4 5 6 7 8 9 Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision \"shell\", inline: <<-SHELL #!/usr/bin/env bash apt-get update apt-get install -y python3-pip pip3 install Django SHELL end Si no hab\u00edamos arrancado la m\u00e1quina todav\u00eda, el script se ejecutar\u00e1 en el primer arranque. Si ya lo hab\u00edamos hecho habr\u00e1 que decirle a Vagrant que ejecute la configuraci\u00f3n de provisioning: 1 $ vagrant reload --provision En caso de tener que ejecutar muchos scripts o ser muy grandes, tal vez sea mejor escribirlos en archivos separados que luego se pueden referenciar en el Vagrantfile de esta forma (tal y como est\u00e1 en el ejemplo, el script script.sh deber\u00e1 estar en la misma ruta que el Vagrantfile ): 1 2 3 4 Vagrant.configure(\"2\") do |config| config.vm.box = \"ubuntu/xenial64\" config.vm.provision :shell, path: \"script.sh\" end","title":"Provisi\u00f3n de componentes"},{"location":"desarrollo/vagrant.html#redireccion-de-puertos","text":"Aparte del acceso SSH que se consigue f\u00e1cilmente a trav\u00e9s del comando vagrant ssh como hemos visto, ser\u00e1 habitual que necesitemos otro tipo de accesos por red hacia la m\u00e1quina virtual. Por ejemplo en el caso de que estemos desarrollando una aplicaci\u00f3n web necesitaremos redireccionar el puerto que sirva la m\u00e1quina virtual. Por ejemplo, si queremos redireccionar el puerto 8000 de la m\u00e1quina virtual hacia la host, deberemos a\u00f1adir la siguiente l\u00ednea al bloque de configuraciones del Vagrantfile : 1 config.vm.network :forwarded_port, guest: 8000, host: 8000 Tras ello hay que ejecutar vagrant reload o vagrant up dependiendo de si la m\u00e1quina virtual est\u00e1 arrancada o parada. En Vagrant hay muchas m\u00e1s posibilidades para configurar la red adem\u00e1s del nat que acabamos de hacer. Todas estas posibilidades se describen aqu\u00ed . Para Python/Django En caso de querer acceder al miniservidor que se ejecuta con python manage.py runserver , adem\u00e1s de la redirecci\u00f3n del puerto (precisamente se usa el 8000 de forma predeterminada), tal y como se explica aqu\u00ed , hay que lanzar el miniservidor especificando que se escucha cualquier interfaz de la m\u00e1quina (por defecto se escucha s\u00f3lo el interfaz de loopback) ejecutando as\u00ed: 1 python manage.py runserver 0.0.0.0:8000","title":"Redirecci\u00f3n de puertos"},{"location":"desarrollo/yii.html","text":"Yii Framework \u00b6 Enlaces \u00b6 A probar cuando tenga un error :exclamation: Creating a dependent dropdown Search() & Filter of a relations field through CGridView Handling Related Models in Yii Forms Learning Yii Framework Series Yii for beginners How to Change datetime format displayed on the View Tabla Master Detail en Yii GridView de Yii Framework Dynamic parent and child CGridCiew on single view. Using $.ajax to update child gridview via controller (with MANY_MANY relation), after row in parent gridview was clicked Search CGridView, related tables, dates and datepicker Yii Framework en Espa\u00f1ol - Foro Multimodelform dropdown con Ajax Ejecutar acci\u00f3n en multimodelform con dropdown Usando Ajax en Yii, Facil Class Level Methods vs Static Methods Accessing data in a join table with the related models (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Selecting join table with mant to many? (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Special $variables in CGridView and CListView Custom Page Size for CGridView Using CButtonColumn to customize buttons in CGridView Understanding Virtual Attributes and get/set methods :exclamation: Using standard filters in CGridView custom fields Searching and sorting by related model in CGridView :exclamation: Reference: Model rules validation :exclamation: Displaying, sorting and filtering HasMany & ManyMany relations in CGridView :exclamation: Tutorial Yii Framework 1. INSTALANDO YII Y PRIMERA APLICACI\u00d3N 2. CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS 3. LENGUAJE Y VISTA POR DEFECTO 4. MODIFICANDO EL MEN\u00da 5. AUTENTICACI\u00d3N DE USUARIOS 6. CLAVES FOR\u00c1NEAS EN VISTAS 7. VALIDANDO LOS FORMULARIOS 8. ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID 9. FECHAS CON CJUIDATEPICKER 10. B\u00daSQUEDAS POR FECHAS CON SYDATECOLUMN 11. EXPORTAR DEL CGRIDVIEW A PDF 12. REPORTES A PARTIR DE UNA B\u00daSQUEDA EN EL GRID 13. COMBOS DEPENDIENTES 14. CAMPO CON AUTOCOMPLETAR 15. NO MOSTRAR INDEX.PHP EN LAS URL 16. GUARDAR AUTOM\u00c1TICAMENTE USUARIO Y FECHA DE CREACI\u00d3N Y MODIFICACI\u00d3N 17. HACER FORMULARIO PARA MULTIPLES MODELOS 18. CAMPOS ENMASCARADOS EN FORMULARIO Extensiones \u00b6 bootstrap : Bootstrap brings together Yii and Bootstrap, Twitter's HTML, CSS and JavaScript toolkit. eupdatedialog : EUpdateDialog is an extension for Yii framework that allows to run controller actions using jQuery UI dialog. multimodelform : This extension allows to work with multiple records and different models in a edit form. enexmo : ENexmo Library allows Yii programmers to use the Restful API offered by Mobile Messaging provider Nexmo . ejuitimepicker : This extension is a wrapper for Timepicker addon which adds a timepicker to jQuery UI Datepicker. datetimepicker : Datetime picker input widget, based on Jui-timepicker-addon. Envio email con Emailer A module to build dependents dropdown save-relations-ar-behavior : Save HasMany and ManyMany relational active records along with the main model. Know How \u00b6 Instalaci\u00f3n \u00b6 Apache \u00b6 Para ocultar el script de inicio ( index.php ) de la URL se puede configurar un fichero .htaccess como sigue: 1 2 3 4 5 6 7 RewriteEngine on # if a directory or a file exists, use it directly RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d # otherwise forward it to index.php RewriteRule . index.php Fundamentos \u00b6 Development mode \u00b6 En el fichero index.php el modo DEBUG se ajusta en la linea siguiente: 1 2 <?php defined ( 'YII_DEBUG' ) or define ( 'YII_DEBUG' , true ); Ponerlo a false en Producci\u00f3n ( fuente ). El componente log admite como una de las rutas de log la clase CWebLogRoute que muestra un log detallado de la ejecuci\u00f3n de la p\u00e1gina en la parte inferior de la misma. Para activarlo incluir la clase en el array de routes del componente log , por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 12 13 <?php 'log' => array ( 'class' => 'CLogRouter' , 'routes' => array ( array ( 'class' => 'CFileLogRoute' , 'levels' => 'error, warning' , ), array ( 'class' => 'CWebLogRoute' , ), ), ), Cuando el desarrollo est\u00e9 avanzado o al menos en una fase en la que no se esperen muchos cambios en el esquema de base de datos, se puede mejorar la velocidad del componente db dando un valor mayor que 0 a la propiedad CDbConnection::schemaCachingDuration ( fuente ). Desactivar el m\u00f3dulo gii en el fichero de configuraci\u00f3n cuando la aplicaci\u00f3n est\u00e9 en Producci\u00f3n. Poner a false el par\u00e1metro enableParamLogging del componente db en el fichero de configuraci\u00f3n de la aplicaci\u00f3n. Application \u00b6 Si no se especifica, el controlador predeterminado de una aplicaci\u00f3n se llama \"site\" (SiteController), pero se puede especificar as\u00ed en el fichero de configuraci\u00f3n de la aplicaci\u00f3n ( fuente ): 1 2 3 4 <?php array ( 'defaultController' => 'site' , ) Los componentes de aplicaci\u00f3n se activan por defecto si son definidos en el fichero de configuraci\u00f3n de la aplicaci\u00f3n, pero pueden ser desactivados asignando false al atributo enabled ( fuente ). Los componentes de aplicaci\u00f3n se suelen incorporar de un paquete incluido con la instalaci\u00f3n de Yii. La lista completa de componentes de aplicaci\u00f3n de Yii puede consultarse aqu\u00ed . La aplicaci\u00f3n genera un log en <AppRoot>/protected/runtime/application.log . Controller \u00b6 Si no se especifica la acci\u00f3n a ejecutar de un controller, se ejecuta la acci\u00f3n predeterminada que es index . Puede cambiarse ajustando la variable de instancia p\u00fablica CController:defaultAction ( fuente ). La ruta de los controllers es relativa al directorio <AppRoot>/protected/controllers ( fuente ). Si la aplicaci\u00f3n est\u00e1 organizada en m\u00f3dulos, la ruta completa de las acciones ser\u00e1 del estilo moduleID/controllerID/actionID ( fuente ). La instanciaci\u00f3n de controllers sigue esta secuencia ( fuente ): Si se ha especificado CWebApplication::catchAllRequest (se usa normalmente para poner la aplicaci\u00f3n en modo mantenimiento). Si el ID del controller se encuentra en el mapa definido en CWebApplication::controllerMap . Finalmente se utiliza la convenci\u00f3n comentada anteriormente que enlaza el ID del controller con las clases del directorio <AppRoot>/protected/controllers . Las acciones se pueden escribir como clases aut\u00f3nomas en lugar de como m\u00e9todos de un controller ( fuente ). Los filtros se pueden definir como m\u00e9todos de los controllers en cuyo caso deben empezar por filter o como clases independientes descendientes de CFilter ( fuente ). Los filtros se pueden mapear en la funci\u00f3n filters() de los controllers. Se pueden definir listas negras y listas blancas de acciones sobre las que se aplicar\u00e1 la lista de filtros ( fuente ). View \u00b6 La ruta de las vistas es relativa al directorio <AppRoot>/protected/views ( fuente ). Dentro de las vistas se puede acceder al controller mediante $this . Adicionalmente se pueden pasar variables concretas desde el controller al invocar la vista de la siguiente manera: 1 2 3 4 5 <?php $this -> render ( 'edit' , array ( 'var1' => $value1 , 'var2' => $value2 , )); Por defecto se aplica a las vistas el layout definido en <AppRoot>/protected/views/layouts/main.php . Esto puede cambiarse a nivel de aplicaci\u00f3n en CWebApplication::layout o a nivel de controller en CController::layout . Si se quiere renderizar una vista sin aplicar layout, en lugar del m\u00e9todo CController::render() hay que invocar CController:renderPartial() ( fuente ). Component \u00b6 Los componentes se utilizan para encapsular funcionalidad. Soportan propiedades, eventos y behaviors. Estos \u00faltimos se utilizan para implementar herencia m\u00faltiple ( fuente ). Module \u00b6 Un m\u00f3dulo es una unidad de c\u00f3digo autocontenida que engloba modelos, vistas, controllers y componentes. Es en cierto modo una aplicaci\u00f3n, s\u00f3lo que no puede ser desplegada por separado. Los m\u00f3dulos se pueden anidar en varios niveles. De la misma forma que una aplicaci\u00f3n puede contener m\u00f3dulos, \u00e9stos pueden contener a su vez otros m\u00f3dulos. Se configuran de la misma forma con el fichero de configuraci\u00f3n de la aplicaci\u00f3n, indicando la propiedad modules en el m\u00f3dulo contenedor. Path Alias e importaci\u00f3n de clases \u00b6 De forma predeterminada est\u00e1n definidos los siguientes path alias: system: <YiiRoot>/framework zii: <YiiRoot>/framework/zii application: <AppRoot>/protected webroot: <AppRoot> ext: <AppRoot>/protected/extensions Para importar clases mejor utilizar Yii:import('path_alias_de_la_clase') que el include , require o require_once de PHP ( fuente ). Se pueden importar todas las clases de un directorio en bloque con una orden del estilo Yii:import('path_alias_del_directorio.*') . Las clases del propio framework est\u00e1n pre-importadas, por lo que no es necesario hacerlo. Convenciones \u00b6 Del framework \u00b6 Si no se especifica en la URL el ID del action se ejecutar\u00e1 el action predeterminada. Si no se cambia (con CController::defaultAction ) se ejecutar\u00e1 el action index . Si no se especifica en la URL el ID del controller se ejecutar\u00e1 el controller predeterminado. Si no se cambia (con CWebApplication::defaultController ) se ejecutar\u00e1 el controller site . Nomenclatura para c\u00f3digo \u00b6 Utilizar notaci\u00f3n camelCase. Comenzar las clases con una letra may\u00fascula. La letra C se usa en las clases del framework => Se recomienda utilizar otra ( T por ejemplo). Comenzar las variables privadas de clase con underscore. Terminar las clases controller con Controller . Dentro de una clase controller, los m\u00e9todos de action comenzarlos con action . Terminar las clases de action con Action . Nomenclatura para bases de datos \u00b6 Nombres de tablas y campos en min\u00fasculas. Palabras separadas con underscore (por ejemplo: direccion_cliente). Nombres de tablas en singular. Nombres de tablas con prefijo propio de la aplicaci\u00f3n (por ejemplo: gestoo_clientes). Formularios \u00b6 Creando el Modelo \u00b6 Validaci\u00f3n \u00b6 Las reglas de validaci\u00f3n se definen en la funci\u00f3n rules() del Model componiendo un array en el que cada elemento se define como sigue: 1 2 <?php array ( 'ListaAtributos' , 'Validador' , 'on' => 'ListaEscenarios' , ... opciones adicionales ) donde ListaAtributos es una lista separada por comas de nombres de atributos del Model; Validador especifica el tipo de validaci\u00f3n; el par\u00e1metro on es opcional y especifica la lista de escenarios en las que se aplica la regla; las opciones adicionales son pares clave-valor para inicializar propiedades de los validadores usados. Hay tres tipos de validadores: Validador puede ser el nombre de un m\u00e9todo de la clase Modelo. El m\u00e9todo tiene que tener la siguiente forma: 1 2 3 4 5 6 <?php /** * @param string $attribute the name of the attribute to be validated * @param array $params options specified in the validation rule */ public function ValidatorName ( $attribute , $params ) { ... } Validador puede ser el nombre de una clase de validaci\u00f3n. En este caso cuando la regla es aplicada, una instancia de la clase de validaci\u00f3n se crea y se inicializa con las opciones adicionales. La clase de validaci\u00f3n debe extender de CValidator . Validador puede ser una de las clases de validaci\u00f3n predefinidas en Yii ( lista ). Asignaci\u00f3n de atributos \u00b6 Las asignaciones de atributos entre formulario y modelo se pueden hacer en bloque por medio de la funci\u00f3n de PHP $_POST[<clase_modelo>] . S\u00f3lo se asignan los atributos considerados seguros, es decir los que tienen asociada una regla de validaci\u00f3n. Hay que tener en cuenta que las reglas de validaci\u00f3n se pueden asociar a escenarios por lo que se asignar\u00e1n unos atributos u otros seg\u00fan el escenario declarado al instanciar el modelo. Por ejemplo: 1 2 3 4 5 6 7 8 9 10 <?php // en escenario login $model = new User ( 'login' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; // en escenario register $model = new User ( 'register' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; Es importante recordar que las reglas de validaci\u00f3n se usan para chequear los datos introducidos por los usuarios y no los datos generados por c\u00f3digo (timestamps o primary keys). Por lo tanto no hay que definir reglas de validaci\u00f3n en los atributos que no esperamos que sean introducidos por el usuario . Por ejemplo, si marcamos como seguro el atributo id de un modelo (por medio del validador safe por ejemplo), aunque inicialmente no incluyamos el campo en el formulario, un atacante podr\u00eda enviarlo y la asignaci\u00f3n en bloque sobre el modelo lo incluir\u00eda y podr\u00eda permitir cambiar el ID del registro en base de datos. Provocando la validaci\u00f3n \u00b6 Una vez que el modelo recibe los atributos (normalmente procedentes del usuario por medio de un formulario) la validaci\u00f3n se puede desencadenar invocando el m\u00e9todo CModel::validate() . Retornar\u00e1 true o false en funci\u00f3n del resultado. En los modelos tipo CActiveRecord de forma predeterminada se desencadena tambi\u00e9n al invocar el m\u00e9todo save() . Antes de invocar la validaci\u00f3n se puede indicar el escenario (ajustando la propiedad scenario del modelo) para elegir el conjunto de reglas de validaci\u00f3n que se desean. Una vez que la validaci\u00f3n se ha hecho, los posibles errores se almacenan en el propio modelo. Se pueden obtener con las funciones CModel::getErrors() (devuelve todos los errores) y CModel::getError() (devuelve s\u00f3lo el primero). Recogiendo varios modelos a la vez \u00b6 Para recoger varios modelos o registros de un tipo simult\u00e1neamente (o entrada tabular) necesitamos crear o rellenar un array de instancias del modelo, dependiendo de si queremos insertar o modificar registros. Luego recogeremos los datos de entrada del usuario de la variable $_POST y los asignaremos a cada modelo. Cuando recog\u00edamos un solo modelo hac\u00edamos $_POST[<clase_modelo>] , ahora haremos $_POST[<clase_modelo>][$i] . El action de modificaci\u00f3n tendr\u00e1 el siguiente aspecto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 <?php public function actionBatchUpdate () { // retrieve items to be updated in a batch mode // assuming each item is of model class 'Item' $items = $this -> getItemsToUpdate (); if ( isset ( $_POST [ 'Item' ])) { $valid = true ; foreach ( $items as $i => $item ) { if ( isset ( $_POST [ 'Item' ][ $i ])) $item -> attributes = $_POST [ 'Item' ][ $i ]; $valid = $item -> validate () && $valid ; } if ( $valid ) // all items are valid // ...do something here } // displays the view to collect tabular input $this -> render ( 'batchUpdate' , array ( 'items' => $items )); } y la vista incluir\u00e1 algo como: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 <div class=\"form\"> <?php echo CHtml :: beginForm (); ?> <table> <tr><th>Name</th><th>Price</th><th>Count</th><th>Description</th></tr> <?php foreach ( $items as $i => $item ) : ?> <tr> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]name\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]price\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]count\" ); ?> </td> <td> <?php echo CHtml :: activeTextArea ( $item , \"[ $i ]description\" ); ?> </td> </tr> <?php endforeach ; ?> </table> <?php echo CHtml :: submitButton ( 'Save' ); ?> <?php echo CHtml :: endForm (); ?> </div><!-- form --> Form Builder \u00b6 Yii incluye un sistema de generaci\u00f3n de formularios din\u00e1mico. Se basa en el objeto CForm . El uso se basa en crear el objeto, pasarle un array de configuraci\u00f3n (se suele mantener en un fichero aparte) y renderizarlo desde una vista. Si se definen formularios anidados (como se ve en la documentaci\u00f3n ), el formulario renderizado contendr\u00e1 \u00fanicamente una etiqueta form HTML dentro de la cual los campos se identificar\u00e1n con nombres tipo Model[atributo] , donde Model se corresponder\u00e1 con uno de los modelos asociados a uno de los sub-forms. Cuando se utiliza el Form Builder la asignaci\u00f3n de atributos del formulario al modelo se puede gestionar desde el propio objeto CForm. Para ello existe el m\u00e9todo loadData() . Esta carga se hace autom\u00e1ticamente cuando es necesario, como por ejemplo si invocamos el m\u00e9todo validate() de CForm que valida los modelos asociados. Documentaci\u00f3n completa aqu\u00ed . Base de Datos \u00b6 Objetos DAO \u00b6 El modelo de acceso a bases de datos de Yii se basa en los siguientes objetos: CDbConnection: Representa una conexi\u00f3n a una base de datos. Normalmente se configura como componente de la aplicaci\u00f3n. Es interesante aprovechar la funcionalidad de prefijo de tablas por medio de la propiedad CDbConnection::tablePrefix . Si se utiliza, luego en las consultas hay que indicar las tablas sin el prefijo (que queda configurado en esta propiedad) y entre dobles llaves (por ejemplo: {{usuario}}). CDbCommand: Representa una sentencia SQL para ejecutar contra una base de datos. Se puede crear mediante el m\u00e9todo createCommand() del objeto CDbConnection. Se ejecuta con los m\u00e9todos query() para selects y execute() para el resto. query() devuelve un CDbDataReader . Existen cuatro variantes de query() que devuelven datos directamente: queryAll(): Devuelve un array con todos los registros del resultado de la consulta. queryRow(): Devuelve el primer registro del resultado de la consulta. queryColumn(): Devuelve un array con el valor de la primera columna del resultado de la consulta. queryScalar(): Devuelve el primer campo del primer registro del resultado de la consulta. \u00datil para una consulta tipo count. CDbDataReader: Representa un conjunto de registros que se lee s\u00f3lo hacia adelante resultado de una consulta. Normalmente el objeto se recorre ejecutando sucesivamente el m\u00e9todo read() hasta que devuelve false . A continuaci\u00f3n se muestran tres formas de extraer los datos de CDbDataReader: 1 2 3 4 5 6 7 8 <?php $dataReader = $command -> query (); // calling read() repeatedly until it returns false while (( $row = $dataReader -> read ()) !== false ) { ... } // using foreach to traverse through every row of data foreach ( $dataReader as $row ) { ... } // retrieving all rows at once in a single array $rows = $dataReader -> readAll (); CDbTransaction: Representa una transacci\u00f3n en la base de datos. A continuaci\u00f3n se muestra una estructura t\u00edpica transaccional con este objeto: 1 2 3 4 5 6 7 8 9 10 11 <?php $transaction = $connection -> beginTransaction (); try { $connection -> createCommand ( $sql1 ) -> execute (); $connection -> createCommand ( $sql2 ) -> execute (); //.... other SQL executions $transaction -> commit (); } catch ( Exception $e ) { // an exception is raised if a query fails $transaction -> rollBack (); } Binding de par\u00e1metros \u00b6 Para evitar ataques de inyecci\u00f3n de SQL y para mejorar el rendimiento de consultas que se repiten habitualmente, se recomienda parametrizar las consultas con los m\u00e9todos CDbCommand::bindParam() y CDbCommand::bindValue() . Ejemplo: 1 2 3 4 5 6 7 8 9 10 11 <?php // una query con dos placeholders \":username\" and \":email\" $sql = \"INSERT INTO tbl_user (username, email) VALUES(:username,:email)\" ; $command = $connection -> createCommand ( $sql ); $command -> bindParam ( \":username\" , $username , PDO :: PARAM_STR ); // reemplaza el placeholder \":username\" con el valor de la variable $username $command -> bindParam ( \":email\" , $email , PDO :: PARAM_STR ); // reemplaza el placeholder \":email\" con el valor de la variable $email $command -> execute (); // inserta otra fila con un nuevo conjunto de valores $command -> bindParam ( \":username\" , $username2 , PDO :: PARAM_STR ); $command -> bindParam ( \":email\" , $email2 , PDO :: PARAM_STR ); $command -> execute (); Binding de variables \u00b6 Se pueden asociar variables PHP a columnas de una query de manera que tomen valor autom\u00e1ticamente cada vez que leamos el siguiente registro. Por ejemplo: 1 2 3 4 5 6 7 8 9 <?php $sql = \"SELECT username, email FROM tbl_user\" ; $dataReader = $connection -> createCommand ( $sql ) -> query (); $dataReader -> bindColumn ( 1 , $username ); // asocia la primera columna (username) con la variable $username $dataReader -> bindColumn ( 2 , $email ); // asocia la segunda columna (email) con la variable $email while ( $dataReader -> read () !== false ) { // $username y $email contienen los valores correspondientes a la fila en curso } Query Builder \u00b6 Existe un conjunto de herramientas para construir sentencias SQL de una manera orientada a objeto. Como ventajas, permite construir sentencias de forma program\u00e1tica, evita problemas de sintaxis o ambig\u00fcedades, previene ataques de inyecci\u00f3n de SQL al usar binding de par\u00e1metros y ofrece abstracci\u00f3n de base de datos lo que facilitar\u00eda una migraci\u00f3n m\u00e1s adelante. Consultar la documentaci\u00f3n completa aqu\u00ed . Active Record \u00b6 Active Record (AR) es una popular t\u00e9cnica de mapeo Objeto-Relacional (ORM) que permite manipular una tabla de manera orientada a objeto. De forma din\u00e1mica se genera una entidad modelo a partir de una tabla con pr\u00e1cticamente nada de c\u00f3digo. Se recomienda que todos los nombres de los campos de las tablas est\u00e9n en min\u00fasculas para no tener problemas con el cambio de gestor de base de datos, ya que algunos son sensibles a may\u00fasculas y otros no. Creando registros \u00b6 Simplemente creando un objeto AR, asignando valores a sus propiedades y llamando al m\u00e9todo CActiveRecord::save() . Para asignar expresiones SQL a algunos de los campos o propiedades de los objetos AR, hay que utilizar el objero CDbExpression , por ejemplo: 1 2 3 4 <?php $post = new Post ; $post -> create_time = new CDbExpression ( 'NOW()' ); // $post->create_time='NOW()'; no funcionar\u00eda porque 'NOW()' ser\u00eda tratado como cadena $post -> save (); Recuperando registros \u00b6 Para recuperar un solo registro tenemos los m\u00e9todos: 1 2 3 4 5 <?php $post = Post :: model () -> find ( $condition , $params ); // encuentra la primera fila que satisface la condici\u00f3n especificada $post = Post :: model () -> findByPk ( $postID , $condition , $params ); // encuentra la fila con el primary key especificado $post = Post :: model () -> findByAttributes ( $attributes , $condition , $params ); // encuentra la fila con los valores de los atributos especificados $post = Post :: model () -> findBySql ( $sql , $params ); // encuentra la primera fila usando la SQL especificada Si no se encuentra ning\u00fan registro, el resultado ser\u00e1 null . Para recuperar varios registros tenemos los m\u00e9todos: 1 2 3 4 5 <?php $posts = Post :: model () -> findAll ( $condition , $params ); // encuentra todas las filas que satisfacen la condici\u00f3n especificada $posts = Post :: model () -> findAllByPk ( $postIDs , $condition , $params ); // encuentra todas las filas con el primary key especificado $posts = Post :: model () -> findAllByAttributes ( $attributes , $condition , $params ); // encuentra todas las filas con los valores de los atributos especificados $posts = Post :: model () -> findAllBySql ( $sql , $params ); // encuentra todas las filas usando la SQL especificada Adicionalmente existen los siguientes m\u00e9todos: 1 2 3 4 <?php $n = Post :: model () -> count ( $condition , $params ); // obtiene el n\u00famero de filas que satisfacen la condici\u00f3n especificada $n = Post :: model () -> countBySql ( $sql , $params ); // obtiene el n\u00famero de filas que se obtendr\u00edan con las SQL especificada $exists = Post :: model () -> exists ( $condition , $params ); // comprueba si existe al menos una fila que satisface la condici\u00f3n especificada En todos los casos, en lugar de la pareja de strings $condition y $params , podemos entregar un objeto de tipo CDbCriteria m\u00e1s cosas adem\u00e1s de una cl\u00e1usula WHERE. Alternativamente a pasar un CDbCriteria podemos pasar un array con las propiedades de permitan construir este objeto din\u00e1micamente. Actualizando registros \u00b6 Modificando un AR reci\u00e9n obtenido y guardando se producir\u00e1 una actualizaci\u00f3n en base de datos: 1 2 3 4 <?php $post = Post :: model () -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); // guarda el cambio en la base de datos Cuando se guarda (m\u00e9todo save() ) se invoca autom\u00e1ticamente la validaci\u00f3n (a no ser que se pase el argumento false). Si el registro es nuevo se har\u00e1 un insert en lugar de un update. Se puede interrogar al modelo si estamos en uno u otro caso por medio del m\u00e9todo CActiveRecord::isNewRecord() . Se puede actualizar un AR que no se haya cargado previamente con los siguientes m\u00e9todos: 1 2 3 4 <?php Post :: model () -> updateAll ( $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n especificada Post :: model () -> updateByPk ( $pk , $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n y la primary key especificadas Post :: model () -> updateCounters ( $counters , $condition , $params ); // actualiza las columnas tipo counter en las filas que satisfacen la condici\u00f3n especificada Borrando registros \u00b6 Para borrar un solo registro utilizar el m\u00e9todo delete() sobre una instancia AR obtenida previamente: 1 2 3 <?php $post = Post :: model () -> findByPk ( 10 ); // localizamos el registro $post -> delete (); // lo borramos. El objeto $post seguir\u00e1 existiendo, pero el registro en base de datos no Tambi\u00e9n se pueden borrar registros sin cargarlos previamente con los siguientes m\u00e9todos: 1 2 3 <?php Post :: model () -> deleteAll ( $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada Post :: model () -> deleteByPk ( $pk , $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada y a la primary key Comparando registros \u00b6 Usar el m\u00e9todo CActiveRecord::equals() . Adaptaci\u00f3n de datos \u00b6 CActiveRecord proporciona los siguientes m\u00e9todos para adaptar los datos que se intercambian entre modelo y base de datos en uno y otro sentido: beforeValidate y afterValidate: invocados antes y despu\u00e9s de que se efect\u00fae la validaci\u00f3n. beforeSave y afterSave: invocados antes y despu\u00e9s de que se guarde una instancia AR. beforeDelete y afterDelete: invocados antes y despu\u00e9s de que se borre una instancia AR. afterConstruct: invocado en cada instancia AR creada con el operador new . beforeFind: invocado antes de que un m\u00e9todo de b\u00fasqueda de AR se use para efectuar una consulta (por ejemplo find(), findAll()). afterFind: invocado despu\u00e9s de que cada instancia AR es creada como resultado de una b\u00fasqueda. Usando transacciones \u00b6 Cada instancia AR contiene una propiedad llamada dbConnection que soporta transacciones de la siguiente forma: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <?php $model = Post :: model (); $transaction = $model -> dbConnection -> beginTransaction (); try { // find y save son dos pasos entre los que puede interferir otra petici\u00f3n // encerraremos el intervalo entre ambas \u00f3rdenes en una transacci\u00f3n para asegurar consistencia e integridad $post = $model -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); $transaction -> commit (); } catch ( Exception $e ) { $transaction -> rollBack (); } Named scopes \u00b6 Un named scope representa un criterio de b\u00fasqueda al que le asignamos un nombre y que puede ser combinado con otros named scopes para refinar una b\u00fasqueda de AR's. Se declaran en el m\u00e9todo CActiveRecord::scopes() como pares nombre-criterio de filtrado. Por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <?php class Post extends CActiveRecord { //...... public function scopes () { return array ( 'published' => array ( 'condition' => 'status=1' , ), 'recently' => array ( 'order' => 'create_time DESC' , 'limit' => 5 , ), ); } } La declaraci\u00f3n de cada named scope se corresponde con un array que sirve para inicializar un objeto CDbCriteria. Una vez definidos se pueden combinar en las sentencias de b\u00fasqueda como por ejemplo: 1 2 <?php $posts = Post :: model () -> published () -> recently () -> findAll (); Deben usarse siempre sobre m\u00e9todos class-level, es decir partiendo de ModelName::model()-> , no directamente de ModelName:: . Si se quieren parametrizar hay que definirlos como m\u00e9todos class-level aut\u00f3nomos en lugar de configurarlos en el array de CActiveRecord::scopes . Por ejemplo para parametrizar el named scope recently definido previamente se har\u00eda: 1 2 3 4 5 6 7 8 <?php public function recently ( $limit = 5 ) { $this -> getDbCriteria () -> mergeWith ( array ( 'order' => 'create_time DESC' , 'limit' => $limit , )); return $this ; } Luego podr\u00edamos llamar: 1 2 <?php $posts = Post :: model () -> published () -> recently ( 3 ) -> findAll (); Se puede definir un named scope predeterminado. De esta forma ser\u00e1 aplicado autom\u00e1ticamente en todas las consultas. Para ello se define en el m\u00e9todo CActiveRecord::defaultScope sin darle nombre como s\u00ed hab\u00eda que hacer en CActiveRecord::scopes . Por ejemplo: 1 2 3 4 5 6 <?php public function defaultScope () { return array ( 'condition' => \"language='\" . Yii :: app () -> language . \"'\" , ); } ActiveRecord relacional \u00b6 Declaraci\u00f3n de relaciones \u00b6 Para ilustrar los ejemplos de esta secci\u00f3n se utilizar\u00e1 el siguiente modelo de datos: Las relaciones entre dos clases AR tienen que ver con la relaci\u00f3n entre las tablas en base de datos. En base de datos tendremos las relaciones: one-to-many: entre tbl_user y tbl_post por ejemplo. ono-to-one: entre tbl_user y tbl_profile por ejemplo. many-to-many: entre tbl_category y tbl_post por ejemplo. En el lado AR hay cuatro tipos posibles: BELONGS_TO: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces B belongs_to A. En el ejemplo A=tbl_user y B=tbl_post. HAS_MANY: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces A has_many B. En el ejemplo A=tbl_user y B=tbl_post. HAS_ONE: Si la relaci\u00f3n entre las tablas A y B es ono-to-one. Es un caso especial de HAS_MANY en el que A tiene al menos un B. En el ejemplo A=tbl_user y B=tbl_profile. MANY_MANY: Si la relaci\u00f3n entre las tablas A y B es many-to-many. Se necesita una tabla intermedia que descomponga la relaci\u00f3n en dos relaciones 1:n con la tabla intermedia (C). En el ejemplo A=tbl_post, B=tbl_category y C=tbl_post_category. Estas relaciones se declaran en el m\u00e9todo CActiveRecord::relations() definiendo un array en el que cada elemento representa una relaci\u00f3n de la siguiente forma: 1 2 <?php 'VarName' => array ( 'RelationType' , 'ClassName' , 'ForeignKey' , ... opciones adicionales ) donde VarName es el nombre de la relaci\u00f3n, RelationType indica el tipo de relaci\u00f3n (se pueden aprovechar las siguientes constantes: self::BELONGS_TO , self::HAS_ONE , self::HAS_MANY y self::MANY_MANY ), ClassName es el nombre de la clase AR con que se est\u00e1 estableciendo la relaci\u00f3n y ForeignKey indica la foreign key implicada en la relaci\u00f3n. Las opciones adicionales se explicar\u00e1n en la secci\u00f3n Opciones de consultas relacionales . A continuaci\u00f3n se definen las relaciones en los modelos User y Post: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <?php class Post extends CActiveRecord { //...... public function relations () { return array ( 'author' => array ( self :: BELONGS_TO , 'User' , 'author_id' ), 'categories' => array ( self :: MANY_MANY , 'Category' , 'tbl_post_category(post_id, category_id)' ), ); } } class User extends CActiveRecord { //...... public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } } Consultas relacionales \u00b6 Por defecto se aplica el sistema lazy loading en los campos de un modelo que se refieren a una relaci\u00f3n. Para forzar un eager loading hay que preceder los m\u00e9todos de b\u00fasqueda con el m\u00e9todo with() . Por ejemplo: 1 2 <?php $posts = Post :: model () -> with ( 'author' ) -> findAll (); Se pueden especificar varios nombres de relaciones separados por comas en el m\u00e9todo with() o pasarle un CDbCriteria::with al m\u00e9todo de b\u00fasqueda. Por ejemplo: 1 2 3 4 5 6 7 8 <?php $criteria = new CDbCriteria ; $criteria -> with = array ( 'author.profile' , 'author.posts' , 'categories' , ); $posts = Post :: model () -> findAll ( $criteria ); Consultas relacionales sin obtener los modelos relacionados \u00b6 En ocasiones nos interesa hacer una consulta usando una relaci\u00f3n pero no queremos los datos de los propios modelos relacionados. Por ejemplo si quisi\u00e9ramos los usuarios que tienen post's en estado published=1, pero no los post's en s\u00ed, podr\u00edamos hacer lo siguiente: 1 2 3 4 5 6 7 8 <?php $users = User :: model () -> with ( array ( 'posts' => array ( 'select' => false , 'joinType' => 'INNER JOIN' , 'condition' => 'posts.published=1' , ), )) -> findAll (); Opciones de consultas relacionales \u00b6 Las opciones adicionales que se pueden indicar cuando se definen las relaciones que se mencionaban en el apartado Declaraci\u00f3n de relaciones son las siguientes (consultar su funcionamiento en la documentaci\u00f3n oficial ): select condition params on order with joinType alias together join group having index scopes Adicionalmente las siguientes opciones est\u00e1n disponibles para ciertas relaciones durante el lazy loading (consultar su funcionamiento en la documentaci\u00f3n oficial ): limit offset through Ejemplo de uso: 1 2 3 4 5 6 7 8 9 10 11 <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'order' => 'posts.create_time DESC' , 'with' => 'categories' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } } Desambiguaci\u00f3n de columnas \u00b6 En una consulta relacional con AR, el alias para la tabla primaria es t , mientras que el alias de la tabla relacionada se corresponde con el nombre de la relaci\u00f3n. Por ejemplo: 1 2 3 4 <?php $posts = Post :: model () -> with ( 'comments' ) -> findAll ( array ( 'order' => 't.create_time, comments.create_time' )); Opciones din\u00e1micas en consultas relacionales \u00b6 Se pueden sobreescribir las opciones que se definen en las relaciones indicando otras mediante el m\u00e9todo with() o con la opci\u00f3n adicional with . Rendimiento de consultas relacionales \u00b6 Existe una opci\u00f3n que permite elegir entre dos m\u00e9todos para realizar consultas eager loading . Se trata de la opci\u00f3n together que determina si se realizar\u00e1 una \u00fanica consulta con el join de las tablas relacionadas (m\u00e1s rendimiento) o una consulta por cada tabla (menos informaci\u00f3n redundante). Consultar documentaci\u00f3n completa . Consulta estad\u00edstica \u00b6 Existe un tipo de relaci\u00f3n especializado en obtener datos estad\u00edsticos entre tablas. S\u00f3lo se puede aplicar sobre tablas relacionadas con HAS_MANY y MANY_MANY y el tipo de relaci\u00f3n se designa con self::STAT . Por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 <?php class Post extends CActiveRecord { public function relations () { return array ( 'commentCount' => array ( self :: STAT , 'Comment' , 'post_id' ), 'categoryCount' => array ( self :: STAT , 'Category' , 'post_category(post_id, category_id)' ), ); } } Por defecto la consulta estad\u00edstica consistir\u00e1 en un COUNT , pero podemos realizar ajustes con las siguientes opciones adicionales al definir la relaci\u00f3n: select : la expresi\u00f3n estad\u00edstica. Por defecto es COUNT(*) , lo que realiza un conteo de los objetos hijos. defaultValue : el valor que se asignar\u00e1 a los registros que no reciban un resultado de la consulta estad\u00edstica. Por ejemplo, si un post no tiene comentarios, commentCount recibir\u00e1 este valor. Por defecto vale 0. condition : la cl\u00e1usula WHERE. Su valor por defecto es vac\u00edo. params : los par\u00e1metros a asociar a la sentencia SQL generada. Debe ser un array de parejas clave-valor. order : la cl\u00e1usula ORDER. Su valor por defecto es vac\u00edo. group : la cl\u00e1usula GROUP BY. Su valor por defecto es vac\u00edo. having : la cl\u00e1usula HAVING. Su valor por defecto es vac\u00edo. Consulta relacional con named scopes \u00b6 Se pueden combinar las consultas relacionales con los named scopes aplicando estos \u00faltimos tanto sobre la tabla principal como sobre las relacionadas. En el primer caso se har\u00eda combinando named scopes y consulta relacional en cadena de la siguiente forma: 1 2 <?php $posts = Post :: model () -> published () -> recently () -> with ( 'comments' ) -> findAll (); Aplicar named scopes a los modelos relacionados se hace indicandolos detr\u00e1s de la relaci\u00f3n separ\u00e1ndolos con \":\". Por ejemplo: 1 2 <?php $posts = Post :: model () -> with ( 'comments:recently:approved' ) -> findAll (); Los named scopes pueden forzarse en la propia declaraci\u00f3n de la relaci\u00f3n del siguiente modo: 1 2 3 4 5 6 7 8 9 <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'with' => 'comments:approved' ), ); } } Si los named scopes del objeto relacionados admiten par\u00e1metros, pueden pasarse en la consulta relacional de la siguiente forma: 1 2 3 4 5 6 7 8 9 10 <?php $users = User :: model () -> findAll ( array ( 'with' => array ( 'posts' => array ( 'scopes' => array ( 'rated' => 5 , ), ), ), )); Consulta relacional con through \u00b6 Se definen as\u00ed: 1 2 <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'key1' => 'key2' ), 'through' => 'posts' ) donde en array('key1'=>'key2'): key1 es una clave definida en la relaci\u00f3n especificada en through ( posts en este caso) key2 es una clave definida en el modelo al que esta relaci\u00f3n apunta ( Comment en este caso) through puede utilizarse en relaciones HAS_ONE y HAS_MANY . Para ilustrar el caso HAS_MANY se utilizar\u00e1 el siguiente modelo de datos: Por ejemplo, para obtener los usuarios de un grupo en concreto: 1 2 3 4 5 6 7 8 9 10 11 <?php class Group extends CActiveRecord { //... public function relations () { return array ( 'roles' => array ( self :: HAS_MANY , 'Role' , 'group_id' ), 'users' => array ( self :: HAS_MANY , 'User' , array ( 'user_id' => 'id' ), 'through' => 'roles' ), ); } } Un caso m\u00e1s complicado ser\u00eda obtener todos los comentarios de todos los usuarios de un grupo en concreto. Se lograr\u00eda a\u00f1adiendo a las relaciones anteriores la siguiente: 1 2 3 4 <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'id' => 'user_id' ), 'through' => 'users' ), Una variante del HAS_MANY through es cuando el modelo origen y destino es el mismo. Por ejemplo, dado el siguiente modelo de datos: Podr\u00edamos definir las siguientes relaciones: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <?php class User extends CActiveRecord { //... public function relations () { return array ( 'mentorships' => array ( self :: HAS_MANY , 'Mentorship' , 'teacher_id' , 'joinType' => 'INNER JOIN' ), 'students' => array ( self :: HAS_MANY , 'User' , array ( 'student_id' => 'id' ), 'through' => 'mentorships' , 'joinType' => 'INNER JOIN' ), ); } } De manera que podr\u00edamos obtener los alumnos que son ense\u00f1ados por un profesor (alumnos y profesor son ambos usuarios): 1 2 3 <?php $teacher = User :: model () -> findByPk ( 1 ); $students = $teacher -> students ; Para ilustrar el caso de HAS_ONE through nos basaremos en: Por ejemplo, obtener la direcci\u00f3n de un usuario cuando \u00e9sta est\u00e1 relacionada con el usuario por medio de un profile: 1 2 3 4 5 6 7 8 9 10 11 <?php class User extends CActiveRecord { //... public function relations () { return array ( 'profile' => array ( self :: HAS_ONE , 'Profile' , 'user_id' ), 'address' => array ( self :: HAS_ONE , 'Address' , array ( 'id' => 'profile_id' ), 'through' => 'profile' ), ); } } Tabla de relaci\u00f3n MANY_MANY con datos adicionales \u00b6 Para el caso en que la tabla intermedia que desarrolla una relaci\u00f3n MANY_MANY entre otras dos tablas contenga campos con informaci\u00f3n adicional a los dos foreign keys que apuntan a las dos tablas, seguir este art\u00edculo del wiki y \u00e9ste del foro (ignorar las respuestas m\u00e1s viejas que son de cuando no exist\u00eda el mecanismo through ). Cosas interesantes \u00b6 Application Singleton \u00b6 Yii:app() Sirve como almac\u00e9n central de ajustes de configuraci\u00f3n a nivel de aplicaci\u00f3n ( fuente ). A\u00f1adir jQuery \u00b6 A\u00f1adir jQuery a una p\u00e1gina. C\u00f3digo visto en un action, pero tambi\u00e9n se podr\u00eda insertar directamente en la vista en que vaya a ser necesario: 1 2 3 <?php // Adding jQuery to the view page. Yii :: app () -> getClientScript () -> registerCoreScript ( 'jquery' ); Filtrado referido en BootGridView o CGridView \u00b6 Imaginemos el modelo empleado asociado en n:1 al modelo departamento. En el listado de empleados queremos mostrar el departamento al que pertenece y poder filtrar por el nombre del mismo (no por el ID de departamento como ocurrir\u00eda si indic\u00e1ramos el campo departamento_id que pertenece a empleado). Ver ejemplo en el filtrado del campo xproduct.product en admin.php del modelo Product en R135 del repositorio svn+ssh://edumoreno@192.168.2.250/var/lib/subversion/gestoo/trunk .","title":"Yii"},{"location":"desarrollo/yii.html#yii-framework","text":"","title":"Yii Framework"},{"location":"desarrollo/yii.html#enlaces","text":"A probar cuando tenga un error :exclamation: Creating a dependent dropdown Search() & Filter of a relations field through CGridView Handling Related Models in Yii Forms Learning Yii Framework Series Yii for beginners How to Change datetime format displayed on the View Tabla Master Detail en Yii GridView de Yii Framework Dynamic parent and child CGridCiew on single view. Using $.ajax to update child gridview via controller (with MANY_MANY relation), after row in parent gridview was clicked Search CGridView, related tables, dates and datepicker Yii Framework en Espa\u00f1ol - Foro Multimodelform dropdown con Ajax Ejecutar acci\u00f3n en multimodelform con dropdown Usando Ajax en Yii, Facil Class Level Methods vs Static Methods Accessing data in a join table with the related models (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Selecting join table with mant to many? (tabla intermedia en relaci\u00f3n many_many con informaci\u00f3n adicional) Special $variables in CGridView and CListView Custom Page Size for CGridView Using CButtonColumn to customize buttons in CGridView Understanding Virtual Attributes and get/set methods :exclamation: Using standard filters in CGridView custom fields Searching and sorting by related model in CGridView :exclamation: Reference: Model rules validation :exclamation: Displaying, sorting and filtering HasMany & ManyMany relations in CGridView :exclamation: Tutorial Yii Framework 1. INSTALANDO YII Y PRIMERA APLICACI\u00d3N 2. CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS 3. LENGUAJE Y VISTA POR DEFECTO 4. MODIFICANDO EL MEN\u00da 5. AUTENTICACI\u00d3N DE USUARIOS 6. CLAVES FOR\u00c1NEAS EN VISTAS 7. VALIDANDO LOS FORMULARIOS 8. ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID 9. FECHAS CON CJUIDATEPICKER 10. B\u00daSQUEDAS POR FECHAS CON SYDATECOLUMN 11. EXPORTAR DEL CGRIDVIEW A PDF 12. REPORTES A PARTIR DE UNA B\u00daSQUEDA EN EL GRID 13. COMBOS DEPENDIENTES 14. CAMPO CON AUTOCOMPLETAR 15. NO MOSTRAR INDEX.PHP EN LAS URL 16. GUARDAR AUTOM\u00c1TICAMENTE USUARIO Y FECHA DE CREACI\u00d3N Y MODIFICACI\u00d3N 17. HACER FORMULARIO PARA MULTIPLES MODELOS 18. CAMPOS ENMASCARADOS EN FORMULARIO","title":"Enlaces"},{"location":"desarrollo/yii.html#extensiones","text":"bootstrap : Bootstrap brings together Yii and Bootstrap, Twitter's HTML, CSS and JavaScript toolkit. eupdatedialog : EUpdateDialog is an extension for Yii framework that allows to run controller actions using jQuery UI dialog. multimodelform : This extension allows to work with multiple records and different models in a edit form. enexmo : ENexmo Library allows Yii programmers to use the Restful API offered by Mobile Messaging provider Nexmo . ejuitimepicker : This extension is a wrapper for Timepicker addon which adds a timepicker to jQuery UI Datepicker. datetimepicker : Datetime picker input widget, based on Jui-timepicker-addon. Envio email con Emailer A module to build dependents dropdown save-relations-ar-behavior : Save HasMany and ManyMany relational active records along with the main model.","title":"Extensiones"},{"location":"desarrollo/yii.html#know-how","text":"","title":"Know How"},{"location":"desarrollo/yii.html#instalacion","text":"","title":"Instalaci\u00f3n"},{"location":"desarrollo/yii.html#apache","text":"Para ocultar el script de inicio ( index.php ) de la URL se puede configurar un fichero .htaccess como sigue: 1 2 3 4 5 6 7 RewriteEngine on # if a directory or a file exists, use it directly RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d # otherwise forward it to index.php RewriteRule . index.php","title":"Apache"},{"location":"desarrollo/yii.html#fundamentos","text":"","title":"Fundamentos"},{"location":"desarrollo/yii.html#development-mode","text":"En el fichero index.php el modo DEBUG se ajusta en la linea siguiente: 1 2 <?php defined ( 'YII_DEBUG' ) or define ( 'YII_DEBUG' , true ); Ponerlo a false en Producci\u00f3n ( fuente ). El componente log admite como una de las rutas de log la clase CWebLogRoute que muestra un log detallado de la ejecuci\u00f3n de la p\u00e1gina en la parte inferior de la misma. Para activarlo incluir la clase en el array de routes del componente log , por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 12 13 <?php 'log' => array ( 'class' => 'CLogRouter' , 'routes' => array ( array ( 'class' => 'CFileLogRoute' , 'levels' => 'error, warning' , ), array ( 'class' => 'CWebLogRoute' , ), ), ), Cuando el desarrollo est\u00e9 avanzado o al menos en una fase en la que no se esperen muchos cambios en el esquema de base de datos, se puede mejorar la velocidad del componente db dando un valor mayor que 0 a la propiedad CDbConnection::schemaCachingDuration ( fuente ). Desactivar el m\u00f3dulo gii en el fichero de configuraci\u00f3n cuando la aplicaci\u00f3n est\u00e9 en Producci\u00f3n. Poner a false el par\u00e1metro enableParamLogging del componente db en el fichero de configuraci\u00f3n de la aplicaci\u00f3n.","title":"Development mode"},{"location":"desarrollo/yii.html#application","text":"Si no se especifica, el controlador predeterminado de una aplicaci\u00f3n se llama \"site\" (SiteController), pero se puede especificar as\u00ed en el fichero de configuraci\u00f3n de la aplicaci\u00f3n ( fuente ): 1 2 3 4 <?php array ( 'defaultController' => 'site' , ) Los componentes de aplicaci\u00f3n se activan por defecto si son definidos en el fichero de configuraci\u00f3n de la aplicaci\u00f3n, pero pueden ser desactivados asignando false al atributo enabled ( fuente ). Los componentes de aplicaci\u00f3n se suelen incorporar de un paquete incluido con la instalaci\u00f3n de Yii. La lista completa de componentes de aplicaci\u00f3n de Yii puede consultarse aqu\u00ed . La aplicaci\u00f3n genera un log en <AppRoot>/protected/runtime/application.log .","title":"Application"},{"location":"desarrollo/yii.html#controller","text":"Si no se especifica la acci\u00f3n a ejecutar de un controller, se ejecuta la acci\u00f3n predeterminada que es index . Puede cambiarse ajustando la variable de instancia p\u00fablica CController:defaultAction ( fuente ). La ruta de los controllers es relativa al directorio <AppRoot>/protected/controllers ( fuente ). Si la aplicaci\u00f3n est\u00e1 organizada en m\u00f3dulos, la ruta completa de las acciones ser\u00e1 del estilo moduleID/controllerID/actionID ( fuente ). La instanciaci\u00f3n de controllers sigue esta secuencia ( fuente ): Si se ha especificado CWebApplication::catchAllRequest (se usa normalmente para poner la aplicaci\u00f3n en modo mantenimiento). Si el ID del controller se encuentra en el mapa definido en CWebApplication::controllerMap . Finalmente se utiliza la convenci\u00f3n comentada anteriormente que enlaza el ID del controller con las clases del directorio <AppRoot>/protected/controllers . Las acciones se pueden escribir como clases aut\u00f3nomas en lugar de como m\u00e9todos de un controller ( fuente ). Los filtros se pueden definir como m\u00e9todos de los controllers en cuyo caso deben empezar por filter o como clases independientes descendientes de CFilter ( fuente ). Los filtros se pueden mapear en la funci\u00f3n filters() de los controllers. Se pueden definir listas negras y listas blancas de acciones sobre las que se aplicar\u00e1 la lista de filtros ( fuente ).","title":"Controller"},{"location":"desarrollo/yii.html#view","text":"La ruta de las vistas es relativa al directorio <AppRoot>/protected/views ( fuente ). Dentro de las vistas se puede acceder al controller mediante $this . Adicionalmente se pueden pasar variables concretas desde el controller al invocar la vista de la siguiente manera: 1 2 3 4 5 <?php $this -> render ( 'edit' , array ( 'var1' => $value1 , 'var2' => $value2 , )); Por defecto se aplica a las vistas el layout definido en <AppRoot>/protected/views/layouts/main.php . Esto puede cambiarse a nivel de aplicaci\u00f3n en CWebApplication::layout o a nivel de controller en CController::layout . Si se quiere renderizar una vista sin aplicar layout, en lugar del m\u00e9todo CController::render() hay que invocar CController:renderPartial() ( fuente ).","title":"View"},{"location":"desarrollo/yii.html#component","text":"Los componentes se utilizan para encapsular funcionalidad. Soportan propiedades, eventos y behaviors. Estos \u00faltimos se utilizan para implementar herencia m\u00faltiple ( fuente ).","title":"Component"},{"location":"desarrollo/yii.html#module","text":"Un m\u00f3dulo es una unidad de c\u00f3digo autocontenida que engloba modelos, vistas, controllers y componentes. Es en cierto modo una aplicaci\u00f3n, s\u00f3lo que no puede ser desplegada por separado. Los m\u00f3dulos se pueden anidar en varios niveles. De la misma forma que una aplicaci\u00f3n puede contener m\u00f3dulos, \u00e9stos pueden contener a su vez otros m\u00f3dulos. Se configuran de la misma forma con el fichero de configuraci\u00f3n de la aplicaci\u00f3n, indicando la propiedad modules en el m\u00f3dulo contenedor.","title":"Module"},{"location":"desarrollo/yii.html#path-alias-e-importacion-de-clases","text":"De forma predeterminada est\u00e1n definidos los siguientes path alias: system: <YiiRoot>/framework zii: <YiiRoot>/framework/zii application: <AppRoot>/protected webroot: <AppRoot> ext: <AppRoot>/protected/extensions Para importar clases mejor utilizar Yii:import('path_alias_de_la_clase') que el include , require o require_once de PHP ( fuente ). Se pueden importar todas las clases de un directorio en bloque con una orden del estilo Yii:import('path_alias_del_directorio.*') . Las clases del propio framework est\u00e1n pre-importadas, por lo que no es necesario hacerlo.","title":"Path Alias e importaci\u00f3n de clases"},{"location":"desarrollo/yii.html#convenciones","text":"","title":"Convenciones"},{"location":"desarrollo/yii.html#del-framework","text":"Si no se especifica en la URL el ID del action se ejecutar\u00e1 el action predeterminada. Si no se cambia (con CController::defaultAction ) se ejecutar\u00e1 el action index . Si no se especifica en la URL el ID del controller se ejecutar\u00e1 el controller predeterminado. Si no se cambia (con CWebApplication::defaultController ) se ejecutar\u00e1 el controller site .","title":"Del framework"},{"location":"desarrollo/yii.html#nomenclatura-para-codigo","text":"Utilizar notaci\u00f3n camelCase. Comenzar las clases con una letra may\u00fascula. La letra C se usa en las clases del framework => Se recomienda utilizar otra ( T por ejemplo). Comenzar las variables privadas de clase con underscore. Terminar las clases controller con Controller . Dentro de una clase controller, los m\u00e9todos de action comenzarlos con action . Terminar las clases de action con Action .","title":"Nomenclatura para c\u00f3digo"},{"location":"desarrollo/yii.html#nomenclatura-para-bases-de-datos","text":"Nombres de tablas y campos en min\u00fasculas. Palabras separadas con underscore (por ejemplo: direccion_cliente). Nombres de tablas en singular. Nombres de tablas con prefijo propio de la aplicaci\u00f3n (por ejemplo: gestoo_clientes).","title":"Nomenclatura para bases de datos"},{"location":"desarrollo/yii.html#formularios","text":"","title":"Formularios"},{"location":"desarrollo/yii.html#creando-el-modelo","text":"","title":"Creando el Modelo"},{"location":"desarrollo/yii.html#validacion","text":"Las reglas de validaci\u00f3n se definen en la funci\u00f3n rules() del Model componiendo un array en el que cada elemento se define como sigue: 1 2 <?php array ( 'ListaAtributos' , 'Validador' , 'on' => 'ListaEscenarios' , ... opciones adicionales ) donde ListaAtributos es una lista separada por comas de nombres de atributos del Model; Validador especifica el tipo de validaci\u00f3n; el par\u00e1metro on es opcional y especifica la lista de escenarios en las que se aplica la regla; las opciones adicionales son pares clave-valor para inicializar propiedades de los validadores usados. Hay tres tipos de validadores: Validador puede ser el nombre de un m\u00e9todo de la clase Modelo. El m\u00e9todo tiene que tener la siguiente forma: 1 2 3 4 5 6 <?php /** * @param string $attribute the name of the attribute to be validated * @param array $params options specified in the validation rule */ public function ValidatorName ( $attribute , $params ) { ... } Validador puede ser el nombre de una clase de validaci\u00f3n. En este caso cuando la regla es aplicada, una instancia de la clase de validaci\u00f3n se crea y se inicializa con las opciones adicionales. La clase de validaci\u00f3n debe extender de CValidator . Validador puede ser una de las clases de validaci\u00f3n predefinidas en Yii ( lista ).","title":"Validaci\u00f3n"},{"location":"desarrollo/yii.html#asignacion-de-atributos","text":"Las asignaciones de atributos entre formulario y modelo se pueden hacer en bloque por medio de la funci\u00f3n de PHP $_POST[<clase_modelo>] . S\u00f3lo se asignan los atributos considerados seguros, es decir los que tienen asociada una regla de validaci\u00f3n. Hay que tener en cuenta que las reglas de validaci\u00f3n se pueden asociar a escenarios por lo que se asignar\u00e1n unos atributos u otros seg\u00fan el escenario declarado al instanciar el modelo. Por ejemplo: 1 2 3 4 5 6 7 8 9 10 <?php // en escenario login $model = new User ( 'login' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; // en escenario register $model = new User ( 'register' ); if ( isset ( $_POST [ 'User' ])) $model -> attributes = $_POST [ 'User' ]; Es importante recordar que las reglas de validaci\u00f3n se usan para chequear los datos introducidos por los usuarios y no los datos generados por c\u00f3digo (timestamps o primary keys). Por lo tanto no hay que definir reglas de validaci\u00f3n en los atributos que no esperamos que sean introducidos por el usuario . Por ejemplo, si marcamos como seguro el atributo id de un modelo (por medio del validador safe por ejemplo), aunque inicialmente no incluyamos el campo en el formulario, un atacante podr\u00eda enviarlo y la asignaci\u00f3n en bloque sobre el modelo lo incluir\u00eda y podr\u00eda permitir cambiar el ID del registro en base de datos.","title":"Asignaci\u00f3n de atributos"},{"location":"desarrollo/yii.html#provocando-la-validacion","text":"Una vez que el modelo recibe los atributos (normalmente procedentes del usuario por medio de un formulario) la validaci\u00f3n se puede desencadenar invocando el m\u00e9todo CModel::validate() . Retornar\u00e1 true o false en funci\u00f3n del resultado. En los modelos tipo CActiveRecord de forma predeterminada se desencadena tambi\u00e9n al invocar el m\u00e9todo save() . Antes de invocar la validaci\u00f3n se puede indicar el escenario (ajustando la propiedad scenario del modelo) para elegir el conjunto de reglas de validaci\u00f3n que se desean. Una vez que la validaci\u00f3n se ha hecho, los posibles errores se almacenan en el propio modelo. Se pueden obtener con las funciones CModel::getErrors() (devuelve todos los errores) y CModel::getError() (devuelve s\u00f3lo el primero).","title":"Provocando la validaci\u00f3n"},{"location":"desarrollo/yii.html#recogiendo-varios-modelos-a-la-vez","text":"Para recoger varios modelos o registros de un tipo simult\u00e1neamente (o entrada tabular) necesitamos crear o rellenar un array de instancias del modelo, dependiendo de si queremos insertar o modificar registros. Luego recogeremos los datos de entrada del usuario de la variable $_POST y los asignaremos a cada modelo. Cuando recog\u00edamos un solo modelo hac\u00edamos $_POST[<clase_modelo>] , ahora haremos $_POST[<clase_modelo>][$i] . El action de modificaci\u00f3n tendr\u00e1 el siguiente aspecto: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 <?php public function actionBatchUpdate () { // retrieve items to be updated in a batch mode // assuming each item is of model class 'Item' $items = $this -> getItemsToUpdate (); if ( isset ( $_POST [ 'Item' ])) { $valid = true ; foreach ( $items as $i => $item ) { if ( isset ( $_POST [ 'Item' ][ $i ])) $item -> attributes = $_POST [ 'Item' ][ $i ]; $valid = $item -> validate () && $valid ; } if ( $valid ) // all items are valid // ...do something here } // displays the view to collect tabular input $this -> render ( 'batchUpdate' , array ( 'items' => $items )); } y la vista incluir\u00e1 algo como: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 <div class=\"form\"> <?php echo CHtml :: beginForm (); ?> <table> <tr><th>Name</th><th>Price</th><th>Count</th><th>Description</th></tr> <?php foreach ( $items as $i => $item ) : ?> <tr> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]name\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]price\" ); ?> </td> <td> <?php echo CHtml :: activeTextField ( $item , \"[ $i ]count\" ); ?> </td> <td> <?php echo CHtml :: activeTextArea ( $item , \"[ $i ]description\" ); ?> </td> </tr> <?php endforeach ; ?> </table> <?php echo CHtml :: submitButton ( 'Save' ); ?> <?php echo CHtml :: endForm (); ?> </div><!-- form -->","title":"Recogiendo varios modelos a la vez"},{"location":"desarrollo/yii.html#form-builder","text":"Yii incluye un sistema de generaci\u00f3n de formularios din\u00e1mico. Se basa en el objeto CForm . El uso se basa en crear el objeto, pasarle un array de configuraci\u00f3n (se suele mantener en un fichero aparte) y renderizarlo desde una vista. Si se definen formularios anidados (como se ve en la documentaci\u00f3n ), el formulario renderizado contendr\u00e1 \u00fanicamente una etiqueta form HTML dentro de la cual los campos se identificar\u00e1n con nombres tipo Model[atributo] , donde Model se corresponder\u00e1 con uno de los modelos asociados a uno de los sub-forms. Cuando se utiliza el Form Builder la asignaci\u00f3n de atributos del formulario al modelo se puede gestionar desde el propio objeto CForm. Para ello existe el m\u00e9todo loadData() . Esta carga se hace autom\u00e1ticamente cuando es necesario, como por ejemplo si invocamos el m\u00e9todo validate() de CForm que valida los modelos asociados. Documentaci\u00f3n completa aqu\u00ed .","title":"Form Builder"},{"location":"desarrollo/yii.html#base-de-datos","text":"","title":"Base de Datos"},{"location":"desarrollo/yii.html#objetos-dao","text":"El modelo de acceso a bases de datos de Yii se basa en los siguientes objetos: CDbConnection: Representa una conexi\u00f3n a una base de datos. Normalmente se configura como componente de la aplicaci\u00f3n. Es interesante aprovechar la funcionalidad de prefijo de tablas por medio de la propiedad CDbConnection::tablePrefix . Si se utiliza, luego en las consultas hay que indicar las tablas sin el prefijo (que queda configurado en esta propiedad) y entre dobles llaves (por ejemplo: {{usuario}}). CDbCommand: Representa una sentencia SQL para ejecutar contra una base de datos. Se puede crear mediante el m\u00e9todo createCommand() del objeto CDbConnection. Se ejecuta con los m\u00e9todos query() para selects y execute() para el resto. query() devuelve un CDbDataReader . Existen cuatro variantes de query() que devuelven datos directamente: queryAll(): Devuelve un array con todos los registros del resultado de la consulta. queryRow(): Devuelve el primer registro del resultado de la consulta. queryColumn(): Devuelve un array con el valor de la primera columna del resultado de la consulta. queryScalar(): Devuelve el primer campo del primer registro del resultado de la consulta. \u00datil para una consulta tipo count. CDbDataReader: Representa un conjunto de registros que se lee s\u00f3lo hacia adelante resultado de una consulta. Normalmente el objeto se recorre ejecutando sucesivamente el m\u00e9todo read() hasta que devuelve false . A continuaci\u00f3n se muestran tres formas de extraer los datos de CDbDataReader: 1 2 3 4 5 6 7 8 <?php $dataReader = $command -> query (); // calling read() repeatedly until it returns false while (( $row = $dataReader -> read ()) !== false ) { ... } // using foreach to traverse through every row of data foreach ( $dataReader as $row ) { ... } // retrieving all rows at once in a single array $rows = $dataReader -> readAll (); CDbTransaction: Representa una transacci\u00f3n en la base de datos. A continuaci\u00f3n se muestra una estructura t\u00edpica transaccional con este objeto: 1 2 3 4 5 6 7 8 9 10 11 <?php $transaction = $connection -> beginTransaction (); try { $connection -> createCommand ( $sql1 ) -> execute (); $connection -> createCommand ( $sql2 ) -> execute (); //.... other SQL executions $transaction -> commit (); } catch ( Exception $e ) { // an exception is raised if a query fails $transaction -> rollBack (); }","title":"Objetos DAO"},{"location":"desarrollo/yii.html#binding-de-parametros","text":"Para evitar ataques de inyecci\u00f3n de SQL y para mejorar el rendimiento de consultas que se repiten habitualmente, se recomienda parametrizar las consultas con los m\u00e9todos CDbCommand::bindParam() y CDbCommand::bindValue() . Ejemplo: 1 2 3 4 5 6 7 8 9 10 11 <?php // una query con dos placeholders \":username\" and \":email\" $sql = \"INSERT INTO tbl_user (username, email) VALUES(:username,:email)\" ; $command = $connection -> createCommand ( $sql ); $command -> bindParam ( \":username\" , $username , PDO :: PARAM_STR ); // reemplaza el placeholder \":username\" con el valor de la variable $username $command -> bindParam ( \":email\" , $email , PDO :: PARAM_STR ); // reemplaza el placeholder \":email\" con el valor de la variable $email $command -> execute (); // inserta otra fila con un nuevo conjunto de valores $command -> bindParam ( \":username\" , $username2 , PDO :: PARAM_STR ); $command -> bindParam ( \":email\" , $email2 , PDO :: PARAM_STR ); $command -> execute ();","title":"Binding de par\u00e1metros"},{"location":"desarrollo/yii.html#binding-de-variables","text":"Se pueden asociar variables PHP a columnas de una query de manera que tomen valor autom\u00e1ticamente cada vez que leamos el siguiente registro. Por ejemplo: 1 2 3 4 5 6 7 8 9 <?php $sql = \"SELECT username, email FROM tbl_user\" ; $dataReader = $connection -> createCommand ( $sql ) -> query (); $dataReader -> bindColumn ( 1 , $username ); // asocia la primera columna (username) con la variable $username $dataReader -> bindColumn ( 2 , $email ); // asocia la segunda columna (email) con la variable $email while ( $dataReader -> read () !== false ) { // $username y $email contienen los valores correspondientes a la fila en curso }","title":"Binding de variables"},{"location":"desarrollo/yii.html#query-builder","text":"Existe un conjunto de herramientas para construir sentencias SQL de una manera orientada a objeto. Como ventajas, permite construir sentencias de forma program\u00e1tica, evita problemas de sintaxis o ambig\u00fcedades, previene ataques de inyecci\u00f3n de SQL al usar binding de par\u00e1metros y ofrece abstracci\u00f3n de base de datos lo que facilitar\u00eda una migraci\u00f3n m\u00e1s adelante. Consultar la documentaci\u00f3n completa aqu\u00ed .","title":"Query Builder"},{"location":"desarrollo/yii.html#active-record","text":"Active Record (AR) es una popular t\u00e9cnica de mapeo Objeto-Relacional (ORM) que permite manipular una tabla de manera orientada a objeto. De forma din\u00e1mica se genera una entidad modelo a partir de una tabla con pr\u00e1cticamente nada de c\u00f3digo. Se recomienda que todos los nombres de los campos de las tablas est\u00e9n en min\u00fasculas para no tener problemas con el cambio de gestor de base de datos, ya que algunos son sensibles a may\u00fasculas y otros no.","title":"Active Record"},{"location":"desarrollo/yii.html#creando-registros","text":"Simplemente creando un objeto AR, asignando valores a sus propiedades y llamando al m\u00e9todo CActiveRecord::save() . Para asignar expresiones SQL a algunos de los campos o propiedades de los objetos AR, hay que utilizar el objero CDbExpression , por ejemplo: 1 2 3 4 <?php $post = new Post ; $post -> create_time = new CDbExpression ( 'NOW()' ); // $post->create_time='NOW()'; no funcionar\u00eda porque 'NOW()' ser\u00eda tratado como cadena $post -> save ();","title":"Creando registros"},{"location":"desarrollo/yii.html#recuperando-registros","text":"Para recuperar un solo registro tenemos los m\u00e9todos: 1 2 3 4 5 <?php $post = Post :: model () -> find ( $condition , $params ); // encuentra la primera fila que satisface la condici\u00f3n especificada $post = Post :: model () -> findByPk ( $postID , $condition , $params ); // encuentra la fila con el primary key especificado $post = Post :: model () -> findByAttributes ( $attributes , $condition , $params ); // encuentra la fila con los valores de los atributos especificados $post = Post :: model () -> findBySql ( $sql , $params ); // encuentra la primera fila usando la SQL especificada Si no se encuentra ning\u00fan registro, el resultado ser\u00e1 null . Para recuperar varios registros tenemos los m\u00e9todos: 1 2 3 4 5 <?php $posts = Post :: model () -> findAll ( $condition , $params ); // encuentra todas las filas que satisfacen la condici\u00f3n especificada $posts = Post :: model () -> findAllByPk ( $postIDs , $condition , $params ); // encuentra todas las filas con el primary key especificado $posts = Post :: model () -> findAllByAttributes ( $attributes , $condition , $params ); // encuentra todas las filas con los valores de los atributos especificados $posts = Post :: model () -> findAllBySql ( $sql , $params ); // encuentra todas las filas usando la SQL especificada Adicionalmente existen los siguientes m\u00e9todos: 1 2 3 4 <?php $n = Post :: model () -> count ( $condition , $params ); // obtiene el n\u00famero de filas que satisfacen la condici\u00f3n especificada $n = Post :: model () -> countBySql ( $sql , $params ); // obtiene el n\u00famero de filas que se obtendr\u00edan con las SQL especificada $exists = Post :: model () -> exists ( $condition , $params ); // comprueba si existe al menos una fila que satisface la condici\u00f3n especificada En todos los casos, en lugar de la pareja de strings $condition y $params , podemos entregar un objeto de tipo CDbCriteria m\u00e1s cosas adem\u00e1s de una cl\u00e1usula WHERE. Alternativamente a pasar un CDbCriteria podemos pasar un array con las propiedades de permitan construir este objeto din\u00e1micamente.","title":"Recuperando registros"},{"location":"desarrollo/yii.html#actualizando-registros","text":"Modificando un AR reci\u00e9n obtenido y guardando se producir\u00e1 una actualizaci\u00f3n en base de datos: 1 2 3 4 <?php $post = Post :: model () -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); // guarda el cambio en la base de datos Cuando se guarda (m\u00e9todo save() ) se invoca autom\u00e1ticamente la validaci\u00f3n (a no ser que se pase el argumento false). Si el registro es nuevo se har\u00e1 un insert en lugar de un update. Se puede interrogar al modelo si estamos en uno u otro caso por medio del m\u00e9todo CActiveRecord::isNewRecord() . Se puede actualizar un AR que no se haya cargado previamente con los siguientes m\u00e9todos: 1 2 3 4 <?php Post :: model () -> updateAll ( $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n especificada Post :: model () -> updateByPk ( $pk , $attributes , $condition , $params ); // actualiza las filas que satisfacen la condici\u00f3n y la primary key especificadas Post :: model () -> updateCounters ( $counters , $condition , $params ); // actualiza las columnas tipo counter en las filas que satisfacen la condici\u00f3n especificada","title":"Actualizando registros"},{"location":"desarrollo/yii.html#borrando-registros","text":"Para borrar un solo registro utilizar el m\u00e9todo delete() sobre una instancia AR obtenida previamente: 1 2 3 <?php $post = Post :: model () -> findByPk ( 10 ); // localizamos el registro $post -> delete (); // lo borramos. El objeto $post seguir\u00e1 existiendo, pero el registro en base de datos no Tambi\u00e9n se pueden borrar registros sin cargarlos previamente con los siguientes m\u00e9todos: 1 2 3 <?php Post :: model () -> deleteAll ( $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada Post :: model () -> deleteByPk ( $pk , $condition , $params ); // borra las filas que se ajusten a la condici\u00f3n especificada y a la primary key","title":"Borrando registros"},{"location":"desarrollo/yii.html#comparando-registros","text":"Usar el m\u00e9todo CActiveRecord::equals() .","title":"Comparando registros"},{"location":"desarrollo/yii.html#adaptacion-de-datos","text":"CActiveRecord proporciona los siguientes m\u00e9todos para adaptar los datos que se intercambian entre modelo y base de datos en uno y otro sentido: beforeValidate y afterValidate: invocados antes y despu\u00e9s de que se efect\u00fae la validaci\u00f3n. beforeSave y afterSave: invocados antes y despu\u00e9s de que se guarde una instancia AR. beforeDelete y afterDelete: invocados antes y despu\u00e9s de que se borre una instancia AR. afterConstruct: invocado en cada instancia AR creada con el operador new . beforeFind: invocado antes de que un m\u00e9todo de b\u00fasqueda de AR se use para efectuar una consulta (por ejemplo find(), findAll()). afterFind: invocado despu\u00e9s de que cada instancia AR es creada como resultado de una b\u00fasqueda.","title":"Adaptaci\u00f3n de datos"},{"location":"desarrollo/yii.html#usando-transacciones","text":"Cada instancia AR contiene una propiedad llamada dbConnection que soporta transacciones de la siguiente forma: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 <?php $model = Post :: model (); $transaction = $model -> dbConnection -> beginTransaction (); try { // find y save son dos pasos entre los que puede interferir otra petici\u00f3n // encerraremos el intervalo entre ambas \u00f3rdenes en una transacci\u00f3n para asegurar consistencia e integridad $post = $model -> findByPk ( 10 ); $post -> title = 'new post title' ; $post -> save (); $transaction -> commit (); } catch ( Exception $e ) { $transaction -> rollBack (); }","title":"Usando transacciones"},{"location":"desarrollo/yii.html#named-scopes","text":"Un named scope representa un criterio de b\u00fasqueda al que le asignamos un nombre y que puede ser combinado con otros named scopes para refinar una b\u00fasqueda de AR's. Se declaran en el m\u00e9todo CActiveRecord::scopes() como pares nombre-criterio de filtrado. Por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <?php class Post extends CActiveRecord { //...... public function scopes () { return array ( 'published' => array ( 'condition' => 'status=1' , ), 'recently' => array ( 'order' => 'create_time DESC' , 'limit' => 5 , ), ); } } La declaraci\u00f3n de cada named scope se corresponde con un array que sirve para inicializar un objeto CDbCriteria. Una vez definidos se pueden combinar en las sentencias de b\u00fasqueda como por ejemplo: 1 2 <?php $posts = Post :: model () -> published () -> recently () -> findAll (); Deben usarse siempre sobre m\u00e9todos class-level, es decir partiendo de ModelName::model()-> , no directamente de ModelName:: . Si se quieren parametrizar hay que definirlos como m\u00e9todos class-level aut\u00f3nomos en lugar de configurarlos en el array de CActiveRecord::scopes . Por ejemplo para parametrizar el named scope recently definido previamente se har\u00eda: 1 2 3 4 5 6 7 8 <?php public function recently ( $limit = 5 ) { $this -> getDbCriteria () -> mergeWith ( array ( 'order' => 'create_time DESC' , 'limit' => $limit , )); return $this ; } Luego podr\u00edamos llamar: 1 2 <?php $posts = Post :: model () -> published () -> recently ( 3 ) -> findAll (); Se puede definir un named scope predeterminado. De esta forma ser\u00e1 aplicado autom\u00e1ticamente en todas las consultas. Para ello se define en el m\u00e9todo CActiveRecord::defaultScope sin darle nombre como s\u00ed hab\u00eda que hacer en CActiveRecord::scopes . Por ejemplo: 1 2 3 4 5 6 <?php public function defaultScope () { return array ( 'condition' => \"language='\" . Yii :: app () -> language . \"'\" , ); }","title":"Named scopes"},{"location":"desarrollo/yii.html#activerecord-relacional","text":"","title":"ActiveRecord relacional"},{"location":"desarrollo/yii.html#declaracion-de-relaciones","text":"Para ilustrar los ejemplos de esta secci\u00f3n se utilizar\u00e1 el siguiente modelo de datos: Las relaciones entre dos clases AR tienen que ver con la relaci\u00f3n entre las tablas en base de datos. En base de datos tendremos las relaciones: one-to-many: entre tbl_user y tbl_post por ejemplo. ono-to-one: entre tbl_user y tbl_profile por ejemplo. many-to-many: entre tbl_category y tbl_post por ejemplo. En el lado AR hay cuatro tipos posibles: BELONGS_TO: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces B belongs_to A. En el ejemplo A=tbl_user y B=tbl_post. HAS_MANY: Si la relaci\u00f3n entre las tablas A y B es one-to-many, entonces A has_many B. En el ejemplo A=tbl_user y B=tbl_post. HAS_ONE: Si la relaci\u00f3n entre las tablas A y B es ono-to-one. Es un caso especial de HAS_MANY en el que A tiene al menos un B. En el ejemplo A=tbl_user y B=tbl_profile. MANY_MANY: Si la relaci\u00f3n entre las tablas A y B es many-to-many. Se necesita una tabla intermedia que descomponga la relaci\u00f3n en dos relaciones 1:n con la tabla intermedia (C). En el ejemplo A=tbl_post, B=tbl_category y C=tbl_post_category. Estas relaciones se declaran en el m\u00e9todo CActiveRecord::relations() definiendo un array en el que cada elemento representa una relaci\u00f3n de la siguiente forma: 1 2 <?php 'VarName' => array ( 'RelationType' , 'ClassName' , 'ForeignKey' , ... opciones adicionales ) donde VarName es el nombre de la relaci\u00f3n, RelationType indica el tipo de relaci\u00f3n (se pueden aprovechar las siguientes constantes: self::BELONGS_TO , self::HAS_ONE , self::HAS_MANY y self::MANY_MANY ), ClassName es el nombre de la clase AR con que se est\u00e1 estableciendo la relaci\u00f3n y ForeignKey indica la foreign key implicada en la relaci\u00f3n. Las opciones adicionales se explicar\u00e1n en la secci\u00f3n Opciones de consultas relacionales . A continuaci\u00f3n se definen las relaciones en los modelos User y Post: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <?php class Post extends CActiveRecord { //...... public function relations () { return array ( 'author' => array ( self :: BELONGS_TO , 'User' , 'author_id' ), 'categories' => array ( self :: MANY_MANY , 'Category' , 'tbl_post_category(post_id, category_id)' ), ); } } class User extends CActiveRecord { //...... public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } }","title":"Declaraci\u00f3n de relaciones"},{"location":"desarrollo/yii.html#consultas-relacionales","text":"Por defecto se aplica el sistema lazy loading en los campos de un modelo que se refieren a una relaci\u00f3n. Para forzar un eager loading hay que preceder los m\u00e9todos de b\u00fasqueda con el m\u00e9todo with() . Por ejemplo: 1 2 <?php $posts = Post :: model () -> with ( 'author' ) -> findAll (); Se pueden especificar varios nombres de relaciones separados por comas en el m\u00e9todo with() o pasarle un CDbCriteria::with al m\u00e9todo de b\u00fasqueda. Por ejemplo: 1 2 3 4 5 6 7 8 <?php $criteria = new CDbCriteria ; $criteria -> with = array ( 'author.profile' , 'author.posts' , 'categories' , ); $posts = Post :: model () -> findAll ( $criteria );","title":"Consultas relacionales"},{"location":"desarrollo/yii.html#consultas-relacionales-sin-obtener-los-modelos-relacionados","text":"En ocasiones nos interesa hacer una consulta usando una relaci\u00f3n pero no queremos los datos de los propios modelos relacionados. Por ejemplo si quisi\u00e9ramos los usuarios que tienen post's en estado published=1, pero no los post's en s\u00ed, podr\u00edamos hacer lo siguiente: 1 2 3 4 5 6 7 8 <?php $users = User :: model () -> with ( array ( 'posts' => array ( 'select' => false , 'joinType' => 'INNER JOIN' , 'condition' => 'posts.published=1' , ), )) -> findAll ();","title":"Consultas relacionales sin obtener los modelos relacionados"},{"location":"desarrollo/yii.html#opciones-de-consultas-relacionales","text":"Las opciones adicionales que se pueden indicar cuando se definen las relaciones que se mencionaban en el apartado Declaraci\u00f3n de relaciones son las siguientes (consultar su funcionamiento en la documentaci\u00f3n oficial ): select condition params on order with joinType alias together join group having index scopes Adicionalmente las siguientes opciones est\u00e1n disponibles para ciertas relaciones durante el lazy loading (consultar su funcionamiento en la documentaci\u00f3n oficial ): limit offset through Ejemplo de uso: 1 2 3 4 5 6 7 8 9 10 11 <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'order' => 'posts.create_time DESC' , 'with' => 'categories' ), 'profile' => array ( self :: HAS_ONE , 'Profile' , 'owner_id' ), ); } }","title":"Opciones de consultas relacionales"},{"location":"desarrollo/yii.html#desambiguacion-de-columnas","text":"En una consulta relacional con AR, el alias para la tabla primaria es t , mientras que el alias de la tabla relacionada se corresponde con el nombre de la relaci\u00f3n. Por ejemplo: 1 2 3 4 <?php $posts = Post :: model () -> with ( 'comments' ) -> findAll ( array ( 'order' => 't.create_time, comments.create_time' ));","title":"Desambiguaci\u00f3n de columnas"},{"location":"desarrollo/yii.html#opciones-dinamicas-en-consultas-relacionales","text":"Se pueden sobreescribir las opciones que se definen en las relaciones indicando otras mediante el m\u00e9todo with() o con la opci\u00f3n adicional with .","title":"Opciones din\u00e1micas en consultas relacionales"},{"location":"desarrollo/yii.html#rendimiento-de-consultas-relacionales","text":"Existe una opci\u00f3n que permite elegir entre dos m\u00e9todos para realizar consultas eager loading . Se trata de la opci\u00f3n together que determina si se realizar\u00e1 una \u00fanica consulta con el join de las tablas relacionadas (m\u00e1s rendimiento) o una consulta por cada tabla (menos informaci\u00f3n redundante). Consultar documentaci\u00f3n completa .","title":"Rendimiento de consultas relacionales"},{"location":"desarrollo/yii.html#consulta-estadistica","text":"Existe un tipo de relaci\u00f3n especializado en obtener datos estad\u00edsticos entre tablas. S\u00f3lo se puede aplicar sobre tablas relacionadas con HAS_MANY y MANY_MANY y el tipo de relaci\u00f3n se designa con self::STAT . Por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 <?php class Post extends CActiveRecord { public function relations () { return array ( 'commentCount' => array ( self :: STAT , 'Comment' , 'post_id' ), 'categoryCount' => array ( self :: STAT , 'Category' , 'post_category(post_id, category_id)' ), ); } } Por defecto la consulta estad\u00edstica consistir\u00e1 en un COUNT , pero podemos realizar ajustes con las siguientes opciones adicionales al definir la relaci\u00f3n: select : la expresi\u00f3n estad\u00edstica. Por defecto es COUNT(*) , lo que realiza un conteo de los objetos hijos. defaultValue : el valor que se asignar\u00e1 a los registros que no reciban un resultado de la consulta estad\u00edstica. Por ejemplo, si un post no tiene comentarios, commentCount recibir\u00e1 este valor. Por defecto vale 0. condition : la cl\u00e1usula WHERE. Su valor por defecto es vac\u00edo. params : los par\u00e1metros a asociar a la sentencia SQL generada. Debe ser un array de parejas clave-valor. order : la cl\u00e1usula ORDER. Su valor por defecto es vac\u00edo. group : la cl\u00e1usula GROUP BY. Su valor por defecto es vac\u00edo. having : la cl\u00e1usula HAVING. Su valor por defecto es vac\u00edo.","title":"Consulta estad\u00edstica"},{"location":"desarrollo/yii.html#consulta-relacional-con-named-scopes","text":"Se pueden combinar las consultas relacionales con los named scopes aplicando estos \u00faltimos tanto sobre la tabla principal como sobre las relacionadas. En el primer caso se har\u00eda combinando named scopes y consulta relacional en cadena de la siguiente forma: 1 2 <?php $posts = Post :: model () -> published () -> recently () -> with ( 'comments' ) -> findAll (); Aplicar named scopes a los modelos relacionados se hace indicandolos detr\u00e1s de la relaci\u00f3n separ\u00e1ndolos con \":\". Por ejemplo: 1 2 <?php $posts = Post :: model () -> with ( 'comments:recently:approved' ) -> findAll (); Los named scopes pueden forzarse en la propia declaraci\u00f3n de la relaci\u00f3n del siguiente modo: 1 2 3 4 5 6 7 8 9 <?php class User extends CActiveRecord { public function relations () { return array ( 'posts' => array ( self :: HAS_MANY , 'Post' , 'author_id' , 'with' => 'comments:approved' ), ); } } Si los named scopes del objeto relacionados admiten par\u00e1metros, pueden pasarse en la consulta relacional de la siguiente forma: 1 2 3 4 5 6 7 8 9 10 <?php $users = User :: model () -> findAll ( array ( 'with' => array ( 'posts' => array ( 'scopes' => array ( 'rated' => 5 , ), ), ), ));","title":"Consulta relacional con named scopes"},{"location":"desarrollo/yii.html#consulta-relacional-con-through","text":"Se definen as\u00ed: 1 2 <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'key1' => 'key2' ), 'through' => 'posts' ) donde en array('key1'=>'key2'): key1 es una clave definida en la relaci\u00f3n especificada en through ( posts en este caso) key2 es una clave definida en el modelo al que esta relaci\u00f3n apunta ( Comment en este caso) through puede utilizarse en relaciones HAS_ONE y HAS_MANY . Para ilustrar el caso HAS_MANY se utilizar\u00e1 el siguiente modelo de datos: Por ejemplo, para obtener los usuarios de un grupo en concreto: 1 2 3 4 5 6 7 8 9 10 11 <?php class Group extends CActiveRecord { //... public function relations () { return array ( 'roles' => array ( self :: HAS_MANY , 'Role' , 'group_id' ), 'users' => array ( self :: HAS_MANY , 'User' , array ( 'user_id' => 'id' ), 'through' => 'roles' ), ); } } Un caso m\u00e1s complicado ser\u00eda obtener todos los comentarios de todos los usuarios de un grupo en concreto. Se lograr\u00eda a\u00f1adiendo a las relaciones anteriores la siguiente: 1 2 3 4 <?php 'comments' => array ( self :: HAS_MANY , 'Comment' , array ( 'id' => 'user_id' ), 'through' => 'users' ), Una variante del HAS_MANY through es cuando el modelo origen y destino es el mismo. Por ejemplo, dado el siguiente modelo de datos: Podr\u00edamos definir las siguientes relaciones: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <?php class User extends CActiveRecord { //... public function relations () { return array ( 'mentorships' => array ( self :: HAS_MANY , 'Mentorship' , 'teacher_id' , 'joinType' => 'INNER JOIN' ), 'students' => array ( self :: HAS_MANY , 'User' , array ( 'student_id' => 'id' ), 'through' => 'mentorships' , 'joinType' => 'INNER JOIN' ), ); } } De manera que podr\u00edamos obtener los alumnos que son ense\u00f1ados por un profesor (alumnos y profesor son ambos usuarios): 1 2 3 <?php $teacher = User :: model () -> findByPk ( 1 ); $students = $teacher -> students ; Para ilustrar el caso de HAS_ONE through nos basaremos en: Por ejemplo, obtener la direcci\u00f3n de un usuario cuando \u00e9sta est\u00e1 relacionada con el usuario por medio de un profile: 1 2 3 4 5 6 7 8 9 10 11 <?php class User extends CActiveRecord { //... public function relations () { return array ( 'profile' => array ( self :: HAS_ONE , 'Profile' , 'user_id' ), 'address' => array ( self :: HAS_ONE , 'Address' , array ( 'id' => 'profile_id' ), 'through' => 'profile' ), ); } }","title":"Consulta relacional con through"},{"location":"desarrollo/yii.html#tabla-de-relacion-many_many-con-datos-adicionales","text":"Para el caso en que la tabla intermedia que desarrolla una relaci\u00f3n MANY_MANY entre otras dos tablas contenga campos con informaci\u00f3n adicional a los dos foreign keys que apuntan a las dos tablas, seguir este art\u00edculo del wiki y \u00e9ste del foro (ignorar las respuestas m\u00e1s viejas que son de cuando no exist\u00eda el mecanismo through ).","title":"Tabla de relaci\u00f3n MANY_MANY con datos adicionales"},{"location":"desarrollo/yii.html#cosas-interesantes","text":"","title":"Cosas interesantes"},{"location":"desarrollo/yii.html#application-singleton","text":"Yii:app() Sirve como almac\u00e9n central de ajustes de configuraci\u00f3n a nivel de aplicaci\u00f3n ( fuente ).","title":"Application Singleton"},{"location":"desarrollo/yii.html#anadir-jquery","text":"A\u00f1adir jQuery a una p\u00e1gina. C\u00f3digo visto en un action, pero tambi\u00e9n se podr\u00eda insertar directamente en la vista en que vaya a ser necesario: 1 2 3 <?php // Adding jQuery to the view page. Yii :: app () -> getClientScript () -> registerCoreScript ( 'jquery' );","title":"A\u00f1adir jQuery"},{"location":"desarrollo/yii.html#filtrado-referido-en-bootgridview-o-cgridview","text":"Imaginemos el modelo empleado asociado en n:1 al modelo departamento. En el listado de empleados queremos mostrar el departamento al que pertenece y poder filtrar por el nombre del mismo (no por el ID de departamento como ocurrir\u00eda si indic\u00e1ramos el campo departamento_id que pertenece a empleado). Ver ejemplo en el filtrado del campo xproduct.product en admin.php del modelo Product en R135 del repositorio svn+ssh://edumoreno@192.168.2.250/var/lib/subversion/gestoo/trunk .","title":"Filtrado referido en BootGridView o CGridView"},{"location":"electronica/3d_printing.html","text":"3D Printing \u00b6 Nombres alternativos de Anet A8 \u00b6 Infitary M505 Alunar M505 Omni m505 Enlaces \u00b6 Lista de v\u00eddeos en canal Dron3D 8A sobre \"Anet A8\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Conceptos y ayuda\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Software\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Tipos de Material\" Anet A8 3DPrint.wiki Trello de \"Comunidad 3D [ES]\" Firmware alternativo Instalaci\u00f3n de 2 MosFET: Post y STLs Como calibrar el control de temperatura PID de la impresora 3D Calibraci\u00f3n de pasos del motor del extrusor . Instrucciones para realizarlo en Anet A8 aqu\u00ed . Calibraci\u00f3n del Extrusion Multiplier \u2013 Anchura de impresi\u00f3n C\u00f3mo montar Hot End sin romperlo C\u00f3mo modificar home en XY (ajustar extrusor offset). Y el m\u00e1ximo recorrido Actualizar el firmware a partir de un fichero HEX Montura para extrusor E3D Anet A8 - POST DEFINITIVO - Recopilatorio de temas Filamento \u00b6 FlexiSMART SmartMaterials3D : ABS con aditivos para evitar warping y cracking. Sakata3D PLA Ingeo 3D870 : Similares caracter\u00edsticas al ABS sin sus inconvenientes ( An\u00e1lisis ). Hardware / Componentes / Repuestos \u00b6 Repuestos Anet A8 Placa base Rodamiento lineal Rodamiento lineal sin bolas Rodamiento lineal largo Enchufe de corriente de entrada Alargador lector microSD Conectores r\u00e1pidos JST M\u00f3dulo MOSFET M\u00f3dulo MOSFET Sensor de posici\u00f3n inductivo Sensor de posici\u00f3n capacitivo (mejor si se pone cristal a la cama) Cinta de carrocero especial impresoras: Amazon , Banggood Nozzles en medidas 0.2, 0.3 y 0.4 mm . Tambi\u00e9n sueltos: 0.2mm , 0.3 y 0.4 . N\u00facleo calentador extrusor Bloque de aluminio soporte del extrusor, el n\u00facleo calentador y el termistor Termistor Tubo conductor filamento al extrusor con tefl\u00f3n Engranaje impulsor filamento Ventilador de capa Ventilador de extrusor Correa ejes X e Y Cristal para cama caliente Motor paso a paso Mejoras Anet A8 \u00b6 Mejoras sobre montaje original Soporte para las herramientas Conectores en ventiladores Alargador lector microSD MOSFET exterior Soldar conector cama caliente Refuerzos eje X: v1 y v2 . Interruptor y ventilador de fuente Ventilador de placa base Soporte para bobina de filamento: Barras 1 o Barras 2 y Eje . Final de carrera Z ajustable Mejoras en tornillos nivelado de cama Base para doble MOSFET : Gu\u00eda de montaje . Acceso r\u00e1pido a engranaje motor extrusor Tensor eje X Tensor eje Y: v1 o v2 Piezas de la propia impresora \u00b6 X Motor mount Octoprint \u00b6 Control your Anet A8 3D Printer using Octoprint on Raspberry Pi Zero W, direct UART connection Control remoto para tu impresora 3D con Raspberry Pi: Parte 1 y Parte 2 . Setup on a Raspberry Pi running Raspbian Par\u00e1metros impresi\u00f3n Anet A8 \u00b6 General \u00b6 X (Width): 220mm Y (Depth): 220mm Z (Height): 240mm Build plate shape: Rectangular Heated bed: Checked Bed center is 0,0,0: Unchecked Material diameter: 1.75mm Nozzle size: 0.4mm Cura 3.4 \u00b6 Los ficheros de preferencias de las distintas versiones se encuentran en la ruta (Linux) ~/.config/cura y los de settings en ~/.local/share/cura . ( Fuente ) Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Quality > Initial Layer Line Width : 100 %. Permite aumentar ligeramente la anchura de las l\u00edneas de la primera capa para aumentar la adherencia a la cama. B\u00e1sicamente inyecta un poco m\u00e1s de material. Shell > Wall Thickness : 1.2 mm [0.8-2.0] Grosor de la piel. Debe ser m\u00faltiplo de Layer Height . Shell > Top/Bottom Thickness : 1.2 mm [0.8-2.0] Grosor de la piel superior e inferior. Cuando la densidad de relleno es menor que 20%, se puede producir ca\u00edda de la capa superior. En ese caso se recomienda un m\u00ednimo de 1.2mm. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Material > Diameter : 1.75 mm. Di\u00e1metro de la entrada del extrusor. Material > Flow : 100 %. Sirve para aportar m\u00e1s o menos material si observamos que en las impresiones aparecen bultos o huecos entre las l\u00edneas o capas. Material > Enable Retraction : Marcado. Retrae el hilo cuando el cabezal se tiene que desplazar sin imprimir. Material > Retraction Distance : 4.5mm. Cantidad de material recogido durante la retracci\u00f3n. Material > Retraction Speed : 40 mm/s. Velocidad de la retracci\u00f3n. Material > Retraction Minimum Travel : 1.5 mm. Distancia m\u00ednima de desplazamiento del extrusor a partir de la que se aplica retracci\u00f3n. Speed > Print Speed : 30 mm/s [10-120] Velocidad de impresi\u00f3n. A menor velocidad m\u00e1s precisi\u00f3n de impresi\u00f3n. No se recomienda pasar de 40-60. Speed > Infill Speed : 40 [10-120] Velocidad de impresi\u00f3n del relleno. Speed > Outer Wall Speed : 20 [10-120] Velocidad de impresi\u00f3n de las caras externas. Speed > Inner Wall Speed : 30 [10-120] Velocidad de impresi\u00f3n de las caras internas. Suele ser un valor intermedio entre Infill Speed y Outer Wall Speed . Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Travel > Z Hop When Retracted : Desmarcado. Levanta un poco el extrusor cuando se inicia un desplazamiento para evitar colisiones con las partes ya impresas. Tras probarlo compruebo que en la Anet A8 deja muchos hilos. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Cooling > Regular Fan Speed : 30 %. La velocidad del ventilador antes de alcanzar el tiempo m\u00ednimo de impresi\u00f3n de la capa, momento en que se acelera hasta alcanzar la velocidad m\u00e1xima. Cooling > Maximum Fan Speed : 70 %. Velocidad m\u00e1xima del ventilador cuando se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa. Cooling > Initial Fan Speed : 0 %. Velocidad del ventilador al comienzo de la impresi\u00f3n. Cooling > Regular Fan Speed at Height : 0.5 mm. Altura de capa a partir de la cual el ventilador empezar\u00e1 a girar a la velocidad Regular . Este retraso en el encendido del ventilador sirve para mejorar la adhesi\u00f3n de la pieza a la cama. Cooling > Minimum Layer Time : 10 seg. Tiempo m\u00ednimo de impresi\u00f3n de una capa. Si no se alcanza antes de empezar una nueva la impresora esperar\u00e1. Cooling > Lift Head : Desmarcado. Aparta la cabeza cuando no se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa para evitar que el extrusor gotee sobre la misma. Es mejor bajar la velocidad de impresi\u00f3n en este tipo de piezas peque\u00f1as en las que no se alcance el tiempo m\u00ednimo de impresi\u00f3n de capa. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion Type : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Special Modes : All at Once. Usar siempre esta opci\u00f3n. Experimental > Tree Support : Hace soportes ramificados. M\u00e1s habituales \u00b6 Los par\u00e1metros que casi siempre merece la pena revisar entre distintas impresiones son: Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Experimental > Tree Support : Hace soportes ramificados.","title":"3D Printing"},{"location":"electronica/3d_printing.html#3d-printing","text":"","title":"3D Printing"},{"location":"electronica/3d_printing.html#nombres-alternativos-de-anet-a8","text":"Infitary M505 Alunar M505 Omni m505","title":"Nombres alternativos de Anet A8"},{"location":"electronica/3d_printing.html#enlaces","text":"Lista de v\u00eddeos en canal Dron3D 8A sobre \"Anet A8\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Conceptos y ayuda\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Software\" Lista de v\u00eddeos en canal Dron3D 8A sobre \"Impresi\u00f3n 3D - Tipos de Material\" Anet A8 3DPrint.wiki Trello de \"Comunidad 3D [ES]\" Firmware alternativo Instalaci\u00f3n de 2 MosFET: Post y STLs Como calibrar el control de temperatura PID de la impresora 3D Calibraci\u00f3n de pasos del motor del extrusor . Instrucciones para realizarlo en Anet A8 aqu\u00ed . Calibraci\u00f3n del Extrusion Multiplier \u2013 Anchura de impresi\u00f3n C\u00f3mo montar Hot End sin romperlo C\u00f3mo modificar home en XY (ajustar extrusor offset). Y el m\u00e1ximo recorrido Actualizar el firmware a partir de un fichero HEX Montura para extrusor E3D Anet A8 - POST DEFINITIVO - Recopilatorio de temas","title":"Enlaces"},{"location":"electronica/3d_printing.html#filamento","text":"FlexiSMART SmartMaterials3D : ABS con aditivos para evitar warping y cracking. Sakata3D PLA Ingeo 3D870 : Similares caracter\u00edsticas al ABS sin sus inconvenientes ( An\u00e1lisis ).","title":"Filamento"},{"location":"electronica/3d_printing.html#hardware-componentes-repuestos","text":"Repuestos Anet A8 Placa base Rodamiento lineal Rodamiento lineal sin bolas Rodamiento lineal largo Enchufe de corriente de entrada Alargador lector microSD Conectores r\u00e1pidos JST M\u00f3dulo MOSFET M\u00f3dulo MOSFET Sensor de posici\u00f3n inductivo Sensor de posici\u00f3n capacitivo (mejor si se pone cristal a la cama) Cinta de carrocero especial impresoras: Amazon , Banggood Nozzles en medidas 0.2, 0.3 y 0.4 mm . Tambi\u00e9n sueltos: 0.2mm , 0.3 y 0.4 . N\u00facleo calentador extrusor Bloque de aluminio soporte del extrusor, el n\u00facleo calentador y el termistor Termistor Tubo conductor filamento al extrusor con tefl\u00f3n Engranaje impulsor filamento Ventilador de capa Ventilador de extrusor Correa ejes X e Y Cristal para cama caliente Motor paso a paso","title":"Hardware / Componentes / Repuestos"},{"location":"electronica/3d_printing.html#mejoras-anet-a8","text":"Mejoras sobre montaje original Soporte para las herramientas Conectores en ventiladores Alargador lector microSD MOSFET exterior Soldar conector cama caliente Refuerzos eje X: v1 y v2 . Interruptor y ventilador de fuente Ventilador de placa base Soporte para bobina de filamento: Barras 1 o Barras 2 y Eje . Final de carrera Z ajustable Mejoras en tornillos nivelado de cama Base para doble MOSFET : Gu\u00eda de montaje . Acceso r\u00e1pido a engranaje motor extrusor Tensor eje X Tensor eje Y: v1 o v2","title":"Mejoras Anet A8"},{"location":"electronica/3d_printing.html#piezas-de-la-propia-impresora","text":"X Motor mount","title":"Piezas de la propia impresora"},{"location":"electronica/3d_printing.html#octoprint","text":"Control your Anet A8 3D Printer using Octoprint on Raspberry Pi Zero W, direct UART connection Control remoto para tu impresora 3D con Raspberry Pi: Parte 1 y Parte 2 . Setup on a Raspberry Pi running Raspbian","title":"Octoprint"},{"location":"electronica/3d_printing.html#parametros-impresion-anet-a8","text":"","title":"Par\u00e1metros impresi\u00f3n Anet A8"},{"location":"electronica/3d_printing.html#general","text":"X (Width): 220mm Y (Depth): 220mm Z (Height): 240mm Build plate shape: Rectangular Heated bed: Checked Bed center is 0,0,0: Unchecked Material diameter: 1.75mm Nozzle size: 0.4mm","title":"General"},{"location":"electronica/3d_printing.html#cura-34","text":"Los ficheros de preferencias de las distintas versiones se encuentran en la ruta (Linux) ~/.config/cura y los de settings en ~/.local/share/cura . ( Fuente ) Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Quality > Initial Layer Line Width : 100 %. Permite aumentar ligeramente la anchura de las l\u00edneas de la primera capa para aumentar la adherencia a la cama. B\u00e1sicamente inyecta un poco m\u00e1s de material. Shell > Wall Thickness : 1.2 mm [0.8-2.0] Grosor de la piel. Debe ser m\u00faltiplo de Layer Height . Shell > Top/Bottom Thickness : 1.2 mm [0.8-2.0] Grosor de la piel superior e inferior. Cuando la densidad de relleno es menor que 20%, se puede producir ca\u00edda de la capa superior. En ese caso se recomienda un m\u00ednimo de 1.2mm. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Material > Diameter : 1.75 mm. Di\u00e1metro de la entrada del extrusor. Material > Flow : 100 %. Sirve para aportar m\u00e1s o menos material si observamos que en las impresiones aparecen bultos o huecos entre las l\u00edneas o capas. Material > Enable Retraction : Marcado. Retrae el hilo cuando el cabezal se tiene que desplazar sin imprimir. Material > Retraction Distance : 4.5mm. Cantidad de material recogido durante la retracci\u00f3n. Material > Retraction Speed : 40 mm/s. Velocidad de la retracci\u00f3n. Material > Retraction Minimum Travel : 1.5 mm. Distancia m\u00ednima de desplazamiento del extrusor a partir de la que se aplica retracci\u00f3n. Speed > Print Speed : 30 mm/s [10-120] Velocidad de impresi\u00f3n. A menor velocidad m\u00e1s precisi\u00f3n de impresi\u00f3n. No se recomienda pasar de 40-60. Speed > Infill Speed : 40 [10-120] Velocidad de impresi\u00f3n del relleno. Speed > Outer Wall Speed : 20 [10-120] Velocidad de impresi\u00f3n de las caras externas. Speed > Inner Wall Speed : 30 [10-120] Velocidad de impresi\u00f3n de las caras internas. Suele ser un valor intermedio entre Infill Speed y Outer Wall Speed . Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Travel > Z Hop When Retracted : Desmarcado. Levanta un poco el extrusor cuando se inicia un desplazamiento para evitar colisiones con las partes ya impresas. Tras probarlo compruebo que en la Anet A8 deja muchos hilos. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Cooling > Regular Fan Speed : 30 %. La velocidad del ventilador antes de alcanzar el tiempo m\u00ednimo de impresi\u00f3n de la capa, momento en que se acelera hasta alcanzar la velocidad m\u00e1xima. Cooling > Maximum Fan Speed : 70 %. Velocidad m\u00e1xima del ventilador cuando se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa. Cooling > Initial Fan Speed : 0 %. Velocidad del ventilador al comienzo de la impresi\u00f3n. Cooling > Regular Fan Speed at Height : 0.5 mm. Altura de capa a partir de la cual el ventilador empezar\u00e1 a girar a la velocidad Regular . Este retraso en el encendido del ventilador sirve para mejorar la adhesi\u00f3n de la pieza a la cama. Cooling > Minimum Layer Time : 10 seg. Tiempo m\u00ednimo de impresi\u00f3n de una capa. Si no se alcanza antes de empezar una nueva la impresora esperar\u00e1. Cooling > Lift Head : Desmarcado. Aparta la cabeza cuando no se alcanza el tiempo m\u00ednimo de impresi\u00f3n de la capa para evitar que el extrusor gotee sobre la misma. Es mejor bajar la velocidad de impresi\u00f3n en este tipo de piezas peque\u00f1as en las que no se alcance el tiempo m\u00ednimo de impresi\u00f3n de capa. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion Type : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Special Modes : All at Once. Usar siempre esta opci\u00f3n. Experimental > Tree Support : Hace soportes ramificados.","title":"Cura 3.4"},{"location":"electronica/3d_printing.html#mas-habituales","text":"Los par\u00e1metros que casi siempre merece la pena revisar entre distintas impresiones son: Quality > Layer Height : 0.2 mm [0.1-0.3] Altura de Capa. Quality > Initial Layer Height : 0.2 mm [0.1-0.3] Altura de la capa inicial. Una capa inicial m\u00e1s final mejora la adherencia a la cama. Shell > Horizontal Expansion : 0 mm. Expansi\u00f3n o contracci\u00f3n en el plano XY para ajustar la tolerancia entre piezas que tienen que encajar, por ejemplo agujeros y pasadores. Valores negativos contraen (por tanto se aplicar\u00e1n a los pasadores) y positivos expanden (por tanto a los agujeros). Con una expansi\u00f3n de 0.1mm ser\u00e1 suficiente la mayor\u00eda de las veces. Infill > Infill Density : 20 % [0-100] Tanto por ciento de relleno en el interior. Depender\u00e1 de la resistencia deseada para la pieza. Si no va a recibir cargas se puede utilizar 10 o incluso 0%. Material > Printing Temperature : 220 \u00baC [170 - 230] en PLA; [230-250] en ABS. Temperatura de extrusi\u00f3n del material. Material > Build Plate Temperature : 50\u00baC [40-60] en PLA; [60-90] en ABS. Temperatura de la cama caliente. Travel > Combing Mode : Realiza los desplazamientos sobre superficies ya impresas para evitar retracci\u00f3n o que gotee el extrusor. Off : Desplazamientos en l\u00ednea recta. All : Desplaza siempre por zonas impresas. No Skin : Desplaza por el interior de las piezas, evitando la superficie. Cooling > Enable Print Cooling : Activa el ventilador de la boquilla del extrusor. Marcado: En PLA. Desmarcado: En ABS. Support > Generate Support : Marcado. Generar soporte para partes en voladizo. Support > Support Placement : Everywhere Touching Builplate : S\u00f3lo hace soportes en las partes en voladizo sobre la cama. Everywhere : Hace soportes en todas las partes que lo necesiten. Build Plate Adhesion : Skirt Skirt : Hace una l\u00ednea alrededor de la piza en la primera capa. B\u00e1sicamente sirve para cebar el extrusor. Brim : Hace m\u00e1s amplia la primera capa para aumetar la adhesi\u00f3n a la cama. Raft : Hace una malla alrededor y debajo de la pieza para aumentar la adhesi\u00f3n a la cama. Puede ser dif\u00edcil de despegar. Experimental > Tree Support : Hace soportes ramificados.","title":"M\u00e1s habituales"},{"location":"electronica/arduino.html","text":"Arduino \u00b6 Adaptador serie \u00b6 Se puede utilizar muy f\u00e1cilmente un Arduino como adaptador USB-UART sin m\u00e1s que puentear el pin de reset (RST) a GND. En ese caso conectar los pines RX, TX (sin cruzar) y GND hacia el dispositivo que queramos conectar. En caso de que el dispositivo con el que conectemos trabaje a 3.3V (como Raspberry Pi por ejemplo), es necesario montar un divisor de tensi\u00f3n en la l\u00ednea RX tal y como se ve en este art\u00edculo (en el art\u00edculo las l\u00edneas RX/TX s\u00ed que est\u00e1n cruzadas porque se conecta el puerto UART al microcontrolador Atmel, no al adaptador USB):","title":"Arduino"},{"location":"electronica/arduino.html#arduino","text":"","title":"Arduino"},{"location":"electronica/arduino.html#adaptador-serie","text":"Se puede utilizar muy f\u00e1cilmente un Arduino como adaptador USB-UART sin m\u00e1s que puentear el pin de reset (RST) a GND. En ese caso conectar los pines RX, TX (sin cruzar) y GND hacia el dispositivo que queramos conectar. En caso de que el dispositivo con el que conectemos trabaje a 3.3V (como Raspberry Pi por ejemplo), es necesario montar un divisor de tensi\u00f3n en la l\u00ednea RX tal y como se ve en este art\u00edculo (en el art\u00edculo las l\u00edneas RX/TX s\u00ed que est\u00e1n cruzadas porque se conecta el puerto UART al microcontrolador Atmel, no al adaptador USB):","title":"Adaptador serie"},{"location":"electronica/bus_pirate.html","text":"Bus Pirate \u00b6 Referencia \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 General Protocol interaction --------------------------------------------------------------------------- ? This help (0) List current macros =X/|X Converts X/reverse X (x) Macro x ~ Selftest [ Start # Reset ] Stop $ Jump to bootloader { Start with read &/% Delay 1 us/ms } Stop a/A/@ AUXPIN (low/HI/READ) \"abc\" Send string b Set baudrate 123 c/C AUX assignment (aux/CS) 0x123 d/D Measure ADC (once/CONT.) 0b110 Send value f Measure frequency r Read g/S Generate PWM/Servo / CLK hi h Commandhistory \\ CLK lo i Versioninfo/statusinfo ^ CLK tick l/L Bitorder (msb/LSB) - DAT hi m Change mode _ DAT lo o Set output type . DAT read p/P Pullup resistors (off/ON) ! Bit read s Script engine : Repeat e.g. r:10 v Show volts/states . Bits to read/write e.g. 0x55.2 w/W PSU (off/ON) <x>/<x= >/<0> Usermacro x/assign x/list all Enlaces \u00b6 Bus Pirate - Documentaci\u00f3n oficial BusPirate oscilloscope python script Conexi\u00f3n \u00b6 1 $ screen /dev/buspirate 115200 8N1 Adaptador USB-UART (modo bridge) \u00b6 Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 HiZ>m3 Set serial port speed: (bps) 1. 300 2. 1200 3. 2400 4. 4800 5. 9600 6. 19200 7. 38400 8. 57600 9. 115200 10. BRG raw value (1)>5 Data bits and parity: 1. 8, NONE *default 2. 8, EVEN 3. 8, ODD 4. 9, NONE (1)>1 Stop bits: 1. 1 *default 2. 2 (1)>1 Receive polarity: 1. Idle 1 *default 2. Idle 0 (1)>1 Select output type: 1. Open drain (H=Hi-Z, L=GND) 2. Normal (H=3.3V, L=GND) (1)>2 Ready UART>(0) 0.Macro menu 1.Transparent bridge 2. Live monitor 3.Bridge with flow control UART>(1) UART bridge Reset to exit Are you sure? y Adaptador USB-UART (modo debug) \u00b6 Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed , s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando r ) se nos mostrar\u00e1 el error: 1 READ : 0x40 * Bytes dropped *<<< bytes dropped error En esas situaciones usar el modo transparente o usar el comando 'start' ( [ ).","title":"Bus Pirate"},{"location":"electronica/bus_pirate.html#bus-pirate","text":"","title":"Bus Pirate"},{"location":"electronica/bus_pirate.html#referencia","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 General Protocol interaction --------------------------------------------------------------------------- ? This help (0) List current macros =X/|X Converts X/reverse X (x) Macro x ~ Selftest [ Start # Reset ] Stop $ Jump to bootloader { Start with read &/% Delay 1 us/ms } Stop a/A/@ AUXPIN (low/HI/READ) \"abc\" Send string b Set baudrate 123 c/C AUX assignment (aux/CS) 0x123 d/D Measure ADC (once/CONT.) 0b110 Send value f Measure frequency r Read g/S Generate PWM/Servo / CLK hi h Commandhistory \\ CLK lo i Versioninfo/statusinfo ^ CLK tick l/L Bitorder (msb/LSB) - DAT hi m Change mode _ DAT lo o Set output type . DAT read p/P Pullup resistors (off/ON) ! Bit read s Script engine : Repeat e.g. r:10 v Show volts/states . Bits to read/write e.g. 0x55.2 w/W PSU (off/ON) <x>/<x= >/<0> Usermacro x/assign x/list all","title":"Referencia"},{"location":"electronica/bus_pirate.html#enlaces","text":"Bus Pirate - Documentaci\u00f3n oficial BusPirate oscilloscope python script","title":"Enlaces"},{"location":"electronica/bus_pirate.html#conexion","text":"1 $ screen /dev/buspirate 115200 8N1","title":"Conexi\u00f3n"},{"location":"electronica/bus_pirate.html#adaptador-usb-uart-modo-bridge","text":"Bus Pirate se puede utilizar como un adaptador USB-UART configur\u00e1ndolo en modo UART y activar el macro de modo transparente. Para ello seguir la siguiente secuencia: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 HiZ>m3 Set serial port speed: (bps) 1. 300 2. 1200 3. 2400 4. 4800 5. 9600 6. 19200 7. 38400 8. 57600 9. 115200 10. BRG raw value (1)>5 Data bits and parity: 1. 8, NONE *default 2. 8, EVEN 3. 8, ODD 4. 9, NONE (1)>1 Stop bits: 1. 1 *default 2. 2 (1)>1 Receive polarity: 1. Idle 1 *default 2. Idle 0 (1)>1 Select output type: 1. Open drain (H=Hi-Z, L=GND) 2. Normal (H=3.3V, L=GND) (1)>2 Ready UART>(0) 0.Macro menu 1.Transparent bridge 2. Live monitor 3.Bridge with flow control UART>(1) UART bridge Reset to exit Are you sure? y","title":"Adaptador USB-UART (modo bridge)"},{"location":"electronica/bus_pirate.html#adaptador-usb-uart-modo-debug","text":"Cuando utilizamos el modo UART en modo debug, tal y como se describe aqu\u00ed , s\u00f3lo tenemos un buffer de 4 bytes, por lo que es f\u00e1cil obtener un overrun del mismo. En ese caso, al leer (comando r ) se nos mostrar\u00e1 el error: 1 READ : 0x40 * Bytes dropped *<<< bytes dropped error En esas situaciones usar el modo transparente o usar el comando 'start' ( [ ).","title":"Adaptador USB-UART (modo debug)"},{"location":"electronica/m328_transistor_tester.html","text":"M328 Transistor Tester \u00b6 Enlaces \u00b6 2016 DIY KITS ATMEAG328P M328 Transistor Tester LCR Diode Capacitance ESR meter PWM Square wave Signal Generator with case : ~12\u20ac M328 Transistor Tester manual Enumeraci\u00f3n funciones \u00b6 Firmware 1.12k Transistor : Medidor de transistores. Frecuency : Medidor de frecuencias. Conectar las puntas en la entrada PWM (superior). f-Generator : Generador de frecuencias. Conectar las puntas en la salida PWM (inferior). 10-bit PWM : Generador de se\u00f1al PWM. Conectar las puntas en la salida PWM (inferior). C+ESR@TP1:3 : Capac\u00edmetro con posibilidad de medir en placa ya que genera tensiones de ~300mV. Aunque es recomendable medir antes con un oscilosc\u00f3pio si es as\u00ed (mi unidad aplicaba 5V igual que el capac\u00edmetro normal). Conectar un par de puntas en las entradas 1 y 3. Medidor de inductancias : Capac\u00edmetro : No sirve para medir en placa ya que genera tensiones de 5V. Descargar los condensadores antes de aplicarlos al medidor. DS18B20 : C(uF)-correction : Calibraci\u00f3n del capac\u00edmetro. IR_Decoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un receptor IR en las entradas 1, 2 y 3. IR_Encoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un LED emisor de IR en la salida PWM (inferior). DHT11 : Selftest : Calibraci\u00f3n del tester. Voltage : Volt\u00edmetro. Conectar las puntas en la entrada de volt\u00edmetro (inferior). FrontColor : Color RGB de los caracteres. BackColor : Color RGB del fondo. Show data : Muestra los datos de calibraci\u00f3n y el juego de gr\u00e1ficos y caracteres. Switch off : Apagado. Firmware \u00b6 El repositorio SVN del proyecto se baja con: 1 $ svn checkout svn://mikrocontroller.net/transistortester Para actualizarlo a la \u00faltima versi\u00f3n una vez bajado, ejecutar desde el propio directorio: 1 $ svn update Tambi\u00e9n se puede explorar el repositorio en esta URL . La configuraci\u00f3n del modelo enlazado arriba es la mega328_color_kit . Instrucciones sobre la carga del firmware en este hilo del foro EEVBlog .","title":"M328 Transistor Tester"},{"location":"electronica/m328_transistor_tester.html#m328-transistor-tester","text":"","title":"M328 Transistor Tester"},{"location":"electronica/m328_transistor_tester.html#enlaces","text":"2016 DIY KITS ATMEAG328P M328 Transistor Tester LCR Diode Capacitance ESR meter PWM Square wave Signal Generator with case : ~12\u20ac M328 Transistor Tester manual","title":"Enlaces"},{"location":"electronica/m328_transistor_tester.html#enumeracion-funciones","text":"Firmware 1.12k Transistor : Medidor de transistores. Frecuency : Medidor de frecuencias. Conectar las puntas en la entrada PWM (superior). f-Generator : Generador de frecuencias. Conectar las puntas en la salida PWM (inferior). 10-bit PWM : Generador de se\u00f1al PWM. Conectar las puntas en la salida PWM (inferior). C+ESR@TP1:3 : Capac\u00edmetro con posibilidad de medir en placa ya que genera tensiones de ~300mV. Aunque es recomendable medir antes con un oscilosc\u00f3pio si es as\u00ed (mi unidad aplicaba 5V igual que el capac\u00edmetro normal). Conectar un par de puntas en las entradas 1 y 3. Medidor de inductancias : Capac\u00edmetro : No sirve para medir en placa ya que genera tensiones de 5V. Descargar los condensadores antes de aplicarlos al medidor. DS18B20 : C(uF)-correction : Calibraci\u00f3n del capac\u00edmetro. IR_Decoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un receptor IR en las entradas 1, 2 y 3. IR_Encoder : Implementa un par de protocolos de transmisi\u00f3n de datos por infrarrojos. Hay que conectar un LED emisor de IR en la salida PWM (inferior). DHT11 : Selftest : Calibraci\u00f3n del tester. Voltage : Volt\u00edmetro. Conectar las puntas en la entrada de volt\u00edmetro (inferior). FrontColor : Color RGB de los caracteres. BackColor : Color RGB del fondo. Show data : Muestra los datos de calibraci\u00f3n y el juego de gr\u00e1ficos y caracteres. Switch off : Apagado.","title":"Enumeraci\u00f3n funciones"},{"location":"electronica/m328_transistor_tester.html#firmware","text":"El repositorio SVN del proyecto se baja con: 1 $ svn checkout svn://mikrocontroller.net/transistortester Para actualizarlo a la \u00faltima versi\u00f3n una vez bajado, ejecutar desde el propio directorio: 1 $ svn update Tambi\u00e9n se puede explorar el repositorio en esta URL . La configuraci\u00f3n del modelo enlazado arriba es la mega328_color_kit . Instrucciones sobre la carga del firmware en este hilo del foro EEVBlog .","title":"Firmware"},{"location":"electronica/stm32.html","text":"STM 32 \u00b6 Placa de pruebas STM32 VL Discovery \u00b6 Enlaces \u00b6 STM32VLDISCOVERY : Discovery kit with STM32F100RB MCU. Atollic TrueSTUDIO : Free to download and free to use. No code size limits! A commercial-quality tool developed and maintained by Atollic, a professional tools company with years of experience in tools for embedded development. Linux and Mac OS X support is scheduled for later 2016. STM32-Template Open source version of the STMicroelectronics Stlink Tools STM32VLDISCOVERY programming tutorial Programming STM32VLDISCOVERY with Codesourcery and Eclipse Preparaci\u00f3n entorno desarrollo \u00b6 Desarrollado en este post .","title":"STM32"},{"location":"electronica/stm32.html#stm-32","text":"","title":"STM 32"},{"location":"electronica/stm32.html#placa-de-pruebas-stm32-vl-discovery","text":"","title":"Placa de pruebas STM32 VL Discovery"},{"location":"electronica/stm32.html#enlaces","text":"STM32VLDISCOVERY : Discovery kit with STM32F100RB MCU. Atollic TrueSTUDIO : Free to download and free to use. No code size limits! A commercial-quality tool developed and maintained by Atollic, a professional tools company with years of experience in tools for embedded development. Linux and Mac OS X support is scheduled for later 2016. STM32-Template Open source version of the STMicroelectronics Stlink Tools STM32VLDISCOVERY programming tutorial Programming STM32VLDISCOVERY with Codesourcery and Eclipse","title":"Enlaces"},{"location":"electronica/stm32.html#preparacion-entorno-desarrollo","text":"Desarrollado en este post .","title":"Preparaci\u00f3n entorno desarrollo"},{"location":"proyectos/dicom.html","text":"Impresi\u00f3n 3D de ecograf\u00edas \u00b6 Enlaces \u00b6 DCMTK - DICOM Toolkit Storage SCP Emulator DICOM Tutorial RUBY DICOM . En GitHub . Instalaci\u00f3n Ruby \u00b6 Descargar el paquete de RubyInstaller .","title":"Impresi\u00f3n 3D de ecograf\u00edas"},{"location":"proyectos/dicom.html#impresion-3d-de-ecografias","text":"","title":"Impresi\u00f3n 3D de ecograf\u00edas"},{"location":"proyectos/dicom.html#enlaces","text":"DCMTK - DICOM Toolkit Storage SCP Emulator DICOM Tutorial RUBY DICOM . En GitHub .","title":"Enlaces"},{"location":"proyectos/dicom.html#instalacion-ruby","text":"Descargar el paquete de RubyInstaller .","title":"Instalaci\u00f3n Ruby"},{"location":"proyectos/headsetcomm.html","text":"Headset Commander \u00b6 Enlaces \u00b6 How to detect Bluetooth headset key press headset button Using Android Headset Buttons (Earphone Buttons) Logcat play/pause \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #### Google Music 01-25 18 : 54 : 23 . 960 1226 1226 I AwesomePlayer : play_l 01-25 18 : 54 : 24 . 007 19228 19232 I dalvikvm : Jit : resizing JitTable from 4096 to 8192 01-25 18 : 54 : 25 . 038 19653 19663 D MediaPlaybackService : Event logging MUSIC_PAUSE_PLAYBACK_REQUESTED : [ 299 , DEFAULT ] / c10a328e-25f5-36a5-bb2b-8642bc8a8f76 01-25 18 : 54 : 25 . 053 1226 1779 I AwesomePlayer : pause_l 0 01-25 18 : 54 : 25 . 061 1373 1388 D NotificationService : turn off LED due to Dock full charging 01-25 18 : 54 : 25 . 085 1373 1384 D BluetoothA2dpService : received playstatechanged Action 01-25 18 : 54 : 25 . 085 1373 1384 D BluetoothA2dpService : Received Meta Data Details Track = Fool ( If You Think It ' s Over ) Artist = Chris Rea Album = The Best Of Chris Rea Trackno = null no . of track = null TrackDuration = null TrackPosition = null 01-25 18 : 54 : 25 . 085 1373 1384 D BluetoothA2dpService : received playstatechanged Action 01-25 18 : 54 : 25 . 249 1226 1367 D AudioHardwareMot : AudioStreamOutMot :: setParameters () fm_attenuate = 0 ; fm_mute = 0 #### Pocket Cast 01-17 19 : 41 : 48 . 420 12280 12298 I AwesomePlayer : play_l 01-17 19 : 41 : 49 . 561 12280 12298 I AwesomePlayer : pause_l 0 #### M\u00fasica 01-25 19 : 03 : 54 . 350 1226 1369 I AwesomePlayer : play_l 01-25 19 : 03 : 54 . 382 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 54 . 421 19958 19958 E TuneWiki : Sending AVRCP command with action : com . android . music . metachanged 01-25 19 : 03 : 54 . 428 1373 1384 D BluetoothA2dpService : received metachanged Action New Build 01-25 19 : 03 : 54 . 428 1373 1384 D BluetoothA2dpService : Received Meta Data Details Track = AUD-20110917-WA0004 Artist = Artista desconocido Album = WhatsApp Audio Trackno = 1 no . of track = 144 TrackDuration = 17040 TrackPosition = 9540 01-25 19 : 03 : 54 . 428 19958 19958 V TuneWiki : MPD - Status Changed : 0 01-25 19 : 03 : 54 . 483 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 54 . 522 19958 19958 D FMControllerService : Starting FMSControllerService , action : tunewiki . intent . action . SWITCH_MPD 01-25 19 : 03 : 55 . 249 19958 19958 E TuneWiki : Starting TunWikiMPD , action : tunewiki . intent . action . HEADSET_SINGLE_CLICK 01-25 19 : 03 : 55 . 249 19958 19958 V TuneWiki : MPD - pause () called 01-25 19 : 03 : 55 . 249 19958 19958 V TuneWiki : MPD - currently playing , so pausing 01-25 19 : 03 : 55 . 257 1226 15028 I AwesomePlayer : pause_l 0 01-25 19 : 03 : 55 . 272 1373 1388 D NotificationService : turn off LED due to Dock full charging 01-25 19 : 03 : 55 . 296 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 55 . 311 19958 19958 E TuneWiki : Sending AVRCP command with action : com . android . music . playerpaused 01-25 19 : 03 : 55 . 311 1373 1384 D BluetoothA2dpService : received paused Action 01-25 19 : 03 : 55 . 311 19958 19958 V TuneWiki : MPD - Status Changed : 1 01-25 19 : 03 : 55 . 327 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 55 . 455 1226 1367 D AudioHardwareMot : AudioStreamOutMot :: setParameters () fm_attenuate = 0 ; fm_mute = 0","title":"Headset Commander"},{"location":"proyectos/headsetcomm.html#headset-commander","text":"","title":"Headset Commander"},{"location":"proyectos/headsetcomm.html#enlaces","text":"How to detect Bluetooth headset key press headset button Using Android Headset Buttons (Earphone Buttons)","title":"Enlaces"},{"location":"proyectos/headsetcomm.html#logcat-playpause","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #### Google Music 01-25 18 : 54 : 23 . 960 1226 1226 I AwesomePlayer : play_l 01-25 18 : 54 : 24 . 007 19228 19232 I dalvikvm : Jit : resizing JitTable from 4096 to 8192 01-25 18 : 54 : 25 . 038 19653 19663 D MediaPlaybackService : Event logging MUSIC_PAUSE_PLAYBACK_REQUESTED : [ 299 , DEFAULT ] / c10a328e-25f5-36a5-bb2b-8642bc8a8f76 01-25 18 : 54 : 25 . 053 1226 1779 I AwesomePlayer : pause_l 0 01-25 18 : 54 : 25 . 061 1373 1388 D NotificationService : turn off LED due to Dock full charging 01-25 18 : 54 : 25 . 085 1373 1384 D BluetoothA2dpService : received playstatechanged Action 01-25 18 : 54 : 25 . 085 1373 1384 D BluetoothA2dpService : Received Meta Data Details Track = Fool ( If You Think It ' s Over ) Artist = Chris Rea Album = The Best Of Chris Rea Trackno = null no . of track = null TrackDuration = null TrackPosition = null 01-25 18 : 54 : 25 . 085 1373 1384 D BluetoothA2dpService : received playstatechanged Action 01-25 18 : 54 : 25 . 249 1226 1367 D AudioHardwareMot : AudioStreamOutMot :: setParameters () fm_attenuate = 0 ; fm_mute = 0 #### Pocket Cast 01-17 19 : 41 : 48 . 420 12280 12298 I AwesomePlayer : play_l 01-17 19 : 41 : 49 . 561 12280 12298 I AwesomePlayer : pause_l 0 #### M\u00fasica 01-25 19 : 03 : 54 . 350 1226 1369 I AwesomePlayer : play_l 01-25 19 : 03 : 54 . 382 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 54 . 421 19958 19958 E TuneWiki : Sending AVRCP command with action : com . android . music . metachanged 01-25 19 : 03 : 54 . 428 1373 1384 D BluetoothA2dpService : received metachanged Action New Build 01-25 19 : 03 : 54 . 428 1373 1384 D BluetoothA2dpService : Received Meta Data Details Track = AUD-20110917-WA0004 Artist = Artista desconocido Album = WhatsApp Audio Trackno = 1 no . of track = 144 TrackDuration = 17040 TrackPosition = 9540 01-25 19 : 03 : 54 . 428 19958 19958 V TuneWiki : MPD - Status Changed : 0 01-25 19 : 03 : 54 . 483 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 54 . 522 19958 19958 D FMControllerService : Starting FMSControllerService , action : tunewiki . intent . action . SWITCH_MPD 01-25 19 : 03 : 55 . 249 19958 19958 E TuneWiki : Starting TunWikiMPD , action : tunewiki . intent . action . HEADSET_SINGLE_CLICK 01-25 19 : 03 : 55 . 249 19958 19958 V TuneWiki : MPD - pause () called 01-25 19 : 03 : 55 . 249 19958 19958 V TuneWiki : MPD - currently playing , so pausing 01-25 19 : 03 : 55 . 257 1226 15028 I AwesomePlayer : pause_l 0 01-25 19 : 03 : 55 . 272 1373 1388 D NotificationService : turn off LED due to Dock full charging 01-25 19 : 03 : 55 . 296 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 55 . 311 19958 19958 E TuneWiki : Sending AVRCP command with action : com . android . music . playerpaused 01-25 19 : 03 : 55 . 311 1373 1384 D BluetoothA2dpService : received paused Action 01-25 19 : 03 : 55 . 311 19958 19958 V TuneWiki : MPD - Status Changed : 1 01-25 19 : 03 : 55 . 327 19958 19958 D DEBUGDEBUG : ALBUM ART WAS NOT FOUND : < unknown > : WhatsApp Audio 01-25 19 : 03 : 55 . 455 1226 1367 D AudioHardwareMot : AudioStreamOutMot :: setParameters () fm_attenuate = 0 ; fm_mute = 0","title":"Logcat play/pause"},{"location":"proyectos/minecraft.html","text":"Minecraft \u00b6 Enlaces \u00b6 Varios \u00b6 How to Create A Minecraft Server Like Mine on your Raspberry Pi Tutorials/Setting up a server Server Commands Minecraft Server Manager How to Run Low-Cost Minecraft on a Raspberry Pi for Block Building on the Cheap :exclamation: MineCraftPi - A Raspberry Pi MineCraft Server Image! : Minecraft se arranca autom\u00e1ticamente desde /etc/rc.local . How to 3D print what you build in Minecraft \u2026 TUTORIAL WITH VIDEO! Minecraft Projects Gu\u00eda / Manual del juego Minecraft Minecraft Crafting y Gu\u00eda de Referencia - La elaboraci\u00f3n de recetas, los valores de datos & Pociones :exclamation: Gu\u00eda de crafteo :exclamation: Mineplex : Servidores de juego con reglas adaptadas (Survival con protecci\u00f3n de terreno y normas \u00e9ticas). Minecraft sobre ARM : Compilaci\u00f3n de librer\u00edas LWJGL y OpenAL para lanzar Minecraft (completo, no Pocket edition) sobre ARM. MineOS: Minecraft hosting improved How to setup Minecraft 1.8.9 on RaspPi2 OptiFine : Mod para tunear Minecraft en placas poco potentes. Instrucciones aqu\u00ed . Debian/Ubuntu repository for Games/Emulators/Kernel : Repositorio con versi\u00f3n de Minecraft modificada para funcionar en ARM. Instrucciones aqu\u00ed . Educaci\u00f3n \u00b6 Video de educador que usa Minecraft Minecraft Edu Minecraft Edu Wiki Teaching with MinecraftEdu MinecraftEdu World Library Logic Gates : Mundo MinecraftEdu que explica las puertas l\u00f3gicas b\u00e1sicas. Paleontology : Mundo MinecraftEdu en el que hay un esqueleto de dinosaurio enterrado. Obstacle Course : Yincana. Escape from Everest Tutorial World Recursos educativos para Minecraft Opciones: Mecanismos Redstone Construcci\u00f3n con recursos limitados (como lo que hace Joel Levin ) Yincana (tipo Obstacle Course ) Aventura (tipo Escape from Everest ) Descubrimiento (tipo Paleontology o mundos tipo museo) Construcci\u00f3n de un modelo que luego se imprimir\u00e1 con la impresora 3D gracias a Printbot . La caza del tesoro. Por ejemplo esconder un objeto valioso en una gruta profunda y complicada. Dar pistas en carteles en forma de acertijos. Mecanismos \u00b6 Tutoriales/Mecanismos Introduction to Redstone Servidores \u00b6 MCServer Mineserver Descarga servidor oficial Mirror de Bukkit y Spigot para sortear DMCA Configuraciones \u00b6 server.properties Bukkit.yml fichero de configuraci\u00f3n de Craftbukkit y Spigot spigot.yml fichero de configuraci\u00f3n de Spigot Plugins interesantes \u00b6 NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder ClearLagg Dynmap : Mapa 2D din\u00e1mico. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . StopRain : Desactiva la lluvia. Essentials Printbot : Impresi\u00f3n 3D de partes de un mundo. Tiene dependencias con los plugins WorldGuard y con WorldEdit . Hay bastante sensibilidad con las versiones. Una combinaci\u00f3n que se ha probado que funciona es: WorldEdit v5.5.8 WorldGuard v5.9 Printbot v1.5.0 Ejecuci\u00f3n Servidor en Raspberry Pi y/o ODROID-C1 \u00b6 Comandos para arrancarlo \u00b6 Raspberry Pi \u00b6 1 $ sudo java -Xms256M -Xmx496M -jar /home/mine/spigot/spigot.jar nogui Raspberry Pi 2 o ODROID-C1 \u00b6 1 $ sudo java -Xms512M -Xmx768M -jar /home/mine/spigot/spigot.jar nogui Settings aconsejadas \u00b6 ( Fuente ) server.properties 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #Minecraft server properties #Thu Jan 03 16:16:28 WET 2013 level-name=world #Determina la carpeta donde se almacena el mundo. Por tanto sirve para cambiar de mundo level-type=DEFAULT server-name=Niubit Server motd=Raspberry Pi Minecraft server max-players=6 #M\u00e1ximo de jugadores admitidos online-mode=false spawn-monsters=false #No se generan monstruos spawn-npcs=false #No se generan vecinos (villagers) spawn-animals=true #Se generan animales spawn-protection=16 generate-structures=true #Determina si se generan estructuras (como ciudades) gamemode=1 #Creative difficulty=0 #Peaceful pvp=false #No se permiten da\u00f1os entre jugadores view-distance=4 #Es una medida del radio de visi\u00f3n que tienen los jugadores. Influye en el rendimiento del servidor allow-flight=true #En modo Creative creo que se permite siempre allow-nether=false white-list=false #Si se activa s\u00f3lo se permitir\u00e1 la incorporaci\u00f3n a la partida de determinados jugadores level-seed= server-ip= enable-query=false #Si se permite obtener informaci\u00f3n del servidor mediante el protocolo GameSpy4 hardcore=false enable-rcon=false generator-settings= server-port=25565 max-build-height=256 #Altura m\u00e1xima permitida para construir, aunque el terreno generado puede superarla snooper-enabled=false #Si se env\u00edan peri\u00f3dicamente datos a snoop.minecraft.net op-permission-level=4 #Nivel m\u00e1ximo de permisos de op announce-player-achievements=true #Se anuncian los logros obtenidos por los jugadores debug=false force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador resource-pack= enable-command-block=false player-idle-timeout=0 bukkit.yml 1 2 settings : allow - end : false # Desactiva el End ( http :// minecraft . gamepedia . com / The_End ) spigot.yml 1 2 3 world-settings: default: view-distance: 4 plugins/WorldBorder/config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 cfg-version: 11 message: Has alcanzado el l\u00edmite de este mundo. round-border: false debug-mode: false whoosh-effect: true portal-redirection: true knock-back-dist: 3.0 timer-delay-ticks: 5 remount-delay-ticks: 0 dynmap-border-enabled: true dynmap-border-message: Has alcanzado el l\u00edmite de este mundo. player-killed-bad-spawn: false deny-enderpearl: true fill-autosave-frequency: 30 bypass-list-uuids: [] fill-memory-tolerance: 500 worlds: taller1: # Nombre del mundo a limitar x: 0 z: 0 radiusX: 80 radiusZ: 80 wrapping: false Comandos \u00fatiles \u00b6 Terminal Linux \u00b6 sudo chown -R usuario:grupo directorio : Asigna el usuario y el grupo recursivamente a partir del directorio indicado. sudo poweroff : Apagar la m\u00e1quina. sudo reboot : Reiniciar la m\u00e1quina. ifconfig eth0 : Datos de TCP/IP del adaptador de red eth0 (tarjeta de red ethernet; los adaptadores wifi suelen llamarse wlan0 ). sudo nmap -sP 192.168.1.0/24 : Escanea la red local 192.168.1.0 para encontrar m\u00e1quinas conectadas a ella. Servidor Minecraft \u00b6 gamerule doDaylightCycle false : Paramos el reloj. time set 6000 : Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda. tp <jugador> [<x> <y> <z>] : Teleporta a un jugador a una posici\u00f3n. setworldspawn <x> <y> <z> : Definimos el punto de spawn del mundo. toggledownfall : Activa/desactiva la lluvia. weather rain <segundos> : Activa la lluvia durante los segundos indicados. weather clear <segundos> : Desactiva la lluvia/nieve durante los segundos indicados. gamerule doFireTick false : Evita que se propague el fuego. gamerule doMobSpawning false : Evita que se generen Mobs (pasivos y enemigos). Util para evitar distracciones. gamerule keepInventory true : Evita que los jugadores pierdan su inventario al morir. give <jugador> <elemento> [cantidad] [data] [dataTag] : Dar un elemento a un jugador. gamemode <modo> [jugador] : Asigna el modo de juego a uno o a todos los jugadores de entre los siguientes posibles: adventure , creative , survival kick <jugador> : Expulsar a un jugador de la partida. ban <player> : Expulsar a un jugador del servidor. Plugins \u00b6 WorldBorder \u00b6 wb shape square : Ajustamos el tipo de borde a cuadrado. wb <nombre_mundo> set 100 spawn : Ajustamos el radio del borde del mundo. wb <nombre_mundo> fill : Forzamos la generaci\u00f3n del mundo dentro del l\u00edmite. wb <nombre_mundo> trim : Eliminamos el mapeado del mundo que queda fuera del l\u00edmite. wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" : Ajustamos el mensaje que ven los jugadores al alcanzar el l\u00edmite. Dynmap \u00b6 dynmap fullrender <world-name> : Genera el mapa que inicialmente aparece en negro. WorldEdit \u00b6 Los comandos de WorldEdit s\u00f3lo se pueden lanzar desde la consola que hay dentro del juego (tecla T ). Por ese motivo llevan la / delante, aunque curiosamente la mayor\u00eda de los comandos de WorldEdit llevan una doble / en realidad. Para poder utilizar WorldEdit el jugador debe ser operador (comando op <jugador> desde consola. Hay que acordarse de quitar el permiso de operador a todos los jugadores para no tener problemas de bloqueo de bloques alrededor del punto de spawn. //wand : Te otorga la herramienta para definir regiones c\u00fabicas o planas. //walls <material> : Construye las 4 paredes del paralelep\u00edpedo definido por la selecci\u00f3n (dejando el suelo y techo sin construir). //faces <material> : Construye las 6 paredes del paralelep\u00edpedo definido por la selecci\u00f3n. //set <material> : Rellena todo el paralelep\u00edpedo definido por la selecci\u00f3n. La documentaci\u00f3n de WorldEdit est\u00e1 aqu\u00ed . Versi\u00f3n imprimible aqu\u00ed . Printbot \u00b6 Para poder utilizar este plugin, necesitamos tener instalados los plugins de WorldEdit y WorldGuard. Los comandos de Printbot s\u00f3lo se pueden lanzar siendo op. /printselection : Previamente deberemos haber hecho una selecci\u00f3n por medio de WorldEdit. Este comando env\u00eda informaci\u00f3n sobre lo que contenga la selecci\u00f3n a los servidores de Printbot y tras un periodo de proceso aparece en la consola del juego una URL que nos permitir\u00e1 descargar el fichero STL que podremos imprimir con la impresora 3D. Montaje de un mundo plano para talleres \u00b6 Antes de empezar paramos el servidor. Generamos un mundo nuevo cambiando lo siguiente en server.properties : 1 2 3 4 5 6 7 8 9 10 level-type=FLAT level-name=taller1 allow-nether=false gamemode=1 #Creative difficulty=0 #Peaceful generate-structures=false #No se generan estructuras (como ciudades) spawn-npcs=false #No se generan vecinos (villagers) online-mode=false spawn-animals=false #No se generan animales force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador Instalamos los siguientes plugins: StopRain : Desactiva la lluvia. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder Arrancamos el servidor. Por medio de comandos lo modelamos: 1 2 3 4 5 6 7 8 9 10 setworldspawn 0 20 0 wb shape square wb taller1 set 80 spawn # Lo limitamos a un cuadrado de 160x160 en torno al punto de spawn wb taller1 fill # Generamos el mundo wb fill confirm wb taller1 trim # Eliminamos lo que sobra wb trim confirm wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" # Ajustamos mensajes gamerule doDaylightCycle false # Paramos el reloj time set 6000 # Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda Bloques \u00b6 Es \u00fatil tener a mano esta gu\u00eda , aunque tiene el inconveniente de que est\u00e1 en ingl\u00e9s y que parece de una versi\u00f3n distinta a la que solemos usar, porque hay elementos de esta lista que no aparecen en nuestro servidor. Indico el nombre del elemento en ingl\u00e9s, luego su c\u00f3digo y finalmente el nombre del elemento en espa\u00f1ol: LEASH - 420 - Riendas IRON_BARDING - 417 - Armadura de caballo de hierro BOW - 261 - Arco ARROW - 262 - Flechas SADDLE - 329 - Silla de montar FENCE - 85 - Valla DIRT - 3 - Tierra BEDROCK - 7 - Piedra base Otras gu\u00edas en formato gr\u00e1fico se han sacado de esta p\u00e1gina : Instalaci\u00f3n MineOS en ODROID-C1 \u00b6 Como requerimiento previo, tendremos que tener instalado el JDK de Java, preferiblemente a partir de la versi\u00f3n 8. Aparte de eso, ejecutar los siguientes comandos: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ sudo apt-get update $ sudo apt-get -y install screen python-cherrypy3 rdiff-backup git $ sudo mkdir -p /usr/games $ cd /usr/games $ sudo git clone git://github.com/hexparrot/mineos minecraft $ cd minecraft $ sudo git config core.filemode false $ sudo chmod +x server.py mineos_console.py generate-sslcert.sh $ sudo ln -s /usr/games/minecraft/mineos_console.py /usr/local/bin/mineos $ sudo cp /usr/games/minecraft/init/mineos /etc/init.d/ $ sudo chmod 744 /etc/init.d/mineos $ sudo update-rc.d mineos defaults $ sudo cp /usr/games/minecraft/init/minecraft /etc/init.d/ $ sudo chmod 744 /etc/init.d/minecraft $ sudo update-rc.d minecraft defaults $ sudo cp /usr/games/minecraft/mineos.conf /etc/ $ cd /usr/games/minecraft $ sudo ./generate-sslcert.sh $ sudo service mineos start A partir de ahora accederemos a la consola web en la direcci\u00f3n: https://ODROID_IP:8080","title":"Minecraft"},{"location":"proyectos/minecraft.html#minecraft","text":"","title":"Minecraft"},{"location":"proyectos/minecraft.html#enlaces","text":"","title":"Enlaces"},{"location":"proyectos/minecraft.html#varios","text":"How to Create A Minecraft Server Like Mine on your Raspberry Pi Tutorials/Setting up a server Server Commands Minecraft Server Manager How to Run Low-Cost Minecraft on a Raspberry Pi for Block Building on the Cheap :exclamation: MineCraftPi - A Raspberry Pi MineCraft Server Image! : Minecraft se arranca autom\u00e1ticamente desde /etc/rc.local . How to 3D print what you build in Minecraft \u2026 TUTORIAL WITH VIDEO! Minecraft Projects Gu\u00eda / Manual del juego Minecraft Minecraft Crafting y Gu\u00eda de Referencia - La elaboraci\u00f3n de recetas, los valores de datos & Pociones :exclamation: Gu\u00eda de crafteo :exclamation: Mineplex : Servidores de juego con reglas adaptadas (Survival con protecci\u00f3n de terreno y normas \u00e9ticas). Minecraft sobre ARM : Compilaci\u00f3n de librer\u00edas LWJGL y OpenAL para lanzar Minecraft (completo, no Pocket edition) sobre ARM. MineOS: Minecraft hosting improved How to setup Minecraft 1.8.9 on RaspPi2 OptiFine : Mod para tunear Minecraft en placas poco potentes. Instrucciones aqu\u00ed . Debian/Ubuntu repository for Games/Emulators/Kernel : Repositorio con versi\u00f3n de Minecraft modificada para funcionar en ARM. Instrucciones aqu\u00ed .","title":"Varios"},{"location":"proyectos/minecraft.html#educacion","text":"Video de educador que usa Minecraft Minecraft Edu Minecraft Edu Wiki Teaching with MinecraftEdu MinecraftEdu World Library Logic Gates : Mundo MinecraftEdu que explica las puertas l\u00f3gicas b\u00e1sicas. Paleontology : Mundo MinecraftEdu en el que hay un esqueleto de dinosaurio enterrado. Obstacle Course : Yincana. Escape from Everest Tutorial World Recursos educativos para Minecraft Opciones: Mecanismos Redstone Construcci\u00f3n con recursos limitados (como lo que hace Joel Levin ) Yincana (tipo Obstacle Course ) Aventura (tipo Escape from Everest ) Descubrimiento (tipo Paleontology o mundos tipo museo) Construcci\u00f3n de un modelo que luego se imprimir\u00e1 con la impresora 3D gracias a Printbot . La caza del tesoro. Por ejemplo esconder un objeto valioso en una gruta profunda y complicada. Dar pistas en carteles en forma de acertijos.","title":"Educaci\u00f3n"},{"location":"proyectos/minecraft.html#mecanismos","text":"Tutoriales/Mecanismos Introduction to Redstone","title":"Mecanismos"},{"location":"proyectos/minecraft.html#servidores","text":"MCServer Mineserver Descarga servidor oficial Mirror de Bukkit y Spigot para sortear DMCA","title":"Servidores"},{"location":"proyectos/minecraft.html#configuraciones","text":"server.properties Bukkit.yml fichero de configuraci\u00f3n de Craftbukkit y Spigot spigot.yml fichero de configuraci\u00f3n de Spigot","title":"Configuraciones"},{"location":"proyectos/minecraft.html#plugins-interesantes","text":"NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder ClearLagg Dynmap : Mapa 2D din\u00e1mico. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . StopRain : Desactiva la lluvia. Essentials Printbot : Impresi\u00f3n 3D de partes de un mundo. Tiene dependencias con los plugins WorldGuard y con WorldEdit . Hay bastante sensibilidad con las versiones. Una combinaci\u00f3n que se ha probado que funciona es: WorldEdit v5.5.8 WorldGuard v5.9 Printbot v1.5.0","title":"Plugins interesantes"},{"location":"proyectos/minecraft.html#ejecucion-servidor-en-raspberry-pi-yo-odroid-c1","text":"","title":"Ejecuci\u00f3n Servidor en Raspberry Pi y/o ODROID-C1"},{"location":"proyectos/minecraft.html#comandos-para-arrancarlo","text":"","title":"Comandos para arrancarlo"},{"location":"proyectos/minecraft.html#raspberry-pi","text":"1 $ sudo java -Xms256M -Xmx496M -jar /home/mine/spigot/spigot.jar nogui","title":"Raspberry Pi"},{"location":"proyectos/minecraft.html#raspberry-pi-2-o-odroid-c1","text":"1 $ sudo java -Xms512M -Xmx768M -jar /home/mine/spigot/spigot.jar nogui","title":"Raspberry Pi 2 o ODROID-C1"},{"location":"proyectos/minecraft.html#settings-aconsejadas","text":"( Fuente ) server.properties 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #Minecraft server properties #Thu Jan 03 16:16:28 WET 2013 level-name=world #Determina la carpeta donde se almacena el mundo. Por tanto sirve para cambiar de mundo level-type=DEFAULT server-name=Niubit Server motd=Raspberry Pi Minecraft server max-players=6 #M\u00e1ximo de jugadores admitidos online-mode=false spawn-monsters=false #No se generan monstruos spawn-npcs=false #No se generan vecinos (villagers) spawn-animals=true #Se generan animales spawn-protection=16 generate-structures=true #Determina si se generan estructuras (como ciudades) gamemode=1 #Creative difficulty=0 #Peaceful pvp=false #No se permiten da\u00f1os entre jugadores view-distance=4 #Es una medida del radio de visi\u00f3n que tienen los jugadores. Influye en el rendimiento del servidor allow-flight=true #En modo Creative creo que se permite siempre allow-nether=false white-list=false #Si se activa s\u00f3lo se permitir\u00e1 la incorporaci\u00f3n a la partida de determinados jugadores level-seed= server-ip= enable-query=false #Si se permite obtener informaci\u00f3n del servidor mediante el protocolo GameSpy4 hardcore=false enable-rcon=false generator-settings= server-port=25565 max-build-height=256 #Altura m\u00e1xima permitida para construir, aunque el terreno generado puede superarla snooper-enabled=false #Si se env\u00edan peri\u00f3dicamente datos a snoop.minecraft.net op-permission-level=4 #Nivel m\u00e1ximo de permisos de op announce-player-achievements=true #Se anuncian los logros obtenidos por los jugadores debug=false force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador resource-pack= enable-command-block=false player-idle-timeout=0 bukkit.yml 1 2 settings : allow - end : false # Desactiva el End ( http :// minecraft . gamepedia . com / The_End ) spigot.yml 1 2 3 world-settings: default: view-distance: 4 plugins/WorldBorder/config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 cfg-version: 11 message: Has alcanzado el l\u00edmite de este mundo. round-border: false debug-mode: false whoosh-effect: true portal-redirection: true knock-back-dist: 3.0 timer-delay-ticks: 5 remount-delay-ticks: 0 dynmap-border-enabled: true dynmap-border-message: Has alcanzado el l\u00edmite de este mundo. player-killed-bad-spawn: false deny-enderpearl: true fill-autosave-frequency: 30 bypass-list-uuids: [] fill-memory-tolerance: 500 worlds: taller1: # Nombre del mundo a limitar x: 0 z: 0 radiusX: 80 radiusZ: 80 wrapping: false","title":"Settings aconsejadas"},{"location":"proyectos/minecraft.html#comandos-utiles","text":"","title":"Comandos \u00fatiles"},{"location":"proyectos/minecraft.html#terminal-linux","text":"sudo chown -R usuario:grupo directorio : Asigna el usuario y el grupo recursivamente a partir del directorio indicado. sudo poweroff : Apagar la m\u00e1quina. sudo reboot : Reiniciar la m\u00e1quina. ifconfig eth0 : Datos de TCP/IP del adaptador de red eth0 (tarjeta de red ethernet; los adaptadores wifi suelen llamarse wlan0 ). sudo nmap -sP 192.168.1.0/24 : Escanea la red local 192.168.1.0 para encontrar m\u00e1quinas conectadas a ella.","title":"Terminal Linux"},{"location":"proyectos/minecraft.html#servidor-minecraft","text":"gamerule doDaylightCycle false : Paramos el reloj. time set 6000 : Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda. tp <jugador> [<x> <y> <z>] : Teleporta a un jugador a una posici\u00f3n. setworldspawn <x> <y> <z> : Definimos el punto de spawn del mundo. toggledownfall : Activa/desactiva la lluvia. weather rain <segundos> : Activa la lluvia durante los segundos indicados. weather clear <segundos> : Desactiva la lluvia/nieve durante los segundos indicados. gamerule doFireTick false : Evita que se propague el fuego. gamerule doMobSpawning false : Evita que se generen Mobs (pasivos y enemigos). Util para evitar distracciones. gamerule keepInventory true : Evita que los jugadores pierdan su inventario al morir. give <jugador> <elemento> [cantidad] [data] [dataTag] : Dar un elemento a un jugador. gamemode <modo> [jugador] : Asigna el modo de juego a uno o a todos los jugadores de entre los siguientes posibles: adventure , creative , survival kick <jugador> : Expulsar a un jugador de la partida. ban <player> : Expulsar a un jugador del servidor.","title":"Servidor Minecraft"},{"location":"proyectos/minecraft.html#plugins","text":"","title":"Plugins"},{"location":"proyectos/minecraft.html#worldborder","text":"wb shape square : Ajustamos el tipo de borde a cuadrado. wb <nombre_mundo> set 100 spawn : Ajustamos el radio del borde del mundo. wb <nombre_mundo> fill : Forzamos la generaci\u00f3n del mundo dentro del l\u00edmite. wb <nombre_mundo> trim : Eliminamos el mapeado del mundo que queda fuera del l\u00edmite. wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" : Ajustamos el mensaje que ven los jugadores al alcanzar el l\u00edmite.","title":"WorldBorder"},{"location":"proyectos/minecraft.html#dynmap","text":"dynmap fullrender <world-name> : Genera el mapa que inicialmente aparece en negro.","title":"Dynmap"},{"location":"proyectos/minecraft.html#worldedit","text":"Los comandos de WorldEdit s\u00f3lo se pueden lanzar desde la consola que hay dentro del juego (tecla T ). Por ese motivo llevan la / delante, aunque curiosamente la mayor\u00eda de los comandos de WorldEdit llevan una doble / en realidad. Para poder utilizar WorldEdit el jugador debe ser operador (comando op <jugador> desde consola. Hay que acordarse de quitar el permiso de operador a todos los jugadores para no tener problemas de bloqueo de bloques alrededor del punto de spawn. //wand : Te otorga la herramienta para definir regiones c\u00fabicas o planas. //walls <material> : Construye las 4 paredes del paralelep\u00edpedo definido por la selecci\u00f3n (dejando el suelo y techo sin construir). //faces <material> : Construye las 6 paredes del paralelep\u00edpedo definido por la selecci\u00f3n. //set <material> : Rellena todo el paralelep\u00edpedo definido por la selecci\u00f3n. La documentaci\u00f3n de WorldEdit est\u00e1 aqu\u00ed . Versi\u00f3n imprimible aqu\u00ed .","title":"WorldEdit"},{"location":"proyectos/minecraft.html#printbot","text":"Para poder utilizar este plugin, necesitamos tener instalados los plugins de WorldEdit y WorldGuard. Los comandos de Printbot s\u00f3lo se pueden lanzar siendo op. /printselection : Previamente deberemos haber hecho una selecci\u00f3n por medio de WorldEdit. Este comando env\u00eda informaci\u00f3n sobre lo que contenga la selecci\u00f3n a los servidores de Printbot y tras un periodo de proceso aparece en la consola del juego una URL que nos permitir\u00e1 descargar el fichero STL que podremos imprimir con la impresora 3D.","title":"Printbot"},{"location":"proyectos/minecraft.html#montaje-de-un-mundo-plano-para-talleres","text":"Antes de empezar paramos el servidor. Generamos un mundo nuevo cambiando lo siguiente en server.properties : 1 2 3 4 5 6 7 8 9 10 level-type=FLAT level-name=taller1 allow-nether=false gamemode=1 #Creative difficulty=0 #Peaceful generate-structures=false #No se generan estructuras (como ciudades) spawn-npcs=false #No se generan vecinos (villagers) online-mode=false spawn-animals=false #No se generan animales force-gamemode=true #Fuerza la configuraci\u00f3n del servidor a cada jugador Instalamos los siguientes plugins: StopRain : Desactiva la lluvia. WorldEdit : Editor de mundos. Comandos aqu\u00ed . Documentaci\u00f3n aqu\u00ed . NoSpawnChunks : Prevents spawn chunks being loaded into memory for all worlds on the server. WorldBorder Arrancamos el servidor. Por medio de comandos lo modelamos: 1 2 3 4 5 6 7 8 9 10 setworldspawn 0 20 0 wb shape square wb taller1 set 80 spawn # Lo limitamos a un cuadrado de 160x160 en torno al punto de spawn wb taller1 fill # Generamos el mundo wb fill confirm wb taller1 trim # Eliminamos lo que sobra wb trim confirm wb setmsg \"Has alcanzado el l\u00edmite de este mundo.\" # Ajustamos mensajes gamerule doDaylightCycle false # Paramos el reloj time set 6000 # Pone el reloj al mediod\u00eda # Fijamos el reloj al mediod\u00eda","title":"Montaje de un mundo plano para talleres"},{"location":"proyectos/minecraft.html#bloques","text":"Es \u00fatil tener a mano esta gu\u00eda , aunque tiene el inconveniente de que est\u00e1 en ingl\u00e9s y que parece de una versi\u00f3n distinta a la que solemos usar, porque hay elementos de esta lista que no aparecen en nuestro servidor. Indico el nombre del elemento en ingl\u00e9s, luego su c\u00f3digo y finalmente el nombre del elemento en espa\u00f1ol: LEASH - 420 - Riendas IRON_BARDING - 417 - Armadura de caballo de hierro BOW - 261 - Arco ARROW - 262 - Flechas SADDLE - 329 - Silla de montar FENCE - 85 - Valla DIRT - 3 - Tierra BEDROCK - 7 - Piedra base Otras gu\u00edas en formato gr\u00e1fico se han sacado de esta p\u00e1gina :","title":"Bloques"},{"location":"proyectos/minecraft.html#instalacion-mineos-en-odroid-c1","text":"Como requerimiento previo, tendremos que tener instalado el JDK de Java, preferiblemente a partir de la versi\u00f3n 8. Aparte de eso, ejecutar los siguientes comandos: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ sudo apt-get update $ sudo apt-get -y install screen python-cherrypy3 rdiff-backup git $ sudo mkdir -p /usr/games $ cd /usr/games $ sudo git clone git://github.com/hexparrot/mineos minecraft $ cd minecraft $ sudo git config core.filemode false $ sudo chmod +x server.py mineos_console.py generate-sslcert.sh $ sudo ln -s /usr/games/minecraft/mineos_console.py /usr/local/bin/mineos $ sudo cp /usr/games/minecraft/init/mineos /etc/init.d/ $ sudo chmod 744 /etc/init.d/mineos $ sudo update-rc.d mineos defaults $ sudo cp /usr/games/minecraft/init/minecraft /etc/init.d/ $ sudo chmod 744 /etc/init.d/minecraft $ sudo update-rc.d minecraft defaults $ sudo cp /usr/games/minecraft/mineos.conf /etc/ $ cd /usr/games/minecraft $ sudo ./generate-sslcert.sh $ sudo service mineos start A partir de ahora accederemos a la consola web en la direcci\u00f3n: https://ODROID_IP:8080","title":"Instalaci\u00f3n MineOS en ODROID-C1"},{"location":"sistemas/android_system.html","text":"Android \u00b6 Enlaces \u00b6 Mount a filesystem read-write HTC Super Tool Unlock Root Link2SD Como Desrootear tu terminal Simple ADB Backup - Full backup without root Desbloquea el bootloader de tu HTC f\u00e1cilmente con Firewater S-Off Los m\u00f3viles perfectos a los que instalar CyanogenMod y que te duren muchos a\u00f1os Aplicaciones interesantes \u00b6 KK Easy Launcher(Big Launcher) Files Go : Ayuda a limpiar el sistema. SD Maid : Ayuda a limpiar el sistema. Dispositivos \u00b6 OnePlus 5 \u00b6 Enlaces \u00b6 C\u00f3mo evitar que OnePlus recopile informaci\u00f3n del usuario sin conocimiento C\u00f3mo instalar Android Oreo 8.0 en el OnePlus 5 Eliminaci\u00f3n servicio OnePlus System Service \u00b6 Este servicio recopila informaci\u00f3n privada como ha reconocido la propia OnePlus . La forma de desinstalarlo es abriendo una shell por ADB y ejecutando un comando: 1 2 3 $ ./adb shell OnePlus5:/ $ pm uninstall -k --user 0 net.oneplus.odm Success Previamente se recomienda hacer un backup de este paquete por si tras desinstalarlo el sistema queda inestable. Esto lo podemos hacer localizando el directorio del apk con App Inspector y lanzando el siguiente comando: 1 $ ./adb pull <ruta> OnePlus One \u00b6 Enlaces \u00b6 How to Unlock Bootloader, Install Custom Recovery and Root OxygenOS is here [Installation Guide] OnePlus One Update: Manually Install CyanogenMod OS 12 CM12 [TUTORIAL] Mirrors for official Cyanogen roms and OTA updates TWRP for bacon Cyanogem Support : Im\u00e1genes de f\u00e1brica para Oneplus One y el resto de dispositivos que tienen soporte de Cyanogen. Plasma Mobile on Oneplus One Modos arranque \u00b6 Recovery: V- + Power Fastboot: V+ + Power Flasheo de ROM \u00b6 Cuando el m\u00f3vil avise de la disponibilidad de una nueva actualizaci\u00f3n, si est\u00e1 rooteado se producir\u00e1 un error durante el arranque al aplicarla. En ese caso hay que obtener la rom completa (no sirven los parches incrementales) e instalar manualmente desde recovery siguiendo estos pasos ( fuente ): Download the required ROM (full ROM) file for your device from the download section. Now transfer the ROM into your device\u2019s internal storage. Place the file where you can easily locate it. Now reboot into TWRP . To boot into TWRP, power off your phone and press and hold volume down button and power button at the same time. It is highly recommended that you perform a nandroid backup . To backup your ROM, tap on the backup option and select the following elements: System, Data, Boot, Recovery, EFS and swipe the confirmation action to backup. You can skip this step, but if after the installation system doesn\u2019t boot, try this step. After performing the ROM backup, return to the TWRP main menu and tap the Wipe button and select Advanced Wipe . Then wipe Dalvik Cache , System , and Cache . (If after the complete process system does not boot, try wiping the Data as well. But its will remove all your data) Go back to the TWRP main menu again and tap on Install option. Navigate to the ROM file and select it. Swipe the confirmation button to proceed with the installation. The ROM will be installed. Once installed, reboot to system . Reseteo de estad\u00edsticas de bater\u00eda desde TWRP \u00b6 Cargar la bater\u00eda hasta el 100% Arrancar el TWRP recovery Seguir la ruta: Advanced / File Manager Ir a la ruta: /data/system/ Pulsar sobre el fichero batterystats.bin Pulsar Delete Reiniciar el sistema Descargar la bater\u00eda hasta el 2 - 5 % Volver a cargar la bater\u00eda hasta el 100% Instalaci\u00f3n LineageOS \u00b6 ( Fuente ) Si no est\u00e1 ya, instalar el recovery TWRP siguiendo estas instrucciones . Descargar de aqu\u00ed . Opcionalmente bajar las GApps en edici\u00f3n ARM. Copiar los ficheros al directorio /sdcard (en caso de haber perdido la partici\u00f3n de almacenamiento interno por haber instalado UBPorts por ejemplo, copiar los ficheros a un pendrive y pincharlo con un adaptador OTG; el pendrive se ver\u00e1 como /sdcard desde el Recovery). Arrancar en modo Recovery ( V- + Power ). Seleccionar Wipe y despu\u00e9s Advanced Wipe . Seleccionar las particiones Cache , System y Data y despu\u00e9s Swipe to Wipe . Vuelve al men\u00fa principal y selecciona Install . Navega a /sdcard y seleciona el .zip de LineageOS. Sigue las instrucciones en pantalla. (Opcional) Instala el resto de paquetes. Si se van a instalar las GApps, hay que hacerlo antes del primer arranque. Vuelve al men\u00fa principal y selecciona Reboot , y despu\u00e9s System . Motorola Moto E (XT1021) \u00b6 Enlaces \u00b6 Info Cyanogenmod Downloads Cyanogenmod Modos arranque \u00b6 Recovery: Apagado pulsar Power mientras se pulsa Volume- . Cuando salga el logo de Android tumbado con el tri\u00e1ngulo rojo pulsar Volume+ mientras se mantiene pulsado Power . Geeksphone One \u00b6 Enlaces \u00b6 Reset manual Tutorial ROM y Google Apps ROMs \u00b6 SuperAosp 8.6, Rom Basada en Android Open Source Gingerbread CyanogenMod RCMod 3.0.4 RCMod 4.0.0 Configuraci\u00f3n A-GPS \u00b6 Te\u00f3ricamente, el server es: h-slp.mncXXX.mccYYY.pub.3gppnetwork.org En el puerto: 3425 XXX lo cambias por el MNC de tu operador, e YYY por el MCC. En el caso de Simyo MCC=214 y MNC=19 NVSBL P4D Sirius \u00b6 Enlaces \u00b6 SuperOSR ICS v1.4.6 para P4D Sirius Samsung Galaxy mini2 (GT-S6500D) \u00b6 Enlaces \u00b6 Backup EFS folder without rooting Samsung Galaxy mini2 Blog Root y unroot Galaxy Mini 2 HOW TO CHANGE CSC CODE ON SAMSUNG GALAXY GRAND DUOS I9082/I9082L Liberar Galacy Mini 2 Cambiar CSC (Country Specific Code) StockRoms S6500/D/L/T para flashear por CWM CyanogenMod 10 Thewhisp XDA - Galaxy Mini II Android Development XDA - Galaxy Mini II Q&A, Help & Troubleshooting Modos arranque \u00b6 Recovery: V+ V- Home Power Download: V- Home Power HTC Desire \u00b6 Los datos originales del HBOOT de un Desire sin manipular eran: 1 2 3 4 5 BRAVO PVT4 SHIP S-ON HBOOT-0.93.0001 MICROP-051d RADIO-5.11.05.14 Aug 10 2010,17:52:18 Modos de arranque \u00b6 Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power. Enlaces \u00b6 C\u00f3mo rootear HTC Desire Unlock Bootloader (HTC oficial) MIUI-XJ 2.1.6 Gingerbread 2.3.7 para HTC Desire Ice Cream Sandwich con toques de CyanogenMod para HTC Desire Las mejores ROMs para HTC Desire Las mejores Roms para HTC Desire ICS for Desire Chromium AOKP for Bravo - Beta 3! - Stock HBOOT only C\u00f3mo flashear un Recovery en HTC Desire Proceso de instalaci\u00f3n de ROM \u00b6 Hacer S-OFF con revolutionary (ejecutarlo con sudo). Hacer root siguiendo los pasos de El Androide Libre . Instalar el HBOOT Bravo CM7 r2 de AlphaRev . Se hace descargando el fichero de la columna \"PB99IMG\", renombr\u00e1ndolo a \u201cPB99IMG.zip\u201d, copi\u00e1ndolo a la ra\u00edz de la SD y reiniciando en modo HBOOT. Borrar cach\u00e9, Data y Dalvik. Formatear SD desde Recoveery con 1024MB para la ext y 0MB para el swap. Instalar InsertCoin de tipo CM7: http://insertcoin-roms.org/ Samsung Galaxy Note II \u00b6 Enlaces \u00b6 DN4 (Ditto Note 4) ROM from E-team Electron Team (creadores de DN3 y DN4) Sony Xperia T \u00b6 Men\u00fa de servicio \u00b6 1 *#*#7378423#*#* Modos de Reset \u00b6 Volume Up + POWER (for 10 seconds) -> Battery reset [Device will vibrate once] Volume Up + POWER (for 15 seconds) -> Hard reset [Device will vibrate three times] Dispositivos de almacenamiento 4.0 \u00b6 /mnt/sdcard: Memoria interna (16GB) /mnt/ext_card: Tarjeta SD Dispositivos de almacenamiento 4.1 \u00b6 /mnt/int_storage 10.9G 2.6G 8.3G 4096 /storage/sdcard0 10.9G 2.6G 8.3G 4096 /storage/sdcard1 29.7G 2.7G 27.0G 32768 Historial firmware \u00b6 Fecha Versi\u00f3n 2013-07-02 9.1.A.1.141 2014-04 9.2.A.1.199 Enlaces \u00b6 Unlock your boot loader Full rooting guide for xperia t lt30p build 7.0.A.3.195 Xperia Roms Creacion de perfiles completos con Smart Tags + NFC Task Launcker + Tasker \u00bfA cuantos os ha fallado el Xperia T? y soluciones. Servicio T\u00e9cnico Flash tool for Xperia\u2122 devices Lista de Firmwares certificados Xperia T software updates TWRP 2.7 - Sony Xperia T page [4.4 ROM Flash] bypass set_metadata_xxx fails Disable Fast dormancy on sony smarthphones [MOD] Speakerphone whistle fix + volume boost Charging a dead Xperia T ROMs \u00b6 CyanogenMod FreeXperia Project OmniROM ROM(Unlocked)(KITKAT) Plain AOSP for Xperia T ROM(4.4.4)(T/TX) Carbon Rom KK Unofficial ROM(T)(4.3) Ultimate PureXT v4.5 (**) ROM(4.3)(T)(LB/UB) OMeGa v2.2 (**) DooMKernel {JB}(v12)(20140604) Stock ROMs para el Xperia T: HTCMania - XDA GAPPS(4.4.x) OFFICIAL Up-to-Date PA-GOOGLE APPS (All ROM's) (2014-08-18) Repuestos \u00b6 Tapa posterior Instrucciones de instalaci\u00f3n de ROMs \u00b6 power off the phone: hold vol+ and plug usb to boot into fastboot (blu led) fastboot flash boot boot.img (from cm10 zip) fastboot reboot enter recovery, on boot led will be violet for 3'', during this period press vol+ flash rom zip flash gapps zip wipe reboot Desactivar fast-dormancy (pepephone MCC= 214, MNC= 06) \u00b6 In /system/etc/fast-dormancy/fd_custm_conf.txt replace the 0s with your MNC and MCC from your APN setting. Solucion al problema de permisos de la memoria interna ( fuente ) \u00b6 1 2 3 4 $ su # cd /mnt/media_rw # busybox chown -R 2800:2800 sdcard0 # chmod 0770 sdcard0 Sony Xperia U \u00b6 Men\u00fa de servicio \u00b6 1 *#*#7378423#*#* Enlaces \u00b6 Unlock your boot loader DESBLOQUEAR COMPLETAMENTE tu Xperia y poder ROOTEARLO\u2605Aplicar MODS\u2605ROMS Sobre el Bootloader ROMS \u00b6 XDA-Developers Rom List (ROM)(UB)(4.4.4)(W37-S4)(XperiaSTE Team) CyanogenMod 11.0 Rikomagic MK802-IIIs \u00b6 Enlaces \u00b6 PicUntu MK802 Ubuntu Images with optional Droidmote MK802 IIIs en AndroidPC.es ROMS no oficiales funcionando al 100% para meter en los MK802IIIs Foro MK802-IIIS Rikomagic en AndroidPC.es Las mejores tiendas de aplicaciones alternativas a Google Play Configuraciones para mandos y m\u00e9todo para cambiar funciones de las teclas ROMs \u00b6 NEOTV Rom Finless 1.5 para MK802-IIIs Finless rom 1.8 para MK802-III y UG802 Rom Finless 2.0 con Android 4.2.2 para MX1/MX2 y MK802-IIIS con BT Software \u00b6 RetroArch, el Todo-en-1 de emuladores: Playstation, SNES, GBA y muchos m\u00e1s Sopcast Null Input Method TDT \u00b6 Televisi\u00f3n conectando un USB-TDT en tu AndroidPC con chip RK3066 Hardware \u00b6 Adaptador USB LAN + USB HUB Flasheo de Firmware oficial \u00b6 Bajar la \u00faltima versi\u00f3n de la p\u00e1gina oficial . En el paquete recien bajado (en el directorio 0121-IIIS8B\\0121-IIIS8B\\RKBatchTool1.5en\\Driver) se encuentran los drivers de modo Flashboot para Windows. Para Windows8 se pueden encontrar aqu\u00ed . Conectar un cable microUSB-USB a la ranura OTG. El otro extremo (USB) lo introducimos en un puerto libre del ordenador mientras a la vez con un palillo o clip desenrollado pulsamos el bot\u00f3n de reset que se adivina por una de las rejillas de ventilaci\u00f3n. Si Windows muestra un bocadillo pidiendo drivers, le damos a elegir la ruta en disco y apuntas al directorio comentado anteriormente que contenga la versi\u00f3n de los drivers que nos interese. Si Windows no reacciona habr\u00e1 que entrar en el Administrador de dispositivos y forzar la actualizaci\u00f3n sobre alguno de los \"Dispositivos desconocidos\" que veamos. En el directorio \"0121-IIIS8B\\0121-IIIS8B\" del paquete con el firmware viene una explicaci\u00f3n detallada (incluye fotos) del proceso de instalaci\u00f3n de los drivers y de la conexi\u00f3n al ordenador por el puerto OTG mientras se pulsa el reset. Una vez instalados los drivers lo mejor ser\u00e1 reiniciar Windows. Volvemos a conectar el MK802 por el puerto OTG mientras mantenemos pulsado el bot\u00f3n de reset como en el paso 3. Abrimos la aplicaci\u00f3n de flasheo (RKBatchTool). Deber\u00edamos ver en azul el cuadrado inferior izquierdo marcado con un 1. Si no es as\u00ed es que el proceso de instalaci\u00f3n de drivers y/o conexi\u00f3n del MK802 al PC no ha ido bien. Seleccionamos el fichero con la imagen de la ROM (extensi\u00f3n .img). Pulsamos el bot\u00f3n \"Upgrade\". Esperamos a que el proceso termine satisfactoriamente. Puede tardar entre 1 y 3 minutos. Flasheo ROM Finless \u00b6 Bajar el paquete de aqu\u00ed . Instalar los drivers Windows (ver pasos en instalaci\u00f3n ROM oficial). Descomprimir el paquete con la ROM. Conectar el Rikomagic al PC por USB como comentamos en el otro procedimiento, es decir conectando al puerto OTG y mientras se mantiene presionado el microbot\u00f3n de reset oculto entre las rendijas de ventilaci\u00f3n. Abrir el programa \"ROM Flash Tool.exe\" que hay en el primer nivel de directorios del paquete que hemos descomprimido. En la ventana que aparece se ve una serie de ficheros que se toman del subdirectorio \"FinlessROM\". Dentro de ese directorio hay varias opciones para los ficheros \"parameter\", \"kernel\" y \"boot\". El primero yo lo dejar\u00eda como viene por defecto. Los ficheros \"kernel\" y \"boot\" tienen que ir parejos. Hay dos versiones de cada, una para 720p y otra para 1080p. Recomiendan la 720p y por la potencia del Rikomagic (que va justito para los 1080p) yo tambi\u00e9n creo que no merece la pena el 1080p. Como por defecto viene seleccionado el 1080p, hay que cambiarlo. Para ello hay que hacer click en la fila correspondiente de la \u00faltima columna, la que tiene el r\u00f3tulo \"...\". Antes de empezar a flashear hay que comprobar que el programa se comunica con el Rikomagic. Para ello tiene que indicar abajo del todo en letra grande \"Found RKAndroid...\". Si pone \"No Found RKAndroid rock usb\" es que hay alg\u00fan problema con la conexi\u00f3n o los drivers. Simplemente volver a intentar la conexi\u00f3n (pulsando el botoncito). Le damos al bot\u00f3n \"Erase NAND (IDB)\" y luego cuando ese proceso termine le damos a \"Flash ROM\". ZTE Skate / Orange Montecarlo \u00b6 Enlaces \u00b6 Backup original ROM? How to Install CyanogenMod on ZTE Skate (\"skate\") Tutorial Como instalar ClockWorkMod Recovery,Rootear e instalar roms en ZTE skate/OMC [ROM][ZTE Skate] H3 Holo (Dolby Audio + Linaro optimized kernel + frandom + ROW I/O scheduler) HTC Wildfire \u00b6 Modos de arranque \u00b6 Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power. Enlaces \u00b6 Las mejores ROMs para HTC Wildfire S-OFF y rootear para instalar Rom HTC Wildfire: Full Update Guide Nuestras 4 ROM favoritas del 2011 para la HTC Desire Unlock Bootloader (HTC oficial) HTC Wildfire S \u00b6 Enlaces \u00b6 Unlock Bootloader (HTC oficial) HTC Wildfire S ROMs CM9-marvel-KANG MIUI V4 |CM9|ICS 4.0.3| Nuevo m\u00e9todo para conseguir ROOT en el HTC Wildfire S y algunas ROMs CyanogenMod 9.0.0-RC0-Marvel-Alpha2 Motorola Milestone 2 \u00b6 Modos de arranque \u00b6 Se arranca en Recovery encendiendo mientras se mantiene pulsada la tecla X del teclado f\u00edsico. Luego, en Froyo hay que pulsar @. En Gingerbread las dos teclas de volumen a la vez. Se arranca en HBOOT encendiendo mientras se mantiene pulsada la tecla de cursor \"Arriba\" del teclado f\u00edsico. Basebands \u00b6 Tel\u00e9fono original: EPU93_U_00.60.00 ICS 4.0.4 2012-08-15: EPU93ST2_U_03.0C.01 Kernels \u00b6 2.3.4: 2.6.32.9-g7d2667a ICS 4.0.4 2012-08-15: 2.6.32.9-g7d2667a Recomendado por Tezet para JB 4.1.1: 2.6.32.9-g5db7937 a17140@zch68lnxdroid63 #1 Fri Sep 16 17:57:00 CST 2011 Enlaces \u00b6 sbf_flash: Utilidad Linux/Mac para flashear una ROM Motorola Android Software Upgrade News Miledropedia SBF Files Milestone2 en XDA-developers Milestone 2 Actualizacion Gingerbread, CyanogenMOD y MIUI Rootear Motorola Milestone 2 CWM: Clockworkmod Recovery - Droid 2 Bootstrapper Hacer backup s\u00f3lo de System Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 9 for Motorola Milestone 2 MOTO Milestone 2 \u00bb ROM MIUI 1.12.9 The Noob Handbook for Bricked Phones Instalaci\u00f3n verificada de CM7 HOW TO install CyanogenMod/MIUI to your phone ROM Argen2Stone 2.7 RE (Based on Ms2Ginger 2.0) How to install Argen2Stone? Titanium Backup, The Easy Way! MIUI 2.5.25 GB 2.3.7 + ICS Multilanguage for Milestone 2! CyanogenMod 10 for Motorola Milestone 2 (Android 4.1.1) !!! CyanogenMod 9 for Motorola Milestone 2 (Android 4.0.4) MIUI v4 2.7.27 Baseband switcher Please come in,if your ms2 can't contect the GSM Kernel downgrade method for EU/BR/AR Gingerbread (only for BL=3) Multipack (alternativa a gapps) Instalaci\u00f3n SBF \u00b6 Bajar el SBF de aqu\u00ed . Aplicarlo con: sudo sbf_flash rom.sbf Rootear con DoomLoRD . Instalar bootmenu con droid2bootstrap sacado de aqu\u00ed . Instalaci\u00f3n de ROM JB 4.1.1 de tezet \u00b6 Hacer el downgrade del kernel flasheando el sbf que hay aqu\u00ed Al reiniciar deber\u00eda entrar en CWM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik Instalar el Kernel CH GB que indica tezet aqu\u00ed Instalar la ROM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik Sony Ericsson Xperia X8 \u00b6 Enlaces \u00b6 Root Sony Ericsson Xperia X8 With SuperOneClick How To Install Latest xRecovery to Sony Ericsson Xperia X10 CM7.1.0 FXP043 - FreeXperia Project Tutorial para reparar/desbrickear terminales Sony Ericsson How to install GingerXperiaV8 on Sony Ericsson X8 GingerDX para Xperia X8 GingerDX Como instalar un Rom a un Xperia X8 Las mejores ROMs para Sony Ericsson Xperia X8 How to rescue our bricked phone Hard brick warning - read before boot loader unlock SE Tweaker Tool v4.0 (16/2/12) Unlock Bootloader+Kernel Guide Bootloader and kernel guide Desbloquear el Bootloader para Novatos X8 Unlocking the boot loader (Oficial) Debrick \u00b6 Phone-lab Barcelona Movical Santiago de Compostela Liberar.es http://forum.xda-developers.com/showthread.php?t=1292705&page=2 http://forum.xda-developers.com/showthread.php?t=1399381&page=2 http://support.setool.net/showthread.php?3-UPDATES-AND-NEWS/page23 http://forum.xda-developers.com/showthread.php?t=986697&highlight=flash+tool Problem unlocking X8 with new bootloader [Solved] Soluci\u00f3n en el hilo de XDA \"Hard brick warning - read before boot loader unlock\" Xperia testpoint instructions and pictures Unlock Bootloader.Test Point Libera BOOTLOADER POR 15\u20ac OMNIUS O S1TOOL GRATIS T\u00e9cnicas varias \u00b6 Conectar el mando de la PS3 \u00b6 ( Fuente ) Requisitos \u00b6 Nuestro dispositivo Android Deberemos ser Root Dualshock 3 (Sixaxis) Sixaxis Compatibility Checker Sixaxis Controller SixaxisPairTool, que puedes descargarlo desde aqu\u00ed . Configuraci\u00f3n \u00b6 Abrimos el Sixaxis Compatibility Checker Nos aparecer\u00e1 un mensaje y pulsaremos sobre OK Pulsaremos sobre Start y le daremos permisos de Superusuario Si nuestro dispositivo es compatible recibiremos un mensaje dici\u00e9ndonos si nuestro dispositivo es compatible. En caso que de que as\u00ed sea pulsamos sobre Stop y salimos de la aplicaci\u00f3n. En caso de no recibir el mensaje de compatibilidad podemos para aqu\u00ed o seguir y probar suerte ;-) Ahora abrimos Sixaxis Controller App y clicamos sobre start. Le daremos permisos de superusuario al igual que a la otra aplicaci\u00f3n. Entonces obtendremos una direcci\u00f3n de Bluetooth local. Abriremos en nuestro ordenador el Sixaxis Pair Tool y la instalaremos. Despu\u00e9s la abriremos como administrador (bot\u00f3n derecho sobre el icono). Con el programa abierto enchufaremos el Sixaxis en nuestro PC mediante el cable USB. En el Sixaxis Pair Tool veremos una caja vac\u00eda. Ah\u00ed escribiremos la direcci\u00f3n Bluetooth Local que hab\u00edamos obtenido antes. Cuando esto est\u00e9 hecho pulsaremos sobre Update y veremos como la direcci\u00f3n se ha actualizado. Desconectaremos el Sixaxis de nuestro PC. Pulsaremos sobre el bot\u00f3n PS y veremos que ocurre\u2026 Nuestro Sixaxis ya deber\u00eda estar emparejado con nuestro dispositivo Android. ADB en Linux y arrancar settings \u00b6 Instalar el SDK. Sacar id de fabricante de lsusb (http://bradchow.wordpress.com/2009/02/16/adb-on-windows-and-ubuntu-linux/) y crear rule udev. Reiniciar adb server: adb kill-server sudo adb start-server adb devices Ejecutar: sudo adb shell am start -a android.intent.action.MAIN -n com.android.settings/.Settings Montar system en rw: \u00b6 1 2 3 4 # mount -o remount,rw /system # cd /system/app # mount -o remount,ro /system # reboot recovery Desinstalar aplicaciones de sistema sin root \u00b6 Fuente Activa el modo de depuraci\u00f3n en tu Android. Conecta tu Android al ordenador por USB y acepta la clave RSA. Abre una ventana de comandos y escribe adb devices sin las comillas. Tu dispositivo deber\u00eda detectarse apareciendo a modo de c\u00f3digo. Una vez conectado escribe adb shell . Ahora necesitas eliminar una a una las aplicaciones que desees. Utiliza App Inspector para saber el nombre del paquete. Pega este c\u00f3digo en la ventana de comandos: pm uninstall -k -user 0 nombre.del.paquete . Sin las comillas y cambiando \u201cnombre.del.paquete\u201d por el de la aplicaci\u00f3n que deseas (Google Chrome es com.android.chrome , por ejemplo). Acepta el comando y si el ordenador te devuelve un Success es que se ha eliminado de manera satisfactoria.","title":"Android"},{"location":"sistemas/android_system.html#android","text":"","title":"Android"},{"location":"sistemas/android_system.html#enlaces","text":"Mount a filesystem read-write HTC Super Tool Unlock Root Link2SD Como Desrootear tu terminal Simple ADB Backup - Full backup without root Desbloquea el bootloader de tu HTC f\u00e1cilmente con Firewater S-Off Los m\u00f3viles perfectos a los que instalar CyanogenMod y que te duren muchos a\u00f1os","title":"Enlaces"},{"location":"sistemas/android_system.html#aplicaciones-interesantes","text":"KK Easy Launcher(Big Launcher) Files Go : Ayuda a limpiar el sistema. SD Maid : Ayuda a limpiar el sistema.","title":"Aplicaciones interesantes"},{"location":"sistemas/android_system.html#dispositivos","text":"","title":"Dispositivos"},{"location":"sistemas/android_system.html#oneplus-5","text":"","title":"OnePlus 5"},{"location":"sistemas/android_system.html#enlaces_1","text":"C\u00f3mo evitar que OnePlus recopile informaci\u00f3n del usuario sin conocimiento C\u00f3mo instalar Android Oreo 8.0 en el OnePlus 5","title":"Enlaces"},{"location":"sistemas/android_system.html#eliminacion-servicio-oneplus-system-service","text":"Este servicio recopila informaci\u00f3n privada como ha reconocido la propia OnePlus . La forma de desinstalarlo es abriendo una shell por ADB y ejecutando un comando: 1 2 3 $ ./adb shell OnePlus5:/ $ pm uninstall -k --user 0 net.oneplus.odm Success Previamente se recomienda hacer un backup de este paquete por si tras desinstalarlo el sistema queda inestable. Esto lo podemos hacer localizando el directorio del apk con App Inspector y lanzando el siguiente comando: 1 $ ./adb pull <ruta>","title":"Eliminaci\u00f3n servicio OnePlus System Service"},{"location":"sistemas/android_system.html#oneplus-one","text":"","title":"OnePlus One"},{"location":"sistemas/android_system.html#enlaces_2","text":"How to Unlock Bootloader, Install Custom Recovery and Root OxygenOS is here [Installation Guide] OnePlus One Update: Manually Install CyanogenMod OS 12 CM12 [TUTORIAL] Mirrors for official Cyanogen roms and OTA updates TWRP for bacon Cyanogem Support : Im\u00e1genes de f\u00e1brica para Oneplus One y el resto de dispositivos que tienen soporte de Cyanogen. Plasma Mobile on Oneplus One","title":"Enlaces"},{"location":"sistemas/android_system.html#modos-arranque","text":"Recovery: V- + Power Fastboot: V+ + Power","title":"Modos arranque"},{"location":"sistemas/android_system.html#flasheo-de-rom","text":"Cuando el m\u00f3vil avise de la disponibilidad de una nueva actualizaci\u00f3n, si est\u00e1 rooteado se producir\u00e1 un error durante el arranque al aplicarla. En ese caso hay que obtener la rom completa (no sirven los parches incrementales) e instalar manualmente desde recovery siguiendo estos pasos ( fuente ): Download the required ROM (full ROM) file for your device from the download section. Now transfer the ROM into your device\u2019s internal storage. Place the file where you can easily locate it. Now reboot into TWRP . To boot into TWRP, power off your phone and press and hold volume down button and power button at the same time. It is highly recommended that you perform a nandroid backup . To backup your ROM, tap on the backup option and select the following elements: System, Data, Boot, Recovery, EFS and swipe the confirmation action to backup. You can skip this step, but if after the installation system doesn\u2019t boot, try this step. After performing the ROM backup, return to the TWRP main menu and tap the Wipe button and select Advanced Wipe . Then wipe Dalvik Cache , System , and Cache . (If after the complete process system does not boot, try wiping the Data as well. But its will remove all your data) Go back to the TWRP main menu again and tap on Install option. Navigate to the ROM file and select it. Swipe the confirmation button to proceed with the installation. The ROM will be installed. Once installed, reboot to system .","title":"Flasheo de ROM"},{"location":"sistemas/android_system.html#reseteo-de-estadisticas-de-bateria-desde-twrp","text":"Cargar la bater\u00eda hasta el 100% Arrancar el TWRP recovery Seguir la ruta: Advanced / File Manager Ir a la ruta: /data/system/ Pulsar sobre el fichero batterystats.bin Pulsar Delete Reiniciar el sistema Descargar la bater\u00eda hasta el 2 - 5 % Volver a cargar la bater\u00eda hasta el 100%","title":"Reseteo de estad\u00edsticas de bater\u00eda desde TWRP"},{"location":"sistemas/android_system.html#instalacion-lineageos","text":"( Fuente ) Si no est\u00e1 ya, instalar el recovery TWRP siguiendo estas instrucciones . Descargar de aqu\u00ed . Opcionalmente bajar las GApps en edici\u00f3n ARM. Copiar los ficheros al directorio /sdcard (en caso de haber perdido la partici\u00f3n de almacenamiento interno por haber instalado UBPorts por ejemplo, copiar los ficheros a un pendrive y pincharlo con un adaptador OTG; el pendrive se ver\u00e1 como /sdcard desde el Recovery). Arrancar en modo Recovery ( V- + Power ). Seleccionar Wipe y despu\u00e9s Advanced Wipe . Seleccionar las particiones Cache , System y Data y despu\u00e9s Swipe to Wipe . Vuelve al men\u00fa principal y selecciona Install . Navega a /sdcard y seleciona el .zip de LineageOS. Sigue las instrucciones en pantalla. (Opcional) Instala el resto de paquetes. Si se van a instalar las GApps, hay que hacerlo antes del primer arranque. Vuelve al men\u00fa principal y selecciona Reboot , y despu\u00e9s System .","title":"Instalaci\u00f3n LineageOS"},{"location":"sistemas/android_system.html#motorola-moto-e-xt1021","text":"","title":"Motorola Moto E (XT1021)"},{"location":"sistemas/android_system.html#enlaces_3","text":"Info Cyanogenmod Downloads Cyanogenmod","title":"Enlaces"},{"location":"sistemas/android_system.html#modos-arranque_1","text":"Recovery: Apagado pulsar Power mientras se pulsa Volume- . Cuando salga el logo de Android tumbado con el tri\u00e1ngulo rojo pulsar Volume+ mientras se mantiene pulsado Power .","title":"Modos arranque"},{"location":"sistemas/android_system.html#geeksphone-one","text":"","title":"Geeksphone One"},{"location":"sistemas/android_system.html#enlaces_4","text":"Reset manual Tutorial ROM y Google Apps","title":"Enlaces"},{"location":"sistemas/android_system.html#roms","text":"SuperAosp 8.6, Rom Basada en Android Open Source Gingerbread CyanogenMod RCMod 3.0.4 RCMod 4.0.0","title":"ROMs"},{"location":"sistemas/android_system.html#configuracion-a-gps","text":"Te\u00f3ricamente, el server es: h-slp.mncXXX.mccYYY.pub.3gppnetwork.org En el puerto: 3425 XXX lo cambias por el MNC de tu operador, e YYY por el MCC. En el caso de Simyo MCC=214 y MNC=19","title":"Configuraci\u00f3n A-GPS"},{"location":"sistemas/android_system.html#nvsbl-p4d-sirius","text":"","title":"NVSBL P4D Sirius"},{"location":"sistemas/android_system.html#enlaces_5","text":"SuperOSR ICS v1.4.6 para P4D Sirius","title":"Enlaces"},{"location":"sistemas/android_system.html#samsung-galaxy-mini2-gt-s6500d","text":"","title":"Samsung Galaxy mini2 (GT-S6500D)"},{"location":"sistemas/android_system.html#enlaces_6","text":"Backup EFS folder without rooting Samsung Galaxy mini2 Blog Root y unroot Galaxy Mini 2 HOW TO CHANGE CSC CODE ON SAMSUNG GALAXY GRAND DUOS I9082/I9082L Liberar Galacy Mini 2 Cambiar CSC (Country Specific Code) StockRoms S6500/D/L/T para flashear por CWM CyanogenMod 10 Thewhisp XDA - Galaxy Mini II Android Development XDA - Galaxy Mini II Q&A, Help & Troubleshooting","title":"Enlaces"},{"location":"sistemas/android_system.html#modos-arranque_2","text":"Recovery: V+ V- Home Power Download: V- Home Power","title":"Modos arranque"},{"location":"sistemas/android_system.html#htc-desire","text":"Los datos originales del HBOOT de un Desire sin manipular eran: 1 2 3 4 5 BRAVO PVT4 SHIP S-ON HBOOT-0.93.0001 MICROP-051d RADIO-5.11.05.14 Aug 10 2010,17:52:18","title":"HTC Desire"},{"location":"sistemas/android_system.html#modos-de-arranque","text":"Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power.","title":"Modos de arranque"},{"location":"sistemas/android_system.html#enlaces_7","text":"C\u00f3mo rootear HTC Desire Unlock Bootloader (HTC oficial) MIUI-XJ 2.1.6 Gingerbread 2.3.7 para HTC Desire Ice Cream Sandwich con toques de CyanogenMod para HTC Desire Las mejores ROMs para HTC Desire Las mejores Roms para HTC Desire ICS for Desire Chromium AOKP for Bravo - Beta 3! - Stock HBOOT only C\u00f3mo flashear un Recovery en HTC Desire","title":"Enlaces"},{"location":"sistemas/android_system.html#proceso-de-instalacion-de-rom","text":"Hacer S-OFF con revolutionary (ejecutarlo con sudo). Hacer root siguiendo los pasos de El Androide Libre . Instalar el HBOOT Bravo CM7 r2 de AlphaRev . Se hace descargando el fichero de la columna \"PB99IMG\", renombr\u00e1ndolo a \u201cPB99IMG.zip\u201d, copi\u00e1ndolo a la ra\u00edz de la SD y reiniciando en modo HBOOT. Borrar cach\u00e9, Data y Dalvik. Formatear SD desde Recoveery con 1024MB para la ext y 0MB para el swap. Instalar InsertCoin de tipo CM7: http://insertcoin-roms.org/","title":"Proceso de instalaci\u00f3n de ROM"},{"location":"sistemas/android_system.html#samsung-galaxy-note-ii","text":"","title":"Samsung Galaxy Note II"},{"location":"sistemas/android_system.html#enlaces_8","text":"DN4 (Ditto Note 4) ROM from E-team Electron Team (creadores de DN3 y DN4)","title":"Enlaces"},{"location":"sistemas/android_system.html#sony-xperia-t","text":"","title":"Sony Xperia T"},{"location":"sistemas/android_system.html#menu-de-servicio","text":"1 *#*#7378423#*#*","title":"Men\u00fa de servicio"},{"location":"sistemas/android_system.html#modos-de-reset","text":"Volume Up + POWER (for 10 seconds) -> Battery reset [Device will vibrate once] Volume Up + POWER (for 15 seconds) -> Hard reset [Device will vibrate three times]","title":"Modos de Reset"},{"location":"sistemas/android_system.html#dispositivos-de-almacenamiento-40","text":"/mnt/sdcard: Memoria interna (16GB) /mnt/ext_card: Tarjeta SD","title":"Dispositivos de almacenamiento 4.0"},{"location":"sistemas/android_system.html#dispositivos-de-almacenamiento-41","text":"/mnt/int_storage 10.9G 2.6G 8.3G 4096 /storage/sdcard0 10.9G 2.6G 8.3G 4096 /storage/sdcard1 29.7G 2.7G 27.0G 32768","title":"Dispositivos de almacenamiento 4.1"},{"location":"sistemas/android_system.html#historial-firmware","text":"Fecha Versi\u00f3n 2013-07-02 9.1.A.1.141 2014-04 9.2.A.1.199","title":"Historial firmware"},{"location":"sistemas/android_system.html#enlaces_9","text":"Unlock your boot loader Full rooting guide for xperia t lt30p build 7.0.A.3.195 Xperia Roms Creacion de perfiles completos con Smart Tags + NFC Task Launcker + Tasker \u00bfA cuantos os ha fallado el Xperia T? y soluciones. Servicio T\u00e9cnico Flash tool for Xperia\u2122 devices Lista de Firmwares certificados Xperia T software updates TWRP 2.7 - Sony Xperia T page [4.4 ROM Flash] bypass set_metadata_xxx fails Disable Fast dormancy on sony smarthphones [MOD] Speakerphone whistle fix + volume boost Charging a dead Xperia T","title":"Enlaces"},{"location":"sistemas/android_system.html#roms_1","text":"CyanogenMod FreeXperia Project OmniROM ROM(Unlocked)(KITKAT) Plain AOSP for Xperia T ROM(4.4.4)(T/TX) Carbon Rom KK Unofficial ROM(T)(4.3) Ultimate PureXT v4.5 (**) ROM(4.3)(T)(LB/UB) OMeGa v2.2 (**) DooMKernel {JB}(v12)(20140604) Stock ROMs para el Xperia T: HTCMania - XDA GAPPS(4.4.x) OFFICIAL Up-to-Date PA-GOOGLE APPS (All ROM's) (2014-08-18)","title":"ROMs"},{"location":"sistemas/android_system.html#repuestos","text":"Tapa posterior","title":"Repuestos"},{"location":"sistemas/android_system.html#instrucciones-de-instalacion-de-roms","text":"power off the phone: hold vol+ and plug usb to boot into fastboot (blu led) fastboot flash boot boot.img (from cm10 zip) fastboot reboot enter recovery, on boot led will be violet for 3'', during this period press vol+ flash rom zip flash gapps zip wipe reboot","title":"Instrucciones de instalaci\u00f3n de ROMs"},{"location":"sistemas/android_system.html#desactivar-fast-dormancy-pepephone-mcc-214-mnc-06","text":"In /system/etc/fast-dormancy/fd_custm_conf.txt replace the 0s with your MNC and MCC from your APN setting.","title":"Desactivar fast-dormancy (pepephone MCC= 214, MNC= 06)"},{"location":"sistemas/android_system.html#solucion-al-problema-de-permisos-de-la-memoria-interna-fuente","text":"1 2 3 4 $ su # cd /mnt/media_rw # busybox chown -R 2800:2800 sdcard0 # chmod 0770 sdcard0","title":"Solucion al problema de permisos de la memoria interna (fuente)"},{"location":"sistemas/android_system.html#sony-xperia-u","text":"","title":"Sony Xperia U"},{"location":"sistemas/android_system.html#menu-de-servicio_1","text":"1 *#*#7378423#*#*","title":"Men\u00fa de servicio"},{"location":"sistemas/android_system.html#enlaces_10","text":"Unlock your boot loader DESBLOQUEAR COMPLETAMENTE tu Xperia y poder ROOTEARLO\u2605Aplicar MODS\u2605ROMS Sobre el Bootloader","title":"Enlaces"},{"location":"sistemas/android_system.html#roms_2","text":"XDA-Developers Rom List (ROM)(UB)(4.4.4)(W37-S4)(XperiaSTE Team) CyanogenMod 11.0","title":"ROMS"},{"location":"sistemas/android_system.html#rikomagic-mk802-iiis","text":"","title":"Rikomagic MK802-IIIs"},{"location":"sistemas/android_system.html#enlaces_11","text":"PicUntu MK802 Ubuntu Images with optional Droidmote MK802 IIIs en AndroidPC.es ROMS no oficiales funcionando al 100% para meter en los MK802IIIs Foro MK802-IIIS Rikomagic en AndroidPC.es Las mejores tiendas de aplicaciones alternativas a Google Play Configuraciones para mandos y m\u00e9todo para cambiar funciones de las teclas","title":"Enlaces"},{"location":"sistemas/android_system.html#roms_3","text":"NEOTV Rom Finless 1.5 para MK802-IIIs Finless rom 1.8 para MK802-III y UG802 Rom Finless 2.0 con Android 4.2.2 para MX1/MX2 y MK802-IIIS con BT","title":"ROMs"},{"location":"sistemas/android_system.html#software","text":"RetroArch, el Todo-en-1 de emuladores: Playstation, SNES, GBA y muchos m\u00e1s Sopcast Null Input Method","title":"Software"},{"location":"sistemas/android_system.html#tdt","text":"Televisi\u00f3n conectando un USB-TDT en tu AndroidPC con chip RK3066","title":"TDT"},{"location":"sistemas/android_system.html#hardware","text":"Adaptador USB LAN + USB HUB","title":"Hardware"},{"location":"sistemas/android_system.html#flasheo-de-firmware-oficial","text":"Bajar la \u00faltima versi\u00f3n de la p\u00e1gina oficial . En el paquete recien bajado (en el directorio 0121-IIIS8B\\0121-IIIS8B\\RKBatchTool1.5en\\Driver) se encuentran los drivers de modo Flashboot para Windows. Para Windows8 se pueden encontrar aqu\u00ed . Conectar un cable microUSB-USB a la ranura OTG. El otro extremo (USB) lo introducimos en un puerto libre del ordenador mientras a la vez con un palillo o clip desenrollado pulsamos el bot\u00f3n de reset que se adivina por una de las rejillas de ventilaci\u00f3n. Si Windows muestra un bocadillo pidiendo drivers, le damos a elegir la ruta en disco y apuntas al directorio comentado anteriormente que contenga la versi\u00f3n de los drivers que nos interese. Si Windows no reacciona habr\u00e1 que entrar en el Administrador de dispositivos y forzar la actualizaci\u00f3n sobre alguno de los \"Dispositivos desconocidos\" que veamos. En el directorio \"0121-IIIS8B\\0121-IIIS8B\" del paquete con el firmware viene una explicaci\u00f3n detallada (incluye fotos) del proceso de instalaci\u00f3n de los drivers y de la conexi\u00f3n al ordenador por el puerto OTG mientras se pulsa el reset. Una vez instalados los drivers lo mejor ser\u00e1 reiniciar Windows. Volvemos a conectar el MK802 por el puerto OTG mientras mantenemos pulsado el bot\u00f3n de reset como en el paso 3. Abrimos la aplicaci\u00f3n de flasheo (RKBatchTool). Deber\u00edamos ver en azul el cuadrado inferior izquierdo marcado con un 1. Si no es as\u00ed es que el proceso de instalaci\u00f3n de drivers y/o conexi\u00f3n del MK802 al PC no ha ido bien. Seleccionamos el fichero con la imagen de la ROM (extensi\u00f3n .img). Pulsamos el bot\u00f3n \"Upgrade\". Esperamos a que el proceso termine satisfactoriamente. Puede tardar entre 1 y 3 minutos.","title":"Flasheo de Firmware oficial"},{"location":"sistemas/android_system.html#flasheo-rom-finless","text":"Bajar el paquete de aqu\u00ed . Instalar los drivers Windows (ver pasos en instalaci\u00f3n ROM oficial). Descomprimir el paquete con la ROM. Conectar el Rikomagic al PC por USB como comentamos en el otro procedimiento, es decir conectando al puerto OTG y mientras se mantiene presionado el microbot\u00f3n de reset oculto entre las rendijas de ventilaci\u00f3n. Abrir el programa \"ROM Flash Tool.exe\" que hay en el primer nivel de directorios del paquete que hemos descomprimido. En la ventana que aparece se ve una serie de ficheros que se toman del subdirectorio \"FinlessROM\". Dentro de ese directorio hay varias opciones para los ficheros \"parameter\", \"kernel\" y \"boot\". El primero yo lo dejar\u00eda como viene por defecto. Los ficheros \"kernel\" y \"boot\" tienen que ir parejos. Hay dos versiones de cada, una para 720p y otra para 1080p. Recomiendan la 720p y por la potencia del Rikomagic (que va justito para los 1080p) yo tambi\u00e9n creo que no merece la pena el 1080p. Como por defecto viene seleccionado el 1080p, hay que cambiarlo. Para ello hay que hacer click en la fila correspondiente de la \u00faltima columna, la que tiene el r\u00f3tulo \"...\". Antes de empezar a flashear hay que comprobar que el programa se comunica con el Rikomagic. Para ello tiene que indicar abajo del todo en letra grande \"Found RKAndroid...\". Si pone \"No Found RKAndroid rock usb\" es que hay alg\u00fan problema con la conexi\u00f3n o los drivers. Simplemente volver a intentar la conexi\u00f3n (pulsando el botoncito). Le damos al bot\u00f3n \"Erase NAND (IDB)\" y luego cuando ese proceso termine le damos a \"Flash ROM\".","title":"Flasheo ROM Finless"},{"location":"sistemas/android_system.html#zte-skate-orange-montecarlo","text":"","title":"ZTE Skate / Orange Montecarlo"},{"location":"sistemas/android_system.html#enlaces_12","text":"Backup original ROM? How to Install CyanogenMod on ZTE Skate (\"skate\") Tutorial Como instalar ClockWorkMod Recovery,Rootear e instalar roms en ZTE skate/OMC [ROM][ZTE Skate] H3 Holo (Dolby Audio + Linaro optimized kernel + frandom + ROW I/O scheduler)","title":"Enlaces"},{"location":"sistemas/android_system.html#htc-wildfire","text":"","title":"HTC Wildfire"},{"location":"sistemas/android_system.html#modos-de-arranque_1","text":"Se arranca en HBOOT manteniendo el Volume- mientras se pulsa Power.","title":"Modos de arranque"},{"location":"sistemas/android_system.html#enlaces_13","text":"Las mejores ROMs para HTC Wildfire S-OFF y rootear para instalar Rom HTC Wildfire: Full Update Guide Nuestras 4 ROM favoritas del 2011 para la HTC Desire Unlock Bootloader (HTC oficial)","title":"Enlaces"},{"location":"sistemas/android_system.html#htc-wildfire-s","text":"","title":"HTC Wildfire S"},{"location":"sistemas/android_system.html#enlaces_14","text":"Unlock Bootloader (HTC oficial) HTC Wildfire S ROMs CM9-marvel-KANG MIUI V4 |CM9|ICS 4.0.3| Nuevo m\u00e9todo para conseguir ROOT en el HTC Wildfire S y algunas ROMs CyanogenMod 9.0.0-RC0-Marvel-Alpha2","title":"Enlaces"},{"location":"sistemas/android_system.html#motorola-milestone-2","text":"","title":"Motorola Milestone 2"},{"location":"sistemas/android_system.html#modos-de-arranque_2","text":"Se arranca en Recovery encendiendo mientras se mantiene pulsada la tecla X del teclado f\u00edsico. Luego, en Froyo hay que pulsar @. En Gingerbread las dos teclas de volumen a la vez. Se arranca en HBOOT encendiendo mientras se mantiene pulsada la tecla de cursor \"Arriba\" del teclado f\u00edsico.","title":"Modos de arranque"},{"location":"sistemas/android_system.html#basebands","text":"Tel\u00e9fono original: EPU93_U_00.60.00 ICS 4.0.4 2012-08-15: EPU93ST2_U_03.0C.01","title":"Basebands"},{"location":"sistemas/android_system.html#kernels","text":"2.3.4: 2.6.32.9-g7d2667a ICS 4.0.4 2012-08-15: 2.6.32.9-g7d2667a Recomendado por Tezet para JB 4.1.1: 2.6.32.9-g5db7937 a17140@zch68lnxdroid63 #1 Fri Sep 16 17:57:00 CST 2011","title":"Kernels"},{"location":"sistemas/android_system.html#enlaces_15","text":"sbf_flash: Utilidad Linux/Mac para flashear una ROM Motorola Android Software Upgrade News Miledropedia SBF Files Milestone2 en XDA-developers Milestone 2 Actualizacion Gingerbread, CyanogenMOD y MIUI Rootear Motorola Milestone 2 CWM: Clockworkmod Recovery - Droid 2 Bootstrapper Hacer backup s\u00f3lo de System Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 7.1 for Motorola Milestone 2 Cyanogenmod 9 for Motorola Milestone 2 MOTO Milestone 2 \u00bb ROM MIUI 1.12.9 The Noob Handbook for Bricked Phones Instalaci\u00f3n verificada de CM7 HOW TO install CyanogenMod/MIUI to your phone ROM Argen2Stone 2.7 RE (Based on Ms2Ginger 2.0) How to install Argen2Stone? Titanium Backup, The Easy Way! MIUI 2.5.25 GB 2.3.7 + ICS Multilanguage for Milestone 2! CyanogenMod 10 for Motorola Milestone 2 (Android 4.1.1) !!! CyanogenMod 9 for Motorola Milestone 2 (Android 4.0.4) MIUI v4 2.7.27 Baseband switcher Please come in,if your ms2 can't contect the GSM Kernel downgrade method for EU/BR/AR Gingerbread (only for BL=3) Multipack (alternativa a gapps)","title":"Enlaces"},{"location":"sistemas/android_system.html#instalacion-sbf","text":"Bajar el SBF de aqu\u00ed . Aplicarlo con: sudo sbf_flash rom.sbf Rootear con DoomLoRD . Instalar bootmenu con droid2bootstrap sacado de aqu\u00ed .","title":"Instalaci\u00f3n SBF"},{"location":"sistemas/android_system.html#instalacion-de-rom-jb-411-de-tezet","text":"Hacer el downgrade del kernel flasheando el sbf que hay aqu\u00ed Al reiniciar deber\u00eda entrar en CWM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik Instalar el Kernel CH GB que indica tezet aqu\u00ed Instalar la ROM Hacer wipe de cah\u00e9 Hacer wipe de Dalvik","title":"Instalaci\u00f3n de ROM JB 4.1.1 de tezet"},{"location":"sistemas/android_system.html#sony-ericsson-xperia-x8","text":"","title":"Sony Ericsson Xperia X8"},{"location":"sistemas/android_system.html#enlaces_16","text":"Root Sony Ericsson Xperia X8 With SuperOneClick How To Install Latest xRecovery to Sony Ericsson Xperia X10 CM7.1.0 FXP043 - FreeXperia Project Tutorial para reparar/desbrickear terminales Sony Ericsson How to install GingerXperiaV8 on Sony Ericsson X8 GingerDX para Xperia X8 GingerDX Como instalar un Rom a un Xperia X8 Las mejores ROMs para Sony Ericsson Xperia X8 How to rescue our bricked phone Hard brick warning - read before boot loader unlock SE Tweaker Tool v4.0 (16/2/12) Unlock Bootloader+Kernel Guide Bootloader and kernel guide Desbloquear el Bootloader para Novatos X8 Unlocking the boot loader (Oficial)","title":"Enlaces"},{"location":"sistemas/android_system.html#debrick","text":"Phone-lab Barcelona Movical Santiago de Compostela Liberar.es http://forum.xda-developers.com/showthread.php?t=1292705&page=2 http://forum.xda-developers.com/showthread.php?t=1399381&page=2 http://support.setool.net/showthread.php?3-UPDATES-AND-NEWS/page23 http://forum.xda-developers.com/showthread.php?t=986697&highlight=flash+tool Problem unlocking X8 with new bootloader [Solved] Soluci\u00f3n en el hilo de XDA \"Hard brick warning - read before boot loader unlock\" Xperia testpoint instructions and pictures Unlock Bootloader.Test Point Libera BOOTLOADER POR 15\u20ac OMNIUS O S1TOOL GRATIS","title":"Debrick"},{"location":"sistemas/android_system.html#tecnicas-varias","text":"","title":"T\u00e9cnicas varias"},{"location":"sistemas/android_system.html#conectar-el-mando-de-la-ps3","text":"( Fuente )","title":"Conectar el mando de la PS3"},{"location":"sistemas/android_system.html#requisitos","text":"Nuestro dispositivo Android Deberemos ser Root Dualshock 3 (Sixaxis) Sixaxis Compatibility Checker Sixaxis Controller SixaxisPairTool, que puedes descargarlo desde aqu\u00ed .","title":"Requisitos"},{"location":"sistemas/android_system.html#configuracion","text":"Abrimos el Sixaxis Compatibility Checker Nos aparecer\u00e1 un mensaje y pulsaremos sobre OK Pulsaremos sobre Start y le daremos permisos de Superusuario Si nuestro dispositivo es compatible recibiremos un mensaje dici\u00e9ndonos si nuestro dispositivo es compatible. En caso que de que as\u00ed sea pulsamos sobre Stop y salimos de la aplicaci\u00f3n. En caso de no recibir el mensaje de compatibilidad podemos para aqu\u00ed o seguir y probar suerte ;-) Ahora abrimos Sixaxis Controller App y clicamos sobre start. Le daremos permisos de superusuario al igual que a la otra aplicaci\u00f3n. Entonces obtendremos una direcci\u00f3n de Bluetooth local. Abriremos en nuestro ordenador el Sixaxis Pair Tool y la instalaremos. Despu\u00e9s la abriremos como administrador (bot\u00f3n derecho sobre el icono). Con el programa abierto enchufaremos el Sixaxis en nuestro PC mediante el cable USB. En el Sixaxis Pair Tool veremos una caja vac\u00eda. Ah\u00ed escribiremos la direcci\u00f3n Bluetooth Local que hab\u00edamos obtenido antes. Cuando esto est\u00e9 hecho pulsaremos sobre Update y veremos como la direcci\u00f3n se ha actualizado. Desconectaremos el Sixaxis de nuestro PC. Pulsaremos sobre el bot\u00f3n PS y veremos que ocurre\u2026 Nuestro Sixaxis ya deber\u00eda estar emparejado con nuestro dispositivo Android.","title":"Configuraci\u00f3n"},{"location":"sistemas/android_system.html#adb-en-linux-y-arrancar-settings","text":"Instalar el SDK. Sacar id de fabricante de lsusb (http://bradchow.wordpress.com/2009/02/16/adb-on-windows-and-ubuntu-linux/) y crear rule udev. Reiniciar adb server: adb kill-server sudo adb start-server adb devices Ejecutar: sudo adb shell am start -a android.intent.action.MAIN -n com.android.settings/.Settings","title":"ADB en Linux y arrancar settings"},{"location":"sistemas/android_system.html#montar-system-en-rw","text":"1 2 3 4 # mount -o remount,rw /system # cd /system/app # mount -o remount,ro /system # reboot recovery","title":"Montar system en rw:"},{"location":"sistemas/android_system.html#desinstalar-aplicaciones-de-sistema-sin-root","text":"Fuente Activa el modo de depuraci\u00f3n en tu Android. Conecta tu Android al ordenador por USB y acepta la clave RSA. Abre una ventana de comandos y escribe adb devices sin las comillas. Tu dispositivo deber\u00eda detectarse apareciendo a modo de c\u00f3digo. Una vez conectado escribe adb shell . Ahora necesitas eliminar una a una las aplicaciones que desees. Utiliza App Inspector para saber el nombre del paquete. Pega este c\u00f3digo en la ventana de comandos: pm uninstall -k -user 0 nombre.del.paquete . Sin las comillas y cambiando \u201cnombre.del.paquete\u201d por el de la aplicaci\u00f3n que deseas (Google Chrome es com.android.chrome , por ejemplo). Acepta el comando y si el ordenador te devuelve un Success es que se ha eliminado de manera satisfactoria.","title":"Desinstalar aplicaciones de sistema sin root"},{"location":"sistemas/appletv.html","text":"AppleTV \u00b6 Enlaces \u00b6 Backup del disco duro TVHeadEnd \u00b6 Trucos \u00b6 Comando para escanear frecuencias: 1 2 $ sudo apt-get install w-scan $ sudo w_scan -f a -c ES -X Enlaces \u00b6 Instalaci\u00f3n en Ubuntu/Debian","title":"AppleTV"},{"location":"sistemas/appletv.html#appletv","text":"","title":"AppleTV"},{"location":"sistemas/appletv.html#enlaces","text":"Backup del disco duro","title":"Enlaces"},{"location":"sistemas/appletv.html#tvheadend","text":"","title":"TVHeadEnd"},{"location":"sistemas/appletv.html#trucos","text":"Comando para escanear frecuencias: 1 2 $ sudo apt-get install w-scan $ sudo w_scan -f a -c ES -X","title":"Trucos"},{"location":"sistemas/appletv.html#enlaces_1","text":"Instalaci\u00f3n en Ubuntu/Debian","title":"Enlaces"},{"location":"sistemas/docker.html","text":"Docker \u00b6 Enlaces \u00b6 Tutorial Instalaci\u00f3n en Raspberry seg\u00fan uGeek Instalaci\u00f3n en Ubuntu de versi\u00f3n Community Edition Instalaci\u00f3n \u00b6 Instalaci\u00f3n de Docker CE \u00b6 $ sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo echo \"deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable\" | sudo tee /etc/apt/sources.list.d/docker.list $ sudo apt-get update $ sudo apt-get install docker-ce $ sudo systemctl enable docker $ sudo systemctl start docker $ sudo groupadd docker $ sudo usermod -aG docker $USER Instalaci\u00f3n de Docker compose (https://docs.docker.com/compose/install/) \u00b6 $ sudo curl -L \"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose $ sudo chmod +x /usr/local/bin/docker-compose Instalaci\u00f3n Portainer \u00b6 Cerrar y volver a abrir la consola para que se aplique el \u00faltimo cambio del bloque anterior. $ docker run -d --name=Portainer --restart=always -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer Comandos \u00b6 List Docker CLI commands \u00b6 1 2 $ docker $ docker container --help Display Docker version and info \u00b6 1 2 3 $ docker --version $ docker version $ docker info Execute Docker image \u00b6 1 2 3 4 $ docker run hello-world $ docker run --name mi-couchdb -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con log $ docker run --name mi-couchdb -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n sin log (modo detached) $ docker run --name mi-couchdb --restart = always -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con reinicio si se para o reinicia el servidor List Docker images \u00b6 1 $ docker image ls List Docker containers (running, all, all in quiet mode) \u00b6 1 2 3 $ docker container ls $ docker container ls --all $ docker container ls -aq Varios \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ docker build -t friendlyhello . # Create image using this directory's Dockerfile $ docker run -p 4000 :80 friendlyhello # Run \"friendlyname\" mapping port 4000 to 80 $ docker run -d -p 4000 :80 friendlyhello # Same thing, but in detached mode $ docker container ls # List all running containers $ docker container ls -a # List all containers, even those not running $ docker container logs <hash> # Logs $ docker container start <hash> # Arranca un contenedor $ docker container stop <hash> # Gracefully stop the specified container $ docker container kill <hash> # Force shutdown of the specified container $ docker container rm <hash> # Remove specified container from this machine $ docker container rm $( docker container ls -a -q ) # Remove all containers $ docker image ls -a # List all images on this machine $ docker image rm <image id> # Remove specified image from this machine $ docker image rm $( docker image ls -a -q ) # Remove all images from this machine $ docker login # Log in this CLI session using your Docker credentials $ docker tag <image> username/repository:tag # Tag <image> for upload to registry $ docker push username/repository:tag # Upload tagged image to registry $ docker run username/repository:tag # Run image from a registry $ docker exec -it <hash> bash # Shell en un contenedor $ docker update --restart = always <hash> # A\u00f1adir opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado $ docker update --restart = no <hash> # Quitar opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado Crear volume para persistir informaci\u00f3n \u00b6 Para poder recrear el contenedor sin perder la informaci\u00f3n que haya podido generar, conviene montar los distintos directorios que queremos conservar en vol\u00famenes. Crear volumen: 1 $ docker volume create mi_volumen Posteriormente incluir en el comando de arranque del contenedor -v mi_volumen:ruta_en_contenedor donde ruta_en_contenedor ser\u00e1 la ruta dentro del contenedor que queremos \"delegar\" al volumen. Montar un contenedor Ubuntu para aislar aplicaciones \u00b6 Creaci\u00f3n contenedor: 1 docker run -it --name test-ubuntu ubuntu Arrancar y abrir shell: 1 2 docker start test-ubuntu docker exec -it test-ubuntu /bin/bash Instalar paquetes m\u00ednimos: 1 2 apt-get update apt-get install vim sudo","title":"Docker"},{"location":"sistemas/docker.html#docker","text":"","title":"Docker"},{"location":"sistemas/docker.html#enlaces","text":"Tutorial Instalaci\u00f3n en Raspberry seg\u00fan uGeek Instalaci\u00f3n en Ubuntu de versi\u00f3n Community Edition","title":"Enlaces"},{"location":"sistemas/docker.html#instalacion","text":"","title":"Instalaci\u00f3n"},{"location":"sistemas/docker.html#instalacion-de-docker-ce","text":"$ sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo echo \"deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable\" | sudo tee /etc/apt/sources.list.d/docker.list $ sudo apt-get update $ sudo apt-get install docker-ce $ sudo systemctl enable docker $ sudo systemctl start docker $ sudo groupadd docker $ sudo usermod -aG docker $USER","title":"Instalaci\u00f3n de Docker CE"},{"location":"sistemas/docker.html#instalacion-de-docker-compose-httpsdocsdockercomcomposeinstall","text":"$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose $ sudo chmod +x /usr/local/bin/docker-compose","title":"Instalaci\u00f3n de Docker compose (https://docs.docker.com/compose/install/)"},{"location":"sistemas/docker.html#instalacion-portainer","text":"Cerrar y volver a abrir la consola para que se aplique el \u00faltimo cambio del bloque anterior. $ docker run -d --name=Portainer --restart=always -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer","title":"Instalaci\u00f3n Portainer"},{"location":"sistemas/docker.html#comandos","text":"","title":"Comandos"},{"location":"sistemas/docker.html#list-docker-cli-commands","text":"1 2 $ docker $ docker container --help","title":"List Docker CLI commands"},{"location":"sistemas/docker.html#display-docker-version-and-info","text":"1 2 3 $ docker --version $ docker version $ docker info","title":"Display Docker version and info"},{"location":"sistemas/docker.html#execute-docker-image","text":"1 2 3 4 $ docker run hello-world $ docker run --name mi-couchdb -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con log $ docker run --name mi-couchdb -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n sin log (modo detached) $ docker run --name mi-couchdb --restart = always -d -p 5984 :5984 apache/couchdb # Ejecuci\u00f3n con reinicio si se para o reinicia el servidor","title":"Execute Docker image"},{"location":"sistemas/docker.html#list-docker-images","text":"1 $ docker image ls","title":"List Docker images"},{"location":"sistemas/docker.html#list-docker-containers-running-all-all-in-quiet-mode","text":"1 2 3 $ docker container ls $ docker container ls --all $ docker container ls -aq","title":"List Docker containers (running, all, all in quiet mode)"},{"location":"sistemas/docker.html#varios","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ docker build -t friendlyhello . # Create image using this directory's Dockerfile $ docker run -p 4000 :80 friendlyhello # Run \"friendlyname\" mapping port 4000 to 80 $ docker run -d -p 4000 :80 friendlyhello # Same thing, but in detached mode $ docker container ls # List all running containers $ docker container ls -a # List all containers, even those not running $ docker container logs <hash> # Logs $ docker container start <hash> # Arranca un contenedor $ docker container stop <hash> # Gracefully stop the specified container $ docker container kill <hash> # Force shutdown of the specified container $ docker container rm <hash> # Remove specified container from this machine $ docker container rm $( docker container ls -a -q ) # Remove all containers $ docker image ls -a # List all images on this machine $ docker image rm <image id> # Remove specified image from this machine $ docker image rm $( docker image ls -a -q ) # Remove all images from this machine $ docker login # Log in this CLI session using your Docker credentials $ docker tag <image> username/repository:tag # Tag <image> for upload to registry $ docker push username/repository:tag # Upload tagged image to registry $ docker run username/repository:tag # Run image from a registry $ docker exec -it <hash> bash # Shell en un contenedor $ docker update --restart = always <hash> # A\u00f1adir opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado $ docker update --restart = no <hash> # Quitar opci\u00f3n de reinicio a un contenedor que ya est\u00e1 creado","title":"Varios"},{"location":"sistemas/docker.html#crear-volume-para-persistir-informacion","text":"Para poder recrear el contenedor sin perder la informaci\u00f3n que haya podido generar, conviene montar los distintos directorios que queremos conservar en vol\u00famenes. Crear volumen: 1 $ docker volume create mi_volumen Posteriormente incluir en el comando de arranque del contenedor -v mi_volumen:ruta_en_contenedor donde ruta_en_contenedor ser\u00e1 la ruta dentro del contenedor que queremos \"delegar\" al volumen.","title":"Crear volume para persistir informaci\u00f3n"},{"location":"sistemas/docker.html#montar-un-contenedor-ubuntu-para-aislar-aplicaciones","text":"Creaci\u00f3n contenedor: 1 docker run -it --name test-ubuntu ubuntu Arrancar y abrir shell: 1 2 docker start test-ubuntu docker exec -it test-ubuntu /bin/bash Instalar paquetes m\u00ednimos: 1 2 apt-get update apt-get install vim sudo","title":"Montar un contenedor Ubuntu para aislar aplicaciones"},{"location":"sistemas/email.html","text":"e-mail \u00b6 Enlaces \u00b6 Message header analyzer Chequeo de listas negras \u00b6 SPAMHAUS Tren Micro Email Reputation Services MXToolbox multiRBL BlacklistAlert SpamCop WhatIsMyIPAddress","title":"e-mail"},{"location":"sistemas/email.html#e-mail","text":"","title":"e-mail"},{"location":"sistemas/email.html#enlaces","text":"Message header analyzer","title":"Enlaces"},{"location":"sistemas/email.html#chequeo-de-listas-negras","text":"SPAMHAUS Tren Micro Email Reputation Services MXToolbox multiRBL BlacklistAlert SpamCop WhatIsMyIPAddress","title":"Chequeo de listas negras"},{"location":"sistemas/emulacion.html","text":"Emulaci\u00f3n \u00b6 Enlaces \u00b6 Emuladores en OpenELEC Configuraci\u00f3n PiGRRL-2 Managing ROMs MAME FAQ : Resuelve dudas sobre peculiaridades de algunos juegos. Por ejemplo sobre el arranque de Joust . ZXBaremulator : Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI. Juegos destacados \u00b6 ZX Spectrum \u00b6 Flying Shark Empaquetado de ROMs MAME \u00b6 Primero hay que localizar los ficheros que componen la ROM. Hay varios tipos (explicados aqu\u00ed ). Una forma de ir a lo seguro es localizar sus piezas gracias a los hash SHA1 que se pueden encontrar en los ficheros .DAT y luego hacer un paquete ZIP sin compresi\u00f3n. Para generar un archivo ZIP con compresi\u00f3n nula en Linux, se consigue por ejemplo con el siguiente comando lanzado desde el directorio donde se encuentren los ficheros que queremos empaquetar: 1 zip -0 rom.zip * El nombre del archivo (en el ejemplo rom.zip ) es importante para que el emulador reconozca la ROM. Tambi\u00e9n lo obtendremos del fichero .DAT . Conexi\u00f3n de mando SixAxis en Recalbox \u00b6 Para que funcione por USB en lugar de por Bluetooth que es como est\u00e1 previsto por defecto, hay que editar el fichero /recalbox/share/system/recalbox.conf y cambiar la siguiente propiedad a 0: 1 controllers.ps3.enabled=0 Se puede editar entrando por SSH, para lo cual las credenciales predeterminadas son: user: root password: recalboxroot Si se hace montando la SD en el ordenador, el fichero se encuentra en la partici\u00f3n /dev/mmcblk0p8 que se monta en Ubuntu como share0 en la ruta ./system/recalbox.conf . Backup juego PSX \u00b6 Introducir el disco en la unidad de CD-ROM. Localizar el dispositivo del CD-ROM: 1 sudo cdrdao scanbus Desmontar el dispositivo sin expulsar el disco (suponemos que el comando anterior indica que el dispositivo es /dev/sr0 ): 1 sudo umount /dev/sr0 Hacer el backup: 1 cdrdao read-cd --device /dev/sr0 --driver generic-mmc-raw --read-raw --datafile nombre_juego.bin nombre_juego.toc Con esto obtendremos dos ficheros. En algunas ocasiones nos puede interesar m\u00e1s el fichero cue equivalente al toc . En ese caso convertirlo as\u00ed: 1 toc2cue nombre_juego.toc nombre_juego.cue","title":"Emulaci\u00f3n"},{"location":"sistemas/emulacion.html#emulacion","text":"","title":"Emulaci\u00f3n"},{"location":"sistemas/emulacion.html#enlaces","text":"Emuladores en OpenELEC Configuraci\u00f3n PiGRRL-2 Managing ROMs MAME FAQ : Resuelve dudas sobre peculiaridades de algunos juegos. Por ejemplo sobre el arranque de Joust . ZXBaremulator : Emulador bare-metal completo de los ZX Spectrum 48K/128K/+2A para la Raspberry PI.","title":"Enlaces"},{"location":"sistemas/emulacion.html#juegos-destacados","text":"","title":"Juegos destacados"},{"location":"sistemas/emulacion.html#zx-spectrum","text":"Flying Shark","title":"ZX Spectrum"},{"location":"sistemas/emulacion.html#empaquetado-de-roms-mame","text":"Primero hay que localizar los ficheros que componen la ROM. Hay varios tipos (explicados aqu\u00ed ). Una forma de ir a lo seguro es localizar sus piezas gracias a los hash SHA1 que se pueden encontrar en los ficheros .DAT y luego hacer un paquete ZIP sin compresi\u00f3n. Para generar un archivo ZIP con compresi\u00f3n nula en Linux, se consigue por ejemplo con el siguiente comando lanzado desde el directorio donde se encuentren los ficheros que queremos empaquetar: 1 zip -0 rom.zip * El nombre del archivo (en el ejemplo rom.zip ) es importante para que el emulador reconozca la ROM. Tambi\u00e9n lo obtendremos del fichero .DAT .","title":"Empaquetado de ROMs MAME"},{"location":"sistemas/emulacion.html#conexion-de-mando-sixaxis-en-recalbox","text":"Para que funcione por USB en lugar de por Bluetooth que es como est\u00e1 previsto por defecto, hay que editar el fichero /recalbox/share/system/recalbox.conf y cambiar la siguiente propiedad a 0: 1 controllers.ps3.enabled=0 Se puede editar entrando por SSH, para lo cual las credenciales predeterminadas son: user: root password: recalboxroot Si se hace montando la SD en el ordenador, el fichero se encuentra en la partici\u00f3n /dev/mmcblk0p8 que se monta en Ubuntu como share0 en la ruta ./system/recalbox.conf .","title":"Conexi\u00f3n de mando SixAxis en Recalbox"},{"location":"sistemas/emulacion.html#backup-juego-psx","text":"Introducir el disco en la unidad de CD-ROM. Localizar el dispositivo del CD-ROM: 1 sudo cdrdao scanbus Desmontar el dispositivo sin expulsar el disco (suponemos que el comando anterior indica que el dispositivo es /dev/sr0 ): 1 sudo umount /dev/sr0 Hacer el backup: 1 cdrdao read-cd --device /dev/sr0 --driver generic-mmc-raw --read-raw --datafile nombre_juego.bin nombre_juego.toc Con esto obtendremos dos ficheros. En algunas ocasiones nos puede interesar m\u00e1s el fichero cue equivalente al toc . En ese caso convertirlo as\u00ed: 1 toc2cue nombre_juego.toc nombre_juego.cue","title":"Backup juego PSX"},{"location":"sistemas/impresoras.html","text":"Impresoras \u00b6 Tipos de controladores impresora \u00b6 PS: El controlador de impresora PS resulta id\u00f3neo para imprimir desde software de Adobe Systems y ofrece un rendimiento \u00f3ptimo para imprimir texto y gr\u00e1ficos de alta calidad. PCL: Los controladores de impresora PCL5c, PCL5e y PCL6 se pueden utilizar con la mayor\u00eda de los tipos de software de aplicaciones empresariales. El controlador de impresora PCL5c es para impresoras en color, mientras que los controladores de impresora PCL5e y PCL6 son para impresora en blanco y negro. PCL6 es una versi\u00f3n mejorada de PCL5r y ofrece mayor calidad de impresi\u00f3n y velocidad. Los controladores PCL5e y PCL6 se proporcionan como controladores est\u00e1ndar con las impresoras en blanco y negro. UFR II: Con el controlador de impresora UFR II, las distintas tareas de procesamiento de datos que habitualmente se ejecutan en la impresora se distribuyen de la forma m\u00e1s conveniente entre el PC host y la impresora para reducir considerablemente el tiempo total de impresi\u00f3n. La carga de trabajo se puede delegar para que coincida con los datos de salida, lo que permite un aumento importante en la velocidad mediante esta optimizaci\u00f3n.","title":"Impresoras"},{"location":"sistemas/impresoras.html#impresoras","text":"","title":"Impresoras"},{"location":"sistemas/impresoras.html#tipos-de-controladores-impresora","text":"PS: El controlador de impresora PS resulta id\u00f3neo para imprimir desde software de Adobe Systems y ofrece un rendimiento \u00f3ptimo para imprimir texto y gr\u00e1ficos de alta calidad. PCL: Los controladores de impresora PCL5c, PCL5e y PCL6 se pueden utilizar con la mayor\u00eda de los tipos de software de aplicaciones empresariales. El controlador de impresora PCL5c es para impresoras en color, mientras que los controladores de impresora PCL5e y PCL6 son para impresora en blanco y negro. PCL6 es una versi\u00f3n mejorada de PCL5r y ofrece mayor calidad de impresi\u00f3n y velocidad. Los controladores PCL5e y PCL6 se proporcionan como controladores est\u00e1ndar con las impresoras en blanco y negro. UFR II: Con el controlador de impresora UFR II, las distintas tareas de procesamiento de datos que habitualmente se ejecutan en la impresora se distribuyen de la forma m\u00e1s conveniente entre el PC host y la impresora para reducir considerablemente el tiempo total de impresi\u00f3n. La carga de trabajo se puede delegar para que coincida con los datos de salida, lo que permite un aumento importante en la velocidad mediante esta optimizaci\u00f3n.","title":"Tipos de controladores impresora"},{"location":"sistemas/iot.html","text":"IOT \u00b6 Enlaces \u00b6 Contiki","title":"IOT"},{"location":"sistemas/iot.html#iot","text":"","title":"IOT"},{"location":"sistemas/iot.html#enlaces","text":"Contiki","title":"Enlaces"},{"location":"sistemas/kodi.html","text":"Kodi/OpenELEC \u00b6 Desactivar un canal de PelisALaCarta \u00b6 Si durante las b\u00fasquedas, alguno de los canales bloquea el progreso, seguramente habr\u00e1 habido alg\u00fan cambio en el c\u00f3digo del sitio que el plugin no es capaz de interpretar. Habr\u00e1 que esperar a que salga una nueva versi\u00f3n del plugin, pero mientras tanto se puede desactivar ese canal acudiendo a la ruta siguiente: 1 /storage/.kodi/addons/plugin.video.pelisalacarta/channels All\u00ed localizamos el archivo .xml correspondiente al canal, lo editamos y ponemos a false la propiedad active . Mapeo de teclas del mando a distancia \u00b6 En ocasiones alguna de las teclas del mando deja de funcionar. A mi me ha ocurrido varias veces con la tecla Back. Con el tiempo se soluciona solo (algunas veces reiniciar ayuda pero no siempre). Desconozco el mecanismo que estropea el mapeo de esta tecla, pero la soluci\u00f3n es modificar el fichero /storage/.kodi/userdata/keymaps/remote.xml . En \u00e9l, dentro de la secci\u00f3n <keymap><global><remote> , cuando deja de funcionar la tecla back me encuentro: 1 <back> RunScript(special://userdata/keymaps/test.py) </back> La soluci\u00f3n es reponer el valor: 1 <back> Back </back> Scrap manual de una serie \u00b6 Si al intentar forzar el contenido de una carpeta con una serie, no nos localiza la serie y \u00e9sta est\u00e1 dada de alta en TheTVDB (me ocurri\u00f3 por ejemplo con Ram\u00f3n y Cajal ), incluir un fichero en la ra\u00edz del directorio de la serie con el nombre tvshow.nfo y el siguiente contenido ( fuente ): 1 http://thetvdb.com/index.php?tab=series&id=290587 Script autoarranque para reproducir una lista \u00b6 Situar en la ruta .kodi/userdata/ un fichero con el nombre autoexec.py . All\u00ed insertar el c\u00f3digo: 1 2 3 4 5 import xbmc playlist = xbmc . PlayList ( xbmc . PLAYLIST_VIDEO ) playlist . load ( '/storage/.kodi/userdata/playlists/video/Africa.m3u' ) xbmc . Player () . play ( item = playlist )","title":"Kodi/OpenELEC"},{"location":"sistemas/kodi.html#kodiopenelec","text":"","title":"Kodi/OpenELEC"},{"location":"sistemas/kodi.html#desactivar-un-canal-de-pelisalacarta","text":"Si durante las b\u00fasquedas, alguno de los canales bloquea el progreso, seguramente habr\u00e1 habido alg\u00fan cambio en el c\u00f3digo del sitio que el plugin no es capaz de interpretar. Habr\u00e1 que esperar a que salga una nueva versi\u00f3n del plugin, pero mientras tanto se puede desactivar ese canal acudiendo a la ruta siguiente: 1 /storage/.kodi/addons/plugin.video.pelisalacarta/channels All\u00ed localizamos el archivo .xml correspondiente al canal, lo editamos y ponemos a false la propiedad active .","title":"Desactivar un canal de PelisALaCarta"},{"location":"sistemas/kodi.html#mapeo-de-teclas-del-mando-a-distancia","text":"En ocasiones alguna de las teclas del mando deja de funcionar. A mi me ha ocurrido varias veces con la tecla Back. Con el tiempo se soluciona solo (algunas veces reiniciar ayuda pero no siempre). Desconozco el mecanismo que estropea el mapeo de esta tecla, pero la soluci\u00f3n es modificar el fichero /storage/.kodi/userdata/keymaps/remote.xml . En \u00e9l, dentro de la secci\u00f3n <keymap><global><remote> , cuando deja de funcionar la tecla back me encuentro: 1 <back> RunScript(special://userdata/keymaps/test.py) </back> La soluci\u00f3n es reponer el valor: 1 <back> Back </back>","title":"Mapeo de teclas del mando a distancia"},{"location":"sistemas/kodi.html#scrap-manual-de-una-serie","text":"Si al intentar forzar el contenido de una carpeta con una serie, no nos localiza la serie y \u00e9sta est\u00e1 dada de alta en TheTVDB (me ocurri\u00f3 por ejemplo con Ram\u00f3n y Cajal ), incluir un fichero en la ra\u00edz del directorio de la serie con el nombre tvshow.nfo y el siguiente contenido ( fuente ): 1 http://thetvdb.com/index.php?tab=series&id=290587","title":"Scrap manual de una serie"},{"location":"sistemas/kodi.html#script-autoarranque-para-reproducir-una-lista","text":"Situar en la ruta .kodi/userdata/ un fichero con el nombre autoexec.py . All\u00ed insertar el c\u00f3digo: 1 2 3 4 5 import xbmc playlist = xbmc . PlayList ( xbmc . PLAYLIST_VIDEO ) playlist . load ( '/storage/.kodi/userdata/playlists/video/Africa.m3u' ) xbmc . Player () . play ( item = playlist )","title":"Script autoarranque para reproducir una lista"},{"location":"sistemas/macosx.html","text":"Mac OS X \u00b6 Comandos \u00fatiles \u00b6 sudo lsof -i -P | grep -i \"listen\" : Puertos abiertos.","title":"Mac OS X"},{"location":"sistemas/macosx.html#mac-os-x","text":"","title":"Mac OS X"},{"location":"sistemas/macosx.html#comandos-utiles","text":"sudo lsof -i -P | grep -i \"listen\" : Puertos abiertos.","title":"Comandos \u00fatiles"},{"location":"sistemas/mandrake.html","text":"Mandrake \u00b6 Comandos \u00b6 drakconf : Centro de control de Mandriva.","title":"Mandrake"},{"location":"sistemas/mandrake.html#mandrake","text":"","title":"Mandrake"},{"location":"sistemas/mandrake.html#comandos","text":"drakconf : Centro de control de Mandriva.","title":"Comandos"},{"location":"sistemas/mysql.html","text":"MySQL \u00b6 Recomendaciones \u00b6 Utilizar siempre el tipo de dato DOUBLE para los reales (pag. 125 de libro \"Desarrollo Web con PHP 6 y MySQL 5.1\") Instalaci\u00f3n \u00b6 Instalamos el paquete mysql-server : 1 $ apt-get install mysql-server En caso de no haberlo configurado durante la instalaci\u00f3n del paquete, ajustar el password de root con el comando: 1 2 $ mysql -u root mysql> SET PASSWORD FOR 'root' @ 'localhost\" = PASSWORD(' new_password ' ) ; Por defecto s\u00f3lo podemos entrar con el usuario root en local. Para permitir el acceso remoto ejecutar el siguiente comando: 1 2 3 4 $ mysql -u root -p mysql> GRANT ALL PRIVILEGES ON *.* TO 'root' @ '%' IDENTIFIED BY 'password' WITH GRANT OPTION ; mysql> FLUSH PRIVILEGES ; mysql> exit Tambi\u00e9n hay que permitir las conexiones remotas a nivel de red comentando la siguiente linea del fichero de configuraci\u00f3n /etc/mysql/my.cnf : 1 bind-address = 127.0.0.1 Conexi\u00f3n \u00b6 MySQL Client \u00b6 1 mysql -u <usuario> -h <host> -P <puerto> <database> -p 1 2 3 4 5 6 7 8 $ mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g . Your MySQL connection id is 89 to server version: 4 .1.11-Debian_4-log Type 'help;' or '\\h' for help. Type '\\c' to clear the buffer. mysql> Trabajando con Bases de Datos \u00b6 Creaci\u00f3n de BBDD \u00b6 1 2 mysql > CREATE DATABASE irontec_db ; Query OK , 1 row affected ( 0 . 03 sec ) Selecci\u00f3n de BBDD \u00b6 Cambiar o elegir base de datos a utilizar: 1 2 mysql > USE irontec_db ; Database changed Ver la base de datos seleccionada: 1 2 3 4 5 6 7 mysql > SELECT DATABASE (); + ------------+ | database () | + ------------+ | irontec_db | + ------------+ 1 row in set ( 0 . 00 sec ) Eliminaci\u00f3n de BBDD \u00b6 1 2 mysql > DROP DATABASE irontec_db ; Query OK , 0 rows affected ( 0 . 60 sec ) Eliminaci\u00f3n de todas las tablas de una BBDD \u00b6 1 mysqldump -uUSUARIO -pPASSWORD --add-drop-table --no-data BBDD | grep -e '^DROP \\| FOREIGN_KEY_CHECKS' | mysql -uUSUARIO -pPASSWORD BBDD Trabajando con Usuarios / Privilegios \u00b6 Creaci\u00f3n de Usuarios \u00b6 Usuarios con todos los privilegios: 1 2 mysql > GRANT ALL PRIVILEGES ON irontec_db . * TO irontec_user_allpriv @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 14 sec ) Usuarios sin privilegios (solo introduce el usuario en la tabla mysql.user ): 1 2 mysql > GRANT USAGE ON irontec_db . * TO irontec_user_nopriv @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 01 sec ) Usuarios con privilegios de solo lectura en registros: 1 2 mysql > GRANT SELECT ON irontec_db . * TO irontec_user_ro @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 02 sec ) Usuarios con privilegios de solo inserci\u00f3n o modificaci\u00f3n de registros: 1 2 mysql > GRANT INSERT , UPDATE on irontec_db . * TO irontec_user_wo @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 01 sec ) Selecci\u00f3n de Usuarios \u00b6 Ver el usuario con el que se est\u00e1 trabajando: 1 2 3 4 5 6 7 mysql > SELECT user (); + ------------------------+ | user () | + ------------------------+ | irontec_user @ localhost | + ------------------------+ 1 row in set ( 0 . 00 sec ) Visualizaci\u00f3n de Privilegios de Usuarios \u00b6 1 2 3 4 5 6 7 8 mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | | GRANT ALL PRIVILEGES ON ` irontec_db ` . * TO 'irontec_user_allpriv' @ 'localhost' | + ------------------------------------------------------------------------------------------------+ 2 rows in set ( 0 . 00 sec ) Eliminaci\u00f3n de Usuarios \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 mysql > REVOKE ALL PRIVILEGES ON irontec_db . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | + ------------------------------------------------------------------------------------------------+ 1 row in set ( 0 . 00 sec ) mysql > revoke usage on * . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > drop user 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) Trabajando con Tablas \u00b6 Tipos de Tablas y Motores de Almacenamiento \u00b6 Referencia manual MySQL Tipos de Campos \u00b6 Referencia manual MySQL Creaci\u00f3n Tablas \u00b6 MyISAM \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 05 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 20 sec ) InnoDB \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 10 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> index ( empresa ), -> FOREIGN KEY ( empresa ) REFERENCES clientes ( id_cliente ) ON DELETE CASCADE ON UPDATE CASCADE -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 06 sec ) Visualizaci\u00f3n Tablas \u00b6 Tablas contenidas en una Base de Datos: 1 2 3 4 5 6 7 8 mysql > show tables ; + ------------------+ | Tables_in_prueba | + ------------------+ | clientes | | presupuestos | + ------------------+ 2 rows in set ( 0 . 00 sec ) Estructura de una tabla: 1 2 3 4 5 6 7 8 9 10 11 mysql > DESC presupuestos ; + ----------------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | + ----------------+-------------+------+-----+---------+----------------+ | id_presupuesto | int ( 8 ) | | PRI | NULL | auto_increment | | empresa | varchar ( 50 ) | | | | | | asunto | varchar ( 60 ) | YES | | NULL | | | precio | float | YES | | 0 | | | fecha | date | YES | | NULL | | + ----------------+-------------+------+-----+---------+----------------+ 5 rows in set ( 0 . 01 sec ) Estado de todas las tablas: 1 mysql > show table status ; Modificaci\u00f3n Tablas \u00b6 Referencia manual MySQL A\u00f1adir un nuevo campo \u00b6 1 mysql > ALTER TABLE [ database .] tabla ADD campo_nuevo tipo AFTER campo_viejo ; 1 2 3 mysql > ALTER TABLE presupuestos ADD adjunto BLOB AFTER fecha ; Query OK , 0 rows affected ( 0 . 06 sec ) Registros : 0 Duplicados : 0 Peligros : 0 Cambiar el nombre de una tabla \u00b6 1 mysql > ALTER TABLE [ database .] tabla RENAME tabla_nueva ; 1 2 mysql > ALTER TABLE presupuestos RENAME proyectos ; Query OK , 0 rows affected ( 0 . 03 sec ) Cambiar el tipo de dato de un campo \u00b6 1 mysql > ALTER TABLE [ database .] tabla CHANGE campo campo nuevo_tipo ; 1 2 3 mysql > ALTER TABLE presupuestos CHANGE asunto asunto VARCHAR ( 100 ); Query OK , 0 rows affected ( 0 . 23 sec ) Registros : 0 Duplicados : 0 Peligros : 0 Eliminar un campo existente \u00b6 1 mysql > ALTER TABLE [ database .] tabla DROP campo ; 1 2 3 mysql > ALTER TABLE presupuestos DROP adjunto ; Query OK , 0 rows affected ( 0 . 05 sec ) Registros : 0 Duplicados : 0 Peligros : 0 Eliminaci\u00f3n Tablas \u00b6 1 mysql > DROP TABLE [ database .] tabla ; 1 2 mysql > DROP TABLE presupuestos ; Query OK , 0 rows affected ( 0 . 44 sec ) Trabajando con Registros \u00b6 Nota: Si no se indica la Base de Datos a la que una tabla hace referencia, es necesario seleccionar previamente dicha BBDD ( use database ). Consultas \u00b6 1 mysql > SELECT campo1 , campo2 ,.. FROM [ database .] tabla ; 1 2 mysql > SELECT * FROM proyectos ; Empty set ( 0 . 10 sec ) Inserci\u00f3n de datos \u00b6 1 mysql > INSERT INTO [ database .] tabla ( campo1 , campo2 ,..) VALUES ( 'valor_campo1' , 'valor_campo2' ,..); 1 2 mysql > INSERT INTO presupuestos ( empresa , asunto , precio , fecha ) VALUES ( 'UPV' , 'Formaci\u00f3n GNU/Linux' , '600' , '2005-07-01' ); Query OK , 1 row affected ( 0 . 00 sec ) Modificaci\u00f3n de datos \u00b6 1 mysql > UPDATE [ database .] tabla SET campo1 = 'valor_nuevo_campo1' , campo2 = 'valor_nuevo_campo2' WHERE condici\u00f3n ; 1 mysql > UPDATE presupuestos SET empresa = 'UPV/EHU' WHERE empresa = 'UPV' ; Eliminaci\u00f3n de datos \u00b6 1 mysql > DELETE FROM [ database .] tabla WHERE condici\u00f3n ; 1 2 mysql > DELETE FROM presupuestos WHERE id = '1' ; Query OK , 1 row affected ( 0 . 04 sec ) Trabajando con MySQL \u00b6 Variables de Sistema \u00b6 Ver variables de sistema: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mysql > SHOW VARIABLES ; + ---------------------------------+----------------------------------------------------------+ | Variable_name | Value | + ---------------------------------+----------------------------------------------------------+ | back_log | 50 | | basedir | / usr / | | bdb_cache_size | 8388600 | | bdb_home | / var / lib / mysql / | | bdb_log_buffer_size | 32768 | | bdb_logdir | | | bdb_max_lock | 10000 | | bdb_shared_data | OFF | | bdb_tmpdir | / tmp / | | binlog_cache_size | 32768 | .............................................................................................. | version | 4 . 1 . 11 - Debian_4 - log | | version_bdb | Sleepycat Software : Berkeley DB 4 . 1 . 24 : ( April 1 , 2005 ) | | version_comment | Source distribution | | version_compile_machine | i386 | | version_compile_os | pc - linux - gnu | | wait_timeout | 28800 | + ---------------------------------+----------------------------------------------------------+ 196 rows in set ( 0 . 01 sec ) Configuraci\u00f3n \u00b6 /etc/mysql/my.cnf Tablas InnoDB por defecto \u00b6 1 2 [mysqld] default-table-type = innodb Localizaci\u00f3n \u00b6 1 2 [mysqld] language = /usr/share/mysql/spanish UTF8 por defecto \u00b6 Como cabrea tener bases de datos en latin1 y cosas as\u00ed que siempre dan problemas al cambiarlas de servidor o de versi\u00f3n de BDD, o con los programas. Cuando aprendes eso empiezas a configurar todo en UTF8, el apache, el mysql, las locales del sistema, etc... Y cada vez que creas una BDD en mysql este se empe\u00f1a en ponerte \"latin1\" o \"unicode_swedish_ci\" \u00bfSwedish? \u00bfQue es esto? \u00bfUn rollo chovinista? Despu\u00e9s para cada tabla, incomprensiblemente, tambi\u00e9n tienes que especificar que es \"utf8_unicode_ci\". Para evitar esto lo que podemos hacer es configurar mysql a\u00f1adiendo estas l\u00edneas en la secci\u00f3n [mysqld] de /etc/mysql/my.cnf : 1 2 3 4 # UTF8: skip-character-set-client-handshake collation_server=utf8_unicode_ci character_set_server=utf8 Si despu\u00e9s pedimos un status: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mysql > status -------------- mysql Ver 14 . 12 Distrib 5 . 0 . 51a , for debian-linux-gnu ( x86_64 ) using readline 5 . 2 Connection id : 31 Current database : Current user : root @ localhost SSL : Not in use Current pager : stdout Using outfile : ` Using delimiter : ; Server version : 5 . 0 . 51a-24 + lenny2 ( Debian ) Protocol version : 10 Connection : Localhost via UNIX socket Server characterset : utf8 Db characterset : utf8 Client characterset : utf8 Conn . characterset : utf8 UNIX socket : / var / run / mysqld / mysqld . sock Uptime : 11 min 21 sec Threads : 1 Questions : 86 Slow queries : 0 Opens : 23 Flush tables : 1 Open tables : 17 Queries per second avg : 0 . 126 -------------- Ahora si, ya podemos dormir tranquilos. Backups \u00b6 mysqldump \u00b6 Programa inclu\u00eddo en el paquete mysql-client Referencia manual MySQL Backup de todas las bases de datos: 1 $ mysqldump --opt -d -h host --all-databases --user = root --password = contrase\u00f1a > backup_irontec_mysql.sql Para cargar un backup hecho previamente: 1 $ mysql -h host --user = root --password = contrase\u00f1a < backup_irontec_mysql.sql Backup de una base de datos ( database ): 1 $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database > backup_irontec_mysql.sql Backup de una lista de tablas ( t1 , t2 ) de una base de datos ( database ): 1 $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database t1 t2 > backup_irontec_mysql.sql Para cargar un backup hecho previamente sobre una base de datos concreta: 1 $ mysql -h host --user = root --password = contrase\u00f1a database < backup_irontec_mysql.sql Si se quita la opci\u00f3n -d en el volcado se incluir\u00e1n los datos que contengan las tablas. Para tablas muy grandes, para evitar los bloqueos que se producen durante su respaldo, a\u00f1adir la opci\u00f3n --single-transaction . BCPs \u00b6 El comando equivalente al bcp de otros gestores es mysqlimport . Aqu\u00ed est\u00e1 la p\u00e1gina de ayuda del comando. Un ejemplo de uso ser\u00eda: 1 $ mysqlimport -h localhost -u adw -p -v -L --delete adw keywords.csv Para que no de errores hay que guardar el fichero en formato UTF8 (revisar con el comando od -c fichero.csv si no hay caracteres extra\u00f1os al principio). Por defecto se espera el car\u00e1cter TAB como separador de columnas y el retorno de carro como separador de registros. El fichero ser\u00e1 un CSV con las columnas en el mismo orden que la tabla en que se desea cargar los datos. El nombre del fichero sin extensi\u00f3n se debe corresponder con el nombre de la tabla. En el ejemplo anterior, la tabla ser\u00eda keywords . Para indicar un separador de campos y registros diferentes se pueden usar las opciones siguientes (ver man): 1 --fields-terminated-by=..., --fields-enclosed-by=..., --fields-optionally-enclosed-by=..., --fields-escaped-by=.. El mismo efecto se consigue con la siguiente query: 1 2 3 4 5 LOAD DATA LOCAL INFILE 'keywords_clean.csv' INTO TABLE keywords FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' ; Para que el cliente acepte la opci\u00f3n LOCAL debe ser ejecutado con la opci\u00f3n --local-infile , por ejemplo: 1 $ mysql -h localhost --local-infile -u adw -p adw Otras Herramientas \u00b6 mysqladmin \u00b6 Para cambiar la contrase\u00f1a del usuario root: 1 $ mysqladmin -u root password ` <nueva_password> ` Muestra las variables del gestor: 1 $ mysqladmin -u root -p variables Soluci\u00f3n de problemas \u00b6 Tabla de Schr\u00f6dinger \u00b6 La \u00fanica forma de solucionar un caso de tablas de Schr\u00f6dingers fue purgando la instalaci\u00f3n de MySQL y borrando el directorio de datos: 1 2 3 $ sudo dpkg --purge mysql-server-5.5 mysql-server-core-5.5 mysql-server $ sudo mv /var/lib/mysql /var/lib/mysql.bak $ sudo apt-get install mysql-server-5.5 mysql-server-core-5.5 mysql-server Otra forma menos agresiva fue encontrada aqu\u00ed y consiste en borrar los ficheros siguientes con el servidor parado y luego arrancarlo: 1 2 3 4 5 $ sudo service mysql stop $ sudo rm /var/lib/mysql/ibdata1 $ sudo rm /var/lib/mysql/ib_logfile0 $ sudo rm /var/lib/mysql/ib_logfile1 $ sudo service mysql start La \u00faltima vez que sucedi\u00f3 borr\u00e9 todas las tablas. Ver si borrando estos ficheros en cuanto ocurre se restituyen todas las tablas. Informaci\u00f3n en error \u00b6 Para tener m\u00e1s informaci\u00f3n de un error, si es sobre tablas InnoDB, se puede lanzar el siguiente comando: 1 SHOW ENGINE INNODB STATUS ; Concretamente la secci\u00f3n LATEST FOREIGN KEY ERROR muestra m\u00e1s detalle en los errores relacionados con foreign keys.","title":"MySQL"},{"location":"sistemas/mysql.html#mysql","text":"","title":"MySQL"},{"location":"sistemas/mysql.html#recomendaciones","text":"Utilizar siempre el tipo de dato DOUBLE para los reales (pag. 125 de libro \"Desarrollo Web con PHP 6 y MySQL 5.1\")","title":"Recomendaciones"},{"location":"sistemas/mysql.html#instalacion","text":"Instalamos el paquete mysql-server : 1 $ apt-get install mysql-server En caso de no haberlo configurado durante la instalaci\u00f3n del paquete, ajustar el password de root con el comando: 1 2 $ mysql -u root mysql> SET PASSWORD FOR 'root' @ 'localhost\" = PASSWORD(' new_password ' ) ; Por defecto s\u00f3lo podemos entrar con el usuario root en local. Para permitir el acceso remoto ejecutar el siguiente comando: 1 2 3 4 $ mysql -u root -p mysql> GRANT ALL PRIVILEGES ON *.* TO 'root' @ '%' IDENTIFIED BY 'password' WITH GRANT OPTION ; mysql> FLUSH PRIVILEGES ; mysql> exit Tambi\u00e9n hay que permitir las conexiones remotas a nivel de red comentando la siguiente linea del fichero de configuraci\u00f3n /etc/mysql/my.cnf : 1 bind-address = 127.0.0.1","title":"Instalaci\u00f3n"},{"location":"sistemas/mysql.html#conexion","text":"","title":"Conexi\u00f3n"},{"location":"sistemas/mysql.html#mysql-client","text":"1 mysql -u <usuario> -h <host> -P <puerto> <database> -p 1 2 3 4 5 6 7 8 $ mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g . Your MySQL connection id is 89 to server version: 4 .1.11-Debian_4-log Type 'help;' or '\\h' for help. Type '\\c' to clear the buffer. mysql>","title":"MySQL Client"},{"location":"sistemas/mysql.html#trabajando-con-bases-de-datos","text":"","title":"Trabajando con Bases de Datos"},{"location":"sistemas/mysql.html#creacion-de-bbdd","text":"1 2 mysql > CREATE DATABASE irontec_db ; Query OK , 1 row affected ( 0 . 03 sec )","title":"Creaci\u00f3n de BBDD"},{"location":"sistemas/mysql.html#seleccion-de-bbdd","text":"Cambiar o elegir base de datos a utilizar: 1 2 mysql > USE irontec_db ; Database changed Ver la base de datos seleccionada: 1 2 3 4 5 6 7 mysql > SELECT DATABASE (); + ------------+ | database () | + ------------+ | irontec_db | + ------------+ 1 row in set ( 0 . 00 sec )","title":"Selecci\u00f3n de BBDD"},{"location":"sistemas/mysql.html#eliminacion-de-bbdd","text":"1 2 mysql > DROP DATABASE irontec_db ; Query OK , 0 rows affected ( 0 . 60 sec )","title":"Eliminaci\u00f3n de BBDD"},{"location":"sistemas/mysql.html#eliminacion-de-todas-las-tablas-de-una-bbdd","text":"1 mysqldump -uUSUARIO -pPASSWORD --add-drop-table --no-data BBDD | grep -e '^DROP \\| FOREIGN_KEY_CHECKS' | mysql -uUSUARIO -pPASSWORD BBDD","title":"Eliminaci\u00f3n de todas las tablas de una BBDD"},{"location":"sistemas/mysql.html#trabajando-con-usuarios-privilegios","text":"","title":"Trabajando con Usuarios / Privilegios"},{"location":"sistemas/mysql.html#creacion-de-usuarios","text":"Usuarios con todos los privilegios: 1 2 mysql > GRANT ALL PRIVILEGES ON irontec_db . * TO irontec_user_allpriv @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 14 sec ) Usuarios sin privilegios (solo introduce el usuario en la tabla mysql.user ): 1 2 mysql > GRANT USAGE ON irontec_db . * TO irontec_user_nopriv @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 01 sec ) Usuarios con privilegios de solo lectura en registros: 1 2 mysql > GRANT SELECT ON irontec_db . * TO irontec_user_ro @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 02 sec ) Usuarios con privilegios de solo inserci\u00f3n o modificaci\u00f3n de registros: 1 2 mysql > GRANT INSERT , UPDATE on irontec_db . * TO irontec_user_wo @ localhost IDENTIFIED BY 'irontec_pass' ; Query OK , 0 rows affected ( 0 . 01 sec )","title":"Creaci\u00f3n de Usuarios"},{"location":"sistemas/mysql.html#seleccion-de-usuarios","text":"Ver el usuario con el que se est\u00e1 trabajando: 1 2 3 4 5 6 7 mysql > SELECT user (); + ------------------------+ | user () | + ------------------------+ | irontec_user @ localhost | + ------------------------+ 1 row in set ( 0 . 00 sec )","title":"Selecci\u00f3n de Usuarios"},{"location":"sistemas/mysql.html#visualizacion-de-privilegios-de-usuarios","text":"1 2 3 4 5 6 7 8 mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | | GRANT ALL PRIVILEGES ON ` irontec_db ` . * TO 'irontec_user_allpriv' @ 'localhost' | + ------------------------------------------------------------------------------------------------+ 2 rows in set ( 0 . 00 sec )","title":"Visualizaci\u00f3n de Privilegios de Usuarios"},{"location":"sistemas/mysql.html#eliminacion-de-usuarios","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 mysql > REVOKE ALL PRIVILEGES ON irontec_db . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > show grants for 'irontec_user_allpriv' @ 'localhost' ; + ------------------------------------------------------------------------------------------------+ | Grants for irontec_user_allpriv @ localhost | + ------------------------------------------------------------------------------------------------+ | GRANT USAGE ON * . * TO 'irontec_user_allpriv' @ 'localhost' IDENTIFIED BY PASSWORD '1a7f0760d48e' | + ------------------------------------------------------------------------------------------------+ 1 row in set ( 0 . 00 sec ) mysql > revoke usage on * . * from 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > drop user 'irontec_user_allpriv' @ 'localhost' ; Query OK , 0 rows affected ( 0 . 00 sec )","title":"Eliminaci\u00f3n de Usuarios"},{"location":"sistemas/mysql.html#trabajando-con-tablas","text":"","title":"Trabajando con Tablas"},{"location":"sistemas/mysql.html#tipos-de-tablas-y-motores-de-almacenamiento","text":"Referencia manual MySQL","title":"Tipos de Tablas y Motores de Almacenamiento"},{"location":"sistemas/mysql.html#tipos-de-campos","text":"Referencia manual MySQL","title":"Tipos de Campos"},{"location":"sistemas/mysql.html#creacion-tablas","text":"","title":"Creaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#myisam","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 05 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> ) ENGINE = MyISAM ; Query OK , 0 rows affected ( 0 . 20 sec )","title":"MyISAM"},{"location":"sistemas/mysql.html#innodb","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 mysql > CREATE TABLE clientes ( -> id_cliente INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> razon_social VARCHAR ( 50 ) NOT NULL , -> domicilio VARCHAR ( 100 ) NOT NULL , -> nif VARCHAR ( 9 ) NOT NULL , -> contacto VARCHAR ( 40 ) -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 10 sec ) mysql > CREATE TABLE presupuestos ( -> id_presupuesto INT ( 8 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , -> empresa INT ( 8 ) NOT NULL , -> asunto VARCHAR ( 60 ), -> precio FLOAT DEFAULT 0 . 0 , -> fecha DATE , -> index ( empresa ), -> FOREIGN KEY ( empresa ) REFERENCES clientes ( id_cliente ) ON DELETE CASCADE ON UPDATE CASCADE -> ) ENGINE = InnoDB ; Query OK , 0 rows affected ( 0 . 06 sec )","title":"InnoDB"},{"location":"sistemas/mysql.html#visualizacion-tablas","text":"Tablas contenidas en una Base de Datos: 1 2 3 4 5 6 7 8 mysql > show tables ; + ------------------+ | Tables_in_prueba | + ------------------+ | clientes | | presupuestos | + ------------------+ 2 rows in set ( 0 . 00 sec ) Estructura de una tabla: 1 2 3 4 5 6 7 8 9 10 11 mysql > DESC presupuestos ; + ----------------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | + ----------------+-------------+------+-----+---------+----------------+ | id_presupuesto | int ( 8 ) | | PRI | NULL | auto_increment | | empresa | varchar ( 50 ) | | | | | | asunto | varchar ( 60 ) | YES | | NULL | | | precio | float | YES | | 0 | | | fecha | date | YES | | NULL | | + ----------------+-------------+------+-----+---------+----------------+ 5 rows in set ( 0 . 01 sec ) Estado de todas las tablas: 1 mysql > show table status ;","title":"Visualizaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#modificacion-tablas","text":"Referencia manual MySQL","title":"Modificaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#anadir-un-nuevo-campo","text":"1 mysql > ALTER TABLE [ database .] tabla ADD campo_nuevo tipo AFTER campo_viejo ; 1 2 3 mysql > ALTER TABLE presupuestos ADD adjunto BLOB AFTER fecha ; Query OK , 0 rows affected ( 0 . 06 sec ) Registros : 0 Duplicados : 0 Peligros : 0","title":"A\u00f1adir un nuevo campo"},{"location":"sistemas/mysql.html#cambiar-el-nombre-de-una-tabla","text":"1 mysql > ALTER TABLE [ database .] tabla RENAME tabla_nueva ; 1 2 mysql > ALTER TABLE presupuestos RENAME proyectos ; Query OK , 0 rows affected ( 0 . 03 sec )","title":"Cambiar el nombre de una tabla"},{"location":"sistemas/mysql.html#cambiar-el-tipo-de-dato-de-un-campo","text":"1 mysql > ALTER TABLE [ database .] tabla CHANGE campo campo nuevo_tipo ; 1 2 3 mysql > ALTER TABLE presupuestos CHANGE asunto asunto VARCHAR ( 100 ); Query OK , 0 rows affected ( 0 . 23 sec ) Registros : 0 Duplicados : 0 Peligros : 0","title":"Cambiar el tipo de dato de un campo"},{"location":"sistemas/mysql.html#eliminar-un-campo-existente","text":"1 mysql > ALTER TABLE [ database .] tabla DROP campo ; 1 2 3 mysql > ALTER TABLE presupuestos DROP adjunto ; Query OK , 0 rows affected ( 0 . 05 sec ) Registros : 0 Duplicados : 0 Peligros : 0","title":"Eliminar un campo existente"},{"location":"sistemas/mysql.html#eliminacion-tablas","text":"1 mysql > DROP TABLE [ database .] tabla ; 1 2 mysql > DROP TABLE presupuestos ; Query OK , 0 rows affected ( 0 . 44 sec )","title":"Eliminaci\u00f3n Tablas"},{"location":"sistemas/mysql.html#trabajando-con-registros","text":"Nota: Si no se indica la Base de Datos a la que una tabla hace referencia, es necesario seleccionar previamente dicha BBDD ( use database ).","title":"Trabajando con Registros"},{"location":"sistemas/mysql.html#consultas","text":"1 mysql > SELECT campo1 , campo2 ,.. FROM [ database .] tabla ; 1 2 mysql > SELECT * FROM proyectos ; Empty set ( 0 . 10 sec )","title":"Consultas"},{"location":"sistemas/mysql.html#insercion-de-datos","text":"1 mysql > INSERT INTO [ database .] tabla ( campo1 , campo2 ,..) VALUES ( 'valor_campo1' , 'valor_campo2' ,..); 1 2 mysql > INSERT INTO presupuestos ( empresa , asunto , precio , fecha ) VALUES ( 'UPV' , 'Formaci\u00f3n GNU/Linux' , '600' , '2005-07-01' ); Query OK , 1 row affected ( 0 . 00 sec )","title":"Inserci\u00f3n de datos"},{"location":"sistemas/mysql.html#modificacion-de-datos","text":"1 mysql > UPDATE [ database .] tabla SET campo1 = 'valor_nuevo_campo1' , campo2 = 'valor_nuevo_campo2' WHERE condici\u00f3n ; 1 mysql > UPDATE presupuestos SET empresa = 'UPV/EHU' WHERE empresa = 'UPV' ;","title":"Modificaci\u00f3n de datos"},{"location":"sistemas/mysql.html#eliminacion-de-datos","text":"1 mysql > DELETE FROM [ database .] tabla WHERE condici\u00f3n ; 1 2 mysql > DELETE FROM presupuestos WHERE id = '1' ; Query OK , 1 row affected ( 0 . 04 sec )","title":"Eliminaci\u00f3n de datos"},{"location":"sistemas/mysql.html#trabajando-con-mysql","text":"","title":"Trabajando con MySQL"},{"location":"sistemas/mysql.html#variables-de-sistema","text":"Ver variables de sistema: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mysql > SHOW VARIABLES ; + ---------------------------------+----------------------------------------------------------+ | Variable_name | Value | + ---------------------------------+----------------------------------------------------------+ | back_log | 50 | | basedir | / usr / | | bdb_cache_size | 8388600 | | bdb_home | / var / lib / mysql / | | bdb_log_buffer_size | 32768 | | bdb_logdir | | | bdb_max_lock | 10000 | | bdb_shared_data | OFF | | bdb_tmpdir | / tmp / | | binlog_cache_size | 32768 | .............................................................................................. | version | 4 . 1 . 11 - Debian_4 - log | | version_bdb | Sleepycat Software : Berkeley DB 4 . 1 . 24 : ( April 1 , 2005 ) | | version_comment | Source distribution | | version_compile_machine | i386 | | version_compile_os | pc - linux - gnu | | wait_timeout | 28800 | + ---------------------------------+----------------------------------------------------------+ 196 rows in set ( 0 . 01 sec )","title":"Variables de Sistema"},{"location":"sistemas/mysql.html#configuracion","text":"/etc/mysql/my.cnf","title":"Configuraci\u00f3n"},{"location":"sistemas/mysql.html#tablas-innodb-por-defecto","text":"1 2 [mysqld] default-table-type = innodb","title":"Tablas InnoDB por defecto"},{"location":"sistemas/mysql.html#localizacion","text":"1 2 [mysqld] language = /usr/share/mysql/spanish","title":"Localizaci\u00f3n"},{"location":"sistemas/mysql.html#utf8-por-defecto","text":"Como cabrea tener bases de datos en latin1 y cosas as\u00ed que siempre dan problemas al cambiarlas de servidor o de versi\u00f3n de BDD, o con los programas. Cuando aprendes eso empiezas a configurar todo en UTF8, el apache, el mysql, las locales del sistema, etc... Y cada vez que creas una BDD en mysql este se empe\u00f1a en ponerte \"latin1\" o \"unicode_swedish_ci\" \u00bfSwedish? \u00bfQue es esto? \u00bfUn rollo chovinista? Despu\u00e9s para cada tabla, incomprensiblemente, tambi\u00e9n tienes que especificar que es \"utf8_unicode_ci\". Para evitar esto lo que podemos hacer es configurar mysql a\u00f1adiendo estas l\u00edneas en la secci\u00f3n [mysqld] de /etc/mysql/my.cnf : 1 2 3 4 # UTF8: skip-character-set-client-handshake collation_server=utf8_unicode_ci character_set_server=utf8 Si despu\u00e9s pedimos un status: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mysql > status -------------- mysql Ver 14 . 12 Distrib 5 . 0 . 51a , for debian-linux-gnu ( x86_64 ) using readline 5 . 2 Connection id : 31 Current database : Current user : root @ localhost SSL : Not in use Current pager : stdout Using outfile : ` Using delimiter : ; Server version : 5 . 0 . 51a-24 + lenny2 ( Debian ) Protocol version : 10 Connection : Localhost via UNIX socket Server characterset : utf8 Db characterset : utf8 Client characterset : utf8 Conn . characterset : utf8 UNIX socket : / var / run / mysqld / mysqld . sock Uptime : 11 min 21 sec Threads : 1 Questions : 86 Slow queries : 0 Opens : 23 Flush tables : 1 Open tables : 17 Queries per second avg : 0 . 126 -------------- Ahora si, ya podemos dormir tranquilos.","title":"UTF8 por defecto"},{"location":"sistemas/mysql.html#backups","text":"","title":"Backups"},{"location":"sistemas/mysql.html#mysqldump","text":"Programa inclu\u00eddo en el paquete mysql-client Referencia manual MySQL Backup de todas las bases de datos: 1 $ mysqldump --opt -d -h host --all-databases --user = root --password = contrase\u00f1a > backup_irontec_mysql.sql Para cargar un backup hecho previamente: 1 $ mysql -h host --user = root --password = contrase\u00f1a < backup_irontec_mysql.sql Backup de una base de datos ( database ): 1 $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database > backup_irontec_mysql.sql Backup de una lista de tablas ( t1 , t2 ) de una base de datos ( database ): 1 $ mysqldump --opt -d -h host --user = root --password = contrase\u00f1a database t1 t2 > backup_irontec_mysql.sql Para cargar un backup hecho previamente sobre una base de datos concreta: 1 $ mysql -h host --user = root --password = contrase\u00f1a database < backup_irontec_mysql.sql Si se quita la opci\u00f3n -d en el volcado se incluir\u00e1n los datos que contengan las tablas. Para tablas muy grandes, para evitar los bloqueos que se producen durante su respaldo, a\u00f1adir la opci\u00f3n --single-transaction .","title":"mysqldump"},{"location":"sistemas/mysql.html#bcps","text":"El comando equivalente al bcp de otros gestores es mysqlimport . Aqu\u00ed est\u00e1 la p\u00e1gina de ayuda del comando. Un ejemplo de uso ser\u00eda: 1 $ mysqlimport -h localhost -u adw -p -v -L --delete adw keywords.csv Para que no de errores hay que guardar el fichero en formato UTF8 (revisar con el comando od -c fichero.csv si no hay caracteres extra\u00f1os al principio). Por defecto se espera el car\u00e1cter TAB como separador de columnas y el retorno de carro como separador de registros. El fichero ser\u00e1 un CSV con las columnas en el mismo orden que la tabla en que se desea cargar los datos. El nombre del fichero sin extensi\u00f3n se debe corresponder con el nombre de la tabla. En el ejemplo anterior, la tabla ser\u00eda keywords . Para indicar un separador de campos y registros diferentes se pueden usar las opciones siguientes (ver man): 1 --fields-terminated-by=..., --fields-enclosed-by=..., --fields-optionally-enclosed-by=..., --fields-escaped-by=.. El mismo efecto se consigue con la siguiente query: 1 2 3 4 5 LOAD DATA LOCAL INFILE 'keywords_clean.csv' INTO TABLE keywords FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' ; Para que el cliente acepte la opci\u00f3n LOCAL debe ser ejecutado con la opci\u00f3n --local-infile , por ejemplo: 1 $ mysql -h localhost --local-infile -u adw -p adw","title":"BCPs"},{"location":"sistemas/mysql.html#otras-herramientas","text":"","title":"Otras Herramientas"},{"location":"sistemas/mysql.html#mysqladmin","text":"Para cambiar la contrase\u00f1a del usuario root: 1 $ mysqladmin -u root password ` <nueva_password> ` Muestra las variables del gestor: 1 $ mysqladmin -u root -p variables","title":"mysqladmin"},{"location":"sistemas/mysql.html#solucion-de-problemas","text":"","title":"Soluci\u00f3n de problemas"},{"location":"sistemas/mysql.html#tabla-de-schrodinger","text":"La \u00fanica forma de solucionar un caso de tablas de Schr\u00f6dingers fue purgando la instalaci\u00f3n de MySQL y borrando el directorio de datos: 1 2 3 $ sudo dpkg --purge mysql-server-5.5 mysql-server-core-5.5 mysql-server $ sudo mv /var/lib/mysql /var/lib/mysql.bak $ sudo apt-get install mysql-server-5.5 mysql-server-core-5.5 mysql-server Otra forma menos agresiva fue encontrada aqu\u00ed y consiste en borrar los ficheros siguientes con el servidor parado y luego arrancarlo: 1 2 3 4 5 $ sudo service mysql stop $ sudo rm /var/lib/mysql/ibdata1 $ sudo rm /var/lib/mysql/ib_logfile0 $ sudo rm /var/lib/mysql/ib_logfile1 $ sudo service mysql start La \u00faltima vez que sucedi\u00f3 borr\u00e9 todas las tablas. Ver si borrando estos ficheros en cuanto ocurre se restituyen todas las tablas.","title":"Tabla de Schr\u00f6dinger"},{"location":"sistemas/mysql.html#informacion-en-error","text":"Para tener m\u00e1s informaci\u00f3n de un error, si es sobre tablas InnoDB, se puede lanzar el siguiente comando: 1 SHOW ENGINE INNODB STATUS ; Concretamente la secci\u00f3n LATEST FOREIGN KEY ERROR muestra m\u00e1s detalle en los errores relacionados con foreign keys.","title":"Informaci\u00f3n en error"},{"location":"sistemas/nas.html","text":"NAS \u00b6 Enlaces \u00b6 Instalaci\u00f3n de Dokuwiki en ReadyNAS Duo Montaje de los discos del ReadyNAS Duo con Linux","title":"NAS"},{"location":"sistemas/nas.html#nas","text":"","title":"NAS"},{"location":"sistemas/nas.html#enlaces","text":"Instalaci\u00f3n de Dokuwiki en ReadyNAS Duo Montaje de los discos del ReadyNAS Duo con Linux","title":"Enlaces"},{"location":"sistemas/odroid.html","text":"ODROID \u00b6 Enlaces \u00b6 Varios \u00b6 ODROID Magazine ODROID Wiki ODROID.in : Im\u00e1genes de distintos sistemas. Hardware \u00b6 2.5 mm x 0.8 mm USB Charger Universal Cable Main Power Supply Generic PB20517 - Cargador (2 A, Negro) NorthPad Universal 2,5x0,8mm Europa Adaptador AC Cargador 5V 3A HDMI Femenino Enchufe A Micro HDMI Masculino Clavija Adaptador Para HDMI Cables Comandos \u00fatiles \u00b6 Utilidad de configuraci\u00f3n \u00b6 1 $ sudo odroid-utility.sh Flasheo de imagen Ubuntu oficial \u00b6 1 $ xzcat ubuntu-14.04.1lts-lubuntu-odroid-c1-20141211.img.xz | sudo dd of = /dev/mmcblk0 bs = 2M Backup de la SD (comprimiendo al vuelo) \u00b6 1 2 3 4 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | gzip -9 - > odroid_8gb_backup.img.gz $ #Restauraci\u00f3n: $ gunzip odroid_8gb_backup.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M Control de progreso durante flasheo \u00b6 1 $ sudo pkill -USR1 -n -x dd","title":"ODROID"},{"location":"sistemas/odroid.html#odroid","text":"","title":"ODROID"},{"location":"sistemas/odroid.html#enlaces","text":"","title":"Enlaces"},{"location":"sistemas/odroid.html#varios","text":"ODROID Magazine ODROID Wiki ODROID.in : Im\u00e1genes de distintos sistemas.","title":"Varios"},{"location":"sistemas/odroid.html#hardware","text":"2.5 mm x 0.8 mm USB Charger Universal Cable Main Power Supply Generic PB20517 - Cargador (2 A, Negro) NorthPad Universal 2,5x0,8mm Europa Adaptador AC Cargador 5V 3A HDMI Femenino Enchufe A Micro HDMI Masculino Clavija Adaptador Para HDMI Cables","title":"Hardware"},{"location":"sistemas/odroid.html#comandos-utiles","text":"","title":"Comandos \u00fatiles"},{"location":"sistemas/odroid.html#utilidad-de-configuracion","text":"1 $ sudo odroid-utility.sh","title":"Utilidad de configuraci\u00f3n"},{"location":"sistemas/odroid.html#flasheo-de-imagen-ubuntu-oficial","text":"1 $ xzcat ubuntu-14.04.1lts-lubuntu-odroid-c1-20141211.img.xz | sudo dd of = /dev/mmcblk0 bs = 2M","title":"Flasheo de imagen Ubuntu oficial"},{"location":"sistemas/odroid.html#backup-de-la-sd-comprimiendo-al-vuelo","text":"1 2 3 4 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | gzip -9 - > odroid_8gb_backup.img.gz $ #Restauraci\u00f3n: $ gunzip odroid_8gb_backup.img.gz -c | sudo dd of = /dev/mmcblk0 bs = 2M","title":"Backup de la SD (comprimiendo al vuelo)"},{"location":"sistemas/odroid.html#control-de-progreso-durante-flasheo","text":"1 $ sudo pkill -USR1 -n -x dd","title":"Control de progreso durante flasheo"},{"location":"sistemas/office.html","text":"Trucos sobre Office \u00b6 Interpolar una tabla de valores \u00b6 Existen varias formas para poder interpolar, una de ellas es utilizando el polinomio de Lagrange, debes buscarlo en un buen libro de m\u00e9todos num\u00e9ricos, incluso puede que encuentres algun programa que interpole en el mismo libro. La soluci\u00f3n mas f\u00e1cil es que utilizar Excel o algun programa de hojas de calculo. Una vez que tengas tu tabla de datos, haz click en el asistente de gr\u00e1ficos y elige el modo de dispersi\u00f3n, despu\u00e9s sigue los pasos. Cuando ya tengas la gr\u00e1fica da un click secundario en la curva que obtuviste y elige \"agregar linea de tendencia\" aqui elige la opci\u00f3n de gr\u00e1fica que quieras ajustar y con esta podr\u00e1s interpolar muy facilmente ya que te da la ecuacion si tu quieres, o puedes interpolar directamente con la curva que obtuviste, de hecho es la manera mas r\u00e1pida de interpolar, a trav\u00e9s de una curva. M\u00f3dulo de compatibilidad de Office 2010 \u00b6 Para poder abrir/editar documentos OpenXML en Office 2007 y anteriores, instalar el m\u00f3dulo de compatibilidad de Office 2007 .","title":"Office"},{"location":"sistemas/office.html#trucos-sobre-office","text":"","title":"Trucos sobre Office"},{"location":"sistemas/office.html#interpolar-una-tabla-de-valores","text":"Existen varias formas para poder interpolar, una de ellas es utilizando el polinomio de Lagrange, debes buscarlo en un buen libro de m\u00e9todos num\u00e9ricos, incluso puede que encuentres algun programa que interpole en el mismo libro. La soluci\u00f3n mas f\u00e1cil es que utilizar Excel o algun programa de hojas de calculo. Una vez que tengas tu tabla de datos, haz click en el asistente de gr\u00e1ficos y elige el modo de dispersi\u00f3n, despu\u00e9s sigue los pasos. Cuando ya tengas la gr\u00e1fica da un click secundario en la curva que obtuviste y elige \"agregar linea de tendencia\" aqui elige la opci\u00f3n de gr\u00e1fica que quieras ajustar y con esta podr\u00e1s interpolar muy facilmente ya que te da la ecuacion si tu quieres, o puedes interpolar directamente con la curva que obtuviste, de hecho es la manera mas r\u00e1pida de interpolar, a trav\u00e9s de una curva.","title":"Interpolar una tabla de valores"},{"location":"sistemas/office.html#modulo-de-compatibilidad-de-office-2010","text":"Para poder abrir/editar documentos OpenXML en Office 2007 y anteriores, instalar el m\u00f3dulo de compatibilidad de Office 2007 .","title":"M\u00f3dulo de compatibilidad de Office 2010"},{"location":"sistemas/raspi.html","text":"Raspberry Pi \u00b6 Enlaces \u00b6 Gesti\u00f3n usuarios IP Est\u00e1tica Instalaci\u00f3n cliente NO-IP Ultimate Raspberry Pi Configuration Guide GitPi: A Private Git Server on Raspberry Pi PiKISS para Raspberry Pi : Un pu\u00f1ado de scripts con men\u00fa para hacerte la vida m\u00e1s f\u00e1cil Java JDK para ARM Cylon.js para Raspberry Pi BerryBoot : Men\u00fa de arranque que permite arrancar varios sistemas instalados en la propia SD, en un disco duro/pendrive externo o en un almacenamiento en red (NAS). An A to Z Beginners Guide to Installing RetroPie on a Raspberry Pi How to install Oracle Java 8 in Debian via repository (JDK8) Adafruit - Learn Raspberry Pi Tutorials - The MagPi MagazineThe MagPi Magazine Read-Only Raspberry Pi Read-only Raspberry PI with Jessie Im\u00e1genes berryboot Distribuciones \u00b6 Binary Emotions Slideshow : Slideshow de im\u00e1genes/v\u00eddeos. Binary Emotions Digital Signage : Slideshow de p\u00e1ginas web. DietPi - Lightweight justice for your SBC Flint OS : Versi\u00f3n de ChromeOS con soporte Android. PiMAME : Raspbian con un frontend para lanzar emuladores. Lakka : Lakka is a lightweight Linux distribution that transforms a credit card sized computer into a full blown emulation console. RetroPie batocera.linux : Para construir Recalbox. Software \u00b6 Pi-Hole : DNS que filtra dominios marcados por la comunidad como \"molestos\" y conseguiremos una navegaci\u00f3n mas limpia y r\u00e1pida. PiVPN Hardware \u00b6 Lista de hardware verificado Quick2Wire ESP8266 Serial Esp- 01 : M\u00f3dulo Wifi por 2,25\u20ac recomendado por Fernando . Listado de recursos . Tutorial conexi\u00f3n a Raspi . TK2050 50W+50W Dual Channel Class T HIFI Stereo Audio Amplifier Board DC12V 24V : Recomendado por Fernando Oroquieta. Using a Console Cable Adaptador Wifi (RTL8188CUS) Adaptador TDT Conceptronic C08-096 (RTL2832) Receptor infrarrojos TP4056 DIY 1A Micro USB Li-Ion Battery Charging Board Charger Module : Cargador de bater\u00eda. PowerBoost 500 Charger - Rechargeable 5V Lipo USB Boost : Alimentaci\u00f3n ininterrumpida con bater\u00eda y gestor de carga. UA0053 ADAPTADOR LOGILINK USB 2.0 AUDIO 5.1 : Adaptador audio USB. 2-Channel 3W PAM8403 Audio Amplifier Board : Amplificador audio 3W. Stereo 2.8W Class D Audio Amplifier - I2C Control AGC : Amplificador audio 2.8W con control I2C. Comandos \u00fatiles \u00b6 Comprobar asignaciones de cliente No-IP \u00b6 Las asignaciones dejan marca en el log syslog : 1 2 3 4 5 6 7 edumoreno@raspi-git /var/log $ sudo fgrep noip syslog Oct 16 12 :18:57 raspi-git noip2 [ 2165 ] : v2.1.9 daemon ended. Oct 16 12 :19:19 raspi-git noip2 [ 2186 ] : v2.1.9 daemon started with NAT enabled Oct 16 12 :19:35 raspi-git noip2 [ 2186 ] : eduardofilo.no-ip.biz set to 88 .19.216.95 Oct 16 12 :53:06 raspi-git noip2 [ 2186 ] : v2.1.9 daemon ended. Oct 16 13 :15:23 raspi-git noip2 [ 2217 ] : v2.1.9 daemon started with NAT enabled Oct 16 13 :15:25 raspi-git noip2 [ 2217 ] : eduardofilo.no-ip.biz was already set to 88 .19.216.95. Utilidad de configuraci\u00f3n \u00b6 1 $ sudo raspi-config Backup de la SD (comprimiendo al vuelo) \u00b6 1 2 3 4 5 6 7 8 9 10 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | pv | gzip -9 - > Rpi_8gb_backup.img.gz $ #Backup s\u00f3lo de 4GB (si por ejemplo la tarjeta es m\u00e1s grande pero no aprovecha toda la superficie) $ sudo dd if = /dev/mmcblk0 bs = 2M count = 2048 | pv -s 4g | gzip -9 - > Rpi_4gb_backup.img.gz $ #Restauraci\u00f3n (comprimido con gzip): $ gunzip Rpi_8gb_backup.img.gz -c | pv | sudo dd of = /dev/mmcblk0 bs = 2M $ #Restauraci\u00f3n (comprimido con xz): $ xzcat Rpi_8gb_backup.img.xz | pv | sudo dd of = /dev/mmcblk0 bs = 2M $ #Restauraci\u00f3n (comprimido con zip): $ unzip -p Rpi_8gb_backup.zip | pv | sudo dd of = /dev/mmcblk0 bs = 2M Para hacer un backup parcial los c\u00e1lculos se har\u00edan as\u00ed. Primero sacamos los datos de la estructura de la tarjeta con fdisk : 1 2 3 4 5 6 7 8 9 10 11 $ sudo fdisk -l /dev/mmcblk0 Disco /dev/mmcblk0: 14 ,4 GiB, 15502147584 bytes, 30277632 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector ( l\u00f3gico/f\u00edsico ) : 512 bytes / 512 bytes Tama\u00f1o de E/S ( m\u00ednimo/\u00f3ptimo ) : 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0xa125a0dc Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo /dev/mmcblk0p1 8192 96663 88472 43 ,2M c W95 FAT32 ( LBA ) /dev/mmcblk0p2 98304 15550463 15452160 7 ,4G 83 Linux Aqu\u00ed vemos que cada sector ocupa 512 bytes. Nos fijamos en el \u00faltimo sector utilizado que en este caso es 15550463. Multiplicando este sector por el tama\u00f1o del sector (y sumando 1 al n\u00famero de sectores por si empiezan a contar en 0) obtendremos el n\u00famero de bytes que tendremos que copiar. Como el block size que vamos a utilizar es 2MB tendremos que truncar por lo alto (tambi\u00e9n servir\u00e1 de medida de seguidad). Los c\u00e1lculos en este caso resultar\u00edan: 1 (15550463 + 1) (sector) * 512 (Byte/sector) / 1024 (Byte/KB) / 1024 (KB/MB) / 2 (MB/bloque) = 3796,5 bloques Por tanto en este caso copiaremos 3797 bloques para cubrir esos 15550464 sectores. Backup de la SD (comprimiendo al vuelo y diviendo en trozos el fichero resultante) \u00b6 1 2 3 4 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | pv | gzip -9 - | split --bytes = 2G - Rpi_8gb_backup.img.gz.part_ $ #Restauraci\u00f3n: $ cat Rpi_8gb_backup.img.gz.part_* | gunzip -c | pv | sudo dd of = /dev/mmcblk0 bs = 2M Control de progreso durante flasheo \u00b6 1 $ sudo pkill -USR1 -n -x dd Como alternativa se puede instalar el comando dcfldd para sustituir a dd , con lo que obtendremos una indicaci\u00f3n del progreso de la copia. dcfldd informa cada 256 bloques escritos por defecto. Para que lo haga con m\u00e1s frecuencia hay que pasarle la opci\u00f3n statusinterval de esta forma: 1 2 $ #Backup: $ sudo dcfldd statusinterval = 10 if = /dev/mmcblk0 bs = 2M | gzip -9 - > Rpi_8gb_backup.img.gz Gesti\u00f3n de la SWAP \u00b6 Para redimensionar la Swap predeterminada (fichero de 100MB en /var/swap ): 1 2 3 $ sudo nano /etc/dphys-swapfile $ sudo dphys-swapfile setup $ sudo dphys-swapfile swapon Para consultar el estado de la swap: 1 $ swapon -s Para dejar de usar swap: 1 $ sudo swapoff -a Para activar la swap tal y como est\u00e1 definida en ''/etc/fstab'': 1 $ sudo swapon -a Para activar swap con un fichero en concreto: 1 $ sudo swapon /var/swap Escaneo de Raspberry Pi's en red \u00b6 1 2 $ arp -a | grep b8:27:eb $ sudo nmap -PR -sP 192 .168.1.0/24 | fgrep -B 2 \"Raspberry\" Pulsador encendido/apagado \u00b6 Existe una configuraci\u00f3n accesible mediante un Device Tree overlay que permite arrancar y parar el sistema controladamente con un pulsador entre los pines #5 (GPIO03 o SCL) y GND. Para que funcione hay que a\u00f1adir lo siguiente al fichero /boot/config.txt : 1 dtoverlay=gpio-shutdown Aqu\u00ed se documenta en profundidad. Pi-top \u00b6 Enlaces \u00b6 pi-top-install : Scripts para controlar el hardware del Pi-top (teclas brillo pantalla, power off, etc.) sobre Raspbian oficial. pi-top-battery-status : Muestra el estado de la bater\u00eda del Pi-top en Raspbian. Art\u00edculos interesantes de TheMagPi \u00b6 Librer\u00eda Python para controlar un puerto USB: P\u00e1gina 14 de #3 de TheMagPi Buffer de dispositivos controlados con el GPIO de RPi: P\u00e1gina 19 de #4 de TheMagPi Librer\u00eda wiringPi: Sirve para comandar y leer el GPIO desde bash. P\u00e1gina 14 de #6 de TheMagPi Comunicaci\u00f3n entre RaspPi y Arduino: P\u00e1gina 4 de #7 de TheMagPi Uso de interrupciones para chequear GPIO sin bucles: P\u00e1gina 12 de #7 de TheMagPi Librer\u00eda Nanpy para comunicar RaspPi y Arduino por USB: P\u00e1gina 10 de #8 de TheMagPi WebIOPi - Framework REST para controlar el GPIO: P\u00e1gina 8 de #9 de TheMagPi Seguridad \u00b6 SSH \u00b6 Editar el fichero /etc/ssh/sshd_config y modificar/a\u00f1adir las siguientes l\u00edneas ( fuente ): 1 2 3 4 PermitRootLogin no MaxAuthTries 3 MaxStartups 5 AllowUsers edumoreno Medidas de protecci\u00f3n: Top 20 OpenSSH Server Best Security Practices Protege tu servidor casero de ataques externos Protegiendo el servidor SSH con fail2ban Pasos para asegurar tu Raspberry Pi frente a posibles amenazas Varios \u00b6 Cambiar contrase\u00f1a predeterminada de usuario pi o mejor eliminar la cuenta. Instalar paquete fail2ban . Desinstalar paquete wolfram-engine que ocupa mucho y no se suele usar: sudo apt-get remove wolfram-engine Configuraci\u00f3n headless \u00b6 Activaci\u00f3n de SSH \u00b6 Crear un fichero vac\u00edo con nombre ssh en partici\u00f3n boot. Conexi\u00f3n a punto de acceso Wifi \u00b6 Crear un fichero con nombre wpa_supplicant.conf en partici\u00f3n boot con el siguiente contenido: 1 2 3 4 5 6 7 8 9 country=ES ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=\"<el_ssid>\" psk=\"<el_pwd>\" key_mgmt=WPA-PSK } IP est\u00e1tica \u00b6 Primero averiguamos el nombre del interfaz al que queremos poner la IP est\u00e1tica consultando ifconfig . Luego editamos /etc/dhcpcd.conf y al final a\u00f1adimos: 1 2 3 4 interface < nombre_interfaz > static ip_address =< ip > /24 static routers =< gateway > static domain_name_servers =< dns > Raspad \u00b6 Enlaces \u00b6 SunFounder Wiki Replace HDMI cable tutorial Replace power USB cable tutorial The touch screen does not work properly FAQ Install the fan for Raspad : STL's alternativos . Instalaci\u00f3n de Android Install Android on his Raspberry Pi Calibraci\u00f3n de pantalla https://www.facebook.com/groups/192987478051513/permalink/233950007288593/ Clic derecho Raspberry Ri Touch Screen setup right click with twofing \u2013 Raspbian Jessie Configuraci\u00f3n \u00b6 Sistema base \u00b6 Raspbian Digitalizador de pantalla \u00b6 El equipo reci\u00e9n instalado lleva un firmware bastante deficiente en el digitalizador t\u00e1ctil de la pantalla. Hay que actualizarlo siguiendo los pasos del siguiente art\u00edculo del wiki de SunFounder: The touch screen does not work properly FAQ Teclado en pantalla \u00b6 Instalar el paquete: matchbox-keyboard Clic secundario \u00b6 Para conseguir emular el clic derecho del rat\u00f3n procedemos como sigue (fuentes: 1 y 2 ): Instalamos los siguientes paquetes: 1 $ sudo apt-get update && sudo apt-get install build-essential libx11-dev libxtst-dev libxi-dev x11proto-randr-dev libxrandr-dev xserver-xorg-input-evdev xinput-calibrator Descargamos el c\u00f3digo de twofing y lo extraemos: 1 2 3 $ wget http://plippo.de/dwl/twofing/twofing-0.1.2.tar.gz $ tar -xvzf twofing-0.1.2.tar.gz $ cd twofing-0.1.2 Compilamos: 1 $ make && sudo make install Creamos el fichero /etc/udev/rules.d/70-touchscreen-ilitek.rules con el siguiente contenido: 1 2 SUBSYSTEMS==\"usb\",ACTION==\"add\",KERNEL==\"event*\",ATTRS{idVendor}==\"222a\",ATTRS{idProduct}==\"0001\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" KERNEL==\"event*\",ATTRS{name}==\"ILITEK Multi-Touch-V3000\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" Creamos el fichero /usr/share/X11/xorg.conf.d/90-touchinput.conf con el siguiente contenido: 1 2 3 4 5 6 7 8 9 10 Section \"InputClass\" Identifier \"calibration\" Driver \"evdev\" MatchProduct \"ILITEK ILITEK-TP\" MatchDevicePath \"/dev/input/event*\" Option \"Emulate3Buttons\" \"True\" Option \"EmulateThirdButton\" \"1\" Option \"EmulateThirdButtonTimeout\" \"750\" Option \"EmulateThirdButtonMoveThreshold\" \"30\" EndSection Creamos el fichero /etc/udev/rules.d/ 99-input-tagging.rules con el siguiente contenido: 1 ACTION==\"add\", KERNEL==\"event*\", SUBSYSTEM==\"input\", TAG+=\"systemd\", , ENV{SYSTEMD_ALIAS}+=\"/sys/subsystem/input/devices/$env{ID_SERIAL}\" Creamos el fichero ~/.config/autostart/twofing.desktop con el siguiente contenido: 1 2 3 4 5 [Desktop Entry] Type = Application Name = Twofing Exec = twofing StartupNotify = false Raspi Camera \u00b6 La documentaci\u00f3n de la librer\u00eda picamera en Python est\u00e1 aqu\u00ed . Concretamente las recetas para hacer la foto est\u00e1n aqu\u00ed . Por ejemplo, para hacer fotos que luego vayan a formar parte de un timelapse: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import time import picamera import datetime as dt with picamera . PiCamera () as camera : camera . resolution = ( 1280 , 720 ) camera . framerate = 30 # calentamiento/enfoque de la camara time . sleep ( 2 ) # fijamos valores para que salga mejor el timelapse camera . shutter_speed = camera . exposure_speed camera . exposure_mode = 'off' g = camera . awb_gains camera . awb_mode = 'off' camera . awb_gains = g camera . annotate_background = picamera . Color ( 'black' ) camera . annotate_text = dt . datetime . now () . strftime ( '%Y-%m- %d %H:%M:%S' ) filename = time . strftime ( \"%Y-%m- %d _%H%M.jpg\" ) camera . capture ( filename ) Activar consola en puerto serie \u00b6 Las Raspberry Pi Zero W, Pi 3 y Pi 4 traen un adaptador Bluetooth que en Raspbian est\u00e1 conectado precisamente a los pines #08 y #10 donde tradicionalmente se encontraba el puerto serie. En este documento se explican los cambios en estas versiones. En este otro art\u00edculo se dan opciones para modificar este comportamiento. Lo que sigue es una versi\u00f3n personal. Para liberar esta conexi\u00f3n debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: 1 dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: 1 2 Would you like a login shell to be accessible over serial? -> Yes Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos conectar a la consola a trav\u00e9s del puerto serie. Crankshaft \u00b6 Actualizaci\u00f3n distribuci\u00f3n \u00b6 Descargar la \u00faltima versi\u00f3n de la p\u00e1gina de descarga . Copiar el zip o mejor el contenido (.img y .md5) a la ra\u00edz de un pendrive con formato FAT32. Conectar el pendrive a la Raspberry antes de arrancar. El proceso de actualizaci\u00f3n (descrito en esta p\u00e1gina ) es lento y requiere varios reinicios. Esperar pues hasta terminar de ver el sistema correctamente arrancado. Instalar el script del Mausberry Car Switch: Copiar el siguiente script en la ruta /etc/switch.sh : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done Darle permisos de ejecuci\u00f3n. A\u00f1adir lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: 1 /etc/switch.sh &","title":"Raspberry Pi"},{"location":"sistemas/raspi.html#raspberry-pi","text":"","title":"Raspberry Pi"},{"location":"sistemas/raspi.html#enlaces","text":"Gesti\u00f3n usuarios IP Est\u00e1tica Instalaci\u00f3n cliente NO-IP Ultimate Raspberry Pi Configuration Guide GitPi: A Private Git Server on Raspberry Pi PiKISS para Raspberry Pi : Un pu\u00f1ado de scripts con men\u00fa para hacerte la vida m\u00e1s f\u00e1cil Java JDK para ARM Cylon.js para Raspberry Pi BerryBoot : Men\u00fa de arranque que permite arrancar varios sistemas instalados en la propia SD, en un disco duro/pendrive externo o en un almacenamiento en red (NAS). An A to Z Beginners Guide to Installing RetroPie on a Raspberry Pi How to install Oracle Java 8 in Debian via repository (JDK8) Adafruit - Learn Raspberry Pi Tutorials - The MagPi MagazineThe MagPi Magazine Read-Only Raspberry Pi Read-only Raspberry PI with Jessie Im\u00e1genes berryboot","title":"Enlaces"},{"location":"sistemas/raspi.html#distribuciones","text":"Binary Emotions Slideshow : Slideshow de im\u00e1genes/v\u00eddeos. Binary Emotions Digital Signage : Slideshow de p\u00e1ginas web. DietPi - Lightweight justice for your SBC Flint OS : Versi\u00f3n de ChromeOS con soporte Android. PiMAME : Raspbian con un frontend para lanzar emuladores. Lakka : Lakka is a lightweight Linux distribution that transforms a credit card sized computer into a full blown emulation console. RetroPie batocera.linux : Para construir Recalbox.","title":"Distribuciones"},{"location":"sistemas/raspi.html#software","text":"Pi-Hole : DNS que filtra dominios marcados por la comunidad como \"molestos\" y conseguiremos una navegaci\u00f3n mas limpia y r\u00e1pida. PiVPN","title":"Software"},{"location":"sistemas/raspi.html#hardware","text":"Lista de hardware verificado Quick2Wire ESP8266 Serial Esp- 01 : M\u00f3dulo Wifi por 2,25\u20ac recomendado por Fernando . Listado de recursos . Tutorial conexi\u00f3n a Raspi . TK2050 50W+50W Dual Channel Class T HIFI Stereo Audio Amplifier Board DC12V 24V : Recomendado por Fernando Oroquieta. Using a Console Cable Adaptador Wifi (RTL8188CUS) Adaptador TDT Conceptronic C08-096 (RTL2832) Receptor infrarrojos TP4056 DIY 1A Micro USB Li-Ion Battery Charging Board Charger Module : Cargador de bater\u00eda. PowerBoost 500 Charger - Rechargeable 5V Lipo USB Boost : Alimentaci\u00f3n ininterrumpida con bater\u00eda y gestor de carga. UA0053 ADAPTADOR LOGILINK USB 2.0 AUDIO 5.1 : Adaptador audio USB. 2-Channel 3W PAM8403 Audio Amplifier Board : Amplificador audio 3W. Stereo 2.8W Class D Audio Amplifier - I2C Control AGC : Amplificador audio 2.8W con control I2C.","title":"Hardware"},{"location":"sistemas/raspi.html#comandos-utiles","text":"","title":"Comandos \u00fatiles"},{"location":"sistemas/raspi.html#comprobar-asignaciones-de-cliente-no-ip","text":"Las asignaciones dejan marca en el log syslog : 1 2 3 4 5 6 7 edumoreno@raspi-git /var/log $ sudo fgrep noip syslog Oct 16 12 :18:57 raspi-git noip2 [ 2165 ] : v2.1.9 daemon ended. Oct 16 12 :19:19 raspi-git noip2 [ 2186 ] : v2.1.9 daemon started with NAT enabled Oct 16 12 :19:35 raspi-git noip2 [ 2186 ] : eduardofilo.no-ip.biz set to 88 .19.216.95 Oct 16 12 :53:06 raspi-git noip2 [ 2186 ] : v2.1.9 daemon ended. Oct 16 13 :15:23 raspi-git noip2 [ 2217 ] : v2.1.9 daemon started with NAT enabled Oct 16 13 :15:25 raspi-git noip2 [ 2217 ] : eduardofilo.no-ip.biz was already set to 88 .19.216.95.","title":"Comprobar asignaciones de cliente No-IP"},{"location":"sistemas/raspi.html#utilidad-de-configuracion","text":"1 $ sudo raspi-config","title":"Utilidad de configuraci\u00f3n"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo","text":"1 2 3 4 5 6 7 8 9 10 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | pv | gzip -9 - > Rpi_8gb_backup.img.gz $ #Backup s\u00f3lo de 4GB (si por ejemplo la tarjeta es m\u00e1s grande pero no aprovecha toda la superficie) $ sudo dd if = /dev/mmcblk0 bs = 2M count = 2048 | pv -s 4g | gzip -9 - > Rpi_4gb_backup.img.gz $ #Restauraci\u00f3n (comprimido con gzip): $ gunzip Rpi_8gb_backup.img.gz -c | pv | sudo dd of = /dev/mmcblk0 bs = 2M $ #Restauraci\u00f3n (comprimido con xz): $ xzcat Rpi_8gb_backup.img.xz | pv | sudo dd of = /dev/mmcblk0 bs = 2M $ #Restauraci\u00f3n (comprimido con zip): $ unzip -p Rpi_8gb_backup.zip | pv | sudo dd of = /dev/mmcblk0 bs = 2M Para hacer un backup parcial los c\u00e1lculos se har\u00edan as\u00ed. Primero sacamos los datos de la estructura de la tarjeta con fdisk : 1 2 3 4 5 6 7 8 9 10 11 $ sudo fdisk -l /dev/mmcblk0 Disco /dev/mmcblk0: 14 ,4 GiB, 15502147584 bytes, 30277632 sectores Unidades: sectores de 1 * 512 = 512 bytes Tama\u00f1o de sector ( l\u00f3gico/f\u00edsico ) : 512 bytes / 512 bytes Tama\u00f1o de E/S ( m\u00ednimo/\u00f3ptimo ) : 512 bytes / 512 bytes Tipo de etiqueta de disco: dos Identificador del disco: 0xa125a0dc Dispositivo Inicio Comienzo Final Sectores Tama\u00f1o Id Tipo /dev/mmcblk0p1 8192 96663 88472 43 ,2M c W95 FAT32 ( LBA ) /dev/mmcblk0p2 98304 15550463 15452160 7 ,4G 83 Linux Aqu\u00ed vemos que cada sector ocupa 512 bytes. Nos fijamos en el \u00faltimo sector utilizado que en este caso es 15550463. Multiplicando este sector por el tama\u00f1o del sector (y sumando 1 al n\u00famero de sectores por si empiezan a contar en 0) obtendremos el n\u00famero de bytes que tendremos que copiar. Como el block size que vamos a utilizar es 2MB tendremos que truncar por lo alto (tambi\u00e9n servir\u00e1 de medida de seguidad). Los c\u00e1lculos en este caso resultar\u00edan: 1 (15550463 + 1) (sector) * 512 (Byte/sector) / 1024 (Byte/KB) / 1024 (KB/MB) / 2 (MB/bloque) = 3796,5 bloques Por tanto en este caso copiaremos 3797 bloques para cubrir esos 15550464 sectores.","title":"Backup de la SD (comprimiendo al vuelo)"},{"location":"sistemas/raspi.html#backup-de-la-sd-comprimiendo-al-vuelo-y-diviendo-en-trozos-el-fichero-resultante","text":"1 2 3 4 $ #Backup: $ sudo dd if = /dev/mmcblk0 bs = 2M | pv | gzip -9 - | split --bytes = 2G - Rpi_8gb_backup.img.gz.part_ $ #Restauraci\u00f3n: $ cat Rpi_8gb_backup.img.gz.part_* | gunzip -c | pv | sudo dd of = /dev/mmcblk0 bs = 2M","title":"Backup de la SD (comprimiendo al vuelo y diviendo en trozos el fichero resultante)"},{"location":"sistemas/raspi.html#control-de-progreso-durante-flasheo","text":"1 $ sudo pkill -USR1 -n -x dd Como alternativa se puede instalar el comando dcfldd para sustituir a dd , con lo que obtendremos una indicaci\u00f3n del progreso de la copia. dcfldd informa cada 256 bloques escritos por defecto. Para que lo haga con m\u00e1s frecuencia hay que pasarle la opci\u00f3n statusinterval de esta forma: 1 2 $ #Backup: $ sudo dcfldd statusinterval = 10 if = /dev/mmcblk0 bs = 2M | gzip -9 - > Rpi_8gb_backup.img.gz","title":"Control de progreso durante flasheo"},{"location":"sistemas/raspi.html#gestion-de-la-swap","text":"Para redimensionar la Swap predeterminada (fichero de 100MB en /var/swap ): 1 2 3 $ sudo nano /etc/dphys-swapfile $ sudo dphys-swapfile setup $ sudo dphys-swapfile swapon Para consultar el estado de la swap: 1 $ swapon -s Para dejar de usar swap: 1 $ sudo swapoff -a Para activar la swap tal y como est\u00e1 definida en ''/etc/fstab'': 1 $ sudo swapon -a Para activar swap con un fichero en concreto: 1 $ sudo swapon /var/swap","title":"Gesti\u00f3n de la SWAP"},{"location":"sistemas/raspi.html#escaneo-de-raspberry-pis-en-red","text":"1 2 $ arp -a | grep b8:27:eb $ sudo nmap -PR -sP 192 .168.1.0/24 | fgrep -B 2 \"Raspberry\"","title":"Escaneo de Raspberry Pi's en red"},{"location":"sistemas/raspi.html#pulsador-encendidoapagado","text":"Existe una configuraci\u00f3n accesible mediante un Device Tree overlay que permite arrancar y parar el sistema controladamente con un pulsador entre los pines #5 (GPIO03 o SCL) y GND. Para que funcione hay que a\u00f1adir lo siguiente al fichero /boot/config.txt : 1 dtoverlay=gpio-shutdown Aqu\u00ed se documenta en profundidad.","title":"Pulsador encendido/apagado"},{"location":"sistemas/raspi.html#pi-top","text":"","title":"Pi-top"},{"location":"sistemas/raspi.html#enlaces_1","text":"pi-top-install : Scripts para controlar el hardware del Pi-top (teclas brillo pantalla, power off, etc.) sobre Raspbian oficial. pi-top-battery-status : Muestra el estado de la bater\u00eda del Pi-top en Raspbian.","title":"Enlaces"},{"location":"sistemas/raspi.html#articulos-interesantes-de-themagpi","text":"Librer\u00eda Python para controlar un puerto USB: P\u00e1gina 14 de #3 de TheMagPi Buffer de dispositivos controlados con el GPIO de RPi: P\u00e1gina 19 de #4 de TheMagPi Librer\u00eda wiringPi: Sirve para comandar y leer el GPIO desde bash. P\u00e1gina 14 de #6 de TheMagPi Comunicaci\u00f3n entre RaspPi y Arduino: P\u00e1gina 4 de #7 de TheMagPi Uso de interrupciones para chequear GPIO sin bucles: P\u00e1gina 12 de #7 de TheMagPi Librer\u00eda Nanpy para comunicar RaspPi y Arduino por USB: P\u00e1gina 10 de #8 de TheMagPi WebIOPi - Framework REST para controlar el GPIO: P\u00e1gina 8 de #9 de TheMagPi","title":"Art\u00edculos interesantes de TheMagPi"},{"location":"sistemas/raspi.html#seguridad","text":"","title":"Seguridad"},{"location":"sistemas/raspi.html#ssh","text":"Editar el fichero /etc/ssh/sshd_config y modificar/a\u00f1adir las siguientes l\u00edneas ( fuente ): 1 2 3 4 PermitRootLogin no MaxAuthTries 3 MaxStartups 5 AllowUsers edumoreno Medidas de protecci\u00f3n: Top 20 OpenSSH Server Best Security Practices Protege tu servidor casero de ataques externos Protegiendo el servidor SSH con fail2ban Pasos para asegurar tu Raspberry Pi frente a posibles amenazas","title":"SSH"},{"location":"sistemas/raspi.html#varios","text":"Cambiar contrase\u00f1a predeterminada de usuario pi o mejor eliminar la cuenta. Instalar paquete fail2ban . Desinstalar paquete wolfram-engine que ocupa mucho y no se suele usar: sudo apt-get remove wolfram-engine","title":"Varios"},{"location":"sistemas/raspi.html#configuracion-headless","text":"","title":"Configuraci\u00f3n headless"},{"location":"sistemas/raspi.html#activacion-de-ssh","text":"Crear un fichero vac\u00edo con nombre ssh en partici\u00f3n boot.","title":"Activaci\u00f3n de SSH"},{"location":"sistemas/raspi.html#conexion-a-punto-de-acceso-wifi","text":"Crear un fichero con nombre wpa_supplicant.conf en partici\u00f3n boot con el siguiente contenido: 1 2 3 4 5 6 7 8 9 country=ES ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=\"<el_ssid>\" psk=\"<el_pwd>\" key_mgmt=WPA-PSK }","title":"Conexi\u00f3n a punto de acceso Wifi"},{"location":"sistemas/raspi.html#ip-estatica","text":"Primero averiguamos el nombre del interfaz al que queremos poner la IP est\u00e1tica consultando ifconfig . Luego editamos /etc/dhcpcd.conf y al final a\u00f1adimos: 1 2 3 4 interface < nombre_interfaz > static ip_address =< ip > /24 static routers =< gateway > static domain_name_servers =< dns >","title":"IP est\u00e1tica"},{"location":"sistemas/raspi.html#raspad","text":"","title":"Raspad"},{"location":"sistemas/raspi.html#enlaces_2","text":"SunFounder Wiki Replace HDMI cable tutorial Replace power USB cable tutorial The touch screen does not work properly FAQ Install the fan for Raspad : STL's alternativos . Instalaci\u00f3n de Android Install Android on his Raspberry Pi Calibraci\u00f3n de pantalla https://www.facebook.com/groups/192987478051513/permalink/233950007288593/ Clic derecho Raspberry Ri Touch Screen setup right click with twofing \u2013 Raspbian Jessie","title":"Enlaces"},{"location":"sistemas/raspi.html#configuracion","text":"","title":"Configuraci\u00f3n"},{"location":"sistemas/raspi.html#sistema-base","text":"Raspbian","title":"Sistema base"},{"location":"sistemas/raspi.html#digitalizador-de-pantalla","text":"El equipo reci\u00e9n instalado lleva un firmware bastante deficiente en el digitalizador t\u00e1ctil de la pantalla. Hay que actualizarlo siguiendo los pasos del siguiente art\u00edculo del wiki de SunFounder: The touch screen does not work properly FAQ","title":"Digitalizador de pantalla"},{"location":"sistemas/raspi.html#teclado-en-pantalla","text":"Instalar el paquete: matchbox-keyboard","title":"Teclado en pantalla"},{"location":"sistemas/raspi.html#clic-secundario","text":"Para conseguir emular el clic derecho del rat\u00f3n procedemos como sigue (fuentes: 1 y 2 ): Instalamos los siguientes paquetes: 1 $ sudo apt-get update && sudo apt-get install build-essential libx11-dev libxtst-dev libxi-dev x11proto-randr-dev libxrandr-dev xserver-xorg-input-evdev xinput-calibrator Descargamos el c\u00f3digo de twofing y lo extraemos: 1 2 3 $ wget http://plippo.de/dwl/twofing/twofing-0.1.2.tar.gz $ tar -xvzf twofing-0.1.2.tar.gz $ cd twofing-0.1.2 Compilamos: 1 $ make && sudo make install Creamos el fichero /etc/udev/rules.d/70-touchscreen-ilitek.rules con el siguiente contenido: 1 2 SUBSYSTEMS==\"usb\",ACTION==\"add\",KERNEL==\"event*\",ATTRS{idVendor}==\"222a\",ATTRS{idProduct}==\"0001\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" KERNEL==\"event*\",ATTRS{name}==\"ILITEK Multi-Touch-V3000\",SYMLINK+=\"twofingtouch\",RUN+=\"/bin/chmod a+r /dev/twofingtouch\" Creamos el fichero /usr/share/X11/xorg.conf.d/90-touchinput.conf con el siguiente contenido: 1 2 3 4 5 6 7 8 9 10 Section \"InputClass\" Identifier \"calibration\" Driver \"evdev\" MatchProduct \"ILITEK ILITEK-TP\" MatchDevicePath \"/dev/input/event*\" Option \"Emulate3Buttons\" \"True\" Option \"EmulateThirdButton\" \"1\" Option \"EmulateThirdButtonTimeout\" \"750\" Option \"EmulateThirdButtonMoveThreshold\" \"30\" EndSection Creamos el fichero /etc/udev/rules.d/ 99-input-tagging.rules con el siguiente contenido: 1 ACTION==\"add\", KERNEL==\"event*\", SUBSYSTEM==\"input\", TAG+=\"systemd\", , ENV{SYSTEMD_ALIAS}+=\"/sys/subsystem/input/devices/$env{ID_SERIAL}\" Creamos el fichero ~/.config/autostart/twofing.desktop con el siguiente contenido: 1 2 3 4 5 [Desktop Entry] Type = Application Name = Twofing Exec = twofing StartupNotify = false","title":"Clic secundario"},{"location":"sistemas/raspi.html#raspi-camera","text":"La documentaci\u00f3n de la librer\u00eda picamera en Python est\u00e1 aqu\u00ed . Concretamente las recetas para hacer la foto est\u00e1n aqu\u00ed . Por ejemplo, para hacer fotos que luego vayan a formar parte de un timelapse: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import time import picamera import datetime as dt with picamera . PiCamera () as camera : camera . resolution = ( 1280 , 720 ) camera . framerate = 30 # calentamiento/enfoque de la camara time . sleep ( 2 ) # fijamos valores para que salga mejor el timelapse camera . shutter_speed = camera . exposure_speed camera . exposure_mode = 'off' g = camera . awb_gains camera . awb_mode = 'off' camera . awb_gains = g camera . annotate_background = picamera . Color ( 'black' ) camera . annotate_text = dt . datetime . now () . strftime ( '%Y-%m- %d %H:%M:%S' ) filename = time . strftime ( \"%Y-%m- %d _%H%M.jpg\" ) camera . capture ( filename )","title":"Raspi Camera"},{"location":"sistemas/raspi.html#activar-consola-en-puerto-serie","text":"Las Raspberry Pi Zero W, Pi 3 y Pi 4 traen un adaptador Bluetooth que en Raspbian est\u00e1 conectado precisamente a los pines #08 y #10 donde tradicionalmente se encontraba el puerto serie. En este documento se explican los cambios en estas versiones. En este otro art\u00edculo se dan opciones para modificar este comportamiento. Lo que sigue es una versi\u00f3n personal. Para liberar esta conexi\u00f3n debemos editar el fichero config.txt que hay en la partici\u00f3n boot y a\u00f1adir (al final por ejemplo) lo siguiente: 1 dtoverlay=pi3-disable-bt Esto podemos hacerlo sin necesidad de arrancar el sistema, montando la microSD en el ordenador. Para el siguiente paso s\u00ed necesitamos arrancar el sistema de la tarjeta en la Raspberry. Una vez estemos en la consola (por SSH o conectando una pantalla/teclado/rat\u00f3n de alguna manera), ejecutaremos: sudo raspi-config All\u00ed acudiremos a la secci\u00f3n Interfacing options > Serial y responderemos de la siguiente forma a las dos preguntas que nos har\u00e1: 1 2 Would you like a login shell to be accessible over serial? -> Yes Would you like the serial port hardware to be enabled? -> Yes Reiniciaremos y ya podremos conectar a la consola a trav\u00e9s del puerto serie.","title":"Activar consola en puerto serie"},{"location":"sistemas/raspi.html#crankshaft","text":"","title":"Crankshaft"},{"location":"sistemas/raspi.html#actualizacion-distribucion","text":"Descargar la \u00faltima versi\u00f3n de la p\u00e1gina de descarga . Copiar el zip o mejor el contenido (.img y .md5) a la ra\u00edz de un pendrive con formato FAT32. Conectar el pendrive a la Raspberry antes de arrancar. El proceso de actualizaci\u00f3n (descrito en esta p\u00e1gina ) es lento y requiere varios reinicios. Esperar pues hasta terminar de ver el sistema correctamente arrancado. Instalar el script del Mausberry Car Switch: Copiar el siguiente script en la ruta /etc/switch.sh : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/bin/bash #this is the GPIO pin connected to the lead on switch labeled OUT GPIOpin1 = 23 #this is the GPIO pin connected to the lead on switch labeled IN GPIOpin2 = 24 #Enter the shutdown delay in minutes delay = 0 echo \" $GPIOpin1 \" > /sys/class/gpio/export echo \"in\" > /sys/class/gpio/gpio $GPIOpin1 /direction echo \" $GPIOpin2 \" > /sys/class/gpio/export echo \"out\" > /sys/class/gpio/gpio $GPIOpin2 /direction echo \"1\" > /sys/class/gpio/gpio $GPIOpin2 /value let minute = $delay *60 SD = 0 SS = 0 SS2 = 0 while [ 1 = 1 ] ; do power = $( cat /sys/class/gpio/gpio $GPIOpin1 /value ) uptime = $( </proc/uptime ) uptime = ${ uptime %%.* } current = $uptime if [ $power = 1 ] && [ $SD = 0 ] then SD = 1 SS = ${ uptime %%.* } fi if [ $power = 1 ] && [ $SD = 1 ] then SS2 = ${ uptime %%.* } fi if [ \" $(( uptime - SS )) \" -gt \" $minute \" ] && [ $SD = 1 ] && [ $power = 1 ] then poweroff SD = 3 fi if [ \" $(( uptime - SS2 )) \" -gt 20 ] && [ $SD = 1 ] then SD = 0 fi sleep 1 done Darle permisos de ejecuci\u00f3n. A\u00f1adir lo siguiente al final del fichero /etc/rc.local (justo antes del exit 0 ) para que se ejecute en el arranque: 1 /etc/switch.sh &","title":"Actualizaci\u00f3n distribuci\u00f3n"},{"location":"sistemas/redes.html","text":"Redes \u00b6 Enlaces \u00b6 Email blacklist check Email blacklist check : Poner la IP directamente en la URL tras ip= Email blacklist check NSLookup online IP-Lookup : Servicio de resoluci\u00f3n inversa de IP recomendado por Google. \u00bfQu\u00e9 navegador estoy utilizando? : Chequea e informa sobre el navegador utilizado y da sugerencias sobre si merece la pena cambiar/actualizar. Message header analyzer : An\u00e1lisis de cabeceras de un correo. Indica los saltos que ha hecho el mensaje entre los distintos servidores SMTP que ha atravesado hasta su destino. Glosario \u00b6 OID: Basicamente, un OID, o Identificador de Objeto, es una secuencia de n\u00fameros que se asignan jer\u00e1rquicamente y que permite identificar objetos en la red, siendo usados con gran cantidad de protocolos. ( Definici\u00f3n en RedIRIS )","title":"Redes"},{"location":"sistemas/redes.html#redes","text":"","title":"Redes"},{"location":"sistemas/redes.html#enlaces","text":"Email blacklist check Email blacklist check : Poner la IP directamente en la URL tras ip= Email blacklist check NSLookup online IP-Lookup : Servicio de resoluci\u00f3n inversa de IP recomendado por Google. \u00bfQu\u00e9 navegador estoy utilizando? : Chequea e informa sobre el navegador utilizado y da sugerencias sobre si merece la pena cambiar/actualizar. Message header analyzer : An\u00e1lisis de cabeceras de un correo. Indica los saltos que ha hecho el mensaje entre los distintos servidores SMTP que ha atravesado hasta su destino.","title":"Enlaces"},{"location":"sistemas/redes.html#glosario","text":"OID: Basicamente, un OID, o Identificador de Objeto, es una secuencia de n\u00fameros que se asignan jer\u00e1rquicamente y que permite identificar objetos en la red, siendo usados con gran cantidad de protocolos. ( Definici\u00f3n en RedIRIS )","title":"Glosario"},{"location":"sistemas/router_xiaomi.html","text":"Router Xiaomi MiWiFi 3G \u00b6 Enlaces \u00b6 Serie de art\u00edculos de Carlos Monge sobre OpenWRT instalado en Xiaomi MiWiFi 3G P\u00e1gina del router en OpenWRT : Incluye instrucciones para debrick. Xiaomi WiFi Router 3G : Hilo del foro OpenWRT sobre el Xiaomi MiWiFi 3G router. Xiaomi Wifi Router 3G - 18.06.X / feedback and help : Hilo del foro OpenWRT sobre el firmware 18.06 en el Xiaomi MiWiFi 3G router. Things to do after installing Linux LEDE 17.01 Configuraci\u00f3n desde cero \u00b6 Instalar Luci: 1 2 3 4 5 # opkg update # opkg install luci # opkg install luci-ssl # /etc/init.d/uhttpd start # /etc/init.d/uhttpd enable Descarga de paquetes por HTTPS: Instalar: 1 2 # opkg update # opkg install ca-certificates Editar el fichero /etc/opkg/distfeeds.conf y cambiar http por https. Crear usuario normal y permitirle usar sudo: Ejecutar: 1 2 3 4 5 6 7 8 # opkg update # opkg install shadow-useradd # useradd miusuario # passwd miusuario # mkdir /home # mkdir /home/miusuario # chown miusuario:miusuario /home/miusuario # opkg install sudo Editar el fichero /etc/passwd y poner shell al usuario nuevo: 1 miusuario : x : 1000 : 1000 ::/ home /miusuario:/bin/ ash Ejecutar el comando visudo y a\u00f1adir la siguiente l\u00ednea bajo la correspondiente a root: 1 miusuario ALL=(ALL) ALL Desactivar ping: En Luci ir a la ruta Network > Firewall Abrir la solapa Traffic Rules Desactivar las reglas (desmarcando el check) Allow-Ping , Allow-ICMPv6-Input y Allow-ICMPv6-Forward Pulsar el bot\u00f3n Save & Apply abajo a la derecha Bloquear la publicidad desde el fichero hosts: Iniciar sesi\u00f3n SSH. Hacer backup de fichero hosts: 1 $ sudo cp /etc/hosts /etc/hosts.bkp Editar crontab de root con comando sudo crontab -e y a\u00f1adir la siguiente l\u00ednea: 1 0 */ 12 * * * wget -O / etc / hosts https :// raw . githubusercontent . com / StevenBlack / hosts / master / alternates / fakenews / hosts ; cat / etc / hosts . bkp >> / etc / hosts Hay varias configuraciones posibles para el fichero hosts descritas aqu\u00ed . Configuraci\u00f3n de ProtonVPN \u00b6 Siguiendo esta gu\u00eda . Antes de empezar es recomendable hacer un backup de la configuraci\u00f3n del router por si es necesario volver a empezar. Instalaci\u00f3n de paquetes (el comando siguiente instala adem\u00e1s los siguientes paquetes dependientes kmod-tun liblzo zlib libopenssl ): 1 $ sudo opkg install luci-app-openvpn openvpn-openssl Creamos un nuevo interface para lo que en Luci vamos a Network > Interfaces . Pulsamos el bot\u00f3n Add new interface... . En el formulario que aparece rellenamos los siguientes campos: Name of the new interface : openvpn Protocol of the new interface : Unmanaged Cover the following interface : Custom Interface: \"tun0\" Pulsar el bot\u00f3n Submit . Seleccionar la pesta\u00f1a Advanced Settings . Marcar la opci\u00f3n Bring up on boot . Seleccionar la pesta\u00f1a Firewall Settings . En el desplegable Create / Assign firewall-zone crear una zona con nombre vpn . Pulsar el bot\u00f3n Save & Apply . Ir a la secci\u00f3n Network > Firewall . Los siguientes cambios son muy sensibles, por lo que muestro un pantallazo del estado de las zonas antes de los cambios: En la zona wan cambiar Input y Forward a drop y desmarcar los checks Masquerading y MSS clamping . En la zona vpn cambiar Input y Forward a drop y marcar los checks Masquerading y MSS clamping . Pulsar el bot\u00f3n Save & Apply . Pulsar el bot\u00f3n Edit de la zona lan . En la secci\u00f3n Inter-Zone Forwarding abrir el desplegable Allow forward to destination zones y marcar la secci\u00f3n vpn y desmarcar wan . Pulsar el bot\u00f3n Save & Apply Pantallazo de c\u00f3mo deber\u00edan de quedar las zonas: Descargar el perfil .ovpn deseado de la secci\u00f3n \"Downloads\" de nuestro perfil en ProtonVPN seleccionando como plataforma Router y protocolo UDP . Vamos a suponer que el fichero se llama is-es-01.protonvpn.com.udp.ovpn . Editar el fichero y modificar la l\u00ednea que contiene el par\u00e1metro auth-user-pass dej\u00e1ndola como sigue: 1 auth-user-pass '/etc/openvpn/protonvpn/auth' Transferir el fichero descargado al router y situarlo en la ruta /etc/openvpn/protonvpn (habr\u00e1 que crear el directorio protonvpn ). Ir a la secci\u00f3n \"Account\" de nuestro perfil en ProtonVPN y tomar nota de los valores de \"OpenVPN/IKEv2 Username\" y \"OpenVPN/IKEv2 Password\". Crear en el router el fichero /etc/openvpn/protonvpn/auth , editarlo y escribir en la primera l\u00ednea el username anterior y en la segunda el password. Editar en el router el fichero /etc/config/openvpn y a\u00f1adir las siguientes l\u00edneas: 1 2 3 config openvpn 'protonvpn' option config '/etc/openvpn/protonvpn/is-es-01.protonvpn.com.udp.ovpn' option enabled '1' Reiniciar el servicio openvpn en el router: 1 $ sudo /etc/init.d/openvpn restart Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers dejar \u00fanicamente la IP 10.8.8.1 (en caso de utilizar OpenVPN por protocolo TCP usar 10.7.7.1 en su lugar). Pulsar el bot\u00f3n Save & Apply . Para mantener acceso desde el exterior de la red, estudiar este art\u00edculo . Actualizaci\u00f3n firmware \u00b6 Siguiendo este art\u00edculo : Bajar el paquete pinchando uno de los enlaces siguientes seg\u00fan si se desea la versi\u00f3n de desarrollo o la estable de la p\u00e1gina de soporte del router en OpenWRT : Estable: Firmware OpenWrt Upgrade URL Desarrollo: Firmware OpenWrt snapshot Upgrade URL En el interfaz web (Luci) acudir a la ruta System > Backup / Flash Firmware . En la secci\u00f3n Flash new firmware image pulsar el bot\u00f3n Examinar... y seleccionar el fichero .tar bajado en el punto anterior. Pulsar el bot\u00f3n Flash image... . En la siguiente p\u00e1gina confirmar el flasheo comprobando si se quiere los checksums. Cuando termine el proceso habremos perdido los paquetes adicionales. Tambi\u00e9n los ajustes hechos al usuario adicional (como el directorio home) por lo que seguramente habr\u00e1 que repasar la mayor\u00eda de los ajustes hechos durante la configuraci\u00f3n desde cero .","title":"Router Xiaomi MiWiFi 3G"},{"location":"sistemas/router_xiaomi.html#router-xiaomi-miwifi-3g","text":"","title":"Router Xiaomi MiWiFi 3G"},{"location":"sistemas/router_xiaomi.html#enlaces","text":"Serie de art\u00edculos de Carlos Monge sobre OpenWRT instalado en Xiaomi MiWiFi 3G P\u00e1gina del router en OpenWRT : Incluye instrucciones para debrick. Xiaomi WiFi Router 3G : Hilo del foro OpenWRT sobre el Xiaomi MiWiFi 3G router. Xiaomi Wifi Router 3G - 18.06.X / feedback and help : Hilo del foro OpenWRT sobre el firmware 18.06 en el Xiaomi MiWiFi 3G router. Things to do after installing Linux LEDE 17.01","title":"Enlaces"},{"location":"sistemas/router_xiaomi.html#configuracion-desde-cero","text":"Instalar Luci: 1 2 3 4 5 # opkg update # opkg install luci # opkg install luci-ssl # /etc/init.d/uhttpd start # /etc/init.d/uhttpd enable Descarga de paquetes por HTTPS: Instalar: 1 2 # opkg update # opkg install ca-certificates Editar el fichero /etc/opkg/distfeeds.conf y cambiar http por https. Crear usuario normal y permitirle usar sudo: Ejecutar: 1 2 3 4 5 6 7 8 # opkg update # opkg install shadow-useradd # useradd miusuario # passwd miusuario # mkdir /home # mkdir /home/miusuario # chown miusuario:miusuario /home/miusuario # opkg install sudo Editar el fichero /etc/passwd y poner shell al usuario nuevo: 1 miusuario : x : 1000 : 1000 ::/ home /miusuario:/bin/ ash Ejecutar el comando visudo y a\u00f1adir la siguiente l\u00ednea bajo la correspondiente a root: 1 miusuario ALL=(ALL) ALL Desactivar ping: En Luci ir a la ruta Network > Firewall Abrir la solapa Traffic Rules Desactivar las reglas (desmarcando el check) Allow-Ping , Allow-ICMPv6-Input y Allow-ICMPv6-Forward Pulsar el bot\u00f3n Save & Apply abajo a la derecha Bloquear la publicidad desde el fichero hosts: Iniciar sesi\u00f3n SSH. Hacer backup de fichero hosts: 1 $ sudo cp /etc/hosts /etc/hosts.bkp Editar crontab de root con comando sudo crontab -e y a\u00f1adir la siguiente l\u00ednea: 1 0 */ 12 * * * wget -O / etc / hosts https :// raw . githubusercontent . com / StevenBlack / hosts / master / alternates / fakenews / hosts ; cat / etc / hosts . bkp >> / etc / hosts Hay varias configuraciones posibles para el fichero hosts descritas aqu\u00ed .","title":"Configuraci\u00f3n desde cero"},{"location":"sistemas/router_xiaomi.html#configuracion-de-protonvpn","text":"Siguiendo esta gu\u00eda . Antes de empezar es recomendable hacer un backup de la configuraci\u00f3n del router por si es necesario volver a empezar. Instalaci\u00f3n de paquetes (el comando siguiente instala adem\u00e1s los siguientes paquetes dependientes kmod-tun liblzo zlib libopenssl ): 1 $ sudo opkg install luci-app-openvpn openvpn-openssl Creamos un nuevo interface para lo que en Luci vamos a Network > Interfaces . Pulsamos el bot\u00f3n Add new interface... . En el formulario que aparece rellenamos los siguientes campos: Name of the new interface : openvpn Protocol of the new interface : Unmanaged Cover the following interface : Custom Interface: \"tun0\" Pulsar el bot\u00f3n Submit . Seleccionar la pesta\u00f1a Advanced Settings . Marcar la opci\u00f3n Bring up on boot . Seleccionar la pesta\u00f1a Firewall Settings . En el desplegable Create / Assign firewall-zone crear una zona con nombre vpn . Pulsar el bot\u00f3n Save & Apply . Ir a la secci\u00f3n Network > Firewall . Los siguientes cambios son muy sensibles, por lo que muestro un pantallazo del estado de las zonas antes de los cambios: En la zona wan cambiar Input y Forward a drop y desmarcar los checks Masquerading y MSS clamping . En la zona vpn cambiar Input y Forward a drop y marcar los checks Masquerading y MSS clamping . Pulsar el bot\u00f3n Save & Apply . Pulsar el bot\u00f3n Edit de la zona lan . En la secci\u00f3n Inter-Zone Forwarding abrir el desplegable Allow forward to destination zones y marcar la secci\u00f3n vpn y desmarcar wan . Pulsar el bot\u00f3n Save & Apply Pantallazo de c\u00f3mo deber\u00edan de quedar las zonas: Descargar el perfil .ovpn deseado de la secci\u00f3n \"Downloads\" de nuestro perfil en ProtonVPN seleccionando como plataforma Router y protocolo UDP . Vamos a suponer que el fichero se llama is-es-01.protonvpn.com.udp.ovpn . Editar el fichero y modificar la l\u00ednea que contiene el par\u00e1metro auth-user-pass dej\u00e1ndola como sigue: 1 auth-user-pass '/etc/openvpn/protonvpn/auth' Transferir el fichero descargado al router y situarlo en la ruta /etc/openvpn/protonvpn (habr\u00e1 que crear el directorio protonvpn ). Ir a la secci\u00f3n \"Account\" de nuestro perfil en ProtonVPN y tomar nota de los valores de \"OpenVPN/IKEv2 Username\" y \"OpenVPN/IKEv2 Password\". Crear en el router el fichero /etc/openvpn/protonvpn/auth , editarlo y escribir en la primera l\u00ednea el username anterior y en la segunda el password. Editar en el router el fichero /etc/config/openvpn y a\u00f1adir las siguientes l\u00edneas: 1 2 3 config openvpn 'protonvpn' option config '/etc/openvpn/protonvpn/is-es-01.protonvpn.com.udp.ovpn' option enabled '1' Reiniciar el servicio openvpn en el router: 1 $ sudo /etc/init.d/openvpn restart Ir a Network > Interfaces > LAN y en el par\u00e1metro Use custom DNS servers dejar \u00fanicamente la IP 10.8.8.1 (en caso de utilizar OpenVPN por protocolo TCP usar 10.7.7.1 en su lugar). Pulsar el bot\u00f3n Save & Apply . Para mantener acceso desde el exterior de la red, estudiar este art\u00edculo .","title":"Configuraci\u00f3n de ProtonVPN"},{"location":"sistemas/router_xiaomi.html#actualizacion-firmware","text":"Siguiendo este art\u00edculo : Bajar el paquete pinchando uno de los enlaces siguientes seg\u00fan si se desea la versi\u00f3n de desarrollo o la estable de la p\u00e1gina de soporte del router en OpenWRT : Estable: Firmware OpenWrt Upgrade URL Desarrollo: Firmware OpenWrt snapshot Upgrade URL En el interfaz web (Luci) acudir a la ruta System > Backup / Flash Firmware . En la secci\u00f3n Flash new firmware image pulsar el bot\u00f3n Examinar... y seleccionar el fichero .tar bajado en el punto anterior. Pulsar el bot\u00f3n Flash image... . En la siguiente p\u00e1gina confirmar el flasheo comprobando si se quiere los checksums. Cuando termine el proceso habremos perdido los paquetes adicionales. Tambi\u00e9n los ajustes hechos al usuario adicional (como el directorio home) por lo que seguramente habr\u00e1 que repasar la mayor\u00eda de los ajustes hechos durante la configuraci\u00f3n desde cero .","title":"Actualizaci\u00f3n firmware"},{"location":"sistemas/soft_imprescindible.html","text":"Aplicaciones interesantes \u00b6 Multi OS \u00b6 EICAR : Virus de laboratorio para poner a prueba scanners antivirus. MPV : Media Player. Linux \u00b6 GNU Screen Shotcut : Editor de v\u00eddeo. SMPlayer : Frontend para MPlayer. Soporta YouTube. Windows \u00b6 CNet Windows Vista Test : Test online de requerimientos de Vista. Colossus : Gestor de contrase\u00f1as. KeePass : Gestor de contrase\u00f1as. WHosIP : Utilidad de linea de comando que muestra toda la informaci\u00f3n disponible sobre una IP (propietario, pais, rango de IP's, informaci\u00f3n de contacto, etc. ShelExec : Para crear un CD/DVD de autoarranque. SharpKeys : Mapeo del teclado (tambi\u00e9n sirve para desactivar alguna tecla). Wink : Creaci\u00f3n tutoriales animados. The Regex Coach : Editor de expresiones regulares. SoftPerfect Network Scanner : Scanner de red. Lista los adaptadores de red conectados a la red. SIW : Auditor de sistemas en un dispositivo USB. Virtual CloneDrive : Para montar ISOs. CCleaner : Optimizaci\u00f3n del sistema y limpieza de archivos de aplicaciones no utilizadas (an\u00e1lisis aqu\u00ed ). Cleanmgr+ : Alternativa a CCleaner . Gesti\u00f3n de red \u00b6 SpiceWorks OpManager Zenoss Zabbix MRTG GroudWork","title":"Aplicaciones interesantes"},{"location":"sistemas/soft_imprescindible.html#aplicaciones-interesantes","text":"","title":"Aplicaciones interesantes"},{"location":"sistemas/soft_imprescindible.html#multi-os","text":"EICAR : Virus de laboratorio para poner a prueba scanners antivirus. MPV : Media Player.","title":"Multi OS"},{"location":"sistemas/soft_imprescindible.html#linux","text":"GNU Screen Shotcut : Editor de v\u00eddeo. SMPlayer : Frontend para MPlayer. Soporta YouTube.","title":"Linux"},{"location":"sistemas/soft_imprescindible.html#windows","text":"CNet Windows Vista Test : Test online de requerimientos de Vista. Colossus : Gestor de contrase\u00f1as. KeePass : Gestor de contrase\u00f1as. WHosIP : Utilidad de linea de comando que muestra toda la informaci\u00f3n disponible sobre una IP (propietario, pais, rango de IP's, informaci\u00f3n de contacto, etc. ShelExec : Para crear un CD/DVD de autoarranque. SharpKeys : Mapeo del teclado (tambi\u00e9n sirve para desactivar alguna tecla). Wink : Creaci\u00f3n tutoriales animados. The Regex Coach : Editor de expresiones regulares. SoftPerfect Network Scanner : Scanner de red. Lista los adaptadores de red conectados a la red. SIW : Auditor de sistemas en un dispositivo USB. Virtual CloneDrive : Para montar ISOs. CCleaner : Optimizaci\u00f3n del sistema y limpieza de archivos de aplicaciones no utilizadas (an\u00e1lisis aqu\u00ed ). Cleanmgr+ : Alternativa a CCleaner .","title":"Windows"},{"location":"sistemas/soft_imprescindible.html#gestion-de-red","text":"SpiceWorks OpManager Zenoss Zabbix MRTG GroudWork","title":"Gesti\u00f3n de red"},{"location":"sistemas/trucos_windows.html","text":"Trucos Windows \u00b6 Acelerar la exploraci\u00f3n de equipos en red e incrementar el rendimiento general \u00b6 Borrar la clave siguiente ( fuente ): 1 HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RemoteComputer\\NameSpace\\{D6277990-4C6A-11CF-8D87-00AA0060F5BF} Cambiar la clave de producto en Windows XP \u00b6 Proceder como sigue ( fuente ): Ejecutar regedit y buscar la clave HKEY_LOCAL_MACHINE\\Software\\Microsoft\\WindowsNT\\CurrentVersion\\WPAEvents Abrir la clave oobetimer, borrar el valor hexadecimal CA, y cerrar regedit Ir a Inicio, Ejecutar y escribir %systemroot%\\system32\\oobe\\msoobe.exe /a Nos aparecer\u00e1 la pantalla de activaci\u00f3n de Windows XP, seleccionar activaci\u00f3n por tel\u00e9fono, pulsar en Cambiar clave del producto e introducir la nueva clave y pulsar actualizar. (Las claves que comienzan por F o D han sido baneadas por Microsoft en el SP1) Ejecutar de nuevo %systemroot%\\system32\\oobe\\msoobe.exe /a, y con esto finalizar\u00e1 el proceso de activaci\u00f3n Averiguar la clave de producto \u00b6 Por medio de alguno de estos programas: Magical Jelly Bean Keyfinder CD Key Reader Sustituir archivos en uso en Windows XP \u00b6 \"inuse.exe\u201d es una herramienta que anta\u00f1o formaba parte del kit de recursos de Windows 2000, y que con la liberaci\u00f3n de Windows XP Microsoft ha decidido ponerla a disposici\u00f3n de forma gratuita. Su cometido es permitir la sustituci\u00f3n de archivos que est\u00e9n en uso por parte del Sistema Operativo y que de otra manera no podr\u00edan ser sustituidos. Su sintaxis es: 1 INUSE origen destino /y origen: especifica el nombre del archivo actualizado destino: especifica el nombre del archivo existente que ser\u00e1 reemplazado /y elimina la petici\u00f3n de confirmaci\u00f3n para reemplazar el archivo. Nota: los cambios no surtir\u00e1n efecto hasta que reiniciemos el ordenador. Esta utilidad junto a todas las del kit de recursos de Windows 2000 se puede obtener de Windows 2000 Resource Kit Tools . ( Fuente ) Evitar la activaci\u00f3n de Windows XP \u00b6 Como es bien sabido Windows XP debe ser activado despu\u00e9s de su instalaci\u00f3n, porque de lo contrario dejar\u00e1 de funcionar a los 30 d\u00edas. Hasta este punto todo correcto, se instala Windows XP, se activa y listo, pero el problema viene una vez que por cualquier circunstancia hay que formatear el PC o reinstalar Windows, que nuevamente tenemos que activarlo, para evitar esto debemos hacer lo siguiente ( fuente ): Una vez que se activa Windows XP por primera vez, se guarda un archivo en nuestro PC, este archivo debemos copiarlo y guardarlo muy bien para la siguiente vez que borremos el disco duro y as\u00ed evitaremos la activaci\u00f3n nuevamente. Sigue estos pasos para buscar y guardar el archivo que guarda las configuraciones del hardware y la activaci\u00f3n de tu copia de Windows XP. Haces clic con el bot\u00f3n Inicio y a continuaci\u00f3n en Ejecutar. Escribe wpa.dbl y pulsa el boton Aceptar, despu\u00e9s de unos segundos aparecer\u00e1 el archivo en el cuadro buscar. Ahora fijate bien donde est\u00e1 el archivo (normalmente estar\u00e1 en el directorio C:\\Windows\\System32), copia este archivo en un disquete o en cualquier otro lugar del disco duro donde est\u00e9 a salvo de errores y lo puedas conservar hasta que lo necesites. La pr\u00f3xima vez que formatees el disco duro, o por cualquier otra causa necesites activar tu copia de Windows XP simplemente copia el archivo que acabas de guardar al directorio Windows, reinicias y listo ya est\u00e1 activada nuevamente tu copia de Windows XP Evitar colapsos de conexi\u00f3n de red \u00b6 Activar el servicio \"Programador de paquetes QoS\". Se puede configurar el valor de reserva de ancho de banda con: 1 2 gpedit.msc / Configuraci\u00f3n del equipo / Plantillas administrativas / Red / Programador de paquetes QoS / Limitar ancho de banda reservado Reparar registro de Windows \u00b6 ( Fuente ) Arrancar con la consola de reparaci\u00f3n del CD de instalaci\u00f3n. Copiar los archivos del registro de la versi\u00f3n de instalaci\u00f3n: 1 2 3 4 5 copy c:\\windows\\repair\\system c:\\windows\\system32\\config\\system copy c:\\windows\\repair\\software c:\\windows\\system32\\config\\software copy c:\\windows\\repair\\sam c:\\windows\\system32\\config\\sam copy c:\\windows\\repair\\security c:\\windows\\system32\\config\\security copy c:\\windows\\repair\\default c:\\windows\\system32\\config\\default Con esta configuraci\u00f3n se puede arrancar en Modo a Prueba de Fallos. Elegir un conjunto de archivos de un punto de restauraci\u00f3n en la ruta: 1 2 C:\\System Volume Information\\_restore{27BBF476-A824-438F-93A9-39BC37483C34}\\RPn\\Snapshot (el ClassID y el n de RPn son variables) Copiar los siguientes ficheros a una carpeta accesible como C:\\Windows\\tmp renombr\u00e1ndolos como se indica: 1 2 3 4 5 _REGISTRY_USER_.DEFAULT -> default _REGISTRY_MACHINE_SECURITY -> security _REGISTRY_MACHINE_SOFTWARE -> software _REGISTRY_MACHINE_SYSTEM -> system _REGISTRY_MACHINE_SAM -> sam Volver a arrancar con la consola de reparaci\u00f3n y sustituir los ficheros de C:\\Windows\\tmp a c:\\windows\\system32\\config. Clonado de equipos \u00b6 Instalar un equipo el cual servira de modelo, una vez instalado el sistema operativo y sus parches vamos al paso 2. Extraer el archivo DEPLOY.CAB de [CD_WIN]:\\support\\tools\\ en directorio C:\\sysprep Ejecutar sysprep.exe para crear el sysprep.inf. Existen unos botones al ejecutar sysprep. Darle a Factory. Instalar los programas y todo lo que utilizaran los PCs, una vez terminado esta parte le damos en la opcion de Sellar equipo en sysprep. Hacemos la imagen con Ghost, g4u o similar. Volcamos esta imagen en los demas PCs y sin poner el disquete de sysprep, alli vuelve a pedir los datos del Key de Windows, Nombre de PC y todo lo demas, dejando los programas listos e incluso con sus acesos directos y con el escritorio como en la imagen. Enlaces: \u00b6 Gu\u00eda r\u00e1pida a la preinstalaci\u00f3n de Windows Comandos \u00fatiles \u00b6 Mostrar lista de procesos con servicios asociados: 1 tasklist /svc Lista de conexiones con PID de procesos asociados: 1 netstat -aon Eliminar unidades de red: 1 net use /d A: A\u00f1adir unidades de red: 1 net use A: \\\\Servidor\\Directorio Muestra la diferencia de hora del sistema con un servidor NTP externo: 1 w32tm /stripchart /computer:es.pool.ntp.org /samples:3 /dataonly Utilidad de configuraci\u00f3n del sistema (WinXP): 1 msconfig Bloqueo y desbloqueo del Registro \u00b6 Para deshabilitarlo, accedemos al registro, nos situamos en HKEY_CURENT_USER/Software/Microsoft/Windows/CurrentVersion/Policies/System. En la parte de la derecha creamos un nuevo valor DWORD y le damos el nombre DisableRegistryTools, otorg\u00e1ndole el 1 para deshabilitar las funciones de edici\u00f3n del Registro. Una vez realizada esta operaci\u00f3n, nadie podr\u00e1 acceder a \u00e9l hasta que no lo volvamos a activar. Para habilitarlo, abrimos un editor de texto y escribimos: 1 2 Windows Registry Editor Version 5.00 [HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\system] \"DisableRegistryTools\" = dword : 00000000 Ahora, guardamos el archivo con el nombre unlock.reg y, a partir de ese momento, cuando queramos activar el Registro de Windows, despu\u00e9s de haberlo deshabilitado, s\u00f3lo tendremos que hacer doble clic sobre el archivo que acabamos de crear. Escritorio Remoto / Editar registro con comandos \u00b6 La funcionalidad \"Escritorio Remoto\" se encuentra desactivada por defecto. Se puede activar editando el registro del ordenador que nos interese. Esto se puede hacer remotamente por medio del siguiente comando: 1 reg add \\\\[NombreEquipo]\\HKLM\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent /V EnableRemoteMgmt /T REG_DWORD /F /D 1 Edici\u00f3n ficheros BKS de la utilidad Copia de Seguridad \u00b6 En estos ficheros se almacena la selecci\u00f3n de directorios/ficheros que entran en el backup. Hay que respetar el formato que les da la utilidad cuando los genera. Es texto Unicode, pero si se edita con Notepad no queda exactamente en el formato esperado y luego aparece en el log el error \"No se encontr\u00f3 el archivo de selecci\u00f3n...\". Una forma de conseguirlo es editando con Notepad, guardando en formato \"Codificaci\u00f3n: Unicode\" y luego usar un editor hexadecimal para eliminar los dos primeros bytes que se incluyen con este formato. Procesos de inicio \u00b6 En las siguientes rutas del registro: 1 2 3 4 5 6 7 HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce En el caso de Windows 98 y Windows ME ser\u00e1 necesario revisar tambi\u00e9n en los 2 archivos: 1 WIN.INI Son las entradas que inician con \"run=\" o \"load=\" 1 SYSTEM.INI Son las entradas que inician con \"shell=\" . Hay que tener en cuenta que la \u00fanica entrada legal es shell=Explorer.exe y que alg\u00fan virus podr\u00eda agregar una l\u00ednea del tipo shell=Explorer.exe %Windows% ombredelviruse.exe Otro lugar donde se deber\u00eda revisar son las carpetas de los programas de inicio que por ejemplo en Windows XP ser\u00e1n: 1 2 3 C:\\Documents and Settings\\tucuenta\\Men\u00fa Inicio\\Programas\\Inicio C:\\Documents and Settings\\All Users\\Men\u00fa Inicio\\Programas\\Inicio y en Windows 98 ser\u00e1: 1 C:\\Windows\\Men\u00fa Inicio\\Programas\\Inicio ( Fuente ) Ajustes tras instalaci\u00f3n Windows 10 \u00b6 Recien instalado, Windows 10 trae preconfiguradas unas cuantas cosas que estar\u00edan mejor desactivadas. Aqu\u00ed tenemos una lista de ajustes a efectuar tras la instalaci\u00f3n o actualizaci\u00f3n.","title":"Windows"},{"location":"sistemas/trucos_windows.html#trucos-windows","text":"","title":"Trucos Windows"},{"location":"sistemas/trucos_windows.html#acelerar-la-exploracion-de-equipos-en-red-e-incrementar-el-rendimiento-general","text":"Borrar la clave siguiente ( fuente ): 1 HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RemoteComputer\\NameSpace\\{D6277990-4C6A-11CF-8D87-00AA0060F5BF}","title":"Acelerar la exploraci\u00f3n de equipos en red e incrementar el rendimiento general"},{"location":"sistemas/trucos_windows.html#cambiar-la-clave-de-producto-en-windows-xp","text":"Proceder como sigue ( fuente ): Ejecutar regedit y buscar la clave HKEY_LOCAL_MACHINE\\Software\\Microsoft\\WindowsNT\\CurrentVersion\\WPAEvents Abrir la clave oobetimer, borrar el valor hexadecimal CA, y cerrar regedit Ir a Inicio, Ejecutar y escribir %systemroot%\\system32\\oobe\\msoobe.exe /a Nos aparecer\u00e1 la pantalla de activaci\u00f3n de Windows XP, seleccionar activaci\u00f3n por tel\u00e9fono, pulsar en Cambiar clave del producto e introducir la nueva clave y pulsar actualizar. (Las claves que comienzan por F o D han sido baneadas por Microsoft en el SP1) Ejecutar de nuevo %systemroot%\\system32\\oobe\\msoobe.exe /a, y con esto finalizar\u00e1 el proceso de activaci\u00f3n","title":"Cambiar la clave de producto en Windows XP"},{"location":"sistemas/trucos_windows.html#averiguar-la-clave-de-producto","text":"Por medio de alguno de estos programas: Magical Jelly Bean Keyfinder CD Key Reader","title":"Averiguar la clave de producto"},{"location":"sistemas/trucos_windows.html#sustituir-archivos-en-uso-en-windows-xp","text":"\"inuse.exe\u201d es una herramienta que anta\u00f1o formaba parte del kit de recursos de Windows 2000, y que con la liberaci\u00f3n de Windows XP Microsoft ha decidido ponerla a disposici\u00f3n de forma gratuita. Su cometido es permitir la sustituci\u00f3n de archivos que est\u00e9n en uso por parte del Sistema Operativo y que de otra manera no podr\u00edan ser sustituidos. Su sintaxis es: 1 INUSE origen destino /y origen: especifica el nombre del archivo actualizado destino: especifica el nombre del archivo existente que ser\u00e1 reemplazado /y elimina la petici\u00f3n de confirmaci\u00f3n para reemplazar el archivo. Nota: los cambios no surtir\u00e1n efecto hasta que reiniciemos el ordenador. Esta utilidad junto a todas las del kit de recursos de Windows 2000 se puede obtener de Windows 2000 Resource Kit Tools . ( Fuente )","title":"Sustituir archivos en uso en Windows XP"},{"location":"sistemas/trucos_windows.html#evitar-la-activacion-de-windows-xp","text":"Como es bien sabido Windows XP debe ser activado despu\u00e9s de su instalaci\u00f3n, porque de lo contrario dejar\u00e1 de funcionar a los 30 d\u00edas. Hasta este punto todo correcto, se instala Windows XP, se activa y listo, pero el problema viene una vez que por cualquier circunstancia hay que formatear el PC o reinstalar Windows, que nuevamente tenemos que activarlo, para evitar esto debemos hacer lo siguiente ( fuente ): Una vez que se activa Windows XP por primera vez, se guarda un archivo en nuestro PC, este archivo debemos copiarlo y guardarlo muy bien para la siguiente vez que borremos el disco duro y as\u00ed evitaremos la activaci\u00f3n nuevamente. Sigue estos pasos para buscar y guardar el archivo que guarda las configuraciones del hardware y la activaci\u00f3n de tu copia de Windows XP. Haces clic con el bot\u00f3n Inicio y a continuaci\u00f3n en Ejecutar. Escribe wpa.dbl y pulsa el boton Aceptar, despu\u00e9s de unos segundos aparecer\u00e1 el archivo en el cuadro buscar. Ahora fijate bien donde est\u00e1 el archivo (normalmente estar\u00e1 en el directorio C:\\Windows\\System32), copia este archivo en un disquete o en cualquier otro lugar del disco duro donde est\u00e9 a salvo de errores y lo puedas conservar hasta que lo necesites. La pr\u00f3xima vez que formatees el disco duro, o por cualquier otra causa necesites activar tu copia de Windows XP simplemente copia el archivo que acabas de guardar al directorio Windows, reinicias y listo ya est\u00e1 activada nuevamente tu copia de Windows XP","title":"Evitar la activaci\u00f3n de Windows XP"},{"location":"sistemas/trucos_windows.html#evitar-colapsos-de-conexion-de-red","text":"Activar el servicio \"Programador de paquetes QoS\". Se puede configurar el valor de reserva de ancho de banda con: 1 2 gpedit.msc / Configuraci\u00f3n del equipo / Plantillas administrativas / Red / Programador de paquetes QoS / Limitar ancho de banda reservado","title":"Evitar colapsos de conexi\u00f3n de red"},{"location":"sistemas/trucos_windows.html#reparar-registro-de-windows","text":"( Fuente ) Arrancar con la consola de reparaci\u00f3n del CD de instalaci\u00f3n. Copiar los archivos del registro de la versi\u00f3n de instalaci\u00f3n: 1 2 3 4 5 copy c:\\windows\\repair\\system c:\\windows\\system32\\config\\system copy c:\\windows\\repair\\software c:\\windows\\system32\\config\\software copy c:\\windows\\repair\\sam c:\\windows\\system32\\config\\sam copy c:\\windows\\repair\\security c:\\windows\\system32\\config\\security copy c:\\windows\\repair\\default c:\\windows\\system32\\config\\default Con esta configuraci\u00f3n se puede arrancar en Modo a Prueba de Fallos. Elegir un conjunto de archivos de un punto de restauraci\u00f3n en la ruta: 1 2 C:\\System Volume Information\\_restore{27BBF476-A824-438F-93A9-39BC37483C34}\\RPn\\Snapshot (el ClassID y el n de RPn son variables) Copiar los siguientes ficheros a una carpeta accesible como C:\\Windows\\tmp renombr\u00e1ndolos como se indica: 1 2 3 4 5 _REGISTRY_USER_.DEFAULT -> default _REGISTRY_MACHINE_SECURITY -> security _REGISTRY_MACHINE_SOFTWARE -> software _REGISTRY_MACHINE_SYSTEM -> system _REGISTRY_MACHINE_SAM -> sam Volver a arrancar con la consola de reparaci\u00f3n y sustituir los ficheros de C:\\Windows\\tmp a c:\\windows\\system32\\config.","title":"Reparar registro de Windows"},{"location":"sistemas/trucos_windows.html#clonado-de-equipos","text":"Instalar un equipo el cual servira de modelo, una vez instalado el sistema operativo y sus parches vamos al paso 2. Extraer el archivo DEPLOY.CAB de [CD_WIN]:\\support\\tools\\ en directorio C:\\sysprep Ejecutar sysprep.exe para crear el sysprep.inf. Existen unos botones al ejecutar sysprep. Darle a Factory. Instalar los programas y todo lo que utilizaran los PCs, una vez terminado esta parte le damos en la opcion de Sellar equipo en sysprep. Hacemos la imagen con Ghost, g4u o similar. Volcamos esta imagen en los demas PCs y sin poner el disquete de sysprep, alli vuelve a pedir los datos del Key de Windows, Nombre de PC y todo lo demas, dejando los programas listos e incluso con sus acesos directos y con el escritorio como en la imagen.","title":"Clonado de equipos"},{"location":"sistemas/trucos_windows.html#enlaces","text":"Gu\u00eda r\u00e1pida a la preinstalaci\u00f3n de Windows","title":"Enlaces:"},{"location":"sistemas/trucos_windows.html#comandos-utiles","text":"Mostrar lista de procesos con servicios asociados: 1 tasklist /svc Lista de conexiones con PID de procesos asociados: 1 netstat -aon Eliminar unidades de red: 1 net use /d A: A\u00f1adir unidades de red: 1 net use A: \\\\Servidor\\Directorio Muestra la diferencia de hora del sistema con un servidor NTP externo: 1 w32tm /stripchart /computer:es.pool.ntp.org /samples:3 /dataonly Utilidad de configuraci\u00f3n del sistema (WinXP): 1 msconfig","title":"Comandos \u00fatiles"},{"location":"sistemas/trucos_windows.html#bloqueo-y-desbloqueo-del-registro","text":"Para deshabilitarlo, accedemos al registro, nos situamos en HKEY_CURENT_USER/Software/Microsoft/Windows/CurrentVersion/Policies/System. En la parte de la derecha creamos un nuevo valor DWORD y le damos el nombre DisableRegistryTools, otorg\u00e1ndole el 1 para deshabilitar las funciones de edici\u00f3n del Registro. Una vez realizada esta operaci\u00f3n, nadie podr\u00e1 acceder a \u00e9l hasta que no lo volvamos a activar. Para habilitarlo, abrimos un editor de texto y escribimos: 1 2 Windows Registry Editor Version 5.00 [HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\system] \"DisableRegistryTools\" = dword : 00000000 Ahora, guardamos el archivo con el nombre unlock.reg y, a partir de ese momento, cuando queramos activar el Registro de Windows, despu\u00e9s de haberlo deshabilitado, s\u00f3lo tendremos que hacer doble clic sobre el archivo que acabamos de crear.","title":"Bloqueo y desbloqueo del Registro"},{"location":"sistemas/trucos_windows.html#escritorio-remoto-editar-registro-con-comandos","text":"La funcionalidad \"Escritorio Remoto\" se encuentra desactivada por defecto. Se puede activar editando el registro del ordenador que nos interese. Esto se puede hacer remotamente por medio del siguiente comando: 1 reg add \\\\[NombreEquipo]\\HKLM\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent /V EnableRemoteMgmt /T REG_DWORD /F /D 1","title":"Escritorio Remoto / Editar registro con comandos"},{"location":"sistemas/trucos_windows.html#edicion-ficheros-bks-de-la-utilidad-copia-de-seguridad","text":"En estos ficheros se almacena la selecci\u00f3n de directorios/ficheros que entran en el backup. Hay que respetar el formato que les da la utilidad cuando los genera. Es texto Unicode, pero si se edita con Notepad no queda exactamente en el formato esperado y luego aparece en el log el error \"No se encontr\u00f3 el archivo de selecci\u00f3n...\". Una forma de conseguirlo es editando con Notepad, guardando en formato \"Codificaci\u00f3n: Unicode\" y luego usar un editor hexadecimal para eliminar los dos primeros bytes que se incluyen con este formato.","title":"Edici\u00f3n ficheros BKS de la utilidad Copia de Seguridad"},{"location":"sistemas/trucos_windows.html#procesos-de-inicio","text":"En las siguientes rutas del registro: 1 2 3 4 5 6 7 HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunServices HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce En el caso de Windows 98 y Windows ME ser\u00e1 necesario revisar tambi\u00e9n en los 2 archivos: 1 WIN.INI Son las entradas que inician con \"run=\" o \"load=\" 1 SYSTEM.INI Son las entradas que inician con \"shell=\" . Hay que tener en cuenta que la \u00fanica entrada legal es shell=Explorer.exe y que alg\u00fan virus podr\u00eda agregar una l\u00ednea del tipo shell=Explorer.exe %Windows% ombredelviruse.exe Otro lugar donde se deber\u00eda revisar son las carpetas de los programas de inicio que por ejemplo en Windows XP ser\u00e1n: 1 2 3 C:\\Documents and Settings\\tucuenta\\Men\u00fa Inicio\\Programas\\Inicio C:\\Documents and Settings\\All Users\\Men\u00fa Inicio\\Programas\\Inicio y en Windows 98 ser\u00e1: 1 C:\\Windows\\Men\u00fa Inicio\\Programas\\Inicio ( Fuente )","title":"Procesos de inicio"},{"location":"sistemas/trucos_windows.html#ajustes-tras-instalacion-windows-10","text":"Recien instalado, Windows 10 trae preconfiguradas unas cuantas cosas que estar\u00edan mejor desactivadas. Aqu\u00ed tenemos una lista de ajustes a efectuar tras la instalaci\u00f3n o actualizaci\u00f3n.","title":"Ajustes tras instalaci\u00f3n Windows 10"},{"location":"sistemas/ubuntu.html","text":"Ubuntu \u00b6 Aplicaciones interesantes \u00b6 ReText : Editor Markdown. Franz : Configuraci\u00f3n de icono en GNome . App Grid : Repositorio de aplicaciones. Servicios interesantes \u00b6 KodExplorer Gitea Problema con aplicaciones root en Wayland \u00b6 Hay que ejecutar el comando: 1 xhost si:localuser:root Se puede automatizar en el arranque a\u00f1adiendo el comando en las Aplicaciones al incio ( fuente ). Configuraci\u00f3n de opci\u00f3n predeterminada en GRUB \u00b6 Fuente Editar fichero /etc/default/grub y modificar el par\u00e1metro GRUB_DEFAULT dando el valor saved en lugar del valor num\u00e9rico que encontraremos. Ejecutar sudo update-grub . Ejecutar sudo grub-set-default N siendo N la posici\u00f3n de la entrada del men\u00fa de GRUB que queremos que act\u00fae como predeterminada (contando desde 0). Problemas con GRUB \u00b6 Reinstalar GRUB 2 Soluci\u00f3n problemas wifi en 11.04 y 11.10 \u00b6 Help with Ubuntu: Fix slow WiFi in Ubuntu 11.04 Soluci\u00f3n problema Wireshark en trusty y utopic \u00b6 liboverlay-scrollbar hangs Wireshark Actualizaci\u00f3n de Intrepid a Jaunty \u00b6 Tras actualizar de Intrepid a Jaunty se observa un empobrecimiento del rendimiento gr\u00e1fico en equipos con gr\u00e1ficas integradas Intel 945. En las siguientes p\u00e1ginas explican como hacer downgrade al controlador Intel que hab\u00eda en Intrepid: https://wiki.ubuntu.com/ReinhardTartler/X/RevertingIntelDriverTo2.4 http://www.astaroth.glufca.com/?p=346 Otro truco que tambi\u00e9n funcion\u00f3 sin necesidad de hacer lo anterior fue reconfigurar xorg a la configuraci\u00f3n por defecto y luego en la composici\u00f3n de m\u00faltiples monitores, situar uno debajo del otro en lugar de uno al lado del otro. Actualizaci\u00f3n de raring a saucy \u00b6 Apache cambia de versi\u00f3n de 2.2 a 2.4. Aqu\u00ed encontr\u00e9 soluci\u00f3n a los problemas que eso supuso. Recursos gr\u00e1ficos \u00b6 1 2 3 4 5 6 7 8 9 /usr/share/icons /usr/share/app-install/icons /usr/share/pixmaps /usr/share/icons/gnome /usr/share/icons/hicolor /usr/share/icons/Human /usr/share/icons/Humanity <--- /usr/share/icons/oxygen /usr/share/icons/default.kde4 <--- Convertir un video a formato 3GP (H263+AAC) \u00b6 Instalar un repositorio no oficial que contiene los codecs: 1 $ sudo -E wget --output-document = /etc/apt/sources.list.d/medibuntu.list http://www.medibuntu.org/sources.list.d/ $( lsb_release -cs ) .list && sudo apt-get --quiet update && sudo apt-get --yes --quiet --allow-unauthenticated install medibuntu-keyring && sudo apt-get --quiet update Instalar el codificador y los codecs: 1 $ sudo aptitude install ffmpeg libavcodec-extra-53 Codificar el video: 1 $ ffmpeg -i EspacioMudejar.wmv -s qcif -vcodec h263 -acodec libfaac -ac 1 -ar 8000 -r 25 -ab 32 -strict experimental -y EspacioMudejar.3gp Las opciones m\u00e1s importantes son: ar: Frecuencia de audio r: framerate ab: Audio bitrate en kbps Convertir APE a WAV \u00b6 Los ficheros .ape con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .ape se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete ffmpeg y ejecutando el siguiente comando: 1 $ ffmpeg -i fichero.ape fichero.wav Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .ape por el nuevo .wav. Convertir FLAC a WAV \u00b6 Los ficheros .flac con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .flac se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete flac y ejecutando el siguiente comando: 1 $ flac -d fichero.flac Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .flac por el nuevo .wav. Restaurar panel Gnome \u00b6 ( fuente 1 ; fuente 2 ) 1 2 3 $ gconftool --recursive-unset /apps/panel $ rm -rf ~/.gconf/apps/panel $ pkill gnome-panel Concatenar PDF's \u00b6 Con pdftk programa en linea de comando para procesar ficheros PDF. Est\u00e1 para casi todas las plataformas. 1 2 3 4 $ sudo aptitude search pdftk i pdftk - A useful tool for manipulating PDF documents $ sudo aptitude install pdftk Concatenar todos los archivos facilmente que tengas en una carpeta: 1 $ pdftk carpeta_con_todos_ficheros/*.pdf cat output fichero_concatenado.pdf Tiene muchas mas funcionalidades consultables con \u2013help, pero si quieres, puedes echarle un vistazo a un articulo de Linux-Magazine \u201cPDF a tope\u201d . APOD \u00b6 Programa para descargar y ajustar como fondo de escritorio la imagen astron\u00f3mica del d\u00eda de la web APOD . Es necesario que se encuentre Python instalado en el sistema. Instalar el siguiente script en alg\u00fan lugar: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 #!/usr/bin/python #APOD in the GNOME desktop #Author: Rodrigo Rivas Costa. #Mail: rodrigorivascosta@gmail.com #Web: http://rodrigo.dualnot.com/ # This program is in public domain, so do whatever you wish with it, # although it'd be nice if you keep the above notice. # Just don't blame me if it blows your computer. import urllib import gconf import os dir = os.getenv ( 'HOME' ) + '/.apod' try: os.mkdir ( dir ) except: pass try: execfile ( dir + '/options.py' ) except: pass def DoAPOD () : u = urllib.urlopen ( 'http://apod.nasa.gov/apod/' ) KEY1 = 'href=\"' KEY2 = '\"' image = None for line in u.readlines () : pos1 = line.find ( KEY1 ) if pos1 == -1: continue pos1 += len ( KEY1 ) pos2 = line.find ( KEY2, pos1 ) if pos2 == -1: continue href = line [ pos1:pos2 ] hrefl = href.lower () if hrefl.endswith ( '.jpg' ) or hrefl.endswith ( '.png' ) : image = href break u.close () if not image: return image_base = os.path.split ( image )[ -1 ] image_base_ext = os.path.splitext ( image_base ) image_base = 'apod' + image_base_ext [ -1 ] if not ( image.startswith ( 'http:' ) or image.startswith ( 'ftp:' )) : if not image.startswith ( '/' ) : image = '/apod.nasa.gov/apod/' + image image = 'http:/' + image img = urllib.urlopen ( image ) d = img.read () img.close () try: os.unlink ( 'apod.jpg' ) except: pass try: os.unlink ( 'apod.png' ) except: pass name = dir + '/' + image_base f = file ( name, 'wb' ) f.write ( d ) f.close () cli = gconf.client_get_default () cli.set_string ( '/desktop/gnome/background/picture_filename' , name ) cli.set_string ( '/desktop/gnome/background/picture_options' , 'zoom' ) if __name__ == '__main__' : DoAPOD () Por \u00faltimo programar una tarea en cron para ejecutar el script con el usuario al que queramos que se aplique el fondo de escritorio. Por ejemplo introduciendo la siguiente l\u00ednea en /etc/crontab para que se ejecute a las 10 de la ma\u00f1ana: 1 00 10 * * * edumoreno /home/edumoreno/.apod/apod En el ejemplo se ha puesto como ejemplo el usuario edumoreno as\u00ed como su home. Instalar Oracle Java \u00b6 (Fuentes: 1 y 2 ) Movemos la carpeta creada despu\u00e9s de la instalaci\u00f3n (llamada jre1.7.0_05 en este ejemplo) a una ruta m\u00e1s apropiada: 1 $ sudo mv jre1.7.0_05 /usr/lib/jvm Establecemos el nuevo Java como una de las \"alternativas de java\": 1 $ sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jre1.7.0_05/bin/java\" 1 Ahora establecemos la \"nueva alternativa\" como la real de Java. Este paso hace que la versi\u00f3n de Oracle sea la usada por defecto: 1 $ sudo update-alternatives --set java /usr/lib/jvm/jre1.7.0_05/bin/java Para comprobar si tenemos la versi\u00f3n 1.7.0, tecleamos en la terminal: 1 2 3 4 $ java -version java version \"1.7.0_05\" Java ( TM ) SE Runtime Environment ( build 1 .7.0_05-b05 ) Java HotSpot ( TM ) 64 -Bit Server VM ( build 23 .1-b03, mixed mode ) Para ver c\u00f3mo ha quedado el estado de las alternativas: 1 $ update-alternatives --config java Para ver f\u00edsicamente c\u00f3mo han quedado las alternativas relativas a java : 1 $ ls -l /etc/alternatives/java* Si nos interesa borrar alguna de las alternativas (por ejemplo una para java ): 1 $ sudo update-alternatives --remove java /usr/lib/jvm/jdk1.8.0_20/bin/java Hay un PPA para poder instalar el JDK m\u00e1s f\u00e1cilmente. Se pueden ver las instrucciones aqu\u00ed . Reparaci\u00f3n del sistema de archivos cuando se pone en modo \"s\u00f3lo lectura\" \u00b6 1 $ sudo fsck Descarga de un v\u00eddeo incrustado en un reproductor Flash \u00b6 Fuente Hacer captura Wireshark. Filtrar los paquetes RTMP con el filtro: \"rtmpt\". Localizar en los paquetes RTMP los comandos Handshake o Invoke la base de la url, lo que est\u00e1 en una propiedad llamada \"tcUrl\". Por ejemplo en un v\u00eddeo de Antena3 de F1 esta propiedad val\u00eda: 1 rtmp://antena3tvfs.fplive.net/antena3mediateca Luego localizar el fichero en concreto. Suele estar en otro paquete y est\u00e1 relacionado con el comando \"play\". En el caso del ejemplo anterior sal\u00eda: 1 mp4 : mp_series1 /f1cms/gestorf1/videos/517/ VIDEOS_20130512_1315517 . mp4 Unir las dos piezas para construir la URL completa: 1 rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4 Descargar el stream con el comando \"rtmpdump\": 1 $ rtmpdump -r \"rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\" -o archivo.mp4 En ocasiones se produce el error siguiente: 1 WARNING : Received FLV packet before play ()! Ignoring . En estos casos utilizar el siguiente comando que separa las dos porciones de la URL: 1 $ rtmpdump -r \"rtmp://alacarta.aragontelevision.es/vod\" -y \"mp4:/_archivos/videos/web/15288/15288.mp4\" -o archivo.flv Para v\u00eddeos de emisiones en vivo hay que a\u00f1adir la opci\u00f3n -v . Por ejemplo, en una emisi\u00f3n de Arag\u00f3nTV, en la captura Wireshark se localizaron los siguientes elementos: Paquete Handshake S2 => tcUrl = rtmp://aragontvlivefs.fplive.net/aragontvlive-live Paquete play => valor = stream_normal_abt As\u00ed pues la URL final ser\u00e1: rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt y el comando de descarga: 1 $ rtmpdump -v -r \"rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt\" -o archivo.mp4 Para descargar v\u00eddeos desde YouTube, last.fm, Google video, Dailymotion y Vimeo se puede utilizar el comando clive . Aqu\u00ed comentan c\u00f3mo se usa. Descarga v\u00eddeo de A3Player \u00b6 Enlaces \u00b6 C\u00f3mo descargar v\u00eddeos en formato M3U8 (o HLS) http live streaming player Las carreras de Formula1 \u00faltimamente son emitidas en el formato HLS. Para descargar una carrera empezar haciendo una captura con Wireshark desde el momento en que se le da al Play hasta que se empieza a ver parte del v\u00eddeo (esperando que terminen los anuncios). Luego filtrar en Wireshark con la siguiente expresi\u00f3n: 1 http.request.uri contains \"playlist.m3u8\" Localizar la URL de descarga del fichero playlist.m3u8. Por ejemplo podr\u00eda ser: 1 http://geodeswowa3player.antena3.com/vcg/_definst_/mp4:assets3/2013/10/26/E6941C5D-2A9F-414B-B3FF-01FAC33073C4/sigra.mp4/playlist.m3u8?pulse=assets3%2F2013%2F10%2F26%2FE6941C5D-2A9F-414B-B3FF-01FAC33073C4%2F%7C1382835190%7Cb23df1201096fc1cc490427e05307f70 Compresi\u00f3n batch de v\u00eddeos \u00b6 Instalar el cliente de linea de comando de Handbrake . Dependiendo de la extensi\u00f3n habr\u00e1 que cambiar el ls inicial. Los v\u00eddeos de salida son MP4, por lo que si la extensi\u00f3n inicial no es esa, habr\u00e1 que cambiarla en los ficheros finales. 1 2 $ mkdir comp $ ls *.mp4 | awk '{print \"HandBrakeCLI -Z Normal -i \"$0\" -o comp/\"$0}' | sh Resampleado de video con HandBrake \u00b6 ( Fuente ) On the Video tab use Avg Bitrate and use 2500 to 3000 depending if a big action movie(3000) or if less fast action/movement in the movie(2500). Make sure to click on 2-Pass Encoding and Turbo first pass. Split de v\u00eddeos \u00b6 ( Fuente ) Con el siguiente comando: 1 $ ffmpeg -acodec copy -vcodec copy -ss 00 :00:00 -t 00 :04:09 -i archivo_original.mp4 archivo_recortado.mp4 Donde el valor de la opci\u00f3n -ss es el instante de inicio en hh:mm:ss y el valor de -t es la longitud en hh:mm:ss Durante un tiempo en Ubuntu, ffmpeg no estuvo disponible. Su sustituto fue avconv , compatible la mayor\u00eda de las veces. No admit\u00eda sin embargo la opci\u00f3n de copiar el codec de audio y v\u00eddeo. Hab\u00eda que especificarlo. Una lista de encoders soportados se puede obtener ejecutando: 1 $ avconv -encoders Un par de codecs comprobados que suelen dar buen resultados son h264 y aac: 1 ffmpeg -acodec aac -vcodec h264 -ss 01 :07:38 -t 00 :01:14 -i archivo_original.mp4 archivo_recortado.mp4 Redimensionado de im\u00e1genes en lote \u00b6 Ajustar a 200 px de ancho manteniendo el ratio: 1 $ convert '*.jpg[200x]' resized%03d.png Ajustar a 200 px de alto manteniendo el ratio: 1 $ convert '*.jpg[x200]' resized%03d.png Redimensionado de fotos en lote \u00b6 Por ejemplo a 1080 de alto dentro de un directorio llamado resized: 1 $ convert '*.jpg[x1080]' resized/%03d.jpg En ocasiones, si hay varios miles de fotos, se puede llenar la memoria. En este caso hacer la conversi\u00f3n con el siguiente comando, que trata las im\u00e1genes una a una: 1 2 3 4 5 6 $ a = 1 $ for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) convert ${ i } [ x1080 ] resized/ ${ new } let a = a+1 done Renombrado de archivos en lote \u00b6 Por ejemplo una serie de archivos jpg: 1 2 3 4 5 6 $ a = 1 $ for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) mv ${ i } ${ new } let a = a+1 done Montaje de v\u00eddeo StopMotion a partir de fotos \u00b6 A 10fps por ejemplo ( Fuente ): 1 $ avconv -f image2 -r 10 -i %04d.jpg -vf scale = 1440 :1080 -r:v 10 -c:v libx264 -qp 0 -preset veryslow -an \"video.mkv\" Configurar Wireshark para poder capturar con usuarios no-root \u00b6 Ejecutar lo siguiente: 1 2 $ sudo dpkg-reconfigure wireshark-common $ sudo usermod -a -G wireshark <usuario> Reiniciar la sesi\u00f3n. Solucionar el problema con Wireshark en las \u00faltimas versiones de Ubuntu \u00b6 Cuando se inicia una captura, se cuelga Wireshark, emitiendo una serie infinita de errores de GTK en consola. En esta p\u00e1gina comentan varios workarrounds. Por ejemplo editando el fichero /usr/share/applications/wireshark.desktop y cambiando la l\u00ednea de ejecuci\u00f3n por: 1 Exec=env LIBOVERLAY_SCROLLBAR=0 wireshark %f Ficheros implicados en arranque \u00b6 /etc/rc.local : This script is executed at the end of each multiuser runlevel. Montar imagen de disco o partici\u00f3n \u00b6 Usando kpartx explicado aqu\u00ed . Screencast \u00b6 1 $ avconv -f x11grab -r 25 -s 910x550 -i :0.0 -vcodec huffyuv screencast.avi Gesti\u00f3n de m\u00f3dulos \u00b6 A\u00f1adir un m\u00f3dulo al kernel \u00b6 1 $ sudo modprobe <modulo> Si se quiere a\u00f1adir de forma permanente, es decir, de forma autom\u00e1tica en el arranque, se incorpora el nombre del m\u00f3dulo al fichero /etc/modules . Cuando el m\u00f3dulo que se carga es un driver de un dispositivo, el kernel env\u00eda un evento al subsistema udev . La monitorizaci\u00f3n de estos mensajes se puede hacer teniendo abierto un terminal con el siguiente comando lanzado ( fuente ): 1 $ udevadm monitor --property Listado de m\u00f3dulos \u00b6 1 $ lsmod Informaci\u00f3n de un m\u00f3dulo \u00b6 1 $ modinfo <modulo> Ficheros definici\u00f3n variables de entorno \u00b6 Si se necesita definir una variable global se podr\u00e1 hacer en los ficheros: /etc/environment /etc/profile /etc/profile.d /etc/bashrc o /etc/bash.bashrc Si es a nivel de usuario se har\u00e1 en: ~/.bashrc ~/.bash_profile Poner barras de scroll normales \u00b6 1 gsettings set com.canonical.desktop.interface scrollbar-mode normal Skype en tray \u00b6 Instalar los paquetes sni-qt y sni-qt:i386 . Workrave en tray \u00b6 Fuente 1 gsettings set com.canonical.Unity.Panel systray-whitelist \"['all']\" Localizaci\u00f3n de ficheros .desktop \u00b6 Los del usuario se encuentran en: ~/.local/share/applications Los del sistema en: /usr/share/applications Configuraci\u00f3n de gedit \u00b6 Al menos las \u00faltimas versiones de gedit no tienen un panel de ajustes para las opciones predeterminadas. Cada vez que arranca aparecen preajustados 8 espacios como anchura del tabulador y no sustituye por espacios. Puede sacarse una lista de todos los ajustes que se pueden cambiar con el siguiente comando: 1 gsettings list-recursively | grep -i gedit.preferences.editor Los ajustes del tabulador mencionados antes, para pasar a 4 espacios, ejecutar: 1 2 gsettings set org.gnome.gedit.preferences.editor insert-spaces true gsettings set org.gnome.gedit.preferences.editor tabs-size 4 Otro ajuste interesante es el del wrap mode. Se puede hacer con (puede valer 'none', 'word', 'char', o 'word-char'): 1 gsettings set org.gnome.gedit.preferences.editor wrap-mode 'word'","title":"Ubuntu"},{"location":"sistemas/ubuntu.html#ubuntu","text":"","title":"Ubuntu"},{"location":"sistemas/ubuntu.html#aplicaciones-interesantes","text":"ReText : Editor Markdown. Franz : Configuraci\u00f3n de icono en GNome . App Grid : Repositorio de aplicaciones.","title":"Aplicaciones interesantes"},{"location":"sistemas/ubuntu.html#servicios-interesantes","text":"KodExplorer Gitea","title":"Servicios interesantes"},{"location":"sistemas/ubuntu.html#problema-con-aplicaciones-root-en-wayland","text":"Hay que ejecutar el comando: 1 xhost si:localuser:root Se puede automatizar en el arranque a\u00f1adiendo el comando en las Aplicaciones al incio ( fuente ).","title":"Problema con aplicaciones root en Wayland"},{"location":"sistemas/ubuntu.html#configuracion-de-opcion-predeterminada-en-grub","text":"Fuente Editar fichero /etc/default/grub y modificar el par\u00e1metro GRUB_DEFAULT dando el valor saved en lugar del valor num\u00e9rico que encontraremos. Ejecutar sudo update-grub . Ejecutar sudo grub-set-default N siendo N la posici\u00f3n de la entrada del men\u00fa de GRUB que queremos que act\u00fae como predeterminada (contando desde 0).","title":"Configuraci\u00f3n de opci\u00f3n predeterminada en GRUB"},{"location":"sistemas/ubuntu.html#problemas-con-grub","text":"Reinstalar GRUB 2","title":"Problemas con GRUB"},{"location":"sistemas/ubuntu.html#solucion-problemas-wifi-en-1104-y-1110","text":"Help with Ubuntu: Fix slow WiFi in Ubuntu 11.04","title":"Soluci\u00f3n problemas wifi en 11.04 y 11.10"},{"location":"sistemas/ubuntu.html#solucion-problema-wireshark-en-trusty-y-utopic","text":"liboverlay-scrollbar hangs Wireshark","title":"Soluci\u00f3n problema Wireshark en trusty y utopic"},{"location":"sistemas/ubuntu.html#actualizacion-de-intrepid-a-jaunty","text":"Tras actualizar de Intrepid a Jaunty se observa un empobrecimiento del rendimiento gr\u00e1fico en equipos con gr\u00e1ficas integradas Intel 945. En las siguientes p\u00e1ginas explican como hacer downgrade al controlador Intel que hab\u00eda en Intrepid: https://wiki.ubuntu.com/ReinhardTartler/X/RevertingIntelDriverTo2.4 http://www.astaroth.glufca.com/?p=346 Otro truco que tambi\u00e9n funcion\u00f3 sin necesidad de hacer lo anterior fue reconfigurar xorg a la configuraci\u00f3n por defecto y luego en la composici\u00f3n de m\u00faltiples monitores, situar uno debajo del otro en lugar de uno al lado del otro.","title":"Actualizaci\u00f3n de Intrepid a Jaunty"},{"location":"sistemas/ubuntu.html#actualizacion-de-raring-a-saucy","text":"Apache cambia de versi\u00f3n de 2.2 a 2.4. Aqu\u00ed encontr\u00e9 soluci\u00f3n a los problemas que eso supuso.","title":"Actualizaci\u00f3n de raring a saucy"},{"location":"sistemas/ubuntu.html#recursos-graficos","text":"1 2 3 4 5 6 7 8 9 /usr/share/icons /usr/share/app-install/icons /usr/share/pixmaps /usr/share/icons/gnome /usr/share/icons/hicolor /usr/share/icons/Human /usr/share/icons/Humanity <--- /usr/share/icons/oxygen /usr/share/icons/default.kde4 <---","title":"Recursos gr\u00e1ficos"},{"location":"sistemas/ubuntu.html#convertir-un-video-a-formato-3gp-h263aac","text":"Instalar un repositorio no oficial que contiene los codecs: 1 $ sudo -E wget --output-document = /etc/apt/sources.list.d/medibuntu.list http://www.medibuntu.org/sources.list.d/ $( lsb_release -cs ) .list && sudo apt-get --quiet update && sudo apt-get --yes --quiet --allow-unauthenticated install medibuntu-keyring && sudo apt-get --quiet update Instalar el codificador y los codecs: 1 $ sudo aptitude install ffmpeg libavcodec-extra-53 Codificar el video: 1 $ ffmpeg -i EspacioMudejar.wmv -s qcif -vcodec h263 -acodec libfaac -ac 1 -ar 8000 -r 25 -ab 32 -strict experimental -y EspacioMudejar.3gp Las opciones m\u00e1s importantes son: ar: Frecuencia de audio r: framerate ab: Audio bitrate en kbps","title":"Convertir un video a formato 3GP (H263+AAC)"},{"location":"sistemas/ubuntu.html#convertir-ape-a-wav","text":"Los ficheros .ape con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .ape se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete ffmpeg y ejecutando el siguiente comando: 1 $ ffmpeg -i fichero.ape fichero.wav Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .ape por el nuevo .wav.","title":"Convertir APE a WAV"},{"location":"sistemas/ubuntu.html#convertir-flac-a-wav","text":"Los ficheros .flac con que se distribuyen algunos CD's se puede convertir a WAV para poder quemarlo a un CD (con un fichero .cue que normalmente acompa\u00f1a al .flac se puede quemar directamente con el Burn del Mac por ejemplo) instalando el paquete flac y ejecutando el siguiente comando: 1 $ flac -d fichero.flac Hay que acordarse de sustituir dentro del fichero .cue la referencia al fichero original .flac por el nuevo .wav.","title":"Convertir FLAC a WAV"},{"location":"sistemas/ubuntu.html#restaurar-panel-gnome","text":"( fuente 1 ; fuente 2 ) 1 2 3 $ gconftool --recursive-unset /apps/panel $ rm -rf ~/.gconf/apps/panel $ pkill gnome-panel","title":"Restaurar panel Gnome"},{"location":"sistemas/ubuntu.html#concatenar-pdfs","text":"Con pdftk programa en linea de comando para procesar ficheros PDF. Est\u00e1 para casi todas las plataformas. 1 2 3 4 $ sudo aptitude search pdftk i pdftk - A useful tool for manipulating PDF documents $ sudo aptitude install pdftk Concatenar todos los archivos facilmente que tengas en una carpeta: 1 $ pdftk carpeta_con_todos_ficheros/*.pdf cat output fichero_concatenado.pdf Tiene muchas mas funcionalidades consultables con \u2013help, pero si quieres, puedes echarle un vistazo a un articulo de Linux-Magazine \u201cPDF a tope\u201d .","title":"Concatenar PDF's"},{"location":"sistemas/ubuntu.html#apod","text":"Programa para descargar y ajustar como fondo de escritorio la imagen astron\u00f3mica del d\u00eda de la web APOD . Es necesario que se encuentre Python instalado en el sistema. Instalar el siguiente script en alg\u00fan lugar: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 #!/usr/bin/python #APOD in the GNOME desktop #Author: Rodrigo Rivas Costa. #Mail: rodrigorivascosta@gmail.com #Web: http://rodrigo.dualnot.com/ # This program is in public domain, so do whatever you wish with it, # although it'd be nice if you keep the above notice. # Just don't blame me if it blows your computer. import urllib import gconf import os dir = os.getenv ( 'HOME' ) + '/.apod' try: os.mkdir ( dir ) except: pass try: execfile ( dir + '/options.py' ) except: pass def DoAPOD () : u = urllib.urlopen ( 'http://apod.nasa.gov/apod/' ) KEY1 = 'href=\"' KEY2 = '\"' image = None for line in u.readlines () : pos1 = line.find ( KEY1 ) if pos1 == -1: continue pos1 += len ( KEY1 ) pos2 = line.find ( KEY2, pos1 ) if pos2 == -1: continue href = line [ pos1:pos2 ] hrefl = href.lower () if hrefl.endswith ( '.jpg' ) or hrefl.endswith ( '.png' ) : image = href break u.close () if not image: return image_base = os.path.split ( image )[ -1 ] image_base_ext = os.path.splitext ( image_base ) image_base = 'apod' + image_base_ext [ -1 ] if not ( image.startswith ( 'http:' ) or image.startswith ( 'ftp:' )) : if not image.startswith ( '/' ) : image = '/apod.nasa.gov/apod/' + image image = 'http:/' + image img = urllib.urlopen ( image ) d = img.read () img.close () try: os.unlink ( 'apod.jpg' ) except: pass try: os.unlink ( 'apod.png' ) except: pass name = dir + '/' + image_base f = file ( name, 'wb' ) f.write ( d ) f.close () cli = gconf.client_get_default () cli.set_string ( '/desktop/gnome/background/picture_filename' , name ) cli.set_string ( '/desktop/gnome/background/picture_options' , 'zoom' ) if __name__ == '__main__' : DoAPOD () Por \u00faltimo programar una tarea en cron para ejecutar el script con el usuario al que queramos que se aplique el fondo de escritorio. Por ejemplo introduciendo la siguiente l\u00ednea en /etc/crontab para que se ejecute a las 10 de la ma\u00f1ana: 1 00 10 * * * edumoreno /home/edumoreno/.apod/apod En el ejemplo se ha puesto como ejemplo el usuario edumoreno as\u00ed como su home.","title":"APOD"},{"location":"sistemas/ubuntu.html#instalar-oracle-java","text":"(Fuentes: 1 y 2 ) Movemos la carpeta creada despu\u00e9s de la instalaci\u00f3n (llamada jre1.7.0_05 en este ejemplo) a una ruta m\u00e1s apropiada: 1 $ sudo mv jre1.7.0_05 /usr/lib/jvm Establecemos el nuevo Java como una de las \"alternativas de java\": 1 $ sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jre1.7.0_05/bin/java\" 1 Ahora establecemos la \"nueva alternativa\" como la real de Java. Este paso hace que la versi\u00f3n de Oracle sea la usada por defecto: 1 $ sudo update-alternatives --set java /usr/lib/jvm/jre1.7.0_05/bin/java Para comprobar si tenemos la versi\u00f3n 1.7.0, tecleamos en la terminal: 1 2 3 4 $ java -version java version \"1.7.0_05\" Java ( TM ) SE Runtime Environment ( build 1 .7.0_05-b05 ) Java HotSpot ( TM ) 64 -Bit Server VM ( build 23 .1-b03, mixed mode ) Para ver c\u00f3mo ha quedado el estado de las alternativas: 1 $ update-alternatives --config java Para ver f\u00edsicamente c\u00f3mo han quedado las alternativas relativas a java : 1 $ ls -l /etc/alternatives/java* Si nos interesa borrar alguna de las alternativas (por ejemplo una para java ): 1 $ sudo update-alternatives --remove java /usr/lib/jvm/jdk1.8.0_20/bin/java Hay un PPA para poder instalar el JDK m\u00e1s f\u00e1cilmente. Se pueden ver las instrucciones aqu\u00ed .","title":"Instalar Oracle Java"},{"location":"sistemas/ubuntu.html#reparacion-del-sistema-de-archivos-cuando-se-pone-en-modo-solo-lectura","text":"1 $ sudo fsck","title":"Reparaci\u00f3n del sistema de archivos cuando se pone en modo \"s\u00f3lo lectura\""},{"location":"sistemas/ubuntu.html#descarga-de-un-video-incrustado-en-un-reproductor-flash","text":"Fuente Hacer captura Wireshark. Filtrar los paquetes RTMP con el filtro: \"rtmpt\". Localizar en los paquetes RTMP los comandos Handshake o Invoke la base de la url, lo que est\u00e1 en una propiedad llamada \"tcUrl\". Por ejemplo en un v\u00eddeo de Antena3 de F1 esta propiedad val\u00eda: 1 rtmp://antena3tvfs.fplive.net/antena3mediateca Luego localizar el fichero en concreto. Suele estar en otro paquete y est\u00e1 relacionado con el comando \"play\". En el caso del ejemplo anterior sal\u00eda: 1 mp4 : mp_series1 /f1cms/gestorf1/videos/517/ VIDEOS_20130512_1315517 . mp4 Unir las dos piezas para construir la URL completa: 1 rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4 Descargar el stream con el comando \"rtmpdump\": 1 $ rtmpdump -r \"rtmp://antena3tvfs.fplive.net/antena3mediateca/mp_series1/f1cms/gestorf1/videos/517/VIDEOS_20130512_1315517.mp4\" -o archivo.mp4 En ocasiones se produce el error siguiente: 1 WARNING : Received FLV packet before play ()! Ignoring . En estos casos utilizar el siguiente comando que separa las dos porciones de la URL: 1 $ rtmpdump -r \"rtmp://alacarta.aragontelevision.es/vod\" -y \"mp4:/_archivos/videos/web/15288/15288.mp4\" -o archivo.flv Para v\u00eddeos de emisiones en vivo hay que a\u00f1adir la opci\u00f3n -v . Por ejemplo, en una emisi\u00f3n de Arag\u00f3nTV, en la captura Wireshark se localizaron los siguientes elementos: Paquete Handshake S2 => tcUrl = rtmp://aragontvlivefs.fplive.net/aragontvlive-live Paquete play => valor = stream_normal_abt As\u00ed pues la URL final ser\u00e1: rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt y el comando de descarga: 1 $ rtmpdump -v -r \"rtmp://aragontvlivefs.fplive.net/aragontvlive-live/stream_normal_abt\" -o archivo.mp4 Para descargar v\u00eddeos desde YouTube, last.fm, Google video, Dailymotion y Vimeo se puede utilizar el comando clive . Aqu\u00ed comentan c\u00f3mo se usa.","title":"Descarga de un v\u00eddeo incrustado en un reproductor Flash"},{"location":"sistemas/ubuntu.html#descarga-video-de-a3player","text":"","title":"Descarga v\u00eddeo de A3Player"},{"location":"sistemas/ubuntu.html#enlaces","text":"C\u00f3mo descargar v\u00eddeos en formato M3U8 (o HLS) http live streaming player Las carreras de Formula1 \u00faltimamente son emitidas en el formato HLS. Para descargar una carrera empezar haciendo una captura con Wireshark desde el momento en que se le da al Play hasta que se empieza a ver parte del v\u00eddeo (esperando que terminen los anuncios). Luego filtrar en Wireshark con la siguiente expresi\u00f3n: 1 http.request.uri contains \"playlist.m3u8\" Localizar la URL de descarga del fichero playlist.m3u8. Por ejemplo podr\u00eda ser: 1 http://geodeswowa3player.antena3.com/vcg/_definst_/mp4:assets3/2013/10/26/E6941C5D-2A9F-414B-B3FF-01FAC33073C4/sigra.mp4/playlist.m3u8?pulse=assets3%2F2013%2F10%2F26%2FE6941C5D-2A9F-414B-B3FF-01FAC33073C4%2F%7C1382835190%7Cb23df1201096fc1cc490427e05307f70","title":"Enlaces"},{"location":"sistemas/ubuntu.html#compresion-batch-de-videos","text":"Instalar el cliente de linea de comando de Handbrake . Dependiendo de la extensi\u00f3n habr\u00e1 que cambiar el ls inicial. Los v\u00eddeos de salida son MP4, por lo que si la extensi\u00f3n inicial no es esa, habr\u00e1 que cambiarla en los ficheros finales. 1 2 $ mkdir comp $ ls *.mp4 | awk '{print \"HandBrakeCLI -Z Normal -i \"$0\" -o comp/\"$0}' | sh","title":"Compresi\u00f3n batch de v\u00eddeos"},{"location":"sistemas/ubuntu.html#resampleado-de-video-con-handbrake","text":"( Fuente ) On the Video tab use Avg Bitrate and use 2500 to 3000 depending if a big action movie(3000) or if less fast action/movement in the movie(2500). Make sure to click on 2-Pass Encoding and Turbo first pass.","title":"Resampleado de video con HandBrake"},{"location":"sistemas/ubuntu.html#split-de-videos","text":"( Fuente ) Con el siguiente comando: 1 $ ffmpeg -acodec copy -vcodec copy -ss 00 :00:00 -t 00 :04:09 -i archivo_original.mp4 archivo_recortado.mp4 Donde el valor de la opci\u00f3n -ss es el instante de inicio en hh:mm:ss y el valor de -t es la longitud en hh:mm:ss Durante un tiempo en Ubuntu, ffmpeg no estuvo disponible. Su sustituto fue avconv , compatible la mayor\u00eda de las veces. No admit\u00eda sin embargo la opci\u00f3n de copiar el codec de audio y v\u00eddeo. Hab\u00eda que especificarlo. Una lista de encoders soportados se puede obtener ejecutando: 1 $ avconv -encoders Un par de codecs comprobados que suelen dar buen resultados son h264 y aac: 1 ffmpeg -acodec aac -vcodec h264 -ss 01 :07:38 -t 00 :01:14 -i archivo_original.mp4 archivo_recortado.mp4","title":"Split de v\u00eddeos"},{"location":"sistemas/ubuntu.html#redimensionado-de-imagenes-en-lote","text":"Ajustar a 200 px de ancho manteniendo el ratio: 1 $ convert '*.jpg[200x]' resized%03d.png Ajustar a 200 px de alto manteniendo el ratio: 1 $ convert '*.jpg[x200]' resized%03d.png","title":"Redimensionado de im\u00e1genes en lote"},{"location":"sistemas/ubuntu.html#redimensionado-de-fotos-en-lote","text":"Por ejemplo a 1080 de alto dentro de un directorio llamado resized: 1 $ convert '*.jpg[x1080]' resized/%03d.jpg En ocasiones, si hay varios miles de fotos, se puede llenar la memoria. En este caso hacer la conversi\u00f3n con el siguiente comando, que trata las im\u00e1genes una a una: 1 2 3 4 5 6 $ a = 1 $ for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) convert ${ i } [ x1080 ] resized/ ${ new } let a = a+1 done","title":"Redimensionado de fotos en lote"},{"location":"sistemas/ubuntu.html#renombrado-de-archivos-en-lote","text":"Por ejemplo una serie de archivos jpg: 1 2 3 4 5 6 $ a = 1 $ for i in *.jpg ; do new = $( printf \"%04d.jpg\" ${ a } ) mv ${ i } ${ new } let a = a+1 done","title":"Renombrado de archivos en lote"},{"location":"sistemas/ubuntu.html#montaje-de-video-stopmotion-a-partir-de-fotos","text":"A 10fps por ejemplo ( Fuente ): 1 $ avconv -f image2 -r 10 -i %04d.jpg -vf scale = 1440 :1080 -r:v 10 -c:v libx264 -qp 0 -preset veryslow -an \"video.mkv\"","title":"Montaje de v\u00eddeo StopMotion a partir de fotos"},{"location":"sistemas/ubuntu.html#configurar-wireshark-para-poder-capturar-con-usuarios-no-root","text":"Ejecutar lo siguiente: 1 2 $ sudo dpkg-reconfigure wireshark-common $ sudo usermod -a -G wireshark <usuario> Reiniciar la sesi\u00f3n.","title":"Configurar Wireshark para poder capturar con usuarios no-root"},{"location":"sistemas/ubuntu.html#solucionar-el-problema-con-wireshark-en-las-ultimas-versiones-de-ubuntu","text":"Cuando se inicia una captura, se cuelga Wireshark, emitiendo una serie infinita de errores de GTK en consola. En esta p\u00e1gina comentan varios workarrounds. Por ejemplo editando el fichero /usr/share/applications/wireshark.desktop y cambiando la l\u00ednea de ejecuci\u00f3n por: 1 Exec=env LIBOVERLAY_SCROLLBAR=0 wireshark %f","title":"Solucionar el problema con Wireshark en las \u00faltimas versiones de Ubuntu"},{"location":"sistemas/ubuntu.html#ficheros-implicados-en-arranque","text":"/etc/rc.local : This script is executed at the end of each multiuser runlevel.","title":"Ficheros implicados en arranque"},{"location":"sistemas/ubuntu.html#montar-imagen-de-disco-o-particion","text":"Usando kpartx explicado aqu\u00ed .","title":"Montar imagen de disco o partici\u00f3n"},{"location":"sistemas/ubuntu.html#screencast","text":"1 $ avconv -f x11grab -r 25 -s 910x550 -i :0.0 -vcodec huffyuv screencast.avi","title":"Screencast"},{"location":"sistemas/ubuntu.html#gestion-de-modulos","text":"","title":"Gesti\u00f3n de m\u00f3dulos"},{"location":"sistemas/ubuntu.html#anadir-un-modulo-al-kernel","text":"1 $ sudo modprobe <modulo> Si se quiere a\u00f1adir de forma permanente, es decir, de forma autom\u00e1tica en el arranque, se incorpora el nombre del m\u00f3dulo al fichero /etc/modules . Cuando el m\u00f3dulo que se carga es un driver de un dispositivo, el kernel env\u00eda un evento al subsistema udev . La monitorizaci\u00f3n de estos mensajes se puede hacer teniendo abierto un terminal con el siguiente comando lanzado ( fuente ): 1 $ udevadm monitor --property","title":"A\u00f1adir un m\u00f3dulo al kernel"},{"location":"sistemas/ubuntu.html#listado-de-modulos","text":"1 $ lsmod","title":"Listado de m\u00f3dulos"},{"location":"sistemas/ubuntu.html#informacion-de-un-modulo","text":"1 $ modinfo <modulo>","title":"Informaci\u00f3n de un m\u00f3dulo"},{"location":"sistemas/ubuntu.html#ficheros-definicion-variables-de-entorno","text":"Si se necesita definir una variable global se podr\u00e1 hacer en los ficheros: /etc/environment /etc/profile /etc/profile.d /etc/bashrc o /etc/bash.bashrc Si es a nivel de usuario se har\u00e1 en: ~/.bashrc ~/.bash_profile","title":"Ficheros definici\u00f3n variables de entorno"},{"location":"sistemas/ubuntu.html#poner-barras-de-scroll-normales","text":"1 gsettings set com.canonical.desktop.interface scrollbar-mode normal","title":"Poner barras de scroll normales"},{"location":"sistemas/ubuntu.html#skype-en-tray","text":"Instalar los paquetes sni-qt y sni-qt:i386 .","title":"Skype en tray"},{"location":"sistemas/ubuntu.html#workrave-en-tray","text":"Fuente 1 gsettings set com.canonical.Unity.Panel systray-whitelist \"['all']\"","title":"Workrave en tray"},{"location":"sistemas/ubuntu.html#localizacion-de-ficheros-desktop","text":"Los del usuario se encuentran en: ~/.local/share/applications Los del sistema en: /usr/share/applications","title":"Localizaci\u00f3n de ficheros .desktop"},{"location":"sistemas/ubuntu.html#configuracion-de-gedit","text":"Al menos las \u00faltimas versiones de gedit no tienen un panel de ajustes para las opciones predeterminadas. Cada vez que arranca aparecen preajustados 8 espacios como anchura del tabulador y no sustituye por espacios. Puede sacarse una lista de todos los ajustes que se pueden cambiar con el siguiente comando: 1 gsettings list-recursively | grep -i gedit.preferences.editor Los ajustes del tabulador mencionados antes, para pasar a 4 espacios, ejecutar: 1 2 gsettings set org.gnome.gedit.preferences.editor insert-spaces true gsettings set org.gnome.gedit.preferences.editor tabs-size 4 Otro ajuste interesante es el del wrap mode. Se puede hacer con (puede valer 'none', 'word', 'char', o 'word-char'): 1 gsettings set org.gnome.gedit.preferences.editor wrap-mode 'word'","title":"Configuraci\u00f3n de gedit"},{"location":"sistemas/ubuntu_phone.html","text":"Ubuntu Phone \u00b6 Enlaces \u00b6 Installing Ubuntu Install Android On BQ Aquaris Ubuntu Phone In Linux Activar SSH \u00b6 1 2 3 sudo service ssh start sudo setprop persist.service.ssh true sudo reboot Permitir cambios en / \u00b6 1 sudo mount -o remount,rw / Ejecutar en modo desktop \u00b6 1 gsettings set com.canonical.Unity8 usage-mode Windowed Retornar a interfaz tel\u00e9fono \u00b6 1 gsettings set com.canonical.Unity8 usage-mode Staged","title":"Ubuntu Phone"},{"location":"sistemas/ubuntu_phone.html#ubuntu-phone","text":"","title":"Ubuntu Phone"},{"location":"sistemas/ubuntu_phone.html#enlaces","text":"Installing Ubuntu Install Android On BQ Aquaris Ubuntu Phone In Linux","title":"Enlaces"},{"location":"sistemas/ubuntu_phone.html#activar-ssh","text":"1 2 3 sudo service ssh start sudo setprop persist.service.ssh true sudo reboot","title":"Activar SSH"},{"location":"sistemas/ubuntu_phone.html#permitir-cambios-en","text":"1 sudo mount -o remount,rw /","title":"Permitir cambios en /"},{"location":"sistemas/ubuntu_phone.html#ejecutar-en-modo-desktop","text":"1 gsettings set com.canonical.Unity8 usage-mode Windowed","title":"Ejecutar en modo desktop"},{"location":"sistemas/ubuntu_phone.html#retornar-a-interfaz-telefono","text":"1 gsettings set com.canonical.Unity8 usage-mode Staged","title":"Retornar a interfaz tel\u00e9fono"},{"location":"sistemas/unix.html","text":"UNIX \u00b6 Cheat sheets \u00b6 Colecci\u00f3n de Carlos Fenollosa Tricks de Carlos Fenollosa Bash Cheat Sheet Programar en Bash, peque\u00f1o manual de referencia How To Use Linux Screen Comandos \u00fatiles \u00b6 strace -e file [command] : runs command , printing out any time a file is opened or checked. strace -e file,network,process [command] : the same as above, but also printing network process and subcommands run. strace -e file,process -f [command] : the -f parameter follows forks -- in case it's not main command but a subshell that you're interested in. strace -p [PID] : Connect to pid PID and start tracing. route -n : Tabla de rutas del sistema. du -h --max-depth=1 . : Tama\u00f1o de un directorio y sus subdirectorios directos. find [directorio] ! -user [usuario] -ls : Lista los ficheros que NO pertenecen a un usuario. badblocks -swv /dev/sda : Bloquear sectores defectuosos (sustituir /dev/sda por el dispositivo que corresponda. dpkg --configure -a : Soluciona problemas con paquetes mal instalados. mkdosfs -F 32 -v -n \"\" /dev/sdc1 : Formato de partici\u00f3n en FAT32. du -sh */ | sort -h : Muestra los directorios del directorio actual ordenados por tama\u00f1o (en formato humano) indicando su tama\u00f1o. cat fichero.txt | awk '{print $5}' : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | cut -d' ' -f5 : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | sed -e 's/ /\\n/g' : Sustituye todos los espacios del fichero por retornos de carro. netstat -nr : Tabla de rutas del sistema. netstat -ntu|grep :80|wc -l : n\u00famero de conexiones al servidor HTTP. netstat -ntu|grep :21|wc -l : n\u00famero de conexiones al servidor FTP. netstat -tulanp : Lista los puertos TCP/UDP abiertos (tanto de servidores como de clientes). netstat -tlnp : Lista los puertos TCP abiertos de los servicios. crontab -e : A\u00f1adir un job a cron. sudo badblocks /dev/sda > badblocks.txt; sudo fsck -l badblocks.txt /dev/sda : Bloqueo de sectores defectuosos del disco duro ( fuente ). sudo blkid : Lista los dispositivos de bloques (discos) disponibles en el sistema. sudo nmap -sP 192.168.1.0/24 : Descubrir todos los equipos presentes en la red 192.168.1.0 . sudo netstat -lp --inet : Puertos de red abiertos y procesos asociados. sudo dd if=/dev/zero of=/dev/mmcblk0 : Formateo de una tarjeta de memoria (en realidad vale para cualquier dispositivo de almacenamiento). sudo tcpdump -s 0 -i ppp0 -w trafico.pcap : Captura de tr\u00e1fico por el interfaz ppp0. iptables -L -n : Listar reglas iptables. wget -q -O - url : Hace la request de la URL sin emitir trazas (-q = no verbose) y redireccionando la response a la salida est\u00e1ndar (-O -). route -n : Muestra la tabla de rutas con IP's en lugar de con nombres. cat /etc/resolv.conf : Muestra el gateway en uso. ldd <binario> : Indica las librer\u00edas que usa el binario. exiftool -AllDates='2010:08:08 15:35:33' -overwrite_original photo.jpg : Actualiza todas las fechas dentro de la metainformaci\u00f3n de un JPG. exiftool -all= photo.jpg : Borrar toda la metainformaci\u00f3n de una foto (por cuestiones de privacidad antes de subirla a un sitio por ejemplo). mplayer -vo caca MovieName.avi : Reproduce un v\u00eddeo en consola con ascii. Para verlo en blanco y negro sustituir caca por aa . sudo traceroute -4T -p 22 192.168.1.203 : Comprobar la traza hasta alcanzar un determinado puerto en una determinada m\u00e1quina. dig @8.8.8.8 -t any eduardofilo.es : Query DNS de los registros de cualquier tipo a trav\u00e9s del servidor 8.8.8.8 al dominio eduardofilo.es . Gesti\u00f3n de usuarios: sudo adduser userName : A\u00f1ade usuario creando home. sudo usermod -a -G groupName userName : A\u00f1ade el usuario userName ya existente al grupo groupName ya existente. sudo userdel -r userName : Borra el usuario eliminando su home. sudo stat /proc/1/exe : Nos da pistas de si el sistema funciona sobre SysV, Upstart o Systemd ( fuente ). Alias SSH \u00b6 Para asimilar un identificador a una pareja user@host, editar el fichero ~/.ssh/config y a\u00f1adir un bloque como el siguiente ( fuente ): 1 2 3 Host example HostName example.com User exampleuser Tunel de un puerto remoto por SSH \u00b6 ( Fuente ) Para conducir el tr\u00e1fico hasta un host:puerto remoto canaliz\u00e1ndolo por un tunel seguro, se puede utilizar el comando ssh . Por ejemplo, vamos a tunelizar una conexi\u00f3n contra el puerto telnet de la m\u00e1quina remota telnet.example.com por medio del usuario ssh-user para tenerlo disponible en el puerto 2000 local de nuestra m\u00e1quina: 1 ssh -f ssh-user@telnet.example.com -L 2000:telnet.example.com:23 -N A partir de ahora podremos conectarnos al telnet conectando con localhost:2000 . Uso b\u00e1sico de screen \u00b6 En esta cheat sheet se re\u00fanen bastantes comandos \u00fatiles. A continuaci\u00f3n indico el uso t\u00edpico: Arrancamos una sesi\u00f3n: 1 shell ~$ screen Aparece una splashscreen que cerramos pulsando enter y ya podemos trabajar Lanzamos un comando: 1 screenshell_1 ~$ top Para cerrar la sesi\u00f3n screen que acabamos de abrir, tan s\u00f3lo hay que lanzar el comando exit (en este ejemplo, parando previamente el comando top que hab\u00edamos lanzado). Ahora sin embargo pretendemos dejarla abierta, con el comando top en ejecuci\u00f3n, para volver a ella m\u00e1s adelante. Es lo que se llama un detach (sirve para recordar la tecla que se pulsa al final de la combinaci\u00f3n de teclas). Para ello pulsamos la combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"d\" Habremos vuelto a nuestro bash inicial. Cuando en cualquier momento queramos recuperar la sesi\u00f3n screen, lo haremos con el comando: 1 shell ~$ screen -r Ahora estaremos viendo de nuevo la salida del comando top que hab\u00edamos dejado arrancado dentro de la sesi\u00f3n screen. Volvemos a abandonar la sesi\u00f3n sin cerrarla procediendo por tanto como en el paso 4: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial, vamos a abrir una segunda sesi\u00f3n screen para ver c\u00f3mo podemos movernos a una u a otra. Arrancamos la sesi\u00f3n como hicimos con la primera: 1 shell ~$ screen Cerramos la splashscreen y ejecutamos alg\u00fan comando para reconocer la sesi\u00f3n cuando volvamos a ella. Por ejemplo: 1 screenshell_2 ~$ ping 8.8.8.8 Abandonamos la sesi\u00f3n dej\u00e1ndola abierta: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial ahora tenemos dos sesiones screen lanzadas. Ahora el comando screen -r no se puede lanzar sin especificar el identificador de la sesi\u00f3n tras la opci\u00f3n -r . Obtenemos la lista de sesiones con el siguiente comando: 1 2 3 4 5 shell ~$ screen -list There are screens on: 12629.pts-7.eduardo-HP-Folio-13 (04/04/15 13:55:03) (Detached) 12609.pts-7.eduardo-HP-Folio-13 (04/04/15 13:54:51) (Detached) 2 Sockets in /var/run/screen/S-edumoreno. Ahora, para recuperar una de ella, por ejemplo la m\u00e1s vieja que conten\u00eda lanzado el comando top incorporaremos el identificador de la sesi\u00f3n tras la opci\u00f3n -r : 1 shell ~$ screen -r 12609.pts-7.eduardo-HP-Folio-13 Como se comentaba en el punto 4, para cerrar las sesiones simplemente saldremos con exit , aunque tambi\u00e9n, y sobre todo en caso de que la sesi\u00f3n se quedara bloqueada con alg\u00fan comando que no se pudiera cerrar, se puede matar la sesi\u00f3n con la siguiente combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"k\" B\u00faqueda de ficheros que contienen una cadena \u00b6 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash SAVEIFS = $IFS IFS = $( echo -en \"\\n\\b\" ) for file in ` find . ` do fgrep \"[cadena a buscar]\" $file > /dev/null 2 > & 1 if [ $? -eq 0 ] ; then echo $file fi done IFS = $SAVEIFS En realidad el script anterior hace lo mismo que el simple comando siguiente: 1 $ fgrep -rl \"[cadena a buscar]\" . Ajustes de permisos a ficheros y directorios por separado \u00b6 1 2 3 4 $ #Para los ficheros: $ find . ! -type d -exec chmod 664 {} \\; $ #Para los directorios: $ find . -type d -exec chmod 775 {} \\; Renombrado de ficheros de may\u00fasculas a min\u00fasculas \u00b6 ( Fuente ) 1 2 3 4 5 #!/bin/sh for f in * ; do g = ` expr \"xxx $f \" : 'xxx\\(.*\\)' | tr '[A-Z]' '[a-z]' ` mv \" $f \" \" $g \" done Redirecci\u00f3n de salidas \u00b6 Para redirigir ambas salidas de un programa (estandar y error) hacer lo siguiente: 1 $ COMANDO > FICHERO_O_DISPOSITIVO 2 > & 1 En esta p\u00e1gina se documenta con m\u00e1s detalle este tema. Ejecuci\u00f3n remota de aplicaciones XWindow \u00b6 Abrir el servidor X (Cygwin) Iniciar sesi\u00f3n remota: ssh -X [usuario]@[m\u00e1quina] Ejecutar la aplicaci\u00f3n MySQL \u00b6 Acceso: mysql -u root -p Listar bases de datos: show databases; Abrir una base de datos: use [NombreBBDD]; Listar tablas: show tables; Ficheros de configuraci\u00f3n importantes \u00b6 /etc/security/limits.conf : Configuration file for the pam_limits module. Permite limitar el n\u00famero de ficheros abiertos por el sistema, el n\u00famero de procesos, etc. Soluci\u00f3n al problema de los alias (alternatives) de Java6 en Ubuntu \u00b6 Los paquetes de Java 6 (1.6) en Ubuntu tienen problemas a la hora de ajustar los alias en /etc/alternatives cuando antes ha estado instalada otra versi\u00f3n (1.5 por ejemplo). Se puede forzar la generaci\u00f3n de los alias mediante las siguientes ordenes: 1 2 $ update-java-alternatives --list $ sudo update-java-alternatives --set [ elegir el identificador de la lista que muestra el comando anterior ] Bits SUID, SGID y sticky \u00b6 Manual de LuCAS Autentificaci\u00f3n autom\u00e1tica por SSH \u00b6 Conseguiremos que la autentificaci\u00f3n del cliente se haga por medio de una pareja de claves privada/p\u00fablica en lugar de con identificador de usuario/password. Primero generamos la pareja de claves p\u00fablica-privada ejecutando en el cliente ssh-keygen : 1 2 3 4 5 6 7 8 9 $ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key ( /home/user/.ssh/id_rsa ) : Enter passphrase ( empty for no passphrase ) : Enter same passphrase again: Your identification has been saved in /home/user/.ssh/id_rsa. Your public key has been saved in /home/user/.ssh/id_rsa.pub. The key fingerprint is: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx user@machine Las claves se almacenan por defecto en ~/.ssh/ , quedando el directorio as\u00ed: 1 2 3 4 5 $ ls -l total 12 -rw------- 1 user user 883 2005 -08-13 14 :16 id_rsa -rw-r--r-- 1 user user 223 2005 -08-13 14 :16 id_rsa.pub -rw-r--r-- 1 user user 1344 2005 -08-04 02 :14 known_hosts Los ficheros id_rsa e id_rsa.pub contienen respectivamente las claves privada y p\u00fablica. El fichero known_hosts contiene la lista de las claves p\u00fablicas de las m\u00e1quinas reconocidas. Ahora se debe copiar la clave p\u00fablica al servidor, al fichero ~/.ssh/authorized_keys . Para ello se utiliza el comando ssh-copy-id: 1 2 $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine1 $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine2 ssh-copy-id es un script que se conecta a la m\u00e1quina y copia el archivo (indicado por la opci\u00f3n -i ) en ~/.ssh/authorized_keys , y ajusta los permisos a los valores adecuados. Si no se dispone del programa ssh-copy-id se puede realizar una copia manual a la m\u00e1quina remota del fichero conteniendo la clave p\u00fablica (por ejemplo usando scp o sftp ) y a\u00f1adir su contenido al fichero ~/.ssh/authorized_keys . Ahora la conexi\u00f3n deber\u00eda funcionar sin necesidad de introducir la clave. Si no es as\u00ed es posible que sea un problema de permisos en los ficheros. Los permisos correctos deben ser similares a estos: 1 2 $ chmod go-w ~ ~/.ssh $ chmod 600 ~/.ssh/authorized_keys La conexi\u00f3n SSH se realizar\u00e1 indicando el fichero con la clave privada como argumento de la siguiente forma: 1 $ ssh -i ~/.ssh/id_rsa user@machine (Si el nombre del fichero con la clave privada es precisamente el del ejemplo, es decir id_rsa , creo que no es necesario indicarlo con la opci\u00f3n -i ). Configuraci\u00f3n de Firefox para ejecuci\u00f3n de applets Java \u00b6 ( Fuente ) Vaya al subdirectorio de complementos, situado dentro del directorio de instalaci\u00f3n de Mozilla. 1 $ cd ` <directorio de instalaci\u00f3n de Mozilla> ` /plugins # Normalmente /usr/lib/firefox/plugins o 1 $ cd ` <home del usuario> ` /.mozilla/plugins En el directorio actual, cree un v\u00ednculo simb\u00f3lico al archivo del JRE ns7/libjavaplugin_oji.so. Escriba: 1 $ ln -s ` <directorio de instalaci\u00f3n del JRE> ` /plugin/i386/ns7/libjavaplugin_oji.so Inicie el navegador Mozilla o rein\u00edcielo si ya se estaba ejecutando. Tenga en cuenta que, si se est\u00e1 ejecutando alg\u00fan otro componente de Mozilla (como Messenger, Composer, etc.) deber\u00e1 tambi\u00e9n reiniciarlo. Vaya a Editar > Preferencias. En la categor\u00eda Avanzadas, seleccione Activar Java. Organizaci\u00f3n de men\u00fas cuando se mezclan aplicaciones KDE y Gnome \u00b6 GNU/Linux nos permite tener varios sistemas de escritorio diferentes instalados y funcionando, pero inevitablemente nos encontramos con una mezcla de opciones y programas de cada entorno en los men\u00fas principales. Existen aplicaciones precisamente para limpiar autom\u00e1ticamente las entradas del men\u00fa que no corresponden a tu sistema de escritorio habitual, y dejarlas apartadas y ordenadas de alguna manera. Con Gnome y KDE instalados a la vez, hay dos programas para aquellos Gnomeros que han querido probar KDE y para los KDEeros que han querido probar Gnome. Gnome Menu Extended es el propio men\u00fa normal de Gnome, pero incluye una carpeta donde se guardan todas las aplicaciones y opciones de KDE. Se instala f\u00e1cilmente descargando el paquete para cualquier distribuci\u00f3n: Debian (y Ubuntu), Slackware o directamente el c\u00f3digo fuente para compilarlo. Una vez instalado, se activa yendo a Preferencias -> Add KDE Menu. Y si quieres recuperar el men\u00fa como estaba, tambi\u00e9n tiene la opci\u00f3n de restaurarlo. K Menu Gnome es un men\u00fa exactamente igual que el KMenu original, pero incluye una carpeta donde residen todas las aplicaciones de Gnome, en sistemas que tienen ambos escritorios instalados. Est\u00e1 disponible para Debian (y Ubuntu), Slackware, Fedora y el c\u00f3digo fuente para compilarlo en cualquier sistema. Error \"error while loading shared libraries: ...\" \u00b6 Runtime error. The linker hasn't found your libraries. Either they are not installed properly or the linker doesn't know where they are (most probably in /usr/local/lib ). To get your linker to update its list of libraries type: 1 $ ldconfig /usr/local/lib or as a temporary measure: 1 $ export LD_LIBRARY_PATH = \"/usr/local/lib\" Compartir ficheros con Samba \u00b6 Aparte de instalar y configurar Samba (fichero /etc/samba/smb.conf ) hay que dar de alta los usuarios UNIX que se usar\u00e1n a trav\u00e9s de Samba y asignarles un password para el acceso por el mismo. Esto se hace con el comando: 1 $ sudo smbpasswd -a usuario Migraci\u00f3n masiva de usuarios \u00b6 ( Fuente ) Para los casos en los que sea necesario replicar los usuarios de un servidor Linux a otro o en los que se vaya a migrar a un servidor con m\u00e1s recursos, el siguiente procedimiento puede ser de utilidad. Los escenarios son varios, desde los servidores que ejecutan alg\u00fan tipo de base de datos, los que tienen ciertas aplicaciones, los que alojan p\u00e1ginas Web, etc\u00e9tera. Para fines de la demostraci\u00f3n pensaremos que el servidor est\u00e1 dedicado como servidor de archivos, mismos que se almacenan en el home de cada uno de los usuarios. NOTA: El presente procedimiento da por hecho que se hayan realizado las configuraciones necesarias en el nuevo servidor. Primero, lo que debe respaldarse es la lista de usuarios con su respectiva contrase\u00f1a. El archivo /etc/passwd contiene las cuentas de los usuarios en el sistema bajo el siguiente formato de ejemplo: 1 2 3 4 5 6 7 8 root : x : 0 : 0 : root :/ root :/ bin / bash bin : x : 1 : 1 : bin :/ bin :/ sbin / nologin daemon : x : 2 : 2 : daemon :/ sbin :/ sbin / nologin adm : x : 3 : 4 : adm :/ var /adm:/sbin/ nologin nitsuga : x : 500 : 500 ::/ home /nitsuga:/bin/ bash nitsuga2 : x : 501 : 501 ::/ home /nitsuga2:/bin/ bash nitsuga3 : x : 502 : 502 ::/ home /nitsuga3:/bin/ bash Como se observa, el segundo campo respectivo al hash de la contrase\u00f1a no se muestra. La contrase\u00f1a se encuentra en el archivo /etc/shadow 1 2 3 4 5 6 7 8 root:$1$/7zmwgAa$Jd5ja7nsC4nTm O3s0.Z1j1:13445:0:99999:7::: bin:*:13445:0:99999:7::: daemon:*:13445:0:99999:7::: adm:*:13445:0:99999:7::: nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:13498:2:1:1::: nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: Se proceder\u00e1 a unir el usuario con su contrase\u00f1a utilizando el comando pwunconv para \u201cdesactivar\u201d el shadow, quedando as\u00ed las contrase\u00f1as en el archivo passwd. 1 2 3 4 5 6 7 8 9 10 root:$1$/7zmwgAa$Jd5ja7nsC4n TmO3s0.Z1j1:0:0:root:/root:/bin/bash bin:*:1:1:bin:/bin:/sbin/nologin daemon:*:2:2:daemon:/sbin:/sbin/ nologin adm:*:3:4:adm:/var/adm:/sbin/nologin nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/ nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga3:/bin/bash Depuraci\u00f3n de /etc/passwd \u00b6 Se copiar\u00e1 el archivo /etc/passwd a uno de trabajo /etc/passwd.migracion . Ahora se editar\u00e1 el archivo y se quitar\u00e1n todos los usuarios propios del sistema (root, usuarios de demonios, etc\u00e9tera) dejando s\u00f3lo los usuarios que van a ser autenticados. 1 2 3 nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga2:/bin/bash Tambi\u00e9n se copiar\u00e1 el archivo /etc/group a /etc/group.migracion 1 2 3 4 5 6 7 8 9 root : x : 0 : root bin : x : 1 : root , bin , daemon daemon : x : 2 : root , bin , daemon sys : x : 3 : root , bin , adm adm : x : 4 : root , adm , daemon nitsuga : x : 500 : nitsuga2 : x : 501 : nitsuga3 : x : 502 : nitsuga8 : x : 507 : Y se editar\u00e1 para dejar s\u00f3lo los grupos de los usuarios: 1 2 3 nitsuga : x : 500 : nitsuga2 : x : 501 : nitsuga3 : x : 502 : Ahora se respaldar\u00e1 el home de los usuarios, suponiendo que se encuentra bajo el directorio/home, se har\u00e1 lo siguiente desde ra\u00edz (/): 1 [root@localhost /]# tar -cpzvf home.tgz home/ En el que las banderas: c = crea el archivo p = preserva los permisos z = comprime el archivo .tar generado v = da salida detallada f = especifica el archivo a crear (para este caso home.tgz) Ahora bien, se realizar\u00e1 la transferencia de los archivos home.tgz, passwd.migracion y group.migracion al nuevo servidor: 1 2 3 4 5 [root@localhost /]# scp /home.tgz root@nuevoservidor [root@localhost /]# scp /etc/passwd.migracion root@nuevoservidor [root@localhost /]# scp /etc/group.migracion root@nuevoservidor Una vez en el nuevo servidor se deber\u00e1 verificar que no se repitan tanto los UID como los GID entre los dos servidores. Se realizar\u00e1: 1 2 3 4 5 [root@localhost /]# cp \u2013p home.tgz / ; tar \u2013zxvf home.tgz [root@localhost /]# cp \u2013p passwd.migracion /etc ; pwunconv ; cat passwd.migracion >> passwd; pwconv [root@localhost /]# cp \u2013p group.migracion /etc ; cat group.migracion >> group Eliminar petici\u00f3n password en sudo \u00b6 Es necesario reconfigurar el fichero /etc/sudoers para que no se solicite el password del usuario a la hora de hacer sudo, dado que necesitamos que se haga sudo desde un proceso que no tendr\u00e1 interacci\u00f3n con el usuario. Para conseguir esto hay que hacer dos cosas: Incorporar el usuario que nos interesa al grupo sudo del sistema Situar al final del fichero de configuraci\u00f3n /etc/sudoers lo siguiente: 1 %sudo ALL = NOPASSWD : ALL Hay que fijarse que la linea anterior normalmente ya aparece en el fichero pero comentada con una almohadilla. Se puede aprovechar la linea quitando el car\u00e1cter almohadilla del principio, pero hay que tener en cuenta que no es suficiente con eso. Hay que mover la linea al final del fichero ya que las lineas siguientes pueden sobreescribir su efecto. Importante : La edici\u00f3n del fichero /etc/sudoers s\u00f3lo se puede hacer con el comando visudo . Este comando hay que lanzarlo con sudo a su vez, por lo que se har\u00e1 de la siguiente forma: 1 $ sudo visudo Proxy HTTP en consola \u00b6 Setting up proxy at Firefox do not have effects at console, which means your wget, ssh, apt-get, yum etc do not access through the proxy you set at Firfox browser. To setup http proxy at console, you can do as bellow, assume the proxy IP is 219.93.2.113 and port 3128: 1 $ export http_proxy = 'http://219.93.2.113:3128/' Remember, you have to specified http://, and to know more about export, check out HERE. To clear your http proxy and use back yours, do this: 1 $ export http_proxy = '' Convertir nombres de ficheros de ISO a UTF-8 \u00b6 Al migrar una web, o al copiar un sistema de archivos, te puedes encontrar con nombres de ficheros en otras codificaciones de caracteres. Mediante el siguiente comando transformar\u00edamos los nombres de ficheros desde ISO-8869-1 a UTF-8: 1 $ convmv -r -f ISO-8859-1 -t UTF-8 --notest * Backup de un FileSystem \u00b6 Backup: 1 $ dd if = /dev/hdx | gzip > /path/to/image.gz Restauraci\u00f3n: 1 $ gzip -dc /path/to/image.gz | dd of = /dev/hdx Montar un fichero .img \u00b6 ( Fuente ). Primero hay que averiguar el offset de la partici\u00f3n que queremos montar: 1 fdisk -l /ruta/fichero.img Esto nos mostrar\u00e1 el tama\u00f1o del bloque y el bloque de comienzo de la partici\u00f3n. Por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 edumoreno@eduardo-HP-Folio-13:~/Descargas$ fdisk -l RetroPie.img Disk RetroPie.img: 3,7 GiB, 3965190144 bytes, 7744512 sectors Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disklabel type: dos Disk identifier: 0xb847d94e Disposit. Inicio Start Final Sectores Size Id Tipo RetroPie.img1 * 8192 124927 116736 57M e W95 FAT16 (LBA) RetroPie.img2 124928 7744511 7619584 3,6G 83 Linux El offset se calcular\u00e1 multiplicando el bloque de comienzo por el tama\u00f1o de bloque. En el ejemplo, para la segunda partici\u00f3n: offset = 124928 * 512 = 63963136 Por tanto el comando para montar ser\u00e1: 1 sudo mount -o loop,offset=63963136 RetroPie.img /mnt/tmp Manipulaci\u00f3n de PDFs \u00b6 Divisi\u00f3n en m\u00faltiples ficheros (uno por p\u00e1gina): 1 $ pdftk largepdfile.pdf burst Fusi\u00f3n de varios ficheros en uno: 1 $ pdftk *.pdf cat output onelargepdfile.pdf Obtener hash MD5 de una cadena \u00b6 1 $ echo -n \"<cadena>\" | md5sum System + MySQL backup script \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 #!/bin/bash # System + MySQL backup script # Full backup day - Sun (rest of the day do incremental backup) # Copyright (c) 2005-2006 nixCraft `<http://www.cyberciti.biz/fb/>` # This script is licensed under GNU GPL version 2.0 or above # Automatically generated by http://bash.cyberciti.biz/backup/wizard-ftp-script.php # --------------------------------------------------------------------- ### System Setup ### DIRS = \"/var/spool/sms /var/log/smstools /root\" BACKUP = /tmp/backup. $$ NOW = $( date + \"%d-%m-%Y\" ) INCFILE = \"/var/tar-inc-backup.dat\" DAY = $( date + \"%a\" ) # echo $DAY >> /root/dates FULLBACKUP = \"Sun\" ### MySQL Setup ### MUSER = \"mysqluser\" MPASS = \"mysqlpwd\" MHOST = \"localhost\" MYSQL = \" $( which mysql ) \" MYSQLDUMP = \" $( which mysqldump ) \" GZIP = \" $( which gzip ) \" ### FTP server Setup ### FTPD = \"//incremental\" FTPU = \"ftpuser\" FTPP = \"ftppwd\" FTPS = \"ftphost\" NCFTP = \" $( which ncftpput ) \" ### Other stuff ### EMAILID = \"user@domain.com\" ### Start Backup for file system ### [ ! -d $BACKUP ] && mkdir -p $BACKUP || : ### See if we want to make a full backup ### if [ \" $DAY \" == \" $FULLBACKUP \" ] ; then FTPD = \"//full\" FILE = \"fs-full- $NOW .tar.gz\" tar -zcvf $BACKUP / $FILE $DIRS else i = $( date + \"%Hh%Mm%Ss\" ) FILE = \"fs-i- $NOW - $i .tar.gz\" tar -g $INCFILE -zcvf $BACKUP / $FILE $DIRS fi ### Start MySQL Backup ### # Get all databases name DBS = \" $( $MYSQL -u $MUSER -h $MHOST -p $MPASS -Bse 'show databases' ) \" for db in $DBS do FILE = $BACKUP /mysql- $db . $NOW - $( date + \"%T\" ) .gz $MYSQLDUMP -u $MUSER -h $MHOST -p $MPASS $db | $GZIP -9 > $FILE done ### Dump backup using FTP ### #Start FTP backup using ncftp ncftp -u \" $FTPU \" -p \" $FTPP \" $FTPS <<EOF mkdir $FTPD mkdir $FTPD/$NOW cd $FTPD/$NOW lcd $BACKUP mput * quit EOF ### Find out if ftp backup failed or not ### if [ \" $? \" == \"0\" ] ; then rm -f $BACKUP /* else T = /tmp/backup.fail echo \"Date: $( date ) \" > $T echo \"Hostname: $( hostname ) \" >> $T echo \"Backup failed\" >> $T mail -s \"BACKUP FAILED\" \" $EMAILID \" < $T rm -f $T fi Recuperaci\u00f3n de pendrive o tarjeta de memoria corrupta \u00b6 Con TestDisk/Photorec. Enlaces \u00b6 TestDisk Paso A Paso How to Recover Data from Corrupt / formatted USB Flash using Photorec Instalaci\u00f3n/desinstalaci\u00f3n de scripts SysV/Upstart \u00b6 Los scripts del serivicio deber\u00e1n tener una cabecera especial que indique c\u00f3mo deben comportarse en cada nivel de ejecuci\u00f3n. Por ejemplo \u00e9ste es el que tiene MySQL: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/bin/bash # ### BEGIN INIT INFO # Provides: mysql # Required-Start: $remote_fs $syslog # Required-Stop: $remote_fs $syslog # Should-Start: $network $time # Should-Stop: $network $time # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Start and stop the mysql database server daemon # Description: Controls the main MySQL database server daemon \"mysqld\" # and its wrapper script \"mysqld_safe\". ### END INIT INFO # Instalar: sudo update-rc.d SERVICE defaults Desinstalar: sudo update-rc.d -f SERVICE remove Gesti\u00f3n de servicios Systemd \u00b6 systemctl start SERVICE - Use it to start a service. Does not persist after reboot systemctl stop SERVICE - Use it to stop a service. Does not persist after reboot systemctl restart SERVICE - Use it to restart a service systemctl reload SERVICE - If the service supports it, it will reload the config files related to it without interrupting any process that is using the service. systemctl status SERVICE - Shows the status of a service. Tells whether a service is currently running. systemctl enable SERVICE - Turns the service on, on the next reboot or on the next start event. It persists after reboot. systemctl disable SERVICE - Turns the service off on the next reboot or on the next stop event. It persists after reboot. systemctl is-enabled SERVICE - Check if a service is currently configured to start or not on the next reboot. systemctl is-active SERVICE - Check if a service is currently active. systemctl show SERVICE - Show all the information about the service. systemctl mask SERVICE - Completely disable a service by linking it to /dev/null ; you cannot start the service manually or enable the service. systemctl unmask SERVICE - Removes the link to /dev/null and restores the ability to enable and or manually start the service. Montaje de carpeta compartida samba en /etc/fstab \u00b6 Crear un fichero /home/usuario/.smbcredentials con el siguiente contenido: 1 2 user=usuario password=password A\u00f1adir la siguiente l\u00ednea a /etc/fstab : 1 192.168.1.100/carpeta_compartida /home/usuario/punto_montaje cifs uid=usuario,gid=usuario,credentials=/home/usuario/.smbcredentials,iocharset=utf8,sec=ntlmv2,file_mode=0664,dir_mode=0775 0 0","title":"UNIX"},{"location":"sistemas/unix.html#unix","text":"","title":"UNIX"},{"location":"sistemas/unix.html#cheat-sheets","text":"Colecci\u00f3n de Carlos Fenollosa Tricks de Carlos Fenollosa Bash Cheat Sheet Programar en Bash, peque\u00f1o manual de referencia How To Use Linux Screen","title":"Cheat sheets"},{"location":"sistemas/unix.html#comandos-utiles","text":"strace -e file [command] : runs command , printing out any time a file is opened or checked. strace -e file,network,process [command] : the same as above, but also printing network process and subcommands run. strace -e file,process -f [command] : the -f parameter follows forks -- in case it's not main command but a subshell that you're interested in. strace -p [PID] : Connect to pid PID and start tracing. route -n : Tabla de rutas del sistema. du -h --max-depth=1 . : Tama\u00f1o de un directorio y sus subdirectorios directos. find [directorio] ! -user [usuario] -ls : Lista los ficheros que NO pertenecen a un usuario. badblocks -swv /dev/sda : Bloquear sectores defectuosos (sustituir /dev/sda por el dispositivo que corresponda. dpkg --configure -a : Soluciona problemas con paquetes mal instalados. mkdosfs -F 32 -v -n \"\" /dev/sdc1 : Formato de partici\u00f3n en FAT32. du -sh */ | sort -h : Muestra los directorios del directorio actual ordenados por tama\u00f1o (en formato humano) indicando su tama\u00f1o. cat fichero.txt | awk '{print $5}' : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | cut -d' ' -f5 : Imprime la quinta columna (separando por espacios) de cada linea del fichero. cat fichero.txt | sed -e 's/ /\\n/g' : Sustituye todos los espacios del fichero por retornos de carro. netstat -nr : Tabla de rutas del sistema. netstat -ntu|grep :80|wc -l : n\u00famero de conexiones al servidor HTTP. netstat -ntu|grep :21|wc -l : n\u00famero de conexiones al servidor FTP. netstat -tulanp : Lista los puertos TCP/UDP abiertos (tanto de servidores como de clientes). netstat -tlnp : Lista los puertos TCP abiertos de los servicios. crontab -e : A\u00f1adir un job a cron. sudo badblocks /dev/sda > badblocks.txt; sudo fsck -l badblocks.txt /dev/sda : Bloqueo de sectores defectuosos del disco duro ( fuente ). sudo blkid : Lista los dispositivos de bloques (discos) disponibles en el sistema. sudo nmap -sP 192.168.1.0/24 : Descubrir todos los equipos presentes en la red 192.168.1.0 . sudo netstat -lp --inet : Puertos de red abiertos y procesos asociados. sudo dd if=/dev/zero of=/dev/mmcblk0 : Formateo de una tarjeta de memoria (en realidad vale para cualquier dispositivo de almacenamiento). sudo tcpdump -s 0 -i ppp0 -w trafico.pcap : Captura de tr\u00e1fico por el interfaz ppp0. iptables -L -n : Listar reglas iptables. wget -q -O - url : Hace la request de la URL sin emitir trazas (-q = no verbose) y redireccionando la response a la salida est\u00e1ndar (-O -). route -n : Muestra la tabla de rutas con IP's en lugar de con nombres. cat /etc/resolv.conf : Muestra el gateway en uso. ldd <binario> : Indica las librer\u00edas que usa el binario. exiftool -AllDates='2010:08:08 15:35:33' -overwrite_original photo.jpg : Actualiza todas las fechas dentro de la metainformaci\u00f3n de un JPG. exiftool -all= photo.jpg : Borrar toda la metainformaci\u00f3n de una foto (por cuestiones de privacidad antes de subirla a un sitio por ejemplo). mplayer -vo caca MovieName.avi : Reproduce un v\u00eddeo en consola con ascii. Para verlo en blanco y negro sustituir caca por aa . sudo traceroute -4T -p 22 192.168.1.203 : Comprobar la traza hasta alcanzar un determinado puerto en una determinada m\u00e1quina. dig @8.8.8.8 -t any eduardofilo.es : Query DNS de los registros de cualquier tipo a trav\u00e9s del servidor 8.8.8.8 al dominio eduardofilo.es . Gesti\u00f3n de usuarios: sudo adduser userName : A\u00f1ade usuario creando home. sudo usermod -a -G groupName userName : A\u00f1ade el usuario userName ya existente al grupo groupName ya existente. sudo userdel -r userName : Borra el usuario eliminando su home. sudo stat /proc/1/exe : Nos da pistas de si el sistema funciona sobre SysV, Upstart o Systemd ( fuente ).","title":"Comandos \u00fatiles"},{"location":"sistemas/unix.html#alias-ssh","text":"Para asimilar un identificador a una pareja user@host, editar el fichero ~/.ssh/config y a\u00f1adir un bloque como el siguiente ( fuente ): 1 2 3 Host example HostName example.com User exampleuser","title":"Alias SSH"},{"location":"sistemas/unix.html#tunel-de-un-puerto-remoto-por-ssh","text":"( Fuente ) Para conducir el tr\u00e1fico hasta un host:puerto remoto canaliz\u00e1ndolo por un tunel seguro, se puede utilizar el comando ssh . Por ejemplo, vamos a tunelizar una conexi\u00f3n contra el puerto telnet de la m\u00e1quina remota telnet.example.com por medio del usuario ssh-user para tenerlo disponible en el puerto 2000 local de nuestra m\u00e1quina: 1 ssh -f ssh-user@telnet.example.com -L 2000:telnet.example.com:23 -N A partir de ahora podremos conectarnos al telnet conectando con localhost:2000 .","title":"Tunel de un puerto remoto por SSH"},{"location":"sistemas/unix.html#uso-basico-de-screen","text":"En esta cheat sheet se re\u00fanen bastantes comandos \u00fatiles. A continuaci\u00f3n indico el uso t\u00edpico: Arrancamos una sesi\u00f3n: 1 shell ~$ screen Aparece una splashscreen que cerramos pulsando enter y ya podemos trabajar Lanzamos un comando: 1 screenshell_1 ~$ top Para cerrar la sesi\u00f3n screen que acabamos de abrir, tan s\u00f3lo hay que lanzar el comando exit (en este ejemplo, parando previamente el comando top que hab\u00edamos lanzado). Ahora sin embargo pretendemos dejarla abierta, con el comando top en ejecuci\u00f3n, para volver a ella m\u00e1s adelante. Es lo que se llama un detach (sirve para recordar la tecla que se pulsa al final de la combinaci\u00f3n de teclas). Para ello pulsamos la combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"d\" Habremos vuelto a nuestro bash inicial. Cuando en cualquier momento queramos recuperar la sesi\u00f3n screen, lo haremos con el comando: 1 shell ~$ screen -r Ahora estaremos viendo de nuevo la salida del comando top que hab\u00edamos dejado arrancado dentro de la sesi\u00f3n screen. Volvemos a abandonar la sesi\u00f3n sin cerrarla procediendo por tanto como en el paso 4: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial, vamos a abrir una segunda sesi\u00f3n screen para ver c\u00f3mo podemos movernos a una u a otra. Arrancamos la sesi\u00f3n como hicimos con la primera: 1 shell ~$ screen Cerramos la splashscreen y ejecutamos alg\u00fan comando para reconocer la sesi\u00f3n cuando volvamos a ella. Por ejemplo: 1 screenshell_2 ~$ ping 8.8.8.8 Abandonamos la sesi\u00f3n dej\u00e1ndola abierta: 1 \"Ctrl-a\" \"d\" De vuelta al bash inicial ahora tenemos dos sesiones screen lanzadas. Ahora el comando screen -r no se puede lanzar sin especificar el identificador de la sesi\u00f3n tras la opci\u00f3n -r . Obtenemos la lista de sesiones con el siguiente comando: 1 2 3 4 5 shell ~$ screen -list There are screens on: 12629.pts-7.eduardo-HP-Folio-13 (04/04/15 13:55:03) (Detached) 12609.pts-7.eduardo-HP-Folio-13 (04/04/15 13:54:51) (Detached) 2 Sockets in /var/run/screen/S-edumoreno. Ahora, para recuperar una de ella, por ejemplo la m\u00e1s vieja que conten\u00eda lanzado el comando top incorporaremos el identificador de la sesi\u00f3n tras la opci\u00f3n -r : 1 shell ~$ screen -r 12609.pts-7.eduardo-HP-Folio-13 Como se comentaba en el punto 4, para cerrar las sesiones simplemente saldremos con exit , aunque tambi\u00e9n, y sobre todo en caso de que la sesi\u00f3n se quedara bloqueada con alg\u00fan comando que no se pudiera cerrar, se puede matar la sesi\u00f3n con la siguiente combinaci\u00f3n de teclas: 1 \"Ctrl-a\" \"k\"","title":"Uso b\u00e1sico de screen"},{"location":"sistemas/unix.html#buqueda-de-ficheros-que-contienen-una-cadena","text":"1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash SAVEIFS = $IFS IFS = $( echo -en \"\\n\\b\" ) for file in ` find . ` do fgrep \"[cadena a buscar]\" $file > /dev/null 2 > & 1 if [ $? -eq 0 ] ; then echo $file fi done IFS = $SAVEIFS En realidad el script anterior hace lo mismo que el simple comando siguiente: 1 $ fgrep -rl \"[cadena a buscar]\" .","title":"B\u00faqueda de ficheros que contienen una cadena"},{"location":"sistemas/unix.html#ajustes-de-permisos-a-ficheros-y-directorios-por-separado","text":"1 2 3 4 $ #Para los ficheros: $ find . ! -type d -exec chmod 664 {} \\; $ #Para los directorios: $ find . -type d -exec chmod 775 {} \\;","title":"Ajustes de permisos a ficheros y directorios por separado"},{"location":"sistemas/unix.html#renombrado-de-ficheros-de-mayusculas-a-minusculas","text":"( Fuente ) 1 2 3 4 5 #!/bin/sh for f in * ; do g = ` expr \"xxx $f \" : 'xxx\\(.*\\)' | tr '[A-Z]' '[a-z]' ` mv \" $f \" \" $g \" done","title":"Renombrado de ficheros de may\u00fasculas a min\u00fasculas"},{"location":"sistemas/unix.html#redireccion-de-salidas","text":"Para redirigir ambas salidas de un programa (estandar y error) hacer lo siguiente: 1 $ COMANDO > FICHERO_O_DISPOSITIVO 2 > & 1 En esta p\u00e1gina se documenta con m\u00e1s detalle este tema.","title":"Redirecci\u00f3n de salidas"},{"location":"sistemas/unix.html#ejecucion-remota-de-aplicaciones-xwindow","text":"Abrir el servidor X (Cygwin) Iniciar sesi\u00f3n remota: ssh -X [usuario]@[m\u00e1quina] Ejecutar la aplicaci\u00f3n","title":"Ejecuci\u00f3n remota de aplicaciones XWindow"},{"location":"sistemas/unix.html#mysql","text":"Acceso: mysql -u root -p Listar bases de datos: show databases; Abrir una base de datos: use [NombreBBDD]; Listar tablas: show tables;","title":"MySQL"},{"location":"sistemas/unix.html#ficheros-de-configuracion-importantes","text":"/etc/security/limits.conf : Configuration file for the pam_limits module. Permite limitar el n\u00famero de ficheros abiertos por el sistema, el n\u00famero de procesos, etc.","title":"Ficheros de configuraci\u00f3n importantes"},{"location":"sistemas/unix.html#solucion-al-problema-de-los-alias-alternatives-de-java6-en-ubuntu","text":"Los paquetes de Java 6 (1.6) en Ubuntu tienen problemas a la hora de ajustar los alias en /etc/alternatives cuando antes ha estado instalada otra versi\u00f3n (1.5 por ejemplo). Se puede forzar la generaci\u00f3n de los alias mediante las siguientes ordenes: 1 2 $ update-java-alternatives --list $ sudo update-java-alternatives --set [ elegir el identificador de la lista que muestra el comando anterior ]","title":"Soluci\u00f3n al problema de los alias (alternatives) de Java6 en Ubuntu"},{"location":"sistemas/unix.html#bits-suid-sgid-y-sticky","text":"Manual de LuCAS","title":"Bits SUID, SGID y sticky"},{"location":"sistemas/unix.html#autentificacion-automatica-por-ssh","text":"Conseguiremos que la autentificaci\u00f3n del cliente se haga por medio de una pareja de claves privada/p\u00fablica en lugar de con identificador de usuario/password. Primero generamos la pareja de claves p\u00fablica-privada ejecutando en el cliente ssh-keygen : 1 2 3 4 5 6 7 8 9 $ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key ( /home/user/.ssh/id_rsa ) : Enter passphrase ( empty for no passphrase ) : Enter same passphrase again: Your identification has been saved in /home/user/.ssh/id_rsa. Your public key has been saved in /home/user/.ssh/id_rsa.pub. The key fingerprint is: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx user@machine Las claves se almacenan por defecto en ~/.ssh/ , quedando el directorio as\u00ed: 1 2 3 4 5 $ ls -l total 12 -rw------- 1 user user 883 2005 -08-13 14 :16 id_rsa -rw-r--r-- 1 user user 223 2005 -08-13 14 :16 id_rsa.pub -rw-r--r-- 1 user user 1344 2005 -08-04 02 :14 known_hosts Los ficheros id_rsa e id_rsa.pub contienen respectivamente las claves privada y p\u00fablica. El fichero known_hosts contiene la lista de las claves p\u00fablicas de las m\u00e1quinas reconocidas. Ahora se debe copiar la clave p\u00fablica al servidor, al fichero ~/.ssh/authorized_keys . Para ello se utiliza el comando ssh-copy-id: 1 2 $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine1 $ ssh-copy-id -i ~/.ssh/id_rsa.pub user@machine2 ssh-copy-id es un script que se conecta a la m\u00e1quina y copia el archivo (indicado por la opci\u00f3n -i ) en ~/.ssh/authorized_keys , y ajusta los permisos a los valores adecuados. Si no se dispone del programa ssh-copy-id se puede realizar una copia manual a la m\u00e1quina remota del fichero conteniendo la clave p\u00fablica (por ejemplo usando scp o sftp ) y a\u00f1adir su contenido al fichero ~/.ssh/authorized_keys . Ahora la conexi\u00f3n deber\u00eda funcionar sin necesidad de introducir la clave. Si no es as\u00ed es posible que sea un problema de permisos en los ficheros. Los permisos correctos deben ser similares a estos: 1 2 $ chmod go-w ~ ~/.ssh $ chmod 600 ~/.ssh/authorized_keys La conexi\u00f3n SSH se realizar\u00e1 indicando el fichero con la clave privada como argumento de la siguiente forma: 1 $ ssh -i ~/.ssh/id_rsa user@machine (Si el nombre del fichero con la clave privada es precisamente el del ejemplo, es decir id_rsa , creo que no es necesario indicarlo con la opci\u00f3n -i ).","title":"Autentificaci\u00f3n autom\u00e1tica por SSH"},{"location":"sistemas/unix.html#configuracion-de-firefox-para-ejecucion-de-applets-java","text":"( Fuente ) Vaya al subdirectorio de complementos, situado dentro del directorio de instalaci\u00f3n de Mozilla. 1 $ cd ` <directorio de instalaci\u00f3n de Mozilla> ` /plugins # Normalmente /usr/lib/firefox/plugins o 1 $ cd ` <home del usuario> ` /.mozilla/plugins En el directorio actual, cree un v\u00ednculo simb\u00f3lico al archivo del JRE ns7/libjavaplugin_oji.so. Escriba: 1 $ ln -s ` <directorio de instalaci\u00f3n del JRE> ` /plugin/i386/ns7/libjavaplugin_oji.so Inicie el navegador Mozilla o rein\u00edcielo si ya se estaba ejecutando. Tenga en cuenta que, si se est\u00e1 ejecutando alg\u00fan otro componente de Mozilla (como Messenger, Composer, etc.) deber\u00e1 tambi\u00e9n reiniciarlo. Vaya a Editar > Preferencias. En la categor\u00eda Avanzadas, seleccione Activar Java.","title":"Configuraci\u00f3n de Firefox para ejecuci\u00f3n de applets Java"},{"location":"sistemas/unix.html#organizacion-de-menus-cuando-se-mezclan-aplicaciones-kde-y-gnome","text":"GNU/Linux nos permite tener varios sistemas de escritorio diferentes instalados y funcionando, pero inevitablemente nos encontramos con una mezcla de opciones y programas de cada entorno en los men\u00fas principales. Existen aplicaciones precisamente para limpiar autom\u00e1ticamente las entradas del men\u00fa que no corresponden a tu sistema de escritorio habitual, y dejarlas apartadas y ordenadas de alguna manera. Con Gnome y KDE instalados a la vez, hay dos programas para aquellos Gnomeros que han querido probar KDE y para los KDEeros que han querido probar Gnome. Gnome Menu Extended es el propio men\u00fa normal de Gnome, pero incluye una carpeta donde se guardan todas las aplicaciones y opciones de KDE. Se instala f\u00e1cilmente descargando el paquete para cualquier distribuci\u00f3n: Debian (y Ubuntu), Slackware o directamente el c\u00f3digo fuente para compilarlo. Una vez instalado, se activa yendo a Preferencias -> Add KDE Menu. Y si quieres recuperar el men\u00fa como estaba, tambi\u00e9n tiene la opci\u00f3n de restaurarlo. K Menu Gnome es un men\u00fa exactamente igual que el KMenu original, pero incluye una carpeta donde residen todas las aplicaciones de Gnome, en sistemas que tienen ambos escritorios instalados. Est\u00e1 disponible para Debian (y Ubuntu), Slackware, Fedora y el c\u00f3digo fuente para compilarlo en cualquier sistema.","title":"Organizaci\u00f3n de men\u00fas cuando se mezclan aplicaciones KDE y Gnome"},{"location":"sistemas/unix.html#error-error-while-loading-shared-libraries","text":"Runtime error. The linker hasn't found your libraries. Either they are not installed properly or the linker doesn't know where they are (most probably in /usr/local/lib ). To get your linker to update its list of libraries type: 1 $ ldconfig /usr/local/lib or as a temporary measure: 1 $ export LD_LIBRARY_PATH = \"/usr/local/lib\"","title":"Error \"error while loading shared libraries: ...\""},{"location":"sistemas/unix.html#compartir-ficheros-con-samba","text":"Aparte de instalar y configurar Samba (fichero /etc/samba/smb.conf ) hay que dar de alta los usuarios UNIX que se usar\u00e1n a trav\u00e9s de Samba y asignarles un password para el acceso por el mismo. Esto se hace con el comando: 1 $ sudo smbpasswd -a usuario","title":"Compartir ficheros con Samba"},{"location":"sistemas/unix.html#migracion-masiva-de-usuarios","text":"( Fuente ) Para los casos en los que sea necesario replicar los usuarios de un servidor Linux a otro o en los que se vaya a migrar a un servidor con m\u00e1s recursos, el siguiente procedimiento puede ser de utilidad. Los escenarios son varios, desde los servidores que ejecutan alg\u00fan tipo de base de datos, los que tienen ciertas aplicaciones, los que alojan p\u00e1ginas Web, etc\u00e9tera. Para fines de la demostraci\u00f3n pensaremos que el servidor est\u00e1 dedicado como servidor de archivos, mismos que se almacenan en el home de cada uno de los usuarios. NOTA: El presente procedimiento da por hecho que se hayan realizado las configuraciones necesarias en el nuevo servidor. Primero, lo que debe respaldarse es la lista de usuarios con su respectiva contrase\u00f1a. El archivo /etc/passwd contiene las cuentas de los usuarios en el sistema bajo el siguiente formato de ejemplo: 1 2 3 4 5 6 7 8 root : x : 0 : 0 : root :/ root :/ bin / bash bin : x : 1 : 1 : bin :/ bin :/ sbin / nologin daemon : x : 2 : 2 : daemon :/ sbin :/ sbin / nologin adm : x : 3 : 4 : adm :/ var /adm:/sbin/ nologin nitsuga : x : 500 : 500 ::/ home /nitsuga:/bin/ bash nitsuga2 : x : 501 : 501 ::/ home /nitsuga2:/bin/ bash nitsuga3 : x : 502 : 502 ::/ home /nitsuga3:/bin/ bash Como se observa, el segundo campo respectivo al hash de la contrase\u00f1a no se muestra. La contrase\u00f1a se encuentra en el archivo /etc/shadow 1 2 3 4 5 6 7 8 root:$1$/7zmwgAa$Jd5ja7nsC4nTm O3s0.Z1j1:13445:0:99999:7::: bin:*:13445:0:99999:7::: daemon:*:13445:0:99999:7::: adm:*:13445:0:99999:7::: nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:13498:2:1:1::: nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:13496:2:45:7::: Se proceder\u00e1 a unir el usuario con su contrase\u00f1a utilizando el comando pwunconv para \u201cdesactivar\u201d el shadow, quedando as\u00ed las contrase\u00f1as en el archivo passwd. 1 2 3 4 5 6 7 8 9 10 root:$1$/7zmwgAa$Jd5ja7nsC4n TmO3s0.Z1j1:0:0:root:/root:/bin/bash bin:*:1:1:bin:/bin:/sbin/nologin daemon:*:2:2:daemon:/sbin:/sbin/ nologin adm:*:3:4:adm:/var/adm:/sbin/nologin nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/ nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga3:/bin/bash","title":"Migraci\u00f3n masiva de usuarios"},{"location":"sistemas/unix.html#depuracion-de-etcpasswd","text":"Se copiar\u00e1 el archivo /etc/passwd a uno de trabajo /etc/passwd.migracion . Ahora se editar\u00e1 el archivo y se quitar\u00e1n todos los usuarios propios del sistema (root, usuarios de demonios, etc\u00e9tera) dejando s\u00f3lo los usuarios que van a ser autenticados. 1 2 3 nitsuga:$1$QwPqN0Vc$dn9OIyE3HQUh5W4Yh/.aQ.:500:500::/home/nitsuga:/bin/bash nitsuga2:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:501:501::/home/nitsuga2:/bin/bash nitsuga3:$1$635CQht0$rFIbilzKqfc1zStqeOwlk/:502:502::/home/nitsuga2:/bin/bash Tambi\u00e9n se copiar\u00e1 el archivo /etc/group a /etc/group.migracion 1 2 3 4 5 6 7 8 9 root : x : 0 : root bin : x : 1 : root , bin , daemon daemon : x : 2 : root , bin , daemon sys : x : 3 : root , bin , adm adm : x : 4 : root , adm , daemon nitsuga : x : 500 : nitsuga2 : x : 501 : nitsuga3 : x : 502 : nitsuga8 : x : 507 : Y se editar\u00e1 para dejar s\u00f3lo los grupos de los usuarios: 1 2 3 nitsuga : x : 500 : nitsuga2 : x : 501 : nitsuga3 : x : 502 : Ahora se respaldar\u00e1 el home de los usuarios, suponiendo que se encuentra bajo el directorio/home, se har\u00e1 lo siguiente desde ra\u00edz (/): 1 [root@localhost /]# tar -cpzvf home.tgz home/ En el que las banderas: c = crea el archivo p = preserva los permisos z = comprime el archivo .tar generado v = da salida detallada f = especifica el archivo a crear (para este caso home.tgz) Ahora bien, se realizar\u00e1 la transferencia de los archivos home.tgz, passwd.migracion y group.migracion al nuevo servidor: 1 2 3 4 5 [root@localhost /]# scp /home.tgz root@nuevoservidor [root@localhost /]# scp /etc/passwd.migracion root@nuevoservidor [root@localhost /]# scp /etc/group.migracion root@nuevoservidor Una vez en el nuevo servidor se deber\u00e1 verificar que no se repitan tanto los UID como los GID entre los dos servidores. Se realizar\u00e1: 1 2 3 4 5 [root@localhost /]# cp \u2013p home.tgz / ; tar \u2013zxvf home.tgz [root@localhost /]# cp \u2013p passwd.migracion /etc ; pwunconv ; cat passwd.migracion >> passwd; pwconv [root@localhost /]# cp \u2013p group.migracion /etc ; cat group.migracion >> group","title":"Depuraci\u00f3n de /etc/passwd"},{"location":"sistemas/unix.html#eliminar-peticion-password-en-sudo","text":"Es necesario reconfigurar el fichero /etc/sudoers para que no se solicite el password del usuario a la hora de hacer sudo, dado que necesitamos que se haga sudo desde un proceso que no tendr\u00e1 interacci\u00f3n con el usuario. Para conseguir esto hay que hacer dos cosas: Incorporar el usuario que nos interesa al grupo sudo del sistema Situar al final del fichero de configuraci\u00f3n /etc/sudoers lo siguiente: 1 %sudo ALL = NOPASSWD : ALL Hay que fijarse que la linea anterior normalmente ya aparece en el fichero pero comentada con una almohadilla. Se puede aprovechar la linea quitando el car\u00e1cter almohadilla del principio, pero hay que tener en cuenta que no es suficiente con eso. Hay que mover la linea al final del fichero ya que las lineas siguientes pueden sobreescribir su efecto. Importante : La edici\u00f3n del fichero /etc/sudoers s\u00f3lo se puede hacer con el comando visudo . Este comando hay que lanzarlo con sudo a su vez, por lo que se har\u00e1 de la siguiente forma: 1 $ sudo visudo","title":"Eliminar petici\u00f3n password en sudo"},{"location":"sistemas/unix.html#proxy-http-en-consola","text":"Setting up proxy at Firefox do not have effects at console, which means your wget, ssh, apt-get, yum etc do not access through the proxy you set at Firfox browser. To setup http proxy at console, you can do as bellow, assume the proxy IP is 219.93.2.113 and port 3128: 1 $ export http_proxy = 'http://219.93.2.113:3128/' Remember, you have to specified http://, and to know more about export, check out HERE. To clear your http proxy and use back yours, do this: 1 $ export http_proxy = ''","title":"Proxy HTTP en consola"},{"location":"sistemas/unix.html#convertir-nombres-de-ficheros-de-iso-a-utf-8","text":"Al migrar una web, o al copiar un sistema de archivos, te puedes encontrar con nombres de ficheros en otras codificaciones de caracteres. Mediante el siguiente comando transformar\u00edamos los nombres de ficheros desde ISO-8869-1 a UTF-8: 1 $ convmv -r -f ISO-8859-1 -t UTF-8 --notest *","title":"Convertir nombres de ficheros de ISO a UTF-8"},{"location":"sistemas/unix.html#backup-de-un-filesystem","text":"Backup: 1 $ dd if = /dev/hdx | gzip > /path/to/image.gz Restauraci\u00f3n: 1 $ gzip -dc /path/to/image.gz | dd of = /dev/hdx","title":"Backup de un FileSystem"},{"location":"sistemas/unix.html#montar-un-fichero-img","text":"( Fuente ). Primero hay que averiguar el offset de la partici\u00f3n que queremos montar: 1 fdisk -l /ruta/fichero.img Esto nos mostrar\u00e1 el tama\u00f1o del bloque y el bloque de comienzo de la partici\u00f3n. Por ejemplo: 1 2 3 4 5 6 7 8 9 10 11 edumoreno@eduardo-HP-Folio-13:~/Descargas$ fdisk -l RetroPie.img Disk RetroPie.img: 3,7 GiB, 3965190144 bytes, 7744512 sectors Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disklabel type: dos Disk identifier: 0xb847d94e Disposit. Inicio Start Final Sectores Size Id Tipo RetroPie.img1 * 8192 124927 116736 57M e W95 FAT16 (LBA) RetroPie.img2 124928 7744511 7619584 3,6G 83 Linux El offset se calcular\u00e1 multiplicando el bloque de comienzo por el tama\u00f1o de bloque. En el ejemplo, para la segunda partici\u00f3n: offset = 124928 * 512 = 63963136 Por tanto el comando para montar ser\u00e1: 1 sudo mount -o loop,offset=63963136 RetroPie.img /mnt/tmp","title":"Montar un fichero .img"},{"location":"sistemas/unix.html#manipulacion-de-pdfs","text":"Divisi\u00f3n en m\u00faltiples ficheros (uno por p\u00e1gina): 1 $ pdftk largepdfile.pdf burst Fusi\u00f3n de varios ficheros en uno: 1 $ pdftk *.pdf cat output onelargepdfile.pdf","title":"Manipulaci\u00f3n de PDFs"},{"location":"sistemas/unix.html#obtener-hash-md5-de-una-cadena","text":"1 $ echo -n \"<cadena>\" | md5sum","title":"Obtener hash MD5 de una cadena"},{"location":"sistemas/unix.html#system-mysql-backup-script","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 #!/bin/bash # System + MySQL backup script # Full backup day - Sun (rest of the day do incremental backup) # Copyright (c) 2005-2006 nixCraft `<http://www.cyberciti.biz/fb/>` # This script is licensed under GNU GPL version 2.0 or above # Automatically generated by http://bash.cyberciti.biz/backup/wizard-ftp-script.php # --------------------------------------------------------------------- ### System Setup ### DIRS = \"/var/spool/sms /var/log/smstools /root\" BACKUP = /tmp/backup. $$ NOW = $( date + \"%d-%m-%Y\" ) INCFILE = \"/var/tar-inc-backup.dat\" DAY = $( date + \"%a\" ) # echo $DAY >> /root/dates FULLBACKUP = \"Sun\" ### MySQL Setup ### MUSER = \"mysqluser\" MPASS = \"mysqlpwd\" MHOST = \"localhost\" MYSQL = \" $( which mysql ) \" MYSQLDUMP = \" $( which mysqldump ) \" GZIP = \" $( which gzip ) \" ### FTP server Setup ### FTPD = \"//incremental\" FTPU = \"ftpuser\" FTPP = \"ftppwd\" FTPS = \"ftphost\" NCFTP = \" $( which ncftpput ) \" ### Other stuff ### EMAILID = \"user@domain.com\" ### Start Backup for file system ### [ ! -d $BACKUP ] && mkdir -p $BACKUP || : ### See if we want to make a full backup ### if [ \" $DAY \" == \" $FULLBACKUP \" ] ; then FTPD = \"//full\" FILE = \"fs-full- $NOW .tar.gz\" tar -zcvf $BACKUP / $FILE $DIRS else i = $( date + \"%Hh%Mm%Ss\" ) FILE = \"fs-i- $NOW - $i .tar.gz\" tar -g $INCFILE -zcvf $BACKUP / $FILE $DIRS fi ### Start MySQL Backup ### # Get all databases name DBS = \" $( $MYSQL -u $MUSER -h $MHOST -p $MPASS -Bse 'show databases' ) \" for db in $DBS do FILE = $BACKUP /mysql- $db . $NOW - $( date + \"%T\" ) .gz $MYSQLDUMP -u $MUSER -h $MHOST -p $MPASS $db | $GZIP -9 > $FILE done ### Dump backup using FTP ### #Start FTP backup using ncftp ncftp -u \" $FTPU \" -p \" $FTPP \" $FTPS <<EOF mkdir $FTPD mkdir $FTPD/$NOW cd $FTPD/$NOW lcd $BACKUP mput * quit EOF ### Find out if ftp backup failed or not ### if [ \" $? \" == \"0\" ] ; then rm -f $BACKUP /* else T = /tmp/backup.fail echo \"Date: $( date ) \" > $T echo \"Hostname: $( hostname ) \" >> $T echo \"Backup failed\" >> $T mail -s \"BACKUP FAILED\" \" $EMAILID \" < $T rm -f $T fi","title":"System + MySQL backup script"},{"location":"sistemas/unix.html#recuperacion-de-pendrive-o-tarjeta-de-memoria-corrupta","text":"Con TestDisk/Photorec.","title":"Recuperaci\u00f3n de pendrive o tarjeta de memoria corrupta"},{"location":"sistemas/unix.html#enlaces","text":"TestDisk Paso A Paso How to Recover Data from Corrupt / formatted USB Flash using Photorec","title":"Enlaces"},{"location":"sistemas/unix.html#instalaciondesinstalacion-de-scripts-sysvupstart","text":"Los scripts del serivicio deber\u00e1n tener una cabecera especial que indique c\u00f3mo deben comportarse en cada nivel de ejecuci\u00f3n. Por ejemplo \u00e9ste es el que tiene MySQL: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/bin/bash # ### BEGIN INIT INFO # Provides: mysql # Required-Start: $remote_fs $syslog # Required-Stop: $remote_fs $syslog # Should-Start: $network $time # Should-Stop: $network $time # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Start and stop the mysql database server daemon # Description: Controls the main MySQL database server daemon \"mysqld\" # and its wrapper script \"mysqld_safe\". ### END INIT INFO # Instalar: sudo update-rc.d SERVICE defaults Desinstalar: sudo update-rc.d -f SERVICE remove","title":"Instalaci\u00f3n/desinstalaci\u00f3n de scripts SysV/Upstart"},{"location":"sistemas/unix.html#gestion-de-servicios-systemd","text":"systemctl start SERVICE - Use it to start a service. Does not persist after reboot systemctl stop SERVICE - Use it to stop a service. Does not persist after reboot systemctl restart SERVICE - Use it to restart a service systemctl reload SERVICE - If the service supports it, it will reload the config files related to it without interrupting any process that is using the service. systemctl status SERVICE - Shows the status of a service. Tells whether a service is currently running. systemctl enable SERVICE - Turns the service on, on the next reboot or on the next start event. It persists after reboot. systemctl disable SERVICE - Turns the service off on the next reboot or on the next stop event. It persists after reboot. systemctl is-enabled SERVICE - Check if a service is currently configured to start or not on the next reboot. systemctl is-active SERVICE - Check if a service is currently active. systemctl show SERVICE - Show all the information about the service. systemctl mask SERVICE - Completely disable a service by linking it to /dev/null ; you cannot start the service manually or enable the service. systemctl unmask SERVICE - Removes the link to /dev/null and restores the ability to enable and or manually start the service.","title":"Gesti\u00f3n de servicios Systemd"},{"location":"sistemas/unix.html#montaje-de-carpeta-compartida-samba-en-etcfstab","text":"Crear un fichero /home/usuario/.smbcredentials con el siguiente contenido: 1 2 user=usuario password=password A\u00f1adir la siguiente l\u00ednea a /etc/fstab : 1 192.168.1.100/carpeta_compartida /home/usuario/punto_montaje cifs uid=usuario,gid=usuario,credentials=/home/usuario/.smbcredentials,iocharset=utf8,sec=ntlmv2,file_mode=0664,dir_mode=0775 0 0","title":"Montaje de carpeta compartida samba en /etc/fstab"},{"location":"sistemas/zx-spectrum.html","text":"ZX Spectrum \u00b6 Enlaces \u00b6 Amplificador sonido entrada EAR Loading ZX Spectrum tape audio in a post-cassette world Componentes / Repuestos \u00b6 M\u00f3dulo de memoria baja Regulador de conmutaci\u00f3n Traco Power, entrada 6.5 \u2192 36V dc, Salida 5V, 1A, 5W","title":"ZX Spectrum"},{"location":"sistemas/zx-spectrum.html#zx-spectrum","text":"","title":"ZX Spectrum"},{"location":"sistemas/zx-spectrum.html#enlaces","text":"Amplificador sonido entrada EAR Loading ZX Spectrum tape audio in a post-cassette world","title":"Enlaces"},{"location":"sistemas/zx-spectrum.html#componentes-repuestos","text":"M\u00f3dulo de memoria baja Regulador de conmutaci\u00f3n Traco Power, entrada 6.5 \u2192 36V dc, Salida 5V, 1A, 5W","title":"Componentes / Repuestos"},{"location":"sistemas/zx-uno.html","text":"ZX-Uno \u00b6 Enlaces \u00b6 ZX-Uno [Clon de ordenador ZX Spectrum basado en FPGA] Verkami: ZX-UNO Verkami: ZX-box ZX-Uno case, a Sinclair ZX Spectrum clone : Carcasa de Mejias3D para ZX-Uno oficial. ZX-Uno FAQ by @uto_dev INSTRUCCIONES PARA ACTUALIZAR LOS ZX-UNO DEL CROWDFUNDING CON ROMS DE SPECTRUM I am newbie. Where to start? / Soy novato, \u00bfpor d\u00f3nde empezar? Manual de esxDOS: Parte 1 y Parte 2 ZX-Uno FAQ ZX-Uno Wiki : Contiene el diagrama de bloques del sistema, la lista de registros, descripci\u00f3n de los modos gr\u00e1ficos disponibles, etc. Sinclair FAQ Wiki ZX-UNO (XL) ISSUE2 : Versi\u00f3n de ZX-Uno para integrar en carcasa de Spectrum original. RetroRadionics : Carcasas y repuestos para Spectrum original. Comandos \u00b6 NMI - EsxDOS: Ctrl-Alt-F5 Soft Reset: Ctrl-Alt-Supr Hard Reset: Ctrl-Alt-Del Configuraci\u00f3n: Hard Reset + F2 (Edit) Cambio de Core durante arranque: Caps Lock Cambio de modo de v\u00eddeo: Scroll Lock Huevo de pascua: Pulsar : (o SYMBOL SHIFT+Z) durante los 2 primeros segundos tras el arranque o tras hacer master reset (Ctrl-Alt-BkSpace).","title":"ZX-Uno"},{"location":"sistemas/zx-uno.html#zx-uno","text":"","title":"ZX-Uno"},{"location":"sistemas/zx-uno.html#enlaces","text":"ZX-Uno [Clon de ordenador ZX Spectrum basado en FPGA] Verkami: ZX-UNO Verkami: ZX-box ZX-Uno case, a Sinclair ZX Spectrum clone : Carcasa de Mejias3D para ZX-Uno oficial. ZX-Uno FAQ by @uto_dev INSTRUCCIONES PARA ACTUALIZAR LOS ZX-UNO DEL CROWDFUNDING CON ROMS DE SPECTRUM I am newbie. Where to start? / Soy novato, \u00bfpor d\u00f3nde empezar? Manual de esxDOS: Parte 1 y Parte 2 ZX-Uno FAQ ZX-Uno Wiki : Contiene el diagrama de bloques del sistema, la lista de registros, descripci\u00f3n de los modos gr\u00e1ficos disponibles, etc. Sinclair FAQ Wiki ZX-UNO (XL) ISSUE2 : Versi\u00f3n de ZX-Uno para integrar en carcasa de Spectrum original. RetroRadionics : Carcasas y repuestos para Spectrum original.","title":"Enlaces"},{"location":"sistemas/zx-uno.html#comandos","text":"NMI - EsxDOS: Ctrl-Alt-F5 Soft Reset: Ctrl-Alt-Supr Hard Reset: Ctrl-Alt-Del Configuraci\u00f3n: Hard Reset + F2 (Edit) Cambio de Core durante arranque: Caps Lock Cambio de modo de v\u00eddeo: Scroll Lock Huevo de pascua: Pulsar : (o SYMBOL SHIFT+Z) durante los 2 primeros segundos tras el arranque o tras hacer master reset (Ctrl-Alt-BkSpace).","title":"Comandos"},{"location":"varios/bici.html","text":"Bicicleta \u00b6 Brompton \u00b6 Enlaces \u00b6 Lubricaci\u00f3n Hub BWR-3 \u00b6 Servicing Sturmey-Archer 3-Speed Hubs Brompton Sturmey Archer Internal Gear Hub Re-grease Maintenance - V\u00eddeo","title":"Bicicleta"},{"location":"varios/bici.html#bicicleta","text":"","title":"Bicicleta"},{"location":"varios/bici.html#brompton","text":"","title":"Brompton"},{"location":"varios/bici.html#enlaces","text":"Lubricaci\u00f3n","title":"Enlaces"},{"location":"varios/bici.html#hub-bwr-3","text":"Servicing Sturmey-Archer 3-Speed Hubs Brompton Sturmey Archer Internal Gear Hub Re-grease Maintenance - V\u00eddeo","title":"Hub BWR-3"},{"location":"varios/corsa_d.html","text":"Corsa D \u00b6 Reset de mensaje InSP \u00b6 ( Fuente ) Para borrar el mensaje de inspecci\u00f3n en caso de que el taller olvide hacerlo (a mi me ha sucedido una vez): Pisar y mantener el pedal del freno. Pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial para que se ilumine el mismo. Volver a pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial y mantenerlo esta vez. Dar contacto (no es necesario arrancar). Seguir manteniendo pulsado el bot\u00f3n de reset del cuentakil\u00f3metros parcial hasta que desaparezca el mensaje InSP. Men\u00fa oculto de diagn\u00f3stico \u00b6 ( Fuente ) Muestra algunas estad\u00edsticas y valores instant\u00e1neos que no se muestran en el display normalmente (como la temperatura del motor o los litros exactos que quedan de combustible): Dar contacto (no es necesario arrancar). Pulsar tres veces la tecla de reset del ordenador de a bordo o del cuentakil\u00f3metros parcial. Pulsar una cuarta vez y mantener 10 segundos la tecla anterior. Por medio de la misma tecla iremos alternando entre las siguientes visualizaciones en pantalla: Versi\u00f3n del modelo y fecha de fabricaci\u00f3n Versi\u00f3n del software y fecha de producci\u00f3n ??? (00 / 000072) Velocidad y revoluciones Voltaje de la bater\u00eda y ??? (24). Varios: Nivel de brillo del display Temperatura del l\u00edquido refrigerante ??? (100 / L2 129) ??? (100 / S2 337) ??? (100 / P2 353) ??? (100 / t2 463) Combustible: Nivel en litros Lecturas del sensor del dep\u00f3sito?? Consumos: Flujo Consumo instant\u00e1neo \u00daltima revisi\u00f3n (en realidad desde que se resetea el mensaje Insp ): N\u00famero de d\u00edas desde la \u00faltima revisi\u00f3n Kil\u00f3metros desde la \u00faltima revisi\u00f3n Salida Opciones ocultas \u00b6 Meter la llave pero no girarla, es decir, no dar contacto. Tirar de las dos palancas laterales (luces y lavaluneta) hacia atr\u00e1s, es decir hacia nosotros, durante 3 segundos hasta que se oiga un tono. Usar la palanca izquierda (luces) arriba y abajo para cambiar de opci\u00f3n y la palanca derecha (lavaluneta) tambi\u00e9n arriba y abajo para cambiar el valor. Las opciones disponibles son las siguientes (en mi modelo de 3 puertas no aparece la opci\u00f3n 5): P1: Luces de bienvenida: on/off. Enciende las luces delanteras cuando al abrir el coche con el mando pulsamos el bot\u00f3n de abrir una segunda vez. P2: Lavaluneta trasera autom\u00e1tico: on/off. Se enciende autom\u00e1ticamente cuando el lavaluneta delantero est\u00e1 activo y se pone la marcha atr\u00e1s. P3: Intermitentes con un toque: on/off. Para se\u00f1alizar c\u00f3modamente el cambio de carril (esta opci\u00f3n est\u00e1 activada por defecto). P4: Cierre autom\u00e1tico de puertas: on/off. Al pasar de 20 km/h aproximadamente. P5: Cierre separado de puerta de conductor: on/off. P6: Aviso al superar una velocidad determinada en el ajuste: on/off. P7: Volumen de los tonos de aviso: 1-5. Para aceptar los nuevos ajustes tirar de nuevo de ambas palancas como al principio hasta que se escuche un tono. Si no se hacen cambios durante 10 segundos se cancelar\u00e1n los ajustes. Se supone que estos ajustes se asocian a la llave con que fueron hechos. Leer los DTC (diagnostic trouble codes) \u00b6 Pisar los pedales de freno y acelerador. Dar contacto (sin arrancar). Esperar a que el s\u00edmbolo del motor se apague. A partir de ese momento empezar\u00e1 a parpadear indic\u00e1ndonos el c\u00f3digo de error. Hay que contar los parpadeos. El c\u00f3digo consta de 4 d\u00edgitos. El d\u00edgito 0 se representa con 10 parpadeos. Cambio de bombillas fundidas en el display central \u00b6","title":"Opel Corsa D"},{"location":"varios/corsa_d.html#corsa-d","text":"","title":"Corsa D"},{"location":"varios/corsa_d.html#reset-de-mensaje-insp","text":"( Fuente ) Para borrar el mensaje de inspecci\u00f3n en caso de que el taller olvide hacerlo (a mi me ha sucedido una vez): Pisar y mantener el pedal del freno. Pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial para que se ilumine el mismo. Volver a pulsar el bot\u00f3n de reset del cuentakil\u00f3metros parcial y mantenerlo esta vez. Dar contacto (no es necesario arrancar). Seguir manteniendo pulsado el bot\u00f3n de reset del cuentakil\u00f3metros parcial hasta que desaparezca el mensaje InSP.","title":"Reset de mensaje InSP"},{"location":"varios/corsa_d.html#menu-oculto-de-diagnostico","text":"( Fuente ) Muestra algunas estad\u00edsticas y valores instant\u00e1neos que no se muestran en el display normalmente (como la temperatura del motor o los litros exactos que quedan de combustible): Dar contacto (no es necesario arrancar). Pulsar tres veces la tecla de reset del ordenador de a bordo o del cuentakil\u00f3metros parcial. Pulsar una cuarta vez y mantener 10 segundos la tecla anterior. Por medio de la misma tecla iremos alternando entre las siguientes visualizaciones en pantalla: Versi\u00f3n del modelo y fecha de fabricaci\u00f3n Versi\u00f3n del software y fecha de producci\u00f3n ??? (00 / 000072) Velocidad y revoluciones Voltaje de la bater\u00eda y ??? (24). Varios: Nivel de brillo del display Temperatura del l\u00edquido refrigerante ??? (100 / L2 129) ??? (100 / S2 337) ??? (100 / P2 353) ??? (100 / t2 463) Combustible: Nivel en litros Lecturas del sensor del dep\u00f3sito?? Consumos: Flujo Consumo instant\u00e1neo \u00daltima revisi\u00f3n (en realidad desde que se resetea el mensaje Insp ): N\u00famero de d\u00edas desde la \u00faltima revisi\u00f3n Kil\u00f3metros desde la \u00faltima revisi\u00f3n Salida","title":"Men\u00fa oculto de diagn\u00f3stico"},{"location":"varios/corsa_d.html#opciones-ocultas","text":"Meter la llave pero no girarla, es decir, no dar contacto. Tirar de las dos palancas laterales (luces y lavaluneta) hacia atr\u00e1s, es decir hacia nosotros, durante 3 segundos hasta que se oiga un tono. Usar la palanca izquierda (luces) arriba y abajo para cambiar de opci\u00f3n y la palanca derecha (lavaluneta) tambi\u00e9n arriba y abajo para cambiar el valor. Las opciones disponibles son las siguientes (en mi modelo de 3 puertas no aparece la opci\u00f3n 5): P1: Luces de bienvenida: on/off. Enciende las luces delanteras cuando al abrir el coche con el mando pulsamos el bot\u00f3n de abrir una segunda vez. P2: Lavaluneta trasera autom\u00e1tico: on/off. Se enciende autom\u00e1ticamente cuando el lavaluneta delantero est\u00e1 activo y se pone la marcha atr\u00e1s. P3: Intermitentes con un toque: on/off. Para se\u00f1alizar c\u00f3modamente el cambio de carril (esta opci\u00f3n est\u00e1 activada por defecto). P4: Cierre autom\u00e1tico de puertas: on/off. Al pasar de 20 km/h aproximadamente. P5: Cierre separado de puerta de conductor: on/off. P6: Aviso al superar una velocidad determinada en el ajuste: on/off. P7: Volumen de los tonos de aviso: 1-5. Para aceptar los nuevos ajustes tirar de nuevo de ambas palancas como al principio hasta que se escuche un tono. Si no se hacen cambios durante 10 segundos se cancelar\u00e1n los ajustes. Se supone que estos ajustes se asocian a la llave con que fueron hechos.","title":"Opciones ocultas"},{"location":"varios/corsa_d.html#leer-los-dtc-diagnostic-trouble-codes","text":"Pisar los pedales de freno y acelerador. Dar contacto (sin arrancar). Esperar a que el s\u00edmbolo del motor se apague. A partir de ese momento empezar\u00e1 a parpadear indic\u00e1ndonos el c\u00f3digo de error. Hay que contar los parpadeos. El c\u00f3digo consta de 4 d\u00edgitos. El d\u00edgito 0 se representa con 10 parpadeos.","title":"Leer los DTC (diagnostic trouble codes)"},{"location":"varios/corsa_d.html#cambio-de-bombillas-fundidas-en-el-display-central","text":"","title":"Cambio de bombillas fundidas en el display central"},{"location":"varios/english.html","text":"Ingl\u00e9s \u00b6 Acr\u00f3nimos: i.e. = \"id est\". Viene del lat\u00edn y significa \"es decir\" ( Fuente ) e.g. = \"exempli gratia\". Viene del lat\u00edn y significa \"por ejemplo\" ( Fuente ) AFAICS = As far as I can see AFAIK = As far as I know ASAP = As soon as possible BTW = By the way FUD = Fear, Uncertainty, and Doubt IANAL = I am not a lawyer (but) IIRC = If I remember correctly IMHO = In my humble opinion IMO = In my opinion IOW = In other words IRL = In real life KISS = Keep it simple stupid LOL = Laughing out loud OMG = Oh my God OTOH = On the other hand PITA = Pain in the Ass ROTFL = Rolling on the floor laughing RTFM = Read The Fine Manual TIA = Thanks in advance TOC = Table of Contents WTF? = What the f***? WYSIWYG = What You See Is What You Get YMMV = Your mileage may vary","title":"Ingl\u00e9s"},{"location":"varios/english.html#ingles","text":"Acr\u00f3nimos: i.e. = \"id est\". Viene del lat\u00edn y significa \"es decir\" ( Fuente ) e.g. = \"exempli gratia\". Viene del lat\u00edn y significa \"por ejemplo\" ( Fuente ) AFAICS = As far as I can see AFAIK = As far as I know ASAP = As soon as possible BTW = By the way FUD = Fear, Uncertainty, and Doubt IANAL = I am not a lawyer (but) IIRC = If I remember correctly IMHO = In my humble opinion IMO = In my opinion IOW = In other words IRL = In real life KISS = Keep it simple stupid LOL = Laughing out loud OMG = Oh my God OTOH = On the other hand PITA = Pain in the Ass ROTFL = Rolling on the floor laughing RTFM = Read The Fine Manual TIA = Thanks in advance TOC = Table of Contents WTF? = What the f***? WYSIWYG = What You See Is What You Get YMMV = Your mileage may vary","title":"Ingl\u00e9s"},{"location":"varios/hogar.html","text":"Hogar \u00b6 Quitar olor a humedad de ropa \u00b6 El olor se produce porque la ropa ha acumulado esporas de moho. Se pueden eliminar con alguno o varios de los siguientes productos: Vinagre blanco Bicarbonato de sodio Borax Introduciremos uno o varios de estos productos durante el lavado. Lo mejor es usar agua caliente para asegurar la eliminaci\u00f3n de las esporas de moho. Si no puede usarse agua caliente, seguramente habr\u00e1 que repetir el proceso entre varios lavados. Lo mejor es esperar a que la cuba est\u00e9 llena de agua para aportar el producto o productos directamente sobre ella, pero si la lavadora no lo permite (la mayor\u00eda), mezclar con 1 taza de agua caliente y usa el dispensador de detergente l\u00edquido. Varias opciones: Utilizar una taza de uno de los tres productos listados al principio. Si la ropa tiene un fuerte olor a humedad, mezclar 1/3 de taza de bicarbonato de sodio en 1 taza de vinagre blanco. Secar la ropa preferiblemente al sol. Repetir el procedimiento hasta que desaparezca el olor a humedad. Si en pocos d\u00edas, el olor a humedad vuelve a aparecer dejar la prenda en remojo durante 30 minutos en agua tibia con vinagre o con media taza de bicarbonato de sodio. Usos del bicarbonato de sodio para desodorizar \u00b6 Refrigerador : Coloque un bol con 3 o 4 cucharadas de Bicarbonato de Sodio en la parte trasera de la nevera o del congelador para neutralizar olores. Dejar actuar y cambiar el bicarbonato cada dos meses. Cubos de basura : Para eliminar manchas, incrustaciones y malos olores solo es necesario espolvorear 2 o 3 cucharadas soperas de Bicarbonato de Sodio en el cubo y dejarlo actuar durante toda la noche. A la ma\u00f1ana siguiente enjuague el cubo y s\u00e9quelo bien. Pa\u00f1os de cocina : Deje en remojo los pa\u00f1os toda la noche en un litro de agua caliente con 3 o 4 cucharadas de Bicarbonato de Sodio. Por la ma\u00f1ana, enju\u00e1guelos bien y p\u00f3ngalos a secar. Desag\u00fces : Desodorice los lavabos y desag\u00fces vertiendo \u00bd taza de Bicarbonato de Sodio por el desag\u00fce mientras corre el agua tibia y consiga una correcta neutralizaci\u00f3n de olores. Tuppers : Elimine los olores de los alimentos de tuppers y envases espolvoreando Bicarbonato de Sodio en el interior de los mismos y consiga una desodorizaci\u00f3n eficaz. Esponjas : Para eliminar los malos olores de las esponjas, rem\u00f3jelas en una soluci\u00f3n de 4 cucharadas de Bicarbonato de Sodio disuelto en 1 litro de agua tibia. Guantes de fregar : A\u00f1ada un poco de Bicarbonato de Sodio en el interior de los guantes (si lo cree necesario puede guardarlos con bicarbonato en contacto con el exterior). Deje actuar durante unas horas. Despu\u00e9s, saque el bicarbonato y dele la vuelta a los guantes para eliminar bien los restos de polvo del interior. Puede repetir la operaci\u00f3n cada vez que sea necesario. Ropa de cama : A\u00f1ada \u00bd taza de Bicarbonato de Sodio al ciclo de enjuague para conseguir unas s\u00e1banas y toallas m\u00e1s frescas y suaves. Armarios : Coloque un recipiente abierto con 3 o 4 cucharadas de Bicarbonato de Sodio en un estante de su armario para mantener un olor fresco. Naftalina : Para eliminar el olor a naftalina de la ropa a\u00f1ada \u00bd taza de Bicarbonato de Sodio durante el proceso de lavado, es decir, cuando la lavadora est\u00e9 llena de agua. Cesta de ropa sucia : Para evitar los malos olores procedentes de la ropa sucia espolvoree el cesto de lavander\u00eda con un poco de Bicarbonato de Sodio cada d\u00eda. Ropa deportiva : Para eliminar los malos olores de la bolsa de deporte, zapatillas, ropa deportiva, solo es necesario espolvorear con Bicarbonato de Sodio. Deje actuar toda la noche y a la ma\u00f1ana siguiente l\u00e1velos con normalidad. Zapatos : Desodorice de manera natural sus zapatos espolvoreando Bicarbonato de Sodio sobre ellos y consiga eliminar el mal olor a pies. Coche : Coloque un recipiente peque\u00f1o con 2 o 3 cucharadas de Bicarbonato de Sodio en el interior de su coche y deje actuar. Cambie el bicarbonato cada semana o cada 10 d\u00edas para asegurar la absorci\u00f3n de los malos olores de su coche. Maletas : Espolvoree Bicarbonato de Sodio en el interior del equipaje para quitar el mal olor de las maletas cerradas y guardadas durante largo tiempo. Otros usos del bicarbonato de sodio \u00b6 Limpieza de tapicer\u00edas : Espolvoree el sof\u00e1 o sill\u00f3n con Bicarbonato de Sodio, d\u00e9jelo actuar durante 30 minutos y cep\u00edllelos despu\u00e9s. Si lo prefiere, tambi\u00e9n puede disolver el bicarbonato en agua tibia y frotar suavemente con un trapo o esponja para eliminar las manchas, finalmente enjuague bien y deje secar. Colchones : Limpie su colch\u00f3n en profundidad, neutral\u00edcelo de malos olores y prot\u00e9jalo de posibles \u00e1caros y g\u00e9rmenes que se adhieran entre sus tejidos espolvoreando Bicarbonato de Sodio sobre el colch\u00f3n. Deje reposar durante dos o tres horas y retire el bicarbonato con ayuda de un aspirador, o en su defecto, con un trapo seco. Legumbre : Deje en remojo las legumbres durante toda la noche en una soluci\u00f3n de 1 cucharada de Bicarbonato de Sodio especial Alimentaci\u00f3n por litro de agua. A la ma\u00f1ana siguiente, tire el agua del remojo y a\u00f1ada una cucharadita de bicarbonato al agua de cocci\u00f3n para hacer que las legumbres se ablanden antes y se hagan m\u00e1s digeribles. Mal olor cocci\u00f3n col : Para evitar el mal olor al cocer alimentos como la coliflor, solo es necesario a\u00f1adir una cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua de cocci\u00f3n. Huevos duros : Agregue media cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua en la que hierva los huevos para poder pelarlos posteriormente con mayor facilidad. Prevenci\u00f3n mal aliento y caries : Disuelva una cucharadita de Bicarbonato de Sodio en un vaso de agua tibia o fr\u00eda. Haga enjuagues con ella, haciendo g\u00e1rgaras y escupiendo el agua. Finalmente, enjuague su boca con agua fresca. Desodorante : A\u00f1ada una pizca de Bicarbonato de Sodio mezclado con agua para conseguir una pasta desodorante natural y eficaz. Verrugas : Mezcle 1 cucharada sopera de Bicarbonato de Sodio en 1/3 de cucharada sopera de agua. Aplique la pasta sobre la verruga y cubra con una tirita, renovando la aplicaci\u00f3n por lo menos 2 veces al d\u00eda, durante 1 semana. Hongos, mal olor y pies cansados : En una palangana, echar 1 litro de agua caliente o tibia. Disuelva un vasito (aproximadamente 5 o 6 cucharadas soperas) de Bicarbonato de Sodio. A continuaci\u00f3n ponga los pies en remojo durante 10 o15 minutos.","title":"Hogar"},{"location":"varios/hogar.html#hogar","text":"","title":"Hogar"},{"location":"varios/hogar.html#quitar-olor-a-humedad-de-ropa","text":"El olor se produce porque la ropa ha acumulado esporas de moho. Se pueden eliminar con alguno o varios de los siguientes productos: Vinagre blanco Bicarbonato de sodio Borax Introduciremos uno o varios de estos productos durante el lavado. Lo mejor es usar agua caliente para asegurar la eliminaci\u00f3n de las esporas de moho. Si no puede usarse agua caliente, seguramente habr\u00e1 que repetir el proceso entre varios lavados. Lo mejor es esperar a que la cuba est\u00e9 llena de agua para aportar el producto o productos directamente sobre ella, pero si la lavadora no lo permite (la mayor\u00eda), mezclar con 1 taza de agua caliente y usa el dispensador de detergente l\u00edquido. Varias opciones: Utilizar una taza de uno de los tres productos listados al principio. Si la ropa tiene un fuerte olor a humedad, mezclar 1/3 de taza de bicarbonato de sodio en 1 taza de vinagre blanco. Secar la ropa preferiblemente al sol. Repetir el procedimiento hasta que desaparezca el olor a humedad. Si en pocos d\u00edas, el olor a humedad vuelve a aparecer dejar la prenda en remojo durante 30 minutos en agua tibia con vinagre o con media taza de bicarbonato de sodio.","title":"Quitar olor a humedad de ropa"},{"location":"varios/hogar.html#usos-del-bicarbonato-de-sodio-para-desodorizar","text":"Refrigerador : Coloque un bol con 3 o 4 cucharadas de Bicarbonato de Sodio en la parte trasera de la nevera o del congelador para neutralizar olores. Dejar actuar y cambiar el bicarbonato cada dos meses. Cubos de basura : Para eliminar manchas, incrustaciones y malos olores solo es necesario espolvorear 2 o 3 cucharadas soperas de Bicarbonato de Sodio en el cubo y dejarlo actuar durante toda la noche. A la ma\u00f1ana siguiente enjuague el cubo y s\u00e9quelo bien. Pa\u00f1os de cocina : Deje en remojo los pa\u00f1os toda la noche en un litro de agua caliente con 3 o 4 cucharadas de Bicarbonato de Sodio. Por la ma\u00f1ana, enju\u00e1guelos bien y p\u00f3ngalos a secar. Desag\u00fces : Desodorice los lavabos y desag\u00fces vertiendo \u00bd taza de Bicarbonato de Sodio por el desag\u00fce mientras corre el agua tibia y consiga una correcta neutralizaci\u00f3n de olores. Tuppers : Elimine los olores de los alimentos de tuppers y envases espolvoreando Bicarbonato de Sodio en el interior de los mismos y consiga una desodorizaci\u00f3n eficaz. Esponjas : Para eliminar los malos olores de las esponjas, rem\u00f3jelas en una soluci\u00f3n de 4 cucharadas de Bicarbonato de Sodio disuelto en 1 litro de agua tibia. Guantes de fregar : A\u00f1ada un poco de Bicarbonato de Sodio en el interior de los guantes (si lo cree necesario puede guardarlos con bicarbonato en contacto con el exterior). Deje actuar durante unas horas. Despu\u00e9s, saque el bicarbonato y dele la vuelta a los guantes para eliminar bien los restos de polvo del interior. Puede repetir la operaci\u00f3n cada vez que sea necesario. Ropa de cama : A\u00f1ada \u00bd taza de Bicarbonato de Sodio al ciclo de enjuague para conseguir unas s\u00e1banas y toallas m\u00e1s frescas y suaves. Armarios : Coloque un recipiente abierto con 3 o 4 cucharadas de Bicarbonato de Sodio en un estante de su armario para mantener un olor fresco. Naftalina : Para eliminar el olor a naftalina de la ropa a\u00f1ada \u00bd taza de Bicarbonato de Sodio durante el proceso de lavado, es decir, cuando la lavadora est\u00e9 llena de agua. Cesta de ropa sucia : Para evitar los malos olores procedentes de la ropa sucia espolvoree el cesto de lavander\u00eda con un poco de Bicarbonato de Sodio cada d\u00eda. Ropa deportiva : Para eliminar los malos olores de la bolsa de deporte, zapatillas, ropa deportiva, solo es necesario espolvorear con Bicarbonato de Sodio. Deje actuar toda la noche y a la ma\u00f1ana siguiente l\u00e1velos con normalidad. Zapatos : Desodorice de manera natural sus zapatos espolvoreando Bicarbonato de Sodio sobre ellos y consiga eliminar el mal olor a pies. Coche : Coloque un recipiente peque\u00f1o con 2 o 3 cucharadas de Bicarbonato de Sodio en el interior de su coche y deje actuar. Cambie el bicarbonato cada semana o cada 10 d\u00edas para asegurar la absorci\u00f3n de los malos olores de su coche. Maletas : Espolvoree Bicarbonato de Sodio en el interior del equipaje para quitar el mal olor de las maletas cerradas y guardadas durante largo tiempo.","title":"Usos del bicarbonato de sodio para desodorizar"},{"location":"varios/hogar.html#otros-usos-del-bicarbonato-de-sodio","text":"Limpieza de tapicer\u00edas : Espolvoree el sof\u00e1 o sill\u00f3n con Bicarbonato de Sodio, d\u00e9jelo actuar durante 30 minutos y cep\u00edllelos despu\u00e9s. Si lo prefiere, tambi\u00e9n puede disolver el bicarbonato en agua tibia y frotar suavemente con un trapo o esponja para eliminar las manchas, finalmente enjuague bien y deje secar. Colchones : Limpie su colch\u00f3n en profundidad, neutral\u00edcelo de malos olores y prot\u00e9jalo de posibles \u00e1caros y g\u00e9rmenes que se adhieran entre sus tejidos espolvoreando Bicarbonato de Sodio sobre el colch\u00f3n. Deje reposar durante dos o tres horas y retire el bicarbonato con ayuda de un aspirador, o en su defecto, con un trapo seco. Legumbre : Deje en remojo las legumbres durante toda la noche en una soluci\u00f3n de 1 cucharada de Bicarbonato de Sodio especial Alimentaci\u00f3n por litro de agua. A la ma\u00f1ana siguiente, tire el agua del remojo y a\u00f1ada una cucharadita de bicarbonato al agua de cocci\u00f3n para hacer que las legumbres se ablanden antes y se hagan m\u00e1s digeribles. Mal olor cocci\u00f3n col : Para evitar el mal olor al cocer alimentos como la coliflor, solo es necesario a\u00f1adir una cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua de cocci\u00f3n. Huevos duros : Agregue media cucharadita de Bicarbonato de Sodio especial Alimentaci\u00f3n al agua en la que hierva los huevos para poder pelarlos posteriormente con mayor facilidad. Prevenci\u00f3n mal aliento y caries : Disuelva una cucharadita de Bicarbonato de Sodio en un vaso de agua tibia o fr\u00eda. Haga enjuagues con ella, haciendo g\u00e1rgaras y escupiendo el agua. Finalmente, enjuague su boca con agua fresca. Desodorante : A\u00f1ada una pizca de Bicarbonato de Sodio mezclado con agua para conseguir una pasta desodorante natural y eficaz. Verrugas : Mezcle 1 cucharada sopera de Bicarbonato de Sodio en 1/3 de cucharada sopera de agua. Aplique la pasta sobre la verruga y cubra con una tirita, renovando la aplicaci\u00f3n por lo menos 2 veces al d\u00eda, durante 1 semana. Hongos, mal olor y pies cansados : En una palangana, echar 1 litro de agua caliente o tibia. Disuelva un vasito (aproximadamente 5 o 6 cucharadas soperas) de Bicarbonato de Sodio. A continuaci\u00f3n ponga los pies en remojo durante 10 o15 minutos.","title":"Otros usos del bicarbonato de sodio"},{"location":"varios/links.html","text":"Enlaces \u00b6 Tutoriales \u00b6 Eclipse And Java For Total Beginners :exclamation: UNIX Redirecci\u00f3n de salidas en UNIX Variables en UNIX Variables importantes en UNIX Configuraci\u00f3n de terminales en UNIX Subversion Cheat Sheets \u00b6 Cheat Sheets Cheat Sheets Cheat Sheets Subversion Markdown \u00datiles \u00b6 Copy Paste Character : Para copiar al portapapeles caracteres que no aparecen en nuestro teclado. Pastebin : Para pegar logs y trozos grandes de texto que luego linkar en foros o para pasar a otras personas. JSFiddle : Prototipado HTML/CSS/JS. Debuggex : Editor de expresiones regulares (recomendado por Carlos Fenollosa). RegExr : Learn, Build & Test RegEx. eBooks \u00b6 Looking for free Kobo books? Here are 9 great sites to explore Project Gutenberg Smashwords Internet Archive Open Library Feedbooks Goodreads ManyBooks DigiLibraries","title":"Enlaces"},{"location":"varios/links.html#enlaces","text":"","title":"Enlaces"},{"location":"varios/links.html#tutoriales","text":"Eclipse And Java For Total Beginners :exclamation: UNIX Redirecci\u00f3n de salidas en UNIX Variables en UNIX Variables importantes en UNIX Configuraci\u00f3n de terminales en UNIX Subversion","title":"Tutoriales"},{"location":"varios/links.html#cheat-sheets","text":"Cheat Sheets Cheat Sheets Cheat Sheets Subversion Markdown","title":"Cheat Sheets"},{"location":"varios/links.html#utiles","text":"Copy Paste Character : Para copiar al portapapeles caracteres que no aparecen en nuestro teclado. Pastebin : Para pegar logs y trozos grandes de texto que luego linkar en foros o para pasar a otras personas. JSFiddle : Prototipado HTML/CSS/JS. Debuggex : Editor de expresiones regulares (recomendado por Carlos Fenollosa). RegExr : Learn, Build & Test RegEx.","title":"\u00datiles"},{"location":"varios/links.html#ebooks","text":"Looking for free Kobo books? Here are 9 great sites to explore Project Gutenberg Smashwords Internet Archive Open Library Feedbooks Goodreads ManyBooks DigiLibraries","title":"eBooks"},{"location":"varios/suenyo.html","text":"Sue\u00f1o \u00b6 Enlaces \u00b6 Auriculares para dormir. \u00bfCu\u00e1les es mejor comprar en 2018? Hibermate 2016 + Peltor =Super Comfortable Sleep Hibermate - Amazon 3M PELTOR Kit de higiene para Orejeras Optime III, HY54 - Amazon beeswift HY54 Peltor optime 3 Higiene Kit PR - Amazon Itian Ultra Thin auriculares, Soft lana orejeras auriculares m\u00e1s c\u00f3modos para dormir Ultra Soft Foam Earplugs Tapones para los o\u00eddos de silicona SleepDreamz (4 pares)","title":"Sue\u00f1o"},{"location":"varios/suenyo.html#sueno","text":"","title":"Sue\u00f1o"},{"location":"varios/suenyo.html#enlaces","text":"Auriculares para dormir. \u00bfCu\u00e1les es mejor comprar en 2018? Hibermate 2016 + Peltor =Super Comfortable Sleep Hibermate - Amazon 3M PELTOR Kit de higiene para Orejeras Optime III, HY54 - Amazon beeswift HY54 Peltor optime 3 Higiene Kit PR - Amazon Itian Ultra Thin auriculares, Soft lana orejeras auriculares m\u00e1s c\u00f3modos para dormir Ultra Soft Foam Earplugs Tapones para los o\u00eddos de silicona SleepDreamz (4 pares)","title":"Enlaces"},{"location":"varios/viajes.html","text":"Viajes \u00b6 Comunicaciones \u00b6 Prepaid SIM Cards With Data For Travelers : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a. Cheap mobile internet and calls abroad with Holiday Phone : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a. Salud \u00b6 World Nomads Travel Insurance : Seguro de salud para viajes recomendado por \u00c1ngel Alegre .","title":"Viajes"},{"location":"varios/viajes.html#viajes","text":"","title":"Viajes"},{"location":"varios/viajes.html#comunicaciones","text":"Prepaid SIM Cards With Data For Travelers : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a. Cheap mobile internet and calls abroad with Holiday Phone : Permite comprar una tarjeta SIM de un pa\u00eds extranjero antes de ir a \u00e9l, es decir, entreg\u00e1ndola en Espa\u00f1a.","title":"Comunicaciones"},{"location":"varios/viajes.html#salud","text":"World Nomads Travel Insurance : Seguro de salud para viajes recomendado por \u00c1ngel Alegre .","title":"Salud"}]}